# Issue 31954: Hyperplane Transformation Matrix

archive/issues_031717.json:
```json
{
    "assignees": [],
    "body": "Given two hyperplanes in projective space, there exist many PGL elements which map one hyperplane to the other. We add a method (hyperplane_transformation_matrix) to projective space to compute such a PGL element.\n\nDepends on #31906\n\nCC:  @bhutz\n\nKeywords: **gsoc2021**\n\nBranch/Commit: **[`b82de34`](https://github.com/sagemath/sagetrac-mirror/commit/b82de340fdc4cc7426ef3532996fa3ac3dbe9326)**\n\nReviewer: **Ben Hutz**\n\nAuthor: **Alexander Galarraga**\n\nComponent: **algebraic geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31954_\n\n",
    "closed_at": "2021-07-25T13:25:39Z",
    "created_at": "2021-06-11T03:45:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Hyperplane Transformation Matrix",
    "type": "issue",
    "updated_at": "2021-07-25T13:25:39Z",
    "url": "https://github.com/sagemath/sage/issues/31954",
    "user": "https://github.com/EnderWannabe"
}
```
Given two hyperplanes in projective space, there exist many PGL elements which map one hyperplane to the other. We add a method (hyperplane_transformation_matrix) to projective space to compute such a PGL element.

Depends on #31906

CC:  @bhutz

Keywords: **gsoc2021**

Branch/Commit: **[`b82de34`](https://github.com/sagemath/sagetrac-mirror/commit/b82de340fdc4cc7426ef3532996fa3ac3dbe9326)**

Reviewer: **Ben Hutz**

Author: **Alexander Galarraga**

Component: **algebraic geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/31954_





---

archive/issue_events_442781.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-06-11T03:45:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442781"
}
```



---

archive/issue_events_442782.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-06-11T03:45:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "c: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442782"
}
```



---

archive/issue_events_442783.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-06-11T03:45:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442783"
}
```



---

archive/issue_events_442784.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-06-11T03:45:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442784"
}
```



---

archive/issue_comments_514210.json:
```json
{
    "body": "Branch: **[u/gh-EnderWannabe/hyperplane_transform](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/hyperplane_transform)**",
    "created_at": "2021-06-11T03:46:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514210",
    "user": "https://github.com/EnderWannabe"
}
```

Branch: **[u/gh-EnderWannabe/hyperplane_transform](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/hyperplane_transform)**



---

archive/issue_comments_514211.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/492e4bb06fc994b307ce4df2a3ba04efa0233bdd\"><code>492e4bb</code></a></td><td><code>31954: removal of tickets 31944 and 31906 from 31954</code></td></tr></table>\n",
    "created_at": "2021-06-14T17:05:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514211",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/492e4bb06fc994b307ce4df2a3ba04efa0233bdd"><code>492e4bb</code></a></td><td><code>31954: removal of tickets 31944 and 31906 from 31954</code></td></tr></table>




---

archive/issue_comments_514212.json:
```json
{
    "body": "Commit: **[`492e4bb`](https://github.com/sagemath/sagetrac-mirror/commit/492e4bb06fc994b307ce4df2a3ba04efa0233bdd)**",
    "created_at": "2021-06-14T17:05:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514212",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`492e4bb`](https://github.com/sagemath/sagetrac-mirror/commit/492e4bb06fc994b307ce4df2a3ba04efa0233bdd)**



---

archive/issue_comments_514213.json:
```json
{
    "body": "Changed commit from **[`492e4bb`](https://github.com/sagemath/sagetrac-mirror/commit/492e4bb06fc994b307ce4df2a3ba04efa0233bdd)** to **[`1eb858e`](https://github.com/sagemath/sagetrac-mirror/commit/1eb858e88ff1c38072e93a36e7abdd828132b106)**",
    "created_at": "2021-06-14T18:47:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514213",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`492e4bb`](https://github.com/sagemath/sagetrac-mirror/commit/492e4bb06fc994b307ce4df2a3ba04efa0233bdd)** to **[`1eb858e`](https://github.com/sagemath/sagetrac-mirror/commit/1eb858e88ff1c38072e93a36e7abdd828132b106)**



---

archive/issue_comments_514214.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1eb858e88ff1c38072e93a36e7abdd828132b106\"><code>1eb858e</code></a></td><td><code>39154: reduced memory usage</code></td></tr></table>\n",
    "created_at": "2021-06-14T18:47:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514214",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1eb858e88ff1c38072e93a36e7abdd828132b106"><code>1eb858e</code></a></td><td><code>39154: reduced memory usage</code></td></tr></table>




---

archive/issue_events_442785.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-06-14T18:47:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442785"
}
```



---

archive/issue_events_442786.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-06-16T21:59:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442786"
}
```



---

archive/issue_events_442787.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-06-16T21:59:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442787"
}
```



---

archive/issue_comments_514215.json:
```json
{
    "body": "Reviewer: **Ben Hutz**",
    "created_at": "2021-06-16T21:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514215",
    "user": "https://github.com/bhutz"
}
```

Reviewer: **Ben Hutz**



---

archive/issue_comments_514216.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI didn't get to fully finish my reviewing, but i wanted to get you some feedback today. This is looking good for the most part. Here is some feedback\n\n- add a check to the examples like:\n\n```\nplane2(m*P(1,0,-1,0))\n```\n\n- add some sanity checking that your procedures to find points really do end up with the right number\n\n- need some number field examples\n\n- relative number fields breaks:\n\n```\nK.<v>=CyclotomicField(3)\nR.<t>=K[]\nF.<w>=K.extension(t^5+2)\nP.<x,y,z> = ProjectiveSpace(F, 2)\nplane1 = P.subscheme(x - 2*w*y + z)\nplane2 = P.subscheme(x + w*y + z)\nm=P.hyperplane_transformation_matrix(plane1, plane2)\n```\n\n- errr..random bug in Sage?\n\n```\nK.<v>=CyclotomicField(3)\nR.<t>=K[]\nF.<w>=K.extension(t^5+2)\nG.<u> = F.absolute_field()\nP.<x,y,z> = ProjectiveSpace(G, 2)\nplane1 = P.subscheme(x - 2*u*y + z)\nplane2 = P.subscheme(x + u*y + z)\nm=P.hyperplane_transformation_matrix(plane1, plane2)\n```",
    "created_at": "2021-06-16T21:59:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514216",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:5" align="right">comment:5</div>

I didn't get to fully finish my reviewing, but i wanted to get you some feedback today. This is looking good for the most part. Here is some feedback

- add a check to the examples like:

```
plane2(m*P(1,0,-1,0))
```

- add some sanity checking that your procedures to find points really do end up with the right number

- need some number field examples

- relative number fields breaks:

```
K.<v>=CyclotomicField(3)
R.<t>=K[]
F.<w>=K.extension(t^5+2)
P.<x,y,z> = ProjectiveSpace(F, 2)
plane1 = P.subscheme(x - 2*w*y + z)
plane2 = P.subscheme(x + w*y + z)
m=P.hyperplane_transformation_matrix(plane1, plane2)
```

- errr..random bug in Sage?

```
K.<v>=CyclotomicField(3)
R.<t>=K[]
F.<w>=K.extension(t^5+2)
G.<u> = F.absolute_field()
P.<x,y,z> = ProjectiveSpace(G, 2)
plane1 = P.subscheme(x - 2*u*y + z)
plane2 = P.subscheme(x + u*y + z)
m=P.hyperplane_transformation_matrix(plane1, plane2)
```



---

archive/issue_comments_514217.json:
```json
{
    "body": "Changed commit from **[`1eb858e`](https://github.com/sagemath/sagetrac-mirror/commit/1eb858e88ff1c38072e93a36e7abdd828132b106)** to **[`e517302`](https://github.com/sagemath/sagetrac-mirror/commit/e5173023c55d55c2721f641ce00794d4d7f908bb)**",
    "created_at": "2021-06-17T14:04:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514217",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1eb858e`](https://github.com/sagemath/sagetrac-mirror/commit/1eb858e88ff1c38072e93a36e7abdd828132b106)** to **[`e517302`](https://github.com/sagemath/sagetrac-mirror/commit/e5173023c55d55c2721f641ce00794d4d7f908bb)**



---

archive/issue_comments_514218.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5173023c55d55c2721f641ce00794d4d7f908bb\"><code>e517302</code></a></td><td><code>31954: fixed issues with points of bounded height, added more examples and comments</code></td></tr></table>\n",
    "created_at": "2021-06-17T14:04:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514218",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5173023c55d55c2721f641ce00794d4d7f908bb"><code>e517302</code></a></td><td><code>31954: fixed issues with points of bounded height, added more examples and comments</code></td></tr></table>




---

archive/issue_comments_514219.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85a671a784c0ca8ed7165ab9073b9da12e96b202\"><code>85a671a</code></a></td><td><code>31906: added tests, moved to be a method for projective space over a ring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11108d231a0f4ecb9ca16f16a988cf79efd25499\"><code>11108d2</code></a></td><td><code>Merge branch 'develop' into point_matrix_improvement</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/897429b3b029675f11fbb225abc6e283b7f06491\"><code>897429b</code></a></td><td><code>31906: cleaned up code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e21868f34ba3b96e986c57a29039b52592220ca\"><code>2e21868</code></a></td><td><code>31906: removed 31896, added whitespace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/267cb6dd51c3ad9dc7fd9c7f4ba70ea47530a3ef\"><code>267cb6d</code></a></td><td><code>31906: stopped normalizing for non exact fields, added warning</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3fbdf2715a6f724968ca532cd036f274d0f60186\"><code>3fbdf27</code></a></td><td><code>31906: non exact to non-exact</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eaa4424537802bf4ef354203b6c151dce7e460cd\"><code>eaa4424</code></a></td><td><code>31906: fix for docs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc0ff91ee1109d34ee19f1e3192ef10515bd5fa1\"><code>cc0ff91</code></a></td><td><code>Merge branch 'point_matrix_improvement' into ring_hyperplane_transform</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d59310b06423435f2c4ec464c009fca3cabb7f0\"><code>3d59310</code></a></td><td><code>31954: moved method to projective space over a ring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1476d8568f280022d31a382921279f92b18a766\"><code>d1476d8</code></a></td><td><code>31954: added sanity check with error message</code></td></tr></table>\n",
    "created_at": "2021-06-17T18:10:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514219",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85a671a784c0ca8ed7165ab9073b9da12e96b202"><code>85a671a</code></a></td><td><code>31906: added tests, moved to be a method for projective space over a ring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11108d231a0f4ecb9ca16f16a988cf79efd25499"><code>11108d2</code></a></td><td><code>Merge branch 'develop' into point_matrix_improvement</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/897429b3b029675f11fbb225abc6e283b7f06491"><code>897429b</code></a></td><td><code>31906: cleaned up code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e21868f34ba3b96e986c57a29039b52592220ca"><code>2e21868</code></a></td><td><code>31906: removed 31896, added whitespace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/267cb6dd51c3ad9dc7fd9c7f4ba70ea47530a3ef"><code>267cb6d</code></a></td><td><code>31906: stopped normalizing for non exact fields, added warning</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3fbdf2715a6f724968ca532cd036f274d0f60186"><code>3fbdf27</code></a></td><td><code>31906: non exact to non-exact</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eaa4424537802bf4ef354203b6c151dce7e460cd"><code>eaa4424</code></a></td><td><code>31906: fix for docs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc0ff91ee1109d34ee19f1e3192ef10515bd5fa1"><code>cc0ff91</code></a></td><td><code>Merge branch 'point_matrix_improvement' into ring_hyperplane_transform</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d59310b06423435f2c4ec464c009fca3cabb7f0"><code>3d59310</code></a></td><td><code>31954: moved method to projective space over a ring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1476d8568f280022d31a382921279f92b18a766"><code>d1476d8</code></a></td><td><code>31954: added sanity check with error message</code></td></tr></table>




---

archive/issue_comments_514220.json:
```json
{
    "body": "Changed commit from **[`e517302`](https://github.com/sagemath/sagetrac-mirror/commit/e5173023c55d55c2721f641ce00794d4d7f908bb)** to **[`d1476d8`](https://github.com/sagemath/sagetrac-mirror/commit/d1476d8568f280022d31a382921279f92b18a766)**",
    "created_at": "2021-06-17T18:10:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514220",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e517302`](https://github.com/sagemath/sagetrac-mirror/commit/e5173023c55d55c2721f641ce00794d4d7f908bb)** to **[`d1476d8`](https://github.com/sagemath/sagetrac-mirror/commit/d1476d8568f280022d31a382921279f92b18a766)**



---

archive/issue_events_442788.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-06-17T18:11:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442788"
}
```



---

archive/issue_events_442789.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-06-17T18:11:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442789"
}
```



---

archive/issue_comments_514221.json:
```json
{
    "body": "Dependencies: **31906**",
    "created_at": "2021-06-17T18:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514221",
    "user": "https://github.com/EnderWannabe"
}
```

Dependencies: **31906**



---

archive/issue_events_442790.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-06-17T18:36:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442790"
}
```



---

archive/issue_events_442791.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-06-17T18:36:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442791"
}
```



---

archive/issue_comments_514222.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nTwo comments here.\n\n- I understand the desire for the report message in the error, but that is not standard practice for a release version of Sage.\n\n- Now that you've expanded the scope of fields, the normalization issue is cropping up again. With your call to .point_transformation_matrix, it is always normalizing, since there is no way to control that parameter.",
    "created_at": "2021-06-17T18:36:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514222",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:9" align="right">comment:9</div>

Two comments here.

- I understand the desire for the report message in the error, but that is not standard practice for a release version of Sage.

- Now that you've expanded the scope of fields, the normalization issue is cropping up again. With your call to .point_transformation_matrix, it is always normalizing, since there is no way to control that parameter.



---

archive/issue_comments_514223.json:
```json
{
    "body": "Changed commit from **[`d1476d8`](https://github.com/sagemath/sagetrac-mirror/commit/d1476d8568f280022d31a382921279f92b18a766)** to **[`27dea94`](https://github.com/sagemath/sagetrac-mirror/commit/27dea9472ab0e424a7a5d96c656e7b3cb9475c58)**",
    "created_at": "2021-06-17T19:29:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514223",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d1476d8`](https://github.com/sagemath/sagetrac-mirror/commit/d1476d8568f280022d31a382921279f92b18a766)** to **[`27dea94`](https://github.com/sagemath/sagetrac-mirror/commit/27dea9472ab0e424a7a5d96c656e7b3cb9475c58)**



---

archive/issue_comments_514224.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27dea9472ab0e424a7a5d96c656e7b3cb9475c58\"><code>27dea94</code></a></td><td><code>31954: added examples for finite fields and polynomial rings</code></td></tr></table>\n",
    "created_at": "2021-06-17T19:29:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514224",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27dea9472ab0e424a7a5d96c656e7b3cb9475c58"><code>27dea94</code></a></td><td><code>31954: added examples for finite fields and polynomial rings</code></td></tr></table>




---

archive/issue_comments_514225.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI'm not seeing issues with normalization. Normalization might fail when the base field isn't exact, but it should be disabled in those cases. Could you give an example?",
    "created_at": "2021-06-17T19:30:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514225",
    "user": "https://github.com/EnderWannabe"
}
```

<div id="comment:11" align="right">comment:11</div>

I'm not seeing issues with normalization. Normalization might fail when the base field isn't exact, but it should be disabled in those cases. Could you give an example?



---

archive/issue_comments_514226.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\n\n```\nK=CC\nP.<x,y,z,w> = ProjectiveSpace(K, 3)\nplane1 = P.subscheme(x + K(sqrt(2))*y +4*z)\nplane2 = P.subscheme(2*x + CC(3)*y + z)\nm=P.hyperplane_transformation_matrix(plane1, plane2)\n```",
    "created_at": "2021-06-17T19:38:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514226",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:12" align="right">comment:12</div>


```
K=CC
P.<x,y,z,w> = ProjectiveSpace(K, 3)
plane1 = P.subscheme(x + K(sqrt(2))*y +4*z)
plane2 = P.subscheme(2*x + CC(3)*y + z)
m=P.hyperplane_transformation_matrix(plane1, plane2)
```



---

archive/issue_comments_514227.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThat division error is caused when trying to invert the matrix m_source on line 1500, not from attempting to normalize. Its a precision issue with the complexes - that works when the reals are used.\n\nI think the bug is coming from the call to solve right in the helper function get_matrix, as solve right approximates. I'm not sure if there is any solution except adding a warning about precision fields.",
    "created_at": "2021-06-17T21:00:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514227",
    "user": "https://github.com/EnderWannabe"
}
```

<div id="comment:13" align="right">comment:13</div>

That division error is caused when trying to invert the matrix m_source on line 1500, not from attempting to normalize. Its a precision issue with the complexes - that works when the reals are used.

I think the bug is coming from the call to solve right in the helper function get_matrix, as solve right approximates. I'm not sure if there is any solution except adding a warning about precision fields.



---

archive/issue_comments_514228.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAnother normalization issue:\n\n```\nK.<t>=GF(2)[]\nP.<x,y,z,w> = ProjectiveSpace(K, 3)\nplane1 = P.subscheme(t*x + K(2)*y + z)\nplane2 = P.subscheme(2*x + t*y + z)\nm=P.hyperplane_transformation_matrix(plane1, plane2)\n```",
    "created_at": "2021-06-22T15:07:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514228",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:14" align="right">comment:14</div>

Another normalization issue:

```
K.<t>=GF(2)[]
P.<x,y,z,w> = ProjectiveSpace(K, 3)
plane1 = P.subscheme(t*x + K(2)*y + z)
plane2 = P.subscheme(2*x + t*y + z)
m=P.hyperplane_transformation_matrix(plane1, plane2)
```



---

archive/issue_comments_514229.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThis one appears to be an issue with lcm on polynomial rings. Opened ticket #32033 to deal with that bug.",
    "created_at": "2021-06-22T17:16:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514229",
    "user": "https://github.com/EnderWannabe"
}
```

<div id="comment:15" align="right">comment:15</div>

This one appears to be an issue with lcm on polynomial rings. Opened ticket #32033 to deal with that bug.



---

archive/issue_events_442792.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-06-22T17:16:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442792"
}
```



---

archive/issue_events_442793.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2021-06-22T17:16:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442793"
}
```



---

archive/issue_comments_514230.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nok. Then I think we're good on this one.",
    "created_at": "2021-06-24T13:59:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514230",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:17" align="right">comment:17</div>

ok. Then I think we're good on this one.



---

archive/issue_events_442794.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-06-24T13:59:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442794"
}
```



---

archive/issue_events_442795.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-06-24T13:59:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442795"
}
```



---

archive/issue_comments_514231.json:
```json
{
    "body": "Changed dependencies from **31906** to **#31906**",
    "created_at": "2021-07-06T00:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514231",
    "user": "https://github.com/tscrim"
}
```

Changed dependencies from **31906** to **#31906**



---

archive/issue_events_442796.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2021-07-09T16:52:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442796"
}
```



---

archive/issue_events_442797.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2021-07-09T16:52:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442797"
}
```



---

archive/issue_comments_514232.json:
```json
{
    "body": "Changed commit from **[`27dea94`](https://github.com/sagemath/sagetrac-mirror/commit/27dea9472ab0e424a7a5d96c656e7b3cb9475c58)** to **[`b82de34`](https://github.com/sagemath/sagetrac-mirror/commit/b82de340fdc4cc7426ef3532996fa3ac3dbe9326)**",
    "created_at": "2021-07-09T16:52:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514232",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`27dea94`](https://github.com/sagemath/sagetrac-mirror/commit/27dea9472ab0e424a7a5d96c656e7b3cb9475c58)** to **[`b82de34`](https://github.com/sagemath/sagetrac-mirror/commit/b82de340fdc4cc7426ef3532996fa3ac3dbe9326)**



---

archive/issue_comments_514233.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8ce4b7d83d24e58a3524f924077a90921707759\"><code>b8ce4b7</code></a></td><td><code>31906: actual fix for warning message</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc36d1997650d6d5772027933d98717468731b67\"><code>dc36d19</code></a></td><td><code>Merge branch 'u/gh-EnderWannabe/point_matrix_improvement' of trac.sagemath.org:sage into point_transformation_improvement</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7e893071ac99e3d9cd76e5ebf01395b922c198c\"><code>e7e8930</code></a></td><td><code>31906: fixed denominator bug</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd508a025517c28f1028e516a5056d8d11b25587\"><code>cd508a0</code></a></td><td><code>31906 - fix spacing in example</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75d877163b34c4cfae33e0220584c2b0fa79a97e\"><code>75d8771</code></a></td><td><code>Merge branch 'u/bhutz/point_matrix_improvement' of trac.sagemath.org:sage into point_transformation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b82de340fdc4cc7426ef3532996fa3ac3dbe9326\"><code>b82de34</code></a></td><td><code>Merge branch 'u/gh-EnderWannabe/hyperplane_transform' of trac.sagemath.org:sage into hyperplane_transform</code></td></tr></table>\n",
    "created_at": "2021-07-09T16:52:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514233",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8ce4b7d83d24e58a3524f924077a90921707759"><code>b8ce4b7</code></a></td><td><code>31906: actual fix for warning message</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc36d1997650d6d5772027933d98717468731b67"><code>dc36d19</code></a></td><td><code>Merge branch 'u/gh-EnderWannabe/point_matrix_improvement' of trac.sagemath.org:sage into point_transformation_improvement</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7e893071ac99e3d9cd76e5ebf01395b922c198c"><code>e7e8930</code></a></td><td><code>31906: fixed denominator bug</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd508a025517c28f1028e516a5056d8d11b25587"><code>cd508a0</code></a></td><td><code>31906 - fix spacing in example</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75d877163b34c4cfae33e0220584c2b0fa79a97e"><code>75d8771</code></a></td><td><code>Merge branch 'u/bhutz/point_matrix_improvement' of trac.sagemath.org:sage into point_transformation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b82de340fdc4cc7426ef3532996fa3ac3dbe9326"><code>b82de34</code></a></td><td><code>Merge branch 'u/gh-EnderWannabe/hyperplane_transform' of trac.sagemath.org:sage into hyperplane_transform</code></td></tr></table>




---

archive/issue_comments_514234.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nPushed an update to dependencies - this ticket is the same, but #31906 had been updated.",
    "created_at": "2021-07-09T16:53:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514234",
    "user": "https://github.com/EnderWannabe"
}
```

<div id="comment:20" align="right">comment:20</div>

Pushed an update to dependencies - this ticket is the same, but #31906 had been updated.



---

archive/issue_events_442798.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-07-12T18:52:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442798"
}
```



---

archive/issue_events_442799.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2021-07-12T18:52:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442799"
}
```



---

archive/issue_comments_514235.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nWith the new #31906 this looks good.",
    "created_at": "2021-07-12T18:52:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514235",
    "user": "https://github.com/bhutz"
}
```

<div id="comment:21" align="right">comment:21</div>

With the new #31906 this looks good.



---

archive/issue_events_442800.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-25T13:25:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442800"
}
```



---

archive/issue_events_442801.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e6ddc3a733bc60894b4d11867f9e42d5a183a5a0",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-07-25T13:25:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31954#event-442801"
}
```



---

archive/issue_comments_514236.json:
```json
{
    "body": "Changed branch from **[u/gh-EnderWannabe/hyperplane_transform](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/hyperplane_transform)** to **[`b82de34`](https://github.com/sagemath/sagetrac-mirror/commit/b82de340fdc4cc7426ef3532996fa3ac3dbe9326)**",
    "created_at": "2021-07-25T13:25:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31954",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31954#issuecomment-514236",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-EnderWannabe/hyperplane_transform](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/hyperplane_transform)** to **[`b82de34`](https://github.com/sagemath/sagetrac-mirror/commit/b82de340fdc4cc7426ef3532996fa3ac3dbe9326)**
