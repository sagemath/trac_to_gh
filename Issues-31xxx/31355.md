# Issue 31355: upgrade lrcalc to 2.1

archive/issues_031118.json:
```json
{
    "assignees": [],
    "body": "lrcalc 2.1 is out https://bitbucket.org/asbuch/lrcalc/src/master/ChangeLog\n\nInstead of rewriting Sage's Python bindings to support the new API, we replace them with a wrapper around the new upstream provided bindings\n\nUpstream:\n\nlrcalclib-2.1.tar.gz (lrcalc): https://sites.math.rutgers.edu/~asbuch/lrcalc/lrcalc-2.1.tar.gz\nlrcalc-2.1.tar.gz (lrcalc_python): https://pypi.io/packages/source/l/lrcalc/lrcalc-2.1.tar.gz\n\nCC:  @antonio-rojas @anneschilling @fchapoton @tscrim @thierry-FreeBSD @orlitzky @mkoeppe @kiwifb @asbuch @slel\n\nKeywords: **upgrade, lrcalc**\n\nBranch/Commit: **[de4fe09](https://github.com/sagemath/sagetrac-mirror/commit/de4fe092f096b568bdd53849c9ac02ef52953ed9)**\n\nReviewer: **Matthias Koeppe, Travis Scrimshaw**\n\nAuthor: **Antonio Rojas, Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31355_\n\n",
    "closed_at": "2022-02-27T22:00:47Z",
    "created_at": "2021-02-07T16:27:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "upgrade lrcalc to 2.1",
    "type": "issue",
    "updated_at": "2022-02-27T22:00:47Z",
    "url": "https://github.com/sagemath/sage/issues/31355",
    "user": "https://github.com/sagetrac-tmonteil"
}
```
lrcalc 2.1 is out https://bitbucket.org/asbuch/lrcalc/src/master/ChangeLog

Instead of rewriting Sage's Python bindings to support the new API, we replace them with a wrapper around the new upstream provided bindings

Upstream:

lrcalclib-2.1.tar.gz (lrcalc): https://sites.math.rutgers.edu/~asbuch/lrcalc/lrcalc-2.1.tar.gz
lrcalc-2.1.tar.gz (lrcalc_python): https://pypi.io/packages/source/l/lrcalc/lrcalc-2.1.tar.gz

CC:  @antonio-rojas @anneschilling @fchapoton @tscrim @thierry-FreeBSD @orlitzky @mkoeppe @kiwifb @asbuch @slel

Keywords: **upgrade, lrcalc**

Branch/Commit: **[de4fe09](https://github.com/sagemath/sagetrac-mirror/commit/de4fe092f096b568bdd53849c9ac02ef52953ed9)**

Reviewer: **Matthias Koeppe, Travis Scrimshaw**

Author: **Antonio Rojas, Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/31355_





---

archive/issue_events_413916.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2021-02-07T16:27:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413916"
}
```



---

archive/issue_events_413917.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2021-02-07T16:27:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20optional",
    "label_color": "000080",
    "label_name": "component: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413917"
}
```



---

archive/issue_events_413918.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2021-02-07T16:27:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413918"
}
```



---

archive/issue_events_413919.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2021-02-07T16:27:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413919"
}
```



---

archive/issue_events_413920.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2021-02-07T16:31:03Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "title_is": "upgrade lrcalc to 2.0",
    "title_was": "upgrade lrslib to 2.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413920"
}
```



---

archive/issue_comments_505771.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,2 @@\n-lrslib 2.0 is out https://bitbucket.org/asbuch/lrcalc/src/master/ChangeLog\n+lrcalc 2.0 is out https://bitbucket.org/asbuch/lrcalc/src/master/ChangeLog\n \n``````\n",
    "created_at": "2021-02-07T16:31:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505771",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,2 @@
-lrslib 2.0 is out https://bitbucket.org/asbuch/lrcalc/src/master/ChangeLog
+lrcalc 2.0 is out https://bitbucket.org/asbuch/lrcalc/src/master/ChangeLog
 
``````




---

archive/issue_comments_505772.json:
```json
{
    "body": "Branch: **[u/tmonteil/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/upgrade_lrcalc_to_2_0)**",
    "created_at": "2021-02-07T17:25:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505772",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Branch: **[u/tmonteil/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/upgrade_lrcalc_to_2_0)**



---

archive/issue_comments_505773.json:
```json
{
    "body": "Commit: **[850f9bc](https://github.com/sagemath/sagetrac-mirror/commit/850f9bc86daa5e592110f6241d77b4950d9083e9)**",
    "created_at": "2021-02-07T17:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505773",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Commit: **[850f9bc](https://github.com/sagemath/sagetrac-mirror/commit/850f9bc86daa5e592110f6241d77b4950d9083e9)**



---

archive/issue_comments_505774.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI get the following error when doctesting:\n\n```\nImportError: /opt/sagemath/sage/local/lib/python3.7/site-packages/sage/libs/lrcalc/lrcalc.cpython-37m-x86_64-linux-gnu.so: undefined symbol: st_new\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/850f9bc86daa5e592110f6241d77b4950d9083e9\">850f9bc</a></td><td><code>#31355 : upgrade lrcalc to 2.0</code></td></tr></table>\n",
    "created_at": "2021-02-07T17:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505774",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:4" align="right">Comment 4</div>

I get the following error when doctesting:

```
ImportError: /opt/sagemath/sage/local/lib/python3.7/site-packages/sage/libs/lrcalc/lrcalc.cpython-37m-x86_64-linux-gnu.so: undefined symbol: st_new
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/850f9bc86daa5e592110f6241d77b4950d9083e9">850f9bc</a></td><td><code>#31355 : upgrade lrcalc to 2.0</code></td></tr></table>




---

archive/issue_comments_505775.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nThis has major API changes. Large parts of lrcalc.pyx needs to be rewritten because the used functions have been removed or modified.",
    "created_at": "2021-02-07T17:47:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505775",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:5" align="right">Comment 5</div>

This has major API changes. Large parts of lrcalc.pyx needs to be rewritten because the used functions have been removed or modified.



---

archive/issue_comments_505776.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nI see, any help welcome !",
    "created_at": "2021-02-07T18:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505776",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:6" align="right">Comment 6</div>

I see, any help welcome !



---

archive/issue_comments_505777.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nThe existing spkg-configure.m4 needs to be updated to detect v2.0 (once it actually works), too.",
    "created_at": "2021-02-11T01:57:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505777",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:8" align="right">Comment 8</div>

The existing spkg-configure.m4 needs to be updated to detect v2.0 (once it actually works), too.



---

archive/issue_comments_505778.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nSome information from Anders:\n\n> I recently put out a new version of my lrcalc program, much of it is\n> rewritten, and some of the most important functions are close to twice as fast\n> as before.\u00a0 Some special cases have also been optimized to run a lot faster.\n\n>\n> I have included some (pure) Python3 bindings in the repository, so I think\n> this update will be easy.\u00a0 But I don't understand Sage well enough to do it\n> myself.\n\nFor reference, some pointers:\n\n- Sage's lrcalc package: https://github.com/sagemath/sagetrac-mirror/blob/develop/build/pkgs/lrcalc\n- Sage's lrcalc bindings: https://github.com/sagemath/sagetrac-mirror/blob/develop/src/sage/libs/lcalc",
    "created_at": "2021-02-16T06:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505778",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:9" align="right">Comment 9</div>

Some information from Anders:

> I recently put out a new version of my lrcalc program, much of it is
> rewritten, and some of the most important functions are close to twice as fast
> as before.  Some special cases have also been optimized to run a lot faster.

>
> I have included some (pure) Python3 bindings in the repository, so I think
> this update will be easy.  But I don't understand Sage well enough to do it
> myself.

For reference, some pointers:

- Sage's lrcalc package: https://github.com/sagemath/sagetrac-mirror/blob/develop/build/pkgs/lrcalc
- Sage's lrcalc bindings: https://github.com/sagemath/sagetrac-mirror/blob/develop/src/sage/libs/lcalc



---

archive/issue_comments_505779.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nThe Python bindings are only in the repository and a bit raw, so probably only useful as examples.  But I expect they are easier to start from than the .h files.",
    "created_at": "2021-02-16T22:25:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505779",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:10" align="right">Comment 10</div>

The Python bindings are only in the repository and a bit raw, so probably only useful as examples.  But I expect they are easier to start from than the .h files.



---

archive/issue_comments_505780.json:
```json
{
    "body": "Changed branch from **[u/tmonteil/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/upgrade_lrcalc_to_2_0)** to **[u/arojas/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/upgrade_lrcalc_to_2_0)**",
    "created_at": "2021-02-21T12:00:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505780",
    "user": "https://github.com/antonio-rojas"
}
```

Changed branch from **[u/tmonteil/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/upgrade_lrcalc_to_2_0)** to **[u/arojas/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/upgrade_lrcalc_to_2_0)**



---

archive/issue_comments_505781.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@asbuch](#comment%3A10):\n> The Python bindings are only in the repository and a bit raw, so probably only useful as examples.  But I expect they are easier to start from than the .h files.\n\nActually, they are almost equivalent to the current bindings in Sage. The attached branch replaces lrcalc.pyx with a thin wrapper over lrcalc's bindings.\n\nIt mostly just translates the output from lrcalc to sage notation. The only function of lrcalc.pyx that isn't straghtforward to port is quantum multiplication: I found no way to recover the q-grading from lrcalc's output, so this is reimplemented in the patch.\n\nThe branch needs an update of lrcalc to include python bindings.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6596bbd453ef12df9bd27aba200cfc85feca08a9\">6596bbd</a></td><td><code>Replace lrcalc.pyx with a wrapper over lrcalc's own Python bindings</code></td></tr></table>\n",
    "created_at": "2021-02-21T12:05:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505781",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@asbuch](#comment%3A10):
> The Python bindings are only in the repository and a bit raw, so probably only useful as examples.  But I expect they are easier to start from than the .h files.

Actually, they are almost equivalent to the current bindings in Sage. The attached branch replaces lrcalc.pyx with a thin wrapper over lrcalc's bindings.

It mostly just translates the output from lrcalc to sage notation. The only function of lrcalc.pyx that isn't straghtforward to port is quantum multiplication: I found no way to recover the q-grading from lrcalc's output, so this is reimplemented in the patch.

The branch needs an update of lrcalc to include python bindings.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6596bbd453ef12df9bd27aba200cfc85feca08a9">6596bbd</a></td><td><code>Replace lrcalc.pyx with a wrapper over lrcalc's own Python bindings</code></td></tr></table>




---

archive/issue_comments_505782.json:
```json
{
    "body": "Changed commit from **[850f9bc](https://github.com/sagemath/sagetrac-mirror/commit/850f9bc86daa5e592110f6241d77b4950d9083e9)** to **[6596bbd](https://github.com/sagemath/sagetrac-mirror/commit/6596bbd453ef12df9bd27aba200cfc85feca08a9)**",
    "created_at": "2021-02-21T12:05:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505782",
    "user": "https://github.com/antonio-rojas"
}
```

Changed commit from **[850f9bc](https://github.com/sagemath/sagetrac-mirror/commit/850f9bc86daa5e592110f6241d77b4950d9083e9)** to **[6596bbd](https://github.com/sagemath/sagetrac-mirror/commit/6596bbd453ef12df9bd27aba200cfc85feca08a9)**



---

archive/issue_comments_505783.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@asbuch](#comment%3A10):\n> The Python bindings are only in the repository and a bit raw, so probably only useful as examples.  But I expect they are easier to start from than the .h files.\n\nSince you are here and I can not find a bug tracker for lrcalc: the setup.py is missing metadata, so the egg for lrcalc gets installed as UNKNOWN-0.0.0.0",
    "created_at": "2021-02-21T12:09:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505783",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@asbuch](#comment%3A10):
> The Python bindings are only in the repository and a bit raw, so probably only useful as examples.  But I expect they are easier to start from than the .h files.

Since you are here and I can not find a bug tracker for lrcalc: the setup.py is missing metadata, so the egg for lrcalc gets installed as UNKNOWN-0.0.0.0



---

archive/issue_comments_505784.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a9490a230adaa2312b2aac529e98c5ec78e9509\">0a9490a</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/31355/upgrade_lrcalc_to_2_0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26f7f2666c892a4dfdc2b3743f47e043d08d81d6\">26f7f26</a></td><td><code>Fix oversight in q_degrees formula</code></td></tr></table>\n",
    "created_at": "2021-02-21T12:39:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505784",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14" align="right">Comment 14</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a9490a230adaa2312b2aac529e98c5ec78e9509">0a9490a</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/31355/upgrade_lrcalc_to_2_0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26f7f2666c892a4dfdc2b3743f47e043d08d81d6">26f7f26</a></td><td><code>Fix oversight in q_degrees formula</code></td></tr></table>




---

archive/issue_comments_505785.json:
```json
{
    "body": "Changed commit from **[6596bbd](https://github.com/sagemath/sagetrac-mirror/commit/6596bbd453ef12df9bd27aba200cfc85feca08a9)** to **[26f7f26](https://github.com/sagemath/sagetrac-mirror/commit/26f7f2666c892a4dfdc2b3743f47e043d08d81d6)**",
    "created_at": "2021-02-21T12:39:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505785",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6596bbd](https://github.com/sagemath/sagetrac-mirror/commit/6596bbd453ef12df9bd27aba200cfc85feca08a9)** to **[26f7f26](https://github.com/sagemath/sagetrac-mirror/commit/26f7f2666c892a4dfdc2b3743f47e043d08d81d6)**



---

archive/issue_comments_505786.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nIf my bindings are used, then that will make it easier to keep things compatible if I make more changes to the C interface.  I should be able to keep the Python interface stable, at least up to reordering of output.\n\nQuantum function: I will add a function mult_quantum_pairs that returns a dict from ((partition),d) to integers, you can switch to that if you want.\n\nsetup.py: Does the following include the tags you are looking for?  Suggestions welcome!\n\n```\nsetup(name='lrcalc',\n    version='2.0.0',\n    description='Littlewood-Richardson Calculator',\n    long_description='Littlewood-Richardson Calculator',\n    url='https://math.rutgers.edu/~asbuch/lrcalc',\n    author='Anders Skovsted Buch',\n    license='GPL3',\n    ext_modules = cythonize([\n        Extension(\"lrcalc\", [\"lrcalc.pyx\"],\n                  libraries=[\"lrcalc\"])\n    ])\n)\n```",
    "created_at": "2021-02-21T14:59:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505786",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:15" align="right">Comment 15</div>

If my bindings are used, then that will make it easier to keep things compatible if I make more changes to the C interface.  I should be able to keep the Python interface stable, at least up to reordering of output.

Quantum function: I will add a function mult_quantum_pairs that returns a dict from ((partition),d) to integers, you can switch to that if you want.

setup.py: Does the following include the tags you are looking for?  Suggestions welcome!

```
setup(name='lrcalc',
    version='2.0.0',
    description='Littlewood-Richardson Calculator',
    long_description='Littlewood-Richardson Calculator',
    url='https://math.rutgers.edu/~asbuch/lrcalc',
    author='Anders Skovsted Buch',
    license='GPL3',
    ext_modules = cythonize([
        Extension("lrcalc", ["lrcalc.pyx"],
                  libraries=["lrcalc"])
    ])
)
```



---

archive/issue_comments_505787.json:
```json
{
    "body": "Changed commit from **[26f7f26](https://github.com/sagemath/sagetrac-mirror/commit/26f7f2666c892a4dfdc2b3743f47e043d08d81d6)** to **[627192a](https://github.com/sagemath/sagetrac-mirror/commit/627192a3913403a665b2f5ae61a8baf5774cd769)**",
    "created_at": "2021-02-21T17:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505787",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[26f7f26](https://github.com/sagemath/sagetrac-mirror/commit/26f7f2666c892a4dfdc2b3743f47e043d08d81d6)** to **[627192a](https://github.com/sagemath/sagetrac-mirror/commit/627192a3913403a665b2f5ae61a8baf5774cd769)**



---

archive/issue_comments_505788.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/627192a3913403a665b2f5ae61a8baf5774cd769\">627192a</a></td><td><code>Use Sage integers in results</code></td></tr></table>\n",
    "created_at": "2021-02-21T17:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505788",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16" align="right">Comment 16</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/627192a3913403a665b2f5ae61a8baf5774cd769">627192a</a></td><td><code>Use Sage integers in results</code></td></tr></table>




---

archive/issue_comments_505789.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nReplying to [@asbuch](#comment%3A15):\n> setup.py: Does the following include the tags you are looking for?  Suggestions welcome!\n> \n> ```\n> setup(name='lrcalc',\n>     version='2.0.0',\n>     description='Littlewood-Richardson Calculator',\n>     long_description='Littlewood-Richardson Calculator',\n>     url='https://math.rutgers.edu/~asbuch/lrcalc',\n>     author='Anders Skovsted Buch',\n>     license='GPL3',\n>     ext_modules = cythonize([\n>         Extension(\"lrcalc\", [\"lrcalc.pyx\"],\n>                   libraries=[\"lrcalc\"])\n>     ])\n> )\n> ```\n\nThat works, thanks. Also, although maybe it is a little bit too late for that, it would be good to bump the soversion of the C shared library since the API changed.",
    "created_at": "2021-02-21T17:17:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505789",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:17" align="right">Comment 17</div>

Replying to [@asbuch](#comment%3A15):
> setup.py: Does the following include the tags you are looking for?  Suggestions welcome!
> 
> ```
> setup(name='lrcalc',
>     version='2.0.0',
>     description='Littlewood-Richardson Calculator',
>     long_description='Littlewood-Richardson Calculator',
>     url='https://math.rutgers.edu/~asbuch/lrcalc',
>     author='Anders Skovsted Buch',
>     license='GPL3',
>     ext_modules = cythonize([
>         Extension("lrcalc", ["lrcalc.pyx"],
>                   libraries=["lrcalc"])
>     ])
> )
> ```

That works, thanks. Also, although maybe it is a little bit too late for that, it would be good to bump the soversion of the C shared library since the API changed.



---

archive/issue_comments_505790.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@antonio-rojas](#comment%3A17):\n> Replying to [@asbuch](#comment%3A15):\n> > setup.py: Does the following include the tags you are looking for?  Suggestions welcome!\n> > \n> > ```\n> > setup(name='lrcalc',\n> >     version='2.0.0',\n> >     description='Littlewood-Richardson Calculator',\n> >     long_description='Littlewood-Richardson Calculator',\n> >     url='https://math.rutgers.edu/~asbuch/lrcalc',\n> >     author='Anders Skovsted Buch',\n> >     license='GPL3',\n> >     ext_modules = cythonize([\n> >         Extension(\"lrcalc\", [\"lrcalc.pyx\"],\n> >                   libraries=[\"lrcalc\"])\n> >     ])\n> > )\n> > ```\n\n> \n> That works, thanks. Also, although maybe it is a little bit too late for that, it would be good to bump the soversion of the C shared library since the API changed.\n\nI changed the version to \"2.0.0\" and thought that was in line with [this page](https://www.gnu.org/software/libtool/manual/html_node/Updating-version-info.html).  Please let me know if I am doing something wrong.",
    "created_at": "2021-02-21T17:38:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505790",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@antonio-rojas](#comment%3A17):
> Replying to [@asbuch](#comment%3A15):
> > setup.py: Does the following include the tags you are looking for?  Suggestions welcome!
> > 
> > ```
> > setup(name='lrcalc',
> >     version='2.0.0',
> >     description='Littlewood-Richardson Calculator',
> >     long_description='Littlewood-Richardson Calculator',
> >     url='https://math.rutgers.edu/~asbuch/lrcalc',
> >     author='Anders Skovsted Buch',
> >     license='GPL3',
> >     ext_modules = cythonize([
> >         Extension("lrcalc", ["lrcalc.pyx"],
> >                   libraries=["lrcalc"])
> >     ])
> > )
> > ```

> 
> That works, thanks. Also, although maybe it is a little bit too late for that, it would be good to bump the soversion of the C shared library since the API changed.

I changed the version to "2.0.0" and thought that was in line with [this page](https://www.gnu.org/software/libtool/manual/html_node/Updating-version-info.html).  Please let me know if I am doing something wrong.



---

archive/issue_comments_505791.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@asbuch](#comment%3A18):\n> I changed the version to \"2.0.0\" and thought that was in line with [this page](https://www.gnu.org/software/libtool/manual/html_node/Updating-version-info.html).  Please let me know if I am doing something wrong.\n\nYou need to change the -version-info in https://bitbucket.org/asbuch/lrcalc/src/master/src/Makefile.am#lines-23",
    "created_at": "2021-02-21T18:01:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505791",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@asbuch](#comment%3A18):
> I changed the version to "2.0.0" and thought that was in line with [this page](https://www.gnu.org/software/libtool/manual/html_node/Updating-version-info.html).  Please let me know if I am doing something wrong.

You need to change the -version-info in https://bitbucket.org/asbuch/lrcalc/src/master/src/Makefile.am#lines-23



---

archive/issue_comments_505792.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@antonio-rojas](#comment%3A19):\n> Replying to [@asbuch](#comment%3A18):\n> > I changed the version to \"2.0.0\" and thought that was in line with [this page](https://www.gnu.org/software/libtool/manual/html_node/Updating-version-info.html).  Please let me know if I am doing something wrong.\n\n> \n> You need to change the -version-info in https://bitbucket.org/asbuch/lrcalc/src/master/src/Makefile.am#lines-23\n\nI see, thanks!  According to conventions, is that line in Makefile.am independent from this line in configure.am:\n\n```\nAC_INIT([lrcalc],[2.0.0],[asbuch at math rutgers edu])\n```",
    "created_at": "2021-02-21T18:32:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505792",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@antonio-rojas](#comment%3A19):
> Replying to [@asbuch](#comment%3A18):
> > I changed the version to "2.0.0" and thought that was in line with [this page](https://www.gnu.org/software/libtool/manual/html_node/Updating-version-info.html).  Please let me know if I am doing something wrong.

> 
> You need to change the -version-info in https://bitbucket.org/asbuch/lrcalc/src/master/src/Makefile.am#lines-23

I see, thanks!  According to conventions, is that line in Makefile.am independent from this line in configure.am:

```
AC_INIT([lrcalc],[2.0.0],[asbuch at math rutgers edu])
```



---

archive/issue_comments_505793.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52c120fb4b065e5d639d6263ee996ab00e192d62\">52c120f</a></td><td><code>Use new mult_quantum degrees option in lrcalc 2.1 for quantum multiplication</code></td></tr></table>\n",
    "created_at": "2021-02-22T11:32:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505793",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21" align="right">Comment 21</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52c120fb4b065e5d639d6263ee996ab00e192d62">52c120f</a></td><td><code>Use new mult_quantum degrees option in lrcalc 2.1 for quantum multiplication</code></td></tr></table>




---

archive/issue_comments_505794.json:
```json
{
    "body": "Changed commit from **[627192a](https://github.com/sagemath/sagetrac-mirror/commit/627192a3913403a665b2f5ae61a8baf5774cd769)** to **[52c120f](https://github.com/sagemath/sagetrac-mirror/commit/52c120fb4b065e5d639d6263ee996ab00e192d62)**",
    "created_at": "2021-02-22T11:32:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505794",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[627192a](https://github.com/sagemath/sagetrac-mirror/commit/627192a3913403a665b2f5ae61a8baf5774cd769)** to **[52c120f](https://github.com/sagemath/sagetrac-mirror/commit/52c120fb4b065e5d639d6263ee996ab00e192d62)**



---

archive/issue_comments_505795.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e13f155f605922e8ba80ed7a3b1e5d8d2b526898\">e13f155</a></td><td><code>Upgrade lrcalc to 2.1 and install python bindings</code></td></tr></table>\n",
    "created_at": "2021-02-22T11:42:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505795",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22" align="right">Comment 22</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e13f155f605922e8ba80ed7a3b1e5d8d2b526898">e13f155</a></td><td><code>Upgrade lrcalc to 2.1 and install python bindings</code></td></tr></table>




---

archive/issue_comments_505796.json:
```json
{
    "body": "Changed commit from **[52c120f](https://github.com/sagemath/sagetrac-mirror/commit/52c120fb4b065e5d639d6263ee996ab00e192d62)** to **[e13f155](https://github.com/sagemath/sagetrac-mirror/commit/e13f155f605922e8ba80ed7a3b1e5d8d2b526898)**",
    "created_at": "2021-02-22T11:42:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505796",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[52c120f](https://github.com/sagemath/sagetrac-mirror/commit/52c120fb4b065e5d639d6263ee996ab00e192d62)** to **[e13f155](https://github.com/sagemath/sagetrac-mirror/commit/e13f155f605922e8ba80ed7a3b1e5d8d2b526898)**



---

archive/issue_comments_505797.json:
```json
{
    "body": "Changed commit from **[e13f155](https://github.com/sagemath/sagetrac-mirror/commit/e13f155f605922e8ba80ed7a3b1e5d8d2b526898)** to **[b2d2844](https://github.com/sagemath/sagetrac-mirror/commit/b2d2844a3d47826d39d30a56192eff4b81a0a8fd)**",
    "created_at": "2021-02-22T11:50:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505797",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e13f155](https://github.com/sagemath/sagetrac-mirror/commit/e13f155f605922e8ba80ed7a3b1e5d8d2b526898)** to **[b2d2844](https://github.com/sagemath/sagetrac-mirror/commit/b2d2844a3d47826d39d30a56192eff4b81a0a8fd)**



---

archive/issue_comments_505798.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2d2844a3d47826d39d30a56192eff4b81a0a8fd\">b2d2844</a></td><td><code>Account for the possibility of different degree terms indexed by the same partition</code></td></tr></table>\n",
    "created_at": "2021-02-22T11:50:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505798",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23" align="right">Comment 23</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2d2844a3d47826d39d30a56192eff4b81a0a8fd">b2d2844</a></td><td><code>Account for the possibility of different degree terms indexed by the same partition</code></td></tr></table>




---

archive/issue_comments_505799.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nspkg-configure needs to be updated to check whether the python bindings are installed, and build sage's spkg otherwise.",
    "created_at": "2021-02-22T11:52:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505799",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:24" align="right">Comment 24</div>

spkg-configure needs to be updated to check whether the python bindings are installed, and build sage's spkg otherwise.



---

archive/issue_comments_505800.json:
```json
{
    "body": "Changed author from **Thierry Monteil** to **Thierry Monteil, Antonio Rojas**",
    "created_at": "2021-02-22T11:55:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505800",
    "user": "https://github.com/antonio-rojas"
}
```

Changed author from **Thierry Monteil** to **Thierry Monteil, Antonio Rojas**



---

archive/issue_events_413921.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2021-02-22T11:55:39Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "title_is": "upgrade lrcalc to 2.1",
    "title_was": "upgrade lrcalc to 2.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413921"
}
```



---

archive/issue_comments_505801.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nSorry for the moving target.  However, 2.1 should bring only more speed and no new problems.\n\nThe mult_quantum() function now takes an optional boolean arguments \"degrees\" that causes it to replace each key part with (part,d).",
    "created_at": "2021-02-22T15:53:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505801",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:27" align="right">Comment 27</div>

Sorry for the moving target.  However, 2.1 should bring only more speed and no new problems.

The mult_quantum() function now takes an optional boolean arguments "degrees" that causes it to replace each key part with (part,d).



---

archive/issue_comments_505802.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@antonio-rojas](#comment%3A24):\n> spkg-configure needs to be updated to check whether the python bindings are installed, and build sage's spkg otherwise.\n\nWe cannot use Python packages from the system, see #29023.\n\nAn SPKG providing both a library and Python bindings to it should be split into 2 SPKGs.",
    "created_at": "2021-02-22T16:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505802",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@antonio-rojas](#comment%3A24):
> spkg-configure needs to be updated to check whether the python bindings are installed, and build sage's spkg otherwise.

We cannot use Python packages from the system, see #29023.

An SPKG providing both a library and Python bindings to it should be split into 2 SPKGs.



---

archive/issue_comments_505803.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nAnders, the Python package should declare its build dependencies (in particular Cython) by putting a `pyproject.toml` file next to the `setup.py`; see https://snarky.ca/what-the-heck-is-pyproject-toml/",
    "created_at": "2021-02-22T16:12:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505803",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">Comment 29</div>

Anders, the Python package should declare its build dependencies (in particular Cython) by putting a `pyproject.toml` file next to the `setup.py`; see https://snarky.ca/what-the-heck-is-pyproject-toml/



---

archive/issue_comments_505804.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nReplying to [@mkoeppe](#comment%3A28):\n> Replying to [@antonio-rojas](#comment%3A24):\n> > spkg-configure needs to be updated to check whether the python bindings are installed, and build sage's spkg otherwise.\n\n> \n> We cannot use Python packages from the system, see #29023.\n> \n> An SPKG providing both a library and Python bindings to it should be split into 2 SPKGs. \n> \n\nThen maybe sage shouldn't support using system lrcalc 2.x for now, the bindings and the C library should obviously be kept at the same version.\n\nIn any case, the sagelib side should be ready now, please someone else take care of the build side.",
    "created_at": "2021-02-22T16:23:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505804",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:30" align="right">Comment 30</div>

Replying to [@mkoeppe](#comment%3A28):
> Replying to [@antonio-rojas](#comment%3A24):
> > spkg-configure needs to be updated to check whether the python bindings are installed, and build sage's spkg otherwise.

> 
> We cannot use Python packages from the system, see #29023.
> 
> An SPKG providing both a library and Python bindings to it should be split into 2 SPKGs. 
> 

Then maybe sage shouldn't support using system lrcalc 2.x for now, the bindings and the C library should obviously be kept at the same version.

In any case, the sagelib side should be ready now, please someone else take care of the build side.



---

archive/issue_comments_505805.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nWhether we support system lrcalc or not, non-Python and Python installations need to be split into two separate SPKGs (they can share the same tarball).",
    "created_at": "2021-02-22T16:40:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505805",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">Comment 31</div>

Whether we support system lrcalc or not, non-Python and Python installations need to be split into two separate SPKGs (they can share the same tarball).



---

archive/issue_comments_505806.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nIs this the `pyproject.toml` that you need? If so, then I can add that.\n\n```\n[build-system]\nrequires = [\"setuptools\", \"cython\"]\nbuild-backend = \"setuptools.build_meta\"\n```\n\nRegarding splitting into SPKGs, I am not familiar with the details of Python's package system. Maybe one day I will read up on this and make it possible to say `pip install lrcalc`, but this is not likely to happen soon. One way to proceed for now is to copy my files `liblrcalc.pxd` and `lrcalc.pyx` to the Sage repository next to Nicolas' files. Changes to `liblrcalc`'s interface are not likely to happen soon, but even if that happened, Sage could be brought up-to-date with another copy command. Not perfect, but maybe still a small improvement to the way `lrcalc` has been integrated in the past?",
    "created_at": "2021-02-22T18:13:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505806",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:32" align="right">Comment 32</div>

Is this the `pyproject.toml` that you need? If so, then I can add that.

```
[build-system]
requires = ["setuptools", "cython"]
build-backend = "setuptools.build_meta"
```

Regarding splitting into SPKGs, I am not familiar with the details of Python's package system. Maybe one day I will read up on this and make it possible to say `pip install lrcalc`, but this is not likely to happen soon. One way to proceed for now is to copy my files `liblrcalc.pxd` and `lrcalc.pyx` to the Sage repository next to Nicolas' files. Changes to `liblrcalc`'s interface are not likely to happen soon, but even if that happened, Sage could be brought up-to-date with another copy command. Not perfect, but maybe still a small improvement to the way `lrcalc` has been integrated in the past?



---

archive/issue_comments_505807.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nReplying to [@asbuch](#comment%3A32):\n> Is this the `pyproject.toml` that you need? If so, then I can add that.\n> \n> ```\n> [build-system]\n> requires = [\"setuptools\", \"cython\"]\n> build-backend = \"setuptools.build_meta\"\n> ```\n\nYes, that's good; best to add `\"wheel\"` in requires too.\n\n> Regarding splitting into SPKGs, I am not familiar with the details of Python's package system. \n\nThis is actually Sage-specific, not related to Python packaging, so not a task for you as the upstream author.\n\n\"Best practices\" on your side would be to create a source distribution for the Python library, using `setup.py sdist` and to upload it to PyPI.  On the Sage packaging side, we can then use that as our upstream for a `lrcalc_python` SPKG.",
    "created_at": "2021-02-22T18:19:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505807",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">Comment 33</div>

Replying to [@asbuch](#comment%3A32):
> Is this the `pyproject.toml` that you need? If so, then I can add that.
> 
> ```
> [build-system]
> requires = ["setuptools", "cython"]
> build-backend = "setuptools.build_meta"
> ```

Yes, that's good; best to add `"wheel"` in requires too.

> Regarding splitting into SPKGs, I am not familiar with the details of Python's package system. 

This is actually Sage-specific, not related to Python packaging, so not a task for you as the upstream author.

"Best practices" on your side would be to create a source distribution for the Python library, using `setup.py sdist` and to upload it to PyPI.  On the Sage packaging side, we can then use that as our upstream for a `lrcalc_python` SPKG.



---

archive/issue_events_413922.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413922"
}
```



---

archive/issue_events_413923.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413923"
}
```



---

archive/issue_comments_505808.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nSage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505808",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">Comment 34</div>

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_505809.json:
```json
{
    "body": "Changed commit from **[b2d2844](https://github.com/sagemath/sagetrac-mirror/commit/b2d2844a3d47826d39d30a56192eff4b81a0a8fd)** to **[1153526](https://github.com/sagemath/sagetrac-mirror/commit/115352694caac0bfdfa3fc607b6e74c45ac885ff)**",
    "created_at": "2021-06-26T09:21:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505809",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b2d2844](https://github.com/sagemath/sagetrac-mirror/commit/b2d2844a3d47826d39d30a56192eff4b81a0a8fd)** to **[1153526](https://github.com/sagemath/sagetrac-mirror/commit/115352694caac0bfdfa3fc607b6e74c45ac885ff)**



---

archive/issue_comments_505810.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4acca82c02d4c9b81a9d53983a81481341240994\">4acca82</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/31355/upgrade_lrcalc_to_2_0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/464d5ce9b779859e6ed242f21403577e1713f14b\">464d5ce</a></td><td><code>Move lrcalc python bindings to a separate spkg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/346b76b1cd763230a5d300d7153fec48f90804c7\">346b76b</a></td><td><code>Admit only system lrcalc v2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/115352694caac0bfdfa3fc607b6e74c45ac885ff\">1153526</a></td><td><code>Document _lrcalc_dict_to_sage</code></td></tr></table>\n",
    "created_at": "2021-06-26T09:21:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505810",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35" align="right">Comment 35</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4acca82c02d4c9b81a9d53983a81481341240994">4acca82</a></td><td><code>Merge branch 'develop' of git://git.sagemath.org/sage into t/31355/upgrade_lrcalc_to_2_0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/464d5ce9b779859e6ed242f21403577e1713f14b">464d5ce</a></td><td><code>Move lrcalc python bindings to a separate spkg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/346b76b1cd763230a5d300d7153fec48f90804c7">346b76b</a></td><td><code>Admit only system lrcalc v2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/115352694caac0bfdfa3fc607b6e74c45ac885ff">1153526</a></td><td><code>Document _lrcalc_dict_to_sage</code></td></tr></table>




---

archive/issue_events_413924.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2021-06-26T09:23:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413924"
}
```



---

archive/issue_comments_505811.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nTrying to move this forward",
    "created_at": "2021-06-26T09:23:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505811",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:36" align="right">Comment 36</div>

Trying to move this forward



---

archive/issue_comments_505812.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n-lrcalc 2.0 is out https://bitbucket.org/asbuch/lrcalc/src/master/ChangeLog\n+lrcalc 2.1 is out https://bitbucket.org/asbuch/lrcalc/src/master/ChangeLog\n \n+Instead of rewriting Sage's Python bindings to support the new API, we replace them with a wrapper around the new upstream provided bindings\n``````\n",
    "created_at": "2021-06-26T09:27:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505812",
    "user": "https://github.com/antonio-rojas"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
-lrcalc 2.0 is out https://bitbucket.org/asbuch/lrcalc/src/master/ChangeLog
+lrcalc 2.1 is out https://bitbucket.org/asbuch/lrcalc/src/master/ChangeLog
 
+Instead of rewriting Sage's Python bindings to support the new API, we replace them with a wrapper around the new upstream provided bindings
``````




---

archive/issue_comments_505813.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\n-1 on using a Python package that is not on PyPI",
    "created_at": "2021-06-27T16:51:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505813",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">Comment 38</div>

-1 on using a Python package that is not on PyPI



---

archive/issue_events_413925.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-27T16:51:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413925"
}
```



---

archive/issue_events_413926.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-27T16:51:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413926"
}
```



---

archive/issue_comments_505814.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505814",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">Comment 39</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_413927.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413927"
}
```



---

archive/issue_events_413928.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413928"
}
```



---

archive/issue_comments_505815.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nReplying to [@mkoeppe](#comment%3A38):\n> -1 on using a Python package that is not on PyPI\n\nwe have to move forward here, still. So we can either use the non-PyPI package, or facilitate\na release on PyPI...",
    "created_at": "2021-09-04T09:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505815",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">Comment 40</div>

Replying to [@mkoeppe](#comment%3A38):
> -1 on using a Python package that is not on PyPI

we have to move forward here, still. So we can either use the non-PyPI package, or facilitate
a release on PyPI...



---

archive/issue_comments_505816.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nReplying to [@dimpase](#comment%3A40):\n> Replying to [@mkoeppe](#comment%3A38):\n> > -1 on using a Python package that is not on PyPI\n\n> \n> we have to move forward here, still. So we can either use the non-PyPI package, or facilitate\n> a release on PyPI...\n\nLet me suggest to postpone helping upstream to use PyPI to another ticket.",
    "created_at": "2021-09-04T11:35:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505816",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:41" align="right">Comment 41</div>

Replying to [@dimpase](#comment%3A40):
> Replying to [@mkoeppe](#comment%3A38):
> > -1 on using a Python package that is not on PyPI

> 
> we have to move forward here, still. So we can either use the non-PyPI package, or facilitate
> a release on PyPI...

Let me suggest to postpone helping upstream to use PyPI to another ticket.



---

archive/issue_comments_505817.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nIt would block the Sage library (`sagemath-standard`) from being pushed to PyPI, so no, that's not a viable approach.",
    "created_at": "2021-09-04T16:21:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505817",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">Comment 42</div>

It would block the Sage library (`sagemath-standard`) from being pushed to PyPI, so no, that's not a viable approach.



---

archive/issue_comments_505818.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nReplying to [@dimpase](#comment%3A40):\n> facilitate a release on PyPI...\n\nFacilitated now by providing this link: https://realpython.com/pypi-publish-python-package/#publishing-to-pypi",
    "created_at": "2021-09-04T17:15:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505818",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">Comment 43</div>

Replying to [@dimpase](#comment%3A40):
> facilitate a release on PyPI...

Facilitated now by providing this link: https://realpython.com/pypi-publish-python-package/#publishing-to-pypi



---

archive/issue_comments_505819.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nSomeone would probably need to provide a PR for upstream, not just an RTFM link.",
    "created_at": "2021-09-10T08:37:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505819",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:44" align="right">Comment 44</div>

Someone would probably need to provide a PR for upstream, not just an RTFM link.



---

archive/issue_comments_505820.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nNo PR is needed, the upstream maintainer really just needs to type `python3 setup.py sdist && twine upload dist/*`",
    "created_at": "2021-09-10T17:45:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505820",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">Comment 45</div>

No PR is needed, the upstream maintainer really just needs to type `python3 setup.py sdist && twine upload dist/*`



---

archive/issue_comments_505821.json:
```json
{
    "body": "Changed keywords from none to **upgrade, lrcalc**",
    "created_at": "2021-09-19T10:04:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505821",
    "user": "https://github.com/slel"
}
```

Changed keywords from none to **upgrade, lrcalc**



---

archive/issue_comments_505822.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nCc-ing the lrcalc maintainer (hi Anders!).",
    "created_at": "2021-09-19T10:04:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505822",
    "user": "https://github.com/slel"
}
```

<div id="comment:46" align="right">Comment 46</div>

Cc-ing the lrcalc maintainer (hi Anders!).



---

archive/issue_comments_505823.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nI would like to have lrcalc available on PyPI, but I have not had time to figure out how to put it there. I don't know how to make sure the Python bindings can find the C library, but if PyPI has some magic that can handle that with the above command, then great. I tried this:\n\n```\npython3 setup.py sdist\ntwine upload --repository testpypi dist/*\n```\n\nThat appeared to work, and resulted in [https://test.pypi.org/project/lrcalc/](https://test.pypi.org/project/lrcalc/) appearing on TestPyPI. However, when I use the pip command displayed there, I get a lot of errors. I'm not eager to have a defunct project in public view on PyPI.\n\nAll that said, I can't help thinking that if Sage was able to include the previous version of lrcalc that did not come with Python bindings, but is unable to include the new version, with or without using the supplied bindings, then something in the project must have gotten less flexible in the last few years.",
    "created_at": "2021-09-19T18:08:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505823",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:47" align="right">Comment 47</div>

I would like to have lrcalc available on PyPI, but I have not had time to figure out how to put it there. I don't know how to make sure the Python bindings can find the C library, but if PyPI has some magic that can handle that with the above command, then great. I tried this:

```
python3 setup.py sdist
twine upload --repository testpypi dist/*
```

That appeared to work, and resulted in [https://test.pypi.org/project/lrcalc/](https://test.pypi.org/project/lrcalc/) appearing on TestPyPI. However, when I use the pip command displayed there, I get a lot of errors. I'm not eager to have a defunct project in public view on PyPI.

All that said, I can't help thinking that if Sage was able to include the previous version of lrcalc that did not come with Python bindings, but is unable to include the new version, with or without using the supplied bindings, then something in the project must have gotten less flexible in the last few years.



---

archive/issue_comments_505824.json:
```json
{
    "body": "Changed branch from **[u/arojas/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/upgrade_lrcalc_to_2_0)** to **[u/mkoeppe/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_lrcalc_to_2_0)**",
    "created_at": "2021-09-19T18:22:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505824",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/arojas/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/upgrade_lrcalc_to_2_0)** to **[u/mkoeppe/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_lrcalc_to_2_0)**



---

archive/issue_comments_505825.json:
```json
{
    "body": "Changed commit from **[1153526](https://github.com/sagemath/sagetrac-mirror/commit/115352694caac0bfdfa3fc607b6e74c45ac885ff)** to **[0bb238b](https://github.com/sagemath/sagetrac-mirror/commit/0bb238b9ff8dc9c84951f09d99bc913692a4b120)**",
    "created_at": "2021-09-19T18:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505825",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1153526](https://github.com/sagemath/sagetrac-mirror/commit/115352694caac0bfdfa3fc607b6e74c45ac885ff)** to **[0bb238b](https://github.com/sagemath/sagetrac-mirror/commit/0bb238b9ff8dc9c84951f09d99bc913692a4b120)**



---

archive/issue_comments_505826.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bb238b9ff8dc9c84951f09d99bc913692a4b120\">0bb238b</a></td><td><code>build/pkgs/lrcalc_python/spkg-install.in: Fixup for sdist layout</code></td></tr></table>\n",
    "created_at": "2021-09-19T18:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505826",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49" align="right">Comment 49</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bb238b9ff8dc9c84951f09d99bc913692a4b120">0bb238b</a></td><td><code>build/pkgs/lrcalc_python/spkg-install.in: Fixup for sdist layout</code></td></tr></table>




---

archive/issue_comments_505827.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nReplying to [@asbuch](#comment%3A47):\n> All that said, I can't help thinking that if Sage was able to include the previous version of lrcalc that did not come with Python bindings, but is unable to include the new version, with or without using the supplied bindings, then something in the project must have gotten less flexible in the last few years.\n\nThe thing is that the API changes in lrcalc 2 require an almost complete rewrite of sage's interface, which would essentially make it a duplicate of your python bindings, and doing that doesn't make much sense to me.\n\nAnother solution would be to include a copy of your pyx in sage, if the licence allows it.",
    "created_at": "2021-09-19T18:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505827",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:50" align="right">Comment 50</div>

Replying to [@asbuch](#comment%3A47):
> All that said, I can't help thinking that if Sage was able to include the previous version of lrcalc that did not come with Python bindings, but is unable to include the new version, with or without using the supplied bindings, then something in the project must have gotten less flexible in the last few years.

The thing is that the API changes in lrcalc 2 require an almost complete rewrite of sage's interface, which would essentially make it a duplicate of your python bindings, and doing that doesn't make much sense to me.

Another solution would be to include a copy of your pyx in sage, if the licence allows it.



---

archive/issue_comments_505828.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fabfb2b9f72e39bda1ae982e9d96c51629fa805f\">fabfb2b</a></td><td><code>build/pkgs/lrcalc_python/package-version.txt: 2.0.0</code></td></tr></table>\n",
    "created_at": "2021-09-19T18:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505828",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51" align="right">Comment 51</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fabfb2b9f72e39bda1ae982e9d96c51629fa805f">fabfb2b</a></td><td><code>build/pkgs/lrcalc_python/package-version.txt: 2.0.0</code></td></tr></table>




---

archive/issue_comments_505829.json:
```json
{
    "body": "Changed commit from **[0bb238b](https://github.com/sagemath/sagetrac-mirror/commit/0bb238b9ff8dc9c84951f09d99bc913692a4b120)** to **[fabfb2b](https://github.com/sagemath/sagetrac-mirror/commit/fabfb2b9f72e39bda1ae982e9d96c51629fa805f)**",
    "created_at": "2021-09-19T18:42:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505829",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0bb238b](https://github.com/sagemath/sagetrac-mirror/commit/0bb238b9ff8dc9c84951f09d99bc913692a4b120)** to **[fabfb2b](https://github.com/sagemath/sagetrac-mirror/commit/fabfb2b9f72e39bda1ae982e9d96c51629fa805f)**



---

archive/issue_comments_505830.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nReplying to [@asbuch](#comment%3A47):\n> I don't know how to make sure the Python bindings can find the C library\n\nNo need to worry about this. It is the responsibility of the user to install the C library. This is normal.\n\nBut it would be a good idea to explain this in the Python package's README (which would appear in the \"Project description\" at https://test.pypi.org/project/lrcalc/#description)\n\nSee https://pypi.org/project/pplpy/ for inspiration.",
    "created_at": "2021-09-19T18:44:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505830",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:52" align="right">Comment 52</div>

Replying to [@asbuch](#comment%3A47):
> I don't know how to make sure the Python bindings can find the C library

No need to worry about this. It is the responsibility of the user to install the C library. This is normal.

But it would be a good idea to explain this in the Python package's README (which would appear in the "Project description" at https://test.pypi.org/project/lrcalc/#description)

See https://pypi.org/project/pplpy/ for inspiration.



---

archive/issue_comments_505831.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nIn `lrcalc/python`, probably best to change `README.Python` to either `README.md` or `README.rst`",
    "created_at": "2021-09-19T18:49:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505831",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:53" align="right">Comment 53</div>

In `lrcalc/python`, probably best to change `README.Python` to either `README.md` or `README.rst`



---

archive/issue_comments_505832.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nThe file on TestPyPI does not include the `.pyx` and `.pxd` files but it ships a generated `.c` file that is not needed. To fix this, you can create a file `MANIFEST.in`",
    "created_at": "2021-09-19T18:54:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505832",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:54" align="right">Comment 54</div>

The file on TestPyPI does not include the `.pyx` and `.pxd` files but it ships a generated `.c` file that is not needed. To fix this, you can create a file `MANIFEST.in`



---

archive/issue_comments_505833.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nReplying to [@antonio-rojas](#comment%3A50):\n> Replying to [@asbuch](#comment%3A47):\n> > All that said, I can't help thinking that if Sage was able to include the previous version of lrcalc that did not come with Python bindings, but is unable to include the new version, with or without using the supplied bindings, then something in the project must have gotten less flexible in the last few years.\n\n> \n> The thing is that the API changes in lrcalc 2 require an almost complete rewrite of sage's interface, which would essentially make it a duplicate of your python bindings, and doing that doesn't make much sense to me.\n> \n> Another solution would be to include a copy of your pyx in sage, if the licence allows it.\n\nThis is what I imagined would happen when I wrote the Python bindings. I think I also suggested it at some point. Lrcalc is GPL v3, is Sage not compatible with that?",
    "created_at": "2021-09-19T19:40:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505833",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:55" align="right">Comment 55</div>

Replying to [@antonio-rojas](#comment%3A50):
> Replying to [@asbuch](#comment%3A47):
> > All that said, I can't help thinking that if Sage was able to include the previous version of lrcalc that did not come with Python bindings, but is unable to include the new version, with or without using the supplied bindings, then something in the project must have gotten less flexible in the last few years.

> 
> The thing is that the API changes in lrcalc 2 require an almost complete rewrite of sage's interface, which would essentially make it a duplicate of your python bindings, and doing that doesn't make much sense to me.
> 
> Another solution would be to include a copy of your pyx in sage, if the licence allows it.

This is what I imagined would happen when I wrote the Python bindings. I think I also suggested it at some point. Lrcalc is GPL v3, is Sage not compatible with that?



---

archive/issue_comments_505834.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nThe Sage library is \"GPL v2 or later\", I don't think we can put a GPL v3-only module in.",
    "created_at": "2021-09-19T19:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505834",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:56" align="right">Comment 56</div>

The Sage library is "GPL v2 or later", I don't think we can put a GPL v3-only module in.



---

archive/issue_comments_505835.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nIf you relicense the Python bindings to GPL v2 or later, people here on the ticket can probably adapt your code and put it in the Sage library; in this case, we don't need to bother you with Python packaging details.",
    "created_at": "2021-09-19T19:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505835",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:57" align="right">Comment 57</div>

If you relicense the Python bindings to GPL v2 or later, people here on the ticket can probably adapt your code and put it in the Sage library; in this case, we don't need to bother you with Python packaging details.



---

archive/issue_comments_505836.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nReplying to [@mkoeppe](#comment%3A54):\n> The file on TestPyPI does not include the `.pyx` and `.pxd` files but it ships a generated `.c` file that is not needed. To fix this, you can create a file `MANIFEST.in`\n\nThanks, this is helpful. Do you know a place where I can find a minimal MANIFEST.in to modify?",
    "created_at": "2021-09-19T19:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505836",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:58" align="right">Comment 58</div>

Replying to [@mkoeppe](#comment%3A54):
> The file on TestPyPI does not include the `.pyx` and `.pxd` files but it ships a generated `.c` file that is not needed. To fix this, you can create a file `MANIFEST.in`

Thanks, this is helpful. Do you know a place where I can find a minimal MANIFEST.in to modify?



---

archive/issue_comments_505837.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\nhttps://gitlab.com/videlec/pplpy/-/blob/master/MANIFEST.in is a good example",
    "created_at": "2021-09-19T19:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505837",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:59" align="right">Comment 59</div>

https://gitlab.com/videlec/pplpy/-/blob/master/MANIFEST.in is a good example



---

archive/issue_comments_505838.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nReplying to [@mkoeppe](#comment%3A56):\n> The Sage library is \"GPL v2 or later\", I don't think we can put a GPL v3-only module in.\n\nYou can hereby consider any files you need to copy as also licensed \"GPL v2 or later\". Is this official enough?",
    "created_at": "2021-09-19T19:48:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505838",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:60" align="right">Comment 60</div>

Replying to [@mkoeppe](#comment%3A56):
> The Sage library is "GPL v2 or later", I don't think we can put a GPL v3-only module in.

You can hereby consider any files you need to copy as also licensed "GPL v2 or later". Is this official enough?



---

archive/issue_comments_505839.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">Comment 61</div>\n\nReplying to [@mkoeppe](#comment%3A59):\n> https://gitlab.com/videlec/pplpy/-/blob/master/MANIFEST.in is a good example\n\nThanks, I will give that a try then.",
    "created_at": "2021-09-19T19:49:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505839",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:61" align="right">Comment 61</div>

Replying to [@mkoeppe](#comment%3A59):
> https://gitlab.com/videlec/pplpy/-/blob/master/MANIFEST.in is a good example

Thanks, I will give that a try then.



---

archive/issue_comments_505840.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">Comment 62</div>\n\nReplying to [@asbuch](#comment%3A60):\n> Is this official enough?\n\nPretty sure it is, thanks",
    "created_at": "2021-09-19T19:51:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505840",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:62" align="right">Comment 62</div>

Replying to [@asbuch](#comment%3A60):
> Is this official enough?

Pretty sure it is, thanks



---

archive/issue_comments_505841.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">Comment 63</div>\n\nReplying to [@asbuch](#comment%3A58):\n> Replying to [@mkoeppe](#comment%3A54):\n> > The file on TestPyPI does not include the `.pyx` and `.pxd` files but it ships a generated `.c` file that is not needed. To fix this, you can create a file `MANIFEST.in`\n\n> \n> Thanks, this is helpful. Do you know a place where I can find a minimal MANIFEST.in to modify?\n\nNow the .pyx and .pxd files are included and the .c file is gone, but I get the same result when I try to install with pip. I have liblrcalc installed in /usr/local/lib.",
    "created_at": "2021-09-19T20:35:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505841",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:63" align="right">Comment 63</div>

Replying to [@asbuch](#comment%3A58):
> Replying to [@mkoeppe](#comment%3A54):
> > The file on TestPyPI does not include the `.pyx` and `.pxd` files but it ships a generated `.c` file that is not needed. To fix this, you can create a file `MANIFEST.in`

> 
> Thanks, this is helpful. Do you know a place where I can find a minimal MANIFEST.in to modify?

Now the .pyx and .pxd files are included and the .c file is gone, but I get the same result when I try to install with pip. I have liblrcalc installed in /usr/local/lib.



---

archive/issue_comments_505842.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">Comment 64</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/642747a422f3f3915d7f8339130597d23e34a8c8\">642747a</a></td><td><code>build/pkgs/lrcalc_python: Use 2.0.1 from TestPyPI</code></td></tr></table>\n",
    "created_at": "2021-09-19T20:41:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505842",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:64" align="right">Comment 64</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/642747a422f3f3915d7f8339130597d23e34a8c8">642747a</a></td><td><code>build/pkgs/lrcalc_python: Use 2.0.1 from TestPyPI</code></td></tr></table>




---

archive/issue_comments_505843.json:
```json
{
    "body": "Changed commit from **[fabfb2b](https://github.com/sagemath/sagetrac-mirror/commit/fabfb2b9f72e39bda1ae982e9d96c51629fa805f)** to **[642747a](https://github.com/sagemath/sagetrac-mirror/commit/642747a422f3f3915d7f8339130597d23e34a8c8)**",
    "created_at": "2021-09-19T20:41:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505843",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fabfb2b](https://github.com/sagemath/sagetrac-mirror/commit/fabfb2b9f72e39bda1ae982e9d96c51629fa805f)** to **[642747a](https://github.com/sagemath/sagetrac-mirror/commit/642747a422f3f3915d7f8339130597d23e34a8c8)**



---

archive/issue_comments_505844.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">Comment 65</div>\n\nWorks fine now here on the branch",
    "created_at": "2021-09-19T20:41:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505844",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:65" align="right">Comment 65</div>

Works fine now here on the branch



---

archive/issue_comments_505845.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">Comment 66</div>\n\nReplying to [@asbuch](#comment%3A63):\n> I get the same result when I try to install with pip. I have liblrcalc installed in /usr/local/lib.\n\nIf you post some logs, I can take a look",
    "created_at": "2021-09-19T20:42:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505845",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:66" align="right">Comment 66</div>

Replying to [@asbuch](#comment%3A63):
> I get the same result when I try to install with pip. I have liblrcalc installed in /usr/local/lib.

If you post some logs, I can take a look



---

archive/issue_comments_505846.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">Comment 67</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81863cfa27579c1bd3209433364a13444530a686\">81863cf</a></td><td><code>build/pkgs/lrcalc_python/dependencies: Add cython</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b76791ca1dd7e9cc5d37130dd6576ee515d4b65\">7b76791</a></td><td><code>build/pkgs/lrcalc_python/install-requires.txt: New</code></td></tr></table>\n",
    "created_at": "2021-09-19T20:46:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505846",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:67" align="right">Comment 67</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81863cfa27579c1bd3209433364a13444530a686">81863cf</a></td><td><code>build/pkgs/lrcalc_python/dependencies: Add cython</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b76791ca1dd7e9cc5d37130dd6576ee515d4b65">7b76791</a></td><td><code>build/pkgs/lrcalc_python/install-requires.txt: New</code></td></tr></table>




---

archive/issue_comments_505847.json:
```json
{
    "body": "Changed commit from **[642747a](https://github.com/sagemath/sagetrac-mirror/commit/642747a422f3f3915d7f8339130597d23e34a8c8)** to **[7b76791](https://github.com/sagemath/sagetrac-mirror/commit/7b76791ca1dd7e9cc5d37130dd6576ee515d4b65)**",
    "created_at": "2021-09-19T20:46:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505847",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[642747a](https://github.com/sagemath/sagetrac-mirror/commit/642747a422f3f3915d7f8339130597d23e34a8c8)** to **[7b76791](https://github.com/sagemath/sagetrac-mirror/commit/7b76791ca1dd7e9cc5d37130dd6576ee515d4b65)**



---

archive/issue_comments_505848.json:
```json
{
    "body": "Changed commit from **[7b76791](https://github.com/sagemath/sagetrac-mirror/commit/7b76791ca1dd7e9cc5d37130dd6576ee515d4b65)** to **[482bf57](https://github.com/sagemath/sagetrac-mirror/commit/482bf57b48d4ca2eee43cd89a2d84b55a0d7738b)**",
    "created_at": "2021-09-19T21:09:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505848",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7b76791](https://github.com/sagemath/sagetrac-mirror/commit/7b76791ca1dd7e9cc5d37130dd6576ee515d4b65)** to **[482bf57](https://github.com/sagemath/sagetrac-mirror/commit/482bf57b48d4ca2eee43cd89a2d84b55a0d7738b)**



---

archive/issue_comments_505849.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">Comment 68</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/482bf57b48d4ca2eee43cd89a2d84b55a0d7738b\">482bf57</a></td><td><code>build/pkgs/lrcalc_python/SPKG.rst: Fix title</code></td></tr></table>\n",
    "created_at": "2021-09-19T21:09:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505849",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:68" align="right">Comment 68</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/482bf57b48d4ca2eee43cd89a2d84b55a0d7738b">482bf57</a></td><td><code>build/pkgs/lrcalc_python/SPKG.rst: Fix title</code></td></tr></table>




---

archive/issue_comments_505850.json:
```json
{
    "body": "Work Issues: **Switch to pypi.io URL when released**",
    "created_at": "2021-09-19T21:10:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505850",
    "user": "https://github.com/mkoeppe"
}
```

Work Issues: **Switch to pypi.io URL when released**



---

archive/issue_comments_505851.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">Comment 70</div>\n\nReplying to [@mkoeppe](#comment%3A66):\n> Replying to [@asbuch](#comment%3A63):\n> > I get the same result when I try to install with pip. I have liblrcalc installed in /usr/local/lib.\n\n> \n> If you post some logs, I can take a look\n\nThanks! I created a new Python environment with \"mkvirtualenv lrcalc_test\", then I tried to install with pip and got the following result:\n\n```\n> pip install -i https://test.pypi.org/simple/ lrcalc\nLooking in indexes: https://test.pypi.org/simple/\nCollecting lrcalc\n  Downloading https://test-files.pythonhosted.org/packages/d4/c8/c3988b0714fd225cdc4664f79b57161b8292c43eaad3ff81698d3db58147/lrcalc-2.0.1.tar.gz (15 kB)\n  Installing build dependencies ... error\n  ERROR: Command errored out with exit status 1:\n   command: /home/user/lib/virtualenvs/lrcalc_test/bin/python /home/user/lib/virtualenvs/lrcalc_test/lib/python3.8/site-packages/pip install --ignore-installed --no-user --prefix /tmp/pip-build-env-cz4e5gzo/overlay --no-warn-script-location --no-binary :none: --only-binary :none: -i https://test.pypi.org/simple/ -- setuptools cython wheel\n       cwd: None\n  Complete output (3 lines):\n  Looking in indexes: https://test.pypi.org/simple/\n  ERROR: Could not find a version that satisfies the requirement setuptools (from versions: none)\n  ERROR: No matching distribution found for setuptools\n  ----------------------------------------\nERROR: Command errored out with exit status 1: /home/user/lib/virtualenvs/lrcalc_test/bin/python /home/user/lib/virtualenvs/lrcalc_test/lib/python3.8/site-packages/pip install --ignore-installed --no-user --prefix /tmp/pip-build-env-cz4e5gzo/overlay --no-warn-script-location --no-binary :none: --only-binary :none: -i https://test.pypi.org/simple/ -- setuptools cython wheel Check the logs for full command output.\n```",
    "created_at": "2021-09-19T21:35:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505851",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:70" align="right">Comment 70</div>

Replying to [@mkoeppe](#comment%3A66):
> Replying to [@asbuch](#comment%3A63):
> > I get the same result when I try to install with pip. I have liblrcalc installed in /usr/local/lib.

> 
> If you post some logs, I can take a look

Thanks! I created a new Python environment with "mkvirtualenv lrcalc_test", then I tried to install with pip and got the following result:

```
> pip install -i https://test.pypi.org/simple/ lrcalc
Looking in indexes: https://test.pypi.org/simple/
Collecting lrcalc
  Downloading https://test-files.pythonhosted.org/packages/d4/c8/c3988b0714fd225cdc4664f79b57161b8292c43eaad3ff81698d3db58147/lrcalc-2.0.1.tar.gz (15 kB)
  Installing build dependencies ... error
  ERROR: Command errored out with exit status 1:
   command: /home/user/lib/virtualenvs/lrcalc_test/bin/python /home/user/lib/virtualenvs/lrcalc_test/lib/python3.8/site-packages/pip install --ignore-installed --no-user --prefix /tmp/pip-build-env-cz4e5gzo/overlay --no-warn-script-location --no-binary :none: --only-binary :none: -i https://test.pypi.org/simple/ -- setuptools cython wheel
       cwd: None
  Complete output (3 lines):
  Looking in indexes: https://test.pypi.org/simple/
  ERROR: Could not find a version that satisfies the requirement setuptools (from versions: none)
  ERROR: No matching distribution found for setuptools
  ----------------------------------------
ERROR: Command errored out with exit status 1: /home/user/lib/virtualenvs/lrcalc_test/bin/python /home/user/lib/virtualenvs/lrcalc_test/lib/python3.8/site-packages/pip install --ignore-installed --no-user --prefix /tmp/pip-build-env-cz4e5gzo/overlay --no-warn-script-location --no-binary :none: --only-binary :none: -i https://test.pypi.org/simple/ -- setuptools cython wheel Check the logs for full command output.
```



---

archive/issue_comments_505852.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">Comment 71</div>\n\nWhen you use `-i`, it overrides the default package index URL, so it cannot find `setuptools` any more. (It does not matter that `setuptools` is already installed in your venv -- this is Python's build isolation.)",
    "created_at": "2021-09-19T21:37:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505852",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:71" align="right">Comment 71</div>

When you use `-i`, it overrides the default package index URL, so it cannot find `setuptools` any more. (It does not matter that `setuptools` is already installed in your venv -- this is Python's build isolation.)



---

archive/issue_comments_505853.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">Comment 72</div>\n\nYou can use `--extra-index-url` instead of `-i`.",
    "created_at": "2021-09-19T21:39:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505853",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:72" align="right">Comment 72</div>

You can use `--extra-index-url` instead of `-i`.



---

archive/issue_comments_505854.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">Comment 73</div>\n\nReplying to [@mkoeppe](#comment%3A72):\n> You can use `--extra-index-url` instead of `-i`.\n\nThat made a difference, thanks! I hope this problem will go away if I post to PyPI? I assume the PyPI website will show the command \"pip install lrcalc\"?",
    "created_at": "2021-09-19T21:43:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505854",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:73" align="right">Comment 73</div>

Replying to [@mkoeppe](#comment%3A72):
> You can use `--extra-index-url` instead of `-i`.

That made a difference, thanks! I hope this problem will go away if I post to PyPI? I assume the PyPI website will show the command "pip install lrcalc"?



---

archive/issue_comments_505855.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">Comment 74</div>\n\nReplying to [@asbuch](#comment%3A73):\n> I hope this problem will go away if I post to PyPI? I assume the PyPI website will show the command \"pip install lrcalc\"?\n\nThat's right.",
    "created_at": "2021-09-19T21:51:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505855",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:74" align="right">Comment 74</div>

Replying to [@asbuch](#comment%3A73):
> I hope this problem will go away if I post to PyPI? I assume the PyPI website will show the command "pip install lrcalc"?

That's right.



---

archive/issue_comments_505856.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">Comment 75</div>\n\nHere it is: https://pypi.org/project/lrcalc/\n\nMany thanks to Matthias for all the help with this!",
    "created_at": "2021-09-20T01:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505856",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:75" align="right">Comment 75</div>

Here it is: https://pypi.org/project/lrcalc/

Many thanks to Matthias for all the help with this!



---

archive/issue_comments_505857.json:
```json
{
    "body": "Changed commit from **[482bf57](https://github.com/sagemath/sagetrac-mirror/commit/482bf57b48d4ca2eee43cd89a2d84b55a0d7738b)** to **[8ff6dea](https://github.com/sagemath/sagetrac-mirror/commit/8ff6dea3407fd966611c700f3b0159ef02d73e7d)**",
    "created_at": "2021-09-20T03:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505857",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[482bf57](https://github.com/sagemath/sagetrac-mirror/commit/482bf57b48d4ca2eee43cd89a2d84b55a0d7738b)** to **[8ff6dea](https://github.com/sagemath/sagetrac-mirror/commit/8ff6dea3407fd966611c700f3b0159ef02d73e7d)**



---

archive/issue_comments_505858.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">Comment 76</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4f8b038b26fac602c771b0e0739e637dc9df1cf\">b4f8b03</a></td><td><code>build/pkgs/lrcalc_python: Use version 2.1 released on PyPI</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9286b2d5e6cd651d0be8cc8c0c9401c0a1174385\">9286b2d</a></td><td><code>build/pkgs/lrcalc/checksums.ini: Rename tarball to disambiguate</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ff6dea3407fd966611c700f3b0159ef02d73e7d\">8ff6dea</a></td><td><code>build/pkgs/lrcalc_python/package-version.txt: Update</code></td></tr></table>\n",
    "created_at": "2021-09-20T03:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505858",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:76" align="right">Comment 76</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4f8b038b26fac602c771b0e0739e637dc9df1cf">b4f8b03</a></td><td><code>build/pkgs/lrcalc_python: Use version 2.1 released on PyPI</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9286b2d5e6cd651d0be8cc8c0c9401c0a1174385">9286b2d</a></td><td><code>build/pkgs/lrcalc/checksums.ini: Rename tarball to disambiguate</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ff6dea3407fd966611c700f3b0159ef02d73e7d">8ff6dea</a></td><td><code>build/pkgs/lrcalc_python/package-version.txt: Update</code></td></tr></table>




---

archive/issue_comments_505859.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">Comment 77</div>\n\nReplying to [@asbuch](#comment%3A75):\n> Here it is: https://pypi.org/project/lrcalc/\n\nLooking great!",
    "created_at": "2021-09-20T03:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505859",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:77" align="right">Comment 77</div>

Replying to [@asbuch](#comment%3A75):
> Here it is: https://pypi.org/project/lrcalc/

Looking great!



---

archive/issue_comments_505860.json:
```json
{
    "body": "Changed work issues from **Switch to pypi.io URL when released** to none",
    "created_at": "2021-09-20T03:23:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505860",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **Switch to pypi.io URL when released** to none



---

archive/issue_comments_505861.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">Comment 79</div>\n\nThere's one more detail in the actual C library `lrcalc`. In the `lib..._la_LDFLAGS` in `Makefile.am`, it would be good to add the flag `-no-undefined` - similar to this change: https://github.com/dimpase/autocliquer/commit/ea653f1f65fc0cdd656f7be45726f844862f2229\n\nThis will enable building a shared library on the Cygwin platform (see #29152, #30814).",
    "created_at": "2021-09-20T04:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505861",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:79" align="right">Comment 79</div>

There's one more detail in the actual C library `lrcalc`. In the `lib..._la_LDFLAGS` in `Makefile.am`, it would be good to add the flag `-no-undefined` - similar to this change: https://github.com/dimpase/autocliquer/commit/ea653f1f65fc0cdd656f7be45726f844862f2229

This will enable building a shared library on the Cygwin platform (see #29152, #30814).



---

archive/issue_comments_505862.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">Comment 80</div>\n\nAlso the tarballs for the library and the Python sdist have the same name. I have already worked around this on the Sage side by having the library's tarball renamed, so no action is needed. But it might be a good idea to avoid this potential confusion.",
    "created_at": "2021-09-20T04:06:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505862",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:80" align="right">Comment 80</div>

Also the tarballs for the library and the Python sdist have the same name. I have already worked around this on the Sage side by having the library's tarball renamed, so no action is needed. But it might be a good idea to avoid this potential confusion.



---

archive/issue_comments_505863.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2021-09-20T04:07:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505863",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_413929.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-20T04:07:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413929"
}
```



---

archive/issue_events_413930.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-20T04:07:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413930"
}
```



---

archive/issue_comments_505864.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">Comment 82</div>\n\nReplying to [@mkoeppe](#comment%3A80):\n> Also the tarballs for the library and the Python sdist have the same name. I have already worked around this on the Sage side by having the library's tarball renamed, so no action is needed. But it might be a good idea to avoid this potential confusion.\n\nThanks for the comments! I added the -no-undefined flag. I may try to change the PyPI tarball name to lrcalc-bindings-x.y.z.tar.gz next time I need to make changes. (Maybe there is an option to setuptools to make this happen automagically?)",
    "created_at": "2021-09-20T15:50:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505864",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:82" align="right">Comment 82</div>

Replying to [@mkoeppe](#comment%3A80):
> Also the tarballs for the library and the Python sdist have the same name. I have already worked around this on the Sage side by having the library's tarball renamed, so no action is needed. But it might be a good idea to avoid this potential confusion.

Thanks for the comments! I added the -no-undefined flag. I may try to change the PyPI tarball name to lrcalc-bindings-x.y.z.tar.gz next time I need to make changes. (Maybe there is an option to setuptools to make this happen automagically?)



---

archive/issue_comments_505865.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">Comment 83</div>\n\nI am not aware of an option to customize it in `setuptools`, I think it's a fixed format that uses the distribution package's name (`lrcalc`). Maybe easier to rename the C library package in configure.ac",
    "created_at": "2021-09-20T17:51:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505865",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:83" align="right">Comment 83</div>

I am not aware of an option to customize it in `setuptools`, I think it's a fixed format that uses the distribution package's name (`lrcalc`). Maybe easier to rename the C library package in configure.ac



---

archive/issue_comments_505866.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">Comment 84</div>\n\nReplying to [@mkoeppe](#comment%3A83):\n> I am not aware of an option to customize it in `setuptools`, I think it's a fixed format that uses the distribution package's name (`lrcalc`). Maybe easier to rename the C library package in configure.ac\n\nOk, thanks. In that case I will see if it works if I change the name of the .tar.gz before I upload it with twine. I don't want to change the name I have used for the main package for many years. If the name conflict is a problem, then I would rather change the name of the PyPI project.",
    "created_at": "2021-09-20T21:09:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505866",
    "user": "https://github.com/asbuch"
}
```

<div id="comment:84" align="right">Comment 84</div>

Replying to [@mkoeppe](#comment%3A83):
> I am not aware of an option to customize it in `setuptools`, I think it's a fixed format that uses the distribution package's name (`lrcalc`). Maybe easier to rename the C library package in configure.ac

Ok, thanks. In that case I will see if it works if I change the name of the .tar.gz before I upload it with twine. I don't want to change the name I have used for the main package for many years. If the name conflict is a problem, then I would rather change the name of the PyPI project.



---

archive/issue_comments_505867.json:
```json
{
    "body": "Changed author from **Thierry Monteil, Antonio Rojas** to **Antonio Rojas**",
    "created_at": "2021-09-22T10:13:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505867",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Changed author from **Thierry Monteil, Antonio Rojas** to **Antonio Rojas**



---

archive/issue_comments_505868.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">Comment 86</div>\n\nNeeds a rebase `:/`",
    "created_at": "2021-10-03T08:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505868",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:86" align="right">Comment 86</div>

Needs a rebase `:/`



---

archive/issue_comments_505869.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">Comment 87</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a0bf0a2f4bdc39db561759f5a2ffc938dbcc8d2\">7a0bf0a</a></td><td><code>Merge tag '9.5.beta2' into t/31355/upgrade_lrcalc_to_2_0</code></td></tr></table>\n",
    "created_at": "2021-10-03T16:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505869",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:87" align="right">Comment 87</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a0bf0a2f4bdc39db561759f5a2ffc938dbcc8d2">7a0bf0a</a></td><td><code>Merge tag '9.5.beta2' into t/31355/upgrade_lrcalc_to_2_0</code></td></tr></table>




---

archive/issue_comments_505870.json:
```json
{
    "body": "Changed commit from **[8ff6dea](https://github.com/sagemath/sagetrac-mirror/commit/8ff6dea3407fd966611c700f3b0159ef02d73e7d)** to **[7a0bf0a](https://github.com/sagemath/sagetrac-mirror/commit/7a0bf0a2f4bdc39db561759f5a2ffc938dbcc8d2)**",
    "created_at": "2021-10-03T16:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505870",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8ff6dea](https://github.com/sagemath/sagetrac-mirror/commit/8ff6dea3407fd966611c700f3b0159ef02d73e7d)** to **[7a0bf0a](https://github.com/sagemath/sagetrac-mirror/commit/7a0bf0a2f4bdc39db561759f5a2ffc938dbcc8d2)**



---

archive/issue_comments_505871.json:
```json
{
    "body": "Changed author from **Antonio Rojas** to **Antonio Rojas, Matthias Koeppe**",
    "created_at": "2021-10-03T16:37:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505871",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Antonio Rojas** to **Antonio Rojas, Matthias Koeppe**



---

archive/issue_comments_505872.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe** to **Matthias Koeppe, ...**",
    "created_at": "2021-10-03T16:37:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505872",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Matthias Koeppe** to **Matthias Koeppe, ...**



---

archive/issue_comments_505873.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">Comment 89</div>\n\nSome comments:\n\nShouldn't the doc for `def _lrcalc_dict_to_sage(result):` go after the implementation?\n\nI think the extra `dict` call here is unnecessary:\n\n```diff\n-return dict({_Partitions(i):Integer(k) for i,k in result.items()})\n+return {_Partitions(la): Integer(k) for la,k in result.items()}\n```\n(I changed the variable to make it more clear that it is a partition being returned.)\n\n```diff\n-return dict({tuple(_Partitions(j) for j in i):Integer(k) for i,k in result.items()})\n+return {tuple(_Partitions(mu) for mu in la): Integer(k) for la,k in result.items()}\n```\nAlso, is the `list` call necessary here?\n\n```diff\n-return dict({Permutation(list(i)):Integer(k) for i,k in result.items()})\n+return {Permutation(list(la)): Integer(k) for la,k in result.items()}\n```\n\nFor speed and memory usage (1 object instead of 2):\n\n```diff\n     for i,k in result.items():\n-        output[_Partitions(i[0])] = output.get(_Partitions(i[0]), P.zero()) + k*quantum**(i[1])\n+        la = _Partitions(i[0])\n+        output[la] = output.get(la, P.zero()) + k*quantum**(i[1])\n```\n\nI believe this could be simplified:\n\n```diff\n-        while True:\n-            try:\n-                word = Word([i+1 for i in next(iterator)])\n-                yield SkewTableaux().from_shape_and_word(shape, word)\n-            except StopIteration:\n-                break\n+        ST = SkewTableaux()\n+        for data in iterator:\n+            yield ST.from_shape_and_word(shape, Word([i+1 for i in data]))\n```\nand similarly if `weight` is given. However, I think it would make sense to make `wt = tuple(weight)` and then get the weight of the word (perhaps before even constructing `Word`) first to avoid creating transient objects. We also don't need `word` to be a subclass of `Word`; a `list` is sufficient.",
    "created_at": "2021-10-03T23:52:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505873",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:89" align="right">Comment 89</div>

Some comments:

Shouldn't the doc for `def _lrcalc_dict_to_sage(result):` go after the implementation?

I think the extra `dict` call here is unnecessary:

```diff
-return dict({_Partitions(i):Integer(k) for i,k in result.items()})
+return {_Partitions(la): Integer(k) for la,k in result.items()}
```
(I changed the variable to make it more clear that it is a partition being returned.)

```diff
-return dict({tuple(_Partitions(j) for j in i):Integer(k) for i,k in result.items()})
+return {tuple(_Partitions(mu) for mu in la): Integer(k) for la,k in result.items()}
```
Also, is the `list` call necessary here?

```diff
-return dict({Permutation(list(i)):Integer(k) for i,k in result.items()})
+return {Permutation(list(la)): Integer(k) for la,k in result.items()}
```

For speed and memory usage (1 object instead of 2):

```diff
     for i,k in result.items():
-        output[_Partitions(i[0])] = output.get(_Partitions(i[0]), P.zero()) + k*quantum**(i[1])
+        la = _Partitions(i[0])
+        output[la] = output.get(la, P.zero()) + k*quantum**(i[1])
```

I believe this could be simplified:

```diff
-        while True:
-            try:
-                word = Word([i+1 for i in next(iterator)])
-                yield SkewTableaux().from_shape_and_word(shape, word)
-            except StopIteration:
-                break
+        ST = SkewTableaux()
+        for data in iterator:
+            yield ST.from_shape_and_word(shape, Word([i+1 for i in data]))
```
and similarly if `weight` is given. However, I think it would make sense to make `wt = tuple(weight)` and then get the weight of the word (perhaps before even constructing `Word`) first to avoid creating transient objects. We also don't need `word` to be a subclass of `Word`; a `list` is sufficient.



---

archive/issue_comments_505874.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_lrcalc_to_2_0)** to **[u/arojas/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/upgrade_lrcalc_to_2_0)**",
    "created_at": "2021-10-10T11:28:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505874",
    "user": "https://github.com/antonio-rojas"
}
```

Changed branch from **[u/mkoeppe/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade_lrcalc_to_2_0)** to **[u/arojas/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/upgrade_lrcalc_to_2_0)**



---

archive/issue_comments_505875.json:
```json
{
    "body": "Changed commit from **[7a0bf0a](https://github.com/sagemath/sagetrac-mirror/commit/7a0bf0a2f4bdc39db561759f5a2ffc938dbcc8d2)** to **[2cb4511](https://github.com/sagemath/sagetrac-mirror/commit/2cb45110329e9afb89ec892e56ab244124b34049)**",
    "created_at": "2021-10-10T11:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505875",
    "user": "https://github.com/antonio-rojas"
}
```

Changed commit from **[7a0bf0a](https://github.com/sagemath/sagetrac-mirror/commit/7a0bf0a2f4bdc39db561759f5a2ffc938dbcc8d2)** to **[2cb4511](https://github.com/sagemath/sagetrac-mirror/commit/2cb45110329e9afb89ec892e56ab244124b34049)**



---

archive/issue_comments_505876.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">Comment 91</div>\n\nReplying to [@tscrim](#comment%3A89):\n> Some comments:\n\nThanks for the suggestions, all implemented now.\n\n> Also, is the `list` call necessary here?\n> \n> ```diff\n> -return dict({Permutation(list(i)):Integer(k) for i,k in result.items()})\n> +return {Permutation(list(la)): Integer(k) for la,k in result.items()}\n> ```\n\nYes, otherwise the Permutation constructor will interpret the tuple input as cycle notation.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cb45110329e9afb89ec892e56ab244124b34049\">2cb4511</a></td><td><code>Implement tscrim's suggestions, fix test output</code></td></tr></table>\n",
    "created_at": "2021-10-10T11:30:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505876",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:91" align="right">Comment 91</div>

Replying to [@tscrim](#comment%3A89):
> Some comments:

Thanks for the suggestions, all implemented now.

> Also, is the `list` call necessary here?
> 
> ```diff
> -return dict({Permutation(list(i)):Integer(k) for i,k in result.items()})
> +return {Permutation(list(la)): Integer(k) for la,k in result.items()}
> ```

Yes, otherwise the Permutation constructor will interpret the tuple input as cycle notation.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cb45110329e9afb89ec892e56ab244124b34049">2cb4511</a></td><td><code>Implement tscrim's suggestions, fix test output</code></td></tr></table>




---

archive/issue_comments_505877.json:
```json
{
    "body": "Changed commit from **[2cb4511](https://github.com/sagemath/sagetrac-mirror/commit/2cb45110329e9afb89ec892e56ab244124b34049)** to **[e4f4e1b](https://github.com/sagemath/sagetrac-mirror/commit/e4f4e1b9ae5460fff149b3e953d0d65c928540bf)**",
    "created_at": "2021-10-11T16:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505877",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2cb4511](https://github.com/sagemath/sagetrac-mirror/commit/2cb45110329e9afb89ec892e56ab244124b34049)** to **[e4f4e1b](https://github.com/sagemath/sagetrac-mirror/commit/e4f4e1b9ae5460fff149b3e953d0d65c928540bf)**



---

archive/issue_comments_505878.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">Comment 92</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4f4e1b9ae5460fff149b3e953d0d65c928540bf\">e4f4e1b</a></td><td><code>Simplify</code></td></tr></table>\n",
    "created_at": "2021-10-11T16:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505878",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:92" align="right">Comment 92</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4f4e1b9ae5460fff149b3e953d0d65c928540bf">e4f4e1b</a></td><td><code>Simplify</code></td></tr></table>




---

archive/issue_comments_505879.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">Comment 93</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f24ff7184f5b6f1364f8cd7f66638a47f9ba03c8\">f24ff71</a></td><td><code>Merge remote-tracking branch 'origin/develop' into t/31355/upgrade_lrcalc_to_2_0</code></td></tr></table>\n",
    "created_at": "2021-10-20T07:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505879",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:93" align="right">Comment 93</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f24ff7184f5b6f1364f8cd7f66638a47f9ba03c8">f24ff71</a></td><td><code>Merge remote-tracking branch 'origin/develop' into t/31355/upgrade_lrcalc_to_2_0</code></td></tr></table>




---

archive/issue_comments_505880.json:
```json
{
    "body": "Changed commit from **[e4f4e1b](https://github.com/sagemath/sagetrac-mirror/commit/e4f4e1b9ae5460fff149b3e953d0d65c928540bf)** to **[f24ff71](https://github.com/sagemath/sagetrac-mirror/commit/f24ff7184f5b6f1364f8cd7f66638a47f9ba03c8)**",
    "created_at": "2021-10-20T07:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505880",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e4f4e1b](https://github.com/sagemath/sagetrac-mirror/commit/e4f4e1b9ae5460fff149b3e953d0d65c928540bf)** to **[f24ff71](https://github.com/sagemath/sagetrac-mirror/commit/f24ff7184f5b6f1364f8cd7f66638a47f9ba03c8)**



---

archive/issue_comments_505881.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">Comment 94</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42ecd9a22cc11f1f88cd7d8aab5236ee8e418c46\">42ecd9a</a></td><td><code>Merge remote-tracking branch 'origin' into t/31355/upgrade_lrcalc_to_2_0</code></td></tr></table>\n",
    "created_at": "2021-12-12T13:39:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505881",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:94" align="right">Comment 94</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42ecd9a22cc11f1f88cd7d8aab5236ee8e418c46">42ecd9a</a></td><td><code>Merge remote-tracking branch 'origin' into t/31355/upgrade_lrcalc_to_2_0</code></td></tr></table>




---

archive/issue_comments_505882.json:
```json
{
    "body": "Changed commit from **[f24ff71](https://github.com/sagemath/sagetrac-mirror/commit/f24ff7184f5b6f1364f8cd7f66638a47f9ba03c8)** to **[42ecd9a](https://github.com/sagemath/sagetrac-mirror/commit/42ecd9a22cc11f1f88cd7d8aab5236ee8e418c46)**",
    "created_at": "2021-12-12T13:39:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505882",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f24ff71](https://github.com/sagemath/sagetrac-mirror/commit/f24ff7184f5b6f1364f8cd7f66638a47f9ba03c8)** to **[42ecd9a](https://github.com/sagemath/sagetrac-mirror/commit/42ecd9a22cc11f1f88cd7d8aab5236ee8e418c46)**



---

archive/issue_comments_505883.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">Comment 95</div>\n\nPing. Anything else needed here?",
    "created_at": "2021-12-12T13:40:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505883",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:95" align="right">Comment 95</div>

Ping. Anything else needed here?



---

archive/issue_comments_505884.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">Comment 96</div>\n\nWhat is the minimum lrcalc version required by lrcalc_python?",
    "created_at": "2021-12-12T14:33:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505884",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:96" align="right">Comment 96</div>

What is the minimum lrcalc version required by lrcalc_python?



---

archive/issue_comments_505885.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">Comment 97</div>\n\nlrcalc and lrcalc_python come from the same repo, so I suppose the versions need to match.",
    "created_at": "2021-12-12T17:38:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505885",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:97" align="right">Comment 97</div>

lrcalc and lrcalc_python come from the same repo, so I suppose the versions need to match.



---

archive/issue_comments_505886.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">Comment 98</div>\n\nA number of distrbutions have system-wide lrcalc installations, some still version 1.*, and those can be picked up  by Sage.\n\nIf these are not compatible they should not be used.",
    "created_at": "2021-12-12T17:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505886",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:98" align="right">Comment 98</div>

A number of distrbutions have system-wide lrcalc installations, some still version 1.*, and those can be picked up  by Sage.

If these are not compatible they should not be used.



---

archive/issue_comments_505887.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">Comment 99</div>\n\n1.* will not be picked up, the `ivector.h` header was introduced in 2.0. Don't know about 2.0, according to repology only gentoo is shipping that. @kiwifb, any reason it hasn't been updated to 2.1?",
    "created_at": "2021-12-12T17:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505887",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:99" align="right">Comment 99</div>

1.* will not be picked up, the `ivector.h` header was introduced in 2.0. Don't know about 2.0, according to repology only gentoo is shipping that. @kiwifb, any reason it hasn't been updated to 2.1?



---

archive/issue_comments_505888.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">Comment 0</div>\n\nI just have been quite busy. And since @orlitzky has migrated a lot of packages to the main tree, I feel less personal pressure to update. We have 2.0 in the main tree but not 2.1 yet. I will have to see what needs to be done.",
    "created_at": "2021-12-12T18:40:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505888",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:0" align="right">Comment 0</div>

I just have been quite busy. And since @orlitzky has migrated a lot of packages to the main tree, I feel less personal pressure to update. We have 2.0 in the main tree but not 2.1 yet. I will have to see what needs to be done.



---

archive/issue_comments_505889.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\n`lrcalc_python/SPKG.rst` claims it is GPL2+ but https://bitbucket.org/asbuch/lrcalc/src/master/python/ and https://bitbucket.org/asbuch/lrcalc/src/master/python/setup.py make it pretty clear that it is GPL3.",
    "created_at": "2021-12-12T21:33:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505889",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:1" align="right">Comment 1</div>

`lrcalc_python/SPKG.rst` claims it is GPL2+ but https://bitbucket.org/asbuch/lrcalc/src/master/python/ and https://bitbucket.org/asbuch/lrcalc/src/master/python/setup.py make it pretty clear that it is GPL3.



---

archive/issue_comments_505890.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03e0c8f1d69feced12e025a7c114afbb87e5cd81\">03e0c8f</a></td><td><code>Fix spkg-configure to use C and only pass for version 2.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b944affcf2bb74c343c0983ac24de3bcfe12e9df\">b944aff</a></td><td><code>Fix license</code></td></tr></table>\n",
    "created_at": "2021-12-12T22:21:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505890",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03e0c8f1d69feced12e025a7c114afbb87e5cd81">03e0c8f</a></td><td><code>Fix spkg-configure to use C and only pass for version 2.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b944affcf2bb74c343c0983ac24de3bcfe12e9df">b944aff</a></td><td><code>Fix license</code></td></tr></table>




---

archive/issue_comments_505891.json:
```json
{
    "body": "Changed commit from **[42ecd9a](https://github.com/sagemath/sagetrac-mirror/commit/42ecd9a22cc11f1f88cd7d8aab5236ee8e418c46)** to **[b944aff](https://github.com/sagemath/sagetrac-mirror/commit/b944affcf2bb74c343c0983ac24de3bcfe12e9df)**",
    "created_at": "2021-12-12T22:21:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505891",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[42ecd9a](https://github.com/sagemath/sagetrac-mirror/commit/42ecd9a22cc11f1f88cd7d8aab5236ee8e418c46)** to **[b944aff](https://github.com/sagemath/sagetrac-mirror/commit/b944affcf2bb74c343c0983ac24de3bcfe12e9df)**



---

archive/issue_comments_505892.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">Comment 103</div>\n\nReplying to [@dimpase](#comment%3A98):\n> A number of distrbutions have system-wide lrcalc installations, some still version 1.*, and those can be picked up  by Sage.\n> \n> If these are not compatible they should not be used.\n\nActually `spkg-configure` didn't work at all because it was using C++ instead of C. Fixed it now and added a check for a header only present in 2.1 so it will fail with older versions.\n\nFixed the license too, should be ready to go now.",
    "created_at": "2021-12-12T22:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505892",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:103" align="right">Comment 103</div>

Replying to [@dimpase](#comment%3A98):
> A number of distrbutions have system-wide lrcalc installations, some still version 1.*, and those can be picked up  by Sage.
> 
> If these are not compatible they should not be used.

Actually `spkg-configure` didn't work at all because it was using C++ instead of C. Fixed it now and added a check for a header only present in 2.1 so it will fail with older versions.

Fixed the license too, should be ready to go now.



---

archive/issue_comments_505893.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI have opened a PR for getting 2.1 in Gentoo and I have an ebuild ready for the python bindings for the sage-on-gentoo overlay just waiting for the PR inclusion before going live [because of dependencies requirements, cannot go in until lrcalc-2.1 is present].",
    "created_at": "2021-12-12T22:30:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505893",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:4" align="right">Comment 4</div>

I have opened a PR for getting 2.1 in Gentoo and I have an ebuild ready for the python bindings for the sage-on-gentoo overlay just waiting for the PR inclusion before going live [because of dependencies requirements, cannot go in until lrcalc-2.1 is present].



---

archive/issue_events_413931.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-21T18:16:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413931"
}
```



---

archive/issue_events_413932.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-21T18:16:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413932"
}
```



---

archive/issue_comments_505894.json:
```json
{
    "body": "Changed commit from **[b944aff](https://github.com/sagemath/sagetrac-mirror/commit/b944affcf2bb74c343c0983ac24de3bcfe12e9df)** to **[5d443b9](https://github.com/sagemath/sagetrac-mirror/commit/5d443b9512434b1cdbd9bd1442e8cc73459b80ad)**",
    "created_at": "2021-12-24T09:22:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505894",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b944aff](https://github.com/sagemath/sagetrac-mirror/commit/b944affcf2bb74c343c0983ac24de3bcfe12e9df)** to **[5d443b9](https://github.com/sagemath/sagetrac-mirror/commit/5d443b9512434b1cdbd9bd1442e8cc73459b80ad)**



---

archive/issue_comments_505895.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d443b9512434b1cdbd9bd1442e8cc73459b80ad\">5d443b9</a></td><td><code>Merge remote-tracking branch 'origin/develop' into t/31355/upgrade_lrcalc_to_2_0</code></td></tr></table>\n",
    "created_at": "2021-12-24T09:22:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505895",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6" align="right">Comment 6</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d443b9512434b1cdbd9bd1442e8cc73459b80ad">5d443b9</a></td><td><code>Merge remote-tracking branch 'origin/develop' into t/31355/upgrade_lrcalc_to_2_0</code></td></tr></table>




---

archive/issue_comments_505896.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ffb08d8644c556ae38ce94ee95c979d9c01ea534\">ffb08d8</a></td><td><code>Merge remote-tracking branch 'origin' into t/31355/upgrade_lrcalc_to_2_0</code></td></tr></table>\n",
    "created_at": "2022-01-09T11:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505896",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7" align="right">Comment 7</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ffb08d8644c556ae38ce94ee95c979d9c01ea534">ffb08d8</a></td><td><code>Merge remote-tracking branch 'origin' into t/31355/upgrade_lrcalc_to_2_0</code></td></tr></table>




---

archive/issue_comments_505897.json:
```json
{
    "body": "Changed commit from **[5d443b9](https://github.com/sagemath/sagetrac-mirror/commit/5d443b9512434b1cdbd9bd1442e8cc73459b80ad)** to **[ffb08d8](https://github.com/sagemath/sagetrac-mirror/commit/ffb08d8644c556ae38ce94ee95c979d9c01ea534)**",
    "created_at": "2022-01-09T11:47:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505897",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5d443b9](https://github.com/sagemath/sagetrac-mirror/commit/5d443b9512434b1cdbd9bd1442e8cc73459b80ad)** to **[ffb08d8](https://github.com/sagemath/sagetrac-mirror/commit/ffb08d8644c556ae38ce94ee95c979d9c01ea534)**



---

archive/issue_comments_505898.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nPing, hope to get this in 9.6",
    "created_at": "2022-02-22T20:30:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505898",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:8" align="right">Comment 8</div>

Ping, hope to get this in 9.6



---

archive/issue_comments_505899.json:
```json
{
    "body": "Changed branch from **[u/arojas/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/upgrade_lrcalc_to_2_0)** to **[u/tscrim/upgrade_lrcalc_2_1-31355](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_lrcalc_2_1-31355)**",
    "created_at": "2022-02-23T04:42:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505899",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/arojas/upgrade_lrcalc_to_2_0](https://github.com/sagemath/sagetrac-mirror/tree/u/arojas/upgrade_lrcalc_to_2_0)** to **[u/tscrim/upgrade_lrcalc_2_1-31355](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_lrcalc_2_1-31355)**



---

archive/issue_comments_505900.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,8 @@\n lrcalc 2.1 is out https://bitbucket.org/asbuch/lrcalc/src/master/ChangeLog\n \n Instead of rewriting Sage's Python bindings to support the new API, we replace them with a wrapper around the new upstream provided bindings\n+\n+Upstream:\n+\n+lrcalclib-2.1.tar.gz (lrcalc): https://sites.math.rutgers.edu/~asbuch/lrcalc/lrcalc-2.1.tar.gz\n+lrcalc-2.1.tar.gz (lrcalc_python): https://pypi.io/packages/source/l/lrcalc/lrcalc-2.1.tar.gz\n``````\n",
    "created_at": "2022-02-23T04:42:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505900",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,8 @@
 lrcalc 2.1 is out https://bitbucket.org/asbuch/lrcalc/src/master/ChangeLog
 
 Instead of rewriting Sage's Python bindings to support the new API, we replace them with a wrapper around the new upstream provided bindings
+
+Upstream:
+
+lrcalclib-2.1.tar.gz (lrcalc): https://sites.math.rutgers.edu/~asbuch/lrcalc/lrcalc-2.1.tar.gz
+lrcalc-2.1.tar.gz (lrcalc_python): https://pypi.io/packages/source/l/lrcalc/lrcalc-2.1.tar.gz
``````




---

archive/issue_comments_505901.json:
```json
{
    "body": "Changed commit from **[ffb08d8](https://github.com/sagemath/sagetrac-mirror/commit/ffb08d8644c556ae38ce94ee95c979d9c01ea534)** to **[de4fe09](https://github.com/sagemath/sagetrac-mirror/commit/de4fe092f096b568bdd53849c9ac02ef52953ed9)**",
    "created_at": "2022-02-23T04:42:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505901",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[ffb08d8](https://github.com/sagemath/sagetrac-mirror/commit/ffb08d8644c556ae38ce94ee95c979d9c01ea534)** to **[de4fe09](https://github.com/sagemath/sagetrac-mirror/commit/de4fe092f096b568bdd53849c9ac02ef52953ed9)**



---

archive/issue_comments_505902.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nDoes Sage's auto-download mechanism automatically rename the tarballs to their appropriate values. I am worried that both tarballs (lib and python) are called `lrcalc-2.1.tar.gz` on their respective upstream locations.\n\nI made a few other little tweaks and checked the tests. If my changes are good, then it is a positive review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8d0b5b3f1df5605e29e364c5a52964598bb925a\">e8d0b5b</a></td><td><code>Merge branch 'u/arojas/upgrade_lrcalc_to_2_0' of git://trac.sagemath.org/sage into u/arojas/upgrade_lrcalc_to_2_0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de4fe092f096b568bdd53849c9ac02ef52953ed9\">de4fe09</a></td><td><code>Some improvements to lrcalc.py.</code></td></tr></table>\n",
    "created_at": "2022-02-23T04:42:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505902",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">Comment 9</div>

Does Sage's auto-download mechanism automatically rename the tarballs to their appropriate values. I am worried that both tarballs (lib and python) are called `lrcalc-2.1.tar.gz` on their respective upstream locations.

I made a few other little tweaks and checked the tests. If my changes are good, then it is a positive review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8d0b5b3f1df5605e29e364c5a52964598bb925a">e8d0b5b</a></td><td><code>Merge branch 'u/arojas/upgrade_lrcalc_to_2_0' of git://trac.sagemath.org/sage into u/arojas/upgrade_lrcalc_to_2_0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de4fe092f096b568bdd53849c9ac02ef52953ed9">de4fe09</a></td><td><code>Some improvements to lrcalc.py.</code></td></tr></table>




---

archive/issue_comments_505903.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe, ...** to **Matthias Koeppe, Travis Scrimshaw**",
    "created_at": "2022-02-23T04:42:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505903",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Matthias Koeppe, ...** to **Matthias Koeppe, Travis Scrimshaw**



---

archive/issue_comments_505904.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">Comment 110</div>\n\nReplying to [@tscrim](#comment%3A109):\n> Does Sage's auto-download mechanism automatically rename the tarballs to their appropriate values. I am worried that both tarballs (lib and python) are called `lrcalc-2.1.tar.gz` on their respective upstream locations.\n\nYes, it is renamed to the value given in the `tarball` field of `checksums.ini`. See [comment:80](#comment%3A80).",
    "created_at": "2022-02-23T04:52:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505904",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:110" align="right">Comment 110</div>

Replying to [@tscrim](#comment%3A109):
> Does Sage's auto-download mechanism automatically rename the tarballs to their appropriate values. I am worried that both tarballs (lib and python) are called `lrcalc-2.1.tar.gz` on their respective upstream locations.

Yes, it is renamed to the value given in the `tarball` field of `checksums.ini`. See [comment:80](#comment%3A80).



---

archive/issue_events_413933.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-02-23T07:43:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413933"
}
```



---

archive/issue_events_413934.json:
```json
{
    "actor": "https://github.com/antonio-rojas",
    "created_at": "2022-02-23T07:43:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413934"
}
```



---

archive/issue_comments_505905.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nThanks",
    "created_at": "2022-02-23T07:43:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505905",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:1" align="right">Comment 1</div>

Thanks



---

archive/issue_events_413935.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-27T22:00:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413935"
}
```



---

archive/issue_events_413936.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ebbf07248de85d4a0f1413e9b51f33b37bd5f2bc",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-02-27T22:00:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31355#event-413936"
}
```



---

archive/issue_comments_505906.json:
```json
{
    "body": "Changed branch from **[u/tscrim/upgrade_lrcalc_2_1-31355](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_lrcalc_2_1-31355)** to **[de4fe09](https://github.com/sagemath/sagetrac-mirror/commit/de4fe092f096b568bdd53849c9ac02ef52953ed9)**",
    "created_at": "2022-02-27T22:00:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31355#issuecomment-505906",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/tscrim/upgrade_lrcalc_2_1-31355](https://github.com/sagemath/sagetrac-mirror/tree/u/tscrim/upgrade_lrcalc_2_1-31355)** to **[de4fe09](https://github.com/sagemath/sagetrac-mirror/commit/de4fe092f096b568bdd53849c9ac02ef52953ed9)**
