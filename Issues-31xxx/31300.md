# Issue 31300: doctesting of sage/interfaces/r.py prints some warnings

archive/issues_031063.json:
```json
{
    "body": "As pointed out by gh-kliem in ticket #29967, doctesting the interface to R yields some warnings, even though all tests pass:\n\n```\n~/sage % ./sage -t src/sage/interfaces/r.py\nRunning doctests with ID 2021-01-28-19-03-19-0ac9e573.\nGit branch: develop\nUsing --optional=build,dochtml,homebrew,pip,sage,sage_spkg\nDoctesting 1 file.\nR[write to console]: Warning messages:\n\nR[write to console]: 1: \nR[write to console]: In sage10 + sage6 :\nR[write to console]: \n \nR[write to console]:  longer object length is not a multiple of shorter object length\n\nR[write to console]: 2: \nR[write to console]: In sqrt(sage10) :\nR[write to console]:  NaNs produced\n\nR[write to console]: 3: \nR[write to console]: In sqrt(sage4) :\nR[write to console]:  NaNs produced\n\nsage -t --warn-long 42.2 --random-seed=0 src/sage/interfaces/r.py\n    [257 tests, 3.17 s]\n----------------------------------------------------------------------\nAll tests passed!\n```\nPerhaps a user of R can say whether these warnings are revealing anything that needs to be fixed.\n\n(These warnings were reported with `--random-seed=151058820726654196682836430928254760259`, but I get them even without specifying a seed.)\n\nKeywords: R, statistics\n\nReviewer: Dave Morris\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/31300\n\n",
    "closed_at": "2022-08-02T06:31:03Z",
    "created_at": "2021-01-29T02:16:52Z",
    "labels": [
        "component: interfaces",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "doctesting of sage/interfaces/r.py prints some warnings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31300",
    "user": "https://github.com/DaveWitteMorris"
}
```
As pointed out by gh-kliem in ticket #29967, doctesting the interface to R yields some warnings, even though all tests pass:

```
~/sage % ./sage -t src/sage/interfaces/r.py
Running doctests with ID 2021-01-28-19-03-19-0ac9e573.
Git branch: develop
Using --optional=build,dochtml,homebrew,pip,sage,sage_spkg
Doctesting 1 file.
R[write to console]: Warning messages:

R[write to console]: 1: 
R[write to console]: In sage10 + sage6 :
R[write to console]: 
 
R[write to console]:  longer object length is not a multiple of shorter object length

R[write to console]: 2: 
R[write to console]: In sqrt(sage10) :
R[write to console]:  NaNs produced

R[write to console]: 3: 
R[write to console]: In sqrt(sage4) :
R[write to console]:  NaNs produced

sage -t --warn-long 42.2 --random-seed=0 src/sage/interfaces/r.py
    [257 tests, 3.17 s]
----------------------------------------------------------------------
All tests passed!
```
Perhaps a user of R can say whether these warnings are revealing anything that needs to be fixed.

(These warnings were reported with `--random-seed=151058820726654196682836430928254760259`, but I get them even without specifying a seed.)

Keywords: R, statistics

Reviewer: Dave Morris

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/31300





---

archive/issue_events_081906.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31300",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31300#event-81906"
}
```



---

archive/issue_events_081907.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:12:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31300",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31300#event-81907"
}
```



---

archive/issue_events_081908.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:12:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31300",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31300#event-81908"
}
```



---

archive/issue_events_081909.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31300",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31300#event-81909"
}
```



---

archive/issue_events_081910.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31300",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31300#event-81910"
}
```



---

archive/issue_comments_621146.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dave Morris\"",
    "created_at": "2022-07-09T01:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31300#issuecomment-621146",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing reviewer from "" to "Dave Morris"



---

archive/issue_comments_621147.json:
```json
{
    "body": "<a id='comment:4'></a>The warnings are expected, so there is no problem here, so this ticket should be closed as **invalid**.\n\n1) The doctest is:\n\n```\nThe following command generates a new vector `v` of length 11 constructed\nby adding together (element by element) `2x` repeated 2.2 times, `y`\nrepeated just once, and 1 repeated 11 times::\n\n    sage: v = 2*x+y+1; v  # optional - rpy2\n    [1] 32.2 17.8 10.3 20.2 66.1 21.8 22.6 12.8 16.9 50.8 43.5\n```\nThis is intentionally adding two vectors whose lengths are not multiples of each other: the length of `2*x` is 5, and the length of `y` is 11.\n\n2 and 3) The doctests are:\n\n```\n    sage: r(-17).sqrt()  # optional - rpy2\n    [1] NaN\n\nThe conversion can handle \"not a number\", infintiy, imaginary values and\nmissing values:\n\n    sage: r(-17).sqrt().sage()  # optional - rpy2\n    nan\n```\nBoth are intentionally creating a `NaN` value by taking the square root of a negative number.\n\nRelated ticket: #34134 (typo \"infintiy\" in docstring of r interface)",
    "created_at": "2022-07-09T01:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31300#issuecomment-621147",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:4'></a>The warnings are expected, so there is no problem here, so this ticket should be closed as **invalid**.

1) The doctest is:

```
The following command generates a new vector `v` of length 11 constructed
by adding together (element by element) `2x` repeated 2.2 times, `y`
repeated just once, and 1 repeated 11 times::

    sage: v = 2*x+y+1; v  # optional - rpy2
    [1] 32.2 17.8 10.3 20.2 66.1 21.8 22.6 12.8 16.9 50.8 43.5
```
This is intentionally adding two vectors whose lengths are not multiples of each other: the length of `2*x` is 5, and the length of `y` is 11.

2 and 3) The doctests are:

```
    sage: r(-17).sqrt()  # optional - rpy2
    [1] NaN

The conversion can handle "not a number", infintiy, imaginary values and
missing values:

    sage: r(-17).sqrt().sage()  # optional - rpy2
    nan
```
Both are intentionally creating a `NaN` value by taking the square root of a negative number.

Related ticket: #34134 (typo "infintiy" in docstring of r interface)



---

archive/issue_events_081911.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2022-07-09T01:56:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31300",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31300#event-81911"
}
```



---

archive/issue_events_081912.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2022-07-09T01:56:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31300",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31300#event-81912"
}
```



---

archive/issue_comments_621148.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-07-09T01:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31300#issuecomment-621148",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_621149.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-07-09T01:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31300#issuecomment-621149",
    "user": "https://github.com/DaveWitteMorris"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_081913.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-02T06:31:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31300",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31300#event-81913"
}
```



---

archive/issue_comments_621150.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2022-08-02T06:31:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31300",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31300#issuecomment-621150",
    "user": "https://github.com/mkoeppe"
}
```

Resolution: invalid
