# Issue 31624: fedora-34-standard: eclib, singular, ipykernel build failures with system ntl, zeromq

archive/issues_031387.json:
```json
{
    "assignees": [],
    "body": "from https://groups.google.com/g/sage-release/c/6WjKQt_e_B8/m/dpx1qILOCwAJ (for 9.3.rc2):\n\n9.3.beta8> fedora-34-standard:\n9.3.beta8>   [eclib-20190909]   /usr/bin/ld: /usr/lib64/libntl.so: undefined reference to `std::__exception_ptr::exception_ptr::_M_release()@CXXABI_1.3.13'\n\nfedora-34-standard eclib problem is unchanged in 9.3.rc2, and also issues with ntl show up in singular\n\nSee also: https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/Rrncqdp7AQAJ\n\n\nCC:  @dimpase @jamesjer @kiwifb @enriqueartal @orlitzky @malb\n\nBranch: **[`3197044`](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)**\n\nReviewer: **Volker Braun**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **porting**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31624_\n\n",
    "closed_at": "2021-05-09T20:34:38Z",
    "created_at": "2021-04-08T17:32:06Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "fedora-34-standard: eclib, singular, ipykernel build failures with system ntl, zeromq",
    "type": "issue",
    "updated_at": "2021-05-28T06:09:17Z",
    "url": "https://github.com/sagemath/sage/issues/31624",
    "user": "https://github.com/mkoeppe"
}
```
from https://groups.google.com/g/sage-release/c/6WjKQt_e_B8/m/dpx1qILOCwAJ (for 9.3.rc2):

9.3.beta8> fedora-34-standard:
9.3.beta8>   [eclib-20190909]   /usr/bin/ld: /usr/lib64/libntl.so: undefined reference to `std::__exception_ptr::exception_ptr::_M_release()@CXXABI_1.3.13'

fedora-34-standard eclib problem is unchanged in 9.3.rc2, and also issues with ntl show up in singular

See also: https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/Rrncqdp7AQAJ


CC:  @dimpase @jamesjer @kiwifb @enriqueartal @orlitzky @malb

Branch: **[`3197044`](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)**

Reviewer: **Volker Braun**

Author: **Matthias Koeppe**

Component: **porting**

_Issue created by migration from https://trac.sagemath.org/ticket/31624_





---

archive/issue_events_433014.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-08T17:32:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433014"
}
```



---

archive/issue_events_433015.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-08T17:32:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting",
    "label_color": "0000b0",
    "label_name": "c: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433015"
}
```



---

archive/issue_events_433016.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-08T17:32:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433016"
}
```



---

archive/issue_events_433017.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-08T17:32:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433017"
}
```



---

archive/issue_events_433018.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-15T02:16:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433018"
}
```



---

archive/issue_events_433019.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-15T02:16:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433019"
}
```



---

archive/issue_comments_508531.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,5 @@\n \n fedora-34-standard eclib problem is unchanged in 9.3.rc2, and also issues with ntl show up in singular\n \n+See also: https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/Rrncqdp7AQAJ\n \n``````\n",
    "created_at": "2021-05-06T17:18:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508531",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,5 @@
 
 fedora-34-standard eclib problem is unchanged in 9.3.rc2, and also issues with ntl show up in singular
 
+See also: https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/Rrncqdp7AQAJ
 
``````




---

archive/issue_comments_508532.json:
```json
{
    "body": "Dependencies: **#29703**",
    "created_at": "2021-05-06T17:18:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508532",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#29703**



---

archive/issue_comments_508533.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nAs noted in #29703, upgrading our gcc spkg to 10.3 does not fix this issue.\n\nSo we should probably improve our `ntl/spkg-configure.m4` to make sure that it is usable. (Related: #31578, which will also modify `ntl/spkg-configure.m4`",
    "created_at": "2021-05-06T18:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508533",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

As noted in #29703, upgrading our gcc spkg to 10.3 does not fix this issue.

So we should probably improve our `ntl/spkg-configure.m4` to make sure that it is usable. (Related: #31578, which will also modify `ntl/spkg-configure.m4`



---

archive/issue_events_433020.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:27:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433020"
}
```



---

archive/issue_events_433021.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:27:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433021"
}
```



---

archive/issue_events_433022.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:27:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433022"
}
```



---

archive/issue_events_433023.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:27:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433023"
}
```



---

archive/issue_comments_508534.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAs I wrote in https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/guT9UeiYAgAJ, we could just have ntl's `spkg-configure.m4` reject system NTL if we reject system gcc.\nI'm preparing a patch for this",
    "created_at": "2021-05-06T18:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508534",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

As I wrote in https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/guT9UeiYAgAJ, we could just have ntl's `spkg-configure.m4` reject system NTL if we reject system gcc.
I'm preparing a patch for this



---

archive/issue_events_433024.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:40:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433024"
}
```



---

archive/issue_events_433025.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:40:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433025"
}
```



---

archive/issue_comments_508535.json:
```json
{
    "body": "Branch: **[u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl)**",
    "created_at": "2021-05-06T18:51:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508535",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl)**



---

archive/issue_events_433026.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:52:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433026"
}
```



---

archive/issue_comments_508536.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2021-05-06T18:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508536",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_508537.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/887e9918d25e1adb7fa3b52514c491de152dcb78\"><code>887e991</code></a></td><td><code>build/pkgs/ntl/spkg-configure.m4: Add depcheck for gcc</code></td></tr></table>\n",
    "created_at": "2021-05-06T18:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508537",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/887e9918d25e1adb7fa3b52514c491de152dcb78"><code>887e991</code></a></td><td><code>build/pkgs/ntl/spkg-configure.m4: Add depcheck for gcc</code></td></tr></table>




---

archive/issue_comments_508538.json:
```json
{
    "body": "Commit: **[`887e991`](https://github.com/sagemath/sagetrac-mirror/commit/887e9918d25e1adb7fa3b52514c491de152dcb78)**",
    "created_at": "2021-05-06T18:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508538",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`887e991`](https://github.com/sagemath/sagetrac-mirror/commit/887e9918d25e1adb7fa3b52514c491de152dcb78)**



---

archive/issue_comments_508539.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAlso: \n\n```\n  [ipykernel-5.2.1] error installing, exit status 1. End of log file:\n  [ipykernel-5.2.1]       File \"/sage/local/lib64/python3.9/site-packages/zmq/backend/cython/__init__.py\", line 6, in <module>\n  [ipykernel-5.2.1]         from . import (constants, error, message, context,\n  [ipykernel-5.2.1]     ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libzmq.so.5)\n  [ipykernel-5.2.1]     Building wheel for ipykernel (PEP 517): finished with status 'error'\n  [ipykernel-5.2.1]     ERROR: Failed building wheel for ipykernel\n  [ipykernel-5.2.1]   Failed to build ipykernel\n```",
    "created_at": "2021-05-06T19:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508539",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Also: 

```
  [ipykernel-5.2.1] error installing, exit status 1. End of log file:
  [ipykernel-5.2.1]       File "/sage/local/lib64/python3.9/site-packages/zmq/backend/cython/__init__.py", line 6, in <module>
  [ipykernel-5.2.1]         from . import (constants, error, message, context,
  [ipykernel-5.2.1]     ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libzmq.so.5)
  [ipykernel-5.2.1]     Building wheel for ipykernel (PEP 517): finished with status 'error'
  [ipykernel-5.2.1]     ERROR: Failed building wheel for ipykernel
  [ipykernel-5.2.1]   Failed to build ipykernel
```



---

archive/issue_events_433027.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T19:43:41Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "title_is": "fedora-34-standard: eclib, singular, ipykernel build failures with system ntl, zeromq",
    "title_was": "fedora-34-standard: eclib, singular build failures with system ntl",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433027"
}
```



---

archive/issue_comments_508540.json:
```json
{
    "body": "Changed commit from **[`887e991`](https://github.com/sagemath/sagetrac-mirror/commit/887e9918d25e1adb7fa3b52514c491de152dcb78)** to **[`5594edd`](https://github.com/sagemath/sagetrac-mirror/commit/5594edd417e6a4bb7b1b21fb04b94512ddfe6be5)**",
    "created_at": "2021-05-06T19:44:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508540",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`887e991`](https://github.com/sagemath/sagetrac-mirror/commit/887e9918d25e1adb7fa3b52514c491de152dcb78)** to **[`5594edd`](https://github.com/sagemath/sagetrac-mirror/commit/5594edd417e6a4bb7b1b21fb04b94512ddfe6be5)**



---

archive/issue_comments_508541.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5594edd417e6a4bb7b1b21fb04b94512ddfe6be5\"><code>5594edd</code></a></td><td><code>build/pkgs/zeromq/spkg-configure.m4: Add depcheck for gcc</code></td></tr></table>\n",
    "created_at": "2021-05-06T19:44:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508541",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5594edd417e6a4bb7b1b21fb04b94512ddfe6be5"><code>5594edd</code></a></td><td><code>build/pkgs/zeromq/spkg-configure.m4: Add depcheck for gcc</code></td></tr></table>




---

archive/issue_comments_508542.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWith these changes, `make build` succeeds.\nBut building the documentation reveals another error:\n\n```\n[dochtml]   File \"sage/matrix/matrix_modn_sparse.pyx\", line 1, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:17097)\n[dochtml]   File \"sage/matrix/matrix_integer_sparse.pyx\", line 1, in init sage.matrix.matrix_integer_sparse (build/cythonized/sage/matrix/matrix_integer_sparse.cpp:17107)\n[dochtml]   File \"sage/matrix/matrix_integer_dense.pyx\", line 1, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.cpp:57743)\n[dochtml] ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libvmaf.so.0)\n```",
    "created_at": "2021-05-06T23:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508542",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

With these changes, `make build` succeeds.
But building the documentation reveals another error:

```
[dochtml]   File "sage/matrix/matrix_modn_sparse.pyx", line 1, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:17097)
[dochtml]   File "sage/matrix/matrix_integer_sparse.pyx", line 1, in init sage.matrix.matrix_integer_sparse (build/cythonized/sage/matrix/matrix_integer_sparse.cpp:17107)
[dochtml]   File "sage/matrix/matrix_integer_dense.pyx", line 1, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.cpp:57743)
[dochtml] ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libvmaf.so.0)
```



---

archive/issue_comments_508543.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df4274ec4cd767a02df0f5819b20f3f6331382bb\"><code>df4274e</code></a></td><td><code>build/pkgs/{freetype,libgd}/spkg-configure.m4: Add depcheck for gcc</code></td></tr></table>\n",
    "created_at": "2021-05-07T06:57:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508543",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df4274ec4cd767a02df0f5819b20f3f6331382bb"><code>df4274e</code></a></td><td><code>build/pkgs/{freetype,libgd}/spkg-configure.m4: Add depcheck for gcc</code></td></tr></table>




---

archive/issue_comments_508544.json:
```json
{
    "body": "Changed commit from **[`5594edd`](https://github.com/sagemath/sagetrac-mirror/commit/5594edd417e6a4bb7b1b21fb04b94512ddfe6be5)** to **[`df4274e`](https://github.com/sagemath/sagetrac-mirror/commit/df4274ec4cd767a02df0f5819b20f3f6331382bb)**",
    "created_at": "2021-05-07T06:57:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508544",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5594edd`](https://github.com/sagemath/sagetrac-mirror/commit/5594edd417e6a4bb7b1b21fb04b94512ddfe6be5)** to **[`df4274e`](https://github.com/sagemath/sagetrac-mirror/commit/df4274ec4cd767a02df0f5819b20f3f6331382bb)**



---

archive/issue_comments_508545.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI found this error while building, I think that `--with-system-libgd=no --with-system-brial=no` (at least one of them) in `./configure` did work.\n\nReplying to [@mkoeppe](#comment%3A11):\n> With these changes, `make build` succeeds.\n> But building the documentation reveals another error:\n> \n> ```\n> [dochtml]   File \"sage/matrix/matrix_modn_sparse.pyx\", line 1, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:17097)\n> [dochtml]   File \"sage/matrix/matrix_integer_sparse.pyx\", line 1, in init sage.matrix.matrix_integer_sparse (build/cythonized/sage/matrix/matrix_integer_sparse.cpp:17107)\n> [dochtml]   File \"sage/matrix/matrix_integer_dense.pyx\", line 1, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.cpp:57743)\n> [dochtml] ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libvmaf.so.0)\n> ```\n> \n\n>",
    "created_at": "2021-05-07T18:46:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508545",
    "user": "https://github.com/enriqueartal"
}
```

<div id="comment:13" align="right">comment:13</div>

I found this error while building, I think that `--with-system-libgd=no --with-system-brial=no` (at least one of them) in `./configure` did work.

Replying to [@mkoeppe](#comment%3A11):
> With these changes, `make build` succeeds.
> But building the documentation reveals another error:
> 
> ```
> [dochtml]   File "sage/matrix/matrix_modn_sparse.pyx", line 1, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:17097)
> [dochtml]   File "sage/matrix/matrix_integer_sparse.pyx", line 1, in init sage.matrix.matrix_integer_sparse (build/cythonized/sage/matrix/matrix_integer_sparse.cpp:17107)
> [dochtml]   File "sage/matrix/matrix_integer_dense.pyx", line 1, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.cpp:57743)
> [dochtml] ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libvmaf.so.0)
> ```
> 

>



---

archive/issue_comments_508546.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI already did the `libgd` above and just ran into the `brial` issue too.",
    "created_at": "2021-05-07T18:48:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508546",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

I already did the `libgd` above and just ran into the `brial` issue too.



---

archive/issue_comments_508547.json:
```json
{
    "body": "Changed commit from **[`df4274e`](https://github.com/sagemath/sagetrac-mirror/commit/df4274ec4cd767a02df0f5819b20f3f6331382bb)** to **[`04ca242`](https://github.com/sagemath/sagetrac-mirror/commit/04ca24245faf39d51bfd468aeb18cf73f70107f2)**",
    "created_at": "2021-05-07T18:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508547",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`df4274e`](https://github.com/sagemath/sagetrac-mirror/commit/df4274ec4cd767a02df0f5819b20f3f6331382bb)** to **[`04ca242`](https://github.com/sagemath/sagetrac-mirror/commit/04ca24245faf39d51bfd468aeb18cf73f70107f2)**



---

archive/issue_comments_508548.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04ca24245faf39d51bfd468aeb18cf73f70107f2\"><code>04ca242</code></a></td><td><code>build/pkgs/brial/spkg-configure.m4: Add depcheck on gcc</code></td></tr></table>\n",
    "created_at": "2021-05-07T18:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508548",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04ca24245faf39d51bfd468aeb18cf73f70107f2"><code>04ca242</code></a></td><td><code>build/pkgs/brial/spkg-configure.m4: Add depcheck on gcc</code></td></tr></table>




---

archive/issue_comments_508549.json:
```json
{
    "body": "Changed commit from **[`04ca242`](https://github.com/sagemath/sagetrac-mirror/commit/04ca24245faf39d51bfd468aeb18cf73f70107f2)** to **[`2012f7c`](https://github.com/sagemath/sagetrac-mirror/commit/2012f7c31b3871769a0c49c277bcb579e29478cd)**",
    "created_at": "2021-05-07T19:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508549",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`04ca242`](https://github.com/sagemath/sagetrac-mirror/commit/04ca24245faf39d51bfd468aeb18cf73f70107f2)** to **[`2012f7c`](https://github.com/sagemath/sagetrac-mirror/commit/2012f7c31b3871769a0c49c277bcb579e29478cd)**



---

archive/issue_comments_508550.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2012f7c31b3871769a0c49c277bcb579e29478cd\"><code>2012f7c</code></a></td><td><code>build/pkgs/ppl/spkg-configure.m4: Add depcheck on gcc</code></td></tr></table>\n",
    "created_at": "2021-05-07T19:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508550",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2012f7c31b3871769a0c49c277bcb579e29478cd"><code>2012f7c</code></a></td><td><code>build/pkgs/ppl/spkg-configure.m4: Add depcheck on gcc</code></td></tr></table>




---

archive/issue_comments_508551.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cedbb31e02f260cb702c9ecfbeabe1659090408e\"><code>cedbb31</code></a></td><td><code>build/pkgs/fplll/spkg-configure.m4: Add depcheck on gcc</code></td></tr></table>\n",
    "created_at": "2021-05-07T19:51:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508551",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cedbb31e02f260cb702c9ecfbeabe1659090408e"><code>cedbb31</code></a></td><td><code>build/pkgs/fplll/spkg-configure.m4: Add depcheck on gcc</code></td></tr></table>




---

archive/issue_comments_508552.json:
```json
{
    "body": "Changed commit from **[`2012f7c`](https://github.com/sagemath/sagetrac-mirror/commit/2012f7c31b3871769a0c49c277bcb579e29478cd)** to **[`cedbb31`](https://github.com/sagemath/sagetrac-mirror/commit/cedbb31e02f260cb702c9ecfbeabe1659090408e)**",
    "created_at": "2021-05-07T19:51:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508552",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2012f7c`](https://github.com/sagemath/sagetrac-mirror/commit/2012f7c31b3871769a0c49c277bcb579e29478cd)** to **[`cedbb31`](https://github.com/sagemath/sagetrac-mirror/commit/cedbb31e02f260cb702c9ecfbeabe1659090408e)**



---

archive/issue_comments_508553.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nWith this I am running into an fplll build error:\n\n```\n[fplll-5.4.0] libtool: link: g++ -std=c++11 -O2 -g -fPIC -I/sage/local/include/ -Wl,-rpath-link -Wl,/sage/local/lib -Wl,-rpath -Wl,/sage/local/lib -o .libs/fplll main.o  -L/sage/local/lib ./.libs/libfplll.so -lmpfr -lgmp -pthread -Wl,-rpath -Wl,/sage/local/lib\n[fplll-5.4.0] libtool: link: g++ -std=c++11 -O2 -g -fPIC -I/sage/local/include/ -Wl,-rpath-link -Wl,/sage/local/lib -Wl,-rpath -Wl,/sage/local/lib -o .libs/latticegen latticegen.o  -L/sage/local/lib ./.libs/libfplll.so -lmpfr -lgmp -pthread -Wl,-rpath -Wl,/sage/local/lib\n[fplll-5.4.0] /usr/bin/ld: /usr/lib64/libqd.so.0: undefined reference to `std::__istream_extract(std::istream&, char*, long)@GLIBCXX_3.4.29'\n[fplll-5.4.0] collect2: error: ld returned 1 exit status\n[fplll-5.4.0] make[6]: *** [Makefile:1119: latticegen] Error 1\n[fplll-5.4.0] make[6]: *** Waiting for unfinished jobs....\n[fplll-5.4.0] /usr/bin/ld: /usr/lib64/libqd.so.0: undefined reference to `std::__istream_extract(std::istream&, char*, long)@GLIBCXX_3.4.29'\n[fplll-5.4.0] collect2: error: ld returned 1 exit status\n```",
    "created_at": "2021-05-07T20:30:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508553",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

With this I am running into an fplll build error:

```
[fplll-5.4.0] libtool: link: g++ -std=c++11 -O2 -g -fPIC -I/sage/local/include/ -Wl,-rpath-link -Wl,/sage/local/lib -Wl,-rpath -Wl,/sage/local/lib -o .libs/fplll main.o  -L/sage/local/lib ./.libs/libfplll.so -lmpfr -lgmp -pthread -Wl,-rpath -Wl,/sage/local/lib
[fplll-5.4.0] libtool: link: g++ -std=c++11 -O2 -g -fPIC -I/sage/local/include/ -Wl,-rpath-link -Wl,/sage/local/lib -Wl,-rpath -Wl,/sage/local/lib -o .libs/latticegen latticegen.o  -L/sage/local/lib ./.libs/libfplll.so -lmpfr -lgmp -pthread -Wl,-rpath -Wl,/sage/local/lib
[fplll-5.4.0] /usr/bin/ld: /usr/lib64/libqd.so.0: undefined reference to `std::__istream_extract(std::istream&, char*, long)@GLIBCXX_3.4.29'
[fplll-5.4.0] collect2: error: ld returned 1 exit status
[fplll-5.4.0] make[6]: *** [Makefile:1119: latticegen] Error 1
[fplll-5.4.0] make[6]: *** Waiting for unfinished jobs....
[fplll-5.4.0] /usr/bin/ld: /usr/lib64/libqd.so.0: undefined reference to `std::__istream_extract(std::istream&, char*, long)@GLIBCXX_3.4.29'
[fplll-5.4.0] collect2: error: ld returned 1 exit status
```



---

archive/issue_comments_508554.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nWe do not have an spkg for qd -- so we cannot fix this problem with spkg-configure.\nOpened #31792 for adding a package for it",
    "created_at": "2021-05-07T20:44:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508554",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

We do not have an spkg for qd -- so we cannot fix this problem with spkg-configure.
Opened #31792 for adding a package for it



---

archive/issue_comments_508555.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368\"><code>3197044</code></a></td><td><code>build/pkgs/fplll/spkg-install.in: Configure --without-qd if we use gcc from spkg</code></td></tr></table>\n",
    "created_at": "2021-05-07T23:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508555",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368"><code>3197044</code></a></td><td><code>build/pkgs/fplll/spkg-install.in: Configure --without-qd if we use gcc from spkg</code></td></tr></table>




---

archive/issue_comments_508556.json:
```json
{
    "body": "Changed commit from **[`cedbb31`](https://github.com/sagemath/sagetrac-mirror/commit/cedbb31e02f260cb702c9ecfbeabe1659090408e)** to **[`3197044`](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)**",
    "created_at": "2021-05-07T23:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508556",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cedbb31`](https://github.com/sagemath/sagetrac-mirror/commit/cedbb31e02f260cb702c9ecfbeabe1659090408e)** to **[`3197044`](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)**



---

archive/issue_comments_508557.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThis version works for me.\nLet's get it into Sage 9.3 please",
    "created_at": "2021-05-08T00:21:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508557",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

This version works for me.
Let's get it into Sage 9.3 please



---

archive/issue_comments_508558.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nas #29703 is a dependency with 9.4 milestone, it does not seem to make sense to insist on 9.3 milestone here.",
    "created_at": "2021-05-08T09:25:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508558",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

as #29703 is a dependency with 9.4 milestone, it does not seem to make sense to insist on 9.3 milestone here.



---

archive/issue_comments_508559.json:
```json
{
    "body": "Changed dependencies from **#29703** to none",
    "created_at": "2021-05-08T15:46:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508559",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29703** to none



---

archive/issue_comments_508560.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI forgot to remove the dependency.",
    "created_at": "2021-05-08T15:46:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508560",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

I forgot to remove the dependency.



---

archive/issue_comments_508561.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2021-05-09T08:22:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508561",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_events_433028.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-09T08:22:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433028"
}
```



---

archive/issue_events_433029.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-09T08:22:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433029"
}
```



---

archive/issue_comments_508562.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThanks!",
    "created_at": "2021-05-09T15:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508562",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Thanks!



---

archive/issue_events_433030.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-09T20:34:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433030"
}
```



---

archive/issue_events_433031.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3f4547f2cc40338ba42329d53f7fb48c31ff9fc8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-05-09T20:34:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-433031"
}
```



---

archive/issue_comments_508563.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl)** to **[`3197044`](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)**",
    "created_at": "2021-05-09T20:34:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508563",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl)** to **[`3197044`](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)**



---

archive/issue_comments_508564.json:
```json
{
    "body": "Changed commit from **[`3197044`](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)** to none",
    "created_at": "2021-05-27T07:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508564",
    "user": "https://github.com/enriqueartal"
}
```

Changed commit from **[`3197044`](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)** to none



---

archive/issue_comments_508565.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: \n\n/usr/bin/ld: /usr/lib64/libvmaf.so.0: undefined reference to `std::__throw_bad_array_new_length()@GLIBCXX_3.4.29'\n\nFor 9.3 ./configure --with-system-zeromq=no --with-system-eclib=no --with-system-flint=no --with-system-flintqs=no --with-system-ntl=no --with-system-libgd=no --with-system-brial=no was ok",
    "created_at": "2021-05-27T07:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508565",
    "user": "https://github.com/enriqueartal"
}
```

<div id="comment:28" align="right">comment:28</div>

I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: 

/usr/bin/ld: /usr/lib64/libvmaf.so.0: undefined reference to `std::__throw_bad_array_new_length()@GLIBCXX_3.4.29'

For 9.3 ./configure --with-system-zeromq=no --with-system-eclib=no --with-system-flint=no --with-system-flintqs=no --with-system-ntl=no --with-system-libgd=no --with-system-brial=no was ok



---

archive/issue_comments_508566.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@enriqueartal](#comment%3A28):\n> I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: \n\ncan't you just use the system libgd?",
    "created_at": "2021-05-27T11:06:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508566",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@enriqueartal](#comment%3A28):
> I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: 

can't you just use the system libgd?



---

archive/issue_comments_508567.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@dimpase](#comment%3A29):\n> Replying to [@enriqueartal](#comment%3A28):\n> > I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: \n\n> \n> can't you just use the system libgd?\n> \n\nEven after ./configure --with-system-libgd=yes it tries to compile libgd-2.3.2",
    "created_at": "2021-05-28T05:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508567",
    "user": "https://github.com/enriqueartal"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@dimpase](#comment%3A29):
> Replying to [@enriqueartal](#comment%3A28):
> > I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: 

> 
> can't you just use the system libgd?
> 

Even after ./configure --with-system-libgd=yes it tries to compile libgd-2.3.2



---

archive/issue_comments_508568.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\n`libgd` is rejected because of g++11. Unfortunately building `libgd` ourselves appears to create similar issues with other libraries that are (optional) dependencies (not shipped with Sage). The best way to fix this is to fix the remaining issues that block our use of system gcc 11 (#31786). We could also try to fix up our `libgd` install scripts (see #27901)",
    "created_at": "2021-05-28T06:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-508568",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

`libgd` is rejected because of g++11. Unfortunately building `libgd` ourselves appears to create similar issues with other libraries that are (optional) dependencies (not shipped with Sage). The best way to fix this is to fix the remaining issues that block our use of system gcc 11 (#31786). We could also try to fix up our `libgd` install scripts (see #27901)
