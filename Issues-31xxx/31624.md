# Issue 31624: fedora-34-standard: eclib, singular, ipykernel build failures with system ntl, zeromq

archive/issues_031387.json:
```json
{
    "assignees": [],
    "body": "from https://groups.google.com/g/sage-release/c/6WjKQt_e_B8/m/dpx1qILOCwAJ (for 9.3.rc2):\n\n9.3.beta8> fedora-34-standard:\n9.3.beta8>   [eclib-20190909]   /usr/bin/ld: /usr/lib64/libntl.so: undefined reference to `std::__exception_ptr::exception_ptr::_M_release()@CXXABI_1.3.13'\n\nfedora-34-standard eclib problem is unchanged in 9.3.rc2, and also issues with ntl show up in singular\n\nSee also: https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/Rrncqdp7AQAJ\n\n\nCC:  @dimpase @jamesjer @kiwifb @enriqueartal @orlitzky @malb\n\nBranch: **[3197044](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)**\n\nReviewer: **Volker Braun**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31624_\n\n",
    "closed_at": "2021-05-09T20:34:38Z",
    "created_at": "2021-04-08T17:32:06Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20porting",
        "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "fedora-34-standard: eclib, singular, ipykernel build failures with system ntl, zeromq",
    "type": "issue",
    "updated_at": "2021-05-28T06:09:17Z",
    "url": "https://github.com/sagemath/sage/issues/31624",
    "user": "https://github.com/mkoeppe"
}
```
from https://groups.google.com/g/sage-release/c/6WjKQt_e_B8/m/dpx1qILOCwAJ (for 9.3.rc2):

9.3.beta8> fedora-34-standard:
9.3.beta8>   [eclib-20190909]   /usr/bin/ld: /usr/lib64/libntl.so: undefined reference to `std::__exception_ptr::exception_ptr::_M_release()@CXXABI_1.3.13'

fedora-34-standard eclib problem is unchanged in 9.3.rc2, and also issues with ntl show up in singular

See also: https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/Rrncqdp7AQAJ


CC:  @dimpase @jamesjer @kiwifb @enriqueartal @orlitzky @malb

Branch: **[3197044](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)**

Reviewer: **Volker Braun**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/31624_





---

archive/issue_events_417944.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-08T17:32:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417944"
}
```



---

archive/issue_events_417945.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-08T17:32:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting",
    "label_color": "000080",
    "label_name": "component: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417945"
}
```



---

archive/issue_events_417946.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-08T17:32:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417946"
}
```



---

archive/issue_events_417947.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-08T17:32:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417947"
}
```



---

archive/issue_events_417948.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-15T02:16:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417948"
}
```



---

archive/issue_events_417949.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-15T02:16:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417949"
}
```



---

archive/issue_comments_511612.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,5 @@\n \n fedora-34-standard eclib problem is unchanged in 9.3.rc2, and also issues with ntl show up in singular\n \n+See also: https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/Rrncqdp7AQAJ\n \n``````\n",
    "created_at": "2021-05-06T17:18:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511612",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,5 @@
 
 fedora-34-standard eclib problem is unchanged in 9.3.rc2, and also issues with ntl show up in singular
 
+See also: https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/Rrncqdp7AQAJ
 
``````




---

archive/issue_comments_511613.json:
```json
{
    "body": "Dependencies: **#29703**",
    "created_at": "2021-05-06T17:18:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511613",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#29703**



---

archive/issue_comments_511614.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nAs noted in #29703, upgrading our gcc spkg to 10.3 does not fix this issue.\n\nSo we should probably improve our `ntl/spkg-configure.m4` to make sure that it is usable. (Related: #31578, which will also modify `ntl/spkg-configure.m4`",
    "created_at": "2021-05-06T18:26:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511614",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'>Comment 3:</a>
As noted in #29703, upgrading our gcc spkg to 10.3 does not fix this issue.

So we should probably improve our `ntl/spkg-configure.m4` to make sure that it is usable. (Related: #31578, which will also modify `ntl/spkg-configure.m4`



---

archive/issue_events_417950.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:27:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417950"
}
```



---

archive/issue_events_417951.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:27:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417951"
}
```



---

archive/issue_events_417952.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:27:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417952"
}
```



---

archive/issue_events_417953.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:27:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417953"
}
```



---

archive/issue_comments_511615.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nAs I wrote in https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/guT9UeiYAgAJ, we could just have ntl's `spkg-configure.m4` reject system NTL if we reject system gcc.\nI'm preparing a patch for this",
    "created_at": "2021-05-06T18:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511615",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'>Comment 5:</a>
As I wrote in https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/guT9UeiYAgAJ, we could just have ntl's `spkg-configure.m4` reject system NTL if we reject system gcc.
I'm preparing a patch for this



---

archive/issue_events_417954.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:40:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417954"
}
```



---

archive/issue_events_417955.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:40:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/p1%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417955"
}
```



---

archive/issue_comments_511616.json:
```json
{
    "body": "Branch: **[u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl)**",
    "created_at": "2021-05-06T18:51:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511616",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl)**



---

archive/issue_events_417956.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:52:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417956"
}
```



---

archive/issue_comments_511617.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2021-05-06T18:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511617",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_511618.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/887e9918d25e1adb7fa3b52514c491de152dcb78\">887e991</a></td><td><code>build/pkgs/ntl/spkg-configure.m4: Add depcheck for gcc</code></td></tr></table>\n",
    "created_at": "2021-05-06T18:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511618",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'>Comment 7:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/887e9918d25e1adb7fa3b52514c491de152dcb78">887e991</a></td><td><code>build/pkgs/ntl/spkg-configure.m4: Add depcheck for gcc</code></td></tr></table>




---

archive/issue_comments_511619.json:
```json
{
    "body": "Commit: **[887e991](https://github.com/sagemath/sagetrac-mirror/commit/887e9918d25e1adb7fa3b52514c491de152dcb78)**",
    "created_at": "2021-05-06T18:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511619",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[887e991](https://github.com/sagemath/sagetrac-mirror/commit/887e9918d25e1adb7fa3b52514c491de152dcb78)**



---

archive/issue_comments_511620.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nAlso: \n\n```\n  [ipykernel-5.2.1] error installing, exit status 1. End of log file:\n  [ipykernel-5.2.1]       File \"/sage/local/lib64/python3.9/site-packages/zmq/backend/cython/__init__.py\", line 6, in <module>\n  [ipykernel-5.2.1]         from . import (constants, error, message, context,\n  [ipykernel-5.2.1]     ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libzmq.so.5)\n  [ipykernel-5.2.1]     Building wheel for ipykernel (PEP 517): finished with status 'error'\n  [ipykernel-5.2.1]     ERROR: Failed building wheel for ipykernel\n  [ipykernel-5.2.1]   Failed to build ipykernel\n```",
    "created_at": "2021-05-06T19:42:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511620",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'>Comment 8:</a>
Also: 

```
  [ipykernel-5.2.1] error installing, exit status 1. End of log file:
  [ipykernel-5.2.1]       File "/sage/local/lib64/python3.9/site-packages/zmq/backend/cython/__init__.py", line 6, in <module>
  [ipykernel-5.2.1]         from . import (constants, error, message, context,
  [ipykernel-5.2.1]     ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libzmq.so.5)
  [ipykernel-5.2.1]     Building wheel for ipykernel (PEP 517): finished with status 'error'
  [ipykernel-5.2.1]     ERROR: Failed building wheel for ipykernel
  [ipykernel-5.2.1]   Failed to build ipykernel
```



---

archive/issue_events_417957.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T19:43:41Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "title_is": "fedora-34-standard: eclib, singular, ipykernel build failures with system ntl, zeromq",
    "title_was": "fedora-34-standard: eclib, singular build failures with system ntl",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417957"
}
```



---

archive/issue_comments_511621.json:
```json
{
    "body": "Changed commit from **[887e991](https://github.com/sagemath/sagetrac-mirror/commit/887e9918d25e1adb7fa3b52514c491de152dcb78)** to **[5594edd](https://github.com/sagemath/sagetrac-mirror/commit/5594edd417e6a4bb7b1b21fb04b94512ddfe6be5)**",
    "created_at": "2021-05-06T19:44:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511621",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[887e991](https://github.com/sagemath/sagetrac-mirror/commit/887e9918d25e1adb7fa3b52514c491de152dcb78)** to **[5594edd](https://github.com/sagemath/sagetrac-mirror/commit/5594edd417e6a4bb7b1b21fb04b94512ddfe6be5)**



---

archive/issue_comments_511622.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5594edd417e6a4bb7b1b21fb04b94512ddfe6be5\">5594edd</a></td><td><code>build/pkgs/zeromq/spkg-configure.m4: Add depcheck for gcc</code></td></tr></table>\n",
    "created_at": "2021-05-06T19:44:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511622",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:10'>Comment 10:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5594edd417e6a4bb7b1b21fb04b94512ddfe6be5">5594edd</a></td><td><code>build/pkgs/zeromq/spkg-configure.m4: Add depcheck for gcc</code></td></tr></table>




---

archive/issue_comments_511623.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nWith these changes, `make build` succeeds.\nBut building the documentation reveals another error:\n\n```\n[dochtml]   File \"sage/matrix/matrix_modn_sparse.pyx\", line 1, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:17097)\n[dochtml]   File \"sage/matrix/matrix_integer_sparse.pyx\", line 1, in init sage.matrix.matrix_integer_sparse (build/cythonized/sage/matrix/matrix_integer_sparse.cpp:17107)\n[dochtml]   File \"sage/matrix/matrix_integer_dense.pyx\", line 1, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.cpp:57743)\n[dochtml] ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libvmaf.so.0)\n```",
    "created_at": "2021-05-06T23:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511623",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'>Comment 11:</a>
With these changes, `make build` succeeds.
But building the documentation reveals another error:

```
[dochtml]   File "sage/matrix/matrix_modn_sparse.pyx", line 1, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:17097)
[dochtml]   File "sage/matrix/matrix_integer_sparse.pyx", line 1, in init sage.matrix.matrix_integer_sparse (build/cythonized/sage/matrix/matrix_integer_sparse.cpp:17107)
[dochtml]   File "sage/matrix/matrix_integer_dense.pyx", line 1, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.cpp:57743)
[dochtml] ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libvmaf.so.0)
```



---

archive/issue_comments_511624.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df4274ec4cd767a02df0f5819b20f3f6331382bb\">df4274e</a></td><td><code>build/pkgs/{freetype,libgd}/spkg-configure.m4: Add depcheck for gcc</code></td></tr></table>\n",
    "created_at": "2021-05-07T06:57:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511624",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df4274ec4cd767a02df0f5819b20f3f6331382bb">df4274e</a></td><td><code>build/pkgs/{freetype,libgd}/spkg-configure.m4: Add depcheck for gcc</code></td></tr></table>




---

archive/issue_comments_511625.json:
```json
{
    "body": "Changed commit from **[5594edd](https://github.com/sagemath/sagetrac-mirror/commit/5594edd417e6a4bb7b1b21fb04b94512ddfe6be5)** to **[df4274e](https://github.com/sagemath/sagetrac-mirror/commit/df4274ec4cd767a02df0f5819b20f3f6331382bb)**",
    "created_at": "2021-05-07T06:57:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511625",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5594edd](https://github.com/sagemath/sagetrac-mirror/commit/5594edd417e6a4bb7b1b21fb04b94512ddfe6be5)** to **[df4274e](https://github.com/sagemath/sagetrac-mirror/commit/df4274ec4cd767a02df0f5819b20f3f6331382bb)**



---

archive/issue_comments_511626.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nI found this error while building, I think that `--with-system-libgd=no --with-system-brial=no` (at least one of them) in `./configure` did work.\n\nReplying to [@mkoeppe](#comment%3A11):\n> With these changes, `make build` succeeds.\n> But building the documentation reveals another error:\n> \n> ```\n> [dochtml]   File \"sage/matrix/matrix_modn_sparse.pyx\", line 1, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:17097)\n> [dochtml]   File \"sage/matrix/matrix_integer_sparse.pyx\", line 1, in init sage.matrix.matrix_integer_sparse (build/cythonized/sage/matrix/matrix_integer_sparse.cpp:17107)\n> [dochtml]   File \"sage/matrix/matrix_integer_dense.pyx\", line 1, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.cpp:57743)\n> [dochtml] ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libvmaf.so.0)\n> ```\n> \n\n>",
    "created_at": "2021-05-07T18:46:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511626",
    "user": "https://github.com/enriqueartal"
}
```

<a id='comment:13'>Comment 13:</a>
I found this error while building, I think that `--with-system-libgd=no --with-system-brial=no` (at least one of them) in `./configure` did work.

Replying to [@mkoeppe](#comment%3A11):
> With these changes, `make build` succeeds.
> But building the documentation reveals another error:
> 
> ```
> [dochtml]   File "sage/matrix/matrix_modn_sparse.pyx", line 1, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:17097)
> [dochtml]   File "sage/matrix/matrix_integer_sparse.pyx", line 1, in init sage.matrix.matrix_integer_sparse (build/cythonized/sage/matrix/matrix_integer_sparse.cpp:17107)
> [dochtml]   File "sage/matrix/matrix_integer_dense.pyx", line 1, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.cpp:57743)
> [dochtml] ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libvmaf.so.0)
> ```
> 

>



---

archive/issue_comments_511627.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nI already did the `libgd` above and just ran into the `brial` issue too.",
    "created_at": "2021-05-07T18:48:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511627",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'>Comment 14:</a>
I already did the `libgd` above and just ran into the `brial` issue too.



---

archive/issue_comments_511628.json:
```json
{
    "body": "Changed commit from **[df4274e](https://github.com/sagemath/sagetrac-mirror/commit/df4274ec4cd767a02df0f5819b20f3f6331382bb)** to **[04ca242](https://github.com/sagemath/sagetrac-mirror/commit/04ca24245faf39d51bfd468aeb18cf73f70107f2)**",
    "created_at": "2021-05-07T18:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511628",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[df4274e](https://github.com/sagemath/sagetrac-mirror/commit/df4274ec4cd767a02df0f5819b20f3f6331382bb)** to **[04ca242](https://github.com/sagemath/sagetrac-mirror/commit/04ca24245faf39d51bfd468aeb18cf73f70107f2)**



---

archive/issue_comments_511629.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04ca24245faf39d51bfd468aeb18cf73f70107f2\">04ca242</a></td><td><code>build/pkgs/brial/spkg-configure.m4: Add depcheck on gcc</code></td></tr></table>\n",
    "created_at": "2021-05-07T18:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511629",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:15'>Comment 15:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04ca24245faf39d51bfd468aeb18cf73f70107f2">04ca242</a></td><td><code>build/pkgs/brial/spkg-configure.m4: Add depcheck on gcc</code></td></tr></table>




---

archive/issue_comments_511630.json:
```json
{
    "body": "Changed commit from **[04ca242](https://github.com/sagemath/sagetrac-mirror/commit/04ca24245faf39d51bfd468aeb18cf73f70107f2)** to **[2012f7c](https://github.com/sagemath/sagetrac-mirror/commit/2012f7c31b3871769a0c49c277bcb579e29478cd)**",
    "created_at": "2021-05-07T19:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511630",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[04ca242](https://github.com/sagemath/sagetrac-mirror/commit/04ca24245faf39d51bfd468aeb18cf73f70107f2)** to **[2012f7c](https://github.com/sagemath/sagetrac-mirror/commit/2012f7c31b3871769a0c49c277bcb579e29478cd)**



---

archive/issue_comments_511631.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2012f7c31b3871769a0c49c277bcb579e29478cd\">2012f7c</a></td><td><code>build/pkgs/ppl/spkg-configure.m4: Add depcheck on gcc</code></td></tr></table>\n",
    "created_at": "2021-05-07T19:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511631",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>Comment 16:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2012f7c31b3871769a0c49c277bcb579e29478cd">2012f7c</a></td><td><code>build/pkgs/ppl/spkg-configure.m4: Add depcheck on gcc</code></td></tr></table>




---

archive/issue_comments_511632.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cedbb31e02f260cb702c9ecfbeabe1659090408e\">cedbb31</a></td><td><code>build/pkgs/fplll/spkg-configure.m4: Add depcheck on gcc</code></td></tr></table>\n",
    "created_at": "2021-05-07T19:51:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511632",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cedbb31e02f260cb702c9ecfbeabe1659090408e">cedbb31</a></td><td><code>build/pkgs/fplll/spkg-configure.m4: Add depcheck on gcc</code></td></tr></table>




---

archive/issue_comments_511633.json:
```json
{
    "body": "Changed commit from **[2012f7c](https://github.com/sagemath/sagetrac-mirror/commit/2012f7c31b3871769a0c49c277bcb579e29478cd)** to **[cedbb31](https://github.com/sagemath/sagetrac-mirror/commit/cedbb31e02f260cb702c9ecfbeabe1659090408e)**",
    "created_at": "2021-05-07T19:51:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511633",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2012f7c](https://github.com/sagemath/sagetrac-mirror/commit/2012f7c31b3871769a0c49c277bcb579e29478cd)** to **[cedbb31](https://github.com/sagemath/sagetrac-mirror/commit/cedbb31e02f260cb702c9ecfbeabe1659090408e)**



---

archive/issue_comments_511634.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nWith this I am running into an fplll build error:\n\n```\n[fplll-5.4.0] libtool: link: g++ -std=c++11 -O2 -g -fPIC -I/sage/local/include/ -Wl,-rpath-link -Wl,/sage/local/lib -Wl,-rpath -Wl,/sage/local/lib -o .libs/fplll main.o  -L/sage/local/lib ./.libs/libfplll.so -lmpfr -lgmp -pthread -Wl,-rpath -Wl,/sage/local/lib\n[fplll-5.4.0] libtool: link: g++ -std=c++11 -O2 -g -fPIC -I/sage/local/include/ -Wl,-rpath-link -Wl,/sage/local/lib -Wl,-rpath -Wl,/sage/local/lib -o .libs/latticegen latticegen.o  -L/sage/local/lib ./.libs/libfplll.so -lmpfr -lgmp -pthread -Wl,-rpath -Wl,/sage/local/lib\n[fplll-5.4.0] /usr/bin/ld: /usr/lib64/libqd.so.0: undefined reference to `std::__istream_extract(std::istream&, char*, long)@GLIBCXX_3.4.29'\n[fplll-5.4.0] collect2: error: ld returned 1 exit status\n[fplll-5.4.0] make[6]: *** [Makefile:1119: latticegen] Error 1\n[fplll-5.4.0] make[6]: *** Waiting for unfinished jobs....\n[fplll-5.4.0] /usr/bin/ld: /usr/lib64/libqd.so.0: undefined reference to `std::__istream_extract(std::istream&, char*, long)@GLIBCXX_3.4.29'\n[fplll-5.4.0] collect2: error: ld returned 1 exit status\n```",
    "created_at": "2021-05-07T20:30:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511634",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'>Comment 18:</a>
With this I am running into an fplll build error:

```
[fplll-5.4.0] libtool: link: g++ -std=c++11 -O2 -g -fPIC -I/sage/local/include/ -Wl,-rpath-link -Wl,/sage/local/lib -Wl,-rpath -Wl,/sage/local/lib -o .libs/fplll main.o  -L/sage/local/lib ./.libs/libfplll.so -lmpfr -lgmp -pthread -Wl,-rpath -Wl,/sage/local/lib
[fplll-5.4.0] libtool: link: g++ -std=c++11 -O2 -g -fPIC -I/sage/local/include/ -Wl,-rpath-link -Wl,/sage/local/lib -Wl,-rpath -Wl,/sage/local/lib -o .libs/latticegen latticegen.o  -L/sage/local/lib ./.libs/libfplll.so -lmpfr -lgmp -pthread -Wl,-rpath -Wl,/sage/local/lib
[fplll-5.4.0] /usr/bin/ld: /usr/lib64/libqd.so.0: undefined reference to `std::__istream_extract(std::istream&, char*, long)@GLIBCXX_3.4.29'
[fplll-5.4.0] collect2: error: ld returned 1 exit status
[fplll-5.4.0] make[6]: *** [Makefile:1119: latticegen] Error 1
[fplll-5.4.0] make[6]: *** Waiting for unfinished jobs....
[fplll-5.4.0] /usr/bin/ld: /usr/lib64/libqd.so.0: undefined reference to `std::__istream_extract(std::istream&, char*, long)@GLIBCXX_3.4.29'
[fplll-5.4.0] collect2: error: ld returned 1 exit status
```



---

archive/issue_comments_511635.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nWe do not have an spkg for qd -- so we cannot fix this problem with spkg-configure.\nOpened #31792 for adding a package for it",
    "created_at": "2021-05-07T20:44:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511635",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'>Comment 20:</a>
We do not have an spkg for qd -- so we cannot fix this problem with spkg-configure.
Opened #31792 for adding a package for it



---

archive/issue_comments_511636.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368\">3197044</a></td><td><code>build/pkgs/fplll/spkg-install.in: Configure --without-qd if we use gcc from spkg</code></td></tr></table>\n",
    "created_at": "2021-05-07T23:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511636",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>Comment 21:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368">3197044</a></td><td><code>build/pkgs/fplll/spkg-install.in: Configure --without-qd if we use gcc from spkg</code></td></tr></table>




---

archive/issue_comments_511637.json:
```json
{
    "body": "Changed commit from **[cedbb31](https://github.com/sagemath/sagetrac-mirror/commit/cedbb31e02f260cb702c9ecfbeabe1659090408e)** to **[3197044](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)**",
    "created_at": "2021-05-07T23:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511637",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cedbb31](https://github.com/sagemath/sagetrac-mirror/commit/cedbb31e02f260cb702c9ecfbeabe1659090408e)** to **[3197044](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)**



---

archive/issue_comments_511638.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nThis version works for me.\nLet's get it into Sage 9.3 please",
    "created_at": "2021-05-08T00:21:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511638",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'>Comment 22:</a>
This version works for me.
Let's get it into Sage 9.3 please



---

archive/issue_comments_511639.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nas #29703 is a dependency with 9.4 milestone, it does not seem to make sense to insist on 9.3 milestone here.",
    "created_at": "2021-05-08T09:25:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511639",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'>Comment 23:</a>
as #29703 is a dependency with 9.4 milestone, it does not seem to make sense to insist on 9.3 milestone here.



---

archive/issue_comments_511640.json:
```json
{
    "body": "Changed dependencies from **#29703** to none",
    "created_at": "2021-05-08T15:46:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511640",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29703** to none



---

archive/issue_comments_511641.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nI forgot to remove the dependency.",
    "created_at": "2021-05-08T15:46:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511641",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'>Comment 24:</a>
I forgot to remove the dependency.



---

archive/issue_comments_511642.json:
```json
{
    "body": "Reviewer: **Volker Braun**",
    "created_at": "2021-05-09T08:22:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511642",
    "user": "https://github.com/vbraun"
}
```

Reviewer: **Volker Braun**



---

archive/issue_events_417958.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-09T08:22:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417958"
}
```



---

archive/issue_events_417959.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-09T08:22:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417959"
}
```



---

archive/issue_comments_511643.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nThanks!",
    "created_at": "2021-05-09T15:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511643",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'>Comment 26:</a>
Thanks!



---

archive/issue_events_417960.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-09T20:34:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417960"
}
```



---

archive/issue_events_417961.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3f4547f2cc40338ba42329d53f7fb48c31ff9fc8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-05-09T20:34:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31624#event-417961"
}
```



---

archive/issue_comments_511644.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl)** to **[3197044](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)**",
    "created_at": "2021-05-09T20:34:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511644",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/fedora_34_standard__eclib__singular_build_failures_with_system_ntl)** to **[3197044](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)**



---

archive/issue_comments_511645.json:
```json
{
    "body": "Changed commit from **[3197044](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)** to none",
    "created_at": "2021-05-27T07:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511645",
    "user": "https://github.com/enriqueartal"
}
```

Changed commit from **[3197044](https://github.com/sagemath/sagetrac-mirror/commit/31970444601c16300153cddbac6e0a1658883368)** to none



---

archive/issue_comments_511646.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nI am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: \n\n/usr/bin/ld: /usr/lib64/libvmaf.so.0: undefined reference to `std::__throw_bad_array_new_length()@GLIBCXX_3.4.29'\n\nFor 9.3 ./configure --with-system-zeromq=no --with-system-eclib=no --with-system-flint=no --with-system-flintqs=no --with-system-ntl=no --with-system-libgd=no --with-system-brial=no was ok",
    "created_at": "2021-05-27T07:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511646",
    "user": "https://github.com/enriqueartal"
}
```

<a id='comment:28'>Comment 28:</a>
I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: 

/usr/bin/ld: /usr/lib64/libvmaf.so.0: undefined reference to `std::__throw_bad_array_new_length()@GLIBCXX_3.4.29'

For 9.3 ./configure --with-system-zeromq=no --with-system-eclib=no --with-system-flint=no --with-system-flintqs=no --with-system-ntl=no --with-system-libgd=no --with-system-brial=no was ok



---

archive/issue_comments_511647.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nReplying to [@enriqueartal](#comment%3A28):\n> I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: \n\ncan't you just use the system libgd?",
    "created_at": "2021-05-27T11:06:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511647",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'>Comment 29:</a>
Replying to [@enriqueartal](#comment%3A28):
> I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: 

can't you just use the system libgd?



---

archive/issue_comments_511648.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nReplying to [@dimpase](#comment%3A29):\n> Replying to [@enriqueartal](#comment%3A28):\n> > I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: \n\n> \n> can't you just use the system libgd?\n> \n\nEven after ./configure --with-system-libgd=yes it tries to compile libgd-2.3.2",
    "created_at": "2021-05-28T05:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511648",
    "user": "https://github.com/enriqueartal"
}
```

<a id='comment:30'>Comment 30:</a>
Replying to [@dimpase](#comment%3A29):
> Replying to [@enriqueartal](#comment%3A28):
> > I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: 

> 
> can't you just use the system libgd?
> 

Even after ./configure --with-system-libgd=yes it tries to compile libgd-2.3.2



---

archive/issue_comments_511649.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\n`libgd` is rejected because of g++11. Unfortunately building `libgd` ourselves appears to create similar issues with other libraries that are (optional) dependencies (not shipped with Sage). The best way to fix this is to fix the remaining issues that block our use of system gcc 11 (#31786). We could also try to fix up our `libgd` install scripts (see #27901)",
    "created_at": "2021-05-28T06:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31624#issuecomment-511649",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'>Comment 31:</a>
`libgd` is rejected because of g++11. Unfortunately building `libgd` ourselves appears to create similar issues with other libraries that are (optional) dependencies (not shipped with Sage). The best way to fix this is to fix the remaining issues that block our use of system gcc 11 (#31786). We could also try to fix up our `libgd` install scripts (see #27901)
