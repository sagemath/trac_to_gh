# Issue 31624: fedora-34-standard: eclib, singular, ipykernel build failures with system ntl, zeromq

archive/issues_031387.json:
```json
{
    "body": "from https://groups.google.com/g/sage-release/c/6WjKQt_e_B8/m/dpx1qILOCwAJ (for 9.3.rc2):\n\n9.3.beta8> fedora-34-standard:\n9.3.beta8>   [eclib-20190909]   /usr/bin/ld: /usr/lib64/libntl.so: undefined reference to `std::__exception_ptr::exception_ptr::_M_release()`@`CXXABI_1.3.13'\n\nfedora-34-standard eclib problem is unchanged in 9.3.rc2, and also issues with ntl show up in singular\n\nSee also: https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/Rrncqdp7AQAJ\n\n\nCC:  @dimpase @jamesjer @kiwifb @enriqueartal @orlitzky @malb\n\nReviewer: Volker Braun\n\nAuthor: Matthias Koeppe\n\nBranch: 31970444601c16300153cddbac6e0a1658883368\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31624\n\n",
    "closed_at": "2021-05-09T20:34:38Z",
    "created_at": "2021-04-08T17:32:06Z",
    "labels": [
        "component: porting",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "fedora-34-standard: eclib, singular, ipykernel build failures with system ntl, zeromq",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31624",
    "user": "https://github.com/mkoeppe"
}
```
from https://groups.google.com/g/sage-release/c/6WjKQt_e_B8/m/dpx1qILOCwAJ (for 9.3.rc2):

9.3.beta8> fedora-34-standard:
9.3.beta8>   [eclib-20190909]   /usr/bin/ld: /usr/lib64/libntl.so: undefined reference to `std::__exception_ptr::exception_ptr::_M_release()`@`CXXABI_1.3.13'

fedora-34-standard eclib problem is unchanged in 9.3.rc2, and also issues with ntl show up in singular

See also: https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/Rrncqdp7AQAJ


CC:  @dimpase @jamesjer @kiwifb @enriqueartal @orlitzky @malb

Reviewer: Volker Braun

Author: Matthias Koeppe

Branch: 31970444601c16300153cddbac6e0a1658883368

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31624





---

archive/issue_events_083250.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-15T02:16:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31624#event-83250"
}
```



---

archive/issue_comments_479250.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,6 +4,9 @@\n 9.3.beta8>   [eclib-20190909]   /usr/bin/ld: /usr/lib64/libntl.so: undefined reference to `std::__exception_ptr::exception_ptr::_M_release()`@`CXXABI_1.3.13'\n \n fedora-34-standard eclib problem is unchanged in 9.3.rc2, and also issues with ntl show up in singular\n+\n+See also: https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/Rrncqdp7AQAJ\n+\n \n Comment: 1\n \n``````\n",
    "created_at": "2021-05-06T17:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479250",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,6 +4,9 @@
 9.3.beta8>   [eclib-20190909]   /usr/bin/ld: /usr/lib64/libntl.so: undefined reference to `std::__exception_ptr::exception_ptr::_M_release()`@`CXXABI_1.3.13'
 
 fedora-34-standard eclib problem is unchanged in 9.3.rc2, and also issues with ntl show up in singular
+
+See also: https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/Rrncqdp7AQAJ
+
 
 Comment: 1
 
``````




---

archive/issue_comments_479251.json:
```json
{
    "body": "<a id='comment:3'></a>As noted in #29703, upgrading our gcc spkg to 10.3 does not fix this issue.\n\nSo we should probably improve our `ntl/spkg-configure.m4` to make sure that it is usable. (Related: #31578, which will also modify `ntl/spkg-configure.m4`",
    "created_at": "2021-05-06T18:26:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479251",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>As noted in #29703, upgrading our gcc spkg to 10.3 does not fix this issue.

So we should probably improve our `ntl/spkg-configure.m4` to make sure that it is usable. (Related: #31578, which will also modify `ntl/spkg-configure.m4`



---

archive/issue_events_083251.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:27:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31624#event-83251"
}
```



---

archive/issue_events_083252.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-06T18:27:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31624#event-83252"
}
```



---

archive/issue_comments_479252.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2021-05-06T18:27:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479252",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_479253.json:
```json
{
    "body": "<a id='comment:5'></a>As I wrote in https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/guT9UeiYAgAJ, we could just have ntl's `spkg-configure.m4` reject system NTL if we reject system gcc.\nI'm preparing a patch for this",
    "created_at": "2021-05-06T18:40:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479253",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>As I wrote in https://groups.google.com/g/sage-release/c/PAeKAGNJIJA/m/guT9UeiYAgAJ, we could just have ntl's `spkg-configure.m4` reject system NTL if we reject system gcc.
I'm preparing a patch for this



---

archive/issue_comments_479254.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2021-05-06T18:40:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479254",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_479255.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-05-06T18:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479255",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_479256.json:
```json
{
    "body": "<a id='comment:7'></a>New commits:",
    "created_at": "2021-05-06T18:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479256",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>New commits:



---

archive/issue_comments_479257.json:
```json
{
    "body": "<a id='comment:8'></a>Also: \n\n```\n  [ipykernel-5.2.1] error installing, exit status 1. End of log file:\n  [ipykernel-5.2.1]       File \"/sage/local/lib64/python3.9/site-packages/zmq/backend/cython/__init__.py\", line 6, in <module>\n  [ipykernel-5.2.1]         from . import (constants, error, message, context,\n  [ipykernel-5.2.1]     ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libzmq.so.5)\n  [ipykernel-5.2.1]     Building wheel for ipykernel (PEP 517): finished with status 'error'\n  [ipykernel-5.2.1]     ERROR: Failed building wheel for ipykernel\n  [ipykernel-5.2.1]   Failed to build ipykernel\n```",
    "created_at": "2021-05-06T19:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479257",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Also: 

```
  [ipykernel-5.2.1] error installing, exit status 1. End of log file:
  [ipykernel-5.2.1]       File "/sage/local/lib64/python3.9/site-packages/zmq/backend/cython/__init__.py", line 6, in <module>
  [ipykernel-5.2.1]         from . import (constants, error, message, context,
  [ipykernel-5.2.1]     ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libzmq.so.5)
  [ipykernel-5.2.1]     Building wheel for ipykernel (PEP 517): finished with status 'error'
  [ipykernel-5.2.1]     ERROR: Failed building wheel for ipykernel
  [ipykernel-5.2.1]   Failed to build ipykernel
```



---

archive/issue_comments_479258.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-06T19:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479258",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_479259.json:
```json
{
    "body": "<a id='comment:11'></a>With these changes, `make build` succeeds.\nBut building the documentation reveals another error:\n\n```\n[dochtml]   File \"sage/matrix/matrix_modn_sparse.pyx\", line 1, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:17097)\n[dochtml]   File \"sage/matrix/matrix_integer_sparse.pyx\", line 1, in init sage.matrix.matrix_integer_sparse (build/cythonized/sage/matrix/matrix_integer_sparse.cpp:17107)\n[dochtml]   File \"sage/matrix/matrix_integer_dense.pyx\", line 1, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.cpp:57743)\n[dochtml] ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libvmaf.so.0)\n```",
    "created_at": "2021-05-06T23:57:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479259",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>With these changes, `make build` succeeds.
But building the documentation reveals another error:

```
[dochtml]   File "sage/matrix/matrix_modn_sparse.pyx", line 1, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:17097)
[dochtml]   File "sage/matrix/matrix_integer_sparse.pyx", line 1, in init sage.matrix.matrix_integer_sparse (build/cythonized/sage/matrix/matrix_integer_sparse.cpp:17107)
[dochtml]   File "sage/matrix/matrix_integer_dense.pyx", line 1, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.cpp:57743)
[dochtml] ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libvmaf.so.0)
```



---

archive/issue_comments_479260.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-07T06:57:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479260",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_479261.json:
```json
{
    "body": "<a id='comment:13'></a>I found this error while building, I think that `--with-system-libgd=no --with-system-brial=no` (at least one of them) in `./configure` did work.\n\nReplying to [comment:11 mkoeppe]:\n> With these changes, `make build` succeeds.\n> But building the documentation reveals another error:\n> \n> ```\n> [dochtml]   File \"sage/matrix/matrix_modn_sparse.pyx\", line 1, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:17097)\n> [dochtml]   File \"sage/matrix/matrix_integer_sparse.pyx\", line 1, in init sage.matrix.matrix_integer_sparse (build/cythonized/sage/matrix/matrix_integer_sparse.cpp:17107)\n> [dochtml]   File \"sage/matrix/matrix_integer_dense.pyx\", line 1, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.cpp:57743)\n> [dochtml] ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libvmaf.so.0)\n> ```\n> \n\n>",
    "created_at": "2021-05-07T18:46:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479261",
    "user": "https://github.com/enriqueartal"
}
```

<a id='comment:13'></a>I found this error while building, I think that `--with-system-libgd=no --with-system-brial=no` (at least one of them) in `./configure` did work.

Replying to [comment:11 mkoeppe]:
> With these changes, `make build` succeeds.
> But building the documentation reveals another error:
> 
> ```
> [dochtml]   File "sage/matrix/matrix_modn_sparse.pyx", line 1, in init sage.matrix.matrix_modn_sparse (build/cythonized/sage/matrix/matrix_modn_sparse.cpp:17097)
> [dochtml]   File "sage/matrix/matrix_integer_sparse.pyx", line 1, in init sage.matrix.matrix_integer_sparse (build/cythonized/sage/matrix/matrix_integer_sparse.cpp:17107)
> [dochtml]   File "sage/matrix/matrix_integer_dense.pyx", line 1, in init sage.matrix.matrix_integer_dense (build/cythonized/sage/matrix/matrix_integer_dense.cpp:57743)
> [dochtml] ImportError: /sage/local/lib/libstdc++.so.6: version `GLIBCXX_3.4.29' not found (required by /lib64/libvmaf.so.0)
> ```
> 

>



---

archive/issue_comments_479262.json:
```json
{
    "body": "<a id='comment:14'></a>I already did the `libgd` above and just ran into the `brial` issue too.",
    "created_at": "2021-05-07T18:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479262",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>I already did the `libgd` above and just ran into the `brial` issue too.



---

archive/issue_comments_479263.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-07T18:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479263",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_479264.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-07T19:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479264",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_479265.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-07T19:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479265",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_479266.json:
```json
{
    "body": "<a id='comment:18'></a>With this I am running into an fplll build error:\n\n```\n[fplll-5.4.0] libtool: link: g++ -std=c++11 -O2 -g -fPIC -I/sage/local/include/ -Wl,-rpath-link -Wl,/sage/local/lib -Wl,-rpath -Wl,/sage/local/lib -o .libs/fplll main.o  -L/sage/local/lib ./.libs/libfplll.so -lmpfr -lgmp -pthread -Wl,-rpath -Wl,/sage/local/lib\n[fplll-5.4.0] libtool: link: g++ -std=c++11 -O2 -g -fPIC -I/sage/local/include/ -Wl,-rpath-link -Wl,/sage/local/lib -Wl,-rpath -Wl,/sage/local/lib -o .libs/latticegen latticegen.o  -L/sage/local/lib ./.libs/libfplll.so -lmpfr -lgmp -pthread -Wl,-rpath -Wl,/sage/local/lib\n[fplll-5.4.0] /usr/bin/ld: /usr/lib64/libqd.so.0: undefined reference to `std::__istream_extract(std::istream&, char*, long)@GLIBCXX_3.4.29'\n[fplll-5.4.0] collect2: error: ld returned 1 exit status\n[fplll-5.4.0] make[6]: *** [Makefile:1119: latticegen] Error 1\n[fplll-5.4.0] make[6]: *** Waiting for unfinished jobs....\n[fplll-5.4.0] /usr/bin/ld: /usr/lib64/libqd.so.0: undefined reference to `std::__istream_extract(std::istream&, char*, long)@GLIBCXX_3.4.29'\n[fplll-5.4.0] collect2: error: ld returned 1 exit status\n```",
    "created_at": "2021-05-07T20:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479266",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>With this I am running into an fplll build error:

```
[fplll-5.4.0] libtool: link: g++ -std=c++11 -O2 -g -fPIC -I/sage/local/include/ -Wl,-rpath-link -Wl,/sage/local/lib -Wl,-rpath -Wl,/sage/local/lib -o .libs/fplll main.o  -L/sage/local/lib ./.libs/libfplll.so -lmpfr -lgmp -pthread -Wl,-rpath -Wl,/sage/local/lib
[fplll-5.4.0] libtool: link: g++ -std=c++11 -O2 -g -fPIC -I/sage/local/include/ -Wl,-rpath-link -Wl,/sage/local/lib -Wl,-rpath -Wl,/sage/local/lib -o .libs/latticegen latticegen.o  -L/sage/local/lib ./.libs/libfplll.so -lmpfr -lgmp -pthread -Wl,-rpath -Wl,/sage/local/lib
[fplll-5.4.0] /usr/bin/ld: /usr/lib64/libqd.so.0: undefined reference to `std::__istream_extract(std::istream&, char*, long)@GLIBCXX_3.4.29'
[fplll-5.4.0] collect2: error: ld returned 1 exit status
[fplll-5.4.0] make[6]: *** [Makefile:1119: latticegen] Error 1
[fplll-5.4.0] make[6]: *** Waiting for unfinished jobs....
[fplll-5.4.0] /usr/bin/ld: /usr/lib64/libqd.so.0: undefined reference to `std::__istream_extract(std::istream&, char*, long)@GLIBCXX_3.4.29'
[fplll-5.4.0] collect2: error: ld returned 1 exit status
```



---

archive/issue_comments_479267.json:
```json
{
    "body": "<a id='comment:20'></a>We do not have an spkg for qd -- so we cannot fix this problem with spkg-configure.\nOpened #31792 for adding a package for it",
    "created_at": "2021-05-07T20:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479267",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>We do not have an spkg for qd -- so we cannot fix this problem with spkg-configure.
Opened #31792 for adding a package for it



---

archive/issue_comments_479268.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-07T23:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479268",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_479269.json:
```json
{
    "body": "<a id='comment:22'></a>This version works for me.\nLet's get it into Sage 9.3 please",
    "created_at": "2021-05-08T00:21:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479269",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>This version works for me.
Let's get it into Sage 9.3 please



---

archive/issue_comments_479270.json:
```json
{
    "body": "<a id='comment:23'></a>as #29703 is a dependency with 9.4 milestone, it does not seem to make sense to insist on 9.3 milestone here.",
    "created_at": "2021-05-08T09:25:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479270",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>as #29703 is a dependency with 9.4 milestone, it does not seem to make sense to insist on 9.3 milestone here.



---

archive/issue_comments_479271.json:
```json
{
    "body": "<a id='comment:24'></a>I forgot to remove the dependency.",
    "created_at": "2021-05-08T15:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479271",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>I forgot to remove the dependency.



---

archive/issue_comments_479272.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-05-09T08:22:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479272",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_479273.json:
```json
{
    "body": "<a id='comment:26'></a>Thanks!",
    "created_at": "2021-05-09T15:12:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479273",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>Thanks!



---

archive/issue_comments_479274.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-05-09T20:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479274",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_083253.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-09T20:34:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31624#event-83253"
}
```



---

archive/issue_comments_479275.json:
```json
{
    "body": "<a id='comment:28'></a>I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: \n\n/usr/bin/ld: /usr/lib64/libvmaf.so.0: undefined reference to `std::__throw_bad_array_new_length()`@`GLIBCXX_3.4.29'\n\nFor 9.3 ./configure --with-system-zeromq=no --with-system-eclib=no --with-system-flint=no --with-system-flintqs=no --with-system-ntl=no --with-system-libgd=no --with-system-brial=no was ok",
    "created_at": "2021-05-27T07:22:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479275",
    "user": "https://github.com/enriqueartal"
}
```

<a id='comment:28'></a>I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: 

/usr/bin/ld: /usr/lib64/libvmaf.so.0: undefined reference to `std::__throw_bad_array_new_length()`@`GLIBCXX_3.4.29'

For 9.3 ./configure --with-system-zeromq=no --with-system-eclib=no --with-system-flint=no --with-system-flintqs=no --with-system-ntl=no --with-system-libgd=no --with-system-brial=no was ok



---

archive/issue_comments_479276.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [comment:28 enriqueartal]:\n> I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: \n\n\ncan't you just use the system libgd?",
    "created_at": "2021-05-27T11:06:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479276",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'></a>Replying to [comment:28 enriqueartal]:
> I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: 


can't you just use the system libgd?



---

archive/issue_comments_479277.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:29 dimpase]:\n> Replying to [comment:28 enriqueartal]:\n> > I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: \n\n> \n> can't you just use the system libgd?\n> \n\nEven after ./configure --with-system-libgd=yes it tries to compile libgd-2.3.2",
    "created_at": "2021-05-28T05:57:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479277",
    "user": "https://github.com/enriqueartal"
}
```

<a id='comment:30'></a>Replying to [comment:29 dimpase]:
> Replying to [comment:28 enriqueartal]:
> > I am not sure if it is related to this ticket, but I get a persistent error compiling libgd in 9.4.beta0 in Fedora 34: 

> 
> can't you just use the system libgd?
> 

Even after ./configure --with-system-libgd=yes it tries to compile libgd-2.3.2



---

archive/issue_comments_479278.json:
```json
{
    "body": "<a id='comment:31'></a>`libgd` is rejected because of g++11. Unfortunately building `libgd` ourselves appears to create similar issues with other libraries that are (optional) dependencies (not shipped with Sage). The best way to fix this is to fix the remaining issues that block our use of system gcc 11 (#31786). We could also try to fix up our `libgd` install scripts (see #27901)",
    "created_at": "2021-05-28T06:09:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31624#issuecomment-479278",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>`libgd` is rejected because of g++11. Unfortunately building `libgd` ourselves appears to create similar issues with other libraries that are (optional) dependencies (not shipped with Sage). The best way to fix this is to fix the remaining issues that block our use of system gcc 11 (#31786). We could also try to fix up our `libgd` install scripts (see #27901)
