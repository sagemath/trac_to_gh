# Issue 31609: Add method tangent_vector to differentiable manifolds

archive/issues_031372.json:
```json
{
    "body": "Currently, constructing a tangent vector *v* at some point *p* of a manifold *M* requires two steps: first construct the tangent space at *p*, T<sub>*p*</sub>*M*, and then construct *v* as an element of T<sub>*p*</sub>*M*. For instance:\n\n```\nsage: E.<x,y> = EuclideanSpace()\nsage: p = E((1, 2), name='p')\nsage: Tp = E.tangent_space(p)   # step 1\nsage: v = Tp((-1, 3)); v        # step 2\nVector at Point p on the Euclidean plane E^2\n```\nThis ticket endows the class `DifferentiableManifold` with a method `tangent_vector`, with `vector` as an alias,  to make it a 1-step process. We can now write:\n\n```\nsage: E.<x,y> = EuclideanSpace()\nsage: p = E((1, 2), name='p')\nsage: v = E.vector(p, -1, 3); v\nVector at Point p on the Euclidean plane E^2\n```\nThis feature is motivated by this [ask.sagemath question](https://ask.sagemath.org/question/56483/).\n\nCC:  @slel\n\nKeywords: tangent vector\n\nBranch/Commit: b5d7a8f800fb496de28a5e89cabac2250b124c6f\n\nReviewer: Michael Jung\n\nAuthor: Eric Gourgoulhon\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31609\n\n",
    "closed_at": "2021-06-06T13:18:30Z",
    "created_at": "2021-04-05T09:07:35Z",
    "labels": [
        "component: manifolds"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Add method tangent_vector to differentiable manifolds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31609",
    "user": "https://github.com/egourgoulhon"
}
```
Currently, constructing a tangent vector *v* at some point *p* of a manifold *M* requires two steps: first construct the tangent space at *p*, T<sub>*p*</sub>*M*, and then construct *v* as an element of T<sub>*p*</sub>*M*. For instance:

```
sage: E.<x,y> = EuclideanSpace()
sage: p = E((1, 2), name='p')
sage: Tp = E.tangent_space(p)   # step 1
sage: v = Tp((-1, 3)); v        # step 2
Vector at Point p on the Euclidean plane E^2
```
This ticket endows the class `DifferentiableManifold` with a method `tangent_vector`, with `vector` as an alias,  to make it a 1-step process. We can now write:

```
sage: E.<x,y> = EuclideanSpace()
sage: p = E((1, 2), name='p')
sage: v = E.vector(p, -1, 3); v
Vector at Point p on the Euclidean plane E^2
```
This feature is motivated by this [ask.sagemath question](https://ask.sagemath.org/question/56483/).

CC:  @slel

Keywords: tangent vector

Branch/Commit: b5d7a8f800fb496de28a5e89cabac2250b124c6f

Reviewer: Michael Jung

Author: Eric Gourgoulhon

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31609





---

archive/issue_comments_479035.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-04-05T09:09:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479035",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_479036.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2021-04-05T09:09:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479036",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_479037.json:
```json
{
    "body": "<a id='comment:2'></a>Sweet! I have just one comment. Since Python 3.6, we have f-strings which are way more convenient and easier to read than `format` (and also faster). I'd propose to use f-strings more often in the future. For this ticket:\n\n```diff\n- raise ValueError(\"{} components must be provided\".format(dim))\n+ raise ValueError(f\"{dim} components must be provided\")\n```",
    "created_at": "2021-04-05T17:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479037",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:2'></a>Sweet! I have just one comment. Since Python 3.6, we have f-strings which are way more convenient and easier to read than `format` (and also faster). I'd propose to use f-strings more often in the future. For this ticket:

```diff
- raise ValueError("{} components must be provided".format(dim))
+ raise ValueError(f"{dim} components must be provided")
```



---

archive/issue_comments_479038.json:
```json
{
    "body": "<a id='comment:3'></a>Here is an explanation also elaborating on more advantages of f-strings over `format`: https://realpython.com/python-f-strings/.",
    "created_at": "2021-04-05T17:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479038",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:3'></a>Here is an explanation also elaborating on more advantages of f-strings over `format`: https://realpython.com/python-f-strings/.



---

archive/issue_comments_479039.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-05T21:26:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479039",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_479040.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:3 gh-mjungmath]:\n> Here is an explanation also elaborating on more advantages of f-strings over `format`: https://realpython.com/python-f-strings/.\n\n\nThanks for the tip! The change to f-string is performed in the last commit.",
    "created_at": "2021-04-05T21:27:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479040",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:5'></a>Replying to [comment:3 gh-mjungmath]:
> Here is an explanation also elaborating on more advantages of f-strings over `format`: https://realpython.com/python-f-strings/.


Thanks for the tip! The change to f-string is performed in the last commit.



---

archive/issue_comments_479041.json:
```json
{
    "body": "<a id='comment:6'></a>Is there a reason why you chose `vector` over `tangent_vector` for the method's name? The latter would sound more intuitive to me.",
    "created_at": "2021-04-05T21:52:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479041",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:6'></a>Is there a reason why you chose `vector` over `tangent_vector` for the method's name? The latter would sound more intuitive to me.



---

archive/issue_comments_479042.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 gh-mjungmath]:\n> Is there a reason why you chose `vector` over `tangent_vector` for the method's name? The latter would sound more intuitive to me.\n\n`vector` is more adapted to elementary use, like in vector calculus in the Euclidean space, when the user might not know what \"tangent space\" means. Of course, we can make an alias for `tangent_vector` if you feel it necessary.",
    "created_at": "2021-04-05T22:21:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479042",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:7'></a>Replying to [comment:6 gh-mjungmath]:
> Is there a reason why you chose `vector` over `tangent_vector` for the method's name? The latter would sound more intuitive to me.

`vector` is more adapted to elementary use, like in vector calculus in the Euclidean space, when the user might not know what "tangent space" means. Of course, we can make an alias for `tangent_vector` if you feel it necessary.



---

archive/issue_comments_479043.json:
```json
{
    "body": "<a id='comment:8'></a>Mh, I don't know. Manifolds usually don't constitute of vectors. So a `vector` method wouldn't make much sense there as it sounds to me more like a method that should be reserved for vector spaces only. I'd advocate to rename `vector` to `tangent_vector` because mathematically precise.\n\nThis is a neat feature though, and I don't want to block it just because of my pedantry. An alias sounds like a good compromise.",
    "created_at": "2021-04-06T00:05:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479043",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:8'></a>Mh, I don't know. Manifolds usually don't constitute of vectors. So a `vector` method wouldn't make much sense there as it sounds to me more like a method that should be reserved for vector spaces only. I'd advocate to rename `vector` to `tangent_vector` because mathematically precise.

This is a neat feature though, and I don't want to block it just because of my pedantry. An alias sounds like a good compromise.



---

archive/issue_comments_479044.json:
```json
{
    "body": "<a id='comment:9'></a>Alternatively the Euclidean space, as a special case, can be endowed with an alias `vector` whereas general (differentiable) manifolds only supposed to have `tangent_vector`. I think that is the best solution to maintain preciseness and having that alias in the elementary case at the same time.",
    "created_at": "2021-04-06T00:10:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479044",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:9'></a>Alternatively the Euclidean space, as a special case, can be endowed with an alias `vector` whereas general (differentiable) manifolds only supposed to have `tangent_vector`. I think that is the best solution to maintain preciseness and having that alias in the elementary case at the same time.



---

archive/issue_comments_479045.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-06T09:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479045",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_479046.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n sage: v = Tp((-1, 3)); v        # step 2\n Vector at Point p on the Euclidean plane E^2\n ```\n-This ticket endows the class `DifferentiableManifold` with a method `vector` to make it a 1-step process. We can now write:\n+This ticket endows the class `DifferentiableManifold` with a method `tangent_vector`, with `vector` as an alias,  to make it a 1-step process. We can now write:\n \n ```\n sage: E.<x,y> = EuclideanSpace()\n```\n",
    "created_at": "2021-04-06T09:51:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479046",
    "user": "https://github.com/egourgoulhon"
}
```

Description changed:
```diff
--- 
+++ 
@@ -7,7 +7,7 @@
 sage: v = Tp((-1, 3)); v        # step 2
 Vector at Point p on the Euclidean plane E^2
 ```
-This ticket endows the class `DifferentiableManifold` with a method `vector` to make it a 1-step process. We can now write:
+This ticket endows the class `DifferentiableManifold` with a method `tangent_vector`, with `vector` as an alias,  to make it a 1-step process. We can now write:
 
 ```
 sage: E.<x,y> = EuclideanSpace()
```




---

archive/issue_comments_479047.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:8 gh-mjungmath]:\n> Mh, I don't know. Manifolds usually don't constitute of vectors. So a `vector` method wouldn't make much sense there as it sounds to me more like a method that should be reserved for vector spaces only. I'd advocate to rename `vector` to `tangent_vector` because mathematically precise.\n> \n\n\nOK, this is done in the last commit.\nNote however that saying simply \"vector at point p of manifold M\" is quite unambiguous and is in line with the terminology \"vector field\": we do not say \"tangent vector field\", do we?  \n\n> This is a neat feature though, and I don't want to block it just because of my pedantry. An alias sounds like a good compromise.\n\n\nDone. `vector` is now an alias for `tangent_vector`.",
    "created_at": "2021-04-06T09:51:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479047",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:11'></a>Replying to [comment:8 gh-mjungmath]:
> Mh, I don't know. Manifolds usually don't constitute of vectors. So a `vector` method wouldn't make much sense there as it sounds to me more like a method that should be reserved for vector spaces only. I'd advocate to rename `vector` to `tangent_vector` because mathematically precise.
> 


OK, this is done in the last commit.
Note however that saying simply "vector at point p of manifold M" is quite unambiguous and is in line with the terminology "vector field": we do not say "tangent vector field", do we?  

> This is a neat feature though, and I don't want to block it just because of my pedantry. An alias sounds like a good compromise.


Done. `vector` is now an alias for `tangent_vector`.



---

archive/issue_comments_479048.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:9 gh-mjungmath]:\n> Alternatively the Euclidean space, as a special case, can be endowed with an alias `vector` whereas general (differentiable) manifolds only supposed to have `tangent_vector`. I think that is the best solution to maintain preciseness and having that alias in the elementary case at the same time.\n\n\nI oppose to this: we shall not introduce on Euclidean spaces method names that break for more general manifolds, while the functionality is exactly the same.",
    "created_at": "2021-04-06T09:54:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479048",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:12'></a>Replying to [comment:9 gh-mjungmath]:
> Alternatively the Euclidean space, as a special case, can be endowed with an alias `vector` whereas general (differentiable) manifolds only supposed to have `tangent_vector`. I think that is the best solution to maintain preciseness and having that alias in the elementary case at the same time.


I oppose to this: we shall not introduce on Euclidean spaces method names that break for more general manifolds, while the functionality is exactly the same.



---

archive/issue_comments_479049.json:
```json
{
    "body": "<a id='comment:13'></a>How about requiring\n\n```\nv = E.vector(p, (-1, 3))\n```\ninstead of\n\n```\nv = E.vector(p, -1, 3)\n```\nI don't mind either way but there's a choice to make.",
    "created_at": "2021-04-06T10:10:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479049",
    "user": "https://github.com/slel"
}
```

<a id='comment:13'></a>How about requiring

```
v = E.vector(p, (-1, 3))
```
instead of

```
v = E.vector(p, -1, 3)
```
I don't mind either way but there's a choice to make.



---

archive/issue_comments_479050.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 slelievre]:\n> How about requiring\n> \n> ```\n> v = E.vector(p, (-1, 3))\n> ```\n> instead of\n> \n> ```\n> v = E.vector(p, -1, 3)\n> ```\n> I don't mind either way but there's a choice to make.\n\n\nThere is no choice to make ;-) Both work in the current implementation (cf. the examples in the doctests).",
    "created_at": "2021-04-06T10:21:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479050",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:14'></a>Replying to [comment:13 slelievre]:
> How about requiring
> 
> ```
> v = E.vector(p, (-1, 3))
> ```
> instead of
> 
> ```
> v = E.vector(p, -1, 3)
> ```
> I don't mind either way but there's a choice to make.


There is no choice to make ;-) Both work in the current implementation (cf. the examples in the doctests).



---

archive/issue_comments_479051.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:11 egourgoulhon]:\n> OK, this is done in the last commit.\n> Note however that saying simply \"vector at point p of manifold M\" is quite unambiguous and is in line with the terminology \"vector field\": we do not say \"tangent vector field\", do we?  \n\n\nNo, we don't say \"tangent vector field\". But I haven't heard or read the use of \"vector\" over \"tangent vector\" either. Historical burden I suppose.\n\nIt should be unambiguous though and having both is fine with me. Someone who seeks for (tangent) vectors will find them now.",
    "created_at": "2021-04-06T10:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479051",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:15'></a>Replying to [comment:11 egourgoulhon]:
> OK, this is done in the last commit.
> Note however that saying simply "vector at point p of manifold M" is quite unambiguous and is in line with the terminology "vector field": we do not say "tangent vector field", do we?  


No, we don't say "tangent vector field". But I haven't heard or read the use of "vector" over "tangent vector" either. Historical burden I suppose.

It should be unambiguous though and having both is fine with me. Someone who seeks for (tangent) vectors will find them now.



---

archive/issue_comments_479052.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-04-06T12:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479052",
    "user": "https://github.com/mjungmath"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_479053.json:
```json
{
    "body": "<a id='comment:16'></a>LGTM",
    "created_at": "2021-04-06T12:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479053",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:16'></a>LGTM



---

archive/issue_comments_479054.json:
```json
{
    "body": "<a id='comment:18'></a>Thanks for the review and suggestions!",
    "created_at": "2021-04-06T12:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479054",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:18'></a>Thanks for the review and suggestions!



---

archive/issue_events_083183.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-07T19:29:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31609#event-83183"
}
```



---

archive/issue_comments_479055.json:
```json
{
    "body": "<a id='comment:19'></a>Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-04-07T19:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479055",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_083184.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-06T13:18:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31609#event-83184"
}
```



---

archive/issue_comments_479056.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-06T13:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31609",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31609#issuecomment-479056",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
