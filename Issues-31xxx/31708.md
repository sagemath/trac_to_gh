# Issue 31708: Let gf2e and gfpn matrices stack on top of a vector

archive/issues_031471.json:
```json
{
    "body": "Compare:\n\n```\nsage: R = ZZ\nsage: M = matrix(R, [[1, 1], [0, 1]])\nsage: M.stack(vector(R, [1, 0]))\n[1 1]\n[0 1]\n[1 0]\n```\n\n```\nsage: R = GF(2^3)\nsage: M = matrix(R, [[1, 1], [0, 1]])\nsage: M.stack(vector(R, [1, 0]))\nTraceback (most recent call last):\n...\nTypeError: Argument 'other' has incorrect type\n(expected sage.matrix.matrix_gf2e_dense.Matrix_gf2e_dense, got\nsage.modules.free_module_element.FreeModuleElement_generic_dense)\n```\nThis should follow #16399.\n\nKeywords: matrix\n\nBranch/Commit: 56b4cfdacf2e2f09c33729bcbb6e600661ded119\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31708\n\n",
    "closed_at": "2021-06-19T20:58:14Z",
    "created_at": "2021-04-21T01:52:12Z",
    "labels": [
        "component: linear algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Let gf2e and gfpn matrices stack on top of a vector",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31708",
    "user": "https://github.com/tscrim"
}
```
Compare:

```
sage: R = ZZ
sage: M = matrix(R, [[1, 1], [0, 1]])
sage: M.stack(vector(R, [1, 0]))
[1 1]
[0 1]
[1 0]
```

```
sage: R = GF(2^3)
sage: M = matrix(R, [[1, 1], [0, 1]])
sage: M.stack(vector(R, [1, 0]))
Traceback (most recent call last):
...
TypeError: Argument 'other' has incorrect type
(expected sage.matrix.matrix_gf2e_dense.Matrix_gf2e_dense, got
sage.modules.free_module_element.FreeModuleElement_generic_dense)
```
This should follow #16399.

Keywords: matrix

Branch/Commit: 56b4cfdacf2e2f09c33729bcbb6e600661ded119

Reviewer: Frédéric Chapoton

Author: Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31708





---

archive/issue_comments_630862.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,18 +1,18 @@\n Nor do they accept the `subdivide` input. Compare:\n \n ```\n-sage: R = ZZ                                                                                              \n-sage: M = matrix(R, [[1,1],[0,1]])                                                                        \n-sage: M.stack(vector(R, [1,0]))                                                                           \n+sage: R = ZZ\n+sage: M = matrix(R, [[1,1],[0,1]])\n+sage: M.stack(vector(R, [1,0]))\n [1 1]\n [0 1]\n [1 0]\n ```\n \n-```                                                              \n-sage: R = GF(2^3)                                                                                         \n-sage: M = matrix(R, [[1,1],[0,1]])                                                                        \n-sage: M.stack(vector(R, [1,0]))                                                                           \n+```\n+sage: R = GF(2^3)\n+sage: M = matrix(R, [[1,1],[0,1]])\n+sage: M.stack(vector(R, [1,0]))\n ---------------------------------------------------------------------------\n TypeError                                 Traceback (most recent call last)\n <ipython-input-8-37e1a2e26d3e> in <module>\n``````\n",
    "created_at": "2021-04-21T01:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630862",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,18 +1,18 @@
 Nor do they accept the `subdivide` input. Compare:
 
 ```
-sage: R = ZZ                                                                                              
-sage: M = matrix(R, [[1,1],[0,1]])                                                                        
-sage: M.stack(vector(R, [1,0]))                                                                           
+sage: R = ZZ
+sage: M = matrix(R, [[1,1],[0,1]])
+sage: M.stack(vector(R, [1,0]))
 [1 1]
 [0 1]
 [1 0]
 ```
 
-```                                                              
-sage: R = GF(2^3)                                                                                         
-sage: M = matrix(R, [[1,1],[0,1]])                                                                        
-sage: M.stack(vector(R, [1,0]))                                                                           
+```
+sage: R = GF(2^3)
+sage: M = matrix(R, [[1,1],[0,1]])
+sage: M.stack(vector(R, [1,0]))
 ---------------------------------------------------------------------------
 TypeError                                 Traceback (most recent call last)
 <ipython-input-8-37e1a2e26d3e> in <module>
``````




---

archive/issue_comments_630863.json:
```json
{
    "body": "Changing commit from \"\" to \"16a4935c2403d828336cb3b549f7681acb33dedf\"",
    "created_at": "2021-04-21T01:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630863",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "" to "16a4935c2403d828336cb3b549f7681acb33dedf"



---

archive/issue_comments_630864.json:
```json
{
    "body": "Changing author from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2021-04-21T01:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630864",
    "user": "https://github.com/tscrim"
}
```

Changing author from "" to "Travis Scrimshaw"



---

archive/issue_comments_630865.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-04-21T01:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630865",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_630866.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2021-04-21T01:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630866",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_630867.json:
```json
{
    "body": "Changing branch from \"\" to \"public/linear_algebra/gf2e_gfpn_stack_signature-31708\"",
    "created_at": "2021-04-21T01:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630867",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "" to "public/linear_algebra/gf2e_gfpn_stack_signature-31708"



---

archive/issue_comments_630868.json:
```json
{
    "body": "<a id='comment:2'></a>ok, looks good\n\nmaybe `Stack ``self`` on top of ``other``.` should become \n`Stack ``self`` on top of ``bottom``.`\n\nif you agree, once done, you can set to positive",
    "created_at": "2021-04-21T08:22:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630868",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>ok, looks good

maybe `Stack ``self`` on top of ``other``.` should become 
`Stack ``self`` on top of ``bottom``.`

if you agree, once done, you can set to positive



---

archive/issue_comments_630869.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2021-04-21T08:22:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630869",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_630870.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-21T23:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630870",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_630871.json:
```json
{
    "body": "Changing commit from \"16a4935c2403d828336cb3b549f7681acb33dedf\" to \"56b4cfdacf2e2f09c33729bcbb6e600661ded119\"",
    "created_at": "2021-04-21T23:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630871",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "16a4935c2403d828336cb3b549f7681acb33dedf" to "56b4cfdacf2e2f09c33729bcbb6e600661ded119"



---

archive/issue_comments_630872.json:
```json
{
    "body": "<a id='comment:4'></a>Thank you. I made one other minor change: I removed the column equality check since that is done in the `stack()` method and other `_stack_impl` methods make the same assumption. Could you please check it?",
    "created_at": "2021-04-21T23:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630872",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>Thank you. I made one other minor change: I removed the column equality check since that is done in the `stack()` method and other `_stack_impl` methods make the same assumption. Could you please check it?



---

archive/issue_comments_630873.json:
```json
{
    "body": "<a id='comment:5'></a>ok",
    "created_at": "2021-04-24T18:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630873",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>ok



---

archive/issue_comments_630874.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-04-24T18:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630874",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_630875.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,25 @@\n+Compare:\n \n+```\n+sage: R = ZZ\n+sage: M = matrix(R, [[1, 1], [0, 1]])\n+sage: M.stack(vector(R, [1, 0]))\n+[1 1]\n+[0 1]\n+[1 0]\n+```\n+\n+```\n+sage: R = GF(2^3)\n+sage: M = matrix(R, [[1, 1], [0, 1]])\n+sage: M.stack(vector(R, [1, 0]))\n+Traceback (most recent call last):\n+...\n+TypeError: Argument 'other' has incorrect type\n+(expected sage.matrix.matrix_gf2e_dense.Matrix_gf2e_dense, got\n+sage.modules.free_module_element.FreeModuleElement_generic_dense)\n+```\n+This should follow #16399.\n \n Comment: 1\n \n``````\n",
    "created_at": "2021-04-25T17:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630875",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,25 @@
+Compare:
 
+```
+sage: R = ZZ
+sage: M = matrix(R, [[1, 1], [0, 1]])
+sage: M.stack(vector(R, [1, 0]))
+[1 1]
+[0 1]
+[1 0]
+```
+
+```
+sage: R = GF(2^3)
+sage: M = matrix(R, [[1, 1], [0, 1]])
+sage: M.stack(vector(R, [1, 0]))
+Traceback (most recent call last):
+...
+TypeError: Argument 'other' has incorrect type
+(expected sage.matrix.matrix_gf2e_dense.Matrix_gf2e_dense, got
+sage.modules.free_module_element.FreeModuleElement_generic_dense)
+```
+This should follow #16399.
 
 Comment: 1
 
``````




---

archive/issue_comments_630876.json:
```json
{
    "body": "<a id='comment:6'></a>The initial ticket description mentioned gf2e and gfpn matrices\nnot accepting `subdivide` input, please give an example and say\nwhether that is addressed here.",
    "created_at": "2021-04-25T17:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630876",
    "user": "https://github.com/slel"
}
```

<a id='comment:6'></a>The initial ticket description mentioned gf2e and gfpn matrices
not accepting `subdivide` input, please give an example and say
whether that is addressed here.



---

archive/issue_comments_630877.json:
```json
{
    "body": "<a id='comment:7'></a>That was just a mistake on my part. I wrote `subdivide` when I really meant to write `stack`.",
    "created_at": "2021-04-25T23:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630877",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>That was just a mistake on my part. I wrote `subdivide` when I really meant to write `stack`.



---

archive/issue_events_083598.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-19T20:58:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31708#event-83598"
}
```



---

archive/issue_comments_630878.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-19T20:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630878",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_630879.json:
```json
{
    "body": "Changing branch from \"public/linear_algebra/gf2e_gfpn_stack_signature-31708\" to \"56b4cfdacf2e2f09c33729bcbb6e600661ded119\"",
    "created_at": "2021-06-19T20:58:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31708",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31708#issuecomment-630879",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/linear_algebra/gf2e_gfpn_stack_signature-31708" to "56b4cfdacf2e2f09c33729bcbb6e600661ded119"
