# Issue 31886: Refresh graph_plot.py

archive/issues_031649.json:
```json
{
    "assignees": [],
    "body": "Improve readability of `graphs/graph_plot.py`.\n\nCC:  @fchapoton @tscrim\n\nBranch/Commit: **[`95e3da9`](https://github.com/sagemath/sagetrac-mirror/commit/95e3da9e57add7608f05d871534a127e18d631ea)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Samuel Leli\u00e8vre**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31886_\n\n",
    "closed_at": "2021-06-29T17:40:42Z",
    "created_at": "2021-05-31T14:27:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Refresh graph_plot.py",
    "type": "issue",
    "updated_at": "2021-06-29T17:40:42Z",
    "url": "https://github.com/sagemath/sage/issues/31886",
    "user": "https://github.com/slel"
}
```
Improve readability of `graphs/graph_plot.py`.

CC:  @fchapoton @tscrim

Branch/Commit: **[`95e3da9`](https://github.com/sagemath/sagetrac-mirror/commit/95e3da9e57add7608f05d871534a127e18d631ea)**

Reviewer: **Travis Scrimshaw**

Author: **Samuel Lelièvre**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/31886_





---

archive/issue_events_436433.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-05-31T14:27:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436433"
}
```



---

archive/issue_events_436434.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-05-31T14:27:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436434"
}
```



---

archive/issue_events_436435.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-05-31T14:27:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436435"
}
```



---

archive/issue_events_436436.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-05-31T14:27:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436436"
}
```



---

archive/issue_comments_512491.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nPlease review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b550a1d0639ba6bcad34ca678eeb8313ddb49f65\"><code>b550a1d</code></a></td><td><code>31886: Refresh graphs/graph_plot.py</code></td></tr></table>\n",
    "created_at": "2021-05-31T14:28:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31886#issuecomment-512491",
    "user": "https://github.com/slel"
}
```

<div id="comment:1" align="right">comment:1</div>

Please review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b550a1d0639ba6bcad34ca678eeb8313ddb49f65"><code>b550a1d</code></a></td><td><code>31886: Refresh graphs/graph_plot.py</code></td></tr></table>




---

archive/issue_events_436437.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-05-31T14:28:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436437"
}
```



---

archive/issue_comments_512492.json:
```json
{
    "body": "Commit: **[`b550a1d`](https://github.com/sagemath/sagetrac-mirror/commit/b550a1d0639ba6bcad34ca678eeb8313ddb49f65)**",
    "created_at": "2021-05-31T14:28:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31886#issuecomment-512492",
    "user": "https://github.com/slel"
}
```

Commit: **[`b550a1d`](https://github.com/sagemath/sagetrac-mirror/commit/b550a1d0639ba6bcad34ca678eeb8313ddb49f65)**



---

archive/issue_comments_512493.json:
```json
{
    "body": "Branch: **[public/31886](https://github.com/sagemath/sagetrac-mirror/tree/public/31886)**",
    "created_at": "2021-05-31T14:28:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31886#issuecomment-512493",
    "user": "https://github.com/slel"
}
```

Branch: **[public/31886](https://github.com/sagemath/sagetrac-mirror/tree/public/31886)**



---

archive/issue_comments_512494.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThank you for going through and doing some cleaning of this file. It definitely needs it. Overall, LGTM, but I do have a few questions and comments.\n\nWhy did you change this test?\n\n```diff\n-            sage: g.plot(color_by_label=True, edge_style='solid', layout='circular')\n+            sage: g.plot(color_by_label=True, layout='circular')\n```\n\nYou no longer need the `update` internal function:\n\n```\n        def update(key, label, color, head):\n            edges_to_draw[key].append((label, color, head))\n```\n\nI personally find `a = (x, y)` easier to understand than `a = x, y`. However, this is more stylistic.\n\nAlso stylistic, but I would rather have the longer variable name `curr_loop_size` rather than `r` to have more self-documenting code.\n\nWhy did you create this variable?\n\n```\np12 = (float(p2[0] - p1[0]), float(p2[1] - p1[1]))\n```\nIt seems like it is only used to compute the perp slope. I feel like it doesn't add to the clarity.",
    "created_at": "2021-05-31T23:53:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31886#issuecomment-512494",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:2" align="right">comment:2</div>

Thank you for going through and doing some cleaning of this file. It definitely needs it. Overall, LGTM, but I do have a few questions and comments.

Why did you change this test?

```diff
-            sage: g.plot(color_by_label=True, edge_style='solid', layout='circular')
+            sage: g.plot(color_by_label=True, layout='circular')
```

You no longer need the `update` internal function:

```
        def update(key, label, color, head):
            edges_to_draw[key].append((label, color, head))
```

I personally find `a = (x, y)` easier to understand than `a = x, y`. However, this is more stylistic.

Also stylistic, but I would rather have the longer variable name `curr_loop_size` rather than `r` to have more self-documenting code.

Why did you create this variable?

```
p12 = (float(p2[0] - p1[0]), float(p2[1] - p1[1]))
```
It seems like it is only used to compute the perp slope. I feel like it doesn't add to the clarity.



---

archive/issue_events_436438.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-06-01T09:58:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436438"
}
```



---

archive/issue_events_436439.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-06-01T09:58:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436439"
}
```



---

archive/issue_comments_512495.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@tscrim](#comment%3A2):\n> Thank you for going through and doing some cleaning of\n> this file. It definitely needs it. Overall, LGTM,\n> but I do have a few questions and comments.\n\nThanks for agreeing with that and for taking a thorough look.\n\n> Why did you change this test?\n> \n> ```diff\n> -            sage: g.plot(color_by_label=True, edge_style='solid', layout='circular')\n> +            sage: g.plot(color_by_label=True, layout='circular')\n> ```\n\nTo simplify this test copied from Ask Sage in #31542, as:\n\n- `edge_style` defaults to `'solid'`\n- the test is for the number of edges, not their style\n\n> You no longer need the `update` internal function:\n> \n> ```\n>         def update(key, label, color, head):\n>             edges_to_draw[key].append((label, color, head))\n> ```\n\nI hesitated to remove it, but I agree the benefits\nno longer clearly outweigh the drawbacks:\n\n- pros: six lines 16 characters shorter, less brackets and parentheses.\n- cons: overhead of an internal function\n\n> I personally find `a = (x, y)` easier to understand\n> than `a = x, y`. However, this is more stylistic.\n\nI agree and I'll change that.\n\n> Also stylistic, but I would rather have the longer variable name\n> `curr_loop_size` rather than `r` to have more self-documenting code.\n\nI agree and I'll change that.\n\n> Why did you create this variable?\n> \n> ```\n> p12 = (float(p2[0] - p1[0]), float(p2[1] - p1[1]))\n> ```\n> It seems like it is only used to compute the perp slope.\n> I feel like it doesn't add to the clarity.\n\nI agree and I'll revert to the previous version.",
    "created_at": "2021-06-01T09:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31886#issuecomment-512495",
    "user": "https://github.com/slel"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@tscrim](#comment%3A2):
> Thank you for going through and doing some cleaning of
> this file. It definitely needs it. Overall, LGTM,
> but I do have a few questions and comments.

Thanks for agreeing with that and for taking a thorough look.

> Why did you change this test?
> 
> ```diff
> -            sage: g.plot(color_by_label=True, edge_style='solid', layout='circular')
> +            sage: g.plot(color_by_label=True, layout='circular')
> ```

To simplify this test copied from Ask Sage in #31542, as:

- `edge_style` defaults to `'solid'`
- the test is for the number of edges, not their style

> You no longer need the `update` internal function:
> 
> ```
>         def update(key, label, color, head):
>             edges_to_draw[key].append((label, color, head))
> ```

I hesitated to remove it, but I agree the benefits
no longer clearly outweigh the drawbacks:

- pros: six lines 16 characters shorter, less brackets and parentheses.
- cons: overhead of an internal function

> I personally find `a = (x, y)` easier to understand
> than `a = x, y`. However, this is more stylistic.

I agree and I'll change that.

> Also stylistic, but I would rather have the longer variable name
> `curr_loop_size` rather than `r` to have more self-documenting code.

I agree and I'll change that.

> Why did you create this variable?
> 
> ```
> p12 = (float(p2[0] - p1[0]), float(p2[1] - p1[1]))
> ```
> It seems like it is only used to compute the perp slope.
> I feel like it doesn't add to the clarity.

I agree and I'll revert to the previous version.



---

archive/issue_comments_512496.json:
```json
{
    "body": "Changed commit from **[`b550a1d`](https://github.com/sagemath/sagetrac-mirror/commit/b550a1d0639ba6bcad34ca678eeb8313ddb49f65)** to **[`95e3da9`](https://github.com/sagemath/sagetrac-mirror/commit/95e3da9e57add7608f05d871534a127e18d631ea)**",
    "created_at": "2021-06-01T10:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31886#issuecomment-512496",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b550a1d`](https://github.com/sagemath/sagetrac-mirror/commit/b550a1d0639ba6bcad34ca678eeb8313ddb49f65)** to **[`95e3da9`](https://github.com/sagemath/sagetrac-mirror/commit/95e3da9e57add7608f05d871534a127e18d631ea)**



---

archive/issue_comments_512497.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95e3da9e57add7608f05d871534a127e18d631ea\"><code>95e3da9</code></a></td><td><code>31886: Address reviewer comments</code></td></tr></table>\n",
    "created_at": "2021-06-01T10:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31886#issuecomment-512497",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95e3da9e57add7608f05d871534a127e18d631ea"><code>95e3da9</code></a></td><td><code>31886: Address reviewer comments</code></td></tr></table>




---

archive/issue_events_436440.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-06-01T10:12:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436440"
}
```



---

archive/issue_events_436441.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-06-01T10:12:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436441"
}
```



---

archive/issue_comments_512498.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReady for review again.",
    "created_at": "2021-06-01T10:12:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31886#issuecomment-512498",
    "user": "https://github.com/slel"
}
```

<div id="comment:5" align="right">comment:5</div>

Ready for review again.



---

archive/issue_comments_512499.json:
```json
{
    "body": "Author: **Samuel Leli\u00e8vre**",
    "created_at": "2021-06-01T10:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31886#issuecomment-512499",
    "user": "https://github.com/slel"
}
```

Author: **Samuel Lelièvre**



---

archive/issue_comments_512500.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2021-06-01T10:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31886#issuecomment-512500",
    "user": "https://github.com/slel"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_512501.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThank you.",
    "created_at": "2021-06-02T01:17:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31886#issuecomment-512501",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

Thank you.



---

archive/issue_events_436442.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-06-02T01:17:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436442"
}
```



---

archive/issue_events_436443.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-06-02T01:17:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436443"
}
```



---

archive/issue_events_436444.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-06-02T05:50:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436444"
}
```



---

archive/issue_events_436445.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-06-02T05:50:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436445"
}
```



---

archive/issue_comments_512502.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThanks for the review!\n\nSetting priority back to major in view\nof upcoming more substantial changes.",
    "created_at": "2021-06-02T05:50:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31886#issuecomment-512502",
    "user": "https://github.com/slel"
}
```

<div id="comment:8" align="right">comment:8</div>

Thanks for the review!

Setting priority back to major in view
of upcoming more substantial changes.



---

archive/issue_events_436446.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-29T17:40:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436446"
}
```



---

archive/issue_events_436447.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "169ae39c92aa0a668465dc9ce09768f1ff28dfdd",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-06-29T17:40:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31886#event-436447"
}
```



---

archive/issue_comments_512503.json:
```json
{
    "body": "Changed branch from **[public/31886](https://github.com/sagemath/sagetrac-mirror/tree/public/31886)** to **[`95e3da9`](https://github.com/sagemath/sagetrac-mirror/commit/95e3da9e57add7608f05d871534a127e18d631ea)**",
    "created_at": "2021-06-29T17:40:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31886#issuecomment-512503",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/31886](https://github.com/sagemath/sagetrac-mirror/tree/public/31886)** to **[`95e3da9`](https://github.com/sagemath/sagetrac-mirror/commit/95e3da9e57add7608f05d871534a127e18d631ea)**
