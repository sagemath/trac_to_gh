# Issue 31446: Add Groebner bases of noncommutative polynomials via GBNP

archive/issues_031209.json:
```json
{
    "assignees": [],
    "body": "The GAP package [GBNP](https://gap-packages.github.io/gbnp/), according to its documentation, \"provides algorithms for computing Gr\u00f6bner bases of noncommutative polynomials with coefficients from a field implemented in GAP and with respect to the \u201ctotal degree first then lexicographical\u201d ordering\".\n\nGBNP can be wrapped for Sage by including and adapting [this project](https://gitlab.com/mathzeta2/gbnp). The current implementation in Sage for noncommutative Gr\u00f6bner bases wraps `letterplace` (from Singular) is restricted to weighted homogeneous elements, and it seem to be somewhat less efficient than GBNP. In any case, it is a good idea to have more than one engine for such tasks.\n\nNote that GAP supports function fields (including with more than one variable), but the `libgap` interface does not.\n\nCC:  @mathzeta @tscrim @trevorkarn\n\nKeywords: **groebner basis**\n\nBranch/Commit: **[u/mathzeta2/31446_gbnp_wrapper3](https://github.com/sagemath/sagetrac-mirror/tree/u/mathzeta2/31446_gbnp_wrapper3) @ [81f11dd](https://github.com/sagemath/sagetrac-mirror/commit/81f11ddedecbaf4a7bce5057fa6286ad0a8cd13b)**\n\nAuthor: **Guy Blachar, Tomer Bauer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31446_\n\n",
    "created_at": "2021-03-02T12:27:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20algebra",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add Groebner bases of noncommutative polynomials via GBNP",
    "type": "issue",
    "updated_at": "2022-09-19T18:58:47Z",
    "url": "https://github.com/sagemath/sage/issues/31446",
    "user": "https://github.com/mathzeta"
}
```
The GAP package [GBNP](https://gap-packages.github.io/gbnp/), according to its documentation, "provides algorithms for computing Gröbner bases of noncommutative polynomials with coefficients from a field implemented in GAP and with respect to the “total degree first then lexicographical” ordering".

GBNP can be wrapped for Sage by including and adapting [this project](https://gitlab.com/mathzeta2/gbnp). The current implementation in Sage for noncommutative Gröbner bases wraps `letterplace` (from Singular) is restricted to weighted homogeneous elements, and it seem to be somewhat less efficient than GBNP. In any case, it is a good idea to have more than one engine for such tasks.

Note that GAP supports function fields (including with more than one variable), but the `libgap` interface does not.

CC:  @mathzeta @tscrim @trevorkarn

Keywords: **groebner basis**

Branch/Commit: **[u/mathzeta2/31446_gbnp_wrapper3](https://github.com/sagemath/sagetrac-mirror/tree/u/mathzeta2/31446_gbnp_wrapper3) @ [81f11dd](https://github.com/sagemath/sagetrac-mirror/commit/81f11ddedecbaf4a7bce5057fa6286ad0a8cd13b)**

Author: **Guy Blachar, Tomer Bauer**

_Issue created by migration from https://trac.sagemath.org/ticket/31446_





---

archive/issue_events_415254.json:
```json
{
    "actor": "https://github.com/mathzeta",
    "created_at": "2021-03-02T12:27:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415254"
}
```



---

archive/issue_events_415255.json:
```json
{
    "actor": "https://github.com/mathzeta",
    "created_at": "2021-03-02T12:27:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebra",
    "label_color": "0000ff",
    "label_name": "component: algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415255"
}
```



---

archive/issue_events_415256.json:
```json
{
    "actor": "https://github.com/mathzeta",
    "created_at": "2021-03-02T12:27:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415256"
}
```



---

archive/issue_events_415257.json:
```json
{
    "actor": "https://github.com/mathzeta",
    "created_at": "2021-03-02T12:27:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415257"
}
```



---

archive/issue_comments_507992.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nSage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-507992",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">Comment 1</div>

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_415258.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415258"
}
```



---

archive/issue_events_415259.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415259"
}
```



---

archive/issue_events_415260.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415260"
}
```



---

archive/issue_events_415261.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415261"
}
```



---

archive/issue_comments_507993.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nWhat is the status of this ticket? Looking at the Gitlab repo, it seems like that code might be ready for review. Should that be submitted for review on this ticket?",
    "created_at": "2021-08-02T00:50:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-507993",
    "user": "https://github.com/trevorkarn"
}
```

<div id="comment:3" align="right">Comment 3</div>

What is the status of this ticket? Looking at the Gitlab repo, it seems like that code might be ready for review. Should that be submitted for review on this ticket?



---

archive/issue_comments_507994.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nThanks for looking into it, as I did not worked on it for a long time. I just updated the instructions there for GBNP v1.0.4. From a quick skim, it is almost ready:\n\n* The doctests there succeed. There are probably more tests to add from the [GBNP docs](https://gap-packages.github.io/gbnp/doc/chap0.html) and from its source code.\n* Some functions and methods need proper \"Sage-style\" documentation. In particular adding `# optional: gbnp` or `gap_gbnp` in the doctests.\n* An expert in libgap is useful, to check that the code is not doing something completely wrong.\n* The `growth` method, following GBNP, returns either an integer, a list, or a string. I suppose there are better interfaces.",
    "created_at": "2021-08-09T13:00:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-507994",
    "user": "https://github.com/mathzeta"
}
```

<div id="comment:4" align="right">Comment 4</div>

Thanks for looking into it, as I did not worked on it for a long time. I just updated the instructions there for GBNP v1.0.4. From a quick skim, it is almost ready:

* The doctests there succeed. There are probably more tests to add from the [GBNP docs](https://gap-packages.github.io/gbnp/doc/chap0.html) and from its source code.
* Some functions and methods need proper "Sage-style" documentation. In particular adding `# optional: gbnp` or `gap_gbnp` in the doctests.
* An expert in libgap is useful, to check that the code is not doing something completely wrong.
* The `growth` method, following GBNP, returns either an integer, a list, or a string. I suppose there are better interfaces.



---

archive/issue_comments_507995.json:
```json
{
    "body": "Commit: **[9a3773b](https://github.com/sagemath/sagetrac-mirror/commit/9a3773bcd7c0c544d22f3dfd3b74f422543bc2d3)**",
    "created_at": "2021-09-02T22:00:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-507995",
    "user": "https://github.com/mathzeta"
}
```

Commit: **[9a3773b](https://github.com/sagemath/sagetrac-mirror/commit/9a3773bcd7c0c544d22f3dfd3b74f422543bc2d3)**



---

archive/issue_comments_507996.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nHere is an updated version from that repo, which I think is ready for review.",
    "created_at": "2021-09-02T22:00:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-507996",
    "user": "https://github.com/mathzeta"
}
```

<div id="comment:5" align="right">Comment 5</div>

Here is an updated version from that repo, which I think is ready for review.



---

archive/issue_events_415262.json:
```json
{
    "actor": "https://github.com/mathzeta",
    "created_at": "2021-09-02T22:00:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415262"
}
```



---

archive/issue_comments_507997.json:
```json
{
    "body": "Branch: **[u/mathzeta2/31446_gbnp_wrapper](https://github.com/sagemath/sagetrac-mirror/tree/u/mathzeta2/31446_gbnp_wrapper)**",
    "created_at": "2021-09-02T22:00:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-507997",
    "user": "https://github.com/mathzeta"
}
```

Branch: **[u/mathzeta2/31446_gbnp_wrapper](https://github.com/sagemath/sagetrac-mirror/tree/u/mathzeta2/31446_gbnp_wrapper)**



---

archive/issue_comments_507998.json:
```json
{
    "body": "Author: **Guy Blachar, Tomer Bauer**",
    "created_at": "2021-09-05T15:18:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-507998",
    "user": "https://github.com/mathzeta"
}
```

Author: **Guy Blachar, Tomer Bauer**



---

archive/issue_comments_507999.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nStalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-507999",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">Comment 7</div>

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_events_415263.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415263"
}
```



---

archive/issue_events_415264.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415264"
}
```



---

archive/issue_comments_508000.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nIt seems like there is a merge issue going on - I'm having trouble viewing the diff, and I'm getting the warning\n\nWarning: Merge failed for 9a3773bcd7c0c544d22f3dfd3b74f422543bc2d3",
    "created_at": "2022-01-29T13:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508000",
    "user": "https://github.com/trevorkarn"
}
```

<div id="comment:8" align="right">Comment 8</div>

It seems like there is a merge issue going on - I'm having trouble viewing the diff, and I'm getting the warning

Warning: Merge failed for 9a3773bcd7c0c544d22f3dfd3b74f422543bc2d3



---

archive/issue_comments_508001.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nIt needs a simple rebase to the latest develop.",
    "created_at": "2022-02-15T06:51:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508001",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">Comment 9</div>

It needs a simple rebase to the latest develop.



---

archive/issue_events_415265.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415265"
}
```



---

archive/issue_events_415266.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415266"
}
```



---

archive/issue_comments_508002.json:
```json
{
    "body": "Changed commit from **[9a3773b](https://github.com/sagemath/sagetrac-mirror/commit/9a3773bcd7c0c544d22f3dfd3b74f422543bc2d3)** to **[e8d3ec0](https://github.com/sagemath/sagetrac-mirror/commit/e8d3ec02cb848fd749ee6dcaaf0a23b1f1d39486)**",
    "created_at": "2022-08-01T22:30:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508002",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9a3773b](https://github.com/sagemath/sagetrac-mirror/commit/9a3773bcd7c0c544d22f3dfd3b74f422543bc2d3)** to **[e8d3ec0](https://github.com/sagemath/sagetrac-mirror/commit/e8d3ec02cb848fd749ee6dcaaf0a23b1f1d39486)**



---

archive/issue_comments_508003.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b97f0f2ba01beded75382d2bdaa38ddbfb3c6f1d\">b97f0f2</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44ade138435ca61e68c5bb9910b4c6aa836fb947\">44ade13</a></td><td><code>Initial version of GBNP wrapper</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/088be9918ea56873b790f4377f3e7e885378d67f\">088be99</a></td><td><code>GBNP: remove periods from INPUT fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85ea4e8307166bfbe734a7735b18b416c473ea3b\">85ea4e8</a></td><td><code>Update GBNP install instructions for v1.0.5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8d3ec02cb848fd749ee6dcaaf0a23b1f1d39486\">e8d3ec0</a></td><td><code>GBNP: Full docstrings for internal functions.</code></td></tr></table>\n",
    "created_at": "2022-08-01T22:30:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508003",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11" align="right">Comment 11</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b97f0f2ba01beded75382d2bdaa38ddbfb3c6f1d">b97f0f2</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44ade138435ca61e68c5bb9910b4c6aa836fb947">44ade13</a></td><td><code>Initial version of GBNP wrapper</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/088be9918ea56873b790f4377f3e7e885378d67f">088be99</a></td><td><code>GBNP: remove periods from INPUT fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85ea4e8307166bfbe734a7735b18b416c473ea3b">85ea4e8</a></td><td><code>Update GBNP install instructions for v1.0.5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8d3ec02cb848fd749ee6dcaaf0a23b1f1d39486">e8d3ec0</a></td><td><code>GBNP: Full docstrings for internal functions.</code></td></tr></table>




---

archive/issue_comments_508004.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nSee #34138 for a native Sage version for the exterior algebra.",
    "created_at": "2022-08-02T00:48:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508004",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">Comment 13</div>

See #34138 for a native Sage version for the exterior algebra.



---

archive/issue_comments_508005.json:
```json
{
    "body": "Changed commit from **[e8d3ec0](https://github.com/sagemath/sagetrac-mirror/commit/e8d3ec02cb848fd749ee6dcaaf0a23b1f1d39486)** to **[09afe05](https://github.com/sagemath/sagetrac-mirror/commit/09afe053ef030efb623e6bc4eb618fd1da60e853)**",
    "created_at": "2022-08-02T20:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508005",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e8d3ec0](https://github.com/sagemath/sagetrac-mirror/commit/e8d3ec02cb848fd749ee6dcaaf0a23b1f1d39486)** to **[09afe05](https://github.com/sagemath/sagetrac-mirror/commit/09afe053ef030efb623e6bc4eb618fd1da60e853)**



---

archive/issue_comments_508006.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b06ceecc7c916db272704fecb20f80e4d8ce695c\">b06ceec</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sagetrac-mirror into develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3972b86a13a814e2d2ae1f4c63e5ccf6505f472\">a3972b8</a></td><td><code>Initial version of GBNP wrapper</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87091cfb1a14b95bfc9a5cd0387d679fd067ed47\">87091cf</a></td><td><code>GBNP: remove periods from INPUT fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff087dea6602d46ecd1516ec4ac2e32365978989\">ff087de</a></td><td><code>Update GBNP install instructions for v1.0.5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09afe053ef030efb623e6bc4eb618fd1da60e853\">09afe05</a></td><td><code>GBNP: Full docstrings for internal functions.</code></td></tr></table>\n",
    "created_at": "2022-08-02T20:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508006",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14" align="right">Comment 14</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b06ceecc7c916db272704fecb20f80e4d8ce695c">b06ceec</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sagetrac-mirror into develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3972b86a13a814e2d2ae1f4c63e5ccf6505f472">a3972b8</a></td><td><code>Initial version of GBNP wrapper</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87091cfb1a14b95bfc9a5cd0387d679fd067ed47">87091cf</a></td><td><code>GBNP: remove periods from INPUT fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff087dea6602d46ecd1516ec4ac2e32365978989">ff087de</a></td><td><code>Update GBNP install instructions for v1.0.5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09afe053ef030efb623e6bc4eb618fd1da60e853">09afe05</a></td><td><code>GBNP: Full docstrings for internal functions.</code></td></tr></table>




---

archive/issue_comments_508007.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nIt looks like there has been a bad merge as there are a number of changes that do not appear related to this ticket. It might be best to cherry-pick the relevant commits into a new branch based off `develop`.",
    "created_at": "2022-08-03T07:52:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508007",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">Comment 15</div>

It looks like there has been a bad merge as there are a number of changes that do not appear related to this ticket. It might be best to cherry-pick the relevant commits into a new branch based off `develop`.



---

archive/issue_comments_508008.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nO git! Why thou'rt mercurial and not Mercurial?\n\nLet's see if the patchbots will be happy with the new branch.\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d47b688ba68b713ac0d0b73d80a28a7747559e7\">6d47b68</a></td><td><code>A little more documentation fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01ab09467e0e11e3b622c8586f1df5f2e015128e\">01ab094</a></td><td><code>Merge branch 'u/klee/28096' of git://trac.sagemath.org/sage into develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1975da38d0bf266e19e98b215c1eb859be2d335a\">1975da3</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4729539109a8ecb0a37e72a88770bddcb9de188c\">4729539</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b97f0f2ba01beded75382d2bdaa38ddbfb3c6f1d\">b97f0f2</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b06ceecc7c916db272704fecb20f80e4d8ce695c\">b06ceec</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sagetrac-mirror into develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8407001117c1548ae3c96631f07548e28d79224\">a840700</a></td><td><code>Initial version of GBNP wrapper</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d7f789cad2430eed87744ba5bb369633e897ff7\">0d7f789</a></td><td><code>GBNP: remove periods from INPUT fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2363c3bd8449cbd9002ce8a07441ba0f330bb02c\">2363c3b</a></td><td><code>Update GBNP install instructions for v1.0.5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da428642e6c7707b20b07cdc29dd0163dc52ae4c\">da42864</a></td><td><code>GBNP: Full docstrings for internal functions.</code></td></tr></table>\n",
    "created_at": "2022-08-04T17:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508008",
    "user": "https://github.com/mathzeta"
}
```

<div id="comment:16" align="right">Comment 16</div>

O git! Why thou'rt mercurial and not Mercurial?

Let's see if the patchbots will be happy with the new branch.

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d47b688ba68b713ac0d0b73d80a28a7747559e7">6d47b68</a></td><td><code>A little more documentation fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01ab09467e0e11e3b622c8586f1df5f2e015128e">01ab094</a></td><td><code>Merge branch 'u/klee/28096' of git://trac.sagemath.org/sage into develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1975da38d0bf266e19e98b215c1eb859be2d335a">1975da3</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4729539109a8ecb0a37e72a88770bddcb9de188c">4729539</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b97f0f2ba01beded75382d2bdaa38ddbfb3c6f1d">b97f0f2</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b06ceecc7c916db272704fecb20f80e4d8ce695c">b06ceec</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sagetrac-mirror into develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8407001117c1548ae3c96631f07548e28d79224">a840700</a></td><td><code>Initial version of GBNP wrapper</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d7f789cad2430eed87744ba5bb369633e897ff7">0d7f789</a></td><td><code>GBNP: remove periods from INPUT fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2363c3bd8449cbd9002ce8a07441ba0f330bb02c">2363c3b</a></td><td><code>Update GBNP install instructions for v1.0.5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da428642e6c7707b20b07cdc29dd0163dc52ae4c">da42864</a></td><td><code>GBNP: Full docstrings for internal functions.</code></td></tr></table>




---

archive/issue_comments_508009.json:
```json
{
    "body": "Changed branch from **[u/mathzeta2/31446_gbnp_wrapper](https://github.com/sagemath/sagetrac-mirror/tree/u/mathzeta2/31446_gbnp_wrapper)** to **[u/mathzeta2/31446_gbnp_wrapper2](https://github.com/sagemath/sagetrac-mirror/tree/u/mathzeta2/31446_gbnp_wrapper2)**",
    "created_at": "2022-08-04T17:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508009",
    "user": "https://github.com/mathzeta"
}
```

Changed branch from **[u/mathzeta2/31446_gbnp_wrapper](https://github.com/sagemath/sagetrac-mirror/tree/u/mathzeta2/31446_gbnp_wrapper)** to **[u/mathzeta2/31446_gbnp_wrapper2](https://github.com/sagemath/sagetrac-mirror/tree/u/mathzeta2/31446_gbnp_wrapper2)**



---

archive/issue_comments_508010.json:
```json
{
    "body": "Changed commit from **[09afe05](https://github.com/sagemath/sagetrac-mirror/commit/09afe053ef030efb623e6bc4eb618fd1da60e853)** to **[da42864](https://github.com/sagemath/sagetrac-mirror/commit/da428642e6c7707b20b07cdc29dd0163dc52ae4c)**",
    "created_at": "2022-08-04T17:05:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508010",
    "user": "https://github.com/mathzeta"
}
```

Changed commit from **[09afe05](https://github.com/sagemath/sagetrac-mirror/commit/09afe053ef030efb623e6bc4eb618fd1da60e853)** to **[da42864](https://github.com/sagemath/sagetrac-mirror/commit/da428642e6c7707b20b07cdc29dd0163dc52ae4c)**



---

archive/issue_comments_508011.json:
```json
{
    "body": "Changed branch from **[u/mathzeta2/31446_gbnp_wrapper2](https://github.com/sagemath/sagetrac-mirror/tree/u/mathzeta2/31446_gbnp_wrapper2)** to **[u/mathzeta2/31446_gbnp_wrapper3](https://github.com/sagemath/sagetrac-mirror/tree/u/mathzeta2/31446_gbnp_wrapper3)**",
    "created_at": "2022-08-04T17:16:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508011",
    "user": "https://github.com/mathzeta"
}
```

Changed branch from **[u/mathzeta2/31446_gbnp_wrapper2](https://github.com/sagemath/sagetrac-mirror/tree/u/mathzeta2/31446_gbnp_wrapper2)** to **[u/mathzeta2/31446_gbnp_wrapper3](https://github.com/sagemath/sagetrac-mirror/tree/u/mathzeta2/31446_gbnp_wrapper3)**



---

archive/issue_comments_508012.json:
```json
{
    "body": "Changed commit from **[da42864](https://github.com/sagemath/sagetrac-mirror/commit/da428642e6c7707b20b07cdc29dd0163dc52ae4c)** to **[581538d](https://github.com/sagemath/sagetrac-mirror/commit/581538d6b976868c4aa90709297a86e0ebe40981)**",
    "created_at": "2022-08-04T17:16:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508012",
    "user": "https://github.com/mathzeta"
}
```

Changed commit from **[da42864](https://github.com/sagemath/sagetrac-mirror/commit/da428642e6c7707b20b07cdc29dd0163dc52ae4c)** to **[581538d](https://github.com/sagemath/sagetrac-mirror/commit/581538d6b976868c4aa90709297a86e0ebe40981)**



---

archive/issue_comments_508013.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d22e8a8d7ec308a0d819d70fc3ae0a0a6cd9086\">8d22e8a</a></td><td><code>Initial version of GBNP wrapper</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62badb2a41b72564a2a66826285840ef21d5cc21\">62badb2</a></td><td><code>GBNP: remove periods from INPUT fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9525f34fa746c0d4fc1c84299fac319f849fe3dc\">9525f34</a></td><td><code>Update GBNP install instructions for v1.0.5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/581538d6b976868c4aa90709297a86e0ebe40981\">581538d</a></td><td><code>GBNP: Full docstrings for internal functions.</code></td></tr></table>\n",
    "created_at": "2022-08-04T17:16:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508013",
    "user": "https://github.com/mathzeta"
}
```

<div id="comment:17" align="right">Comment 17</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d22e8a8d7ec308a0d819d70fc3ae0a0a6cd9086">8d22e8a</a></td><td><code>Initial version of GBNP wrapper</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62badb2a41b72564a2a66826285840ef21d5cc21">62badb2</a></td><td><code>GBNP: remove periods from INPUT fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9525f34fa746c0d4fc1c84299fac319f849fe3dc">9525f34</a></td><td><code>Update GBNP install instructions for v1.0.5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/581538d6b976868c4aa90709297a86e0ebe40981">581538d</a></td><td><code>GBNP: Full docstrings for internal functions.</code></td></tr></table>




---

archive/issue_comments_508014.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d293e672f4fde47487009662712816f11bf0f3d1\">d293e67</a></td><td><code>GBNP: Simple doc change for patchbot</code></td></tr></table>\n",
    "created_at": "2022-08-04T19:18:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508014",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d293e672f4fde47487009662712816f11bf0f3d1">d293e67</a></td><td><code>GBNP: Simple doc change for patchbot</code></td></tr></table>




---

archive/issue_comments_508015.json:
```json
{
    "body": "Changed commit from **[581538d](https://github.com/sagemath/sagetrac-mirror/commit/581538d6b976868c4aa90709297a86e0ebe40981)** to **[d293e67](https://github.com/sagemath/sagetrac-mirror/commit/d293e672f4fde47487009662712816f11bf0f3d1)**",
    "created_at": "2022-08-04T19:18:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508015",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[581538d](https://github.com/sagemath/sagetrac-mirror/commit/581538d6b976868c4aa90709297a86e0ebe40981)** to **[d293e67](https://github.com/sagemath/sagetrac-mirror/commit/d293e672f4fde47487009662712816f11bf0f3d1)**



---

archive/issue_comments_508016.json:
```json
{
    "body": "Changed commit from **[d293e67](https://github.com/sagemath/sagetrac-mirror/commit/d293e672f4fde47487009662712816f11bf0f3d1)** to **[a37d6af](https://github.com/sagemath/sagetrac-mirror/commit/a37d6af0ceea48d9417adee408d9db43af810a16)**",
    "created_at": "2022-08-07T11:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508016",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d293e67](https://github.com/sagemath/sagetrac-mirror/commit/d293e672f4fde47487009662712816f11bf0f3d1)** to **[a37d6af](https://github.com/sagemath/sagetrac-mirror/commit/a37d6af0ceea48d9417adee408d9db43af810a16)**



---

archive/issue_comments_508017.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a37d6af0ceea48d9417adee408d9db43af810a16\">a37d6af</a></td><td><code>GBNP: Minor doc typo</code></td></tr></table>\n",
    "created_at": "2022-08-07T11:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508017",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19" align="right">Comment 19</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a37d6af0ceea48d9417adee408d9db43af810a16">a37d6af</a></td><td><code>GBNP: Minor doc typo</code></td></tr></table>




---

archive/issue_comments_508018.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nThe docs seem to build fine for me, so does the failing of the \"build documentation\" badge is unrelated?",
    "created_at": "2022-08-07T11:42:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508018",
    "user": "https://github.com/mathzeta"
}
```

<div id="comment:20" align="right">Comment 20</div>

The docs seem to build fine for me, so does the failing of the "build documentation" badge is unrelated?



---

archive/issue_comments_508019.json:
```json
{
    "body": "Changed keywords from none to **groebner basis**",
    "created_at": "2022-08-07T11:42:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508019",
    "user": "https://github.com/mathzeta"
}
```

Changed keywords from none to **groebner basis**



---

archive/issue_events_415267.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-08-07T23:42:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415267"
}
```



---

archive/issue_events_415268.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-08-07T23:42:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415268"
}
```



---

archive/issue_comments_508020.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nYes; you can see from the patchbot that the doc built okay.\n\nHowever, the manual building and installing of the package is not allowed I believe. It does seem to be included in the `gap_packages` optional package (from looking at the spkg installation file). So you probably just need to mark the doctests as `# optional - gap_packages` and tell the user to install that.",
    "created_at": "2022-08-07T23:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508020",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:21" align="right">Comment 21</div>

Yes; you can see from the patchbot that the doc built okay.

However, the manual building and installing of the package is not allowed I believe. It does seem to be included in the `gap_packages` optional package (from looking at the spkg installation file). So you probably just need to mark the doctests as `# optional - gap_packages` and tell the user to install that.



---

archive/issue_comments_508021.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@tscrim](#comment%3A21):\n> Yes; you can see from the patchbot that the doc built okay.\n\nThanks.\n> However, the manual building and installing of the package is not allowed I believe. It does seem to be included in the `gap_packages` optional package (from looking at the spkg installation file). So you probably just need to mark the doctests as `# optional - gap_packages` and tell the user to install that.\n\nIt seems that gap_packages includes GBNP v1.0.3 released 2016-03-08, per their [changelog](https://github.com/gap-packages/gbnp/blob/master/Changelog), and the \"manual install\" here suggests v1.0.5 released 2022-03-09. There are no doctest errors using v1.0.3, but it might be a good idea to update gap_packages in a new ticket.\n\nIf I have to guess why the manual install instructions are there, then it has to do with the initial development of this wrapper, which was done using a binary Sage or on Windows (or both). So it was impossible to use gap_packages which requires a compiler, IIRC. The manual install with extracting one tarball is possible in such case, that relied on [this obsolete Wiki page](https://wiki.sagemath.org/InstallingGapPackages?action=recall&rev=8). This is still a convenient way to install GAP packages that do not require any compiler.\n\nDo we have anywhere in the Sage docs an explanation how to install optional GAP packages (not the one for [gap_packages](https://doc.sagemath.org/html/en/reference/spkg/gap_packages.html)), or links to the [GAP docs](https://www.gap-system.org/Manuals/doc/ref/chap76.html#X79F76C1E834BFDCC)? It is a question that come up in ask.sagemath.org from time to time. For this ticket, I suppose using `# optional - gap_packages` is a solution while telling the user the recommended way is to install gap_packages, but still leave the manual instructions. Does this sound right?",
    "created_at": "2022-08-08T21:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508021",
    "user": "https://github.com/mathzeta"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@tscrim](#comment%3A21):
> Yes; you can see from the patchbot that the doc built okay.

Thanks.
> However, the manual building and installing of the package is not allowed I believe. It does seem to be included in the `gap_packages` optional package (from looking at the spkg installation file). So you probably just need to mark the doctests as `# optional - gap_packages` and tell the user to install that.

It seems that gap_packages includes GBNP v1.0.3 released 2016-03-08, per their [changelog](https://github.com/gap-packages/gbnp/blob/master/Changelog), and the "manual install" here suggests v1.0.5 released 2022-03-09. There are no doctest errors using v1.0.3, but it might be a good idea to update gap_packages in a new ticket.

If I have to guess why the manual install instructions are there, then it has to do with the initial development of this wrapper, which was done using a binary Sage or on Windows (or both). So it was impossible to use gap_packages which requires a compiler, IIRC. The manual install with extracting one tarball is possible in such case, that relied on [this obsolete Wiki page](https://wiki.sagemath.org/InstallingGapPackages?action=recall&rev=8). This is still a convenient way to install GAP packages that do not require any compiler.

Do we have anywhere in the Sage docs an explanation how to install optional GAP packages (not the one for [gap_packages](https://doc.sagemath.org/html/en/reference/spkg/gap_packages.html)), or links to the [GAP docs](https://www.gap-system.org/Manuals/doc/ref/chap76.html#X79F76C1E834BFDCC)? It is a question that come up in ask.sagemath.org from time to time. For this ticket, I suppose using `# optional - gap_packages` is a solution while telling the user the recommended way is to install gap_packages, but still leave the manual instructions. Does this sound right?



---

archive/issue_comments_508022.json:
```json
{
    "body": "Changed commit from **[a37d6af](https://github.com/sagemath/sagetrac-mirror/commit/a37d6af0ceea48d9417adee408d9db43af810a16)** to **[589e275](https://github.com/sagemath/sagetrac-mirror/commit/589e2758e6a07215cad775157741572e3f02d821)**",
    "created_at": "2022-08-08T22:53:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508022",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a37d6af](https://github.com/sagemath/sagetrac-mirror/commit/a37d6af0ceea48d9417adee408d9db43af810a16)** to **[589e275](https://github.com/sagemath/sagetrac-mirror/commit/589e2758e6a07215cad775157741572e3f02d821)**



---

archive/issue_comments_508023.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/589e2758e6a07215cad775157741572e3f02d821\">589e275</a></td><td><code>GBNP: Use gap_packages and update install instructions</code></td></tr></table>\n",
    "created_at": "2022-08-08T22:53:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508023",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23" align="right">Comment 23</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/589e2758e6a07215cad775157741572e3f02d821">589e275</a></td><td><code>GBNP: Use gap_packages and update install instructions</code></td></tr></table>




---

archive/issue_comments_508024.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReplying to [@mathzeta](#comment%3A22):\n> Replying to [@tscrim](#comment%3A21):\n> > Yes; you can see from the patchbot that the doc built okay.\n\n> Thanks.\n> > However, the manual building and installing of the package is not allowed I believe. It does seem to be included in the `gap_packages` optional package (from looking at the spkg installation file). So you probably just need to mark the doctests as `# optional - gap_packages` and tell the user to install that.\n\n> It seems that gap_packages includes GBNP v1.0.3 released 2016-03-08, per their [changelog](https://github.com/gap-packages/gbnp/blob/master/Changelog), and the \"manual install\" here suggests v1.0.5 released 2022-03-09. There are no doctest errors using v1.0.3, but it might be a good idea to update gap_packages in a new ticket.\n\n+1 This usually happens with new GAP versions, but it doesn't have to happen in sync.\n\n> Do we have anywhere in the Sage docs an explanation how to install optional GAP packages (not the one for [gap_packages](https://doc.sagemath.org/html/en/reference/spkg/gap_packages.html)), or links to the [GAP docs](https://www.gap-system.org/Manuals/doc/ref/chap76.html#X79F76C1E834BFDCC)? It is a question that come up in ask.sagemath.org from time to time. For this ticket, I suppose using `# optional - gap_packages` is a solution while telling the user the recommended way is to install gap_packages, but still leave the manual instructions. Does this sound right?\n\nThe first thing we (or at least I) usually tell people is to install `gap_packages`, which has become easier for non-developers IIRC.\n\nI am a very strong -1 on including the \"manual\" instructions here in anything associated with this ticket. I do not want anything to hint at anything that looks \"very official\" that hasn't been rigorously tested by the build team.\n\nThese instructions can go on some Sage wiki page or something like that, but as a general instruction (of course, with an appropriate warning).",
    "created_at": "2022-08-09T23:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508024",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:24" align="right">Comment 24</div>

Replying to [@mathzeta](#comment%3A22):
> Replying to [@tscrim](#comment%3A21):
> > Yes; you can see from the patchbot that the doc built okay.

> Thanks.
> > However, the manual building and installing of the package is not allowed I believe. It does seem to be included in the `gap_packages` optional package (from looking at the spkg installation file). So you probably just need to mark the doctests as `# optional - gap_packages` and tell the user to install that.

> It seems that gap_packages includes GBNP v1.0.3 released 2016-03-08, per their [changelog](https://github.com/gap-packages/gbnp/blob/master/Changelog), and the "manual install" here suggests v1.0.5 released 2022-03-09. There are no doctest errors using v1.0.3, but it might be a good idea to update gap_packages in a new ticket.

+1 This usually happens with new GAP versions, but it doesn't have to happen in sync.

> Do we have anywhere in the Sage docs an explanation how to install optional GAP packages (not the one for [gap_packages](https://doc.sagemath.org/html/en/reference/spkg/gap_packages.html)), or links to the [GAP docs](https://www.gap-system.org/Manuals/doc/ref/chap76.html#X79F76C1E834BFDCC)? It is a question that come up in ask.sagemath.org from time to time. For this ticket, I suppose using `# optional - gap_packages` is a solution while telling the user the recommended way is to install gap_packages, but still leave the manual instructions. Does this sound right?

The first thing we (or at least I) usually tell people is to install `gap_packages`, which has become easier for non-developers IIRC.

I am a very strong -1 on including the "manual" instructions here in anything associated with this ticket. I do not want anything to hint at anything that looks "very official" that hasn't been rigorously tested by the build team.

These instructions can go on some Sage wiki page or something like that, but as a general instruction (of course, with an appropriate warning).



---

archive/issue_comments_508025.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nI should also say I am -1 on having any installation instructions. There are other places in Sage already for this. IMO, it is sufficient just to tell the user they need to install it.",
    "created_at": "2022-08-11T02:39:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508025",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:25" align="right">Comment 25</div>

I should also say I am -1 on having any installation instructions. There are other places in Sage already for this. IMO, it is sufficient just to tell the user they need to install it.



---

archive/issue_comments_508026.json:
```json
{
    "body": "Changed commit from **[589e275](https://github.com/sagemath/sagetrac-mirror/commit/589e2758e6a07215cad775157741572e3f02d821)** to **[3798b50](https://github.com/sagemath/sagetrac-mirror/commit/3798b5041dc59dc9523430ab9d1ac5ffcd35df0c)**",
    "created_at": "2022-08-11T16:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508026",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[589e275](https://github.com/sagemath/sagetrac-mirror/commit/589e2758e6a07215cad775157741572e3f02d821)** to **[3798b50](https://github.com/sagemath/sagetrac-mirror/commit/3798b5041dc59dc9523430ab9d1ac5ffcd35df0c)**



---

archive/issue_comments_508027.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3798b5041dc59dc9523430ab9d1ac5ffcd35df0c\">3798b50</a></td><td><code>GBNP: Remove manual install instructions</code></td></tr></table>\n",
    "created_at": "2022-08-11T16:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508027",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26" align="right">Comment 26</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3798b5041dc59dc9523430ab9d1ac5ffcd35df0c">3798b50</a></td><td><code>GBNP: Remove manual install instructions</code></td></tr></table>




---

archive/issue_comments_508028.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nOK, I have removed the manual install instructions, but kept the paragraph telling that gap_packages is needed. Because gap_packages contains only a small fraction of the available GAP packages, and libgap makes it easier to interface many packages, I think there should be an official place that tells how one can try to install and use new GAP packages. Of course it should tell the state of support (i.e., none) for such endeavors.\n\nReplying to [@tscrim](#comment%3A25):\n> I should also say I am -1 on having any installation instructions. There are other places in Sage already for this. IMO, it is sufficient just to tell the user they need to install it.\n\nGrepping for `sage -i` returns different places in the docs where an optional package is needed. It makes it easier for users to have this information on the same page.",
    "created_at": "2022-08-11T17:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508028",
    "user": "https://github.com/mathzeta"
}
```

<div id="comment:27" align="right">Comment 27</div>

OK, I have removed the manual install instructions, but kept the paragraph telling that gap_packages is needed. Because gap_packages contains only a small fraction of the available GAP packages, and libgap makes it easier to interface many packages, I think there should be an official place that tells how one can try to install and use new GAP packages. Of course it should tell the state of support (i.e., none) for such endeavors.

Replying to [@tscrim](#comment%3A25):
> I should also say I am -1 on having any installation instructions. There are other places in Sage already for this. IMO, it is sufficient just to tell the user they need to install it.

Grepping for `sage -i` returns different places in the docs where an optional package is needed. It makes it easier for users to have this information on the same page.



---

archive/issue_comments_508029.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nFair enough. I do agree that it is useful to tell the user directly what to do to get the file to work for \"most\" users. Although having a more standard page with more robust instructions would be better. That doesn't need to be done here though.\n\nNext I am going to get into the main code comments:\n\nI think this should fit together better with the free algebra implementations that are currently in Sage. I see two obvious ways to do this:\n\n1. Have this be a new implementation via the `implementation` keyword to `FreeAlgebra`.\n2. Add a `gap()` (and similar) method that returns (and stores) the gap object corresponding to the `FreeAlgebra_generic` implementation and other objects. Then you only need to add a `algorithm=\"gap\"` argument for the `groebner_basis()` method (which would be the default and only one currently accepted).\n\nI would do option (2) as it means better exposure and it means we don't have yet-another-implementation. Plus, you are already almost there anyways with subclassing. It's a bit more work, but it will make for a much nicer result IMO. You won't have to mark so many tests as optional either.\n\nI disagree with the `letterplace` implementation that returns another ideal rather than a tuple-like object for the GB. This is very different than polynomial rings:\n\n```\nsage: S.<a,b,c> = QQ[]\nsage: S.ideal([a*b, b*c-a])\nIdeal (a*b, b*c - a) of Multivariate Polynomial Ring in a, b, c over Rational Field\nsage: _.groebner_basis()\n[a^2, a*b, b*c - a]\nsage: type(_)\n<class 'sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic'>\n```\nHence, I think your GB method should return a tuple.\n\nYour interface file is not (just) an interface, it contains an implementation within Sage using the interface. Although if you go with option (2) above, the only things that would really survive would be the `_x2y` functions (which gives the interface). Interface files typically go in the `interfaces` folder. If you go with (1) above, then I think you should separate the implementation into a separate file (which could be in the `free_algebra.py` file) too.\n\nThe function names `_x2y` are either not descriptive enough or the documentation is not reflecting their generality. I would rename them something like `x2y_free_algebra_element`. For an interface file, I think it is important that they are publicly visible.\n\nNot necessary, but it would be nice to have something that checks containment of ideals by reducing the generators of one to the other.\n\nMinor point, but I would like this reverted:\n\n```diff\n-   :maxdepth: 2\n+   :maxdepth: 1\n```\nas I like the current version.",
    "created_at": "2022-08-12T09:59:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508029",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:28" align="right">Comment 28</div>

Fair enough. I do agree that it is useful to tell the user directly what to do to get the file to work for "most" users. Although having a more standard page with more robust instructions would be better. That doesn't need to be done here though.

Next I am going to get into the main code comments:

I think this should fit together better with the free algebra implementations that are currently in Sage. I see two obvious ways to do this:

1. Have this be a new implementation via the `implementation` keyword to `FreeAlgebra`.
2. Add a `gap()` (and similar) method that returns (and stores) the gap object corresponding to the `FreeAlgebra_generic` implementation and other objects. Then you only need to add a `algorithm="gap"` argument for the `groebner_basis()` method (which would be the default and only one currently accepted).

I would do option (2) as it means better exposure and it means we don't have yet-another-implementation. Plus, you are already almost there anyways with subclassing. It's a bit more work, but it will make for a much nicer result IMO. You won't have to mark so many tests as optional either.

I disagree with the `letterplace` implementation that returns another ideal rather than a tuple-like object for the GB. This is very different than polynomial rings:

```
sage: S.<a,b,c> = QQ[]
sage: S.ideal([a*b, b*c-a])
Ideal (a*b, b*c - a) of Multivariate Polynomial Ring in a, b, c over Rational Field
sage: _.groebner_basis()
[a^2, a*b, b*c - a]
sage: type(_)
<class 'sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic'>
```
Hence, I think your GB method should return a tuple.

Your interface file is not (just) an interface, it contains an implementation within Sage using the interface. Although if you go with option (2) above, the only things that would really survive would be the `_x2y` functions (which gives the interface). Interface files typically go in the `interfaces` folder. If you go with (1) above, then I think you should separate the implementation into a separate file (which could be in the `free_algebra.py` file) too.

The function names `_x2y` are either not descriptive enough or the documentation is not reflecting their generality. I would rename them something like `x2y_free_algebra_element`. For an interface file, I think it is important that they are publicly visible.

Not necessary, but it would be nice to have something that checks containment of ideals by reducing the generators of one to the other.

Minor point, but I would like this reverted:

```diff
-   :maxdepth: 2
+   :maxdepth: 1
```
as I like the current version.



---

archive/issue_comments_508030.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nReplying to [@tscrim](#comment%3A28):\n> Fair enough. I do agree that it is useful to tell the user directly what to do to get the file to work for \"most\" users. Although having a more standard page with more robust instructions would be better. \n\n`sage.features.gap.GapPackage` should be used for this",
    "created_at": "2022-08-12T15:36:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508030",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">Comment 29</div>

Replying to [@tscrim](#comment%3A28):
> Fair enough. I do agree that it is useful to tell the user directly what to do to get the file to work for "most" users. Although having a more standard page with more robust instructions would be better. 

`sage.features.gap.GapPackage` should be used for this



---

archive/issue_comments_508031.json:
```json
{
    "body": "Changed commit from **[3798b50](https://github.com/sagemath/sagetrac-mirror/commit/3798b5041dc59dc9523430ab9d1ac5ffcd35df0c)** to **[81f11dd](https://github.com/sagemath/sagetrac-mirror/commit/81f11ddedecbaf4a7bce5057fa6286ad0a8cd13b)**",
    "created_at": "2022-08-12T19:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508031",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3798b50](https://github.com/sagemath/sagetrac-mirror/commit/3798b5041dc59dc9523430ab9d1ac5ffcd35df0c)** to **[81f11dd](https://github.com/sagemath/sagetrac-mirror/commit/81f11ddedecbaf4a7bce5057fa6286ad0a8cd13b)**



---

archive/issue_comments_508032.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81f11ddedecbaf4a7bce5057fa6286ad0a8cd13b\">81f11dd</a></td><td><code>Revert :maxdepth: to 2 in doc</code></td></tr></table>\n",
    "created_at": "2022-08-12T19:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508032",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30" align="right">Comment 30</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81f11ddedecbaf4a7bce5057fa6286ad0a8cd13b">81f11dd</a></td><td><code>Revert :maxdepth: to 2 in doc</code></td></tr></table>




---

archive/issue_comments_508033.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nReplying to [@mkoeppe](#comment%3A29):\n> `sage.features.gap.GapPackage` should be used for this\n\nIt is already used.\n\nReplying to [@tscrim](#comment%3A28):\n> Minor point, but I would like this reverted:\n> \n> ```diff\n> -   :maxdepth: 2\n> +   :maxdepth: 1\n> ```\n> as I like the current version.\n\nReverted.\n\nI agree that it is better to have an API consistency for methods called `groebner_basis` in Sage, including the commutative case. For the bigger code changes suggested above, it means diving further into the `FreeAlgebra` implementation, which I do not have the time currently. Few points to consider: Making sure only the deglex term order is implemented. In `_sage2gap` the monoid generators of a free algebra `F` (i.e. `F.monoid().gens()`) work, but `F.gens()` do not work with it. I see that they are objects of different classes, and I just used the first thing that worked. One implementation goal of GBNP is being able to store partial computations, as they might not even terminate, and resume later. All of this should be considered when refactoring.",
    "created_at": "2022-08-12T20:09:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508033",
    "user": "https://github.com/mathzeta"
}
```

<div id="comment:31" align="right">Comment 31</div>

Replying to [@mkoeppe](#comment%3A29):
> `sage.features.gap.GapPackage` should be used for this

It is already used.

Replying to [@tscrim](#comment%3A28):
> Minor point, but I would like this reverted:
> 
> ```diff
> -   :maxdepth: 2
> +   :maxdepth: 1
> ```
> as I like the current version.

Reverted.

I agree that it is better to have an API consistency for methods called `groebner_basis` in Sage, including the commutative case. For the bigger code changes suggested above, it means diving further into the `FreeAlgebra` implementation, which I do not have the time currently. Few points to consider: Making sure only the deglex term order is implemented. In `_sage2gap` the monoid generators of a free algebra `F` (i.e. `F.monoid().gens()`) work, but `F.gens()` do not work with it. I see that they are objects of different classes, and I just used the first thing that worked. One implementation goal of GBNP is being able to store partial computations, as they might not even terminate, and resume later. All of this should be considered when refactoring.



---

archive/issue_comments_508034.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nReplying to [@mathzeta](#comment%3A31):\n> Replying to [@mkoeppe](#comment%3A29):\n> > `sage.features.gap.GapPackage` should be used for this\n\n> It is already used.\n\nIndeed, I missed that. If you want, you can add `url=https://github.com/gap-packages/gbnp`",
    "created_at": "2022-08-12T20:25:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508034",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">Comment 32</div>

Replying to [@mathzeta](#comment%3A31):
> Replying to [@mkoeppe](#comment%3A29):
> > `sage.features.gap.GapPackage` should be used for this

> It is already used.

Indeed, I missed that. If you want, you can add `url=https://github.com/gap-packages/gbnp`



---

archive/issue_comments_508035.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nReplying to [@mathzeta](#comment%3A31):\n> For the bigger code changes suggested above, it means diving further into the `FreeAlgebra` implementation, which I do not have the time currently.\n\nI don't think there is that much to change. Most of it is just moving the code to `free_algebra.py`, removing `Gap` in front of names, and only initializing the GBNP when actually needing calling it, which you should do irregardless IMO. You also can get rid of things like\n\n```python\nI = super(FreeAlgebra_generic, self).ideal(*gens, **kwds)\nreturn GapIdeal(self, I.gens())\n```\n\n> Few points to consider: Making sure only the deglex term order is implemented. In `_sage2gap` the monoid generators of a free algebra `F` (i.e. `F.monoid().gens()`) work, but `F.gens()` do not work with it. I see that they are objects of different classes, and I just used the first thing that worked.\n\nI don't really understand this comment. Of course `_sage2gap` only works with one of them, they are completely different classes (even though they have the same string representation).\n\n> One implementation goal of GBNP is being able to store partial computations, as they might not even terminate, and resume later. All of this should be considered when refactoring.\n\nIt doesn't do that; the onus is on the user to hold onto a reference to output and then build on that. Returning a tuple just means the user has to do one more step of `Ip = R.ideal(I.groebner_basis())` instead of `Ip = I.groebner_basis()`. I should also stated that a GB is not an ideal, so I would be somewhat surprised by the output being an ideal.\n\nSome other comments:\n\n- Rename `get_basis()` to `basis()`, which should return a `Family`. We should have different behaviors for known finite dimensional, which should just return everything. For the infinite case, it is too bad `BaseQA` does not iterate through the basis elements. So I think we can do a little helper class to generate things as needed:\n\n  ```python\n  class LazyBasis(UniqueRepresentation, Parent):\n      def __init__(self, Q):\n          self.Q = Q\n          self.ngens = Q.cover_ring().ngens()\n          self.basis = []\n          Parent.__init__(self, EnumeratedSets().Infinite(), facade=True)\n      def __getitem__(self, n):\n          if n < 0:\n              raise IndexError(\"infinite list\")\n          if n < len(self.basis):\n              return self.basis[n]\n          Q = self.Q\n          self.basis = libgap.BaseQA(Q._gap_rels, self.ngens, n)\n          return self.basis[n]\n      def __iter__(self):\n          n = 0\n          while True:\n              yield self[n]\n              n += 1\n  ```\n  So then we would have\n\n  ```python\n  def basis(self):\n      R = self.cover_ring()\n      def convert(x):\n          return _gap2sage(x, R)\n      if self.is_finite_dimensional():\n          res = libgap.BaseQA(Q._gap_rels, self.ngens, n)\n          return Family([covert(x) for x in res])\n      return Family(convert, LazyBasis(self))\n  ```\n- Rename `get_matrices()` to `get_structure_coefficients()`, which should also should have a `basis=None` default that uses the full basis when it is finite dimensional.\n- I don't understand why the `get_leading_monomials` method is there. It is strange thing for the quotient ring.\n- Same for `reduce`, which is something for the ideal, not the quotient ring (where everything is already reduced).\n- For regular polynomial rings, `hilbert_series()` is a method of the ideal.\n- `if type(rels) == GapIdeal:` is better as `if isinstance(rels, GapIdeal):`.",
    "created_at": "2022-08-13T08:26:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31446#issuecomment-508035",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:33" align="right">Comment 33</div>

Replying to [@mathzeta](#comment%3A31):
> For the bigger code changes suggested above, it means diving further into the `FreeAlgebra` implementation, which I do not have the time currently.

I don't think there is that much to change. Most of it is just moving the code to `free_algebra.py`, removing `Gap` in front of names, and only initializing the GBNP when actually needing calling it, which you should do irregardless IMO. You also can get rid of things like

```python
I = super(FreeAlgebra_generic, self).ideal(*gens, **kwds)
return GapIdeal(self, I.gens())
```

> Few points to consider: Making sure only the deglex term order is implemented. In `_sage2gap` the monoid generators of a free algebra `F` (i.e. `F.monoid().gens()`) work, but `F.gens()` do not work with it. I see that they are objects of different classes, and I just used the first thing that worked.

I don't really understand this comment. Of course `_sage2gap` only works with one of them, they are completely different classes (even though they have the same string representation).

> One implementation goal of GBNP is being able to store partial computations, as they might not even terminate, and resume later. All of this should be considered when refactoring.

It doesn't do that; the onus is on the user to hold onto a reference to output and then build on that. Returning a tuple just means the user has to do one more step of `Ip = R.ideal(I.groebner_basis())` instead of `Ip = I.groebner_basis()`. I should also stated that a GB is not an ideal, so I would be somewhat surprised by the output being an ideal.

Some other comments:

- Rename `get_basis()` to `basis()`, which should return a `Family`. We should have different behaviors for known finite dimensional, which should just return everything. For the infinite case, it is too bad `BaseQA` does not iterate through the basis elements. So I think we can do a little helper class to generate things as needed:

  ```python
  class LazyBasis(UniqueRepresentation, Parent):
      def __init__(self, Q):
          self.Q = Q
          self.ngens = Q.cover_ring().ngens()
          self.basis = []
          Parent.__init__(self, EnumeratedSets().Infinite(), facade=True)
      def __getitem__(self, n):
          if n < 0:
              raise IndexError("infinite list")
          if n < len(self.basis):
              return self.basis[n]
          Q = self.Q
          self.basis = libgap.BaseQA(Q._gap_rels, self.ngens, n)
          return self.basis[n]
      def __iter__(self):
          n = 0
          while True:
              yield self[n]
              n += 1
  ```
  So then we would have

  ```python
  def basis(self):
      R = self.cover_ring()
      def convert(x):
          return _gap2sage(x, R)
      if self.is_finite_dimensional():
          res = libgap.BaseQA(Q._gap_rels, self.ngens, n)
          return Family([covert(x) for x in res])
      return Family(convert, LazyBasis(self))
  ```
- Rename `get_matrices()` to `get_structure_coefficients()`, which should also should have a `basis=None` default that uses the full basis when it is finite dimensional.
- I don't understand why the `get_leading_monomials` method is there. It is strange thing for the quotient ring.
- Same for `reduce`, which is something for the ideal, not the quotient ring (where everything is already reduced).
- For regular polynomial rings, `hilbert_series()` is a method of the ideal.
- `if type(rels) == GapIdeal:` is better as `if isinstance(rels, GapIdeal):`.



---

archive/issue_events_415269.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415269"
}
```



---

archive/issue_events_415270.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31446",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31446#event-415270"
}
```
