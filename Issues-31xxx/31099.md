# Issue 31099: tox.ini, GH Actions: Add test for Sage distribution on conda using environment.yml

archive/issues_030862.json:
```json
{
    "assignees": [],
    "body": "We create `tox` environments `local-conda-forge-environment[-optional]`. \nIn contrast to `...-standard` and `...-minimal`, they use the files `$SAGE_ROOT/environment*.yml` (generated by `bootstrap`) to set up the conda environment.\n\nTo test locally:\n\n```\n  tox -e local-conda-forge-environment\n  tox -e local-conda-forge-environment-optional\n```\n\nWe also add them to the GH Actions workflow to ensure that the files `environment*.yml` are generated correctly.\n\n\nSee also:\n- #30845, which adds tests for the files `SAGE_ROOT/src/environment*.yml`\n\n\n\nCC:  @tobiasdiez @isuruf @kliem\n\nBranch/Commit: **[`b998c84`](https://github.com/sagemath/sagetrac-mirror/commit/b998c842092d06e10315662051f98de41f0f399a)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **porting**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31099_\n\n",
    "closed_at": "2021-03-09T00:02:24Z",
    "created_at": "2020-12-23T00:22:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "tox.ini, GH Actions: Add test for Sage distribution on conda using environment.yml",
    "type": "issue",
    "updated_at": "2021-03-09T00:02:24Z",
    "url": "https://github.com/sagemath/sage/issues/31099",
    "user": "https://github.com/mkoeppe"
}
```
We create `tox` environments `local-conda-forge-environment[-optional]`. 
In contrast to `...-standard` and `...-minimal`, they use the files `$SAGE_ROOT/environment*.yml` (generated by `bootstrap`) to set up the conda environment.

To test locally:

```
  tox -e local-conda-forge-environment
  tox -e local-conda-forge-environment-optional
```

We also add them to the GH Actions workflow to ensure that the files `environment*.yml` are generated correctly.


See also:
- #30845, which adds tests for the files `SAGE_ROOT/src/environment*.yml`



CC:  @tobiasdiez @isuruf @kliem

Branch/Commit: **[`b998c84`](https://github.com/sagemath/sagetrac-mirror/commit/b998c842092d06e10315662051f98de41f0f399a)**

Reviewer: **Dima Pasechnik**

Author: **Matthias Koeppe**

Component: **porting**

_Issue created by migration from https://trac.sagemath.org/ticket/31099_





---

archive/issue_events_428817.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-23T00:22:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31099#event-428817"
}
```



---

archive/issue_events_428818.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-23T00:22:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting",
    "label_color": "000080",
    "label_name": "c: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31099#event-428818"
}
```



---

archive/issue_events_428819.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-23T00:22:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31099#event-428819"
}
```



---

archive/issue_events_428820.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-23T00:22:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31099#event-428820"
}
```



---

archive/issue_comments_498433.json:
```json
{
    "body": "Dependencies: **#30944**",
    "created_at": "2020-12-23T00:24:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498433",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#30944**



---

archive/issue_comments_498434.json:
```json
{
    "body": "Branch: **[u/mkoeppe/tox_ini__gh_actions__add_test_for_sage_distribution_on_conda_using_environment_yml](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox_ini__gh_actions__add_test_for_sage_distribution_on_conda_using_environment_yml)**",
    "created_at": "2020-12-23T01:38:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498434",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/tox_ini__gh_actions__add_test_for_sage_distribution_on_conda_using_environment_yml](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox_ini__gh_actions__add_test_for_sage_distribution_on_conda_using_environment_yml)**



---

archive/issue_comments_498435.json:
```json
{
    "body": "Commit: **[`d75dc81`](https://github.com/sagemath/sagetrac-mirror/commit/d75dc819d1b41ae3abd76a92b33bad8baad1a74b)**",
    "created_at": "2020-12-23T01:44:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498435",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`d75dc81`](https://github.com/sagemath/sagetrac-mirror/commit/d75dc819d1b41ae3abd76a92b33bad8baad1a74b)**



---

archive/issue_comments_498436.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nCan't continue at the moment because miniforge3 on macOS seems broken at the moment\n\n```\nMiniforge3 will now be installed into this location:\n/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-conda-forge-environment_yml/conda\n\n  - Press ENTER to confirm the location\n  - Press CTRL-C to abort the installation\n  - Or specify a different location below\n\n[/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-conda-forge-environment_yml/conda] >>> \nPREFIX=/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-conda-forge-environment_yml/conda\nUnpacking payload ...\n[y/N]:                                                                                               \n```\nNo matter what I answer to this promptless question, it aborts\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/559dd8e7acd647224b2b320a9e77e95e0737bc04\">559dd8e</a></td><td><code>tox.ini (local-root): Pass --enable-build-as-root to configure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a85f41c9220d9b71f0033faf1cb9010a8626ede1\">a85f41c</a></td><td><code>tox.ini (local): Do not build the toolchain when posargs = config.status or posargs = configure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1de912a69f441c80e4d4c64a627f0707e5807442\">1de912a</a></td><td><code>tox.ini (local-sudo): Run apt-get update with sudo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c7e5c482e1c54ba140c3d134ebfc909bd943a3d\">3c7e5c4</a></td><td><code>tox.ini (local-root, local-sudo): Run output of sage-print-system-package-command through eval</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/571cc490c2efebe12bdac19490b9a2f8b058475d\">571cc49</a></td><td><code>Merge branch 't/30947/src_doc_bootstrap__simplify_by_using_new_options_of__sage__package_list_' into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7ff30c92e59308d84377411ea4edd9173c4cd75\">f7ff30c</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c529729783bd328c3180d0faa2c90071319fa000\">c529729</a></td><td><code>Merge commit '3bb309944b7e8542b2ac88ed3c9d9a60e68644d7' of git://trac.sagemath.org/sage into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b73d6f0e1f6d4bfc7e6442b1eeb4fef76c9f9ec6\">b73d6f0</a></td><td><code>Merge tag '9.3.beta4' into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9ca2c1d848708c0a626bc412844043b005c985a\">e9ca2c1</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d75dc819d1b41ae3abd76a92b33bad8baad1a74b\">d75dc81</a></td><td><code>tox.ini (nobootstrap): Do not install system packages for _bootstrap</code></td></tr></table>\n",
    "created_at": "2020-12-23T01:44:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498436",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

Can't continue at the moment because miniforge3 on macOS seems broken at the moment

```
Miniforge3 will now be installed into this location:
/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-conda-forge-environment_yml/conda

  - Press ENTER to confirm the location
  - Press CTRL-C to abort the installation
  - Or specify a different location below

[/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-conda-forge-environment_yml/conda] >>> 
PREFIX=/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/.tox/local-conda-forge-environment_yml/conda
Unpacking payload ...
[y/N]:                                                                                               
```
No matter what I answer to this promptless question, it aborts

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/559dd8e7acd647224b2b320a9e77e95e0737bc04">559dd8e</a></td><td><code>tox.ini (local-root): Pass --enable-build-as-root to configure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a85f41c9220d9b71f0033faf1cb9010a8626ede1">a85f41c</a></td><td><code>tox.ini (local): Do not build the toolchain when posargs = config.status or posargs = configure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1de912a69f441c80e4d4c64a627f0707e5807442">1de912a</a></td><td><code>tox.ini (local-sudo): Run apt-get update with sudo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c7e5c482e1c54ba140c3d134ebfc909bd943a3d">3c7e5c4</a></td><td><code>tox.ini (local-root, local-sudo): Run output of sage-print-system-package-command through eval</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/571cc490c2efebe12bdac19490b9a2f8b058475d">571cc49</a></td><td><code>Merge branch 't/30947/src_doc_bootstrap__simplify_by_using_new_options_of__sage__package_list_' into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7ff30c92e59308d84377411ea4edd9173c4cd75">f7ff30c</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c529729783bd328c3180d0faa2c90071319fa000">c529729</a></td><td><code>Merge commit '3bb309944b7e8542b2ac88ed3c9d9a60e68644d7' of git://trac.sagemath.org/sage into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b73d6f0e1f6d4bfc7e6442b1eeb4fef76c9f9ec6">b73d6f0</a></td><td><code>Merge tag '9.3.beta4' into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9ca2c1d848708c0a626bc412844043b005c985a">e9ca2c1</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d75dc819d1b41ae3abd76a92b33bad8baad1a74b">d75dc81</a></td><td><code>tox.ini (nobootstrap): Do not install system packages for _bootstrap</code></td></tr></table>




---

archive/issue_comments_498437.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/211ad2a6c1127d3039bff5a2c8993bfd4b7c03c1\">211ad2a</a></td><td><code>tox.ini (conda-forge-!environment_yml): Do not use condarc.yml, do not install packages other than _bootstrap via conda install</code></td></tr></table>\n",
    "created_at": "2020-12-23T02:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498437",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/211ad2a6c1127d3039bff5a2c8993bfd4b7c03c1">211ad2a</a></td><td><code>tox.ini (conda-forge-!environment_yml): Do not use condarc.yml, do not install packages other than _bootstrap via conda install</code></td></tr></table>




---

archive/issue_comments_498438.json:
```json
{
    "body": "Changed commit from **[`d75dc81`](https://github.com/sagemath/sagetrac-mirror/commit/d75dc819d1b41ae3abd76a92b33bad8baad1a74b)** to **[`211ad2a`](https://github.com/sagemath/sagetrac-mirror/commit/211ad2a6c1127d3039bff5a2c8993bfd4b7c03c1)**",
    "created_at": "2020-12-23T02:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498438",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d75dc81`](https://github.com/sagemath/sagetrac-mirror/commit/d75dc819d1b41ae3abd76a92b33bad8baad1a74b)** to **[`211ad2a`](https://github.com/sagemath/sagetrac-mirror/commit/211ad2a6c1127d3039bff5a2c8993bfd4b7c03c1)**



---

archive/issue_comments_498439.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4856c09ecf95055f878c38c6b71cabe06a27ee38\">4856c09</a></td><td><code>tox.ini (local-conda-forge-miniconda): Add variant using the miniconda installer</code></td></tr></table>\n",
    "created_at": "2020-12-23T18:53:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498439",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4856c09ecf95055f878c38c6b71cabe06a27ee38">4856c09</a></td><td><code>tox.ini (local-conda-forge-miniconda): Add variant using the miniconda installer</code></td></tr></table>




---

archive/issue_comments_498440.json:
```json
{
    "body": "Changed commit from **[`211ad2a`](https://github.com/sagemath/sagetrac-mirror/commit/211ad2a6c1127d3039bff5a2c8993bfd4b7c03c1)** to **[`4856c09`](https://github.com/sagemath/sagetrac-mirror/commit/4856c09ecf95055f878c38c6b71cabe06a27ee38)**",
    "created_at": "2020-12-23T18:53:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498440",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`211ad2a`](https://github.com/sagemath/sagetrac-mirror/commit/211ad2a6c1127d3039bff5a2c8993bfd4b7c03c1)** to **[`4856c09`](https://github.com/sagemath/sagetrac-mirror/commit/4856c09ecf95055f878c38c6b71cabe06a27ee38)**



---

archive/issue_comments_498441.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@mkoeppe](#comment:3):\n> Can't continue at the moment because miniforge3 on macOS seems broken at the moment\n> \n> ```\n> [y/N]:                                                                                               \n> ```\n> No matter what I answer to this promptless question, it aborts\n\nFigured out what was wrong: This was caused by having a `.condarc` that only defines `pkg_dirs` but no `channels`.",
    "created_at": "2020-12-24T18:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498441",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@mkoeppe](#comment:3):
> Can't continue at the moment because miniforge3 on macOS seems broken at the moment
> 
> ```
> [y/N]:                                                                                               
> ```
> No matter what I answer to this promptless question, it aborts

Figured out what was wrong: This was caused by having a `.condarc` that only defines `pkg_dirs` but no `channels`.



---

archive/issue_comments_498442.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3633e729a6f554cd194574ecadd228ef844f6de2\">3633e72</a></td><td><code>tox.ini (conda-forge-environment_yml): Do use SAGE_ROOT/condarc.yml</code></td></tr></table>\n",
    "created_at": "2020-12-24T18:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498442",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3633e729a6f554cd194574ecadd228ef844f6de2">3633e72</a></td><td><code>tox.ini (conda-forge-environment_yml): Do use SAGE_ROOT/condarc.yml</code></td></tr></table>




---

archive/issue_comments_498443.json:
```json
{
    "body": "Changed commit from **[`4856c09`](https://github.com/sagemath/sagetrac-mirror/commit/4856c09ecf95055f878c38c6b71cabe06a27ee38)** to **[`3633e72`](https://github.com/sagemath/sagetrac-mirror/commit/3633e729a6f554cd194574ecadd228ef844f6de2)**",
    "created_at": "2020-12-24T18:57:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498443",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4856c09`](https://github.com/sagemath/sagetrac-mirror/commit/4856c09ecf95055f878c38c6b71cabe06a27ee38)** to **[`3633e72`](https://github.com/sagemath/sagetrac-mirror/commit/3633e729a6f554cd194574ecadd228ef844f6de2)**



---

archive/issue_comments_498444.json:
```json
{
    "body": "Changed commit from **[`3633e72`](https://github.com/sagemath/sagetrac-mirror/commit/3633e729a6f554cd194574ecadd228ef844f6de2)** to **[`ecc43b8`](https://github.com/sagemath/sagetrac-mirror/commit/ecc43b8644ba3328a3e7fcea7db99476d51449b7)**",
    "created_at": "2020-12-26T02:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498444",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3633e72`](https://github.com/sagemath/sagetrac-mirror/commit/3633e729a6f554cd194574ecadd228ef844f6de2)** to **[`ecc43b8`](https://github.com/sagemath/sagetrac-mirror/commit/ecc43b8644ba3328a3e7fcea7db99476d51449b7)**



---

archive/issue_comments_498445.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecc43b8644ba3328a3e7fcea7db99476d51449b7\">ecc43b8</a></td><td><code>tox.ini (local-conda-environment_yml, local-conda-environment_yml-optional): Finish</code></td></tr></table>\n",
    "created_at": "2020-12-26T02:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498445",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecc43b8644ba3328a3e7fcea7db99476d51449b7">ecc43b8</a></td><td><code>tox.ini (local-conda-environment_yml, local-conda-environment_yml-optional): Finish</code></td></tr></table>




---

archive/issue_comments_498446.json:
```json
{
    "body": "Reviewer: **https://github.com/mkoeppe/sage/actions/runs/444930972**",
    "created_at": "2020-12-26T02:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498446",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **https://github.com/mkoeppe/sage/actions/runs/444930972**



---

archive/issue_comments_498447.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-12-26T02:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498447",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_428821.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-26T02:47:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31099#event-428821"
}
```



---

archive/issue_comments_498448.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThe title says something about github actions. Do you still plan to do this in this ticket, or is the new local-conda-environment_yml automatically executed? \n(by the way, is the yml part of `local-conda-environment_yml` really necessary? this is hard to remember/write)",
    "created_at": "2020-12-26T11:32:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498448",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:10" align="right">comment:10</div>

The title says something about github actions. Do you still plan to do this in this ticket, or is the new local-conda-environment_yml automatically executed? 
(by the way, is the yml part of `local-conda-environment_yml` really necessary? this is hard to remember/write)



---

archive/issue_comments_498449.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nSo what is the new workflow now with these changes? How do I now create a conda environment with a given name in a given location with the sage dependencies installed, and activate this env later and run say the doctests? Similarly, say I've created a conda env myself and activated it. How can I now install the sage dependencies and run tests/lints using tox in this env?\n\nFor the part `-n {env:CONDA_SAGE_ENVIRONMENT}`, the github action or conda itself (?) issued warnings if the name of the environment was different to what was specified in the `environment.yml`. In either case, I think the default should be what is specfied in the environment.yml, which I think is `sage-build`.",
    "created_at": "2020-12-26T11:46:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498449",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:11" align="right">comment:11</div>

So what is the new workflow now with these changes? How do I now create a conda environment with a given name in a given location with the sage dependencies installed, and activate this env later and run say the doctests? Similarly, say I've created a conda env myself and activated it. How can I now install the sage dependencies and run tests/lints using tox in this env?

For the part `-n {env:CONDA_SAGE_ENVIRONMENT}`, the github action or conda itself (?) issued warnings if the name of the environment was different to what was specified in the `environment.yml`. In either case, I think the default should be what is specfied in the environment.yml, which I think is `sage-build`.



---

archive/issue_comments_498450.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,17 @@\n-We create a `tox` environment `local-conda-forge-environment_yml`.\n-In contrast to `...-standard`, it uses the file `environment*.yml` (generated by `bootstrap`) to set up the conda environment.\n+We create `tox` environments `local-conda-forge-environment[-optional]`. \n+In contrast to `...-standard` and `...-minimal`, they use the files `$SAGE_ROOT/environment*.yml` (generated by `bootstrap`) to set up the conda environment.\n+\n+To test locally:\n+\n+```\n+  tox -e local-conda-forge-environment\n+  tox -e local-conda-forge-environment-optional\n+```\n+\n+We also add them to the GH Actions workflow to ensure that the files `environment*.yml` are generated correctly.\n \n \n+See also:\n+- #30845, which adds tests for the files `SAGE_ROOT/src/environment*.yml`\n+\n+\n``````\n",
    "created_at": "2020-12-26T18:10:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498450",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,17 @@
-We create a `tox` environment `local-conda-forge-environment_yml`.
-In contrast to `...-standard`, it uses the file `environment*.yml` (generated by `bootstrap`) to set up the conda environment.
+We create `tox` environments `local-conda-forge-environment[-optional]`. 
+In contrast to `...-standard` and `...-minimal`, they use the files `$SAGE_ROOT/environment*.yml` (generated by `bootstrap`) to set up the conda environment.
+
+To test locally:
+
+```
+  tox -e local-conda-forge-environment
+  tox -e local-conda-forge-environment-optional
+```
+
+We also add them to the GH Actions workflow to ensure that the files `environment*.yml` are generated correctly.
 
 
+See also:
+- #30845, which adds tests for the files `SAGE_ROOT/src/environment*.yml`
+
+
``````




---

archive/issue_comments_498451.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a7e593c1b56cf9a589fb8d9b6eba9000acc9bdf\">2a7e593</a></td><td><code>.github/workflows/tox.yml: Add local-conda-forge-{macos,ubuntu}-environment_yml[-optional]</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a13fd7db8a8aaffbffa538b0c32b309ecd4039b8\">a13fd7d</a></td><td><code>tox.ini: Do not rely on negated factor conditions for EXTRA_SAGE_PACKAGES</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b945b505cb693cc855c19f01aeb5e07623ca713\">5b945b5</a></td><td><code>tox.ini, tox.yml: Rename environment_yml to environment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fac20f58faf9190e407887444be211acb3910a0\">1fac20f</a></td><td><code>tox.ini (local-conda-environment): Use CONDA_SAGE_ENVIRONMENT=sage-build</code></td></tr></table>\n",
    "created_at": "2020-12-26T18:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498451",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a7e593c1b56cf9a589fb8d9b6eba9000acc9bdf">2a7e593</a></td><td><code>.github/workflows/tox.yml: Add local-conda-forge-{macos,ubuntu}-environment_yml[-optional]</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a13fd7db8a8aaffbffa538b0c32b309ecd4039b8">a13fd7d</a></td><td><code>tox.ini: Do not rely on negated factor conditions for EXTRA_SAGE_PACKAGES</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b945b505cb693cc855c19f01aeb5e07623ca713">5b945b5</a></td><td><code>tox.ini, tox.yml: Rename environment_yml to environment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fac20f58faf9190e407887444be211acb3910a0">1fac20f</a></td><td><code>tox.ini (local-conda-environment): Use CONDA_SAGE_ENVIRONMENT=sage-build</code></td></tr></table>




---

archive/issue_comments_498452.json:
```json
{
    "body": "Changed commit from **[`ecc43b8`](https://github.com/sagemath/sagetrac-mirror/commit/ecc43b8644ba3328a3e7fcea7db99476d51449b7)** to **[`1fac20f`](https://github.com/sagemath/sagetrac-mirror/commit/1fac20f58faf9190e407887444be211acb3910a0)**",
    "created_at": "2020-12-26T18:12:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498452",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ecc43b8`](https://github.com/sagemath/sagetrac-mirror/commit/ecc43b8644ba3328a3e7fcea7db99476d51449b7)** to **[`1fac20f`](https://github.com/sagemath/sagetrac-mirror/commit/1fac20f58faf9190e407887444be211acb3910a0)**



---

archive/issue_comments_498453.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@tobiasdiez](#comment:11):\n> How do I now create a conda environment with a given name in a given location with the sage dependencies installed, and activate this env later and run say the doctests? Similarly, say I've created a conda env myself and activated it. How can I now install the sage dependencies and run tests/lints using tox in this env?\n\nGreat questions. I hope we can add the answers in #28746 (Developer's Guide: Add instructions for sagelib development in a conda environment)\n\nThe present ticket does not change anything in this regard. It only tests that environment.yml can be used to set up some environment in which the Sage distribution can be built and tested.",
    "created_at": "2020-12-26T18:16:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498453",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@tobiasdiez](#comment:11):
> How do I now create a conda environment with a given name in a given location with the sage dependencies installed, and activate this env later and run say the doctests? Similarly, say I've created a conda env myself and activated it. How can I now install the sage dependencies and run tests/lints using tox in this env?

Great questions. I hope we can add the answers in #28746 (Developer's Guide: Add instructions for sagelib development in a conda environment)

The present ticket does not change anything in this regard. It only tests that environment.yml can be used to set up some environment in which the Sage distribution can be built and tested.



---

archive/issue_comments_498454.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/444930972** to **https://github.com/mkoeppe/sage/actions/runs/445866532**",
    "created_at": "2020-12-26T18:21:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498454",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/444930972** to **https://github.com/mkoeppe/sage/actions/runs/445866532**



---

archive/issue_comments_498455.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nBy the way, when you have a chance, could you continue the review of #30940 (or indicate that another reviewer is needed)? It's an indirect prerequisite of this ticket.",
    "created_at": "2020-12-26T18:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498455",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

By the way, when you have a chance, could you continue the review of #30940 (or indicate that another reviewer is needed)? It's an indirect prerequisite of this ticket.



---

archive/issue_comments_498456.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@mkoeppe](#comment:14):\n> Great questions. I hope we can add the answers in #28746 (Developer's Guide: Add instructions for sagelib development in a conda environment)\n\nI thought the point of using tox in order to manage the conda was to make sure that locally a developer can easily work in a similar way to what is tested on the CI. These question arose because I have trouble understanding how this interplay now works. Ok, I can now run `tox -e local-conda-forge-environment` but what is the advantage of this over `conda env create environment.yml && sage -t` ?",
    "created_at": "2020-12-26T19:20:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498456",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@mkoeppe](#comment:14):
> Great questions. I hope we can add the answers in #28746 (Developer's Guide: Add instructions for sagelib development in a conda environment)

I thought the point of using tox in order to manage the conda was to make sure that locally a developer can easily work in a similar way to what is tested on the CI. These question arose because I have trouble understanding how this interplay now works. Ok, I can now run `tox -e local-conda-forge-environment` but what is the advantage of this over `conda env create environment.yml && sage -t` ?



---

archive/issue_comments_498457.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@tobiasdiez](#comment:17):\n> I thought the point of using tox in order to manage the conda was to make sure that locally a developer can easily work in a similar way to what is tested on the CI. \n\nThat's right.\n\n> These question arose because I have trouble understanding how this interplay now works. Ok, I can now run `tox -e local-conda-forge-environment` but what is the advantage of this over `conda env create environment.yml && sage -t` ?\n\n`conda env create environment.yml && sage -t` does not work -- it's missing the build of Sage between the two commands!\n\n`tox -e local-conda-forge-environment` includes that -- and it does so in an isolated install tree (`SAGE_LOCAL`) under `.tox/`",
    "created_at": "2020-12-26T19:28:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498457",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@tobiasdiez](#comment:17):
> I thought the point of using tox in order to manage the conda was to make sure that locally a developer can easily work in a similar way to what is tested on the CI. 

That's right.

> These question arose because I have trouble understanding how this interplay now works. Ok, I can now run `tox -e local-conda-forge-environment` but what is the advantage of this over `conda env create environment.yml && sage -t` ?

`conda env create environment.yml && sage -t` does not work -- it's missing the build of Sage between the two commands!

`tox -e local-conda-forge-environment` includes that -- and it does so in an isolated install tree (`SAGE_LOCAL`) under `.tox/`



---

archive/issue_comments_498458.json:
```json
{
    "body": "Changed commit from **[`1fac20f`](https://github.com/sagemath/sagetrac-mirror/commit/1fac20f58faf9190e407887444be211acb3910a0)** to **[`4e15dd1`](https://github.com/sagemath/sagetrac-mirror/commit/4e15dd1f67ce99714f4886962059b66e06e16790)**",
    "created_at": "2021-02-07T21:07:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498458",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1fac20f`](https://github.com/sagemath/sagetrac-mirror/commit/1fac20f58faf9190e407887444be211acb3910a0)** to **[`4e15dd1`](https://github.com/sagemath/sagetrac-mirror/commit/4e15dd1f67ce99714f4886962059b66e06e16790)**



---

archive/issue_comments_498459.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e15dd1f67ce99714f4886962059b66e06e16790\">4e15dd1</a></td><td><code>Merge tag '9.3.beta7' into t/31099/tox_ini__gh_actions__add_test_for_sage_distribution_on_conda_using_environment_yml</code></td></tr></table>\n",
    "created_at": "2021-02-07T21:07:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498459",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e15dd1f67ce99714f4886962059b66e06e16790">4e15dd1</a></td><td><code>Merge tag '9.3.beta7' into t/31099/tox_ini__gh_actions__add_test_for_sage_distribution_on_conda_using_environment_yml</code></td></tr></table>




---

archive/issue_comments_498460.json:
```json
{
    "body": "Changed dependencies from **#30944** to none",
    "created_at": "2021-02-07T21:08:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498460",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30944** to none



---

archive/issue_comments_498461.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\ndoes this need anything from Conda to begin with, or it takes care even of installing Conda?",
    "created_at": "2021-03-04T13:29:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498461",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:22" align="right">comment:22</div>

does this need anything from Conda to begin with, or it takes care even of installing Conda?



---

archive/issue_comments_498462.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nOh, I see, it seems to be setting everything up... Thus, also a new way to install Sage, all you need is source tree and tox, no?",
    "created_at": "2021-03-04T13:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498462",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

Oh, I see, it seems to be setting everything up... Thus, also a new way to install Sage, all you need is source tree and tox, no?



---

archive/issue_comments_498463.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nSeems that building is done single-thread for some reason. I.e.\n\n```\nmake --no-print-directory all-sage\n```\nis only using one core. Is it on purpose?",
    "created_at": "2021-03-04T13:39:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498463",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:24" align="right">comment:24</div>

Seems that building is done single-thread for some reason. I.e.

```
make --no-print-directory all-sage
```
is only using one core. Is it on purpose?



---

archive/issue_comments_498464.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nAll of the `local` tox environments pass on the `MAKE` variable. If you want to build in parallel, use `export MAKE=\"make -j16\"`.\n\nOn this ticket, the only change to the existing `tox -e local-conda-forge-standard` is that using the environment files is tested, instead of using `conda install PACKAGES....`",
    "created_at": "2021-03-04T17:07:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498464",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

All of the `local` tox environments pass on the `MAKE` variable. If you want to build in parallel, use `export MAKE="make -j16"`.

On this ticket, the only change to the existing `tox -e local-conda-forge-standard` is that using the environment files is tested, instead of using `conda install PACKAGES....`



---

archive/issue_comments_498465.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nlgtm\n\nI tested these locally on Linux, looks good. Further fixes might be added later.",
    "created_at": "2021-03-04T22:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498465",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">comment:26</div>

lgtm

I tested these locally on Linux, looks good. Further fixes might be added later.



---

archive/issue_events_428822.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-03-04T22:54:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31099#event-428822"
}
```



---

archive/issue_events_428823.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-03-04T22:54:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31099#event-428823"
}
```



---

archive/issue_comments_498466.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/445866532** to **Dima Pasechnik**",
    "created_at": "2021-03-04T22:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498466",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/445866532** to **Dima Pasechnik**



---

archive/issue_comments_498467.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThanks!",
    "created_at": "2021-03-04T23:10:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498467",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Thanks!



---

archive/issue_events_428824.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2021-03-07T21:05:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31099#event-428824"
}
```



---

archive/issue_events_428825.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2021-03-07T21:05:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31099#event-428825"
}
```



---

archive/issue_comments_498468.json:
```json
{
    "body": "Changed commit from **[`4e15dd1`](https://github.com/sagemath/sagetrac-mirror/commit/4e15dd1f67ce99714f4886962059b66e06e16790)** to **[`b998c84`](https://github.com/sagemath/sagetrac-mirror/commit/b998c842092d06e10315662051f98de41f0f399a)**",
    "created_at": "2021-03-07T21:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498468",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4e15dd1`](https://github.com/sagemath/sagetrac-mirror/commit/4e15dd1f67ce99714f4886962059b66e06e16790)** to **[`b998c84`](https://github.com/sagemath/sagetrac-mirror/commit/b998c842092d06e10315662051f98de41f0f399a)**



---

archive/issue_comments_498469.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b998c842092d06e10315662051f98de41f0f399a\">b998c84</a></td><td><code>Merge tag '9.3.beta8' into t/31099/tox_ini__gh_actions__add_test_for_sage_distribution_on_conda_using_environment_yml</code></td></tr></table>\n",
    "created_at": "2021-03-07T21:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498469",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b998c842092d06e10315662051f98de41f0f399a">b998c84</a></td><td><code>Merge tag '9.3.beta8' into t/31099/tox_ini__gh_actions__add_test_for_sage_distribution_on_conda_using_environment_yml</code></td></tr></table>




---

archive/issue_events_428826.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-07T21:08:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31099#event-428826"
}
```



---

archive/issue_events_428827.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-07T21:08:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31099#event-428827"
}
```



---

archive/issue_events_428828.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-09T00:02:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31099#event-428828"
}
```



---

archive/issue_events_428829.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "61712fabd1773e0a925fbbe20af7fdc6455c9ed9",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-03-09T00:02:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31099#event-428829"
}
```



---

archive/issue_comments_498470.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/tox_ini__gh_actions__add_test_for_sage_distribution_on_conda_using_environment_yml](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox_ini__gh_actions__add_test_for_sage_distribution_on_conda_using_environment_yml)** to **[`b998c84`](https://github.com/sagemath/sagetrac-mirror/commit/b998c842092d06e10315662051f98de41f0f399a)**",
    "created_at": "2021-03-09T00:02:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31099",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31099#issuecomment-498470",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/tox_ini__gh_actions__add_test_for_sage_distribution_on_conda_using_environment_yml](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox_ini__gh_actions__add_test_for_sage_distribution_on_conda_using_environment_yml)** to **[`b998c84`](https://github.com/sagemath/sagetrac-mirror/commit/b998c842092d06e10315662051f98de41f0f399a)**
