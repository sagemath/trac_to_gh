# Issue 31916: {Polyhedron, ConvexRationalPolyhedralCone}.{interior, relative_interior}

archive/issues_031679.json:
```json
{
    "body": "We introduce new methods `relative_interior` and `interior`, which (in nontrivial cases) return a simple object with a `__contains__` method. \n\nThen one can write `x in P.relative_interior()` instead of `P.relative_interior_contains(x)`.\n\nThis will also simplify #31660.\n\n\n**CC:**  @kliem @yuan-zhou @jplab @tscrim @novoselt @orlitzky\n\n**Branch/Commit:** [fa4c2d238a8f16a61f02e7cfa89ba3f17d8f4980](https://github.com/sagemath/sagetrac-mirror/commit/fa4c2d238a8f16a61f02e7cfa89ba3f17d8f4980)\n\n**Reviewer:** Jonathan Kliem\n\n**Author:** Matthias Koeppe\n\nIssue created by migration from https://trac.sagemath.org/ticket/31916\n\n",
    "closed_at": "2021-06-29T17:40:29Z",
    "created_at": "2021-06-06T01:16:13Z",
    "labels": [
        "component: geometry",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "{Polyhedron, ConvexRationalPolyhedralCone}.{interior, relative_interior}",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31916",
    "user": "https://github.com/mkoeppe"
}
```
We introduce new methods `relative_interior` and `interior`, which (in nontrivial cases) return a simple object with a `__contains__` method. 

Then one can write `x in P.relative_interior()` instead of `P.relative_interior_contains(x)`.

This will also simplify #31660.


**CC:**  @kliem @yuan-zhou @jplab @tscrim @novoselt @orlitzky

**Branch/Commit:** [fa4c2d238a8f16a61f02e7cfa89ba3f17d8f4980](https://github.com/sagemath/sagetrac-mirror/commit/fa4c2d238a8f16a61f02e7cfa89ba3f17d8f4980)

**Reviewer:** Jonathan Kliem

**Author:** Matthias Koeppe

Issue created by migration from https://trac.sagemath.org/ticket/31916





---

archive/issue_comments_517650.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2021-06-06T02:06:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517650",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_517651.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/polyhedron_relative_interior](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/polyhedron_relative_interior)",
    "created_at": "2021-06-06T02:07:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517651",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/polyhedron_relative_interior](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/polyhedron_relative_interior)



---

archive/issue_comments_517652.json:
```json
{
    "body": "**Commit:** [e9c670c00a492f8f50f3e21e55895a0d3c1d55f2](https://github.com/sagemath/sagetrac-mirror/commit/e9c670c00a492f8f50f3e21e55895a0d3c1d55f2)",
    "created_at": "2021-06-06T18:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517652",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [e9c670c00a492f8f50f3e21e55895a0d3c1d55f2](https://github.com/sagemath/sagetrac-mirror/commit/e9c670c00a492f8f50f3e21e55895a0d3c1d55f2)



---

archive/issue_comments_517653.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n-We introduce a new method `relative_interior`, which returns a simple object with a `__contains__` method. Then one can write `x in P.relative_interior()` instead of `P.relative_interior_contains(x)`.\n+We introduce new methods `relative_interior` and `interior`, which (in nontrivial cases) return a simple object with a `__contains__` method. \n+\n+Then one can write `x in P.relative_interior()` instead of `P.relative_interior_contains(x)`.\n \n This will also simplify #31660.\n \n``````\n",
    "created_at": "2021-06-06T18:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517653",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
-We introduce a new method `relative_interior`, which returns a simple object with a `__contains__` method. Then one can write `x in P.relative_interior()` instead of `P.relative_interior_contains(x)`.
+We introduce new methods `relative_interior` and `interior`, which (in nontrivial cases) return a simple object with a `__contains__` method. 
+
+Then one can write `x in P.relative_interior()` instead of `P.relative_interior_contains(x)`.
 
 This will also simplify #31660.
 
``````




---

archive/issue_comments_517654.json:
```json
{
    "body": "<a id='comment:3'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9c670c00a492f8f50f3e21e55895a0d3c1d55f2\">e9c670c</a></td><td><code>sage.geometry.polyhedron.relint, Polyhedron_base.relative_interior, Polyhedron_base.interior: New</code></td></tr></table>\n",
    "created_at": "2021-06-06T18:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517654",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9c670c00a492f8f50f3e21e55895a0d3c1d55f2">e9c670c</a></td><td><code>sage.geometry.polyhedron.relint, Polyhedron_base.relative_interior, Polyhedron_base.interior: New</code></td></tr></table>




---

archive/issue_events_291293.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-06T18:30:18Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "rename": {
        "from": "Polyhedron.relative_interior",
        "to": "{Polyhedron, ConvexRationalPolyhedralCone}.{interior, relative_interior}"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291293"
}
```



---

archive/issue_comments_517655.json:
```json
{
    "body": "**Changing commit** from \"[e9c670c00a492f8f50f3e21e55895a0d3c1d55f2](https://github.com/sagemath/sagetrac-mirror/commit/e9c670c00a492f8f50f3e21e55895a0d3c1d55f2)\" to \"[b8bfe200f6e698dec855394af9adaaa63c282abd](https://github.com/sagemath/sagetrac-mirror/commit/b8bfe200f6e698dec855394af9adaaa63c282abd)\".",
    "created_at": "2021-06-06T18:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517655",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e9c670c00a492f8f50f3e21e55895a0d3c1d55f2](https://github.com/sagemath/sagetrac-mirror/commit/e9c670c00a492f8f50f3e21e55895a0d3c1d55f2)" to "[b8bfe200f6e698dec855394af9adaaa63c282abd](https://github.com/sagemath/sagetrac-mirror/commit/b8bfe200f6e698dec855394af9adaaa63c282abd)".



---

archive/issue_comments_517656.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9df21042f5cb76869b14d54c501bda4c7ef2cbc1\">9df2104</a></td><td><code>sage.geometry.relative_interior: Move here from sage.geometry.polyhedron.relint</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8bfe200f6e698dec855394af9adaaa63c282abd\">b8bfe20</a></td><td><code>ConvexRationalPolyhedralCone: Add methods interior, relative_interior</code></td></tr></table>\n",
    "created_at": "2021-06-06T18:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517656",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9df21042f5cb76869b14d54c501bda4c7ef2cbc1">9df2104</a></td><td><code>sage.geometry.relative_interior: Move here from sage.geometry.polyhedron.relint</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8bfe200f6e698dec855394af9adaaa63c282abd">b8bfe20</a></td><td><code>ConvexRationalPolyhedralCone: Add methods interior, relative_interior</code></td></tr></table>




---

archive/issue_comments_517657.json:
```json
{
    "body": "**Changing commit** from \"[b8bfe200f6e698dec855394af9adaaa63c282abd](https://github.com/sagemath/sagetrac-mirror/commit/b8bfe200f6e698dec855394af9adaaa63c282abd)\" to \"[6869673199fb80af0a09caf039873e27d50d2741](https://github.com/sagemath/sagetrac-mirror/commit/6869673199fb80af0a09caf039873e27d50d2741)\".",
    "created_at": "2021-06-06T18:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517657",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b8bfe200f6e698dec855394af9adaaa63c282abd](https://github.com/sagemath/sagetrac-mirror/commit/b8bfe200f6e698dec855394af9adaaa63c282abd)" to "[6869673199fb80af0a09caf039873e27d50d2741](https://github.com/sagemath/sagetrac-mirror/commit/6869673199fb80af0a09caf039873e27d50d2741)".



---

archive/issue_comments_517658.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6869673199fb80af0a09caf039873e27d50d2741\">6869673</a></td><td><code>relative_interior: Fix for dimension 0</code></td></tr></table>\n",
    "created_at": "2021-06-06T18:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517658",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6869673199fb80af0a09caf039873e27d50d2741">6869673</a></td><td><code>relative_interior: Fix for dimension 0</code></td></tr></table>




---

archive/issue_comments_517659.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/021d073e758d37f0abdb2466e3dc59e3383ed05b\">021d073</a></td><td><code>RelativeInterior: Add documentation, tests, comparison methods, method relative_interior</code></td></tr></table>\n",
    "created_at": "2021-06-06T19:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517659",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/021d073e758d37f0abdb2466e3dc59e3383ed05b">021d073</a></td><td><code>RelativeInterior: Add documentation, tests, comparison methods, method relative_interior</code></td></tr></table>




---

archive/issue_comments_517660.json:
```json
{
    "body": "**Changing commit** from \"[6869673199fb80af0a09caf039873e27d50d2741](https://github.com/sagemath/sagetrac-mirror/commit/6869673199fb80af0a09caf039873e27d50d2741)\" to \"[021d073e758d37f0abdb2466e3dc59e3383ed05b](https://github.com/sagemath/sagetrac-mirror/commit/021d073e758d37f0abdb2466e3dc59e3383ed05b)\".",
    "created_at": "2021-06-06T19:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517660",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6869673199fb80af0a09caf039873e27d50d2741](https://github.com/sagemath/sagetrac-mirror/commit/6869673199fb80af0a09caf039873e27d50d2741)" to "[021d073e758d37f0abdb2466e3dc59e3383ed05b](https://github.com/sagemath/sagetrac-mirror/commit/021d073e758d37f0abdb2466e3dc59e3383ed05b)".



---

archive/issue_comments_517661.json:
```json
{
    "body": "**Changing commit** from \"[021d073e758d37f0abdb2466e3dc59e3383ed05b](https://github.com/sagemath/sagetrac-mirror/commit/021d073e758d37f0abdb2466e3dc59e3383ed05b)\" to \"[8f38e0475edfd5913bf25ede90162b04597db64c](https://github.com/sagemath/sagetrac-mirror/commit/8f38e0475edfd5913bf25ede90162b04597db64c)\".",
    "created_at": "2021-06-06T20:03:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517661",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[021d073e758d37f0abdb2466e3dc59e3383ed05b](https://github.com/sagemath/sagetrac-mirror/commit/021d073e758d37f0abdb2466e3dc59e3383ed05b)" to "[8f38e0475edfd5913bf25ede90162b04597db64c](https://github.com/sagemath/sagetrac-mirror/commit/8f38e0475edfd5913bf25ede90162b04597db64c)".



---

archive/issue_comments_517662.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f38e0475edfd5913bf25ede90162b04597db64c\">8f38e04</a></td><td><code>ConvexRationalPolyhedralCone.interior, relative_interior: Add doctests</code></td></tr></table>\n",
    "created_at": "2021-06-06T20:03:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517662",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f38e0475edfd5913bf25ede90162b04597db64c">8f38e04</a></td><td><code>ConvexRationalPolyhedralCone.interior, relative_interior: Add doctests</code></td></tr></table>




---

archive/issue_events_291294.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-06T20:05:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291294"
}
```



---

archive/issue_comments_517663.json:
```json
{
    "body": "**Reviewer:** Jonathan Kliem",
    "created_at": "2021-06-07T10:55:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517663",
    "user": "https://github.com/kliem"
}
```

**Reviewer:** Jonathan Kliem



---

archive/issue_events_291295.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-07T10:55:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291295"
}
```



---

archive/issue_events_291296.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-07T10:55:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291296"
}
```



---

archive/issue_comments_517664.json:
```json
{
    "body": "<a id='comment:9'></a>\nThere are various small things:\n\nThe interior of a non-full-dimensional cone should be a cone, not a polyhedron.\n\nWhy do you implement `relative_interior` for relative interiors but not `interior`?\n\nWhy is `closure` defined for relative interiors, but not for polyhedra or cones? The problem is, that `P.relative_interior().closure()` will not always work.\n\nComparison will raise `AttributeErrors`, when `other` is the universe.",
    "created_at": "2021-06-07T10:55:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517664",
    "user": "https://github.com/kliem"
}
```

<a id='comment:9'></a>
There are various small things:

The interior of a non-full-dimensional cone should be a cone, not a polyhedron.

Why do you implement `relative_interior` for relative interiors but not `interior`?

Why is `closure` defined for relative interiors, but not for polyhedra or cones? The problem is, that `P.relative_interior().closure()` will not always work.

Comparison will raise `AttributeErrors`, when `other` is the universe.



---

archive/issue_comments_517665.json:
```json
{
    "body": "<a id='comment:10'></a>\n#31919 solves the problem with `closure`.",
    "created_at": "2021-06-07T19:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517665",
    "user": "https://github.com/kliem"
}
```

<a id='comment:10'></a>
#31919 solves the problem with `closure`.



---

archive/issue_comments_517666.json:
```json
{
    "body": "**Changing commit** from \"[8f38e0475edfd5913bf25ede90162b04597db64c](https://github.com/sagemath/sagetrac-mirror/commit/8f38e0475edfd5913bf25ede90162b04597db64c)\" to \"[5c089ec4926664d426e5d46735cb8c1a9b1d1017](https://github.com/sagemath/sagetrac-mirror/commit/5c089ec4926664d426e5d46735cb8c1a9b1d1017)\".",
    "created_at": "2021-06-07T19:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517666",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8f38e0475edfd5913bf25ede90162b04597db64c](https://github.com/sagemath/sagetrac-mirror/commit/8f38e0475edfd5913bf25ede90162b04597db64c)" to "[5c089ec4926664d426e5d46735cb8c1a9b1d1017](https://github.com/sagemath/sagetrac-mirror/commit/5c089ec4926664d426e5d46735cb8c1a9b1d1017)".



---

archive/issue_comments_517667.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f9c8526d013234f9caf33c50b9117812fbaad55\">5f9c852</a></td><td><code>RelativeInterior.interior: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c089ec4926664d426e5d46735cb8c1a9b1d1017\">5c089ec</a></td><td><code>RelativeInterior.__eq__, __ne__: Handle comparisons with objects of other types</code></td></tr></table>\n",
    "created_at": "2021-06-07T19:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517667",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f9c8526d013234f9caf33c50b9117812fbaad55">5f9c852</a></td><td><code>RelativeInterior.interior: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c089ec4926664d426e5d46735cb8c1a9b1d1017">5c089ec</a></td><td><code>RelativeInterior.__eq__, __ne__: Handle comparisons with objects of other types</code></td></tr></table>




---

archive/issue_comments_517668.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [gh-kliem](#comment%3A9):\n> The interior of a non-full-dimensional cone should be a cone, not a polyhedron.\n\n\nCan't do - a `ConvexRationalPolyhedralCone` always contains 0\n\n> Why do you implement `relative_interior` for relative interiors but not `interior`?\n\n\nDone\n\n> Why is `closure` defined for relative interiors, but not for polyhedra or cones? The problem is, that `P.relative_interior().closure()` will not always work.\n\n\nFor this ticket, it's just the accessor to the original polytope, not a more general API. See #31919 (ABC for convex sets), where I am adding such methods.\n\n> Comparison will raise `AttributeErrors`, when `other` is the universe.\n\n\nDone",
    "created_at": "2021-06-07T19:06:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517668",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
Replying to [gh-kliem](#comment%3A9):
> The interior of a non-full-dimensional cone should be a cone, not a polyhedron.


Can't do - a `ConvexRationalPolyhedralCone` always contains 0

> Why do you implement `relative_interior` for relative interiors but not `interior`?


Done

> Why is `closure` defined for relative interiors, but not for polyhedra or cones? The problem is, that `P.relative_interior().closure()` will not always work.


For this ticket, it's just the accessor to the original polytope, not a more general API. See #31919 (ABC for convex sets), where I am adding such methods.

> Comparison will raise `AttributeErrors`, when `other` is the universe.


Done



---

archive/issue_events_291297.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-07T19:07:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291297"
}
```



---

archive/issue_events_291298.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-07T19:07:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291298"
}
```



---

archive/issue_events_291299.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-07T19:21:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291299"
}
```



---

archive/issue_events_291300.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-07T19:21:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291300"
}
```



---

archive/issue_comments_517669.json:
```json
{
    "body": "<a id='comment:14'></a>\nLGTM.",
    "created_at": "2021-06-07T19:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517669",
    "user": "https://github.com/kliem"
}
```

<a id='comment:14'></a>
LGTM.



---

archive/issue_comments_517670.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [mkoeppe](#comment%3A12):\n> Replying to [gh-kliem](#comment%3A9):\n> > The interior of a non-full-dimensional cone should be a cone, not a polyhedron.\n\n> \n> Can't do - a `ConvexRationalPolyhedralCone` always contains 0\n\nRight.\n> \n> > Why do you implement `relative_interior` for relative interiors but not `interior`?\n\n> \n> Done\n> \n> > Why is `closure` defined for relative interiors, but not for polyhedra or cones? The problem is, that `P.relative_interior().closure()` will not always work.\n\n> \n> For this ticket, it's just the accessor to the original polytope, not a more general API. See #31919 (ABC for convex sets), where I am adding such methods.\n\n\nAs noted above, I later discovered this on #31919 and it's fine to add it later on.\n> \n> > Comparison will raise `AttributeErrors`, when `other` is the universe.\n\n> \n> Done\n\n>",
    "created_at": "2021-06-07T19:22:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517670",
    "user": "https://github.com/kliem"
}
```

<a id='comment:15'></a>
Replying to [mkoeppe](#comment%3A12):
> Replying to [gh-kliem](#comment%3A9):
> > The interior of a non-full-dimensional cone should be a cone, not a polyhedron.

> 
> Can't do - a `ConvexRationalPolyhedralCone` always contains 0

Right.
> 
> > Why do you implement `relative_interior` for relative interiors but not `interior`?

> 
> Done
> 
> > Why is `closure` defined for relative interiors, but not for polyhedra or cones? The problem is, that `P.relative_interior().closure()` will not always work.

> 
> For this ticket, it's just the accessor to the original polytope, not a more general API. See #31919 (ABC for convex sets), where I am adding such methods.


As noted above, I later discovered this on #31919 and it's fine to add it later on.
> 
> > Comparison will raise `AttributeErrors`, when `other` is the universe.

> 
> Done

>



---

archive/issue_comments_517671.json:
```json
{
    "body": "<a id='comment:16'></a>\nThanks! But I think I need to revise `relative_interior` to handle polyhedra that are already relatively open",
    "created_at": "2021-06-07T19:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517671",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Thanks! But I think I need to revise `relative_interior` to handle polyhedra that are already relatively open



---

archive/issue_events_291301.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-07T19:25:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291301"
}
```



---

archive/issue_events_291302.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-07T19:25:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291302"
}
```



---

archive/issue_comments_517672.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86ce301c02936f4b56f6ab821520e8542bd5fbc1\">86ce301</a></td><td><code>Polyhedron_base.is_relatively_open: New; fix relative_interior for affine subspaces</code></td></tr></table>\n",
    "created_at": "2021-06-07T19:38:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517672",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86ce301c02936f4b56f6ab821520e8542bd5fbc1">86ce301</a></td><td><code>Polyhedron_base.is_relatively_open: New; fix relative_interior for affine subspaces</code></td></tr></table>




---

archive/issue_comments_517673.json:
```json
{
    "body": "**Changing commit** from \"[5c089ec4926664d426e5d46735cb8c1a9b1d1017](https://github.com/sagemath/sagetrac-mirror/commit/5c089ec4926664d426e5d46735cb8c1a9b1d1017)\" to \"[86ce301c02936f4b56f6ab821520e8542bd5fbc1](https://github.com/sagemath/sagetrac-mirror/commit/86ce301c02936f4b56f6ab821520e8542bd5fbc1)\".",
    "created_at": "2021-06-07T19:38:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517673",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5c089ec4926664d426e5d46735cb8c1a9b1d1017](https://github.com/sagemath/sagetrac-mirror/commit/5c089ec4926664d426e5d46735cb8c1a9b1d1017)" to "[86ce301c02936f4b56f6ab821520e8542bd5fbc1](https://github.com/sagemath/sagetrac-mirror/commit/86ce301c02936f4b56f6ab821520e8542bd5fbc1)".



---

archive/issue_events_291303.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-07T19:38:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291303"
}
```



---

archive/issue_events_291304.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-07T19:38:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291304"
}
```



---

archive/issue_comments_517674.json:
```json
{
    "body": "<a id='comment:19'></a>\nI was locking for a boundary case, but yes, if a polyhedron is it's affine hull, then it either empty or the universe it it's affine hull.",
    "created_at": "2021-06-07T19:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517674",
    "user": "https://github.com/kliem"
}
```

<a id='comment:19'></a>
I was locking for a boundary case, but yes, if a polyhedron is it's affine hull, then it either empty or the universe it it's affine hull.



---

archive/issue_events_291305.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-07T19:43:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291305"
}
```



---

archive/issue_events_291306.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-07T19:43:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291306"
}
```



---

archive/issue_comments_517675.json:
```json
{
    "body": "**Changing commit** from \"[86ce301c02936f4b56f6ab821520e8542bd5fbc1](https://github.com/sagemath/sagetrac-mirror/commit/86ce301c02936f4b56f6ab821520e8542bd5fbc1)\" to \"[216cb811d16bdf1bedfb2d7e04339ed4387f7212](https://github.com/sagemath/sagetrac-mirror/commit/216cb811d16bdf1bedfb2d7e04339ed4387f7212)\".",
    "created_at": "2021-06-07T20:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517675",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[86ce301c02936f4b56f6ab821520e8542bd5fbc1](https://github.com/sagemath/sagetrac-mirror/commit/86ce301c02936f4b56f6ab821520e8542bd5fbc1)" to "[216cb811d16bdf1bedfb2d7e04339ed4387f7212](https://github.com/sagemath/sagetrac-mirror/commit/216cb811d16bdf1bedfb2d7e04339ed4387f7212)".



---

archive/issue_events_291307.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2021-06-07T20:01:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291307"
}
```



---

archive/issue_events_291308.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2021-06-07T20:01:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291308"
}
```



---

archive/issue_comments_517676.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/216cb811d16bdf1bedfb2d7e04339ed4387f7212\">216cb81</a></td><td><code>ConvexRationalPolyhedralCone.is_relatively_open: New, fix ConvexRationalPolyhedralCone.relative_interior for linear subspaces</code></td></tr></table>\n",
    "created_at": "2021-06-07T20:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517676",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/216cb811d16bdf1bedfb2d7e04339ed4387f7212">216cb81</a></td><td><code>ConvexRationalPolyhedralCone.is_relatively_open: New, fix ConvexRationalPolyhedralCone.relative_interior for linear subspaces</code></td></tr></table>




---

archive/issue_comments_517677.json:
```json
{
    "body": "<a id='comment:21'></a>\nSorry, here's the same fix for cones",
    "created_at": "2021-06-07T20:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517677",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
Sorry, here's the same fix for cones



---

archive/issue_comments_517678.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44cde1e3dbea9086e75f235c0f61164278e4e451\">44cde1e</a></td><td><code>src/doc/en/reference/discrete_geometry/index.rst: Add sage/geometry/relative_interior</code></td></tr></table>\n",
    "created_at": "2021-06-07T20:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517678",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44cde1e3dbea9086e75f235c0f61164278e4e451">44cde1e</a></td><td><code>src/doc/en/reference/discrete_geometry/index.rst: Add sage/geometry/relative_interior</code></td></tr></table>




---

archive/issue_comments_517679.json:
```json
{
    "body": "**Changing commit** from \"[216cb811d16bdf1bedfb2d7e04339ed4387f7212](https://github.com/sagemath/sagetrac-mirror/commit/216cb811d16bdf1bedfb2d7e04339ed4387f7212)\" to \"[44cde1e3dbea9086e75f235c0f61164278e4e451](https://github.com/sagemath/sagetrac-mirror/commit/44cde1e3dbea9086e75f235c0f61164278e4e451)\".",
    "created_at": "2021-06-07T20:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517679",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[216cb811d16bdf1bedfb2d7e04339ed4387f7212](https://github.com/sagemath/sagetrac-mirror/commit/216cb811d16bdf1bedfb2d7e04339ed4387f7212)" to "[44cde1e3dbea9086e75f235c0f61164278e4e451](https://github.com/sagemath/sagetrac-mirror/commit/44cde1e3dbea9086e75f235c0f61164278e4e451)".



---

archive/issue_comments_517680.json:
```json
{
    "body": "<a id='comment:23'></a>\nIs there a reason for the emptylines:\n\n```\n+    def is_relatively_open(self):\n+\n+        r\"\"\"\n+        Return whether ``self`` is relatively open.\n```\n\n```\n+class RelativeInterior(SageObject):\n+\n+    r\"\"\"\n```\n\n> Surround top-level function and class definitions with two blank lines.\n\n\n\n```\n+# ****************************************************************************\n+\n+from sage.structure.sage_object import SageObject\n+\n+class RelativeInterior(SageObject):\n```\n\nI'm not sure, if it also applies to the import.\n\nReally tiny: Does a docstring ending with an example contain an empty line in the end? (Doesn't need to be fixed, I just noticed.)\n\nMaybe for another ticket: Replace the `ppl` imports in `cone.py` by explicity imports to help pyflakes.\n\nOtherwise it's a positive review.",
    "created_at": "2021-06-07T21:18:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517680",
    "user": "https://github.com/kliem"
}
```

<a id='comment:23'></a>
Is there a reason for the emptylines:

```
+    def is_relatively_open(self):
+
+        r"""
+        Return whether ``self`` is relatively open.
```

```
+class RelativeInterior(SageObject):
+
+    r"""
```

> Surround top-level function and class definitions with two blank lines.



```
+# ****************************************************************************
+
+from sage.structure.sage_object import SageObject
+
+class RelativeInterior(SageObject):
```

I'm not sure, if it also applies to the import.

Really tiny: Does a docstring ending with an example contain an empty line in the end? (Doesn't need to be fixed, I just noticed.)

Maybe for another ticket: Replace the `ppl` imports in `cone.py` by explicity imports to help pyflakes.

Otherwise it's a positive review.



---

archive/issue_comments_517681.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa4c2d238a8f16a61f02e7cfa89ba3f17d8f4980\">fa4c2d2</a></td><td><code>Whitespace fixes</code></td></tr></table>\n",
    "created_at": "2021-06-07T22:07:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa4c2d238a8f16a61f02e7cfa89ba3f17d8f4980">fa4c2d2</a></td><td><code>Whitespace fixes</code></td></tr></table>




---

archive/issue_comments_517682.json:
```json
{
    "body": "**Changing commit** from \"[44cde1e3dbea9086e75f235c0f61164278e4e451](https://github.com/sagemath/sagetrac-mirror/commit/44cde1e3dbea9086e75f235c0f61164278e4e451)\" to \"[fa4c2d238a8f16a61f02e7cfa89ba3f17d8f4980](https://github.com/sagemath/sagetrac-mirror/commit/fa4c2d238a8f16a61f02e7cfa89ba3f17d8f4980)\".",
    "created_at": "2021-06-07T22:07:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517682",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[44cde1e3dbea9086e75f235c0f61164278e4e451](https://github.com/sagemath/sagetrac-mirror/commit/44cde1e3dbea9086e75f235c0f61164278e4e451)" to "[fa4c2d238a8f16a61f02e7cfa89ba3f17d8f4980](https://github.com/sagemath/sagetrac-mirror/commit/fa4c2d238a8f16a61f02e7cfa89ba3f17d8f4980)".



---

archive/issue_comments_517683.json:
```json
{
    "body": "<a id='comment:25'></a>\nLGTM.",
    "created_at": "2021-06-08T06:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517683",
    "user": "https://github.com/kliem"
}
```

<a id='comment:25'></a>
LGTM.



---

archive/issue_events_291309.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-08T06:56:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291309"
}
```



---

archive/issue_events_291310.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-08T06:56:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291310"
}
```



---

archive/issue_comments_517684.json:
```json
{
    "body": "<a id='comment:26'></a>\nThanks!",
    "created_at": "2021-06-08T17:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517684",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
Thanks!



---

archive/issue_comments_517685.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/polyhedron_relative_interior](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/polyhedron_relative_interior)\" to \"[fa4c2d238a8f16a61f02e7cfa89ba3f17d8f4980](https://github.com/sagemath/sagetrac-mirror/commit/fa4c2d238a8f16a61f02e7cfa89ba3f17d8f4980)\".",
    "created_at": "2021-06-29T17:40:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31916#issuecomment-517685",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/polyhedron_relative_interior](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/polyhedron_relative_interior)" to "[fa4c2d238a8f16a61f02e7cfa89ba3f17d8f4980](https://github.com/sagemath/sagetrac-mirror/commit/fa4c2d238a8f16a61f02e7cfa89ba3f17d8f4980)".



---

archive/issue_events_291311.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-29T17:40:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291311"
}
```



---

archive/issue_events_291312.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-29T17:40:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31916",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31916#event-291312"
}
```
