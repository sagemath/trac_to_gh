# Issue 31326: macos-11.0: scipy build fails

archive/issues_031089.json:
```json
{
    "assignees": [],
    "body": "(from #31227)\n\nAffected configurations (From \u200bhttps://groups.google.com/g/sage-release/c/KdSKg6RdZok/m/GXfB1rW1AgAJ)\n- local-macos (homebrew-macos, minimal, default, macos-11.0) \u200bhttps://github.com/mkoeppe/sage/runs/2103782309 -- Sage installs python3 from spkg\n- local-macos (conda-forge-macos, standard, default, macos-11.0) \u200bhttps://github.com/mkoeppe/sage/runs/2103782333 - uses python3 from conda\n- local-macos (homebrew-macos-python3_pythonorg, standard, default, macos-11.0) \u200bhttps://github.com/mkoeppe/sage/runs/2103782375 - uses somewhat dated python3 from python.org - \u200bhttps://www.python.org/ftp/python/3.7.7/python-3.7.7-macosx10.9.pkg\n- another failure report, for a configuration possibly similar to local-macos (homebrew-macos, minimal, default, macos-11.0) , in #30651:\n\n```\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/ccompiler.py\", line 90, in <lambda>\n        m = lambda self, *args, **kw: func(self, *args, **kw)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/ccompiler.py\", line 657, in CCompiler_get_version\n        version = matcher(output)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/fcompiler/gnu.py\", line 278, in version_match\n        v = self.gnu_version_match(version_string)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/fcompiler/gnu.py\", line 80, in gnu_version_match\n        raise ValueError(err + version_string)\n    ValueError: A valid Fortran version was not found in this string:\n```\n\nsee also https://github.com/mkoeppe/sage/runs/2103782381\n\nCC:  @jhpalmieri @zlscherr @dimpase @kliem @isuruf\n\nBranch/Commit: **[`4cc8c4d`](https://github.com/sagemath/sagetrac-mirror/commit/4cc8c4da3ab35999e0746c498105658a24a224c0)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Zachary Scherr**\n\nComponent: **porting**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31326_\n\n",
    "closed_at": "2021-03-23T23:49:36Z",
    "created_at": "2021-02-02T17:32:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "macos-11.0: scipy build fails",
    "type": "issue",
    "updated_at": "2021-03-23T23:49:36Z",
    "url": "https://github.com/sagemath/sage/issues/31326",
    "user": "https://github.com/mkoeppe"
}
```
(from #31227)

Affected configurations (From ​https://groups.google.com/g/sage-release/c/KdSKg6RdZok/m/GXfB1rW1AgAJ)
- local-macos (homebrew-macos, minimal, default, macos-11.0) ​https://github.com/mkoeppe/sage/runs/2103782309 -- Sage installs python3 from spkg
- local-macos (conda-forge-macos, standard, default, macos-11.0) ​https://github.com/mkoeppe/sage/runs/2103782333 - uses python3 from conda
- local-macos (homebrew-macos-python3_pythonorg, standard, default, macos-11.0) ​https://github.com/mkoeppe/sage/runs/2103782375 - uses somewhat dated python3 from python.org - ​https://www.python.org/ftp/python/3.7.7/python-3.7.7-macosx10.9.pkg
- another failure report, for a configuration possibly similar to local-macos (homebrew-macos, minimal, default, macos-11.0) , in #30651:

```
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/ccompiler.py", line 90, in <lambda>
        m = lambda self, *args, **kw: func(self, *args, **kw)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/ccompiler.py", line 657, in CCompiler_get_version
        version = matcher(output)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/fcompiler/gnu.py", line 278, in version_match
        v = self.gnu_version_match(version_string)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/fcompiler/gnu.py", line 80, in gnu_version_match
        raise ValueError(err + version_string)
    ValueError: A valid Fortran version was not found in this string:
```

see also https://github.com/mkoeppe/sage/runs/2103782381

CC:  @jhpalmieri @zlscherr @dimpase @kliem @isuruf

Branch/Commit: **[`4cc8c4d`](https://github.com/sagemath/sagetrac-mirror/commit/4cc8c4da3ab35999e0746c498105658a24a224c0)**

Reviewer: **Matthias Koeppe**

Author: **Zachary Scherr**

Component: **porting**

_Issue created by migration from https://trac.sagemath.org/ticket/31326_





---

archive/issue_events_428650.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-02T17:32:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31326#event-428650"
}
```



---

archive/issue_events_428651.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-02T17:32:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting",
    "label_color": "0000b0",
    "label_name": "c: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31326#event-428651"
}
```



---

archive/issue_events_428652.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-02T17:32:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31326#event-428652"
}
```



---

archive/issue_events_428653.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-02T17:32:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31326#event-428653"
}
```



---

archive/issue_comments_502122.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,16 @@\n (from #31227)\n \n+another failure report, for a possibly similar configuration, in #30651:\n \n+```\n+      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/ccompiler.py\", line 90, in <lambda>\n+        m = lambda self, *args, **kw: func(self, *args, **kw)\n+      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/ccompiler.py\", line 657, in CCompiler_get_version\n+        version = matcher(output)\n+      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/fcompiler/gnu.py\", line 278, in version_match\n+        v = self.gnu_version_match(version_string)\n+      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/fcompiler/gnu.py\", line 80, in gnu_version_match\n+        raise ValueError(err + version_string)\n+    ValueError: A valid Fortran version was not found in this string:\n+```\n+\n``````\n",
    "created_at": "2021-03-07T22:21:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502122",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,16 @@
 (from #31227)
 
+another failure report, for a possibly similar configuration, in #30651:
 
+```
+      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/ccompiler.py", line 90, in <lambda>
+        m = lambda self, *args, **kw: func(self, *args, **kw)
+      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/ccompiler.py", line 657, in CCompiler_get_version
+        version = matcher(output)
+      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/fcompiler/gnu.py", line 278, in version_match
+        v = self.gnu_version_match(version_string)
+      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/fcompiler/gnu.py", line 80, in gnu_version_match
+        raise ValueError(err + version_string)
+    ValueError: A valid Fortran version was not found in this string:
+```
+
``````




---

archive/issue_comments_502123.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,3 +14,4 @@\n     ValueError: A valid Fortran version was not found in this string:\n ```\n \n+see also https://github.com/mkoeppe/sage/runs/2103782381\n``````\n",
    "created_at": "2021-03-14T23:40:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502123",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,3 +14,4 @@
     ValueError: A valid Fortran version was not found in this string:
 ```
 
+see also https://github.com/mkoeppe/sage/runs/2103782381
``````




---

archive/issue_events_428654.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-14T23:40:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31326#event-428654"
}
```



---

archive/issue_events_428655.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-14T23:40:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31326#event-428655"
}
```



---

archive/issue_comments_502124.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIt seems like `numpy.distutils` gets confused by extra whitespace in the result of `gfortran -dumpversion`. This might be related to the use of `zsh` as the shell. \n\nThis will need investigation by someone who has already made the switch to Big Sur...",
    "created_at": "2021-03-15T00:10:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502124",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

It seems like `numpy.distutils` gets confused by extra whitespace in the result of `gfortran -dumpversion`. This might be related to the use of `zsh` as the shell. 

This will need investigation by someone who has already made the switch to Big Sur...



---

archive/issue_comments_502125.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\njust want to point out that this problem exists on bash as well.  For anyone wanting to test you can, after configuring, do:\n\n\n```\nmake toolchain\nmake gfortran\nFC=\"local/bin/gfortran\" make numpy\n```\n\nto see the error.",
    "created_at": "2021-03-15T02:04:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502125",
    "user": "https://github.com/zlscherr"
}
```

<div id="comment:4" align="right">comment:4</div>

just want to point out that this problem exists on bash as well.  For anyone wanting to test you can, after configuring, do:


```
make toolchain
make gfortran
FC="local/bin/gfortran" make numpy
```

to see the error.



---

archive/issue_comments_502126.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI haven't tested the full homebrew-macos-11.0-xcode-minimal build, but I'm guessing it's related to MACOSX_DEPLOYMENT_TARGET.\n\nAs I noted above, I can recreate the error with numpy by using sage's gfortran 9.2.0 on my machine with homebrew.  As per usual I think this is because python was built with MACOSX_DEPLOYMENT_TARGET 11.0 and gfortran 9.2.0 can't recognize this value.\n\nNow I know that at some point scipy's spkg-install.in file was changed to contain the lines:\n\n\n```\nif [ $MACOSX_VERSION -ge 20 ]; then\n     export MACOSX_DEPLOYMENT_TARGET=11.0\nfi\n```\n\nI'm not exactly sure what is in homebrew-macos-11.0-xcode-minimal, but if sage is building its own gfortran and its own python using a different MACOSX_DEPLOYMENT_TARGET then I would guess that this line might be causing the problems.\n\nIt's been a while since I've thought about this problem, but it's possible that the above export might not be needed anymore since homebrew patched GCC.",
    "created_at": "2021-03-15T03:37:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502126",
    "user": "https://github.com/zlscherr"
}
```

<div id="comment:5" align="right">comment:5</div>

I haven't tested the full homebrew-macos-11.0-xcode-minimal build, but I'm guessing it's related to MACOSX_DEPLOYMENT_TARGET.

As I noted above, I can recreate the error with numpy by using sage's gfortran 9.2.0 on my machine with homebrew.  As per usual I think this is because python was built with MACOSX_DEPLOYMENT_TARGET 11.0 and gfortran 9.2.0 can't recognize this value.

Now I know that at some point scipy's spkg-install.in file was changed to contain the lines:


```
if [ $MACOSX_VERSION -ge 20 ]; then
     export MACOSX_DEPLOYMENT_TARGET=11.0
fi
```

I'm not exactly sure what is in homebrew-macos-11.0-xcode-minimal, but if sage is building its own gfortran and its own python using a different MACOSX_DEPLOYMENT_TARGET then I would guess that this line might be causing the problems.

It's been a while since I've thought about this problem, but it's possible that the above export might not be needed anymore since homebrew patched GCC.



---

archive/issue_comments_502127.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nActually it probably shouldn't matter whether or not sage is building its own python.  gfortran 9.2.0 just can't recognize MACOSX_DEPLOYMENT_TARGET=11.0.",
    "created_at": "2021-03-15T03:39:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502127",
    "user": "https://github.com/zlscherr"
}
```

<div id="comment:6" align="right">comment:6</div>

Actually it probably shouldn't matter whether or not sage is building its own python.  gfortran 9.2.0 just can't recognize MACOSX_DEPLOYMENT_TARGET=11.0.



---

archive/issue_comments_502128.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nSorry for the spam, but the ticket that introduced that if statement is #31183",
    "created_at": "2021-03-15T03:41:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502128",
    "user": "https://github.com/zlscherr"
}
```

<div id="comment:7" align="right">comment:7</div>

Sorry for the spam, but the ticket that introduced that if statement is #31183



---

archive/issue_comments_502129.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nCould you check if the gcc upgrade in #29827 fixes this issue?",
    "created_at": "2021-03-15T03:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502129",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Could you check if the gcc upgrade in #29827 fixes this issue?



---

archive/issue_comments_502130.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@zlscherr](#comment%3A5):\n> I'm not exactly sure what is in homebrew-macos-11.0-xcode-minimal, but if sage is building its own gfortran \n\nYes, that's right. This configuration uses a minimal installation of homebrew, plus the packages listed in `build/pkgs/_bootstrap/distros/homebrew.txt`, namely `gettext autoconf automake libtool pkg-config`",
    "created_at": "2021-03-15T03:46:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502130",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@zlscherr](#comment%3A5):
> I'm not exactly sure what is in homebrew-macos-11.0-xcode-minimal, but if sage is building its own gfortran 

Yes, that's right. This configuration uses a minimal installation of homebrew, plus the packages listed in `build/pkgs/_bootstrap/distros/homebrew.txt`, namely `gettext autoconf automake libtool pkg-config`



---

archive/issue_comments_502131.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI also just saw that the error reported on top is in numpy and not in scipy.  I'll take a look at #29827 when I get a chance, but I know that homebrew had to specifically patch GCC to avoid this sort of problem.  A viable solution might be to track the legacy option to see if sage is building its own Fortran, and if so we set MACOSX_DEPLOYMENT_TARGET to 10.something",
    "created_at": "2021-03-15T03:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502131",
    "user": "https://github.com/zlscherr"
}
```

<div id="comment:10" align="right">comment:10</div>

I also just saw that the error reported on top is in numpy and not in scipy.  I'll take a look at #29827 when I get a chance, but I know that homebrew had to specifically patch GCC to avoid this sort of problem.  A viable solution might be to track the legacy option to see if sage is building its own Fortran, and if so we set MACOSX_DEPLOYMENT_TARGET to 10.something



---

archive/issue_comments_502132.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nNo, it's an error building scipy -- which uses numpy.distutils, which you see in the lines of the log",
    "created_at": "2021-03-15T03:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502132",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

No, it's an error building scipy -- which uses numpy.distutils, which you see in the lines of the log



---

archive/issue_comments_502133.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAh okay. Also, do you know if the homebrew minimal test uses system for python? That might be responsible for why the deployment Target is set to 11, whereas when sage builds it's own python the deployment Target is set lower.",
    "created_at": "2021-03-15T04:11:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502133",
    "user": "https://github.com/zlscherr"
}
```

<div id="comment:12" align="right">comment:12</div>

Ah okay. Also, do you know if the homebrew minimal test uses system for python? That might be responsible for why the deployment Target is set to 11, whereas when sage builds it's own python the deployment Target is set lower.



---

archive/issue_comments_502134.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nFrom https://groups.google.com/g/sage-release/c/KdSKg6RdZok/m/GXfB1rW1AgAJ: Runs in which scipy fails to build:\n\n- local-macos (homebrew-macos, minimal, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782309 -- Sage installs python3 from spkg\n\n- local-macos (conda-forge-macos, standard, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782333 - uses python3 from conda\n\n- local-macos (homebrew-macos-python3_pythonorg, standard, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782375 - uses somewhat dated python3 from python.org - https://www.python.org/ftp/python/3.7.7/python-3.7.7-macosx10.9.pkg",
    "created_at": "2021-03-15T04:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502134",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

From https://groups.google.com/g/sage-release/c/KdSKg6RdZok/m/GXfB1rW1AgAJ: Runs in which scipy fails to build:

- local-macos (homebrew-macos, minimal, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782309 -- Sage installs python3 from spkg

- local-macos (conda-forge-macos, standard, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782333 - uses python3 from conda

- local-macos (homebrew-macos-python3_pythonorg, standard, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782375 - uses somewhat dated python3 from python.org - https://www.python.org/ftp/python/3.7.7/python-3.7.7-macosx10.9.pkg



---

archive/issue_comments_502135.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nFor what it's worth, if I do\n\n```\n% make distclean && ./configure --with-system-gfortran=no && make\n```\nthen the build fails on `numpy`, not `scipy`, but with the same sort of error:\n\n```\nValueError: A valid Fortran version was not found in this string:\n\n9.2.0\n```",
    "created_at": "2021-03-15T04:27:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502135",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:14" align="right">comment:14</div>

For what it's worth, if I do

```
% make distclean && ./configure --with-system-gfortran=no && make
```
then the build fails on `numpy`, not `scipy`, but with the same sort of error:

```
ValueError: A valid Fortran version was not found in this string:

9.2.0
```



---

archive/issue_comments_502136.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI think there are extra newlines in this version string, which confuses the numpy.distutils code",
    "created_at": "2021-03-15T04:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502136",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

I think there are extra newlines in this version string, which confuses the numpy.distutils code



---

archive/issue_comments_502137.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIt's actually worse than just extra newlines.  I tried manually patching to strip all whitespace from both ends, but that didn't solve the problem.  I dumped the contents of the version_string which is causing numpy to fail into a text file and it turned out to be\n\n\"gfortran: warning: couldn't understand version 11\n\n9.3.0\"\n\n(I tested with gcc 9.3, but the same happens with 9.2)\n\nI can get numpy and scipy to build by manually forcing MACOSX_DEPLOYMENT_TARGET to be 10.16 but it seems that 11 and 11.0 both cause problems.\n\nHere is a proposal for how to deal with this:\n\n1.  Remove the if statements from scipy's spkg-install to set MACOSX_DEPLOYMENT_TARGET to 11.0.  I don't think this is needed anymore since Homebrew patched GCC 10 but I can do some testing on that.\n\n2.  At some point in the build process we take a look at MACOSX_DEPLOYMENT_TARGET, which can be easily done with something like\n\n\n```\npython3 -c \"import sysconfig; print(sysconfig.get_config_var('MACOSX_DEPLOYMENT_TARGET'))\"\n```\n\nif we get back a value of 11 and yet the version of gfortran we are using is less than 10.2.0 then we change MACOSX_DEPLOYMENT_TARGET to 10.16 or something like that.",
    "created_at": "2021-03-16T02:16:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502137",
    "user": "https://github.com/zlscherr"
}
```

<div id="comment:16" align="right">comment:16</div>

It's actually worse than just extra newlines.  I tried manually patching to strip all whitespace from both ends, but that didn't solve the problem.  I dumped the contents of the version_string which is causing numpy to fail into a text file and it turned out to be

"gfortran: warning: couldn't understand version 11

9.3.0"

(I tested with gcc 9.3, but the same happens with 9.2)

I can get numpy and scipy to build by manually forcing MACOSX_DEPLOYMENT_TARGET to be 10.16 but it seems that 11 and 11.0 both cause problems.

Here is a proposal for how to deal with this:

1.  Remove the if statements from scipy's spkg-install to set MACOSX_DEPLOYMENT_TARGET to 11.0.  I don't think this is needed anymore since Homebrew patched GCC 10 but I can do some testing on that.

2.  At some point in the build process we take a look at MACOSX_DEPLOYMENT_TARGET, which can be easily done with something like


```
python3 -c "import sysconfig; print(sysconfig.get_config_var('MACOSX_DEPLOYMENT_TARGET'))"
```

if we get back a value of 11 and yet the version of gfortran we are using is less than 10.2.0 then we change MACOSX_DEPLOYMENT_TARGET to 10.16 or something like that.



---

archive/issue_comments_502138.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nBut probably the second step is not necessary, it would only be needed if the user has python3 from Homebrew and yet gfortran from sage.  I think just fixing up scipy's spkg-install should fix everything.",
    "created_at": "2021-03-16T02:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502138",
    "user": "https://github.com/zlscherr"
}
```

<div id="comment:17" align="right">comment:17</div>

But probably the second step is not necessary, it would only be needed if the user has python3 from Homebrew and yet gfortran from sage.  I think just fixing up scipy's spkg-install should fix everything.



---

archive/issue_comments_502139.json:
```json
{
    "body": "Branch: **[u/gh-zlscherr/revert_scipy_MACOSX_DEPLOYMENT_TARGET](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-zlscherr/revert_scipy_MACOSX_DEPLOYMENT_TARGET)**",
    "created_at": "2021-03-16T02:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502139",
    "user": "https://github.com/zlscherr"
}
```

Branch: **[u/gh-zlscherr/revert_scipy_MACOSX_DEPLOYMENT_TARGET](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-zlscherr/revert_scipy_MACOSX_DEPLOYMENT_TARGET)**



---

archive/issue_comments_502140.json:
```json
{
    "body": "Commit: **[`4cc8c4d`](https://github.com/sagemath/sagetrac-mirror/commit/4cc8c4da3ab35999e0746c498105658a24a224c0)**",
    "created_at": "2021-03-16T02:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502140",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`4cc8c4d`](https://github.com/sagemath/sagetrac-mirror/commit/4cc8c4da3ab35999e0746c498105658a24a224c0)**



---

archive/issue_comments_502141.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4cc8c4da3ab35999e0746c498105658a24a224c0\"><code>4cc8c4d</code></a></td><td><code>Reverted changes in scipy's spkg-install to unset MACOSX_DEPLOYMENT_TARGET to 11 on Big Sur</code></td></tr></table>\n",
    "created_at": "2021-03-16T02:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502141",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4cc8c4da3ab35999e0746c498105658a24a224c0"><code>4cc8c4d</code></a></td><td><code>Reverted changes in scipy's spkg-install to unset MACOSX_DEPLOYMENT_TARGET to 11 on Big Sur</code></td></tr></table>




---

archive/issue_events_428656.json:
```json
{
    "actor": "https://github.com/zlscherr",
    "created_at": "2021-03-16T02:33:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31326#event-428656"
}
```



---

archive/issue_comments_502142.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThanks for investigating! \n\nTo test this in various configurations, it would be enough to merge the branch of #31492 and then push a tag to your github fork of sage.",
    "created_at": "2021-03-16T02:33:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502142",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

Thanks for investigating! 

To test this in various configurations, it would be enough to merge the branch of #31492 and then push a tag to your github fork of sage.



---

archive/issue_comments_502143.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI think I did that correctly.  I'll report on what happens in the CI on my repo.",
    "created_at": "2021-03-16T02:45:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502143",
    "user": "https://github.com/zlscherr"
}
```

<div id="comment:22" align="right">comment:22</div>

I think I did that correctly.  I'll report on what happens in the CI on my repo.



---

archive/issue_comments_502144.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI'm not sure if there is something I need to do to get the CI working, but some of the homebrew's are already failing because of an error like:\n\ncurl: (35) LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to homebrew.bintray.com:443\n\nIs there something I need to do to avoid this?",
    "created_at": "2021-03-16T03:23:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502144",
    "user": "https://github.com/zlscherr"
}
```

<div id="comment:23" align="right">comment:23</div>

I'm not sure if there is something I need to do to get the CI working, but some of the homebrew's are already failing because of an error like:

curl: (35) LibreSSL SSL_connect: SSL_ERROR_SYSCALL in connection to homebrew.bintray.com:443

Is there something I need to do to avoid this?



---

archive/issue_comments_502145.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThere are various ways how these CI runs can intermittently fail. It's nothing that we can fix on our side as far as I can tell. \n\nBy the way, if you want, you can remove the unnecessary runs (for linux, cygwin) by editing files in `.github/workflows/`. Also `max-parallel` can be edited so that more macOS jobs are run in parallel.",
    "created_at": "2021-03-16T03:34:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502145",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

There are various ways how these CI runs can intermittently fail. It's nothing that we can fix on our side as far as I can tell. 

By the way, if you want, you can remove the unnecessary runs (for linux, cygwin) by editing files in `.github/workflows/`. Also `max-parallel` can be edited so that more macOS jobs are run in parallel.



---

archive/issue_comments_502146.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@mkoeppe](#comment%3A13):\n> - local-macos (conda-forge-macos, standard, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782333 - uses python3 from conda\n\n@isuruf: Also this build using conda-forge is affected",
    "created_at": "2021-03-16T07:01:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502146",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@mkoeppe](#comment%3A13):
> - local-macos (conda-forge-macos, standard, default, macos-11.0) https://github.com/mkoeppe/sage/runs/2103782333 - uses python3 from conda

@isuruf: Also this build using conda-forge is affected



---

archive/issue_events_428657.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-16T20:30:10Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "title_is": "macos-11.0: scipy build fails",
    "title_was": "homebrew-macos-11.0-xcode-minimal: scipy build fails",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31326#event-428657"
}
```



---

archive/issue_comments_502147.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,10 @@\n (from #31227)\n \n-another failure report, for a possibly similar configuration, in #30651:\n+Affected configurations (From \u200bhttps://groups.google.com/g/sage-release/c/KdSKg6RdZok/m/GXfB1rW1AgAJ)\n+- local-macos (homebrew-macos, minimal, default, macos-11.0) \u200bhttps://github.com/mkoeppe/sage/runs/2103782309 -- Sage installs python3 from spkg\n+- local-macos (conda-forge-macos, standard, default, macos-11.0) \u200bhttps://github.com/mkoeppe/sage/runs/2103782333 - uses python3 from conda\n+- local-macos (homebrew-macos-python3_pythonorg, standard, default, macos-11.0) \u200bhttps://github.com/mkoeppe/sage/runs/2103782375 - uses somewhat dated python3 from python.org - \u200bhttps://www.python.org/ftp/python/3.7.7/python-3.7.7-macosx10.9.pkg\n+- another failure report, for a configuration possibly similar to local-macos (homebrew-macos, minimal, default, macos-11.0) , in #30651:\n \n ```\n       File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/ccompiler.py\", line 90, in <lambda>\n``````\n",
    "created_at": "2021-03-16T20:30:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502147",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,10 @@
 (from #31227)
 
-another failure report, for a possibly similar configuration, in #30651:
+Affected configurations (From ​https://groups.google.com/g/sage-release/c/KdSKg6RdZok/m/GXfB1rW1AgAJ)
+- local-macos (homebrew-macos, minimal, default, macos-11.0) ​https://github.com/mkoeppe/sage/runs/2103782309 -- Sage installs python3 from spkg
+- local-macos (conda-forge-macos, standard, default, macos-11.0) ​https://github.com/mkoeppe/sage/runs/2103782333 - uses python3 from conda
+- local-macos (homebrew-macos-python3_pythonorg, standard, default, macos-11.0) ​https://github.com/mkoeppe/sage/runs/2103782375 - uses somewhat dated python3 from python.org - ​https://www.python.org/ftp/python/3.7.7/python-3.7.7-macosx10.9.pkg
+- another failure report, for a configuration possibly similar to local-macos (homebrew-macos, minimal, default, macos-11.0) , in #30651:
 
 ```
       File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.9/site-packages/numpy/distutils/ccompiler.py", line 90, in <lambda>
``````




---

archive/issue_comments_502148.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nyes, my student also reports getting\n\n```\n[scipy-1.5.4]     clang: error: invalid version number in 'MACOSX_DEPLOYMENT_TARGET=11.0'\n```",
    "created_at": "2021-03-20T20:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502148",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

yes, my student also reports getting

```
[scipy-1.5.4]     clang: error: invalid version number in 'MACOSX_DEPLOYMENT_TARGET=11.0'
```



---

archive/issue_comments_502149.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI tried running on github CI, but it quit after a few days and only got through 10.15.  I just took out 10.15 and am trying again...",
    "created_at": "2021-03-20T21:22:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502149",
    "user": "https://github.com/zlscherr"
}
```

<div id="comment:28" align="right">comment:28</div>

I tried running on github CI, but it quit after a few days and only got through 10.15.  I just took out 10.15 and am trying again...



---

archive/issue_comments_502150.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI tried to run the CI tests on 11.0 but I got the following error message:\n\n\"No runner matching the specified labels was found: macos-11.0\"\n\nIs there a different way I should get the tests to run on Big Sur?",
    "created_at": "2021-03-21T19:31:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502150",
    "user": "https://github.com/zlscherr"
}
```

<div id="comment:29" align="right">comment:29</div>

I tried to run the CI tests on 11.0 but I got the following error message:

"No runner matching the specified labels was found: macos-11.0"

Is there a different way I should get the tests to run on Big Sur?



---

archive/issue_comments_502151.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nhttps://github.com/actions/virtual-environments/issues/2486\n\"macOS 11.0 pools will be transited to private preview\"",
    "created_at": "2021-03-21T19:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502151",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

https://github.com/actions/virtual-environments/issues/2486
"macOS 11.0 pools will be transited to private preview"



---

archive/issue_comments_502152.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\ngotcha.  I've tried some local testing and the reversion seems to be fine, but I'll leave it to others to do more extensive testing.",
    "created_at": "2021-03-21T19:47:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502152",
    "user": "https://github.com/zlscherr"
}
```

<div id="comment:31" align="right">comment:31</div>

gotcha.  I've tried some local testing and the reversion seems to be fine, but I'll leave it to others to do more extensive testing.



---

archive/issue_comments_502153.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nSome of my recent runs in https://github.com/mkoeppe/sage/actions/workflows/tox.yml have used branches that merged this ticket and may contain some useful results for 11.0",
    "created_at": "2021-03-21T19:48:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502153",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Some of my recent runs in https://github.com/mkoeppe/sage/actions/workflows/tox.yml have used branches that merged this ticket and may contain some useful results for 11.0



---

archive/issue_comments_502154.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2021-03-21T21:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502154",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_428658.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-21T21:43:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31326#event-428658"
}
```



---

archive/issue_events_428659.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-21T21:43:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31326#event-428659"
}
```



---

archive/issue_comments_502155.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\n- local-macos (homebrew-macos, minimal, default, macos-11.0) - \n  https://github.com/mkoeppe/sage/runs/2156548349 - OK\n\n- local-macos (homebrew-macos, standard, default, macos-11.0) - https://github.com/mkoeppe/sage/runs/2156548388 - OK",
    "created_at": "2021-03-21T21:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502155",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

- local-macos (homebrew-macos, minimal, default, macos-11.0) - 
  https://github.com/mkoeppe/sage/runs/2156548349 - OK

- local-macos (homebrew-macos, standard, default, macos-11.0) - https://github.com/mkoeppe/sage/runs/2156548388 - OK



---

archive/issue_comments_502156.json:
```json
{
    "body": "Author: **Zachary Scherr**",
    "created_at": "2021-03-21T21:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502156",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Zachary Scherr**



---

archive/issue_comments_502157.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nAlso \n\n- local-macos (conda-forge-macos, standard, default, macos-11.0) - https://github.com/mkoeppe/sage/runs/2135024636 - OK (except for an unrelated error in docbuild)",
    "created_at": "2021-03-21T21:47:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502157",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

Also 

- local-macos (conda-forge-macos, standard, default, macos-11.0) - https://github.com/mkoeppe/sage/runs/2135024636 - OK (except for an unrelated error in docbuild)



---

archive/issue_comments_502158.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI agree it works with various Pythons on OS X 11. [comment:14](#comment%3A14) has not been addressed, but I guess that's not for this ticket.",
    "created_at": "2021-03-22T02:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502158",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:35" align="right">comment:35</div>

I agree it works with various Pythons on OS X 11. [comment:14](#comment%3A14) has not been addressed, but I guess that's not for this ticket.



---

archive/issue_comments_502159.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@jhpalmieri](#comment%3A35):\n> comment:14 has not been addressed, but I guess that's not for this ticket.\n\nYes, to fix that we need to upgrade our gcc/gfortran - that's #29703.",
    "created_at": "2021-03-22T03:08:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502159",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@jhpalmieri](#comment%3A35):
> comment:14 has not been addressed, but I guess that's not for this ticket.

Yes, to fix that we need to upgrade our gcc/gfortran - that's #29703.



---

archive/issue_events_428660.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-23T23:49:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31326#event-428660"
}
```



---

archive/issue_events_428661.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5e86bf2b7a5873e9f42b32c43718a24d834b5abd",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-03-23T23:49:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31326#event-428661"
}
```



---

archive/issue_comments_502160.json:
```json
{
    "body": "Changed branch from **[u/gh-zlscherr/revert_scipy_MACOSX_DEPLOYMENT_TARGET](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-zlscherr/revert_scipy_MACOSX_DEPLOYMENT_TARGET)** to **[`4cc8c4d`](https://github.com/sagemath/sagetrac-mirror/commit/4cc8c4da3ab35999e0746c498105658a24a224c0)**",
    "created_at": "2021-03-23T23:49:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31326",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31326#issuecomment-502160",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-zlscherr/revert_scipy_MACOSX_DEPLOYMENT_TARGET](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-zlscherr/revert_scipy_MACOSX_DEPLOYMENT_TARGET)** to **[`4cc8c4d`](https://github.com/sagemath/sagetrac-mirror/commit/4cc8c4da3ab35999e0746c498105658a24a224c0)**
