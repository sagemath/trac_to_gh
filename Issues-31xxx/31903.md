# Issue 31903: Build errors in padic_relaxed_element

archive/issues_031666.json:
```json
{
    "body": "9.4.beta0 fails to build:\n\nhttps://github.com/sagemath/sage/runs/2670399286?check_suite_focus=true\n\n```\n  [sagelib-9.4.beta0]   building 'sage.rings.padics.padic_relaxed_element' extension\n  [sagelib-9.4.beta0]   Executing 1 command (using 1 thread)\n  [sagelib-9.4.beta0]   [1/1] gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -O2 -g -march=native -O2 -g -march=native -fPIC -I./sage/cpython -I./sage/libs/flint -Isage/libs/flint -I/sage/build/pkgs/sagelib/src -I/sage/local/include/python3.9 -I/sage/local/lib/python3.9/site-packages/numpy/core/include -Ibuild/cythonized -I/sage/local/include/python3.9 -c build/cythonized/sage/rings/padics/padic_relaxed_element.c -o build/temp.linux-x86_64-3.9/build/cythonized/sage/rings/padics/padic_relaxed_element.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -std=c99\n  [sagelib-9.4.beta0]   build/cythonized/sage/rings/padics/padic_relaxed_element.c:5174:60: fatal error: sage/libs/linkages/padics/relaxed/flint_helper.c: No such file or directory\n```\n\n\nCC:  @dimpase @xcaruso @roed314 @vbraun\n\nBranch/Commit: e568e3b2885a96b2008b43bcf1986501ede3447d\n\nReviewer: Volker Braun\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31903\n\n",
    "closed_at": "2021-06-06T13:16:40Z",
    "created_at": "2021-06-03T22:33:20Z",
    "labels": [
        "component: padics",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Build errors in padic_relaxed_element",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31903",
    "user": "https://github.com/mkoeppe"
}
```
9.4.beta0 fails to build:

https://github.com/sagemath/sage/runs/2670399286?check_suite_focus=true

```
  [sagelib-9.4.beta0]   building 'sage.rings.padics.padic_relaxed_element' extension
  [sagelib-9.4.beta0]   Executing 1 command (using 1 thread)
  [sagelib-9.4.beta0]   [1/1] gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -O2 -g -march=native -O2 -g -march=native -fPIC -I./sage/cpython -I./sage/libs/flint -Isage/libs/flint -I/sage/build/pkgs/sagelib/src -I/sage/local/include/python3.9 -I/sage/local/lib/python3.9/site-packages/numpy/core/include -Ibuild/cythonized -I/sage/local/include/python3.9 -c build/cythonized/sage/rings/padics/padic_relaxed_element.c -o build/temp.linux-x86_64-3.9/build/cythonized/sage/rings/padics/padic_relaxed_element.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -std=c99
  [sagelib-9.4.beta0]   build/cythonized/sage/rings/padics/padic_relaxed_element.c:5174:60: fatal error: sage/libs/linkages/padics/relaxed/flint_helper.c: No such file or directory
```


CC:  @dimpase @xcaruso @roed314 @vbraun

Branch/Commit: e568e3b2885a96b2008b43bcf1986501ede3447d

Reviewer: Volker Braun

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31903





---

archive/issue_comments_626455.json:
```json
{
    "body": "<a id='comment:1'></a>\nI think `__init__.py` is missing in the new directory `libs/linkages/padics/relaxed`, so it is not recognized as a package directory",
    "created_at": "2021-06-03T22:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626455",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
I think `__init__.py` is missing in the new directory `libs/linkages/padics/relaxed`, so it is not recognized as a package directory



---

archive/issue_comments_626456.json:
```json
{
    "body": "<a id='comment:2'></a>\nActually I think the problem is that `flint_helper.c` was not added as an exception to `.gitignore`, so all Docker-based builds (which use `.dockerignore` -> `.gitignore`) are broken",
    "created_at": "2021-06-03T22:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626456",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Actually I think the problem is that `flint_helper.c` was not added as an exception to `.gitignore`, so all Docker-based builds (which use `.dockerignore` -> `.gitignore`) are broken



---

archive/issue_comments_626457.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/build_errors_in_padic_relaxed_element\"",
    "created_at": "2021-06-03T23:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626457",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/build_errors_in_padic_relaxed_element"



---

archive/issue_comments_626458.json:
```json
{
    "body": "Changing commit from \"\" to \"e568e3b2885a96b2008b43bcf1986501ede3447d\"",
    "created_at": "2021-06-03T23:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626458",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "e568e3b2885a96b2008b43bcf1986501ede3447d"



---

archive/issue_comments_626459.json:
```json
{
    "body": "<a id='comment:4'></a>\nNew commits:\n|                                                                                                                                          |                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[d5a33de](https://github.com/sagemath/sagetrac-mirror/commit/d5a33dea423e784bab20ee811367ce12d248057c)|`src/sage/libs/linkages/padics/relaxed/__init__.py: New`|\n|[e568e3b](https://github.com/sagemath/sagetrac-mirror/commit/e568e3b2885a96b2008b43bcf1986501ede3447d)|`.gitignore: Add exception for a non-generated .c file`|",
    "created_at": "2021-06-03T23:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626459",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
New commits:
|                                                                                                                                          |                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[d5a33de](https://github.com/sagemath/sagetrac-mirror/commit/d5a33dea423e784bab20ee811367ce12d248057c)|`src/sage/libs/linkages/padics/relaxed/__init__.py: New`|
|[e568e3b](https://github.com/sagemath/sagetrac-mirror/commit/e568e3b2885a96b2008b43bcf1986501ede3447d)|`.gitignore: Add exception for a non-generated .c file`|



---

archive/issue_comments_626460.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-06-03T23:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626460",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_626461.json:
```json
{
    "body": "Changing reviewer from \"\" to \"https://github.com/mkoeppe/sage/actions/runs/904504331\"",
    "created_at": "2021-06-03T23:23:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626461",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "https://github.com/mkoeppe/sage/actions/runs/904504331"



---

archive/issue_comments_626462.json:
```json
{
    "body": "<a id='comment:6'></a>\nI'm fine with this fix, but I'm not sure how to parse the output of https://github.com/mkoeppe/sage/actions/runs/904504331.  It seems to have various numpy failures but not the failure reported in this ticket.  Will all of the jobs eventually finish there?",
    "created_at": "2021-06-04T05:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626462",
    "user": "https://github.com/roed314"
}
```

<a id='comment:6'></a>
I'm fine with this fix, but I'm not sure how to parse the output of https://github.com/mkoeppe/sage/actions/runs/904504331.  It seems to have various numpy failures but not the failure reported in this ticket.  Will all of the jobs eventually finish there?



---

archive/issue_comments_626463.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-06-04T07:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626463",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_626464.json:
```json
{
    "body": "<a id='comment:7'></a>\nprobably what's tested has more stuff in than just this branch.",
    "created_at": "2021-06-04T07:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626464",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>
probably what's tested has more stuff in than just this branch.



---

archive/issue_comments_626465.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [roed](#comment%3A6):\n> I'm fine with this fix, but I'm not sure how to parse the output of https://github.com/mkoeppe/sage/actions/runs/904504331.  It seems to have various numpy failures but not the failure reported in this ticket.  Will all of the jobs eventually finish there?\n\n\nThis GH Actions run used the branch from this ticket together with the one from #31008, numpy upgrade. \n\nThe failures reported on the present ticket are fixed by the branch.\n\nReady for review",
    "created_at": "2021-06-04T18:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626465",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Replying to [roed](#comment%3A6):
> I'm fine with this fix, but I'm not sure how to parse the output of https://github.com/mkoeppe/sage/actions/runs/904504331.  It seems to have various numpy failures but not the failure reported in this ticket.  Will all of the jobs eventually finish there?


This GH Actions run used the branch from this ticket together with the one from #31008, numpy upgrade. 

The failures reported on the present ticket are fixed by the branch.

Ready for review



---

archive/issue_comments_626466.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-05T18:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626466",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_626467.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/mkoeppe/sage/actions/runs/904504331\" to \"Volker Braun\"",
    "created_at": "2021-06-05T18:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626467",
    "user": "https://github.com/vbraun"
}
```

Changing reviewer from "https://github.com/mkoeppe/sage/actions/runs/904504331" to "Volker Braun"



---

archive/issue_comments_626468.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/build_errors_in_padic_relaxed_element\" to \"e568e3b2885a96b2008b43bcf1986501ede3447d\"",
    "created_at": "2021-06-06T13:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626468",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/build_errors_in_padic_relaxed_element" to "e568e3b2885a96b2008b43bcf1986501ede3447d"



---

archive/issue_events_102753.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-06T13:16:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31903#event-102753"
}
```



---

archive/issue_comments_626469.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-06T13:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31903",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31903#issuecomment-626469",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
