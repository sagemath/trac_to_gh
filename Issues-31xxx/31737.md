# Issue 31737: MatrixMorphism: add support for morphisms acting on the left

archive/issues_031500.json:
```json
{
    "body": "Morphisms between free modules over PIDs are always represented by matrices acting on the right. \n\nThe goal of this ticket is to modify matrix morphisms (`sage/modules/matrix_morphism.py`) by adding an optional keyword for left actions. This will have applications Ticket [ticket:25902] in which we build equivariant left-morphisms between G-lattices.\n\nBranch/Commit: c4ebbea1816b90b904e540eb1a2979a91f324a94\n\nReviewer: David Roe, Thomas R\u00fcd\n\nAuthor: Thomas R\u00fcd, David Roe\n\nDependencies: #31818\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31737\n\n",
    "closed_at": "2021-08-29T09:36:47Z",
    "created_at": "2021-04-27T02:22:13Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "MatrixMorphism: add support for morphisms acting on the left",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31737",
    "user": "https://github.com/toadrush"
}
```
Morphisms between free modules over PIDs are always represented by matrices acting on the right. 

The goal of this ticket is to modify matrix morphisms (`sage/modules/matrix_morphism.py`) by adding an optional keyword for left actions. This will have applications Ticket [ticket:25902] in which we build equivariant left-morphisms between G-lattices.

Branch/Commit: c4ebbea1816b90b904e540eb1a2979a91f324a94

Reviewer: David Roe, Thomas Rüd

Author: Thomas Rüd, David Roe

Dependencies: #31818

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31737





---

archive/issue_comments_480826.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2021-04-27T02:26:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480826",
    "user": "https://github.com/toadrush"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_480827.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to group theory.",
    "created_at": "2021-04-27T02:26:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480827",
    "user": "https://github.com/toadrush"
}
```

Changing component from PLEASE CHANGE to group theory.



---

archive/issue_comments_480828.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n+Morphisms between free modules over PIDs are always represented by matrices acting on the right. \n \n+The goal of this ticket is to modify matrix morphisms (`sage/modules/matrix_morphism.py`) by adding an optional keyword for left actions. This will have applications Ticket [ticket:25902] in which we build equivariant left-morphisms between G-lattices.\n \n Comment: 1\n \n```\n",
    "created_at": "2021-04-27T02:39:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480828",
    "user": "https://github.com/toadrush"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
+Morphisms between free modules over PIDs are always represented by matrices acting on the right. 
 
+The goal of this ticket is to modify matrix morphisms (`sage/modules/matrix_morphism.py`) by adding an optional keyword for left actions. This will have applications Ticket [ticket:25902] in which we build equivariant left-morphisms between G-lattices.
 
 Comment: 1
 
```




---

archive/issue_comments_480829.json:
```json
{
    "body": "Changing component from group theory to linear algebra.",
    "created_at": "2021-04-27T19:10:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480829",
    "user": "https://github.com/roed314"
}
```

Changing component from group theory to linear algebra.



---

archive/issue_comments_480830.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-04T19:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480830",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480831.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-04T19:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480831",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480832.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-11T19:01:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480832",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480833.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-11T19:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480833",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480834.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-11T20:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480834",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480835.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-12T01:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480835",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480836.json:
```json
{
    "body": "<a id='comment:11'></a>Setting to needs review for patchbot.",
    "created_at": "2021-05-12T06:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480836",
    "user": "https://github.com/roed314"
}
```

<a id='comment:11'></a>Setting to needs review for patchbot.



---

archive/issue_comments_480837.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-05-12T06:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480837",
    "user": "https://github.com/roed314"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_480838.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-01T18:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480838",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480839.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-01T19:06:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480839",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480840.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-01T19:33:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480840",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480841.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-01T20:21:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480841",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480842.json:
```json
{
    "body": "<a id='comment:18'></a>Thanks for this! I'm a bit confused by the default `side` argument on line 72. I see that it defaults to `side='left'`, but based on the description, it seems like `side='right'` might be \"mathematical default.\" Does this make sense or am I missing something?",
    "created_at": "2021-06-02T13:35:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480842",
    "user": "https://github.com/trevorkarn"
}
```

<a id='comment:18'></a>Thanks for this! I'm a bit confused by the default `side` argument on line 72. I see that it defaults to `side='left'`, but based on the description, it seems like `side='right'` might be "mathematical default." Does this make sense or am I missing something?



---

archive/issue_comments_480843.json:
```json
{
    "body": "<a id='comment:19'></a>Hi, it is indeed a little confusing. The \"mathematical default\" is indeed `side='right'`, which corresponds to *left-multiplication*. The reason being that sage's ``side`` is the side of the vector relative to the matrix, whereas in mathematics we almost always refer to the side of the matrix relative to the vector. \n\nThe `side` argument already existed in the `MatrixMorphism.matrix` method, with this choice of left/right. The methods left_kernel/right_kernel, left_eigenspaces/right_eigenspaces also work with that convention. \n\n\nNow the small problem that remains is that the default is `side=\"left\"`, but the way some methods are coded are done the other way and taking the transpose. For instance, `matrix.kernel` takes the transpose and calls the `right_kernel` method, which feels a little off. After this ticket, methods of MatrixMorphism will call the appropriate one.\n\nI realise this text might sound confusing, that's because it is somewhat confusing.",
    "created_at": "2021-06-02T23:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480843",
    "user": "https://github.com/toadrush"
}
```

<a id='comment:19'></a>Hi, it is indeed a little confusing. The "mathematical default" is indeed `side='right'`, which corresponds to *left-multiplication*. The reason being that sage's ``side`` is the side of the vector relative to the matrix, whereas in mathematics we almost always refer to the side of the matrix relative to the vector. 

The `side` argument already existed in the `MatrixMorphism.matrix` method, with this choice of left/right. The methods left_kernel/right_kernel, left_eigenspaces/right_eigenspaces also work with that convention. 


Now the small problem that remains is that the default is `side="left"`, but the way some methods are coded are done the other way and taking the transpose. For instance, `matrix.kernel` takes the transpose and calls the `right_kernel` method, which feels a little off. After this ticket, methods of MatrixMorphism will call the appropriate one.

I realise this text might sound confusing, that's because it is somewhat confusing.



---

archive/issue_comments_480844.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-08T18:19:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480844",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480845.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-08T18:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480846.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-15T18:18:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480846",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480847.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-22T18:10:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480847",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480848.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-03T02:49:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480848",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480849.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-04T04:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480849",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_480850.json:
```json
{
    "body": "<a id='comment:25'></a>Needs rebase",
    "created_at": "2021-07-04T04:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480850",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>Needs rebase



---

archive/issue_comments_480851.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-06T00:17:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480851",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480852.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-06T18:22:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480852",
    "user": "https://github.com/toadrush"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_480853.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-13T19:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480853",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480854.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-13T19:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480854",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480855.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-13T21:10:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480855",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_480856.json:
```json
{
    "body": "<a id='comment:34'></a>New commits:",
    "created_at": "2021-08-03T20:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480856",
    "user": "https://github.com/roed314"
}
```

<a id='comment:34'></a>New commits:



---

archive/issue_comments_480857.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-03T20:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480857",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_083697.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:07:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31737#event-83697"
}
```



---

archive/issue_comments_480858.json:
```json
{
    "body": "<a id='comment:36'></a>The build error doesn't seem to be from the changes in this ticket.",
    "created_at": "2021-08-17T18:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480858",
    "user": "https://github.com/roed314"
}
```

<a id='comment:36'></a>The build error doesn't seem to be from the changes in this ticket.



---

archive/issue_events_083698.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-08-29T09:36:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31737#event-83698"
}
```



---

archive/issue_comments_480859.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-08-29T09:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31737",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31737#issuecomment-480859",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
