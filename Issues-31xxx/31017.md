# Issue 31017: build/bin/sage-spkg-info: Format dependencies file; remove redundant "dependencies" sections from SPKG.rst

archive/issues_030780.json:
```json
{
    "body": "For most SPKGs, the `dependencies` file contains more accurate information than what can be found in the \"Dependencies\" section of `SPKG.rst`.\n\nWe simplify the format of the `dependencies` file by introducing new files `dependencies_optional`, `dependencies_order_only`, `dependencies_check`.\n\nWe extend the `sage-spkg-info` script so that, by simple heuristic text wrangling, the `dependencies` file is transformed to more human-readable form. When formatting for rst output for the \"spkg\" chapter of the reference manual, we format the dependencies as hyperlinks.\nExample: https://d385f0db7500bdc8168e6f7f18d76741efa3742b--sagemath-tobias.netlify.app/reference/spkg/cvxopt.html#dependencies\n\nThen we remove the redundant \"dependencies\" sections from the `SPKG.rst` files.\n\n\nCC:  @jhpalmieri @seblabbe @slel @dimpase @videlec @tobiasdiez\n\nKeywords: sd111\n\nBranch/Commit: c359f6b3ca3e05ecf6f5f8ee76d429e997829089\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #33601\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31017\n\n",
    "closed_at": "2022-05-29T11:28:55Z",
    "created_at": "2020-12-06T18:34:10Z",
    "labels": [
        "component: build",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "build/bin/sage-spkg-info: Format dependencies file; remove redundant \"dependencies\" sections from SPKG.rst",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31017",
    "user": "https://github.com/mkoeppe"
}
```
For most SPKGs, the `dependencies` file contains more accurate information than what can be found in the "Dependencies" section of `SPKG.rst`.

We simplify the format of the `dependencies` file by introducing new files `dependencies_optional`, `dependencies_order_only`, `dependencies_check`.

We extend the `sage-spkg-info` script so that, by simple heuristic text wrangling, the `dependencies` file is transformed to more human-readable form. When formatting for rst output for the "spkg" chapter of the reference manual, we format the dependencies as hyperlinks.
Example: https://d385f0db7500bdc8168e6f7f18d76741efa3742b--sagemath-tobias.netlify.app/reference/spkg/cvxopt.html#dependencies

Then we remove the redundant "dependencies" sections from the `SPKG.rst` files.


CC:  @jhpalmieri @seblabbe @slel @dimpase @videlec @tobiasdiez

Keywords: sd111

Branch/Commit: c359f6b3ca3e05ecf6f5f8ee76d429e997829089

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #33601

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31017





---

archive/issue_comments_615536.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29655\"",
    "created_at": "2021-01-16T18:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615536",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29655"



---

archive/issue_comments_615537.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,6 @@\n+For most SPKGs, the `dependencies` file contains more accurate information than what can be found in the \"Dependencies\" section of `SPKG.rst`.\n \n+We extend the `sage-spkg-info` script so that, by simple heuristic text wrangling, the `dependencies` file is transformed to more human-readable form. When formatting for rst output for the \"spkg\" chapter of the reference manual, we format the dependencies as hyperlinks.\n+\n+Then we remove the redundant \"dependencies\" sections from the `SPKG.rst` files.\n+\n``````\n",
    "created_at": "2021-01-16T18:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615537",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,6 @@
+For most SPKGs, the `dependencies` file contains more accurate information than what can be found in the "Dependencies" section of `SPKG.rst`.
 
+We extend the `sage-spkg-info` script so that, by simple heuristic text wrangling, the `dependencies` file is transformed to more human-readable form. When formatting for rst output for the "spkg" chapter of the reference manual, we format the dependencies as hyperlinks.
+
+Then we remove the redundant "dependencies" sections from the `SPKG.rst` files.
+
``````




---

archive/issue_comments_615538.json:
```json
{
    "body": "<a id='comment:3'></a>Simple clean regexp processing like\n\n```\nfor a in build/pkgs/*/dependencies; do echo $((for d in $(sed -n '2,$d;/#/d;s/[$][(][-a-z]* [^)]*[)]//g;s/[$|,()]/ /g;s,[^ /]*/[^ ]*,,g;s/findstring//g;s/OPTIONAL_INSTALLED_PACKAGES//;p' $a); do echo $d; done) | sort); done\n```\ndoes the job",
    "created_at": "2021-01-18T03:47:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615538",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>Simple clean regexp processing like

```
for a in build/pkgs/*/dependencies; do echo $((for d in $(sed -n '2,$d;/#/d;s/[$][(][-a-z]* [^)]*[)]//g;s/[$|,()]/ /g;s,[^ /]*/[^ ]*,,g;s/findstring//g;s/OPTIONAL_INSTALLED_PACKAGES//;p' $a); do echo $d; done) | sort); done
```
does the job



---

archive/issue_comments_615539.json:
```json
{
    "body": "<a id='comment:4'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615539",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_081004.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31017#event-81004"
}
```



---

archive/issue_events_081005.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31017#event-81005"
}
```



---

archive/issue_events_081006.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31017#event-81006"
}
```



---

archive/issue_events_081007.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31017#event-81007"
}
```



---

archive/issue_events_081008.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31017#event-81008"
}
```



---

archive/issue_events_081009.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31017#event-81009"
}
```



---

archive/issue_events_081010.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-11T17:19:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31017#event-81010"
}
```



---

archive/issue_comments_615540.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2022-05-15T02:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615540",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_615541.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n For most SPKGs, the `dependencies` file contains more accurate information than what can be found in the \"Dependencies\" section of `SPKG.rst`.\n+\n+We simplify the format of the `dependencies` file by introducing new files `dependencies_optional`, `dependencies_order_only`, `dependencies_check`.\n \n We extend the `sage-spkg-info` script so that, by simple heuristic text wrangling, the `dependencies` file is transformed to more human-readable form. When formatting for rst output for the \"spkg\" chapter of the reference manual, we format the dependencies as hyperlinks.\n \n``````\n",
    "created_at": "2022-05-15T02:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615541",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 For most SPKGs, the `dependencies` file contains more accurate information than what can be found in the "Dependencies" section of `SPKG.rst`.
+
+We simplify the format of the `dependencies` file by introducing new files `dependencies_optional`, `dependencies_order_only`, `dependencies_check`.
 
 We extend the `sage-spkg-info` script so that, by simple heuristic text wrangling, the `dependencies` file is transformed to more human-readable form. When formatting for rst output for the "spkg" chapter of the reference manual, we format the dependencies as hyperlinks.
 
``````




---

archive/issue_comments_615542.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/build_bin_sage_spkg_info__format_dependencies_file__remove_redundant__dependencies__sections_from_spkg_rst\"",
    "created_at": "2022-05-15T04:17:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615542",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/build_bin_sage_spkg_info__format_dependencies_file__remove_redundant__dependencies__sections_from_spkg_rst"



---

archive/issue_comments_615543.json:
```json
{
    "body": "Changing dependencies from \"#29655\" to \"\"",
    "created_at": "2022-05-15T04:18:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615543",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29655" to ""



---

archive/issue_comments_615544.json:
```json
{
    "body": "Changing commit from \"\" to \"9761ef777a3c4cc679cd9a3df9da3eb7435b50e2\"",
    "created_at": "2022-05-15T04:18:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615544",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "9761ef777a3c4cc679cd9a3df9da3eb7435b50e2"



---

archive/issue_comments_615545.json:
```json
{
    "body": "<a id='comment:10'></a>New commits:",
    "created_at": "2022-05-15T04:18:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615545",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>New commits:



---

archive/issue_comments_615546.json:
```json
{
    "body": "Changing commit from \"9761ef777a3c4cc679cd9a3df9da3eb7435b50e2\" to \"5b2ed40b44354a26a42e10af6c327c270aed9d4b\"",
    "created_at": "2022-05-15T04:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615546",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9761ef777a3c4cc679cd9a3df9da3eb7435b50e2" to "5b2ed40b44354a26a42e10af6c327c270aed9d4b"



---

archive/issue_comments_615547.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-15T04:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615547",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615548.json:
```json
{
    "body": "Changing commit from \"5b2ed40b44354a26a42e10af6c327c270aed9d4b\" to \"f9e76d552d5f64df4b3925b447fa3b10895fbdab\"",
    "created_at": "2022-05-15T04:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5b2ed40b44354a26a42e10af6c327c270aed9d4b" to "f9e76d552d5f64df4b3925b447fa3b10895fbdab"



---

archive/issue_comments_615549.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-15T04:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615550.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-15T04:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615550",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615551.json:
```json
{
    "body": "Changing commit from \"f9e76d552d5f64df4b3925b447fa3b10895fbdab\" to \"643fa512abaed8ddbb64d061150f1f9e2eebc3b4\"",
    "created_at": "2022-05-15T04:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615551",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f9e76d552d5f64df4b3925b447fa3b10895fbdab" to "643fa512abaed8ddbb64d061150f1f9e2eebc3b4"



---

archive/issue_comments_615552.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-05-15T04:51:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615552",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_615553.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-15T06:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615553",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615554.json:
```json
{
    "body": "Changing commit from \"643fa512abaed8ddbb64d061150f1f9e2eebc3b4\" to \"36f0affaca91eb15e8ade8e3899a664d69223ef5\"",
    "created_at": "2022-05-15T06:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615554",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "643fa512abaed8ddbb64d061150f1f9e2eebc3b4" to "36f0affaca91eb15e8ade8e3899a664d69223ef5"



---

archive/issue_comments_615555.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-05-15T06:25:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615555",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_615556.json:
```json
{
    "body": "Changing commit from \"36f0affaca91eb15e8ade8e3899a664d69223ef5\" to \"d385f0db7500bdc8168e6f7f18d76741efa3742b\"",
    "created_at": "2022-05-15T06:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615556",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "36f0affaca91eb15e8ade8e3899a664d69223ef5" to "d385f0db7500bdc8168e6f7f18d76741efa3742b"



---

archive/issue_comments_615557.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-15T06:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615557",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615558.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-05-15T08:17:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615558",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_615559.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,7 @@\n We simplify the format of the `dependencies` file by introducing new files `dependencies_optional`, `dependencies_order_only`, `dependencies_check`.\n \n We extend the `sage-spkg-info` script so that, by simple heuristic text wrangling, the `dependencies` file is transformed to more human-readable form. When formatting for rst output for the \"spkg\" chapter of the reference manual, we format the dependencies as hyperlinks.\n+Example: https://d385f0db7500bdc8168e6f7f18d76741efa3742b--sagemath-tobias.netlify.app/reference/spkg/cvxopt.html#dependencies\n \n Then we remove the redundant \"dependencies\" sections from the `SPKG.rst` files.\n \n``````\n",
    "created_at": "2022-05-16T00:18:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615559",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,7 @@
 We simplify the format of the `dependencies` file by introducing new files `dependencies_optional`, `dependencies_order_only`, `dependencies_check`.
 
 We extend the `sage-spkg-info` script so that, by simple heuristic text wrangling, the `dependencies` file is transformed to more human-readable form. When formatting for rst output for the "spkg" chapter of the reference manual, we format the dependencies as hyperlinks.
+Example: https://d385f0db7500bdc8168e6f7f18d76741efa3742b--sagemath-tobias.netlify.app/reference/spkg/cvxopt.html#dependencies
 
 Then we remove the redundant "dependencies" sections from the `SPKG.rst` files.
 
``````




---

archive/issue_comments_615560.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-05-24T16:39:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615560",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_615561.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-24T16:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615561",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615562.json:
```json
{
    "body": "Changing commit from \"d385f0db7500bdc8168e6f7f18d76741efa3742b\" to \"a9b34633fb2894270afc68201a6ff2af53765b4a\"",
    "created_at": "2022-05-24T16:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615562",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d385f0db7500bdc8168e6f7f18d76741efa3742b" to "a9b34633fb2894270afc68201a6ff2af53765b4a"



---

archive/issue_comments_615563.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-05-24T16:55:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615563",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_615564.json:
```json
{
    "body": "<a id='comment:24'></a>while we're busy with deps here, it would be good to understand why installing `jupyterlab` triggers re-building of `sagelib` (as reported recently on sage-devel)\n\nDependencies are currently tracked  in several ways: \n\n* `build/pkgs/<...>/dependencies` (which get into generated Makefiles)\n* pip (there are requirements.txt, maybe other ways?)\n* something else ???",
    "created_at": "2022-05-26T09:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615564",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'></a>while we're busy with deps here, it would be good to understand why installing `jupyterlab` triggers re-building of `sagelib` (as reported recently on sage-devel)

Dependencies are currently tracked  in several ways: 

* `build/pkgs/<...>/dependencies` (which get into generated Makefiles)
* pip (there are requirements.txt, maybe other ways?)
* something else ???



---

archive/issue_comments_615565.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-26T13:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615565",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_615566.json:
```json
{
    "body": "<a id='comment:25'></a>lgtm",
    "created_at": "2022-05-26T13:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615566",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>lgtm



---

archive/issue_comments_615567.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2022-05-26T13:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615567",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_615568.json:
```json
{
    "body": "<a id='comment:26'></a>Thank you!",
    "created_at": "2022-05-26T14:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615568",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>Thank you!



---

archive/issue_comments_615569.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [dimpase](#comment%3A24):\n> while we're busy with deps here, it would be good to understand why installing `jupyterlab` triggers re-building of `sagelib` (as reported recently on sage-devel)\n\n\nHas this observation been reproduced? Then a ticket for it should be opened",
    "created_at": "2022-05-26T14:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615569",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>Replying to [dimpase](#comment%3A24):
> while we're busy with deps here, it would be good to understand why installing `jupyterlab` triggers re-building of `sagelib` (as reported recently on sage-devel)


Has this observation been reproduced? Then a ticket for it should be opened



---

archive/issue_comments_615570.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [mkoeppe](#comment%3A27):\n> Replying to [dimpase](#comment%3A24):\n> > while we're busy with deps here, it would be good to understand why installing `jupyterlab` triggers re-building of `sagelib` (as reported recently on sage-devel)\n\n> \n> Has this observation been reproduced? Then a ticket for it should be opened\n\n\nyes it has been reproduced. I'll open a ticket.",
    "created_at": "2022-05-26T18:31:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615570",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'></a>Replying to [mkoeppe](#comment%3A27):
> Replying to [dimpase](#comment%3A24):
> > while we're busy with deps here, it would be good to understand why installing `jupyterlab` triggers re-building of `sagelib` (as reported recently on sage-devel)

> 
> Has this observation been reproduced? Then a ticket for it should be opened


yes it has been reproduced. I'll open a ticket.



---

archive/issue_comments_615571.json:
```json
{
    "body": "<a id='comment:29'></a>aand, while trying to reproduce the latter, I ran unto a bug:\n\n```\n$ make jupyterlab_widgets\n...\nmake[1]: Entering directory '/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/build/make'\nmake[1]: *** No rule to make target 'jupyter_packagingjupyterlab', needed by 'ipympl'.  Stop.\nmake[1]: Leaving directory '/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/build/make'\n\nreal    0m0.018s\nuser    0m0.017s\nsys     0m0.001s\n***************************************************************\nError building Sage.\n```",
    "created_at": "2022-05-26T18:57:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615571",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'></a>aand, while trying to reproduce the latter, I ran unto a bug:

```
$ make jupyterlab_widgets
...
make[1]: Entering directory '/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/build/make'
make[1]: *** No rule to make target 'jupyter_packagingjupyterlab', needed by 'ipympl'.  Stop.
make[1]: Leaving directory '/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/build/make'

real    0m0.018s
user    0m0.017s
sys     0m0.001s
***************************************************************
Error building Sage.
```



---

archive/issue_comments_615572.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-05-26T18:57:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615572",
    "user": "https://github.com/dimpase"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_615573.json:
```json
{
    "body": "Changing commit from \"a9b34633fb2894270afc68201a6ff2af53765b4a\" to \"18593eccdf417e07094384c32f455c08540415a6\"",
    "created_at": "2022-05-26T19:03:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615573",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a9b34633fb2894270afc68201a6ff2af53765b4a" to "18593eccdf417e07094384c32f455c08540415a6"



---

archive/issue_comments_615574.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-05-26T19:03:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615574",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_615575.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-05-26T19:05:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615575",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_615576.json:
```json
{
    "body": "<a id='comment:31'></a>Thanks for catching this",
    "created_at": "2022-05-26T19:05:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615576",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>Thanks for catching this



---

archive/issue_comments_615577.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-05-26T20:21:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615577",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_615578.json:
```json
{
    "body": "<a id='comment:32'></a>ok, this works",
    "created_at": "2022-05-26T20:21:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615578",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'></a>ok, this works



---

archive/issue_comments_615579.json:
```json
{
    "body": "<a id='comment:33'></a>Thanks!",
    "created_at": "2022-05-26T20:48:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615579",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>Thanks!



---

archive/issue_comments_615580.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2022-05-27T19:39:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615580",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_615581.json:
```json
{
    "body": "<a id='comment:34'></a>Merge failure on top of:\n\n3b7d542342 Trac #33916: tweak tox.ini: activate more pycodestyle checks in cython files\n\n7c9c0f7a21 Trac #33910: installing jupyterlab causes sagelib rebuild\n\n3af284d113 Trac #33905: pep and other details in dynamics\n\n9a586e259b Trac #33901: sage-bootstrap-python doesn't work when pyenv shadows all usable pythons in PATH\n\n221fee8ba0 Trac #33739: Migrate gitpod to conda\n\n24579c942f Trac #33601: Documentation: Add 'furo' theme\n\n490d27a212 Trac #32937: Drop Python 3.7 support in Sage 9.7\n\n24d7d6af87 Trac #31937: Update markupsafe to 2.1.1, jinja2 to 3.1.2\n\n4aedae2596 Trac #29941: Modularization of sagelib: Break out separate packages sagemath-environment, sagemath-repl\n\n70ec4e67ab Trac #25872: Modular decomposition bug\n\n5fb2a6ea44 Updated [SageMath](SageMath) version to 9.7.beta1\n\n\n\nmerge was not clean: conflicts in build/pkgs/mathjax/SPKG.rst",
    "created_at": "2022-05-27T19:39:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615581",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:34'></a>Merge failure on top of:

3b7d542342 Trac #33916: tweak tox.ini: activate more pycodestyle checks in cython files

7c9c0f7a21 Trac #33910: installing jupyterlab causes sagelib rebuild

3af284d113 Trac #33905: pep and other details in dynamics

9a586e259b Trac #33901: sage-bootstrap-python doesn't work when pyenv shadows all usable pythons in PATH

221fee8ba0 Trac #33739: Migrate gitpod to conda

24579c942f Trac #33601: Documentation: Add 'furo' theme

490d27a212 Trac #32937: Drop Python 3.7 support in Sage 9.7

24d7d6af87 Trac #31937: Update markupsafe to 2.1.1, jinja2 to 3.1.2

4aedae2596 Trac #29941: Modularization of sagelib: Break out separate packages sagemath-environment, sagemath-repl

70ec4e67ab Trac #25872: Modular decomposition bug

5fb2a6ea44 Updated [SageMath](SageMath) version to 9.7.beta1



merge was not clean: conflicts in build/pkgs/mathjax/SPKG.rst



---

archive/issue_comments_615582.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2022-05-27T19:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615582",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_615583.json:
```json
{
    "body": "Changing commit from \"18593eccdf417e07094384c32f455c08540415a6\" to \"c359f6b3ca3e05ecf6f5f8ee76d429e997829089\"",
    "created_at": "2022-05-27T19:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615583",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "18593eccdf417e07094384c32f455c08540415a6" to "c359f6b3ca3e05ecf6f5f8ee76d429e997829089"



---

archive/issue_comments_615584.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#33601\"",
    "created_at": "2022-05-27T19:53:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615584",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#33601"



---

archive/issue_comments_615585.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2022-05-27T19:53:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615585",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_615586.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/build_bin_sage_spkg_info__format_dependencies_file__remove_redundant__dependencies__sections_from_spkg_rst\" to \"c359f6b3ca3e05ecf6f5f8ee76d429e997829089\"",
    "created_at": "2022-05-29T11:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615586",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/build_bin_sage_spkg_info__format_dependencies_file__remove_redundant__dependencies__sections_from_spkg_rst" to "c359f6b3ca3e05ecf6f5f8ee76d429e997829089"



---

archive/issue_comments_615587.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-05-29T11:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31017#issuecomment-615587",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_081011.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-29T11:28:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31017",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31017#event-81011"
}
```
