# Issue 31372: Remove GAP, PARI, Singular Jupyter kernels from Docker image

archive/issues_031135.json:
```json
{
    "body": "(from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)\n\n`pari_jupyter` is not compatible with Python 3.9,\nbreaks Docker build on [GitLab](GitLab).\n\nReported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9\n\nGiven that, we simplify our `Dockerfile` to skip\nthree optional packages it used to install:\n`gap_jupyter`, `pari_jupyter`, `singular_jupyter`.\n\n\n**CC:**  @fchapoton @kiwifb @antonio-rojas @videlec\n\n**Branch:** [2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9](https://github.com/sagemath/sagetrac-mirror/commit/2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9)\n\n**Upstream:** Reported upstream. No feedback yet.\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** Matthias Koeppe\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31372\n\n",
    "closed_at": "2021-03-01T00:21:16Z",
    "created_at": "2021-02-10T05:36:36Z",
    "labels": [
        "component: packages: optional",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Remove GAP, PARI, Singular Jupyter kernels from Docker image",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31372",
    "user": "https://github.com/mkoeppe"
}
```
(from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)

`pari_jupyter` is not compatible with Python 3.9,
breaks Docker build on [GitLab](GitLab).

Reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9

Given that, we simplify our `Dockerfile` to skip
three optional packages it used to install:
`gap_jupyter`, `pari_jupyter`, `singular_jupyter`.


**CC:**  @fchapoton @kiwifb @antonio-rojas @videlec

**Branch:** [2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9](https://github.com/sagemath/sagetrac-mirror/commit/2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9)

**Upstream:** Reported upstream. No feedback yet.

**Reviewer:** Frédéric Chapoton

**Author:** Matthias Koeppe

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/31372





---

archive/issue_comments_623143.json:
```json
{
    "body": "**Changing upstream** from \"N/A\" to \"Reported upstream. No feedback yet.\".",
    "created_at": "2021-02-10T19:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623143",
    "user": "https://github.com/mkoeppe"
}
```

**Changing upstream** from "N/A" to "Reported upstream. No feedback yet.".



---

archive/issue_comments_623144.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n (from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)\n+\n+reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9\n``````\n",
    "created_at": "2021-02-10T19:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623144",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 (from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)
+
+reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9
``````




---

archive/issue_comments_623145.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/pari_jupyter_is_not_compatible_with_python_3_9__breaks_docker_build_on_gitlab](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pari_jupyter_is_not_compatible_with_python_3_9__breaks_docker_build_on_gitlab)",
    "created_at": "2021-02-10T19:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623145",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/pari_jupyter_is_not_compatible_with_python_3_9__breaks_docker_build_on_gitlab](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pari_jupyter_is_not_compatible_with_python_3_9__breaks_docker_build_on_gitlab)



---

archive/issue_comments_623146.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n (from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)\n \n reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9\n+\n+As a fix, we remove the step that tries to install 3 optional packages that the `Dockerfile` installs in addition to standard packages.\n+\n``````\n",
    "created_at": "2021-02-10T19:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623146",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
 (from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)
 
 reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9
+
+As a fix, we remove the step that tries to install 3 optional packages that the `Dockerfile` installs in addition to standard packages.
+
``````




---

archive/issue_comments_623147.json:
```json
{
    "body": "<a id='comment:3'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9\">2cbfe78</a></td><td><code>docker/Dockerfile: Do not reinstall standard packages with pip; do not install optional packages</code></td></tr></table>\n",
    "created_at": "2021-02-10T19:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623147",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9">2cbfe78</a></td><td><code>docker/Dockerfile: Do not reinstall standard packages with pip; do not install optional packages</code></td></tr></table>




---

archive/issue_comments_623148.json:
```json
{
    "body": "**Commit:** [2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9](https://github.com/sagemath/sagetrac-mirror/commit/2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9)",
    "created_at": "2021-02-10T19:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623148",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9](https://github.com/sagemath/sagetrac-mirror/commit/2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9)



---

archive/issue_comments_623149.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2021-02-10T19:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623149",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_623150.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2021-02-10T19:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623150",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_623151.json:
```json
{
    "body": "<a id='comment:4'></a>\nNeeds review.",
    "created_at": "2021-02-12T17:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623151",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
Needs review.



---

archive/issue_comments_623152.json:
```json
{
    "body": "<a id='comment:5'></a>\nI would prefer to comment out the line, with the idea to put it back when/if this is fixed",
    "created_at": "2021-02-14T16:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623152",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
I would prefer to comment out the line, with the idea to put it back when/if this is fixed



---

archive/issue_comments_623153.json:
```json
{
    "body": "<a id='comment:6'></a>\nI removed them because they are optional packages, and I don't think the docker image should install them by default.  If these packages should be present in every installation, someone should make the case for them to be standard packages -- which will ensure that they are actually tested.",
    "created_at": "2021-02-14T16:43:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623153",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
I removed them because they are optional packages, and I don't think the docker image should install them by default.  If these packages should be present in every installation, someone should make the case for them to be standard packages -- which will ensure that they are actually tested.



---

archive/issue_comments_623154.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2021-02-14T17:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623154",
    "user": "https://github.com/fchapoton"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_comments_623155.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-02-14T17:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623155",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_623156.json:
```json
{
    "body": "<a id='comment:7'></a>\nok",
    "created_at": "2021-02-14T17:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623156",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
ok



---

archive/issue_comments_623157.json:
```json
{
    "body": "<a id='comment:8'></a>\nThanks!",
    "created_at": "2021-02-14T17:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623157",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Thanks!



---

archive/issue_comments_623158.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,11 @@\n (from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)\n \n-reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9\n+`pari_jupyter` is not compatible with Python 3.9,\n+breaks Docker build on [GitLab](GitLab).\n \n-As a fix, we remove the step that tries to install 3 optional packages that the `Dockerfile` installs in addition to standard packages.\n+Reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9\n \n+As a fix, we simplify our `Dockerfile` by no longer\n+installing the 3 optional packages `gap_jupyter`,\n+`pari_jupyter`, `singular_jupyter` that the in addition to standard packages.\n+\n``````\n",
    "created_at": "2021-02-21T20:30:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623158",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,11 @@
 (from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)
 
-reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9
+`pari_jupyter` is not compatible with Python 3.9,
+breaks Docker build on [GitLab](GitLab).
 
-As a fix, we remove the step that tries to install 3 optional packages that the `Dockerfile` installs in addition to standard packages.
+Reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9
 
+As a fix, we simplify our `Dockerfile` by no longer
+installing the 3 optional packages `gap_jupyter`,
+`pari_jupyter`, `singular_jupyter` that the in addition to standard packages.
+
``````




---

archive/issue_events_092547.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "rename": {
        "from": "pari_jupyter is not compatible with python 3.9, breaks docker build on gitlab",
        "to": "Remove GAP, PARI, Singular Jupyter kernels from Docker image"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31372#event-92547"
}
```



---

archive/issue_comments_623159.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n \n Reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9\n \n-As a fix, we simplify our `Dockerfile` by no longer\n-installing the 3 optional packages `gap_jupyter`,\n-`pari_jupyter`, `singular_jupyter` that the in addition to standard packages.\n+Given that, we simplify our `Dockerfile` to skip\n+three optional packages it used to install:\n+`gap_jupyter`, `pari_jupyter`, `singular_jupyter`.\n \n``````\n",
    "created_at": "2021-02-21T22:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623159",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 
 Reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9
 
-As a fix, we simplify our `Dockerfile` by no longer
-installing the 3 optional packages `gap_jupyter`,
-`pari_jupyter`, `singular_jupyter` that the in addition to standard packages.
+Given that, we simplify our `Dockerfile` to skip
+three optional packages it used to install:
+`gap_jupyter`, `pari_jupyter`, `singular_jupyter`.
 
``````




---

archive/issue_comments_623160.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/pari_jupyter_is_not_compatible_with_python_3_9__breaks_docker_build_on_gitlab](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pari_jupyter_is_not_compatible_with_python_3_9__breaks_docker_build_on_gitlab)\" to \"[2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9](https://github.com/sagemath/sagetrac-mirror/commit/2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9)\".",
    "created_at": "2021-03-01T00:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623160",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/pari_jupyter_is_not_compatible_with_python_3_9__breaks_docker_build_on_gitlab](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/pari_jupyter_is_not_compatible_with_python_3_9__breaks_docker_build_on_gitlab)" to "[2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9](https://github.com/sagemath/sagetrac-mirror/commit/2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9)".



---

archive/issue_comments_623161.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2021-03-01T00:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623161",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_events_092548.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-01T00:21:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31372#event-92548"
}
```



---

archive/issue_comments_623162.json:
```json
{
    "body": "**Changing commit** from \"[2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9](https://github.com/sagemath/sagetrac-mirror/commit/2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9)\" to \"\".",
    "created_at": "2021-04-08T10:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623162",
    "user": "https://github.com/slel"
}
```

**Changing commit** from "[2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9](https://github.com/sagemath/sagetrac-mirror/commit/2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9)" to "".



---

archive/issue_comments_623163.json:
```json
{
    "body": "<a id='comment:12'></a>\nSome pointers as we stop shipping the GAP, PARI\nand Singular Jupyter kernels in our Docker image.\n\nThe repo for the GAP Jupyter kernel is at:\n\n- https://github.com/gap-packages/JupyterKernel\n\nTo try GAP with Jupyter online, see:\n\n- https://github.com/gap-system/try-gap-in-jupyter\n\nThe repo for the PARI Jupyter kernel is at:\n\n- - https://github.com/jdemeyer/pari_jupyter\n\nSolving the issue that broke things here is tracked at:\n\n- https://github.com/jdemeyer/pari_jupyter/issues/9\n\nSee also \"Run PARI/GP in your browser\" including WebAssembly version:\n\n- http://pari.math.u-bordeaux.fr/gp.html\n\nThe repo for the Singular Jupyter kernel is at:\n\n- https://github.com/sebasguts/jupyter_kernel_singular\n\nSee also the documentation page:\n\n- https://www.singular.uni-kl.de/index.php/graphical-interface.html",
    "created_at": "2021-04-08T10:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-623163",
    "user": "https://github.com/slel"
}
```

<a id='comment:12'></a>
Some pointers as we stop shipping the GAP, PARI
and Singular Jupyter kernels in our Docker image.

The repo for the GAP Jupyter kernel is at:

- https://github.com/gap-packages/JupyterKernel

To try GAP with Jupyter online, see:

- https://github.com/gap-system/try-gap-in-jupyter

The repo for the PARI Jupyter kernel is at:

- - https://github.com/jdemeyer/pari_jupyter

Solving the issue that broke things here is tracked at:

- https://github.com/jdemeyer/pari_jupyter/issues/9

See also "Run PARI/GP in your browser" including WebAssembly version:

- http://pari.math.u-bordeaux.fr/gp.html

The repo for the Singular Jupyter kernel is at:

- https://github.com/sebasguts/jupyter_kernel_singular

See also the documentation page:

- https://www.singular.uni-kl.de/index.php/graphical-interface.html
