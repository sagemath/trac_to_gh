# Issue 31372: Remove GAP, PARI, Singular Jupyter kernels from Docker image

archive/issues_031135.json:
```json
{
    "body": "(from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)\n\n`pari_jupyter` is not compatible with Python 3.9,\nbreaks Docker build on [GitLab](GitLab).\n\nReported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9\n\nGiven that, we simplify our `Dockerfile` to skip\nthree optional packages it used to install:\n`gap_jupyter`, `pari_jupyter`, `singular_jupyter`.\n\n\nCC:  @fchapoton @kiwifb @antonio-rojas @videlec\n\nUpstream: Reported upstream. No feedback yet.\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Matthias Koeppe\n\nBranch: 2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31372\n\n",
    "closed_at": "2021-03-01T00:21:16Z",
    "created_at": "2021-02-10T05:36:36Z",
    "labels": [
        "component: packages: optional",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Remove GAP, PARI, Singular Jupyter kernels from Docker image",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31372",
    "user": "https://github.com/mkoeppe"
}
```
(from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)

`pari_jupyter` is not compatible with Python 3.9,
breaks Docker build on [GitLab](GitLab).

Reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9

Given that, we simplify our `Dockerfile` to skip
three optional packages it used to install:
`gap_jupyter`, `pari_jupyter`, `singular_jupyter`.


CC:  @fchapoton @kiwifb @antonio-rojas @videlec

Upstream: Reported upstream. No feedback yet.

Reviewer: Frédéric Chapoton

Author: Matthias Koeppe

Branch: 2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31372





---

archive/issue_comments_622744.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Reported upstream. No feedback yet.\"",
    "created_at": "2021-02-10T19:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622744",
    "user": "https://github.com/mkoeppe"
}
```

Changing upstream from "N/A" to "Reported upstream. No feedback yet."



---

archive/issue_comments_622745.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n (from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)\n+\n+reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9\n``````\n",
    "created_at": "2021-02-10T19:06:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622745",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 (from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)
+
+reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9
``````




---

archive/issue_comments_622746.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/pari_jupyter_is_not_compatible_with_python_3_9__breaks_docker_build_on_gitlab\"",
    "created_at": "2021-02-10T19:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622746",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/pari_jupyter_is_not_compatible_with_python_3_9__breaks_docker_build_on_gitlab"



---

archive/issue_comments_622747.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n (from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)\n \n reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9\n+\n+As a fix, we remove the step that tries to install 3 optional packages that the `Dockerfile` installs in addition to standard packages.\n+\n``````\n",
    "created_at": "2021-02-10T19:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622747",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
 (from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)
 
 reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9
+
+As a fix, we remove the step that tries to install 3 optional packages that the `Dockerfile` installs in addition to standard packages.
+
``````




---

archive/issue_comments_622748.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                                                                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|\n|[2cbfe78](https://git.sagemath.org/sage.git/commit?id=2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9)|`docker/Dockerfile: Do not reinstall standard packages with pip; do not install optional packages`|",
    "created_at": "2021-02-10T19:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622748",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                                                                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
|[2cbfe78](https://git.sagemath.org/sage.git/commit?id=2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9)|`docker/Dockerfile: Do not reinstall standard packages with pip; do not install optional packages`|



---

archive/issue_comments_622749.json:
```json
{
    "body": "Changing commit from \"\" to \"2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9\"",
    "created_at": "2021-02-10T19:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622749",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9"



---

archive/issue_comments_622750.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-02-10T19:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622750",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_622751.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-02-10T19:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622751",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_622752.json:
```json
{
    "body": "<a id='comment:4'></a>\nNeeds review.",
    "created_at": "2021-02-12T17:03:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622752",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
Needs review.



---

archive/issue_comments_622753.json:
```json
{
    "body": "<a id='comment:5'></a>\nI would prefer to comment out the line, with the idea to put it back when/if this is fixed",
    "created_at": "2021-02-14T16:34:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622753",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
I would prefer to comment out the line, with the idea to put it back when/if this is fixed



---

archive/issue_comments_622754.json:
```json
{
    "body": "<a id='comment:6'></a>\nI removed them because they are optional packages, and I don't think the docker image should install them by default.  If these packages should be present in every installation, someone should make the case for them to be standard packages -- which will ensure that they are actually tested.",
    "created_at": "2021-02-14T16:43:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622754",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
I removed them because they are optional packages, and I don't think the docker image should install them by default.  If these packages should be present in every installation, someone should make the case for them to be standard packages -- which will ensure that they are actually tested.



---

archive/issue_comments_622755.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2021-02-14T17:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622755",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_622756.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-02-14T17:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622756",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_622757.json:
```json
{
    "body": "<a id='comment:7'></a>\nok",
    "created_at": "2021-02-14T17:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622757",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
ok



---

archive/issue_comments_622758.json:
```json
{
    "body": "<a id='comment:8'></a>\nThanks!",
    "created_at": "2021-02-14T17:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622758",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Thanks!



---

archive/issue_comments_622759.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,11 @@\n (from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)\n \n-reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9\n+`pari_jupyter` is not compatible with Python 3.9,\n+breaks Docker build on [GitLab](GitLab).\n \n-As a fix, we remove the step that tries to install 3 optional packages that the `Dockerfile` installs in addition to standard packages.\n+Reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9\n \n+As a fix, we simplify our `Dockerfile` by no longer\n+installing the 3 optional packages `gap_jupyter`,\n+`pari_jupyter`, `singular_jupyter` that the in addition to standard packages.\n+\n``````\n",
    "created_at": "2021-02-21T20:30:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622759",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,11 @@
 (from https://groups.google.com/g/sage-release/c/hVIsURxpdhc/m/0h-_jT6mCQAJ)
 
-reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9
+`pari_jupyter` is not compatible with Python 3.9,
+breaks Docker build on [GitLab](GitLab).
 
-As a fix, we remove the step that tries to install 3 optional packages that the `Dockerfile` installs in addition to standard packages.
+Reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9
 
+As a fix, we simplify our `Dockerfile` by no longer
+installing the 3 optional packages `gap_jupyter`,
+`pari_jupyter`, `singular_jupyter` that the in addition to standard packages.
+
``````




---

archive/issue_comments_622760.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n \n Reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9\n \n-As a fix, we simplify our `Dockerfile` by no longer\n-installing the 3 optional packages `gap_jupyter`,\n-`pari_jupyter`, `singular_jupyter` that the in addition to standard packages.\n+Given that, we simplify our `Dockerfile` to skip\n+three optional packages it used to install:\n+`gap_jupyter`, `pari_jupyter`, `singular_jupyter`.\n \n``````\n",
    "created_at": "2021-02-21T22:57:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622760",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 
 Reported upstream at https://github.com/jdemeyer/pari_jupyter/issues/9
 
-As a fix, we simplify our `Dockerfile` by no longer
-installing the 3 optional packages `gap_jupyter`,
-`pari_jupyter`, `singular_jupyter` that the in addition to standard packages.
+Given that, we simplify our `Dockerfile` to skip
+three optional packages it used to install:
+`gap_jupyter`, `pari_jupyter`, `singular_jupyter`.
 
``````




---

archive/issue_comments_622761.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/pari_jupyter_is_not_compatible_with_python_3_9__breaks_docker_build_on_gitlab\" to \"2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9\"",
    "created_at": "2021-03-01T00:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622761",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/pari_jupyter_is_not_compatible_with_python_3_9__breaks_docker_build_on_gitlab" to "2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9"



---

archive/issue_comments_622762.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-03-01T00:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622762",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_082193.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-01T00:21:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31372#event-82193"
}
```



---

archive/issue_comments_622763.json:
```json
{
    "body": "Changing commit from \"2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9\" to \"\"",
    "created_at": "2021-04-08T10:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622763",
    "user": "https://github.com/slel"
}
```

Changing commit from "2cbfe787ddc1921d9e5880e8b73d903ac4bde8e9" to ""



---

archive/issue_comments_622764.json:
```json
{
    "body": "<a id='comment:12'></a>\nSome pointers as we stop shipping the GAP, PARI\nand Singular Jupyter kernels in our Docker image.\n\nThe repo for the GAP Jupyter kernel is at:\n\n- https://github.com/gap-packages/JupyterKernel\n\nTo try GAP with Jupyter online, see:\n\n- https://github.com/gap-system/try-gap-in-jupyter\n\nThe repo for the PARI Jupyter kernel is at:\n\n- - https://github.com/jdemeyer/pari_jupyter\n\nSolving the issue that broke things here is tracked at:\n\n- https://github.com/jdemeyer/pari_jupyter/issues/9\n\nSee also \"Run PARI/GP in your browser\" including WebAssembly version:\n\n- http://pari.math.u-bordeaux.fr/gp.html\n\nThe repo for the Singular Jupyter kernel is at:\n\n- https://github.com/sebasguts/jupyter_kernel_singular\n\nSee also the documentation page:\n\n- https://www.singular.uni-kl.de/index.php/graphical-interface.html",
    "created_at": "2021-04-08T10:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31372",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31372#issuecomment-622764",
    "user": "https://github.com/slel"
}
```

<a id='comment:12'></a>
Some pointers as we stop shipping the GAP, PARI
and Singular Jupyter kernels in our Docker image.

The repo for the GAP Jupyter kernel is at:

- https://github.com/gap-packages/JupyterKernel

To try GAP with Jupyter online, see:

- https://github.com/gap-system/try-gap-in-jupyter

The repo for the PARI Jupyter kernel is at:

- - https://github.com/jdemeyer/pari_jupyter

Solving the issue that broke things here is tracked at:

- https://github.com/jdemeyer/pari_jupyter/issues/9

See also "Run PARI/GP in your browser" including WebAssembly version:

- http://pari.math.u-bordeaux.fr/gp.html

The repo for the Singular Jupyter kernel is at:

- https://github.com/sebasguts/jupyter_kernel_singular

See also the documentation page:

- https://www.singular.uni-kl.de/index.php/graphical-interface.html
