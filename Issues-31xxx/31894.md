# Issue 31894: Refine categories of Chart objects, add method codomain

archive/issues_031657.json:
```json
{
    "assignees": [],
    "body": "Currently:\n\n```\nsage: M = Manifold(2, 'R^2', structure='topological')\nsage: c_cart.<x,y> = M.chart() # Cartesian coordinates on R^2\nsage: c_cart.category()\nCategory of objects\n```\nA `Chart` instance (with non-periodic coordinates) is a continuous map from its domain to `R^n`. This should be reflected in the category.\n\nWith this ticket:\n\n```\nsage: M = Manifold(2, 'R^2', structure='topological') \nsage: c_cart.<x,y> = M.chart() # Cartesian coordinates on R^2 \nsage: c_cart.category() \nCategory of elements of \n Set of Morphisms \n  from 2-dimensional topological manifold R^2 \n  to Vector space of dimension 2 over Real Field with 53 bits of precision \n  in Category of sets\n```\n\nAlso:\n\n```\nsage: M = Manifold(2, 'M', field='complex', structure='topological') \nsage: X.<x,y> = M.chart(coord_restrictions=lambda x,y: [abs(x)<1, y!=0]) \nsage: X.codomain()                                                                                                                                                                                   \n{ (x, y) \u2208 Vector space of dimension 2 over Complex Field with 53 bits of precision : abs(x) < 1, y != 0 }\n```\n\nTo put the map in a better category than `Sets` will need some follow-up tickets.\n\nDepends on #32009\n\nDepends on #32116\n\nDepends on #32089\n\nDepends on #32102\n\nDepends on #25644\n\n**CC:**  @egourgoulhon @tscrim @mjungmath\n\n**Branch:** [u/mkoeppe/refine_categories_of_chart_objects__add_method_codomain](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/refine_categories_of_chart_objects__add_method_codomain)\n\n**Commit:** [89039b2f942e8751bbd3722c0a2b7449214e664e](https://github.com/sagemath/sagetrac-mirror/commit/89039b2f942e8751bbd3722c0a2b7449214e664e)\n\n**Author:** Matthias Koeppe\n\nIssue created by migration from https://trac.sagemath.org/ticket/31894\n\n",
    "created_at": "2021-06-02T02:05:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20manifolds",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20info"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Refine categories of Chart objects, add method codomain",
    "type": "issue",
    "updated_at": "2022-08-31T05:25:02Z",
    "url": "https://github.com/sagemath/sage/issues/31894",
    "user": "https://github.com/mkoeppe"
}
```
Currently:

```
sage: M = Manifold(2, 'R^2', structure='topological')
sage: c_cart.<x,y> = M.chart() # Cartesian coordinates on R^2
sage: c_cart.category()
Category of objects
```
A `Chart` instance (with non-periodic coordinates) is a continuous map from its domain to `R^n`. This should be reflected in the category.

With this ticket:

```
sage: M = Manifold(2, 'R^2', structure='topological') 
sage: c_cart.<x,y> = M.chart() # Cartesian coordinates on R^2 
sage: c_cart.category() 
Category of elements of 
 Set of Morphisms 
  from 2-dimensional topological manifold R^2 
  to Vector space of dimension 2 over Real Field with 53 bits of precision 
  in Category of sets
```

Also:

```
sage: M = Manifold(2, 'M', field='complex', structure='topological') 
sage: X.<x,y> = M.chart(coord_restrictions=lambda x,y: [abs(x)<1, y!=0]) 
sage: X.codomain()                                                                                                                                                                                   
{ (x, y) âˆˆ Vector space of dimension 2 over Complex Field with 53 bits of precision : abs(x) < 1, y != 0 }
```

To put the map in a better category than `Sets` will need some follow-up tickets.

Depends on #32009

Depends on #32116

Depends on #32089

Depends on #32102

Depends on #25644

**CC:**  @egourgoulhon @tscrim @mjungmath

**Branch:** [u/mkoeppe/refine_categories_of_chart_objects__add_method_codomain](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/refine_categories_of_chart_objects__add_method_codomain)

**Commit:** [89039b2f942e8751bbd3722c0a2b7449214e664e](https://github.com/sagemath/sagetrac-mirror/commit/89039b2f942e8751bbd3722c0a2b7449214e664e)

**Author:** Matthias Koeppe

Issue created by migration from https://trac.sagemath.org/ticket/31894





---

archive/issue_events_387069.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-02T02:05:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387069"
}
```



---

archive/issue_events_387070.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-02T02:05:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20manifolds",
    "label_color": "08517b",
    "label_name": "component: manifolds",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387070"
}
```



---

archive/issue_events_387071.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-02T02:05:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387071"
}
```



---

archive/issue_comments_515419.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -5,4 +5,4 @@\n sage: c_cart.category()\n Category of objects\n ```\n-A `Chart` instance is a continuous map from its domain to `R^n`. This should be reflected in the category\n+A `Chart` instance (with non-periodic coordinates) is a continuous map from its domain to `R^n`. This should be reflected in the category\n``````\n",
    "created_at": "2021-06-02T17:09:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515419",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -5,4 +5,4 @@
 sage: c_cart.category()
 Category of objects
 ```
-A `Chart` instance is a continuous map from its domain to `R^n`. This should be reflected in the category
+A `Chart` instance (with non-periodic coordinates) is a continuous map from its domain to `R^n`. This should be reflected in the category
``````




---

archive/issue_comments_515420.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/refine_categories_of_chart_objects__add_method_codomain](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/refine_categories_of_chart_objects__add_method_codomain)",
    "created_at": "2021-06-03T21:53:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515420",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/refine_categories_of_chart_objects__add_method_codomain](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/refine_categories_of_chart_objects__add_method_codomain)



---

archive/issue_comments_515421.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\nHere is an attempt; but there is a metaclass conflict between `Map` and `UniqueRepresentation` that I don't know how to resolve\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/759309b90b2ce7d29ecba7f1c0aee1b69f15b5a0\">759309b</a></td><td><code>Chart: Make it a Map</code></td></tr></table>\n",
    "created_at": "2021-06-03T21:55:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515421",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'>**Comment 4:**</a>
Here is an attempt; but there is a metaclass conflict between `Map` and `UniqueRepresentation` that I don't know how to resolve

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/759309b90b2ce7d29ecba7f1c0aee1b69f15b5a0">759309b</a></td><td><code>Chart: Make it a Map</code></td></tr></table>




---

archive/issue_comments_515422.json:
```json
{
    "body": "**Commit:** [759309b90b2ce7d29ecba7f1c0aee1b69f15b5a0](https://github.com/sagemath/sagetrac-mirror/commit/759309b90b2ce7d29ecba7f1c0aee1b69f15b5a0)",
    "created_at": "2021-06-03T21:55:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515422",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [759309b90b2ce7d29ecba7f1c0aee1b69f15b5a0](https://github.com/sagemath/sagetrac-mirror/commit/759309b90b2ce7d29ecba7f1c0aee1b69f15b5a0)



---

archive/issue_comments_515423.json:
```json
{
    "body": "**Dependencies:** #32009",
    "created_at": "2021-06-20T03:31:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515423",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #32009



---

archive/issue_comments_515424.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d5e7ba65d0c9aa507b8b2d846fb5ec4204c7bf4\">5d5e7ba</a></td><td><code>Chart: Make it a Map</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ba174cc014d892ab8defbb9453e847067af5b13\">8ba174c</a></td><td><code>Eliminate direct use of Chart._domain</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6070fd85a4964179849a12c69050d5f5149db21\">e6070fd</a></td><td><code>Merge #32009</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd199dc10bb169bacab6519ec361d48238a3b02c\">bd199dc</a></td><td><code>WIP Chart as a Map</code></td></tr></table>\n",
    "created_at": "2021-06-20T03:31:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515424",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>**Comment 6:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d5e7ba65d0c9aa507b8b2d846fb5ec4204c7bf4">5d5e7ba</a></td><td><code>Chart: Make it a Map</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ba174cc014d892ab8defbb9453e847067af5b13">8ba174c</a></td><td><code>Eliminate direct use of Chart._domain</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6070fd85a4964179849a12c69050d5f5149db21">e6070fd</a></td><td><code>Merge #32009</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd199dc10bb169bacab6519ec361d48238a3b02c">bd199dc</a></td><td><code>WIP Chart as a Map</code></td></tr></table>




---

archive/issue_comments_515425.json:
```json
{
    "body": "**Changing commit** from \"[759309b90b2ce7d29ecba7f1c0aee1b69f15b5a0](https://github.com/sagemath/sagetrac-mirror/commit/759309b90b2ce7d29ecba7f1c0aee1b69f15b5a0)\" to \"[bd199dc10bb169bacab6519ec361d48238a3b02c](https://github.com/sagemath/sagetrac-mirror/commit/bd199dc10bb169bacab6519ec361d48238a3b02c)\".",
    "created_at": "2021-06-20T03:31:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515425",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[759309b90b2ce7d29ecba7f1c0aee1b69f15b5a0](https://github.com/sagemath/sagetrac-mirror/commit/759309b90b2ce7d29ecba7f1c0aee1b69f15b5a0)" to "[bd199dc10bb169bacab6519ec361d48238a3b02c](https://github.com/sagemath/sagetrac-mirror/commit/bd199dc10bb169bacab6519ec361d48238a3b02c)".



---

archive/issue_comments_515426.json:
```json
{
    "body": "**Changing dependencies** from \"#32009\" to \"#31901, #32009\".",
    "created_at": "2021-06-20T05:14:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515426",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#32009" to "#31901, #32009".



---

archive/issue_comments_515427.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27433ccca04c6c5ab6c5224fdd5ef78fb0633fa0\">27433cc</a></td><td><code>Chart: Use WithEqualityById</code></td></tr></table>\n",
    "created_at": "2021-06-24T18:36:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515427",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>**Comment 8:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27433ccca04c6c5ab6c5224fdd5ef78fb0633fa0">27433cc</a></td><td><code>Chart: Use WithEqualityById</code></td></tr></table>




---

archive/issue_comments_515428.json:
```json
{
    "body": "**Changing commit** from \"[bd199dc10bb169bacab6519ec361d48238a3b02c](https://github.com/sagemath/sagetrac-mirror/commit/bd199dc10bb169bacab6519ec361d48238a3b02c)\" to \"[27433ccca04c6c5ab6c5224fdd5ef78fb0633fa0](https://github.com/sagemath/sagetrac-mirror/commit/27433ccca04c6c5ab6c5224fdd5ef78fb0633fa0)\".",
    "created_at": "2021-06-24T18:36:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515428",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[bd199dc10bb169bacab6519ec361d48238a3b02c](https://github.com/sagemath/sagetrac-mirror/commit/bd199dc10bb169bacab6519ec361d48238a3b02c)" to "[27433ccca04c6c5ab6c5224fdd5ef78fb0633fa0](https://github.com/sagemath/sagetrac-mirror/commit/27433ccca04c6c5ab6c5224fdd5ef78fb0633fa0)".



---

archive/issue_comments_515429.json:
```json
{
    "body": "**Work Issues:** redo on top of #32116",
    "created_at": "2021-07-03T20:03:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515429",
    "user": "https://github.com/mkoeppe"
}
```

**Work Issues:** redo on top of #32116



---

archive/issue_comments_515430.json:
```json
{
    "body": "**Changing work issues** from \"redo on top of #32116\" to \"redo on top of #32116, #32089\".",
    "created_at": "2021-07-03T20:03:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515430",
    "user": "https://github.com/mkoeppe"
}
```

**Changing work issues** from "redo on top of #32116" to "redo on top of #32116, #32089".



---

archive/issue_comments_515431.json:
```json
{
    "body": "**Changing dependencies** from \"#31901, #32009\" to \"#32009, #32116, #32089\".",
    "created_at": "2021-07-12T19:19:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515431",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#31901, #32009" to "#32009, #32116, #32089".



---

archive/issue_comments_515432.json:
```json
{
    "body": "**Changing dependencies** from \"#32009, #32116, #32089\" to \"#32009, #32116, #32089, #32102\".",
    "created_at": "2021-07-12T21:16:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515432",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#32009, #32116, #32089" to "#32009, #32116, #32089, #32102".



---

archive/issue_comments_515433.json:
```json
{
    "body": "**Changing work issues** from \"redo on top of #32116, #32089\" to \"\".",
    "created_at": "2021-07-12T21:16:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515433",
    "user": "https://github.com/mkoeppe"
}
```

**Changing work issues** from "redo on top of #32116, #32089" to "".



---

archive/issue_comments_515434.json:
```json
{
    "body": "**Changing commit** from \"[27433ccca04c6c5ab6c5224fdd5ef78fb0633fa0](https://github.com/sagemath/sagetrac-mirror/commit/27433ccca04c6c5ab6c5224fdd5ef78fb0633fa0)\" to \"[9626b54680996ae949d8b1d5b27d45dcc423d075](https://github.com/sagemath/sagetrac-mirror/commit/9626b54680996ae949d8b1d5b27d45dcc423d075)\".",
    "created_at": "2021-07-12T21:28:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515434",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[27433ccca04c6c5ab6c5224fdd5ef78fb0633fa0](https://github.com/sagemath/sagetrac-mirror/commit/27433ccca04c6c5ab6c5224fdd5ef78fb0633fa0)" to "[9626b54680996ae949d8b1d5b27d45dcc423d075](https://github.com/sagemath/sagetrac-mirror/commit/9626b54680996ae949d8b1d5b27d45dcc423d075)".



---

archive/issue_comments_515435.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e63ff14b415d468ee43578c512fa48f7813f983\">0e63ff1</a></td><td><code>Merge #32116</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f66e4bc00b87b87196743273ec8108c3b86fada8\">f66e4bc</a></td><td><code>Merge #32116</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c003dba37f63144d36ec37109deb5b9dadeb9eb\">7c003db</a></td><td><code>Chart.__init__: Restore default of calc_method argument for consistency</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f85e71030990cea8ba757facbda9e725e11c47fe\">f85e710</a></td><td><code>Chart: in the description of the argument coord_restrictions, replace all instances of 'restrictions' by 'coord_restrictions'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80f6195ad1e9156516a45fdefdc183661b8c897c\">80f6195</a></td><td><code>Chart, RealChart: In class docstring, order arguments as they appear in __classcall__/__init__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a39e6fcd968af4a05c777357cdd470e61c244114\">a39e6fc</a></td><td><code>DiffChart, RealDiffChart: In class docstring, order arguments as they appear in __classcall__/__init__; add description of argument coord_restrictions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdf20b04b24497e66279b5b745f4ef1ca9e7b555\">cdf20b0</a></td><td><code>TopologicalManifold.chart: Add description of argument coord_restrictions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/741fd2e44276baaad155e2af6b9f2e7b4c1d9b82\">741fd2e</a></td><td><code>TopologicalManifold.chart: Add an example of using coord_restrictions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/141ccb5427686ca042815c19d9dc01d3a11ca873\">141ccb5</a></td><td><code>Merge #32009</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9626b54680996ae949d8b1d5b27d45dcc423d075\">9626b54</a></td><td><code>Merge #32102</code></td></tr></table>\n",
    "created_at": "2021-07-12T21:28:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515435",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>**Comment 13:**</a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e63ff14b415d468ee43578c512fa48f7813f983">0e63ff1</a></td><td><code>Merge #32116</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f66e4bc00b87b87196743273ec8108c3b86fada8">f66e4bc</a></td><td><code>Merge #32116</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c003dba37f63144d36ec37109deb5b9dadeb9eb">7c003db</a></td><td><code>Chart.__init__: Restore default of calc_method argument for consistency</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f85e71030990cea8ba757facbda9e725e11c47fe">f85e710</a></td><td><code>Chart: in the description of the argument coord_restrictions, replace all instances of 'restrictions' by 'coord_restrictions'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80f6195ad1e9156516a45fdefdc183661b8c897c">80f6195</a></td><td><code>Chart, RealChart: In class docstring, order arguments as they appear in __classcall__/__init__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a39e6fcd968af4a05c777357cdd470e61c244114">a39e6fc</a></td><td><code>DiffChart, RealDiffChart: In class docstring, order arguments as they appear in __classcall__/__init__; add description of argument coord_restrictions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdf20b04b24497e66279b5b745f4ef1ca9e7b555">cdf20b0</a></td><td><code>TopologicalManifold.chart: Add description of argument coord_restrictions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/741fd2e44276baaad155e2af6b9f2e7b4c1d9b82">741fd2e</a></td><td><code>TopologicalManifold.chart: Add an example of using coord_restrictions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/141ccb5427686ca042815c19d9dc01d3a11ca873">141ccb5</a></td><td><code>Merge #32009</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9626b54680996ae949d8b1d5b27d45dcc423d075">9626b54</a></td><td><code>Merge #32102</code></td></tr></table>




---

archive/issue_comments_515436.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e7020a6dd4a3ca9af036432db24784b5e0060f2\">4e7020a</a></td><td><code>TopologicalManifold._Hom_: Handle other categories</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac60cc5c1e37ea6014398110a4e8580eeb0342c9\">ac60cc5</a></td><td><code>Chart._restrict_set: Fix for empty inputs, set/frozenset inputs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce33546fb1bad3ebef7dbbc8a14c83cc583ff320\">ce33546</a></td><td><code>Chart: Make it a Map</code></td></tr></table>\n",
    "created_at": "2021-07-12T23:04:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515436",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>**Comment 14:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e7020a6dd4a3ca9af036432db24784b5e0060f2">4e7020a</a></td><td><code>TopologicalManifold._Hom_: Handle other categories</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac60cc5c1e37ea6014398110a4e8580eeb0342c9">ac60cc5</a></td><td><code>Chart._restrict_set: Fix for empty inputs, set/frozenset inputs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce33546fb1bad3ebef7dbbc8a14c83cc583ff320">ce33546</a></td><td><code>Chart: Make it a Map</code></td></tr></table>




---

archive/issue_comments_515437.json:
```json
{
    "body": "**Changing commit** from \"[9626b54680996ae949d8b1d5b27d45dcc423d075](https://github.com/sagemath/sagetrac-mirror/commit/9626b54680996ae949d8b1d5b27d45dcc423d075)\" to \"[ce33546fb1bad3ebef7dbbc8a14c83cc583ff320](https://github.com/sagemath/sagetrac-mirror/commit/ce33546fb1bad3ebef7dbbc8a14c83cc583ff320)\".",
    "created_at": "2021-07-12T23:04:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515437",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[9626b54680996ae949d8b1d5b27d45dcc423d075](https://github.com/sagemath/sagetrac-mirror/commit/9626b54680996ae949d8b1d5b27d45dcc423d075)" to "[ce33546fb1bad3ebef7dbbc8a14c83cc583ff320](https://github.com/sagemath/sagetrac-mirror/commit/ce33546fb1bad3ebef7dbbc8a14c83cc583ff320)".



---

archive/issue_comments_515438.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nThis is almost ready, except that a `Chart` does not have the correct element class of the Homset, so some `_test_category` tests are failing. Help with this would be very welcome.",
    "created_at": "2021-07-12T23:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515438",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'>**Comment 15:**</a>
This is almost ready, except that a `Chart` does not have the correct element class of the Homset, so some `_test_category` tests are failing. Help with this would be very welcome.



---

archive/issue_comments_515439.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2021-07-12T23:06:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515439",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_515440.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n+Currently:\n \n ```\n sage: M = Manifold(2, 'R^2', structure='topological')\n@@ -5,4 +6,28 @@\n sage: c_cart.category()\n Category of objects\n ```\n-A `Chart` instance (with non-periodic coordinates) is a continuous map from its domain to `R^n`. This should be reflected in the category\n+A `Chart` instance (with non-periodic coordinates) is a continuous map from its domain to `R^n`. This should be reflected in the category.\n+\n+With this ticket:\n+\n+```\n+sage: M = Manifold(2, 'R^2', structure='topological') \n+sage: c_cart.<x,y> = M.chart() # Cartesian coordinates on R^2 \n+sage: c_cart.category() \n+Category of elements of \n+ Set of Morphisms \n+  from 2-dimensional topological manifold R^2 \n+  to Vector space of dimension 2 over Real Field with 53 bits of precision \n+  in Category of sets\n+```\n+\n+Also:\n+\n+```\n+sage: M = Manifold(2, 'M', field='complex', structure='topological') \n+sage: X.<x,y> = M.chart(coord_restrictions=lambda x,y: [abs(x)<1, y!=0]) \n+sage: X.codomain()                                                                                                                                                                                   \n+{ (x, y) \u2208 Vector space of dimension 2 over Complex Field with 53 bits of precision : abs(x) < 1, y != 0 }\n+```\n+\n+To put the map in a better category than `Sets` will need some follow-up tickets.\n``````\n",
    "created_at": "2021-07-12T23:10:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515440",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
+Currently:
 
 ```
 sage: M = Manifold(2, 'R^2', structure='topological')
@@ -5,4 +6,28 @@
 sage: c_cart.category()
 Category of objects
 ```
-A `Chart` instance (with non-periodic coordinates) is a continuous map from its domain to `R^n`. This should be reflected in the category
+A `Chart` instance (with non-periodic coordinates) is a continuous map from its domain to `R^n`. This should be reflected in the category.
+
+With this ticket:
+
+```
+sage: M = Manifold(2, 'R^2', structure='topological') 
+sage: c_cart.<x,y> = M.chart() # Cartesian coordinates on R^2 
+sage: c_cart.category() 
+Category of elements of 
+ Set of Morphisms 
+  from 2-dimensional topological manifold R^2 
+  to Vector space of dimension 2 over Real Field with 53 bits of precision 
+  in Category of sets
+```
+
+Also:
+
+```
+sage: M = Manifold(2, 'M', field='complex', structure='topological') 
+sage: X.<x,y> = M.chart(coord_restrictions=lambda x,y: [abs(x)<1, y!=0]) 
+sage: X.codomain()                                                                                                                                                                                   
+{ (x, y) âˆˆ Vector space of dimension 2 over Complex Field with 53 bits of precision : abs(x) < 1, y != 0 }
+```
+
+To put the map in a better category than `Sets` will need some follow-up tickets.
``````




---

archive/issue_comments_515441.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nWe generally skip `_test_category` for `Homset` subclasses IIRC. They can often have multiple classes that are all elements because we need different implementations based on input types. We currently don't have a good system for dealing with parents with multiple element classes. `:/`",
    "created_at": "2021-07-12T23:11:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515441",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'>**Comment 17:**</a>
We generally skip `_test_category` for `Homset` subclasses IIRC. They can often have multiple classes that are all elements because we need different implementations based on input types. We currently don't have a good system for dealing with parents with multiple element classes. `:/`



---

archive/issue_comments_515442.json:
```json
{
    "body": "**Changing commit** from \"[ce33546fb1bad3ebef7dbbc8a14c83cc583ff320](https://github.com/sagemath/sagetrac-mirror/commit/ce33546fb1bad3ebef7dbbc8a14c83cc583ff320)\" to \"[728c3dfbf01c3e591be6fd3135b3db2d5bc34e00](https://github.com/sagemath/sagetrac-mirror/commit/728c3dfbf01c3e591be6fd3135b3db2d5bc34e00)\".",
    "created_at": "2021-07-13T01:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515442",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[ce33546fb1bad3ebef7dbbc8a14c83cc583ff320](https://github.com/sagemath/sagetrac-mirror/commit/ce33546fb1bad3ebef7dbbc8a14c83cc583ff320)" to "[728c3dfbf01c3e591be6fd3135b3db2d5bc34e00](https://github.com/sagemath/sagetrac-mirror/commit/728c3dfbf01c3e591be6fd3135b3db2d5bc34e00)".



---

archive/issue_comments_515443.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fff2a79b5936a2b354d80dca78612eee5301a701\">fff2a79</a></td><td><code>src/sage/sets/set.py: Fix docstring markup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ceafd067e2e6233f3734799845554d563003d9a\">1ceafd0</a></td><td><code>Merge #32013</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c89c69786b3d873ddb017c229d43bf129a388d16\">c89c697</a></td><td><code>Merge #32102</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/451f5cf5fb60611db32bf5fbcdecfec230c087f6\">451f5cf</a></td><td><code>Sets.ParentMethods: Update doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f135a05bd39d633e8ce5ed45cfe24d0eaf10bf5d\">f135a05</a></td><td><code>Merge #32015</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/728c3dfbf01c3e591be6fd3135b3db2d5bc34e00\">728c3df</a></td><td><code>Merge #32089</code></td></tr></table>\n",
    "created_at": "2021-07-13T01:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515443",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>**Comment 18:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fff2a79b5936a2b354d80dca78612eee5301a701">fff2a79</a></td><td><code>src/sage/sets/set.py: Fix docstring markup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ceafd067e2e6233f3734799845554d563003d9a">1ceafd0</a></td><td><code>Merge #32013</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c89c69786b3d873ddb017c229d43bf129a388d16">c89c697</a></td><td><code>Merge #32102</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/451f5cf5fb60611db32bf5fbcdecfec230c087f6">451f5cf</a></td><td><code>Sets.ParentMethods: Update doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f135a05bd39d633e8ce5ed45cfe24d0eaf10bf5d">f135a05</a></td><td><code>Merge #32015</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/728c3dfbf01c3e591be6fd3135b3db2d5bc34e00">728c3df</a></td><td><code>Merge #32089</code></td></tr></table>




---

archive/issue_comments_515444.json:
```json
{
    "body": "**Changing commit** from \"[728c3dfbf01c3e591be6fd3135b3db2d5bc34e00](https://github.com/sagemath/sagetrac-mirror/commit/728c3dfbf01c3e591be6fd3135b3db2d5bc34e00)\" to \"[9d19b215d003c57160d13ad17b6cef770945b5ee](https://github.com/sagemath/sagetrac-mirror/commit/9d19b215d003c57160d13ad17b6cef770945b5ee)\".",
    "created_at": "2021-07-13T01:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515444",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[728c3dfbf01c3e591be6fd3135b3db2d5bc34e00](https://github.com/sagemath/sagetrac-mirror/commit/728c3dfbf01c3e591be6fd3135b3db2d5bc34e00)" to "[9d19b215d003c57160d13ad17b6cef770945b5ee](https://github.com/sagemath/sagetrac-mirror/commit/9d19b215d003c57160d13ad17b6cef770945b5ee)".



---

archive/issue_comments_515445.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d19b215d003c57160d13ad17b6cef770945b5ee\">9d19b21</a></td><td><code>Chart, DiffChart: Skip _test_category</code></td></tr></table>\n",
    "created_at": "2021-07-13T01:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515445",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:19'>**Comment 19:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d19b215d003c57160d13ad17b6cef770945b5ee">9d19b21</a></td><td><code>Chart, DiffChart: Skip _test_category</code></td></tr></table>




---

archive/issue_comments_515446.json:
```json
{
    "body": "<a id='comment:20'>**Comment 20:**</a>\nReplying to [@tscrim](#comment%3A17):\n> We generally skip `_test_category` for `Homset` subclasses IIRC. They can often have multiple classes that are all elements because we need different implementations based on input types.\n\nThanks, that's a simple solution. Ready for review then",
    "created_at": "2021-07-13T01:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515446",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'>**Comment 20:**</a>
Replying to [@tscrim](#comment%3A17):
> We generally skip `_test_category` for `Homset` subclasses IIRC. They can often have multiple classes that are all elements because we need different implementations based on input types.

Thanks, that's a simple solution. Ready for review then



---

archive/issue_events_387072.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-13T01:07:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387072"
}
```



---

archive/issue_comments_515447.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d554f09be4e1c90d14c5da44a23d0523a43afe56\">d554f09</a></td><td><code>Chart.is_injective, is_surjective, inverse, ...</code></td></tr></table>\n",
    "created_at": "2021-07-13T04:16:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515447",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>**Comment 21:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d554f09be4e1c90d14c5da44a23d0523a43afe56">d554f09</a></td><td><code>Chart.is_injective, is_surjective, inverse, ...</code></td></tr></table>




---

archive/issue_comments_515448.json:
```json
{
    "body": "**Changing commit** from \"[9d19b215d003c57160d13ad17b6cef770945b5ee](https://github.com/sagemath/sagetrac-mirror/commit/9d19b215d003c57160d13ad17b6cef770945b5ee)\" to \"[d554f09be4e1c90d14c5da44a23d0523a43afe56](https://github.com/sagemath/sagetrac-mirror/commit/d554f09be4e1c90d14c5da44a23d0523a43afe56)\".",
    "created_at": "2021-07-13T04:16:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515448",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[9d19b215d003c57160d13ad17b6cef770945b5ee](https://github.com/sagemath/sagetrac-mirror/commit/9d19b215d003c57160d13ad17b6cef770945b5ee)" to "[d554f09be4e1c90d14c5da44a23d0523a43afe56](https://github.com/sagemath/sagetrac-mirror/commit/d554f09be4e1c90d14c5da44a23d0523a43afe56)".



---

archive/issue_events_387073.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-13T06:47:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387073"
}
```



---

archive/issue_events_387074.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-13T06:47:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387074"
}
```



---

archive/issue_comments_515449.json:
```json
{
    "body": "<a id='comment:23'>**Comment 23:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/acdb6a72596070154f7a724ede91758c1fd11159\">acdb6a7</a></td><td><code>Chart, ChartInverse._call_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/243fcfda7112c8372e2cbfab058aba5335b0aff5\">243fcfd</a></td><td><code>Periodic charts as sections</code></td></tr></table>\n",
    "created_at": "2021-07-13T07:39:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515449",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'>**Comment 23:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/acdb6a72596070154f7a724ede91758c1fd11159">acdb6a7</a></td><td><code>Chart, ChartInverse._call_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/243fcfda7112c8372e2cbfab058aba5335b0aff5">243fcfd</a></td><td><code>Periodic charts as sections</code></td></tr></table>




---

archive/issue_comments_515450.json:
```json
{
    "body": "**Changing commit** from \"[d554f09be4e1c90d14c5da44a23d0523a43afe56](https://github.com/sagemath/sagetrac-mirror/commit/d554f09be4e1c90d14c5da44a23d0523a43afe56)\" to \"[243fcfda7112c8372e2cbfab058aba5335b0aff5](https://github.com/sagemath/sagetrac-mirror/commit/243fcfda7112c8372e2cbfab058aba5335b0aff5)\".",
    "created_at": "2021-07-13T07:39:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515450",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[d554f09be4e1c90d14c5da44a23d0523a43afe56](https://github.com/sagemath/sagetrac-mirror/commit/d554f09be4e1c90d14c5da44a23d0523a43afe56)" to "[243fcfda7112c8372e2cbfab058aba5335b0aff5](https://github.com/sagemath/sagetrac-mirror/commit/243fcfda7112c8372e2cbfab058aba5335b0aff5)".



---

archive/issue_comments_515451.json:
```json
{
    "body": "<a id='comment:24'>**Comment 24:**</a>\nWhy is a periodic chart considered non-surjective but injective? Isn't it exactly the opposite?\n\nBesides, Travis suggested that periodic charts could be considered being proper charts but glued together [#31324@comment:25](https://github.com/sagemath/sage/issues/31324#comment:25). Maybe we can somehow incorporate this here?",
    "created_at": "2021-07-13T10:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515451",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:24'>**Comment 24:**</a>
Why is a periodic chart considered non-surjective but injective? Isn't it exactly the opposite?

Besides, Travis suggested that periodic charts could be considered being proper charts but glued together [#31324@comment:25](https://github.com/sagemath/sage/issues/31324#comment:25). Maybe we can somehow incorporate this here?



---

archive/issue_comments_515452.json:
```json
{
    "body": "<a id='comment:25'>**Comment 25:**</a>\nI have two possible variants:\n\n- as of [acdb6a7](https://github.com/sagemath/sagetrac-mirror/commit/acdb6a72596070154f7a724ede91758c1fd11159), the codomain of the `Chart` is a fundamental cell of the periodic coordinate space. Presumably the user declares the periodic coordinates in a way that the computed coordinates always lie in the fundamental domain. Corestricted like this, the chart is bijective, with a bijective `ChartInverse` as its inverse. But it does not capture the fact that one is also allowed to use coordinates outside of the fundamental domain to construct a point.\n\n- with [243fcfd](https://github.com/sagemath/sagetrac-mirror/commit/243fcfda7112c8372e2cbfab058aba5335b0aff5) + work in progress (not on the branch yet), the `ChartInverse` is a surjection from the full coordinate space to the chart's domain, and `Chart` is a section map of the `ChartInverse`.\n\nI don't know which of the two you would find preferable and also cannot speak to Travis' suggestion regarding possible changes to the design.",
    "created_at": "2021-07-13T16:04:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515452",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'>**Comment 25:**</a>
I have two possible variants:

- as of [acdb6a7](https://github.com/sagemath/sagetrac-mirror/commit/acdb6a72596070154f7a724ede91758c1fd11159), the codomain of the `Chart` is a fundamental cell of the periodic coordinate space. Presumably the user declares the periodic coordinates in a way that the computed coordinates always lie in the fundamental domain. Corestricted like this, the chart is bijective, with a bijective `ChartInverse` as its inverse. But it does not capture the fact that one is also allowed to use coordinates outside of the fundamental domain to construct a point.

- with [243fcfd](https://github.com/sagemath/sagetrac-mirror/commit/243fcfda7112c8372e2cbfab058aba5335b0aff5) + work in progress (not on the branch yet), the `ChartInverse` is a surjection from the full coordinate space to the chart's domain, and `Chart` is a section map of the `ChartInverse`.

I don't know which of the two you would find preferable and also cannot speak to Travis' suggestion regarding possible changes to the design.



---

archive/issue_comments_515453.json:
```json
{
    "body": "**Changing commit** from \"[243fcfda7112c8372e2cbfab058aba5335b0aff5](https://github.com/sagemath/sagetrac-mirror/commit/243fcfda7112c8372e2cbfab058aba5335b0aff5)\" to \"[c21f88473d0d45a1bb79ee0d1a8c167a3c80b2c8](https://github.com/sagemath/sagetrac-mirror/commit/c21f88473d0d45a1bb79ee0d1a8c167a3c80b2c8)\".",
    "created_at": "2021-07-13T17:37:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515453",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[243fcfda7112c8372e2cbfab058aba5335b0aff5](https://github.com/sagemath/sagetrac-mirror/commit/243fcfda7112c8372e2cbfab058aba5335b0aff5)" to "[c21f88473d0d45a1bb79ee0d1a8c167a3c80b2c8](https://github.com/sagemath/sagetrac-mirror/commit/c21f88473d0d45a1bb79ee0d1a8c167a3c80b2c8)".



---

archive/issue_comments_515454.json:
```json
{
    "body": "<a id='comment:26'>**Comment 26:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b76ddd7c348f611b5c451cae03c40097f9c8a5f3\">b76ddd7</a></td><td><code>Chart: Refactor through methods _init_coordinates, _codomain_set; remove _domain attribute</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c21f88473d0d45a1bb79ee0d1a8c167a3c80b2c8\">c21f884</a></td><td><code>Chart._codomain_set: Add option periodic_extension, use it to construct the domain of the ChartInverse</code></td></tr></table>\n",
    "created_at": "2021-07-13T17:37:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515454",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'>**Comment 26:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b76ddd7c348f611b5c451cae03c40097f9c8a5f3">b76ddd7</a></td><td><code>Chart: Refactor through methods _init_coordinates, _codomain_set; remove _domain attribute</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c21f88473d0d45a1bb79ee0d1a8c167a3c80b2c8">c21f884</a></td><td><code>Chart._codomain_set: Add option periodic_extension, use it to construct the domain of the ChartInverse</code></td></tr></table>




---

archive/issue_comments_515455.json:
```json
{
    "body": "<a id='comment:27'>**Comment 27:**</a>\nHere's a more complete version of the second variant.",
    "created_at": "2021-07-13T17:38:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515455",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'>**Comment 27:**</a>
Here's a more complete version of the second variant.



---

archive/issue_events_387075.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-13T17:38:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387075"
}
```



---

archive/issue_events_387076.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-13T17:38:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "008080",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387076"
}
```



---

archive/issue_comments_515456.json:
```json
{
    "body": "<a id='comment:29'>**Comment 29:**</a>\nI like the second variant. It better reflects the situation and what periodic charts actually are.\n\nThen it also makes sense that periodic charts (as maps from a manifold subset into a subset of R^n) are injective but non-surjective.",
    "created_at": "2021-07-13T20:18:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515456",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:29'>**Comment 29:**</a>
I like the second variant. It better reflects the situation and what periodic charts actually are.

Then it also makes sense that periodic charts (as maps from a manifold subset into a subset of R^n) are injective but non-surjective.



---

archive/issue_comments_515457.json:
```json
{
    "body": "<a id='comment:30'>**Comment 30:**</a>\nBut then we have to make a choice, right? The current situation is as follows (for example):\n\n```\nsage: S1 = manifolds.Sphere(1)\nsage: spher = S1.spherical_coordinates()\nsage: p = S1.point((pi,))\nsage: q = S1.point((-pi,))\nsage: spher(p)\n(pi,)\nsage: spher(q)\n(-pi,)\n```\n\nAt current stage, this is not a well-defined map.",
    "created_at": "2021-07-13T20:21:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515457",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:30'>**Comment 30:**</a>
But then we have to make a choice, right? The current situation is as follows (for example):

```
sage: S1 = manifolds.Sphere(1)
sage: spher = S1.spherical_coordinates()
sage: p = S1.point((pi,))
sage: q = S1.point((-pi,))
sage: spher(p)
(pi,)
sage: spher(q)
(-pi,)
```

At current stage, this is not a well-defined map.



---

archive/issue_comments_515458.json:
```json
{
    "body": "<a id='comment:31'>**Comment 31:**</a>\nThat's right, there's currently no code to normalize the coordinates",
    "created_at": "2021-07-13T20:47:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515458",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'>**Comment 31:**</a>
That's right, there's currently no code to normalize the coordinates



---

archive/issue_comments_515459.json:
```json
{
    "body": "<a id='comment:32'>**Comment 32:**</a>\nIt would all be easier if we had an implementation of `RR/ZZ` in Sage...",
    "created_at": "2021-07-13T20:49:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515459",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'>**Comment 32:**</a>
It would all be easier if we had an implementation of `RR/ZZ` in Sage...



---

archive/issue_comments_515460.json:
```json
{
    "body": "<a id='comment:33'>**Comment 33:**</a>\nReplying to [@mkoeppe](#comment%3A32):\n> It would all be easier if we had an implementation of `RR/ZZ` in Sage...\n\n...or even better topological quotient spaces.",
    "created_at": "2021-07-13T20:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515460",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:33'>**Comment 33:**</a>
Replying to [@mkoeppe](#comment%3A32):
> It would all be easier if we had an implementation of `RR/ZZ` in Sage...

...or even better topological quotient spaces.



---

archive/issue_comments_515461.json:
```json
{
    "body": "<a id='comment:34'>**Comment 34:**</a>\nOK, `QQ/ZZ` exists (`sage.groups.additive_abelian.qmodnz`), and we also have at least two incompatible implementations of lattices and their quotients in `sage.geometry.toric_lattice` and `sage.modules.free_module_integer`.  Perhaps also something in `sage.schemes` somewhere",
    "created_at": "2021-07-13T21:23:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515461",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'>**Comment 34:**</a>
OK, `QQ/ZZ` exists (`sage.groups.additive_abelian.qmodnz`), and we also have at least two incompatible implementations of lattices and their quotients in `sage.geometry.toric_lattice` and `sage.modules.free_module_integer`.  Perhaps also something in `sage.schemes` somewhere



---

archive/issue_comments_515462.json:
```json
{
    "body": "<a id='comment:35'>**Comment 35:**</a>\nWhat about abstract quotients in the spirit of #31644 and/or #31691?",
    "created_at": "2021-07-14T12:52:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515462",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:35'>**Comment 35:**</a>
What about abstract quotients in the spirit of #31644 and/or #31691?



---

archive/issue_comments_515463.json:
```json
{
    "body": "<a id='comment:36'>**Comment 36:**</a>\nWell, I have #32012 (Quotient of polyhedron or convex set by a lattice) but one has to be careful that things remain concrete enough to be useful, as the main point of the ticket is to make things more \"composable\".",
    "created_at": "2021-07-14T16:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515463",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'>**Comment 36:**</a>
Well, I have #32012 (Quotient of polyhedron or convex set by a lattice) but one has to be careful that things remain concrete enough to be useful, as the main point of the ticket is to make things more "composable".



---

archive/issue_comments_515464.json:
```json
{
    "body": "<a id='comment:37'>**Comment 37:**</a>\nPeriodic charts are always defined via (connected) intervals, aren't they? W.l.o.g. we can always choose the minimum/maximum the chart maps to? Alternatively, we can make a chart a bijection onto (cross products of) half-open intervals? Please correct me if I'm wrong.",
    "created_at": "2021-07-15T17:24:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515464",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:37'>**Comment 37:**</a>
Periodic charts are always defined via (connected) intervals, aren't they? W.l.o.g. we can always choose the minimum/maximum the chart maps to? Alternatively, we can make a chart a bijection onto (cross products of) half-open intervals? Please correct me if I'm wrong.



---

archive/issue_comments_515465.json:
```json
{
    "body": "<a id='comment:38'>**Comment 38:**</a>\nReplying to [@mjungmath](#comment%3A29):\n> I like the second variant. It better reflects the situation and what periodic charts actually are.\n\n+1",
    "created_at": "2021-07-18T17:09:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515465",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:38'>**Comment 38:**</a>
Replying to [@mjungmath](#comment%3A29):
> I like the second variant. It better reflects the situation and what periodic charts actually are.

+1



---

archive/issue_comments_515466.json:
```json
{
    "body": "<a id='comment:39'>**Comment 39:**</a>\nReplying to [@mjungmath](#comment%3A37):\n> Periodic charts are always defined via (connected) intervals, aren't they?\n\nYes I think so.\n\n> W.l.o.g. we can always choose the minimum/maximum the chart maps to? \n\nWhat do you mean?",
    "created_at": "2021-07-18T17:12:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515466",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:39'>**Comment 39:**</a>
Replying to [@mjungmath](#comment%3A37):
> Periodic charts are always defined via (connected) intervals, aren't they?

Yes I think so.

> W.l.o.g. we can always choose the minimum/maximum the chart maps to? 

What do you mean?



---

archive/issue_comments_515467.json:
```json
{
    "body": "<a id='comment:40'>**Comment 40:**</a>\nJust a word of context about periodic charts: they have been introduced because they are useful when computing a geodesic with some [numerical integrator](https://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/integrated_curve.html). Typically, when the geodesic is an orbit around some center, the azimuthal coordinate returned by the integrator increases without any bound, instead of being confined to [0, 2\\pi). Here are some [examples in Kerr spacetime](https://nbviewer.jupyter.org/github/egourgoulhon/BHLectures/blob/master/sage/Kerr_geod_plots.ipynb).",
    "created_at": "2021-07-18T17:23:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515467",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:40'>**Comment 40:**</a>
Just a word of context about periodic charts: they have been introduced because they are useful when computing a geodesic with some [numerical integrator](https://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/integrated_curve.html). Typically, when the geodesic is an orbit around some center, the azimuthal coordinate returned by the integrator increases without any bound, instead of being confined to [0, 2\pi). Here are some [examples in Kerr spacetime](https://nbviewer.jupyter.org/github/egourgoulhon/BHLectures/blob/master/sage/Kerr_geod_plots.ipynb).



---

archive/issue_comments_515468.json:
```json
{
    "body": "<a id='comment:41'>**Comment 41:**</a>\nReplying to [@egourgoulhon](#comment%3A38):\n> Replying to [@mjungmath](#comment%3A29):\n> > I like the second variant. It better reflects the situation and what periodic charts actually are.\n\n> +1\n\nOK, then it just remains to make it well-defined (comment:30, [comment:31](#comment%3A31))",
    "created_at": "2021-07-18T17:35:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515468",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'>**Comment 41:**</a>
Replying to [@egourgoulhon](#comment%3A38):
> Replying to [@mjungmath](#comment%3A29):
> > I like the second variant. It better reflects the situation and what periodic charts actually are.

> +1

OK, then it just remains to make it well-defined (comment:30, [comment:31](#comment%3A31))



---

archive/issue_comments_515469.json:
```json
{
    "body": "<a id='comment:42'>**Comment 42:**</a>\nShould `ManifoldPoint.add_coordinates` canonicalize the coordinates?\nOr should `ManifoldPoint.coordinates` do this?",
    "created_at": "2021-07-18T19:07:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515469",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:42'>**Comment 42:**</a>
Should `ManifoldPoint.add_coordinates` canonicalize the coordinates?
Or should `ManifoldPoint.coordinates` do this?



---

archive/issue_comments_515470.json:
```json
{
    "body": "<a id='comment:45'>**Comment 45:**</a>\nReplying to [@egourgoulhon](#comment%3A40):\n> Just a word of context about periodic charts: they have been introduced because they are useful when computing a geodesic with some [numerical integrator](https://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/integrated_curve.html). Typically, when the geodesic is an orbit around some center, the azimuthal coordinate returned by the integrator increases without any bound, instead of being confined to [0, 2\\pi). Here are some [examples in Kerr spacetime](https://nbviewer.jupyter.org/github/egourgoulhon/BHLectures/blob/master/sage/Kerr_geod_plots.ipynb).\n\nI'm sorry. What is the punchline here?",
    "created_at": "2021-07-18T19:21:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515470",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:45'>**Comment 45:**</a>
Replying to [@egourgoulhon](#comment%3A40):
> Just a word of context about periodic charts: they have been introduced because they are useful when computing a geodesic with some [numerical integrator](https://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/integrated_curve.html). Typically, when the geodesic is an orbit around some center, the azimuthal coordinate returned by the integrator increases without any bound, instead of being confined to [0, 2\pi). Here are some [examples in Kerr spacetime](https://nbviewer.jupyter.org/github/egourgoulhon/BHLectures/blob/master/sage/Kerr_geod_plots.ipynb).

I'm sorry. What is the punchline here?



---

archive/issue_comments_515471.json:
```json
{
    "body": "<a id='comment:46'>**Comment 46:**</a>\nJust forget what I just said. It didn't make sense. Sorry.",
    "created_at": "2021-07-18T19:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515471",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:46'>**Comment 46:**</a>
Just forget what I just said. It didn't make sense. Sorry.



---

archive/issue_comments_515472.json:
```json
{
    "body": "<a id='comment:47'>**Comment 47:**</a>\nReplying to [@egourgoulhon](#comment%3A39):\n> > W.l.o.g. we can always choose the minimum/maximum the chart maps to? \n\n> \n> What do you mean? \n\nWhat we can do is that the user has to state the fundamental domain (which currently happens up to boundary only). Or *we* provide which boundary component belongs to the fundamental domain (I opt for the lower bound). Then it is clear which points the section map has to map to.\n\nFor the 1-sphere this could be for example the clopen interval `[-pi,pi)`. Then it becomes clear that the point on the 1-sphere determined by `pi` is mapped to `-pi` via the (section) chart. Similarly then for any other point.\n\nThe only obstruction I see right now is that the symbolic ring doesn't provide any modulo operation in the spirit of `x - y*floor(x/y)`. Or does it?",
    "created_at": "2021-07-18T19:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515472",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:47'>**Comment 47:**</a>
Replying to [@egourgoulhon](#comment%3A39):
> > W.l.o.g. we can always choose the minimum/maximum the chart maps to? 

> 
> What do you mean? 

What we can do is that the user has to state the fundamental domain (which currently happens up to boundary only). Or *we* provide which boundary component belongs to the fundamental domain (I opt for the lower bound). Then it is clear which points the section map has to map to.

For the 1-sphere this could be for example the clopen interval `[-pi,pi)`. Then it becomes clear that the point on the 1-sphere determined by `pi` is mapped to `-pi` via the (section) chart. Similarly then for any other point.

The only obstruction I see right now is that the symbolic ring doesn't provide any modulo operation in the spirit of `x - y*floor(x/y)`. Or does it?



---

archive/issue_comments_515473.json:
```json
{
    "body": "<a id='comment:48'>**Comment 48:**</a>\nReplying to [@mjungmath](#comment%3A47):\n> the symbolic ring doesn't provide any modulo operation in the spirit of `x - y*floor(x/y)`.\n\nThat's right - this is #25644",
    "created_at": "2021-07-18T23:35:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515473",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:48'>**Comment 48:**</a>
Replying to [@mjungmath](#comment%3A47):
> the symbolic ring doesn't provide any modulo operation in the spirit of `x - y*floor(x/y)`.

That's right - this is #25644



---

archive/issue_events_387077.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387077"
}
```



---

archive/issue_events_387078.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387078"
}
```



---

archive/issue_comments_515474.json:
```json
{
    "body": "<a id='comment:49'>**Comment 49:**</a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515474",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'>**Comment 49:**</a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_515475.json:
```json
{
    "body": "**Changing commit** from \"[c21f88473d0d45a1bb79ee0d1a8c167a3c80b2c8](https://github.com/sagemath/sagetrac-mirror/commit/c21f88473d0d45a1bb79ee0d1a8c167a3c80b2c8)\" to \"[89039b2f942e8751bbd3722c0a2b7449214e664e](https://github.com/sagemath/sagetrac-mirror/commit/89039b2f942e8751bbd3722c0a2b7449214e664e)\".",
    "created_at": "2021-07-19T02:15:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515475",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[c21f88473d0d45a1bb79ee0d1a8c167a3c80b2c8](https://github.com/sagemath/sagetrac-mirror/commit/c21f88473d0d45a1bb79ee0d1a8c167a3c80b2c8)" to "[89039b2f942e8751bbd3722c0a2b7449214e664e](https://github.com/sagemath/sagetrac-mirror/commit/89039b2f942e8751bbd3722c0a2b7449214e664e)".



---

archive/issue_comments_515476.json:
```json
{
    "body": "<a id='comment:50'>**Comment 50:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea08261f4d62b469fdf6a75649a55fa5900727aa\">ea08261</a></td><td><code>Merge #32009</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d1c44d7e5dde0c2a65740a615998205b48be075\">3d1c44d</a></td><td><code>Merge tag '9.4.beta5' into t/32116/chart__parse_coordinates</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf3abda9bd1019287a1cbdc612585327648e9144\">cf3abda</a></td><td><code>Merge #32116</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c218828e5bfea9d5cb75d29cc4e864961397989c\">c218828</a></td><td><code>Merge #32116</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89039b2f942e8751bbd3722c0a2b7449214e664e\">89039b2</a></td><td><code>Merge #32102</code></td></tr></table>\n",
    "created_at": "2021-07-19T02:15:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515476",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:50'>**Comment 50:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea08261f4d62b469fdf6a75649a55fa5900727aa">ea08261</a></td><td><code>Merge #32009</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d1c44d7e5dde0c2a65740a615998205b48be075">3d1c44d</a></td><td><code>Merge tag '9.4.beta5' into t/32116/chart__parse_coordinates</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf3abda9bd1019287a1cbdc612585327648e9144">cf3abda</a></td><td><code>Merge #32116</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c218828e5bfea9d5cb75d29cc4e864961397989c">c218828</a></td><td><code>Merge #32116</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89039b2f942e8751bbd3722c0a2b7449214e664e">89039b2</a></td><td><code>Merge #32102</code></td></tr></table>




---

archive/issue_comments_515477.json:
```json
{
    "body": "<a id='comment:51'>**Comment 51:**</a>\nReplying to [@mjungmath](#comment%3A45):\n> Replying to [@egourgoulhon](#comment%3A40):\n> > Just a word of context about periodic charts: they have been introduced because they are useful when computing a geodesic with some [numerical integrator](https://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/integrated_curve.html). Typically, when the geodesic is an orbit around some center, the azimuthal coordinate returned by the integrator increases without any bound, instead of being confined to [0, 2\\pi). Here are some [examples in Kerr spacetime](https://nbviewer.jupyter.org/github/egourgoulhon/BHLectures/blob/master/sage/Kerr_geod_plots.ipynb).\n\n> \n> I'm sorry. What is the punchline here?\n\nPeriodic charts are useful in practice. Otherwise, we could have lived without them, sticking to the standard definition of a chart on a manifold.",
    "created_at": "2021-07-19T07:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515477",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:51'>**Comment 51:**</a>
Replying to [@mjungmath](#comment%3A45):
> Replying to [@egourgoulhon](#comment%3A40):
> > Just a word of context about periodic charts: they have been introduced because they are useful when computing a geodesic with some [numerical integrator](https://doc.sagemath.org/html/en/reference/manifolds/sage/manifolds/differentiable/integrated_curve.html). Typically, when the geodesic is an orbit around some center, the azimuthal coordinate returned by the integrator increases without any bound, instead of being confined to [0, 2\pi). Here are some [examples in Kerr spacetime](https://nbviewer.jupyter.org/github/egourgoulhon/BHLectures/blob/master/sage/Kerr_geod_plots.ipynb).

> 
> I'm sorry. What is the punchline here?

Periodic charts are useful in practice. Otherwise, we could have lived without them, sticking to the standard definition of a chart on a manifold.



---

archive/issue_comments_515478.json:
```json
{
    "body": "<a id='comment:52'>**Comment 52:**</a>\nI guess then, this ticket depends on #25644...",
    "created_at": "2021-07-19T09:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515478",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:52'>**Comment 52:**</a>
I guess then, this ticket depends on #25644...



---

archive/issue_comments_515479.json:
```json
{
    "body": "**Changing dependencies** from \"#32009, #32116, #32089, #32102\" to \"#32009, #32116, #32089, #32102, #25644\".",
    "created_at": "2021-07-19T09:32:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515479",
    "user": "https://github.com/mjungmath"
}
```

**Changing dependencies** from "#32009, #32116, #32089, #32102" to "#32009, #32116, #32089, #32102, #25644".



---

archive/issue_comments_515480.json:
```json
{
    "body": "<a id='comment:54'>**Comment 54:**</a>\nReplying to [@egourgoulhon](#comment%3A51):\n> > I'm sorry. What is the punchline here?\n\n> \n> Periodic charts are useful in practice. Otherwise, we could have lived without them, sticking to the standard definition of a chart on a manifold. \n\nThank you. It's clear now. It was my fault yesterday...",
    "created_at": "2021-07-19T09:38:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31894#issuecomment-515480",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:54'>**Comment 54:**</a>
Replying to [@egourgoulhon](#comment%3A51):
> > I'm sorry. What is the punchline here?

> 
> Periodic charts are useful in practice. Otherwise, we could have lived without them, sticking to the standard definition of a chart on a manifold. 

Thank you. It's clear now. It was my fault yesterday...



---

archive/issue_events_387079.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387079"
}
```



---

archive/issue_events_387080.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387080"
}
```



---

archive/issue_events_387081.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387081"
}
```



---

archive/issue_events_387082.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387082"
}
```



---

archive/issue_events_387083.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387083"
}
```



---

archive/issue_events_387084.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T05:25:02Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31894",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31894#event-387084"
}
```
