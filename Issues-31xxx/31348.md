# Issue 31348: build/pkgs/{gmp,mpfr}/spkg-configure.m4: Check pkg-config first

archive/issues_031111.json:
```json
{
    "body": "Currently `gmp.pc`, which may be provided at least on some platforms, is not used at all -- neither by `configure` nor by `sage.env.cython_aliases`, `sage.misc.cython`.\n\nFor example, on homebrew, using it will provide the specific library search directory `-L/usr/local/Cellar/gmp/6.2.1/lib` instead of having to rely on `/usr/local/` (which is disabled when compiler/linker are invoked with `-isysroot`)\n\nCurrently, `gmp` is detected using `AC_CHECK_HEADER`, and the result is communicated to `sage-build-env-config` as variables `SAGE_GMP_PREFIX` and `SAGE_GMP_INCLUDE`; but it is not available in the runtime environment (`sage_conf.py`, `sage-env-config`).\n\nThe failures reported in \n- ticket:31335#comment:47 \n- https://groups.google.com/g/sage-release/c/6WjKQt_e_B8/m/H2I4HZ-YCwAJ (https://groups.google.com/g/sage-release/c/6WjKQt_e_B8/m/Uut_ZRaZCwAJ)\n- https://groups.google.com/g/sage-release/c/0q3kywk7RP8/m/uspq0xeuAgAJ\ncan be fixed by simply changing `sage.misc.cython` to pick up `gmp.pc`.  But to avoid unpleasant surprises, we need to make sure that it is used consistently when present.\n\n(After #32549, the relevant file is `build/pkgs/gmp/spkg-configure.m4`.)\n\nThe above applies to `mpfr` as well. See failure report in https://groups.google.com/g/sage-release/c/8ctwsUGl6LQ/m/Ob38Iyh1AAAJ\n\nSimilar situation with `readline` (#29000): The spkg-configure script already uses pkg-config - but forgets to tell the build system what it found.\n\nPrevious tickets: #27212\n\n\n**CC:**  @dimpase @jhpalmieri @zlscherr @orlitzky\n\n**Keywords:** mpfr\n\n**Branch:** [u/gh-zlscherr/add_gmp_mpfr_cython](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-zlscherr/add_gmp_mpfr_cython)\n\n**Commit:** [07e00b608d79e90c8854c2b4c157a1d6456e9985](https://github.com/sagemath/sagetrac-mirror/commit/07e00b608d79e90c8854c2b4c157a1d6456e9985)\n\n**Status:** new\n\n**Dependencies:** #31344, #32549\n\nIssue created by migration from https://trac.sagemath.org/ticket/31348\n\n",
    "created_at": "2021-02-06T02:40:02Z",
    "labels": [
        "component: build: configure",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "build/pkgs/{gmp,mpfr}/spkg-configure.m4: Check pkg-config first",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31348",
    "user": "https://github.com/mkoeppe"
}
```
Currently `gmp.pc`, which may be provided at least on some platforms, is not used at all -- neither by `configure` nor by `sage.env.cython_aliases`, `sage.misc.cython`.

For example, on homebrew, using it will provide the specific library search directory `-L/usr/local/Cellar/gmp/6.2.1/lib` instead of having to rely on `/usr/local/` (which is disabled when compiler/linker are invoked with `-isysroot`)

Currently, `gmp` is detected using `AC_CHECK_HEADER`, and the result is communicated to `sage-build-env-config` as variables `SAGE_GMP_PREFIX` and `SAGE_GMP_INCLUDE`; but it is not available in the runtime environment (`sage_conf.py`, `sage-env-config`).

The failures reported in 
- ticket:31335#comment:47 
- https://groups.google.com/g/sage-release/c/6WjKQt_e_B8/m/H2I4HZ-YCwAJ (https://groups.google.com/g/sage-release/c/6WjKQt_e_B8/m/Uut_ZRaZCwAJ)
- https://groups.google.com/g/sage-release/c/0q3kywk7RP8/m/uspq0xeuAgAJ
can be fixed by simply changing `sage.misc.cython` to pick up `gmp.pc`.  But to avoid unpleasant surprises, we need to make sure that it is used consistently when present.

(After #32549, the relevant file is `build/pkgs/gmp/spkg-configure.m4`.)

The above applies to `mpfr` as well. See failure report in https://groups.google.com/g/sage-release/c/8ctwsUGl6LQ/m/Ob38Iyh1AAAJ

Similar situation with `readline` (#29000): The spkg-configure script already uses pkg-config - but forgets to tell the build system what it found.

Previous tickets: #27212


**CC:**  @dimpase @jhpalmieri @zlscherr @orlitzky

**Keywords:** mpfr

**Branch:** [u/gh-zlscherr/add_gmp_mpfr_cython](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-zlscherr/add_gmp_mpfr_cython)

**Commit:** [07e00b608d79e90c8854c2b4c157a1d6456e9985](https://github.com/sagemath/sagetrac-mirror/commit/07e00b608d79e90c8854c2b4c157a1d6456e9985)

**Status:** new

**Dependencies:** #31344, #32549

Issue created by migration from https://trac.sagemath.org/ticket/31348





---

archive/issue_comments_622542.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n For example, on homebrew, using it will provide the specific library search directory `-L/usr/local/Cellar/gmp/6.2.1/lib` instead of having to rely on `/usr/local/` (which is disabled when compiler/linker are invoked with `-isysroot`)\n \n-The failure reported in ticket:31335#comment:47 only `sage.misc.cython` to pick up `gmp.pc` - but to avoid unpleasant surprises, we need to make sure that it is used consistently when present.\n+The failure reported in ticket:31335#comment:47 can be fixed by simply changing `sage.misc.cython` to pick up `gmp.pc`.  But to avoid unpleasant surprises, we need to make sure that it is used consistently when present.\n \n previous tickets: #27212\n \n``````\n",
    "created_at": "2021-02-06T02:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622542",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 For example, on homebrew, using it will provide the specific library search directory `-L/usr/local/Cellar/gmp/6.2.1/lib` instead of having to rely on `/usr/local/` (which is disabled when compiler/linker are invoked with `-isysroot`)
 
-The failure reported in ticket:31335#comment:47 only `sage.misc.cython` to pick up `gmp.pc` - but to avoid unpleasant surprises, we need to make sure that it is used consistently when present.
+The failure reported in ticket:31335#comment:47 can be fixed by simply changing `sage.misc.cython` to pick up `gmp.pc`.  But to avoid unpleasant surprises, we need to make sure that it is used consistently when present.
 
 previous tickets: #27212
 
``````




---

archive/issue_comments_622543.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n Currently `gmp.pc`, which may be provided at least on some platforms, is not used at all -- neither by `configure` nor by `sage.env.cython_aliases`, `sage.misc.cython`.\n \n For example, on homebrew, using it will provide the specific library search directory `-L/usr/local/Cellar/gmp/6.2.1/lib` instead of having to rely on `/usr/local/` (which is disabled when compiler/linker are invoked with `-isysroot`)\n+\n+Currently, `gmp` is detected using `AC_CHECK_HEADER`, and the result is communicated to `sage-build-env-config` as variables `SAGE_GMP_PREFIX` and `SAGE_GMP_INCLUDE`; but it is not available in the runtime environment (`sage_conf.py`, `sage-env-config`).\n \n The failure reported in ticket:31335#comment:47 can be fixed by simply changing `sage.misc.cython` to pick up `gmp.pc`.  But to avoid unpleasant surprises, we need to make sure that it is used consistently when present.\n \n``````\n",
    "created_at": "2021-02-06T02:53:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622543",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,8 @@
 Currently `gmp.pc`, which may be provided at least on some platforms, is not used at all -- neither by `configure` nor by `sage.env.cython_aliases`, `sage.misc.cython`.
 
 For example, on homebrew, using it will provide the specific library search directory `-L/usr/local/Cellar/gmp/6.2.1/lib` instead of having to rely on `/usr/local/` (which is disabled when compiler/linker are invoked with `-isysroot`)
+
+Currently, `gmp` is detected using `AC_CHECK_HEADER`, and the result is communicated to `sage-build-env-config` as variables `SAGE_GMP_PREFIX` and `SAGE_GMP_INCLUDE`; but it is not available in the runtime environment (`sage_conf.py`, `sage-env-config`).
 
 The failure reported in ticket:31335#comment:47 can be fixed by simply changing `sage.misc.cython` to pick up `gmp.pc`.  But to avoid unpleasant surprises, we need to make sure that it is used consistently when present.
 
``````




---

archive/issue_events_092448.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "rename": {
        "from": "build/pkgs/mpir/spkg-configure.m4: Check pkg-config first",
        "to": "build/pkgs/{mpir,mpfr}/spkg-configure.m4: Check pkg-config first"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31348#event-92448"
}
```



---

archive/issue_comments_622544.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,5 +6,8 @@\n \n The failure reported in ticket:31335#comment:47 can be fixed by simply changing `sage.misc.cython` to pick up `gmp.pc`.  But to avoid unpleasant surprises, we need to make sure that it is used consistently when present.\n \n+\n+The above applies to `mpfr` as well.\n+\n previous tickets: #27212\n \n``````\n",
    "created_at": "2021-02-06T05:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622544",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,5 +6,8 @@
 
 The failure reported in ticket:31335#comment:47 can be fixed by simply changing `sage.misc.cython` to pick up `gmp.pc`.  But to avoid unpleasant surprises, we need to make sure that it is used consistently when present.
 
+
+The above applies to `mpfr` as well.
+
 previous tickets: #27212
 
``````




---

archive/issue_comments_622545.json:
```json
{
    "body": "<a id='comment:4'></a>\nI started to play around with this a bit, and I can use python\u2019s pkgconfig to locate gmp and mpfr.  After doing that though, I get complaints about not being able to locagte -lntl, which I don\u2019t think I can find with pkgconfig since it doesn\u2019t have an ntl.pc file.\n\nThis may be a bit too hacky, but would it be possible in the build process to copy the various includes and libraries to SAGE_LOCAL/{include, lib} that are picked up by configure? That seems like it would solve a whole host of problems at the expense of if the user updates one of those libraries then the new version would not be picked up.",
    "created_at": "2021-02-09T02:14:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622545",
    "user": "https://github.com/zlscherr"
}
```

<a id='comment:4'></a>
I started to play around with this a bit, and I can use python’s pkgconfig to locate gmp and mpfr.  After doing that though, I get complaints about not being able to locagte -lntl, which I don’t think I can find with pkgconfig since it doesn’t have an ntl.pc file.

This may be a bit too hacky, but would it be possible in the build process to copy the various includes and libraries to SAGE_LOCAL/{include, lib} that are picked up by configure? That seems like it would solve a whole host of problems at the expense of if the user updates one of those libraries then the new version would not be picked up.



---

archive/issue_comments_622546.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [gh-zlscherr](#comment%3A4):\n> I started to play around with this a bit, and I can use python\u2019s pkgconfig to locate gmp and mpfr.  After doing that though, I get complaints about not being able to locagte -lntl, which I don\u2019t think I can find with pkgconfig since it doesn\u2019t have an ntl.pc file.\n\n\nFor NTL, the configure script already determines `SAGE_NTL_PREFIX`.\nThis variable just needs to be used more.",
    "created_at": "2021-02-09T02:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622546",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Replying to [gh-zlscherr](#comment%3A4):
> I started to play around with this a bit, and I can use python’s pkgconfig to locate gmp and mpfr.  After doing that though, I get complaints about not being able to locagte -lntl, which I don’t think I can find with pkgconfig since it doesn’t have an ntl.pc file.


For NTL, the configure script already determines `SAGE_NTL_PREFIX`.
This variable just needs to be used more.



---

archive/issue_comments_622547.json:
```json
{
    "body": "<a id='comment:6'></a>\nI've opened #31365 for NTL.",
    "created_at": "2021-02-09T02:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622547",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
I've opened #31365 for NTL.



---

archive/issue_comments_622548.json:
```json
{
    "body": "**Branch:** [u/gh-zlscherr/add_gmp_mpfr_cython](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-zlscherr/add_gmp_mpfr_cython)",
    "created_at": "2021-04-07T21:00:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622548",
    "user": "https://github.com/zlscherr"
}
```

**Branch:** [u/gh-zlscherr/add_gmp_mpfr_cython](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-zlscherr/add_gmp_mpfr_cython)



---

archive/issue_comments_622549.json:
```json
{
    "body": "**Commit:** [07e00b608d79e90c8854c2b4c157a1d6456e9985](https://github.com/sagemath/sagetrac-mirror/commit/07e00b608d79e90c8854c2b4c157a1d6456e9985)",
    "created_at": "2021-04-07T21:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [07e00b608d79e90c8854c2b4c157a1d6456e9985](https://github.com/sagemath/sagetrac-mirror/commit/07e00b608d79e90c8854c2b4c157a1d6456e9985)



---

archive/issue_comments_622550.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07e00b608d79e90c8854c2b4c157a1d6456e9985\">07e00b6</a></td><td><code>Modify stdlibs/incs in misc/cython.py</code></td></tr></table>\n",
    "created_at": "2021-04-07T21:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622550",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07e00b608d79e90c8854c2b4c157a1d6456e9985">07e00b6</a></td><td><code>Modify stdlibs/incs in misc/cython.py</code></td></tr></table>




---

archive/issue_comments_622551.json:
```json
{
    "body": "<a id='comment:9'></a>\nI pushed very simple code for trying to deal with this.  It's probably better to use regular expressions, but I just wanted a proof of concept.  This allows make ptest to work with homebrew without having to source .homebrew-build-env.",
    "created_at": "2021-04-07T21:03:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622551",
    "user": "https://github.com/zlscherr"
}
```

<a id='comment:9'></a>
I pushed very simple code for trying to deal with this.  It's probably better to use regular expressions, but I just wanted a proof of concept.  This allows make ptest to work with homebrew without having to source .homebrew-build-env.



---

archive/issue_comments_622552.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,5 +9,7 @@\n \n The above applies to `mpfr` as well.\n \n+Also `readline` - #29000.\n+\n previous tickets: #27212\n \n``````\n",
    "created_at": "2021-04-09T19:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622552",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,5 +9,7 @@
 
 The above applies to `mpfr` as well.
 
+Also `readline` - #29000.
+
 previous tickets: #27212
 
``````




---

archive/issue_comments_622553.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,7 +9,7 @@\n \n The above applies to `mpfr` as well.\n \n-Also `readline` - #29000.\n+Similar situation with `readline` (#29000): The spkg-configure script already uses pkg-config - but forgets to tell the build system what it found.\n \n previous tickets: #27212\n \n``````\n",
    "created_at": "2021-04-09T19:30:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622553",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,7 +9,7 @@
 
 The above applies to `mpfr` as well.
 
-Also `readline` - #29000.
+Similar situation with `readline` (#29000): The spkg-configure script already uses pkg-config - but forgets to tell the build system what it found.
 
 previous tickets: #27212
 
``````




---

archive/issue_comments_622554.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,7 +4,11 @@\n \n Currently, `gmp` is detected using `AC_CHECK_HEADER`, and the result is communicated to `sage-build-env-config` as variables `SAGE_GMP_PREFIX` and `SAGE_GMP_INCLUDE`; but it is not available in the runtime environment (`sage_conf.py`, `sage-env-config`).\n \n-The failure reported in ticket:31335#comment:47 can be fixed by simply changing `sage.misc.cython` to pick up `gmp.pc`.  But to avoid unpleasant surprises, we need to make sure that it is used consistently when present.\n+The failures reported in \n+- ticket:31335#comment:47 \n+- https://groups.google.com/g/sage-release/c/6WjKQt_e_B8/m/H2I4HZ-YCwAJ (https://groups.google.com/g/sage-release/c/6WjKQt_e_B8/m/Uut_ZRaZCwAJ)\n+- https://groups.google.com/g/sage-release/c/0q3kywk7RP8/m/uspq0xeuAgAJ\n+can be fixed by simply changing `sage.misc.cython` to pick up `gmp.pc`.  But to avoid unpleasant surprises, we need to make sure that it is used consistently when present.\n \n \n The above applies to `mpfr` as well.\n``````\n",
    "created_at": "2021-04-19T17:16:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622554",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,7 +4,11 @@
 
 Currently, `gmp` is detected using `AC_CHECK_HEADER`, and the result is communicated to `sage-build-env-config` as variables `SAGE_GMP_PREFIX` and `SAGE_GMP_INCLUDE`; but it is not available in the runtime environment (`sage_conf.py`, `sage-env-config`).
 
-The failure reported in ticket:31335#comment:47 can be fixed by simply changing `sage.misc.cython` to pick up `gmp.pc`.  But to avoid unpleasant surprises, we need to make sure that it is used consistently when present.
+The failures reported in 
+- ticket:31335#comment:47 
+- https://groups.google.com/g/sage-release/c/6WjKQt_e_B8/m/H2I4HZ-YCwAJ (https://groups.google.com/g/sage-release/c/6WjKQt_e_B8/m/Uut_ZRaZCwAJ)
+- https://groups.google.com/g/sage-release/c/0q3kywk7RP8/m/uspq0xeuAgAJ
+can be fixed by simply changing `sage.misc.cython` to pick up `gmp.pc`.  But to avoid unpleasant surprises, we need to make sure that it is used consistently when present.
 
 
 The above applies to `mpfr` as well.
``````




---

archive/issue_comments_622555.json:
```json
{
    "body": "<a id='comment:13'></a>\nI've started getting [failures](https://math.mit.edu/~roed/31348.log) that are fixed by sourcing `.homebrew-build-env` even when I'm just changing Cython files and recompiling (not changing any spkgs).  Is this expected?",
    "created_at": "2021-04-26T05:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622555",
    "user": "https://github.com/roed314"
}
```

<a id='comment:13'></a>
I've started getting [failures](https://math.mit.edu/~roed/31348.log) that are fixed by sourcing `.homebrew-build-env` even when I'm just changing Cython files and recompiling (not changing any spkgs).  Is this expected?



---

archive/issue_comments_622556.json:
```json
{
    "body": "<a id='comment:14'></a>\nYes, this is part of what this ticket intends to fix.",
    "created_at": "2021-04-26T17:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622556",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Yes, this is part of what this ticket intends to fix.



---

archive/issue_comments_622557.json:
```json
{
    "body": "<a id='comment:15'></a>\nGreat, thanks for the clarification!",
    "created_at": "2021-04-26T18:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622557",
    "user": "https://github.com/roed314"
}
```

<a id='comment:15'></a>
Great, thanks for the clarification!



---

archive/issue_events_092449.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31348#event-92449"
}
```



---

archive/issue_comments_622558.json:
```json
{
    "body": "<a id='comment:16'></a>\nMoving to 9.4, as 9.3 has been released.",
    "created_at": "2021-05-10T17:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622558",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Moving to 9.4, as 9.3 has been released.



---

archive/issue_events_092450.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31348#event-92450"
}
```



---

archive/issue_events_092451.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31348#event-92451"
}
```



---

archive/issue_comments_622559.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,6 +10,7 @@\n - https://groups.google.com/g/sage-release/c/0q3kywk7RP8/m/uspq0xeuAgAJ\n can be fixed by simply changing `sage.misc.cython` to pick up `gmp.pc`.  But to avoid unpleasant surprises, we need to make sure that it is used consistently when present.\n \n+(After #32549, the relevant file is `build/pkgs/gmp/spkg-configure.m4`.)\n \n The above applies to `mpfr` as well.\n \n``````\n",
    "created_at": "2021-09-23T15:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622559",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,6 +10,7 @@
 - https://groups.google.com/g/sage-release/c/0q3kywk7RP8/m/uspq0xeuAgAJ
 can be fixed by simply changing `sage.misc.cython` to pick up `gmp.pc`.  But to avoid unpleasant surprises, we need to make sure that it is used consistently when present.
 
+(After #32549, the relevant file is `build/pkgs/gmp/spkg-configure.m4`.)
 
 The above applies to `mpfr` as well.
 
``````




---

archive/issue_comments_622560.json:
```json
{
    "body": "<a id='comment:19'></a>\nsome distros, like Fedora, have an unpleasant habit of not installing .pc files, while these are available.",
    "created_at": "2021-09-23T15:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622560",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>
some distros, like Fedora, have an unpleasant habit of not installing .pc files, while these are available.



---

archive/issue_comments_622561.json:
```json
{
    "body": "<a id='comment:20'></a>\nYes, the ticket is \"Check pkg-config first\", not \"Check pkg-config only\".",
    "created_at": "2021-09-23T15:59:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622561",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
Yes, the ticket is "Check pkg-config first", not "Check pkg-config only".



---

archive/issue_comments_622562.json:
```json
{
    "body": "<a id='comment:21'></a>\nIMO homebrew (and anyone else installing libgmp to a nonstandard directory) should be pestered to install it to the system's default location. I'm pretty sure that the gmp and mpir packages then conflict, but you don't need to install them both at the same time. In fact, mpir can probably be deprecated.\n\nUsing pkg-config just changes this potential problem (libraries in wrong locations) to another one (pc files in wrong locations) and adds an extra layer of indirection in the process. We may have to go ahead and fix it anyway, but we shouldn't lose track of the simple and easy way that this was all meant to work.",
    "created_at": "2021-09-23T17:00:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622562",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:21'></a>
IMO homebrew (and anyone else installing libgmp to a nonstandard directory) should be pestered to install it to the system's default location. I'm pretty sure that the gmp and mpir packages then conflict, but you don't need to install them both at the same time. In fact, mpir can probably be deprecated.

Using pkg-config just changes this potential problem (libraries in wrong locations) to another one (pc files in wrong locations) and adds an extra layer of indirection in the process. We may have to go ahead and fix it anyway, but we shouldn't lose track of the simple and easy way that this was all meant to work.



---

archive/issue_comments_622563.json:
```json
{
    "body": "<a id='comment:22'></a>\nThe problem on homebrew is really a very specific one, which I have explained in the ticket description: The GMP headers *are* installed in what you would call the \"standard location\" (`/usr/local/`), but when compiler/linker are invoked with `-isysroot`, then `/usr/local` is not a standard location. Yes, we fix it in the *build* environment using `.homebrew-build-env` but that does not affect the compiler use in the *runtime* environment.",
    "created_at": "2021-09-23T17:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622563",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>
The problem on homebrew is really a very specific one, which I have explained in the ticket description: The GMP headers *are* installed in what you would call the "standard location" (`/usr/local/`), but when compiler/linker are invoked with `-isysroot`, then `/usr/local` is not a standard location. Yes, we fix it in the *build* environment using `.homebrew-build-env` but that does not affect the compiler use in the *runtime* environment.



---

archive/issue_comments_622564.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [mjo](#comment%3A21):\n> IMO homebrew (and anyone else installing libgmp to a nonstandard directory) should be pestered to install it to the system's default location. I'm pretty sure that the gmp and mpir packages then conflict, but you don't need to install them both at the same time. In fact, mpir can probably be deprecated.\n\n\nNo, brew does not install mpir in gmp-compatible mode, as far as\nI can tell from reading https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/mpir.rb\n- so there is no interference with gmp.",
    "created_at": "2021-09-23T18:27:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622564",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>
Replying to [mjo](#comment%3A21):
> IMO homebrew (and anyone else installing libgmp to a nonstandard directory) should be pestered to install it to the system's default location. I'm pretty sure that the gmp and mpir packages then conflict, but you don't need to install them both at the same time. In fact, mpir can probably be deprecated.


No, brew does not install mpir in gmp-compatible mode, as far as
I can tell from reading https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/mpir.rb
- so there is no interference with gmp.



---

archive/issue_comments_622565.json:
```json
{
    "body": "<a id='comment:24'></a>\nBesides, we're getting rid of mpir spkg all together.",
    "created_at": "2021-09-23T18:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622565",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'></a>
Besides, we're getting rid of mpir spkg all together.



---

archive/issue_comments_622566.json:
```json
{
    "body": "<a id='comment:25'></a>\nThis ticket has really nothing to do with MPIR. It's just (pre #32549) that the spkg-configure duties for gmp are done by MPIR's spkg-configure.",
    "created_at": "2021-09-23T18:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622566",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
This ticket has really nothing to do with MPIR. It's just (pre #32549) that the spkg-configure duties for gmp are done by MPIR's spkg-configure.



---

archive/issue_comments_622567.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [mkoeppe](#comment%3A22):\n> The problem on homebrew is really a very specific one, which I have explained in the ticket description: The GMP headers *are* installed in what you would call the \"standard location\" (`/usr/local/`), but when compiler/linker are invoked with `-isysroot`, then `/usr/local` is not a standard location. Yes, we fix it in the *build* environment using `.homebrew-build-env` but that does not affect the compiler use in the *runtime* environment.\n\n\nOh, the description makes it sounds like libgmp being in `/usr/local/Cellar/gmp/6.2.1/lib` is the problem. Is this another case of trying to use cython (which in turn uses the C toolchain) without sourcing `.homebrew-build-env` to make the C toolchain work?",
    "created_at": "2021-09-23T19:24:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622567",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:26'></a>
Replying to [mkoeppe](#comment%3A22):
> The problem on homebrew is really a very specific one, which I have explained in the ticket description: The GMP headers *are* installed in what you would call the "standard location" (`/usr/local/`), but when compiler/linker are invoked with `-isysroot`, then `/usr/local` is not a standard location. Yes, we fix it in the *build* environment using `.homebrew-build-env` but that does not affect the compiler use in the *runtime* environment.


Oh, the description makes it sounds like libgmp being in `/usr/local/Cellar/gmp/6.2.1/lib` is the problem. Is this another case of trying to use cython (which in turn uses the C toolchain) without sourcing `.homebrew-build-env` to make the C toolchain work?



---

archive/issue_comments_622568.json:
```json
{
    "body": "<a id='comment:27'></a>\nIt's really just the broken design of homebrew's `python3`. They use `-isysroot` in the build configuration of python, which goes into the compiler/flags of any extensions built via distutils/setuptools. Then they add back a few homebrew directories via `distutils.cfg`. It's hopelessly broken because these directories take priority over other user/package-provided include and linker directories. At build time, we work around it by disabling use of the system python's vendored distutils and use our own. \nAt runtime, we would be best off by using paths explicitly that can be discovered via pkg-config -- because in the Sage library we already do that for all other packages.",
    "created_at": "2021-09-25T01:44:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622568",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
It's really just the broken design of homebrew's `python3`. They use `-isysroot` in the build configuration of python, which goes into the compiler/flags of any extensions built via distutils/setuptools. Then they add back a few homebrew directories via `distutils.cfg`. It's hopelessly broken because these directories take priority over other user/package-provided include and linker directories. At build time, we work around it by disabling use of the system python's vendored distutils and use our own. 
At runtime, we would be best off by using paths explicitly that can be discovered via pkg-config -- because in the Sage library we already do that for all other packages.



---

archive/issue_comments_622569.json:
```json
{
    "body": "<a id='comment:28'></a>\nis this reported to Homebrew as a bug?",
    "created_at": "2021-09-25T07:30:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622569",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'></a>
is this reported to Homebrew as a bug?



---

archive/issue_comments_622570.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [dimpase](#comment%3A28):\n> is this reported to Homebrew as a bug?\n\nI didn't report it when I came across it in #31335. I figured a bug report titled \"distutils.cfg considered harmful\" would drain a lot of energy...",
    "created_at": "2021-09-25T17:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622570",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
Replying to [dimpase](#comment%3A28):
> is this reported to Homebrew as a bug?

I didn't report it when I came across it in #31335. I figured a bug report titled "distutils.cfg considered harmful" would drain a lot of energy...



---

archive/issue_comments_622571.json:
```json
{
    "body": "**Changing dependencies** from \"#31344\" to \"#31344, #32549\".",
    "created_at": "2021-09-25T18:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622571",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#31344" to "#31344, #32549".



---

archive/issue_comments_622572.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [mkoeppe](#comment%3A29):\n> Replying to [dimpase](#comment%3A28):\n> > is this reported to Homebrew as a bug?\n\n> I didn't report it when I came across it in #31335. I figured a bug report titled \"distutils.cfg considered harmful\" would drain a lot of energy... \n\nYou don't need to fight a battle, merely report the problem, please.",
    "created_at": "2021-09-26T08:12:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622572",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>
Replying to [mkoeppe](#comment%3A29):
> Replying to [dimpase](#comment%3A28):
> > is this reported to Homebrew as a bug?

> I didn't report it when I came across it in #31335. I figured a bug report titled "distutils.cfg considered harmful" would drain a lot of energy... 

You don't need to fight a battle, merely report the problem, please.



---

archive/issue_comments_622573.json:
```json
{
    "body": "<a id='comment:32'></a>\nThey're pretty quick with closing as wontfix if one doesn't also provide a patch",
    "created_at": "2021-09-27T19:18:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622573",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>
They're pretty quick with closing as wontfix if one doesn't also provide a patch



---

archive/issue_comments_622574.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [mkoeppe](#comment%3A32):\n> They're pretty quick with closing as wontfix if one doesn't also provide a patch\n\n\nSprecht du kein Ruby, oder? :-)",
    "created_at": "2021-09-27T19:50:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622574",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'></a>
Replying to [mkoeppe](#comment%3A32):
> They're pretty quick with closing as wontfix if one doesn't also provide a patch


Sprecht du kein Ruby, oder? :-)



---

archive/issue_comments_622575.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [dimpase](#comment%3A31):\n> Replying to [mkoeppe](#comment%3A29):\n> > Replying to [dimpase](#comment%3A28):\n> > > is this reported to Homebrew as a bug?\n\n> > I didn't report it when I came across it in #31335. I figured a bug report titled \"distutils.cfg considered harmful\" would drain a lot of energy... \n> \n> You don't need to fight a battle, merely report the problem, please.\n\n\nI sent a first PR to reduce homebrew's `distutils.cfg` - https://github.com/Homebrew/homebrew-core/pull/91043",
    "created_at": "2021-12-12T00:15:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622575",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>
Replying to [dimpase](#comment%3A31):
> Replying to [mkoeppe](#comment%3A29):
> > Replying to [dimpase](#comment%3A28):
> > > is this reported to Homebrew as a bug?

> > I didn't report it when I came across it in #31335. I figured a bug report titled "distutils.cfg considered harmful" would drain a lot of energy... 
> 
> You don't need to fight a battle, merely report the problem, please.


I sent a first PR to reduce homebrew's `distutils.cfg` - https://github.com/Homebrew/homebrew-core/pull/91043



---

archive/issue_events_092452.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "rename": {
        "from": "build/pkgs/{mpir,mpfr}/spkg-configure.m4: Check pkg-config first",
        "to": "build/pkgs/mpfr/spkg-configure.m4: Check pkg-config first"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31348#event-92452"
}
```



---

archive/issue_comments_622576.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"mpfr\".",
    "created_at": "2022-01-01T21:46:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622576",
    "user": "https://github.com/slel"
}
```

**Changing keywords** from "" to "mpfr".



---

archive/issue_comments_622577.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -16,5 +16,5 @@\n \n Similar situation with `readline` (#29000): The spkg-configure script already uses pkg-config - but forgets to tell the build system what it found.\n \n-previous tickets: #27212\n+Previous tickets: #27212\n \n``````\n",
    "created_at": "2022-01-01T21:46:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622577",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -16,5 +16,5 @@
 
 Similar situation with `readline` (#29000): The spkg-configure script already uses pkg-config - but forgets to tell the build system what it found.
 
-previous tickets: #27212
+Previous tickets: #27212
 
``````




---

archive/issue_comments_622578.json:
```json
{
    "body": "<a id='comment:35'></a>\nRemoved mpir from ticket summary after its removal in #32549, #32727.",
    "created_at": "2022-01-01T21:46:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622578",
    "user": "https://github.com/slel"
}
```

<a id='comment:35'></a>
Removed mpir from ticket summary after its removal in #32549, #32727.



---

archive/issue_events_092453.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-10T00:37:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31348#event-92453"
}
```



---

archive/issue_events_092454.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-01-10T00:37:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31348#event-92454"
}
```



---

archive/issue_comments_622579.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,7 +12,7 @@\n \n (After #32549, the relevant file is `build/pkgs/gmp/spkg-configure.m4`.)\n \n-The above applies to `mpfr` as well.\n+The above applies to `mpfr` as well. See failure report in https://groups.google.com/g/sage-release/c/8ctwsUGl6LQ/m/Ob38Iyh1AAAJ\n \n Similar situation with `readline` (#29000): The spkg-configure script already uses pkg-config - but forgets to tell the build system what it found.\n \n``````\n",
    "created_at": "2022-01-16T17:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622579",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,7 +12,7 @@
 
 (After #32549, the relevant file is `build/pkgs/gmp/spkg-configure.m4`.)
 
-The above applies to `mpfr` as well.
+The above applies to `mpfr` as well. See failure report in https://groups.google.com/g/sage-release/c/8ctwsUGl6LQ/m/Ob38Iyh1AAAJ
 
 Similar situation with `readline` (#29000): The spkg-configure script already uses pkg-config - but forgets to tell the build system what it found.
 
``````




---

archive/issue_comments_622580.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [mkoeppe](#comment%3A34):\n> I sent a first PR to reduce homebrew's `distutils.cfg` - https://github.com/Homebrew/homebrew-core/pull/91043\n\n\nThey have merged a broader change now, eliminating all of `distutils.cfg` (https://github.com/Homebrew/homebrew-core/pull/91043#issuecomment-1032079055), at least for their Python 3.10 package. That's a good improvement, but it changes nothing for the present ticket.",
    "created_at": "2022-02-08T06:47:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622580",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>
Replying to [mkoeppe](#comment%3A34):
> I sent a first PR to reduce homebrew's `distutils.cfg` - https://github.com/Homebrew/homebrew-core/pull/91043


They have merged a broader change now, eliminating all of `distutils.cfg` (https://github.com/Homebrew/homebrew-core/pull/91043#issuecomment-1032079055), at least for their Python 3.10 package. That's a good improvement, but it changes nothing for the present ticket.



---

archive/issue_events_092455.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31348#event-92455"
}
```



---

archive/issue_events_092456.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31348#event-92456"
}
```



---

archive/issue_events_092457.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "rename": {
        "from": "build/pkgs/mpfr/spkg-configure.m4: Check pkg-config first",
        "to": "build/pkgs/{gmp,mpfr}/spkg-configure.m4: Check pkg-config first"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31348#event-92457"
}
```



---

archive/issue_comments_622581.json:
```json
{
    "body": "<a id='comment:41'></a>\nso this needs changes to gmp's and mpfr's `spkg-configure.m4` ? Anything else?",
    "created_at": "2022-05-20T13:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622581",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:41'></a>
so this needs changes to gmp's and mpfr's `spkg-configure.m4` ? Anything else?



---

archive/issue_comments_622582.json:
```json
{
    "body": "<a id='comment:42'></a>\n`sage.env.cython_aliases` also needs to be extended",
    "created_at": "2022-05-20T16:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622582",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:42'></a>
`sage.env.cython_aliases` also needs to be extended



---

archive/issue_comments_622583.json:
```json
{
    "body": "<a id='comment:43'></a>\nshould we remove all the crud needed for gmp and mpfr without .pc files available?\n\nI suppose almost every platform we support nowadays will have them installed.",
    "created_at": "2022-05-30T10:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622583",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:43'></a>
should we remove all the crud needed for gmp and mpfr without .pc files available?

I suppose almost every platform we support nowadays will have them installed.



---

archive/issue_comments_622584.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [dimpase](#comment%3A43):\n> I suppose almost every platform we support nowadays will have them installed.\n\n\nThat would be worth checking.",
    "created_at": "2022-05-30T18:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31348#issuecomment-622584",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>
Replying to [dimpase](#comment%3A43):
> I suppose almost every platform we support nowadays will have them installed.


That would be worth checking.



---

archive/issue_events_092458.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31348#event-92458"
}
```



---

archive/issue_events_092459.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31348",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31348#event-92459"
}
```
