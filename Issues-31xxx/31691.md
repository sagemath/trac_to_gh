# Issue 31691: Turn mixed form algebra into de Rham complex

archive/issues_031454.json:
```json
{
    "body": "We turn the algebra of mixed differential forms into a de Rham complex and add it to the category of `ChainComplexes`, see #31669.\n\nFurthermore, we add de Rham cohomology to SageManifolds with limited functionality. For now, the implementation will only consist of abstract elements that are given by representatives of mixed forms, i.e. we take closed mixed forms, put a bracket around it and do all computations in the algebra of mixed forms. \n\n**CC:**  @egourgoulhon @tscrim @mkoeppe @jhpalmieri\n\n**Keywords:** chain_complex\n\n**Branch/Commit:** [566176a74a480456b7836c13a173e217b721b70a](https://github.com/sagemath/sagetrac-mirror/commit/566176a74a480456b7836c13a173e217b721b70a)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Michael Jung\n\nIssue created by migration from https://trac.sagemath.org/ticket/31691\n\n",
    "closed_at": "2021-06-06T13:17:50Z",
    "created_at": "2021-04-19T10:20:39Z",
    "labels": [
        "component: manifolds",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "title": "Turn mixed form algebra into de Rham complex",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/31691",
    "user": "https://github.com/mjungmath"
}
```
We turn the algebra of mixed differential forms into a de Rham complex and add it to the category of `ChainComplexes`, see #31669.

Furthermore, we add de Rham cohomology to SageManifolds with limited functionality. For now, the implementation will only consist of abstract elements that are given by representatives of mixed forms, i.e. we take closed mixed forms, put a bracket around it and do all computations in the algebra of mixed forms. 

**CC:**  @egourgoulhon @tscrim @mkoeppe @jhpalmieri

**Keywords:** chain_complex

**Branch/Commit:** [566176a74a480456b7836c13a173e217b721b70a](https://github.com/sagemath/sagetrac-mirror/commit/566176a74a480456b7836c13a173e217b721b70a)

**Reviewer:** Travis Scrimshaw

**Author:** Michael Jung

Issue created by migration from https://trac.sagemath.org/ticket/31691





---

archive/issue_events_284630.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2021-04-19T10:20:51Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "rename": {
        "from": "Make mixed forms to de Rham complex",
        "to": "Turn mixed forms into de Rham complex"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31691#event-284630"
}
```



---

archive/issue_comments_512526.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-We turn the algebra of mixed differential forms into a de Rham complex and add it to the category of `ChainComplexes`.\n+We turn the algebra of mixed differential forms into a de Rham complex and add it to the category of `ChainComplexes`, see #31669.\n``````\n",
    "created_at": "2021-04-19T10:21:13Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512526",
    "user": "https://github.com/mjungmath"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-We turn the algebra of mixed differential forms into a de Rham complex and add it to the category of `ChainComplexes`.
+We turn the algebra of mixed differential forms into a de Rham complex and add it to the category of `ChainComplexes`, see #31669.
``````




---

archive/issue_comments_512527.json:
```json
{
    "body": "**Branch:** [public/31691_de_rham_complex](https://github.com/sagemath/sagetrac-mirror/tree/public/31691_de_rham_complex)",
    "created_at": "2021-04-20T17:10:37Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512527",
    "user": "https://github.com/mjungmath"
}
```

**Branch:** [public/31691_de_rham_complex](https://github.com/sagemath/sagetrac-mirror/tree/public/31691_de_rham_complex)



---

archive/issue_comments_512528.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a050f71c38c0fbe768daf28e2009336276bff4fc\">a050f71</a></td><td><code>Trac #31691: add category and differential</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eeeadf5aa539af8eb994705093f9972d12281c82\">eeeadf5</a></td><td><code>Trac #31691: more concrete examples</code></td></tr></table>\n",
    "created_at": "2021-04-20T17:10:53Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a050f71c38c0fbe768daf28e2009336276bff4fc">a050f71</a></td><td><code>Trac #31691: add category and differential</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eeeadf5aa539af8eb994705093f9972d12281c82">eeeadf5</a></td><td><code>Trac #31691: more concrete examples</code></td></tr></table>




---

archive/issue_comments_512529.json:
```json
{
    "body": "**Commit:** [eeeadf5aa539af8eb994705093f9972d12281c82](https://github.com/sagemath/sagetrac-mirror/commit/eeeadf5aa539af8eb994705093f9972d12281c82)",
    "created_at": "2021-04-20T17:10:53Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512529",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [eeeadf5aa539af8eb994705093f9972d12281c82](https://github.com/sagemath/sagetrac-mirror/commit/eeeadf5aa539af8eb994705093f9972d12281c82)



---

archive/issue_comments_512530.json:
```json
{
    "body": "<a id='comment:5'></a>\nHere is a first draft. Unfortunately I get an error with the current test:\n\n\n```\nsage: M = Manifold(2, 'M')\nsage: X.<x,y> = M.chart()\nsage: C = M.de_rham_complex()\nsage: d0 = C.differential(0); d0\nException raised:\n...\nValueError: Algebra of differentiable scalar fields on the 2-dimensional differentiable manifold M is not in Category of modules over Algebra of differentiable scalar fields on the 2-dimensional differentiable manifold M\n```\n\nThis is somewhat peculiar. Each algebra should automatically be a module over itself... Should I simply add the category to the scalar field algebra or does that need a broader fix?",
    "created_at": "2021-04-20T17:14:29Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512530",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:5'></a>
Here is a first draft. Unfortunately I get an error with the current test:


```
sage: M = Manifold(2, 'M')
sage: X.<x,y> = M.chart()
sage: C = M.de_rham_complex()
sage: d0 = C.differential(0); d0
Exception raised:
...
ValueError: Algebra of differentiable scalar fields on the 2-dimensional differentiable manifold M is not in Category of modules over Algebra of differentiable scalar fields on the 2-dimensional differentiable manifold M
```

This is somewhat peculiar. Each algebra should automatically be a module over itself... Should I simply add the category to the scalar field algebra or does that need a broader fix?



---

archive/issue_comments_512531.json:
```json
{
    "body": "**Changing commit** from \"[eeeadf5aa539af8eb994705093f9972d12281c82](https://github.com/sagemath/sagetrac-mirror/commit/eeeadf5aa539af8eb994705093f9972d12281c82)\" to \"[252cb8f157e8df943f2666ae1683397adb61ff79](https://github.com/sagemath/sagetrac-mirror/commit/252cb8f157e8df943f2666ae1683397adb61ff79)\".",
    "created_at": "2021-04-20T17:17:59Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[eeeadf5aa539af8eb994705093f9972d12281c82](https://github.com/sagemath/sagetrac-mirror/commit/eeeadf5aa539af8eb994705093f9972d12281c82)" to "[252cb8f157e8df943f2666ae1683397adb61ff79](https://github.com/sagemath/sagetrac-mirror/commit/252cb8f157e8df943f2666ae1683397adb61ff79)".



---

archive/issue_comments_512532.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/252cb8f157e8df943f2666ae1683397adb61ff79\">252cb8f</a></td><td><code>Trac #31691: invoke derivative instead of differential</code></td></tr></table>\n",
    "created_at": "2021-04-20T17:17:59Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512532",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/252cb8f157e8df943f2666ae1683397adb61ff79">252cb8f</a></td><td><code>Trac #31691: invoke derivative instead of differential</code></td></tr></table>




---

archive/issue_comments_512533.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [gh-mjungmath](#comment%3A5):\n> Here is a first draft. Unfortunately I get an error with the current test:\n> \n> \n> ```\n> sage: M = Manifold(2, 'M')\n> sage: X.<x,y> = M.chart()\n> sage: C = M.de_rham_complex()\n> sage: d0 = C.differential(0); d0\n> Exception raised:\n> ...\n> ValueError: Algebra of differentiable scalar fields on the 2-dimensional differentiable manifold M is not in Category of modules over Algebra of differentiable scalar fields on the 2-dimensional differentiable manifold M\n> ```\n> \n> This is somewhat peculiar. Each algebra should automatically be a module over itself... Should I simply add the category to the scalar field algebra or does that need a broader fix?\n\n\nSee #31713.",
    "created_at": "2021-04-22T11:53:31Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512533",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:8'></a>
Replying to [gh-mjungmath](#comment%3A5):
> Here is a first draft. Unfortunately I get an error with the current test:
> 
> 
> ```
> sage: M = Manifold(2, 'M')
> sage: X.<x,y> = M.chart()
> sage: C = M.de_rham_complex()
> sage: d0 = C.differential(0); d0
> Exception raised:
> ...
> ValueError: Algebra of differentiable scalar fields on the 2-dimensional differentiable manifold M is not in Category of modules over Algebra of differentiable scalar fields on the 2-dimensional differentiable manifold M
> ```
> 
> This is somewhat peculiar. Each algebra should automatically be a module over itself... Should I simply add the category to the scalar field algebra or does that need a broader fix?


See #31713.



---

archive/issue_comments_512534.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab3d601704d47453641f4e1a225a596784507a4b\">ab3d601</a></td><td><code>Trac #31691: de Rham cohomology ring</code></td></tr></table>\n",
    "created_at": "2021-04-22T21:21:17Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512534",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab3d601704d47453641f4e1a225a596784507a4b">ab3d601</a></td><td><code>Trac #31691: de Rham cohomology ring</code></td></tr></table>




---

archive/issue_comments_512535.json:
```json
{
    "body": "**Changing commit** from \"[252cb8f157e8df943f2666ae1683397adb61ff79](https://github.com/sagemath/sagetrac-mirror/commit/252cb8f157e8df943f2666ae1683397adb61ff79)\" to \"[ab3d601704d47453641f4e1a225a596784507a4b](https://github.com/sagemath/sagetrac-mirror/commit/ab3d601704d47453641f4e1a225a596784507a4b)\".",
    "created_at": "2021-04-22T21:21:17Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[252cb8f157e8df943f2666ae1683397adb61ff79](https://github.com/sagemath/sagetrac-mirror/commit/252cb8f157e8df943f2666ae1683397adb61ff79)" to "[ab3d601704d47453641f4e1a225a596784507a4b](https://github.com/sagemath/sagetrac-mirror/commit/ab3d601704d47453641f4e1a225a596784507a4b)".



---

archive/issue_comments_512536.json:
```json
{
    "body": "<a id='comment:10'></a>\nThis draft should already reflect what I have in mind. Comments are welcome.",
    "created_at": "2021-04-22T21:23:05Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512536",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:10'></a>
This draft should already reflect what I have in mind. Comments are welcome.



---

archive/issue_comments_512537.json:
```json
{
    "body": "<a id='comment:11'></a>\nI must apologize. I was extremely sloppy here: differentials are *no* morphisms in the category of modules over scalar fields, they are morphisms in the category of modules over `K`!\n\nI'll fix this.",
    "created_at": "2021-04-23T09:34:21Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512537",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:11'></a>
I must apologize. I was extremely sloppy here: differentials are *no* morphisms in the category of modules over scalar fields, they are morphisms in the category of modules over `K`!

I'll fix this.



---

archive/issue_comments_512538.json:
```json
{
    "body": "<a id='comment:12'></a>\nThat was expected. Same problem, but now with differential form modules not considered as vector spaces.\n\nThere should be *some* way to define these morphisms, no?",
    "created_at": "2021-04-23T18:32:59Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512538",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:12'></a>
That was expected. Same problem, but now with differential form modules not considered as vector spaces.

There should be *some* way to define these morphisms, no?



---

archive/issue_comments_512539.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4746ddb61e6d2da8e7d7b5e76d39772b286f56a2\">4746ddb</a></td><td><code>Trac #31691: turn mixed form algebra into de rham complex</code></td></tr></table>\n",
    "created_at": "2021-04-26T10:36:04Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512539",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4746ddb61e6d2da8e7d7b5e76d39772b286f56a2">4746ddb</a></td><td><code>Trac #31691: turn mixed form algebra into de rham complex</code></td></tr></table>




---

archive/issue_comments_512540.json:
```json
{
    "body": "**Changing commit** from \"[ab3d601704d47453641f4e1a225a596784507a4b](https://github.com/sagemath/sagetrac-mirror/commit/ab3d601704d47453641f4e1a225a596784507a4b)\" to \"[4746ddb61e6d2da8e7d7b5e76d39772b286f56a2](https://github.com/sagemath/sagetrac-mirror/commit/4746ddb61e6d2da8e7d7b5e76d39772b286f56a2)\".",
    "created_at": "2021-04-26T10:36:04Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512540",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ab3d601704d47453641f4e1a225a596784507a4b](https://github.com/sagemath/sagetrac-mirror/commit/ab3d601704d47453641f4e1a225a596784507a4b)" to "[4746ddb61e6d2da8e7d7b5e76d39772b286f56a2](https://github.com/sagemath/sagetrac-mirror/commit/4746ddb61e6d2da8e7d7b5e76d39772b286f56a2)".



---

archive/issue_events_284631.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2021-04-26T10:37:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31691#event-284631"
}
```



---

archive/issue_comments_512541.json:
```json
{
    "body": "<a id='comment:14'></a>\nReady for review.",
    "created_at": "2021-04-26T10:37:13Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512541",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:14'></a>
Ready for review.



---

archive/issue_comments_512542.json:
```json
{
    "body": "<a id='comment:15'></a>\nThis is just a first step.\n\nMy idea (not for this ticket): Optimally, we want to cover our manifold by contractible chart domains. Therefore it would be helpful if we could determine whether an open subset is contractible or not. Perhaps this needs some input from the user. But then, we can probably check for exactness (I still have to think about it) and, other than that, construct Cech cohomology.",
    "created_at": "2021-04-26T10:44:53Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512542",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:15'></a>
This is just a first step.

My idea (not for this ticket): Optimally, we want to cover our manifold by contractible chart domains. Therefore it would be helpful if we could determine whether an open subset is contractible or not. Perhaps this needs some input from the user. But then, we can probably check for exactness (I still have to think about it) and, other than that, construct Cech cohomology.



---

archive/issue_comments_512543.json:
```json
{
    "body": "<a id='comment:16'></a>\nP.S. I said \"simply connected\" in the first place, but of course I meant *contractible*.",
    "created_at": "2021-04-26T12:30:22Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512543",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:16'></a>
P.S. I said "simply connected" in the first place, but of course I meant *contractible*.



---

archive/issue_comments_512544.json:
```json
{
    "body": "**Author:** Michael Jung",
    "created_at": "2021-04-26T17:45:46Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512544",
    "user": "https://github.com/mjungmath"
}
```

**Author:** Michael Jung



---

archive/issue_events_284632.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2021-04-26T17:46:09Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "rename": {
        "from": "Turn mixed forms into de Rham complex",
        "to": "Turn mixed form algebra into de Rham complex"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31691#event-284632"
}
```



---

archive/issue_comments_512545.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n We turn the algebra of mixed differential forms into a de Rham complex and add it to the category of `ChainComplexes`, see #31669.\n+\n+Furthermore, we add de Rham cohomology to SageManifolds with limited functionality. For now, the implementation will only consist of abstract elements that are given by representatives of mixed forms, i.e. we take closed mixed forms (with check?), put a bracket around it and do all computations in the algebra of mixed forms. \n``````\n",
    "created_at": "2021-04-26T17:47:27Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512545",
    "user": "https://github.com/mjungmath"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 We turn the algebra of mixed differential forms into a de Rham complex and add it to the category of `ChainComplexes`, see #31669.
+
+Furthermore, we add de Rham cohomology to SageManifolds with limited functionality. For now, the implementation will only consist of abstract elements that are given by representatives of mixed forms, i.e. we take closed mixed forms (with check?), put a bracket around it and do all computations in the algebra of mixed forms. 
``````




---

archive/issue_comments_512546.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n We turn the algebra of mixed differential forms into a de Rham complex and add it to the category of `ChainComplexes`, see #31669.\n \n-Furthermore, we add de Rham cohomology to SageManifolds with limited functionality. For now, the implementation will only consist of abstract elements that are given by representatives of mixed forms, i.e. we take closed mixed forms (with check?), put a bracket around it and do all computations in the algebra of mixed forms. \n+Furthermore, we add de Rham cohomology to SageManifolds with limited functionality. For now, the implementation will only consist of abstract elements that are given by representatives of mixed forms, i.e. we take closed mixed forms, put a bracket around it and do all computations in the algebra of mixed forms. \n``````\n",
    "created_at": "2021-04-26T17:49:58Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512546",
    "user": "https://github.com/mjungmath"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 We turn the algebra of mixed differential forms into a de Rham complex and add it to the category of `ChainComplexes`, see #31669.
 
-Furthermore, we add de Rham cohomology to SageManifolds with limited functionality. For now, the implementation will only consist of abstract elements that are given by representatives of mixed forms, i.e. we take closed mixed forms (with check?), put a bracket around it and do all computations in the algebra of mixed forms. 
+Furthermore, we add de Rham cohomology to SageManifolds with limited functionality. For now, the implementation will only consist of abstract elements that are given by representatives of mixed forms, i.e. we take closed mixed forms, put a bracket around it and do all computations in the algebra of mixed forms. 
``````




---

archive/issue_comments_512547.json:
```json
{
    "body": "**Changing commit** from \"[4746ddb61e6d2da8e7d7b5e76d39772b286f56a2](https://github.com/sagemath/sagetrac-mirror/commit/4746ddb61e6d2da8e7d7b5e76d39772b286f56a2)\" to \"[fb8331abc00f6886b511819bff1e4116bb2e6d30](https://github.com/sagemath/sagetrac-mirror/commit/fb8331abc00f6886b511819bff1e4116bb2e6d30)\".",
    "created_at": "2021-04-28T07:22:05Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512547",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4746ddb61e6d2da8e7d7b5e76d39772b286f56a2](https://github.com/sagemath/sagetrac-mirror/commit/4746ddb61e6d2da8e7d7b5e76d39772b286f56a2)" to "[fb8331abc00f6886b511819bff1e4116bb2e6d30](https://github.com/sagemath/sagetrac-mirror/commit/fb8331abc00f6886b511819bff1e4116bb2e6d30)".



---

archive/issue_comments_512548.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb8331abc00f6886b511819bff1e4116bb2e6d30\">fb8331a</a></td><td><code>Trac #31691: fix doctest in manifold.py</code></td></tr></table>\n",
    "created_at": "2021-04-28T07:22:05Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb8331abc00f6886b511819bff1e4116bb2e6d30">fb8331a</a></td><td><code>Trac #31691: fix doctest in manifold.py</code></td></tr></table>




---

archive/issue_comments_512549.json:
```json
{
    "body": "<a id='comment:22'></a>\nPatchbot green.",
    "created_at": "2021-04-28T11:33:43Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512549",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:22'></a>
Patchbot green.



---

archive/issue_comments_512550.json:
```json
{
    "body": "<a id='comment:24'></a>\nI think it would be best to split off the cohomology ring into a separate file.\n\nDo you want to give a special (latex) name to `zero` and `one`?\n\nFor the class-level docstring of `DeRahmComologyRing`:\n\n```diff\n-Define the de Rham cohomology ring of a de Rham complex.\nThe de Rham cohomology ring of a de Rham complex.\n```\n\nI don't think you should assume that the parents are the same for `cup` (unlike what you can do for `_mul_`).\n\nIn your `cohomology()` method, you have both `\\left.` and `\\right.`. I don't understand the point of this.\n\nThe input block to `differential()` is over-indented. Also, remove the full-stop/period.",
    "created_at": "2021-04-30T06:21:41Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512550",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>
I think it would be best to split off the cohomology ring into a separate file.

Do you want to give a special (latex) name to `zero` and `one`?

For the class-level docstring of `DeRahmComologyRing`:

```diff
-Define the de Rham cohomology ring of a de Rham complex.
The de Rham cohomology ring of a de Rham complex.
```

I don't think you should assume that the parents are the same for `cup` (unlike what you can do for `_mul_`).

In your `cohomology()` method, you have both `\left.` and `\right.`. I don't understand the point of this.

The input block to `differential()` is over-indented. Also, remove the full-stop/period.



---

archive/issue_comments_512551.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [tscrim](#comment%3A24):\n> I think it would be best to split off the cohomology ring into a separate file.\n\n\nSounds reasonable.\n\n> \n> Do you want to give a special (latex) name to `zero` and `one`?\n> \n\n\nI don't think so. That would make more sense if we can distinguish cohomology classes properly.\n\n> For the class-level docstring of `DeRahmComologyRing`:\n> \n> ```diff\n> -Define the de Rham cohomology ring of a de Rham complex.\n> The de Rham cohomology ring of a de Rham complex.\n> ```\n\n\nThanks, done.\n\n> I don't think you should assume that the parents are the same for `cup` (unlike what you can do for `_mul_`).\n\n\nWhat do you mean?\n\n> In your `cohomology()` method, you have both `\\left.` and `\\right.`. I don't understand the point of this.\n\n\nThe point is that `\\middle/` has the appropriate size.\n\n> The input block to `differential()` is over-indented. Also, remove the full-stop/period.\n\n\nThanks, done.",
    "created_at": "2021-04-30T08:04:50Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512551",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:25'></a>
Replying to [tscrim](#comment%3A24):
> I think it would be best to split off the cohomology ring into a separate file.


Sounds reasonable.

> 
> Do you want to give a special (latex) name to `zero` and `one`?
> 


I don't think so. That would make more sense if we can distinguish cohomology classes properly.

> For the class-level docstring of `DeRahmComologyRing`:
> 
> ```diff
> -Define the de Rham cohomology ring of a de Rham complex.
> The de Rham cohomology ring of a de Rham complex.
> ```


Thanks, done.

> I don't think you should assume that the parents are the same for `cup` (unlike what you can do for `_mul_`).


What do you mean?

> In your `cohomology()` method, you have both `\left.` and `\right.`. I don't understand the point of this.


The point is that `\middle/` has the appropriate size.

> The input block to `differential()` is over-indented. Also, remove the full-stop/period.


Thanks, done.



---

archive/issue_comments_512552.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [gh-mjungmath](#comment%3A25):\n> Replying to [tscrim](#comment%3A24):\n> > I don't think you should assume that the parents are the same for `cup` (unlike what you can do for `_mul_`).\n\n> \n> What do you mean?\n\n\nIf you take the `cup` with something the coerces in (perhaps `2`?) but is not actually an element of the same parent, then it will either fail or could end up with an element that is not actually in the ring. However, for `_mul_`, this can never happen because the coercion framework would make sure both arguments belong to the same parent.",
    "created_at": "2021-04-30T08:08:39Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512552",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:26'></a>
Replying to [gh-mjungmath](#comment%3A25):
> Replying to [tscrim](#comment%3A24):
> > I don't think you should assume that the parents are the same for `cup` (unlike what you can do for `_mul_`).

> 
> What do you mean?


If you take the `cup` with something the coerces in (perhaps `2`?) but is not actually an element of the same parent, then it will either fail or could end up with an element that is not actually in the ring. However, for `_mul_`, this can never happen because the coercion framework would make sure both arguments belong to the same parent.



---

archive/issue_comments_512553.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [tscrim](#comment%3A26):\n> Replying to [gh-mjungmath](#comment%3A25):\n> > Replying to [tscrim](#comment%3A24):\n> > > I don't think you should assume that the parents are the same for `cup` (unlike what you can do for `_mul_`).\n\n> > \n> > What do you mean?\n\n> \n> If you take the `cup` with something the coerces in (perhaps `2`?) but is not actually an element of the same parent, then it will either fail or could end up with an element that is not actually in the ring. However, for `_mul_`, this can never happen because the coercion framework would make sure both arguments belong to the same parent.\n\n\nCurrently, there is not even a natural coercion implemented. The only coercion that would be admissible is the one from closed differential forms (and everything that is contained in it) into cohomology, but we don't have that subspace implemented. Therefore, it wouldn't even work with `_mul_`.",
    "created_at": "2021-04-30T08:12:53Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512553",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:27'></a>
Replying to [tscrim](#comment%3A26):
> Replying to [gh-mjungmath](#comment%3A25):
> > Replying to [tscrim](#comment%3A24):
> > > I don't think you should assume that the parents are the same for `cup` (unlike what you can do for `_mul_`).

> > 
> > What do you mean?

> 
> If you take the `cup` with something the coerces in (perhaps `2`?) but is not actually an element of the same parent, then it will either fail or could end up with an element that is not actually in the ring. However, for `_mul_`, this can never happen because the coercion framework would make sure both arguments belong to the same parent.


Currently, there is not even a natural coercion implemented. The only coercion that would be admissible is the one from closed differential forms (and everything that is contained in it) into cohomology, but we don't have that subspace implemented. Therefore, it wouldn't even work with `_mul_`.



---

archive/issue_comments_512554.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [gh-mjungmath](#comment%3A27):\n> Replying to [tscrim](#comment%3A26):\n> > Replying to [gh-mjungmath](#comment%3A25):\n> > > Replying to [tscrim](#comment%3A24):\n> > > > I don't think you should assume that the parents are the same for `cup` (unlike what you can do for `_mul_`).\n\n> > > \n> > > What do you mean?\n\n> > \n> > If you take the `cup` with something the coerces in (perhaps `2`?) but is not actually an element of the same parent, then it will either fail or could end up with an element that is not actually in the ring. However, for `_mul_`, this can never happen because the coercion framework would make sure both arguments belong to the same parent.\n\n> \n> Currently, there is not even a natural coercion implemented. The only coercion that would be admissible is the one from closed differential forms (and everything that is contained in it) into cohomology, but we don't have that subspace implemented. Therefore, it wouldn't even work with `_mul_`.\n\n\nHowever, it will fail with a much more reasonable message and it will be all setup for when there is a coercion implemented. Most importantly, it will handle the natural coercion from the scalar field into the ring, but `cup` will not. You should have `cup` simply redirect to `*`. This will also make it easier if this ever gets subclassed too.",
    "created_at": "2021-04-30T11:34:31Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512554",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>
Replying to [gh-mjungmath](#comment%3A27):
> Replying to [tscrim](#comment%3A26):
> > Replying to [gh-mjungmath](#comment%3A25):
> > > Replying to [tscrim](#comment%3A24):
> > > > I don't think you should assume that the parents are the same for `cup` (unlike what you can do for `_mul_`).

> > > 
> > > What do you mean?

> > 
> > If you take the `cup` with something the coerces in (perhaps `2`?) but is not actually an element of the same parent, then it will either fail or could end up with an element that is not actually in the ring. However, for `_mul_`, this can never happen because the coercion framework would make sure both arguments belong to the same parent.

> 
> Currently, there is not even a natural coercion implemented. The only coercion that would be admissible is the one from closed differential forms (and everything that is contained in it) into cohomology, but we don't have that subspace implemented. Therefore, it wouldn't even work with `_mul_`.


However, it will fail with a much more reasonable message and it will be all setup for when there is a coercion implemented. Most importantly, it will handle the natural coercion from the scalar field into the ring, but `cup` will not. You should have `cup` simply redirect to `*`. This will also make it easier if this ever gets subclassed too.



---

archive/issue_comments_512555.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [tscrim](#comment%3A28):\n> However, it will fail with a much more reasonable message and it will be all setup for when there is a coercion implemented. Most importantly, it will handle the natural coercion from the scalar field into the ring, but `cup` will not. You should have `cup` simply redirect to `*`. This will also make it easier if this ever gets subclassed too.\n\n\nIt will get subclassed. My idea is that a characteristic class becomes a subclass of `DeRhamCohomologyClass` with a dedicated `representative` method.",
    "created_at": "2021-04-30T16:24:51Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512555",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:29'></a>
Replying to [tscrim](#comment%3A28):
> However, it will fail with a much more reasonable message and it will be all setup for when there is a coercion implemented. Most importantly, it will handle the natural coercion from the scalar field into the ring, but `cup` will not. You should have `cup` simply redirect to `*`. This will also make it easier if this ever gets subclassed too.


It will get subclassed. My idea is that a characteristic class becomes a subclass of `DeRhamCohomologyClass` with a dedicated `representative` method.



---

archive/issue_comments_512556.json:
```json
{
    "body": "<a id='comment:30'></a>\nSo your idea is good. I will redirect `cup` to the product.",
    "created_at": "2021-04-30T16:25:16Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512556",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:30'></a>
So your idea is good. I will redirect `cup` to the product.



---

archive/issue_comments_512557.json:
```json
{
    "body": "**Changing commit** from \"[fb8331abc00f6886b511819bff1e4116bb2e6d30](https://github.com/sagemath/sagetrac-mirror/commit/fb8331abc00f6886b511819bff1e4116bb2e6d30)\" to \"[566176a74a480456b7836c13a173e217b721b70a](https://github.com/sagemath/sagetrac-mirror/commit/566176a74a480456b7836c13a173e217b721b70a)\".",
    "created_at": "2021-04-30T21:39:59Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512557",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fb8331abc00f6886b511819bff1e4116bb2e6d30](https://github.com/sagemath/sagetrac-mirror/commit/fb8331abc00f6886b511819bff1e4116bb2e6d30)" to "[566176a74a480456b7836c13a173e217b721b70a](https://github.com/sagemath/sagetrac-mirror/commit/566176a74a480456b7836c13a173e217b721b70a)".



---

archive/issue_comments_512558.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/566176a74a480456b7836c13a173e217b721b70a\">566176a</a></td><td><code>Trac #31691: new file + improved doc + cup product delegates to *</code></td></tr></table>\n",
    "created_at": "2021-04-30T21:39:59Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512558",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/566176a74a480456b7836c13a173e217b721b70a">566176a</a></td><td><code>Trac #31691: new file + improved doc + cup product delegates to *</code></td></tr></table>




---

archive/issue_comments_512559.json:
```json
{
    "body": "<a id='comment:32'></a>\nCommit pushed. Wait for patchbot.",
    "created_at": "2021-04-30T21:41:31Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512559",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:32'></a>
Commit pushed. Wait for patchbot.



---

archive/issue_comments_512560.json:
```json
{
    "body": "<a id='comment:33'></a>\nGreen bot => positive review",
    "created_at": "2021-04-30T22:11:22Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512560",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:33'></a>
Green bot => positive review



---

archive/issue_comments_512561.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2021-04-30T22:11:22Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512561",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_512562.json:
```json
{
    "body": "<a id='comment:34'></a>\nMorally green?",
    "created_at": "2021-05-01T10:08:53Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512562",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:34'></a>
Morally green?



---

archive/issue_events_284633.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-05-02T01:44:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31691#event-284633"
}
```



---

archive/issue_events_284634.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-05-02T01:44:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31691#event-284634"
}
```



---

archive/issue_comments_512563.json:
```json
{
    "body": "<a id='comment:36'></a>\nThanks for the review!",
    "created_at": "2021-05-08T13:25:33Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512563",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:36'></a>
Thanks for the review!



---

archive/issue_comments_512564.json:
```json
{
    "body": "**Changing branch** from \"[public/31691_de_rham_complex](https://github.com/sagemath/sagetrac-mirror/tree/public/31691_de_rham_complex)\" to \"[566176a74a480456b7836c13a173e217b721b70a](https://github.com/sagemath/sagetrac-mirror/commit/566176a74a480456b7836c13a173e217b721b70a)\".",
    "created_at": "2021-06-06T13:17:50Z",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31691#issuecomment-512564",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/31691_de_rham_complex](https://github.com/sagemath/sagetrac-mirror/tree/public/31691_de_rham_complex)" to "[566176a74a480456b7836c13a173e217b721b70a](https://github.com/sagemath/sagetrac-mirror/commit/566176a74a480456b7836c13a173e217b721b70a)".



---

archive/issue_events_284635.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-06T13:17:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31691#event-284635"
}
```



---

archive/issue_events_284636.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "08b5a55b44422fef824eaa3eaeb1ebc487de8b13",
    "created_at": "2021-06-06T13:17:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31691",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31691#event-284636"
}
```
