# Issue 31725: Implement meet, join, etc. methods for posets

archive/issues_031488.json:
```json
{
    "body": "`FinitePoset.meet(x, y)` computes the meet of two elements `x`, `y` in the poset, returning `None` if the meet doesn't exist.\n\nSimilar for `FinitePoset.join(x, y)`.\n\nCurrently, `FinitePoset._hasse_diagram` has `@lazy_attribute` `_meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n\n```\nsage: from sage.combinat.posets.hasse_diagram import HasseDiagram                     \nsage: h = HasseDiagram({0:[2], 1:[2,3], 2:[4], 3:[4], 4:[]})                \nsage: h._meet   \nTraceback (most recent call last)\n...\nValueError: not a meet-semilattice: no bottom element\n```\n\nWe propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`).\n\nFor the poset `h` above, we expect:\n\n```\nh._meet[2,3]\n1\nh._meet[0,1]\n-1\nsage: h.meet_matrix()   \nTraceback (most recent call last)\n...\nValueError: not a meet-semilattice: no bottom element\n```\n\nThen, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`.\n\nThis extends `meet` of a pair `x, y` in `FiniteMeetSemilattice` to non-semilattice finite poset. \n\n```\nsage: P = Poset({\"a\":[\"b\", \"c\", \"d\"], \"b\":[\"e\", \"f\"], \"c\":[\"f\"], \"d\":[\"f\", \"g\"]}\n....: )                                                                         \nsage: M = MeetSemilattice(P)                                                    \nsage: M.meet(\"f\",\"g\")                                                           \n'd'\nsage: P2 = Poset({\"b\":[\"e\", \"f\"], \"c\":[\"f\"], \"d\":[\"f\", \"g\"]})                    \nsage: M2 = MeetSemilattice(P)  \nTraceback (most recent call last)\n...\nValueError: not a meet-semilattice: no bottom element\n```\nFor the posets `P` and `P2` above, we expect:\n\n```\nsage: P.meet(\"f\",\"g\")                                                           \n'd'\nsage: P2.meet(\"f\",\"g\")\n'd'\n```\n\nIn addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n\n**CC:**  @mkoeppe @fchapoton @tscrim @slel\n\n**Keywords:** poset, hasse_diagram\n\n**Branch/Commit:** [a19697ff97092b9bd17bd4e01920a6cfa90b8d95](https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Yuan Zhou\n\nIssue created by migration from https://trac.sagemath.org/ticket/31725\n\n",
    "closed_at": "2021-06-19T20:58:03Z",
    "created_at": "2021-04-24T23:45:21Z",
    "labels": [
        "component: combinatorics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Implement meet, join, etc. methods for posets",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31725",
    "user": "https://github.com/yuan-zhou"
}
```
`FinitePoset.meet(x, y)` computes the meet of two elements `x`, `y` in the poset, returning `None` if the meet doesn't exist.

Similar for `FinitePoset.join(x, y)`.

Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute` `_meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.

```
sage: from sage.combinat.posets.hasse_diagram import HasseDiagram                     
sage: h = HasseDiagram({0:[2], 1:[2,3], 2:[4], 3:[4], 4:[]})                
sage: h._meet   
Traceback (most recent call last)
...
ValueError: not a meet-semilattice: no bottom element
```

We propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`).

For the poset `h` above, we expect:

```
h._meet[2,3]
1
h._meet[0,1]
-1
sage: h.meet_matrix()   
Traceback (most recent call last)
...
ValueError: not a meet-semilattice: no bottom element
```

Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`.

This extends `meet` of a pair `x, y` in `FiniteMeetSemilattice` to non-semilattice finite poset. 

```
sage: P = Poset({"a":["b", "c", "d"], "b":["e", "f"], "c":["f"], "d":["f", "g"]}
....: )                                                                         
sage: M = MeetSemilattice(P)                                                    
sage: M.meet("f","g")                                                           
'd'
sage: P2 = Poset({"b":["e", "f"], "c":["f"], "d":["f", "g"]})                    
sage: M2 = MeetSemilattice(P)  
Traceback (most recent call last)
...
ValueError: not a meet-semilattice: no bottom element
```
For the posets `P` and `P2` above, we expect:

```
sage: P.meet("f","g")                                                           
'd'
sage: P2.meet("f","g")
'd'
```

In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.

**CC:**  @mkoeppe @fchapoton @tscrim @slel

**Keywords:** poset, hasse_diagram

**Branch/Commit:** [a19697ff97092b9bd17bd4e01920a6cfa90b8d95](https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95)

**Reviewer:** Travis Scrimshaw

**Author:** Yuan Zhou

Issue created by migration from https://trac.sagemath.org/ticket/31725





---

archive/issue_comments_514754.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Similar methods `_meet`, `_join` exist in `Poset._hasse_diagram` but not yet in `Poset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.\n+Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `Poset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.\n \n-In addition, `Poset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n+In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n``````\n",
    "created_at": "2021-04-24T23:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514754",
    "user": "https://github.com/yuan-zhou"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Similar methods `_meet`, `_join` exist in `Poset._hasse_diagram` but not yet in `Poset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.
+Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `Poset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.
 
-In addition, `Poset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
+In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
``````




---

archive/issue_comments_514755.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `Poset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.\n+Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `FinitePoset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.\n \n In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n``````\n",
    "created_at": "2021-04-24T23:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514755",
    "user": "https://github.com/yuan-zhou"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `Poset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.
+Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `FinitePoset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.
 
 In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
``````




---

archive/issue_comments_514756.json:
```json
{
    "body": "**Branch:** [u/yzh/implement_meet__join__etc__methods_for_posets](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_meet__join__etc__methods_for_posets)",
    "created_at": "2021-04-25T00:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514756",
    "user": "https://github.com/yuan-zhou"
}
```

**Branch:** [u/yzh/implement_meet__join__etc__methods_for_posets](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_meet__join__etc__methods_for_posets)



---

archive/issue_comments_514757.json:
```json
{
    "body": "**Commit:** [287ec785acd6a520beae4f2f61523cc2e40ce9fa](https://github.com/sagemath/sagetrac-mirror/commit/287ec785acd6a520beae4f2f61523cc2e40ce9fa)",
    "created_at": "2021-04-25T03:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514757",
    "user": "https://github.com/tscrim"
}
```

**Commit:** [287ec785acd6a520beae4f2f61523cc2e40ce9fa](https://github.com/sagemath/sagetrac-mirror/commit/287ec785acd6a520beae4f2f61523cc2e40ce9fa)



---

archive/issue_comments_514758.json:
```json
{
    "body": "<a id='comment:4'></a>\nI don't understand why we need a `_meet` and `_join` method in `FinitePoset`. Those are implementation details in the backend.\n\n+1 for adding a `common_lower_covers` method.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/287ec785acd6a520beae4f2f61523cc2e40ce9fa\">287ec78</a></td><td><code>implement common_lower_covers</code></td></tr></table>\n",
    "created_at": "2021-04-25T03:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514758",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
I don't understand why we need a `_meet` and `_join` method in `FinitePoset`. Those are implementation details in the backend.

+1 for adding a `common_lower_covers` method.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/287ec785acd6a520beae4f2f61523cc2e40ce9fa">287ec78</a></td><td><code>implement common_lower_covers</code></td></tr></table>




---

archive/issue_comments_514759.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [tscrim](#comment%3A4):\n> I don't understand why we need a `_meet` and `_join` method in `FinitePoset`. Those are implementation details in the backend.\n> \n> +1 for adding a `common_lower_covers` method.\n\n\nIn fact, I meant `FinitePoset.meet(x, y)` for two given elements x and y in the poset, even for poset such that `poset.has_bottom()` is `False`. Now reading the code more carefully, I realize that this is not exactly the same as `poset._hasse_diagram._meet`, which gives the `meet_matrix` in the case of a meet-semilattice and raises an error otherwise.",
    "created_at": "2021-04-25T04:29:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514759",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:5'></a>
Replying to [tscrim](#comment%3A4):
> I don't understand why we need a `_meet` and `_join` method in `FinitePoset`. Those are implementation details in the backend.
> 
> +1 for adding a `common_lower_covers` method.


In fact, I meant `FinitePoset.meet(x, y)` for two given elements x and y in the poset, even for poset such that `poset.has_bottom()` is `False`. Now reading the code more carefully, I realize that this is not exactly the same as `poset._hasse_diagram._meet`, which gives the `meet_matrix` in the case of a meet-semilattice and raises an error otherwise.



---

archive/issue_comments_514760.json:
```json
{
    "body": "<a id='comment:6'></a>\nI'm also wondering if `@lazy_attribute HasseDiagram._meet` (and also `_join`) raises Error and refuses to compute the matrix too often. I think it would be better to set the xy-entry of the meet matrix to `None` when the meet of x, y doesn't exists, and then push the checks for the `ValueError(\"not a meet-semilattice...\")` and `LatticeError('meet')` to where it needs.",
    "created_at": "2021-04-25T04:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514760",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:6'></a>
I'm also wondering if `@lazy_attribute HasseDiagram._meet` (and also `_join`) raises Error and refuses to compute the matrix too often. I think it would be better to set the xy-entry of the meet matrix to `None` when the meet of x, y doesn't exists, and then push the checks for the `ValueError("not a meet-semilattice...")` and `LatticeError('meet')` to where it needs.



---

archive/issue_comments_514761.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,14 @@\n-Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `FinitePoset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.\n+`FinitePoset.meet(x, y)` takes:\n+\n+Input: two elements `x` and `y` of the `poset` (type: `FinitePoset`).\n+\n+Output: an element of `poset` which is the meet of `x` and `y`, if the meet exists; `None` otherwise.\n+\n+Similar for `FinitePoset.join(x, y)`.\n+\n+\n+Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice or if there is a pair of x and y whose meet doesn't exist. \n+\n+We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `None` if the meet of `x` and `y` doesn't exist, instead of raising an Error. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.\n \n In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n``````\n",
    "created_at": "2021-04-25T05:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514761",
    "user": "https://github.com/yuan-zhou"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,14 @@
-Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `FinitePoset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.
+`FinitePoset.meet(x, y)` takes:
+
+Input: two elements `x` and `y` of the `poset` (type: `FinitePoset`).
+
+Output: an element of `poset` which is the meet of `x` and `y`, if the meet exists; `None` otherwise.
+
+Similar for `FinitePoset.join(x, y)`.
+
+
+Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice or if there is a pair of x and y whose meet doesn't exist. 
+
+We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `None` if the meet of `x` and `y` doesn't exist, instead of raising an Error. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.
 
 In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
``````




---

archive/issue_comments_514762.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n Similar for `FinitePoset.join(x, y)`.\n \n \n-Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice or if there is a pair of x and y whose meet doesn't exist. \n+Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n \n We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `None` if the meet of `x` and `y` doesn't exist, instead of raising an Error. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.\n \n``````\n",
    "created_at": "2021-04-25T05:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514762",
    "user": "https://github.com/yuan-zhou"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
 Similar for `FinitePoset.join(x, y)`.
 
 
-Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice or if there is a pair of x and y whose meet doesn't exist. 
+Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.
 
 We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `None` if the meet of `x` and `y` doesn't exist, instead of raising an Error. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.
 
``````




---

archive/issue_comments_514763.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,6 +9,6 @@\n \n Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n \n-We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `None` if the meet of `x` and `y` doesn't exist, instead of raising an Error. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.\n+We propose to change `HasseDiagram._meet` (resp. `_join`) (resp. `join_matrix`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()`. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.\n \n In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n``````\n",
    "created_at": "2021-04-25T05:44:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514763",
    "user": "https://github.com/yuan-zhou"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,6 +9,6 @@
 
 Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.
 
-We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `None` if the meet of `x` and `y` doesn't exist, instead of raising an Error. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.
+We propose to change `HasseDiagram._meet` (resp. `_join`) (resp. `join_matrix`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()`. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.
 
 In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
``````




---

archive/issue_comments_514764.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,6 +9,6 @@\n \n Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n \n-We propose to change `HasseDiagram._meet` (resp. `_join`) (resp. `join_matrix`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()`. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.\n+We propose to change `HasseDiagram._meet` (resp. `_join`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.\n \n In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n``````\n",
    "created_at": "2021-04-25T05:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514764",
    "user": "https://github.com/yuan-zhou"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,6 +9,6 @@
 
 Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.
 
-We propose to change `HasseDiagram._meet` (resp. `_join`) (resp. `join_matrix`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()`. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.
+We propose to change `HasseDiagram._meet` (resp. `_join`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.
 
 In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
``````




---

archive/issue_comments_514765.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,9 +6,24 @@\n \n Similar for `FinitePoset.join(x, y)`.\n \n-\n Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n \n-We propose to change `HasseDiagram._meet` (resp. `_join`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.\n+```\n+sage: from sage.combinat.posets.hasse_diagram import HasseDiagram                     \n+sage: h = HasseDiagram({0:[2], 1:[2,3], 2:[4], 3:[4], 4:[]})                \n+sage: h._meet   \n+Traceback (most recent call last)\n+...\n+ValueError: not a meet-semilattice: no bottom element\n+```\n+\n+\n+We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to where it needs.\n+Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`, \n+\n+```\n+h._meet[2,3]\n+1\n+```\n \n In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n``````\n",
    "created_at": "2021-04-25T06:16:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514765",
    "user": "https://github.com/yuan-zhou"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,9 +6,24 @@
 
 Similar for `FinitePoset.join(x, y)`.
 
-
 Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.
 
-We propose to change `HasseDiagram._meet` (resp. `_join`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.
+```
+sage: from sage.combinat.posets.hasse_diagram import HasseDiagram                     
+sage: h = HasseDiagram({0:[2], 1:[2,3], 2:[4], 3:[4], 4:[]})                
+sage: h._meet   
+Traceback (most recent call last)
+...
+ValueError: not a meet-semilattice: no bottom element
+```
+
+
+We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to where it needs.
+Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`, 
+
+```
+h._meet[2,3]
+1
+```
 
 In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
``````




---

archive/issue_comments_514766.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d\">a155f41</a></td><td><code>change HasseDiagram._meet/_join to allow non meet/join-semilattice</code></td></tr></table>\n",
    "created_at": "2021-04-25T09:12:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514766",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d">a155f41</a></td><td><code>change HasseDiagram._meet/_join to allow non meet/join-semilattice</code></td></tr></table>




---

archive/issue_comments_514767.json:
```json
{
    "body": "**Changing commit** from \"[287ec785acd6a520beae4f2f61523cc2e40ce9fa](https://github.com/sagemath/sagetrac-mirror/commit/287ec785acd6a520beae4f2f61523cc2e40ce9fa)\" to \"[a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d](https://github.com/sagemath/sagetrac-mirror/commit/a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d)\".",
    "created_at": "2021-04-25T09:12:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514767",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[287ec785acd6a520beae4f2f61523cc2e40ce9fa](https://github.com/sagemath/sagetrac-mirror/commit/287ec785acd6a520beae4f2f61523cc2e40ce9fa)" to "[a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d](https://github.com/sagemath/sagetrac-mirror/commit/a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d)".



---

archive/issue_comments_514768.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,10 +1,11 @@\n-`FinitePoset.meet(x, y)` takes:\n+`FinitePoset.meet(x, y=None)` takes input:\n \n-Input: two elements `x` and `y` of the `poset` (type: `FinitePoset`).\n+-  ``x, y`` -- two elements of the poset OR\n+-  ``x`` -- a list or tuple of elements\n \n-Output: an element of `poset` which is the meet of `x` and `y`, if the meet exists; `None` otherwise.\n+Return the meet of given elements in the poset if the meet exists; `None` otherwise.\n \n-Similar for `FinitePoset.join(x, y)`.\n+Similar for `FinitePoset.join(x, y=None)`.\n \n Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n \n@@ -18,12 +19,42 @@\n ```\n \n \n-We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to where it needs.\n-Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`, \n+We propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). We expect to have\n \n ```\n h._meet[2,3]\n 1\n+h._meet[0,1]\n+-1\n+sage: h.meet_martrix()   \n+Traceback (most recent call last)\n+...\n+ValueError: not a meet-semilattice: no bottom element\n+```\n+\n+Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`.\n+\n+This extends the `meet` method current defined on `FiniteMeetSemilattice.meet` to non-semilattice finite poset.\n+\n+```\n+sage: P = Poset({\"a\":[\"b\", \"c\", \"d\"], \"b\":[\"e\", \"f\"], \"c\":[\"f\"], \"d\":[\"f\", \"g\"]}\n+....: )                                                                         \n+sage: M = MeetSemilattice(P)                                                    \n+sage: M.meet(\"f\",\"g\")                                                           \n+'d'\n+sage: P2 = Poset({\"b\":[\"e\", \"f\"], \"c\":[\"f\"], \"d\":[\"f\", \"g\"]})                    \n+sage: M2 = MeetSemilattice(P)  \n+Traceback (most recent call last)\n+...\n+ValueError: not a meet-semilattice: no bottom element\n+```\n+We expect to have\n+\n+```\n+sage: P.meet(\"f\",\"g\")                                                           \n+'d'\n+sage: P2.meet(\"f\",\"g\")\n+'d'\n ```\n \n In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n``````\n",
    "created_at": "2021-04-25T09:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514768",
    "user": "https://github.com/yuan-zhou"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,10 +1,11 @@
-`FinitePoset.meet(x, y)` takes:
+`FinitePoset.meet(x, y=None)` takes input:
 
-Input: two elements `x` and `y` of the `poset` (type: `FinitePoset`).
+-  ``x, y`` -- two elements of the poset OR
+-  ``x`` -- a list or tuple of elements
 
-Output: an element of `poset` which is the meet of `x` and `y`, if the meet exists; `None` otherwise.
+Return the meet of given elements in the poset if the meet exists; `None` otherwise.
 
-Similar for `FinitePoset.join(x, y)`.
+Similar for `FinitePoset.join(x, y=None)`.
 
 Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.
 
@@ -18,12 +19,42 @@
 ```
 
 
-We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to where it needs.
-Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`, 
+We propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). We expect to have
 
 ```
 h._meet[2,3]
 1
+h._meet[0,1]
+-1
+sage: h.meet_martrix()   
+Traceback (most recent call last)
+...
+ValueError: not a meet-semilattice: no bottom element
+```
+
+Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`.
+
+This extends the `meet` method current defined on `FiniteMeetSemilattice.meet` to non-semilattice finite poset.
+
+```
+sage: P = Poset({"a":["b", "c", "d"], "b":["e", "f"], "c":["f"], "d":["f", "g"]}
+....: )                                                                         
+sage: M = MeetSemilattice(P)                                                    
+sage: M.meet("f","g")                                                           
+'d'
+sage: P2 = Poset({"b":["e", "f"], "c":["f"], "d":["f", "g"]})                    
+sage: M2 = MeetSemilattice(P)  
+Traceback (most recent call last)
+...
+ValueError: not a meet-semilattice: no bottom element
+```
+We expect to have
+
+```
+sage: P.meet("f","g")                                                           
+'d'
+sage: P2.meet("f","g")
+'d'
 ```
 
 In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
``````




---

archive/issue_comments_514769.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,9 +1,4 @@\n-`FinitePoset.meet(x, y=None)` takes input:\n-\n--  ``x, y`` -- two elements of the poset OR\n--  ``x`` -- a list or tuple of elements\n-\n-Return the meet of given elements in the poset if the meet exists; `None` otherwise.\n+`FinitePoset.meet(x, y)` computes the meet of two elements `x, y` in the poset; return `None` if the meet doesn't exist.\n \n Similar for `FinitePoset.join(x, y=None)`.\n \n@@ -34,7 +29,7 @@\n \n Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`.\n \n-This extends the `meet` method current defined on `FiniteMeetSemilattice.meet` to non-semilattice finite poset.\n+This extends `meet` of a pair `x, y` in `FiniteMeetSemilattice` to non-semilattice finite poset. \n \n ```\n sage: P = Poset({\"a\":[\"b\", \"c\", \"d\"], \"b\":[\"e\", \"f\"], \"c\":[\"f\"], \"d\":[\"f\", \"g\"]}\n``````\n",
    "created_at": "2021-04-25T09:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514769",
    "user": "https://github.com/yuan-zhou"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,9 +1,4 @@
-`FinitePoset.meet(x, y=None)` takes input:
-
--  ``x, y`` -- two elements of the poset OR
--  ``x`` -- a list or tuple of elements
-
-Return the meet of given elements in the poset if the meet exists; `None` otherwise.
+`FinitePoset.meet(x, y)` computes the meet of two elements `x, y` in the poset; return `None` if the meet doesn't exist.
 
 Similar for `FinitePoset.join(x, y=None)`.
 
@@ -34,7 +29,7 @@
 
 Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`.
 
-This extends the `meet` method current defined on `FiniteMeetSemilattice.meet` to non-semilattice finite poset.
+This extends `meet` of a pair `x, y` in `FiniteMeetSemilattice` to non-semilattice finite poset. 
 
 ```
 sage: P = Poset({"a":["b", "c", "d"], "b":["e", "f"], "c":["f"], "d":["f", "g"]}
``````




---

archive/issue_comments_514770.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n-`FinitePoset.meet(x, y)` computes the meet of two elements `x, y` in the poset; return `None` if the meet doesn't exist.\n+`FinitePoset.meet(x, y)` computes the meet of two elements `x`, `y` in the poset, returning `None` if the meet doesn't exist.\n \n-Similar for `FinitePoset.join(x, y=None)`.\n+Similar for `FinitePoset.join(x, y)`.\n \n-Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n+Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute` `_meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n \n ```\n sage: from sage.combinat.posets.hasse_diagram import HasseDiagram                     \n@@ -13,15 +13,16 @@\n ValueError: not a meet-semilattice: no bottom element\n ```\n \n+We propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`).\n \n-We propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). We expect to have\n+For the poset `h` above, we expect:\n \n ```\n h._meet[2,3]\n 1\n h._meet[0,1]\n -1\n-sage: h.meet_martrix()   \n+sage: h.meet_matrix()   \n Traceback (most recent call last)\n ...\n ValueError: not a meet-semilattice: no bottom element\n@@ -43,7 +44,7 @@\n ...\n ValueError: not a meet-semilattice: no bottom element\n ```\n-We expect to have\n+For the posets `P` and `P2` above, we expect:\n \n ```\n sage: P.meet(\"f\",\"g\")                                                           \n``````\n",
    "created_at": "2021-04-25T10:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514770",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
-`FinitePoset.meet(x, y)` computes the meet of two elements `x, y` in the poset; return `None` if the meet doesn't exist.
+`FinitePoset.meet(x, y)` computes the meet of two elements `x`, `y` in the poset, returning `None` if the meet doesn't exist.
 
-Similar for `FinitePoset.join(x, y=None)`.
+Similar for `FinitePoset.join(x, y)`.
 
-Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.
+Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute` `_meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.
 
 ```
 sage: from sage.combinat.posets.hasse_diagram import HasseDiagram                     
@@ -13,15 +13,16 @@
 ValueError: not a meet-semilattice: no bottom element
 ```
 
+We propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`).
 
-We propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). We expect to have
+For the poset `h` above, we expect:
 
 ```
 h._meet[2,3]
 1
 h._meet[0,1]
 -1
-sage: h.meet_martrix()   
+sage: h.meet_matrix()   
 Traceback (most recent call last)
 ...
 ValueError: not a meet-semilattice: no bottom element
@@ -43,7 +44,7 @@
 ...
 ValueError: not a meet-semilattice: no bottom element
 ```
-We expect to have
+For the posets `P` and `P2` above, we expect:
 
 ```
 sage: P.meet("f","g")                                                           
``````




---

archive/issue_comments_514771.json:
```json
{
    "body": "<a id='comment:16'></a>\nQuestion: Why is the following not allowed?\n\n```\nsage: E = LatticePoset({})\nsage: Poset({0: [1]}).is_lattice()\nTrue\nsage: P = MeetSemilattice({0: [1]})\nsage: E.is_sublattice(P)\nTraceback (most recent call last):\n...\nTypeError: other is not a lattice\n```",
    "created_at": "2021-04-25T10:57:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514771",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:16'></a>
Question: Why is the following not allowed?

```
sage: E = LatticePoset({})
sage: Poset({0: [1]}).is_lattice()
True
sage: P = MeetSemilattice({0: [1]})
sage: E.is_sublattice(P)
Traceback (most recent call last):
...
TypeError: other is not a lattice
```



---

archive/issue_comments_514772.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04f153f09518ea7ffca7ab55fa68bacf4143b7e1\">04f153f</a></td><td><code>change calls of _meet/_join to meet_matrix()/join_matrix() which include checks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a32c9dbb59f1bd07fa6b321368fe6339b44cdef\">2a32c9d</a></td><td><code>implement meet/join methods for posets that are not meet/join-semilattices</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9a42fd01c05d4e892aa08ceadb26095aaf77f78\">e9a42fd</a></td><td><code>change doctests regarding LatticePoset.is_sublattice(MeetSemilattice or JoinSemilattice)</code></td></tr></table>\n",
    "created_at": "2021-04-25T11:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514772",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04f153f09518ea7ffca7ab55fa68bacf4143b7e1">04f153f</a></td><td><code>change calls of _meet/_join to meet_matrix()/join_matrix() which include checks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a32c9dbb59f1bd07fa6b321368fe6339b44cdef">2a32c9d</a></td><td><code>implement meet/join methods for posets that are not meet/join-semilattices</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9a42fd01c05d4e892aa08ceadb26095aaf77f78">e9a42fd</a></td><td><code>change doctests regarding LatticePoset.is_sublattice(MeetSemilattice or JoinSemilattice)</code></td></tr></table>




---

archive/issue_comments_514773.json:
```json
{
    "body": "**Changing commit** from \"[a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d](https://github.com/sagemath/sagetrac-mirror/commit/a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d)\" to \"[e9a42fd01c05d4e892aa08ceadb26095aaf77f78](https://github.com/sagemath/sagetrac-mirror/commit/e9a42fd01c05d4e892aa08ceadb26095aaf77f78)\".",
    "created_at": "2021-04-25T11:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514773",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d](https://github.com/sagemath/sagetrac-mirror/commit/a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d)" to "[e9a42fd01c05d4e892aa08ceadb26095aaf77f78](https://github.com/sagemath/sagetrac-mirror/commit/e9a42fd01c05d4e892aa08ceadb26095aaf77f78)".



---

archive/issue_events_289654.json:
```json
{
    "actor": "https://github.com/yuan-zhou",
    "created_at": "2021-04-25T11:25:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31725#event-289654"
}
```



---

archive/issue_comments_514774.json:
```json
{
    "body": "**Author:** Yuan Zhou",
    "created_at": "2021-04-25T11:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514774",
    "user": "https://github.com/yuan-zhou"
}
```

**Author:** Yuan Zhou



---

archive/issue_comments_514775.json:
```json
{
    "body": "**Changing commit** from \"[e9a42fd01c05d4e892aa08ceadb26095aaf77f78](https://github.com/sagemath/sagetrac-mirror/commit/e9a42fd01c05d4e892aa08ceadb26095aaf77f78)\" to \"[fa07859f935f00630bdf5890e2e01a482a8e6cd4](https://github.com/sagemath/sagetrac-mirror/commit/fa07859f935f00630bdf5890e2e01a482a8e6cd4)\".",
    "created_at": "2021-04-25T11:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514775",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e9a42fd01c05d4e892aa08ceadb26095aaf77f78](https://github.com/sagemath/sagetrac-mirror/commit/e9a42fd01c05d4e892aa08ceadb26095aaf77f78)" to "[fa07859f935f00630bdf5890e2e01a482a8e6cd4](https://github.com/sagemath/sagetrac-mirror/commit/fa07859f935f00630bdf5890e2e01a482a8e6cd4)".



---

archive/issue_comments_514776.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa07859f935f00630bdf5890e2e01a482a8e6cd4\">fa07859</a></td><td><code>add doctest allowing LatticePoset.is_sublattice(FinitePoset)</code></td></tr></table>\n",
    "created_at": "2021-04-25T11:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514776",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa07859f935f00630bdf5890e2e01a482a8e6cd4">fa07859</a></td><td><code>add doctest allowing LatticePoset.is_sublattice(FinitePoset)</code></td></tr></table>




---

archive/issue_comments_514777.json:
```json
{
    "body": "<a id='comment:21'></a>\nThe semilattice check can be quite slow with your proposal as it is done every time the `meet_matrix()` is called. I think you should define a new attribute `_semilattice_failure = None` on initialization. Then when `_meet` is called, it sets this attribute to an invalid pair (and perhaps `()` if successful). Then the check in `meet_matrix()` becomes:\n\n```python\nif (n != 0) and (not self.has_bottom()):\n    raise ValueError(\"not a meet-semilattice: no bottom element\")\n# call the attribute to build the matrix and sets _semilattice_failure\nmt = self._meet\nif self._semilattice_failure:\n    x, y = self._is_meet_semilattice\n    raise LatticeError('meet', x, y)\n```",
    "created_at": "2021-04-26T00:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514777",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>
The semilattice check can be quite slow with your proposal as it is done every time the `meet_matrix()` is called. I think you should define a new attribute `_semilattice_failure = None` on initialization. Then when `_meet` is called, it sets this attribute to an invalid pair (and perhaps `()` if successful). Then the check in `meet_matrix()` becomes:

```python
if (n != 0) and (not self.has_bottom()):
    raise ValueError("not a meet-semilattice: no bottom element")
# call the attribute to build the matrix and sets _semilattice_failure
mt = self._meet
if self._semilattice_failure:
    x, y = self._is_meet_semilattice
    raise LatticeError('meet', x, y)
```



---

archive/issue_comments_514778.json:
```json
{
    "body": "**Changing commit** from \"[fa07859f935f00630bdf5890e2e01a482a8e6cd4](https://github.com/sagemath/sagetrac-mirror/commit/fa07859f935f00630bdf5890e2e01a482a8e6cd4)\" to \"[a19697ff97092b9bd17bd4e01920a6cfa90b8d95](https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95)\".",
    "created_at": "2021-04-26T03:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514778",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fa07859f935f00630bdf5890e2e01a482a8e6cd4](https://github.com/sagemath/sagetrac-mirror/commit/fa07859f935f00630bdf5890e2e01a482a8e6cd4)" to "[a19697ff97092b9bd17bd4e01920a6cfa90b8d95](https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95)".



---

archive/issue_comments_514779.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95\">a19697f</a></td><td><code>new attributes HasseDiagram._meet/join_semilattice_failure</code></td></tr></table>\n",
    "created_at": "2021-04-26T03:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514779",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95">a19697f</a></td><td><code>new attributes HasseDiagram._meet/join_semilattice_failure</code></td></tr></table>




---

archive/issue_comments_514780.json:
```json
{
    "body": "<a id='comment:23'></a>\nThanks, Travis! I made the change according to your suggestion.",
    "created_at": "2021-04-26T03:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514780",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:23'></a>
Thanks, Travis! I made the change according to your suggestion.



---

archive/issue_comments_514781.json:
```json
{
    "body": "<a id='comment:24'></a>\nI like your solution. Thank you. LGTM.",
    "created_at": "2021-04-28T02:33:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514781",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>
I like your solution. Thank you. LGTM.



---

archive/issue_comments_514782.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2021-04-28T02:33:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514782",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_events_289655.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-04-28T02:33:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31725#event-289655"
}
```



---

archive/issue_events_289656.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-04-28T02:33:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31725#event-289656"
}
```



---

archive/issue_comments_514783.json:
```json
{
    "body": "**Changing branch** from \"[u/yzh/implement_meet__join__etc__methods_for_posets](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_meet__join__etc__methods_for_posets)\" to \"[a19697ff97092b9bd17bd4e01920a6cfa90b8d95](https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95)\".",
    "created_at": "2021-06-19T20:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31725#issuecomment-514783",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/yzh/implement_meet__join__etc__methods_for_posets](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_meet__join__etc__methods_for_posets)" to "[a19697ff97092b9bd17bd4e01920a6cfa90b8d95](https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95)".



---

archive/issue_events_289657.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-19T20:58:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31725#event-289657"
}
```



---

archive/issue_events_289658.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-19T20:58:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31725",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31725#event-289658"
}
```
