# Issue 31725: Implement meet, join, etc. methods for posets

archive/issues_031488.json:
```json
{
    "assignees": [],
    "body": "`FinitePoset.meet(x, y)` computes the meet of two elements `x`, `y` in the poset, returning `None` if the meet doesn't exist.\n\nSimilar for `FinitePoset.join(x, y)`.\n\nCurrently, `FinitePoset._hasse_diagram` has `@lazy_attribute` `_meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n\n```\nsage: from sage.combinat.posets.hasse_diagram import HasseDiagram                     \nsage: h = HasseDiagram({0:[2], 1:[2,3], 2:[4], 3:[4], 4:[]})                \nsage: h._meet   \nTraceback (most recent call last)\n...\nValueError: not a meet-semilattice: no bottom element\n```\n\nWe propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`).\n\nFor the poset `h` above, we expect:\n\n```\nh._meet[2,3]\n1\nh._meet[0,1]\n-1\nsage: h.meet_matrix()   \nTraceback (most recent call last)\n...\nValueError: not a meet-semilattice: no bottom element\n```\n\nThen, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`.\n\nThis extends `meet` of a pair `x, y` in `FiniteMeetSemilattice` to non-semilattice finite poset. \n\n```\nsage: P = Poset({\"a\":[\"b\", \"c\", \"d\"], \"b\":[\"e\", \"f\"], \"c\":[\"f\"], \"d\":[\"f\", \"g\"]}\n....: )                                                                         \nsage: M = MeetSemilattice(P)                                                    \nsage: M.meet(\"f\",\"g\")                                                           \n'd'\nsage: P2 = Poset({\"b\":[\"e\", \"f\"], \"c\":[\"f\"], \"d\":[\"f\", \"g\"]})                    \nsage: M2 = MeetSemilattice(P)  \nTraceback (most recent call last)\n...\nValueError: not a meet-semilattice: no bottom element\n```\nFor the posets `P` and `P2` above, we expect:\n\n```\nsage: P.meet(\"f\",\"g\")                                                           \n'd'\nsage: P2.meet(\"f\",\"g\")\n'd'\n```\n\nIn addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n\nCC:  @mkoeppe @fchapoton @tscrim @slel\n\nKeywords: **poset, hasse_diagram**\n\nBranch/Commit: **[`a19697f`](https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Yuan Zhou**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31725_\n\n",
    "closed_at": "2021-06-19T20:58:03Z",
    "created_at": "2021-04-24T23:45:21Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement meet, join, etc. methods for posets",
    "type": "issue",
    "updated_at": "2021-06-19T20:58:03Z",
    "url": "https://github.com/sagemath/sage/issues/31725",
    "user": "https://github.com/yuan-zhou"
}
```
`FinitePoset.meet(x, y)` computes the meet of two elements `x`, `y` in the poset, returning `None` if the meet doesn't exist.

Similar for `FinitePoset.join(x, y)`.

Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute` `_meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.

```
sage: from sage.combinat.posets.hasse_diagram import HasseDiagram                     
sage: h = HasseDiagram({0:[2], 1:[2,3], 2:[4], 3:[4], 4:[]})                
sage: h._meet   
Traceback (most recent call last)
...
ValueError: not a meet-semilattice: no bottom element
```

We propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`).

For the poset `h` above, we expect:

```
h._meet[2,3]
1
h._meet[0,1]
-1
sage: h.meet_matrix()   
Traceback (most recent call last)
...
ValueError: not a meet-semilattice: no bottom element
```

Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`.

This extends `meet` of a pair `x, y` in `FiniteMeetSemilattice` to non-semilattice finite poset. 

```
sage: P = Poset({"a":["b", "c", "d"], "b":["e", "f"], "c":["f"], "d":["f", "g"]}
....: )                                                                         
sage: M = MeetSemilattice(P)                                                    
sage: M.meet("f","g")                                                           
'd'
sage: P2 = Poset({"b":["e", "f"], "c":["f"], "d":["f", "g"]})                    
sage: M2 = MeetSemilattice(P)  
Traceback (most recent call last)
...
ValueError: not a meet-semilattice: no bottom element
```
For the posets `P` and `P2` above, we expect:

```
sage: P.meet("f","g")                                                           
'd'
sage: P2.meet("f","g")
'd'
```

In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.

CC:  @mkoeppe @fchapoton @tscrim @slel

Keywords: **poset, hasse_diagram**

Branch/Commit: **[`a19697f`](https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95)**

Reviewer: **Travis Scrimshaw**

Author: **Yuan Zhou**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/31725_





---

archive/issue_events_434404.json:
```json
{
    "actor": "https://github.com/yuan-zhou",
    "created_at": "2021-04-24T23:45:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31725#event-434404"
}
```



---

archive/issue_events_434405.json:
```json
{
    "actor": "https://github.com/yuan-zhou",
    "created_at": "2021-04-24T23:45:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31725#event-434405"
}
```



---

archive/issue_events_434406.json:
```json
{
    "actor": "https://github.com/yuan-zhou",
    "created_at": "2021-04-24T23:45:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31725#event-434406"
}
```



---

archive/issue_events_434407.json:
```json
{
    "actor": "https://github.com/yuan-zhou",
    "created_at": "2021-04-24T23:45:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31725#event-434407"
}
```



---

archive/issue_comments_510313.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Similar methods `_meet`, `_join` exist in `Poset._hasse_diagram` but not yet in `Poset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.\n+Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `Poset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.\n \n-In addition, `Poset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n+In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n``````\n",
    "created_at": "2021-04-24T23:59:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510313",
    "user": "https://github.com/yuan-zhou"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Similar methods `_meet`, `_join` exist in `Poset._hasse_diagram` but not yet in `Poset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.
+Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `Poset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.
 
-In addition, `Poset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
+In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
``````




---

archive/issue_comments_510314.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `Poset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.\n+Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `FinitePoset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.\n \n In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n``````\n",
    "created_at": "2021-04-24T23:59:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510314",
    "user": "https://github.com/yuan-zhou"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `Poset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.
+Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `FinitePoset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.
 
 In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
``````




---

archive/issue_comments_510315.json:
```json
{
    "body": "Branch: **[u/yzh/implement_meet__join__etc__methods_for_posets](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_meet__join__etc__methods_for_posets)**",
    "created_at": "2021-04-25T00:50:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510315",
    "user": "https://github.com/yuan-zhou"
}
```

Branch: **[u/yzh/implement_meet__join__etc__methods_for_posets](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_meet__join__etc__methods_for_posets)**



---

archive/issue_comments_510316.json:
```json
{
    "body": "Commit: **[`287ec78`](https://github.com/sagemath/sagetrac-mirror/commit/287ec785acd6a520beae4f2f61523cc2e40ce9fa)**",
    "created_at": "2021-04-25T03:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510316",
    "user": "https://github.com/tscrim"
}
```

Commit: **[`287ec78`](https://github.com/sagemath/sagetrac-mirror/commit/287ec785acd6a520beae4f2f61523cc2e40ce9fa)**



---

archive/issue_comments_510317.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI don't understand why we need a `_meet` and `_join` method in `FinitePoset`. Those are implementation details in the backend.\n\n+1 for adding a `common_lower_covers` method.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/287ec785acd6a520beae4f2f61523cc2e40ce9fa\"><code>287ec78</code></a></td><td><code>implement common_lower_covers</code></td></tr></table>\n",
    "created_at": "2021-04-25T03:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510317",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

I don't understand why we need a `_meet` and `_join` method in `FinitePoset`. Those are implementation details in the backend.

+1 for adding a `common_lower_covers` method.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/287ec785acd6a520beae4f2f61523cc2e40ce9fa"><code>287ec78</code></a></td><td><code>implement common_lower_covers</code></td></tr></table>




---

archive/issue_comments_510318.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@tscrim](#comment%3A4):\n> I don't understand why we need a `_meet` and `_join` method in `FinitePoset`. Those are implementation details in the backend.\n> \n> +1 for adding a `common_lower_covers` method.\n\nIn fact, I meant `FinitePoset.meet(x, y)` for two given elements x and y in the poset, even for poset such that `poset.has_bottom()` is `False`. Now reading the code more carefully, I realize that this is not exactly the same as `poset._hasse_diagram._meet`, which gives the `meet_matrix` in the case of a meet-semilattice and raises an error otherwise.",
    "created_at": "2021-04-25T04:29:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510318",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@tscrim](#comment%3A4):
> I don't understand why we need a `_meet` and `_join` method in `FinitePoset`. Those are implementation details in the backend.
> 
> +1 for adding a `common_lower_covers` method.

In fact, I meant `FinitePoset.meet(x, y)` for two given elements x and y in the poset, even for poset such that `poset.has_bottom()` is `False`. Now reading the code more carefully, I realize that this is not exactly the same as `poset._hasse_diagram._meet`, which gives the `meet_matrix` in the case of a meet-semilattice and raises an error otherwise.



---

archive/issue_comments_510319.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI'm also wondering if `@lazy_attribute HasseDiagram._meet` (and also `_join`) raises Error and refuses to compute the matrix too often. I think it would be better to set the xy-entry of the meet matrix to `None` when the meet of x, y doesn't exists, and then push the checks for the `ValueError(\"not a meet-semilattice...\")` and `LatticeError('meet')` to where it needs.",
    "created_at": "2021-04-25T04:45:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510319",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:6" align="right">comment:6</div>

I'm also wondering if `@lazy_attribute HasseDiagram._meet` (and also `_join`) raises Error and refuses to compute the matrix too often. I think it would be better to set the xy-entry of the meet matrix to `None` when the meet of x, y doesn't exists, and then push the checks for the `ValueError("not a meet-semilattice...")` and `LatticeError('meet')` to where it needs.



---

archive/issue_comments_510320.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,14 @@\n-Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `FinitePoset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.\n+`FinitePoset.meet(x, y)` takes:\n+\n+Input: two elements `x` and `y` of the `poset` (type: `FinitePoset`).\n+\n+Output: an element of `poset` which is the meet of `x` and `y`, if the meet exists; `None` otherwise.\n+\n+Similar for `FinitePoset.join(x, y)`.\n+\n+\n+Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice or if there is a pair of x and y whose meet doesn't exist. \n+\n+We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `None` if the meet of `x` and `y` doesn't exist, instead of raising an Error. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.\n \n In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n``````\n",
    "created_at": "2021-04-25T05:14:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510320",
    "user": "https://github.com/yuan-zhou"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,14 @@
-Similar methods `_meet`, `_join` exist in `FinitePoset._hasse_diagram` but not yet in `FinitePoset` itself. To make them methods of `Poset`, one needs apply the `_element_to_vertex` and `_vertex_to_element` conversions.
+`FinitePoset.meet(x, y)` takes:
+
+Input: two elements `x` and `y` of the `poset` (type: `FinitePoset`).
+
+Output: an element of `poset` which is the meet of `x` and `y`, if the meet exists; `None` otherwise.
+
+Similar for `FinitePoset.join(x, y)`.
+
+
+Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice or if there is a pair of x and y whose meet doesn't exist. 
+
+We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `None` if the meet of `x` and `y` doesn't exist, instead of raising an Error. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.
 
 In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
``````




---

archive/issue_comments_510321.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n Similar for `FinitePoset.join(x, y)`.\n \n \n-Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice or if there is a pair of x and y whose meet doesn't exist. \n+Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n \n We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `None` if the meet of `x` and `y` doesn't exist, instead of raising an Error. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.\n \n``````\n",
    "created_at": "2021-04-25T05:16:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510321",
    "user": "https://github.com/yuan-zhou"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
 Similar for `FinitePoset.join(x, y)`.
 
 
-Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice or if there is a pair of x and y whose meet doesn't exist. 
+Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.
 
 We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `None` if the meet of `x` and `y` doesn't exist, instead of raising an Error. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.
 
``````




---

archive/issue_comments_510322.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,6 +9,6 @@\n \n Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n \n-We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `None` if the meet of `x` and `y` doesn't exist, instead of raising an Error. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.\n+We propose to change `HasseDiagram._meet` (resp. `_join`) (resp. `join_matrix`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()`. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.\n \n In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n``````\n",
    "created_at": "2021-04-25T05:44:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510322",
    "user": "https://github.com/yuan-zhou"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,6 +9,6 @@
 
 Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.
 
-We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `None` if the meet of `x` and `y` doesn't exist, instead of raising an Error. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.
+We propose to change `HasseDiagram._meet` (resp. `_join`) (resp. `join_matrix`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()`. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.
 
 In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
``````




---

archive/issue_comments_510323.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,6 +9,6 @@\n \n Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n \n-We propose to change `HasseDiagram._meet` (resp. `_join`) (resp. `join_matrix`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()`. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.\n+We propose to change `HasseDiagram._meet` (resp. `_join`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.\n \n In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n``````\n",
    "created_at": "2021-04-25T05:47:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510323",
    "user": "https://github.com/yuan-zhou"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,6 +9,6 @@
 
 Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.
 
-We propose to change `HasseDiagram._meet` (resp. `_join`) (resp. `join_matrix`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()`. Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.
+We propose to change `HasseDiagram._meet` (resp. `_join`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.
 
 In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
``````




---

archive/issue_comments_510324.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,9 +6,24 @@\n \n Similar for `FinitePoset.join(x, y)`.\n \n-\n Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n \n-We propose to change `HasseDiagram._meet` (resp. `_join`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.\n+```\n+sage: from sage.combinat.posets.hasse_diagram import HasseDiagram                     \n+sage: h = HasseDiagram({0:[2], 1:[2,3], 2:[4], 3:[4], 4:[]})                \n+sage: h._meet   \n+Traceback (most recent call last)\n+...\n+ValueError: not a meet-semilattice: no bottom element\n+```\n+\n+\n+We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to where it needs.\n+Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`, \n+\n+```\n+h._meet[2,3]\n+1\n+```\n \n In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n``````\n",
    "created_at": "2021-04-25T06:16:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510324",
    "user": "https://github.com/yuan-zhou"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,9 +6,24 @@
 
 Similar for `FinitePoset.join(x, y)`.
 
-
 Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.
 
-We propose to change `HasseDiagram._meet` (resp. `_join`), so that it is a dictionary, indexed by `(x,y)`, with value = the meet of `x` and `y` (not necessarily unique, so consider as a list, and `[]` if not exist). `HasseDiagram._meet` does not raise an Error when the poset is not a meet-semilattice. This check is now deferred to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet[x, y]`.
+```
+sage: from sage.combinat.posets.hasse_diagram import HasseDiagram                     
+sage: h = HasseDiagram({0:[2], 1:[2,3], 2:[4], 3:[4], 4:[]})                
+sage: h._meet   
+Traceback (most recent call last)
+...
+ValueError: not a meet-semilattice: no bottom element
+```
+
+
+We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to where it needs.
+Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`, 
+
+```
+h._meet[2,3]
+1
+```
 
 In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
``````




---

archive/issue_comments_510325.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d\"><code>a155f41</code></a></td><td><code>change HasseDiagram._meet/_join to allow non meet/join-semilattice</code></td></tr></table>\n",
    "created_at": "2021-04-25T09:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510325",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d"><code>a155f41</code></a></td><td><code>change HasseDiagram._meet/_join to allow non meet/join-semilattice</code></td></tr></table>




---

archive/issue_comments_510326.json:
```json
{
    "body": "Changed commit from **[`287ec78`](https://github.com/sagemath/sagetrac-mirror/commit/287ec785acd6a520beae4f2f61523cc2e40ce9fa)** to **[`a155f41`](https://github.com/sagemath/sagetrac-mirror/commit/a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d)**",
    "created_at": "2021-04-25T09:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510326",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`287ec78`](https://github.com/sagemath/sagetrac-mirror/commit/287ec785acd6a520beae4f2f61523cc2e40ce9fa)** to **[`a155f41`](https://github.com/sagemath/sagetrac-mirror/commit/a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d)**



---

archive/issue_comments_510327.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,11 @@\n-`FinitePoset.meet(x, y)` takes:\n+`FinitePoset.meet(x, y=None)` takes input:\n \n-Input: two elements `x` and `y` of the `poset` (type: `FinitePoset`).\n+-  ``x, y`` -- two elements of the poset OR\n+-  ``x`` -- a list or tuple of elements\n \n-Output: an element of `poset` which is the meet of `x` and `y`, if the meet exists; `None` otherwise.\n+Return the meet of given elements in the poset if the meet exists; `None` otherwise.\n \n-Similar for `FinitePoset.join(x, y)`.\n+Similar for `FinitePoset.join(x, y=None)`.\n \n Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n \n@@ -18,12 +19,42 @@\n ```\n \n \n-We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to where it needs.\n-Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`, \n+We propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). We expect to have\n \n ```\n h._meet[2,3]\n 1\n+h._meet[0,1]\n+-1\n+sage: h.meet_martrix()   \n+Traceback (most recent call last)\n+...\n+ValueError: not a meet-semilattice: no bottom element\n+```\n+\n+Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`.\n+\n+This extends the `meet` method current defined on `FiniteMeetSemilattice.meet` to non-semilattice finite poset.\n+\n+```\n+sage: P = Poset({\"a\":[\"b\", \"c\", \"d\"], \"b\":[\"e\", \"f\"], \"c\":[\"f\"], \"d\":[\"f\", \"g\"]}\n+....: )                                                                         \n+sage: M = MeetSemilattice(P)                                                    \n+sage: M.meet(\"f\",\"g\")                                                           \n+'d'\n+sage: P2 = Poset({\"b\":[\"e\", \"f\"], \"c\":[\"f\"], \"d\":[\"f\", \"g\"]})                    \n+sage: M2 = MeetSemilattice(P)  \n+Traceback (most recent call last)\n+...\n+ValueError: not a meet-semilattice: no bottom element\n+```\n+We expect to have\n+\n+```\n+sage: P.meet(\"f\",\"g\")                                                           \n+'d'\n+sage: P2.meet(\"f\",\"g\")\n+'d'\n ```\n \n In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.\n``````\n",
    "created_at": "2021-04-25T09:31:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510327",
    "user": "https://github.com/yuan-zhou"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,11 @@
-`FinitePoset.meet(x, y)` takes:
+`FinitePoset.meet(x, y=None)` takes input:
 
-Input: two elements `x` and `y` of the `poset` (type: `FinitePoset`).
+-  ``x, y`` -- two elements of the poset OR
+-  ``x`` -- a list or tuple of elements
 
-Output: an element of `poset` which is the meet of `x` and `y`, if the meet exists; `None` otherwise.
+Return the meet of given elements in the poset if the meet exists; `None` otherwise.
 
-Similar for `FinitePoset.join(x, y)`.
+Similar for `FinitePoset.join(x, y=None)`.
 
 Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.
 
@@ -18,12 +19,42 @@
 ```
 
 
-We propose to change `HasseDiagram._meet` (resp. `_join`) and `HasseDiagram.meet_matrix()` (resp. `join_matrix`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to where it needs.
-Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`, 
+We propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). We expect to have
 
 ```
 h._meet[2,3]
 1
+h._meet[0,1]
+-1
+sage: h.meet_martrix()   
+Traceback (most recent call last)
+...
+ValueError: not a meet-semilattice: no bottom element
+```
+
+Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`.
+
+This extends the `meet` method current defined on `FiniteMeetSemilattice.meet` to non-semilattice finite poset.
+
+```
+sage: P = Poset({"a":["b", "c", "d"], "b":["e", "f"], "c":["f"], "d":["f", "g"]}
+....: )                                                                         
+sage: M = MeetSemilattice(P)                                                    
+sage: M.meet("f","g")                                                           
+'d'
+sage: P2 = Poset({"b":["e", "f"], "c":["f"], "d":["f", "g"]})                    
+sage: M2 = MeetSemilattice(P)  
+Traceback (most recent call last)
+...
+ValueError: not a meet-semilattice: no bottom element
+```
+We expect to have
+
+```
+sage: P.meet("f","g")                                                           
+'d'
+sage: P2.meet("f","g")
+'d'
 ```
 
 In addition, `FinitePoset` has the method `common_upper_covers`. We propose to implement the method `common_lower_covers` as well, for symmetry and completeness.
``````




---

archive/issue_comments_510328.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,4 @@\n-`FinitePoset.meet(x, y=None)` takes input:\n-\n--  ``x, y`` -- two elements of the poset OR\n--  ``x`` -- a list or tuple of elements\n-\n-Return the meet of given elements in the poset if the meet exists; `None` otherwise.\n+`FinitePoset.meet(x, y)` computes the meet of two elements `x, y` in the poset; return `None` if the meet doesn't exist.\n \n Similar for `FinitePoset.join(x, y=None)`.\n \n@@ -34,7 +29,7 @@\n \n Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`.\n \n-This extends the `meet` method current defined on `FiniteMeetSemilattice.meet` to non-semilattice finite poset.\n+This extends `meet` of a pair `x, y` in `FiniteMeetSemilattice` to non-semilattice finite poset. \n \n ```\n sage: P = Poset({\"a\":[\"b\", \"c\", \"d\"], \"b\":[\"e\", \"f\"], \"c\":[\"f\"], \"d\":[\"f\", \"g\"]}\n``````\n",
    "created_at": "2021-04-25T09:56:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510328",
    "user": "https://github.com/yuan-zhou"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,4 @@
-`FinitePoset.meet(x, y=None)` takes input:
-
--  ``x, y`` -- two elements of the poset OR
--  ``x`` -- a list or tuple of elements
-
-Return the meet of given elements in the poset if the meet exists; `None` otherwise.
+`FinitePoset.meet(x, y)` computes the meet of two elements `x, y` in the poset; return `None` if the meet doesn't exist.
 
 Similar for `FinitePoset.join(x, y=None)`.
 
@@ -34,7 +29,7 @@
 
 Then, we make the method `FinitePoset.meet(x, y)` (resp. `join(x, y)`) by applying the `_element_to_vertex` and `_vertex_to_element` conversions on `poset._hasse_diagram._meet`.
 
-This extends the `meet` method current defined on `FiniteMeetSemilattice.meet` to non-semilattice finite poset.
+This extends `meet` of a pair `x, y` in `FiniteMeetSemilattice` to non-semilattice finite poset. 
 
 ```
 sage: P = Poset({"a":["b", "c", "d"], "b":["e", "f"], "c":["f"], "d":["f", "g"]}
``````




---

archive/issue_comments_510329.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,8 @@\n-`FinitePoset.meet(x, y)` computes the meet of two elements `x, y` in the poset; return `None` if the meet doesn't exist.\n+`FinitePoset.meet(x, y)` computes the meet of two elements `x`, `y` in the poset, returning `None` if the meet doesn't exist.\n \n-Similar for `FinitePoset.join(x, y=None)`.\n+Similar for `FinitePoset.join(x, y)`.\n \n-Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n+Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute` `_meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.\n \n ```\n sage: from sage.combinat.posets.hasse_diagram import HasseDiagram                     \n@@ -13,15 +13,16 @@\n ValueError: not a meet-semilattice: no bottom element\n ```\n \n+We propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`).\n \n-We propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). We expect to have\n+For the poset `h` above, we expect:\n \n ```\n h._meet[2,3]\n 1\n h._meet[0,1]\n -1\n-sage: h.meet_martrix()   \n+sage: h.meet_matrix()   \n Traceback (most recent call last)\n ...\n ValueError: not a meet-semilattice: no bottom element\n@@ -43,7 +44,7 @@\n ...\n ValueError: not a meet-semilattice: no bottom element\n ```\n-We expect to have\n+For the posets `P` and `P2` above, we expect:\n \n ```\n sage: P.meet(\"f\",\"g\")                                                           \n``````\n",
    "created_at": "2021-04-25T10:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510329",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,8 @@
-`FinitePoset.meet(x, y)` computes the meet of two elements `x, y` in the poset; return `None` if the meet doesn't exist.
+`FinitePoset.meet(x, y)` computes the meet of two elements `x`, `y` in the poset, returning `None` if the meet doesn't exist.
 
-Similar for `FinitePoset.join(x, y=None)`.
+Similar for `FinitePoset.join(x, y)`.
 
-Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute _meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.
+Currently, `FinitePoset._hasse_diagram` has `@lazy_attribute` `_meet` (resp. `_join`) and method `meet_matrix` (resp. `join_matrix`). However, they don't compute the matrix but raise an Error if the poset is not a meet/join-semilattice.
 
 ```
 sage: from sage.combinat.posets.hasse_diagram import HasseDiagram                     
@@ -13,15 +13,16 @@
 ValueError: not a meet-semilattice: no bottom element
 ```
 
+We propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`).
 
-We propose to change `HasseDiagram._meet` (resp. `_join`), so that the `(x,y)`-entry of the matrix is `-1` if the meet of `x` and `y` doesn't exist, instead of raising an Error.  Defer the checks to `HasseDiagram.meet_matrix()` (resp. `join_matrix`). We expect to have
+For the poset `h` above, we expect:
 
 ```
 h._meet[2,3]
 1
 h._meet[0,1]
 -1
-sage: h.meet_martrix()   
+sage: h.meet_matrix()   
 Traceback (most recent call last)
 ...
 ValueError: not a meet-semilattice: no bottom element
@@ -43,7 +44,7 @@
 ...
 ValueError: not a meet-semilattice: no bottom element
 ```
-We expect to have
+For the posets `P` and `P2` above, we expect:
 
 ```
 sage: P.meet("f","g")                                                           
``````




---

archive/issue_comments_510330.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nQuestion: Why is the following not allowed?\n\n```\nsage: E = LatticePoset({})\nsage: Poset({0: [1]}).is_lattice()\nTrue\nsage: P = MeetSemilattice({0: [1]})\nsage: E.is_sublattice(P)\nTraceback (most recent call last):\n...\nTypeError: other is not a lattice\n```",
    "created_at": "2021-04-25T10:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510330",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:16" align="right">comment:16</div>

Question: Why is the following not allowed?

```
sage: E = LatticePoset({})
sage: Poset({0: [1]}).is_lattice()
True
sage: P = MeetSemilattice({0: [1]})
sage: E.is_sublattice(P)
Traceback (most recent call last):
...
TypeError: other is not a lattice
```



---

archive/issue_comments_510331.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04f153f09518ea7ffca7ab55fa68bacf4143b7e1\"><code>04f153f</code></a></td><td><code>change calls of _meet/_join to meet_matrix()/join_matrix() which include checks</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a32c9dbb59f1bd07fa6b321368fe6339b44cdef\"><code>2a32c9d</code></a></td><td><code>implement meet/join methods for posets that are not meet/join-semilattices</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9a42fd01c05d4e892aa08ceadb26095aaf77f78\"><code>e9a42fd</code></a></td><td><code>change doctests regarding LatticePoset.is_sublattice(MeetSemilattice or JoinSemilattice)</code></td></tr></table>\n",
    "created_at": "2021-04-25T11:25:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510331",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04f153f09518ea7ffca7ab55fa68bacf4143b7e1"><code>04f153f</code></a></td><td><code>change calls of _meet/_join to meet_matrix()/join_matrix() which include checks</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a32c9dbb59f1bd07fa6b321368fe6339b44cdef"><code>2a32c9d</code></a></td><td><code>implement meet/join methods for posets that are not meet/join-semilattices</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9a42fd01c05d4e892aa08ceadb26095aaf77f78"><code>e9a42fd</code></a></td><td><code>change doctests regarding LatticePoset.is_sublattice(MeetSemilattice or JoinSemilattice)</code></td></tr></table>




---

archive/issue_comments_510332.json:
```json
{
    "body": "Changed commit from **[`a155f41`](https://github.com/sagemath/sagetrac-mirror/commit/a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d)** to **[`e9a42fd`](https://github.com/sagemath/sagetrac-mirror/commit/e9a42fd01c05d4e892aa08ceadb26095aaf77f78)**",
    "created_at": "2021-04-25T11:25:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510332",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a155f41`](https://github.com/sagemath/sagetrac-mirror/commit/a155f416e944ef7bc45e6e2751d2a0aaf07e5a8d)** to **[`e9a42fd`](https://github.com/sagemath/sagetrac-mirror/commit/e9a42fd01c05d4e892aa08ceadb26095aaf77f78)**



---

archive/issue_events_434408.json:
```json
{
    "actor": "https://github.com/yuan-zhou",
    "created_at": "2021-04-25T11:25:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31725#event-434408"
}
```



---

archive/issue_comments_510333.json:
```json
{
    "body": "Author: **Yuan Zhou**",
    "created_at": "2021-04-25T11:31:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510333",
    "user": "https://github.com/yuan-zhou"
}
```

Author: **Yuan Zhou**



---

archive/issue_comments_510334.json:
```json
{
    "body": "Changed commit from **[`e9a42fd`](https://github.com/sagemath/sagetrac-mirror/commit/e9a42fd01c05d4e892aa08ceadb26095aaf77f78)** to **[`fa07859`](https://github.com/sagemath/sagetrac-mirror/commit/fa07859f935f00630bdf5890e2e01a482a8e6cd4)**",
    "created_at": "2021-04-25T11:59:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510334",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e9a42fd`](https://github.com/sagemath/sagetrac-mirror/commit/e9a42fd01c05d4e892aa08ceadb26095aaf77f78)** to **[`fa07859`](https://github.com/sagemath/sagetrac-mirror/commit/fa07859f935f00630bdf5890e2e01a482a8e6cd4)**



---

archive/issue_comments_510335.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa07859f935f00630bdf5890e2e01a482a8e6cd4\"><code>fa07859</code></a></td><td><code>add doctest allowing LatticePoset.is_sublattice(FinitePoset)</code></td></tr></table>\n",
    "created_at": "2021-04-25T11:59:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510335",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa07859f935f00630bdf5890e2e01a482a8e6cd4"><code>fa07859</code></a></td><td><code>add doctest allowing LatticePoset.is_sublattice(FinitePoset)</code></td></tr></table>




---

archive/issue_comments_510336.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThe semilattice check can be quite slow with your proposal as it is done every time the `meet_matrix()` is called. I think you should define a new attribute `_semilattice_failure = None` on initialization. Then when `_meet` is called, it sets this attribute to an invalid pair (and perhaps `()` if successful). Then the check in `meet_matrix()` becomes:\n\n```python\nif (n != 0) and (not self.has_bottom()):\n    raise ValueError(\"not a meet-semilattice: no bottom element\")\n# call the attribute to build the matrix and sets _semilattice_failure\nmt = self._meet\nif self._semilattice_failure:\n    x, y = self._is_meet_semilattice\n    raise LatticeError('meet', x, y)\n```",
    "created_at": "2021-04-26T00:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510336",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:21" align="right">comment:21</div>

The semilattice check can be quite slow with your proposal as it is done every time the `meet_matrix()` is called. I think you should define a new attribute `_semilattice_failure = None` on initialization. Then when `_meet` is called, it sets this attribute to an invalid pair (and perhaps `()` if successful). Then the check in `meet_matrix()` becomes:

```python
if (n != 0) and (not self.has_bottom()):
    raise ValueError("not a meet-semilattice: no bottom element")
# call the attribute to build the matrix and sets _semilattice_failure
mt = self._meet
if self._semilattice_failure:
    x, y = self._is_meet_semilattice
    raise LatticeError('meet', x, y)
```



---

archive/issue_comments_510337.json:
```json
{
    "body": "Changed commit from **[`fa07859`](https://github.com/sagemath/sagetrac-mirror/commit/fa07859f935f00630bdf5890e2e01a482a8e6cd4)** to **[`a19697f`](https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95)**",
    "created_at": "2021-04-26T03:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510337",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fa07859`](https://github.com/sagemath/sagetrac-mirror/commit/fa07859f935f00630bdf5890e2e01a482a8e6cd4)** to **[`a19697f`](https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95)**



---

archive/issue_comments_510338.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95\"><code>a19697f</code></a></td><td><code>new attributes HasseDiagram._meet/join_semilattice_failure</code></td></tr></table>\n",
    "created_at": "2021-04-26T03:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510338",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95"><code>a19697f</code></a></td><td><code>new attributes HasseDiagram._meet/join_semilattice_failure</code></td></tr></table>




---

archive/issue_comments_510339.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThanks, Travis! I made the change according to your suggestion.",
    "created_at": "2021-04-26T03:45:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510339",
    "user": "https://github.com/yuan-zhou"
}
```

<div id="comment:23" align="right">comment:23</div>

Thanks, Travis! I made the change according to your suggestion.



---

archive/issue_comments_510340.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI like your solution. Thank you. LGTM.",
    "created_at": "2021-04-28T02:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510340",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:24" align="right">comment:24</div>

I like your solution. Thank you. LGTM.



---

archive/issue_comments_510341.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2021-04-28T02:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510341",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_434409.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-04-28T02:33:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31725#event-434409"
}
```



---

archive/issue_events_434410.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-04-28T02:33:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31725#event-434410"
}
```



---

archive/issue_comments_510342.json:
```json
{
    "body": "Changed branch from **[u/yzh/implement_meet__join__etc__methods_for_posets](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_meet__join__etc__methods_for_posets)** to **[`a19697f`](https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95)**",
    "created_at": "2021-06-19T20:58:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31725#issuecomment-510342",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/yzh/implement_meet__join__etc__methods_for_posets](https://github.com/sagemath/sagetrac-mirror/tree/u/yzh/implement_meet__join__etc__methods_for_posets)** to **[`a19697f`](https://github.com/sagemath/sagetrac-mirror/commit/a19697ff97092b9bd17bd4e01920a6cfa90b8d95)**



---

archive/issue_events_434411.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-19T20:58:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31725#event-434411"
}
```



---

archive/issue_events_434412.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ce7572e422961e28d4924a19d2ad94fbfdc91f7c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-06-19T20:58:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31725",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31725#event-434412"
}
```
