# Issue 31003: Add minimal pytest configuration

archive/issues_030766.json:
```json
{
    "assignees": [],
    "body": "Add a minimal pytest configuration, so that calling `pytest` from `src` passes without any errors (and without finding any tests for the moment). \n\nThis is a preparation for future usages of pytest, such as #30362 or #30738, and is in the general spirit of #28936 (since pytest is perhaps *the* testing framework for python). For example, one could imagine using `pytest doctest_modules` to run all sage doctests as well.\n\nCC:  @mkoeppe\n\nBranch/Commit: **[`462f071`](https://github.com/sagemath/sagetrac-mirror/commit/462f071cbb7823cf1ac59a016fd71d4ff7ab4522)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Tobias Diez**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31003_\n\n",
    "closed_at": "2021-03-07T17:06:08Z",
    "created_at": "2020-12-04T11:43:13Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add minimal pytest configuration",
    "type": "issue",
    "updated_at": "2021-03-07T17:06:08Z",
    "url": "https://github.com/sagemath/sage/issues/31003",
    "user": "https://github.com/tobiasdiez"
}
```
Add a minimal pytest configuration, so that calling `pytest` from `src` passes without any errors (and without finding any tests for the moment). 

This is a preparation for future usages of pytest, such as #30362 or #30738, and is in the general spirit of #28936 (since pytest is perhaps *the* testing framework for python). For example, one could imagine using `pytest doctest_modules` to run all sage doctests as well.

CC:  @mkoeppe

Branch/Commit: **[`462f071`](https://github.com/sagemath/sagetrac-mirror/commit/462f071cbb7823cf1ac59a016fd71d4ff7ab4522)**

Reviewer: **Matthias Koeppe**

Author: **Tobias Diez**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/31003_





---

archive/issue_events_427527.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-04T11:43:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427527"
}
```



---

archive/issue_events_427528.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-04T11:43:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427528"
}
```



---

archive/issue_events_427529.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-04T11:43:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427529"
}
```



---

archive/issue_events_427530.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-04T11:43:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427530"
}
```



---

archive/issue_events_427531.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-04T11:43:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427531"
}
```



---

archive/issue_comments_496819.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5c971ebc1b098cf0946c7b7da54832e4cc40484\">d5c971e</a></td><td><code>Mark as strict testing, since we pass</code></td></tr></table>\n",
    "created_at": "2020-12-04T11:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496819",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5c971ebc1b098cf0946c7b7da54832e4cc40484">d5c971e</a></td><td><code>Mark as strict testing, since we pass</code></td></tr></table>




---

archive/issue_comments_496820.json:
```json
{
    "body": "Changed commit from **[`d099730`](https://github.com/sagemath/sagetrac-mirror/commit/d099730421471828214a2959d23b85cd1798ee9f)** to **[`d5c971e`](https://github.com/sagemath/sagetrac-mirror/commit/d5c971ebc1b098cf0946c7b7da54832e4cc40484)**",
    "created_at": "2020-12-04T11:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496820",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d099730`](https://github.com/sagemath/sagetrac-mirror/commit/d099730421471828214a2959d23b85cd1798ee9f)** to **[`d5c971e`](https://github.com/sagemath/sagetrac-mirror/commit/d5c971ebc1b098cf0946c7b7da54832e4cc40484)**



---

archive/issue_comments_496821.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThis file would need comments at the top that explain its purpose",
    "created_at": "2020-12-04T18:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496821",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

This file would need comments at the top that explain its purpose



---

archive/issue_comments_496822.json:
```json
{
    "body": "Changed commit from **[`d5c971e`](https://github.com/sagemath/sagetrac-mirror/commit/d5c971ebc1b098cf0946c7b7da54832e4cc40484)** to **[`f901922`](https://github.com/sagemath/sagetrac-mirror/commit/f901922cf7aec7f41430656141dd7e4cfdbc219e)**",
    "created_at": "2020-12-05T15:06:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496822",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d5c971e`](https://github.com/sagemath/sagetrac-mirror/commit/d5c971ebc1b098cf0946c7b7da54832e4cc40484)** to **[`f901922`](https://github.com/sagemath/sagetrac-mirror/commit/f901922cf7aec7f41430656141dd7e4cfdbc219e)**



---

archive/issue_comments_496823.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f901922cf7aec7f41430656141dd7e4cfdbc219e\">f901922</a></td><td><code>Add documentation for pytest</code></td></tr></table>\n",
    "created_at": "2020-12-05T15:06:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496823",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f901922cf7aec7f41430656141dd7e4cfdbc219e">f901922</a></td><td><code>Add documentation for pytest</code></td></tr></table>




---

archive/issue_comments_496824.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI've now added documentation, also in the `tools.rst`.",
    "created_at": "2020-12-05T15:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496824",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:5" align="right">comment:5</div>

I've now added documentation, also in the `tools.rst`.



---

archive/issue_comments_496825.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nDoes this really need the line `from `__future__` import annotations`?",
    "created_at": "2020-12-05T18:01:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496825",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Does this really need the line `from `__future__` import annotations`?



---

archive/issue_comments_496826.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAlso, should this not be hooked into tox?",
    "created_at": "2020-12-05T18:02:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496826",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Also, should this not be hooked into tox?



---

archive/issue_comments_496827.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI think it should be said explicitly in the file comments (and the documentation) that this is a no-op and we do not offer ANY tests tested by pytest.\n\n(similar to the wording in the ticket description: \"Add a minimal pytest configuration, so that calling pytest from src passes without any errors (and without finding any tests for the moment).\")",
    "created_at": "2020-12-05T18:05:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496827",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

I think it should be said explicitly in the file comments (and the documentation) that this is a no-op and we do not offer ANY tests tested by pytest.

(similar to the wording in the ticket description: "Add a minimal pytest configuration, so that calling pytest from src passes without any errors (and without finding any tests for the moment).")



---

archive/issue_comments_496828.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@mkoeppe](#comment:6):\n> Does this really need the line `from `__future__` import annotations`? \n\nYes, for `dict[str, Any]`.",
    "created_at": "2020-12-05T19:36:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496828",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@mkoeppe](#comment:6):
> Does this really need the line `from `__future__` import annotations`? 

Yes, for `dict[str, Any]`.



---

archive/issue_comments_496829.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@mkoeppe](#comment:7):\n> Also, should this not be hooked into tox?\n\nThat would be the way to go, but I wanted to keep the ticket small (for a change ;-)).",
    "created_at": "2020-12-05T19:37:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496829",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@mkoeppe](#comment:7):
> Also, should this not be hooked into tox?

That would be the way to go, but I wanted to keep the ticket small (for a change ;-)).



---

archive/issue_comments_496830.json:
```json
{
    "body": "Changed commit from **[`f901922`](https://github.com/sagemath/sagetrac-mirror/commit/f901922cf7aec7f41430656141dd7e4cfdbc219e)** to **[`bc66a10`](https://github.com/sagemath/sagetrac-mirror/commit/bc66a1060ee08ab0b04682bd38dca79350d50e07)**",
    "created_at": "2020-12-05T19:40:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496830",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f901922`](https://github.com/sagemath/sagetrac-mirror/commit/f901922cf7aec7f41430656141dd7e4cfdbc219e)** to **[`bc66a10`](https://github.com/sagemath/sagetrac-mirror/commit/bc66a1060ee08ab0b04682bd38dca79350d50e07)**



---

archive/issue_comments_496831.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc66a1060ee08ab0b04682bd38dca79350d50e07\">bc66a10</a></td><td><code>Add no-op disclaimer</code></td></tr></table>\n",
    "created_at": "2020-12-05T19:40:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496831",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc66a1060ee08ab0b04682bd38dca79350d50e07">bc66a10</a></td><td><code>Add no-op disclaimer</code></td></tr></table>




---

archive/issue_comments_496832.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@mkoeppe](#comment:8):\n> I think it should be said explicitly in the file comments (and the documentation) that this is a no-op and we do not offer ANY tests tested by pytest.\n> \n\nDone!",
    "created_at": "2020-12-05T19:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496832",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@mkoeppe](#comment:8):
> I think it should be said explicitly in the file comments (and the documentation) that this is a no-op and we do not offer ANY tests tested by pytest.
> 

Done!



---

archive/issue_comments_496833.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@tobiasdiez](#comment:10):\n> Replying to [@mkoeppe](#comment:7):\n> > Also, should this not be hooked into tox?\n\n> \n> That would be the way to go, but I wanted to keep the ticket small (for a change ;-)).\n\nI agree. (Given that it's a no-op, there's no point to hook it into tox now.)",
    "created_at": "2020-12-05T19:42:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496833",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@tobiasdiez](#comment:10):
> Replying to [@mkoeppe](#comment:7):
> > Also, should this not be hooked into tox?

> 
> That would be the way to go, but I wanted to keep the ticket small (for a change ;-)).

I agree. (Given that it's a no-op, there's no point to hook it into tox now.)



---

archive/issue_comments_496834.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@tobiasdiez](#comment:9):\n> Replying to [@mkoeppe](#comment:6):\n> > Does this really need the line `from `__future__` import annotations`? \n\n> \n> Yes, for `dict[str, Any]`.\n\nThanks. So it won't be compatible with Python 3.6, but I guess that's OK because we don't really use pytest for anything.",
    "created_at": "2020-12-05T19:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496834",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@tobiasdiez](#comment:9):
> Replying to [@mkoeppe](#comment:6):
> > Does this really need the line `from `__future__` import annotations`? 

> 
> Yes, for `dict[str, Any]`.

Thanks. So it won't be compatible with Python 3.6, but I guess that's OK because we don't really use pytest for anything.



---

archive/issue_events_427532.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-06T00:26:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427532"
}
```



---

archive/issue_events_427533.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-06T00:26:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427533"
}
```



---

archive/issue_comments_496835.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI am getting the following:\n\n```\n$ sage -sh\n$ (cd src && pytest)\n=========================================================== test session starts ===========================================================\nplatform darwin -- Python 3.8.6, pytest-6.1.2, py-1.9.0, pluggy-0.13.1\nrootdir: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/src\ncollected 0 items / 1 error                                                                                                               \n\n================================================================= ERRORS ==================================================================\n_____________________________________________ ERROR collecting sage/tests/deprecation_test.py _____________________________________________\nImportError while importing test module '/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/src/sage/tests/deprecation_test.py'.\nHint: make sure your test modules/packages have valid Python names.\nTraceback:\n/usr/local/Cellar/python@3.8/3.8.6/Frameworks/Python.framework/Versions/3.8/lib/python3.8/importlib/__init__.py:127: in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\nsage/tests/deprecation_test.py:12: in <module>\n    from sage.misc.superseded import deprecated_function_alias\nsage/misc/superseded.py:30: in <module>\n    from sage.misc.lazy_attribute import lazy_attribute\nE   ModuleNotFoundError: No module named 'sage.misc.lazy_attribute'\n========================================================= short test summary info =========================================================\nERROR sage/tests/deprecation_test.py\n```",
    "created_at": "2020-12-06T00:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496835",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

I am getting the following:

```
$ sage -sh
$ (cd src && pytest)
=========================================================== test session starts ===========================================================
platform darwin -- Python 3.8.6, pytest-6.1.2, py-1.9.0, pluggy-0.13.1
rootdir: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/src
collected 0 items / 1 error                                                                                                               

================================================================= ERRORS ==================================================================
_____________________________________________ ERROR collecting sage/tests/deprecation_test.py _____________________________________________
ImportError while importing test module '/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/src/sage/tests/deprecation_test.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/local/Cellar/python@3.8/3.8.6/Frameworks/Python.framework/Versions/3.8/lib/python3.8/importlib/__init__.py:127: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
sage/tests/deprecation_test.py:12: in <module>
    from sage.misc.superseded import deprecated_function_alias
sage/misc/superseded.py:30: in <module>
    from sage.misc.lazy_attribute import lazy_attribute
E   ModuleNotFoundError: No module named 'sage.misc.lazy_attribute'
========================================================= short test summary info =========================================================
ERROR sage/tests/deprecation_test.py
```



---

archive/issue_comments_496836.json:
```json
{
    "body": "Changed commit from **[`bc66a10`](https://github.com/sagemath/sagetrac-mirror/commit/bc66a1060ee08ab0b04682bd38dca79350d50e07)** to **[`72ae90f`](https://github.com/sagemath/sagetrac-mirror/commit/72ae90f95484ed19786b962f0b12f421ea71ceba)**",
    "created_at": "2020-12-07T21:15:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496836",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bc66a10`](https://github.com/sagemath/sagetrac-mirror/commit/bc66a1060ee08ab0b04682bd38dca79350d50e07)** to **[`72ae90f`](https://github.com/sagemath/sagetrac-mirror/commit/72ae90f95484ed19786b962f0b12f421ea71ceba)**



---

archive/issue_comments_496837.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72ae90f95484ed19786b962f0b12f421ea71ceba\">72ae90f</a></td><td><code>Clarify that sage has to be installed</code></td></tr></table>\n",
    "created_at": "2020-12-07T21:15:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496837",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72ae90f95484ed19786b962f0b12f421ea71ceba">72ae90f</a></td><td><code>Clarify that sage has to be installed</code></td></tr></table>




---

archive/issue_comments_496838.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nYou need to run pytest from a virtual environment where Sage has been installed (e.g. using the editable install), since otherwise the imports to cython modules are not resolved. I've clarified this point in the documentation.",
    "created_at": "2020-12-07T21:17:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496838",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:17" align="right">comment:17</div>

You need to run pytest from a virtual environment where Sage has been installed (e.g. using the editable install), since otherwise the imports to cython modules are not resolved. I've clarified this point in the documentation.



---

archive/issue_events_427534.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T21:17:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427534"
}
```



---

archive/issue_events_427535.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T21:17:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427535"
}
```



---

archive/issue_comments_496839.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nDoes it work for you now?",
    "created_at": "2020-12-20T22:49:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496839",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:18" align="right">comment:18</div>

Does it work for you now?



---

archive/issue_comments_496840.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\n`sage -sh` does set up an environment in which `python3` is Sage's python (and `pytest` is from this environment too when it is installed).",
    "created_at": "2020-12-21T01:23:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496840",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

`sage -sh` does set up an environment in which `python3` is Sage's python (and `pytest` is from this environment too when it is installed).



---

archive/issue_events_427536.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-21T01:23:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427536"
}
```



---

archive/issue_events_427537.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-21T01:23:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427537"
}
```



---

archive/issue_comments_496841.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThe same code/steps is working for me and correctly reports `collected 0 items`. I think there is a problem with your setup that cythonized sage modules cannot be found. Can you manually import `from sage.misc.lazy_attribute import lazy_attribute`?",
    "created_at": "2020-12-21T08:21:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496841",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:21" align="right">comment:21</div>

The same code/steps is working for me and correctly reports `collected 0 items`. I think there is a problem with your setup that cythonized sage modules cannot be found. Can you manually import `from sage.misc.lazy_attribute import lazy_attribute`?



---

archive/issue_comments_496842.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99c4ffd4d1cde07a243ae9c3d9d8caa4d1340f51\">99c4ffd</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/pytest_config</code></td></tr></table>\n",
    "created_at": "2020-12-21T08:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496842",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99c4ffd4d1cde07a243ae9c3d9d8caa4d1340f51">99c4ffd</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/pytest_config</code></td></tr></table>




---

archive/issue_comments_496843.json:
```json
{
    "body": "Changed commit from **[`72ae90f`](https://github.com/sagemath/sagetrac-mirror/commit/72ae90f95484ed19786b962f0b12f421ea71ceba)** to **[`99c4ffd`](https://github.com/sagemath/sagetrac-mirror/commit/99c4ffd4d1cde07a243ae9c3d9d8caa4d1340f51)**",
    "created_at": "2020-12-21T08:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496843",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`72ae90f`](https://github.com/sagemath/sagetrac-mirror/commit/72ae90f95484ed19786b962f0b12f421ea71ceba)** to **[`99c4ffd`](https://github.com/sagemath/sagetrac-mirror/commit/99c4ffd4d1cde07a243ae9c3d9d8caa4d1340f51)**



---

archive/issue_comments_496844.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@tobiasdiez](#comment:21):\n> The same code/steps is working for me\n\n... in your custom setup from #30371, I assume...\n\n> and correctly reports `collected 0 items`. I think there is a problem with your setup that cythonized sage modules cannot be found. Can you manually import `from sage.misc.lazy_attribute import lazy_attribute`?\n\nYes.",
    "created_at": "2020-12-21T17:48:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496844",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@tobiasdiez](#comment:21):
> The same code/steps is working for me

... in your custom setup from #30371, I assume...

> and correctly reports `collected 0 items`. I think there is a problem with your setup that cythonized sage modules cannot be found. Can you manually import `from sage.misc.lazy_attribute import lazy_attribute`?

Yes.



---

archive/issue_comments_496845.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@mkoeppe](#comment:23):\n> Replying to [@tobiasdiez](#comment:21):\n> > The same code/steps is working for me\n\n> \n> ... in your custom setup from #30371, I assume...\n\nNo, with `sage -sh` as you did above...",
    "created_at": "2020-12-21T20:05:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496845",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@mkoeppe](#comment:23):
> Replying to [@tobiasdiez](#comment:21):
> > The same code/steps is working for me

> 
> ... in your custom setup from #30371, I assume...

No, with `sage -sh` as you did above...



---

archive/issue_comments_496846.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nSo you have a working standard installation of sage now?",
    "created_at": "2020-12-21T20:11:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496846",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

So you have a working standard installation of sage now?



---

archive/issue_comments_496847.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nYes, after a PC upgrade and with Ubuntu 20.10 in WSL 2 and as many system packages installed it works now. I still prefer my setup from #30371 for testing things though (because of the editable install and the nice integration with vscode).",
    "created_at": "2020-12-21T20:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496847",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:26" align="right">comment:26</div>

Yes, after a PC upgrade and with Ubuntu 20.10 in WSL 2 and as many system packages installed it works now. I still prefer my setup from #30371 for testing things though (because of the editable install and the nice integration with vscode).



---

archive/issue_comments_496848.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI did a bit of googling, and found essentially nothing. The closest was https://stackoverflow.com/questions/49068162/pytest-cannot-find-module-on-import-but-code-runs-just-fine/49068163#49068163 but that doesn't suggest a clear solution.",
    "created_at": "2020-12-21T20:46:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496848",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:27" align="right">comment:27</div>

I did a bit of googling, and found essentially nothing. The closest was https://stackoverflow.com/questions/49068162/pytest-cannot-find-module-on-import-but-code-runs-just-fine/49068163#49068163 but that doesn't suggest a clear solution.



---

archive/issue_comments_496849.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@tobiasdiez](#comment:26):\n> Yes, after a PC upgrade and with Ubuntu 20.10 in WSL 2 and as many system packages installed it works now. I still prefer my setup from #30371 for testing things though (because of the editable install and the nice integration with vscode).\n\nGreat. So how about reducing #30371 then, finally, to something that makes the editable install work on top of the normal installation via the distribution?",
    "created_at": "2020-12-21T22:31:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496849",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@tobiasdiez](#comment:26):
> Yes, after a PC upgrade and with Ubuntu 20.10 in WSL 2 and as many system packages installed it works now. I still prefer my setup from #30371 for testing things though (because of the editable install and the nice integration with vscode).

Great. So how about reducing #30371 then, finally, to something that makes the editable install work on top of the normal installation via the distribution?



---

archive/issue_comments_496850.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf014ba98eddf0ee6289581de40d50dce894a422\">bf014ba</a></td><td><code>Enforce that test files need to end on _test.py</code></td></tr></table>\n",
    "created_at": "2020-12-27T18:16:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496850",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf014ba98eddf0ee6289581de40d50dce894a422">bf014ba</a></td><td><code>Enforce that test files need to end on _test.py</code></td></tr></table>




---

archive/issue_comments_496851.json:
```json
{
    "body": "Changed commit from **[`99c4ffd`](https://github.com/sagemath/sagetrac-mirror/commit/99c4ffd4d1cde07a243ae9c3d9d8caa4d1340f51)** to **[`bf014ba`](https://github.com/sagemath/sagetrac-mirror/commit/bf014ba98eddf0ee6289581de40d50dce894a422)**",
    "created_at": "2020-12-27T18:16:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496851",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`99c4ffd`](https://github.com/sagemath/sagetrac-mirror/commit/99c4ffd4d1cde07a243ae9c3d9d8caa4d1340f51)** to **[`bf014ba`](https://github.com/sagemath/sagetrac-mirror/commit/bf014ba98eddf0ee6289581de40d50dce894a422)**



---

archive/issue_comments_496852.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nAs discussed in #31103, `src/bin/sage-coverage`, `src/bin/sage-coverageall` will need updating so that they do not complain about `..._test.py` files.\n(They are also used by the patchbot.)",
    "created_at": "2020-12-27T18:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496852",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

As discussed in #31103, `src/bin/sage-coverage`, `src/bin/sage-coverageall` will need updating so that they do not complain about `..._test.py` files.
(They are also used by the patchbot.)



---

archive/issue_comments_496853.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nDeveloper's guide (src/doc/en/developer/) would need updates in \n- coding_basics.rst\n- reviewer_checklist.rst",
    "created_at": "2020-12-27T18:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496853",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

Developer's guide (src/doc/en/developer/) would need updates in 
- coding_basics.rst
- reviewer_checklist.rst



---

archive/issue_comments_496854.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nCan I do this as follow-up tickets? The purpose of this one here was to provide a minimal test configuration that works for sage. Using pytest in an effective way definitely needs more changes in various areas.",
    "created_at": "2020-12-27T22:58:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496854",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:32" align="right">comment:32</div>

Can I do this as follow-up tickets? The purpose of this one here was to provide a minimal test configuration that works for sage. Using pytest in an effective way definitely needs more changes in various areas.



---

archive/issue_comments_496855.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@tobiasdiez](#comment:32):\n> Can I do this as follow-up tickets?\n\nSure",
    "created_at": "2020-12-28T02:07:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496855",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@tobiasdiez](#comment:32):
> Can I do this as follow-up tickets?

Sure



---

archive/issue_events_427538.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-28T10:09:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427538"
}
```



---

archive/issue_events_427539.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-28T10:09:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427539"
}
```



---

archive/issue_comments_496856.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nOk, this is now #31123.\n\nCan you please retry if it works for you? For me `sage -sh` followed by `pip install pytest` and `pytest` works. You need to run pytest from a python installation in which sage is installed including the Cython modules.",
    "created_at": "2020-12-28T10:09:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496856",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:34" align="right">comment:34</div>

Ok, this is now #31123.

Can you please retry if it works for you? For me `sage -sh` followed by `pip install pytest` and `pytest` works. You need to run pytest from a python installation in which sage is installed including the Cython modules.



---

archive/issue_comments_496857.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38e210e6fe21f5f49e066142533f3f7794c6dfb6\">38e210e</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/pytest_config</code></td></tr></table>\n",
    "created_at": "2020-12-28T10:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496857",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38e210e6fe21f5f49e066142533f3f7794c6dfb6">38e210e</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/pytest_config</code></td></tr></table>




---

archive/issue_comments_496858.json:
```json
{
    "body": "Changed commit from **[`bf014ba`](https://github.com/sagemath/sagetrac-mirror/commit/bf014ba98eddf0ee6289581de40d50dce894a422)** to **[`38e210e`](https://github.com/sagemath/sagetrac-mirror/commit/38e210e6fe21f5f49e066142533f3f7794c6dfb6)**",
    "created_at": "2020-12-28T10:10:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496858",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bf014ba`](https://github.com/sagemath/sagetrac-mirror/commit/bf014ba98eddf0ee6289581de40d50dce894a422)** to **[`38e210e`](https://github.com/sagemath/sagetrac-mirror/commit/38e210e6fe21f5f49e066142533f3f7794c6dfb6)**



---

archive/issue_comments_496859.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nStill needs review.",
    "created_at": "2021-01-23T18:12:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496859",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:36" align="right">comment:36</div>

Still needs review.



---

archive/issue_comments_496860.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nThe issue persists. I think the problem is that, when executing `pytest` from the `src` directory, the subdirectory `sage` (which does not have the compiled modules) shadows the installed `sage` package. So I think you need to set some option for `pytest` so that `.` is not in the path.",
    "created_at": "2021-01-23T19:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496860",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:37" align="right">comment:37</div>

The issue persists. I think the problem is that, when executing `pytest` from the `src` directory, the subdirectory `sage` (which does not have the compiled modules) shadows the installed `sage` package. So I think you need to set some option for `pytest` so that `.` is not in the path.



---

archive/issue_events_427540.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-23T19:50:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427540"
}
```



---

archive/issue_events_427541.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-23T19:50:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427541"
}
```



---

archive/issue_comments_496861.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI read a bit more about it, and in order for pytest to find cython modules you need to use an editable install (that's why it was always working for me, regardless of how I started pytest). For now, I've added deprecation_test.py to the ignored list, so the issue should be fixed.",
    "created_at": "2021-01-23T21:21:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496861",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:38" align="right">comment:38</div>

I read a bit more about it, and in order for pytest to find cython modules you need to use an editable install (that's why it was always working for me, regardless of how I started pytest). For now, I've added deprecation_test.py to the ignored list, so the issue should be fixed.



---

archive/issue_events_427542.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-01-23T21:21:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427542"
}
```



---

archive/issue_events_427543.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-01-23T21:21:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427543"
}
```



---

archive/issue_comments_496862.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62b1c6177607b85a8d2cc5136bc23d660f0d9931\">62b1c61</a></td><td><code>Igonre deprecation_test as well</code></td></tr></table>\n",
    "created_at": "2021-01-23T21:21:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496862",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62b1c6177607b85a8d2cc5136bc23d660f0d9931">62b1c61</a></td><td><code>Igonre deprecation_test as well</code></td></tr></table>




---

archive/issue_comments_496863.json:
```json
{
    "body": "Changed commit from **[`38e210e`](https://github.com/sagemath/sagetrac-mirror/commit/38e210e6fe21f5f49e066142533f3f7794c6dfb6)** to **[`62b1c61`](https://github.com/sagemath/sagetrac-mirror/commit/62b1c6177607b85a8d2cc5136bc23d660f0d9931)**",
    "created_at": "2021-01-23T21:21:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496863",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`38e210e`](https://github.com/sagemath/sagetrac-mirror/commit/38e210e6fe21f5f49e066142533f3f7794c6dfb6)** to **[`62b1c61`](https://github.com/sagemath/sagetrac-mirror/commit/62b1c6177607b85a8d2cc5136bc23d660f0d9931)**



---

archive/issue_events_427544.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-23T22:13:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427544"
}
```



---

archive/issue_events_427545.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-23T22:13:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427545"
}
```



---

archive/issue_comments_496864.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2021-01-23T22:13:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496864",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_comments_496865.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nOK this looks like a nice clean no-op now.",
    "created_at": "2021-01-23T22:13:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496865",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">comment:40</div>

OK this looks like a nice clean no-op now.



---

archive/issue_comments_496866.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nThanks!",
    "created_at": "2021-01-23T22:59:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496866",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:41" align="right">comment:41</div>

Thanks!



---

archive/issue_comments_496867.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nDocumentation doesn't build",
    "created_at": "2021-01-24T23:42:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496867",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:42" align="right">comment:42</div>

Documentation doesn't build



---

archive/issue_events_427546.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-24T23:42:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427546"
}
```



---

archive/issue_events_427547.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-24T23:42:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427547"
}
```



---

archive/issue_comments_496868.json:
```json
{
    "body": "Changed commit from **[`62b1c61`](https://github.com/sagemath/sagetrac-mirror/commit/62b1c6177607b85a8d2cc5136bc23d660f0d9931)** to **[`462f071`](https://github.com/sagemath/sagetrac-mirror/commit/462f071cbb7823cf1ac59a016fd71d4ff7ab4522)**",
    "created_at": "2021-01-28T16:09:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496868",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`62b1c61`](https://github.com/sagemath/sagetrac-mirror/commit/62b1c6177607b85a8d2cc5136bc23d660f0d9931)** to **[`462f071`](https://github.com/sagemath/sagetrac-mirror/commit/462f071cbb7823cf1ac59a016fd71d4ff7ab4522)**



---

archive/issue_comments_496869.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/462f071cbb7823cf1ac59a016fd71d4ff7ab4522\">462f071</a></td><td><code>Fix documentation</code></td></tr></table>\n",
    "created_at": "2021-01-28T16:09:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496869",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/462f071cbb7823cf1ac59a016fd71d4ff7ab4522">462f071</a></td><td><code>Fix documentation</code></td></tr></table>




---

archive/issue_comments_496870.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nSorry overlooked this. Since the fix was trivial, I'll put it back to \"positive review\".",
    "created_at": "2021-01-28T16:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496870",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:44" align="right">comment:44</div>

Sorry overlooked this. Since the fix was trivial, I'll put it back to "positive review".



---

archive/issue_events_427548.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-01-28T16:10:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427548"
}
```



---

archive/issue_events_427549.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-01-28T16:10:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427549"
}
```



---

archive/issue_events_427550.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-07T17:06:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427550"
}
```



---

archive/issue_events_427551.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7217db851074da8791f31fb61cab7c506ea77cbc",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-03-07T17:06:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31003#event-427551"
}
```



---

archive/issue_comments_496871.json:
```json
{
    "body": "Changed branch from **[public/build/pytest_config](https://github.com/sagemath/sagetrac-mirror/tree/public/build/pytest_config)** to **[`462f071`](https://github.com/sagemath/sagetrac-mirror/commit/462f071cbb7823cf1ac59a016fd71d4ff7ab4522)**",
    "created_at": "2021-03-07T17:06:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31003",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31003#issuecomment-496871",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/build/pytest_config](https://github.com/sagemath/sagetrac-mirror/tree/public/build/pytest_config)** to **[`462f071`](https://github.com/sagemath/sagetrac-mirror/commit/462f071cbb7823cf1ac59a016fd71d4ff7ab4522)**
