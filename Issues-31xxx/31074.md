# Issue 31074: Explicitly define variables in env.py

archive/issues_030837.json:
```json
{
    "body": "Currently, the definition of variables in `env.py` uses magic involving `__all__`. This screws up static code analysis (pyright, flake8, ...) and makes the code harder to understand. Followings Python's zen \"Explicit is Better than Implicit\" the variables are now defined explicitly.\n\nCC:  @mkoeppe\n\nBranch/Commit: [03fc9b4038a30f1dbbe70dbe3819706df7f2cfe0](https://github.com/sagemath/sagetrac-mirror/commit/03fc9b4038a30f1dbbe70dbe3819706df7f2cfe0)\n\nReviewer: Matthias Koeppe\n\nAuthor: Tobias Diez\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31074\n\n",
    "closed_at": "2021-01-17T13:45:55Z",
    "created_at": "2020-12-18T13:24:34Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Explicitly define variables in env.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31074",
    "user": "https://github.com/tobiasdiez"
}
```
Currently, the definition of variables in `env.py` uses magic involving `__all__`. This screws up static code analysis (pyright, flake8, ...) and makes the code harder to understand. Followings Python's zen "Explicit is Better than Implicit" the variables are now defined explicitly.

CC:  @mkoeppe

Branch/Commit: [03fc9b4038a30f1dbbe70dbe3819706df7f2cfe0](https://github.com/sagemath/sagetrac-mirror/commit/03fc9b4038a30f1dbbe70dbe3819706df7f2cfe0)

Reviewer: Matthias Koeppe

Author: Tobias Diez

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31074





---

archive/issue_comments_617053.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-12-18T13:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617053",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_617054.json:
```json
{
    "body": "<a id='comment:2'></a>\nPerhaps linebreaks after `var(` and before the default value could restore the beautiful handcrafted tabular design.",
    "created_at": "2020-12-18T19:24:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617054",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Perhaps linebreaks after `var(` and before the default value could restore the beautiful handcrafted tabular design.



---

archive/issue_comments_617055.json:
```json
{
    "body": "<a id='comment:3'></a>\nI had this before, and it was way less readable.",
    "created_at": "2020-12-18T21:41:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617055",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:3'></a>
I had this before, and it was way less readable.



---

archive/issue_comments_617056.json:
```json
{
    "body": "<a id='comment:4'></a>\nBest to merge #30901 or a merge conflict will happen later",
    "created_at": "2020-12-19T20:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617056",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
Best to merge #30901 or a merge conflict will happen later



---

archive/issue_comments_617057.json:
```json
{
    "body": "<a id='comment:5'></a>\nI had too much trouble in the past with updating dependencies so I prefer not to use them except if they are really necessary. The changes here do not rely on the ones in #30901 and thus I prefer to handle the merge conflicts by simply pulling the latest develop branch once #30901 is merged.",
    "created_at": "2020-12-20T09:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617057",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:5'></a>
I had too much trouble in the past with updating dependencies so I prefer not to use them except if they are really necessary. The changes here do not rely on the ones in #30901 and thus I prefer to handle the merge conflicts by simply pulling the latest develop branch once #30901 is merged.



---

archive/issue_comments_617058.json:
```json
{
    "body": "Changing commit from \"[6d7a391337c12c7500c4c19a334b4fe006e3e1cf](https://github.com/sagemath/sagetrac-mirror/commit/6d7a391337c12c7500c4c19a334b4fe006e3e1cf)\" to \"[bd3812c68035c0ee86d1a81a551fe6e9cd91d577](https://github.com/sagemath/sagetrac-mirror/commit/bd3812c68035c0ee86d1a81a551fe6e9cd91d577)\"",
    "created_at": "2020-12-29T12:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617058",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[6d7a391337c12c7500c4c19a334b4fe006e3e1cf](https://github.com/sagemath/sagetrac-mirror/commit/6d7a391337c12c7500c4c19a334b4fe006e3e1cf)" to "[bd3812c68035c0ee86d1a81a551fe6e9cd91d577](https://github.com/sagemath/sagetrac-mirror/commit/bd3812c68035c0ee86d1a81a551fe6e9cd91d577)"



---

archive/issue_comments_617059.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|\n|[bd3812c](https://github.com/sagemath/sagetrac-mirror/commit/bd3812c68035c0ee86d1a81a551fe6e9cd91d577)|`Merge branch 'develop' of git://github.com/sagemath/sage into public/refactoring/env_variables_expl`|",
    "created_at": "2020-12-29T12:00:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617059",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
|[bd3812c](https://github.com/sagemath/sagetrac-mirror/commit/bd3812c68035c0ee86d1a81a551fe6e9cd91d577)|`Merge branch 'develop' of git://github.com/sagemath/sage into public/refactoring/env_variables_expl`|



---

archive/issue_comments_617060.json:
```json
{
    "body": "<a id='comment:7'></a>\nMerged develop now.",
    "created_at": "2020-12-29T12:02:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617060",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:7'></a>
Merged develop now.



---

archive/issue_comments_617061.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-12-29T18:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617061",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_617062.json:
```json
{
    "body": "<a id='comment:8'></a>\npatchbot shows doctest failures",
    "created_at": "2020-12-29T18:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617062",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
patchbot shows doctest failures



---

archive/issue_comments_617063.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------|\n|[78f6be2](https://github.com/sagemath/sagetrac-mirror/commit/78f6be287257f6019bbd579c2693906116b31de5)|`Fix tests`|",
    "created_at": "2020-12-29T20:23:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617063",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------|
|[78f6be2](https://github.com/sagemath/sagetrac-mirror/commit/78f6be287257f6019bbd579c2693906116b31de5)|`Fix tests`|



---

archive/issue_comments_617064.json:
```json
{
    "body": "Changing commit from \"[bd3812c68035c0ee86d1a81a551fe6e9cd91d577](https://github.com/sagemath/sagetrac-mirror/commit/bd3812c68035c0ee86d1a81a551fe6e9cd91d577)\" to \"[78f6be287257f6019bbd579c2693906116b31de5](https://github.com/sagemath/sagetrac-mirror/commit/78f6be287257f6019bbd579c2693906116b31de5)\"",
    "created_at": "2020-12-29T20:23:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617064",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[bd3812c68035c0ee86d1a81a551fe6e9cd91d577](https://github.com/sagemath/sagetrac-mirror/commit/bd3812c68035c0ee86d1a81a551fe6e9cd91d577)" to "[78f6be287257f6019bbd579c2693906116b31de5](https://github.com/sagemath/sagetrac-mirror/commit/78f6be287257f6019bbd579c2693906116b31de5)"



---

archive/issue_comments_617065.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-12-29T20:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617065",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_617066.json:
```json
{
    "body": "<a id='comment:10'></a>\nShould be fixed now.",
    "created_at": "2020-12-29T20:23:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617066",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:10'></a>
Should be fixed now.



---

archive/issue_comments_617067.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-12-29T20:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617067",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_617068.json:
```json
{
    "body": "<a id='comment:12'></a>\n`Optional` is imported twice",
    "created_at": "2021-01-02T18:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617068",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
`Optional` is imported twice



---

archive/issue_comments_617069.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-01-02T18:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617069",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_617070.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[03fc9b4](https://github.com/sagemath/sagetrac-mirror/commit/03fc9b4038a30f1dbbe70dbe3819706df7f2cfe0)|`Remove double optional import`|",
    "created_at": "2021-01-04T19:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617070",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[03fc9b4](https://github.com/sagemath/sagetrac-mirror/commit/03fc9b4038a30f1dbbe70dbe3819706df7f2cfe0)|`Remove double optional import`|



---

archive/issue_comments_617071.json:
```json
{
    "body": "Changing commit from \"[78f6be287257f6019bbd579c2693906116b31de5](https://github.com/sagemath/sagetrac-mirror/commit/78f6be287257f6019bbd579c2693906116b31de5)\" to \"[03fc9b4038a30f1dbbe70dbe3819706df7f2cfe0](https://github.com/sagemath/sagetrac-mirror/commit/03fc9b4038a30f1dbbe70dbe3819706df7f2cfe0)\"",
    "created_at": "2021-01-04T19:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617071",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[78f6be287257f6019bbd579c2693906116b31de5](https://github.com/sagemath/sagetrac-mirror/commit/78f6be287257f6019bbd579c2693906116b31de5)" to "[03fc9b4038a30f1dbbe70dbe3819706df7f2cfe0](https://github.com/sagemath/sagetrac-mirror/commit/03fc9b4038a30f1dbbe70dbe3819706df7f2cfe0)"



---

archive/issue_comments_617072.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-01-04T19:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617072",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_617073.json:
```json
{
    "body": "<a id='comment:14'></a>\nThanks, was a merge problem I guess. Fixed now.",
    "created_at": "2021-01-04T19:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617073",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:14'></a>
Thanks, was a merge problem I guess. Fixed now.



---

archive/issue_comments_617074.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-01-06T02:20:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617074",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_617075.json:
```json
{
    "body": "Reviewer: Matthias Koeppe",
    "created_at": "2021-01-06T02:20:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617075",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: Matthias Koeppe



---

archive/issue_comments_617076.json:
```json
{
    "body": "<a id='comment:16'></a>\nThanks!",
    "created_at": "2021-01-06T09:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617076",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:16'></a>
Thanks!



---

archive/issue_comments_617077.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-17T13:45:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617077",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_091393.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-17T13:45:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31074#event-91393"
}
```



---

archive/issue_comments_617078.json:
```json
{
    "body": "Changing branch from \"[public/refactoring/env_variables_expl](https://github.com/sagemath/sagetrac-mirror/tree/public/refactoring/env_variables_expl)\" to \"[03fc9b4038a30f1dbbe70dbe3819706df7f2cfe0](https://github.com/sagemath/sagetrac-mirror/commit/03fc9b4038a30f1dbbe70dbe3819706df7f2cfe0)\"",
    "created_at": "2021-01-17T13:45:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31074",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31074#issuecomment-617078",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[public/refactoring/env_variables_expl](https://github.com/sagemath/sagetrac-mirror/tree/public/refactoring/env_variables_expl)" to "[03fc9b4038a30f1dbbe70dbe3819706df7f2cfe0](https://github.com/sagemath/sagetrac-mirror/commit/03fc9b4038a30f1dbbe70dbe3819706df7f2cfe0)"
