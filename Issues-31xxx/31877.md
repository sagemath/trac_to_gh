# Issue 31877: Refine category of RealSet

archive/issues_031640.json:
```json
{
    "body": "we should put it in a suitable subcategory of `TopologicalSpaces`.\n\n\nCC:  @mjungmath @egourgoulhon @tscrim\n\nBranch/Commit: 5b0f85d4ef4734c89701c1d0144fae2e9dc6b408\n\nReviewer: Travis Scrimshaw\n\nAuthor: Matthias Koeppe\n\nDependencies: #31880\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31877\n\n",
    "closed_at": "2021-06-29T23:08:33Z",
    "created_at": "2021-05-29T21:11:24Z",
    "labels": [
        "component: categories"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Refine category of RealSet",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31877",
    "user": "https://github.com/mkoeppe"
}
```
we should put it in a suitable subcategory of `TopologicalSpaces`.


CC:  @mjungmath @egourgoulhon @tscrim

Branch/Commit: 5b0f85d4ef4734c89701c1d0144fae2e9dc6b408

Reviewer: Travis Scrimshaw

Author: Matthias Koeppe

Dependencies: #31880

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31877





---

archive/issue_comments_482347.json:
```json
{
    "body": "<a id='comment:1'></a>Possibly a good idea to consider: #30832#comment:6.",
    "created_at": "2021-05-29T22:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482347",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:1'></a>Possibly a good idea to consider: #30832#comment:6.



---

archive/issue_comments_482348.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2021-05-29T22:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482348",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_482349.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-05-29T22:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482349",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_482350.json:
```json
{
    "body": "<a id='comment:4'></a>I personally don't like adding `RealSet` to `TopologicalSpaces`. Imo the difference between `RealSet` and `OpenInterval` should be exactly that: seeing them as sets or manifolds (i.e. top. spaces).\n\nThen a forgetful functor would also make more sense.",
    "created_at": "2021-05-30T09:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482350",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:4'></a>I personally don't like adding `RealSet` to `TopologicalSpaces`. Imo the difference between `RealSet` and `OpenInterval` should be exactly that: seeing them as sets or manifolds (i.e. top. spaces).

Then a forgetful functor would also make more sense.



---

archive/issue_comments_482351.json:
```json
{
    "body": "<a id='comment:5'></a>A `RealSet` instance is a union of finitely many (possibly degenerate) intervals, so it is always a topological subspace of the real line, but not always a manifold. It would belong to the category of manifolds with corners of mixed dimension, but I think it's a long way until we have implemented that.",
    "created_at": "2021-05-30T17:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482351",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>A `RealSet` instance is a union of finitely many (possibly degenerate) intervals, so it is always a topological subspace of the real line, but not always a manifold. It would belong to the category of manifolds with corners of mixed dimension, but I think it's a long way until we have implemented that.



---

archive/issue_comments_482352.json:
```json
{
    "body": "<a id='comment:6'></a>I think this is good. As Matthias said, they are naturally topological spaces from the subspace topology. The only question I have is why is `ambient()` a ``@`staticmethod`? I feel like it should be a normal method because the ambient space is associated with the instance rather than as a constructor function (cf. `open_closed`).\n\n`@`gh-mjungmath I don't understand what you mean by forgetful functor. These are parents, and have nothing to do with functors. For example, there is a forgetful functor from `Rings -> Sets`, and applying that functor to `ZZ` still obtains `ZZ`. It still has all of the behavior of an object in `Sets`, but there is no reason to actually forget about the ring structure.",
    "created_at": "2021-05-30T23:18:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482352",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>I think this is good. As Matthias said, they are naturally topological spaces from the subspace topology. The only question I have is why is `ambient()` a ``@`staticmethod`? I feel like it should be a normal method because the ambient space is associated with the instance rather than as a constructor function (cf. `open_closed`).

`@`gh-mjungmath I don't understand what you mean by forgetful functor. These are parents, and have nothing to do with functors. For example, there is a forgetful functor from `Rings -> Sets`, and applying that functor to `ZZ` still obtains `ZZ`. It still has all of the behavior of an object in `Sets`, but there is no reason to actually forget about the ring structure.



---

archive/issue_comments_482353.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:6 tscrim]:\n> The only question I have is why is `ambient()` a ``@`staticmethod`? I feel like it should be a normal method \n\n\nOK, I'll make this change.",
    "created_at": "2021-05-30T23:19:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482353",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Replying to [comment:6 tscrim]:
> The only question I have is why is `ambient()` a ``@`staticmethod`? I feel like it should be a normal method 


OK, I'll make this change.



---

archive/issue_comments_482354.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-30T23:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482354",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_482355.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:6 tscrim]:\n> I don't understand what you mean by forgetful functor. These are parents, and have nothing to do with functors. For example, there is a forgetful functor from `Rings -> Sets`, and applying that functor to `ZZ` still obtains `ZZ`. It still has all of the behavior of an object in `Sets`, but there is no reason to actually forget about the ring structure.\n\n\nI think the idea would be that after applying the functor to the parent, asking for example for the homset would give a different answer.",
    "created_at": "2021-05-30T23:27:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482355",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Replying to [comment:6 tscrim]:
> I don't understand what you mean by forgetful functor. These are parents, and have nothing to do with functors. For example, there is a forgetful functor from `Rings -> Sets`, and applying that functor to `ZZ` still obtains `ZZ`. It still has all of the behavior of an object in `Sets`, but there is no reason to actually forget about the ring structure.


I think the idea would be that after applying the functor to the parent, asking for example for the homset would give a different answer.



---

archive/issue_comments_482356.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 mkoeppe]:\n> Replying to [comment:6 tscrim]:\n> > I don't understand what you mean by forgetful functor. These are parents, and have nothing to do with functors. For example, there is a forgetful functor from `Rings -> Sets`, and applying that functor to `ZZ` still obtains `ZZ`. It still has all of the behavior of an object in `Sets`, but there is no reason to actually forget about the ring structure.\n\n> \n> I think the idea would be that after applying the functor to the parent, asking for example for the homset would give a different answer.\n\n\nIMO, it is better to pass that category information to the homset construction (which you can do) if you want to consider morphisms in a weaker category. This way you have less proliferation of \"equal\" parents and dealing with elements that maybe shouldn't have the additional structure. In this example, should you be able to add two integers that are in the `ZZ` as a `Sets` object? Plus, the category you want for the morphisms is a property of the morphism, not the parent.",
    "created_at": "2021-05-31T00:21:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482356",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>Replying to [comment:10 mkoeppe]:
> Replying to [comment:6 tscrim]:
> > I don't understand what you mean by forgetful functor. These are parents, and have nothing to do with functors. For example, there is a forgetful functor from `Rings -> Sets`, and applying that functor to `ZZ` still obtains `ZZ`. It still has all of the behavior of an object in `Sets`, but there is no reason to actually forget about the ring structure.

> 
> I think the idea would be that after applying the functor to the parent, asking for example for the homset would give a different answer.


IMO, it is better to pass that category information to the homset construction (which you can do) if you want to consider morphisms in a weaker category. This way you have less proliferation of "equal" parents and dealing with elements that maybe shouldn't have the additional structure. In this example, should you be able to add two integers that are in the `ZZ` as a `Sets` object? Plus, the category you want for the morphisms is a property of the morphism, not the parent.



---

archive/issue_comments_482357.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-05-31T00:22:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482357",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_482358.json:
```json
{
    "body": "<a id='comment:12'></a>Thanks for the change.",
    "created_at": "2021-05-31T00:22:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482358",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>Thanks for the change.



---

archive/issue_comments_482359.json:
```json
{
    "body": "<a id='comment:13'></a>Thanks!",
    "created_at": "2021-05-31T00:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482359",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Thanks!



---

archive/issue_comments_482360.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:6 tscrim]:\n> I think this is good. As Matthias said, they are naturally topological spaces from the subspace topology.\n\n\nJust because it comes with a natural topology doesn't mean it is the topology the user wants.\n\nIf you argument like that, every set must be seen in the category of topological spaces, because every set is endowed with a topology.\n\n> \n> `@`gh-mjungmath I don't understand what you mean by forgetful functor. These are parents, and have nothing to do with functors. For example, there is a forgetful functor from `Rings -> Sets`, and applying that functor to `ZZ` still obtains `ZZ`. It still has all of the behavior of an object in `Sets`, but there is no reason to actually forget about the ring structure.\n\n\n> IMO, it is better to pass that category information to the homset construction (which you can do) if you want to consider morphisms in a weaker category. This way you have less proliferation of \"equal\" parents and dealing with elements that maybe shouldn't have the additional structure. In this example, should you be able to add two integers that are in the `ZZ` as a `Sets` object? Plus, the category you want for the morphisms is a property of the morphism, not the parent.\n\n\n\nThen I don't understand why we even have a forgetful functor if it technically just represents the identity functor...",
    "created_at": "2021-05-31T07:55:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482360",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:14'></a>Replying to [comment:6 tscrim]:
> I think this is good. As Matthias said, they are naturally topological spaces from the subspace topology.


Just because it comes with a natural topology doesn't mean it is the topology the user wants.

If you argument like that, every set must be seen in the category of topological spaces, because every set is endowed with a topology.

> 
> `@`gh-mjungmath I don't understand what you mean by forgetful functor. These are parents, and have nothing to do with functors. For example, there is a forgetful functor from `Rings -> Sets`, and applying that functor to `ZZ` still obtains `ZZ`. It still has all of the behavior of an object in `Sets`, but there is no reason to actually forget about the ring structure.


> IMO, it is better to pass that category information to the homset construction (which you can do) if you want to consider morphisms in a weaker category. This way you have less proliferation of "equal" parents and dealing with elements that maybe shouldn't have the additional structure. In this example, should you be able to add two integers that are in the `ZZ` as a `Sets` object? Plus, the category you want for the morphisms is a property of the morphism, not the parent.



Then I don't understand why we even have a forgetful functor if it technically just represents the identity functor...



---

archive/issue_comments_482361.json:
```json
{
    "body": "<a id='comment:15'></a>But I agree, for structures like rings, groups etc. this approach makes total sense. Though, I still don't understand why `ForgetfulFunctor` was introduced in the first place.\n\nBut for manifolds, things are slightly different. It would be good to have a functor that forgets about the topological structure, for example to impose another one. Like I said, I don't like the idea of enforcing a preferred topology on a set if we see it just as set (what we clearly do with `RealSet` as the name indicates).",
    "created_at": "2021-05-31T08:11:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482361",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:15'></a>But I agree, for structures like rings, groups etc. this approach makes total sense. Though, I still don't understand why `ForgetfulFunctor` was introduced in the first place.

But for manifolds, things are slightly different. It would be good to have a functor that forgets about the topological structure, for example to impose another one. Like I said, I don't like the idea of enforcing a preferred topology on a set if we see it just as set (what we clearly do with `RealSet` as the name indicates).



---

archive/issue_comments_482362.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:14 gh-mjungmath]:\n> Replying to [comment:6 tscrim]:\n> > I think this is good. As Matthias said, they are naturally topological spaces from the subspace topology.\n\n> \n> Just because it comes with a natural topology doesn't mean it is the topology the user wants.\n\n\n`RealSet` provides constructors for certain subsets of the reals. The \"set\" of real numbers comes with a distinguished topology, which is reflected by the names of the `RealSet` constructors for intervals such as `open`, `closed`. \n\nIn #31881 (`RealSet`: Extend constructors so that they can build manifold objects) I plan to add a `category` keyword argument. Then also the rather specialized use case that a subset of the real numbers is to be treated merely as a set can be achieved by passing `category=Sets()` to the constructors.",
    "created_at": "2021-05-31T17:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482362",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>Replying to [comment:14 gh-mjungmath]:
> Replying to [comment:6 tscrim]:
> > I think this is good. As Matthias said, they are naturally topological spaces from the subspace topology.

> 
> Just because it comes with a natural topology doesn't mean it is the topology the user wants.


`RealSet` provides constructors for certain subsets of the reals. The "set" of real numbers comes with a distinguished topology, which is reflected by the names of the `RealSet` constructors for intervals such as `open`, `closed`. 

In #31881 (`RealSet`: Extend constructors so that they can build manifold objects) I plan to add a `category` keyword argument. Then also the rather specialized use case that a subset of the real numbers is to be treated merely as a set can be achieved by passing `category=Sets()` to the constructors.



---

archive/issue_comments_482363.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 mkoeppe]:\n> `RealSet` provides constructors for certain subsets of the reals. The \"set\" of real numbers comes with a distinguished topology, which is reflected by the names of the `RealSet` constructors for intervals such as `open`, `closed`. \n\n\nGood point!\n\n> In #31881 (`RealSet`: Extend constructors so that they can build manifold objects) I plan to add a `category` keyword argument. Then also the rather specialized use case that a subset of the real numbers is to be treated merely as a set can be achieved by passing `category=Sets()` to the constructors.\n\n\n+1",
    "created_at": "2021-05-31T17:20:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482363",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:17'></a>Replying to [comment:16 mkoeppe]:
> `RealSet` provides constructors for certain subsets of the reals. The "set" of real numbers comes with a distinguished topology, which is reflected by the names of the `RealSet` constructors for intervals such as `open`, `closed`. 


Good point!

> In #31881 (`RealSet`: Extend constructors so that they can build manifold objects) I plan to add a `category` keyword argument. Then also the rather specialized use case that a subset of the real numbers is to be treated merely as a set can be achieved by passing `category=Sets()` to the constructors.


+1



---

archive/issue_comments_482364.json:
```json
{
    "body": "<a id='comment:18'></a>Just because it acts as the identity on parents, doesn't mean it is the identity functor. Be very careful with confusing abstract and concrete mathematics. If I said `ZZ` the set is the same as `ZZ` the ring, would you agree or disagree? Or would you be like Bill Clinton and state \"That depends on what the definition of 'is' is.\"? The forgetful functor does carry some information, and that is the category you obtain at the end. It could also be used as a base class when you do have some more canonical implementations, but currently it doesn't seem to be used.\n\nBy being in the category of topological spaces, you are stating there is a preferred topology. This is akin to the `WithBasis` category saying there is a distinguished basis. This is why `TopologicalSpaces` is constructed as a functor construction category.\n\nFor the manifold code, while it is dynamic, each manifold is not meant to be treated as something that can change. So if you go from differentiable to topological, you either are actually constructing a different object because the maximal atlas is different or it has the same maximal atlas and you still require the maps to be differentiable. We just may not have provided enough information yet to see that difference.",
    "created_at": "2021-05-31T23:43:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482364",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>Just because it acts as the identity on parents, doesn't mean it is the identity functor. Be very careful with confusing abstract and concrete mathematics. If I said `ZZ` the set is the same as `ZZ` the ring, would you agree or disagree? Or would you be like Bill Clinton and state "That depends on what the definition of 'is' is."? The forgetful functor does carry some information, and that is the category you obtain at the end. It could also be used as a base class when you do have some more canonical implementations, but currently it doesn't seem to be used.

By being in the category of topological spaces, you are stating there is a preferred topology. This is akin to the `WithBasis` category saying there is a distinguished basis. This is why `TopologicalSpaces` is constructed as a functor construction category.

For the manifold code, while it is dynamic, each manifold is not meant to be treated as something that can change. So if you go from differentiable to topological, you either are actually constructing a different object because the maximal atlas is different or it has the same maximal atlas and you still require the maps to be differentiable. We just may not have provided enough information yet to see that difference.



---

archive/issue_comments_482365.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2021-06-19T21:02:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482365",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_482366.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-06-19T21:02:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482366",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_482367.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-19T21:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482367",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_482368.json:
```json
{
    "body": "<a id='comment:21'></a>Merged to resolve merge conflict",
    "created_at": "2021-06-19T21:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482368",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>Merged to resolve merge conflict



---

archive/issue_events_084199.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-29T23:08:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31877#event-84199"
}
```



---

archive/issue_comments_482369.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-29T23:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31877",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31877#issuecomment-482369",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
