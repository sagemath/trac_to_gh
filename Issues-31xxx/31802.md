# Issue 31802: Bug in plotting 3d polyhedron with rays, add option polygon='rainbow'

archive/issues_031565.json:
```json
{
    "body": "Visually, there is no different between the two plots:\n\n```\np = Polyhedron(rays=[(0, 0, 1)],lines=[(1, 0, 0), (0, 1, 0)])\np.plot()\nq = Polyhedron(lines=[(1, 0, 0), (0, 1, 0)])\nq.plot()\n```\nThe bug seems to be caused by `sage.geometry.polyhedron.Projection._init_solid_3d`, which discards the rays. There might also be a bug in `sage.geometry.polyhedron.Projection._init_lines_arrows`, but I'm not sure how to plot the arrows in this example.\n\nCC:  @mkoeppe @fchapoton @dcoudert @slel @jplab\n\nBranch/Commit: fbd18cabc25f954d092034dd49fa61acc67716af\n\nReviewer: Matthias Koeppe\n\nAuthor: Yuan Zhou\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31802\n\n",
    "closed_at": "2022-04-10T13:12:43Z",
    "created_at": "2021-05-09T14:59:54Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Bug in plotting 3d polyhedron with rays, add option polygon='rainbow'",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31802",
    "user": "https://github.com/yuan-zhou"
}
```
Visually, there is no different between the two plots:

```
p = Polyhedron(rays=[(0, 0, 1)],lines=[(1, 0, 0), (0, 1, 0)])
p.plot()
q = Polyhedron(lines=[(1, 0, 0), (0, 1, 0)])
q.plot()
```
The bug seems to be caused by `sage.geometry.polyhedron.Projection._init_solid_3d`, which discards the rays. There might also be a bug in `sage.geometry.polyhedron.Projection._init_lines_arrows`, but I'm not sure how to plot the arrows in this example.

CC:  @mkoeppe @fchapoton @dcoudert @slel @jplab

Branch/Commit: fbd18cabc25f954d092034dd49fa61acc67716af

Reviewer: Matthias Koeppe

Author: Yuan Zhou

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31802





---

archive/issue_comments_481528.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-05-11T05:06:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_481529.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-11T07:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481529",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_481530.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-11T08:56:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481530",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_481531.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-05-11T08:57:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481531",
    "user": "https://github.com/yuan-zhou"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_481532.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-11T23:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481532",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_481533.json:
```json
{
    "body": "<a id='comment:10'></a>`@`mkoeppe, `@`yzh: Can you please add you polyhedral tickets to https://trac.sagemath.org/wiki/SagePolyhedralGeometry.\n\nThat makes it easier to see what is going on and we also use this for the release notes.",
    "created_at": "2021-05-12T07:51:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481533",
    "user": "https://github.com/kliem"
}
```

<a id='comment:10'></a>`@`mkoeppe, `@`yzh: Can you please add you polyhedral tickets to https://trac.sagemath.org/wiki/SagePolyhedralGeometry.

That makes it easier to see what is going on and we also use this for the release notes.



---

archive/issue_events_083981.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31802#event-83981"
}
```



---

archive/issue_comments_481534.json:
```json
{
    "body": "<a id='comment:11'></a>Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481534",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_481535.json:
```json
{
    "body": "<a id='comment:12'></a>Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481535",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_events_083982.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31802#event-83982"
}
```



---

archive/issue_events_083983.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31802#event-83983"
}
```



---

archive/issue_comments_481536.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-01-23T19:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481536",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_481537.json:
```json
{
    "body": "<a id='comment:13'></a>red branch => needs_work",
    "created_at": "2022-01-23T19:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481537",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'></a>red branch => needs_work



---

archive/issue_comments_481538.json:
```json
{
    "body": "<a id='comment:15'></a>Rebased on current beta\n\n---\nNew commits:",
    "created_at": "2022-04-02T18:29:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481538",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>Rebased on current beta

---
New commits:



---

archive/issue_comments_481539.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-04-02T18:29:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481539",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_481540.json:
```json
{
    "body": "<a id='comment:17'></a>The new rainbow option should be documented.\n\nThe changes to `point_opts`, `line_opts` need to be motivated",
    "created_at": "2022-04-02T18:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481540",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>The new rainbow option should be documented.

The changes to `point_opts`, `line_opts` need to be motivated



---

archive/issue_comments_481541.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-04-02T18:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481541",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_481542.json:
```json
{
    "body": "<a id='comment:20'></a>New commits:",
    "created_at": "2022-04-04T10:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481542",
    "user": "https://github.com/yuan-zhou"
}
```

<a id='comment:20'></a>New commits:



---

archive/issue_comments_481543.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-04-04T10:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481543",
    "user": "https://github.com/yuan-zhou"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_481544.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-04-04T17:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481544",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_481545.json:
```json
{
    "body": "<a id='comment:21'></a>patchbot indicates doctest failure",
    "created_at": "2022-04-04T17:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481545",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>patchbot indicates doctest failure



---

archive/issue_comments_481546.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-04T18:11:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481546",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_481547.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-05T18:14:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481547",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_481548.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-04-05T18:46:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481548",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_481549.json:
```json
{
    "body": "<a id='comment:26'></a>This seems to work well.\n\n---\nNew commits:",
    "created_at": "2022-04-05T19:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481549",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>This seems to work well.

---
New commits:



---

archive/issue_comments_481550.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-04-05T19:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481550",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_481551.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-04-10T13:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31802#issuecomment-481551",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_083984.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-04-10T13:12:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31802",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31802#event-83984"
}
```
