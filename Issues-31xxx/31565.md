# Issue 31565: Build still non-portable despite SAGE_FAT_BINARY=yes because of numpy

archive/issues_031328.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nFollow-up from #29537, #31521.\n\nObserved on `cygwin-standard` but likely also affects the Docker images and the Sage binary distribution.\n\nWith the upgrade to numpy 1.20.x (#31008), the non-portability shows as an error message instead of a crash:\n\n```\n  [sagelib-9.4.beta0]       from numpy.core._multiarray_umath import (\n  [sagelib-9.4.beta0]   RuntimeError: NumPy was built with baseline optimizations: \n  [sagelib-9.4.beta0]   (SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2 AVX512F AVX512CD AVX512_SKX) but your machine doesn't support:\n  [sagelib-9.4.beta0]   (AVX512F).\n  [sagelib-9.4.beta0]   ************************************************************************\n  [sagelib-9.4.beta0]   Error building the Sage library\n  [sagelib-9.4.beta0]   ************************************************************************\n  [sagelib-9.4.beta0] Full log file: /cygdrive/d/a/sage/sage/logs/pkgs/sagelib-9.4.beta0.log\n```\n\nReport withs the 9.3 Linux binary: \n- https://groups.google.com/g/sage-devel/c/Lj-wx4xm0N4/m/9IiDtu4_CgAJ\n- https://groups.google.com/g/sage-support/c/KZFZBoI6xJk/m/aBY9ZIxoBwAJ\n\n\n\n\nDepends on #32257\n\nCC:  @embray @kliem @dimpase @vbraun @kiwifb @slel\n\nComponent: **build**\n\nKeywords: **sdl**\n\nAuthor: **Jonathan Kliem**\n\nBranch/Commit: **[`49e531d`](https://github.com/sagemath/sagetrac-mirror/commit/49e531d3c24ca5bf3f6dff54ce54687256cc429f)**\n\nReviewer: **Thierry Monteil**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31565_\n\n",
    "closed_at": "2021-08-08T15:37:02Z",
    "created_at": "2021-03-26T16:24:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Build still non-portable despite SAGE_FAT_BINARY=yes because of numpy",
    "type": "issue",
    "updated_at": "2021-08-08T15:37:02Z",
    "url": "https://github.com/sagemath/sage/issues/31565",
    "user": "https://github.com/mkoeppe"
}
```
<div id="comment:0"></div>

Follow-up from #29537, #31521.

Observed on `cygwin-standard` but likely also affects the Docker images and the Sage binary distribution.

With the upgrade to numpy 1.20.x (#31008), the non-portability shows as an error message instead of a crash:

```
  [sagelib-9.4.beta0]       from numpy.core._multiarray_umath import (
  [sagelib-9.4.beta0]   RuntimeError: NumPy was built with baseline optimizations: 
  [sagelib-9.4.beta0]   (SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2 AVX512F AVX512CD AVX512_SKX) but your machine doesn't support:
  [sagelib-9.4.beta0]   (AVX512F).
  [sagelib-9.4.beta0]   ************************************************************************
  [sagelib-9.4.beta0]   Error building the Sage library
  [sagelib-9.4.beta0]   ************************************************************************
  [sagelib-9.4.beta0] Full log file: /cygdrive/d/a/sage/sage/logs/pkgs/sagelib-9.4.beta0.log
```

Report withs the 9.3 Linux binary: 
- https://groups.google.com/g/sage-devel/c/Lj-wx4xm0N4/m/9IiDtu4_CgAJ
- https://groups.google.com/g/sage-support/c/KZFZBoI6xJk/m/aBY9ZIxoBwAJ




Depends on #32257

CC:  @embray @kliem @dimpase @vbraun @kiwifb @slel

Component: **build**

Keywords: **sdl**

Author: **Jonathan Kliem**

Branch/Commit: **[`49e531d`](https://github.com/sagemath/sagetrac-mirror/commit/49e531d3c24ca5bf3f6dff54ce54687256cc429f)**

Reviewer: **Thierry Monteil**

_Issue created by migration from https://trac.sagemath.org/ticket/31565_





---

archive/issue_events_432083.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-26T16:24:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432083"
}
```



---

archive/issue_events_432084.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-26T16:24:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432084"
}
```



---

archive/issue_events_432085.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-26T16:24:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432085"
}
```



---

archive/issue_events_432086.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-26T16:24:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432086"
}
```



---

archive/issue_comments_507302.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nWhat are the symptoms? I don't really do cygwin but I may do docker one day.",
    "created_at": "2021-03-29T03:31:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507302",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:2" align="right">comment:2</div>

What are the symptoms? I don't really do cygwin but I may do docker one day.



---

archive/issue_comments_507303.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThe symptom is that something you build on one machine does not run on another machine, aborting with SIGILL.",
    "created_at": "2021-04-03T01:33:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507303",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

The symptom is that something you build on one machine does not run on another machine, aborting with SIGILL.



---

archive/issue_comments_507304.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n Follow-up from #29537, #31521.\n \n-Observed on `cygwin-standard` but likely also affects the Docker images.\n+Observed on `cygwin-standard` but likely also affects the Docker images and the Sage binary distribution.\n+\n``````\n",
    "created_at": "2021-04-03T01:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507304",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
 Follow-up from #29537, #31521.
 
-Observed on `cygwin-standard` but likely also affects the Docker images.
+Observed on `cygwin-standard` but likely also affects the Docker images and the Sage binary distribution.
+
``````




---

archive/issue_comments_507305.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nMoving to 9.4, as 9.3 has been released.",
    "created_at": "2021-05-10T17:42:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507305",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Moving to 9.4, as 9.3 has been released.



---

archive/issue_events_432087.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432087"
}
```



---

archive/issue_events_432088.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432088"
}
```



---

archive/issue_comments_507306.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,17 @@\n \n Observed on `cygwin-standard` but likely also affects the Docker images and the Sage binary distribution.\n \n+With the upgrade to numpy 1.20.x (#31008), the non-portability shows as an error message instead of a crash:\n+\n+```\n+  [sagelib-9.4.beta0]       from numpy.core._multiarray_umath import (\n+  [sagelib-9.4.beta0]   RuntimeError: NumPy was built with baseline optimizations: \n+  [sagelib-9.4.beta0]   (SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2 AVX512F AVX512CD AVX512_SKX) but your machine doesn't support:\n+  [sagelib-9.4.beta0]   (AVX512F).\n+  [sagelib-9.4.beta0]   ************************************************************************\n+  [sagelib-9.4.beta0]   Error building the Sage library\n+  [sagelib-9.4.beta0]   ************************************************************************\n+  [sagelib-9.4.beta0] Full log file: /cygdrive/d/a/sage/sage/logs/pkgs/sagelib-9.4.beta0.log\n+```\n+\n+\n``````\n",
    "created_at": "2021-06-04T18:38:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507306",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,17 @@
 
 Observed on `cygwin-standard` but likely also affects the Docker images and the Sage binary distribution.
 
+With the upgrade to numpy 1.20.x (#31008), the non-portability shows as an error message instead of a crash:
+
+```
+  [sagelib-9.4.beta0]       from numpy.core._multiarray_umath import (
+  [sagelib-9.4.beta0]   RuntimeError: NumPy was built with baseline optimizations: 
+  [sagelib-9.4.beta0]   (SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42 AVX F16C FMA3 AVX2 AVX512F AVX512CD AVX512_SKX) but your machine doesn't support:
+  [sagelib-9.4.beta0]   (AVX512F).
+  [sagelib-9.4.beta0]   ************************************************************************
+  [sagelib-9.4.beta0]   Error building the Sage library
+  [sagelib-9.4.beta0]   ************************************************************************
+  [sagelib-9.4.beta0] Full log file: /cygdrive/d/a/sage/sage/logs/pkgs/sagelib-9.4.beta0.log
+```
+
+
``````




---

archive/issue_comments_507307.json:
```json
{
    "body": "Dependencies: **#31008**",
    "created_at": "2021-06-04T18:38:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507307",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#31008**



---

archive/issue_events_432089.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-04T18:38:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432089"
}
```



---

archive/issue_events_432090.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-04T18:38:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432090"
}
```



---

archive/issue_comments_507308.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI guess we need to unwind #31521 now??",
    "created_at": "2021-06-04T18:40:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507308",
    "user": "https://github.com/kliem"
}
```

<div id="comment:7" align="right">comment:7</div>

I guess we need to unwind #31521 now??



---

archive/issue_comments_507309.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAh, that's right!",
    "created_at": "2021-06-04T20:22:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507309",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Ah, that's right!



---

archive/issue_comments_507310.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,4 +15,7 @@\n   [sagelib-9.4.beta0] Full log file: /cygdrive/d/a/sage/sage/logs/pkgs/sagelib-9.4.beta0.log\n ```\n \n+Report with the 9.3 Linux binary: https://groups.google.com/g/sage-devel/c/Lj-wx4xm0N4/m/9IiDtu4_CgAJ\n \n+\n+\n``````\n",
    "created_at": "2021-06-04T20:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507310",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,4 +15,7 @@
   [sagelib-9.4.beta0] Full log file: /cygdrive/d/a/sage/sage/logs/pkgs/sagelib-9.4.beta0.log
 ```
 
+Report with the 9.3 Linux binary: https://groups.google.com/g/sage-devel/c/Lj-wx4xm0N4/m/9IiDtu4_CgAJ
 
+
+
``````




---

archive/issue_comments_507311.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,7 +15,9 @@\n   [sagelib-9.4.beta0] Full log file: /cygdrive/d/a/sage/sage/logs/pkgs/sagelib-9.4.beta0.log\n ```\n \n-Report with the 9.3 Linux binary: https://groups.google.com/g/sage-devel/c/Lj-wx4xm0N4/m/9IiDtu4_CgAJ\n+Report withs the 9.3 Linux binary: \n+- https://groups.google.com/g/sage-devel/c/Lj-wx4xm0N4/m/9IiDtu4_CgAJ\n+- https://groups.google.com/g/sage-support/c/KZFZBoI6xJk/m/aBY9ZIxoBwAJ\n \n \n \n``````\n",
    "created_at": "2021-06-19T01:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507311",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,7 +15,9 @@
   [sagelib-9.4.beta0] Full log file: /cygdrive/d/a/sage/sage/logs/pkgs/sagelib-9.4.beta0.log
 ```
 
-Report with the 9.3 Linux binary: https://groups.google.com/g/sage-devel/c/Lj-wx4xm0N4/m/9IiDtu4_CgAJ
+Report withs the 9.3 Linux binary: 
+- https://groups.google.com/g/sage-devel/c/Lj-wx4xm0N4/m/9IiDtu4_CgAJ
+- https://groups.google.com/g/sage-support/c/KZFZBoI6xJk/m/aBY9ZIxoBwAJ
 
 
 
``````




---

archive/issue_comments_507312.json:
```json
{
    "body": "Branch: **[u/mkoeppe/build_still_non_portable_despite_sage_fat_binary_yes_because_of_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/build_still_non_portable_despite_sage_fat_binary_yes_because_of_numpy)**",
    "created_at": "2021-06-19T18:40:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507312",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/build_still_non_portable_despite_sage_fat_binary_yes_because_of_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/build_still_non_portable_despite_sage_fat_binary_yes_because_of_numpy)**



---

archive/issue_comments_507313.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b249c4750f510ba18a36b0306a15914325059398\"><code>b249c47</code></a></td><td><code>Revert \"Revert \"do not allow numpy intrinsics when building fat binary\"\"</code></td></tr></table>\n",
    "created_at": "2021-06-19T18:42:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507313",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b249c4750f510ba18a36b0306a15914325059398"><code>b249c47</code></a></td><td><code>Revert "Revert "do not allow numpy intrinsics when building fat binary""</code></td></tr></table>




---

archive/issue_comments_507314.json:
```json
{
    "body": "Author: **Jonathan Kliem**",
    "created_at": "2021-06-19T18:42:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507314",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Jonathan Kliem**



---

archive/issue_comments_507315.json:
```json
{
    "body": "Commit: **[`b249c47`](https://github.com/sagemath/sagetrac-mirror/commit/b249c4750f510ba18a36b0306a15914325059398)**",
    "created_at": "2021-06-19T18:42:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507315",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`b249c47`](https://github.com/sagemath/sagetrac-mirror/commit/b249c4750f510ba18a36b0306a15914325059398)**



---

archive/issue_events_432091.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-19T18:42:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432091"
}
```



---

archive/issue_comments_507316.json:
```json
{
    "body": "Reviewer: **https://github.com/mkoeppe/sage/actions/runs/952966309**",
    "created_at": "2021-06-19T18:47:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507316",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **https://github.com/mkoeppe/sage/actions/runs/952966309**



---

archive/issue_comments_507317.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nThanks for taking care of this.",
    "created_at": "2021-06-19T20:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507317",
    "user": "https://github.com/kliem"
}
```

<div id="comment:14" align="right">comment:14</div>

Thanks for taking care of this.



---

archive/issue_comments_507318.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThe `cygwin-standard` build looked rather promising (no \"baseline optimizations\" message, no crash when just importing numpy) but I am getting crashes again https://github.com/mkoeppe/sage/runs/2867645468 when the doctests do any plotting.",
    "created_at": "2021-06-20T15:52:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507318",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

The `cygwin-standard` build looked rather promising (no "baseline optimizations" message, no crash when just importing numpy) but I am getting crashes again https://github.com/mkoeppe/sage/runs/2867645468 when the doctests do any plotting.



---

archive/issue_events_432092.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-20T15:57:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432092"
}
```



---

archive/issue_events_432093.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-20T15:57:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432093"
}
```



---

archive/issue_comments_507319.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/952966309** to **Matthias Koeppe**",
    "created_at": "2021-06-20T15:57:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507319",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/952966309** to **Matthias Koeppe**



---

archive/issue_comments_507320.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThe other runs at https://github.com/mkoeppe/sage/runs/2865933225?check_suite_focus=true look clean.\n\nSo I consider this ticket already an improvement. We'll have to chase the crash on cygwin when switching CPUs between build stages in ... yet another ... follow-up ticket.",
    "created_at": "2021-06-20T15:57:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507320",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

The other runs at https://github.com/mkoeppe/sage/runs/2865933225?check_suite_focus=true look clean.

So I consider this ticket already an improvement. We'll have to chase the crash on cygwin when switching CPUs between build stages in ... yet another ... follow-up ticket.



---

archive/issue_comments_507321.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nMore numpy-related trouble, looking as e.g. from  https://groups.google.com/d/msgid/sage-devel/763f8650-9803-4bba-a0ec-46744204fc22n%40googlegroups.com. (there are more reports like this)\n\n```\n[sagelib-9.4.beta2]   File \"/home/chapoton/sage/local/lib/python3.8/site-packages/numpy/core/overrides.py\", line 7, in <module>\n[sagelib-9.4.beta2]     from numpy.core._multiarray_umath import (\n[sagelib-9.4.beta2] RuntimeError: NumPy was built with baseline optimizations: \n[sagelib-9.4.beta2] (SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42) but your machine doesn't support:\n[sagelib-9.4.beta2] (POPCNT).\n```\nSo somehow CPU changes its state, and refuses to say yes to features tested as yes during the Numpy build?!\nIs it due to some CPU flags manipulations happening during sagelib build?",
    "created_at": "2021-06-21T12:30:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507321",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

More numpy-related trouble, looking as e.g. from  https://groups.google.com/d/msgid/sage-devel/763f8650-9803-4bba-a0ec-46744204fc22n%40googlegroups.com. (there are more reports like this)

```
[sagelib-9.4.beta2]   File "/home/chapoton/sage/local/lib/python3.8/site-packages/numpy/core/overrides.py", line 7, in <module>
[sagelib-9.4.beta2]     from numpy.core._multiarray_umath import (
[sagelib-9.4.beta2] RuntimeError: NumPy was built with baseline optimizations: 
[sagelib-9.4.beta2] (SSE SSE2 SSE3 SSSE3 SSE41 POPCNT SSE42) but your machine doesn't support:
[sagelib-9.4.beta2] (POPCNT).
```
So somehow CPU changes its state, and refuses to say yes to features tested as yes during the Numpy build?!
Is it due to some CPU flags manipulations happening during sagelib build?



---

archive/issue_comments_507322.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI've opened #32021 to deal with that `RuntimeError: NumPy was built with baseline optimizations:` thing.",
    "created_at": "2021-06-21T12:39:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507322",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">comment:18</div>

I've opened #32021 to deal with that `RuntimeError: NumPy was built with baseline optimizations:` thing.



---

archive/issue_comments_507323.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nAcutally the definition of `cpu-dispatch` in `NUMPY_FCONFIG` isn't clean. However, only the vallue will be passed and not the variable `NUMPY_FCONFIG`.",
    "created_at": "2021-06-22T11:30:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507323",
    "user": "https://github.com/kliem"
}
```

<div id="comment:19" align="right">comment:19</div>

Acutally the definition of `cpu-dispatch` in `NUMPY_FCONFIG` isn't clean. However, only the vallue will be passed and not the variable `NUMPY_FCONFIG`.



---

archive/issue_comments_507324.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThis doesn't work. See [#32021 comment:10](https://github.com/sagemath/sage/issues/32021#comment:10).\n\nIt's a build option not a configure option.",
    "created_at": "2021-06-22T18:16:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507324",
    "user": "https://github.com/kliem"
}
```

<div id="comment:20" align="right">comment:20</div>

This doesn't work. See [#32021 comment:10](https://github.com/sagemath/sage/issues/32021#comment:10).

It's a build option not a configure option.



---

archive/issue_events_432094.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-22T18:16:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432094"
}
```



---

archive/issue_events_432095.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-22T18:16:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432095"
}
```



---

archive/issue_comments_507325.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nActually the place to do it is correct however:\n\n> The command arguments are available in build, build_clib, and build_ext. if build_clib or build_ext are not specified by the user, the arguments of build will be used instead, which also holds the default values.\n\nSo this does not work for `bdist_wheel` and this is what we use.",
    "created_at": "2021-06-22T19:51:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507325",
    "user": "https://github.com/kliem"
}
```

<div id="comment:21" align="right">comment:21</div>

Actually the place to do it is correct however:

> The command arguments are available in build, build_clib, and build_ext. if build_clib or build_ext are not specified by the user, the arguments of build will be used instead, which also holds the default values.

So this does not work for `bdist_wheel` and this is what we use.



---

archive/issue_comments_507326.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nYou can do `setup.py bdist_wheel build [...build-options...]`, see for example build/pkgs/jupyter_jsmol/spkg-install.in",
    "created_at": "2021-06-22T20:03:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507326",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

You can do `setup.py bdist_wheel build [...build-options...]`, see for example build/pkgs/jupyter_jsmol/spkg-install.in



---

archive/issue_comments_507327.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThanks. This seems to do the trick.\n\nActually this itself might even work for this ticket here.",
    "created_at": "2021-06-22T20:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507327",
    "user": "https://github.com/kliem"
}
```

<div id="comment:23" align="right">comment:23</div>

Thanks. This seems to do the trick.

Actually this itself might even work for this ticket here.



---

archive/issue_comments_507328.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/build_still_non_portable_despite_sage_fat_binary_yes_because_of_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/build_still_non_portable_despite_sage_fat_binary_yes_because_of_numpy)** to **[public/31565](https://github.com/sagemath/sagetrac-mirror/tree/public/31565)**",
    "created_at": "2021-06-23T11:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507328",
    "user": "https://github.com/kliem"
}
```

Changed branch from **[u/mkoeppe/build_still_non_portable_despite_sage_fat_binary_yes_because_of_numpy](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/build_still_non_portable_despite_sage_fat_binary_yes_because_of_numpy)** to **[public/31565](https://github.com/sagemath/sagetrac-mirror/tree/public/31565)**



---

archive/issue_comments_507329.json:
```json
{
    "body": "Changed commit from **[`b249c47`](https://github.com/sagemath/sagetrac-mirror/commit/b249c4750f510ba18a36b0306a15914325059398)** to **[`82ae485`](https://github.com/sagemath/sagetrac-mirror/commit/82ae48525b377032296f7f83cdc70e7acf5cd533)**",
    "created_at": "2021-06-23T11:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507329",
    "user": "https://github.com/kliem"
}
```

Changed commit from **[`b249c47`](https://github.com/sagemath/sagetrac-mirror/commit/b249c4750f510ba18a36b0306a15914325059398)** to **[`82ae485`](https://github.com/sagemath/sagetrac-mirror/commit/82ae48525b377032296f7f83cdc70e7acf5cd533)**



---

archive/issue_events_432096.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-23T11:24:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432096"
}
```



---

archive/issue_events_432097.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-06-23T11:24:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432097"
}
```



---

archive/issue_comments_507330.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82ae48525b377032296f7f83cdc70e7acf5cd533\"><code>82ae485</code></a></td><td><code>disable baseline in case of SAGE_FAT_BINARY</code></td></tr></table>\n",
    "created_at": "2021-06-23T11:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507330",
    "user": "https://github.com/kliem"
}
```

<div id="comment:24"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82ae48525b377032296f7f83cdc70e7acf5cd533"><code>82ae485</code></a></td><td><code>disable baseline in case of SAGE_FAT_BINARY</code></td></tr></table>




---

archive/issue_comments_507331.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nhttps://github.com/kliem/sage/pull/46/checks",
    "created_at": "2021-06-23T11:25:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507331",
    "user": "https://github.com/kliem"
}
```

<div id="comment:25" align="right">comment:25</div>

https://github.com/kliem/sage/pull/46/checks



---

archive/issue_events_432098.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T03:05:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432098"
}
```



---

archive/issue_events_432099.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T03:05:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432099"
}
```



---

archive/issue_comments_507332.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nUnclear whether this is still needed now that #32021 is merged in 9.4.beta5",
    "created_at": "2021-07-19T03:05:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507332",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Unclear whether this is still needed now that #32021 is merged in 9.4.beta5



---

archive/issue_comments_507333.json:
```json
{
    "body": "Changed dependencies from **#31008** to **#32257**",
    "created_at": "2021-07-21T22:55:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507333",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#31008** to **#32257**



---

archive/issue_comments_507334.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nWith #32021 and the `pynac` build failure fixed by #32257, we are back to being able to build and run the testsuite on Cygwin. https://github.com/mkoeppe/sage/runs/3126612760?check_suite_focus=true\n\nNumerous SIGSEGVs whenever plotting is involved point to more trouble with numpy.\n\nI'll try out the branch of the present ticket on top of #32257.",
    "created_at": "2021-07-21T22:58:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507334",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

With #32021 and the `pynac` build failure fixed by #32257, we are back to being able to build and run the testsuite on Cygwin. https://github.com/mkoeppe/sage/runs/3126612760?check_suite_focus=true

Numerous SIGSEGVs whenever plotting is involved point to more trouble with numpy.

I'll try out the branch of the present ticket on top of #32257.



---

archive/issue_comments_507335.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4156f754ca211962bd58057a547a1c726d60e33\"><code>d4156f7</code></a></td><td><code>build/pkgs/singular/patches/0001-factory-canonicalform.h-Add-more-FACTORY_PUBLIC.patch: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49e531d3c24ca5bf3f6dff54ce54687256cc429f\"><code>49e531d</code></a></td><td><code>disable baseline in case of SAGE_FAT_BINARY</code></td></tr></table>\n",
    "created_at": "2021-07-21T22:59:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507335",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4156f754ca211962bd58057a547a1c726d60e33"><code>d4156f7</code></a></td><td><code>build/pkgs/singular/patches/0001-factory-canonicalform.h-Add-more-FACTORY_PUBLIC.patch: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49e531d3c24ca5bf3f6dff54ce54687256cc429f"><code>49e531d</code></a></td><td><code>disable baseline in case of SAGE_FAT_BINARY</code></td></tr></table>




---

archive/issue_comments_507336.json:
```json
{
    "body": "Changed commit from **[`82ae485`](https://github.com/sagemath/sagetrac-mirror/commit/82ae48525b377032296f7f83cdc70e7acf5cd533)** to **[`49e531d`](https://github.com/sagemath/sagetrac-mirror/commit/49e531d3c24ca5bf3f6dff54ce54687256cc429f)**",
    "created_at": "2021-07-21T22:59:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507336",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`82ae485`](https://github.com/sagemath/sagetrac-mirror/commit/82ae48525b377032296f7f83cdc70e7acf5cd533)** to **[`49e531d`](https://github.com/sagemath/sagetrac-mirror/commit/49e531d3c24ca5bf3f6dff54ce54687256cc429f)**



---

archive/issue_comments_507337.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe** to **https://github.com/mkoeppe/sage/actions/runs/1054288431**",
    "created_at": "2021-07-21T23:30:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507337",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Matthias Koeppe** to **https://github.com/mkoeppe/sage/actions/runs/1054288431**



---

archive/issue_comments_507338.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThat's now running at https://github.com/mkoeppe/sage/actions/runs/1054288431",
    "created_at": "2021-07-21T23:30:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507338",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

That's now running at https://github.com/mkoeppe/sage/actions/runs/1054288431



---

archive/issue_comments_507339.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@mkoeppe](#comment%3A28):\n> Numerous SIGSEGVs whenever plotting is involved point to more trouble with numpy.\n> \n> I'll try out the branch of the present ticket on top of #32257.\n\nSame issues as before.",
    "created_at": "2021-07-22T14:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507339",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@mkoeppe](#comment%3A28):
> Numerous SIGSEGVs whenever plotting is involved point to more trouble with numpy.
> 
> I'll try out the branch of the present ticket on top of #32257.

Same issues as before.



---

archive/issue_comments_507340.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nTesting with #32080 merged at https://github.com/mkoeppe/sage/actions/runs/1056686451",
    "created_at": "2021-07-22T15:30:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507340",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Testing with #32080 merged at https://github.com/mkoeppe/sage/actions/runs/1056686451



---

archive/issue_comments_507341.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/1054288431** to none",
    "created_at": "2021-07-22T15:30:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507341",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/1054288431** to none



---

archive/issue_comments_507342.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nAlso with #32080 no change. Segfaults on every plot.\n\nNext step would be to try to reproduce this in a local installation in Cygwin.",
    "created_at": "2021-07-23T22:45:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507342",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

Also with #32080 no change. Segfaults on every plot.

Next step would be to try to reproduce this in a local installation in Cygwin.



---

archive/issue_events_432100.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-23T22:45:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432100"
}
```



---

archive/issue_events_432101.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-23T22:45:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432101"
}
```



---

archive/issue_events_432102.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-26T17:05:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432102"
}
```



---

archive/issue_events_432103.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-26T17:05:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432103"
}
```



---

archive/issue_comments_507343.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReduced to critical - see https://groups.google.com/g/sage-release/c/91CGN0cra2k/m/1WwPZNshBQAJ",
    "created_at": "2021-07-26T17:06:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507343",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Reduced to critical - see https://groups.google.com/g/sage-release/c/91CGN0cra2k/m/1WwPZNshBQAJ



---

archive/issue_comments_507344.json:
```json
{
    "body": "Changed keywords from none to **sdl**",
    "created_at": "2021-08-03T10:03:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507344",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Changed keywords from none to **sdl**



---

archive/issue_comments_507345.json:
```json
{
    "body": "Reviewer: **Thierry Monteil**",
    "created_at": "2021-08-03T10:03:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507345",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Reviewer: **Thierry Monteil**



---

archive/issue_comments_507346.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nI confirm that this branch fixes SSE2 bug for numpy in a quemulated Pentium 3. Note however that the error appeared at run time not build time.\n\nAs this will allow me to rebuild 32bit patchbots and a new SDL for bullseye release (which i did not do for a while), i am +1 for setting this ticket a blocker and get it merged in 9.4.",
    "created_at": "2021-08-03T10:03:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507346",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:36" align="right">comment:36</div>

I confirm that this branch fixes SSE2 bug for numpy in a quemulated Pentium 3. Note however that the error appeared at run time not build time.

As this will allow me to rebuild 32bit patchbots and a new SDL for bullseye release (which i did not do for a while), i am +1 for setting this ticket a blocker and get it merged in 9.4.



---

archive/issue_events_432104.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2021-08-03T21:23:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432104"
}
```



---

archive/issue_events_432105.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2021-08-03T21:23:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432105"
}
```



---

archive/issue_events_432106.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2021-08-03T21:23:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432106"
}
```



---

archive/issue_events_432107.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2021-08-03T21:23:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20blocker%20/%201",
    "label_color": "ff0000",
    "label_name": "p: blocker / 1",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432107"
}
```



---

archive/issue_comments_507347.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nIf nobody complains.",
    "created_at": "2021-08-03T21:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507347",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:37" align="right">comment:37</div>

If nobody complains.



---

archive/issue_events_432108.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-08-08T15:37:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432108"
}
```



---

archive/issue_events_432109.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "952f7f9006c84ef54ce7b5aa8e908cc5ea9379bf",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-08-08T15:37:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31565#event-432109"
}
```



---

archive/issue_comments_507348.json:
```json
{
    "body": "Changed branch from **[public/31565](https://github.com/sagemath/sagetrac-mirror/tree/public/31565)** to **[`49e531d`](https://github.com/sagemath/sagetrac-mirror/commit/49e531d3c24ca5bf3f6dff54ce54687256cc429f)**",
    "created_at": "2021-08-08T15:37:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31565#issuecomment-507348",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/31565](https://github.com/sagemath/sagetrac-mirror/tree/public/31565)** to **[`49e531d`](https://github.com/sagemath/sagetrac-mirror/commit/49e531d3c24ca5bf3f6dff54ce54687256cc429f)**
