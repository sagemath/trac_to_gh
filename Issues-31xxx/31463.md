# Issue 31463: Univariate matrices: improve Weak Popov form; add Popov form

archive/issues_031226.json:
```json
{
    "body": "**Improvements for weak Popov form**:\n* extend with an option allowing column-wise transformation into column weak Popov (for consistency with other functions),\n* sort the rows by increasing leading position (for consistency with other functions),\n* make some arbitrary but clearly stated choice for where zero rows are placed (typically, at the bottom of the weak Popov form).\n\nThe latter two changes will not impact performance since they only involve row permutation. They should not either impact code that uses the current version, since the current code only guarantees that the output is weak Popov, a fact not changed by the new specification.\n\n**Normalization into Popov form**: call the weak Popov form algorithm and then use Mulders and Storjohann algorithm to transform it into the canonical Popov form. Shifts should be supported, as well as working row-wise or column-wise.\n\n**Zero rows option**: for both weak Popov and Popov forms, add an option to allow the user to specify that they want a form with the zero rows removed (option set to False by default, for compatibility). The number of rows in the returned matrix is then the rank of the input matrix.\n\n**Assignee:** @ke456\n\n**CC:**  @ke456\n\n**Keywords:** polynomial matrix, canonical form\n\n**Branch/Commit:** [b7e5f129f06975fe147b7e54ab0b290c53e4dc6a](https://github.com/sagemath/sagetrac-mirror/commit/b7e5f129f06975fe147b7e54ab0b290c53e4dc6a)\n\n**Reviewer:** Seung Gyu Hyun\n\n**Author:** Vincent Neiger\n\nIssue created by migration from https://trac.sagemath.org/ticket/31463\n\n",
    "closed_at": "2021-08-29T09:37:42Z",
    "created_at": "2021-03-07T19:53:24Z",
    "labels": [
        "component: linear algebra",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "title": "Univariate matrices: improve Weak Popov form; add Popov form",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/31463",
    "user": "https://github.com/vneiger"
}
```
**Improvements for weak Popov form**:
* extend with an option allowing column-wise transformation into column weak Popov (for consistency with other functions),
* sort the rows by increasing leading position (for consistency with other functions),
* make some arbitrary but clearly stated choice for where zero rows are placed (typically, at the bottom of the weak Popov form).

The latter two changes will not impact performance since they only involve row permutation. They should not either impact code that uses the current version, since the current code only guarantees that the output is weak Popov, a fact not changed by the new specification.

**Normalization into Popov form**: call the weak Popov form algorithm and then use Mulders and Storjohann algorithm to transform it into the canonical Popov form. Shifts should be supported, as well as working row-wise or column-wise.

**Zero rows option**: for both weak Popov and Popov forms, add an option to allow the user to specify that they want a form with the zero rows removed (option set to False by default, for compatibility). The number of rows in the returned matrix is then the rank of the input matrix.

**Assignee:** @ke456

**CC:**  @ke456

**Keywords:** polynomial matrix, canonical form

**Branch/Commit:** [b7e5f129f06975fe147b7e54ab0b290c53e4dc6a](https://github.com/sagemath/sagetrac-mirror/commit/b7e5f129f06975fe147b7e54ab0b290c53e4dc6a)

**Reviewer:** Seung Gyu Hyun

**Author:** Vincent Neiger

Issue created by migration from https://trac.sagemath.org/ticket/31463





---

archive/issue_events_282187.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31463#event-282187"
}
```



---

archive/issue_events_282188.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31463#event-282188"
}
```



---

archive/issue_comments_507995.json:
```json
{
    "body": "<a id='comment:1'></a>\nSage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-507995",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_282189.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31463#event-282189"
}
```



---

archive/issue_events_282190.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31463#event-282190"
}
```



---

archive/issue_comments_507996.json:
```json
{
    "body": "**Branch:** [u/gh-vneiger/univariate_matrices__improve_weak_popov_form__add_popov_form](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-vneiger/univariate_matrices__improve_weak_popov_form__add_popov_form)",
    "created_at": "2021-07-27T12:55:23Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-507996",
    "user": "https://github.com/vneiger"
}
```

**Branch:** [u/gh-vneiger/univariate_matrices__improve_weak_popov_form__add_popov_form](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-vneiger/univariate_matrices__improve_weak_popov_form__add_popov_form)



---

archive/issue_comments_507997.json:
```json
{
    "body": "**Commit:** [e6b65dddb129233067d2792b9aaef4b52fde0a28](https://github.com/sagemath/sagetrac-mirror/commit/e6b65dddb129233067d2792b9aaef4b52fde0a28)",
    "created_at": "2021-07-27T12:58:22Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-507997",
    "user": "https://github.com/vneiger"
}
```

**Commit:** [e6b65dddb129233067d2792b9aaef4b52fde0a28](https://github.com/sagemath/sagetrac-mirror/commit/e6b65dddb129233067d2792b9aaef4b52fde0a28)



---

archive/issue_comments_507998.json:
```json
{
    "body": "<a id='comment:4'></a>\nAll things above have been handled in a preliminary version, except for the transformation from weak Popov to (strong) Popov which is kept for later. Minor improvements/corrections are expected; documentation should be completed; and more tests should be done and some of them included in the documentation.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6b65dddb129233067d2792b9aaef4b52fde0a28\">e6b65dd</a></td><td><code>first version without tests yet; all things handled except transfo to Popov form</code></td></tr></table>\n",
    "created_at": "2021-07-27T12:58:22Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-507998",
    "user": "https://github.com/vneiger"
}
```

<a id='comment:4'></a>
All things above have been handled in a preliminary version, except for the transformation from weak Popov to (strong) Popov which is kept for later. Minor improvements/corrections are expected; documentation should be completed; and more tests should be done and some of them included in the documentation.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6b65dddb129233067d2792b9aaef4b52fde0a28">e6b65dd</a></td><td><code>first version without tests yet; all things handled except transfo to Popov form</code></td></tr></table>




---

archive/issue_comments_507999.json:
```json
{
    "body": "**Changing commit** from \"[e6b65dddb129233067d2792b9aaef4b52fde0a28](https://github.com/sagemath/sagetrac-mirror/commit/e6b65dddb129233067d2792b9aaef4b52fde0a28)\" to \"[810048c9a3389fb526c0d8043fc9635f893aae57](https://github.com/sagemath/sagetrac-mirror/commit/810048c9a3389fb526c0d8043fc9635f893aae57)\".",
    "created_at": "2021-07-27T17:10:01Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-507999",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e6b65dddb129233067d2792b9aaef4b52fde0a28](https://github.com/sagemath/sagetrac-mirror/commit/e6b65dddb129233067d2792b9aaef4b52fde0a28)" to "[810048c9a3389fb526c0d8043fc9635f893aae57](https://github.com/sagemath/sagetrac-mirror/commit/810048c9a3389fb526c0d8043fc9635f893aae57)".



---

archive/issue_comments_508000.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b5d84cae3c28f96f4373d485ec3fa805068703e\">0b5d84c</a></td><td><code>minor refacto; noticing that existing algo is wrong when shift is negative</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7c69e1612edadade90a474050167d61264d8e4d\">c7c69e1</a></td><td><code>fix issue with shift having negative entries</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9cb203768197f620d3cc08f4a19d8dd0f5bb0bd2\">9cb2037</a></td><td><code>improving documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/810048c9a3389fb526c0d8043fc9635f893aae57\">810048c</a></td><td><code>many fixes, better documentation</code></td></tr></table>\n",
    "created_at": "2021-07-27T17:10:01Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508000",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b5d84cae3c28f96f4373d485ec3fa805068703e">0b5d84c</a></td><td><code>minor refacto; noticing that existing algo is wrong when shift is negative</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7c69e1612edadade90a474050167d61264d8e4d">c7c69e1</a></td><td><code>fix issue with shift having negative entries</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9cb203768197f620d3cc08f4a19d8dd0f5bb0bd2">9cb2037</a></td><td><code>improving documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/810048c9a3389fb526c0d8043fc9635f893aae57">810048c</a></td><td><code>many fixes, better documentation</code></td></tr></table>




---

archive/issue_comments_508001.json:
```json
{
    "body": "<a id='comment:6'></a>\nSome testing has been done, and some minor corrections made. The documentation is fine now, it just misses some \"documentation tests\".",
    "created_at": "2021-07-27T17:11:17Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508001",
    "user": "https://github.com/vneiger"
}
```

<a id='comment:6'></a>
Some testing has been done, and some minor corrections made. The documentation is fine now, it just misses some "documentation tests".



---

archive/issue_comments_508002.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d8ce369aa5cb9cf3fef373847b37e15e1cf7264d\">d8ce369</a></td><td><code>added numerous tests to documentation</code></td></tr></table>\n",
    "created_at": "2021-07-27T20:32:41Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508002",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d8ce369aa5cb9cf3fef373847b37e15e1cf7264d">d8ce369</a></td><td><code>added numerous tests to documentation</code></td></tr></table>




---

archive/issue_comments_508003.json:
```json
{
    "body": "**Changing commit** from \"[810048c9a3389fb526c0d8043fc9635f893aae57](https://github.com/sagemath/sagetrac-mirror/commit/810048c9a3389fb526c0d8043fc9635f893aae57)\" to \"[d8ce369aa5cb9cf3fef373847b37e15e1cf7264d](https://github.com/sagemath/sagetrac-mirror/commit/d8ce369aa5cb9cf3fef373847b37e15e1cf7264d)\".",
    "created_at": "2021-07-27T20:32:41Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508003",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[810048c9a3389fb526c0d8043fc9635f893aae57](https://github.com/sagemath/sagetrac-mirror/commit/810048c9a3389fb526c0d8043fc9635f893aae57)" to "[d8ce369aa5cb9cf3fef373847b37e15e1cf7264d](https://github.com/sagemath/sagetrac-mirror/commit/d8ce369aa5cb9cf3fef373847b37e15e1cf7264d)".



---

archive/issue_comments_508004.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6cc8850ae2ab9ff9e8f94f3481fd4652ecce0c18\">6cc8850</a></td><td><code>added one test</code></td></tr></table>\n",
    "created_at": "2021-07-27T20:36:11Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508004",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6cc8850ae2ab9ff9e8f94f3481fd4652ecce0c18">6cc8850</a></td><td><code>added one test</code></td></tr></table>




---

archive/issue_comments_508005.json:
```json
{
    "body": "**Changing commit** from \"[d8ce369aa5cb9cf3fef373847b37e15e1cf7264d](https://github.com/sagemath/sagetrac-mirror/commit/d8ce369aa5cb9cf3fef373847b37e15e1cf7264d)\" to \"[6cc8850ae2ab9ff9e8f94f3481fd4652ecce0c18](https://github.com/sagemath/sagetrac-mirror/commit/6cc8850ae2ab9ff9e8f94f3481fd4652ecce0c18)\".",
    "created_at": "2021-07-27T20:36:11Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508005",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d8ce369aa5cb9cf3fef373847b37e15e1cf7264d](https://github.com/sagemath/sagetrac-mirror/commit/d8ce369aa5cb9cf3fef373847b37e15e1cf7264d)" to "[6cc8850ae2ab9ff9e8f94f3481fd4652ecce0c18](https://github.com/sagemath/sagetrac-mirror/commit/6cc8850ae2ab9ff9e8f94f3481fd4652ecce0c18)".



---

archive/issue_comments_508006.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad8417929fbd21db528f1de2b55754ff45318a5f\">ad84179</a></td><td><code>all these tests are better over GF(7); also added one</code></td></tr></table>\n",
    "created_at": "2021-07-27T20:53:16Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508006",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad8417929fbd21db528f1de2b55754ff45318a5f">ad84179</a></td><td><code>all these tests are better over GF(7); also added one</code></td></tr></table>




---

archive/issue_comments_508007.json:
```json
{
    "body": "**Changing commit** from \"[6cc8850ae2ab9ff9e8f94f3481fd4652ecce0c18](https://github.com/sagemath/sagetrac-mirror/commit/6cc8850ae2ab9ff9e8f94f3481fd4652ecce0c18)\" to \"[ad8417929fbd21db528f1de2b55754ff45318a5f](https://github.com/sagemath/sagetrac-mirror/commit/ad8417929fbd21db528f1de2b55754ff45318a5f)\".",
    "created_at": "2021-07-27T20:53:16Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508007",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6cc8850ae2ab9ff9e8f94f3481fd4652ecce0c18](https://github.com/sagemath/sagetrac-mirror/commit/6cc8850ae2ab9ff9e8f94f3481fd4652ecce0c18)" to "[ad8417929fbd21db528f1de2b55754ff45318a5f](https://github.com/sagemath/sagetrac-mirror/commit/ad8417929fbd21db528f1de2b55754ff45318a5f)".



---

archive/issue_comments_508008.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0457e82fd1cea549273402f22132e41666e2f227\">0457e82</a></td><td><code>fix typo and add one test</code></td></tr></table>\n",
    "created_at": "2021-07-27T20:57:09Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508008",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0457e82fd1cea549273402f22132e41666e2f227">0457e82</a></td><td><code>fix typo and add one test</code></td></tr></table>




---

archive/issue_comments_508009.json:
```json
{
    "body": "**Changing commit** from \"[ad8417929fbd21db528f1de2b55754ff45318a5f](https://github.com/sagemath/sagetrac-mirror/commit/ad8417929fbd21db528f1de2b55754ff45318a5f)\" to \"[0457e82fd1cea549273402f22132e41666e2f227](https://github.com/sagemath/sagetrac-mirror/commit/0457e82fd1cea549273402f22132e41666e2f227)\".",
    "created_at": "2021-07-27T20:57:09Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508009",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ad8417929fbd21db528f1de2b55754ff45318a5f](https://github.com/sagemath/sagetrac-mirror/commit/ad8417929fbd21db528f1de2b55754ff45318a5f)" to "[0457e82fd1cea549273402f22132e41666e2f227](https://github.com/sagemath/sagetrac-mirror/commit/0457e82fd1cea549273402f22132e41666e2f227)".



---

archive/issue_comments_508010.json:
```json
{
    "body": "<a id='comment:11'></a>\nExcept for Popov form normalization, everything has been dealt with, including documentation and testing. Note that, to ensure backward compatibility, the computed weak Popov form is not ordered by default, unlike what was suggested in the ticket, but an option to get an ordered form is provided.",
    "created_at": "2021-07-27T20:59:24Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508010",
    "user": "https://github.com/vneiger"
}
```

<a id='comment:11'></a>
Except for Popov form normalization, everything has been dealt with, including documentation and testing. Note that, to ensure backward compatibility, the computed weak Popov form is not ordered by default, unlike what was suggested in the ticket, but an option to get an ordered form is provided.



---

archive/issue_comments_508011.json:
```json
{
    "body": "**Changing commit** from \"[0457e82fd1cea549273402f22132e41666e2f227](https://github.com/sagemath/sagetrac-mirror/commit/0457e82fd1cea549273402f22132e41666e2f227)\" to \"[9c1aea74da14521f2b6f76ed5b3e8abdb695d09b](https://github.com/sagemath/sagetrac-mirror/commit/9c1aea74da14521f2b6f76ed5b3e8abdb695d09b)\".",
    "created_at": "2021-07-29T14:01:18Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508011",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0457e82fd1cea549273402f22132e41666e2f227](https://github.com/sagemath/sagetrac-mirror/commit/0457e82fd1cea549273402f22132e41666e2f227)" to "[9c1aea74da14521f2b6f76ed5b3e8abdb695d09b](https://github.com/sagemath/sagetrac-mirror/commit/9c1aea74da14521f2b6f76ed5b3e8abdb695d09b)".



---

archive/issue_comments_508012.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c1aea74da14521f2b6f76ed5b3e8abdb695d09b\">9c1aea7</a></td><td><code>some minor style fixes; first version of popov_form including doctests</code></td></tr></table>\n",
    "created_at": "2021-07-29T14:01:18Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508012",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c1aea74da14521f2b6f76ed5b3e8abdb695d09b">9c1aea7</a></td><td><code>some minor style fixes; first version of popov_form including doctests</code></td></tr></table>




---

archive/issue_comments_508013.json:
```json
{
    "body": "<a id='comment:13'></a>\nThe last commit does some minor fixes, and an implementation of Popov form normalization following the Mulders and Storjohann algorithm (first call weak Popov form, then normalize degrees by iterating on the rows). It seems to work well, and there is a good amount of doc tests already. It remains to write the corresponding documentation.",
    "created_at": "2021-07-29T14:03:44Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508013",
    "user": "https://github.com/vneiger"
}
```

<a id='comment:13'></a>
The last commit does some minor fixes, and an implementation of Popov form normalization following the Mulders and Storjohann algorithm (first call weak Popov form, then normalize degrees by iterating on the rows). It seems to work well, and there is a good amount of doc tests already. It remains to write the corresponding documentation.



---

archive/issue_comments_508014.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a41613f2441c59072514880fdaff501cc4ac1c4d\">a41613f</a></td><td><code>documentation for Popov form and unification of documentation for weak Popov , reduced , Hermite</code></td></tr></table>\n",
    "created_at": "2021-07-29T17:23:42Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508014",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a41613f2441c59072514880fdaff501cc4ac1c4d">a41613f</a></td><td><code>documentation for Popov form and unification of documentation for weak Popov , reduced , Hermite</code></td></tr></table>




---

archive/issue_comments_508015.json:
```json
{
    "body": "**Changing commit** from \"[9c1aea74da14521f2b6f76ed5b3e8abdb695d09b](https://github.com/sagemath/sagetrac-mirror/commit/9c1aea74da14521f2b6f76ed5b3e8abdb695d09b)\" to \"[a41613f2441c59072514880fdaff501cc4ac1c4d](https://github.com/sagemath/sagetrac-mirror/commit/a41613f2441c59072514880fdaff501cc4ac1c4d)\".",
    "created_at": "2021-07-29T17:23:42Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508015",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9c1aea74da14521f2b6f76ed5b3e8abdb695d09b](https://github.com/sagemath/sagetrac-mirror/commit/9c1aea74da14521f2b6f76ed5b3e8abdb695d09b)" to "[a41613f2441c59072514880fdaff501cc4ac1c4d](https://github.com/sagemath/sagetrac-mirror/commit/a41613f2441c59072514880fdaff501cc4ac1c4d)".



---

archive/issue_comments_508016.json:
```json
{
    "body": "<a id='comment:15'></a>\nDocumentation for Popov form is now ok. Some improvements have been done in the documentation for other related methods as well (Hermite, reduced, weak Popov): the definitions are in the verification method (`is_popov`, `is_reduced`, ..) while the computing method (`popov_form`, `reduced_form`, ..) just points to the relevant definition.",
    "created_at": "2021-07-29T17:25:32Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508016",
    "user": "https://github.com/vneiger"
}
```

<a id='comment:15'></a>
Documentation for Popov form is now ok. Some improvements have been done in the documentation for other related methods as well (Hermite, reduced, weak Popov): the definitions are in the verification method (`is_popov`, `is_reduced`, ..) while the computing method (`popov_form`, `reduced_form`, ..) just points to the relevant definition.



---

archive/issue_comments_508017.json:
```json
{
    "body": "**Assignee:** @ke456",
    "created_at": "2021-07-29T18:22:31Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508017",
    "user": "https://github.com/ke456"
}
```

**Assignee:** @ke456



---

archive/issue_comments_508018.json:
```json
{
    "body": "**Changing commit** from \"[a41613f2441c59072514880fdaff501cc4ac1c4d](https://github.com/sagemath/sagetrac-mirror/commit/a41613f2441c59072514880fdaff501cc4ac1c4d)\" to \"[075e75ced89f79a928089eef10c23ffadae37b1e](https://github.com/sagemath/sagetrac-mirror/commit/075e75ced89f79a928089eef10c23ffadae37b1e)\".",
    "created_at": "2021-07-29T18:28:32Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508018",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a41613f2441c59072514880fdaff501cc4ac1c4d](https://github.com/sagemath/sagetrac-mirror/commit/a41613f2441c59072514880fdaff501cc4ac1c4d)" to "[075e75ced89f79a928089eef10c23ffadae37b1e](https://github.com/sagemath/sagetrac-mirror/commit/075e75ced89f79a928089eef10c23ffadae37b1e)".



---

archive/issue_comments_508019.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/075e75ced89f79a928089eef10c23ffadae37b1e\">075e75c</a></td><td><code>changes line</code></td></tr></table>\n",
    "created_at": "2021-07-29T18:28:32Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508019",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/075e75ced89f79a928089eef10c23ffadae37b1e">075e75c</a></td><td><code>changes line</code></td></tr></table>




---

archive/issue_events_282191.json:
```json
{
    "actor": "https://github.com/vneiger",
    "created_at": "2021-07-29T18:28:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31463#event-282191"
}
```



---

archive/issue_comments_508020.json:
```json
{
    "body": "<a id='comment:19'></a>\nThe comments and tests seem good, but maybe the documentation for reduced_form could be more clear about what reduced form is being computed (since it is not a canonical form). For example, is it randomly computed?\n\nThis function should also be simplified using the new weak_popov_form functionalities.",
    "created_at": "2021-07-29T18:43:19Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508020",
    "user": "https://github.com/ke456"
}
```

<a id='comment:19'></a>
The comments and tests seem good, but maybe the documentation for reduced_form could be more clear about what reduced form is being computed (since it is not a canonical form). For example, is it randomly computed?

This function should also be simplified using the new weak_popov_form functionalities.



---

archive/issue_comments_508021.json:
```json
{
    "body": "<a id='comment:20'></a>\nThank you for noticing this, indeed `reduced_form` should be simplified, it does not need to distinguish row-wise and column-wise anymore thanks to the new `weak_popov_form` features. I'm going to fix this in a commit right now.\n\nAnd indeed, the documentation is unclear because it puts too much highlight on the fact that a reduced form is not unique (for example this is also the case for weak Popov forms, and this is not even mentioned in the weak Popov documentation).\n\nI think this is more confusing than helping, since it already appears clearly in the definitions and the class description that the Popov / Hermite forms are unique, but reduced forms and weak Popov forms are not. So my proposition would be to simply remove this confusing comment: does that sound better?",
    "created_at": "2021-07-29T20:43:10Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508021",
    "user": "https://github.com/vneiger"
}
```

<a id='comment:20'></a>
Thank you for noticing this, indeed `reduced_form` should be simplified, it does not need to distinguish row-wise and column-wise anymore thanks to the new `weak_popov_form` features. I'm going to fix this in a commit right now.

And indeed, the documentation is unclear because it puts too much highlight on the fact that a reduced form is not unique (for example this is also the case for weak Popov forms, and this is not even mentioned in the weak Popov documentation).

I think this is more confusing than helping, since it already appears clearly in the definitions and the class description that the Popov / Hermite forms are unique, but reduced forms and weak Popov forms are not. So my proposition would be to simply remove this confusing comment: does that sound better?



---

archive/issue_comments_508022.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/258d4352236a778cfb7fef8d4c7e196bc17173c0\">258d435</a></td><td><code>reduced form simplification using new weak Popov</code></td></tr></table>\n",
    "created_at": "2021-07-29T20:49:28Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508022",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/258d4352236a778cfb7fef8d4c7e196bc17173c0">258d435</a></td><td><code>reduced form simplification using new weak Popov</code></td></tr></table>




---

archive/issue_comments_508023.json:
```json
{
    "body": "**Changing commit** from \"[075e75ced89f79a928089eef10c23ffadae37b1e](https://github.com/sagemath/sagetrac-mirror/commit/075e75ced89f79a928089eef10c23ffadae37b1e)\" to \"[258d4352236a778cfb7fef8d4c7e196bc17173c0](https://github.com/sagemath/sagetrac-mirror/commit/258d4352236a778cfb7fef8d4c7e196bc17173c0)\".",
    "created_at": "2021-07-29T20:49:28Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508023",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[075e75ced89f79a928089eef10c23ffadae37b1e](https://github.com/sagemath/sagetrac-mirror/commit/075e75ced89f79a928089eef10c23ffadae37b1e)" to "[258d4352236a778cfb7fef8d4c7e196bc17173c0](https://github.com/sagemath/sagetrac-mirror/commit/258d4352236a778cfb7fef8d4c7e196bc17173c0)".



---

archive/issue_comments_508024.json:
```json
{
    "body": "<a id='comment:22'></a>\nYes, I think this is a sensible solution.",
    "created_at": "2021-07-29T21:57:33Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508024",
    "user": "https://github.com/ke456"
}
```

<a id='comment:22'></a>
Yes, I think this is a sensible solution.



---

archive/issue_comments_508025.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7e5f129f06975fe147b7e54ab0b290c53e4dc6a\">b7e5f12</a></td><td><code>fixing documentation of reduced form</code></td></tr></table>\n",
    "created_at": "2021-07-29T22:00:29Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508025",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7e5f129f06975fe147b7e54ab0b290c53e4dc6a">b7e5f12</a></td><td><code>fixing documentation of reduced form</code></td></tr></table>




---

archive/issue_comments_508026.json:
```json
{
    "body": "**Changing commit** from \"[258d4352236a778cfb7fef8d4c7e196bc17173c0](https://github.com/sagemath/sagetrac-mirror/commit/258d4352236a778cfb7fef8d4c7e196bc17173c0)\" to \"[b7e5f129f06975fe147b7e54ab0b290c53e4dc6a](https://github.com/sagemath/sagetrac-mirror/commit/b7e5f129f06975fe147b7e54ab0b290c53e4dc6a)\".",
    "created_at": "2021-07-29T22:00:29Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508026",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[258d4352236a778cfb7fef8d4c7e196bc17173c0](https://github.com/sagemath/sagetrac-mirror/commit/258d4352236a778cfb7fef8d4c7e196bc17173c0)" to "[b7e5f129f06975fe147b7e54ab0b290c53e4dc6a](https://github.com/sagemath/sagetrac-mirror/commit/b7e5f129f06975fe147b7e54ab0b290c53e4dc6a)".



---

archive/issue_comments_508027.json:
```json
{
    "body": "<a id='comment:24'></a>\nOk, done in the last commit. Is there any other thing that still needs to be verified or improved?",
    "created_at": "2021-07-29T22:01:54Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508027",
    "user": "https://github.com/vneiger"
}
```

<a id='comment:24'></a>
Ok, done in the last commit. Is there any other thing that still needs to be verified or improved?



---

archive/issue_comments_508028.json:
```json
{
    "body": "<a id='comment:25'></a>\nI have checked again after the modifications and the functionality reflects the description of the ticket, and the testing, documentation, and style are okay as well.",
    "created_at": "2021-07-30T21:05:01Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508028",
    "user": "https://github.com/ke456"
}
```

<a id='comment:25'></a>
I have checked again after the modifications and the functionality reflects the description of the ticket, and the testing, documentation, and style are okay as well.



---

archive/issue_events_282192.json:
```json
{
    "actor": "https://github.com/ke456",
    "created_at": "2021-07-30T21:05:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31463#event-282192"
}
```



---

archive/issue_events_282193.json:
```json
{
    "actor": "https://github.com/ke456",
    "created_at": "2021-07-30T21:05:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31463#event-282193"
}
```



---

archive/issue_comments_508029.json:
```json
{
    "body": "<a id='comment:26'></a>\nThanks for the reviewing. Then I suppose we can revert to milestone 9.4.",
    "created_at": "2021-07-30T21:09:49Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508029",
    "user": "https://github.com/vneiger"
}
```

<a id='comment:26'></a>
Thanks for the reviewing. Then I suppose we can revert to milestone 9.4.



---

archive/issue_events_282194.json:
```json
{
    "actor": "https://github.com/vneiger",
    "created_at": "2021-07-30T21:09:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31463#event-282194"
}
```



---

archive/issue_events_282195.json:
```json
{
    "actor": "https://github.com/vneiger",
    "created_at": "2021-07-30T21:09:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31463#event-282195"
}
```



---

archive/issue_events_282196.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:07:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31463#event-282196"
}
```



---

archive/issue_events_282197.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:07:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31463#event-282197"
}
```



---

archive/issue_events_282198.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-08-29T09:37:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31463#event-282198"
}
```



---

archive/issue_events_282199.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-08-29T09:37:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31463#event-282199"
}
```



---

archive/issue_comments_508030.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-vneiger/univariate_matrices__improve_weak_popov_form__add_popov_form](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-vneiger/univariate_matrices__improve_weak_popov_form__add_popov_form)\" to \"[b7e5f129f06975fe147b7e54ab0b290c53e4dc6a](https://github.com/sagemath/sagetrac-mirror/commit/b7e5f129f06975fe147b7e54ab0b290c53e4dc6a)\".",
    "created_at": "2021-08-29T09:37:42Z",
    "issue": "https://github.com/sagemath/sage/issues/31463",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31463#issuecomment-508030",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/gh-vneiger/univariate_matrices__improve_weak_popov_form__add_popov_form](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-vneiger/univariate_matrices__improve_weak_popov_form__add_popov_form)" to "[b7e5f129f06975fe147b7e54ab0b290c53e4dc6a](https://github.com/sagemath/sagetrac-mirror/commit/b7e5f129f06975fe147b7e54ab0b290c53e4dc6a)".
