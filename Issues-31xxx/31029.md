# Issue 31029: Upgrade: cypari2 2.1.2

archive/issues_030792.json:
```json
{
    "assignees": [],
    "body": "This is to upgrade cypari to 2.1.2 (which is compatible with pari 2.13 that is about to be upgraded too, see #30801)\n\n- \u200bhttps://files.pythonhosted.org/packages/22/d9/4374baf5749257362f6d163096f9f5a3fa2a6f231edbe0d61c7bdf281d6e/cypari2-2.1.2.tar.gz\n\nCC:  @dimpase @orlitzky @mkoeppe @slel @antonio-rojas @kiwifb @videlec @tobihan @seblabbe @fchapoton @jhpalmieri\n\nKeywords: **sd111**\n\nBranch/Commit: **[b9aadfd](https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0)**\n\nReviewer: **Matthias Koeppe, John Palmieri**\n\nAuthor: **Vincent Delecroix**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31029_\n\n",
    "closed_at": "2021-01-17T13:46:17Z",
    "created_at": "2020-12-08T09:55:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade: cypari2 2.1.2",
    "type": "issue",
    "updated_at": "2021-01-17T13:46:17Z",
    "url": "https://github.com/sagemath/sage/issues/31029",
    "user": "https://github.com/videlec"
}
```
This is to upgrade cypari to 2.1.2 (which is compatible with pari 2.13 that is about to be upgraded too, see #30801)

- â€‹https://files.pythonhosted.org/packages/22/d9/4374baf5749257362f6d163096f9f5a3fa2a6f231edbe0d61c7bdf281d6e/cypari2-2.1.2.tar.gz

CC:  @dimpase @orlitzky @mkoeppe @slel @antonio-rojas @kiwifb @videlec @tobihan @seblabbe @fchapoton @jhpalmieri

Keywords: **sd111**

Branch/Commit: **[b9aadfd](https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0)**

Reviewer: **Matthias Koeppe, John Palmieri**

Author: **Vincent Delecroix**

_Issue created by migration from https://trac.sagemath.org/ticket/31029_





---

archive/issue_events_409656.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-12-08T09:55:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31029#event-409656"
}
```



---

archive/issue_events_409657.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-12-08T09:55:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31029#event-409657"
}
```



---

archive/issue_events_409658.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-12-08T09:55:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31029#event-409658"
}
```



---

archive/issue_events_409659.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-12-08T09:55:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31029#event-409659"
}
```



---

archive/issue_comments_500282.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b18fd0d27f9332a84502879aa8fc4a79cecd7fe\">0b18fd0</a></td><td><code>31029: upgrade cypari2 to 2.1.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0\">b9aadfd</a></td><td><code>31029: adapt sage library code to cypari2 version 2.1.2</code></td></tr></table>\n",
    "created_at": "2020-12-08T09:58:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500282",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'>Comment 1:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b18fd0d27f9332a84502879aa8fc4a79cecd7fe">0b18fd0</a></td><td><code>31029: upgrade cypari2 to 2.1.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0">b9aadfd</a></td><td><code>31029: adapt sage library code to cypari2 version 2.1.2</code></td></tr></table>




---

archive/issue_comments_500283.json:
```json
{
    "body": "Commit: **[b9aadfd](https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0)**",
    "created_at": "2020-12-08T09:58:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500283",
    "user": "https://github.com/videlec"
}
```

Commit: **[b9aadfd](https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0)**



---

archive/issue_events_409660.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-12-08T09:58:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31029#event-409660"
}
```



---

archive/issue_comments_500284.json:
```json
{
    "body": "Branch: **[u/vdelecroix/31029](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/31029)**",
    "created_at": "2020-12-08T09:58:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500284",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/31029](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/31029)**



---

archive/issue_comments_500285.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nPushed a tag to launch \"GitHub Actions\" CI:\n\n- https://github.com/slel/sage/tree/ci-cypari2-31029\n- https://github.com/slel/sage/actions?query=branch%3Aci-cypari2-31029",
    "created_at": "2020-12-08T11:52:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500285",
    "user": "https://github.com/slel"
}
```

<a id='comment:2'>Comment 2:</a>
Pushed a tag to launch "GitHub Actions" CI:

- https://github.com/slel/sage/tree/ci-cypari2-31029
- https://github.com/slel/sage/actions?query=branch%3Aci-cypari2-31029



---

archive/issue_comments_500286.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe, ...**",
    "created_at": "2020-12-11T03:30:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500286",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe, ...**



---

archive/issue_comments_500287.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nThe builds on GH Actions look fine.\n\nSomeone else should look at the changes in the ticket -- I don't know anything about PARI.",
    "created_at": "2020-12-11T03:30:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500287",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'>Comment 4:</a>
The builds on GH Actions look fine.

Someone else should look at the changes in the ticket -- I don't know anything about PARI.



---

archive/issue_comments_500288.json:
```json
{
    "body": "Changed keywords from **** to **sd111**",
    "created_at": "2020-12-11T03:30:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500288",
    "user": "https://github.com/mkoeppe"
}
```

Changed keywords from **** to **sd111**



---

archive/issue_events_409661.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-27T19:27:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31029#event-409661"
}
```



---

archive/issue_events_409662.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-27T19:27:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31029#event-409662"
}
```



---

archive/issue_comments_500289.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nUnfortunately this does not fix my problem with OS X 10.15.7 and Python 3 installed via Homebrew:\n\n```\n  cypari2/gen.c:25980:70: error: too many arguments to function call, expected 3, have 4\n    __pyx_v__ret = asympnum0(__pyx_v__expr, __pyx_v_k, __pyx_v__alpha, __pyx_v_precision);\n                   ~~~~~~~~~                                           ^~~~~~~~~~~~~~~~~\n  /usr/local/include/pari/paripriv.h:101:1: note: 'asympnum0' declared here\n  GEN  asympnum0(GEN u, GEN alpha, long prec);\n  ^\n  cypari2/gen.c:30261:18: error: implicit declaration of function 'bnfcompress' is invalid in C99 [-Werror,-Wimplicit-function-declaration]\n    __pyx_v__ret = bnfcompress(__pyx_v__bnf);\n                   ^\n  cypari2/gen.c:30261:16: warning: incompatible integer to pointer conversion assigning to 'GEN' (aka 'long *') from 'int' [-Wint-conversion]\n    __pyx_v__ret = bnfcompress(__pyx_v__bnf);\n                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~\n  cypari2/gen.c:84064:52: error: too few arguments to function call, expected 3, have 2\n    __pyx_v__ret = lfuntwist(__pyx_v__L, __pyx_v__chi);\n                   ~~~~~~~~~                         ^\n  /usr/local/include/pari/paridecl.h:4164:1: note: 'lfuntwist' declared here\n  GEN     lfuntwist(GEN ldata1, GEN ldata2, long bitprec);\n  ^\n  cypari2/gen.c:85034:70: error: too many arguments to function call, expected 3, have 4\n    __pyx_v__ret = limitnum0(__pyx_v__expr, __pyx_v_k, __pyx_v__alpha, __pyx_v_precision);\n                   ~~~~~~~~~                                           ^~~~~~~~~~~~~~~~~\n  /usr/local/include/pari/paripriv.h:125:1: note: 'limitnum0' declared here\n  GEN  limitnum0(GEN u, GEN alpha, long prec);\n  ^\n  cypari2/gen.c:108195:18: error: implicit declaration of function 'nfbasis_gp' is invalid in C99 [-Werror,-Wimplicit-function-declaration]\n    __pyx_v__ret = nfbasis_gp(__pyx_v__T);\n                   ^\n  cypari2/gen.c:108195:18: note: did you mean 'nfbasis'?\n  /usr/local/include/pari/paridecl.h:2231:9: note: 'nfbasis' declared here\n  GEN     nfbasis(GEN x, GEN *y);\n          ^\n  cypari2/gen.c:108195:16: warning: incompatible integer to pointer conversion assigning to 'GEN' (aka 'long *') from 'int' [-Wint-conversion]\n    __pyx_v__ret = nfbasis_gp(__pyx_v__T);\n                 ^ ~~~~~~~~~~~~~~~~~~~~~~\n  cypari2/gen.c:119493:16: warning: incompatible pointer to integer conversion assigning to 'long' from 'GEN' (aka 'long *'); dereference with * [-Wint-conversion]\n    __pyx_v__ret = permorder(__pyx_v__x);\n                 ^ ~~~~~~~~~~~~~~~~~~~~~\n                   *\n  cypari2/gen.c:123101:18: error: implicit declaration of function 'isirreducible' is invalid in C99 [-Werror,-Wimplicit-function-declaration]\n    __pyx_v__ret = isirreducible(__pyx_v__pol);\n                   ^\n  cypari2/gen.c:123101:18: note: did you mean 'polisirreducible'?\n  /usr/local/include/pari/paridecl.h:4812:9: note: 'polisirreducible' declared here\n  long    polisirreducible(GEN x);\n          ^\n  cypari2/gen.c:131353:49: error: too few arguments to function call, expected 3, have 2\n    __pyx_v__ret = qfbsolve(__pyx_v__Q, __pyx_v__p);\n                   ~~~~~~~~                       ^\n  /usr/local/include/pari/paridecl.h:1880:1: note: 'qfbsolve' declared here\n  GEN     qfbsolve(GEN Q, GEN n, long flag);\n  ^\n  cypari2/gen.c:141271:69: error: too many arguments to function call, expected 3, have 4\n    __pyx_v__ret = rnfkummer(__pyx_v__bnr, __pyx_v__subgp, __pyx_v_d, __pyx_v_precision);\n                   ~~~~~~~~~                                          ^~~~~~~~~~~~~~~~~\n  /usr/local/include/pari/paridecl.h:4110:1: note: 'rnfkummer' declared here\n  GEN     rnfkummer(GEN bnr, GEN subgroup, long prec);\n  ^\n  cypari2/gen.c:153671:18: error: implicit declaration of function 'zetamult0' is invalid in C99 [-Werror,-Wimplicit-function-declaration]\n    __pyx_v__ret = zetamult0(__pyx_v__s, __pyx_v__T, __pyx_v_precision);\n                   ^\n  cypari2/gen.c:153671:18: note: did you mean 'zetamult'?\n  /usr/local/include/pari/paridecl.h:5345:9: note: 'zetamult' declared here\n  GEN     zetamult(GEN avec, long prec);\n          ^\n  cypari2/gen.c:153671:16: warning: incompatible integer to pointer conversion assigning to 'GEN' (aka 'long *') from 'int' [-Wint-conversion]\n    __pyx_v__ret = zetamult0(__pyx_v__s, __pyx_v__T, __pyx_v_precision);\n                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  4 warnings and 9 errors generated.\n```",
    "created_at": "2020-12-28T20:49:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500289",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'>Comment 9:</a>
Unfortunately this does not fix my problem with OS X 10.15.7 and Python 3 installed via Homebrew:

```
  cypari2/gen.c:25980:70: error: too many arguments to function call, expected 3, have 4
    __pyx_v__ret = asympnum0(__pyx_v__expr, __pyx_v_k, __pyx_v__alpha, __pyx_v_precision);
                   ~~~~~~~~~                                           ^~~~~~~~~~~~~~~~~
  /usr/local/include/pari/paripriv.h:101:1: note: 'asympnum0' declared here
  GEN  asympnum0(GEN u, GEN alpha, long prec);
  ^
  cypari2/gen.c:30261:18: error: implicit declaration of function 'bnfcompress' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
    __pyx_v__ret = bnfcompress(__pyx_v__bnf);
                   ^
  cypari2/gen.c:30261:16: warning: incompatible integer to pointer conversion assigning to 'GEN' (aka 'long *') from 'int' [-Wint-conversion]
    __pyx_v__ret = bnfcompress(__pyx_v__bnf);
                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~
  cypari2/gen.c:84064:52: error: too few arguments to function call, expected 3, have 2
    __pyx_v__ret = lfuntwist(__pyx_v__L, __pyx_v__chi);
                   ~~~~~~~~~                         ^
  /usr/local/include/pari/paridecl.h:4164:1: note: 'lfuntwist' declared here
  GEN     lfuntwist(GEN ldata1, GEN ldata2, long bitprec);
  ^
  cypari2/gen.c:85034:70: error: too many arguments to function call, expected 3, have 4
    __pyx_v__ret = limitnum0(__pyx_v__expr, __pyx_v_k, __pyx_v__alpha, __pyx_v_precision);
                   ~~~~~~~~~                                           ^~~~~~~~~~~~~~~~~
  /usr/local/include/pari/paripriv.h:125:1: note: 'limitnum0' declared here
  GEN  limitnum0(GEN u, GEN alpha, long prec);
  ^
  cypari2/gen.c:108195:18: error: implicit declaration of function 'nfbasis_gp' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
    __pyx_v__ret = nfbasis_gp(__pyx_v__T);
                   ^
  cypari2/gen.c:108195:18: note: did you mean 'nfbasis'?
  /usr/local/include/pari/paridecl.h:2231:9: note: 'nfbasis' declared here
  GEN     nfbasis(GEN x, GEN *y);
          ^
  cypari2/gen.c:108195:16: warning: incompatible integer to pointer conversion assigning to 'GEN' (aka 'long *') from 'int' [-Wint-conversion]
    __pyx_v__ret = nfbasis_gp(__pyx_v__T);
                 ^ ~~~~~~~~~~~~~~~~~~~~~~
  cypari2/gen.c:119493:16: warning: incompatible pointer to integer conversion assigning to 'long' from 'GEN' (aka 'long *'); dereference with * [-Wint-conversion]
    __pyx_v__ret = permorder(__pyx_v__x);
                 ^ ~~~~~~~~~~~~~~~~~~~~~
                   *
  cypari2/gen.c:123101:18: error: implicit declaration of function 'isirreducible' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
    __pyx_v__ret = isirreducible(__pyx_v__pol);
                   ^
  cypari2/gen.c:123101:18: note: did you mean 'polisirreducible'?
  /usr/local/include/pari/paridecl.h:4812:9: note: 'polisirreducible' declared here
  long    polisirreducible(GEN x);
          ^
  cypari2/gen.c:131353:49: error: too few arguments to function call, expected 3, have 2
    __pyx_v__ret = qfbsolve(__pyx_v__Q, __pyx_v__p);
                   ~~~~~~~~                       ^
  /usr/local/include/pari/paridecl.h:1880:1: note: 'qfbsolve' declared here
  GEN     qfbsolve(GEN Q, GEN n, long flag);
  ^
  cypari2/gen.c:141271:69: error: too many arguments to function call, expected 3, have 4
    __pyx_v__ret = rnfkummer(__pyx_v__bnr, __pyx_v__subgp, __pyx_v_d, __pyx_v_precision);
                   ~~~~~~~~~                                          ^~~~~~~~~~~~~~~~~
  /usr/local/include/pari/paridecl.h:4110:1: note: 'rnfkummer' declared here
  GEN     rnfkummer(GEN bnr, GEN subgroup, long prec);
  ^
  cypari2/gen.c:153671:18: error: implicit declaration of function 'zetamult0' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
    __pyx_v__ret = zetamult0(__pyx_v__s, __pyx_v__T, __pyx_v_precision);
                   ^
  cypari2/gen.c:153671:18: note: did you mean 'zetamult'?
  /usr/local/include/pari/paridecl.h:5345:9: note: 'zetamult' declared here
  GEN     zetamult(GEN avec, long prec);
          ^
  cypari2/gen.c:153671:16: warning: incompatible integer to pointer conversion assigning to 'GEN' (aka 'long *') from 'int' [-Wint-conversion]
    __pyx_v__ret = zetamult0(__pyx_v__s, __pyx_v__T, __pyx_v_precision);
                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  4 warnings and 9 errors generated.
```



---

archive/issue_comments_500290.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nJust for fun I removed all of my homebrew installations and reinstalled a subset of them (`brew install aspell autoconf automake boost ecm freetype gcc gd ghostscript glpk gmp gpatch gsl jpeg libmpc libpng libtiff libtool mpfi mpfr nauty openblas pari perl pkg-config ppl r suite-sparse yasm zeromq`). Same error.",
    "created_at": "2020-12-28T21:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500290",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'>Comment 10:</a>
Just for fun I removed all of my homebrew installations and reinstalled a subset of them (`brew install aspell autoconf automake boost ecm freetype gcc gd ghostscript glpk gmp gpatch gsl jpeg libmpc libpng libtiff libtool mpfi mpfr nauty openblas pari perl pkg-config ppl r suite-sparse yasm zeromq`). Same error.



---

archive/issue_comments_500291.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nAnd without `pari` from homebrew?",
    "created_at": "2020-12-29T05:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500291",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'>Comment 11:</a>
And without `pari` from homebrew?



---

archive/issue_comments_500292.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nWith or without `pari` from homebrew, Sage builds its own `pari`, but if I do `brew uninstall pari`, then `cypari` builds successfully. Thank you, that's helpful. Can we prevent the build process from picking up the wrong `pari` somehow?",
    "created_at": "2020-12-29T06:42:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500292",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'>Comment 12:</a>
With or without `pari` from homebrew, Sage builds its own `pari`, but if I do `brew uninstall pari`, then `cypari` builds successfully. Thank you, that's helpful. Can we prevent the build process from picking up the wrong `pari` somehow?



---

archive/issue_comments_500293.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [@jhpalmieri](#comment%3A12):\n> With or without `pari` from homebrew, Sage builds its own `pari`, but if I do `brew uninstall pari`, then `cypari` builds successfully. Thank you, that's helpful. Can we prevent the build process from picking up the wrong `pari` somehow?\n\nThis is now #31132.",
    "created_at": "2020-12-29T19:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500293",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [@jhpalmieri](#comment%3A12):
> With or without `pari` from homebrew, Sage builds its own `pari`, but if I do `brew uninstall pari`, then `cypari` builds successfully. Thank you, that's helpful. Can we prevent the build process from picking up the wrong `pari` somehow?

This is now #31132.



---

archive/issue_comments_500294.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nHow about biting the bullet and adding the missing Pari parts (i.e. Pari packages) to Homebrew?",
    "created_at": "2020-12-30T00:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500294",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'>Comment 14:</a>
How about biting the bullet and adding the missing Pari parts (i.e. Pari packages) to Homebrew?



---

archive/issue_comments_500295.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nUnless I'm misunderstanding, that might fix the symptom but not the actual problem. If we go that direction and we don't address the problem of /usr/local leaking into the build, then we have to detect whether all of the relevant pieces of pari are installed in homebrew or none of them are, and refuse to continue if the system is some intermediate state (like mine with `pari` installed but none of the as yet non-existent packages).",
    "created_at": "2020-12-30T00:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500295",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:15'>Comment 15:</a>
Unless I'm misunderstanding, that might fix the symptom but not the actual problem. If we go that direction and we don't address the problem of /usr/local leaking into the build, then we have to detect whether all of the relevant pieces of pari are installed in homebrew or none of them are, and refuse to continue if the system is some intermediate state (like mine with `pari` installed but none of the as yet non-existent packages).



---

archive/issue_comments_500296.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nReplying to [@jhpalmieri](#comment%3A15):\n> Unless I'm misunderstanding, that might fix the symptom but not the actual problem. If we go that direction and we don't address the problem of /usr/local leaking into the build, then we have to detect whether all of the relevant pieces of pari are installed in homebrew or none of them are, and refuse to continue if the system is some intermediate state (like mine with `pari` installed but none of the as yet non-existent packages).\n\nyou're right, that's what can be done. (Realistically though, once it's in place, people would just install the whole bunch - one can also have a Sage-components formula to install as many deps as there are)",
    "created_at": "2020-12-31T00:34:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500296",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'>Comment 16:</a>
Replying to [@jhpalmieri](#comment%3A15):
> Unless I'm misunderstanding, that might fix the symptom but not the actual problem. If we go that direction and we don't address the problem of /usr/local leaking into the build, then we have to detect whether all of the relevant pieces of pari are installed in homebrew or none of them are, and refuse to continue if the system is some intermediate state (like mine with `pari` installed but none of the as yet non-existent packages).

you're right, that's what can be done. (Realistically though, once it's in place, people would just install the whole bunch - one can also have a Sage-components formula to install as many deps as there are)



---

archive/issue_comments_500297.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nContributing to homebrew packaging is beyond the scope of this ticket.\n\nStill needs review",
    "created_at": "2021-01-06T19:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500297",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'>Comment 17:</a>
Contributing to homebrew packaging is beyond the scope of this ticket.

Still needs review



---

archive/issue_comments_500298.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nWhy remove the doctest\n\n```\nsage: b[0][0].precision()    # in words\n```\n?",
    "created_at": "2021-01-08T00:17:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500298",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:18'>Comment 18:</a>
Why remove the doctest

```
sage: b[0][0].precision()    # in words
```
?



---

archive/issue_comments_500299.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [@jhpalmieri](#comment%3A18):\n> Why remove the doctest\n> \n> ```\n> sage: b[0][0].precision()    # in words\n> ```\n> ?\n\nhttps://github.com/sagemath/cypari2/commit/8bd7ca38462742a80829a71bb0ae4279c56ead97",
    "created_at": "2021-01-08T09:05:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500299",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [@jhpalmieri](#comment%3A18):
> Why remove the doctest
> 
> ```
> sage: b[0][0].precision()    # in words
> ```
> ?

https://github.com/sagemath/cypari2/commit/8bd7ca38462742a80829a71bb0ae4279c56ead97



---

archive/issue_comments_500300.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nGreat. Let's merge this.",
    "created_at": "2021-01-08T17:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500300",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'>Comment 20:</a>
Great. Let's merge this.



---

archive/issue_events_409663.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-01-08T17:34:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31029#event-409663"
}
```



---

archive/issue_events_409664.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-01-08T17:34:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31029#event-409664"
}
```



---

archive/issue_comments_500301.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe, ...** to **Matthias Koeppe, John Palmieri**",
    "created_at": "2021-01-08T17:34:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500301",
    "user": "https://github.com/jhpalmieri"
}
```

Changed reviewer from **Matthias Koeppe, ...** to **Matthias Koeppe, John Palmieri**



---

archive/issue_events_409665.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-17T13:46:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31029#event-409665"
}
```



---

archive/issue_events_409666.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "794d0687ebb0e18a1c88e82c17cfb4ec8215a96e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-01-17T13:46:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31029#event-409666"
}
```



---

archive/issue_comments_500302.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/31029](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/31029)** to **[b9aadfd](https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0)**",
    "created_at": "2021-01-17T13:46:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31029#issuecomment-500302",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vdelecroix/31029](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/31029)** to **[b9aadfd](https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0)**
