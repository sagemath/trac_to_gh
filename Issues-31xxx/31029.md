# Issue 31029: Upgrade: cypari2 2.1.2

archive/issues_030792.json:
```json
{
    "body": "This is to upgrade cypari to 2.1.2 (which is compatible with pari 2.13 that is about to be upgraded too, see #30801)\n\n- \u200bhttps://files.pythonhosted.org/packages/22/d9/4374baf5749257362f6d163096f9f5a3fa2a6f231edbe0d61c7bdf281d6e/cypari2-2.1.2.tar.gz\n\n**CC:**  @dimpase @orlitzky @mkoeppe @slel @antonio-rojas @kiwifb @videlec @tobihan @seblabbe @fchapoton @jhpalmieri\n\n**Keywords:** sd111\n\n**Branch/Commit:** [b9aadfd08e81d74ca7c229bb80eb853b592887d0](https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0)\n\n**Reviewer:** Matthias Koeppe, John Palmieri\n\n**Author:** Vincent Delecroix\n\nIssue created by migration from https://trac.sagemath.org/ticket/31029\n\n",
    "closed_at": "2021-01-17T13:46:17Z",
    "created_at": "2020-12-08T09:55:52Z",
    "labels": [
        "component: packages: standard",
        "critical",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Upgrade: cypari2 2.1.2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31029",
    "user": "https://github.com/videlec"
}
```
This is to upgrade cypari to 2.1.2 (which is compatible with pari 2.13 that is about to be upgraded too, see #30801)

- â€‹https://files.pythonhosted.org/packages/22/d9/4374baf5749257362f6d163096f9f5a3fa2a6f231edbe0d61c7bdf281d6e/cypari2-2.1.2.tar.gz

**CC:**  @dimpase @orlitzky @mkoeppe @slel @antonio-rojas @kiwifb @videlec @tobihan @seblabbe @fchapoton @jhpalmieri

**Keywords:** sd111

**Branch/Commit:** [b9aadfd08e81d74ca7c229bb80eb853b592887d0](https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0)

**Reviewer:** Matthias Koeppe, John Palmieri

**Author:** Vincent Delecroix

Issue created by migration from https://trac.sagemath.org/ticket/31029





---

archive/issue_comments_587824.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b18fd0d27f9332a84502879aa8fc4a79cecd7fe\">0b18fd0</a></td><td><code>31029: upgrade cypari2 to 2.1.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0\">b9aadfd</a></td><td><code>31029: adapt sage library code to cypari2 version 2.1.2</code></td></tr></table>\n",
    "created_at": "2020-12-08T09:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587824",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b18fd0d27f9332a84502879aa8fc4a79cecd7fe">0b18fd0</a></td><td><code>31029: upgrade cypari2 to 2.1.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0">b9aadfd</a></td><td><code>31029: adapt sage library code to cypari2 version 2.1.2</code></td></tr></table>




---

archive/issue_comments_587825.json:
```json
{
    "body": "**Commit:** [b9aadfd08e81d74ca7c229bb80eb853b592887d0](https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0)",
    "created_at": "2020-12-08T09:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587825",
    "user": "https://github.com/videlec"
}
```

**Commit:** [b9aadfd08e81d74ca7c229bb80eb853b592887d0](https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0)



---

archive/issue_comments_587826.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2020-12-08T09:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587826",
    "user": "https://github.com/videlec"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_587827.json:
```json
{
    "body": "**Branch:** [u/vdelecroix/31029](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/31029)",
    "created_at": "2020-12-08T09:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587827",
    "user": "https://github.com/videlec"
}
```

**Branch:** [u/vdelecroix/31029](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/31029)



---

archive/issue_comments_587828.json:
```json
{
    "body": "<a id='comment:2'></a>\nPushed a tag to launch \"GitHub Actions\" CI:\n\n- https://github.com/slel/sage/tree/ci-cypari2-31029\n- https://github.com/slel/sage/actions?query=branch%3Aci-cypari2-31029",
    "created_at": "2020-12-08T11:52:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587828",
    "user": "https://github.com/slel"
}
```

<a id='comment:2'></a>
Pushed a tag to launch "GitHub Actions" CI:

- https://github.com/slel/sage/tree/ci-cypari2-31029
- https://github.com/slel/sage/actions?query=branch%3Aci-cypari2-31029



---

archive/issue_comments_587829.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe, ...",
    "created_at": "2020-12-11T03:30:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587829",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe, ...



---

archive/issue_comments_587830.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe builds on GH Actions look fine.\n\nSomeone else should look at the changes in the ticket -- I don't know anything about PARI.",
    "created_at": "2020-12-11T03:30:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587830",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
The builds on GH Actions look fine.

Someone else should look at the changes in the ticket -- I don't know anything about PARI.



---

archive/issue_comments_587831.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd111\".",
    "created_at": "2020-12-11T03:30:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587831",
    "user": "https://github.com/mkoeppe"
}
```

**Changing keywords** from "" to "sd111".



---

archive/issue_comments_587832.json:
```json
{
    "body": "<a id='comment:9'></a>\nUnfortunately this does not fix my problem with OS X 10.15.7 and Python 3 installed via Homebrew:\n\n```\n  cypari2/gen.c:25980:70: error: too many arguments to function call, expected 3, have 4\n    __pyx_v__ret = asympnum0(__pyx_v__expr, __pyx_v_k, __pyx_v__alpha, __pyx_v_precision);\n                   ~~~~~~~~~                                           ^~~~~~~~~~~~~~~~~\n  /usr/local/include/pari/paripriv.h:101:1: note: 'asympnum0' declared here\n  GEN  asympnum0(GEN u, GEN alpha, long prec);\n  ^\n  cypari2/gen.c:30261:18: error: implicit declaration of function 'bnfcompress' is invalid in C99 [-Werror,-Wimplicit-function-declaration]\n    __pyx_v__ret = bnfcompress(__pyx_v__bnf);\n                   ^\n  cypari2/gen.c:30261:16: warning: incompatible integer to pointer conversion assigning to 'GEN' (aka 'long *') from 'int' [-Wint-conversion]\n    __pyx_v__ret = bnfcompress(__pyx_v__bnf);\n                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~\n  cypari2/gen.c:84064:52: error: too few arguments to function call, expected 3, have 2\n    __pyx_v__ret = lfuntwist(__pyx_v__L, __pyx_v__chi);\n                   ~~~~~~~~~                         ^\n  /usr/local/include/pari/paridecl.h:4164:1: note: 'lfuntwist' declared here\n  GEN     lfuntwist(GEN ldata1, GEN ldata2, long bitprec);\n  ^\n  cypari2/gen.c:85034:70: error: too many arguments to function call, expected 3, have 4\n    __pyx_v__ret = limitnum0(__pyx_v__expr, __pyx_v_k, __pyx_v__alpha, __pyx_v_precision);\n                   ~~~~~~~~~                                           ^~~~~~~~~~~~~~~~~\n  /usr/local/include/pari/paripriv.h:125:1: note: 'limitnum0' declared here\n  GEN  limitnum0(GEN u, GEN alpha, long prec);\n  ^\n  cypari2/gen.c:108195:18: error: implicit declaration of function 'nfbasis_gp' is invalid in C99 [-Werror,-Wimplicit-function-declaration]\n    __pyx_v__ret = nfbasis_gp(__pyx_v__T);\n                   ^\n  cypari2/gen.c:108195:18: note: did you mean 'nfbasis'?\n  /usr/local/include/pari/paridecl.h:2231:9: note: 'nfbasis' declared here\n  GEN     nfbasis(GEN x, GEN *y);\n          ^\n  cypari2/gen.c:108195:16: warning: incompatible integer to pointer conversion assigning to 'GEN' (aka 'long *') from 'int' [-Wint-conversion]\n    __pyx_v__ret = nfbasis_gp(__pyx_v__T);\n                 ^ ~~~~~~~~~~~~~~~~~~~~~~\n  cypari2/gen.c:119493:16: warning: incompatible pointer to integer conversion assigning to 'long' from 'GEN' (aka 'long *'); dereference with * [-Wint-conversion]\n    __pyx_v__ret = permorder(__pyx_v__x);\n                 ^ ~~~~~~~~~~~~~~~~~~~~~\n                   *\n  cypari2/gen.c:123101:18: error: implicit declaration of function 'isirreducible' is invalid in C99 [-Werror,-Wimplicit-function-declaration]\n    __pyx_v__ret = isirreducible(__pyx_v__pol);\n                   ^\n  cypari2/gen.c:123101:18: note: did you mean 'polisirreducible'?\n  /usr/local/include/pari/paridecl.h:4812:9: note: 'polisirreducible' declared here\n  long    polisirreducible(GEN x);\n          ^\n  cypari2/gen.c:131353:49: error: too few arguments to function call, expected 3, have 2\n    __pyx_v__ret = qfbsolve(__pyx_v__Q, __pyx_v__p);\n                   ~~~~~~~~                       ^\n  /usr/local/include/pari/paridecl.h:1880:1: note: 'qfbsolve' declared here\n  GEN     qfbsolve(GEN Q, GEN n, long flag);\n  ^\n  cypari2/gen.c:141271:69: error: too many arguments to function call, expected 3, have 4\n    __pyx_v__ret = rnfkummer(__pyx_v__bnr, __pyx_v__subgp, __pyx_v_d, __pyx_v_precision);\n                   ~~~~~~~~~                                          ^~~~~~~~~~~~~~~~~\n  /usr/local/include/pari/paridecl.h:4110:1: note: 'rnfkummer' declared here\n  GEN     rnfkummer(GEN bnr, GEN subgroup, long prec);\n  ^\n  cypari2/gen.c:153671:18: error: implicit declaration of function 'zetamult0' is invalid in C99 [-Werror,-Wimplicit-function-declaration]\n    __pyx_v__ret = zetamult0(__pyx_v__s, __pyx_v__T, __pyx_v_precision);\n                   ^\n  cypari2/gen.c:153671:18: note: did you mean 'zetamult'?\n  /usr/local/include/pari/paridecl.h:5345:9: note: 'zetamult' declared here\n  GEN     zetamult(GEN avec, long prec);\n          ^\n  cypari2/gen.c:153671:16: warning: incompatible integer to pointer conversion assigning to 'GEN' (aka 'long *') from 'int' [-Wint-conversion]\n    __pyx_v__ret = zetamult0(__pyx_v__s, __pyx_v__T, __pyx_v_precision);\n                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n  4 warnings and 9 errors generated.\n```",
    "created_at": "2020-12-28T20:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587832",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>
Unfortunately this does not fix my problem with OS X 10.15.7 and Python 3 installed via Homebrew:

```
  cypari2/gen.c:25980:70: error: too many arguments to function call, expected 3, have 4
    __pyx_v__ret = asympnum0(__pyx_v__expr, __pyx_v_k, __pyx_v__alpha, __pyx_v_precision);
                   ~~~~~~~~~                                           ^~~~~~~~~~~~~~~~~
  /usr/local/include/pari/paripriv.h:101:1: note: 'asympnum0' declared here
  GEN  asympnum0(GEN u, GEN alpha, long prec);
  ^
  cypari2/gen.c:30261:18: error: implicit declaration of function 'bnfcompress' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
    __pyx_v__ret = bnfcompress(__pyx_v__bnf);
                   ^
  cypari2/gen.c:30261:16: warning: incompatible integer to pointer conversion assigning to 'GEN' (aka 'long *') from 'int' [-Wint-conversion]
    __pyx_v__ret = bnfcompress(__pyx_v__bnf);
                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~
  cypari2/gen.c:84064:52: error: too few arguments to function call, expected 3, have 2
    __pyx_v__ret = lfuntwist(__pyx_v__L, __pyx_v__chi);
                   ~~~~~~~~~                         ^
  /usr/local/include/pari/paridecl.h:4164:1: note: 'lfuntwist' declared here
  GEN     lfuntwist(GEN ldata1, GEN ldata2, long bitprec);
  ^
  cypari2/gen.c:85034:70: error: too many arguments to function call, expected 3, have 4
    __pyx_v__ret = limitnum0(__pyx_v__expr, __pyx_v_k, __pyx_v__alpha, __pyx_v_precision);
                   ~~~~~~~~~                                           ^~~~~~~~~~~~~~~~~
  /usr/local/include/pari/paripriv.h:125:1: note: 'limitnum0' declared here
  GEN  limitnum0(GEN u, GEN alpha, long prec);
  ^
  cypari2/gen.c:108195:18: error: implicit declaration of function 'nfbasis_gp' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
    __pyx_v__ret = nfbasis_gp(__pyx_v__T);
                   ^
  cypari2/gen.c:108195:18: note: did you mean 'nfbasis'?
  /usr/local/include/pari/paridecl.h:2231:9: note: 'nfbasis' declared here
  GEN     nfbasis(GEN x, GEN *y);
          ^
  cypari2/gen.c:108195:16: warning: incompatible integer to pointer conversion assigning to 'GEN' (aka 'long *') from 'int' [-Wint-conversion]
    __pyx_v__ret = nfbasis_gp(__pyx_v__T);
                 ^ ~~~~~~~~~~~~~~~~~~~~~~
  cypari2/gen.c:119493:16: warning: incompatible pointer to integer conversion assigning to 'long' from 'GEN' (aka 'long *'); dereference with * [-Wint-conversion]
    __pyx_v__ret = permorder(__pyx_v__x);
                 ^ ~~~~~~~~~~~~~~~~~~~~~
                   *
  cypari2/gen.c:123101:18: error: implicit declaration of function 'isirreducible' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
    __pyx_v__ret = isirreducible(__pyx_v__pol);
                   ^
  cypari2/gen.c:123101:18: note: did you mean 'polisirreducible'?
  /usr/local/include/pari/paridecl.h:4812:9: note: 'polisirreducible' declared here
  long    polisirreducible(GEN x);
          ^
  cypari2/gen.c:131353:49: error: too few arguments to function call, expected 3, have 2
    __pyx_v__ret = qfbsolve(__pyx_v__Q, __pyx_v__p);
                   ~~~~~~~~                       ^
  /usr/local/include/pari/paridecl.h:1880:1: note: 'qfbsolve' declared here
  GEN     qfbsolve(GEN Q, GEN n, long flag);
  ^
  cypari2/gen.c:141271:69: error: too many arguments to function call, expected 3, have 4
    __pyx_v__ret = rnfkummer(__pyx_v__bnr, __pyx_v__subgp, __pyx_v_d, __pyx_v_precision);
                   ~~~~~~~~~                                          ^~~~~~~~~~~~~~~~~
  /usr/local/include/pari/paridecl.h:4110:1: note: 'rnfkummer' declared here
  GEN     rnfkummer(GEN bnr, GEN subgroup, long prec);
  ^
  cypari2/gen.c:153671:18: error: implicit declaration of function 'zetamult0' is invalid in C99 [-Werror,-Wimplicit-function-declaration]
    __pyx_v__ret = zetamult0(__pyx_v__s, __pyx_v__T, __pyx_v_precision);
                   ^
  cypari2/gen.c:153671:18: note: did you mean 'zetamult'?
  /usr/local/include/pari/paridecl.h:5345:9: note: 'zetamult' declared here
  GEN     zetamult(GEN avec, long prec);
          ^
  cypari2/gen.c:153671:16: warning: incompatible integer to pointer conversion assigning to 'GEN' (aka 'long *') from 'int' [-Wint-conversion]
    __pyx_v__ret = zetamult0(__pyx_v__s, __pyx_v__T, __pyx_v_precision);
                 ^ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  4 warnings and 9 errors generated.
```



---

archive/issue_comments_587833.json:
```json
{
    "body": "<a id='comment:10'></a>\nJust for fun I removed all of my homebrew installations and reinstalled a subset of them (`brew install aspell autoconf automake boost ecm freetype gcc gd ghostscript glpk gmp gpatch gsl jpeg libmpc libpng libtiff libtool mpfi mpfr nauty openblas pari perl pkg-config ppl r suite-sparse yasm zeromq`). Same error.",
    "created_at": "2020-12-28T21:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587833",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>
Just for fun I removed all of my homebrew installations and reinstalled a subset of them (`brew install aspell autoconf automake boost ecm freetype gcc gd ghostscript glpk gmp gpatch gsl jpeg libmpc libpng libtiff libtool mpfi mpfr nauty openblas pari perl pkg-config ppl r suite-sparse yasm zeromq`). Same error.



---

archive/issue_comments_587834.json:
```json
{
    "body": "<a id='comment:11'></a>\nAnd without `pari` from homebrew?",
    "created_at": "2020-12-29T05:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587834",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
And without `pari` from homebrew?



---

archive/issue_comments_587835.json:
```json
{
    "body": "<a id='comment:12'></a>\nWith or without `pari` from homebrew, Sage builds its own `pari`, but if I do `brew uninstall pari`, then `cypari` builds successfully. Thank you, that's helpful. Can we prevent the build process from picking up the wrong `pari` somehow?",
    "created_at": "2020-12-29T06:42:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587835",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'></a>
With or without `pari` from homebrew, Sage builds its own `pari`, but if I do `brew uninstall pari`, then `cypari` builds successfully. Thank you, that's helpful. Can we prevent the build process from picking up the wrong `pari` somehow?



---

archive/issue_comments_587836.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [jhpalmieri](#comment%3A12):\n> With or without `pari` from homebrew, Sage builds its own `pari`, but if I do `brew uninstall pari`, then `cypari` builds successfully. Thank you, that's helpful. Can we prevent the build process from picking up the wrong `pari` somehow?\n\n\nThis is now #31132.",
    "created_at": "2020-12-29T19:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587836",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
Replying to [jhpalmieri](#comment%3A12):
> With or without `pari` from homebrew, Sage builds its own `pari`, but if I do `brew uninstall pari`, then `cypari` builds successfully. Thank you, that's helpful. Can we prevent the build process from picking up the wrong `pari` somehow?


This is now #31132.



---

archive/issue_comments_587837.json:
```json
{
    "body": "<a id='comment:14'></a>\nHow about biting the bullet and adding the missing Pari parts (i.e. Pari packages) to Homebrew?",
    "created_at": "2020-12-30T00:45:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587837",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>
How about biting the bullet and adding the missing Pari parts (i.e. Pari packages) to Homebrew?



---

archive/issue_comments_587838.json:
```json
{
    "body": "<a id='comment:15'></a>\nUnless I'm misunderstanding, that might fix the symptom but not the actual problem. If we go that direction and we don't address the problem of /usr/local leaking into the build, then we have to detect whether all of the relevant pieces of pari are installed in homebrew or none of them are, and refuse to continue if the system is some intermediate state (like mine with `pari` installed but none of the as yet non-existent packages).",
    "created_at": "2020-12-30T00:57:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587838",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:15'></a>
Unless I'm misunderstanding, that might fix the symptom but not the actual problem. If we go that direction and we don't address the problem of /usr/local leaking into the build, then we have to detect whether all of the relevant pieces of pari are installed in homebrew or none of them are, and refuse to continue if the system is some intermediate state (like mine with `pari` installed but none of the as yet non-existent packages).



---

archive/issue_comments_587839.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [jhpalmieri](#comment%3A15):\n> Unless I'm misunderstanding, that might fix the symptom but not the actual problem. If we go that direction and we don't address the problem of /usr/local leaking into the build, then we have to detect whether all of the relevant pieces of pari are installed in homebrew or none of them are, and refuse to continue if the system is some intermediate state (like mine with `pari` installed but none of the as yet non-existent packages).\n\n\nyou're right, that's what can be done. (Realistically though, once it's in place, people would just install the whole bunch - one can also have a Sage-components formula to install as many deps as there are)",
    "created_at": "2020-12-31T00:34:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587839",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:16'></a>
Replying to [jhpalmieri](#comment%3A15):
> Unless I'm misunderstanding, that might fix the symptom but not the actual problem. If we go that direction and we don't address the problem of /usr/local leaking into the build, then we have to detect whether all of the relevant pieces of pari are installed in homebrew or none of them are, and refuse to continue if the system is some intermediate state (like mine with `pari` installed but none of the as yet non-existent packages).


you're right, that's what can be done. (Realistically though, once it's in place, people would just install the whole bunch - one can also have a Sage-components formula to install as many deps as there are)



---

archive/issue_comments_587840.json:
```json
{
    "body": "<a id='comment:17'></a>\nContributing to homebrew packaging is beyond the scope of this ticket.\n\nStill needs review",
    "created_at": "2021-01-06T19:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587840",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
Contributing to homebrew packaging is beyond the scope of this ticket.

Still needs review



---

archive/issue_comments_587841.json:
```json
{
    "body": "<a id='comment:18'></a>\nWhy remove the doctest\n\n```\nsage: b[0][0].precision()    # in words\n```\n?",
    "created_at": "2021-01-08T00:17:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587841",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:18'></a>
Why remove the doctest

```
sage: b[0][0].precision()    # in words
```
?



---

archive/issue_comments_587842.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [jhpalmieri](#comment%3A18):\n> Why remove the doctest\n> \n> ```\n> sage: b[0][0].precision()    # in words\n> ```\n> ?\n\n\nhttps://github.com/sagemath/cypari2/commit/8bd7ca38462742a80829a71bb0ae4279c56ead97",
    "created_at": "2021-01-08T09:05:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587842",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>
Replying to [jhpalmieri](#comment%3A18):
> Why remove the doctest
> 
> ```
> sage: b[0][0].precision()    # in words
> ```
> ?


https://github.com/sagemath/cypari2/commit/8bd7ca38462742a80829a71bb0ae4279c56ead97



---

archive/issue_comments_587843.json:
```json
{
    "body": "<a id='comment:20'></a>\nGreat. Let's merge this.",
    "created_at": "2021-01-08T17:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587843",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'></a>
Great. Let's merge this.



---

archive/issue_comments_587844.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-01-08T17:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587844",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_587845.json:
```json
{
    "body": "**Changing reviewer** from \"Matthias Koeppe, ...\" to \"Matthias Koeppe, John Palmieri\".",
    "created_at": "2021-01-08T17:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587845",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing reviewer** from "Matthias Koeppe, ..." to "Matthias Koeppe, John Palmieri".



---

archive/issue_events_091643.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-17T13:46:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31029#event-91643"
}
```



---

archive/issue_comments_587846.json:
```json
{
    "body": "**Changing branch** from \"[u/vdelecroix/31029](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/31029)\" to \"[b9aadfd08e81d74ca7c229bb80eb853b592887d0](https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0)\".",
    "created_at": "2021-01-17T13:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31029#issuecomment-587846",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/vdelecroix/31029](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/31029)" to "[b9aadfd08e81d74ca7c229bb80eb853b592887d0](https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0)".
