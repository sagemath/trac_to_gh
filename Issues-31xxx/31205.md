# Issue 31205: GAPError: Error, reached the pre-set memory limit (change it with the -o command line option)

archive/issues_030968.json:
```json
{
    "body": "\"GAPError: Error, reached the pre-set memory limit\n(change it with the -o command line option)\"\n\nA) intercept this error message and provide meaningful info for\nunsuspecting users. (at least for notebook interface,\ni don't know about commandline) Something like this:\n\n\"1) you can simply repeat the calculation, and it will\nuse a larger memory limit.\"\n(I found this by googling, and it works)\n\"2) Beware however that an excessive memory consumption might slow down other processes\non the computer.\"\n\nB) How is the user supposed to \"change it\" with a command-line option?\n\nMaybe a way to set this can be provided\n\n(The current status is a nuisance: I had a lengthy calculation with\nsubgroups in a loop. First it stopped with the \"o flag\" message after\n30 seconds. On restart, after 1 minute or so. Eventually\nI had to restart it a few times. It about took 15 minutes.\nHalf of it was wasted because I had the restart from scratch.\n(and I had to watch whether it was proceeding.)\n\n\n\n\n**CC:**  @dimpase\n\n**Keywords:** options for GAP\n\n**Reviewer:** Dima Pasechnik\n\n**Dependencies:** #34041\n\nIssue created by migration from https://trac.sagemath.org/ticket/31205\n\n",
    "closed_at": "2022-08-02T06:31:03Z",
    "created_at": "2021-01-08T02:24:20Z",
    "labels": [
        "component: group theory",
        "minor",
        "enhancement",
        "invalid"
    ],
    "title": "GAPError: Error, reached the pre-set memory limit (change it with the -o command line option)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31205",
    "user": "https://github.com/guenterrote"
}
```
"GAPError: Error, reached the pre-set memory limit
(change it with the -o command line option)"

A) intercept this error message and provide meaningful info for
unsuspecting users. (at least for notebook interface,
i don't know about commandline) Something like this:

"1) you can simply repeat the calculation, and it will
use a larger memory limit."
(I found this by googling, and it works)
"2) Beware however that an excessive memory consumption might slow down other processes
on the computer."

B) How is the user supposed to "change it" with a command-line option?

Maybe a way to set this can be provided

(The current status is a nuisance: I had a lengthy calculation with
subgroups in a loop. First it stopped with the "o flag" message after
30 seconds. On restart, after 1 minute or so. Eventually
I had to restart it a few times. It about took 15 minutes.
Half of it was wasted because I had the restart from scratch.
(and I had to watch whether it was proceeding.)




**CC:**  @dimpase

**Keywords:** options for GAP

**Reviewer:** Dima Pasechnik

**Dependencies:** #34041

Issue created by migration from https://trac.sagemath.org/ticket/31205





---

archive/issue_comments_502746.json:
```json
{
    "body": "<a id='comment:1'></a>\nProposal:\nIntercept this error message, and extend it by a more informative error message:\n\n---\n\n\"There are two options.\n\na) If you are in an interactive session, you can run the command again. GAP with retry with twice\nas much memory as before.\n\nb) You can start a new sage session, or a new batch run, and set the memory limit in advance\nwith the `set_gap_memory_pool_size(size_in_bytes)` function of the `sage.interfaces.gap` module, *before* running any commands that involve GAP.\n(The standard memory pool size can be found with the function `get_gap_memory_pool_size()`.)\n\nBeware however that an excessive memory consumption might slow down other processes\nor even stall the computer completely.\n\n---\n\nI don't know if there is any situation where the \"-o command line option\" message\nmakes sense. If not, it should be replaced, and not extended.\n\n---\n\nHow is the standard limit determined?\n(The current test case says \"# random output\".)\n\n```\nsage: from sage.interfaces.gap import get_gap_memory_pool_size\nsage: get_gap_memory_pool_size()\n262144000\n```\nI get different results on different computers, and it decreases on successive calls.",
    "created_at": "2021-03-08T12:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31205#issuecomment-502746",
    "user": "https://github.com/guenterrote"
}
```

<a id='comment:1'></a>
Proposal:
Intercept this error message, and extend it by a more informative error message:

---

"There are two options.

a) If you are in an interactive session, you can run the command again. GAP with retry with twice
as much memory as before.

b) You can start a new sage session, or a new batch run, and set the memory limit in advance
with the `set_gap_memory_pool_size(size_in_bytes)` function of the `sage.interfaces.gap` module, *before* running any commands that involve GAP.
(The standard memory pool size can be found with the function `get_gap_memory_pool_size()`.)

Beware however that an excessive memory consumption might slow down other processes
or even stall the computer completely.

---

I don't know if there is any situation where the "-o command line option" message
makes sense. If not, it should be replaced, and not extended.

---

How is the standard limit determined?
(The current test case says "# random output".)

```
sage: from sage.interfaces.gap import get_gap_memory_pool_size
sage: get_gap_memory_pool_size()
262144000
```
I get different results on different computers, and it decreases on successive calls.



---

archive/issue_comments_502747.json:
```json
{
    "body": "**Author:** G\u00fcnter Rote",
    "created_at": "2021-03-08T12:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31205#issuecomment-502747",
    "user": "https://github.com/guenterrote"
}
```

**Author:** Günter Rote



---

archive/issue_comments_502748.json:
```json
{
    "body": "<a id='comment:2'></a>\nRelated ticket: #14779. (duplicate?)",
    "created_at": "2021-03-13T03:19:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31205#issuecomment-502748",
    "user": "https://github.com/DaveWitteMorris"
}
```

<a id='comment:2'></a>
Related ticket: #14779. (duplicate?)



---

archive/issue_events_279706.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31205#event-279706"
}
```



---

archive/issue_events_279707.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31205#event-279707"
}
```



---

archive/issue_comments_502749.json:
```json
{
    "body": "<a id='comment:3'></a>\nMoving to 9.4, as 9.3 has been released.",
    "created_at": "2021-05-10T17:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31205#issuecomment-502749",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
Moving to 9.4, as 9.3 has been released.



---

archive/issue_events_279708.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31205#event-279708"
}
```



---

archive/issue_events_279709.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31205#event-279709"
}
```



---

archive/issue_events_279710.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:12:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31205#event-279710"
}
```



---

archive/issue_events_279711.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T20:12:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31205#event-279711"
}
```



---

archive/issue_events_279712.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31205#event-279712"
}
```



---

archive/issue_events_279713.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:17:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31205#event-279713"
}
```



---

archive/issue_comments_502750.json:
```json
{
    "body": "**Dependencies:** #34041",
    "created_at": "2022-07-02T00:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31205#issuecomment-502750",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #34041



---

archive/issue_events_279714.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-02T00:04:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31205#event-279714"
}
```



---

archive/issue_comments_502751.json:
```json
{
    "body": "<a id='comment:7'></a>\nTaken care of by #34041, I think",
    "created_at": "2022-07-02T00:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31205#issuecomment-502751",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Taken care of by #34041, I think



---

archive/issue_events_279715.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-02T00:04:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31205#event-279715"
}
```



---

archive/issue_events_279716.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-07-02T09:47:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31205#event-279716"
}
```



---

archive/issue_events_279717.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2022-07-02T09:47:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31205#event-279717"
}
```



---

archive/issue_comments_502752.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2022-07-02T09:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31205#issuecomment-502752",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_comments_502753.json:
```json
{
    "body": "**Changing author** from \"G\u00fcnter Rote\" to \"\".",
    "created_at": "2022-07-08T01:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31205#issuecomment-502753",
    "user": "https://github.com/mkoeppe"
}
```

**Changing author** from "Günter Rote" to "".



---

archive/issue_events_279718.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-02T06:31:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31205#event-279718"
}
```



---

archive/issue_events_279719.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-02T06:31:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31205",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31205#event-279719"
}
```
