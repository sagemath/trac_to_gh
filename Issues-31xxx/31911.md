# Issue 31911: Boolean symbolic expressions

archive/issues_031674.json:
```json
{
    "body": "As proposed in https://groups.google.com/g/sage-devel/c/U_WGbYG2zOE/m/yq-EDEXDAgAJ\n\nWe add symbolic functions `and_symbolic`, `or_symbolic`, `not_symbolic`; the first two are also accessible by repurposing the operators bitwise-and `&` and bitwise-or `|`.\n\nBy extending the expression parser to also handle `&` (equivalently, infix `and`), `|` (equivalently, infix `or`), and `~` (equivalently, prefix `not`), these constructions can also be obtained as a conversion from `maxima` and `giac` expression strings.\n\nOne application is for the coordinate restrictions of a `Chart`.\n\nCC:  @EmmanuelCharpentier @nbruin @egourgoulhon @fchapoton @spaghettisalat @kcrisman\n\nWork_Issues: Parser: Use a make_... function instead of importing and_symbolic...\n\nAuthor: Matthias Koeppe\n\nBranch: u/mkoeppe/boolean_symbolic_expressions\n\nStatus: needs_work\n\nDependencies: #32383\n\nCommit: e9eac61a362a738322cbade296356c7d30b1bd7c\n\nIssue created by migration from https://trac.sagemath.org/ticket/31911\n\n",
    "created_at": "2021-06-05T04:27:19Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Boolean symbolic expressions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31911",
    "user": "https://github.com/mkoeppe"
}
```
As proposed in https://groups.google.com/g/sage-devel/c/U_WGbYG2zOE/m/yq-EDEXDAgAJ

We add symbolic functions `and_symbolic`, `or_symbolic`, `not_symbolic`; the first two are also accessible by repurposing the operators bitwise-and `&` and bitwise-or `|`.

By extending the expression parser to also handle `&` (equivalently, infix `and`), `|` (equivalently, infix `or`), and `~` (equivalently, prefix `not`), these constructions can also be obtained as a conversion from `maxima` and `giac` expression strings.

One application is for the coordinate restrictions of a `Chart`.

CC:  @EmmanuelCharpentier @nbruin @egourgoulhon @fchapoton @spaghettisalat @kcrisman

Work_Issues: Parser: Use a make_... function instead of importing and_symbolic...

Author: Matthias Koeppe

Branch: u/mkoeppe/boolean_symbolic_expressions

Status: needs_work

Dependencies: #32383

Commit: e9eac61a362a738322cbade296356c7d30b1bd7c

Issue created by migration from https://trac.sagemath.org/ticket/31911





---

archive/issue_comments_634447.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/boolean_symbolic_expressions\"",
    "created_at": "2021-06-05T05:46:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634447",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/boolean_symbolic_expressions"



---

archive/issue_comments_634448.json:
```json
{
    "body": "Changing commit from \"\" to \"863c636f52e73c08b3730a99ce7345cb694544da\"",
    "created_at": "2021-06-05T05:47:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634448",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "863c636f52e73c08b3730a99ce7345cb694544da"



---

archive/issue_comments_634449.json:
```json
{
    "body": "<a id='comment:2'></a>Here's an attempt \n\n---\nNew commits:",
    "created_at": "2021-06-05T05:47:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634449",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>Here's an attempt 

---
New commits:



---

archive/issue_comments_634450.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,7 @@\n As proposed in https://groups.google.com/g/sage-devel/c/U_WGbYG2zOE/m/yq-EDEXDAgAJ\n+\n+\n+One application is for the restrictions of a `Chart`.\n \n Comment: 1\n \n``````\n",
    "created_at": "2021-06-05T18:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634450",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,7 @@
 As proposed in https://groups.google.com/g/sage-devel/c/U_WGbYG2zOE/m/yq-EDEXDAgAJ
+
+
+One application is for the restrictions of a `Chart`.
 
 Comment: 1
 
``````




---

archive/issue_comments_634451.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:2 mkoeppe]:\n> Here's an attempt \n> \n> ---\n> New commits:\n> |                                                                                                                                          |                                         |\n> |------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n> |[863c636](https://git.sagemath.org/sage.git/commit?id=863c636f52e73c08b3730a99ce7345cb694544da)|`sage.functions.boolean.AndSymbolic: New`|\n\n\nI'll test that tomorrow. A couple remarks :\n\n* `eval` can be farmed out to `sympy`'s `And` (one of the goals of this addition being the ability to use `Sympy`'s `Piecewise` expressions of integrals and ODE solutions, often involving logical expressions...). I was originally aiming at wrapping `Sympy`'s logical functions, but got stopped by :\n\n* The showstopper problem I haven't been able to solve yet is **translation to Maxima** and //backtranslation//.\n\n  This is utterly necessary if you want to keep logical symbolic expressions (or symbolic expressions involving logical parts, as in `case` calls) `simplify`able (other `Expression` methods are also farmed out to Maxima...).\n\n  OTOH, `maxima_calculus` should be easier, since this interface works \"naturally\" with the Lisp function tree representing Maxima expressions.\n\n* Translation to `Mathematica` and `Sympy` should be trivial (give the names in a  `conversions` argument). I don't know (yet) what is offered by `giac` and `fricas`, but maintaining universal translatability seems highly desirable...\n\nHTH,",
    "created_at": "2021-06-05T23:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634451",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:4'></a>Replying to [comment:2 mkoeppe]:
> Here's an attempt 
> 
> ---
> New commits:
> |                                                                                                                                          |                                         |
> |------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
> |[863c636](https://git.sagemath.org/sage.git/commit?id=863c636f52e73c08b3730a99ce7345cb694544da)|`sage.functions.boolean.AndSymbolic: New`|


I'll test that tomorrow. A couple remarks :

* `eval` can be farmed out to `sympy`'s `And` (one of the goals of this addition being the ability to use `Sympy`'s `Piecewise` expressions of integrals and ODE solutions, often involving logical expressions...). I was originally aiming at wrapping `Sympy`'s logical functions, but got stopped by :

* The showstopper problem I haven't been able to solve yet is **translation to Maxima** and //backtranslation//.

  This is utterly necessary if you want to keep logical symbolic expressions (or symbolic expressions involving logical parts, as in `case` calls) `simplify`able (other `Expression` methods are also farmed out to Maxima...).

  OTOH, `maxima_calculus` should be easier, since this interface works "naturally" with the Lisp function tree representing Maxima expressions.

* Translation to `Mathematica` and `Sympy` should be trivial (give the names in a  `conversions` argument). I don't know (yet) what is offered by `giac` and `fricas`, but maintaining universal translatability seems highly desirable...

HTH,



---

archive/issue_comments_634452.json:
```json
{
    "body": "Replying to [ticket:31911 mkoeppe]:\n> \n> One application is for the restrictions of a `Chart`.\n\nMay I ask which application?",
    "created_at": "2021-06-06T21:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634452",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [ticket:31911 mkoeppe]:
> 
> One application is for the restrictions of a `Chart`.

May I ask which application?



---

archive/issue_comments_634453.json:
```json
{
    "body": "<a id='comment:6'></a>Right now, chart restrictions have an ad-hoc representation as nested lists and tuples of symbolic relation expressions; this could be replaced by the corresponding boolean expressions (instances of `AndSymbolic`, `OrSymbolic`)",
    "created_at": "2021-06-06T21:28:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634453",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>Right now, chart restrictions have an ad-hoc representation as nested lists and tuples of symbolic relation expressions; this could be replaced by the corresponding boolean expressions (instances of `AndSymbolic`, `OrSymbolic`)



---

archive/issue_comments_634454.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 mkoeppe]:\n> Right now, chart restrictions have an ad-hoc representation as nested lists and tuples of symbolic relation expressions; this could be replaced by the corresponding boolean expressions (instances of `AndSymbolic`, `OrSymbolic`)\n\nAh yes, this would be nice! Thanks for your answer.",
    "created_at": "2021-06-06T21:48:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634454",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:7'></a>Replying to [comment:6 mkoeppe]:
> Right now, chart restrictions have an ad-hoc representation as nested lists and tuples of symbolic relation expressions; this could be replaced by the corresponding boolean expressions (instances of `AndSymbolic`, `OrSymbolic`)

Ah yes, this would be nice! Thanks for your answer.



---

archive/issue_events_084321.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31911#event-84321"
}
```



---

archive/issue_comments_634455.json:
```json
{
    "body": "<a id='comment:10'></a>For converting to maxima, some help would be welcome. My last failed attempt looked like this:\n\n```diff\ndiff --git a/src/sage/functions/boolean.py b/src/sage/functions/boolean.py\nindex 58089dce81..d32acca761 100644\n--- a/src/sage/functions/boolean.py\n+++ b/src/sage/functions/boolean.py\n@@ -31,7 +31,8 @@ class AndSymbolic(BuiltinFunction):\n \n         \"\"\"\n         BuiltinFunction.__init__(self, 'and_symbolic', nargs=0,\n-                                 conversions=dict(sympy='And'))\n+                                 conversions=dict(sympy='And',\n+                                                  maxima='andsymbolic'))\n \n     def _eval_(self, *args):\n \ndiff --git a/src/sage/interfaces/maxima_lib.py b/src/sage/interfaces/maxima_lib.py\nindex 40367c5242..2f6ab545f8 100644\n--- a/src/sage/interfaces/maxima_lib.py\n+++ b/src/sage/interfaces/maxima_lib.py\n@@ -113,6 +113,9 @@ ecl_eval('(defun principal nil (cond ($noprincipal (diverg)) ((not pcprntd) (mer\n ecl_eval(\"(remprop 'mfactorial 'grind)\") # don't use ! for factorials (#11539)\n ecl_eval(\"(setf $errormsg nil)\")\n \n+ecl_eval(\"(defmfun $andsymbolic (&rest args) (simplify (cons '(mand) args)))\")\n+\n+\n # the following is a direct adaptation of the definition of \"retrieve\"\n # in the Maxima file macsys.lisp. This routine is normally responsible\n # for displaying a question and returning the answer. We change it to\n@@ -1213,7 +1216,8 @@ sage_op_dict = {\n     sage.symbolic.expression.operator.neg : \"MMINUS\",\n     sage.symbolic.expression.operator.pow : \"MEXPT\",\n     sage.symbolic.expression.operator.or_ : \"MOR\",\n-    sage.symbolic.expression.operator.and_ : \"MAND\",\n+    #sage.symbolic.expression.operator.and_ : \"MAND\",\n```",
    "created_at": "2021-08-13T22:23:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634455",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>For converting to maxima, some help would be welcome. My last failed attempt looked like this:

```diff
diff --git a/src/sage/functions/boolean.py b/src/sage/functions/boolean.py
index 58089dce81..d32acca761 100644
--- a/src/sage/functions/boolean.py
+++ b/src/sage/functions/boolean.py
@@ -31,7 +31,8 @@ class AndSymbolic(BuiltinFunction):
 
         """
         BuiltinFunction.__init__(self, 'and_symbolic', nargs=0,
-                                 conversions=dict(sympy='And'))
+                                 conversions=dict(sympy='And',
+                                                  maxima='andsymbolic'))
 
     def _eval_(self, *args):
 
diff --git a/src/sage/interfaces/maxima_lib.py b/src/sage/interfaces/maxima_lib.py
index 40367c5242..2f6ab545f8 100644
--- a/src/sage/interfaces/maxima_lib.py
+++ b/src/sage/interfaces/maxima_lib.py
@@ -113,6 +113,9 @@ ecl_eval('(defun principal nil (cond ($noprincipal (diverg)) ((not pcprntd) (mer
 ecl_eval("(remprop 'mfactorial 'grind)") # don't use ! for factorials (#11539)
 ecl_eval("(setf $errormsg nil)")
 
+ecl_eval("(defmfun $andsymbolic (&rest args) (simplify (cons '(mand) args)))")
+
+
 # the following is a direct adaptation of the definition of "retrieve"
 # in the Maxima file macsys.lisp. This routine is normally responsible
 # for displaying a question and returning the answer. We change it to
@@ -1213,7 +1216,8 @@ sage_op_dict = {
     sage.symbolic.expression.operator.neg : "MMINUS",
     sage.symbolic.expression.operator.pow : "MEXPT",
     sage.symbolic.expression.operator.or_ : "MOR",
-    sage.symbolic.expression.operator.and_ : "MAND",
+    #sage.symbolic.expression.operator.and_ : "MAND",
```



---

archive/issue_comments_634456.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-08-13T22:24:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634456",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_634457.json:
```json
{
    "body": "Changing commit from \"863c636f52e73c08b3730a99ce7345cb694544da\" to \"106cc8f48bcc935a52940bebc377e47d5e2d6e79\"",
    "created_at": "2021-08-13T22:24:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634457",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "863c636f52e73c08b3730a99ce7345cb694544da" to "106cc8f48bcc935a52940bebc377e47d5e2d6e79"



---

archive/issue_comments_634458.json:
```json
{
    "body": "Changing commit from \"106cc8f48bcc935a52940bebc377e47d5e2d6e79\" to \"859a969b52cf76040d1822324a00db57998bd273\"",
    "created_at": "2021-08-13T22:47:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634458",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "106cc8f48bcc935a52940bebc377e47d5e2d6e79" to "859a969b52cf76040d1822324a00db57998bd273"



---

archive/issue_comments_634459.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T22:47:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634459",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634460.json:
```json
{
    "body": "Changing commit from \"859a969b52cf76040d1822324a00db57998bd273\" to \"0dca44278264774fa8c3449e1cf3565811446310\"",
    "created_at": "2021-08-13T23:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634460",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "859a969b52cf76040d1822324a00db57998bd273" to "0dca44278264774fa8c3449e1cf3565811446310"



---

archive/issue_comments_634461.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T23:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634461",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634462.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-14T02:45:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634462",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634463.json:
```json
{
    "body": "Changing commit from \"0dca44278264774fa8c3449e1cf3565811446310\" to \"2866ee7df268dd0068c752896aecfe3abfee7685\"",
    "created_at": "2021-08-14T02:45:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634463",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0dca44278264774fa8c3449e1cf3565811446310" to "2866ee7df268dd0068c752896aecfe3abfee7685"



---

archive/issue_comments_634464.json:
```json
{
    "body": "Changing commit from \"2866ee7df268dd0068c752896aecfe3abfee7685\" to \"fb3f9d0fefe0f91ae9a3f3018bd596cb8f169b61\"",
    "created_at": "2021-08-14T03:10:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634464",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2866ee7df268dd0068c752896aecfe3abfee7685" to "fb3f9d0fefe0f91ae9a3f3018bd596cb8f169b61"



---

archive/issue_comments_634465.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-14T03:10:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634465",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634466.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-08-14T03:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634466",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_634467.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-14T03:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634467",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634468.json:
```json
{
    "body": "Changing commit from \"fb3f9d0fefe0f91ae9a3f3018bd596cb8f169b61\" to \"6b9adbfaeba46ec430cf004af4fb1843109ce27d\"",
    "created_at": "2021-08-14T03:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634468",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fb3f9d0fefe0f91ae9a3f3018bd596cb8f169b61" to "6b9adbfaeba46ec430cf004af4fb1843109ce27d"



---

archive/issue_comments_634469.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-14T04:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634469",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634470.json:
```json
{
    "body": "Changing commit from \"6b9adbfaeba46ec430cf004af4fb1843109ce27d\" to \"8e10ed36645fff93cccc870160bf65f87fc45ea4\"",
    "created_at": "2021-08-14T04:51:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6b9adbfaeba46ec430cf004af4fb1843109ce27d" to "8e10ed36645fff93cccc870160bf65f87fc45ea4"



---

archive/issue_comments_634471.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-14T05:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634471",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_634472.json:
```json
{
    "body": "<a id='comment:20'></a>Thank you for implementing this!\n\nIt seems that there is no entry for the new symbolic boolean operators in the reference manual. There should probably be more examples of use. A few naive trials:\n\n```\nsage: var('x y')\n(x, y)\nsage: s = x>0 & y<0\nTypeError: unsupported operand type(s) for &: 'sage.symbolic.expression.Expression'\n and 'sage.symbolic.expression.Expression'\n```\n\n```\nsage: from sage.functions.boolean import and_symbolic\nsage: s = and_symbolic(x>0, y<0)\nsage: bool(s.subs({x: 1, y: -2}))\nTypeError: unable to make sense of Maxima expression 'and_symbolic(1>0,-2<0)'\n in Sage\n```",
    "created_at": "2021-08-14T15:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634472",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:20'></a>Thank you for implementing this!

It seems that there is no entry for the new symbolic boolean operators in the reference manual. There should probably be more examples of use. A few naive trials:

```
sage: var('x y')
(x, y)
sage: s = x>0 & y<0
TypeError: unsupported operand type(s) for &: 'sage.symbolic.expression.Expression'
 and 'sage.symbolic.expression.Expression'
```

```
sage: from sage.functions.boolean import and_symbolic
sage: s = and_symbolic(x>0, y<0)
sage: bool(s.subs({x: 1, y: -2}))
TypeError: unable to make sense of Maxima expression 'and_symbolic(1>0,-2<0)'
 in Sage
```



---

archive/issue_comments_634473.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#32315\"",
    "created_at": "2021-08-14T16:30:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634473",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#32315"



---

archive/issue_comments_634474.json:
```json
{
    "body": "Changing commit from \"8e10ed36645fff93cccc870160bf65f87fc45ea4\" to \"061102665f740cf693e900273fb143b0213b19ca\"",
    "created_at": "2021-08-14T16:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8e10ed36645fff93cccc870160bf65f87fc45ea4" to "061102665f740cf693e900273fb143b0213b19ca"



---

archive/issue_comments_634475.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-14T16:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634475",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634476.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:20 egourgoulhon]:\n> {{{\n> sage: var('x y')\n> (x, y)\n> sage: s = x>0 & y<0\n> TypeError: unsupported operand type(s) for &: 'sage.symbolic.expression.Expression'\n>  and 'sage.symbolic.expression.Expression'\n> }}}\n\n\nThe `&` operator is now implemented -- note that due to Python operator precedence, the operands need to be put in parentheses:\n\n```\nsage: var('x y') \n(x, y) \nsage: (x>0) & (y<0)                                                                                                                                                            \nand_symbolic(x > 0, y < 0)\n```",
    "created_at": "2021-08-14T16:50:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634476",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>Replying to [comment:20 egourgoulhon]:
> {{{
> sage: var('x y')
> (x, y)
> sage: s = x>0 & y<0
> TypeError: unsupported operand type(s) for &: 'sage.symbolic.expression.Expression'
>  and 'sage.symbolic.expression.Expression'
> }}}


The `&` operator is now implemented -- note that due to Python operator precedence, the operands need to be put in parentheses:

```
sage: var('x y') 
(x, y) 
sage: (x>0) & (y<0)                                                                                                                                                            
and_symbolic(x > 0, y < 0)
```



---

archive/issue_comments_634477.json:
```json
{
    "body": "Changing commit from \"061102665f740cf693e900273fb143b0213b19ca\" to \"a839cdfe1b728a885d8b239871056296fe6a89e5\"",
    "created_at": "2021-08-14T17:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634477",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "061102665f740cf693e900273fb143b0213b19ca" to "a839cdfe1b728a885d8b239871056296fe6a89e5"



---

archive/issue_comments_634478.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-14T17:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634478",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634479.json:
```json
{
    "body": "<a id='comment:25'></a>This is work in progress, no ?\n\n* A `symbolic_not` is necessary. It might implement De Morgan's equalities (or this could be delegated to `.expand` and `.factor`, or, alternatively delegated to the [logical functions](https://doc.sagemath.org/html/en/reference/logic/index.html)).\n\n* These functions currently do nothing :\n\n```\nsage: var(\"a, b\")                                                               \n(a, b)\nsage: and_symbolic((a>0), (b<0))                                                \n---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)\n<ipython-input-2-67fb44f33113> in <module>\n----> 1 and_symbolic((a>Integer(0)), (b<Integer(0)))\n\nNameError: name 'and_symbolic' is not defined\nsage: (a>0) & (b<0)                                                             \nand_symbolic(a > 0, b < 0)\nsage: ((a>0) & (b<0)).subs(a==3)                                                \nand_symbolic(3 > 0, b < 0)\n```\n\nCompare :\n\n```\nsage: ((a>0) & (b<0)).subs(a==3)._sympy_().simplify()._sage_()                  \nb < 0\nsage: sympy.Not(sympy.And(a._sympy_(), b._sympy_()))                            \n~(a & b)\nsage: sympy.Not(sympy.And(a._sympy_(), b._sympy_())).simplify()                 \n~a | ~b\n```\n\n==> `needs_work`\n\n---\nNew commits:",
    "created_at": "2021-08-14T17:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634479",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:25'></a>This is work in progress, no ?

* A `symbolic_not` is necessary. It might implement De Morgan's equalities (or this could be delegated to `.expand` and `.factor`, or, alternatively delegated to the [logical functions](https://doc.sagemath.org/html/en/reference/logic/index.html)).

* These functions currently do nothing :

```
sage: var("a, b")                                                               
(a, b)
sage: and_symbolic((a>0), (b<0))                                                
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-2-67fb44f33113> in <module>
----> 1 and_symbolic((a>Integer(0)), (b<Integer(0)))

NameError: name 'and_symbolic' is not defined
sage: (a>0) & (b<0)                                                             
and_symbolic(a > 0, b < 0)
sage: ((a>0) & (b<0)).subs(a==3)                                                
and_symbolic(3 > 0, b < 0)
```

Compare :

```
sage: ((a>0) & (b<0)).subs(a==3)._sympy_().simplify()._sage_()                  
b < 0
sage: sympy.Not(sympy.And(a._sympy_(), b._sympy_()))                            
~(a & b)
sage: sympy.Not(sympy.And(a._sympy_(), b._sympy_())).simplify()                 
~a | ~b
```

==> `needs_work`

---
New commits:



---

archive/issue_comments_634480.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-08-14T17:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634480",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_634481.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 charpent]:\n> This is work in progress, no ?\n\n\nYes; setting it to \"needs review\" allows the patchbot to run",
    "created_at": "2021-08-14T17:22:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634481",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>Replying to [comment:25 charpent]:
> This is work in progress, no ?


Yes; setting it to "needs review" allows the patchbot to run



---

archive/issue_comments_634482.json:
```json
{
    "body": "<a id='comment:27'></a>`and_symbolic` is not a global binding -- you need to import it to use it, or the `NameError` shows up. See doctests",
    "created_at": "2021-08-14T17:22:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634482",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>`and_symbolic` is not a global binding -- you need to import it to use it, or the `NameError` shows up. See doctests



---

archive/issue_comments_634483.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:25 charpent]:\n> * A `symbolic_not` is necessary. \n\n\nYes, good point; any help with implementing it is welcome...",
    "created_at": "2021-08-14T17:25:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634483",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>Replying to [comment:25 charpent]:
> * A `symbolic_not` is necessary. 


Yes, good point; any help with implementing it is welcome...



---

archive/issue_comments_634484.json:
```json
{
    "body": "<a id='comment:29'></a>Do we want `and_symbolic`, `or_symbolic`, `not_symbolic` as global bindings?\n\n(The names are modeled after the existing `min_symbolic`, `max_symbolic`.)\n\nIn particular, for `not_symbolic`, we cannot rely on an operator to make it available: Sage already repurposes the bitwise inversion operator `~` for multiplicative inversion.",
    "created_at": "2021-08-14T17:39:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634484",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>Do we want `and_symbolic`, `or_symbolic`, `not_symbolic` as global bindings?

(The names are modeled after the existing `min_symbolic`, `max_symbolic`.)

In particular, for `not_symbolic`, we cannot rely on an operator to make it available: Sage already repurposes the bitwise inversion operator `~` for multiplicative inversion.



---

archive/issue_comments_634485.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2021-08-14T17:43:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634485",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_634486.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:27 mkoeppe]:\n> `and_symbolic` is not a global binding -- you need to import it to use it, or the `NameError` shows up. See doctests\n\n\n`and_symbolic` is a tad heavy to be exported. However, global `And`, `Or` and `Not` would be welcome...\n\nBTW, that's how they are  known in Sympy...",
    "created_at": "2021-08-14T17:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634486",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:31'></a>Replying to [comment:27 mkoeppe]:
> `and_symbolic` is not a global binding -- you need to import it to use it, or the `NameError` shows up. See doctests


`and_symbolic` is a tad heavy to be exported. However, global `And`, `Or` and `Not` would be welcome...

BTW, that's how they are  known in Sympy...



---

archive/issue_comments_634487.json:
```json
{
    "body": "<a id='comment:32'></a>But capitalized And, Or, Not seem out of line with our naming scheme for symbolic functions - they are all lowercase if I'm not mistaken.",
    "created_at": "2021-08-14T17:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634487",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>But capitalized And, Or, Not seem out of line with our naming scheme for symbolic functions - they are all lowercase if I'm not mistaken.



---

archive/issue_comments_634488.json:
```json
{
    "body": "<a id='comment:33'></a>(see `src/sage/functions/all.py`)",
    "created_at": "2021-08-14T17:50:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634488",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>(see `src/sage/functions/all.py`)



---

archive/issue_comments_634489.json:
```json
{
    "body": "<a id='comment:34'></a>For extending `sage.misc.parser`, I would follow `sage.logic.logicparser` (even though I am not sure of its relevance), which uses `~` for logical 'not'. (It also uses `->` and `<->` for implication/equivalence; and (incompatible with the expression parser) `^` for logical 'xor'.)",
    "created_at": "2021-08-14T18:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634489",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>For extending `sage.misc.parser`, I would follow `sage.logic.logicparser` (even though I am not sure of its relevance), which uses `~` for logical 'not'. (It also uses `->` and `<->` for implication/equivalence; and (incompatible with the expression parser) `^` for logical 'xor'.)



---

archive/issue_comments_634490.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-14T18:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634491.json:
```json
{
    "body": "Changing commit from \"a839cdfe1b728a885d8b239871056296fe6a89e5\" to \"5505b38ae5d27d13c5ed55310324f85980b00cfd\"",
    "created_at": "2021-08-14T18:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634491",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a839cdfe1b728a885d8b239871056296fe6a89e5" to "5505b38ae5d27d13c5ed55310324f85980b00cfd"



---

archive/issue_comments_634492.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:34 mkoeppe]:\n> For extending `sage.misc.parser`, I would follow `sage.logic.logicparser` (even though I am not sure of its relevance), which uses `~` for logical 'not'. (It also uses `->` and `<->` for implication/equivalence; and (incompatible with the expression parser) `^` for logical 'xor'.)\n\n\nThis would entail conditioning the interpretation of `~` to the type of its arguments, which is fishy : `~(x>0)` is indubitably a logical expression, but `~(x>0).subs(x==0)` could be understood as ~True}}}, which is ... -2 (!).\n\n`Not` can be unambiguous, and nine characters lighter than \"symbolic_not\" ; furthermore, \"our naming scheme for symbolic functions\" is a scheme, not Gospel...\n\n---\nNew commits:",
    "created_at": "2021-08-14T18:23:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634492",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:36'></a>Replying to [comment:34 mkoeppe]:
> For extending `sage.misc.parser`, I would follow `sage.logic.logicparser` (even though I am not sure of its relevance), which uses `~` for logical 'not'. (It also uses `->` and `<->` for implication/equivalence; and (incompatible with the expression parser) `^` for logical 'xor'.)


This would entail conditioning the interpretation of `~` to the type of its arguments, which is fishy : `~(x>0)` is indubitably a logical expression, but `~(x>0).subs(x==0)` could be understood as ~True}}}, which is ... -2 (!).

`Not` can be unambiguous, and nine characters lighter than "symbolic_not" ; furthermore, "our naming scheme for symbolic functions" is a scheme, not Gospel...

---
New commits:



---

archive/issue_comments_634493.json:
```json
{
    "body": "<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-14T18:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634493",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634494.json:
```json
{
    "body": "Changing commit from \"5505b38ae5d27d13c5ed55310324f85980b00cfd\" to \"bb06156d7ab3dadc832c3ee5296fe18c09da7784\"",
    "created_at": "2021-08-14T18:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634494",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5505b38ae5d27d13c5ed55310324f85980b00cfd" to "bb06156d7ab3dadc832c3ee5296fe18c09da7784"



---

archive/issue_comments_634495.json:
```json
{
    "body": "<a id='comment:38'></a>Replying to [comment:36 charpent]:\n> Replying to [comment:34 mkoeppe]:\n> > For extending `sage.misc.parser`, I would follow `sage.logic.logicparser` (even though I am not sure of its relevance), which uses `~` for logical 'not'. [...]\n\n> \n> This would entail conditioning the interpretation of `~` [...]\n\n\nNote, this is just for the expression parser, not for Python semantics.\n\nAs I said in comment:29, we cannot use Python operators to make the operation available. We agree here.",
    "created_at": "2021-08-14T18:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634495",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>Replying to [comment:36 charpent]:
> Replying to [comment:34 mkoeppe]:
> > For extending `sage.misc.parser`, I would follow `sage.logic.logicparser` (even though I am not sure of its relevance), which uses `~` for logical 'not'. [...]

> 
> This would entail conditioning the interpretation of `~` [...]


Note, this is just for the expression parser, not for Python semantics.

As I said in comment:29, we cannot use Python operators to make the operation available. We agree here.



---

archive/issue_comments_634496.json:
```json
{
    "body": "<a id='comment:39'></a>Replying to [comment:36 charpent]:\n> `Not` can be unambiguous, and nine characters lighter than \"symbolic_not\" ; \n\n\nIt would be `not_symbolic`, which is discoverable by typing `not<TAB>` and autocompletes from `not_<TAB>`, so I don't think the length is a significant burden.",
    "created_at": "2021-08-14T18:31:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634496",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>Replying to [comment:36 charpent]:
> `Not` can be unambiguous, and nine characters lighter than "symbolic_not" ; 


It would be `not_symbolic`, which is discoverable by typing `not<TAB>` and autocompletes from `not_<TAB>`, so I don't think the length is a significant burden.



---

archive/issue_comments_634497.json:
```json
{
    "body": "<a id='comment:40'></a>Replying to [comment:38 mkoeppe]:\n> Replying to [comment:36 charpent]:\n> > Replying to [comment:34 mkoeppe]:\n> > > For extending `sage.misc.parser`, I would follow `sage.logic.logicparser` (even though I am not sure of its relevance), which uses `~` for logical 'not'. [...]\n\n> > \n> > This would entail conditioning the interpretation of `~` [...]\n\n> \n> Note, this is just for the expression parser, not for Python semantics.\n> \n> As I said in comment:29, we cannot use Python operators to make the operation available. We agree here.\n\n\n\n\nPossible alternatives :\n\n* forget operators, and limit this functionality to logic functions.\n\n* Borrow inspiration from R and create `&&`, `||` and possibly `~~` operators (analogous  to our representation of bit XOR as `^^`).\n\nIMHO, a functional representatin is the most useful...",
    "created_at": "2021-08-14T18:36:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634497",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:40'></a>Replying to [comment:38 mkoeppe]:
> Replying to [comment:36 charpent]:
> > Replying to [comment:34 mkoeppe]:
> > > For extending `sage.misc.parser`, I would follow `sage.logic.logicparser` (even though I am not sure of its relevance), which uses `~` for logical 'not'. [...]

> > 
> > This would entail conditioning the interpretation of `~` [...]

> 
> Note, this is just for the expression parser, not for Python semantics.
> 
> As I said in comment:29, we cannot use Python operators to make the operation available. We agree here.




Possible alternatives :

* forget operators, and limit this functionality to logic functions.

* Borrow inspiration from R and create `&&`, `||` and possibly `~~` operators (analogous  to our representation of bit XOR as `^^`).

IMHO, a functional representatin is the most useful...



---

archive/issue_comments_634498.json:
```json
{
    "body": "<a id='comment:41'></a>Replying to [comment:40 charpent]:\n> create `&&`, `||` and possibly `~~` operators (analogous  to our representation of bit XOR as `^^`).\n\n\nYou mean in the preparser?  I'll not touch that.\n\nIn just Python, creating new operators such as `&&` is not possible.",
    "created_at": "2021-08-14T18:47:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634498",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>Replying to [comment:40 charpent]:
> create `&&`, `||` and possibly `~~` operators (analogous  to our representation of bit XOR as `^^`).


You mean in the preparser?  I'll not touch that.

In just Python, creating new operators such as `&&` is not possible.



---

archive/issue_comments_634499.json:
```json
{
    "body": "Changing work_issues from \"\" to \"Parser: Use a make_... function instead of importing and_symbolic...\"",
    "created_at": "2021-08-14T18:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634499",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "" to "Parser: Use a make_... function instead of importing and_symbolic..."



---

archive/issue_comments_634500.json:
```json
{
    "body": "<a id='comment:43'></a>Something is fishhy in the maxima__>Sage conversion :\n\n```\nsage: maxima(\"(a>0) and (b<0)\")                                                 \na>0andb<0\nsage: maxima(\"(a>0) and (b<0)\")._sage_()                                        \nand_symbolic(a > 0, 0 < 0)\n```\n\n* The second clause is ill-translated\n\n* the operator's translation should be `&` (or a call to `symbolic_and` or `And`).",
    "created_at": "2021-08-14T18:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634500",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:43'></a>Something is fishhy in the maxima__>Sage conversion :

```
sage: maxima("(a>0) and (b<0)")                                                 
a>0andb<0
sage: maxima("(a>0) and (b<0)")._sage_()                                        
and_symbolic(a > 0, 0 < 0)
```

* The second clause is ill-translated

* the operator's translation should be `&` (or a call to `symbolic_and` or `And`).



---

archive/issue_comments_634501.json:
```json
{
    "body": "<a id='comment:44'></a>Yes, see comment:10 -- I have not figured out maxima conversion -- hoping for help from the experts",
    "created_at": "2021-08-14T19:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634501",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>Yes, see comment:10 -- I have not figured out maxima conversion -- hoping for help from the experts



---

archive/issue_comments_634502.json:
```json
{
    "body": "<a id='comment:45'></a>\n```\nsage: maxima(\"(a>0) and (b<0)\")                                                 \na>0andb<0\n```\nDidn't you fix the whitespace-eating behavior some time recently?",
    "created_at": "2021-08-14T19:01:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634502",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>
```
sage: maxima("(a>0) and (b<0)")                                                 
a>0andb<0
```
Didn't you fix the whitespace-eating behavior some time recently?



---

archive/issue_comments_634503.json:
```json
{
    "body": "<a id='comment:46'></a>Note\n\n```\nsage: sage.calculus.calculus.symbolic_expression_from_string(\"a>0andb<0\", accept_sequence=True)                          \nand_symbolic(a > 0, 0 < 0)\nsage: sage.calculus.calculus.symbolic_expression_from_string(\"a>0and b<0\", accept_sequence=True)                         \nand_symbolic(a > 0, b < 0)\nsage: sage.calculus.calculus.symbolic_expression_from_string(\"0andb\", accept_sequence=True)                              \n0\n```",
    "created_at": "2021-08-14T19:15:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634503",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>Note

```
sage: sage.calculus.calculus.symbolic_expression_from_string("a>0andb<0", accept_sequence=True)                          
and_symbolic(a > 0, 0 < 0)
sage: sage.calculus.calculus.symbolic_expression_from_string("a>0and b<0", accept_sequence=True)                         
and_symbolic(a > 0, b < 0)
sage: sage.calculus.calculus.symbolic_expression_from_string("0andb", accept_sequence=True)                              
0
```



---

archive/issue_comments_634504.json:
```json
{
    "body": "<a id='comment:47'></a>Our expression parser has poor error checking and silently ignores unexpected trailing tokens in some situations:\n\n```\nsage: sage.calculus.calculus.symbolic_expression_from_string(\"0fffffif\", accept_sequence=True)                           \n0\n```",
    "created_at": "2021-08-14T19:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634504",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>Our expression parser has poor error checking and silently ignores unexpected trailing tokens in some situations:

```
sage: sage.calculus.calculus.symbolic_expression_from_string("0fffffif", accept_sequence=True)                           
0
```



---

archive/issue_comments_634505.json:
```json
{
    "body": "<a id='comment:48'></a>Actually, this is just implicit multiplication `0*fffffif`, which gets simplified to 0.",
    "created_at": "2021-08-14T19:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634505",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:48'></a>Actually, this is just implicit multiplication `0*fffffif`, which gets simplified to 0.



---

archive/issue_comments_634506.json:
```json
{
    "body": "<a id='comment:49'></a>Replying to [comment:45 mkoeppe]:\n> {{{\n> sage: maxima(\"(a>0) and (b<0)\")                                                 \n> a>0andb<0\n> }}}\n> Didn't you fix the whitespace-eating behavior some time recently?\n\n\nI see, that's #31796, which appears to be stuck",
    "created_at": "2021-08-14T19:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634506",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>Replying to [comment:45 mkoeppe]:
> {{{
> sage: maxima("(a>0) and (b<0)")                                                 
> a>0andb<0
> }}}
> Didn't you fix the whitespace-eating behavior some time recently?


I see, that's #31796, which appears to be stuck



---

archive/issue_comments_634507.json:
```json
{
    "body": "Changing dependencies from \"#32315\" to \"#32315, #31796\"",
    "created_at": "2021-08-14T19:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634507",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#32315" to "#32315, #31796"



---

archive/issue_comments_634508.json:
```json
{
    "body": "<a id='comment:51'></a>Replying to [comment:45 mkoeppe]:\n> {{{\n> sage: maxima(\"(a>0) and (b<0)\")                                                 \n> a>0andb<0\n> }}}\n> Didn't you fix the whitespace-eating behavior some time recently?\n> \n\n\nI tried. But this patch entailed other bugs, which I hanven't yet understood == back to the old drawing board...",
    "created_at": "2021-08-14T20:21:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634508",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:51'></a>Replying to [comment:45 mkoeppe]:
> {{{
> sage: maxima("(a>0) and (b<0)")                                                 
> a>0andb<0
> }}}
> Didn't you fix the whitespace-eating behavior some time recently?
> 


I tried. But this patch entailed other bugs, which I hanven't yet understood == back to the old drawing board...



---

archive/issue_comments_634509.json:
```json
{
    "body": "Changing commit from \"bb06156d7ab3dadc832c3ee5296fe18c09da7784\" to \"644d831acb4a016f4e1c803319009bd54c92eb62\"",
    "created_at": "2021-08-14T21:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bb06156d7ab3dadc832c3ee5296fe18c09da7784" to "644d831acb4a016f4e1c803319009bd54c92eb62"



---

archive/issue_comments_634510.json:
```json
{
    "body": "<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-14T21:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634510",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634511.json:
```json
{
    "body": "<a id='comment:53'></a>Now, with the repaired #31796 merged, the problem is fixed:\n\n```\nsage: maxima(\"(a>0) and (b<0)\")                                                                                    \na > 0 and b < 0\nsage: maxima(\"(a>0) and (b<0)\")._sage_()                                                                           \nand_symbolic(a > 0, b < 0)\n```",
    "created_at": "2021-08-14T21:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634511",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:53'></a>Now, with the repaired #31796 merged, the problem is fixed:

```
sage: maxima("(a>0) and (b<0)")                                                                                    
a > 0 and b < 0
sage: maxima("(a>0) and (b<0)")._sage_()                                                                           
and_symbolic(a > 0, b < 0)
```



---

archive/issue_comments_634512.json:
```json
{
    "body": "<a id='comment:54'></a>I'm setting this again to `needs_review` so that the patchbot runs; obviously more work is needed.",
    "created_at": "2021-08-14T21:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634512",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'></a>I'm setting this again to `needs_review` so that the patchbot runs; obviously more work is needed.



---

archive/issue_comments_634513.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2021-08-14T21:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634513",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_634514.json:
```json
{
    "body": "<a id='comment:55'></a>Replying to [comment:53 mkoeppe]:\n> Now, with the repaired #31796 merged, the problem is fixed:\n> \n> ```\n> sage: maxima(\"(a>0) and (b<0)\")                                                                                    \n> a > 0 and b < 0\n> sage: maxima(\"(a>0) and (b<0)\")._sage_()                                                                           \n> and_symbolic(a > 0, b < 0)\n> ```\n\n\nThanks a lot ; I was searching in that direction, but missed the target you reached masterfully. Kudos !\n\nBTW : \"something\" translating Maxima's `is` would be as useful as a translation of Maxima's `and`, `or` and `not`, necessary for the present ticket : \n\n```\n(%i3) is(a>2);\n(%o3)                               unknown\n(%i4) is(subst([a=3],a>2));\n(%o4)                                true\n```\n\nNot coincidentally, it has the same Sage syntax collision problem...\n\nShouldn't it be added to this ticket ? Alternatively, we could create a new ticket for this and and depend on it.",
    "created_at": "2021-08-14T21:46:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634514",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:55'></a>Replying to [comment:53 mkoeppe]:
> Now, with the repaired #31796 merged, the problem is fixed:
> 
> ```
> sage: maxima("(a>0) and (b<0)")                                                                                    
> a > 0 and b < 0
> sage: maxima("(a>0) and (b<0)")._sage_()                                                                           
> and_symbolic(a > 0, b < 0)
> ```


Thanks a lot ; I was searching in that direction, but missed the target you reached masterfully. Kudos !

BTW : "something" translating Maxima's `is` would be as useful as a translation of Maxima's `and`, `or` and `not`, necessary for the present ticket : 

```
(%i3) is(a>2);
(%o3)                               unknown
(%i4) is(subst([a=3],a>2));
(%o4)                                true
```

Not coincidentally, it has the same Sage syntax collision problem...

Shouldn't it be added to this ticket ? Alternatively, we could create a new ticket for this and and depend on it.



---

archive/issue_comments_634515.json:
```json
{
    "body": "<a id='comment:56'></a>Could you elaborate on `is`? What collides with what?",
    "created_at": "2021-08-14T21:57:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634515",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:56'></a>Could you elaborate on `is`? What collides with what?



---

archive/issue_comments_634516.json:
```json
{
    "body": "Changing dependencies from \"#32315, #31796\" to \"#32315, #31796, #32379\"",
    "created_at": "2021-08-14T22:18:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634516",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#32315, #31796" to "#32315, #31796, #32379"



---

archive/issue_comments_634517.json:
```json
{
    "body": "<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-14T22:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634517",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634518.json:
```json
{
    "body": "Changing commit from \"644d831acb4a016f4e1c803319009bd54c92eb62\" to \"4aec1e8c7348069bef9cd739dc687b3d436644ca\"",
    "created_at": "2021-08-14T22:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634518",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "644d831acb4a016f4e1c803319009bd54c92eb62" to "4aec1e8c7348069bef9cd739dc687b3d436644ca"



---

archive/issue_comments_634519.json:
```json
{
    "body": "<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-14T22:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634519",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634520.json:
```json
{
    "body": "Changing commit from \"4aec1e8c7348069bef9cd739dc687b3d436644ca\" to \"218b2d66ad5b01b82660493e5c28cd8ebf461a6e\"",
    "created_at": "2021-08-14T22:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634520",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4aec1e8c7348069bef9cd739dc687b3d436644ca" to "218b2d66ad5b01b82660493e5c28cd8ebf461a6e"



---

archive/issue_comments_634521.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+As proposed in https://groups.google.com/g/sage-devel/c/U_WGbYG2zOE/m/yq-EDEXDAgAJ\n \n+We add symbolic functions `and_symbolic`, `or_symbolic`, `not_symbolic`; the first two are also accessible by repurposing the operators bitwise-and `&` and bitwise-or `|`.\n+\n+By extending the expression parser to also handle `&` (equivalently, infix `and`) and `|` (equivalently, infix `or`), these constructions can also be obtained as a conversion from `maxima` and `giac` expression strings.\n+\n+One application is for the coordinate restrictions of a `Chart`.\n \n Comment: 1\n \n``````\n",
    "created_at": "2021-08-14T22:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634521",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
+As proposed in https://groups.google.com/g/sage-devel/c/U_WGbYG2zOE/m/yq-EDEXDAgAJ
 
+We add symbolic functions `and_symbolic`, `or_symbolic`, `not_symbolic`; the first two are also accessible by repurposing the operators bitwise-and `&` and bitwise-or `|`.
+
+By extending the expression parser to also handle `&` (equivalently, infix `and`) and `|` (equivalently, infix `or`), these constructions can also be obtained as a conversion from `maxima` and `giac` expression strings.
+
+One application is for the coordinate restrictions of a `Chart`.
 
 Comment: 1
 
``````




---

archive/issue_comments_634522.json:
```json
{
    "body": "<a id='comment:61'></a>Replying to [comment:56 mkoeppe]:\n> Could you elaborate on `is`? What collides with what?\n\n\n`is` is a Sage operator, roughly equivalent to Lisp's `eq` :\n\n```\nsage: x.parent() is SR\nTrue\n```\n\nTherefore, the Maxima's `is` can't be translated by the mechanism used for Maxima's functions : \n\n```\nsage: maxima.is(x>0)\n  File \"<ipython-input-6-e177b9fc4016>\", line 1\n    maxima.is(x>Integer(0))\n           ^\nSyntaxError: invalid syntax\n\nsage: maxima_calculus.is(x>0)\n  File \"<ipython-input-7-dea1cf49bee0>\", line 1\n    maxima_calculus.is(x>Integer(0))\n                    ^\nSyntaxError: invalid syntax\n```",
    "created_at": "2021-08-14T22:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634522",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:61'></a>Replying to [comment:56 mkoeppe]:
> Could you elaborate on `is`? What collides with what?


`is` is a Sage operator, roughly equivalent to Lisp's `eq` :

```
sage: x.parent() is SR
True
```

Therefore, the Maxima's `is` can't be translated by the mechanism used for Maxima's functions : 

```
sage: maxima.is(x>0)
  File "<ipython-input-6-e177b9fc4016>", line 1
    maxima.is(x>Integer(0))
           ^
SyntaxError: invalid syntax

sage: maxima_calculus.is(x>0)
  File "<ipython-input-7-dea1cf49bee0>", line 1
    maxima_calculus.is(x>Integer(0))
                    ^
SyntaxError: invalid syntax
```



---

archive/issue_comments_634523.json:
```json
{
    "body": "<a id='comment:62'></a>A simple workaround for this is:\n\n```\nsage: getattr(maxima, 'is')(x>0)                                                                                         \nunknown\n```",
    "created_at": "2021-08-14T22:38:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634523",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:62'></a>A simple workaround for this is:

```
sage: getattr(maxima, 'is')(x>0)                                                                                         
unknown
```



---

archive/issue_comments_634524.json:
```json
{
    "body": "Changing commit from \"218b2d66ad5b01b82660493e5c28cd8ebf461a6e\" to \"4094035d7a689dfdbaa65a442ca9f20ff0f56a3c\"",
    "created_at": "2021-08-14T22:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634524",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "218b2d66ad5b01b82660493e5c28cd8ebf461a6e" to "4094035d7a689dfdbaa65a442ca9f20ff0f56a3c"



---

archive/issue_comments_634525.json:
```json
{
    "body": "<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-14T22:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634525",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634526.json:
```json
{
    "body": "Changing commit from \"4094035d7a689dfdbaa65a442ca9f20ff0f56a3c\" to \"a9302a658e75a30fe3fad4a7b7e0a45a13482857\"",
    "created_at": "2021-08-14T23:43:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634526",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4094035d7a689dfdbaa65a442ca9f20ff0f56a3c" to "a9302a658e75a30fe3fad4a7b7e0a45a13482857"



---

archive/issue_comments_634527.json:
```json
{
    "body": "<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-14T23:43:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634527",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634528.json:
```json
{
    "body": "Changing commit from \"a9302a658e75a30fe3fad4a7b7e0a45a13482857\" to \"d202804d9d82054c2317b58709d65a76de13d26d\"",
    "created_at": "2021-08-15T00:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a9302a658e75a30fe3fad4a7b7e0a45a13482857" to "d202804d9d82054c2317b58709d65a76de13d26d"



---

archive/issue_comments_634529.json:
```json
{
    "body": "<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-15T00:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634529",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:65'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634530.json:
```json
{
    "body": "Changing commit from \"d202804d9d82054c2317b58709d65a76de13d26d\" to \"700e84b41043070deb4f5a9b7e77a391665fcce0\"",
    "created_at": "2021-08-15T00:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634530",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d202804d9d82054c2317b58709d65a76de13d26d" to "700e84b41043070deb4f5a9b7e77a391665fcce0"



---

archive/issue_comments_634531.json:
```json
{
    "body": "<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-15T00:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634532.json:
```json
{
    "body": "<a id='comment:67'></a>Replying to [comment:10 mkoeppe]:\n> For converting to maxima, some help would be welcome.\n\n\nI think I figured a solution",
    "created_at": "2021-08-15T00:27:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634532",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:67'></a>Replying to [comment:10 mkoeppe]:
> For converting to maxima, some help would be welcome.


I think I figured a solution



---

archive/issue_comments_634533.json:
```json
{
    "body": "<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-15T04:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634533",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634534.json:
```json
{
    "body": "Changing commit from \"700e84b41043070deb4f5a9b7e77a391665fcce0\" to \"392926c7577b0cbeb739fbe0eae5763dd1f9656d\"",
    "created_at": "2021-08-15T04:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634534",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "700e84b41043070deb4f5a9b7e77a391665fcce0" to "392926c7577b0cbeb739fbe0eae5763dd1f9656d"



---

archive/issue_comments_634535.json:
```json
{
    "body": "<a id='comment:69'></a>Still problematic :\n\n```\nsage: not_symbolic((a>0) & ((b<0) | (x!=0))).simplify()\na <= 0\n```\nWorse :\n\n```\nsage: ((a>0) | (x!=0)).simplify()\n1\n```\nBTW :\n\n```\nsage: ~((a>0) & ((b<0) | (x!=0)))\n1/and_symbolic(a > 0, or_symbolic(b < 0, x != 0))\n```",
    "created_at": "2021-08-15T09:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634535",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:69'></a>Still problematic :

```
sage: not_symbolic((a>0) & ((b<0) | (x!=0))).simplify()
a <= 0
```
Worse :

```
sage: ((a>0) | (x!=0)).simplify()
1
```
BTW :

```
sage: ~((a>0) & ((b<0) | (x!=0)))
1/and_symbolic(a > 0, or_symbolic(b < 0, x != 0))
```



---

archive/issue_comments_634536.json:
```json
{
    "body": "<a id='comment:70'></a>Indeed:\n\n```\nsage: var('a,b')                                                                                                         \n(a, b)\nsage: ((a>0) | (x!=0)).simplify()                                                                                        \n1\nsage: ((a>0) | (x!=0))._maxima_()                                                                                        \ntrue\nsage: ((a>0) | (x!=0))                                                                                                   \nor_symbolic(a > 0, x != 0)\nsage: f = ((a>0) | (x!=0))                                                                                               \nsage: f._maxima_init_()                                                                                                  \n'(_SAGE_VAR_a > 0) or (_SAGE_VAR_x # 0)'\nsage: maxima(_)                                                                                                          \ntrue\nsage: (x!=0)._maxima_()                                                                                                  \n_SAGE_VAR_x # 0\nsage: (a>0)._maxima_()                                                                                                   \n_SAGE_VAR_a > 0\nsage: maxima('(a>0) or (x # 0)')                                                                                         \ntrue\n```\nIs this a maxima bug?",
    "created_at": "2021-08-15T14:22:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634536",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:70'></a>Indeed:

```
sage: var('a,b')                                                                                                         
(a, b)
sage: ((a>0) | (x!=0)).simplify()                                                                                        
1
sage: ((a>0) | (x!=0))._maxima_()                                                                                        
true
sage: ((a>0) | (x!=0))                                                                                                   
or_symbolic(a > 0, x != 0)
sage: f = ((a>0) | (x!=0))                                                                                               
sage: f._maxima_init_()                                                                                                  
'(_SAGE_VAR_a > 0) or (_SAGE_VAR_x # 0)'
sage: maxima(_)                                                                                                          
true
sage: (x!=0)._maxima_()                                                                                                  
_SAGE_VAR_x # 0
sage: (a>0)._maxima_()                                                                                                   
_SAGE_VAR_a > 0
sage: maxima('(a>0) or (x # 0)')                                                                                         
true
```
Is this a maxima bug?



---

archive/issue_comments_634537.json:
```json
{
    "body": "<a id='comment:71'></a>Replying to [comment:69 charpent]:\n> BTW :\n> \n> ```\n> sage: ~((a>0) & ((b<0) | (x!=0)))\n> 1/and_symbolic(a > 0, or_symbolic(b < 0, x != 0))\n> ```\n\n\nYes, this is as discussed in comment:29, comment:38.",
    "created_at": "2021-08-15T14:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634537",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:71'></a>Replying to [comment:69 charpent]:
> BTW :
> 
> ```
> sage: ~((a>0) & ((b<0) | (x!=0)))
> 1/and_symbolic(a > 0, or_symbolic(b < 0, x != 0))
> ```


Yes, this is as discussed in comment:29, comment:38.



---

archive/issue_comments_634538.json:
```json
{
    "body": "<a id='comment:72'></a>Replying to [comment:70 mkoeppe]:\n> Is this a maxima bug?\n\n\nMinimal example in plain maxima 5.45.0:\n\n```\n(%i8) (x#0);\n(%o8)                                x # 0\n(%i9) (x#0) or (x#0);\n(%o9)                                true\n```",
    "created_at": "2021-08-15T14:30:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634538",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:72'></a>Replying to [comment:70 mkoeppe]:
> Is this a maxima bug?


Minimal example in plain maxima 5.45.0:

```
(%i8) (x#0);
(%o8)                                x # 0
(%i9) (x#0) or (x#0);
(%o9)                                true
```



---

archive/issue_comments_634539.json:
```json
{
    "body": "<a id='comment:73'></a>I think our translation of Python's `==` and `!=` to `=` and `#` on the Maxima side is wrong, and we should use `equal` and `notequal` instead - see https://maxima.sourceforge.io/docs/manual/maxima_169.html (Special operator: if)",
    "created_at": "2021-08-15T15:02:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634539",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:73'></a>I think our translation of Python's `==` and `!=` to `=` and `#` on the Maxima side is wrong, and we should use `equal` and `notequal` instead - see https://maxima.sourceforge.io/docs/manual/maxima_169.html (Special operator: if)



---

archive/issue_comments_634540.json:
```json
{
    "body": "<a id='comment:74'></a>Replying to [comment:72 mkoeppe]:\n> Replying to [comment:70 mkoeppe]:\n> > Is this a maxima bug?\n\n> \n> Minimal example in plain maxima 5.45.0:\n> \n> ```\n> (%i8) (x#0);\n> (%o8)                                x # 0\n> (%i9) (x#0) or (x#0);\n> (%o9)                                true\n> ```\n> \n\n\nDid you (or do you plan to) report it in Maxima's bug report system ?\n\nBTW : Sympy's logical functions seem exempt from this bug :\n\n```\nsage: foo = x!=0\nsage: sympy.And(*map(lambda u:u._sympy_(), (foo, foo)))._sage_()\nx != 0\nsage: sympy.Or(*map(lambda u:u._sympy_(), (foo, foo)))._sage_()\nx != 0\nsage: sympy.Not(foo._sympy_())._sage_()\nx == 0\n```\nWrapping Sympy's functions may be a quick way out (that was my initial plan...).",
    "created_at": "2021-08-15T15:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634540",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:74'></a>Replying to [comment:72 mkoeppe]:
> Replying to [comment:70 mkoeppe]:
> > Is this a maxima bug?

> 
> Minimal example in plain maxima 5.45.0:
> 
> ```
> (%i8) (x#0);
> (%o8)                                x # 0
> (%i9) (x#0) or (x#0);
> (%o9)                                true
> ```
> 


Did you (or do you plan to) report it in Maxima's bug report system ?

BTW : Sympy's logical functions seem exempt from this bug :

```
sage: foo = x!=0
sage: sympy.And(*map(lambda u:u._sympy_(), (foo, foo)))._sage_()
x != 0
sage: sympy.Or(*map(lambda u:u._sympy_(), (foo, foo)))._sage_()
x != 0
sage: sympy.Not(foo._sympy_())._sage_()
x == 0
```
Wrapping Sympy's functions may be a quick way out (that was my initial plan...).



---

archive/issue_comments_634541.json:
```json
{
    "body": "<a id='comment:75'></a>Replying to [comment:73 mkoeppe]:\n> I think our translation of Python's `==` and `!=` to `=` and `#` on the Maxima side is wrong, and we should use `equal` and `notequal` instead - see https://maxima.sourceforge.io/docs/manual/maxima_169.html (Special operator: if)\n\n\nDoesn't seem to be a question of precedence :\n\n```\n(%i9) x#0 or x#0;\n\n(%o9) true\n(%i10) (x#0) or (x#0);\n\n(%o10) true\n```",
    "created_at": "2021-08-15T15:28:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634541",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:75'></a>Replying to [comment:73 mkoeppe]:
> I think our translation of Python's `==` and `!=` to `=` and `#` on the Maxima side is wrong, and we should use `equal` and `notequal` instead - see https://maxima.sourceforge.io/docs/manual/maxima_169.html (Special operator: if)


Doesn't seem to be a question of precedence :

```
(%i9) x#0 or x#0;

(%o9) true
(%i10) (x#0) or (x#0);

(%o10) true
```



---

archive/issue_comments_634542.json:
```json
{
    "body": "<a id='comment:76'></a>No, I no longer think this is a Maxima bug.\n\nI think it is a bug in our interface `sage.interfaces.maxima_abstract`. There are already two places that work around it (by using `equal`, `notequal`): `Expression._maxima_init_assume_` and `test_relation_maxima`.",
    "created_at": "2021-08-15T15:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634542",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:76'></a>No, I no longer think this is a Maxima bug.

I think it is a bug in our interface `sage.interfaces.maxima_abstract`. There are already two places that work around it (by using `equal`, `notequal`): `Expression._maxima_init_assume_` and `test_relation_maxima`.



---

archive/issue_comments_634543.json:
```json
{
    "body": "<a id='comment:77'></a>See the early tickets #1163, #2218",
    "created_at": "2021-08-15T15:41:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634543",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:77'></a>See the early tickets #1163, #2218



---

archive/issue_comments_634544.json:
```json
{
    "body": "<a id='comment:79'></a>Replying to [comment:76 mkoeppe]:\n> No, I no longer think this is a Maxima bug.\n> \n> I think it is a bug in our interface `sage.interfaces.maxima_abstract`. There are already two places that work around it (by using `equal`, `notequal`): `Expression._maxima_init_assume_` and `test_relation_maxima`.\n> \n\n\nIndeed, the documentation is quite clear : `=` and `#` : //syntactic// (in)equality (i. e. isomorphic structures) ; `equal` and `unequal` : //value// (= structural) (in)equality.\n\nThis might be a heavy change. Separate ticket, separately tested ?",
    "created_at": "2021-08-15T15:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634544",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:79'></a>Replying to [comment:76 mkoeppe]:
> No, I no longer think this is a Maxima bug.
> 
> I think it is a bug in our interface `sage.interfaces.maxima_abstract`. There are already two places that work around it (by using `equal`, `notequal`): `Expression._maxima_init_assume_` and `test_relation_maxima`.
> 


Indeed, the documentation is quite clear : `=` and `#` : //syntactic// (in)equality (i. e. isomorphic structures) ; `equal` and `unequal` : //value// (= structural) (in)equality.

This might be a heavy change. Separate ticket, separately tested ?



---

archive/issue_comments_634545.json:
```json
{
    "body": "<a id='comment:80'></a>Yes, I agree. There is a big potential for breakage. I've opened #32383 for it.",
    "created_at": "2021-08-15T16:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634545",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:80'></a>Yes, I agree. There is a big potential for breakage. I've opened #32383 for it.



---

archive/issue_comments_634546.json:
```json
{
    "body": "Changing dependencies from \"#32315, #31796, #32379\" to \"#32315, #31796, #32379, #32383\"",
    "created_at": "2021-08-15T16:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634546",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#32315, #31796, #32379" to "#32315, #31796, #32379, #32383"



---

archive/issue_comments_634547.json:
```json
{
    "body": "<a id='comment:81'></a>A possible plan B (independent of the Maxima snag) is to wrap Sympy's symbolic functions `And`, `Or` and `Not`, possibly leaving the logical operators to a later ticket. This is easy, the only problem being Maxima (1+back)translation, which you have solved.\n\nWrapping a Python method (imptementation of these functions in Sympy) shouldn't be as heavy as invoking a function in another interpreter : we stay in Python.\n\nThis is new functionality, after all : we don't (yet) have to worry about backwards compatibility. Introducing it with limited syntax (possibly extended later) isn't a drawback to anybody.\n\nThoughts ?",
    "created_at": "2021-08-15T16:12:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634547",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:81'></a>A possible plan B (independent of the Maxima snag) is to wrap Sympy's symbolic functions `And`, `Or` and `Not`, possibly leaving the logical operators to a later ticket. This is easy, the only problem being Maxima (1+back)translation, which you have solved.

Wrapping a Python method (imptementation of these functions in Sympy) shouldn't be as heavy as invoking a function in another interpreter : we stay in Python.

This is new functionality, after all : we don't (yet) have to worry about backwards compatibility. Introducing it with limited syntax (possibly extended later) isn't a drawback to anybody.

Thoughts ?



---

archive/issue_comments_634548.json:
```json
{
    "body": "<a id='comment:82'></a>Sympy translation already works, in both directions.",
    "created_at": "2021-08-15T16:23:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634548",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:82'></a>Sympy translation already works, in both directions.



---

archive/issue_comments_634549.json:
```json
{
    "body": "<a id='comment:83'></a>And there is no remaining issue with \"syntax\".",
    "created_at": "2021-08-15T16:25:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634549",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:83'></a>And there is no remaining issue with "syntax".



---

archive/issue_comments_634550.json:
```json
{
    "body": "Changing dependencies from \"#32315, #31796, #32379, #32383\" to \"#32315, #31796, #32383\"",
    "created_at": "2021-08-15T16:37:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634550",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#32315, #31796, #32379, #32383" to "#32315, #31796, #32383"



---

archive/issue_comments_634551.json:
```json
{
    "body": "Changing commit from \"392926c7577b0cbeb739fbe0eae5763dd1f9656d\" to \"0069e9c27af7060d531613a5562df4a8bddac3f4\"",
    "created_at": "2021-08-15T23:19:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634551",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "392926c7577b0cbeb739fbe0eae5763dd1f9656d" to "0069e9c27af7060d531613a5562df4a8bddac3f4"



---

archive/issue_comments_634552.json:
```json
{
    "body": "<a id='comment:85'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-15T23:19:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634552",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:85'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_634553.json:
```json
{
    "body": "<a id='comment:86'></a>This passes tests but will need more work:\n- without #32383, roundtripping through maxima is not safe\n- `Parser`: Use a `make_...` function instead of importing `and_symbolic` and hardcoding its use - so that the other uses of `Parser` are not affected\n- Add more documentation and tests\n- possibly create a direct conversion from `bool` to `SR` so that we get to see `False`/`True`, not `0`/`1`\n- various places, for example the `solve` method and global function, should be generalized so that they deal with (at least some) boolean symbolic expressions",
    "created_at": "2021-08-16T04:04:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634553",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:86'></a>This passes tests but will need more work:
- without #32383, roundtripping through maxima is not safe
- `Parser`: Use a `make_...` function instead of importing `and_symbolic` and hardcoding its use - so that the other uses of `Parser` are not affected
- Add more documentation and tests
- possibly create a direct conversion from `bool` to `SR` so that we get to see `False`/`True`, not `0`/`1`
- various places, for example the `solve` method and global function, should be generalized so that they deal with (at least some) boolean symbolic expressions



---

archive/issue_comments_634554.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-08-16T04:04:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634554",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_634555.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,10 @@\n+As proposed in https://groups.google.com/g/sage-devel/c/U_WGbYG2zOE/m/yq-EDEXDAgAJ\n \n+We add symbolic functions `and_symbolic`, `or_symbolic`, `not_symbolic`; the first two are also accessible by repurposing the operators bitwise-and `&` and bitwise-or `|`.\n+\n+By extending the expression parser to also handle `&` (equivalently, infix `and`), `|` (equivalently, infix `or`), and `~` (equivalently, prefix `not`), these constructions can also be obtained as a conversion from `maxima` and `giac` expression strings.\n+\n+One application is for the coordinate restrictions of a `Chart`.\n \n Comment: 1\n \n``````\n",
    "created_at": "2021-08-16T06:39:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634555",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,10 @@
+As proposed in https://groups.google.com/g/sage-devel/c/U_WGbYG2zOE/m/yq-EDEXDAgAJ
 
+We add symbolic functions `and_symbolic`, `or_symbolic`, `not_symbolic`; the first two are also accessible by repurposing the operators bitwise-and `&` and bitwise-or `|`.
+
+By extending the expression parser to also handle `&` (equivalently, infix `and`), `|` (equivalently, infix `or`), and `~` (equivalently, prefix `not`), these constructions can also be obtained as a conversion from `maxima` and `giac` expression strings.
+
+One application is for the coordinate restrictions of a `Chart`.
 
 Comment: 1
 
``````




---

archive/issue_events_084322.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31911#event-84322"
}
```



---

archive/issue_events_084323.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31911#event-84323"
}
```



---

archive/issue_comments_634556.json:
```json
{
    "body": "Changing dependencies from \"#32315, #31796, #32383\" to \"#32383\"",
    "created_at": "2022-02-03T18:43:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634556",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#32315, #31796, #32383" to "#32383"



---

archive/issue_comments_634557.json:
```json
{
    "body": "Changing commit from \"0069e9c27af7060d531613a5562df4a8bddac3f4\" to \"e9eac61a362a738322cbade296356c7d30b1bd7c\"",
    "created_at": "2022-02-03T18:46:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634557",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0069e9c27af7060d531613a5562df4a8bddac3f4" to "e9eac61a362a738322cbade296356c7d30b1bd7c"



---

archive/issue_comments_634558.json:
```json
{
    "body": "<a id='comment:90'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-02-03T18:46:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634558",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:90'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_634559.json:
```json
{
    "body": "<a id='comment:91'></a>Rebased.",
    "created_at": "2022-02-03T18:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31911#issuecomment-634559",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:91'></a>Rebased.



---

archive/issue_events_084324.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T01:55:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31911#event-84324"
}
```



---

archive/issue_events_084325.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T01:55:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31911#event-84325"
}
```



---

archive/issue_events_084326.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31911#event-84326"
}
```



---

archive/issue_events_084327.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31911",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31911#event-84327"
}
```
