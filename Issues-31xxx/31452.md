# Issue 31452: Problem with solution_dict in solve

archive/issues_031215.json:
```json
{
    "body": "This is with\n\n```\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 9.2, Release Date: 2020-10-24                     \u2502\n\u2502 Using Python 3.8.5. Type \"help()\" for help.                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n```\nAll of these work as expected:\n\n```                                                                                                                                            \nsage: solve(x==3,x)                                                                                                                                            \nsage: solve([x==3],x)                                                                                                                                          \nsage: solve([x==3],[x])                                                                                                                                        \nsage: solve(x==3,[x])                                                                                                                                          \nsage: solve(x==3,x,solution_dict=True)                                                                                                                         \nsage: solve([x==3],x,solution_dict=True)                                                                                                                       \n```\nSo I wonder why these give an error:\n\n```\nsage: solve(x==3,[x],solution_dict=True)                                                                                                                     \nsage: solve([x==3],[x],solution_dict=True)                                                                                                                     \n[...]\nTypeError: 'sage.symbolic.expression.Expression' object is not iterable\n```\nI am sure you have guessed:  I am trying to do this in a program where the number of equations and the number of variables are variable.\n\nIs it necessary to test for the case where there is only one variable?\nI hope not.\n\nCC:  @fchapoton\n\nBranch/Commit: 3c041875405b308975c53bd7782a001cfec7d0aa\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31452\n\n",
    "closed_at": "2021-05-27T20:29:09Z",
    "created_at": "2021-03-04T06:46:52Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Problem with solution_dict in solve",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31452",
    "user": "https://github.com/GMS103"
}
```
This is with

```
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 9.2, Release Date: 2020-10-24                     │
│ Using Python 3.8.5. Type "help()" for help.                        │
└────────────────────────────────────────────────────────────────────┘
```
All of these work as expected:

```                                                                                                                                            
sage: solve(x==3,x)                                                                                                                                            
sage: solve([x==3],x)                                                                                                                                          
sage: solve([x==3],[x])                                                                                                                                        
sage: solve(x==3,[x])                                                                                                                                          
sage: solve(x==3,x,solution_dict=True)                                                                                                                         
sage: solve([x==3],x,solution_dict=True)                                                                                                                       
```
So I wonder why these give an error:

```
sage: solve(x==3,[x],solution_dict=True)                                                                                                                     
sage: solve([x==3],[x],solution_dict=True)                                                                                                                     
[...]
TypeError: 'sage.symbolic.expression.Expression' object is not iterable
```
I am sure you have guessed:  I am trying to do this in a program where the number of equations and the number of variables are variable.

Is it necessary to test for the case where there is only one variable?
I hope not.

CC:  @fchapoton

Branch/Commit: 3c041875405b308975c53bd7782a001cfec7d0aa

Reviewer: Frédéric Chapoton

Author: Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31452





---

archive/issue_events_082560.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-10T17:42:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31452#event-82560"
}
```



---

archive/issue_comments_624935.json:
```json
{
    "body": "<a id='comment:1'></a>\nMoving to 9.4, as 9.3 has been released.",
    "created_at": "2021-05-10T17:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31452#issuecomment-624935",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
Moving to 9.4, as 9.3 has been released.



---

archive/issue_comments_624936.json:
```json
{
    "body": "Changing commit from \"\" to \"3c041875405b308975c53bd7782a001cfec7d0aa\"",
    "created_at": "2021-05-10T23:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31452#issuecomment-624936",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "" to "3c041875405b308975c53bd7782a001cfec7d0aa"



---

archive/issue_comments_624937.json:
```json
{
    "body": "Changing author from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2021-05-10T23:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31452#issuecomment-624937",
    "user": "https://github.com/tscrim"
}
```

Changing author from "" to "Travis Scrimshaw"



---

archive/issue_comments_624938.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-05-10T23:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31452#issuecomment-624938",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_624939.json:
```json
{
    "body": "<a id='comment:2'></a>\nSimple corner case. I also fix this while I am at it:\n\n```sage\nsage: solve([x==3], x, solution_dict=True, algorithm='sympy')                                             \n[x == 3]\nsage: solve([x==3, y==1], [x,y], solution_dict=True, algorithm='sympy')  # good\n[{x: 3, y: 1}]\n```\n\n---\nNew commits:\n|                                                                                                                                          |                                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|\n|[3c04187](https://git.sagemath.org/sage.git/commit?id=3c041875405b308975c53bd7782a001cfec7d0aa)|`Fixing single function and variable with solution_dict solve() corner case.`|",
    "created_at": "2021-05-10T23:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31452#issuecomment-624939",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>
Simple corner case. I also fix this while I am at it:

```sage
sage: solve([x==3], x, solution_dict=True, algorithm='sympy')                                             
[x == 3]
sage: solve([x==3, y==1], [x,y], solution_dict=True, algorithm='sympy')  # good
[{x: 3, y: 1}]
```

---
New commits:
|                                                                                                                                          |                                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
|[3c04187](https://git.sagemath.org/sage.git/commit?id=3c041875405b308975c53bd7782a001cfec7d0aa)|`Fixing single function and variable with solution_dict solve() corner case.`|



---

archive/issue_comments_624940.json:
```json
{
    "body": "Changing branch from \"\" to \"public/symbolics/solution_dict_list-31452\"",
    "created_at": "2021-05-10T23:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31452#issuecomment-624940",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "" to "public/symbolics/solution_dict_list-31452"



---

archive/issue_comments_624941.json:
```json
{
    "body": "<a id='comment:3'></a>\nBot is morally green.",
    "created_at": "2021-05-13T02:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31452#issuecomment-624941",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
Bot is morally green.



---

archive/issue_comments_624942.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2021-05-13T07:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31452#issuecomment-624942",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_624943.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-05-13T07:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31452#issuecomment-624943",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_624944.json:
```json
{
    "body": "<a id='comment:4'></a>\nok",
    "created_at": "2021-05-13T07:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31452#issuecomment-624944",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
ok



---

archive/issue_comments_624945.json:
```json
{
    "body": "<a id='comment:5'></a>\nThank you!",
    "created_at": "2021-05-13T08:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31452#issuecomment-624945",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
Thank you!



---

archive/issue_comments_624946.json:
```json
{
    "body": "<a id='comment:6'></a>\nWonderful!\n\nThanks to all of you!",
    "created_at": "2021-05-13T12:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31452#issuecomment-624946",
    "user": "https://github.com/GMS103"
}
```

<a id='comment:6'></a>
Wonderful!

Thanks to all of you!



---

archive/issue_comments_624947.json:
```json
{
    "body": "Changing branch from \"public/symbolics/solution_dict_list-31452\" to \"3c041875405b308975c53bd7782a001cfec7d0aa\"",
    "created_at": "2021-05-27T20:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31452#issuecomment-624947",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/symbolics/solution_dict_list-31452" to "3c041875405b308975c53bd7782a001cfec7d0aa"



---

archive/issue_events_082561.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-27T20:29:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31452#event-82561"
}
```



---

archive/issue_comments_624948.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-05-27T20:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31452#issuecomment-624948",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
