# Issue 31419: Update python to 3.9.2

archive/issues_031182.json:
```json
{
    "assignees": [],
    "body": "https://docs.python.org/3/whatsnew/changelog.html#python-3-9-2-final\n\nCC:  @kiwifb @antonio-rojas @slel\n\nKeywords: **upgrade, python**\n\nBranch/Commit: **[`5e810dd`](https://github.com/sagemath/sagetrac-mirror/commit/5e810dd712cb9a67007df6f37f4164af95da3ce6)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31419_\n\n",
    "closed_at": "2021-03-09T00:01:17Z",
    "created_at": "2021-02-20T16:33:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update python to 3.9.2",
    "type": "issue",
    "updated_at": "2021-03-09T00:01:17Z",
    "url": "https://github.com/sagemath/sage/issues/31419",
    "user": "https://github.com/mkoeppe"
}
```
https://docs.python.org/3/whatsnew/changelog.html#python-3-9-2-final

CC:  @kiwifb @antonio-rojas @slel

Keywords: **upgrade, python**

Branch/Commit: **[`5e810dd`](https://github.com/sagemath/sagetrac-mirror/commit/5e810dd712cb9a67007df6f37f4164af95da3ce6)**

Reviewer: **Dima Pasechnik**

Author: **Matthias Koeppe**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/31419_





---

archive/issue_events_433152.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-20T16:33:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31419#event-433152"
}
```



---

archive/issue_events_433153.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-20T16:33:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31419#event-433153"
}
```



---

archive/issue_events_433154.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-20T16:33:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31419#event-433154"
}
```



---

archive/issue_events_433155.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-20T16:33:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31419#event-433155"
}
```



---

archive/issue_comments_504609.json:
```json
{
    "body": "Branch: **[u/mkoeppe/update_python_to_3_9_2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_python_to_3_9_2)**",
    "created_at": "2021-02-20T16:53:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504609",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/update_python_to_3_9_2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_python_to_3_9_2)**



---

archive/issue_comments_504610.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2021-02-20T17:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504610",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_504611.json:
```json
{
    "body": "Commit: **[`5e810dd`](https://github.com/sagemath/sagetrac-mirror/commit/5e810dd712cb9a67007df6f37f4164af95da3ce6)**",
    "created_at": "2021-02-20T17:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504611",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`5e810dd`](https://github.com/sagemath/sagetrac-mirror/commit/5e810dd712cb9a67007df6f37f4164af95da3ce6)**



---

archive/issue_comments_504612.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e810dd712cb9a67007df6f37f4164af95da3ce6\">5e810dd</a></td><td><code>build/pkgs/python3: Update to 3.9.2</code></td></tr></table>\n",
    "created_at": "2021-02-20T17:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504612",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e810dd712cb9a67007df6f37f4164af95da3ce6">5e810dd</a></td><td><code>build/pkgs/python3: Update to 3.9.2</code></td></tr></table>




---

archive/issue_events_433156.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-20T17:00:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31419#event-433156"
}
```



---

archive/issue_comments_504613.json:
```json
{
    "body": "Reviewer: **https://github.com/mkoeppe/sage/actions/runs/584627033**",
    "created_at": "2021-02-20T17:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504613",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **https://github.com/mkoeppe/sage/actions/runs/584627033**



---

archive/issue_comments_504614.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/584627033** to **https://github.com/mkoeppe/sage/actions/runs/584631860**",
    "created_at": "2021-02-20T19:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504614",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/584627033** to **https://github.com/mkoeppe/sage/actions/runs/584631860**



---

archive/issue_comments_504615.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/584631860** to **https://github.com/mkoeppe/sage/actions/runs/584631860, ...**",
    "created_at": "2021-02-21T07:19:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504615",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/584631860** to **https://github.com/mkoeppe/sage/actions/runs/584631860, ...**



---

archive/issue_comments_504616.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nAny way to base this on top of #31344?",
    "created_at": "2021-02-21T08:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504616",
    "user": "https://github.com/slel"
}
```

<div id="comment:5" align="right">comment:5</div>

Any way to base this on top of #31344?



---

archive/issue_comments_504617.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSamuel, to test, you can just fetch the branch of that ticket using `git trac fetch 31344` and then merge it in, using `git merge FETCH_HEAD`.",
    "created_at": "2021-02-21T16:55:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504617",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Samuel, to test, you can just fetch the branch of that ticket using `git trac fetch 31344` and then merge it in, using `git merge FETCH_HEAD`.



---

archive/issue_comments_504618.json:
```json
{
    "body": "Changed keywords from none to **upgrade, python**",
    "created_at": "2021-02-24T11:45:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504618",
    "user": "https://github.com/slel"
}
```

Changed keywords from none to **upgrade, python**



---

archive/issue_comments_504619.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@mkoeppe](#comment:6):\n> Samuel, to test, you can just fetch the branch of that ticket using `git trac fetch 31344` and then merge it in, using `git merge FETCH_HEAD`.\n\nI tested as follows.\n\nSet up a new clone with tricks to save time and bandwidth:\n\n```\n$ ORIG=sage.git  # local mirror of https://github.com/sagemath/sage.git\n$ DEST=sage93c  # name for new clone\n$ UPST=$(pwd)/sage-upstream  # common upstream folder for several clones\n$ git clone --single-branch --branch develop --tags $ORIG $DEST  # clone locally\n$ cd $DEST\n$ ln -s $UPST ./upstream  # use common upstream folder to download less \n$ git remote add trac git://trac.sagemath.org/sage.git -t develop\n```\n\nFollow your advice:\n\n```\n$ git trac checkout 31419\n$ git trac fetch 31344\n$ git merge FETCH_HEAD\n```\n\nBuild and test:\n\n```\n$ source .homebrew-build-env\n$ ./bootstrap -q\n$ ./configure --enable-download-from-upstream-url -q\n$ make -s V=0\n$ make -s V=0 testlong\n```\n\nThe build succeeds but `make testlong` gives:\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/interfaces/singular.py  # Killed due to segmentation fault\nsage -t --long src/sage/interfaces/mwrank.py  # 4 doctests failed\nsage -t --long src/sage/interfaces/gap.py  # 7 doctests failed\n----------------------------------------------------------------------\n```\n\nWhen run again separately (with `./sage -t --long`), the tests\n\n- pass for `src/sage/interfaces/singular.py` and `src/sage/interfaces/mwrank.py`\n- keep failing for `src/sage/interfaces/gap.py`",
    "created_at": "2021-02-24T11:45:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504619",
    "user": "https://github.com/slel"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@mkoeppe](#comment:6):
> Samuel, to test, you can just fetch the branch of that ticket using `git trac fetch 31344` and then merge it in, using `git merge FETCH_HEAD`.

I tested as follows.

Set up a new clone with tricks to save time and bandwidth:

```
$ ORIG=sage.git  # local mirror of https://github.com/sagemath/sage.git
$ DEST=sage93c  # name for new clone
$ UPST=$(pwd)/sage-upstream  # common upstream folder for several clones
$ git clone --single-branch --branch develop --tags $ORIG $DEST  # clone locally
$ cd $DEST
$ ln -s $UPST ./upstream  # use common upstream folder to download less 
$ git remote add trac git://trac.sagemath.org/sage.git -t develop
```

Follow your advice:

```
$ git trac checkout 31419
$ git trac fetch 31344
$ git merge FETCH_HEAD
```

Build and test:

```
$ source .homebrew-build-env
$ ./bootstrap -q
$ ./configure --enable-download-from-upstream-url -q
$ make -s V=0
$ make -s V=0 testlong
```

The build succeeds but `make testlong` gives:

```
----------------------------------------------------------------------
sage -t --long src/sage/interfaces/singular.py  # Killed due to segmentation fault
sage -t --long src/sage/interfaces/mwrank.py  # 4 doctests failed
sage -t --long src/sage/interfaces/gap.py  # 7 doctests failed
----------------------------------------------------------------------
```

When run again separately (with `./sage -t --long`), the tests

- pass for `src/sage/interfaces/singular.py` and `src/sage/interfaces/mwrank.py`
- keep failing for `src/sage/interfaces/gap.py`



---

archive/issue_comments_504620.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI don't think these doctest failures are related to this update",
    "created_at": "2021-02-24T18:07:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504620",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

I don't think these doctest failures are related to this update



---

archive/issue_comments_504621.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@slel](#comment:7):\n> I tested as follows.\n> \n> Set up a new clone with tricks to save time and bandwidth:\n> \n> ```\n> $ ORIG=sage.git  # local mirror of https://github.com/sagemath/sage.git\n> $ DEST=sage93c  # name for new clone\n> ...\n> $ git clone --single-branch --branch develop --tags $ORIG $DEST  # clone locally\n> ```\n\nEven easier is to use `(cd $ORIG && git worktree add $DEST)`",
    "created_at": "2021-02-24T18:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504621",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@slel](#comment:7):
> I tested as follows.
> 
> Set up a new clone with tricks to save time and bandwidth:
> 
> ```
> $ ORIG=sage.git  # local mirror of https://github.com/sagemath/sage.git
> $ DEST=sage93c  # name for new clone
> ...
> $ git clone --single-branch --branch develop --tags $ORIG $DEST  # clone locally
> ```

Even easier is to use `(cd $ORIG && git worktree add $DEST)`



---

archive/issue_comments_504622.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nall good in view of \nhttps://github.com/mkoeppe/sage/actions/runs/584631860",
    "created_at": "2021-02-27T12:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504622",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

all good in view of 
https://github.com/mkoeppe/sage/actions/runs/584631860



---

archive/issue_comments_504623.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/584631860, ...** to **Dima Pasechnik**",
    "created_at": "2021-02-27T12:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504623",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/584631860, ...** to **Dima Pasechnik**



---

archive/issue_events_433157.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-02-27T12:39:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31419#event-433157"
}
```



---

archive/issue_events_433158.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-02-27T12:39:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31419#event-433158"
}
```



---

archive/issue_comments_504624.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThanks!",
    "created_at": "2021-02-27T18:28:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504624",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Thanks!



---

archive/issue_events_433159.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-09T00:01:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31419#event-433159"
}
```



---

archive/issue_events_433160.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e4f9c886eb1eb36806d76f546749eac6faed8791",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-03-09T00:01:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31419#event-433160"
}
```



---

archive/issue_comments_504625.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/update_python_to_3_9_2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_python_to_3_9_2)** to **[`5e810dd`](https://github.com/sagemath/sagetrac-mirror/commit/5e810dd712cb9a67007df6f37f4164af95da3ce6)**",
    "created_at": "2021-03-09T00:01:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31419#issuecomment-504625",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/update_python_to_3_9_2](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_python_to_3_9_2)** to **[`5e810dd`](https://github.com/sagemath/sagetrac-mirror/commit/5e810dd712cb9a67007df6f37f4164af95da3ce6)**
