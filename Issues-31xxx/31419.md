# Issue 31419: Update python to 3.9.2

archive/issues_031182.json:
```json
{
    "body": "https://docs.python.org/3/whatsnew/changelog.html#python-3-9-2-final\n\nCC:  @kiwifb @antonio-rojas @slel\n\nKeywords: upgrade, python\n\nBranch/Commit: 5e810dd712cb9a67007df6f37f4164af95da3ce6\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31419\n\n",
    "closed_at": "2021-03-09T00:01:17Z",
    "created_at": "2021-02-20T16:33:53Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Update python to 3.9.2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31419",
    "user": "https://github.com/mkoeppe"
}
```
https://docs.python.org/3/whatsnew/changelog.html#python-3-9-2-final

CC:  @kiwifb @antonio-rojas @slel

Keywords: upgrade, python

Branch/Commit: 5e810dd712cb9a67007df6f37f4164af95da3ce6

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31419





---

archive/issue_comments_616533.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/update_python_to_3_9_2\"",
    "created_at": "2021-02-20T16:53:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616533",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/update_python_to_3_9_2"



---

archive/issue_comments_616534.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-02-20T17:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616534",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_616535.json:
```json
{
    "body": "Changing commit from \"\" to \"5e810dd712cb9a67007df6f37f4164af95da3ce6\"",
    "created_at": "2021-02-20T17:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616535",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "5e810dd712cb9a67007df6f37f4164af95da3ce6"



---

archive/issue_comments_616536.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[5e810dd](https://github.com/sagemath/sagetrac-mirror/commit/5e810dd712cb9a67007df6f37f4164af95da3ce6)|`build/pkgs/python3: Update to 3.9.2`|",
    "created_at": "2021-02-20T17:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616536",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[5e810dd](https://github.com/sagemath/sagetrac-mirror/commit/5e810dd712cb9a67007df6f37f4164af95da3ce6)|`build/pkgs/python3: Update to 3.9.2`|



---

archive/issue_comments_616537.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-02-20T17:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616537",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_616538.json:
```json
{
    "body": "Changing reviewer from \"\" to \"https://github.com/mkoeppe/sage/actions/runs/584627033\"",
    "created_at": "2021-02-20T17:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616538",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "https://github.com/mkoeppe/sage/actions/runs/584627033"



---

archive/issue_comments_616539.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/mkoeppe/sage/actions/runs/584627033\" to \"https://github.com/mkoeppe/sage/actions/runs/584631860\"",
    "created_at": "2021-02-20T19:33:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616539",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "https://github.com/mkoeppe/sage/actions/runs/584627033" to "https://github.com/mkoeppe/sage/actions/runs/584631860"



---

archive/issue_comments_616540.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/mkoeppe/sage/actions/runs/584631860\" to \"https://github.com/mkoeppe/sage/actions/runs/584631860, ...\"",
    "created_at": "2021-02-21T07:19:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616540",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "https://github.com/mkoeppe/sage/actions/runs/584631860" to "https://github.com/mkoeppe/sage/actions/runs/584631860, ..."



---

archive/issue_comments_616541.json:
```json
{
    "body": "<a id='comment:5'></a>\nAny way to base this on top of #31344?",
    "created_at": "2021-02-21T08:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616541",
    "user": "https://github.com/slel"
}
```

<a id='comment:5'></a>
Any way to base this on top of #31344?



---

archive/issue_comments_616542.json:
```json
{
    "body": "<a id='comment:6'></a>\nSamuel, to test, you can just fetch the branch of that ticket using `git trac fetch 31344` and then merge it in, using `git merge FETCH_HEAD`.",
    "created_at": "2021-02-21T16:55:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616542",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Samuel, to test, you can just fetch the branch of that ticket using `git trac fetch 31344` and then merge it in, using `git merge FETCH_HEAD`.



---

archive/issue_comments_616543.json:
```json
{
    "body": "Changing keywords from \"\" to \"upgrade, python\".",
    "created_at": "2021-02-24T11:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616543",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "upgrade, python".



---

archive/issue_comments_616544.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [mkoeppe](#comment%3A6):\n> Samuel, to test, you can just fetch the branch of that ticket using `git trac fetch 31344` and then merge it in, using `git merge FETCH_HEAD`.\n\n\nI tested as follows.\n\nSet up a new clone with tricks to save time and bandwidth:\n\n```\n$ ORIG=sage.git  # local mirror of https://github.com/sagemath/sage.git\n$ DEST=sage93c  # name for new clone\n$ UPST=$(pwd)/sage-upstream  # common upstream folder for several clones\n$ git clone --single-branch --branch develop --tags $ORIG $DEST  # clone locally\n$ cd $DEST\n$ ln -s $UPST ./upstream  # use common upstream folder to download less \n$ git remote add trac git://trac.sagemath.org/sage.git -t develop\n```\n\nFollow your advice:\n\n```\n$ git trac checkout 31419\n$ git trac fetch 31344\n$ git merge FETCH_HEAD\n```\n\nBuild and test:\n\n```\n$ source .homebrew-build-env\n$ ./bootstrap -q\n$ ./configure --enable-download-from-upstream-url -q\n$ make -s V=0\n$ make -s V=0 testlong\n```\n\nThe build succeeds but `make testlong` gives:\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/interfaces/singular.py  # Killed due to segmentation fault\nsage -t --long src/sage/interfaces/mwrank.py  # 4 doctests failed\nsage -t --long src/sage/interfaces/gap.py  # 7 doctests failed\n----------------------------------------------------------------------\n```\n\nWhen run again separately (with `./sage -t --long`), the tests\n\n- pass for `src/sage/interfaces/singular.py` and `src/sage/interfaces/mwrank.py`\n- keep failing for `src/sage/interfaces/gap.py`",
    "created_at": "2021-02-24T11:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616544",
    "user": "https://github.com/slel"
}
```

<a id='comment:7'></a>
Replying to [mkoeppe](#comment%3A6):
> Samuel, to test, you can just fetch the branch of that ticket using `git trac fetch 31344` and then merge it in, using `git merge FETCH_HEAD`.


I tested as follows.

Set up a new clone with tricks to save time and bandwidth:

```
$ ORIG=sage.git  # local mirror of https://github.com/sagemath/sage.git
$ DEST=sage93c  # name for new clone
$ UPST=$(pwd)/sage-upstream  # common upstream folder for several clones
$ git clone --single-branch --branch develop --tags $ORIG $DEST  # clone locally
$ cd $DEST
$ ln -s $UPST ./upstream  # use common upstream folder to download less 
$ git remote add trac git://trac.sagemath.org/sage.git -t develop
```

Follow your advice:

```
$ git trac checkout 31419
$ git trac fetch 31344
$ git merge FETCH_HEAD
```

Build and test:

```
$ source .homebrew-build-env
$ ./bootstrap -q
$ ./configure --enable-download-from-upstream-url -q
$ make -s V=0
$ make -s V=0 testlong
```

The build succeeds but `make testlong` gives:

```
----------------------------------------------------------------------
sage -t --long src/sage/interfaces/singular.py  # Killed due to segmentation fault
sage -t --long src/sage/interfaces/mwrank.py  # 4 doctests failed
sage -t --long src/sage/interfaces/gap.py  # 7 doctests failed
----------------------------------------------------------------------
```

When run again separately (with `./sage -t --long`), the tests

- pass for `src/sage/interfaces/singular.py` and `src/sage/interfaces/mwrank.py`
- keep failing for `src/sage/interfaces/gap.py`



---

archive/issue_comments_616545.json:
```json
{
    "body": "<a id='comment:8'></a>\nI don't think these doctest failures are related to this update",
    "created_at": "2021-02-24T18:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616545",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
I don't think these doctest failures are related to this update



---

archive/issue_comments_616546.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [slelievre](#comment%3A7):\n> I tested as follows.\n> \n> Set up a new clone with tricks to save time and bandwidth:\n> \n> ```\n> $ ORIG=sage.git  # local mirror of https://github.com/sagemath/sage.git\n> $ DEST=sage93c  # name for new clone\n> ...\n> $ git clone --single-branch --branch develop --tags $ORIG $DEST  # clone locally\n\n\nEven easier is to use `(cd $ORIG && git worktree add $DEST)`",
    "created_at": "2021-02-24T18:10:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616546",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Replying to [slelievre](#comment%3A7):
> I tested as follows.
> 
> Set up a new clone with tricks to save time and bandwidth:
> 
> ```
> $ ORIG=sage.git  # local mirror of https://github.com/sagemath/sage.git
> $ DEST=sage93c  # name for new clone
> ...
> $ git clone --single-branch --branch develop --tags $ORIG $DEST  # clone locally


Even easier is to use `(cd $ORIG && git worktree add $DEST)`



---

archive/issue_comments_616547.json:
```json
{
    "body": "<a id='comment:10'></a>\nall good in view of \nhttps://github.com/mkoeppe/sage/actions/runs/584631860",
    "created_at": "2021-02-27T12:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616547",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>
all good in view of 
https://github.com/mkoeppe/sage/actions/runs/584631860



---

archive/issue_comments_616548.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/mkoeppe/sage/actions/runs/584631860, ...\" to \"Dima Pasechnik\"",
    "created_at": "2021-02-27T12:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616548",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "https://github.com/mkoeppe/sage/actions/runs/584631860, ..." to "Dima Pasechnik"



---

archive/issue_comments_616549.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-02-27T12:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616549",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_616550.json:
```json
{
    "body": "<a id='comment:11'></a>\nThanks!",
    "created_at": "2021-02-27T18:28:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616550",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Thanks!



---

archive/issue_comments_616551.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-03-09T00:01:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616551",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_100686.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-09T00:01:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31419#event-100686"
}
```



---

archive/issue_comments_616552.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/update_python_to_3_9_2\" to \"5e810dd712cb9a67007df6f37f4164af95da3ce6\"",
    "created_at": "2021-03-09T00:01:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31419",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31419#issuecomment-616552",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/update_python_to_3_9_2" to "5e810dd712cb9a67007df6f37f4164af95da3ce6"
