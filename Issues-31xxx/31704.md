# Issue 31704: Remove Python 2 compatibility from manifolds

archive/issues_031467.json:
```json
{
    "body": "Currently, the manifolds code has still things like\n\n```python\n__nonzero__ = __bool__  # For Python2 compatibility\n```\n\nwhich should be removed by now.\n\nCC:  @egourgoulhon @tscrim\n\nBranch/Commit: b027f2d1a4bb09b93e72c6c97f2ab739ddafd70c\n\nReviewer: Michael Jung\n\nAuthor: Eric Gourgoulhon\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31704\n\n",
    "closed_at": "2021-06-19T20:58:18Z",
    "created_at": "2021-04-20T14:14:51Z",
    "labels": [
        "component: manifolds",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Remove Python 2 compatibility from manifolds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31704",
    "user": "https://github.com/mjungmath"
}
```
Currently, the manifolds code has still things like

```python
__nonzero__ = __bool__  # For Python2 compatibility
```

which should be removed by now.

CC:  @egourgoulhon @tscrim

Branch/Commit: b027f2d1a4bb09b93e72c6c97f2ab739ddafd70c

Reviewer: Michael Jung

Author: Eric Gourgoulhon

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31704





---

archive/issue_comments_631115.json:
```json
{
    "body": "Changing author from \"\" to \"Eric Gourgoulhon\"",
    "created_at": "2021-04-21T07:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631115",
    "user": "https://github.com/egourgoulhon"
}
```

Changing author from "" to "Eric Gourgoulhon"



---

archive/issue_comments_631116.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-04-21T07:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631116",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_631117.json:
```json
{
    "body": "Changing branch from \"\" to \"public/manifolds/remove_python2_compatibility-31704\"",
    "created_at": "2021-04-21T07:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631117",
    "user": "https://github.com/egourgoulhon"
}
```

Changing branch from "" to "public/manifolds/remove_python2_compatibility-31704"



---

archive/issue_comments_631118.json:
```json
{
    "body": "<a id='comment:1'></a>\nThanks for catching this. Here we go...\n\n---\nNew commits:\n|                                                                                                                                          |                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[0aefe52](https://github.com/sagemath/sagetrac-mirror/commit/0aefe529a51100b5870194aeb767e3cc7a2cade5)|`Remove __nonzero__ from manifolds`|",
    "created_at": "2021-04-21T07:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631118",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:1'></a>
Thanks for catching this. Here we go...

---
New commits:
|                                                                                                                                          |                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[0aefe52](https://github.com/sagemath/sagetrac-mirror/commit/0aefe529a51100b5870194aeb767e3cc7a2cade5)|`Remove __nonzero__ from manifolds`|



---

archive/issue_comments_631119.json:
```json
{
    "body": "Changing commit from \"\" to \"0aefe529a51100b5870194aeb767e3cc7a2cade5\"",
    "created_at": "2021-04-21T07:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631119",
    "user": "https://github.com/egourgoulhon"
}
```

Changing commit from "" to "0aefe529a51100b5870194aeb767e3cc7a2cade5"



---

archive/issue_comments_631120.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Michael Jung\"",
    "created_at": "2021-04-21T13:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631120",
    "user": "https://github.com/mjungmath"
}
```

Changing reviewer from "" to "Michael Jung"



---

archive/issue_comments_631121.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-04-21T13:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631121",
    "user": "https://github.com/mjungmath"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_631122.json:
```json
{
    "body": "<a id='comment:2'></a>\nLGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:\n\n```python\nif basis is None: basis = self._fmodule._def_basis\n```\n\nShould we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?",
    "created_at": "2021-04-21T13:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631122",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:2'></a>
LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:

```python
if basis is None: basis = self._fmodule._def_basis
```

Should we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?



---

archive/issue_comments_631123.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-04-21T15:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631123",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_631124.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n|                                                                                                                                           |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[b027f2d](https://github.com/sagemath/sagetrac-mirror/commit/b027f2d1a4bb09b93e72c6c97f2ab739ddafd70c)|`Correct pycodestyle error`|",
    "created_at": "2021-04-21T15:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631124",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
|                                                                                                                                           |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[b027f2d](https://github.com/sagemath/sagetrac-mirror/commit/b027f2d1a4bb09b93e72c6c97f2ab739ddafd70c)|`Correct pycodestyle error`|



---

archive/issue_comments_631125.json:
```json
{
    "body": "Changing commit from \"0aefe529a51100b5870194aeb767e3cc7a2cade5\" to \"b027f2d1a4bb09b93e72c6c97f2ab739ddafd70c\"",
    "created_at": "2021-04-21T15:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631125",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0aefe529a51100b5870194aeb767e3cc7a2cade5" to "b027f2d1a4bb09b93e72c6c97f2ab739ddafd70c"



---

archive/issue_comments_631126.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [gh-mjungmath](#comment%3A2):\n> LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:\n> \n> \n> ```python\n> if basis is None: basis = self._fmodule._def_basis\n> ```\n> \n> Should we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?\n\n\nYou're right; let's fix it here (cf. the latest commit).",
    "created_at": "2021-04-21T15:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631126",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:4'></a>
Replying to [gh-mjungmath](#comment%3A2):
> LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:
> 
> 
> ```python
> if basis is None: basis = self._fmodule._def_basis
> ```
> 
> Should we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?


You're right; let's fix it here (cf. the latest commit).



---

archive/issue_comments_631127.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-04-21T17:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631127",
    "user": "https://github.com/mjungmath"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_631128.json:
```json
{
    "body": "<a id='comment:5'></a>\nMorally green. LGTM.",
    "created_at": "2021-04-21T17:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631128",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:5'></a>
Morally green. LGTM.



---

archive/issue_comments_631129.json:
```json
{
    "body": "Changing branch from \"public/manifolds/remove_python2_compatibility-31704\" to \"b027f2d1a4bb09b93e72c6c97f2ab739ddafd70c\"",
    "created_at": "2021-06-19T20:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631129",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/manifolds/remove_python2_compatibility-31704" to "b027f2d1a4bb09b93e72c6c97f2ab739ddafd70c"



---

archive/issue_events_094090.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-19T20:58:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31704#event-94090"
}
```



---

archive/issue_comments_631130.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-19T20:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-631130",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
