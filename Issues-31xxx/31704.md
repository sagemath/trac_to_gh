# Issue 31704: Remove Python 2 compatibility from manifolds

archive/issues_031467.json:
```json
{
    "body": "Currently, the manifolds code has still things like\n\n```python\n__nonzero__ = __bool__  # For Python2 compatibility\n```\n\nwhich should be removed by now.\n\nCC:  @egourgoulhon @tscrim\n\nBranch/Commit: b027f2d1a4bb09b93e72c6c97f2ab739ddafd70c\n\nReviewer: Michael Jung\n\nAuthor: Eric Gourgoulhon\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31704\n\n",
    "closed_at": "2021-06-19T20:58:18Z",
    "created_at": "2021-04-20T14:14:51Z",
    "labels": [
        "component: manifolds",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Remove Python 2 compatibility from manifolds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31704",
    "user": "https://github.com/mjungmath"
}
```
Currently, the manifolds code has still things like

```python
__nonzero__ = __bool__  # For Python2 compatibility
```

which should be removed by now.

CC:  @egourgoulhon @tscrim

Branch/Commit: b027f2d1a4bb09b93e72c6c97f2ab739ddafd70c

Reviewer: Michael Jung

Author: Eric Gourgoulhon

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31704





---

archive/issue_comments_480462.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-04-21T07:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-480462",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_480463.json:
```json
{
    "body": "<a id='comment:1'></a>Thanks for catching this. Here we go...\n\n---\nNew commits:",
    "created_at": "2021-04-21T07:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-480463",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:1'></a>Thanks for catching this. Here we go...

---
New commits:



---

archive/issue_comments_480464.json:
```json
{
    "body": "Changing type from task to defect.",
    "created_at": "2021-04-21T07:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-480464",
    "user": "https://github.com/egourgoulhon"
}
```

Changing type from task to defect.



---

archive/issue_comments_480465.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-04-21T13:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-480465",
    "user": "https://github.com/mjungmath"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_480466.json:
```json
{
    "body": "<a id='comment:2'></a>LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:\n\n```python\nif basis is None: basis = self._fmodule._def_basis\n```\n\nShould we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?",
    "created_at": "2021-04-21T13:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-480466",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:2'></a>LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:

```python
if basis is None: basis = self._fmodule._def_basis
```

Should we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?



---

archive/issue_comments_480467.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-04-21T15:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-480467",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_480468.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2021-04-21T15:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-480468",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_480469.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:2 gh-mjungmath]:\n> LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:\n> \n> \n> ```python\n> if basis is None: basis = self._fmodule._def_basis\n> ```\n> \n> Should we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?\n\n\nYou're right; let's fix it here (cf. the latest commit).",
    "created_at": "2021-04-21T15:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-480469",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:4'></a>Replying to [comment:2 gh-mjungmath]:
> LGTM. Morally green patchbot. The cause of that pyflakes error is in line 1507 of `free_module_tensor.py`:
> 
> 
> ```python
> if basis is None: basis = self._fmodule._def_basis
> ```
> 
> Should we fix this in another ticket just to get rid of this annoying error whenever we play around with `free_module_tensor.py`...?


You're right; let's fix it here (cf. the latest commit).



---

archive/issue_comments_480470.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-04-21T17:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-480470",
    "user": "https://github.com/mjungmath"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_480471.json:
```json
{
    "body": "<a id='comment:5'></a>Morally green. LGTM.",
    "created_at": "2021-04-21T17:32:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-480471",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:5'></a>Morally green. LGTM.



---

archive/issue_events_083588.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-19T20:58:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31704#event-83588"
}
```



---

archive/issue_comments_480472.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-19T20:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31704#issuecomment-480472",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
