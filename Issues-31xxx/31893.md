# Issue 31893: Fix timeout in sageinspect.py tests

archive/issues_031656.json:
```json
{
    "body": "I was browsing https://github.com/sagemath/sage/actions\nand noticed a lot of\n\n```\nsage -t --random-seed=0 src/sage/misc/sageinspect.py\n    Timed out\n```\nin many logs of **Run SAGE_ROOT/tox.ini**\n\nWe improve and significantly speed up one doctest,\nthereby fixing these timeouts.\n\nBefore:\n\n```\nsage -t --long --random-seed=0 src/sage/misc/sageinspect.py\n    [340 tests, 158.98 s]\n```\nAfter:\n\n```\nsage -t --long --random-seed=0 src/sage/misc/sageinspect.py\n    [340 tests, 34.82 s]\n```\n\nCC:  @slel\n\nKeywords: timeout, speed\n\nBranch/Commit: [f0dbc77d0b5ec3c2f0c58d30e2e2d323402e51ee](https://github.com/sagemath/sagetrac-mirror/commit/f0dbc77d0b5ec3c2f0c58d30e2e2d323402e51ee)\n\nReviewer: Samuel Leli\u00e8vre\n\nAuthor: Andrey Belgorodski\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31893\n\n",
    "closed_at": "2021-06-19T20:58:47Z",
    "created_at": "2021-06-01T13:50:22Z",
    "labels": [
        "component: performance",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Fix timeout in sageinspect.py tests",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31893",
    "user": "https://github.com/sheerluck"
}
```
I was browsing https://github.com/sagemath/sage/actions
and noticed a lot of

```
sage -t --random-seed=0 src/sage/misc/sageinspect.py
    Timed out
```
in many logs of **Run SAGE_ROOT/tox.ini**

We improve and significantly speed up one doctest,
thereby fixing these timeouts.

Before:

```
sage -t --long --random-seed=0 src/sage/misc/sageinspect.py
    [340 tests, 158.98 s]
```
After:

```
sage -t --long --random-seed=0 src/sage/misc/sageinspect.py
    [340 tests, 34.82 s]
```

CC:  @slel

Keywords: timeout, speed

Branch/Commit: [f0dbc77d0b5ec3c2f0c58d30e2e2d323402e51ee](https://github.com/sagemath/sagetrac-mirror/commit/f0dbc77d0b5ec3c2f0c58d30e2e2d323402e51ee)

Reviewer: Samuel Lelièvre

Author: Andrey Belgorodski

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31893





---

archive/issue_comments_634127.json:
```json
{
    "body": "<a id='comment:1'></a>\nNice!  If ready for review, please add\nauthor full name and set to needs-review.",
    "created_at": "2021-06-01T15:25:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-634127",
    "user": "https://github.com/slel"
}
```

<a id='comment:1'></a>
Nice!  If ready for review, please add
author full name and set to needs-review.



---

archive/issue_comments_634128.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-06-01T15:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-634128",
    "user": "https://github.com/sheerluck"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_634129.json:
```json
{
    "body": "Changing author from \"\" to \"Andrey Belgorodski\"",
    "created_at": "2021-06-01T15:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-634129",
    "user": "https://github.com/sheerluck"
}
```

Changing author from "" to "Andrey Belgorodski"



---

archive/issue_comments_634130.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-01T15:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-634130",
    "user": "https://github.com/slel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_634131.json:
```json
{
    "body": "<a id='comment:3'></a>\nFantastic.",
    "created_at": "2021-06-01T15:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-634131",
    "user": "https://github.com/slel"
}
```

<a id='comment:3'></a>
Fantastic.



---

archive/issue_comments_634132.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n-I was browsing https://github.com/sagemath/sage/actions and noticed a lot of\n+I was browsing https://github.com/sagemath/sage/actions\n+and noticed a lot of\n \n ```\n sage -t --random-seed=0 src/sage/misc/sageinspect.py\n@@ -6,15 +7,16 @@\n ```\n in many logs of **Run SAGE_ROOT/tox.ini**\n \n-I prepared a solution for that in \u00abu/gh-sheerluck/sageinspect_timed_out\u00bb branch\n+We improve and significantly speed up one doctest,\n+thereby fixing these timeouts.\n \n-before:\n+Before:\n \n ```\n sage -t --long --random-seed=0 src/sage/misc/sageinspect.py\n     [340 tests, 158.98 s]\n ```\n-after:\n+After:\n \n ```\n sage -t --long --random-seed=0 src/sage/misc/sageinspect.py\n``````\n",
    "created_at": "2021-06-01T15:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-634132",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,5 @@
-I was browsing https://github.com/sagemath/sage/actions and noticed a lot of
+I was browsing https://github.com/sagemath/sage/actions
+and noticed a lot of
 
 ```
 sage -t --random-seed=0 src/sage/misc/sageinspect.py
@@ -6,15 +7,16 @@
 ```
 in many logs of **Run SAGE_ROOT/tox.ini**
 
-I prepared a solution for that in «u/gh-sheerluck/sageinspect_timed_out» branch
+We improve and significantly speed up one doctest,
+thereby fixing these timeouts.
 
-before:
+Before:
 
 ```
 sage -t --long --random-seed=0 src/sage/misc/sageinspect.py
     [340 tests, 158.98 s]
 ```
-after:
+After:
 
 ```
 sage -t --long --random-seed=0 src/sage/misc/sageinspect.py
``````




---

archive/issue_comments_634133.json:
```json
{
    "body": "Changing keywords from \"\" to \"timeout, speed\".",
    "created_at": "2021-06-01T15:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-634133",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "timeout, speed".



---

archive/issue_events_094803.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "rename": {
        "from": "fix for \"sageinspect.py: Timed out\"",
        "to": "Fix timeout in sageinspect.py tests"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31893#event-94803"
}
```



---

archive/issue_comments_634134.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Samuel Leli\u00e8vre\"",
    "created_at": "2021-06-01T15:38:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-634134",
    "user": "https://github.com/slel"
}
```

Changing reviewer from "" to "Samuel Lelièvre"



---

archive/issue_comments_634135.json:
```json
{
    "body": "<a id='comment:5'></a>\nseriously, guys, every time you run https://github.com/username/sage/actions/ without this branch merged in `develop`, one little kitten dies somewhere :-(\nPlease merge this branch in `develop` as soon as it is possible.",
    "created_at": "2021-06-07T08:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-634135",
    "user": "https://github.com/sheerluck"
}
```

<a id='comment:5'></a>
seriously, guys, every time you run https://github.com/username/sage/actions/ without this branch merged in `develop`, one little kitten dies somewhere :-(
Please merge this branch in `develop` as soon as it is possible.



---

archive/issue_comments_634136.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [gh-sheerluck](#comment%3A5):\n> seriously, guys, every time you run https://github.com/username/sage/actions/ without this branch merged in `develop`, one little kitten dies somewhere :-(\n> Please merge this branch in `develop` as soon as it is possible.\n\n\nWell, some tickets have been waiting in positive review state since 2 months.",
    "created_at": "2021-06-07T09:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-634136",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
Replying to [gh-sheerluck](#comment%3A5):
> seriously, guys, every time you run https://github.com/username/sage/actions/ without this branch merged in `develop`, one little kitten dies somewhere :-(
> Please merge this branch in `develop` as soon as it is possible.


Well, some tickets have been waiting in positive review state since 2 months.



---

archive/issue_comments_634137.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-19T20:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-634137",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_094804.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-19T20:58:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31893#event-94804"
}
```



---

archive/issue_comments_634138.json:
```json
{
    "body": "Changing branch from \"u/gh-sheerluck/sageinspect_timed_out\" to \"f0dbc77d0b5ec3c2f0c58d30e2e2d323402e51ee\"",
    "created_at": "2021-06-19T20:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-634138",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-sheerluck/sageinspect_timed_out" to "f0dbc77d0b5ec3c2f0c58d30e2e2d323402e51ee"
