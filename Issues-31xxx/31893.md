# Issue 31893: Fix timeout in sageinspect.py tests

archive/issues_031656.json:
```json
{
    "body": "I was browsing https://github.com/sagemath/sage/actions\nand noticed a lot of\n\n```\nsage -t --random-seed=0 src/sage/misc/sageinspect.py\n    Timed out\n```\nin many logs of **Run SAGE_ROOT/tox.ini**\n\nWe improve and significantly speed up one doctest,\nthereby fixing these timeouts.\n\nBefore:\n\n```\nsage -t --long --random-seed=0 src/sage/misc/sageinspect.py\n    [340 tests, 158.98 s]\n```\nAfter:\n\n```\nsage -t --long --random-seed=0 src/sage/misc/sageinspect.py\n    [340 tests, 34.82 s]\n```\n\nCC:  @slel\n\nKeywords: timeout, speed\n\nBranch/Commit: f0dbc77d0b5ec3c2f0c58d30e2e2d323402e51ee\n\nReviewer: Samuel Leli\u00e8vre\n\nAuthor: Andrey Belgorodski\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31893\n\n",
    "closed_at": "2021-06-19T20:58:47Z",
    "created_at": "2021-06-01T13:50:22Z",
    "labels": [
        "component: performance",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Fix timeout in sageinspect.py tests",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31893",
    "user": "https://github.com/sheerluck"
}
```
I was browsing https://github.com/sagemath/sage/actions
and noticed a lot of

```
sage -t --random-seed=0 src/sage/misc/sageinspect.py
    Timed out
```
in many logs of **Run SAGE_ROOT/tox.ini**

We improve and significantly speed up one doctest,
thereby fixing these timeouts.

Before:

```
sage -t --long --random-seed=0 src/sage/misc/sageinspect.py
    [340 tests, 158.98 s]
```
After:

```
sage -t --long --random-seed=0 src/sage/misc/sageinspect.py
    [340 tests, 34.82 s]
```

CC:  @slel

Keywords: timeout, speed

Branch/Commit: f0dbc77d0b5ec3c2f0c58d30e2e2d323402e51ee

Reviewer: Samuel Lelièvre

Author: Andrey Belgorodski

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31893





---

archive/issue_comments_633862.json:
```json
{
    "body": "<a id='comment:1'></a>Nice!  If ready for review, please add\nauthor full name and set to needs-review.",
    "created_at": "2021-06-01T15:25:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-633862",
    "user": "https://github.com/slel"
}
```

<a id='comment:1'></a>Nice!  If ready for review, please add
author full name and set to needs-review.



---

archive/issue_comments_633863.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-06-01T15:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-633863",
    "user": "https://github.com/sheerluck"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_633864.json:
```json
{
    "body": "Changing author from \"\" to \"Andrey Belgorodski\"",
    "created_at": "2021-06-01T15:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-633864",
    "user": "https://github.com/sheerluck"
}
```

Changing author from "" to "Andrey Belgorodski"



---

archive/issue_comments_633865.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-01T15:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-633865",
    "user": "https://github.com/slel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_633866.json:
```json
{
    "body": "<a id='comment:3'></a>Fantastic.",
    "created_at": "2021-06-01T15:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-633866",
    "user": "https://github.com/slel"
}
```

<a id='comment:3'></a>Fantastic.



---

archive/issue_comments_633867.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n-I was browsing https://github.com/sagemath/sage/actions and noticed a lot of\n+I was browsing https://github.com/sagemath/sage/actions\n+and noticed a lot of\n \n ```\n sage -t --random-seed=0 src/sage/misc/sageinspect.py\n@@ -6,15 +7,16 @@\n ```\n in many logs of **Run SAGE_ROOT/tox.ini**\n \n-I prepared a solution for that in \u00abu/gh-sheerluck/sageinspect_timed_out\u00bb branch\n+We improve and significantly speed up one doctest,\n+thereby fixing these timeouts.\n \n-before:\n+Before:\n \n ```\n sage -t --long --random-seed=0 src/sage/misc/sageinspect.py\n     [340 tests, 158.98 s]\n ```\n-after:\n+After:\n \n ```\n sage -t --long --random-seed=0 src/sage/misc/sageinspect.py\n``````\n",
    "created_at": "2021-06-01T15:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-633867",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,5 @@
-I was browsing https://github.com/sagemath/sage/actions and noticed a lot of
+I was browsing https://github.com/sagemath/sage/actions
+and noticed a lot of
 
 ```
 sage -t --random-seed=0 src/sage/misc/sageinspect.py
@@ -6,15 +7,16 @@
 ```
 in many logs of **Run SAGE_ROOT/tox.ini**
 
-I prepared a solution for that in «u/gh-sheerluck/sageinspect_timed_out» branch
+We improve and significantly speed up one doctest,
+thereby fixing these timeouts.
 
-before:
+Before:
 
 ```
 sage -t --long --random-seed=0 src/sage/misc/sageinspect.py
     [340 tests, 158.98 s]
 ```
-after:
+After:
 
 ```
 sage -t --long --random-seed=0 src/sage/misc/sageinspect.py
``````




---

archive/issue_comments_633868.json:
```json
{
    "body": "Changing keywords from \"\" to \"timeout, speed\".",
    "created_at": "2021-06-01T15:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-633868",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "timeout, speed".



---

archive/issue_comments_633869.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2021-06-01T15:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-633869",
    "user": "https://github.com/slel"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_633870.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Samuel Leli\u00e8vre\"",
    "created_at": "2021-06-01T15:38:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-633870",
    "user": "https://github.com/slel"
}
```

Changing reviewer from "" to "Samuel Lelièvre"



---

archive/issue_comments_633871.json:
```json
{
    "body": "<a id='comment:5'></a>seriously, guys, every time you run https://github.com/username/sage/actions/ without this branch merged in `develop`, one little kitten dies somewhere :-(\nPlease merge this branch in `develop` as soon as it is possible.",
    "created_at": "2021-06-07T08:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-633871",
    "user": "https://github.com/sheerluck"
}
```

<a id='comment:5'></a>seriously, guys, every time you run https://github.com/username/sage/actions/ without this branch merged in `develop`, one little kitten dies somewhere :-(
Please merge this branch in `develop` as soon as it is possible.



---

archive/issue_comments_633872.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 gh-sheerluck]:\n> seriously, guys, every time you run https://github.com/username/sage/actions/ without this branch merged in `develop`, one little kitten dies somewhere :-(\n> Please merge this branch in `develop` as soon as it is possible.\n\n\nWell, some tickets have been waiting in positive review state since 2 months.",
    "created_at": "2021-06-07T09:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-633872",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>Replying to [comment:5 gh-sheerluck]:
> seriously, guys, every time you run https://github.com/username/sage/actions/ without this branch merged in `develop`, one little kitten dies somewhere :-(
> Please merge this branch in `develop` as soon as it is possible.


Well, some tickets have been waiting in positive review state since 2 months.



---

archive/issue_comments_633873.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2021-06-07T09:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-633873",
    "user": "https://github.com/fchapoton"
}
```

Changing priority from major to critical.



---

archive/issue_comments_633874.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-19T20:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-633874",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_084258.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-19T20:58:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31893#event-84258"
}
```



---

archive/issue_comments_633875.json:
```json
{
    "body": "Changing branch from \"u/gh-sheerluck/sageinspect_timed_out\" to \"f0dbc77d0b5ec3c2f0c58d30e2e2d323402e51ee\"",
    "created_at": "2021-06-19T20:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31893",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31893#issuecomment-633875",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-sheerluck/sageinspect_timed_out" to "f0dbc77d0b5ec3c2f0c58d30e2e2d323402e51ee"
