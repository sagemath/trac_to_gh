# Issue 31233: Categories for Homset of Manifolds do not meet

archive/issues_030996.json:
```json
{
    "body": "Here is a minimal example:\n\n```\nsage: R3 = EuclideanSpace(3) \n....: S2 = R3.sphere(coordinates='stereographic'); S2                           \n2-sphere S^2 of radius 1 smoothly embedded in the Euclidean space E^3                                                   \nsage: I = S2.identity_map()                                                     \nsage: iota = S2.embedding()                                                     \nsage: iota * I                                                                  \n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-5-2ed3e7f8e656> in <module>\n----> 1 iota * I\n\n~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/map.pyx in sage.categories.map.Map.__mul__ (build/cythonized/sage/categories/map.c:7680)()\n    895         if right.codomain() != self.domain():\n    896             raise TypeError(\"self (=%s) domain must equal right (=%s) codomain\" % (self, right))\n--> 897         return self._composition(right)\n    898 \n    899     def _composition(self, right):\n\n~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/map.pyx in sage.categories.map.Map._composition (build/cythonized/sage/categories/map.c:7854)()\n    935         \"\"\"\n    936         category = self.category_for()._meet_(right.category_for())\n--> 937         H = homset.Hom(right.domain(), self._codomain, category)\n    938         return self._composition_(right, H)\n    939 \n\n~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/homset.py in Hom(X, Y, category, check)\n    416                     # available for the following error message. It simply\n    417                     # belongs to the wrong category.\n--> 418                     raise ValueError(\"{} is not in {}\".format(O, category))\n    419 \n    420         # Construct H\n\nValueError: Euclidean space E^3 is not in Join of Category of compact topological spaces and Category of smooth manifolds over Real Field with 53 bits of precision and Category of complete metric spaces\n```\n\nCC:  @tscrim @egourgoulhon\n\nBranch/Commit: 111015d2ce8cd36edb4ce5a11926fd412e644f7c\n\nReviewer: Travis Scrimshaw\n\nAuthor: Michael Jung\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31233\n\n",
    "closed_at": "2021-01-24T10:37:09Z",
    "created_at": "2021-01-13T18:36:59Z",
    "labels": [
        "component: manifolds",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Categories for Homset of Manifolds do not meet",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31233",
    "user": "https://github.com/mjungmath"
}
```
Here is a minimal example:

```
sage: R3 = EuclideanSpace(3) 
....: S2 = R3.sphere(coordinates='stereographic'); S2                           
2-sphere S^2 of radius 1 smoothly embedded in the Euclidean space E^3                                                   
sage: I = S2.identity_map()                                                     
sage: iota = S2.embedding()                                                     
sage: iota * I                                                                  
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-5-2ed3e7f8e656> in <module>
----> 1 iota * I

~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/map.pyx in sage.categories.map.Map.__mul__ (build/cythonized/sage/categories/map.c:7680)()
    895         if right.codomain() != self.domain():
    896             raise TypeError("self (=%s) domain must equal right (=%s) codomain" % (self, right))
--> 897         return self._composition(right)
    898 
    899     def _composition(self, right):

~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/map.pyx in sage.categories.map.Map._composition (build/cythonized/sage/categories/map.c:7854)()
    935         """
    936         category = self.category_for()._meet_(right.category_for())
--> 937         H = homset.Hom(right.domain(), self._codomain, category)
    938         return self._composition_(right, H)
    939 

~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/homset.py in Hom(X, Y, category, check)
    416                     # available for the following error message. It simply
    417                     # belongs to the wrong category.
--> 418                     raise ValueError("{} is not in {}".format(O, category))
    419 
    420         # Construct H

ValueError: Euclidean space E^3 is not in Join of Category of compact topological spaces and Category of smooth manifolds over Real Field with 53 bits of precision and Category of complete metric spaces
```

CC:  @tscrim @egourgoulhon

Branch/Commit: 111015d2ce8cd36edb4ce5a11926fd412e644f7c

Reviewer: Travis Scrimshaw

Author: Michael Jung

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31233





---

archive/issue_comments_620034.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-mjungmath/categories_for_homset_of_manifolds_do_not_meet\"",
    "created_at": "2021-01-13T18:54:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620034",
    "user": "https://github.com/mjungmath"
}
```

Changing branch from "" to "u/gh-mjungmath/categories_for_homset_of_manifolds_do_not_meet"



---

archive/issue_comments_620035.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[be52d78](https://github.com/sagemath/sagetrac-mirror/commit/be52d78edd5b44a41e9a57551e6a105418eeffda)|`Trac #31233: meet categories`|",
    "created_at": "2021-01-13T19:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620035",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                              |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[be52d78](https://github.com/sagemath/sagetrac-mirror/commit/be52d78edd5b44a41e9a57551e6a105418eeffda)|`Trac #31233: meet categories`|



---

archive/issue_comments_620036.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-01-13T19:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620036",
    "user": "https://github.com/mjungmath"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_620037.json:
```json
{
    "body": "Changing commit from \"\" to \"be52d78edd5b44a41e9a57551e6a105418eeffda\"",
    "created_at": "2021-01-13T19:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620037",
    "user": "https://github.com/mjungmath"
}
```

Changing commit from "" to "be52d78edd5b44a41e9a57551e6a105418eeffda"



---

archive/issue_comments_620038.json:
```json
{
    "body": "<a id='comment:3'></a>\nThere are some failed doctests in `integrated_curve.py` on `__recude__`. However, I think this is the proper way to do it. Just overwrite the docstrings?",
    "created_at": "2021-01-13T20:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620038",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:3'></a>
There are some failed doctests in `integrated_curve.py` on `__recude__`. However, I think this is the proper way to do it. Just overwrite the docstrings?



---

archive/issue_comments_620039.json:
```json
{
    "body": "<a id='comment:4'></a>\nIt depends on what the failures are. In this case, it seems like the best thing is to just change them.\n\nThis is probably the right solution. It feels slightly strange to weaken the type of morphism, but this doesn't make so much sense at the category level I think.",
    "created_at": "2021-01-14T05:20:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620039",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
It depends on what the failures are. In this case, it seems like the best thing is to just change them.

This is probably the right solution. It feels slightly strange to weaken the type of morphism, but this doesn't make so much sense at the category level I think.



---

archive/issue_comments_620040.json:
```json
{
    "body": "Changing commit from \"be52d78edd5b44a41e9a57551e6a105418eeffda\" to \"78f7af381e3bd01f621001e1947057844bd8e276\"",
    "created_at": "2021-01-14T08:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620040",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "be52d78edd5b44a41e9a57551e6a105418eeffda" to "78f7af381e3bd01f621001e1947057844bd8e276"



---

archive/issue_comments_620041.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[78f7af3](https://github.com/sagemath/sagetrac-mirror/commit/78f7af381e3bd01f621001e1947057844bd8e276)|`Trac #31233: category of homset docstring adapted`|",
    "created_at": "2021-01-14T08:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620041",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[78f7af3](https://github.com/sagemath/sagetrac-mirror/commit/78f7af381e3bd01f621001e1947057844bd8e276)|`Trac #31233: category of homset docstring adapted`|



---

archive/issue_comments_620042.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[8d31e0f](https://github.com/sagemath/sagetrac-mirror/commit/8d31e0f74fed80c426995089e6455b026a21cb8d)|`Trac #31233: fixing format`|",
    "created_at": "2021-01-14T13:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620042",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[8d31e0f](https://github.com/sagemath/sagetrac-mirror/commit/8d31e0f74fed80c426995089e6455b026a21cb8d)|`Trac #31233: fixing format`|



---

archive/issue_comments_620043.json:
```json
{
    "body": "Changing commit from \"78f7af381e3bd01f621001e1947057844bd8e276\" to \"8d31e0f74fed80c426995089e6455b026a21cb8d\"",
    "created_at": "2021-01-14T13:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620043",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "78f7af381e3bd01f621001e1947057844bd8e276" to "8d31e0f74fed80c426995089e6455b026a21cb8d"



---

archive/issue_comments_620044.json:
```json
{
    "body": "Changing commit from \"8d31e0f74fed80c426995089e6455b026a21cb8d\" to \"111015d2ce8cd36edb4ce5a11926fd412e644f7c\"",
    "created_at": "2021-01-14T16:36:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620044",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8d31e0f74fed80c426995089e6455b026a21cb8d" to "111015d2ce8cd36edb4ce5a11926fd412e644f7c"



---

archive/issue_comments_620045.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[111015d](https://github.com/sagemath/sagetrac-mirror/commit/111015d2ce8cd36edb4ce5a11926fd412e644f7c)|`Trac #31233: adapt homsets in docstring`|",
    "created_at": "2021-01-14T16:36:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620045",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[111015d](https://github.com/sagemath/sagetrac-mirror/commit/111015d2ce8cd36edb4ce5a11926fd412e644f7c)|`Trac #31233: adapt homsets in docstring`|



---

archive/issue_comments_620046.json:
```json
{
    "body": "<a id='comment:8'></a>\nEven mathematically it makes more sense to restrict the categories.\n\nThis should be it. Wait for green patchbot.",
    "created_at": "2021-01-14T16:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620046",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:8'></a>
Even mathematically it makes more sense to restrict the categories.

This should be it. Wait for green patchbot.



---

archive/issue_comments_620047.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2021-01-15T03:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620047",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_620048.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-01-15T03:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620048",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_620049.json:
```json
{
    "body": "<a id='comment:9'></a>\nLGTM.",
    "created_at": "2021-01-15T03:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620049",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
LGTM.



---

archive/issue_comments_620050.json:
```json
{
    "body": "<a id='comment:10'></a>\nThanks!",
    "created_at": "2021-01-15T09:37:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620050",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:10'></a>
Thanks!



---

archive/issue_comments_620051.json:
```json
{
    "body": "Changing branch from \"u/gh-mjungmath/categories_for_homset_of_manifolds_do_not_meet\" to \"111015d2ce8cd36edb4ce5a11926fd412e644f7c\"",
    "created_at": "2021-01-24T10:37:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620051",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-mjungmath/categories_for_homset_of_manifolds_do_not_meet" to "111015d2ce8cd36edb4ce5a11926fd412e644f7c"



---

archive/issue_events_091945.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-24T10:37:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31233#event-91945"
}
```



---

archive/issue_comments_620052.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-24T10:37:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31233#issuecomment-620052",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
