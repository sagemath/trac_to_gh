# Issue 31177: Add graphviz, pygraphviz packages

archive/issues_030940.json:
```json
{
    "body": "Several places in Sage refer to graphviz.\n\nWhen building from source, graphviz can make use of various optional dependencies: https://graphviz.org/download/source/\nIt seems too tricky to make it a normal package. \n\nCurrent versions of `graphviz` seem to be licensed under the Eclipse Public License 1.0, which is a free software license but GPL-incompatible. https://gitlab.com/graphviz/graphviz/-/blob/master/LICENSE\nSo probably we should not make it a standard package.\n\nThus, we add it as a dummy script package only, so that we can provide system package information (https://repology.org/project/graphviz/versions).\n\nWe also add `pygraphviz` as a pip package - as part of Meta-ticket #31176 (Add packages from 3-manifolds / computop)\n\n\nCC:  @dimpase @dcoudert @seblabbe @NathanDunfield @culler @slel @videlec\n\nBranch/Commit: ea35795717c38208b92a944dba74d10a1bd9f878\n\nReviewer: David Coudert\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31177\n\n",
    "closed_at": "2021-03-07T17:06:01Z",
    "created_at": "2021-01-04T01:40:13Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Add graphviz, pygraphviz packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31177",
    "user": "https://github.com/mkoeppe"
}
```
Several places in Sage refer to graphviz.

When building from source, graphviz can make use of various optional dependencies: https://graphviz.org/download/source/
It seems too tricky to make it a normal package. 

Current versions of `graphviz` seem to be licensed under the Eclipse Public License 1.0, which is a free software license but GPL-incompatible. https://gitlab.com/graphviz/graphviz/-/blob/master/LICENSE
So probably we should not make it a standard package.

Thus, we add it as a dummy script package only, so that we can provide system package information (https://repology.org/project/graphviz/versions).

We also add `pygraphviz` as a pip package - as part of Meta-ticket #31176 (Add packages from 3-manifolds / computop)


CC:  @dimpase @dcoudert @seblabbe @NathanDunfield @culler @slel @videlec

Branch/Commit: ea35795717c38208b92a944dba74d10a1bd9f878

Reviewer: David Coudert

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31177





---

archive/issue_comments_471602.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,10 +1,12 @@\n Several places in Sage refer to graphviz.\n \n-We should add it to the distribution, either as a script package just to link it to system package information, or as a normal optional package.\n+We should add it to the distribution, either as a script package just to link it to system package information (https://repology.org/project/graphviz/versions), or as a normal optional package.\n \n Current versions of \\`graphviz\\` seem to be licensed under the Eclipse Public License 1.0, which is a free software license but GPL-incompatible. https://gitlab.com/graphviz/graphviz/-/blob/master/LICENSE\n \n So probably we should not make it a standard package.\n+\n+\n \n Comment: 1\n \n```\n",
    "created_at": "2021-01-04T01:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471602",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,10 +1,12 @@
 Several places in Sage refer to graphviz.
 
-We should add it to the distribution, either as a script package just to link it to system package information, or as a normal optional package.
+We should add it to the distribution, either as a script package just to link it to system package information (https://repology.org/project/graphviz/versions), or as a normal optional package.
 
 Current versions of \`graphviz\` seem to be licensed under the Eclipse Public License 1.0, which is a free software license but GPL-incompatible. https://gitlab.com/graphviz/graphviz/-/blob/master/LICENSE
 
 So probably we should not make it a standard package.
+
+
 
 Comment: 1
 
```




---

archive/issue_comments_471603.json:
```json
{
    "body": "<a id='comment:3'></a>https://github.com/3-manifolds/sagedocker/blob/master/sage/scripts/08_graphviz.sh uses a more specific configuration using `libgts-dev libpango1.0-dev` on ubuntu.\n\n---\nNew commits:",
    "created_at": "2021-01-04T05:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471603",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>https://github.com/3-manifolds/sagedocker/blob/master/sage/scripts/08_graphviz.sh uses a more specific configuration using `libgts-dev libpango1.0-dev` on ubuntu.

---
New commits:



---

archive/issue_comments_471604.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-04T07:34:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471604",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_471605.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,14 @@\n+Several places in Sage refer to graphviz.\n+\n+We should add it to the distribution.  In this ticket, we add it as a normal optional package and also provide system package information (https://repology.org/project/graphviz/versions).\n+\n+When building from source, graphviz can make us of various optional dependencies: https://graphviz.org/download/source/\n+\n+\n+Current versions of \\`graphviz\\` seem to be licensed under the Eclipse Public License 1.0, which is a free software license but GPL-incompatible. https://gitlab.com/graphviz/graphviz/-/blob/master/LICENSE\n+\n+So probably we should not make it a standard package.\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2021-01-07T02:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471605",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,14 @@
+Several places in Sage refer to graphviz.
+
+We should add it to the distribution.  In this ticket, we add it as a normal optional package and also provide system package information (https://repology.org/project/graphviz/versions).
+
+When building from source, graphviz can make us of various optional dependencies: https://graphviz.org/download/source/
+
+
+Current versions of \`graphviz\` seem to be licensed under the Eclipse Public License 1.0, which is a free software license but GPL-incompatible. https://gitlab.com/graphviz/graphviz/-/blob/master/LICENSE
+
+So probably we should not make it a standard package.
+
 
 
 Comment: 1
```




---

archive/issue_comments_471606.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-07T02:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471606",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_471607.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,14 @@\n+Several places in Sage refer to graphviz.\n+\n+We should add it to the distribution.  In this ticket, we add it as a normal optional package and also provide system package information (https://repology.org/project/graphviz/versions).\n+\n+When building from source, graphviz can make use of various optional dependencies: https://graphviz.org/download/source/\n+\n+\n+Current versions of \\`graphviz\\` seem to be licensed under the Eclipse Public License 1.0, which is a free software license but GPL-incompatible. https://gitlab.com/graphviz/graphviz/-/blob/master/LICENSE\n+\n+So probably we should not make it a standard package.\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2021-01-07T02:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471607",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,14 @@
+Several places in Sage refer to graphviz.
+
+We should add it to the distribution.  In this ticket, we add it as a normal optional package and also provide system package information (https://repology.org/project/graphviz/versions).
+
+When building from source, graphviz can make use of various optional dependencies: https://graphviz.org/download/source/
+
+
+Current versions of \`graphviz\` seem to be licensed under the Eclipse Public License 1.0, which is a free software license but GPL-incompatible. https://gitlab.com/graphviz/graphviz/-/blob/master/LICENSE
+
+So probably we should not make it a standard package.
+
 
 
 Comment: 1
```




---

archive/issue_comments_471608.json:
```json
{
    "body": "<a id='comment:8'></a>`graphviz` build seems brittle: Failing here on macOS because `ps2pdf` is not available and PDF manual build cannot seem to be disabled.\n\nPerhaps it's best to just make it a script package that provides system package info after all.",
    "created_at": "2021-01-07T02:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471608",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>`graphviz` build seems brittle: Failing here on macOS because `ps2pdf` is not available and PDF manual build cannot seem to be disabled.

Perhaps it's best to just make it a script package that provides system package info after all.



---

archive/issue_comments_471609.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,14 @@\n+Several places in Sage refer to graphviz.\n+\n+We should add it to the distribution.  In this ticket, we add it as a dummy script package only, which provides system package information (https://repology.org/project/graphviz/versions).\n+\n+When building from source, graphviz can make use of various optional dependencies: https://graphviz.org/download/source/\n+\n+\n+Current versions of \\`graphviz\\` seem to be licensed under the Eclipse Public License 1.0, which is a free software license but GPL-incompatible. https://gitlab.com/graphviz/graphviz/-/blob/master/LICENSE\n+\n+So probably we should not make it a standard package.\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2021-01-07T02:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471609",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,14 @@
+Several places in Sage refer to graphviz.
+
+We should add it to the distribution.  In this ticket, we add it as a dummy script package only, which provides system package information (https://repology.org/project/graphviz/versions).
+
+When building from source, graphviz can make use of various optional dependencies: https://graphviz.org/download/source/
+
+
+Current versions of \`graphviz\` seem to be licensed under the Eclipse Public License 1.0, which is a free software license but GPL-incompatible. https://gitlab.com/graphviz/graphviz/-/blob/master/LICENSE
+
+So probably we should not make it a standard package.
+
 
 
 Comment: 1
```




---

archive/issue_comments_471610.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-07T02:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471610",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_471611.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-01-07T02:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471611",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_471612.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,14 @@\n+Several places in Sage refer to graphviz.\n+\n+When building from source, graphviz can make use of various optional dependencies: https://graphviz.org/download/source/\n+It seems too tricky to make it a normal package. \n+\n+Current versions of \\`graphviz\\` seem to be licensed under the Eclipse Public License 1.0, which is a free software license but GPL-incompatible. https://gitlab.com/graphviz/graphviz/-/blob/master/LICENSE\n+So probably we should not make it a standard package.\n+\n+Thus, we add it as a dummy script package only, so that we can provide system package information (https://repology.org/project/graphviz/versions).\n+\n+We also add \\`pygraphviz\\` as a pip package - as part of Meta-ticket #31176 (Add packages from 3-manifolds / computop)\n \n \n Comment: 1\n```\n",
    "created_at": "2021-01-13T18:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471612",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,14 @@
+Several places in Sage refer to graphviz.
+
+When building from source, graphviz can make use of various optional dependencies: https://graphviz.org/download/source/
+It seems too tricky to make it a normal package. 
+
+Current versions of \`graphviz\` seem to be licensed under the Eclipse Public License 1.0, which is a free software license but GPL-incompatible. https://gitlab.com/graphviz/graphviz/-/blob/master/LICENSE
+So probably we should not make it a standard package.
+
+Thus, we add it as a dummy script package only, so that we can provide system package information (https://repology.org/project/graphviz/versions).
+
+We also add \`pygraphviz\` as a pip package - as part of Meta-ticket #31176 (Add packages from 3-manifolds / computop)
 
 
 Comment: 1
```




---

archive/issue_comments_471613.json:
```json
{
    "body": "<a id='comment:12'></a>Needs review",
    "created_at": "2021-02-03T02:03:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471613",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Needs review



---

archive/issue_comments_471614.json:
```json
{
    "body": "<a id='comment:13'></a>I tried on macOS 10.15.7 after installing graphviz with homebrew. It is well detected and compilation went well. \nI don't know if I have tested it enough (did a few tests on graphs), but it seems ok to me.",
    "created_at": "2021-02-16T09:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471614",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:13'></a>I tried on macOS 10.15.7 after installing graphviz with homebrew. It is well detected and compilation went well. 
I don't know if I have tested it enough (did a few tests on graphs), but it seems ok to me.



---

archive/issue_comments_471615.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-02-16T09:32:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471615",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_471616.json:
```json
{
    "body": "<a id='comment:14'></a>Thank you!",
    "created_at": "2021-02-16T15:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471616",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Thank you!



---

archive/issue_comments_471617.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-03-07T17:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31177#issuecomment-471617",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_081479.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-07T17:06:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31177",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31177#event-81479"
}
```
