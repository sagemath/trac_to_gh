# Issue 31937: Update markupsafe to 2.1.1, jinja2 to 3.1.2

archive/issues_031700.json:
```json
{
    "assignees": [],
    "body": "Getting this warning with `markupsafe` 2.0.1\n\n```\nDeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.\n```\n\nThe new versions:\n- https://github.com/pallets/markupsafe/blob/main/CHANGES.rst\n- https://jinja.palletsprojects.com/en/3.1.x/changes/\nstill support Python 3.7, so this update would even be safe for Sage 9.6\n\n\nCC:  @slel @antonio-rojas @kiwifb @egourgoulhon\n\nBranch/Commit: **[037fc2f](https://github.com/sagemath/sagetrac-mirror/commit/037fc2f4ebab0dc602980d39dfada3395d2ab414)**\n\nReviewer: **Isuru Fernando, Fran\u00e7ois Bissey**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31937_\n\n",
    "closed_at": "2022-05-29T11:29:18Z",
    "created_at": "2021-06-08T23:36:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update markupsafe to 2.1.1, jinja2 to 3.1.2",
    "type": "issue",
    "updated_at": "2022-05-29T11:29:18Z",
    "url": "https://github.com/sagemath/sage/issues/31937",
    "user": "https://github.com/isuruf"
}
```
Getting this warning with `markupsafe` 2.0.1

```
DeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.
```

The new versions:
- https://github.com/pallets/markupsafe/blob/main/CHANGES.rst
- https://jinja.palletsprojects.com/en/3.1.x/changes/
still support Python 3.7, so this update would even be safe for Sage 9.6


CC:  @slel @antonio-rojas @kiwifb @egourgoulhon

Branch/Commit: **[037fc2f](https://github.com/sagemath/sagetrac-mirror/commit/037fc2f4ebab0dc602980d39dfada3395d2ab414)**

Reviewer: **Isuru Fernando, François Bissey**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/31937_





---

archive/issue_events_407987.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2021-06-08T23:36:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-407987"
}
```



---

archive/issue_events_407988.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2021-06-08T23:36:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-407988"
}
```



---

archive/issue_events_407989.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2021-06-08T23:36:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-407989"
}
```



---

archive/issue_comments_516846.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\n`markupsafe` is only used by `jinja2`. We should update that as well, from 2.11.2 to 2.11.3 or 3.0.1",
    "created_at": "2021-06-11T20:11:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516846",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'>Comment 1:</a>
`markupsafe` is only used by `jinja2`. We should update that as well, from 2.11.2 to 2.11.3 or 3.0.1



---

archive/issue_comments_516847.json:
```json
{
    "body": "Branch: **[u/mkoeppe/update_markupsafe_to_2_0_1](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_markupsafe_to_2_0_1)**",
    "created_at": "2021-06-11T20:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516847",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/update_markupsafe_to_2_0_1](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_markupsafe_to_2_0_1)**



---

archive/issue_comments_516848.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2021-06-11T20:18:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516848",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_516849.json:
```json
{
    "body": "Commit: **[a462a1d](https://github.com/sagemath/sagetrac-mirror/commit/a462a1d0d9558b50512d67a76bbeccbc44b1acf0)**",
    "created_at": "2021-06-11T20:18:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516849",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[a462a1d](https://github.com/sagemath/sagetrac-mirror/commit/a462a1d0d9558b50512d67a76bbeccbc44b1acf0)**



---

archive/issue_events_407990.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-11T20:18:14Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "title_is": "Update markupsafe to 2.0.1, jinja2 to 3.0.1",
    "title_was": "Update markupsafe to 2.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-407990"
}
```



---

archive/issue_events_407991.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-11T20:18:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-407991"
}
```



---

archive/issue_comments_516850.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n-Getting this warning with 2.0.1\n+Getting this warning with `markupsafe` 2.0.1\n \n ```\n DeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.\n ```\n \n+https://jinja.palletsprojects.com/en/3.0.x/changes/\n``````\n",
    "created_at": "2021-06-11T20:18:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516850",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
-Getting this warning with 2.0.1
+Getting this warning with `markupsafe` 2.0.1
 
 ```
 DeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.
 ```
 
+https://jinja.palletsprojects.com/en/3.0.x/changes/
``````




---

archive/issue_comments_516851.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d4a7098b874bc7f15fc0e2891c4d49bc53d8d3a\">1d4a709</a></td><td><code>build/pkgs/markupsafe: Update to 2.0.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a462a1d0d9558b50512d67a76bbeccbc44b1acf0\">a462a1d</a></td><td><code>build/pkgs/jinja2: Update to 3.0.1</code></td></tr></table>\n",
    "created_at": "2021-06-11T20:18:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516851",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'>Comment 3:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d4a7098b874bc7f15fc0e2891c4d49bc53d8d3a">1d4a709</a></td><td><code>build/pkgs/markupsafe: Update to 2.0.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a462a1d0d9558b50512d67a76bbeccbc44b1acf0">a462a1d</a></td><td><code>build/pkgs/jinja2: Update to 3.0.1</code></td></tr></table>




---

archive/issue_events_407992.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-11T20:38:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-407992"
}
```



---

archive/issue_events_407993.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2021-06-11T20:52:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-407993"
}
```



---

archive/issue_events_407994.json:
```json
{
    "actor": "https://github.com/isuruf",
    "created_at": "2021-06-11T20:52:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-407994"
}
```



---

archive/issue_comments_516852.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nLGTM. Thanks",
    "created_at": "2021-06-11T20:52:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516852",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:5'>Comment 5:</a>
LGTM. Thanks



---

archive/issue_comments_516853.json:
```json
{
    "body": "Reviewer: **Isuru Fernando**",
    "created_at": "2021-06-11T20:54:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516853",
    "user": "https://github.com/isuruf"
}
```

Reviewer: **Isuru Fernando**



---

archive/issue_comments_516854.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nThanks!",
    "created_at": "2021-06-11T21:50:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516854",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'>Comment 7:</a>
Thanks!



---

archive/issue_comments_516855.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nI'm getting lots of \n\n```\n**********************************************************************\nFile \"src/sage_docbuild/__init__.py\", line 93, in sage_docbuild.builder_helper\nFailed example:\n    from sage_docbuild import DocBuilder, setup_parser\nExpected nothing\nGot:\n    doctest:warning\n      File \"/home/release/Sage/src/bin/sage-runtests\", line 144, in <module>\n        err = DC.run()\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/control.py\", line 1207, in run\n        self.run_doctests()\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/control.py\", line 909, in run_doctests\n        self.dispatcher.dispatch()\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py\", line 2040, in dispatch\n        self.parallel_dispatch()\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py\", line 1935, in parallel_dispatch\n        w.start()  # This might take some time\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py\", line 2207, in start\n        super(DocTestWorker, self).start()\n      File \"/usr/lib64/python3.9/multiprocessing/process.py\", line 121, in start\n        self._popen = self._Popen(self)\n      File \"/usr/lib64/python3.9/multiprocessing/context.py\", line 224, in _Popen\n        return _default_context.get_context().Process._Popen(process_obj)\n      File \"/usr/lib64/python3.9/multiprocessing/context.py\", line 277, in _Popen\n        return Popen(process_obj)\n      File \"/usr/lib64/python3.9/multiprocessing/popen_fork.py\", line 19, in __init__\n        self._launch(process_obj)\n      File \"/usr/lib64/python3.9/multiprocessing/popen_fork.py\", line 71, in _launch\n        code = process_obj._bootstrap(parent_sentinel=child_r)\n      File \"/usr/lib64/python3.9/multiprocessing/process.py\", line 315, in _bootstrap\n        self.run()\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py\", line 2179, in run\n        task(self.options, self.outtmpfile, msgpipe, self.result_queue)\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py\", line 2508, in __call__\n        doctests, extras = self._run(runner, options, results)\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py\", line 2555, in _run\n        result = runner.run(test)\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py\", line 906, in run\n        return self._run(test, compileflags, out)\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_docbuild.builder_helper[0]>\", line 1, in <module>\n        from sage_docbuild import DocBuilder, setup_parser\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sage_docbuild/__init__.py\", line 55, in <module>\n        import sphinx.ext.intersphinx\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sphinx/ext/intersphinx.py\", line 40, in <module>\n        from sphinx.application import Sphinx\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sphinx/application.py\", line 42, in <module>\n        from sphinx.registry import SphinxComponentRegistry\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sphinx/registry.py\", line 24, in <module>\n        from sphinx.builders import Builder\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sphinx/builders/__init__.py\", line 26, in <module>\n        from sphinx.util import import_object, logging, rst, progress_message, status_iterator\n      File \"<frozen importlib._bootstrap>\", line 1058, in _handle_fromlist\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"<frozen importlib._bootstrap>\", line 1007, in _find_and_load\n      File \"<frozen importlib._bootstrap>\", line 986, in _find_and_load_unlocked\n      File \"<frozen importlib._bootstrap>\", line 680, in _load_unlocked\n      File \"<frozen importlib._bootstrap_external>\", line 855, in exec_module\n      File \"<frozen importlib._bootstrap>\", line 228, in _call_with_frames_removed\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/sphinx/util/rst.py\", line 58, in <module>\n        def heading(env: Environment, text: str, level: int = 1) -> str:\n      File \"/home/release/Sage/local/lib64/python3.9/site-packages/jinja2/filters.py\", line 90, in environmentfilter\n        warnings.warn(\n      File \"/usr/lib64/python3.9/warnings.py\", line 109, in _showwarnmsg\n        sw(msg.message, msg.category, msg.filename, msg.lineno,\n    :\n    DeprecationWarning: 'environmentfilter' is renamed to 'pass_environment', the old name will be removed in Jinja 3.1.\n**********************************************************************\n1 item had failures:\n   1 of  10 in sage_docbuild.builder_helper\n    [39 tests, 1 failure, 0.31 s]\n----------------------------------------------------------------------\nsage -t --long --random-seed=0 src/sage_docbuild/__init__.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2021-06-23T22:53:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516855",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'>Comment 8:</a>
I'm getting lots of 

```
**********************************************************************
File "src/sage_docbuild/__init__.py", line 93, in sage_docbuild.builder_helper
Failed example:
    from sage_docbuild import DocBuilder, setup_parser
Expected nothing
Got:
    doctest:warning
      File "/home/release/Sage/src/bin/sage-runtests", line 144, in <module>
        err = DC.run()
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/control.py", line 1207, in run
        self.run_doctests()
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/control.py", line 909, in run_doctests
        self.dispatcher.dispatch()
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py", line 2040, in dispatch
        self.parallel_dispatch()
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py", line 1935, in parallel_dispatch
        w.start()  # This might take some time
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py", line 2207, in start
        super(DocTestWorker, self).start()
      File "/usr/lib64/python3.9/multiprocessing/process.py", line 121, in start
        self._popen = self._Popen(self)
      File "/usr/lib64/python3.9/multiprocessing/context.py", line 224, in _Popen
        return _default_context.get_context().Process._Popen(process_obj)
      File "/usr/lib64/python3.9/multiprocessing/context.py", line 277, in _Popen
        return Popen(process_obj)
      File "/usr/lib64/python3.9/multiprocessing/popen_fork.py", line 19, in __init__
        self._launch(process_obj)
      File "/usr/lib64/python3.9/multiprocessing/popen_fork.py", line 71, in _launch
        code = process_obj._bootstrap(parent_sentinel=child_r)
      File "/usr/lib64/python3.9/multiprocessing/process.py", line 315, in _bootstrap
        self.run()
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py", line 2179, in run
        task(self.options, self.outtmpfile, msgpipe, self.result_queue)
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py", line 2508, in __call__
        doctests, extras = self._run(runner, options, results)
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py", line 2555, in _run
        result = runner.run(test)
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py", line 906, in run
        return self._run(test, compileflags, out)
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_docbuild.builder_helper[0]>", line 1, in <module>
        from sage_docbuild import DocBuilder, setup_parser
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sage_docbuild/__init__.py", line 55, in <module>
        import sphinx.ext.intersphinx
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sphinx/ext/intersphinx.py", line 40, in <module>
        from sphinx.application import Sphinx
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sphinx/application.py", line 42, in <module>
        from sphinx.registry import SphinxComponentRegistry
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sphinx/registry.py", line 24, in <module>
        from sphinx.builders import Builder
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sphinx/builders/__init__.py", line 26, in <module>
        from sphinx.util import import_object, logging, rst, progress_message, status_iterator
      File "<frozen importlib._bootstrap>", line 1058, in _handle_fromlist
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "<frozen importlib._bootstrap>", line 1007, in _find_and_load
      File "<frozen importlib._bootstrap>", line 986, in _find_and_load_unlocked
      File "<frozen importlib._bootstrap>", line 680, in _load_unlocked
      File "<frozen importlib._bootstrap_external>", line 855, in exec_module
      File "<frozen importlib._bootstrap>", line 228, in _call_with_frames_removed
      File "/home/release/Sage/local/lib64/python3.9/site-packages/sphinx/util/rst.py", line 58, in <module>
        def heading(env: Environment, text: str, level: int = 1) -> str:
      File "/home/release/Sage/local/lib64/python3.9/site-packages/jinja2/filters.py", line 90, in environmentfilter
        warnings.warn(
      File "/usr/lib64/python3.9/warnings.py", line 109, in _showwarnmsg
        sw(msg.message, msg.category, msg.filename, msg.lineno,
    :
    DeprecationWarning: 'environmentfilter' is renamed to 'pass_environment', the old name will be removed in Jinja 3.1.
**********************************************************************
1 item had failures:
   1 of  10 in sage_docbuild.builder_helper
    [39 tests, 1 failure, 0.31 s]
----------------------------------------------------------------------
sage -t --long --random-seed=0 src/sage_docbuild/__init__.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_events_407995.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-23T22:53:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-407995"
}
```



---

archive/issue_events_407996.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-23T22:53:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-407996"
}
```



---

archive/issue_comments_516856.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nLooks like this needs to wait for the sphinx update in #31696",
    "created_at": "2021-06-23T22:55:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516856",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'>Comment 9:</a>
Looks like this needs to wait for the sphinx update in #31696



---

archive/issue_comments_516857.json:
```json
{
    "body": "Dependencies: **#31696**",
    "created_at": "2021-06-23T22:55:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516857",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#31696**



---

archive/issue_comments_516858.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516858",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'>Comment 11:</a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_407997.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-407997"
}
```



---

archive/issue_events_407998.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-407998"
}
```



---

archive/issue_comments_516859.json:
```json
{
    "body": "Changed dependencies from **#31696** to **#32518**",
    "created_at": "2021-09-16T03:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516859",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#31696** to **#32518**



---

archive/issue_events_407999.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-407999"
}
```



---

archive/issue_events_408000.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-408000"
}
```



---

archive/issue_events_408001.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-408001"
}
```



---

archive/issue_events_408002.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-408002"
}
```



---

archive/issue_comments_516860.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,8 @@\n DeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.\n ```\n \n-https://jinja.palletsprojects.com/en/3.0.x/changes/\n+The new versions:\n+- https://github.com/pallets/markupsafe/blob/main/CHANGES.rst\n+- https://jinja.palletsprojects.com/en/3.1.x/changes/\n+still support Python 3.7, so this update would even be safe for Sage 9.6\n+\n``````\n",
    "created_at": "2022-04-21T04:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516860",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,8 @@
 DeprecationWarning: 'soft_unicode' has been renamed to 'soft_str'. The old name will be removed in MarkupSafe 2.1.
 ```
 
-https://jinja.palletsprojects.com/en/3.0.x/changes/
+The new versions:
+- https://github.com/pallets/markupsafe/blob/main/CHANGES.rst
+- https://jinja.palletsprojects.com/en/3.1.x/changes/
+still support Python 3.7, so this update would even be safe for Sage 9.6
+
``````




---

archive/issue_events_408003.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-21T04:49:03Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "title_is": "Update markupsafe to 2.1.1, jinja2 to 3.1.1",
    "title_was": "Update markupsafe to 2.0.1, jinja2 to 3.0.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-408003"
}
```



---

archive/issue_events_408004.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-21T04:49:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-408004"
}
```



---

archive/issue_events_408005.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-21T04:49:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-408005"
}
```



---

archive/issue_comments_516861.json:
```json
{
    "body": "Changed commit from **[a462a1d](https://github.com/sagemath/sagetrac-mirror/commit/a462a1d0d9558b50512d67a76bbeccbc44b1acf0)** to **[6dbbf39](https://github.com/sagemath/sagetrac-mirror/commit/6dbbf393d0271d9a946441100b49e0cc3162f4db)**",
    "created_at": "2022-04-21T05:03:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516861",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a462a1d](https://github.com/sagemath/sagetrac-mirror/commit/a462a1d0d9558b50512d67a76bbeccbc44b1acf0)** to **[6dbbf39](https://github.com/sagemath/sagetrac-mirror/commit/6dbbf393d0271d9a946441100b49e0cc3162f4db)**



---

archive/issue_comments_516862.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/005f923365b17f27e7c4e1b92029185bccb401a8\">005f923</a></td><td><code>build/pkgs/markupsafe: Update to 2.0.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3fd3429919fe2df3c3698200682649e5de90fa3c\">3fd3429</a></td><td><code>build/pkgs/jinja2: Update to 3.0.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd9604c6764e676aa006cef20363cf639cff95e4\">dd9604c</a></td><td><code>build/pkgs/jinja2: Update to 3.1.1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6dbbf393d0271d9a946441100b49e0cc3162f4db\">6dbbf39</a></td><td><code>build/pkgs/markupsafe: Update to 2.1.1</code></td></tr></table>\n",
    "created_at": "2022-04-21T05:03:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516862",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>Comment 16:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/005f923365b17f27e7c4e1b92029185bccb401a8">005f923</a></td><td><code>build/pkgs/markupsafe: Update to 2.0.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3fd3429919fe2df3c3698200682649e5de90fa3c">3fd3429</a></td><td><code>build/pkgs/jinja2: Update to 3.0.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd9604c6764e676aa006cef20363cf639cff95e4">dd9604c</a></td><td><code>build/pkgs/jinja2: Update to 3.1.1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6dbbf393d0271d9a946441100b49e0cc3162f4db">6dbbf39</a></td><td><code>build/pkgs/markupsafe: Update to 2.1.1</code></td></tr></table>




---

archive/issue_comments_516863.json:
```json
{
    "body": "Changed dependencies from **#32518** to none",
    "created_at": "2022-04-21T05:04:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516863",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#32518** to none



---

archive/issue_comments_516864.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/037fc2f4ebab0dc602980d39dfada3395d2ab414\">037fc2f</a></td><td><code>build/pkgs/jinja2: Update to 3.1.2</code></td></tr></table>\n",
    "created_at": "2022-05-26T16:48:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516864",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>Comment 18:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/037fc2f4ebab0dc602980d39dfada3395d2ab414">037fc2f</a></td><td><code>build/pkgs/jinja2: Update to 3.1.2</code></td></tr></table>




---

archive/issue_comments_516865.json:
```json
{
    "body": "Changed commit from **[6dbbf39](https://github.com/sagemath/sagetrac-mirror/commit/6dbbf393d0271d9a946441100b49e0cc3162f4db)** to **[037fc2f](https://github.com/sagemath/sagetrac-mirror/commit/037fc2f4ebab0dc602980d39dfada3395d2ab414)**",
    "created_at": "2022-05-26T16:48:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516865",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6dbbf39](https://github.com/sagemath/sagetrac-mirror/commit/6dbbf393d0271d9a946441100b49e0cc3162f4db)** to **[037fc2f](https://github.com/sagemath/sagetrac-mirror/commit/037fc2f4ebab0dc602980d39dfada3395d2ab414)**



---

archive/issue_events_408006.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-26T23:38:15Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "title_is": "Update markupsafe to 2.1.1, jinja2 to 3.1.2",
    "title_was": "Update markupsafe to 2.1.1, jinja2 to 3.1.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-408006"
}
```



---

archive/issue_comments_516866.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nLGTM",
    "created_at": "2022-05-27T02:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516866",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:22'>Comment 22:</a>
LGTM



---

archive/issue_events_408007.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-05-27T02:21:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-408007"
}
```



---

archive/issue_events_408008.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2022-05-27T02:21:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-408008"
}
```



---

archive/issue_comments_516867.json:
```json
{
    "body": "Changed reviewer from **Isuru Fernando** to **Isuru Fernando, Fran\u00e7ois Bissey**",
    "created_at": "2022-05-27T02:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516867",
    "user": "https://github.com/kiwifb"
}
```

Changed reviewer from **Isuru Fernando** to **Isuru Fernando, François Bissey**



---

archive/issue_comments_516868.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nThanks!",
    "created_at": "2022-05-27T02:36:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516868",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'>Comment 23:</a>
Thanks!



---

archive/issue_events_408009.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-05-29T11:29:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-408009"
}
```



---

archive/issue_events_408010.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a8c488f4a2d226d1a26b3da234957d0d16adb769",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-05-29T11:29:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31937#event-408010"
}
```



---

archive/issue_comments_516869.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/update_markupsafe_to_2_0_1](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_markupsafe_to_2_0_1)** to **[037fc2f](https://github.com/sagemath/sagetrac-mirror/commit/037fc2f4ebab0dc602980d39dfada3395d2ab414)**",
    "created_at": "2022-05-29T11:29:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31937#issuecomment-516869",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/update_markupsafe_to_2_0_1](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/update_markupsafe_to_2_0_1)** to **[037fc2f](https://github.com/sagemath/sagetrac-mirror/commit/037fc2f4ebab0dc602980d39dfada3395d2ab414)**
