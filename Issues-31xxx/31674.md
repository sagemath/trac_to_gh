# Issue 31674: Make open subsets of immersed/embedded submanifolds immersed/embedded submanifolds

archive/issues_031437.json:
```json
{
    "assignees": [],
    "body": "This would be convenient for example for #31660.\n\nTo implement this, we refactor the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` through a new method `_init_open_subset`.\n\n\n\nCC:  @mjungmath @egourgoulhon @tscrim\n\nBranch/Commit: **[`58b43f7`](https://github.com/sagemath/sagetrac-mirror/commit/58b43f7902296384dade8a617441e205956d9824)**\n\nReviewer: **Eric Gourgoulhon**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **manifolds**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31674_\n\n",
    "closed_at": "2021-06-06T13:18:03Z",
    "created_at": "2021-04-15T17:00:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20manifolds",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make open subsets of immersed/embedded submanifolds immersed/embedded submanifolds",
    "type": "issue",
    "updated_at": "2021-06-06T13:18:03Z",
    "url": "https://github.com/sagemath/sage/issues/31674",
    "user": "https://github.com/mkoeppe"
}
```
This would be convenient for example for #31660.

To implement this, we refactor the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` through a new method `_init_open_subset`.



CC:  @mjungmath @egourgoulhon @tscrim

Branch/Commit: **[`58b43f7`](https://github.com/sagemath/sagetrac-mirror/commit/58b43f7902296384dade8a617441e205956d9824)**

Reviewer: **Eric Gourgoulhon**

Author: **Matthias Koeppe**

Component: **manifolds**

_Issue created by migration from https://trac.sagemath.org/ticket/31674_





---

archive/issue_events_433765.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-15T17:00:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31674#event-433765"
}
```



---

archive/issue_events_433766.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-15T17:00:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20manifolds",
    "label_color": "0000ff",
    "label_name": "c: manifolds",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31674#event-433766"
}
```



---

archive/issue_events_433767.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-15T17:00:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31674#event-433767"
}
```



---

archive/issue_events_433768.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-15T17:00:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31674#event-433768"
}
```



---

archive/issue_comments_509388.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nWhy not simply overwriting `open_subset` in `TopologicalSubmanifold` etc.?",
    "created_at": "2021-04-15T19:14:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509388",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:1" align="right">comment:1</div>

Why not simply overwriting `open_subset` in `TopologicalSubmanifold` etc.?



---

archive/issue_comments_509389.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nIt would lead to at least 3 more copies of the same code",
    "created_at": "2021-04-15T20:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509389",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

It would lead to at least 3 more copies of the same code



---

archive/issue_comments_509390.json:
```json
{
    "body": "Branch: **[u/mkoeppe/make_open_subsets_of_immersed_embedded_submanifolds_immersed_embedded_submanifolds](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_open_subsets_of_immersed_embedded_submanifolds_immersed_embedded_submanifolds)**",
    "created_at": "2021-04-15T20:33:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509390",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/make_open_subsets_of_immersed_embedded_submanifolds_immersed_embedded_submanifolds](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_open_subsets_of_immersed_embedded_submanifolds_immersed_embedded_submanifolds)**



---

archive/issue_comments_509391.json:
```json
{
    "body": "Commit: **[`1f6f295`](https://github.com/sagemath/sagetrac-mirror/commit/1f6f2958ef44a3d9b00644d8b820851c33484aa0)**",
    "created_at": "2021-04-15T20:34:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509391",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`1f6f295`](https://github.com/sagemath/sagetrac-mirror/commit/1f6f2958ef44a3d9b00644d8b820851c33484aa0)**



---

archive/issue_comments_509392.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHere's the first copy\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f6f2958ef44a3d9b00644d8b820851c33484aa0\"><code>1f6f295</code></a></td><td><code>TopologicalSubmanifold.open_subset: New</code></td></tr></table>\n",
    "created_at": "2021-04-15T20:34:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509392",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

Here's the first copy

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f6f2958ef44a3d9b00644d8b820851c33484aa0"><code>1f6f295</code></a></td><td><code>TopologicalSubmanifold.open_subset: New</code></td></tr></table>




---

archive/issue_comments_509393.json:
```json
{
    "body": "Changed commit from **[`1f6f295`](https://github.com/sagemath/sagetrac-mirror/commit/1f6f2958ef44a3d9b00644d8b820851c33484aa0)** to **[`58110f2`](https://github.com/sagemath/sagetrac-mirror/commit/58110f2ffda1a1736003fe3548586e372e673ba5)**",
    "created_at": "2021-04-15T20:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509393",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1f6f295`](https://github.com/sagemath/sagetrac-mirror/commit/1f6f2958ef44a3d9b00644d8b820851c33484aa0)** to **[`58110f2`](https://github.com/sagemath/sagetrac-mirror/commit/58110f2ffda1a1736003fe3548586e372e673ba5)**



---

archive/issue_comments_509394.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58110f2ffda1a1736003fe3548586e372e673ba5\"><code>58110f2</code></a></td><td><code>TopologicalSubmanifold.open_subset: Fix docstring</code></td></tr></table>\n",
    "created_at": "2021-04-15T20:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509394",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58110f2ffda1a1736003fe3548586e372e673ba5"><code>58110f2</code></a></td><td><code>TopologicalSubmanifold.open_subset: Fix docstring</code></td></tr></table>




---

archive/issue_comments_509395.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2021-04-15T20:40:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509395",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_509396.json:
```json
{
    "body": "Changed commit from **[`58110f2`](https://github.com/sagemath/sagetrac-mirror/commit/58110f2ffda1a1736003fe3548586e372e673ba5)** to **[`d815b63`](https://github.com/sagemath/sagetrac-mirror/commit/d815b63da8314abbb03cfc2afc83c40f61f21c78)**",
    "created_at": "2021-04-15T20:54:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509396",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`58110f2`](https://github.com/sagemath/sagetrac-mirror/commit/58110f2ffda1a1736003fe3548586e372e673ba5)** to **[`d815b63`](https://github.com/sagemath/sagetrac-mirror/commit/d815b63da8314abbb03cfc2afc83c40f61f21c78)**



---

archive/issue_comments_509397.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d815b63da8314abbb03cfc2afc83c40f61f21c78\"><code>d815b63</code></a></td><td><code>{DifferentiableSubmanifold,PseudoRiemannianSubmanifold}.open_subset: New</code></td></tr></table>\n",
    "created_at": "2021-04-15T20:54:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509397",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d815b63da8314abbb03cfc2afc83c40f61f21c78"><code>d815b63</code></a></td><td><code>{DifferentiableSubmanifold,PseudoRiemannianSubmanifold}.open_subset: New</code></td></tr></table>




---

archive/issue_comments_509398.json:
```json
{
    "body": "Changed commit from **[`d815b63`](https://github.com/sagemath/sagetrac-mirror/commit/d815b63da8314abbb03cfc2afc83c40f61f21c78)** to **[`004c23a`](https://github.com/sagemath/sagetrac-mirror/commit/004c23a2a059909105224fec4b8a9b046dc4885a)**",
    "created_at": "2021-04-15T21:21:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509398",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d815b63`](https://github.com/sagemath/sagetrac-mirror/commit/d815b63da8314abbb03cfc2afc83c40f61f21c78)** to **[`004c23a`](https://github.com/sagemath/sagetrac-mirror/commit/004c23a2a059909105224fec4b8a9b046dc4885a)**



---

archive/issue_comments_509399.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aac8835cc795dd04ef6ac14bd360d6a5945643d6\"><code>aac8835</code></a></td><td><code>{Topological,Differentiable,PseudoRiemannianSubmanifold}._repr_: Print subsets as subsets</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/004c23a2a059909105224fec4b8a9b046dc4885a\"><code>004c23a</code></a></td><td><code>Add/update examples</code></td></tr></table>\n",
    "created_at": "2021-04-15T21:21:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509399",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aac8835cc795dd04ef6ac14bd360d6a5945643d6"><code>aac8835</code></a></td><td><code>{Topological,Differentiable,PseudoRiemannianSubmanifold}._repr_: Print subsets as subsets</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/004c23a2a059909105224fec4b8a9b046dc4885a"><code>004c23a</code></a></td><td><code>Add/update examples</code></td></tr></table>




---

archive/issue_comments_509400.json:
```json
{
    "body": "Replying to [ticket:31674 mkoeppe]:\n> \n> To implement this, perhaps the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` could be refactored through a new method `open_subset_class`.\n\n>\n\nIt sounds indeed a good idea to refactor the common code in the two (now three) `open_subset` methods! \n\nNote that the comment \n\n```\n#!# update vector frames and change of frames\n```\nin `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet. For example:\n\n```\n\nsage: M = Manifold(2, 'M')                                                                                              \nsage: X.<x,y> = M.chart()                                                                                               \nsage: e0 = M.vector_field(1, 1)                                                                                          \nsage: e1 = M.vector_field(1, -2)                                                                                         \nsage: e = M.vector_frame('e', (e0, e1))                                                                                   \nsage: M.frames()                                                                                                        \n[Coordinate frame (M, (d/dx,d/dy)), Vector frame (M, (e_0,e_1))]\nsage: U = M.open_subset('U', coord_def={X: x>0})                                                                        \nsage: U.frames()                                                                                                        \n[Coordinate frame (U, (d/dx,d/dy))]\n```\nThe vector frame `e` is thus not transmitted to `U`. Of course, this can be achieved at any moment by the method `restrict`: \n\n```\nsage: e.restrict(U)                                                                                                     \nVector frame (U, (e_0,e_1))\nsage: U.frames()                                                                                                        \n[Coordinate frame (U, (d/dx,d/dy)), Vector frame (U, (e_0,e_1))]\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aac8835cc795dd04ef6ac14bd360d6a5945643d6\"><code>aac8835</code></a></td><td><code>{Topological,Differentiable,PseudoRiemannianSubmanifold}._repr_: Print subsets as subsets</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/004c23a2a059909105224fec4b8a9b046dc4885a\"><code>004c23a</code></a></td><td><code>Add/update examples</code></td></tr></table>\n",
    "created_at": "2021-04-15T21:25:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509400",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [ticket:31674 mkoeppe]:
> 
> To implement this, perhaps the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` could be refactored through a new method `open_subset_class`.

>

It sounds indeed a good idea to refactor the common code in the two (now three) `open_subset` methods! 

Note that the comment 

```
#!# update vector frames and change of frames
```
in `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet. For example:

```

sage: M = Manifold(2, 'M')                                                                                              
sage: X.<x,y> = M.chart()                                                                                               
sage: e0 = M.vector_field(1, 1)                                                                                          
sage: e1 = M.vector_field(1, -2)                                                                                         
sage: e = M.vector_frame('e', (e0, e1))                                                                                   
sage: M.frames()                                                                                                        
[Coordinate frame (M, (d/dx,d/dy)), Vector frame (M, (e_0,e_1))]
sage: U = M.open_subset('U', coord_def={X: x>0})                                                                        
sage: U.frames()                                                                                                        
[Coordinate frame (U, (d/dx,d/dy))]
```
The vector frame `e` is thus not transmitted to `U`. Of course, this can be achieved at any moment by the method `restrict`: 

```
sage: e.restrict(U)                                                                                                     
Vector frame (U, (e_0,e_1))
sage: U.frames()                                                                                                        
[Coordinate frame (U, (d/dx,d/dy)), Vector frame (U, (e_0,e_1))]
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aac8835cc795dd04ef6ac14bd360d6a5945643d6"><code>aac8835</code></a></td><td><code>{Topological,Differentiable,PseudoRiemannianSubmanifold}._repr_: Print subsets as subsets</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/004c23a2a059909105224fec4b8a9b046dc4885a"><code>004c23a</code></a></td><td><code>Add/update examples</code></td></tr></table>




---

archive/issue_comments_509401.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@egourgoulhon](#comment:9):\n> Replying to [ticket:31674 mkoeppe]:\n> Note that the comment \n> \n> ```\n> #!# update vector frames and change of frames\n> ```\n> in `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet. \n\nYes, I have faithfully copied these TODO markers. Should this be implemented on this ticket?",
    "created_at": "2021-04-15T21:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509401",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@egourgoulhon](#comment:9):
> Replying to [ticket:31674 mkoeppe]:
> Note that the comment 
> 
> ```
> #!# update vector frames and change of frames
> ```
> in `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet. 

Yes, I have faithfully copied these TODO markers. Should this be implemented on this ticket?



---

archive/issue_comments_509402.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@mkoeppe](#comment:10):\n> Replying to [@egourgoulhon](#comment:9):\n> > Replying to [ticket:31674 mkoeppe]:\n> > Note that the comment \n> > \n> > ```\n> > #!# update vector frames and change of frames\n> > ```\n> > in `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet. \n\n> \n> Yes, I have faithfully copied these TODO markers. Should this be implemented on this ticket?\n> \n\nMaybe. I leave it to you. Actually, I don't remember why this was not implemented in the first version of the `open_subset` method.",
    "created_at": "2021-04-15T21:33:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509402",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@mkoeppe](#comment:10):
> Replying to [@egourgoulhon](#comment:9):
> > Replying to [ticket:31674 mkoeppe]:
> > Note that the comment 
> > 
> > ```
> > #!# update vector frames and change of frames
> > ```
> > in `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet. 

> 
> Yes, I have faithfully copied these TODO markers. Should this be implemented on this ticket?
> 

Maybe. I leave it to you. Actually, I don't remember why this was not implemented in the first version of the `open_subset` method.



---

archive/issue_comments_509403.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI'll leave this for another ticket then.\n\nI will do the refactoring using a new method `_init_open_subset`",
    "created_at": "2021-04-15T21:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509403",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

I'll leave this for another ticket then.

I will do the refactoring using a new method `_init_open_subset`



---

archive/issue_comments_509404.json:
```json
{
    "body": "Changed commit from **[`004c23a`](https://github.com/sagemath/sagetrac-mirror/commit/004c23a2a059909105224fec4b8a9b046dc4885a)** to **[`ef1614a`](https://github.com/sagemath/sagetrac-mirror/commit/ef1614aafe5cabdce11443809ca932125105253b)**",
    "created_at": "2021-04-15T21:58:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509404",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`004c23a`](https://github.com/sagemath/sagetrac-mirror/commit/004c23a2a059909105224fec4b8a9b046dc4885a)** to **[`ef1614a`](https://github.com/sagemath/sagetrac-mirror/commit/ef1614aafe5cabdce11443809ca932125105253b)**



---

archive/issue_comments_509405.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef1614aafe5cabdce11443809ca932125105253b\"><code>ef1614a</code></a></td><td><code>Refactor Manifold.open_subset methods through new method _init_open_subset</code></td></tr></table>\n",
    "created_at": "2021-04-15T21:58:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509405",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef1614aafe5cabdce11443809ca932125105253b"><code>ef1614a</code></a></td><td><code>Refactor Manifold.open_subset methods through new method _init_open_subset</code></td></tr></table>




---

archive/issue_comments_509406.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nHere's the proposed refactoring.",
    "created_at": "2021-04-15T21:58:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509406",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Here's the proposed refactoring.



---

archive/issue_events_433769.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-15T21:59:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31674#event-433769"
}
```



---

archive/issue_comments_509407.json:
```json
{
    "body": "Reviewer: **Eric Gourgoulhon**",
    "created_at": "2021-04-16T10:18:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509407",
    "user": "https://github.com/egourgoulhon"
}
```

Reviewer: **Eric Gourgoulhon**



---

archive/issue_comments_509408.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nLGTM.\n\nCould you please fix the coverage issues? (no docstest in the two methods `_init_open_subset`)",
    "created_at": "2021-04-16T10:18:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509408",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:16" align="right">comment:16</div>

LGTM.

Could you please fix the coverage issues? (no docstest in the two methods `_init_open_subset`)



---

archive/issue_comments_509409.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/265b0e26d3db8fea35eec87b5ef9497b8f0ddfab\"><code>265b0e2</code></a></td><td><code>TopologicalManifold._init_open_subset: Add docstring</code></td></tr></table>\n",
    "created_at": "2021-04-16T15:42:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509409",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/265b0e26d3db8fea35eec87b5ef9497b8f0ddfab"><code>265b0e2</code></a></td><td><code>TopologicalManifold._init_open_subset: Add docstring</code></td></tr></table>




---

archive/issue_comments_509410.json:
```json
{
    "body": "Changed commit from **[`ef1614a`](https://github.com/sagemath/sagetrac-mirror/commit/ef1614aafe5cabdce11443809ca932125105253b)** to **[`265b0e2`](https://github.com/sagemath/sagetrac-mirror/commit/265b0e26d3db8fea35eec87b5ef9497b8f0ddfab)**",
    "created_at": "2021-04-16T15:42:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509410",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ef1614a`](https://github.com/sagemath/sagetrac-mirror/commit/ef1614aafe5cabdce11443809ca932125105253b)** to **[`265b0e2`](https://github.com/sagemath/sagetrac-mirror/commit/265b0e26d3db8fea35eec87b5ef9497b8f0ddfab)**



---

archive/issue_comments_509411.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nFirst of several docstrings, more to come",
    "created_at": "2021-04-16T15:42:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509411",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

First of several docstrings, more to come



---

archive/issue_comments_509412.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nA question: Should this method rather be invoked by the `__init__` method of the subset whenever `base_manifold` is passed?",
    "created_at": "2021-04-16T16:18:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509412",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

A question: Should this method rather be invoked by the `__init__` method of the subset whenever `base_manifold` is passed?



---

archive/issue_comments_509413.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@mkoeppe](#comment:19):\n> A question: Should this method rather be invoked by the `__init__` method of the subset whenever `base_manifold` is passed?\n\nYes, why not?",
    "created_at": "2021-04-16T16:45:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509413",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@mkoeppe](#comment:19):
> A question: Should this method rather be invoked by the `__init__` method of the subset whenever `base_manifold` is passed?

Yes, why not?



---

archive/issue_comments_509414.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nOK, then I will rewrite it like this.",
    "created_at": "2021-04-16T16:49:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509414",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

OK, then I will rewrite it like this.



---

archive/issue_comments_509415.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@mkoeppe](#comment:21):\n> OK, then I will rewrite it like this.\n\nGiving a second thought, this seems indeed a good idea! It makes the object returned by `__init__` as \"finished\" as possible.",
    "created_at": "2021-04-16T17:29:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509415",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@mkoeppe](#comment:21):
> OK, then I will rewrite it like this.

Giving a second thought, this seems indeed a good idea! It makes the object returned by `__init__` as "finished" as possible.



---

archive/issue_comments_509416.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nJust will add one more keyword arg to `__init__`, but I think that should be fine.",
    "created_at": "2021-04-16T18:14:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509416",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

Just will add one more keyword arg to `__init__`, but I think that should be fine.



---

archive/issue_comments_509417.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI think I would also like to move `TopologicalManifold.open_subset` to its superclass `ManifoldSubset`.",
    "created_at": "2021-04-16T18:16:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509417",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

I think I would also like to move `TopologicalManifold.open_subset` to its superclass `ManifoldSubset`.



---

archive/issue_comments_509418.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@mkoeppe](#comment:24):\n> I think I would also like to move `TopologicalManifold.open_subset` to its superclass `ManifoldSubset`.\n\nI'll do this in #31677.",
    "created_at": "2021-04-17T03:35:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509418",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@mkoeppe](#comment:24):
> I think I would also like to move `TopologicalManifold.open_subset` to its superclass `ManifoldSubset`.

I'll do this in #31677.



---

archive/issue_comments_509419.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@egourgoulhon](#comment:22):\n> Replying to [@mkoeppe](#comment:21):\n> > OK, then I will rewrite it like this.\n\n> Giving a second thought, this seems indeed a good idea! It makes the object returned by `__init__` as \"finished\" as possible. \n\nI tried this approach but it led to complicated changes. Too much for one ticket. So I'll revert to the original plan, completing this ticket by adding docstrings for `_init_open_subset`. An immediate follow-up is #31677.",
    "created_at": "2021-04-17T03:37:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509419",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@egourgoulhon](#comment:22):
> Replying to [@mkoeppe](#comment:21):
> > OK, then I will rewrite it like this.

> Giving a second thought, this seems indeed a good idea! It makes the object returned by `__init__` as "finished" as possible. 

I tried this approach but it led to complicated changes. Too much for one ticket. So I'll revert to the original plan, completing this ticket by adding docstrings for `_init_open_subset`. An immediate follow-up is #31677.



---

archive/issue_comments_509420.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@egourgoulhon](#comment:9):\n> Note that the comment \n> \n> ```\n> #!# update vector frames and change of frames\n> ```\n> in `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet.\n\nI've opened #31678 for this",
    "created_at": "2021-04-17T03:59:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509420",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@egourgoulhon](#comment:9):
> Note that the comment 
> 
> ```
> #!# update vector frames and change of frames
> ```
> in `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet.

I've opened #31678 for this



---

archive/issue_comments_509421.json:
```json
{
    "body": "Changed commit from **[`265b0e2`](https://github.com/sagemath/sagetrac-mirror/commit/265b0e26d3db8fea35eec87b5ef9497b8f0ddfab)** to **[`58b43f7`](https://github.com/sagemath/sagetrac-mirror/commit/58b43f7902296384dade8a617441e205956d9824)**",
    "created_at": "2021-04-17T04:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509421",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`265b0e2`](https://github.com/sagemath/sagetrac-mirror/commit/265b0e26d3db8fea35eec87b5ef9497b8f0ddfab)** to **[`58b43f7`](https://github.com/sagemath/sagetrac-mirror/commit/58b43f7902296384dade8a617441e205956d9824)**



---

archive/issue_comments_509422.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a93f7ed196b5a8ac98dadb0afed641c60a9827cf\"><code>a93f7ed</code></a></td><td><code>TopologicalSubmanifold._init_open_subset: Add docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58b43f7902296384dade8a617441e205956d9824\"><code>58b43f7</code></a></td><td><code>DifferentiableManifold._init_open_subset: Add docstring</code></td></tr></table>\n",
    "created_at": "2021-04-17T04:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509422",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a93f7ed196b5a8ac98dadb0afed641c60a9827cf"><code>a93f7ed</code></a></td><td><code>TopologicalSubmanifold._init_open_subset: Add docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58b43f7902296384dade8a617441e205956d9824"><code>58b43f7</code></a></td><td><code>DifferentiableManifold._init_open_subset: Add docstring</code></td></tr></table>




---

archive/issue_comments_509423.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReady for review",
    "created_at": "2021-04-17T04:51:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509423",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Ready for review



---

archive/issue_comments_509424.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@mkoeppe](#comment:26):\n> Replying to [@egourgoulhon](#comment:22):\n> > Giving a second thought, this seems indeed a good idea! It makes the object returned by `__init__` as \"finished\" as possible. \n\n> \n> I tried this approach but it led to complicated changes. Too much for one ticket. So I'll revert to the original plan, completing this ticket by adding docstrings for `_init_open_subset`. An immediate follow-up is #31677.\n> \n\nOK, very good. \nThanks for your work!",
    "created_at": "2021-04-17T08:10:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509424",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@mkoeppe](#comment:26):
> Replying to [@egourgoulhon](#comment:22):
> > Giving a second thought, this seems indeed a good idea! It makes the object returned by `__init__` as "finished" as possible. 

> 
> I tried this approach but it led to complicated changes. Too much for one ticket. So I'll revert to the original plan, completing this ticket by adding docstrings for `_init_open_subset`. An immediate follow-up is #31677.
> 

OK, very good. 
Thanks for your work!



---

archive/issue_events_433770.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2021-04-17T08:10:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31674#event-433770"
}
```



---

archive/issue_events_433771.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2021-04-17T08:10:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31674#event-433771"
}
```



---

archive/issue_comments_509425.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nIs there a way to get rid of the various copies of\n\n```diff\n+        if self is not self._manifold:\n+            return \"Open subset {} of the {}\".format(self._name, self._manifold)\n```\n\nand delegate it?",
    "created_at": "2021-04-17T08:17:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509425",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:31" align="right">comment:31</div>

Is there a way to get rid of the various copies of

```diff
+        if self is not self._manifold:
+            return "Open subset {} of the {}".format(self._name, self._manifold)
```

and delegate it?



---

archive/issue_comments_509426.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nWell, the `_repr_` methods in their entirety are there in multiple copies. This could be simplified, but not on this ticket.",
    "created_at": "2021-04-17T15:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509426",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Well, the `_repr_` methods in their entirety are there in multiple copies. This could be simplified, but not on this ticket.



---

archive/issue_comments_509427.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThanks for the review!",
    "created_at": "2021-04-17T15:50:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509427",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

Thanks for the review!



---

archive/issue_comments_509428.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@mkoeppe](#comment:32):\n> Well, the `_repr_` methods in their entirety are there in multiple copies. This could be simplified, but not on this ticket.\n\nRight, makes sense.\n\nNice work though! :)",
    "created_at": "2021-04-17T16:44:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509428",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@mkoeppe](#comment:32):
> Well, the `_repr_` methods in their entirety are there in multiple copies. This could be simplified, but not on this ticket.

Right, makes sense.

Nice work though! :)



---

archive/issue_comments_509429.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n This would be convenient for example for #31660.\n \n-To implement this, perhaps the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` could be refactored through a new method `open_subset_class`.\n+To implement this, we refactor the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` through a new method `_init_open_subset`.\n \n \n``````\n",
    "created_at": "2021-04-18T00:57:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509429",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 This would be convenient for example for #31660.
 
-To implement this, perhaps the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` could be refactored through a new method `open_subset_class`.
+To implement this, we refactor the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` through a new method `_init_open_subset`.
 
 
``````




---

archive/issue_events_433772.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-06T13:18:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31674#event-433772"
}
```



---

archive/issue_events_433773.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "24c78cf7f309438780faa8b4bbb3652647f8c6e4",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-06-06T13:18:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31674#event-433773"
}
```



---

archive/issue_comments_509430.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/make_open_subsets_of_immersed_embedded_submanifolds_immersed_embedded_submanifolds](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_open_subsets_of_immersed_embedded_submanifolds_immersed_embedded_submanifolds)** to **[`58b43f7`](https://github.com/sagemath/sagetrac-mirror/commit/58b43f7902296384dade8a617441e205956d9824)**",
    "created_at": "2021-06-06T13:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31674#issuecomment-509430",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/make_open_subsets_of_immersed_embedded_submanifolds_immersed_embedded_submanifolds](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_open_subsets_of_immersed_embedded_submanifolds_immersed_embedded_submanifolds)** to **[`58b43f7`](https://github.com/sagemath/sagetrac-mirror/commit/58b43f7902296384dade8a617441e205956d9824)**
