# Issue 31674: Make open subsets of immersed/embedded submanifolds immersed/embedded submanifolds

archive/issues_031437.json:
```json
{
    "body": "This would be convenient for example for #31660.\n\nTo implement this, we refactor the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` through a new method `_init_open_subset`.\n\n\n\nCC:  @mjungmath @egourgoulhon @tscrim\n\nBranch/Commit: 58b43f7902296384dade8a617441e205956d9824\n\nReviewer: Eric Gourgoulhon\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31674\n\n",
    "closed_at": "2021-06-06T13:18:03Z",
    "created_at": "2021-04-15T17:00:38Z",
    "labels": [
        "component: manifolds"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Make open subsets of immersed/embedded submanifolds immersed/embedded submanifolds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31674",
    "user": "https://github.com/mkoeppe"
}
```
This would be convenient for example for #31660.

To implement this, we refactor the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` through a new method `_init_open_subset`.



CC:  @mjungmath @egourgoulhon @tscrim

Branch/Commit: 58b43f7902296384dade8a617441e205956d9824

Reviewer: Eric Gourgoulhon

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31674





---

archive/issue_comments_630080.json:
```json
{
    "body": "<a id='comment:1'></a>Why not simply overwriting `open_subset` in `TopologicalSubmanifold` etc.?",
    "created_at": "2021-04-15T19:14:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630080",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:1'></a>Why not simply overwriting `open_subset` in `TopologicalSubmanifold` etc.?



---

archive/issue_comments_630081.json:
```json
{
    "body": "<a id='comment:2'></a>It would lead to at least 3 more copies of the same code",
    "created_at": "2021-04-15T20:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630081",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>It would lead to at least 3 more copies of the same code



---

archive/issue_comments_630082.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/make_open_subsets_of_immersed_embedded_submanifolds_immersed_embedded_submanifolds\"",
    "created_at": "2021-04-15T20:33:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630082",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/make_open_subsets_of_immersed_embedded_submanifolds_immersed_embedded_submanifolds"



---

archive/issue_comments_630083.json:
```json
{
    "body": "Changing commit from \"\" to \"1f6f2958ef44a3d9b00644d8b820851c33484aa0\"",
    "created_at": "2021-04-15T20:34:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630083",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "1f6f2958ef44a3d9b00644d8b820851c33484aa0"



---

archive/issue_comments_630084.json:
```json
{
    "body": "<a id='comment:4'></a>Here's the first copy\n\n---\nNew commits:",
    "created_at": "2021-04-15T20:34:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630084",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>Here's the first copy

---
New commits:



---

archive/issue_comments_630085.json:
```json
{
    "body": "Changing commit from \"1f6f2958ef44a3d9b00644d8b820851c33484aa0\" to \"58110f2ffda1a1736003fe3548586e372e673ba5\"",
    "created_at": "2021-04-15T20:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630085",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1f6f2958ef44a3d9b00644d8b820851c33484aa0" to "58110f2ffda1a1736003fe3548586e372e673ba5"



---

archive/issue_comments_630086.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-15T20:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630086",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_630087.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2021-04-15T20:40:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630087",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_630088.json:
```json
{
    "body": "Changing commit from \"58110f2ffda1a1736003fe3548586e372e673ba5\" to \"d815b63da8314abbb03cfc2afc83c40f61f21c78\"",
    "created_at": "2021-04-15T20:54:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630088",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "58110f2ffda1a1736003fe3548586e372e673ba5" to "d815b63da8314abbb03cfc2afc83c40f61f21c78"



---

archive/issue_comments_630089.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-15T20:54:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630089",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_630090.json:
```json
{
    "body": "Changing commit from \"d815b63da8314abbb03cfc2afc83c40f61f21c78\" to \"004c23a2a059909105224fec4b8a9b046dc4885a\"",
    "created_at": "2021-04-15T21:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630090",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d815b63da8314abbb03cfc2afc83c40f61f21c78" to "004c23a2a059909105224fec4b8a9b046dc4885a"



---

archive/issue_comments_630091.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-15T21:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630091",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_630092.json:
```json
{
    "body": "Replying to [ticket:31674 mkoeppe]:\n> \n> To implement this, perhaps the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` could be refactored through a new method `open_subset_class`.\n\n>\nIt sounds indeed a good idea to refactor the common code in the two (now three) `open_subset` methods! \n\nNote that the comment \n\n```# update vector frames and change of frames\n```\nin `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet. For example:\n\n```\n\nsage: M = Manifold(2, 'M')                                                                                              \nsage: X.<x,y> = M.chart()                                                                                               \nsage: e0 = M.vector_field(1, 1)                                                                                          \nsage: e1 = M.vector_field(1, -2)                                                                                         \nsage: e = M.vector_frame('e', (e0, e1))                                                                                   \nsage: M.frames()                                                                                                        \n[Coordinate frame (M, (d/dx,d/dy)), Vector frame (M, (e_0,e_1))]\nsage: U = M.open_subset('U', coord_def={X: x>0})                                                                        \nsage: U.frames()                                                                                                        \n[Coordinate frame (U, (d/dx,d/dy))]\n```\nThe vector frame `e` is thus not transmitted to `U`. Of course, this can be achieved at any moment by the method `restrict`: \n\n```\nsage: e.restrict(U)                                                                                                     \nVector frame (U, (e_0,e_1))\nsage: U.frames()                                                                                                        \n[Coordinate frame (U, (d/dx,d/dy)), Vector frame (U, (e_0,e_1))]\n```\n\n---\nNew commits:",
    "created_at": "2021-04-15T21:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630092",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [ticket:31674 mkoeppe]:
> 
> To implement this, perhaps the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` could be refactored through a new method `open_subset_class`.

>
It sounds indeed a good idea to refactor the common code in the two (now three) `open_subset` methods! 

Note that the comment 

```# update vector frames and change of frames
```
in `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet. For example:

```

sage: M = Manifold(2, 'M')                                                                                              
sage: X.<x,y> = M.chart()                                                                                               
sage: e0 = M.vector_field(1, 1)                                                                                          
sage: e1 = M.vector_field(1, -2)                                                                                         
sage: e = M.vector_frame('e', (e0, e1))                                                                                   
sage: M.frames()                                                                                                        
[Coordinate frame (M, (d/dx,d/dy)), Vector frame (M, (e_0,e_1))]
sage: U = M.open_subset('U', coord_def={X: x>0})                                                                        
sage: U.frames()                                                                                                        
[Coordinate frame (U, (d/dx,d/dy))]
```
The vector frame `e` is thus not transmitted to `U`. Of course, this can be achieved at any moment by the method `restrict`: 

```
sage: e.restrict(U)                                                                                                     
Vector frame (U, (e_0,e_1))
sage: U.frames()                                                                                                        
[Coordinate frame (U, (d/dx,d/dy)), Vector frame (U, (e_0,e_1))]
```

---
New commits:



---

archive/issue_comments_630093.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [egourgoulhon](#comment%3A9):\n> Replying to [ticket:31674 mkoeppe]:\n> Note that the comment \n> \n> ```\n> #!# update vector frames and change of frames\n> ```\n> in `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet. \n\n\nYes, I have faithfully copied these TODO markers. Should this be implemented on this ticket?",
    "created_at": "2021-04-15T21:28:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630093",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Replying to [egourgoulhon](#comment%3A9):
> Replying to [ticket:31674 mkoeppe]:
> Note that the comment 
> 
> ```
> #!# update vector frames and change of frames
> ```
> in `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet. 


Yes, I have faithfully copied these TODO markers. Should this be implemented on this ticket?



---

archive/issue_comments_630094.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [mkoeppe](#comment%3A10):\n> Replying to [egourgoulhon](#comment%3A9):\n> > Replying to [ticket:31674 mkoeppe]:\n> > Note that the comment \n> > \n> > ```\n> > #!# update vector frames and change of frames\n> > ```\n> > in `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet. \n\n> \n> Yes, I have faithfully copied these TODO markers. Should this be implemented on this ticket?\n> \nMaybe. I leave it to you. Actually, I don't remember why this was not implemented in the first version of the `open_subset` method.",
    "created_at": "2021-04-15T21:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630094",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:11'></a>Replying to [mkoeppe](#comment%3A10):
> Replying to [egourgoulhon](#comment%3A9):
> > Replying to [ticket:31674 mkoeppe]:
> > Note that the comment 
> > 
> > ```
> > #!# update vector frames and change of frames
> > ```
> > in `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet. 

> 
> Yes, I have faithfully copied these TODO markers. Should this be implemented on this ticket?
> 
Maybe. I leave it to you. Actually, I don't remember why this was not implemented in the first version of the `open_subset` method.



---

archive/issue_comments_630095.json:
```json
{
    "body": "<a id='comment:12'></a>I'll leave this for another ticket then.\n\nI will do the refactoring using a new method `_init_open_subset`",
    "created_at": "2021-04-15T21:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630095",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>I'll leave this for another ticket then.

I will do the refactoring using a new method `_init_open_subset`



---

archive/issue_comments_630096.json:
```json
{
    "body": "Changing commit from \"004c23a2a059909105224fec4b8a9b046dc4885a\" to \"ef1614aafe5cabdce11443809ca932125105253b\"",
    "created_at": "2021-04-15T21:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630096",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "004c23a2a059909105224fec4b8a9b046dc4885a" to "ef1614aafe5cabdce11443809ca932125105253b"



---

archive/issue_comments_630097.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-15T21:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630097",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_630098.json:
```json
{
    "body": "<a id='comment:14'></a>Here's the proposed refactoring.",
    "created_at": "2021-04-15T21:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630098",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Here's the proposed refactoring.



---

archive/issue_comments_630099.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-04-15T21:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630099",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_630100.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Eric Gourgoulhon\"",
    "created_at": "2021-04-16T10:18:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630100",
    "user": "https://github.com/egourgoulhon"
}
```

Changing reviewer from "" to "Eric Gourgoulhon"



---

archive/issue_comments_630101.json:
```json
{
    "body": "<a id='comment:16'></a>LGTM.\n\nCould you please fix the coverage issues? (no docstest in the two methods `_init_open_subset`)",
    "created_at": "2021-04-16T10:18:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630101",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:16'></a>LGTM.

Could you please fix the coverage issues? (no docstest in the two methods `_init_open_subset`)



---

archive/issue_comments_630102.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-16T15:42:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630102",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_630103.json:
```json
{
    "body": "Changing commit from \"ef1614aafe5cabdce11443809ca932125105253b\" to \"265b0e26d3db8fea35eec87b5ef9497b8f0ddfab\"",
    "created_at": "2021-04-16T15:42:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630103",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ef1614aafe5cabdce11443809ca932125105253b" to "265b0e26d3db8fea35eec87b5ef9497b8f0ddfab"



---

archive/issue_comments_630104.json:
```json
{
    "body": "<a id='comment:18'></a>First of several docstrings, more to come",
    "created_at": "2021-04-16T15:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630104",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>First of several docstrings, more to come



---

archive/issue_comments_630105.json:
```json
{
    "body": "<a id='comment:19'></a>A question: Should this method rather be invoked by the `__init__` method of the subset whenever `base_manifold` is passed?",
    "created_at": "2021-04-16T16:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630105",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>A question: Should this method rather be invoked by the `__init__` method of the subset whenever `base_manifold` is passed?



---

archive/issue_comments_630106.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [mkoeppe](#comment%3A19):\n> A question: Should this method rather be invoked by the `__init__` method of the subset whenever `base_manifold` is passed?\n\nYes, why not?",
    "created_at": "2021-04-16T16:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630106",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:20'></a>Replying to [mkoeppe](#comment%3A19):
> A question: Should this method rather be invoked by the `__init__` method of the subset whenever `base_manifold` is passed?

Yes, why not?



---

archive/issue_comments_630107.json:
```json
{
    "body": "<a id='comment:21'></a>OK, then I will rewrite it like this.",
    "created_at": "2021-04-16T16:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630107",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>OK, then I will rewrite it like this.



---

archive/issue_comments_630108.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [mkoeppe](#comment%3A21):\n> OK, then I will rewrite it like this.\n\nGiving a second thought, this seems indeed a good idea! It makes the object returned by `__init__` as \"finished\" as possible.",
    "created_at": "2021-04-16T17:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630108",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:22'></a>Replying to [mkoeppe](#comment%3A21):
> OK, then I will rewrite it like this.

Giving a second thought, this seems indeed a good idea! It makes the object returned by `__init__` as "finished" as possible.



---

archive/issue_comments_630109.json:
```json
{
    "body": "<a id='comment:23'></a>Just will add one more keyword arg to `__init__`, but I think that should be fine.",
    "created_at": "2021-04-16T18:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630109",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>Just will add one more keyword arg to `__init__`, but I think that should be fine.



---

archive/issue_comments_630110.json:
```json
{
    "body": "<a id='comment:24'></a>I think I would also like to move `TopologicalManifold.open_subset` to its superclass `ManifoldSubset`.",
    "created_at": "2021-04-16T18:16:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630110",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>I think I would also like to move `TopologicalManifold.open_subset` to its superclass `ManifoldSubset`.



---

archive/issue_comments_630111.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [mkoeppe](#comment%3A24):\n> I think I would also like to move `TopologicalManifold.open_subset` to its superclass `ManifoldSubset`.\n\n\nI'll do this in #31677.",
    "created_at": "2021-04-17T03:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630111",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>Replying to [mkoeppe](#comment%3A24):
> I think I would also like to move `TopologicalManifold.open_subset` to its superclass `ManifoldSubset`.


I'll do this in #31677.



---

archive/issue_comments_630112.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [egourgoulhon](#comment%3A22):\n> Replying to [mkoeppe](#comment%3A21):\n> > OK, then I will rewrite it like this.\n\n> Giving a second thought, this seems indeed a good idea! It makes the object returned by `__init__` as \"finished\" as possible. \n\nI tried this approach but it led to complicated changes. Too much for one ticket. So I'll revert to the original plan, completing this ticket by adding docstrings for `_init_open_subset`. An immediate follow-up is #31677.",
    "created_at": "2021-04-17T03:37:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630112",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>Replying to [egourgoulhon](#comment%3A22):
> Replying to [mkoeppe](#comment%3A21):
> > OK, then I will rewrite it like this.

> Giving a second thought, this seems indeed a good idea! It makes the object returned by `__init__` as "finished" as possible. 

I tried this approach but it led to complicated changes. Too much for one ticket. So I'll revert to the original plan, completing this ticket by adding docstrings for `_init_open_subset`. An immediate follow-up is #31677.



---

archive/issue_comments_630113.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [egourgoulhon](#comment%3A9):\n> Note that the comment \n> \n> ```\n> #!# update vector frames and change of frames\n> ```\n> in `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet.\n\n\nI've opened #31678 for this",
    "created_at": "2021-04-17T03:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630113",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>Replying to [egourgoulhon](#comment%3A9):
> Note that the comment 
> 
> ```
> #!# update vector frames and change of frames
> ```
> in `DifferentiableManifold.open_subset` means that vector frames that are not coordinate frames could be inherited from those on the ambient manifold. I've put the marker `#!#` to indicate that this is not implemented yet.


I've opened #31678 for this



---

archive/issue_comments_630114.json:
```json
{
    "body": "Changing commit from \"265b0e26d3db8fea35eec87b5ef9497b8f0ddfab\" to \"58b43f7902296384dade8a617441e205956d9824\"",
    "created_at": "2021-04-17T04:48:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630114",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "265b0e26d3db8fea35eec87b5ef9497b8f0ddfab" to "58b43f7902296384dade8a617441e205956d9824"



---

archive/issue_comments_630115.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-04-17T04:48:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630115",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_630116.json:
```json
{
    "body": "<a id='comment:29'></a>Ready for review",
    "created_at": "2021-04-17T04:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630116",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>Ready for review



---

archive/issue_comments_630117.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [mkoeppe](#comment%3A26):\n> Replying to [egourgoulhon](#comment%3A22):\n> > Giving a second thought, this seems indeed a good idea! It makes the object returned by `__init__` as \"finished\" as possible. \n\n> \n> I tried this approach but it led to complicated changes. Too much for one ticket. So I'll revert to the original plan, completing this ticket by adding docstrings for `_init_open_subset`. An immediate follow-up is #31677.\n> \n\n\nOK, very good. \nThanks for your work!",
    "created_at": "2021-04-17T08:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630117",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:30'></a>Replying to [mkoeppe](#comment%3A26):
> Replying to [egourgoulhon](#comment%3A22):
> > Giving a second thought, this seems indeed a good idea! It makes the object returned by `__init__` as "finished" as possible. 

> 
> I tried this approach but it led to complicated changes. Too much for one ticket. So I'll revert to the original plan, completing this ticket by adding docstrings for `_init_open_subset`. An immediate follow-up is #31677.
> 


OK, very good. 
Thanks for your work!



---

archive/issue_comments_630118.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-04-17T08:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630118",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_630119.json:
```json
{
    "body": "<a id='comment:31'></a>Is there a way to get rid of the various copies of\n\n```diff\n+        if self is not self._manifold:\n+            return \"Open subset {} of the {}\".format(self._name, self._manifold)\n```\n\nand delegate it?",
    "created_at": "2021-04-17T08:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630119",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:31'></a>Is there a way to get rid of the various copies of

```diff
+        if self is not self._manifold:
+            return "Open subset {} of the {}".format(self._name, self._manifold)
```

and delegate it?



---

archive/issue_comments_630120.json:
```json
{
    "body": "<a id='comment:32'></a>Well, the `_repr_` methods in their entirety are there in multiple copies. This could be simplified, but not on this ticket.",
    "created_at": "2021-04-17T15:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630120",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>Well, the `_repr_` methods in their entirety are there in multiple copies. This could be simplified, but not on this ticket.



---

archive/issue_comments_630121.json:
```json
{
    "body": "<a id='comment:33'></a>Thanks for the review!",
    "created_at": "2021-04-17T15:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630121",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>Thanks for the review!



---

archive/issue_comments_630122.json:
```json
{
    "body": "<a id='comment:34'></a>Replying to [mkoeppe](#comment%3A32):\n> Well, the `_repr_` methods in their entirety are there in multiple copies. This could be simplified, but not on this ticket.\n\n\nRight, makes sense.\n\nNice work though! :)",
    "created_at": "2021-04-17T16:44:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630122",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:34'></a>Replying to [mkoeppe](#comment%3A32):
> Well, the `_repr_` methods in their entirety are there in multiple copies. This could be simplified, but not on this ticket.


Right, makes sense.

Nice work though! :)



---

archive/issue_comments_630123.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n This would be convenient for example for #31660.\n \n-To implement this, perhaps the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` could be refactored through a new method `open_subset_class`.\n+To implement this, we refactor the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` through a new method `_init_open_subset`.\n \n \n``````\n",
    "created_at": "2021-04-18T00:57:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630123",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 This would be convenient for example for #31660.
 
-To implement this, perhaps the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` could be refactored through a new method `open_subset_class`.
+To implement this, we refactor the method `open_subset`, already now duplicated between `TopologicalManifold` and `DifferentiableManifold` through a new method `_init_open_subset`.
 
 
``````




---

archive/issue_events_083503.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-06T13:18:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31674#event-83503"
}
```



---

archive/issue_comments_630124.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/make_open_subsets_of_immersed_embedded_submanifolds_immersed_embedded_submanifolds\" to \"58b43f7902296384dade8a617441e205956d9824\"",
    "created_at": "2021-06-06T13:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630124",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/make_open_subsets_of_immersed_embedded_submanifolds_immersed_embedded_submanifolds" to "58b43f7902296384dade8a617441e205956d9824"



---

archive/issue_comments_630125.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-06T13:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31674",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31674#issuecomment-630125",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
