# Issue 31366: docbuild: switch from optparse to argparse

archive/issues_031129.json:
```json
{
    "assignees": [],
    "body": "Sage's docbuilding uses [optparse](https://docs.python.org/3/library/optparse.html) for argument parsing, but this library has been deprecated for a while. We should switch to [argparse](https://docs.python.org/3/library/argparse.html).\n\nSome instructions for conversions can be found here: https://docs.python.org/3/library/argparse.html#help\n\nDepends on #32946\n\nBranch/Commit: **[`0b62c16`](https://github.com/sagemath/sagetrac-mirror/commit/0b62c166044271f0b7db4f42bb174e560562a364)**\n\nReviewer: **John Palmieri**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **documentation**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/31366_\n\n",
    "closed_at": "2021-12-12T15:08:59Z",
    "created_at": "2021-02-09T03:05:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20documentation",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "docbuild: switch from optparse to argparse",
    "type": "issue",
    "updated_at": "2021-12-12T15:08:59Z",
    "url": "https://github.com/sagemath/sage/issues/31366",
    "user": "https://github.com/jhpalmieri"
}
```
Sage's docbuilding uses [optparse](https://docs.python.org/3/library/optparse.html) for argument parsing, but this library has been deprecated for a while. We should switch to [argparse](https://docs.python.org/3/library/argparse.html).

Some instructions for conversions can be found here: https://docs.python.org/3/library/argparse.html#help

Depends on #32946

Branch/Commit: **[`0b62c16`](https://github.com/sagemath/sagetrac-mirror/commit/0b62c166044271f0b7db4f42bb174e560562a364)**

Reviewer: **John Palmieri**

Author: **Frédéric Chapoton**

Component: **documentation**

_Issue created by migration from https://trac.sagemath.org/ticket/31366_





---

archive/issue_events_432328.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-02-09T03:05:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432328"
}
```



---

archive/issue_events_432329.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-02-09T03:05:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "c: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432329"
}
```



---

archive/issue_events_432330.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-02-09T03:05:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432330"
}
```



---

archive/issue_events_432331.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-02-09T03:05:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432331"
}
```



---

archive/issue_comments_503186.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503186",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_432332.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432332"
}
```



---

archive/issue_events_432333.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432333"
}
```



---

archive/issue_events_432334.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432334"
}
```



---

archive/issue_events_432335.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432335"
}
```



---

archive/issue_comments_503187.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\na little bit in #32331",
    "created_at": "2021-08-03T19:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503187",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">comment:3</div>

a little bit in #32331



---

archive/issue_comments_503188.json:
```json
{
    "body": "Branch: **[public/ticket/31366](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/31366)**",
    "created_at": "2021-08-04T08:22:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503188",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[public/ticket/31366](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/31366)**



---

archive/issue_comments_503189.json:
```json
{
    "body": "Commit: **[`159ec4b`](https://github.com/sagemath/sagetrac-mirror/commit/159ec4b5b77cc7b3b5a008a08d01a691ed506b3f)**",
    "created_at": "2021-08-04T08:22:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503189",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`159ec4b`](https://github.com/sagemath/sagetrac-mirror/commit/159ec4b5b77cc7b3b5a008a08d01a691ed506b3f)**



---

archive/issue_comments_503190.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nfirst tentative\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/159ec4b5b77cc7b3b5a008a08d01a691ed506b3f\">159ec4b</a></td><td><code>first step towards using argparse for doc command line arguments</code></td></tr></table>\n",
    "created_at": "2021-08-04T08:22:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503190",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4" align="right">comment:4</div>

first tentative

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/159ec4b5b77cc7b3b5a008a08d01a691ed506b3f">159ec4b</a></td><td><code>first step towards using argparse for doc command line arguments</code></td></tr></table>




---

archive/issue_comments_503191.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56ce7b68910f0f6a8e00c58239fa81a2bd0c1fd2\">56ce7b6</a></td><td><code>more work on argparse for doc command line</code></td></tr></table>\n",
    "created_at": "2021-08-04T08:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503191",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56ce7b68910f0f6a8e00c58239fa81a2bd0c1fd2">56ce7b6</a></td><td><code>more work on argparse for doc command line</code></td></tr></table>




---

archive/issue_comments_503192.json:
```json
{
    "body": "Changed commit from **[`159ec4b`](https://github.com/sagemath/sagetrac-mirror/commit/159ec4b5b77cc7b3b5a008a08d01a691ed506b3f)** to **[`56ce7b6`](https://github.com/sagemath/sagetrac-mirror/commit/56ce7b68910f0f6a8e00c58239fa81a2bd0c1fd2)**",
    "created_at": "2021-08-04T08:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503192",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`159ec4b`](https://github.com/sagemath/sagetrac-mirror/commit/159ec4b5b77cc7b3b5a008a08d01a691ed506b3f)** to **[`56ce7b6`](https://github.com/sagemath/sagetrac-mirror/commit/56ce7b68910f0f6a8e00c58239fa81a2bd0c1fd2)**



---

archive/issue_comments_503193.json:
```json
{
    "body": "Changed commit from **[`56ce7b6`](https://github.com/sagemath/sagetrac-mirror/commit/56ce7b68910f0f6a8e00c58239fa81a2bd0c1fd2)** to **[`98824cd`](https://github.com/sagemath/sagetrac-mirror/commit/98824cd9e4d5719358630e25305aee6dffd9c30f)**",
    "created_at": "2021-09-21T09:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503193",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`56ce7b6`](https://github.com/sagemath/sagetrac-mirror/commit/56ce7b68910f0f6a8e00c58239fa81a2bd0c1fd2)** to **[`98824cd`](https://github.com/sagemath/sagetrac-mirror/commit/98824cd9e4d5719358630e25305aee6dffd9c30f)**



---

archive/issue_comments_503194.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98824cd9e4d5719358630e25305aee6dffd9c30f\">98824cd</a></td><td><code>Merge branch 'public/ticket/31366' in 9.5.b1</code></td></tr></table>\n",
    "created_at": "2021-09-21T09:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503194",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98824cd9e4d5719358630e25305aee6dffd9c30f">98824cd</a></td><td><code>Merge branch 'public/ticket/31366' in 9.5.b1</code></td></tr></table>




---

archive/issue_comments_503195.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9cd177c53cb0170f68fa0a2bc869819c1d7245a\">d9cd177</a></td><td><code>Merge branch 'public/ticket/31366' in 9.5.b5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec995b76d9096379648f1a78decc0569819e980a\">ec995b7</a></td><td><code>some details</code></td></tr></table>\n",
    "created_at": "2021-10-29T18:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503195",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9cd177c53cb0170f68fa0a2bc869819c1d7245a">d9cd177</a></td><td><code>Merge branch 'public/ticket/31366' in 9.5.b5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec995b76d9096379648f1a78decc0569819e980a">ec995b7</a></td><td><code>some details</code></td></tr></table>




---

archive/issue_comments_503196.json:
```json
{
    "body": "Changed commit from **[`98824cd`](https://github.com/sagemath/sagetrac-mirror/commit/98824cd9e4d5719358630e25305aee6dffd9c30f)** to **[`ec995b7`](https://github.com/sagemath/sagetrac-mirror/commit/ec995b76d9096379648f1a78decc0569819e980a)**",
    "created_at": "2021-10-29T18:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503196",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`98824cd`](https://github.com/sagemath/sagetrac-mirror/commit/98824cd9e4d5719358630e25305aee6dffd9c30f)** to **[`ec995b7`](https://github.com/sagemath/sagetrac-mirror/commit/ec995b76d9096379648f1a78decc0569819e980a)**



---

archive/issue_comments_503197.json:
```json
{
    "body": "Author: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2021-10-29T18:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503197",
    "user": "https://github.com/fchapoton"
}
```

Author: **Frédéric Chapoton**



---

archive/issue_comments_503198.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nnot quite sure that it works perfectly, but it seems so",
    "created_at": "2021-10-29T18:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503198",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

not quite sure that it works perfectly, but it seems so



---

archive/issue_events_432336.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-10-29T18:35:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432336"
}
```



---

archive/issue_events_432337.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-10-30T06:36:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432337"
}
```



---

archive/issue_events_432338.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-10-30T06:36:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432338"
}
```



---

archive/issue_comments_503199.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nneeds work\n\n```\n[dochtml]   File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py\", line 1558, in setup_parser\n[dochtml]     description=help_description(compact=True))\n[dochtml] TypeError: __init__() got an unexpected keyword argument 'add_help_option'\n```",
    "created_at": "2021-10-30T06:36:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503199",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">comment:9</div>

needs work

```
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py", line 1558, in setup_parser
[dochtml]     description=help_description(compact=True))
[dochtml] TypeError: __init__() got an unexpected keyword argument 'add_help_option'
```



---

archive/issue_comments_503200.json:
```json
{
    "body": "Changed commit from **[`ec995b7`](https://github.com/sagemath/sagetrac-mirror/commit/ec995b76d9096379648f1a78decc0569819e980a)** to **[`3a4c572`](https://github.com/sagemath/sagetrac-mirror/commit/3a4c572d5c7be610c632cf2ae66ba436636412c1)**",
    "created_at": "2021-10-30T08:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503200",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ec995b7`](https://github.com/sagemath/sagetrac-mirror/commit/ec995b76d9096379648f1a78decc0569819e980a)** to **[`3a4c572`](https://github.com/sagemath/sagetrac-mirror/commit/3a4c572d5c7be610c632cf2ae66ba436636412c1)**



---

archive/issue_comments_503201.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a4c572d5c7be610c632cf2ae66ba436636412c1\">3a4c572</a></td><td><code>more work on argparse for docbuild</code></td></tr></table>\n",
    "created_at": "2021-10-30T08:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503201",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a4c572d5c7be610c632cf2ae66ba436636412c1">3a4c572</a></td><td><code>more work on argparse for docbuild</code></td></tr></table>




---

archive/issue_comments_503202.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Sage's docbuilding uses [optparse](https://docs.python.org/3/library/optparse.html) for argument parsing, but this library has been deprecated for a while. We should switch to [argparse](https://docs.python.org/3/library/argparse.html).\n+\n+Some instructions for conversions can be found here: https://docs.python.org/3/library/argparse.html#help\n``````\n",
    "created_at": "2021-10-30T08:40:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503202",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Sage's docbuilding uses [optparse](https://docs.python.org/3/library/optparse.html) for argument parsing, but this library has been deprecated for a while. We should switch to [argparse](https://docs.python.org/3/library/argparse.html).
+
+Some instructions for conversions can be found here: https://docs.python.org/3/library/argparse.html#help
``````




---

archive/issue_comments_503203.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI'm getting the message `AttributeError: module 'argparse' has no attribute 'OptionGroup'`. I can't tell what the right replacement is \u2014\u00a0`add_argument_group`? `add_subparser`?",
    "created_at": "2021-10-31T01:04:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503203",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:12" align="right">comment:12</div>

I'm getting the message `AttributeError: module 'argparse' has no attribute 'OptionGroup'`. I can't tell what the right replacement is — `add_argument_group`? `add_subparser`?



---

archive/issue_comments_503204.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/70b6aa64b80ad7ff159fc4921a8dedbfb7096e29\">70b6aa6</a></td><td><code>another fix for argparse in docbuild</code></td></tr></table>\n",
    "created_at": "2021-10-31T07:01:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503204",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/70b6aa64b80ad7ff159fc4921a8dedbfb7096e29">70b6aa6</a></td><td><code>another fix for argparse in docbuild</code></td></tr></table>




---

archive/issue_comments_503205.json:
```json
{
    "body": "Changed commit from **[`3a4c572`](https://github.com/sagemath/sagetrac-mirror/commit/3a4c572d5c7be610c632cf2ae66ba436636412c1)** to **[`70b6aa6`](https://github.com/sagemath/sagetrac-mirror/commit/70b6aa64b80ad7ff159fc4921a8dedbfb7096e29)**",
    "created_at": "2021-10-31T07:01:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503205",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3a4c572`](https://github.com/sagemath/sagetrac-mirror/commit/3a4c572d5c7be610c632cf2ae66ba436636412c1)** to **[`70b6aa6`](https://github.com/sagemath/sagetrac-mirror/commit/70b6aa64b80ad7ff159fc4921a8dedbfb7096e29)**



---

archive/issue_comments_503206.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nhere is a tentative. I had no time to check",
    "created_at": "2021-10-31T07:02:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503206",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">comment:14</div>

here is a tentative. I had no time to check



---

archive/issue_comments_503207.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/914ce7d900553b87d59fc27e3f98ca16adfa93d2\">914ce7d</a></td><td><code>more work on argparse for docbuild</code></td></tr></table>\n",
    "created_at": "2021-10-31T09:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503207",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/914ce7d900553b87d59fc27e3f98ca16adfa93d2">914ce7d</a></td><td><code>more work on argparse for docbuild</code></td></tr></table>




---

archive/issue_comments_503208.json:
```json
{
    "body": "Changed commit from **[`70b6aa6`](https://github.com/sagemath/sagetrac-mirror/commit/70b6aa64b80ad7ff159fc4921a8dedbfb7096e29)** to **[`914ce7d`](https://github.com/sagemath/sagetrac-mirror/commit/914ce7d900553b87d59fc27e3f98ca16adfa93d2)**",
    "created_at": "2021-10-31T09:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503208",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`70b6aa6`](https://github.com/sagemath/sagetrac-mirror/commit/70b6aa64b80ad7ff159fc4921a8dedbfb7096e29)** to **[`914ce7d`](https://github.com/sagemath/sagetrac-mirror/commit/914ce7d900553b87d59fc27e3f98ca16adfa93d2)**



---

archive/issue_comments_503209.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nmore fixes, but apparently not ok yet",
    "created_at": "2021-10-31T09:47:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503209",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:16" align="right">comment:16</div>

more fixes, but apparently not ok yet



---

archive/issue_comments_503210.json:
```json
{
    "body": "Changed commit from **[`914ce7d`](https://github.com/sagemath/sagetrac-mirror/commit/914ce7d900553b87d59fc27e3f98ca16adfa93d2)** to **[`199f8a0`](https://github.com/sagemath/sagetrac-mirror/commit/199f8a03e9907b71453730e540933e6b5997d5e6)**",
    "created_at": "2021-10-31T17:46:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503210",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`914ce7d`](https://github.com/sagemath/sagetrac-mirror/commit/914ce7d900553b87d59fc27e3f98ca16adfa93d2)** to **[`199f8a0`](https://github.com/sagemath/sagetrac-mirror/commit/199f8a03e9907b71453730e540933e6b5997d5e6)**



---

archive/issue_comments_503211.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/199f8a03e9907b71453730e540933e6b5997d5e6\">199f8a0</a></td><td><code>trac 31366: more fixes</code></td></tr></table>\n",
    "created_at": "2021-10-31T17:46:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503211",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/199f8a03e9907b71453730e540933e6b5997d5e6">199f8a0</a></td><td><code>trac 31366: more fixes</code></td></tr></table>




---

archive/issue_comments_503212.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI tried implementing this a while ago (before your branch), so here are some contributions to your branch from my attempts. They help, but not sure if they are good enough yet.",
    "created_at": "2021-10-31T17:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503212",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">comment:18</div>

I tried implementing this a while ago (before your branch), so here are some contributions to your branch from my attempts. They help, but not sure if they are good enough yet.



---

archive/issue_comments_503213.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1745efb96f47c581e5612b69578d099780a04295\">1745efb</a></td><td><code>polishing argparse for docbuild</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84bde616d574537bf92eb77e1b7512942fe042e5\">84bde61</a></td><td><code>Merge branch 'public/ticket/31366' in jhpalmieri branch</code></td></tr></table>\n",
    "created_at": "2021-10-31T18:03:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503213",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1745efb96f47c581e5612b69578d099780a04295">1745efb</a></td><td><code>polishing argparse for docbuild</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84bde616d574537bf92eb77e1b7512942fe042e5">84bde61</a></td><td><code>Merge branch 'public/ticket/31366' in jhpalmieri branch</code></td></tr></table>




---

archive/issue_comments_503214.json:
```json
{
    "body": "Changed commit from **[`199f8a0`](https://github.com/sagemath/sagetrac-mirror/commit/199f8a03e9907b71453730e540933e6b5997d5e6)** to **[`84bde61`](https://github.com/sagemath/sagetrac-mirror/commit/84bde616d574537bf92eb77e1b7512942fe042e5)**",
    "created_at": "2021-10-31T18:03:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503214",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`199f8a0`](https://github.com/sagemath/sagetrac-mirror/commit/199f8a03e9907b71453730e540933e6b5997d5e6)** to **[`84bde61`](https://github.com/sagemath/sagetrac-mirror/commit/84bde616d574537bf92eb77e1b7512942fe042e5)**



---

archive/issue_comments_503215.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI was working on that right now. I had to merge my branch with yours, hopefully in a correct way. Starts to look better.",
    "created_at": "2021-10-31T18:03:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503215",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:20" align="right">comment:20</div>

I was working on that right now. I had to merge my branch with yours, hopefully in a correct way. Starts to look better.



---

archive/issue_comments_503216.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nYes, much better. We have to figure how to allow commands like `./sage --docbuild -h`, which currently says\n\n```\nusage: sage --docbuild [OPTIONS] DOCUMENT (FORMAT | COMMAND)\n__main__.py: error: the following arguments are required: document, format\n```",
    "created_at": "2021-10-31T21:58:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503216",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:21" align="right">comment:21</div>

Yes, much better. We have to figure how to allow commands like `./sage --docbuild -h`, which currently says

```
usage: sage --docbuild [OPTIONS] DOCUMENT (FORMAT | COMMAND)
__main__.py: error: the following arguments are required: document, format
```



---

archive/issue_comments_503217.json:
```json
{
    "body": "Changed commit from **[`84bde61`](https://github.com/sagemath/sagetrac-mirror/commit/84bde616d574537bf92eb77e1b7512942fe042e5)** to **[`8c8fc39`](https://github.com/sagemath/sagetrac-mirror/commit/8c8fc39b7cdc72658c07425991d5c5738f561899)**",
    "created_at": "2021-11-01T09:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503217",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`84bde61`](https://github.com/sagemath/sagetrac-mirror/commit/84bde616d574537bf92eb77e1b7512942fe042e5)** to **[`8c8fc39`](https://github.com/sagemath/sagetrac-mirror/commit/8c8fc39b7cdc72658c07425991d5c5738f561899)**



---

archive/issue_comments_503218.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c8fc39b7cdc72658c07425991d5c5738f561899\">8c8fc39</a></td><td><code>still working on argparse for docbuilding</code></td></tr></table>\n",
    "created_at": "2021-11-01T09:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503218",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c8fc39b7cdc72658c07425991d5c5738f561899">8c8fc39</a></td><td><code>still working on argparse for docbuilding</code></td></tr></table>




---

archive/issue_comments_503219.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nmore progress done.",
    "created_at": "2021-11-01T09:13:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503219",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">comment:23</div>

more progress done.



---

archive/issue_comments_503220.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nand the bot+linter are now green ; still needs tests and double-check, for sure",
    "created_at": "2021-11-01T10:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503220",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:24" align="right">comment:24</div>

and the bot+linter are now green ; still needs tests and double-check, for sure



---

archive/issue_comments_503221.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nLooks very close now, docs build and tests pass.\n\nThe old version exited gracefully with the help message if you ran `./sage --docbuild`, whereas this one prints an error message instead.\n\nAnother difference. Old:\n\n```\n% ./sage --docbuild -h\nUsage: sage --docbuild [OPTIONS] DOCUMENT (FORMAT | COMMAND)\n\nBuild or return information about Sage documentation.\n\n    DOCUMENT    name of the document to build\n    FORMAT      document output format\n    COMMAND     document-specific command\n\nNote that DOCUMENT may have the form 'file=/path/to/FILE',\nwhich builds the documentation for the specified file.\n\nA DOCUMENT and either a FORMAT or a COMMAND are required,\nunless a list of one or more of these is requested.\n\nOPTIONS:\n  Standard:\n```\nNew:\n\n```\n% ./sage --docbuild -h\nusage: sage --docbuild [OPTIONS] DOCUMENT (FORMAT | COMMAND)\n\nBuild or return information about Sage documentation. DOCUMENT name of the document to\nbuild FORMAT document output format COMMAND document-specific command Note that DOCUMENT\nmay have the form 'file=/path/to/FILE', which builds the documentation for the specified\nfile. A DOCUMENT and either a FORMAT or a COMMAND are required, unless a list of one or\nmore of these is requested.\n\npositional arguments:\n  document\n  {html,pdf,changes,htmlhelp,inventory,json,latex,linkcheck,pickle,web}\n\nStandard:\n```\nAny idea why it's not preserving the line breaks in the help message? We could try the following changes, but I would like to understand why it's not respecting our formatting for the strings.\n\n```diff\ndiff --git a/src/sage_docbuild/__init__.py b/src/sage_docbuild/__init__.py\nindex 1f692f1abe..84a6444ec1 100644\n--- a/src/sage_docbuild/__init__.py\n+++ b/src/sage_docbuild/__init__.py\n@@ -1385,9 +1385,6 @@ def help_description(s=\"\", compact=False):\n     character.\n     \"\"\"\n     s += \"Build or return information about Sage documentation.\\n\\n\"\n-    s += \"    DOCUMENT    name of the document to build\\n\"\n-    s += \"    FORMAT      document output format\\n\"\n-    s += \"    COMMAND     document-specific command\\n\\n\"\n     s += \"Note that DOCUMENT may have the form 'file=/path/to/FILE',\\n\"\n     s += \"which builds the documentation for the specified file.\\n\\n\"\n     s += \"A DOCUMENT and either a FORMAT or a COMMAND are required,\\n\"\n@@ -1625,8 +1622,10 @@ def setup_parser():\n                           help=\"if ARG is 'reference', list all subdocuments\"\n                           \" of en/reference. If ARG is 'all', list all main\"\n                           \" documents\")\n-    parser.add_argument(\"document\", nargs='?', type=str)\n-    parser.add_argument(\"format\", nargs='?', type=str, choices=get_formats())\n+    parser.add_argument(\"document\", nargs='?', type=str,\n+                        help='name of the document to build')\n+    parser.add_argument(\"format\", nargs='?', type=str, choices=get_formats(),\n+                        help='document output format')\n     return parser\n \n \n@@ -1722,7 +1721,8 @@ def main():\n     # trying to build.\n     name, typ = args.document, args.format\n     if not name or not type:\n-        raise ValueError('both document and format should be given')\n+        parser.print_help()\n+        sys.exit(1)\n \n     # Set up module-wide logging.\n     setup_logger(args.verbose, args.color)\n```",
    "created_at": "2021-11-02T03:55:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503221",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:25" align="right">comment:25</div>

Looks very close now, docs build and tests pass.

The old version exited gracefully with the help message if you ran `./sage --docbuild`, whereas this one prints an error message instead.

Another difference. Old:

```
% ./sage --docbuild -h
Usage: sage --docbuild [OPTIONS] DOCUMENT (FORMAT | COMMAND)

Build or return information about Sage documentation.

    DOCUMENT    name of the document to build
    FORMAT      document output format
    COMMAND     document-specific command

Note that DOCUMENT may have the form 'file=/path/to/FILE',
which builds the documentation for the specified file.

A DOCUMENT and either a FORMAT or a COMMAND are required,
unless a list of one or more of these is requested.

OPTIONS:
  Standard:
```
New:

```
% ./sage --docbuild -h
usage: sage --docbuild [OPTIONS] DOCUMENT (FORMAT | COMMAND)

Build or return information about Sage documentation. DOCUMENT name of the document to
build FORMAT document output format COMMAND document-specific command Note that DOCUMENT
may have the form 'file=/path/to/FILE', which builds the documentation for the specified
file. A DOCUMENT and either a FORMAT or a COMMAND are required, unless a list of one or
more of these is requested.

positional arguments:
  document
  {html,pdf,changes,htmlhelp,inventory,json,latex,linkcheck,pickle,web}

Standard:
```
Any idea why it's not preserving the line breaks in the help message? We could try the following changes, but I would like to understand why it's not respecting our formatting for the strings.

```diff
diff --git a/src/sage_docbuild/__init__.py b/src/sage_docbuild/__init__.py
index 1f692f1abe..84a6444ec1 100644
--- a/src/sage_docbuild/__init__.py
+++ b/src/sage_docbuild/__init__.py
@@ -1385,9 +1385,6 @@ def help_description(s="", compact=False):
     character.
     """
     s += "Build or return information about Sage documentation.\n\n"
-    s += "    DOCUMENT    name of the document to build\n"
-    s += "    FORMAT      document output format\n"
-    s += "    COMMAND     document-specific command\n\n"
     s += "Note that DOCUMENT may have the form 'file=/path/to/FILE',\n"
     s += "which builds the documentation for the specified file.\n\n"
     s += "A DOCUMENT and either a FORMAT or a COMMAND are required,\n"
@@ -1625,8 +1622,10 @@ def setup_parser():
                           help="if ARG is 'reference', list all subdocuments"
                           " of en/reference. If ARG is 'all', list all main"
                           " documents")
-    parser.add_argument("document", nargs='?', type=str)
-    parser.add_argument("format", nargs='?', type=str, choices=get_formats())
+    parser.add_argument("document", nargs='?', type=str,
+                        help='name of the document to build')
+    parser.add_argument("format", nargs='?', type=str, choices=get_formats(),
+                        help='document output format')
     return parser
 
 
@@ -1722,7 +1721,8 @@ def main():
     # trying to build.
     name, typ = args.document, args.format
     if not name or not type:
-        raise ValueError('both document and format should be given')
+        parser.print_help()
+        sys.exit(1)
 
     # Set up module-wide logging.
     setup_logger(args.verbose, args.color)
```



---

archive/issue_comments_503222.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00d94ffb760d49b6e926be00d27a0d0da0d84cff\">00d94ff</a></td><td><code>fix for empty input</code></td></tr></table>\n",
    "created_at": "2021-11-05T19:25:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503222",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00d94ffb760d49b6e926be00d27a0d0da0d84cff">00d94ff</a></td><td><code>fix for empty input</code></td></tr></table>




---

archive/issue_comments_503223.json:
```json
{
    "body": "Changed commit from **[`8c8fc39`](https://github.com/sagemath/sagetrac-mirror/commit/8c8fc39b7cdc72658c07425991d5c5738f561899)** to **[`00d94ff`](https://github.com/sagemath/sagetrac-mirror/commit/00d94ffb760d49b6e926be00d27a0d0da0d84cff)**",
    "created_at": "2021-11-05T19:25:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503223",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8c8fc39`](https://github.com/sagemath/sagetrac-mirror/commit/8c8fc39b7cdc72658c07425991d5c5738f561899)** to **[`00d94ff`](https://github.com/sagemath/sagetrac-mirror/commit/00d94ffb760d49b6e926be00d27a0d0da0d84cff)**



---

archive/issue_comments_503224.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b02c912a2181b385f4bf0413599da9eb659a48b3\">b02c912</a></td><td><code>fine tuning details in argparse for docbuild</code></td></tr></table>\n",
    "created_at": "2021-11-05T20:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503224",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b02c912a2181b385f4bf0413599da9eb659a48b3">b02c912</a></td><td><code>fine tuning details in argparse for docbuild</code></td></tr></table>




---

archive/issue_comments_503225.json:
```json
{
    "body": "Changed commit from **[`00d94ff`](https://github.com/sagemath/sagetrac-mirror/commit/00d94ffb760d49b6e926be00d27a0d0da0d84cff)** to **[`b02c912`](https://github.com/sagemath/sagetrac-mirror/commit/b02c912a2181b385f4bf0413599da9eb659a48b3)**",
    "created_at": "2021-11-05T20:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503225",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`00d94ff`](https://github.com/sagemath/sagetrac-mirror/commit/00d94ffb760d49b6e926be00d27a0d0da0d84cff)** to **[`b02c912`](https://github.com/sagemath/sagetrac-mirror/commit/b02c912a2181b385f4bf0413599da9eb659a48b3)**



---

archive/issue_comments_503226.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nhere is a new tentative",
    "created_at": "2021-11-05T20:07:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503226",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:28" align="right">comment:28</div>

here is a new tentative



---

archive/issue_comments_503227.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nLooks good. I have a few more proposed changes: two of the \"examples\" in `help_examples` don't work, so I am fixing one and changing one. Also, `./sage --docbuild -H` used to print a longer message, and I am restoring that. Let me know if you object to any of these changes, of course.",
    "created_at": "2021-11-06T02:42:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503227",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:29" align="right">comment:29</div>

Looks good. I have a few more proposed changes: two of the "examples" in `help_examples` don't work, so I am fixing one and changing one. Also, `./sage --docbuild -H` used to print a longer message, and I am restoring that. Let me know if you object to any of these changes, of course.



---

archive/issue_comments_503228.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6e7bdaee8f214410e321fae87a8a0279ae2c7b8\">c6e7bda</a></td><td><code>trac 31366: minor fixes to help_examples</code></td></tr></table>\n",
    "created_at": "2021-11-06T02:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503228",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6e7bdaee8f214410e321fae87a8a0279ae2c7b8">c6e7bda</a></td><td><code>trac 31366: minor fixes to help_examples</code></td></tr></table>




---

archive/issue_comments_503229.json:
```json
{
    "body": "Changed commit from **[`b02c912`](https://github.com/sagemath/sagetrac-mirror/commit/b02c912a2181b385f4bf0413599da9eb659a48b3)** to **[`c6e7bda`](https://github.com/sagemath/sagetrac-mirror/commit/c6e7bdaee8f214410e321fae87a8a0279ae2c7b8)**",
    "created_at": "2021-11-06T02:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503229",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b02c912`](https://github.com/sagemath/sagetrac-mirror/commit/b02c912a2181b385f4bf0413599da9eb659a48b3)** to **[`c6e7bda`](https://github.com/sagemath/sagetrac-mirror/commit/c6e7bdaee8f214410e321fae87a8a0279ae2c7b8)**



---

archive/issue_comments_503230.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nA bit more explanation: `./sage -FDC all` used to print formats, documents, and commands, but now it just prints formats and exits. Also, the `-S` option requires `-S=-OPTS` because of the hyphen in `OPTS`; this appears to be a known issue with argparse: https://stackoverflow.com/questions/16174992/cant-get-argparse-to-read-quoted-string-with-dashes-in-it. Finally, `./sage --docbuild developer -j html` is not good: the document and format should come first, the `-j` just confuses things (and isn't necessary anyway, since mathjax has been the default forever).",
    "created_at": "2021-11-06T02:46:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503230",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:31" align="right">comment:31</div>

A bit more explanation: `./sage -FDC all` used to print formats, documents, and commands, but now it just prints formats and exits. Also, the `-S` option requires `-S=-OPTS` because of the hyphen in `OPTS`; this appears to be a known issue with argparse: https://stackoverflow.com/questions/16174992/cant-get-argparse-to-read-quoted-string-with-dashes-in-it. Finally, `./sage --docbuild developer -j html` is not good: the document and format should come first, the `-j` just confuses things (and isn't necessary anyway, since mathjax has been the default forever).



---

archive/issue_comments_503231.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReady for review? I am happy with your changes.",
    "created_at": "2021-11-27T00:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503231",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:32" align="right">comment:32</div>

Ready for review? I am happy with your changes.



---

archive/issue_comments_503232.json:
```json
{
    "body": "Reviewer: **John Palmieri**",
    "created_at": "2021-11-27T00:38:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503232",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri**



---

archive/issue_comments_503233.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI would say so. I have forgotten if there were remaining issues or not.",
    "created_at": "2021-11-27T07:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503233",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:34" align="right">comment:34</div>

I would say so. I have forgotten if there were remaining issues or not.



---

archive/issue_events_432339.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-11-27T07:54:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432339"
}
```



---

archive/issue_events_432340.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-11-27T07:54:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432340"
}
```



---

archive/issue_comments_503234.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef2b25b2ecfa1fd5850087d9c354c404d617efd0\">ef2b25b</a></td><td><code>Remove handling of broken option SAGE_DOC_MATHJAX=no</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b62c166044271f0b7db4f42bb174e560562a364\">0b62c16</a></td><td><code>Merge branch 't/32946/_sage___docbuild_doc_html__is_broken' into t/31366/public/ticket/31366</code></td></tr></table>\n",
    "created_at": "2021-11-29T21:10:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503234",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef2b25b2ecfa1fd5850087d9c354c404d617efd0">ef2b25b</a></td><td><code>Remove handling of broken option SAGE_DOC_MATHJAX=no</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b62c166044271f0b7db4f42bb174e560562a364">0b62c16</a></td><td><code>Merge branch 't/32946/_sage___docbuild_doc_html__is_broken' into t/31366/public/ticket/31366</code></td></tr></table>




---

archive/issue_comments_503235.json:
```json
{
    "body": "Changed commit from **[`c6e7bda`](https://github.com/sagemath/sagetrac-mirror/commit/c6e7bdaee8f214410e321fae87a8a0279ae2c7b8)** to **[`0b62c16`](https://github.com/sagemath/sagetrac-mirror/commit/0b62c166044271f0b7db4f42bb174e560562a364)**",
    "created_at": "2021-11-29T21:10:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503235",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c6e7bda`](https://github.com/sagemath/sagetrac-mirror/commit/c6e7bdaee8f214410e321fae87a8a0279ae2c7b8)** to **[`0b62c16`](https://github.com/sagemath/sagetrac-mirror/commit/0b62c166044271f0b7db4f42bb174e560562a364)**



---

archive/issue_events_432341.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-11-29T21:11:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432341"
}
```



---

archive/issue_events_432342.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-11-29T21:11:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432342"
}
```



---

archive/issue_comments_503236.json:
```json
{
    "body": "Dependencies: **#32946**",
    "created_at": "2021-11-29T21:11:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503236",
    "user": "https://github.com/jhpalmieri"
}
```

Dependencies: **#32946**



---

archive/issue_comments_503237.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nOkay, let's merge it. (I added #32946 as a dependency because otherwise there would be a merge conflict.)",
    "created_at": "2021-11-29T21:11:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503237",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:36" align="right">comment:36</div>

Okay, let's merge it. (I added #32946 as a dependency because otherwise there would be a merge conflict.)



---

archive/issue_comments_503238.json:
```json
{
    "body": "Changed branch from **[public/ticket/31366](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/31366)** to **[`0b62c16`](https://github.com/sagemath/sagetrac-mirror/commit/0b62c166044271f0b7db4f42bb174e560562a364)**",
    "created_at": "2021-12-12T15:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/31366#issuecomment-503238",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/ticket/31366](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/31366)** to **[`0b62c16`](https://github.com/sagemath/sagetrac-mirror/commit/0b62c166044271f0b7db4f42bb174e560562a364)**



---

archive/issue_events_432343.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-12-12T15:08:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432343"
}
```



---

archive/issue_events_432344.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f6de12b059970e15245971f08ce44690c5ca35f7",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-12-12T15:08:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/31366",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/31366#event-432344"
}
```
