# Issue 31888: Fixes to src/setup.py (used when configure --enable-editable is used)

archive/issues_031651.json:
```json
{
    "body": "Fixes:\n\n- Include submodules in `find_namespace_packages`: Without this, only the extensions and top level .py files are installed and .py files in submodules are not installed.\n\n- Do not catch and ignore build errors\n\n\n\n\nCC:  @mkoeppe @tobiasdiez @kliem\n\nBranch/Commit: cca587d298600ba6cc2a0172788bce2805540f1d\n\nReviewer: Jonathan Kliem\n\nAuthor: Isuru Fernando, Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/31888\n\n",
    "closed_at": "2021-06-20T08:14:42Z",
    "created_at": "2021-05-31T20:04:55Z",
    "labels": [
        "component: build",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Fixes to src/setup.py (used when configure --enable-editable is used)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31888",
    "user": "https://github.com/isuruf"
}
```
Fixes:

- Include submodules in `find_namespace_packages`: Without this, only the extensions and top level .py files are installed and .py files in submodules are not installed.

- Do not catch and ignore build errors




CC:  @mkoeppe @tobiasdiez @kliem

Branch/Commit: cca587d298600ba6cc2a0172788bce2805540f1d

Reviewer: Jonathan Kliem

Author: Isuru Fernando, Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/31888





---

archive/issue_comments_625912.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-05-31T20:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31888#issuecomment-625912",
    "user": "https://github.com/isuruf"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_625913.json:
```json
{
    "body": "<a id='comment:2'></a>\n`src/setup.py` is used by the Sage distribution only when `configure --enable-editable`  has been used, which has not seen much testing yet.",
    "created_at": "2021-05-31T20:11:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31888#issuecomment-625913",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
`src/setup.py` is used by the Sage distribution only when `configure --enable-editable`  has been used, which has not seen much testing yet.



---

archive/issue_comments_625914.json:
```json
{
    "body": "<a id='comment:3'></a>\nFor distribution packaging, use `build/pkgs/sagelib/src/setup.py`",
    "created_at": "2021-05-31T20:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31888#issuecomment-625914",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
For distribution packaging, use `build/pkgs/sagelib/src/setup.py`



---

archive/issue_comments_625915.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,8 @@\n-I'm not sure what the difference between my setup and everybody elses, but without this, only the extensions and top level .py files are installed and .py files in submodules are not installed.\n+Fixes:\n+\n+- Include submodules in `find_namespace_packages`: Without this, only the extensions and top level .py files are installed and .py files in submodules are not installed.\n+\n+- Do not catch and ignore build errors\n+\n+\n+\n``````\n",
    "created_at": "2021-06-19T19:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31888#issuecomment-625915",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,8 @@
-I'm not sure what the difference between my setup and everybody elses, but without this, only the extensions and top level .py files are installed and .py files in submodules are not installed.
+Fixes:
+
+- Include submodules in `find_namespace_packages`: Without this, only the extensions and top level .py files are installed and .py files in submodules are not installed.
+
+- Do not catch and ignore build errors
+
+
+
``````




---

archive/issue_events_102680.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "rename": {
        "from": "Include submodules in find_namespace_packages",
        "to": "Fixes to src/setup.py (used when configure --enable-editable is used)"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31888#event-102680"
}
```



---

archive/issue_comments_625916.json:
```json
{
    "body": "Changing branch from \"u/isuruf/submodules\" to \"u/mkoeppe/submodules\"",
    "created_at": "2021-06-19T19:33:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31888#issuecomment-625916",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "u/isuruf/submodules" to "u/mkoeppe/submodules"



---

archive/issue_comments_625917.json:
```json
{
    "body": "Changing commit from \"78862cd565e68e2d35dd6eb48e637cd9e6c255d8\" to \"cca587d298600ba6cc2a0172788bce2805540f1d\"",
    "created_at": "2021-06-19T21:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31888#issuecomment-625917",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "78862cd565e68e2d35dd6eb48e637cd9e6c255d8" to "cca587d298600ba6cc2a0172788bce2805540f1d"



---

archive/issue_comments_625918.json:
```json
{
    "body": "<a id='comment:6'></a>\nNew commits:\n|                                                                                                                                          |                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[cfe09c6](https://github.com/sagemath/sagetrac-mirror/commit/cfe09c6a3fff933d0e0a0a8d4f3a5ab3c950f2d5)|`Include submodules in find_namespace_packages`|\n|[24a1ac2](https://github.com/sagemath/sagetrac-mirror/commit/24a1ac21968d99172d7ac99dcf630437818763f7)|`src/setup.py: Add comment`|\n|[cca587d](https://github.com/sagemath/sagetrac-mirror/commit/cca587d298600ba6cc2a0172788bce2805540f1d)|`src/setup.py: Do not just catch exceptions and continue`|",
    "created_at": "2021-06-19T21:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31888#issuecomment-625918",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
New commits:
|                                                                                                                                          |                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[cfe09c6](https://github.com/sagemath/sagetrac-mirror/commit/cfe09c6a3fff933d0e0a0a8d4f3a5ab3c950f2d5)|`Include submodules in find_namespace_packages`|
|[24a1ac2](https://github.com/sagemath/sagetrac-mirror/commit/24a1ac21968d99172d7ac99dcf630437818763f7)|`src/setup.py: Add comment`|
|[cca587d](https://github.com/sagemath/sagetrac-mirror/commit/cca587d298600ba6cc2a0172788bce2805540f1d)|`src/setup.py: Do not just catch exceptions and continue`|



---

archive/issue_comments_625919.json:
```json
{
    "body": "Changing author from \"\" to \"Isuru Fernando, Matthias Koeppe\"",
    "created_at": "2021-06-19T21:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31888#issuecomment-625919",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Isuru Fernando, Matthias Koeppe"



---

archive/issue_comments_625920.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-19T22:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31888#issuecomment-625920",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_625921.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jonathan Kliem\"",
    "created_at": "2021-06-19T22:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31888#issuecomment-625921",
    "user": "https://github.com/kliem"
}
```

Changing reviewer from "" to "Jonathan Kliem"



---

archive/issue_comments_625922.json:
```json
{
    "body": "<a id='comment:8'></a>\nLGTM.",
    "created_at": "2021-06-19T22:33:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31888#issuecomment-625922",
    "user": "https://github.com/kliem"
}
```

<a id='comment:8'></a>
LGTM.



---

archive/issue_comments_625923.json:
```json
{
    "body": "<a id='comment:9'></a>\nThanks!",
    "created_at": "2021-06-19T22:44:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31888#issuecomment-625923",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Thanks!



---

archive/issue_comments_625924.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-20T08:14:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31888#issuecomment-625924",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_625925.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/submodules\" to \"cca587d298600ba6cc2a0172788bce2805540f1d\"",
    "created_at": "2021-06-20T08:14:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31888#issuecomment-625925",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/submodules" to "cca587d298600ba6cc2a0172788bce2805540f1d"



---

archive/issue_events_102681.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-20T08:14:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31888",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31888#event-102681"
}
```
