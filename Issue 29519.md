# Issue 29519: Meta-ticket: Review of Python 3 features that sagelib should use systematically

archive/issues_029519.json:
```json
{
    "body": "CC:  @fchapoton @dimpase @jhpalmieri @tobiasdiez @tscrim @nthiery @slel @nbruin\n\nKeywords: sd109\n\n- types\n  - native namespace packages - #28925\n  - ...?\n\nIssue created by migration from https://trac.sagemath.org/ticket/29756\n\n",
    "created_at": "2020-05-29T15:15:20Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Meta-ticket: Review of Python 3 features that sagelib should use systematically",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29519",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @fchapoton @dimpase @jhpalmieri @tobiasdiez @tscrim @nthiery @slel @nbruin

Keywords: sd109

- types
  - native namespace packages - #28925
  - ...?

Issue created by migration from https://trac.sagemath.org/ticket/29756





---

archive/issue_comments_418627.json:
```json
{
    "body": "About types, has a general policy been discussed on sage-devel?",
    "created_at": "2020-06-02T10:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29519#issuecomment-418627",
    "user": "https://github.com/egourgoulhon"
}
```

About types, has a general policy been discussed on sage-devel?



---

archive/issue_comments_418628.json:
```json
{
    "body": "`typing` is a standard Python 3 module, and it allows one to catch more errors.. Why would one have anything against it?",
    "created_at": "2020-06-02T14:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29519#issuecomment-418628",
    "user": "https://github.com/dimpase"
}
```

`typing` is a standard Python 3 module, and it allows one to catch more errors.. Why would one have anything against it?



---

archive/issue_comments_418629.json:
```json
{
    "body": "> `typing` is a standard Python 3 module, and it allows one to catch more errors.. Why would one have anything against it?\n\n\nAre there reasons (e.g. performance) not to use it in certain circumstances?",
    "created_at": "2020-06-03T02:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29519#issuecomment-418629",
    "user": "https://github.com/kcrisman"
}
```

> `typing` is a standard Python 3 module, and it allows one to catch more errors.. Why would one have anything against it?


Are there reasons (e.g. performance) not to use it in certain circumstances?



---

archive/issue_comments_418630.json:
```json
{
    "body": "I created this ticket as a place for discussions of these new features to make sure that we use them systematically in the Sage library, rather than in an ad-hoc way.\n\nFor example, for typing, I think there are opportunities to integrate it with the various dynamically generated classes that come in from the category system, as I noted in #29775.",
    "created_at": "2020-06-03T02:35:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29519#issuecomment-418630",
    "user": "https://github.com/mkoeppe"
}
```

I created this ticket as a place for discussions of these new features to make sure that we use them systematically in the Sage library, rather than in an ad-hoc way.

For example, for typing, I think there are opportunities to integrate it with the various dynamically generated classes that come in from the category system, as I noted in #29775.



---

archive/issue_comments_418631.json:
```json
{
    "body": "There shouldn't be any performance issues with typing as it is deactivated on runtime (the only additional overhead is the import of the `typing` package).\nSee also the discussion here https://realpython.com/python-type-checking/#pros-and-cons",
    "created_at": "2020-06-03T11:36:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29519#issuecomment-418631",
    "user": "https://github.com/tobiasdiez"
}
```

There shouldn't be any performance issues with typing as it is deactivated on runtime (the only additional overhead is the import of the `typing` package).
See also the discussion here https://realpython.com/python-type-checking/#pros-and-cons



---

archive/issue_comments_418632.json:
```json
{
    "body": "Regarding f-strings, see this comment:\n\n- #30107#comment:19",
    "created_at": "2020-07-13T10:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29519#issuecomment-418632",
    "user": "https://github.com/slel"
}
```

Regarding f-strings, see this comment:

- #30107#comment:19



---

archive/issue_comments_418633.json:
```json
{
    "body": "Replying to [comment:2 egourgoulhon]:\n> About types, has a general policy been discussed on sage-devel?\n\n\n+1 for using typing. Return types in particular are useful for tab-completion on the result of function calls. For example\n\n```\nsage: \"hello\".upper().lower().upper()\n```\nthis tab-completes without evaluating the code (i.e. without setting IPython's `IPCompleter.greedy` config option).",
    "created_at": "2020-09-03T07:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29519#issuecomment-418633",
    "user": "https://github.com/mwageringel"
}
```

Replying to [comment:2 egourgoulhon]:
> About types, has a general policy been discussed on sage-devel?


+1 for using typing. Return types in particular are useful for tab-completion on the result of function calls. For example

```
sage: "hello".upper().lower().upper()
```
this tab-completes without evaluating the code (i.e. without setting IPython's `IPCompleter.greedy` config option).



---

archive/issue_events_076129.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29519#event-76129"
}
```



---

archive/issue_events_076130.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29519#event-76130"
}
```



---

archive/issue_events_076131.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29519#event-76131"
}
```



---

archive/issue_comments_418634.json:
```json
{
    "body": "Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29519#issuecomment-418634",
    "user": "https://github.com/mkoeppe"
}
```

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_076132.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29519#event-76132"
}
```



---

archive/issue_events_076133.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29519#event-76133"
}
```



---

archive/issue_events_076134.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29519#event-76134"
}
```



---

archive/issue_events_076135.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29519#event-76135"
}
```



---

archive/issue_events_076136.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29519#event-76136"
}
```



---

archive/issue_events_076137.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29519#event-76137"
}
```



---

archive/issue_events_076138.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29519#event-76138"
}
```



---

archive/issue_events_076139.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/29519",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29519#event-76139"
}
```
