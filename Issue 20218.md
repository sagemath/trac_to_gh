# Issue 20218: rewrite buggy Expression.coefficients() without Maxima

Issue created by migration from Trac.

Original creator: rws

Original creation time: 2016-04-17 07:22:44

CC:  paulmasson

At the moment the `ex1.coefficients(ex2)` method uses pexpect-Maxima to get a coefficient list of a symbolic expression `ex1` when seen as a polynomial in `ex2` but the list is wrong whenever the exponent of `ex2` is nonnumeric:

```
sage: var('a, x')
(a, x)
sage: f = a*x - x^x
sage: f.coefficient(x^x)
-1
sage: f.coefficients(x)
[[-x^x, 0], [a, 1]]
```

It should not be difficult to rewrite `coefficients` using wildcard power search and the `coefficient` method (which doesn't use Maxima).


---

Comment by rws created at 2016-07-27 07:03:53

For implementation reasons the rewrite happened in #21034 but the behaviour was not changed so this ticket still has to be addressed.


---

Comment by rws created at 2016-08-26 08:10:22

This is fixed in current Pynac master.


---

Comment by rws created at 2016-09-02 06:19:13

Changing status from new to needs_review.


---

Comment by rws created at 2016-09-02 06:19:13

Since #21369 contains doctests for this, it can be closed.


---

Comment by rws created at 2016-09-02 06:19:28

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-01-21 18:03:11

Resolution: invalid
