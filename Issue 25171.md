# Issue 25171: some magma doctests now fail

archive/issues_025171.json:
```json
{
    "body": "CC:  cremona davidloeffler\n\nKeywords: magma\n\nRunning \"`sage -tp --all --optional=sage,magma`\", with Sage 8.3.beta2 and Magma V2.23-8, I get the following failures:\n\n```\nsage/rings/polynomial/multi_polynomial_ideal.py  # 1 doctest failed\nsage/interfaces/magma.py  # 8 doctests failed\nsage/rings/polynomial/pbori.pyx  # 1 doctest failed\nsage/schemes/plane_conics/con_field.py  # 2 doctests failed\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/25408\n\n",
    "created_at": "2018-05-20T14:39:24Z",
    "labels": [
        "interfaces: optional",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "some magma doctests now fail",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25171",
    "user": "davidloeffler"
}
```
CC:  cremona davidloeffler

Keywords: magma

Running "`sage -tp --all --optional=sage,magma`", with Sage 8.3.beta2 and Magma V2.23-8, I get the following failures:

```
sage/rings/polynomial/multi_polynomial_ideal.py  # 1 doctest failed
sage/interfaces/magma.py  # 8 doctests failed
sage/rings/polynomial/pbori.pyx  # 1 doctest failed
sage/schemes/plane_conics/con_field.py  # 2 doctests failed
```


Issue created by migration from https://trac.sagemath.org/ticket/25408





---

archive/issue_comments_354518.json:
```json
{
    "body": "please review #25306",
    "created_at": "2018-05-20T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25171#issuecomment-354518",
    "user": "chapoton"
}
```

please review #25306



---

archive/issue_comments_354519.json:
```json
{
    "body": "I'm afraid that doesn't solve the problem -- all four files still fail with the branch from #25306 applied.",
    "created_at": "2018-05-20T15:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25171#issuecomment-354519",
    "user": "davidloeffler"
}
```

I'm afraid that doesn't solve the problem -- all four files still fail with the branch from #25306 applied.



---

archive/issue_comments_354520.json:
```json
{
    "body": "`@`cremona, `@`davidloeffler: as owners of the patchbot **fermat**, you seem to have access to magma. Your patchbot is apparently very fast and powerful, but it always fails these magma optional doctests. Could you please help with this ticket ?",
    "created_at": "2018-08-28T15:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25171#issuecomment-354520",
    "user": "chapoton"
}
```

`@`cremona, `@`davidloeffler: as owners of the patchbot **fermat**, you seem to have access to magma. Your patchbot is apparently very fast and powerful, but it always fails these magma optional doctests. Could you please help with this ticket ?



---

archive/issue_comments_354521.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2018-08-28T15:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25171#issuecomment-354521",
    "user": "chapoton"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_354522.json:
```json
{
    "body": "Replying to [comment:4 chapoton]:\n> `@`cremona, `@`davidloeffler: as owners of the patchbot **fermat**, you seem to have access to magma. Your patchbot is apparently very fast and powerful, but it always fails these magma optional doctests. Could you please help with this ticket ?\n\nThat is our oldest / slowest machine but for that reason mostly unused by our group.  Will be able to help, but not this week.",
    "created_at": "2018-08-28T19:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25171#issuecomment-354522",
    "user": "cremona"
}
```

Replying to [comment:4 chapoton]:
> `@`cremona, `@`davidloeffler: as owners of the patchbot **fermat**, you seem to have access to magma. Your patchbot is apparently very fast and powerful, but it always fails these magma optional doctests. Could you please help with this ticket ?

That is our oldest / slowest machine but for that reason mostly unused by our group.  Will be able to help, but not this week.



---

archive/issue_comments_354523.json:
```json
{
    "body": "I did have a look at this a couple of months back, but it is not at all easy to fix. The problem is that the Sage code for handling communication with Magma is spread around five or six different files and written in a totally baffling fashion (N layers deep in \"handlers\" and \"frameworks\" and other software-engineering abstractions of non-obvious purpose). Since no actual flesh-and-blood user has so far complained about these functions not working properly, I decided I had better things to do with my time than untangle this knot.",
    "created_at": "2018-08-29T07:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25171#issuecomment-354523",
    "user": "davidloeffler"
}
```

I did have a look at this a couple of months back, but it is not at all easy to fix. The problem is that the Sage code for handling communication with Magma is spread around five or six different files and written in a totally baffling fashion (N layers deep in "handlers" and "frameworks" and other software-engineering abstractions of non-obvious purpose). Since no actual flesh-and-blood user has so far complained about these functions not working properly, I decided I had better things to do with my time than untangle this knot.



---

archive/issue_comments_354524.json:
```json
{
    "body": "see also #26191 and the old #10631",
    "created_at": "2018-09-05T07:47:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25171",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25171#issuecomment-354524",
    "user": "chapoton"
}
```

see also #26191 and the old #10631
