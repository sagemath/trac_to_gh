# Issue 32026: sphinx raises FileExistsError

archive/issues_032026.json:
```json
{
    "body": "CC:  mkoeppe jhpalmieri\n\nThere is apparently a race condition in docbuild which leads to \n\n```\n  [dochtml]   [reference]     topology: 1937 js index entries\n  [dochtml]   [reference]     valuations: 973 js index entries\n  [dochtml]   [reference] ... done (64387 js index entries)\n  [dochtml]   [reference] copying static files... failed\n  [dochtml]   [reference] WARNING: cannot copy static file FileExistsError(17, 'File exists')\n  [dochtml]   [reference] dumping search index in English (code: en)... done\n  [dochtml]   [reference] The HTML pages are in .tox/local-homebrew-macos-standard/local/share/doc/sage/html/en/reference.\n  [dochtml]   Error building the documentation.\n  [dochtml]   Traceback (most recent call last):\n  [dochtml]     File \"/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-standard/homebrew/Cellar/python@3.9/3.9.6/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\", line 197, in _run_module_as_main\n  [dochtml]       return _run_code(code, main_globals, None,\n  [dochtml]     File \"/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-standard/homebrew/Cellar/python@3.9/3.9.6/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py\", line 87, in _run_code\n  [dochtml]       exec(code, run_globals)\n  [dochtml]     File \"/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-standard/local/lib/python3.9/site-packages/sage_docbuild/__main__.py\", line 2, in <module>\n  [dochtml]       main()\n  [dochtml]     File \"/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-standard/local/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 1813, in main\n  [dochtml]       builder()\n  [dochtml]     File \"/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-standard/local/lib/python3.9/site-packages/sage_docbuild/__init__.py\", line 133, in f\n  [dochtml]       runsphinx()\n  [dochtml]     File \"/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-standard/local/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py\", line 323, in runsphinx\n  [dochtml]       sys.stderr.raise_errors()\n  [dochtml]     File \"/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-standard/local/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py\", line 258, in raise_errors\n  [dochtml]       raise OSError(self._error)\n  [dochtml]   OSError: WARNING: cannot copy static file FileExistsError(17, 'File exists')\n  [dochtml]   \n  [dochtml]       Note: incremental documentation builds sometimes cause spurious\n  [dochtml]       error messages. To be certain that these are real errors, run\n  [dochtml]       \"make doc-clean\" first and try again.\n  [dochtml]   make[3]: *** [doc-html--reference_top] Error 1\n  [dochtml]   make[2]: *** [doc-html-reference] Error 2\n  [dochtml]   make[2]: Target `doc-html' not remade because of errors.\n  [dochtml] Full log file: /Users/runner/work/sagetrac-mirror/sagetrac-mirror/logs/dochtml.log\nmake[1]: *** [doc-html] Error 2\n```\n\non many GH Action runs on #31580, e.g.\nhttps://github.com/sagemath/sagetrac-mirror/runs/3104375540 (this is `docker (ubuntu-bionic, standard)`)\nhttps://github.com/sagemath/sagetrac-mirror/runs/3104375098 (this is `local-macos (homebrew-macos-python3_xcode, standard, default, macos-11.0)`)\n\n\nalso reproducible locally on macOS/Homebrew with `make -j8`.\n\nNo failure with `make -j1`.\n\nReported on sage-dev: https://groups.google.com/g/sage-devel/c/ts6u19KpapA/m/22BdxXZhBAAJ\n\nIssue created by migration from https://trac.sagemath.org/ticket/32263\n\n",
    "created_at": "2021-07-22T06:43:37Z",
    "labels": [
        "build",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "sphinx raises FileExistsError",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32026",
    "user": "dimpase"
}
```
CC:  mkoeppe jhpalmieri

There is apparently a race condition in docbuild which leads to 

```
  [dochtml]   [reference]     topology: 1937 js index entries
  [dochtml]   [reference]     valuations: 973 js index entries
  [dochtml]   [reference] ... done (64387 js index entries)
  [dochtml]   [reference] copying static files... failed
  [dochtml]   [reference] WARNING: cannot copy static file FileExistsError(17, 'File exists')
  [dochtml]   [reference] dumping search index in English (code: en)... done
  [dochtml]   [reference] The HTML pages are in .tox/local-homebrew-macos-standard/local/share/doc/sage/html/en/reference.
  [dochtml]   Error building the documentation.
  [dochtml]   Traceback (most recent call last):
  [dochtml]     File "/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-standard/homebrew/Cellar/python@3.9/3.9.6/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py", line 197, in _run_module_as_main
  [dochtml]       return _run_code(code, main_globals, None,
  [dochtml]     File "/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-standard/homebrew/Cellar/python@3.9/3.9.6/Frameworks/Python.framework/Versions/3.9/lib/python3.9/runpy.py", line 87, in _run_code
  [dochtml]       exec(code, run_globals)
  [dochtml]     File "/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-standard/local/lib/python3.9/site-packages/sage_docbuild/__main__.py", line 2, in <module>
  [dochtml]       main()
  [dochtml]     File "/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-standard/local/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 1813, in main
  [dochtml]       builder()
  [dochtml]     File "/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-standard/local/lib/python3.9/site-packages/sage_docbuild/__init__.py", line 133, in f
  [dochtml]       runsphinx()
  [dochtml]     File "/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-standard/local/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py", line 323, in runsphinx
  [dochtml]       sys.stderr.raise_errors()
  [dochtml]     File "/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-standard/local/lib/python3.9/site-packages/sage_docbuild/sphinxbuild.py", line 258, in raise_errors
  [dochtml]       raise OSError(self._error)
  [dochtml]   OSError: WARNING: cannot copy static file FileExistsError(17, 'File exists')
  [dochtml]   
  [dochtml]       Note: incremental documentation builds sometimes cause spurious
  [dochtml]       error messages. To be certain that these are real errors, run
  [dochtml]       "make doc-clean" first and try again.
  [dochtml]   make[3]: *** [doc-html--reference_top] Error 1
  [dochtml]   make[2]: *** [doc-html-reference] Error 2
  [dochtml]   make[2]: Target `doc-html' not remade because of errors.
  [dochtml] Full log file: /Users/runner/work/sagetrac-mirror/sagetrac-mirror/logs/dochtml.log
make[1]: *** [doc-html] Error 2
```

on many GH Action runs on #31580, e.g.
https://github.com/sagemath/sagetrac-mirror/runs/3104375540 (this is `docker (ubuntu-bionic, standard)`)
https://github.com/sagemath/sagetrac-mirror/runs/3104375098 (this is `local-macos (homebrew-macos-python3_xcode, standard, default, macos-11.0)`)


also reproducible locally on macOS/Homebrew with `make -j8`.

No failure with `make -j1`.

Reported on sage-dev: https://groups.google.com/g/sage-devel/c/ts6u19KpapA/m/22BdxXZhBAAJ

Issue created by migration from https://trac.sagemath.org/ticket/32263





---

archive/issue_comments_457434.json:
```json
{
    "body": "duplicate of #32262",
    "created_at": "2021-07-22T06:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32026",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32026#issuecomment-457434",
    "user": "dimpase"
}
```

duplicate of #32262



---

archive/issue_comments_457435.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-07-22T06:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32026",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32026#issuecomment-457435",
    "user": "dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_457436.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-22T06:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32026",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32026#issuecomment-457436",
    "user": "klee"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_457437.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2021-07-22T09:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32026",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32026#issuecomment-457437",
    "user": "slelievre"
}
```

Resolution: duplicate
