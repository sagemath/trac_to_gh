# Issue 25803: using iterators inside some "all, any, sorted, tuple" in pyx files

archive/issues_025803.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/26040\n\n",
    "created_at": "2018-08-10T06:52:39Z",
    "labels": [
        "performance",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "using iterators inside some \"all, any, sorted, tuple\" in pyx files",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25803",
    "user": "@fchapoton"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/26040





---

archive/issue_comments_364235.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-08-10T06:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25803#issuecomment-364235",
    "user": "@fchapoton"
}
```

New commits:



---

archive/issue_comments_364236.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-08-10T06:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25803#issuecomment-364236",
    "user": "@fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_364237.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-08-10T08:32:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25803#issuecomment-364237",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_364238.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-08-10T09:55:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25803#issuecomment-364238",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_364239.json:
```json
{
    "body": "So like Python, it is faster to create a tuple from a list (comprehension) than from a generator:\n\n```\nsage: %%cython\n....: def foo(n):\n....:     return tuple([i for i in range(n)])\n....: def bar(n):\n....:     return tuple(i for i in range(n))\n....: \nsage: %timeit foo(100)\nThe slowest run took 9.13 times longer than the fastest. This could mean that an intermediate result is being cached.\n1000000 loops, best of 3: 1.85 \u00b5s per loop\nsage: %timeit bar(100)\nThe slowest run took 4.90 times longer than the fastest. This could mean that an intermediate result is being cached.\n100000 loops, best of 3: 3.07 \u00b5s per loop\n```\n\nFor `frozenset`, it is also faster, but not as pronounced:\n\n```\nsage: %%cython\n....: def foo(n):\n....:     return frozenset([i for i in range(n)])\n....: def bar(n):\n....:     return frozenset(i for i in range(n))\n....: \nsage: %timeit foo(100)\nThe slowest run took 6.06 times longer than the fastest. This could mean that an intermediate result is being cached.\n100000 loops, best of 3: 3.32 \u00b5s per loop\nsage: %timeit bar(100)\nThe slowest run took 12.88 times longer than the fastest. This could mean that an intermediate result is being cached.\n100000 loops, best of 3: 3.81 \u00b5s per loop\n```\n",
    "created_at": "2018-08-10T09:58:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25803#issuecomment-364239",
    "user": "@tscrim"
}
```

So like Python, it is faster to create a tuple from a list (comprehension) than from a generator:

```
sage: %%cython
....: def foo(n):
....:     return tuple([i for i in range(n)])
....: def bar(n):
....:     return tuple(i for i in range(n))
....: 
sage: %timeit foo(100)
The slowest run took 9.13 times longer than the fastest. This could mean that an intermediate result is being cached.
1000000 loops, best of 3: 1.85 µs per loop
sage: %timeit bar(100)
The slowest run took 4.90 times longer than the fastest. This could mean that an intermediate result is being cached.
100000 loops, best of 3: 3.07 µs per loop
```

For `frozenset`, it is also faster, but not as pronounced:

```
sage: %%cython
....: def foo(n):
....:     return frozenset([i for i in range(n)])
....: def bar(n):
....:     return frozenset(i for i in range(n))
....: 
sage: %timeit foo(100)
The slowest run took 6.06 times longer than the fastest. This could mean that an intermediate result is being cached.
100000 loops, best of 3: 3.32 µs per loop
sage: %timeit bar(100)
The slowest run took 12.88 times longer than the fastest. This could mean that an intermediate result is being cached.
100000 loops, best of 3: 3.81 µs per loop
```




---

archive/issue_comments_364240.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-08-11T14:41:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25803#issuecomment-364240",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_364241.json:
```json
{
    "body": "The changes to tuple and frozenset have been undone.",
    "created_at": "2018-08-11T14:43:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25803#issuecomment-364241",
    "user": "@fchapoton"
}
```

The changes to tuple and frozenset have been undone.



---

archive/issue_comments_364242.json:
```json
{
    "body": "Thank you. LGTM.",
    "created_at": "2018-08-11T14:48:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25803#issuecomment-364242",
    "user": "@tscrim"
}
```

Thank you. LGTM.



---

archive/issue_comments_364243.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-08-11T14:48:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25803#issuecomment-364243",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_364244.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-08-20T23:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25803",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25803#issuecomment-364244",
    "user": "@vbraun"
}
```

Resolution: fixed
