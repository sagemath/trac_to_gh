# Issue 23186: divided_difference in SchubertPolynomialRing should not throw errors on unused variables

archive/issues_023186.json:
```json
{
    "body": "CC:  @tscrim sage-combinat\n\nKeywords: schubert, polynomials, divided differences\n\n```\nsage: X = SchubertPolynomialRing(ZZ)\nsage: a = X([1,2,3,4,5])\nsage: a.divided_difference(4)\n```\nThis should yield `0`, not an error. Elements of X are polynomials in infinitely many variables; when they don't use a variable, it doesn't mean that this variable cannot be divided-differenced over.\n\nFollowup to #23403.\n\nIssue created by migration from https://trac.sagemath.org/ticket/23423\n\n",
    "closed_at": "2017-09-20T22:26:40Z",
    "created_at": "2017-07-13T13:50:52Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "divided_difference in SchubertPolynomialRing should not throw errors on unused variables",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23186",
    "user": "https://github.com/darijgr"
}
```
CC:  @tscrim sage-combinat

Keywords: schubert, polynomials, divided differences

```
sage: X = SchubertPolynomialRing(ZZ)
sage: a = X([1,2,3,4,5])
sage: a.divided_difference(4)
```
This should yield `0`, not an error. Elements of X are polynomials in infinitely many variables; when they don't use a variable, it doesn't mean that this variable cannot be divided-differenced over.

Followup to #23403.

Issue created by migration from https://trac.sagemath.org/ticket/23423





---

archive/issue_comments_323999.json:
```json
{
    "body": "Now solved in #23403.",
    "created_at": "2017-07-16T13:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23186#issuecomment-323999",
    "user": "https://github.com/darijgr"
}
```

Now solved in #23403.



---

archive/issue_comments_324000.json:
```json
{
    "body": "It is an orthogonal issue from #23403, and this would be a great place to discuss this as there could be a good use case for considering having a finite number of variables and having this throw an error. I agree with the change, but it is better documented by having a separate ticket for it.",
    "created_at": "2017-07-16T13:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23186#issuecomment-324000",
    "user": "https://github.com/tscrim"
}
```

It is an orthogonal issue from #23403, and this would be a great place to discuss this as there could be a good use case for considering having a finite number of variables and having this throw an error. I agree with the change, but it is better documented by having a separate ticket for it.



---

archive/issue_comments_324001.json:
```json
{
    "body": "As discussed with Travis, this ticket is now the place for branch public/combinat/improve_schubert_divided_difference , which builds on top of #23403. Will need rebasing, though, once #23403 is p_r'd.",
    "created_at": "2017-07-16T13:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23186#issuecomment-324001",
    "user": "https://github.com/darijgr"
}
```

As discussed with Travis, this ticket is now the place for branch public/combinat/improve_schubert_divided_difference , which builds on top of #23403. Will need rebasing, though, once #23403 is p_r'd.



---

archive/issue_comments_324002.json:
```json
{
    "body": "Okay, I did some more investigating. The biggest time sink in the symmetrica version is not symmetrica, but instead most of the time is spent on checking the input via `reduced_word`. Even with removing that check, enough time is spent on the overhead that even the non-optimized native algorithm beats going to/from symmetrica unless maybe I really spent some time optimizing the interface, which, IMO, is time not well spent.",
    "created_at": "2017-07-16T23:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23186#issuecomment-324002",
    "user": "https://github.com/tscrim"
}
```

Okay, I did some more investigating. The biggest time sink in the symmetrica version is not symmetrica, but instead most of the time is spent on checking the input via `reduced_word`. Even with removing that check, enough time is spent on the overhead that even the non-optimized native algorithm beats going to/from symmetrica unless maybe I really spent some time optimizing the interface, which, IMO, is time not well spent.



---

archive/issue_comments_324003.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-09-12T15:22:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23186#issuecomment-324003",
    "user": "https://github.com/darijgr"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_324004.json:
```json
{
    "body": "Turns out no rebase is needed.",
    "created_at": "2017-09-12T15:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23186#issuecomment-324004",
    "user": "https://github.com/darijgr"
}
```

Turns out no rebase is needed.



---

archive/issue_comments_324005.json:
```json
{
    "body": "We should change `newm` to `algorithm`, which takes `'sage'` or `'symmetrica'`. I also think a better check is `if i in ZZ:` too, but that isn't something I will quibble over. Once that is done (with corresponding documentation updates), this will be a positive review.",
    "created_at": "2017-09-15T20:57:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23186#issuecomment-324005",
    "user": "https://github.com/tscrim"
}
```

We should change `newm` to `algorithm`, which takes `'sage'` or `'symmetrica'`. I also think a better check is `if i in ZZ:` too, but that isn't something I will quibble over. Once that is done (with corresponding documentation updates), this will be a positive review.



---

archive/issue_comments_324006.json:
```json
{
    "body": "Is that something I should do, or you want to do?\n\nI'm fine with `if i in ZZ` instead of `if isinstance(i, (Integer, int))`, if this is what you mean.",
    "created_at": "2017-09-16T18:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23186#issuecomment-324006",
    "user": "https://github.com/darijgr"
}
```

Is that something I should do, or you want to do?

I'm fine with `if i in ZZ` instead of `if isinstance(i, (Integer, int))`, if this is what you mean.



---

archive/issue_comments_324007.json:
```json
{
    "body": "Replying to [comment:8 darij]:\n> Is that something I should do, or you want to do?\n\n\nI can do it, but it might take me a little longer to push right now. However, it was somewhat a question of seeing if you agree; granted, I didn't phrase it like I should have.\n\n> I'm fine with `if i in ZZ` instead of `if isinstance(i, (Integer, int))`, if this is what you mean.\n\n\nYes, it is. The rationale: if by chance a user is doing 2/2, it will still work. Granted, this is not likely to happen, but I've had it happen to me enough that I'm paranoid about it now.",
    "created_at": "2017-09-16T18:30:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23186#issuecomment-324007",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:8 darij]:
> Is that something I should do, or you want to do?


I can do it, but it might take me a little longer to push right now. However, it was somewhat a question of seeing if you agree; granted, I didn't phrase it like I should have.

> I'm fine with `if i in ZZ` instead of `if isinstance(i, (Integer, int))`, if this is what you mean.


Yes, it is. The rationale: if by chance a user is doing 2/2, it will still work. Granted, this is not likely to happen, but I've had it happen to me enough that I'm paranoid about it now.



---

archive/issue_comments_324008.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-09-16T18:52:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23186#issuecomment-324008",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_324009.json:
```json
{
    "body": "Done those changes. But be warned that I haven't tested the correct behavior of the ``'symmetrica'`` algorithm on polynomials with too few variables.",
    "created_at": "2017-09-16T18:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23186#issuecomment-324009",
    "user": "https://github.com/darijgr"
}
```

Done those changes. But be warned that I haven't tested the correct behavior of the ``'symmetrica'`` algorithm on polynomials with too few variables.



---

archive/issue_comments_324010.json:
```json
{
    "body": "Thank you.",
    "created_at": "2017-09-17T14:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23186#issuecomment-324010",
    "user": "https://github.com/tscrim"
}
```

Thank you.



---

archive/issue_comments_324011.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-17T14:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23186#issuecomment-324011",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_324012.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-20T22:26:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23186#issuecomment-324012",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_060187.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-20T22:26:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23186",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23186#event-60187"
}
```
