# Issue 23186: divided_difference in SchubertPolynomialRing should not throw errors on unused variables

Issue created by migration from Trac.

Original creator: darij

Original creation time: 2017-07-13 13:50:52

CC:  tscrim sage-combinat

Keywords: schubert, polynomials, divided differences


```
sage: X = SchubertPolynomialRing(ZZ)
sage: a = X([1,2,3,4,5])
sage: a.divided_difference(4)
```

This should yield `0`, not an error. Elements of X are polynomials in infinitely many variables; when they don't use a variable, it doesn't mean that this variable cannot be divided-differenced over.

Followup to #23403.


---

Comment by darij created at 2017-07-16 13:22:49

Now solved in #23403.


---

Comment by tscrim created at 2017-07-16 13:35:19

It is an orthogonal issue from #23403, and this would be a great place to discuss this as there could be a good use case for considering having a finite number of variables and having this throw an error. I agree with the change, but it is better documented by having a separate ticket for it.


---

Comment by darij created at 2017-07-16 13:51:39

As discussed with Travis, this ticket is now the place for branch public/combinat/improve_schubert_divided_difference , which builds on top of #23403. Will need rebasing, though, once #23403 is p_r'd.


---

Comment by tscrim created at 2017-07-16 23:42:36

Okay, I did some more investigating. The biggest time sink in the symmetrica version is not symmetrica, but instead most of the time is spent on checking the input via `reduced_word`. Even with removing that check, enough time is spent on the overhead that even the non-optimized native algorithm beats going to/from symmetrica unless maybe I really spent some time optimizing the interface, which, IMO, is time not well spent.


---

Comment by darij created at 2017-09-12 15:22:53

Changing status from new to needs_review.


---

Comment by darij created at 2017-09-12 15:23:54

Turns out no rebase is needed.


---

Comment by tscrim created at 2017-09-15 20:57:53

We should change `newm` to `algorithm`, which takes `'sage'` or `'symmetrica'`. I also think a better check is `if i in ZZ:` too, but that isn't something I will quibble over. Once that is done (with corresponding documentation updates), this will be a positive review.


---

Comment by darij created at 2017-09-16 18:20:06

Is that something I should do, or you want to do?

I'm fine with `if i in ZZ` instead of `if isinstance(i, (Integer, int))`, if this is what you mean.


---

Comment by tscrim created at 2017-09-16 18:30:22

Replying to [comment:8 darij]:
> Is that something I should do, or you want to do?

I can do it, but it might take me a little longer to push right now. However, it was somewhat a question of seeing if you agree; granted, I didn't phrase it like I should have.

> I'm fine with `if i in ZZ` instead of `if isinstance(i, (Integer, int))`, if this is what you mean.

Yes, it is. The rationale: if by chance a user is doing 2/2, it will still work. Granted, this is not likely to happen, but I've had it happen to me enough that I'm paranoid about it now.


---

Comment by git created at 2017-09-16 18:52:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2017-09-16 18:53:04

Done those changes. But be warned that I haven't tested the correct behavior of the ``'symmetrica'`` algorithm on polynomials with too few variables.


---

Comment by tscrim created at 2017-09-17 14:38:46

Thank you.


---

Comment by tscrim created at 2017-09-17 14:38:46

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-09-20 22:26:40

Resolution: fixed
