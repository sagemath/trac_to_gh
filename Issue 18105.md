# Issue 18105: numerical integral is wrong in pari master

archive/issues_018105.json:
```json
{
    "body": "Within pari master, the gp numerical integral gives\n\n```\n? intnum(x=0,13,sin(x)+sin(x^2) + x)\n%1 = 84.181815392229652966739838357234264357\n```\n\ntested on pari master at commit `17795-d04cdd3` with an amd64.\n\nSee also #18340\n\nIssue created by migration from https://trac.sagemath.org/ticket/18342\n\n",
    "created_at": "2015-04-30T10:26:56Z",
    "labels": [
        "packages: standard",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.7",
    "title": "numerical integral is wrong in pari master",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18105",
    "user": "vdelecroix"
}
```
Within pari master, the gp numerical integral gives

```
? intnum(x=0,13,sin(x)+sin(x^2) + x)
%1 = 84.181815392229652966739838357234264357
```

tested on pari master at commit `17795-d04cdd3` with an amd64.

See also #18340

Issue created by migration from https://trac.sagemath.org/ticket/18342





---

archive/issue_comments_244014.json:
```json
{
    "body": "Upstream has answered essentially that we need to live with it. I think we should close this as wontfix.",
    "created_at": "2015-05-01T18:58:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18105#issuecomment-244014",
    "user": "jdemeyer"
}
```

Upstream has answered essentially that we need to live with it. I think we should close this as wontfix.



---

archive/issue_comments_244015.json:
```json
{
    "body": "I just read the answer from Karim. We should document that this function is not adaptative and is likely to lead to wrong results with oscillating functions (though `sin(x^2)` at `x=13` is not terribly oscillating compared to `sin(1/x)` at `0`).\n\nVincent",
    "created_at": "2015-05-01T20:04:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18105#issuecomment-244015",
    "user": "vdelecroix"
}
```

I just read the answer from Karim. We should document that this function is not adaptative and is likely to lead to wrong results with oscillating functions (though `sin(x^2)` at `x=13` is not terribly oscillating compared to `sin(1/x)` at `0`).

Vincent



---

archive/issue_comments_244016.json:
```json
{
    "body": "Replying to [comment:5 vdelecroix]:\n> We should document\ndocument where?  `intnum` isn't available in the Sage interface for PARI (because it has a closure argument, see #18052 and #18038).",
    "created_at": "2015-05-02T18:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18105#issuecomment-244016",
    "user": "jdemeyer"
}
```

Replying to [comment:5 vdelecroix]:
> We should document
document where?  `intnum` isn't available in the Sage interface for PARI (because it has a closure argument, see #18052 and #18038).



---

archive/issue_comments_244017.json:
```json
{
    "body": "Replying to [comment:7 jdemeyer]:\n> Replying to [comment:5 vdelecroix]:\n> > We should document\n> document where?  `intnum` isn't available in the Sage interface for PARI (because it has a closure argument, see #18052 and #18038).\n\nIn the pari interface\n\n```\nsage: pari(\"intnum(x=0,13,sin(x)+sin(x^2) + x)\")\n85.1885681951527\n```\n",
    "created_at": "2015-05-02T18:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18105#issuecomment-244017",
    "user": "vdelecroix"
}
```

Replying to [comment:7 jdemeyer]:
> Replying to [comment:5 vdelecroix]:
> > We should document
> document where?  `intnum` isn't available in the Sage interface for PARI (because it has a closure argument, see #18052 and #18038).

In the pari interface

```
sage: pari("intnum(x=0,13,sin(x)+sin(x^2) + x)")
85.1885681951527
```




---

archive/issue_comments_244018.json:
```json
{
    "body": "Yep, e.g.\n\n```\nsage: pari(\"intnum(x=0,13,sin(x)+sin(x^2) + x)\")\n84.1818153922297\nsage: pari(\"intnum(x=0,13,sin(x)+sin(x^2) + x,1)\")\n85.1885681951527\nsage: pari(\"intnum(x=0,13,sin(x)+sin(x^2) + x,2)\")\n85.1885681951527\n```\n\nwith an explanation in a comment.",
    "created_at": "2015-05-02T18:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18105#issuecomment-244018",
    "user": "leif"
}
```

Yep, e.g.

```
sage: pari("intnum(x=0,13,sin(x)+sin(x^2) + x)")
84.1818153922297
sage: pari("intnum(x=0,13,sin(x)+sin(x^2) + x,1)")
85.1885681951527
sage: pari("intnum(x=0,13,sin(x)+sin(x^2) + x,2)")
85.1885681951527
```

with an explanation in a comment.



---

archive/issue_comments_244019.json:
```json
{
    "body": "Replying to [comment:8 vdelecroix]:\n> Replying to [comment:7 jdemeyer]:\n> > Replying to [comment:5 vdelecroix]:\n> > > We should document\n> > document where?  `intnum` isn't available in the Sage interface for PARI (because it has a closure argument, see #18052 and #18038).\n> \n> In the pari interface\nThe module docstring of `pari_instance.pyx` is not the place to document a specific function.",
    "created_at": "2015-05-03T10:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18105#issuecomment-244019",
    "user": "jdemeyer"
}
```

Replying to [comment:8 vdelecroix]:
> Replying to [comment:7 jdemeyer]:
> > Replying to [comment:5 vdelecroix]:
> > > We should document
> > document where?  `intnum` isn't available in the Sage interface for PARI (because it has a closure argument, see #18052 and #18038).
> 
> In the pari interface
The module docstring of `pari_instance.pyx` is not the place to document a specific function.
