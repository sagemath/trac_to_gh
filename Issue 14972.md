# Issue 14972: Upgrade experimental libFES package to version 0.2

archive/issues_014972.json:
```json
{
    "body": "CC:  malb\n\nA new version has been released !\n\nWhat is new in this version? Nothing, except it is now twice faster for quadratic systems.\n\nA patch must be applied to the sage tree, and the new spkg can be found here : https://bitbucket.org/fes/fes/downloads/fes-0.2.spkg\n\nIssue created by migration from https://trac.sagemath.org/ticket/15209\n\n",
    "created_at": "2013-09-18T08:29:52Z",
    "labels": [
        "packages: experimental",
        "major",
        "enhancement"
    ],
    "title": "Upgrade experimental libFES package to version 0.2",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14972",
    "user": "Bouillaguet"
}
```
CC:  malb

A new version has been released !

What is new in this version? Nothing, except it is now twice faster for quadratic systems.

A patch must be applied to the sage tree, and the new spkg can be found here : https://bitbucket.org/fes/fes/downloads/fes-0.2.spkg

Issue created by migration from https://trac.sagemath.org/ticket/15209





---

archive/issue_comments_191237.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-09-19T15:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191237",
    "user": "Bouillaguet"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_191238.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-01-22T18:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191238",
    "user": "malb"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_191239.json:
```json
{
    "body": "Since we now moved to git proper the SPKG should be replaced by an entry in $SAGE_ROOT/build/pkgs.",
    "created_at": "2014-01-22T18:12:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191239",
    "user": "malb"
}
```

Since we now moved to git proper the SPKG should be replaced by an entry in $SAGE_ROOT/build/pkgs.



---

archive/issue_comments_191240.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2015-05-14T12:40:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191240",
    "user": "chapoton"
}
```

Changing priority from major to minor.



---

archive/issue_comments_191241.json:
```json
{
    "body": "change of priority just to save the patchbots..",
    "created_at": "2015-05-14T12:40:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191241",
    "user": "chapoton"
}
```

change of priority just to save the patchbots..



---

archive/issue_comments_191242.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-24T21:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191242",
    "user": "tscholl2"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_191243.json:
```json
{
    "body": "I noticed with the old version this library didn't pass many doctests\n\nThis new version seems to pass more, but not all of them. It's also now in a spkg folder in build/\n----\nNew commits:",
    "created_at": "2015-05-24T21:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191243",
    "user": "tscholl2"
}
```

I noticed with the old version this library didn't pass many doctests

This new version seems to pass more, but not all of them. It's also now in a spkg folder in build/
----
New commits:



---

archive/issue_comments_191244.json:
```json
{
    "body": "If it doesn't pass all tests, why is the ticket \"needs review\"?",
    "created_at": "2015-05-25T05:56:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191244",
    "user": "malb"
}
```

If it doesn't pass all tests, why is the ticket "needs review"?



---

archive/issue_comments_191245.json:
```json
{
    "body": "This needs a `type` file, see #18431.\n\n> If it doesn't pass all tests, why is the ticket \"needs review\"?\nGiven that the current version also doesn't pass all tests and given that it's an *experimental* package, I guess that's allowed.",
    "created_at": "2015-05-25T14:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191245",
    "user": "jdemeyer"
}
```

This needs a `type` file, see #18431.

> If it doesn't pass all tests, why is the ticket "needs review"?
Given that the current version also doesn't pass all tests and given that it's an *experimental* package, I guess that's allowed.



---

archive/issue_comments_191246.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-25T14:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191246",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_191247.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-25T16:50:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191247",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_191248.json:
```json
{
    "body": "Sorry I was using 6.7 and didn't see the change about the type/dependency files in 6.8. I pushed  new commit with those as well. Hopefully it now fits in with the current spkg standard.",
    "created_at": "2015-05-25T22:06:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191248",
    "user": "tscholl2"
}
```

Sorry I was using 6.7 and didn't see the change about the type/dependency files in 6.8. I pushed  new commit with those as well. Hopefully it now fits in with the current spkg standard.



---

archive/issue_comments_191249.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-26T19:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191249",
    "user": "tscholl2"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_191250.json:
```json
{
    "body": "Since you renamed the package from `fes` to `libfes`, you should also change all instances of `optional - FES` to `optional - libFES` (or whatever capitalization you prefer).",
    "created_at": "2015-06-01T09:19:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191250",
    "user": "jdemeyer"
}
```

Since you renamed the package from `fes` to `libfes`, you should also change all instances of `optional - FES` to `optional - libFES` (or whatever capitalization you prefer).



---

archive/issue_comments_191251.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-01T09:19:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191251",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_191252.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-02T03:33:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191252",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_191253.json:
```json
{
    "body": "Good point on changing the name everywhere.\n\nI used `./sage -grep \"FES\"` to find any other references. The only one I could find was in a polynomial function under rings/. That also referenced an old `install_package` function which when I ran Sage suggested using `sage -i libFES` so I changed that documentation as well.\n\nAlso I finally figured out that the functions that were being wrapped had several signature changes. Now they are how they should be and it passes all the tests.",
    "created_at": "2015-06-02T03:39:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191253",
    "user": "tscholl2"
}
```

Good point on changing the name everywhere.

I used `./sage -grep "FES"` to find any other references. The only one I could find was in a polynomial function under rings/. That also referenced an old `install_package` function which when I ran Sage suggested using `sage -i libFES` so I changed that documentation as well.

Also I finally figured out that the functions that were being wrapped had several signature changes. Now they are how they should be and it passes all the tests.



---

archive/issue_comments_191254.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-06-02T03:39:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191254",
    "user": "tscholl2"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_191255.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-06-02T08:21:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191255",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_191256.json:
```json
{
    "body": "Can you rename the package `build/pkgs/libFES` -> `build/pkgs/libfes` (all other packages in `build/pkgs` are lower-case). Also the package name in `src/module_list.py` and other places should be lower-case then.",
    "created_at": "2015-06-02T08:21:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191256",
    "user": "jdemeyer"
}
```

Can you rename the package `build/pkgs/libFES` -> `build/pkgs/libfes` (all other packages in `build/pkgs` are lower-case). Also the package name in `src/module_list.py` and other places should be lower-case then.



---

archive/issue_comments_191257.json:
```json
{
    "body": "I am also a bit worried that the [upstream page](http://www.lifl.fr/~bouillag/fes/) doesn't mention this source tarball anywhere. Where does the tarball on this ticket come from?",
    "created_at": "2015-06-02T08:38:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191257",
    "user": "jdemeyer"
}
```

I am also a bit worried that the [upstream page](http://www.lifl.fr/~bouillag/fes/) doesn't mention this source tarball anywhere. Where does the tarball on this ticket come from?



---

archive/issue_comments_191258.json:
```json
{
    "body": "This is not needed:\n\n```\nunset RM\n```\n\n\nAnd this shouldn't be needed if the upstream tarball was properly made using `make dist` (which makes it even more important to answer the question how that tarball was obtained):\n\n```\nautoreconf -i -v\n```\n",
    "created_at": "2015-06-02T08:45:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191258",
    "user": "jdemeyer"
}
```

This is not needed:

```
unset RM
```


And this shouldn't be needed if the upstream tarball was properly made using `make dist` (which makes it even more important to answer the question how that tarball was obtained):

```
autoreconf -i -v
```




---

archive/issue_comments_191259.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-02T15:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191259",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_191260.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-06-02T15:50:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191260",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_191261.json:
```json
{
    "body": "Thanks for the comments. I'm sorry I should have been more explicit about the source of the tarball.\n\nThe original source tarball is listed on the [upstream](http://www.lifl.fr/~bouillag/fes/) website you linked to. Under \"Advanced use\" it has a link:\n\n\"You can get the code in a [source tarball](https://bitbucket.org/fes/fes/get/master.tar.bz2)\"\n\nThe link is to the bitbucket page for the source code, [https://bitbucket.org/fes/fes/get/master.tar.bz2](https://bitbucket.org/fes/fes/get/master.tar.bz2)\nThe md5sum is\n`86a983de37eafa4c3110b1a640418023  master.tar.bz2`\n\nHowever, I had to modify this tarball because it expands to a folder named `fes-fes-1229a4ec1e4e/`. Somehow Sage's package installer wasn't correctly renaming the expanded format and installation would fail.\n\nSo I renamed `fes-fes-1229a4ec1e4e/` to `libFES-0.2/` and re-compressed the file with\n`tar -cjf libFES-0.2.tar.bz2 libFES-0.2`\nThe new md5sum is\n`f895755c85ada462d77ab4d8e3fb4fd3  libFES-0.2.tar.bz2`\nThis is the file linked to on my SMC project in the ticket description.\n\n\nAs for the lines in the `spkg-install` file, if I remove\n\n\n```\nautoreconf -i -v\n```\n\n\nI get an error when trying to install the package:\n\n\n```\n./spkg-install: line 19: ./configure: No such file or directory\nError configuring libFES\n```\n\n\nIs it bad to run `autoreconf` in install file? Should I run this command and then re-compress the folder?",
    "created_at": "2015-06-02T15:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191261",
    "user": "tscholl2"
}
```

Thanks for the comments. I'm sorry I should have been more explicit about the source of the tarball.

The original source tarball is listed on the [upstream](http://www.lifl.fr/~bouillag/fes/) website you linked to. Under "Advanced use" it has a link:

"You can get the code in a [source tarball](https://bitbucket.org/fes/fes/get/master.tar.bz2)"

The link is to the bitbucket page for the source code, [https://bitbucket.org/fes/fes/get/master.tar.bz2](https://bitbucket.org/fes/fes/get/master.tar.bz2)
The md5sum is
`86a983de37eafa4c3110b1a640418023  master.tar.bz2`

However, I had to modify this tarball because it expands to a folder named `fes-fes-1229a4ec1e4e/`. Somehow Sage's package installer wasn't correctly renaming the expanded format and installation would fail.

So I renamed `fes-fes-1229a4ec1e4e/` to `libFES-0.2/` and re-compressed the file with
`tar -cjf libFES-0.2.tar.bz2 libFES-0.2`
The new md5sum is
`f895755c85ada462d77ab4d8e3fb4fd3  libFES-0.2.tar.bz2`
This is the file linked to on my SMC project in the ticket description.


As for the lines in the `spkg-install` file, if I remove


```
autoreconf -i -v
```


I get an error when trying to install the package:


```
./spkg-install: line 19: ./configure: No such file or directory
Error configuring libFES
```


Is it bad to run `autoreconf` in install file? Should I run this command and then re-compress the folder?



---

archive/issue_comments_191262.json:
```json
{
    "body": "Replying to [comment:23 tscholl2]:\n> The original source tarball is listed on the [upstream](http://www.lifl.fr/~bouillag/fes/) website you linked to. Under \"Advanced use\" it has a link:\n> \n> \"You can get the code in a [source tarball](https://bitbucket.org/fes/fes/get/master.tar.bz2)\"\n> \n> The link is to the bitbucket page for the source code, [https://bitbucket.org/fes/fes/get/master.tar.bz2](https://bitbucket.org/fes/fes/get/master.tar.bz2)\nYes, but it's not really said that this is \"version 0.2\". It looks like it's just a snapshot of the bitbucket repository. Unless you know for sure that this is really version 0.2, use a date `libfes-20140427` (the date of the files in the tarball) as version number. Do you feel like asking upstream about this? \n\n> Is it bad to run `autoreconf` in install file?\nYes, because `autoreconf` is not installed on many systems.\n\n> Should I run this command and then re-compress the folder?\nNo, the proper way to generate source tarball using autotools is to run `make dist`. So you should somehow get the correct source tarball, build it (in whatever way, using `autoreconf` if needed) on your own system, and run `make dist`. This command will generate a tarball which is meant to be used as source tarball.",
    "created_at": "2015-06-02T18:38:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191262",
    "user": "jdemeyer"
}
```

Replying to [comment:23 tscholl2]:
> The original source tarball is listed on the [upstream](http://www.lifl.fr/~bouillag/fes/) website you linked to. Under "Advanced use" it has a link:
> 
> "You can get the code in a [source tarball](https://bitbucket.org/fes/fes/get/master.tar.bz2)"
> 
> The link is to the bitbucket page for the source code, [https://bitbucket.org/fes/fes/get/master.tar.bz2](https://bitbucket.org/fes/fes/get/master.tar.bz2)
Yes, but it's not really said that this is "version 0.2". It looks like it's just a snapshot of the bitbucket repository. Unless you know for sure that this is really version 0.2, use a date `libfes-20140427` (the date of the files in the tarball) as version number. Do you feel like asking upstream about this? 

> Is it bad to run `autoreconf` in install file?
Yes, because `autoreconf` is not installed on many systems.

> Should I run this command and then re-compress the folder?
No, the proper way to generate source tarball using autotools is to run `make dist`. So you should somehow get the correct source tarball, build it (in whatever way, using `autoreconf` if needed) on your own system, and run `make dist`. This command will generate a tarball which is meant to be used as source tarball.



---

archive/issue_comments_191263.json:
```json
{
    "body": "Replying to [comment:24 jdemeyer]:\n> Replying to [comment:23 tscholl2]:\n> > The original source tarball is listed on the [upstream](http://www.lifl.fr/~bouillag/fes/) website you linked to. Under \"Advanced use\" it has a link:\n> > \n> > \"You can get the code in a [source tarball](https://bitbucket.org/fes/fes/get/master.tar.bz2)\"\n> > \n> > The link is to the bitbucket page for the source code, [https://bitbucket.org/fes/fes/get/master.tar.bz2](https://bitbucket.org/fes/fes/get/master.tar.bz2)\n> Yes, but it's not really said that this is \"version 0.2\". It looks like it's just a snapshot of the bitbucket repository. Unless you know for sure that this is really version 0.2, use a date `libfes-20140427` (the date of the files in the tarball) as version number. Do you feel like asking upstream about this? \n\nI compared the files and it matched the latest commit so I figured it was the latest snapshot. I could also check with upstream.\n\n> \n> > Is it bad to run `autoreconf` in install file?\n> Yes, because `autoreconf` is not installed on many systems.\n> \n> > Should I run this command and then re-compress the folder?\n> No, the proper way to generate source tarball using autotools is to run `make dist`. So you should somehow get the correct source tarball, build it (in whatever way, using `autoreconf` if needed) on your own system, and run `make dist`. This command will generate a tarball which is meant to be used as source tarball.\n\nRunning `make dist` fails and I don't quite understand the error message:\n\n\n```\n~/tmp/sources/fes$ make dist\nmake  dist-gzip am__post_remove_distdir='@:'\nmake[1]: Entering directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes'\nmake[1]: *** No rule to make target 'configfsf.guess', needed by 'distdir'.  Stop.\nmake[1]: Leaving directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes'\nMakefile:600: recipe for target 'dist' failed\nmake: *** [dist] Error 2\n```\n\n\nI will email upstream (he was the original author of this ticket actually) and see if he knows how to fix this. Otherwise it will probably take me a few days to figure out this error. I thought since this was an optional and experimental package that requiring `autoreconf` was not so terrible.",
    "created_at": "2015-06-03T04:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191263",
    "user": "tscholl2"
}
```

Replying to [comment:24 jdemeyer]:
> Replying to [comment:23 tscholl2]:
> > The original source tarball is listed on the [upstream](http://www.lifl.fr/~bouillag/fes/) website you linked to. Under "Advanced use" it has a link:
> > 
> > "You can get the code in a [source tarball](https://bitbucket.org/fes/fes/get/master.tar.bz2)"
> > 
> > The link is to the bitbucket page for the source code, [https://bitbucket.org/fes/fes/get/master.tar.bz2](https://bitbucket.org/fes/fes/get/master.tar.bz2)
> Yes, but it's not really said that this is "version 0.2". It looks like it's just a snapshot of the bitbucket repository. Unless you know for sure that this is really version 0.2, use a date `libfes-20140427` (the date of the files in the tarball) as version number. Do you feel like asking upstream about this? 

I compared the files and it matched the latest commit so I figured it was the latest snapshot. I could also check with upstream.

> 
> > Is it bad to run `autoreconf` in install file?
> Yes, because `autoreconf` is not installed on many systems.
> 
> > Should I run this command and then re-compress the folder?
> No, the proper way to generate source tarball using autotools is to run `make dist`. So you should somehow get the correct source tarball, build it (in whatever way, using `autoreconf` if needed) on your own system, and run `make dist`. This command will generate a tarball which is meant to be used as source tarball.

Running `make dist` fails and I don't quite understand the error message:


```
~/tmp/sources/fes$ make dist
make  dist-gzip am__post_remove_distdir='@:'
make[1]: Entering directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes'
make[1]: *** No rule to make target 'configfsf.guess', needed by 'distdir'.  Stop.
make[1]: Leaving directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes'
Makefile:600: recipe for target 'dist' failed
make: *** [dist] Error 2
```


I will email upstream (he was the original author of this ticket actually) and see if he knows how to fix this. Otherwise it will probably take me a few days to figure out this error. I thought since this was an optional and experimental package that requiring `autoreconf` was not so terrible.



---

archive/issue_comments_191264.json:
```json
{
    "body": "Replying to [comment:25 tscholl2]:\n> {{{\n> ~/tmp/sources/fes$ make dist\n> make  dist-gzip am__post_remove_distdir='`@`:'\n> make[1]: Entering directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes'\n> make[1]: *** No rule to make target 'configfsf.guess', needed by 'distdir'.  Stop.\n> make[1]: Leaving directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes'\n> Makefile:600: recipe for target 'dist' failed\n> make: *** [dist] Error 2\n> }}}\n\nThe upstream autotools files are pretty broken, I will see what I can do.",
    "created_at": "2015-06-03T06:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191264",
    "user": "jdemeyer"
}
```

Replying to [comment:25 tscholl2]:
> {{{
> ~/tmp/sources/fes$ make dist
> make  dist-gzip am__post_remove_distdir='`@`:'
> make[1]: Entering directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes'
> make[1]: *** No rule to make target 'configfsf.guess', needed by 'distdir'.  Stop.
> make[1]: Leaving directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes'
> Makefile:600: recipe for target 'dist' failed
> make: *** [dist] Error 2
> }}}

The upstream autotools files are pretty broken, I will see what I can do.



---

archive/issue_comments_191265.json:
```json
{
    "body": "Attachment\n\nI attached to this ticket the needed fixes for the autotools project. With this fix, it passes `make distcheck` (which generates the distribution and checks that it actually works).",
    "created_at": "2015-06-03T06:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191265",
    "user": "jdemeyer"
}
```

Attachment

I attached to this ticket the needed fixes for the autotools project. With this fix, it passes `make distcheck` (which generates the distribution and checks that it actually works).



---

archive/issue_comments_191266.json:
```json
{
    "body": "Replying to [comment:27 jdemeyer]:\n> I attached to this ticket the needed fixes for the autotools project. With this fix, it passes `make distcheck` (which generates the distribution and checks that it actually works).\n\nI wasn't able to get `make distcheck` to pass when I applied your patch. Can you tell me if I am doing something wrong. I tried patching the tarball I attached and also with a totally new directory using the following code (this should be equivalent since the tarball attached should be the latest snapshot of upstream master):\n\n```\ngit clone https://bitbucket.org/fes/fes.git\ncd fes\nwget http://trac.sagemath.org/raw-attachment/ticket/15209/libfes.patch\npatch -p1 < libfes.patch\nautoreconf -i -v\n./configure\nmake\nmake distcheck\n\n```\n\n\nThanks for looking into autotools for this!",
    "created_at": "2015-06-06T05:49:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191266",
    "user": "tscholl2"
}
```

Replying to [comment:27 jdemeyer]:
> I attached to this ticket the needed fixes for the autotools project. With this fix, it passes `make distcheck` (which generates the distribution and checks that it actually works).

I wasn't able to get `make distcheck` to pass when I applied your patch. Can you tell me if I am doing something wrong. I tried patching the tarball I attached and also with a totally new directory using the following code (this should be equivalent since the tarball attached should be the latest snapshot of upstream master):

```
git clone https://bitbucket.org/fes/fes.git
cd fes
wget http://trac.sagemath.org/raw-attachment/ticket/15209/libfes.patch
patch -p1 < libfes.patch
autoreconf -i -v
./configure
make
make distcheck

```


Thanks for looking into autotools for this!



---

archive/issue_comments_191267.json:
```json
{
    "body": "Exactly the same commands *do* work for me and it gives a tarball. What error do you get?\n\nIdeally, upstream should apply the autotools patches and release a source tarball with `make dist`.",
    "created_at": "2015-06-06T07:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191267",
    "user": "jdemeyer"
}
```

Exactly the same commands *do* work for me and it gives a tarball. What error do you get?

Ideally, upstream should apply the autotools patches and release a source tarball with `make dist`.



---

archive/issue_comments_191268.json:
```json
{
    "body": "Replying to [comment:29 jdemeyer]:\n> Exactly the same commands *do* work for me and it gives a tarball. What error do you get?\n> \n\nHere is the error, it looks like it is expecting some directory that isn't there or isn't being named properly? Also it does generate a tarball, but it's only 45 bytes:\n\n\n```\n~/tmp/sources/fes$ make distcheck\nmake  dist-gzip am__post_remove_distdir='@:'\nmake[1]: Entering directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes'\nif test -d \"libfes-0.2\"; then find \"libfes-0.2\" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf \"libfes-0.2\" || { sleep 5 && rm -rf \"libfes-0.2\"; }; else :; fi\ntest -d \"libfes-0.2\" || mkdir \"libfes-0.2\"\n (cd src && make  top_distdir=../libfes-0.2 distdir=../libfes-0.2/src \\\n     am__remove_distdir=: am__skip_length_check=: am__skip_mode_fix=: distdir)\nmake[2]: Entering directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes/src'\nmake[2]: Leaving directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes/src'\n (cd test && make  top_distdir=../libfes-0.2 distdir=../libfes-0.2/test \\\n     am__remove_distdir=: am__skip_length_check=: am__skip_mode_fix=: distdir)\nmake[2]: Entering directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes/test'\nmake[2]: Leaving directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes/test'\ntest -n \"\" \\\n        -exec chmod u+rwx,go+rx {} \\; -o \\\n  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \\; -o \\\n  ! -type d ! -perm -400 -exec chmod a+r {} \\; -o \\\n  ! -type d ! -perm -444 -exec /bin/bash /projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes/install-sh -c -m a+r {} {} \\; \\\ntardir=libfes-0.2 && ${TAR-tar} chof - \"$tardir\" | GZIP=--best gzip -c >libfes-0.2.tar.gz\ntar: value 738736247 out of uid_t range 0..2097151\ntar: Exiting with failure status due to previous errors\nmake[1]: Leaving directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes'\nif test -d \"libfes-0.2\"; then find \"libfes-0.2\" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf \"libfes-0.2\" || { sleep 5 && rm -rf \"libfes-0.2\"; }; else :; fi\ncase 'libfes-0.2.tar.gz' in \\\n*.tar.gz*) \\\n  GZIP=--best gzip -dc libfes-0.2.tar.gz | ${TAR-tar} xf - ;;\\\n*.tar.bz2*) \\\n  bzip2 -dc libfes-0.2.tar.bz2 | ${TAR-tar} xf - ;;\\\n*.tar.lz*) \\\n  lzip -dc libfes-0.2.tar.lz | ${TAR-tar} xf - ;;\\\n*.tar.xz*) \\\n  xz -dc libfes-0.2.tar.xz | ${TAR-tar} xf - ;;\\\n*.tar.Z*) \\\n  uncompress -c libfes-0.2.tar.Z | ${TAR-tar} xf - ;;\\\n*.shar.gz*) \\\n  GZIP=--best gzip -dc libfes-0.2.shar.gz | unshar ;;\\\n*.zip*) \\\n  unzip libfes-0.2.zip ;;\\\nesac\nchmod -R a-w libfes-0.2\nchmod: cannot access \u2018libfes-0.2\u2019: No such file or directory\nMakefile:606: recipe for target 'distcheck' failed\nmake: *** [distcheck] Error 1\n```\n\n|| find \"libfes-0.2\" -type d ! -perm -755 \\\n|| chmod -R a+r \"libfes-0.2\"\nIf it helps, this is on running on a sage math cloud project. I'm not sure if there is some other tool that should be installed, but if there is I can ask William to install it for this.\n\n> Ideally, upstream should apply the autotools patches and release a source tarball with `make dist`.\n\nI emailed upstream about this issue. I haven't heard back yet.",
    "created_at": "2015-06-06T14:22:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14972",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14972#issuecomment-191268",
    "user": "tscholl2"
}
```

Replying to [comment:29 jdemeyer]:
> Exactly the same commands *do* work for me and it gives a tarball. What error do you get?
> 

Here is the error, it looks like it is expecting some directory that isn't there or isn't being named properly? Also it does generate a tarball, but it's only 45 bytes:


```
~/tmp/sources/fes$ make distcheck
make  dist-gzip am__post_remove_distdir='@:'
make[1]: Entering directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes'
if test -d "libfes-0.2"; then find "libfes-0.2" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "libfes-0.2" || { sleep 5 && rm -rf "libfes-0.2"; }; else :; fi
test -d "libfes-0.2" || mkdir "libfes-0.2"
 (cd src && make  top_distdir=../libfes-0.2 distdir=../libfes-0.2/src \
     am__remove_distdir=: am__skip_length_check=: am__skip_mode_fix=: distdir)
make[2]: Entering directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes/src'
make[2]: Leaving directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes/src'
 (cd test && make  top_distdir=../libfes-0.2 distdir=../libfes-0.2/test \
     am__remove_distdir=: am__skip_length_check=: am__skip_mode_fix=: distdir)
make[2]: Entering directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes/test'
make[2]: Leaving directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes/test'
test -n "" \
        -exec chmod u+rwx,go+rx {} \; -o \
  ! -type d ! -perm -444 -links 1 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -400 -exec chmod a+r {} \; -o \
  ! -type d ! -perm -444 -exec /bin/bash /projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes/install-sh -c -m a+r {} {} \; \
tardir=libfes-0.2 && ${TAR-tar} chof - "$tardir" | GZIP=--best gzip -c >libfes-0.2.tar.gz
tar: value 738736247 out of uid_t range 0..2097151
tar: Exiting with failure status due to previous errors
make[1]: Leaving directory '/projects/330d780d-8c93-4e93-9e4b-bfb04951901a/tmp/sources/fes'
if test -d "libfes-0.2"; then find "libfes-0.2" -type d ! -perm -200 -exec chmod u+w {} ';' && rm -rf "libfes-0.2" || { sleep 5 && rm -rf "libfes-0.2"; }; else :; fi
case 'libfes-0.2.tar.gz' in \
*.tar.gz*) \
  GZIP=--best gzip -dc libfes-0.2.tar.gz | ${TAR-tar} xf - ;;\
*.tar.bz2*) \
  bzip2 -dc libfes-0.2.tar.bz2 | ${TAR-tar} xf - ;;\
*.tar.lz*) \
  lzip -dc libfes-0.2.tar.lz | ${TAR-tar} xf - ;;\
*.tar.xz*) \
  xz -dc libfes-0.2.tar.xz | ${TAR-tar} xf - ;;\
*.tar.Z*) \
  uncompress -c libfes-0.2.tar.Z | ${TAR-tar} xf - ;;\
*.shar.gz*) \
  GZIP=--best gzip -dc libfes-0.2.shar.gz | unshar ;;\
*.zip*) \
  unzip libfes-0.2.zip ;;\
esac
chmod -R a-w libfes-0.2
chmod: cannot access ‘libfes-0.2’: No such file or directory
Makefile:606: recipe for target 'distcheck' failed
make: *** [distcheck] Error 1
```

|| find "libfes-0.2" -type d ! -perm -755 \
|| chmod -R a+r "libfes-0.2"
If it helps, this is on running on a sage math cloud project. I'm not sure if there is some other tool that should be installed, but if there is I can ask William to install it for this.

> Ideally, upstream should apply the autotools patches and release a source tarball with `make dist`.

I emailed upstream about this issue. I haven't heard back yet.
