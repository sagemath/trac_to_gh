# Issue 10445: fix inject_coefficients for toric varieties

Issue created by migration from Trac.

Original creator: novoselt

Original creation time: 2010-12-19 20:52:42

Assignee: AlexGhitza

CC:  vbraun

Because it only pretends to work now:

```
sage: P2 = toric_varieties.P2()
sage: P2a = P2.base_extend(FractionField(QQ["a"]))
sage: P2a.inject_coefficients()
Defining a
sage: a
...
NameError: name 'a' is not defined
```



---

Attachment


---

Comment by novoselt created at 2010-12-19 21:24:14

Depends on #10355.


---

Comment by novoselt created at 2010-12-19 21:24:14

Changing status from new to needs_review.


---

Comment by vbraun created at 2010-12-20 12:24:27

Nice! Tested on 4.6.1alpha3.


---

Comment by vbraun created at 2010-12-20 12:24:27

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-01-23 19:22:41

I get a failure in a doctest added by this patch:

```
sage -t  -force_lib devel/sage/sage/schemes/generic/toric_variety.py
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-4.6.2.alpha2/devel/sage-main/sage/schemes/generic/toric_variety.py", line 1054:
    sage: a + b in P1xP1.coordinate_ring()
Expected:
    True
Got:
    False
**********************************************************************
```



---

Comment by jdemeyer created at 2011-01-23 19:23:18

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2011-01-23 19:51:24

I'm pretty sure you missed the dependency in comment:1. It works for me.


---

Comment by vbraun created at 2011-01-23 19:51:24

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2011-01-25 08:16:02

Resolution: fixed
