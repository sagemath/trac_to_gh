# Issue 28887: Add script packages build/pkgs/PREREQ, build/pkgs/TOOLCHAIN, build/pkgs/BOOTSTRAP

archive/issues_028887.json:
```json
{
    "body": "CC:  @dimpase @egourgoulhon @jhpalmieri @kiwifb @tobiasdiez @seblabbe @slel @kliem\n\nAs a follow-up to #29053.\n\n- `build/pkgs/PREREQ/distros/debian.txt` etc. - would record the minimal requirements (system packages) for installing from source. (to replace #29053's file build/pkgs/debian.txt)\n- `build/pkgs/BOOTSTRAP/distros/debian.txt` etc. - would record the additional requirements for running `./bootstrap` (autotools and such)\n- `build/pkgs/TOOLCHAIN/deps` - to replace some special Makefile targets currently in `build/make/deps`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/29124\n\n",
    "created_at": "2020-01-31T18:39:33Z",
    "labels": [
        "build",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Add script packages build/pkgs/PREREQ, build/pkgs/TOOLCHAIN, build/pkgs/BOOTSTRAP",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28887",
    "user": "@mkoeppe"
}
```
CC:  @dimpase @egourgoulhon @jhpalmieri @kiwifb @tobiasdiez @seblabbe @slel @kliem

As a follow-up to #29053.

- `build/pkgs/PREREQ/distros/debian.txt` etc. - would record the minimal requirements (system packages) for installing from source. (to replace #29053's file build/pkgs/debian.txt)
- `build/pkgs/BOOTSTRAP/distros/debian.txt` etc. - would record the additional requirements for running `./bootstrap` (autotools and such)
- `build/pkgs/TOOLCHAIN/deps` - to replace some special Makefile targets currently in `build/make/deps`.

Issue created by migration from https://trac.sagemath.org/ticket/29124





---

archive/issue_comments_408909.json:
```json
{
    "body": "for example on `fedora-26-standard` sagetex testsuite fails:\n\n```\n! LaTeX Error: File `makecmds.sty' not found.\n\nType X to quit or <RETURN> to proceed,\nor enter new name. (Default extension: sty)\n\nEnter file name: \n! Emergency stop.\n<read *> \n         \nl.78 \\RequirePackage\n                    {ifpdf}^^M\n```\n",
    "created_at": "2020-04-15T19:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408909",
    "user": "@mkoeppe"
}
```

for example on `fedora-26-standard` sagetex testsuite fails:

```
! LaTeX Error: File `makecmds.sty' not found.

Type X to quit or <RETURN> to proceed,
or enter new name. (Default extension: sty)

Enter file name: 
! Emergency stop.
<read *> 
         
l.78 \RequirePackage
                    {ifpdf}^^M
```




---

archive/issue_comments_408910.json:
```json
{
    "body": "Installation manual also recommends Tcl/Tk - what are they used for in Sage?\nhttp://doc.sagemath.org/html/en/installation/source.html#tcl-tk\n----\nNew commits:",
    "created_at": "2020-04-16T15:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408910",
    "user": "@mkoeppe"
}
```

Installation manual also recommends Tcl/Tk - what are they used for in Sage?
http://doc.sagemath.org/html/en/installation/source.html#tcl-tk
----
New commits:



---

archive/issue_comments_408911.json:
```json
{
    "body": "Best done on top of #30951",
    "created_at": "2020-11-23T07:55:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408911",
    "user": "@mkoeppe"
}
```

Best done on top of #30951



---

archive/issue_comments_408912.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-11-24T05:15:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408912",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_408913.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-24T05:37:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408913",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_408914.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-24T05:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408914",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_408915.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-24T05:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408915",
    "user": "@mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_408916.json:
```json
{
    "body": "I'm not sure about the naming of the `local-` environments. Why should I expect as a developer that `local-sudo` installs system packages? What about `local-system-packages-ubuntu` (for root) and `local-sudo-system-packages-ubuntu` (for sudo)?",
    "created_at": "2020-11-24T10:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408916",
    "user": "@tobiasdiez"
}
```

I'm not sure about the naming of the `local-` environments. Why should I expect as a developer that `local-sudo` installs system packages? What about `local-system-packages-ubuntu` (for root) and `local-sudo-system-packages-ubuntu` (for sudo)?



---

archive/issue_comments_408917.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-11-24T18:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408917",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_408918.json:
```json
{
    "body": "I have taken out the addition of the `local-root` environments to keep this ticket more narrowly focused. Let's return to this in #30944.",
    "created_at": "2020-11-24T18:16:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408918",
    "user": "@mkoeppe"
}
```

I have taken out the addition of the `local-root` environments to keep this ticket more narrowly focused. Let's return to this in #30944.



---

archive/issue_comments_408919.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-24T18:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408919",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_408920.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-25T22:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408920",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_408921.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-11-26T19:29:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408921",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_408922.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-26T20:12:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408922",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_408923.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-11-26T20:13:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408923",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_408924.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-26T20:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408924",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_408925.json:
```json
{
    "body": "Am I right to think that only the last two commits of the branch should be reviewed here?",
    "created_at": "2020-11-30T08:30:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408925",
    "user": "@seblabbe"
}
```

Am I right to think that only the last two commits of the branch should be reviewed here?



---

archive/issue_comments_408926.json:
```json
{
    "body": "No, there are actually a few more commits earlier that don't come from the merged dependencies",
    "created_at": "2020-11-30T16:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408926",
    "user": "@mkoeppe"
}
```

No, there are actually a few more commits earlier that don't come from the merged dependencies



---

archive/issue_comments_408927.json:
```json
{
    "body": "Ok. Then, could the branch be rebased on top of the dependencies, to make the changes made by this ticket consecutive and easier to read (during the review and/or after).",
    "created_at": "2020-11-30T17:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408927",
    "user": "@seblabbe"
}
```

Ok. Then, could the branch be rebased on top of the dependencies, to make the changes made by this ticket consecutive and easier to read (during the review and/or after).



---

archive/issue_comments_408928.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408928",
    "user": "@mkoeppe"
}
```

Changing keywords from "" to "sd111".



---

archive/issue_comments_408929.json:
```json
{
    "body": "Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408929",
    "user": "@mkoeppe"
}
```

Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_408930.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-12-06T21:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408930",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_408931.json:
```json
{
    "body": "Rebased on top of #30947 and current beta",
    "created_at": "2020-12-06T21:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408931",
    "user": "@mkoeppe"
}
```

Rebased on top of #30947 and current beta



---

archive/issue_comments_408932.json:
```json
{
    "body": "Thank you. I do have lots of other todos this week, but I hope to be able to review few tickets during the week. I will start with this one and the other ones you put me in cc.",
    "created_at": "2020-12-06T22:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408932",
    "user": "@seblabbe"
}
```

Thank you. I do have lots of other todos this week, but I hope to be able to review few tickets during the week. I will start with this one and the other ones you put me in cc.



---

archive/issue_comments_408933.json:
```json
{
    "body": "I am not sure if commit `a9bd145` works because I still see underscore packages listed in the list of SPKGs which did not find equivalent system packages during the run of `./configure`:\n\n\n```\n    notice: the following SPKGs did not find equivalent system packages:\n\n        _recommended boost coxeter3 gp2c igraph isl libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata\n        \nchecking for the package system in use... debian\nconfigure:\n\n    hint: installing the following system packages, if not\n    already present, is recommended and may avoid having to\n    build them (though some may have to be built anyway):\n\n      $ sudo apt-get update \n      $ sudo apt-get install  texlive-latex-extra texlive-xetex latexmk pandoc dvipng default-jdk ffmpeg libavdevice-dev libboost-dev pari-gp2c libigraph-dev libisl-dev\n\n    After installation, re-run configure using:\n\n      $ ./config.status --recheck && ./config.status\n```\n",
    "created_at": "2020-12-09T09:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408933",
    "user": "@seblabbe"
}
```

I am not sure if commit `a9bd145` works because I still see underscore packages listed in the list of SPKGs which did not find equivalent system packages during the run of `./configure`:


```
    notice: the following SPKGs did not find equivalent system packages:

        _recommended boost coxeter3 gp2c igraph isl libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata
        
checking for the package system in use... debian
configure:

    hint: installing the following system packages, if not
    already present, is recommended and may avoid having to
    build them (though some may have to be built anyway):

      $ sudo apt-get update 
      $ sudo apt-get install  texlive-latex-extra texlive-xetex latexmk pandoc dvipng default-jdk ffmpeg libavdevice-dev libboost-dev pari-gp2c libigraph-dev libisl-dev

    After installation, re-run configure using:

      $ ./config.status --recheck && ./config.status
```




---

archive/issue_comments_408934.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-12-09T10:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408934",
    "user": "@seblabbe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_408935.json:
```json
{
    "body": "Ok, I see, the goal of commit `a9bd145` was to remove `_recommended` elsewhere in the log:\n\nconfig.log on 9.3.beta3:\n\n\n```\n## ----------------------------------------------------------------------- ##\n## Build status for each package:                                          ##\n## ----------------------------------------------------------------------- ##\n4ti2-1.6.7.p0:                               does not support check for system package; optional, will be installed as an SPKG\n_recommended-none:                           no suitable system package; optional, use \"./configure --enable-_recommended\" to install\nalabaster-0.7.12:                            does not support check for system package; will be installed as an SPKG\n```\n\n\nconfig.log with this branch on top of 9.3.beta3:\n\n\n```\n## ----------------------------------------------------------------------- ##\n## Build status for each package:                                          ##\n## ----------------------------------------------------------------------- ##\n4ti2-1.6.7.p0:                               does not support check for system package; optional, will be installed as an SPKG\n_bootstrap-none:                             does not support check for system package; optional, use \"./configure --enable-_bootstrap\" to install\n_prereq-none:                                does not support check for system package; will be installed as an SPKG\n_recommended-none:                           no suitable system package; optional, use \"./configure --enable-_recommended\" to install\nalabaster-0.7.12:                            does not support check for system package; will be installed as an SPKG\n```\n\n\nconfig.log with this branch on top of 9.3.beta3 (after running make first):\n\n\n```\n## ----------------------------------------------------------------------- ##\n## Build status for each package:                                          ##\n## ----------------------------------------------------------------------- ##\n4ti2-1.6.7.p0:                               does not support check for system package; optional, will be installed as an SPKG\nalabaster-0.7.12:                            does not support check for system package; will be installed as an SPKG\nappnope-0.1.0.p0:                            does not support check for system package; will be installed as an SPKG\n```\n\n\nStill, I would suggest to also remove it from the list ` notice: the following SPKGs did not find equivalent system packages:`.",
    "created_at": "2020-12-09T10:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408935",
    "user": "@seblabbe"
}
```

Ok, I see, the goal of commit `a9bd145` was to remove `_recommended` elsewhere in the log:

config.log on 9.3.beta3:


```
## ----------------------------------------------------------------------- ##
## Build status for each package:                                          ##
## ----------------------------------------------------------------------- ##
4ti2-1.6.7.p0:                               does not support check for system package; optional, will be installed as an SPKG
_recommended-none:                           no suitable system package; optional, use "./configure --enable-_recommended" to install
alabaster-0.7.12:                            does not support check for system package; will be installed as an SPKG
```


config.log with this branch on top of 9.3.beta3:


```
## ----------------------------------------------------------------------- ##
## Build status for each package:                                          ##
## ----------------------------------------------------------------------- ##
4ti2-1.6.7.p0:                               does not support check for system package; optional, will be installed as an SPKG
_bootstrap-none:                             does not support check for system package; optional, use "./configure --enable-_bootstrap" to install
_prereq-none:                                does not support check for system package; will be installed as an SPKG
_recommended-none:                           no suitable system package; optional, use "./configure --enable-_recommended" to install
alabaster-0.7.12:                            does not support check for system package; will be installed as an SPKG
```


config.log with this branch on top of 9.3.beta3 (after running make first):


```
## ----------------------------------------------------------------------- ##
## Build status for each package:                                          ##
## ----------------------------------------------------------------------- ##
4ti2-1.6.7.p0:                               does not support check for system package; optional, will be installed as an SPKG
alabaster-0.7.12:                            does not support check for system package; will be installed as an SPKG
appnope-0.1.0.p0:                            does not support check for system package; will be installed as an SPKG
```


Still, I would suggest to also remove it from the list ` notice: the following SPKGs did not find equivalent system packages:`.



---

archive/issue_comments_408936.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-10T05:40:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408936",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_408937.json:
```json
{
    "body": "Merged new version of #30947",
    "created_at": "2020-12-10T05:41:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408937",
    "user": "@mkoeppe"
}
```

Merged new version of #30947



---

archive/issue_comments_408938.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-12-10T06:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408938",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_408939.json:
```json
{
    "body": "Replying to [comment:40 slabbe]:\n> Still, I would suggest to also remove it from the list ` notice: the following SPKGs did not find equivalent system packages:`.\n\nI agree it's not pretty.  But all of the SPKGs listed there expand/transform to system packages that are suggested to be installed.  Without the `_recommended`, it will be a mystery where some of the suggested system packages are coming from.  So I think it's better to keep it there.",
    "created_at": "2020-12-10T06:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408939",
    "user": "@mkoeppe"
}
```

Replying to [comment:40 slabbe]:
> Still, I would suggest to also remove it from the list ` notice: the following SPKGs did not find equivalent system packages:`.

I agree it's not pretty.  But all of the SPKGs listed there expand/transform to system packages that are suggested to be installed.  Without the `_recommended`, it will be a mystery where some of the suggested system packages are coming from.  So I think it's better to keep it there.



---

archive/issue_comments_408940.json:
```json
{
    "body": "Ok. works for me.",
    "created_at": "2020-12-10T21:29:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408940",
    "user": "@seblabbe"
}
```

Ok. works for me.



---

archive/issue_comments_408941.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-10T21:29:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408941",
    "user": "@seblabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_408942.json:
```json
{
    "body": "Thank you!",
    "created_at": "2020-12-10T21:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408942",
    "user": "@mkoeppe"
}
```

Thank you!



---

archive/issue_comments_408943.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2020-12-13T20:43:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408943",
    "user": "@vbraun"
}
```

Merge conflict



---

archive/issue_comments_408944.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-12-13T20:43:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408944",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_408945.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-12-13T20:56:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408945",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_408946.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-12-13T20:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408946",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_408947.json:
```json
{
    "body": "Merged #30375 in the hope to resolve merge conflicts",
    "created_at": "2020-12-13T20:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408947",
    "user": "@mkoeppe"
}
```

Merged #30375 in the hope to resolve merge conflicts



---

archive/issue_comments_408948.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-12-15T00:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408948",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_408949.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-12-15T00:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408949",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_408950.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-15T00:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408950",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_408951.json:
```json
{
    "body": "Merged current beta",
    "created_at": "2020-12-15T00:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408951",
    "user": "@mkoeppe"
}
```

Merged current beta



---

archive/issue_comments_408952.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-12-21T23:35:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408952",
    "user": "@vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_408953.json:
```json
{
    "body": "\n```\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 427, in sage.misc.package.standard_packages\nFailed example:\n    installed[0], installed[-1]  # optional - build\nExpected:\n    ('alabaster', 'zn_poly')\nGot:\n    ('_prereq', 'zn_poly')\n**********************************************************************\n1 item had failures:\n   1 of   4 in sage.misc.package.standard_packages\n    [49 tests, 1 failure, 3.31 s]\n----------------------------------------------------------------------\n```\n",
    "created_at": "2020-12-21T23:35:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408953",
    "user": "@vbraun"
}
```


```
**********************************************************************
File "src/sage/misc/package.py", line 427, in sage.misc.package.standard_packages
Failed example:
    installed[0], installed[-1]  # optional - build
Expected:
    ('alabaster', 'zn_poly')
Got:
    ('_prereq', 'zn_poly')
**********************************************************************
1 item had failures:
   1 of   4 in sage.misc.package.standard_packages
    [49 tests, 1 failure, 3.31 s]
----------------------------------------------------------------------
```




---

archive/issue_comments_408954.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-12-22T01:25:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408954",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_408955.json:
```json
{
    "body": "Merged #30940, which makes these doctests more robust",
    "created_at": "2020-12-22T01:25:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408955",
    "user": "@mkoeppe"
}
```

Merged #30940, which makes these doctests more robust



---

archive/issue_comments_408956.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-12-22T06:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408956",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_408957.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-12-29T00:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408957",
    "user": "@mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_408958.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-29T19:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408958",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_408959.json:
```json
{
    "body": "The last commit fixes the issue observed in #29124:\n\n  moved the files build/pkgs/*.txt to new locations but forgot to update the CI scripts for Cygwin, which had led to failures like this (https://github.com/mkoeppe/sage/runs/1561097256):\n\n```\nsed: can't read ./build/pkgs/cygwin.txt: No such file or directory\nsed: can't read ./build/pkgs/cygwin-bootstrap.txt: No such file or directory\nChocolatey v0.10.15\nPackage name is required. Please pass at least one package name to install.\nError: Process completed with exit code 1.\n```\n",
    "created_at": "2020-12-29T19:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408959",
    "user": "@mkoeppe"
}
```

The last commit fixes the issue observed in #29124:

  moved the files build/pkgs/*.txt to new locations but forgot to update the CI scripts for Cygwin, which had led to failures like this (https://github.com/mkoeppe/sage/runs/1561097256):

```
sed: can't read ./build/pkgs/cygwin.txt: No such file or directory
sed: can't read ./build/pkgs/cygwin-bootstrap.txt: No such file or directory
Chocolatey v0.10.15
Package name is required. Please pass at least one package name to install.
Error: Process completed with exit code 1.
```




---

archive/issue_comments_408960.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-01-02T20:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408960",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_408961.json:
```json
{
    "body": "Still needs review",
    "created_at": "2021-01-02T20:48:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408961",
    "user": "@mkoeppe"
}
```

Still needs review



---

archive/issue_comments_408962.json:
```json
{
    "body": "./bootstrap is getting very slow - 3 times slower than ./configure, over 60 sec on a relatively fast machine!",
    "created_at": "2021-01-03T09:52:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408962",
    "user": "@dimpase"
}
```

./bootstrap is getting very slow - 3 times slower than ./configure, over 60 sec on a relatively fast machine!



---

archive/issue_comments_408963.json:
```json
{
    "body": "On this branch I'm getting\n\n```\nsage -t --warn-long 53.2 --random-seed=0 src/sage/tests/cmdline.py\n**********************************************************************\nFile \"src/sage/tests/cmdline.py\", line 219, in sage.tests.cmdline.test_executable\nFailed example:\n    print(out)  # optional - build\nExpected:\n    Found local metadata for sqlite-...\n    SQLite\n    ======\n    ...\n    SQLite is a software library that implements a self-contained,\n    serverless, zero-configuration, transactional SQL database engine.\n    ...\nGot:\n    sqlite: An SQL database engine\n    ==============================\n    <BLANKLINE>\n    Description\n    -----------\n    <BLANKLINE>\n    SQLite is a software library that implements a self-contained,\n    serverless, zero-configur\n...\n```\n\nand  one more similar failure in this file.\nNot sure whether it's coming from this ticket, or one of dependencies.",
    "created_at": "2021-01-03T15:23:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408963",
    "user": "@dimpase"
}
```

On this branch I'm getting

```
sage -t --warn-long 53.2 --random-seed=0 src/sage/tests/cmdline.py
**********************************************************************
File "src/sage/tests/cmdline.py", line 219, in sage.tests.cmdline.test_executable
Failed example:
    print(out)  # optional - build
Expected:
    Found local metadata for sqlite-...
    SQLite
    ======
    ...
    SQLite is a software library that implements a self-contained,
    serverless, zero-configuration, transactional SQL database engine.
    ...
Got:
    sqlite: An SQL database engine
    ==============================
    <BLANKLINE>
    Description
    -----------
    <BLANKLINE>
    SQLite is a software library that implements a self-contained,
    serverless, zero-configur
...
```

and  one more similar failure in this file.
Not sure whether it's coming from this ticket, or one of dependencies.



---

archive/issue_comments_408964.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-01-03T15:23:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408964",
    "user": "@dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_408965.json:
```json
{
    "body": "Thanks for catching this. It's coming from #29655",
    "created_at": "2021-01-03T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408965",
    "user": "@mkoeppe"
}
```

Thanks for catching this. It's coming from #29655



---

archive/issue_comments_408966.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-03T19:18:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408966",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_408967.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-01-03T19:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408967",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_408968.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-01-04T10:57:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408968",
    "user": "@dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_408969.json:
```json
{
    "body": "hmm, now I see\n\n```\nFile \"src/sage/tests/cmdline.py\", line 219, in sage.tests.cmdline.test_executable\nFailed example:\n    print(out)  # optional - build\nExpected:\n    SQLite\n    ======\n    ...\n    SQLite is a software library that implements a self-contained,\n    serverless, zero-configuration, transactional SQL database engine.\n    ...\nGot:\n    sqlite: An SQL database engine\n    ==============================\n    <BLANKLINE>\n    Description\n    -----------\n    <BLANKLINE>\n    SQLite is a software library that implements a self-contained,\n    serverless, zero-configuration, transactional SQL database engine.\n    <BLANKLINE>\n...\n```\n\n(and the same in line 232)\n\nSo more changes of these test outputs are needed.\n\nThe different heading (`sqlite: An SQL database engine`) comes from `src/doc/en/reference/spkg/sqlite.rst`, as far as me and grep can tell.",
    "created_at": "2021-01-04T10:57:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408969",
    "user": "@dimpase"
}
```

hmm, now I see

```
File "src/sage/tests/cmdline.py", line 219, in sage.tests.cmdline.test_executable
Failed example:
    print(out)  # optional - build
Expected:
    SQLite
    ======
    ...
    SQLite is a software library that implements a self-contained,
    serverless, zero-configuration, transactional SQL database engine.
    ...
Got:
    sqlite: An SQL database engine
    ==============================
    <BLANKLINE>
    Description
    -----------
    <BLANKLINE>
    SQLite is a software library that implements a self-contained,
    serverless, zero-configuration, transactional SQL database engine.
    <BLANKLINE>
...
```

(and the same in line 232)

So more changes of these test outputs are needed.

The different heading (`sqlite: An SQL database engine`) comes from `src/doc/en/reference/spkg/sqlite.rst`, as far as me and grep can tell.



---

archive/issue_comments_408970.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-04T17:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408970",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_408971.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-01-04T17:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408971",
    "user": "@mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_408972.json:
```json
{
    "body": "OK, good.",
    "created_at": "2021-01-04T18:43:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408972",
    "user": "@dimpase"
}
```

OK, good.



---

archive/issue_comments_408973.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-01-04T18:43:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408973",
    "user": "@dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_408974.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-01-05T06:35:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408974",
    "user": "@mkoeppe"
}
```

Thanks!



---

archive/issue_comments_408975.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-24T10:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28887#issuecomment-408975",
    "user": "@vbraun"
}
```

Resolution: fixed
