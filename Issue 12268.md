# Issue 12268: gfan fails to build with clang

archive/issues_012268.json:
```json
{
    "body": "Assignee: GeorgSWeber\n\nCC:  @tscrim\n\nThe is a variable which is redefined which causes the failure.\n\nI've posted an spkg at [http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/gfan-0.4plus.p2.spkg](http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/gfan-0.4plus.p2.spkg).\n\nIssue created by migration from https://trac.sagemath.org/ticket/12440\n\n",
    "created_at": "2012-02-04T19:19:28Z",
    "labels": [
        "component: build",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "gfan fails to build with clang",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12268",
    "user": "https://github.com/ohanar"
}
```
Assignee: GeorgSWeber

CC:  @tscrim

The is a variable which is redefined which causes the failure.

I've posted an spkg at [http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/gfan-0.4plus.p2.spkg](http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/gfan-0.4plus.p2.spkg).

Issue created by migration from https://trac.sagemath.org/ticket/12440





---

archive/issue_comments_143878.json:
```json
{
    "body": "for review purposes",
    "created_at": "2012-02-04T19:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143878",
    "user": "https://github.com/ohanar"
}
```

for review purposes



---

archive/issue_comments_143879.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-02-04T19:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143879",
    "user": "https://github.com/ohanar"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_143880.json:
```json
{
    "body": "Attachment [gfan-0.4plus.p2.patch](tarball://root/attachments/some-uuid/ticket12440/gfan-0.4plus.p2.patch) by @ohanar created at 2012-02-04 19:19:48",
    "created_at": "2012-02-04T19:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143880",
    "user": "https://github.com/ohanar"
}
```

Attachment [gfan-0.4plus.p2.patch](tarball://root/attachments/some-uuid/ticket12440/gfan-0.4plus.p2.patch) by @ohanar created at 2012-02-04 19:19:48



---

archive/issue_comments_143881.json:
```json
{
    "body": "This also breaks the build with GCC 4.7.0.\n\nI've made an spkg fixing this and cleaning up `spkg-install` and `SPKG.txt` at #12760, currently needing review.  (I also added a couple of TODOs, to my excuse not just because I was too lazy, but also since Marshall Hampton is going to upgrade Gfan to version 0.5 anyway, at #11395.  I'll probably make some further changes to my spkg though, but these are not on my high-priority list.)",
    "created_at": "2012-04-08T02:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143881",
    "user": "https://github.com/nexttime"
}
```

This also breaks the build with GCC 4.7.0.

I've made an spkg fixing this and cleaning up `spkg-install` and `SPKG.txt` at #12760, currently needing review.  (I also added a couple of TODOs, to my excuse not just because I was too lazy, but also since Marshall Hampton is going to upgrade Gfan to version 0.5 anyway, at #11395.  I'll probably make some further changes to my spkg though, but these are not on my high-priority list.)



---

archive/issue_comments_143882.json:
```json
{
    "body": "Please fill in your real name as Author.",
    "created_at": "2012-07-27T20:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143882",
    "user": "https://github.com/jdemeyer"
}
```

Please fill in your real name as Author.



---

archive/issue_comments_143883.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2012-07-27T21:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143883",
    "user": "https://github.com/nexttime"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_143884.json:
```json
{
    "body": "Probably superceded by #12760, otherwise needs to be rebased, presumably on #11395.",
    "created_at": "2012-07-27T21:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143884",
    "user": "https://github.com/nexttime"
}
```

Probably superceded by #12760, otherwise needs to be rebased, presumably on #11395.



---

archive/issue_comments_143885.json:
```json
{
    "body": "Changing component from build to packages: standard.",
    "created_at": "2014-02-04T08:00:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143885",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from build to packages: standard.



---

archive/issue_comments_143886.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2014-05-17T17:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143886",
    "user": "https://github.com/nexttime"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_143887.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-09-17T11:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143887",
    "user": "https://github.com/kiwifb"
}
```

New commits:



---

archive/issue_comments_143888.json:
```json
{
    "body": "Patch in Gentoo for gcc-6.1 compatibility should help with the `rank` problem. https://gitweb.gentoo.org/repo/gentoo.git/tree/sci-mathematics/gfan/files/gfan-0.5-gcc6.1-compat.patch?id=68b401536df91ee42b4e58cd38b74f96ca0a0560",
    "created_at": "2016-09-28T01:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143888",
    "user": "https://github.com/kiwifb"
}
```

Patch in Gentoo for gcc-6.1 compatibility should help with the `rank` problem. https://gitweb.gentoo.org/repo/gentoo.git/tree/sci-mathematics/gfan/files/gfan-0.5-gcc6.1-compat.patch?id=68b401536df91ee42b4e58cd38b74f96ca0a0560



---

archive/issue_comments_143889.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-28T02:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143889",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_143890.json:
```json
{
    "body": "Works here with `clang` now.",
    "created_at": "2016-09-28T02:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143890",
    "user": "https://github.com/kiwifb"
}
```

Works here with `clang` now.



---

archive/issue_comments_143891.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-09-28T02:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143891",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_143892.json:
```json
{
    "body": "LGTM.",
    "created_at": "2016-10-03T14:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143892",
    "user": "https://github.com/tscrim"
}
```

LGTM.



---

archive/issue_comments_143893.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-10-03T14:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143893",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_012273.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2016-10-03T22:42:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12268#event-12273"
}
```



---

archive/issue_comments_143894.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-10-03T22:42:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-143894",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
