# Issue 12268: gfan fails to build with clang

Issue created by migration from https://trac.sagemath.org/ticket/12440

Original creator: ohanar

Original creation time: 2012-02-04 19:19:28

Assignee: GeorgSWeber

CC:  tscrim

The is a variable which is redefined which causes the failure.

I've posted an spkg at [http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/gfan-0.4plus.p2.spkg](http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/gfan-0.4plus.p2.spkg).


---

Comment by ohanar created at 2012-02-04 19:19:39

for review purposes


---

Comment by ohanar created at 2012-02-04 19:19:48

Changing status from new to needs_review.


---

Attachment


---

Comment by leif created at 2012-04-08 02:14:55

This also breaks the build with GCC 4.7.0.

I've made an spkg fixing this and cleaning up `spkg-install` and `SPKG.txt` at #12760, currently needing review.  (I also added a couple of TODOs, to my excuse not just because I was too lazy, but also since Marshall Hampton is going to upgrade Gfan to version 0.5 anyway, at #11395.  I'll probably make some further changes to my spkg though, but these are not on my high-priority list.)


---

Comment by jdemeyer created at 2012-07-27 20:41:16

Please fill in your real name as Author.


---

Comment by leif created at 2012-07-27 21:39:16

Changing status from needs_review to needs_info.


---

Comment by leif created at 2012-07-27 21:39:16

Probably superceded by #12760, otherwise needs to be rebased, presumably on #11395.


---

Comment by jdemeyer created at 2014-02-04 08:00:26

Changing component from build to packages: standard.


---

Comment by leif created at 2014-05-17 17:40:21

Changing status from needs_info to needs_work.


---

Comment by fbissey created at 2016-09-17 11:15:57

New commits:


---

Comment by fbissey created at 2016-09-28 01:18:24

Patch in Gentoo for gcc-6.1 compatibility should help with the `rank` problem. https://gitweb.gentoo.org/repo/gentoo.git/tree/sci-mathematics/gfan/files/gfan-0.5-gcc6.1-compat.patch?id=68b401536df91ee42b4e58cd38b74f96ca0a0560


---

Comment by git created at 2016-09-28 02:42:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by fbissey created at 2016-09-28 02:43:51

Works here with `clang` now.


---

Comment by fbissey created at 2016-09-28 02:43:51

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2016-10-03 14:12:57

LGTM.


---

Comment by tscrim created at 2016-10-03 14:12:57

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-10-03 22:42:01

Resolution: fixed
