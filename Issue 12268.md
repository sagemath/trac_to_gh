# Issue 12268: gfan fails to build with clang

archive/issues_012268.json:
```json
{
    "body": "Assignee: GeorgSWeber\n\nCC:  @tscrim\n\nThe is a variable which is redefined which causes the failure.\n\nI've posted an spkg at [http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/gfan-0.4plus.p2.spkg](http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/gfan-0.4plus.p2.spkg).\n\nIssue created by migration from https://trac.sagemath.org/ticket/12440\n\n",
    "created_at": "2012-02-04T19:19:28Z",
    "labels": [
        "build",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "gfan fails to build with clang",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12268",
    "user": "@ohanar"
}
```
Assignee: GeorgSWeber

CC:  @tscrim

The is a variable which is redefined which causes the failure.

I've posted an spkg at [http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/gfan-0.4plus.p2.spkg](http://wstein.org/home/ohanar/clang-port/sage-5.0.beta1-src/spkg/standard/gfan-0.4plus.p2.spkg).

Issue created by migration from https://trac.sagemath.org/ticket/12440





---

archive/issue_comments_144096.json:
```json
{
    "body": "for review purposes",
    "created_at": "2012-02-04T19:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144096",
    "user": "@ohanar"
}
```

for review purposes



---

archive/issue_comments_144097.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-02-04T19:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144097",
    "user": "@ohanar"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_144098.json:
```json
{
    "body": "Attachment [gfan-0.4plus.p2.patch](tarball://root/attachments/some-uuid/ticket12440/gfan-0.4plus.p2.patch) by @ohanar created at 2012-02-04 19:19:48",
    "created_at": "2012-02-04T19:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144098",
    "user": "@ohanar"
}
```

Attachment [gfan-0.4plus.p2.patch](tarball://root/attachments/some-uuid/ticket12440/gfan-0.4plus.p2.patch) by @ohanar created at 2012-02-04 19:19:48



---

archive/issue_comments_144099.json:
```json
{
    "body": "This also breaks the build with GCC 4.7.0.\n\nI've made an spkg fixing this and cleaning up `spkg-install` and `SPKG.txt` at #12760, currently needing review.  (I also added a couple of TODOs, to my excuse not just because I was too lazy, but also since Marshall Hampton is going to upgrade Gfan to version 0.5 anyway, at #11395.  I'll probably make some further changes to my spkg though, but these are not on my high-priority list.)",
    "created_at": "2012-04-08T02:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144099",
    "user": "@nexttime"
}
```

This also breaks the build with GCC 4.7.0.

I've made an spkg fixing this and cleaning up `spkg-install` and `SPKG.txt` at #12760, currently needing review.  (I also added a couple of TODOs, to my excuse not just because I was too lazy, but also since Marshall Hampton is going to upgrade Gfan to version 0.5 anyway, at #11395.  I'll probably make some further changes to my spkg though, but these are not on my high-priority list.)



---

archive/issue_comments_144100.json:
```json
{
    "body": "Please fill in your real name as Author.",
    "created_at": "2012-07-27T20:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144100",
    "user": "@jdemeyer"
}
```

Please fill in your real name as Author.



---

archive/issue_comments_144101.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2012-07-27T21:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144101",
    "user": "@nexttime"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_144102.json:
```json
{
    "body": "Probably superceded by #12760, otherwise needs to be rebased, presumably on #11395.",
    "created_at": "2012-07-27T21:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144102",
    "user": "@nexttime"
}
```

Probably superceded by #12760, otherwise needs to be rebased, presumably on #11395.



---

archive/issue_comments_144103.json:
```json
{
    "body": "Changing component from build to packages: standard.",
    "created_at": "2014-02-04T08:00:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144103",
    "user": "@jdemeyer"
}
```

Changing component from build to packages: standard.



---

archive/issue_comments_144104.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2014-05-17T17:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144104",
    "user": "@nexttime"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_144105.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-09-17T11:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144105",
    "user": "@kiwifb"
}
```

New commits:



---

archive/issue_comments_144106.json:
```json
{
    "body": "Patch in Gentoo for gcc-6.1 compatibility should help with the `rank` problem. https://gitweb.gentoo.org/repo/gentoo.git/tree/sci-mathematics/gfan/files/gfan-0.5-gcc6.1-compat.patch?id=68b401536df91ee42b4e58cd38b74f96ca0a0560",
    "created_at": "2016-09-28T01:18:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144106",
    "user": "@kiwifb"
}
```

Patch in Gentoo for gcc-6.1 compatibility should help with the `rank` problem. https://gitweb.gentoo.org/repo/gentoo.git/tree/sci-mathematics/gfan/files/gfan-0.5-gcc6.1-compat.patch?id=68b401536df91ee42b4e58cd38b74f96ca0a0560



---

archive/issue_comments_144107.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-28T02:42:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144107",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_144108.json:
```json
{
    "body": "Works here with `clang` now.",
    "created_at": "2016-09-28T02:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144108",
    "user": "@kiwifb"
}
```

Works here with `clang` now.



---

archive/issue_comments_144109.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-09-28T02:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144109",
    "user": "@kiwifb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_144110.json:
```json
{
    "body": "LGTM.",
    "created_at": "2016-10-03T14:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144110",
    "user": "@tscrim"
}
```

LGTM.



---

archive/issue_comments_144111.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-10-03T14:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144111",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_144112.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-10-03T22:42:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12268",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12268#issuecomment-144112",
    "user": "@vbraun"
}
```

Resolution: fixed
