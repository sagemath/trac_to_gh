# Issue 15831: Use base_ring in chord_and_tangent

archive/issues_015831.json:
```json
{
    "body": "CC:  vbraun\n\nRight now, the following fails:\n\n\n```\nsage: from sage.schemes.elliptic_curves.constructor import chord_and_tangent\nsage: R = PolynomialRing(QQ, 'x,y,z')\nsage: x,y,z = R.gens()\nsage: cubic = x**3 - 4*x**2*y - 65*x*y**2 + 3*x*y*z - 76*y*z**2\nsage: f0 = (0, 1, 0)\nsage: chord_and_tangent(cubic, f0)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-9-05d9ab02db04> in <module>()\n----> 1 chord_and_tangent(cubic, f0)\n\n/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in chord_and_tangent(F, P)\n    898             g = F.substitute({x:y, y:x})\n    899             Q = [P[1], P[0], P[2]]\n--> 900             R = chord_and_tangent(g, Q)\n    901             return [R[1], R[0], R[2]]\n    902         elif dz != 0:\n\n/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in chord_and_tangent(F, P)\n    917         g = F.substitute({x:z, z:x})\n    918         Q = [P[2], P[1], P[0]]\n--> 919         R = chord_and_tangent(g, Q)\n    920         return [R[2], R[1], R[0]]\n    921     # Ft has a double zero at t=0 by construction, which we now remove\n\n/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in chord_and_tangent(F, P)\n    924     # first case: the third point is at t=infinity\n    925     if Ft.is_constant():\n--> 926         return projective_point([dy, -dx, 0])\n    927     # second case: the third point is at finite t\n    928     else:\n\n/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in projective_point(p)\n    955     from sage.rings.integer import GCD_list, LCM_list\n    956     try:\n--> 957         p_gcd = GCD_list([x.numerator() for x in p])\n    958         p_lcm = LCM_list([x.denominator() for x in p])\n    959     except AttributeError:\n\nTypeError: 'int' object is not callable\n```\n\n\nThis is very simple to fix - convert a 0 into an element of the base ring of the curve and I've attached a branch that does that.\n\nIssue created by migration from https://trac.sagemath.org/ticket/16068\n\n",
    "created_at": "2014-04-07T08:40:28Z",
    "labels": [
        "elliptic curves",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Use base_ring in chord_and_tangent",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15831",
    "user": "jkeitel"
}
```
CC:  vbraun

Right now, the following fails:


```
sage: from sage.schemes.elliptic_curves.constructor import chord_and_tangent
sage: R = PolynomialRing(QQ, 'x,y,z')
sage: x,y,z = R.gens()
sage: cubic = x**3 - 4*x**2*y - 65*x*y**2 + 3*x*y*z - 76*y*z**2
sage: f0 = (0, 1, 0)
sage: chord_and_tangent(cubic, f0)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-9-05d9ab02db04> in <module>()
----> 1 chord_and_tangent(cubic, f0)

/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in chord_and_tangent(F, P)
    898             g = F.substitute({x:y, y:x})
    899             Q = [P[1], P[0], P[2]]
--> 900             R = chord_and_tangent(g, Q)
    901             return [R[1], R[0], R[2]]
    902         elif dz != 0:

/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in chord_and_tangent(F, P)
    917         g = F.substitute({x:z, z:x})
    918         Q = [P[2], P[1], P[0]]
--> 919         R = chord_and_tangent(g, Q)
    920         return [R[2], R[1], R[0]]
    921     # Ft has a double zero at t=0 by construction, which we now remove

/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in chord_and_tangent(F, P)
    924     # first case: the third point is at t=infinity
    925     if Ft.is_constant():
--> 926         return projective_point([dy, -dx, 0])
    927     # second case: the third point is at finite t
    928     else:

/home/pcl337b/jkeitel/sage/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/constructor.pyc in projective_point(p)
    955     from sage.rings.integer import GCD_list, LCM_list
    956     try:
--> 957         p_gcd = GCD_list([x.numerator() for x in p])
    958         p_lcm = LCM_list([x.denominator() for x in p])
    959     except AttributeError:

TypeError: 'int' object is not callable
```


This is very simple to fix - convert a 0 into an element of the base ring of the curve and I've attached a branch that does that.

Issue created by migration from https://trac.sagemath.org/ticket/16068





---

archive/issue_comments_205423.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-07T08:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15831",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15831#issuecomment-205423",
    "user": "jkeitel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_205424.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-04-07T08:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15831",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15831#issuecomment-205424",
    "user": "jkeitel"
}
```

New commits:



---

archive/issue_comments_205425.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-04-07T10:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15831",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15831#issuecomment-205425",
    "user": "pbruin"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_205426.json:
```json
{
    "body": "Looks good, but the line `See :trac:`16068`::` is indented one level too many.\n\n(I wonder why this function is called `chord_and_tangent` given that it only implements the \"tangent\" part, but that is irrelevant for this bug.)",
    "created_at": "2014-04-07T10:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15831",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15831#issuecomment-205426",
    "user": "pbruin"
}
```

Looks good, but the line `See :trac:`16068`::` is indented one level too many.

(I wonder why this function is called `chord_and_tangent` given that it only implements the "tangent" part, but that is irrelevant for this bug.)



---

archive/issue_comments_205427.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2014-04-07T10:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15831",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15831#issuecomment-205427",
    "user": "pbruin"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_205428.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-07T10:48:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15831",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15831#issuecomment-205428",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_205429.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-04-07T10:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15831",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15831#issuecomment-205429",
    "user": "jkeitel"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_205430.json:
```json
{
    "body": "Thanks, I've changed the indentation.",
    "created_at": "2014-04-07T10:49:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15831",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15831#issuecomment-205430",
    "user": "jkeitel"
}
```

Thanks, I've changed the indentation.



---

archive/issue_comments_205431.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-04-07T12:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15831",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15831#issuecomment-205431",
    "user": "pbruin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_205432.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-04-07T19:08:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15831",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15831#issuecomment-205432",
    "user": "vbraun"
}
```

Resolution: fixed
