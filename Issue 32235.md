# Issue 32235: Give an `algorithm` keyword to (some?) `simplify` methods/functions

Issue created by migration from https://trac.sagemath.org/ticket/32472

Original creator: charpent

Original creation time: 2021-09-05 10:09:42

CC:  slelievre

Case in point (many other examples exist...) :


```
sage: var("x", domain="positive")
x
sage: u = -1/2*I*x + 1/2*I*sqrt(x^2 - 1) + 1/2*I/(x - sqrt(x^2 - 1))
sage: u.simplify()
-1/2*I*x + 1/2*I*sqrt(x^2 - 1) + 1/2*I/(x - sqrt(x^2 - 1))
sage: u._giac_().simplify()._sage_()
I*sqrt(x^2 - 1)
sage: u._fricas_().simplify()._sage_()
-(I*x^2 - I*sqrt(x^2 - 1)*x - I)/(x - sqrt(x^2 - 1))
sage: u._sympy_().simplify()._sage_()
-I*(x^2 - sqrt(x^2 - 1)*x - 1)/(x - sqrt(x^2 - 1))
sage: mathematica.FullSimplify(u).sage()
I*sqrt(x^2 - 1)
```


Suggestion : give to the `simplify` method of symbolic expressions (and its wrapper function) an `algorithm` keyword selecting an alternative to our "default" (which is to send the expression to Maxima and accept whatever Maxima sends back to us...).

This might be also useful for the more specialized methods/functions (such as `simplify_trig`). Advice required...

Advice also required about adding it to `simplify_full`, which aims to be a useful helper in complicated cases, but often bites more than it can swallow...


---

Comment by charpent created at 2021-09-07 12:45:42

Replying to [comment:1 charpent]:

This does the job excusively for the `simplify` method of symbolic expressions and the `simplify()` function.

Passes `ptestlong` without failure ==> `needs_review`.
----
New commits:


---

Comment by charpent created at 2021-09-07 12:45:42

Changing status from new to needs_review.


---

Comment by mmezzarobba created at 2021-12-15 10:18:17

Lgtm, except that the examples in `sage.calculus.functional.simplify()` should use `simplify(foo)`, not `foo.simplify()`.

(I am unable to help with deciding exactly what to do with other simplification methods, unfortunately, but I like the idea of having keywords to choose a backend there as well.)


---

Comment by charpent created at 2021-12-15 12:07:29

Replying to [comment:4 mmezzarobba]:
> Lgtm, except that the examples in `sage.calculus.functional.simplify()` should use `simplify(foo)`, not `foo.simplify()`.


Right. I cut n' pasted the method examplen and forgot to modify it for the functional syntax. Shame on me.

Done, passes its doctest after rebasing on 9.5.beta7. Running `ptestlong` to be damn sure. Stay tuned...

> (I am unable to help with deciding exactly what to do with other simplification methods, unfortunately, but I like the idea of having keywords to choose a backend there as well.)

Too bad. The specialized methods may (Maxima) or may not (giac, fricas) exost in the other backends... Advice still needed.


---

Comment by charpent created at 2021-12-15 18:30:58

Replying to [comment:5 charpent]:

...

> Done, passes its doctest after rebasing on 9.5.beta7. Running `ptestlong` to be damn sure. Stay tuned...

`ptestlong` gives exactly the same failures as thos observed in 9.5.beta7 ==> probably worth `positive_review`.

Temporarily setting `needs work` , I'll set `needs_review` after pushing my edits.


---

Comment by git created at 2021-12-15 18:44:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by charpent created at 2021-12-15 18:45:40

Changing status from needs_review to needs_work.


---

Comment by charpent created at 2021-12-15 18:46:12

Changing status from needs_work to needs_review.
