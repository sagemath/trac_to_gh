# Issue 32235: Give an `algorithm` keyword to (some?) `simplify` methods/functions

archive/issues_032235.json:
```json
{
    "body": "CC:  slelievre\n\nCase in point (many other examples exist...) :\n\n\n```\nsage: var(\"x\", domain=\"positive\")\nx\nsage: u = -1/2*I*x + 1/2*I*sqrt(x^2 - 1) + 1/2*I/(x - sqrt(x^2 - 1))\nsage: u.simplify()\n-1/2*I*x + 1/2*I*sqrt(x^2 - 1) + 1/2*I/(x - sqrt(x^2 - 1))\nsage: u._giac_().simplify()._sage_()\nI*sqrt(x^2 - 1)\nsage: u._fricas_().simplify()._sage_()\n-(I*x^2 - I*sqrt(x^2 - 1)*x - I)/(x - sqrt(x^2 - 1))\nsage: u._sympy_().simplify()._sage_()\n-I*(x^2 - sqrt(x^2 - 1)*x - 1)/(x - sqrt(x^2 - 1))\nsage: mathematica.FullSimplify(u).sage()\nI*sqrt(x^2 - 1)\n```\n\n\nSuggestion : give to the `simplify` method of symbolic expressions (and its wrapper function) an `algorithm` keyword selecting an alternative to our \"default\" (which is to send the expression to Maxima and accept whatever Maxima sends back to us...).\n\nThis might be also useful for the more specialized methods/functions (such as `simplify_trig`). Advice required...\n\nAdvice also required about adding it to `simplify_full`, which aims to be a useful helper in complicated cases, but often bites more than it can swallow...\n\nIssue created by migration from https://trac.sagemath.org/ticket/32472\n\n",
    "created_at": "2021-09-05T10:09:42Z",
    "labels": [
        "symbolics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Give an `algorithm` keyword to (some?) `simplify` methods/functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32235",
    "user": "charpent"
}
```
CC:  slelievre

Case in point (many other examples exist...) :


```
sage: var("x", domain="positive")
x
sage: u = -1/2*I*x + 1/2*I*sqrt(x^2 - 1) + 1/2*I/(x - sqrt(x^2 - 1))
sage: u.simplify()
-1/2*I*x + 1/2*I*sqrt(x^2 - 1) + 1/2*I/(x - sqrt(x^2 - 1))
sage: u._giac_().simplify()._sage_()
I*sqrt(x^2 - 1)
sage: u._fricas_().simplify()._sage_()
-(I*x^2 - I*sqrt(x^2 - 1)*x - I)/(x - sqrt(x^2 - 1))
sage: u._sympy_().simplify()._sage_()
-I*(x^2 - sqrt(x^2 - 1)*x - 1)/(x - sqrt(x^2 - 1))
sage: mathematica.FullSimplify(u).sage()
I*sqrt(x^2 - 1)
```


Suggestion : give to the `simplify` method of symbolic expressions (and its wrapper function) an `algorithm` keyword selecting an alternative to our "default" (which is to send the expression to Maxima and accept whatever Maxima sends back to us...).

This might be also useful for the more specialized methods/functions (such as `simplify_trig`). Advice required...

Advice also required about adding it to `simplify_full`, which aims to be a useful helper in complicated cases, but often bites more than it can swallow...

Issue created by migration from https://trac.sagemath.org/ticket/32472





---

archive/issue_comments_460377.json:
```json
{
    "body": "Replying to [comment:1 charpent]:\n\nThis does the job excusively for the `simplify` method of symbolic expressions and the `simplify()` function.\n\nPasses `ptestlong` without failure ==> `needs_review`.\n----\nNew commits:",
    "created_at": "2021-09-07T12:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32235#issuecomment-460377",
    "user": "charpent"
}
```

Replying to [comment:1 charpent]:

This does the job excusively for the `simplify` method of symbolic expressions and the `simplify()` function.

Passes `ptestlong` without failure ==> `needs_review`.
----
New commits:



---

archive/issue_comments_460378.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-09-07T12:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32235#issuecomment-460378",
    "user": "charpent"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_460379.json:
```json
{
    "body": "Lgtm, except that the examples in `sage.calculus.functional.simplify()` should use `simplify(foo)`, not `foo.simplify()`.\n\n(I am unable to help with deciding exactly what to do with other simplification methods, unfortunately, but I like the idea of having keywords to choose a backend there as well.)",
    "created_at": "2021-12-15T10:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32235#issuecomment-460379",
    "user": "mmezzarobba"
}
```

Lgtm, except that the examples in `sage.calculus.functional.simplify()` should use `simplify(foo)`, not `foo.simplify()`.

(I am unable to help with deciding exactly what to do with other simplification methods, unfortunately, but I like the idea of having keywords to choose a backend there as well.)



---

archive/issue_comments_460380.json:
```json
{
    "body": "Replying to [comment:4 mmezzarobba]:\n> Lgtm, except that the examples in `sage.calculus.functional.simplify()` should use `simplify(foo)`, not `foo.simplify()`.\n\n\nRight. I cut n' pasted the method examplen and forgot to modify it for the functional syntax. Shame on me.\n\nDone, passes its doctest after rebasing on 9.5.beta7. Running `ptestlong` to be damn sure. Stay tuned...\n\n> (I am unable to help with deciding exactly what to do with other simplification methods, unfortunately, but I like the idea of having keywords to choose a backend there as well.)\n\nToo bad. The specialized methods may (Maxima) or may not (giac, fricas) exost in the other backends... Advice still needed.",
    "created_at": "2021-12-15T12:07:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32235#issuecomment-460380",
    "user": "charpent"
}
```

Replying to [comment:4 mmezzarobba]:
> Lgtm, except that the examples in `sage.calculus.functional.simplify()` should use `simplify(foo)`, not `foo.simplify()`.


Right. I cut n' pasted the method examplen and forgot to modify it for the functional syntax. Shame on me.

Done, passes its doctest after rebasing on 9.5.beta7. Running `ptestlong` to be damn sure. Stay tuned...

> (I am unable to help with deciding exactly what to do with other simplification methods, unfortunately, but I like the idea of having keywords to choose a backend there as well.)

Too bad. The specialized methods may (Maxima) or may not (giac, fricas) exost in the other backends... Advice still needed.



---

archive/issue_comments_460381.json:
```json
{
    "body": "Replying to [comment:5 charpent]:\n\n...\n\n> Done, passes its doctest after rebasing on 9.5.beta7. Running `ptestlong` to be damn sure. Stay tuned...\n\n`ptestlong` gives exactly the same failures as thos observed in 9.5.beta7 ==> probably worth `positive_review`.\n\nTemporarily setting `needs work` , I'll set `needs_review` after pushing my edits.",
    "created_at": "2021-12-15T18:30:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32235#issuecomment-460381",
    "user": "charpent"
}
```

Replying to [comment:5 charpent]:

...

> Done, passes its doctest after rebasing on 9.5.beta7. Running `ptestlong` to be damn sure. Stay tuned...

`ptestlong` gives exactly the same failures as thos observed in 9.5.beta7 ==> probably worth `positive_review`.

Temporarily setting `needs work` , I'll set `needs_review` after pushing my edits.



---

archive/issue_comments_460382.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-15T18:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32235#issuecomment-460382",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_460383.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-12-15T18:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32235#issuecomment-460383",
    "user": "charpent"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_460384.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-12-15T18:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32235#issuecomment-460384",
    "user": "charpent"
}
```

Changing status from needs_work to needs_review.
