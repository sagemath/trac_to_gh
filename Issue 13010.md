# Issue 13010: Update sage-mode to 0.8

archive/issues_013010.json:
```json
{
    "body": "Assignee: @williamstein\n\nCC:  @hivert @dwbump jpflori\n\nKeywords: sage-mode\n\nAfter updating to 0.7 in #13176 we should move into the future with 0.8 which will be released soon.\n\nThere is an experimental 0.8 spkg at http://boxen.math.washington.edu/home/iandrus/sage_mode-0.8.spkg\n\nCurrently the major goal is to support python.el by fgallina which will be in Emacs 24.2.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13182\n\n",
    "created_at": "2012-06-29T14:10:19Z",
    "labels": [
        "component: user interface"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.10",
    "title": "Update sage-mode to 0.8",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13010",
    "user": "https://github.com/gvol"
}
```
Assignee: @williamstein

CC:  @hivert @dwbump jpflori

Keywords: sage-mode

After updating to 0.7 in #13176 we should move into the future with 0.8 which will be released soon.

There is an experimental 0.8 spkg at http://boxen.math.washington.edu/home/iandrus/sage_mode-0.8.spkg

Currently the major goal is to support python.el by fgallina which will be in Emacs 24.2.

Issue created by migration from https://trac.sagemath.org/ticket/13182





---

archive/issue_comments_157034.json:
```json
{
    "body": "I have released sage-mode 0.8, so I'm marking this as needs review.  Please reinstall the sage_mode spkg from the link in the description before reviewing.",
    "created_at": "2012-09-12T11:26:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157034",
    "user": "https://github.com/gvol"
}
```

I have released sage-mode 0.8, so I'm marking this as needs review.  Please reinstall the sage_mode spkg from the link in the description before reviewing.



---

archive/issue_comments_157035.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-09-12T11:26:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157035",
    "user": "https://github.com/gvol"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_157036.json:
```json
{
    "body": "If nothing else, I'm happy that the name of the spkg now has an underscore (`sage_mode` instead of `sage-mode`). This may seem unimportant, but the usual \"`sage -i`\" command gets confused when the spkg name has a hyphen in it (some script splits on the hyphen to separate the name from the version number). So thanks for the name change!\n\nI'll look over the spkg but my elisp knowledge is probably too minimal to properly review this, and I'm also stuck with Emacs 23 for now.",
    "created_at": "2012-11-24T19:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157036",
    "user": "https://github.com/dandrake"
}
```

If nothing else, I'm happy that the name of the spkg now has an underscore (`sage_mode` instead of `sage-mode`). This may seem unimportant, but the usual "`sage -i`" command gets confused when the spkg name has a hyphen in it (some script splits on the hyphen to separate the name from the version number). So thanks for the name change!

I'll look over the spkg but my elisp knowledge is probably too minimal to properly review this, and I'm also stuck with Emacs 23 for now.



---

archive/issue_comments_157037.json:
```json
{
    "body": "Since this is technically an upstream package (and still optional) I don't know that you need to check the elisp so much as just make sure that it installs, and works correctly.  Though of course feedback on the elisp is welcome too.  \n\nThere is a known issue with new versions of Sage [and pretty printing output](https://bitbucket.org/gvol/sage-mode/issue/12/support-new-version-of-html-pretty-print).",
    "created_at": "2012-11-24T21:17:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157037",
    "user": "https://github.com/gvol"
}
```

Since this is technically an upstream package (and still optional) I don't know that you need to check the elisp so much as just make sure that it installs, and works correctly.  Though of course feedback on the elisp is welcome too.  

There is a known issue with new versions of Sage [and pretty printing output](https://bitbucket.org/gvol/sage-mode/issue/12/support-new-version-of-html-pretty-print).



---

archive/issue_comments_157038.json:
```json
{
    "body": "I can confirm that 0.9 installed and ran smoothly on my machine (Ubuntu 12.04, emacs 23.3). And given that it fixes a critical issue (tab completion) with the latest version of Sage, I am all in favor for getting this in! Thanks for name change as well.",
    "created_at": "2013-03-07T02:21:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157038",
    "user": "https://github.com/nthiery"
}
```

I can confirm that 0.9 installed and ran smoothly on my machine (Ubuntu 12.04, emacs 23.3). And given that it fixes a critical issue (tab completion) with the latest version of Sage, I am all in favor for getting this in! Thanks for name change as well.



---

archive/issue_comments_157039.json:
```json
{
    "body": "Changing type from enhancement to defect.",
    "created_at": "2013-03-10T23:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157039",
    "user": "https://github.com/gvol"
}
```

Changing type from enhancement to defect.



---

archive/issue_comments_157040.json:
```json
{
    "body": "I have updated slightly the 0.9 package and made an official release.  Since 0.7 is broken wrt newer versions of Sage I have changed this to a defect.",
    "created_at": "2013-03-10T23:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157040",
    "user": "https://github.com/gvol"
}
```

I have updated slightly the 0.9 package and made an official release.  Since 0.7 is broken wrt newer versions of Sage I have changed this to a defect.



---

archive/issue_comments_157041.json:
```json
{
    "body": "I've installed the 0.9 spkg into 5.9.beta0 on Ubuntu 12.10 (with emacs 23.4) and things seem to work fine. I'm going to try with emacs 24 and report how that works.",
    "created_at": "2013-03-21T00:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157041",
    "user": "https://github.com/dandrake"
}
```

I've installed the 0.9 spkg into 5.9.beta0 on Ubuntu 12.10 (with emacs 23.4) and things seem to work fine. I'm going to try with emacs 24 and report how that works.



---

archive/issue_comments_157042.json:
```json
{
    "body": "The AUCTeX integration is great! But I do notice one problem with emacs 24:\n\nIf you don't have org-mode installed and you load a TeX file -- with or without any Sage stuff in it -- I get \"Can't find library org\". If I then install org-mode, loading a TeX file gives `File mode specification error: (void-function loop)`.\n\nThis is with the current state of Ubuntu 13.04: emacs 24.2, AUCTeX 11.87 and org-mode 7.9.2. In Ubuntu 12.10 (versions 23.4, 11.86, 7.8.11, respectively) things work fine.",
    "created_at": "2013-03-21T18:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157042",
    "user": "https://github.com/dandrake"
}
```

The AUCTeX integration is great! But I do notice one problem with emacs 24:

If you don't have org-mode installed and you load a TeX file -- with or without any Sage stuff in it -- I get "Can't find library org". If I then install org-mode, loading a TeX file gives `File mode specification error: (void-function loop)`.

This is with the current state of Ubuntu 13.04: emacs 24.2, AUCTeX 11.87 and org-mode 7.9.2. In Ubuntu 12.10 (versions 23.4, 11.86, 7.8.11, respectively) things work fine.



---

archive/issue_comments_157043.json:
```json
{
    "body": "The `loop` problem is because I forgot to require `cl` at compile time.  I'm not sure why loading a tex file asks for org--it definitely shouldn't.  I tried it real fast, but I couldn't reproduce it.  If you uninstall org and set `debug-on-error` do you get a backtrace?",
    "created_at": "2013-03-21T20:09:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157043",
    "user": "https://github.com/gvol"
}
```

The `loop` problem is because I forgot to require `cl` at compile time.  I'm not sure why loading a tex file asks for org--it definitely shouldn't.  I tried it real fast, but I couldn't reproduce it.  If you uninstall org and set `debug-on-error` do you get a backtrace?



---

archive/issue_comments_157044.json:
```json
{
    "body": "I have a fix for the `loop` issue up [on bitbucket](https://bitbucket.org/gvol/sage-mode/downloads/sage_mode-0.9.1.spkg) (not sure why I didn't think of hosting spkg's there before).",
    "created_at": "2013-03-22T03:42:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157044",
    "user": "https://github.com/gvol"
}
```

I have a fix for the `loop` issue up [on bitbucket](https://bitbucket.org/gvol/sage-mode/downloads/sage_mode-0.9.1.spkg) (not sure why I didn't think of hosting spkg's there before).



---

archive/issue_comments_157045.json:
```json
{
    "body": "Backtrace for the problem when org isn't installed: http://boxen.math.washington.edu/home/drake/13182load-tex-file-backtrace.txt . Your 0.9.1 spkg fixes the `loop` problem when I have org-mode installed in emacs 24.",
    "created_at": "2013-03-22T16:16:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157045",
    "user": "https://github.com/dandrake"
}
```

Backtrace for the problem when org isn't installed: http://boxen.math.washington.edu/home/drake/13182load-tex-file-backtrace.txt . Your 0.9.1 spkg fixes the `loop` problem when I have org-mode installed in emacs 24.



---

archive/issue_comments_157046.json:
```json
{
    "body": "Replying to [comment:13 ddrake]:\n> Backtrace for the problem when org isn't installed: http://boxen.math.washington.edu/home/drake/13182load-tex-file-backtrace.txt . Your 0.9.1 spkg fixes the `loop` problem when I have org-mode installed in emacs 24.\n\nThis seems to be a bug in org-mode (the version that's shipped with your emacs).  It's finding some org files (in particular org-latex), but can't actually `(require 'org)`.  Normally org wouldn't be loaded at run time, only at compile time, but since byte-compilation failed (due to this error), it also occurred at run time.  I have updated the spkg on bitbucket to work around this issue (I hope). \n\nThanks for testing.",
    "created_at": "2013-03-22T19:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157046",
    "user": "https://github.com/gvol"
}
```

Replying to [comment:13 ddrake]:
> Backtrace for the problem when org isn't installed: http://boxen.math.washington.edu/home/drake/13182load-tex-file-backtrace.txt . Your 0.9.1 spkg fixes the `loop` problem when I have org-mode installed in emacs 24.

This seems to be a bug in org-mode (the version that's shipped with your emacs).  It's finding some org files (in particular org-latex), but can't actually `(require 'org)`.  Normally org wouldn't be loaded at run time, only at compile time, but since byte-compilation failed (due to this error), it also occurred at run time.  I have updated the spkg on bitbucket to work around this issue (I hope). 

Thanks for testing.



---

archive/issue_comments_157047.json:
```json
{
    "body": "Hi!\n\nWould it be possible to add\n\n```\n    (require 'help-mode)\n```\n\n\nSee: http://www.mail-archive.com/sage-devel`@`googlegroups.com/msg41622.html\n\nThanks!",
    "created_at": "2013-03-29T19:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157047",
    "user": "https://github.com/nthiery"
}
```

Hi!

Would it be possible to add

```
    (require 'help-mode)
```


See: http://www.mail-archive.com/sage-devel`@`googlegroups.com/msg41622.html

Thanks!



---

archive/issue_comments_157048.json:
```json
{
    "body": "Replying to [comment:16 nthiery]:\n> Hi!\n> \n> Would it be possible to add\n> {{{\n>     (require 'help-mode)\n> }}}\n> \n> See: http://www.mail-archive.com/sage-devel`@`googlegroups.com/msg41622.html\n> \n> Thanks!\n\nIt's on line 70 of sage-mode.el.  Are you still seeing problems?",
    "created_at": "2013-03-29T20:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157048",
    "user": "https://github.com/gvol"
}
```

Replying to [comment:16 nthiery]:
> Hi!
> 
> Would it be possible to add
> {{{
>     (require 'help-mode)
> }}}
> 
> See: http://www.mail-archive.com/sage-devel`@`googlegroups.com/msg41622.html
> 
> Thanks!

It's on line 70 of sage-mode.el.  Are you still seeing problems?



---

archive/issue_comments_157049.json:
```json
{
    "body": "Ah. I posted this after seeing an issue on Dan Bump's machine; however I did not double check he had the very latest version of the spkg. I am adding him in CC for confirmation.",
    "created_at": "2013-03-29T20:50:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157049",
    "user": "https://github.com/nthiery"
}
```

Ah. I posted this after seeing an issue on Dan Bump's machine; however I did not double check he had the very latest version of the spkg. I am adding him in CC for confirmation.



---

archive/issue_comments_157050.json:
```json
{
    "body": "Replying to [comment:18 nthiery]:\n> Ah. I posted this after seeing an issue on Dan Bump's machine; however I did not double check he had the very latest version of the spkg. I am adding him in CC for confirmation.\n\nI reinstalled the latest sage-mode on my machine, after removing the \"require help-mode\" line from my .emacs, and this indeed seems to work smootlhy. Dan, can you confirm?",
    "created_at": "2013-04-01T13:10:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157050",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:18 nthiery]:
> Ah. I posted this after seeing an issue on Dan Bump's machine; however I did not double check he had the very latest version of the spkg. I am adding him in CC for confirmation.

I reinstalled the latest sage-mode on my machine, after removing the "require help-mode" line from my .emacs, and this indeed seems to work smootlhy. Dan, can you confirm?



---

archive/issue_comments_157051.json:
```json
{
    "body": "Replying to [comment:19 nthiery]:\n> I reinstalled the latest sage-mode on my machine, after removing the \"require help-mode\" line from my .emacs, and this indeed seems to work smootlhy. Dan, can you confirm?\n\nI can confirm that the latest spkg works. It has a `(require 'help-mode)` line, my `.emacs` does not, and everything installs and works fine with emacs 23.",
    "created_at": "2013-04-01T16:57:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157051",
    "user": "https://github.com/dandrake"
}
```

Replying to [comment:19 nthiery]:
> I reinstalled the latest sage-mode on my machine, after removing the "require help-mode" line from my .emacs, and this indeed seems to work smootlhy. Dan, can you confirm?

I can confirm that the latest spkg works. It has a `(require 'help-mode)` line, my `.emacs` does not, and everything installs and works fine with emacs 23.



---

archive/issue_comments_157052.json:
```json
{
    "body": "I hate to bug everyone, but it would be great if this could get reviewed.  I keep getting emails from people having problems and they are (understandably) still using sage-mode 0.7.  It's not uncommon that their issues are solved by simply upgrading.\n\nThanks, and let me know if I can review one of your tickets in exchange or something.",
    "created_at": "2013-06-07T17:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157052",
    "user": "https://github.com/gvol"
}
```

I hate to bug everyone, but it would be great if this could get reviewed.  I keep getting emails from people having problems and they are (understandably) still using sage-mode 0.7.  It's not uncommon that their issues are solved by simply upgrading.

Thanks, and let me know if I can review one of your tickets in exchange or something.



---

archive/issue_comments_157053.json:
```json
{
    "body": "I have tried on sage 5.10.rc1, and it works fine.\n\nIn particular, tab completion works.\n\nI had to install preview-latex-style, which is not by default on my ubuntu LTS.\n\nI would give a positive review, but I would prefer if Nicolas or Florent confirm me !",
    "created_at": "2013-06-12T20:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157053",
    "user": "https://github.com/fchapoton"
}
```

I have tried on sage 5.10.rc1, and it works fine.

In particular, tab completion works.

I had to install preview-latex-style, which is not by default on my ubuntu LTS.

I would give a positive review, but I would prefer if Nicolas or Florent confirm me !



---

archive/issue_comments_157054.json:
```json
{
    "body": "Replying to [comment:23 chapoton]:\n> I have tried on sage 5.10.rc1, and it works fine.\n> \n> In particular, tab completion works.\n> \n> I had to install preview-latex-style, which is not by default on my ubuntu LTS.\n> \n> I would give a positive review, but I would prefer if Nicolas or Florent confirm me !\n\nYou mean you had to install preview.sty?  You should only need that to use sage-view to display typeset text.  But it would probably be a good idea to mention that as a requirement.  I'll add it to the next version.",
    "created_at": "2013-06-12T21:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157054",
    "user": "https://github.com/gvol"
}
```

Replying to [comment:23 chapoton]:
> I have tried on sage 5.10.rc1, and it works fine.
> 
> In particular, tab completion works.
> 
> I had to install preview-latex-style, which is not by default on my ubuntu LTS.
> 
> I would give a positive review, but I would prefer if Nicolas or Florent confirm me !

You mean you had to install preview.sty?  You should only need that to use sage-view to display typeset text.  But it would probably be a good idea to mention that as a requirement.  I'll add it to the next version.



---

archive/issue_comments_157055.json:
```json
{
    "body": "Using the skpg with emacs 23, I have only been hurted by problems with latex compilation, which are part of other tickets, namely #14382 and #13624.\n\nSo let me give a positive review.",
    "created_at": "2013-06-14T07:51:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157055",
    "user": "https://github.com/fchapoton"
}
```

Using the skpg with emacs 23, I have only been hurted by problems with latex compilation, which are part of other tickets, namely #14382 and #13624.

So let me give a positive review.



---

archive/issue_comments_157056.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-14T07:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157056",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_157057.json:
```json
{
    "body": "Changing component from user interface to packages: optional.",
    "created_at": "2013-06-14T09:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157057",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from user interface to packages: optional.



---

archive/issue_comments_157058.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-06-14T09:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157058",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_012947.json:
```json
{
    "actor": "@jdemeyer",
    "created_at": "2013-06-14T09:24:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13010#event-12947"
}
```



---

archive/issue_comments_157059.json:
```json
{
    "body": "optional spkg is on the server",
    "created_at": "2013-06-14T10:28:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157059",
    "user": "https://github.com/haraldschilly"
}
```

optional spkg is on the server



---

archive/issue_comments_157060.json:
```json
{
    "body": "Replying to [comment:25 chapoton]:\n> \n> Using the skpg with emacs 23, I have only been hurted by problems with latex compilation, which are part of other tickets, namely #14382 and #13624.\n> \n> So let me give a positive review.\n\nCool, thanks!",
    "created_at": "2013-06-14T17:20:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13010#issuecomment-157060",
    "user": "https://github.com/gvol"
}
```

Replying to [comment:25 chapoton]:
> 
> Using the skpg with emacs 23, I have only been hurted by problems with latex compilation, which are part of other tickets, namely #14382 and #13624.
> 
> So let me give a positive review.

Cool, thanks!
