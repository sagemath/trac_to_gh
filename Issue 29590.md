# Issue 29590: Upgrade gcc to 9.3

archive/issues_029590.json:
```json
{
    "body": "CC:  @jhpalmieri @zlscherr\n\nWe upgrade gcc from 9.2 to 9.3\n\nhttps://gcc.gnu.org/bugzilla/buglist.cgi?bug_status=RESOLVED&resolution=FIXED&target_milestone=9.3\n\npart of #29703\n\nIssue created by migration from https://trac.sagemath.org/ticket/29827\n\n",
    "created_at": "2020-06-08T15:20:11Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Upgrade gcc to 9.3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29590",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @jhpalmieri @zlscherr

We upgrade gcc from 9.2 to 9.3

https://gcc.gnu.org/bugzilla/buglist.cgi?bug_status=RESOLVED&resolution=FIXED&target_milestone=9.3

part of #29703

Issue created by migration from https://trac.sagemath.org/ticket/29827





---

archive/issue_comments_419673.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-06-08T23:20:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29590#issuecomment-419673",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_419674.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-03-02T23:08:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29590#issuecomment-419674",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_419675.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-03-02T23:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29590#issuecomment-419675",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_419676.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-03-03T01:10:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29590#issuecomment-419676",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_419677.json:
```json
{
    "body": "Patches need updating\n\n```\ngfortran-9.3.0]   Applying patches from ../patches...\n  [gfortran-9.3.0]   Applying ../patches/gcc-multilib-multiarch.patch\n  [gfortran-9.3.0]   patching file gcc/config/i386/t-linux64\n  [gfortran-9.3.0]   patching file gcc/config/mips/t-linux64\n  [gfortran-9.3.0]   patching file gcc/config/rs6000/t-linux\n  [gfortran-9.3.0]   Hunk #1 succeeded at 2 with fuzz 2.\n  [gfortran-9.3.0]   patching file gcc/config/rs6000/t-linux64\n  [gfortran-9.3.0]   patching file gcc/config/s390/t-linux64\n  [gfortran-9.3.0]   patching file gcc/config/sparc/t-linux64\n  [gfortran-9.3.0]   Applying ../patches/homebrew-9.2.0-catalina.patch\n  [gfortran-9.3.0]   patching file fixincludes/fixincl.x\n  [gfortran-9.3.0]   Hunk #1 FAILED at 2.\n  [gfortran-9.3.0]   Hunk #2 FAILED at 15.\n  [gfortran-9.3.0]   Hunk #3 succeeded at 2686 (offset 50 lines).\n  [gfortran-9.3.0]   Hunk #4 FAILED at 10388.\n  [gfortran-9.3.0]   Hunk #5 succeeded at 10558 (offset 100 lines).\n  [gfortran-9.3.0]   Hunk #6 succeeded at 11071 (offset 106 lines).\n  [gfortran-9.3.0]   3 out of 6 hunks FAILED -- saving rejects to file fixincludes/fixincl.x.rej\n  [gfortran-9.3.0]   patching file fixincludes/inclhack.def\n  [gfortran-9.3.0]   Hunk #1 succeeded at 1325 (offset 27 lines).\n  [gfortran-9.3.0]   Error applying '../patches/homebrew-9.2.0-catalina.patch'\n```\n\nhttps://github.com/mkoeppe/sage/runs/2017617134?check_suite_focus=true",
    "created_at": "2021-03-03T01:10:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29590#issuecomment-419677",
    "user": "https://github.com/mkoeppe"
}
```

Patches need updating

```
gfortran-9.3.0]   Applying patches from ../patches...
  [gfortran-9.3.0]   Applying ../patches/gcc-multilib-multiarch.patch
  [gfortran-9.3.0]   patching file gcc/config/i386/t-linux64
  [gfortran-9.3.0]   patching file gcc/config/mips/t-linux64
  [gfortran-9.3.0]   patching file gcc/config/rs6000/t-linux
  [gfortran-9.3.0]   Hunk #1 succeeded at 2 with fuzz 2.
  [gfortran-9.3.0]   patching file gcc/config/rs6000/t-linux64
  [gfortran-9.3.0]   patching file gcc/config/s390/t-linux64
  [gfortran-9.3.0]   patching file gcc/config/sparc/t-linux64
  [gfortran-9.3.0]   Applying ../patches/homebrew-9.2.0-catalina.patch
  [gfortran-9.3.0]   patching file fixincludes/fixincl.x
  [gfortran-9.3.0]   Hunk #1 FAILED at 2.
  [gfortran-9.3.0]   Hunk #2 FAILED at 15.
  [gfortran-9.3.0]   Hunk #3 succeeded at 2686 (offset 50 lines).
  [gfortran-9.3.0]   Hunk #4 FAILED at 10388.
  [gfortran-9.3.0]   Hunk #5 succeeded at 10558 (offset 100 lines).
  [gfortran-9.3.0]   Hunk #6 succeeded at 11071 (offset 106 lines).
  [gfortran-9.3.0]   3 out of 6 hunks FAILED -- saving rejects to file fixincludes/fixincl.x.rej
  [gfortran-9.3.0]   patching file fixincludes/inclhack.def
  [gfortran-9.3.0]   Hunk #1 succeeded at 1325 (offset 27 lines).
  [gfortran-9.3.0]   Error applying '../patches/homebrew-9.2.0-catalina.patch'
```

https://github.com/mkoeppe/sage/runs/2017617134?check_suite_focus=true



---

archive/issue_comments_419678.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-03T19:06:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29590#issuecomment-419678",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_419679.json:
```json
{
    "body": "As `@`gh-zlscherr reports in #31326, upgrading to gcc 9.3 does NOT fix the issues on macOS Big Sur.\n\nhomebrew:\n- uses this patch for GCC 10.2: https://raw.githubusercontent.com/Homebrew/formula-patches/6a83f36d/gcc/bigsur_2.patch\n- notes in https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc.rb#L53: \"Patch for Big Sur, remove with GCC 10.3 - https://gcc.gnu.org/bugzilla/show_bug.cgi?id=98805\"\n\nNot sure if anyone has a backport to the GCC 9.x series",
    "created_at": "2021-03-16T03:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29590#issuecomment-419679",
    "user": "https://github.com/mkoeppe"
}
```

As `@`gh-zlscherr reports in #31326, upgrading to gcc 9.3 does NOT fix the issues on macOS Big Sur.

homebrew:
- uses this patch for GCC 10.2: https://raw.githubusercontent.com/Homebrew/formula-patches/6a83f36d/gcc/bigsur_2.patch
- notes in https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/gcc.rb#L53: "Patch for Big Sur, remove with GCC 10.3 - https://gcc.gnu.org/bugzilla/show_bug.cgi?id=98805"

Not sure if anyone has a backport to the GCC 9.x series



---

archive/issue_comments_419680.json:
```json
{
    "body": "I had thought that staying for a while on the GCC 9.x series would be useful - given how many fixes were necessary in packages for the 10.x series, there may still be optional/experimental/user packages that cannot be built with GCC 10.\n\nBut it looks like this is not going anywhere, so let's move on and continue in #29703 with an upgrade to 10.x",
    "created_at": "2021-03-16T04:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29590#issuecomment-419680",
    "user": "https://github.com/mkoeppe"
}
```

I had thought that staying for a while on the GCC 9.x series would be useful - given how many fixes were necessary in packages for the 10.x series, there may still be optional/experimental/user packages that cannot be built with GCC 10.

But it looks like this is not going anywhere, so let's move on and continue in #29703 with an upgrade to 10.x



---

archive/issue_comments_419681.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-03-16T04:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29590#issuecomment-419681",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_419682.json:
```json
{
    "body": "Sounds okay.",
    "created_at": "2021-03-16T21:11:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29590#issuecomment-419682",
    "user": "https://github.com/jhpalmieri"
}
```

Sounds okay.



---

archive/issue_comments_419683.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-03-16T21:11:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29590#issuecomment-419683",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_027310.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-05-28T16:47:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29590",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29590#event-27310"
}
```



---

archive/issue_comments_419684.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2021-05-28T16:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29590",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29590#issuecomment-419684",
    "user": "https://github.com/fchapoton"
}
```

Resolution: invalid
