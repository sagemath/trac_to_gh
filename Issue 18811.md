# Issue 18811: AsymptoticRing: an_element

Issue created by migration from Trac.

Original creator: dkrenn

Original creation time: 2015-08-17 19:33:59

CC:  behackl

Keywords: asymptotics

Implement `.an_element` and `.some_elements`.


---

Comment by dkrenn created at 2015-08-17 19:35:46

Last 10 new commits:


---

Comment by behackl created at 2015-08-17 20:48:32

I've reviewed your changes, merged the latest `asy/asymptoticExpression` into this branch and applied a tiny reviewer's patch (somehow, `'exact` was pasted where it definitely should not). In principal, everything looks good to me and the doctests pass.

However, do you think that `asymptotic_term.py` really is the best place for the `product_diagonal` function? I do understand that it is required as a helper function there -- but nevertheless, from my point of view, the function is sufficiently general so that it could also live, for example, in `src/sage/misc/misc.py`.

What do you think?
----
Last 10 new commits:


---

Comment by dkrenn created at 2015-08-21 11:13:27

Replying to [comment:4 behackl]:
> I've reviewed your changes, merged the latest `asy/asymptoticExpression` into this branch and applied a tiny reviewer's patch (somehow, `'exact` was pasted where it definitely should not). In principal, everything looks good to me and the doctests pass.

Thanks.

> However, do you think that `asymptotic_term.py` really is the best place for the `product_diagonal` function? I do understand that it is required as a helper function there -- but nevertheless, from my point of view, the function is sufficiently general so that it could also live, for example, in `src/sage/misc/misc.py`.

I would keep it here, as it is needed (at the moment) only here.
----
Last 10 new commits:


---

Comment by dkrenn created at 2015-08-21 11:13:34

Changing status from new to needs_review.


---

Comment by git created at 2015-09-09 15:23:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2015-09-09 15:23:25

Merged 6.9.beta5


---

Comment by dkrenn created at 2015-09-15 17:28:46

Changing component from symbolics to asymptotic expansions.


---

Comment by git created at 2015-09-16 07:12:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by behackl created at 2015-09-23 10:43:24

Merged positively reviewed dependencies into this branch and fixed a simple conflict.
----
Last 10 new commits:


---

Comment by cheuberg created at 2015-09-29 16:00:41

Perhaps the name `product_diagonal` could be changed to refer to the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function)?

There is a module on [multidimensional enumeration](http://doc.sagemath.org/html/en/reference/misc/sage/misc/mrange.html), but apparently, it only deals with finite iterators.


---

Comment by dkrenn created at 2015-09-30 12:06:37

Replying to [comment:13 cheuberg]:
> Perhaps the name `product_diagonal` could be changed to refer to the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function)?
> 
> There is a module on [multidimensional enumeration](http://doc.sagemath.org/html/en/reference/misc/sage/misc/mrange.html), but apparently, it only deals with finite iterators.

follow up #19319 (is now a dependency of this ticket).


---

Comment by git created at 2015-09-30 12:28:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by cheuberg created at 2015-09-30 14:57:15

Changing status from needs_review to needs_work.


---

Comment by cheuberg created at 2015-09-30 14:57:15

Doctests pass on `6.9.beta5`. On `6.9.rc0`, they do not (cf. patchbot). After merging all dependencies into `6.9.rc0`, there is still one failing doctest:

```
sage -t src/sage/rings/asymptotic/asymptotic_ring.py
**********************************************************************
File "src/sage/rings/asymptotic/asymptotic_ring.py", line 655, in sage.rings.asymptotic.asymptotic_ring.AsymptoticExpression.__pow__
Failed example:
    (y^2+O(y))^(-2)
Expected:
    Traceback (most recent call last):
    ...
    TypeError: unsupported operand parent(s) for '/':
    'Asymptotic Ring <y^ZZ> over Integer Ring' and 'Asymptotic
    Ring <y^ZZ> over Integer Ring'
Got:
    <BLANKLINE>
    Traceback (most recent call last):
    ...
    CoercionException: Infinite loop in action of Integer Ring (parent <type 'sage.rings.integer_ring.IntegerRing_class'>) and Asymptotic Ring <y^ZZ> over Integer Ring (parent <class 'sage.rings.asymptotic.asymptotic_ring.AsymptoticRing_with_category'>)!

```



---

Comment by cheuberg created at 2015-09-30 15:02:54

Merging #19068 would solve the problem, but perhaps you could have a look whether there is some deeper problem before.


---

Comment by git created at 2015-10-01 06:37:11

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by git created at 2015-10-01 06:41:10

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by dkrenn created at 2015-10-01 06:42:17

Changing status from needs_work to needs_review.


---

Comment by dkrenn created at 2015-10-01 06:42:48

Replying to [comment:19 cheuberg]:
> Merging #19068 would solve the problem, but perhaps you could have a look whether there is some deeper problem before.

Merging #19068 is fine.


---

Comment by cheuberg created at 2015-10-02 17:37:33

#19319 now has completely new code which is guaranteed to produce merge conflicts here.


---

Comment by cheuberg created at 2015-10-02 17:37:33

Changing status from needs_review to needs_work.


---

Comment by git created at 2015-10-03 07:19:05

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by cheuberg created at 2015-10-03 07:23:15

Changing status from needs_work to needs_review.


---

Comment by cheuberg created at 2015-10-03 07:23:15

I reviewed this code before #19319 had been factored out and did not have any objections to the part which is still in this ticket.

Replying to [comment:24 cheuberg]:
> #19319 now has completely new code which is guaranteed to produce merge conflicts here.

I now reverted all changes by the old branch of #19319, merged the new branch of #19319 and fixed code and doctests here.

Please cross-review this revert+merge+fix and set the ticket to `positive_review` if you are satisfied.


---

Comment by behackl created at 2015-10-05 10:40:30

Thanks for your review and the merge of the changes at #19319. I cross-checked everything; your changes look fine; documentation builds and doctests pass.

Together with your previous review, this is `positive_review`.


---

Comment by behackl created at 2015-10-05 10:40:30

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-10-14 00:59:30

Resolution: fixed
