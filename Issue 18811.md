# Issue 18811: AsymptoticRing: an_element

archive/issues_018811.json:
```json
{
    "body": "CC:  @behackl\n\nKeywords: asymptotics\n\nImplement `.an_element` and `.some_elements`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/19048\n\n",
    "created_at": "2015-08-17T19:33:59Z",
    "labels": [
        "symbolics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.9",
    "title": "AsymptoticRing: an_element",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18811",
    "user": "@dkrenn"
}
```
CC:  @behackl

Keywords: asymptotics

Implement `.an_element` and `.some_elements`.

Issue created by migration from https://trac.sagemath.org/ticket/19048





---

archive/issue_comments_257273.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2015-08-17T19:35:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257273",
    "user": "@dkrenn"
}
```

Last 10 new commits:



---

archive/issue_comments_257274.json:
```json
{
    "body": "I've reviewed your changes, merged the latest `asy/asymptoticExpression` into this branch and applied a tiny reviewer's patch (somehow, `'exact` was pasted where it definitely should not). In principal, everything looks good to me and the doctests pass.\n\nHowever, do you think that `asymptotic_term.py` really is the best place for the `product_diagonal` function? I do understand that it is required as a helper function there -- but nevertheless, from my point of view, the function is sufficiently general so that it could also live, for example, in `src/sage/misc/misc.py`.\n\nWhat do you think?\n----\nLast 10 new commits:",
    "created_at": "2015-08-17T20:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257274",
    "user": "@behackl"
}
```

I've reviewed your changes, merged the latest `asy/asymptoticExpression` into this branch and applied a tiny reviewer's patch (somehow, `'exact` was pasted where it definitely should not). In principal, everything looks good to me and the doctests pass.

However, do you think that `asymptotic_term.py` really is the best place for the `product_diagonal` function? I do understand that it is required as a helper function there -- but nevertheless, from my point of view, the function is sufficiently general so that it could also live, for example, in `src/sage/misc/misc.py`.

What do you think?
----
Last 10 new commits:



---

archive/issue_comments_257275.json:
```json
{
    "body": "Replying to [comment:4 behackl]:\n> I've reviewed your changes, merged the latest `asy/asymptoticExpression` into this branch and applied a tiny reviewer's patch (somehow, `'exact` was pasted where it definitely should not). In principal, everything looks good to me and the doctests pass.\n\nThanks.\n\n> However, do you think that `asymptotic_term.py` really is the best place for the `product_diagonal` function? I do understand that it is required as a helper function there -- but nevertheless, from my point of view, the function is sufficiently general so that it could also live, for example, in `src/sage/misc/misc.py`.\n\nI would keep it here, as it is needed (at the moment) only here.\n----\nLast 10 new commits:",
    "created_at": "2015-08-21T11:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257275",
    "user": "@dkrenn"
}
```

Replying to [comment:4 behackl]:
> I've reviewed your changes, merged the latest `asy/asymptoticExpression` into this branch and applied a tiny reviewer's patch (somehow, `'exact` was pasted where it definitely should not). In principal, everything looks good to me and the doctests pass.

Thanks.

> However, do you think that `asymptotic_term.py` really is the best place for the `product_diagonal` function? I do understand that it is required as a helper function there -- but nevertheless, from my point of view, the function is sufficiently general so that it could also live, for example, in `src/sage/misc/misc.py`.

I would keep it here, as it is needed (at the moment) only here.
----
Last 10 new commits:



---

archive/issue_comments_257276.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-08-21T11:13:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257276",
    "user": "@dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_257277.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-09T15:23:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257277",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_257278.json:
```json
{
    "body": "Merged 6.9.beta5",
    "created_at": "2015-09-09T15:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257278",
    "user": "@dkrenn"
}
```

Merged 6.9.beta5



---

archive/issue_comments_257279.json:
```json
{
    "body": "Changing component from symbolics to asymptotic expansions.",
    "created_at": "2015-09-15T17:28:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257279",
    "user": "@dkrenn"
}
```

Changing component from symbolics to asymptotic expansions.



---

archive/issue_comments_257280.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-16T07:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257280",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_257281.json:
```json
{
    "body": "Merged positively reviewed dependencies into this branch and fixed a simple conflict.\n----\nLast 10 new commits:",
    "created_at": "2015-09-23T10:43:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257281",
    "user": "@behackl"
}
```

Merged positively reviewed dependencies into this branch and fixed a simple conflict.
----
Last 10 new commits:



---

archive/issue_comments_257282.json:
```json
{
    "body": "Perhaps the name `product_diagonal` could be changed to refer to the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function)?\n\nThere is a module on [multidimensional enumeration](http://doc.sagemath.org/html/en/reference/misc/sage/misc/mrange.html), but apparently, it only deals with finite iterators.",
    "created_at": "2015-09-29T16:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257282",
    "user": "@cheuberg"
}
```

Perhaps the name `product_diagonal` could be changed to refer to the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function)?

There is a module on [multidimensional enumeration](http://doc.sagemath.org/html/en/reference/misc/sage/misc/mrange.html), but apparently, it only deals with finite iterators.



---

archive/issue_comments_257283.json:
```json
{
    "body": "Replying to [comment:13 cheuberg]:\n> Perhaps the name `product_diagonal` could be changed to refer to the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function)?\n> \n> There is a module on [multidimensional enumeration](http://doc.sagemath.org/html/en/reference/misc/sage/misc/mrange.html), but apparently, it only deals with finite iterators.\n\nfollow up #19319 (is now a dependency of this ticket).",
    "created_at": "2015-09-30T12:06:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257283",
    "user": "@dkrenn"
}
```

Replying to [comment:13 cheuberg]:
> Perhaps the name `product_diagonal` could be changed to refer to the [Cantor pairing function](https://en.wikipedia.org/wiki/Pairing_function#Cantor_pairing_function)?
> 
> There is a module on [multidimensional enumeration](http://doc.sagemath.org/html/en/reference/misc/sage/misc/mrange.html), but apparently, it only deals with finite iterators.

follow up #19319 (is now a dependency of this ticket).



---

archive/issue_comments_257284.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-09-30T12:28:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257284",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_257285.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-09-30T14:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257285",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_257286.json:
```json
{
    "body": "Doctests pass on `6.9.beta5`. On `6.9.rc0`, they do not (cf. patchbot). After merging all dependencies into `6.9.rc0`, there is still one failing doctest:\n\n```\nsage -t src/sage/rings/asymptotic/asymptotic_ring.py\n**********************************************************************\nFile \"src/sage/rings/asymptotic/asymptotic_ring.py\", line 655, in sage.rings.asymptotic.asymptotic_ring.AsymptoticExpression.__pow__\nFailed example:\n    (y^2+O(y))^(-2)\nExpected:\n    Traceback (most recent call last):\n    ...\n    TypeError: unsupported operand parent(s) for '/':\n    'Asymptotic Ring <y^ZZ> over Integer Ring' and 'Asymptotic\n    Ring <y^ZZ> over Integer Ring'\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n    ...\n    CoercionException: Infinite loop in action of Integer Ring (parent <type 'sage.rings.integer_ring.IntegerRing_class'>) and Asymptotic Ring <y^ZZ> over Integer Ring (parent <class 'sage.rings.asymptotic.asymptotic_ring.AsymptoticRing_with_category'>)!\n\n```\n",
    "created_at": "2015-09-30T14:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257286",
    "user": "@cheuberg"
}
```

Doctests pass on `6.9.beta5`. On `6.9.rc0`, they do not (cf. patchbot). After merging all dependencies into `6.9.rc0`, there is still one failing doctest:

```
sage -t src/sage/rings/asymptotic/asymptotic_ring.py
**********************************************************************
File "src/sage/rings/asymptotic/asymptotic_ring.py", line 655, in sage.rings.asymptotic.asymptotic_ring.AsymptoticExpression.__pow__
Failed example:
    (y^2+O(y))^(-2)
Expected:
    Traceback (most recent call last):
    ...
    TypeError: unsupported operand parent(s) for '/':
    'Asymptotic Ring <y^ZZ> over Integer Ring' and 'Asymptotic
    Ring <y^ZZ> over Integer Ring'
Got:
    <BLANKLINE>
    Traceback (most recent call last):
    ...
    CoercionException: Infinite loop in action of Integer Ring (parent <type 'sage.rings.integer_ring.IntegerRing_class'>) and Asymptotic Ring <y^ZZ> over Integer Ring (parent <class 'sage.rings.asymptotic.asymptotic_ring.AsymptoticRing_with_category'>)!

```




---

archive/issue_comments_257287.json:
```json
{
    "body": "Merging #19068 would solve the problem, but perhaps you could have a look whether there is some deeper problem before.",
    "created_at": "2015-09-30T15:02:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257287",
    "user": "@cheuberg"
}
```

Merging #19068 would solve the problem, but perhaps you could have a look whether there is some deeper problem before.



---

archive/issue_comments_257288.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-10-01T06:37:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257288",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_257289.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-10-01T06:41:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257289",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_257290.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-10-01T06:42:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257290",
    "user": "@dkrenn"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_257291.json:
```json
{
    "body": "Replying to [comment:19 cheuberg]:\n> Merging #19068 would solve the problem, but perhaps you could have a look whether there is some deeper problem before.\n\nMerging #19068 is fine.",
    "created_at": "2015-10-01T06:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257291",
    "user": "@dkrenn"
}
```

Replying to [comment:19 cheuberg]:
> Merging #19068 would solve the problem, but perhaps you could have a look whether there is some deeper problem before.

Merging #19068 is fine.



---

archive/issue_comments_257292.json:
```json
{
    "body": "#19319 now has completely new code which is guaranteed to produce merge conflicts here.",
    "created_at": "2015-10-02T17:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257292",
    "user": "@cheuberg"
}
```

#19319 now has completely new code which is guaranteed to produce merge conflicts here.



---

archive/issue_comments_257293.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-10-02T17:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257293",
    "user": "@cheuberg"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_257294.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-10-03T07:19:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257294",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_257295.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-10-03T07:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257295",
    "user": "@cheuberg"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_257296.json:
```json
{
    "body": "I reviewed this code before #19319 had been factored out and did not have any objections to the part which is still in this ticket.\n\nReplying to [comment:24 cheuberg]:\n> #19319 now has completely new code which is guaranteed to produce merge conflicts here.\n\nI now reverted all changes by the old branch of #19319, merged the new branch of #19319 and fixed code and doctests here.\n\nPlease cross-review this revert+merge+fix and set the ticket to `positive_review` if you are satisfied.",
    "created_at": "2015-10-03T07:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257296",
    "user": "@cheuberg"
}
```

I reviewed this code before #19319 had been factored out and did not have any objections to the part which is still in this ticket.

Replying to [comment:24 cheuberg]:
> #19319 now has completely new code which is guaranteed to produce merge conflicts here.

I now reverted all changes by the old branch of #19319, merged the new branch of #19319 and fixed code and doctests here.

Please cross-review this revert+merge+fix and set the ticket to `positive_review` if you are satisfied.



---

archive/issue_comments_257297.json:
```json
{
    "body": "Thanks for your review and the merge of the changes at #19319. I cross-checked everything; your changes look fine; documentation builds and doctests pass.\n\nTogether with your previous review, this is `positive_review`.",
    "created_at": "2015-10-05T10:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257297",
    "user": "@behackl"
}
```

Thanks for your review and the merge of the changes at #19319. I cross-checked everything; your changes look fine; documentation builds and doctests pass.

Together with your previous review, this is `positive_review`.



---

archive/issue_comments_257298.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-10-05T10:40:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257298",
    "user": "@behackl"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_257299.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-10-14T00:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18811#issuecomment-257299",
    "user": "@vbraun"
}
```

Resolution: fixed
