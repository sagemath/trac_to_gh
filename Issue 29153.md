# Issue 29153: gf2x build fails on fedora-32-minimal

Issue created by migration from https://trac.sagemath.org/ticket/29390

Original creator: mkoeppe

Original creation time: 2020-03-22 15:38:50

CC:  dimpase

https://github.com/mkoeppe/sage/runs/524868611


```
libtool: link: gcc -O2 -g -Wall -W -msse2 -msse3 -mssse3 -msse4.1 -mpclmul -Wl,-rpath -Wl,/sage/local/lib -o tunetoom tunetoom.o tuning-common.o  -L/sage/local/lib ./.libs/libtiming.a ../.libs/libgf2x.so -lm -Wl,-rpath -Wl,/sage/local/var/tmp/sage/build/gf2x-1.2.p0/src/.libs -Wl,-rpath -Wl,/sage/local/lib
/usr/bin/ld: tuning-common.o:(.bss+0x8): multiple definition of `rp'; tunetoom.o:(.bss+0x0): first defined here
collect2: error: ld returned 1 exit status
```



---

Attachment


---

Comment by mjo created at 2020-04-26 14:15:24

I sent this patch (against git HEAD) upstream. It does the job here.


---

Comment by mjo created at 2020-04-26 17:59:02

My patch was merged upstream already (on top of gf2x-1.3.0, which has been out for a few months). There shouldn't be any problem applying it to v1.2 even if that one line I deleted has moved.


---

Comment by mkoeppe created at 2020-04-26 18:54:33

Thanks, the patch applies cleanly
----
New commits:


---

Comment by mkoeppe created at 2020-04-26 18:54:44

Changing status from new to needs_review.


---

Comment by mjo created at 2020-04-26 22:36:11

Changing status from needs_review to positive_review.


---

Comment by mjo created at 2020-04-26 22:36:11

It works with `CFLAGS="-fno-common"`, so good enough?


---

Comment by mkoeppe created at 2020-04-26 22:39:05

I haven't tested it widely. Any thoughts?


---

Comment by mkoeppe created at 2020-04-26 22:42:45

Tests now run at https://github.com/mkoeppe/sage/actions/runs/88544669


---

Comment by mjo created at 2020-04-26 22:43:39

It's an obviously-correct one-line change to the custom tuning code -- not even to gf2x itself -- so I'm sure the change is OK. It's up to you if you actually want to try it on fedora-32, though, given the subject of the ticket.


---

Comment by mkoeppe created at 2020-04-26 22:47:44

Thanks. I'll set this back to 9.1 when it has passed the test.


---

Comment by mkoeppe created at 2020-04-27 05:24:13

OK, looking great.


---

Comment by vbraun created at 2020-05-02 21:58:23

Resolution: fixed
