# Issue 24132: arb fails to pass self-tests

archive/issues_024132.json:
```json
{
    "body": "CC:  @fredrik-johansson @kiwifb\n\narb fails to pass self-tests on my 32bit VM, while it did not before. Log attached.\n\nIssue created by migration from https://trac.sagemath.org/ticket/24369\n\n",
    "created_at": "2017-12-11T18:45:21Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "arb fails to pass self-tests",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24132",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```
CC:  @fredrik-johansson @kiwifb

arb fails to pass self-tests on my 32bit VM, while it did not before. Log attached.

Issue created by migration from https://trac.sagemath.org/ticket/24369





---

archive/issue_comments_337774.json:
```json
{
    "body": "Attachment [arb-2.11.1.p0.log](tarball://root/attachments/some-uuid/ticket24369/arb-2.11.1.p0.log) by tmonteil created at 2017-12-11 18:55:32",
    "created_at": "2017-12-11T18:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337774",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Attachment [arb-2.11.1.p0.log](tarball://root/attachments/some-uuid/ticket24369/arb-2.11.1.p0.log) by tmonteil created at 2017-12-11 18:55:32



---

archive/issue_comments_337775.json:
```json
{
    "body": "Does upgrading to 2.12 solve the issue?",
    "created_at": "2017-12-11T20:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337775",
    "user": "https://github.com/fredrik-johansson"
}
```

Does upgrading to 2.12 solve the issue?



---

archive/issue_comments_337776.json:
```json
{
    "body": "By the way, the same error on x86_64 (a skylake CPU, Linux)\n\n```\n[arb-2.11.1.p0] gauss_period_minpoly....make[3]: *** [../Makefile.subdirs:84: \n../build/arb_fmpz_poly/test/t-gauss_period_minpoly_RUN] Floating point exception\n```\n\n\nI'll investigate the upgrade option...",
    "created_at": "2017-12-11T23:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337776",
    "user": "https://github.com/dimpase"
}
```

By the way, the same error on x86_64 (a skylake CPU, Linux)

```
[arb-2.11.1.p0] gauss_period_minpoly....make[3]: *** [../Makefile.subdirs:84: 
../build/arb_fmpz_poly/test/t-gauss_period_minpoly_RUN] Floating point exception
```


I'll investigate the upgrade option...



---

archive/issue_comments_337777.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-12-12T00:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337777",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_337778.json:
```json
{
    "body": "mildly tested on x86_64, fixed numerical noise (which almost uniformly went down :-)).\n----\nNew commits:",
    "created_at": "2017-12-12T00:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337778",
    "user": "https://github.com/dimpase"
}
```

mildly tested on x86_64, fixed numerical noise (which almost uniformly went down :-)).
----
New commits:



---

archive/issue_comments_337779.json:
```json
{
    "body": "Not a good time for me. I won't be able to give you a review before the 3rd or 4rth of January.",
    "created_at": "2017-12-29T09:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337779",
    "user": "https://github.com/kiwifb"
}
```

Not a good time for me. I won't be able to give you a review before the 3rd or 4rth of January.



---

archive/issue_comments_337780.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-12-30T01:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337780",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_337781.json:
```json
{
    "body": "With 2.12.0, i still have one test failure on 32bit system:\n\n\n```\nl_vec_hurwitz....\n L value differ\nL(1/2, 1) single = (0 + 0j)  +/-  (0, 0j)\nL(1/2, 1) multi = (-0.30909754859579756426 + 0j)  +/-  (2.54e-23, 0j)\n\n(-0.3090975486 + 0j)  +/-  (2.54e-23, 0j)\n(0.7888523833 - 0.1836680212j)  +/-  (2.02e-23, 1.54e-23j)\n(0.4432168971 - 0.236477911j)  +/-  (1.99e-23, 1.32e-23j)\n(1.648021942 + 0.03777565741j)  +/-  (1.55e-23, 8.22e-24j)\n(0.6185977148 + 0.146695673j)  +/-  (2.08e-23, 1.32e-23j)\n(0.5039871966 - 0.8215955013j)  +/-  (2.02e-23, 1.71e-23j)\n(0.750432146 + 0j)  +/-  (2.54e-23, 0j)\n(0.5039871966 + 0.8215955013j)  +/-  (2.02e-23, 1.71e-23j)\n(0.6185977148 - 0.146695673j)  +/-  (2.08e-23, 1.32e-23j)\n(1.648021942 - 0.03777565741j)  +/-  (1.55e-23, 8.22e-24j)\n(0.4432168971 + 0.236477911j)  +/-  (1.99e-23, 1.32e-23j)\n(0.7888523833 + 0.1836680212j)  +/-  (2.02e-23, 1.54e-23j)\n\n\n../Makefile.subdirs:84: recipe for target '../build/acb_dirichlet/test/t-l_vec_hurwitz_RUN' failed\n```\n\n\nSee also the attached log.",
    "created_at": "2017-12-30T01:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337781",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

With 2.12.0, i still have one test failure on 32bit system:


```
l_vec_hurwitz....
 L value differ
L(1/2, 1) single = (0 + 0j)  +/-  (0, 0j)
L(1/2, 1) multi = (-0.30909754859579756426 + 0j)  +/-  (2.54e-23, 0j)

(-0.3090975486 + 0j)  +/-  (2.54e-23, 0j)
(0.7888523833 - 0.1836680212j)  +/-  (2.02e-23, 1.54e-23j)
(0.4432168971 - 0.236477911j)  +/-  (1.99e-23, 1.32e-23j)
(1.648021942 + 0.03777565741j)  +/-  (1.55e-23, 8.22e-24j)
(0.6185977148 + 0.146695673j)  +/-  (2.08e-23, 1.32e-23j)
(0.5039871966 - 0.8215955013j)  +/-  (2.02e-23, 1.71e-23j)
(0.750432146 + 0j)  +/-  (2.54e-23, 0j)
(0.5039871966 + 0.8215955013j)  +/-  (2.02e-23, 1.71e-23j)
(0.6185977148 - 0.146695673j)  +/-  (2.08e-23, 1.32e-23j)
(1.648021942 - 0.03777565741j)  +/-  (1.55e-23, 8.22e-24j)
(0.4432168971 + 0.236477911j)  +/-  (1.99e-23, 1.32e-23j)
(0.7888523833 + 0.1836680212j)  +/-  (2.02e-23, 1.54e-23j)


../Makefile.subdirs:84: recipe for target '../build/acb_dirichlet/test/t-l_vec_hurwitz_RUN' failed
```


See also the attached log.



---

archive/issue_comments_337782.json:
```json
{
    "body": "Attachment [arb-2.12.0.p0.log](tarball://root/attachments/some-uuid/ticket24369/arb-2.12.0.p0.log) by @dimpase created at 2018-01-20 12:13:30\n\nwhile I can confirm that this is reproducible on a \"real\" x86 (arando buildbot)\n\n```\n[arb-2.12.0.p0] l_vec_hurwitz....\n[arb-2.12.0.p0]  L value differ\n[arb-2.12.0.p0] L(1/2, 1) single = (0 + 0j)  +/-  (0, 0j)\n[arb-2.12.0.p0] L(1/2, 1) multi = (-0.30909754859579756426 + 0j)  +/-  (2.54e-23, 0j)\n[arb-2.12.0.p0]\n[arb-2.12.0.p0] (-0.3090975486 + 0j)  +/-  (2.54e-23, 0j)\n[arb-2.12.0.p0] (0.7888523833 - 0.1836680212j)  +/-  (2.02e-23, 1.54e-23j)\n[arb-2.12.0.p0] (0.4432168971 - 0.236477911j)  +/-  (1.99e-23, 1.32e-23j)\n[arb-2.12.0.p0] (1.648021942 + 0.03777565741j)  +/-  (1.55e-23, 8.22e-24j)\n[arb-2.12.0.p0] (0.6185977148 + 0.146695673j)  +/-  (2.08e-23, 1.32e-23j)\n[arb-2.12.0.p0] (0.5039871966 - 0.8215955013j)  +/-  (2.02e-23, 1.71e-23j)\n[arb-2.12.0.p0] (0.750432146 + 0j)  +/-  (2.54e-23, 0j)\n[arb-2.12.0.p0] (0.5039871966 + 0.8215955013j)  +/-  (2.02e-23, 1.71e-23j)\n[arb-2.12.0.p0] (0.6185977148 - 0.146695673j)  +/-  (2.08e-23, 1.32e-23j)\n[arb-2.12.0.p0] (1.648021942 - 0.03777565741j)  +/-  (1.55e-23, 8.22e-24j)\n[arb-2.12.0.p0] (0.4432168971 + 0.236477911j)  +/-  (1.99e-23, 1.32e-23j)\n[arb-2.12.0.p0] (0.7888523833 + 0.1836680212j)  +/-  (2.02e-23, 1.54e-23j)\n[arb-2.12.0.p0]\n[arb-2.12.0.p0]\n[arb-2.12.0.p0] make[3]: *** [../build/acb_dirichlet/test/t-l_vec_hurwitz_RUN] Aborted (core dumped)\n```\n\nI still insist that we should upgrade, as the previous version also does not pass all the self-tests, albeit on a different (and much more popular) platform, x86_64 (if it is skylake- it seems to work OK on nechalem).\n\nSee the attached log.",
    "created_at": "2018-01-20T12:13:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337782",
    "user": "https://github.com/dimpase"
}
```

Attachment [arb-2.12.0.p0.log](tarball://root/attachments/some-uuid/ticket24369/arb-2.12.0.p0.log) by @dimpase created at 2018-01-20 12:13:30

while I can confirm that this is reproducible on a "real" x86 (arando buildbot)

```
[arb-2.12.0.p0] l_vec_hurwitz....
[arb-2.12.0.p0]  L value differ
[arb-2.12.0.p0] L(1/2, 1) single = (0 + 0j)  +/-  (0, 0j)
[arb-2.12.0.p0] L(1/2, 1) multi = (-0.30909754859579756426 + 0j)  +/-  (2.54e-23, 0j)
[arb-2.12.0.p0]
[arb-2.12.0.p0] (-0.3090975486 + 0j)  +/-  (2.54e-23, 0j)
[arb-2.12.0.p0] (0.7888523833 - 0.1836680212j)  +/-  (2.02e-23, 1.54e-23j)
[arb-2.12.0.p0] (0.4432168971 - 0.236477911j)  +/-  (1.99e-23, 1.32e-23j)
[arb-2.12.0.p0] (1.648021942 + 0.03777565741j)  +/-  (1.55e-23, 8.22e-24j)
[arb-2.12.0.p0] (0.6185977148 + 0.146695673j)  +/-  (2.08e-23, 1.32e-23j)
[arb-2.12.0.p0] (0.5039871966 - 0.8215955013j)  +/-  (2.02e-23, 1.71e-23j)
[arb-2.12.0.p0] (0.750432146 + 0j)  +/-  (2.54e-23, 0j)
[arb-2.12.0.p0] (0.5039871966 + 0.8215955013j)  +/-  (2.02e-23, 1.71e-23j)
[arb-2.12.0.p0] (0.6185977148 - 0.146695673j)  +/-  (2.08e-23, 1.32e-23j)
[arb-2.12.0.p0] (1.648021942 - 0.03777565741j)  +/-  (1.55e-23, 8.22e-24j)
[arb-2.12.0.p0] (0.4432168971 + 0.236477911j)  +/-  (1.99e-23, 1.32e-23j)
[arb-2.12.0.p0] (0.7888523833 + 0.1836680212j)  +/-  (2.02e-23, 1.54e-23j)
[arb-2.12.0.p0]
[arb-2.12.0.p0]
[arb-2.12.0.p0] make[3]: *** [../build/acb_dirichlet/test/t-l_vec_hurwitz_RUN] Aborted (core dumped)
```

I still insist that we should upgrade, as the previous version also does not pass all the self-tests, albeit on a different (and much more popular) platform, x86_64 (if it is skylake- it seems to work OK on nechalem).

See the attached log.



---

archive/issue_comments_337783.json:
```json
{
    "body": "Attachment [arb-2.11.1.p0.2.log](tarball://root/attachments/some-uuid/ticket24369/arb-2.11.1.p0.2.log) by @dimpase created at 2018-01-20 12:17:03\n\nfailure on skylake",
    "created_at": "2018-01-20T12:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337783",
    "user": "https://github.com/dimpase"
}
```

Attachment [arb-2.11.1.p0.2.log](tarball://root/attachments/some-uuid/ticket24369/arb-2.11.1.p0.2.log) by @dimpase created at 2018-01-20 12:17:03

failure on skylake



---

archive/issue_comments_337784.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-01-20T12:19:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337784",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_337785.json:
```json
{
    "body": "Just to make sure, your commit remove the whole of `src/sage/rings/complex_arb.pyx` but not the corresponding `pxd` file? are you sure?",
    "created_at": "2018-01-23T02:01:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337785",
    "user": "https://github.com/kiwifb"
}
```

Just to make sure, your commit remove the whole of `src/sage/rings/complex_arb.pyx` but not the corresponding `pxd` file? are you sure?



---

archive/issue_comments_337786.json:
```json
{
    "body": "Replying to [comment:10 fbissey]:\n> Just to make sure, your commit remove the whole of `src/sage/rings/complex_arb.pyx` but not the corresponding `pxd` file? are you sure?\n\nthis is a trac git viewer bug. If you look at the commit in comment 4, it would make sense.",
    "created_at": "2018-01-23T08:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337786",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:10 fbissey]:
> Just to make sure, your commit remove the whole of `src/sage/rings/complex_arb.pyx` but not the corresponding `pxd` file? are you sure?

this is a trac git viewer bug. If you look at the commit in comment 4, it would make sense.



---

archive/issue_comments_337787.json:
```json
{
    "body": "Replying to [comment:11 dimpase]:\n> Replying to [comment:10 fbissey]:\n> > Just to make sure, your commit remove the whole of `src/sage/rings/complex_arb.pyx` but not the corresponding `pxd` file? are you sure?\n> \n> this is a trac git viewer bug. If you look at the commit in comment 4, it would make sense.\n\nNope, commit in comment 4 looks just the same.",
    "created_at": "2018-01-23T08:27:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337787",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:11 dimpase]:
> Replying to [comment:10 fbissey]:
> > Just to make sure, your commit remove the whole of `src/sage/rings/complex_arb.pyx` but not the corresponding `pxd` file? are you sure?
> 
> this is a trac git viewer bug. If you look at the commit in comment 4, it would make sense.

Nope, commit in comment 4 looks just the same.



---

archive/issue_comments_337788.json:
```json
{
    "body": "Huh?\nhttps://git.sagemath.org/sage.git/commit?id=c79313811851584c5b6732ea12da8b40d04b0377\n\n(it could be it is different for you). To be sure, use git, \nor look here:\nhttps://github.com/sagemath/sagetrac-mirror/compare/u/dimpase/arb212",
    "created_at": "2018-01-23T09:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337788",
    "user": "https://github.com/dimpase"
}
```

Huh?
https://git.sagemath.org/sage.git/commit?id=c79313811851584c5b6732ea12da8b40d04b0377

(it could be it is different for you). To be sure, use git, 
or look here:
https://github.com/sagemath/sagetrac-mirror/compare/u/dimpase/arb212



---

archive/issue_comments_337789.json:
```json
{
    "body": "This is how it looks to me:\n\n```\n\nauthor\tDima Pasechnik <dimpase@gmail.com>\t2017-12-11 23:58:06 +0000\ncommitter\tDima Pasechnik <dimpase@gmail.com>\t2017-12-11 23:58:06 +0000\ncommit\tc79313811851584c5b6732ea12da8b40d04b0377 (patch)\ntree\t94c8774bc96b6b9e5386f9e5502ee60db3de0eb2\nparent\tUpdated SageMath version to 8.1 (diff)\nupdate arb to 2.12.0, doctest fixes, and #24369u/dimpase/arb212\nDiffstat\n-rw-r--r--\tbuild/pkgs/arb/checksums.ini\t6\t\n-rw-r--r--\tbuild/pkgs/arb/package-version.txt\t2\t\n-rw-r--r--\tsrc/sage/rings/complex_arb.pyx\t14\t\n-rw-r--r--\tsrc/sage/rings/real_arb.pyx\t4\t\n4 files changed, 13 insertions, 13 deletions\ndiff --git a/build/pkgs/arb/checksums.ini b/build/pkgs/arb/checksums.ini\nindex 78909d5..1924ee0 100644\n--- a/build/pkgs/arb/checksums.ini\n+++ b/build/pkgs/arb/checksums.ini\n@@ -1,4 +1,4 @@\n tarball=arb-VERSION.tar.gz\n-sha1=2f06bfb433cdaecde0e824c5e638094fd666a0d1\n-md5=d63cdd1147104790826c93bc8651104f\n-cksum=2745482665\n+sha1=27476d0529e48a07d92da90bd0fb80dd18f443e3\n+md5=733285d9705d10b8024e551ffa81952f\n+cksum=2391183744\ndiff --git a/build/pkgs/arb/package-version.txt b/build/pkgs/arb/package-version.txt\nindex 99993ff..c8810e9 100644\n--- a/build/pkgs/arb/package-version.txt\n+++ b/build/pkgs/arb/package-version.txt\n@@ -1 +1 @@\n-2.11.1.p0\n+2.12.0.p0\ndiff --git a/src/sage/rings/complex_arb.pyx b/src/sage/rings/complex_arb.pyx\nindex ee048fb..71fad24 100644\n--- a/src/sage/rings/complex_arb.pyx\n+++ b/src/sage/rings/complex_arb.pyx\n@@ -2603,7 +2603,7 @@ cdef class ComplexBall(RingElement):\n         EXAMPLES::\n \n             sage: CBF(0, -1).agm1()\n-            [0.5990701173678 +/- 1.15e-14] + [-0.5990701173678 +/- 1.19e-14]*I\n+            [0.599070117367796 +/- 3.9...e-16] + [-0.599070117367796 +/- 5.5...e-16]*I\n         \"\"\"\n         cdef ComplexBall res = self._new()\n         if _do_sig(prec(self)): sig_on()\n@@ -3318,9 +3318,9 @@ cdef class ComplexBall(RingElement):\n              [0.002473055794309 +/- 5.01e-16] + [0.003859554040267 +/- 4.45e-16]*I,\n              [-0.01299087561709 +/- 4.72e-15] + [0.00725027521915 +/- 4.32e-15]*I]\n             sage: (z + 3 + 4*tau).elliptic_p(tau, 3)\n-            [[-3.2892099677271 +/- 2.29e-14] + [-0.00036737673029 +/- 8.58e-15]*I,\n-             [0.002473055794 +/- 6.59e-13] + [0.003859554040 +/- 6.17e-13]*I,\n-             [-0.0129908756 +/- 3.39e-11] + [0.0072502752 +/- 3.60e-11]*I]\n+            [[-3.28920996772709 +/- 8.4...e-15] + [-0.00036737673029 +/- 4.1...e-15]*I,\n+             [0.0024730557943 +/- 6.6...e-14] + [0.0038595540403 +/- 8.8...e-14]*I,\n+             [-0.01299087562 +/- 5.6...e-12] + [0.00725027522 +/- 3.5...e-12]*I]\n \n         \"\"\"\n         cdef ComplexBall my_tau = self._parent.coerce(tau)\n@@ -3356,7 +3356,7 @@ cdef class ComplexBall(RingElement):\n         EXAMPLES::\n \n             sage: CBF(2,3).elliptic_k()\n-            [1.0429132919285 +/- 3.65e-14] + [0.6296824723086 +/- 6.15e-14]*I\n+            [1.04291329192852 +/- 5.9...e-15] + [0.62968247230864 +/- 3.4...e-15]*I\n \n         \"\"\"\n         cdef ComplexBall result = self._new()\n@@ -3373,7 +3373,7 @@ cdef class ComplexBall(RingElement):\n         EXAMPLES::\n \n             sage: CBF(2,3).elliptic_e()\n-            [1.472797144959 +/- 4.82e-13] + [-1.231604783936 +/- 1.25e-13]*I\n+            [1.472797144959 +/- 4.5...e-13] + [-1.231604783936 +/- 9.5...e-14]*I\n \n         \"\"\"\n         cdef ComplexBall result = self._new()\n@@ -3520,7 +3520,7 @@ cdef class ComplexBall(RingElement):\n         EXAMPLES::\n \n             sage: CBF(1/2).legendre_P(5)\n-            0.08984375000000000\n+            [0.08984375000000000 +/- 4.5...e-18]\n             sage: CBF(1,2).legendre_P(CBF(2,3), CBF(0,1))\n             [0.10996180744364 +/- 7.45e-15] + [0.14312767804055 +/- 8.38e-15]*I\n             sage: CBF(-10).legendre_P(5, 325/100)\ndiff --git a/src/sage/rings/real_arb.pyx b/src/sage/rings/real_arb.pyx\nindex aa12ae0..9aad425 100644\n--- a/src/sage/rings/real_arb.pyx\n+++ b/src/sage/rings/real_arb.pyx\n@@ -3451,7 +3451,7 @@ cdef class RealBall(RingElement):\n             sage: RBF(1/2).polylog(1)\n             [0.6931471805599 +/- 5.02e-14]\n             sage: RBF(1/3).polylog(1/2)\n-            [0.44210883528067 +/- 6.75e-15]\n+            [0.44210883528067 +/- 6.7...e-15]\n             sage: RBF(1/3).polylog(RLF(pi))\n             [0.34728895057225 +/- 5.51e-15]\n \n@@ -3551,7 +3551,7 @@ cdef class RealBall(RingElement):\n             sage: RBF(1).agm(1)\n             1.000000000000000\n             sage: RBF(sqrt(2)).agm(1)^(-1)\n-            [0.83462684167407 +/- 4.31e-15]\n+            [0.83462684167407 +/- 3.9...e-15]\n         \"\"\"\n         cdef RealBall other_as_ball\n         cdef RealBall res = self._new()\n```\n",
    "created_at": "2018-01-23T09:12:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337789",
    "user": "https://github.com/dimpase"
}
```

This is how it looks to me:

```

author	Dima Pasechnik <dimpase@gmail.com>	2017-12-11 23:58:06 +0000
committer	Dima Pasechnik <dimpase@gmail.com>	2017-12-11 23:58:06 +0000
commit	c79313811851584c5b6732ea12da8b40d04b0377 (patch)
tree	94c8774bc96b6b9e5386f9e5502ee60db3de0eb2
parent	Updated SageMath version to 8.1 (diff)
update arb to 2.12.0, doctest fixes, and #24369u/dimpase/arb212
Diffstat
-rw-r--r--	build/pkgs/arb/checksums.ini	6	
-rw-r--r--	build/pkgs/arb/package-version.txt	2	
-rw-r--r--	src/sage/rings/complex_arb.pyx	14	
-rw-r--r--	src/sage/rings/real_arb.pyx	4	
4 files changed, 13 insertions, 13 deletions
diff --git a/build/pkgs/arb/checksums.ini b/build/pkgs/arb/checksums.ini
index 78909d5..1924ee0 100644
--- a/build/pkgs/arb/checksums.ini
+++ b/build/pkgs/arb/checksums.ini
@@ -1,4 +1,4 @@
 tarball=arb-VERSION.tar.gz
-sha1=2f06bfb433cdaecde0e824c5e638094fd666a0d1
-md5=d63cdd1147104790826c93bc8651104f
-cksum=2745482665
+sha1=27476d0529e48a07d92da90bd0fb80dd18f443e3
+md5=733285d9705d10b8024e551ffa81952f
+cksum=2391183744
diff --git a/build/pkgs/arb/package-version.txt b/build/pkgs/arb/package-version.txt
index 99993ff..c8810e9 100644
--- a/build/pkgs/arb/package-version.txt
+++ b/build/pkgs/arb/package-version.txt
@@ -1 +1 @@
-2.11.1.p0
+2.12.0.p0
diff --git a/src/sage/rings/complex_arb.pyx b/src/sage/rings/complex_arb.pyx
index ee048fb..71fad24 100644
--- a/src/sage/rings/complex_arb.pyx
+++ b/src/sage/rings/complex_arb.pyx
@@ -2603,7 +2603,7 @@ cdef class ComplexBall(RingElement):
         EXAMPLES::
 
             sage: CBF(0, -1).agm1()
-            [0.5990701173678 +/- 1.15e-14] + [-0.5990701173678 +/- 1.19e-14]*I
+            [0.599070117367796 +/- 3.9...e-16] + [-0.599070117367796 +/- 5.5...e-16]*I
         """
         cdef ComplexBall res = self._new()
         if _do_sig(prec(self)): sig_on()
@@ -3318,9 +3318,9 @@ cdef class ComplexBall(RingElement):
              [0.002473055794309 +/- 5.01e-16] + [0.003859554040267 +/- 4.45e-16]*I,
              [-0.01299087561709 +/- 4.72e-15] + [0.00725027521915 +/- 4.32e-15]*I]
             sage: (z + 3 + 4*tau).elliptic_p(tau, 3)
-            [[-3.2892099677271 +/- 2.29e-14] + [-0.00036737673029 +/- 8.58e-15]*I,
-             [0.002473055794 +/- 6.59e-13] + [0.003859554040 +/- 6.17e-13]*I,
-             [-0.0129908756 +/- 3.39e-11] + [0.0072502752 +/- 3.60e-11]*I]
+            [[-3.28920996772709 +/- 8.4...e-15] + [-0.00036737673029 +/- 4.1...e-15]*I,
+             [0.0024730557943 +/- 6.6...e-14] + [0.0038595540403 +/- 8.8...e-14]*I,
+             [-0.01299087562 +/- 5.6...e-12] + [0.00725027522 +/- 3.5...e-12]*I]
 
         """
         cdef ComplexBall my_tau = self._parent.coerce(tau)
@@ -3356,7 +3356,7 @@ cdef class ComplexBall(RingElement):
         EXAMPLES::
 
             sage: CBF(2,3).elliptic_k()
-            [1.0429132919285 +/- 3.65e-14] + [0.6296824723086 +/- 6.15e-14]*I
+            [1.04291329192852 +/- 5.9...e-15] + [0.62968247230864 +/- 3.4...e-15]*I
 
         """
         cdef ComplexBall result = self._new()
@@ -3373,7 +3373,7 @@ cdef class ComplexBall(RingElement):
         EXAMPLES::
 
             sage: CBF(2,3).elliptic_e()
-            [1.472797144959 +/- 4.82e-13] + [-1.231604783936 +/- 1.25e-13]*I
+            [1.472797144959 +/- 4.5...e-13] + [-1.231604783936 +/- 9.5...e-14]*I
 
         """
         cdef ComplexBall result = self._new()
@@ -3520,7 +3520,7 @@ cdef class ComplexBall(RingElement):
         EXAMPLES::
 
             sage: CBF(1/2).legendre_P(5)
-            0.08984375000000000
+            [0.08984375000000000 +/- 4.5...e-18]
             sage: CBF(1,2).legendre_P(CBF(2,3), CBF(0,1))
             [0.10996180744364 +/- 7.45e-15] + [0.14312767804055 +/- 8.38e-15]*I
             sage: CBF(-10).legendre_P(5, 325/100)
diff --git a/src/sage/rings/real_arb.pyx b/src/sage/rings/real_arb.pyx
index aa12ae0..9aad425 100644
--- a/src/sage/rings/real_arb.pyx
+++ b/src/sage/rings/real_arb.pyx
@@ -3451,7 +3451,7 @@ cdef class RealBall(RingElement):
             sage: RBF(1/2).polylog(1)
             [0.6931471805599 +/- 5.02e-14]
             sage: RBF(1/3).polylog(1/2)
-            [0.44210883528067 +/- 6.75e-15]
+            [0.44210883528067 +/- 6.7...e-15]
             sage: RBF(1/3).polylog(RLF(pi))
             [0.34728895057225 +/- 5.51e-15]
 
@@ -3551,7 +3551,7 @@ cdef class RealBall(RingElement):
             sage: RBF(1).agm(1)
             1.000000000000000
             sage: RBF(sqrt(2)).agm(1)^(-1)
-            [0.83462684167407 +/- 4.31e-15]
+            [0.83462684167407 +/- 3.9...e-15]
         """
         cdef RealBall other_as_ball
         cdef RealBall res = self._new()
```




---

archive/issue_comments_337790.json:
```json
{
    "body": "Oh yes that's right. I did something wrong there.",
    "created_at": "2018-01-23T09:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337790",
    "user": "https://github.com/kiwifb"
}
```

Oh yes that's right. I did something wrong there.



---

archive/issue_comments_337791.json:
```json
{
    "body": "I was going to give this a positive review but re-reading things I am getting concerned that the new arb\u015b tests fail systematically on 32bits machine. Is it a correct assertion?",
    "created_at": "2018-02-01T20:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337791",
    "user": "https://github.com/kiwifb"
}
```

I was going to give this a positive review but re-reading things I am getting concerned that the new arbś tests fail systematically on 32bits machine. Is it a correct assertion?



---

archive/issue_comments_337792.json:
```json
{
    "body": "Replying to [comment:16 fbissey]:\n> I was going to give this a positive review but re-reading things I am getting concerned that the new arb\u015b tests fail systematically on 32bits machine. Is it a correct assertion?\n\nYes. I am OK to either open another ticket for the upgrade, or another for the 32bit issue, but in any case, please do not just close that one without opening another ticket, since the issue is not solved (or only partially).",
    "created_at": "2018-02-01T21:14:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337792",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Replying to [comment:16 fbissey]:
> I was going to give this a positive review but re-reading things I am getting concerned that the new arbś tests fail systematically on 32bits machine. Is it a correct assertion?

Yes. I am OK to either open another ticket for the upgrade, or another for the 32bit issue, but in any case, please do not just close that one without opening another ticket, since the issue is not solved (or only partially).



---

archive/issue_comments_337793.json:
```json
{
    "body": "This upgrade is an improvement. Surely the 32-bit issue is not fully solved (the new bug is in new code as far as I can see), but this should go to a followup ticket.",
    "created_at": "2018-02-01T22:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337793",
    "user": "https://github.com/dimpase"
}
```

This upgrade is an improvement. Surely the 32-bit issue is not fully solved (the new bug is in new code as far as I can see), but this should go to a followup ticket.



---

archive/issue_comments_337794.json:
```json
{
    "body": "Yes, the 32-bit bug is almost certainly in new code and should not be a concern for Sage.",
    "created_at": "2018-02-02T09:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337794",
    "user": "https://github.com/fredrik-johansson"
}
```

Yes, the 32-bit bug is almost certainly in new code and should not be a concern for Sage.



---

archive/issue_comments_337795.json:
```json
{
    "body": "The follow-up ticket is here: #24661\n\nLet us finally be done with this one.",
    "created_at": "2018-02-05T17:49:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337795",
    "user": "https://github.com/dimpase"
}
```

The follow-up ticket is here: #24661

Let us finally be done with this one.



---

archive/issue_comments_337796.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-02-07T16:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337796",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_337797.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-02-09T23:48:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337797",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_022553.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2018-02-09T23:48:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/24132#event-22553"
}
```



---

archive/issue_comments_337798.json:
```json
{
    "body": "This ticket has been closed, but as far as I can see, it's not been merged into the develop branch. Is that intentional?\n\nApologies if I'm missing something obvious.\n\n(Edit: I don't know why trac says I deleted the commit.)",
    "created_at": "2018-02-15T23:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337798",
    "user": "https://github.com/Konrad127123"
}
```

This ticket has been closed, but as far as I can see, it's not been merged into the develop branch. Is that intentional?

Apologies if I'm missing something obvious.

(Edit: I don't know why trac says I deleted the commit.)



---

archive/issue_comments_337799.json:
```json
{
    "body": "Replying to [comment:23 Konrad127123]:\n> This ticket has been closed, but as far as I can see, it's not been merged into the develop branch. Is that intentional?\n> \n> Apologies if I'm missing something obvious.\n\nI think it will be in the next beta (it has been merged in a sort of trunk, and this happened later than the latest ticket in the current beta(5))\n\n> \n> (Edit: I don't know why trac says I deleted the commit.)\nthis is just a quirk of the interface.\nIn fact the branch u/dimpase/arb212 is still there if you need it, e.g.\nfrom the mirror:\n\nhttps://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/arb212",
    "created_at": "2018-02-15T23:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337799",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:23 Konrad127123]:
> This ticket has been closed, but as far as I can see, it's not been merged into the develop branch. Is that intentional?
> 
> Apologies if I'm missing something obvious.

I think it will be in the next beta (it has been merged in a sort of trunk, and this happened later than the latest ticket in the current beta(5))

> 
> (Edit: I don't know why trac says I deleted the commit.)
this is just a quirk of the interface.
In fact the branch u/dimpase/arb212 is still there if you need it, e.g.
from the mirror:

https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/arb212



---

archive/issue_comments_337800.json:
```json
{
    "body": "Changing keywords from \"\" to \"sdl\".",
    "created_at": "2019-08-27T19:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24132",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24132#issuecomment-337800",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing keywords from "" to "sdl".
