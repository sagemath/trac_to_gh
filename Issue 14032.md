# Issue 14032: Use "tar", not "cp -pPRL", to copy files in sage-bdist

archive/issues_014032.json:
```json
{
    "body": "Assignee: leif\n\nCC:  jhpalmieri\n\nAfter unpacking a binary built using #6495, the various files doc/en/reference/MODULE/conf.py, which are all supposed to by symlinks to doc/en/reference/conf_sub.py, are copies of that file instead, and the hg repo is not clean. So I'm marking this as a blocker.\n\nIssue created by migration from https://trac.sagemath.org/ticket/14236\n\n",
    "created_at": "2013-03-06T13:15:29Z",
    "labels": [
        "scripts",
        "blocker",
        "bug"
    ],
    "title": "Use \"tar\", not \"cp -pPRL\", to copy files in sage-bdist",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14032",
    "user": "jdemeyer"
}
```
Assignee: leif

CC:  jhpalmieri

After unpacking a binary built using #6495, the various files doc/en/reference/MODULE/conf.py, which are all supposed to by symlinks to doc/en/reference/conf_sub.py, are copies of that file instead, and the hg repo is not clean. So I'm marking this as a blocker.

Issue created by migration from https://trac.sagemath.org/ticket/14236





---

archive/issue_comments_175380.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-03-06T13:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14032#issuecomment-175380",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_175381.json:
```json
{
    "body": "The patch looks okay to me, and it seems to work, although I have a bit more testing to do.\n\nUnrelated to this patch, but related to sage-bdist: running sage-bdist does not produce the link as given by `ln -s local/share \"$SAGE_ROOT/data\"` in `spkg/install`. Can that cause problems?",
    "created_at": "2013-03-06T19:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14032#issuecomment-175381",
    "user": "jhpalmieri"
}
```

The patch looks okay to me, and it seems to work, although I have a bit more testing to do.

Unrelated to this patch, but related to sage-bdist: running sage-bdist does not produce the link as given by `ln -s local/share "$SAGE_ROOT/data"` in `spkg/install`. Can that cause problems?



---

archive/issue_comments_175382.json:
```json
{
    "body": "Replying to [comment:3 jhpalmieri]:\n> Unrelated to this patch, but related to sage-bdist: running sage-bdist does not produce the link as given by `ln -s local/share \"$SAGE_ROOT/data\"` in `spkg/install`. Can that cause problems?\nUnrelated indeed, but that should also be fixed.",
    "created_at": "2013-03-06T20:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14032#issuecomment-175382",
    "user": "jdemeyer"
}
```

Replying to [comment:3 jhpalmieri]:
> Unrelated to this patch, but related to sage-bdist: running sage-bdist does not produce the link as given by `ln -s local/share "$SAGE_ROOT/data"` in `spkg/install`. Can that cause problems?
Unrelated indeed, but that should also be fixed.



---

archive/issue_comments_175383.json:
```json
{
    "body": "Attachment [14236_bdist.patch](tarball://root/attachments/some-uuid/ticket14236/14236_bdist.patch) by jhpalmieri created at 2013-03-06 23:30:55\n\nThis looks good to me. I'll try it out on OpenSolaris just to make sure. By the way, is there a good reason why the symbolic link `data` is not in the root repo?",
    "created_at": "2013-03-06T23:30:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14032#issuecomment-175383",
    "user": "jhpalmieri"
}
```

Attachment [14236_bdist.patch](tarball://root/attachments/some-uuid/ticket14236/14236_bdist.patch) by jhpalmieri created at 2013-03-06 23:30:55

This looks good to me. I'll try it out on OpenSolaris just to make sure. By the way, is there a good reason why the symbolic link `data` is not in the root repo?



---

archive/issue_comments_175384.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-03-07T02:37:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14032#issuecomment-175384",
    "user": "jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_175385.json:
```json
{
    "body": "I also added a check in the release management script that the bdist repositories are clean (i.e. `hg status` shows nothing). This would prevent this problem in the future.",
    "created_at": "2013-03-07T08:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14032#issuecomment-175385",
    "user": "jdemeyer"
}
```

I also added a check in the release management script that the bdist repositories are clean (i.e. `hg status` shows nothing). This would prevent this problem in the future.



---

archive/issue_comments_175386.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-03-07T18:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14032",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14032#issuecomment-175386",
    "user": "jdemeyer"
}
```

Resolution: fixed
