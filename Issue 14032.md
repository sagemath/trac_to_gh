# Issue 14032: Use "tar", not "cp -pPRL", to copy files in sage-bdist

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2013-03-06 13:15:29

Assignee: leif

CC:  jhpalmieri

After unpacking a binary built using #6495, the various files doc/en/reference/MODULE/conf.py, which are all supposed to by symlinks to doc/en/reference/conf_sub.py, are copies of that file instead, and the hg repo is not clean. So I'm marking this as a blocker.


---

Comment by jdemeyer created at 2013-03-06 13:49:19

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2013-03-06 19:32:13

The patch looks okay to me, and it seems to work, although I have a bit more testing to do.

Unrelated to this patch, but related to sage-bdist: running sage-bdist does not produce the link as given by `ln -s local/share "$SAGE_ROOT/data"` in `spkg/install`. Can that cause problems?


---

Comment by jdemeyer created at 2013-03-06 20:44:11

Replying to [comment:3 jhpalmieri]:
> Unrelated to this patch, but related to sage-bdist: running sage-bdist does not produce the link as given by `ln -s local/share "$SAGE_ROOT/data"` in `spkg/install`. Can that cause problems?
Unrelated indeed, but that should also be fixed.


---

Attachment

This looks good to me. I'll try it out on OpenSolaris just to make sure. By the way, is there a good reason why the symbolic link `data` is not in the root repo?


---

Comment by jhpalmieri created at 2013-03-07 02:37:14

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-03-07 08:00:03

I also added a check in the release management script that the bdist repositories are clean (i.e. `hg status` shows nothing). This would prevent this problem in the future.


---

Comment by jdemeyer created at 2013-03-07 18:27:09

Resolution: fixed
