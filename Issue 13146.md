# Issue 13146: Notebook require_login=False requires password

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2012-08-01 02:32:46

Assignee: jason, mpatel, was

CC:  chapoton

Starting with sage-5.2, the `require_login=False` option doesn't work any more: It requires you to set an admin password, on the console, before starting the notebook. This is very inconvenient for any kind of "one-click start notebook" packaging. It should not ask for any password, thats the whole point of not requiring login.

```

[vbraun`@`laptop ~]$ sage -notebook require_login=False
----------------------------------------------------------------------
----------------------------------------------------------------------
| Sage Version 5.2, Release Date: 2012-07-25                         |
| Type "notebook()" for the browser-based notebook interface.        |
| Type "help()" for help.                                            |
Please wait while the Sage Notebook server starts...
...
notebook(require_login=False)
The notebook files are stored in: sage_notebook.sagenb



Please choose a new password for the Sage Notebook 'admin' user.
Do _not_ choose a stupid password, since anybody who could guess your password
and connect to your machine could access or delete your files.
NOTE: Only the hash of the password you type is stored by Sage.
You can change your password by typing notebook(reset=True).
```

Obviously you need to erase `$DOT_SAGE/sage_notebook.sagenb/users.pickle` to reproduce this.


---

Comment by vbraun created at 2012-08-01 02:40:09

I had the following code in the sage virtual appliance build script:

```
    from sage.misc.misc import DOT_SAGE
    directory = DOT_SAGE+'sage_notebook'
    nb = sagenb.notebook.notebook.load_notebook(directory)
    nb.add_user('admin', 'sage', '', force=True)
    nb.save()
    quit
```

This doesn't work any more since `add_user` was removed in sage-5.2.


---

Comment by vbraun created at 2012-08-01 02:43:54


```
    nb.user_manager().add_user('admin', 'sage', '', force=True)
```

seems to do the trick now.


---

Comment by vbraun created at 2012-08-01 15:47:11

Ok now the VM doesn't ask for the admin password upon startup, but it still requires a login. With the new sagenb is there any way to directly start to the admin notebook list, skipping the login screen?


---

Comment by vbraun created at 2012-08-03 14:02:43

Changing priority from major to blocker.


---

Comment by vbraun created at 2012-08-03 14:02:43

I think this warrants a blocker, since its a big usability issue for novices.


---

Comment by jason created at 2012-08-25 12:42:20

I just tried  `sage -notebook require_login=False` on a stock 5.2 and it seems to work just fine (pops up the user's worksheet listing, with no login or anything.

I also tried moving my .sage folder to start everything fresh.  I copied your lines above to make an account, then started up with `sage -notebook require_login=False` and things worked perfectly---the worksheet listing page popped up with no intervention.


---

Comment by vbraun created at 2012-08-25 12:56:04

Some more information: When you just run `sage -notebook` you are logged in with a token as password since Sage spawns the browser. So you actually do log in, its just automatically behind the scenes. This is not an option for the virtual machine, you can't start a host browser from within the VM. The following does not work:

```
sage -notebook interface=\'\' port=8002 open_viewer=False require_login=False
```

When you manually open http://localhost:8002 you are greeted with a login screen.


---

Comment by jdemeyer created at 2012-08-28 09:30:22

Any ideas for this ticket?  I'm not opposed to having this truly a sage-5.3 blocker, but only if somebody has ideas on how to fix it.


---

Comment by jdemeyer created at 2012-09-03 14:06:35

Changing priority from blocker to critical.


---

Comment by vbraun created at 2012-09-10 15:02:07

Still doesn't work in Sage-5.3

Sage-5.4.beta0 removes the `require_login` keyword without offering a replacement. The new `automatic_login` option only starts a web browser with a special URL so its useless inside the VM.


---

Comment by jason created at 2012-11-21 17:33:47

Yes, it does seem that I missed a use-case in combining the open_viewer and require_login keywords.  I think it does make sense to put back the require_login keyword.


---

Comment by ppurka created at 2013-02-21 04:54:51

Any update on this?


---

Comment by kcrisman created at 2014-09-18 02:50:25

> Any update on this?
+1

Volker, what is the current workaround on the VM for this?


---

Comment by vbraun created at 2014-09-21 17:26:47

There is no workaround. The browser inside the VM is started with a magic url that avoids the password. If you connect with the host browser, you need to login (username: admin, pass: sage)


---

Comment by mkoeppe created at 2020-08-18 00:36:52

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-08-18 00:36:52

Proposing to close all sagenb tickets as outdated, so that all remaining open tickets in the notebook component are about the Jupyter notebook.


---

Comment by chapoton created at 2020-08-19 08:53:32

Resolution: invalid
