# Issue 15943: Subdivide fans using PPL

archive/issues_015943.json:
```json
{
    "body": "CC:  @vbraun jkeitel\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/16180\n\n",
    "created_at": "2014-04-17T20:13:12Z",
    "labels": [
        "component: please change"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.3",
    "title": "Subdivide fans using PPL",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15943",
    "user": "https://github.com/novoselt"
}
```
CC:  @vbraun jkeitel



Issue created by migration from https://trac.sagemath.org/ticket/16180





---

archive/issue_comments_206700.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-22T22:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15943#issuecomment-206700",
    "user": "https://github.com/novoselt"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_206701.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-04-22T22:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15943#issuecomment-206701",
    "user": "https://github.com/novoselt"
}
```

New commits:



---

archive/issue_comments_206702.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2014-04-22T22:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15943#issuecomment-206702",
    "user": "https://github.com/novoselt"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_206703.json:
```json
{
    "body": "Changing keywords from \"\" to \"toric\".",
    "created_at": "2014-04-22T22:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15943#issuecomment-206703",
    "user": "https://github.com/novoselt"
}
```

Changing keywords from "" to "toric".



---

archive/issue_comments_206704.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to geometry.",
    "created_at": "2014-04-22T22:21:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15943#issuecomment-206704",
    "user": "https://github.com/novoselt"
}
```

Changing component from PLEASE CHANGE to geometry.



---

archive/issue_comments_206705.json:
```json
{
    "body": "Hi Andrey,\n\nI've looked at the patch at it looks good - it's always nice to get rid of `LatticePolytope`. ;-)\nOne quick question: Is there any reason you're not caching the `polyhedron()` method of `Cone`?\n----\nNew commits:",
    "created_at": "2014-07-24T13:25:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15943#issuecomment-206705",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

Hi Andrey,

I've looked at the patch at it looks good - it's always nice to get rid of `LatticePolytope`. ;-)
One quick question: Is there any reason you're not caching the `polyhedron()` method of `Cone`?
----
New commits:



---

archive/issue_comments_206706.json:
```json
{
    "body": "Well don't hate it please, there is nothing wrong with the class, only with its backend which was designed for a quite specific purpose ;-) And of course bounded polytopes are not the best way to represent unbounded cones.\n\nAs for caching - why should we cache `polyhedron()`? It is a complicated data structure which will take memory and can cause issues in pickling (this was the main reason for the change here, if I recall correctly - I was trying to simplify pickling code), it is not used extensively in internal computations, and I don't think there are many reasons for users to construct them. On the other hand it definitely can be handy if you want to do some generic operations like shifting the cone from the origin.\n\nWere there any conflicts during merge? (I never liked what is shown when you click on \"merge commit.\")",
    "created_at": "2014-07-24T15:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15943#issuecomment-206706",
    "user": "https://github.com/novoselt"
}
```

Well don't hate it please, there is nothing wrong with the class, only with its backend which was designed for a quite specific purpose ;-) And of course bounded polytopes are not the best way to represent unbounded cones.

As for caching - why should we cache `polyhedron()`? It is a complicated data structure which will take memory and can cause issues in pickling (this was the main reason for the change here, if I recall correctly - I was trying to simplify pickling code), it is not used extensively in internal computations, and I don't think there are many reasons for users to construct them. On the other hand it definitely can be handy if you want to do some generic operations like shifting the cone from the origin.

Were there any conflicts during merge? (I never liked what is shown when you click on "merge commit.")



---

archive/issue_comments_206707.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-07-24T15:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15943#issuecomment-206707",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_206708.json:
```json
{
    "body": "No, the merge went through cleanly. I just merged the development branch in to see whether it is working with the current version. Otherwise I wouldn't have noticed the doctest warning because of the line number, since that has only recently been included (#16626). And I then based the new commit on the merged branch since it saved a lot of time when building Sage. I hope Volker will forgive the extra commit.\n\nI just noticed that `polytope()` only seems to get used in the doctests - so not caching does make perfect sense. If you're happy, then you can set this to positive review.",
    "created_at": "2014-07-24T15:51:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15943#issuecomment-206708",
    "user": "https://trac.sagemath.org/admin/accounts/users/jkeitel"
}
```

No, the merge went through cleanly. I just merged the development branch in to see whether it is working with the current version. Otherwise I wouldn't have noticed the doctest warning because of the line number, since that has only recently been included (#16626). And I then based the new commit on the merged branch since it saved a lot of time when building Sage. I hope Volker will forgive the extra commit.

I just noticed that `polytope()` only seems to get used in the doctests - so not caching does make perfect sense. If you're happy, then you can set this to positive review.



---

archive/issue_comments_206709.json:
```json
{
    "body": "Thanks, lgtm!",
    "created_at": "2014-07-24T15:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15943#issuecomment-206709",
    "user": "https://github.com/vbraun"
}
```

Thanks, lgtm!



---

archive/issue_comments_206710.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-07-24T15:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15943#issuecomment-206710",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_206711.json:
```json
{
    "body": "Thank you! Looking at your changes made me realize that toric stuff existed for 4 years already! Life is fast...",
    "created_at": "2014-07-24T15:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15943#issuecomment-206711",
    "user": "https://github.com/novoselt"
}
```

Thank you! Looking at your changes made me realize that toric stuff existed for 4 years already! Life is fast...



---

archive/issue_comments_206712.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-07-25T05:05:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15943#issuecomment-206712",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
