# Issue 13023: import shutil in sage-ptest

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2012-07-02 20:45:57

Assignee: leif

The following can happen when running `sage -tp [...]`:

```
Traceback (most recent call last):
  File "/SSD1/sage-5.1.rc0/local/bin/sage-ptest", line 396, in <module>
    shutil.rmtree(TMP)
NameError: name 'shutil' is not defined
```



---

Attachment


---

Comment by jdemeyer created at 2012-07-02 20:48:50

Changing status from new to needs_review.


---

Comment by vbraun created at 2012-07-02 21:02:38

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2012-07-02 21:02:38

I've never seen that error but its better to import it if we use it, of course ;-)


---

Comment by jhpalmieri created at 2012-07-02 21:33:37

For what it's worth, I tested it by adding a line:

```diff
diff --git a/sage-ptest b/sage-ptest
--- a/sage-ptest
+++ b/sage-ptest
`@``@` -388,6 +388,7 `@``@` for gr in range(0,numglobaliteration):
     # Should TMP be a subdirectory of tempfile.gettempdir() rather than SAGE_TE
     TMP = os.path.join(SAGE_TESTDIR, '%s-%s' % (HOSTNAME, os.getpid()))
     TMP = os.path.abspath(TMP)
+    os.makedirs(TMP)
     try:
         os.makedirs(TMP)
     except OSError:
```

Naturally, this resulted in an error before the patch, success after the patch.


---

Comment by jdemeyer created at 2012-07-05 20:09:58

Resolution: fixed
