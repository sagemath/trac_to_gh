# Issue 30718: Change remaining SPKG.txt to SPKG.rst

Issue created by migration from https://trac.sagemath.org/ticket/30955

Original creator: mkoeppe

Original creation time: 2020-11-24 00:04:29

CC:  jhpalmieri slabbe etn40ff




---

Comment by mkoeppe created at 2020-11-24 18:31:46

In #29633, this was done using

```
for f in build/pkgs/*/SPKG.txt; do pandoc --from=mediawiki --to=rst $f --output=$(dirname $f)/SPKG.rst; git rm -f $f; git add $(dirname $f)/SPKG.rst; done'
```

with some manual editing afterwards


---

Comment by mkoeppe created at 2020-11-25 00:28:12

New commits:


---

Comment by git created at 2020-11-25 00:36:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-11-25 00:37:38

Changing status from new to needs_review.


---

Comment by slabbe created at 2020-11-25 10:16:23

Green bot on top of 9.3.beta2.

I think we should do the same with the README of sage which at some point in time was translated from rst syntax to markdown so that it looks nice on github.com (the good solution at the time was to rename the file README.txt to README.rst, but I arrived to late on the ticket).


---

Comment by slabbe created at 2020-11-25 10:16:23

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-11-26 03:59:48

Thanks!


---

Comment by fbissey created at 2020-12-08 02:54:35

Cannot build the doc in sage-on-gentoo

```
[spkg     ] /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/doc/en/reference/spkg/pycparser.rst:18: WARNING: duplicate label upstream_contact, other instance in /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/doc/en/reference/spkg/libxml2.rst
[spkg     ] The inventory files are in ../../build_doc/inventory/en/reference/spkg.
Error building the documentation.
Traceback (most recent call last):
  File "sage_setup/docbuild/__main__.py", line 2, in <module>
    main()
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py", line 1730, in main
    builder()
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py", line 343, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py", line 569, in _wrapper
    self._build_everything_except_bibliography(lang, format, *args, **kwds)
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py", line 555, in _build_everything_except_bibliography
    build_many(build_ref_doc, non_references)
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py", line 295, in build_many
    _build_many(target, args, processes=NUM_THREADS)
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/utils.py", line 289, in build_many
    raise worker_exc.original_exception
OSError: /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/doc/en/reference/spkg/libnauty.rst:33: WARNING: duplicate label upstream_contact, other instance in /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/doc/en/reference/spkg/cffi.rst
```

There are multiple instances of `upstream_contact` being `Upstream Contact` and that seem to throw sphinx off, at least here.


---

Comment by mkoeppe created at 2020-12-08 04:38:59

Changing status from positive_review to needs_work.


---

Comment by mkoeppe created at 2020-12-10 01:05:57

Changing keywords from "" to "sd111".


---

Comment by git created at 2020-12-29 04:43:30

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2020-12-29 04:43:57

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2021-01-01 14:22:10

ok, let us try again


---

Comment by chapoton created at 2021-01-01 14:22:10

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-01-01 17:28:44

Thanks.


---

Comment by vbraun created at 2021-01-04 22:36:56

Resolution: fixed
