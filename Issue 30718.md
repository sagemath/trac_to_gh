# Issue 30718: Change remaining SPKG.txt to SPKG.rst

archive/issues_030718.json:
```json
{
    "body": "CC:  jhpalmieri slabbe etn40ff\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30955\n\n",
    "created_at": "2020-11-24T00:04:29Z",
    "labels": [
        "documentation",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Change remaining SPKG.txt to SPKG.rst",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30718",
    "user": "mkoeppe"
}
```
CC:  jhpalmieri slabbe etn40ff



Issue created by migration from https://trac.sagemath.org/ticket/30955





---

archive/issue_comments_439171.json:
```json
{
    "body": "In #29633, this was done using\n\n```\nfor f in build/pkgs/*/SPKG.txt; do pandoc --from=mediawiki --to=rst $f --output=$(dirname $f)/SPKG.rst; git rm -f $f; git add $(dirname $f)/SPKG.rst; done'\n```\n\nwith some manual editing afterwards",
    "created_at": "2020-11-24T18:31:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439171",
    "user": "mkoeppe"
}
```

In #29633, this was done using

```
for f in build/pkgs/*/SPKG.txt; do pandoc --from=mediawiki --to=rst $f --output=$(dirname $f)/SPKG.rst; git rm -f $f; git add $(dirname $f)/SPKG.rst; done'
```

with some manual editing afterwards



---

archive/issue_comments_439172.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-11-25T00:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439172",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_439173.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-25T00:36:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439173",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_439174.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-25T00:37:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439174",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_439175.json:
```json
{
    "body": "Green bot on top of 9.3.beta2.\n\nI think we should do the same with the README of sage which at some point in time was translated from rst syntax to markdown so that it looks nice on github.com (the good solution at the time was to rename the file README.txt to README.rst, but I arrived to late on the ticket).",
    "created_at": "2020-11-25T10:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439175",
    "user": "slabbe"
}
```

Green bot on top of 9.3.beta2.

I think we should do the same with the README of sage which at some point in time was translated from rst syntax to markdown so that it looks nice on github.com (the good solution at the time was to rename the file README.txt to README.rst, but I arrived to late on the ticket).



---

archive/issue_comments_439176.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-25T10:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439176",
    "user": "slabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_439177.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-11-26T03:59:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439177",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_439178.json:
```json
{
    "body": "Cannot build the doc in sage-on-gentoo\n\n```\n[spkg     ] /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/doc/en/reference/spkg/pycparser.rst:18: WARNING: duplicate label upstream_contact, other instance in /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/doc/en/reference/spkg/libxml2.rst\n[spkg     ] The inventory files are in ../../build_doc/inventory/en/reference/spkg.\nError building the documentation.\nTraceback (most recent call last):\n  File \"sage_setup/docbuild/__main__.py\", line 2, in <module>\n    main()\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py\", line 1730, in main\n    builder()\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py\", line 343, in _wrapper\n    getattr(get_builder(document), 'inventory')(*args, **kwds)\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py\", line 569, in _wrapper\n    self._build_everything_except_bibliography(lang, format, *args, **kwds)\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py\", line 555, in _build_everything_except_bibliography\n    build_many(build_ref_doc, non_references)\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py\", line 295, in build_many\n    _build_many(target, args, processes=NUM_THREADS)\n  File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/utils.py\", line 289, in build_many\n    raise worker_exc.original_exception\nOSError: /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/doc/en/reference/spkg/libnauty.rst:33: WARNING: duplicate label upstream_contact, other instance in /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/doc/en/reference/spkg/cffi.rst\n```\n\nThere are multiple instances of `upstream_contact` being `Upstream Contact` and that seem to throw sphinx off, at least here.",
    "created_at": "2020-12-08T02:54:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439178",
    "user": "fbissey"
}
```

Cannot build the doc in sage-on-gentoo

```
[spkg     ] /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/doc/en/reference/spkg/pycparser.rst:18: WARNING: duplicate label upstream_contact, other instance in /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/doc/en/reference/spkg/libxml2.rst
[spkg     ] The inventory files are in ../../build_doc/inventory/en/reference/spkg.
Error building the documentation.
Traceback (most recent call last):
  File "sage_setup/docbuild/__main__.py", line 2, in <module>
    main()
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py", line 1730, in main
    builder()
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py", line 343, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py", line 569, in _wrapper
    self._build_everything_except_bibliography(lang, format, *args, **kwds)
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py", line 555, in _build_everything_except_bibliography
    build_many(build_ref_doc, non_references)
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/__init__.py", line 295, in build_many
    _build_many(target, args, processes=NUM_THREADS)
  File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/sage_setup/docbuild/utils.py", line 289, in build_many
    raise worker_exc.original_exception
OSError: /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/doc/en/reference/spkg/libnauty.rst:33: WARNING: duplicate label upstream_contact, other instance in /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python3_8/doc/en/reference/spkg/cffi.rst
```

There are multiple instances of `upstream_contact` being `Upstream Contact` and that seem to throw sphinx off, at least here.



---

archive/issue_comments_439179.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-12-08T04:38:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439179",
    "user": "mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_439180.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd111\".",
    "created_at": "2020-12-10T01:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439180",
    "user": "mkoeppe"
}
```

Changing keywords from "" to "sd111".



---

archive/issue_comments_439181.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-12-29T04:43:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439181",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_439182.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-12-29T04:43:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439182",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_439183.json:
```json
{
    "body": "ok, let us try again",
    "created_at": "2021-01-01T14:22:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439183",
    "user": "chapoton"
}
```

ok, let us try again



---

archive/issue_comments_439184.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-01-01T14:22:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439184",
    "user": "chapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_439185.json:
```json
{
    "body": "Thanks.",
    "created_at": "2021-01-01T17:28:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439185",
    "user": "mkoeppe"
}
```

Thanks.



---

archive/issue_comments_439186.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-04T22:36:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-439186",
    "user": "vbraun"
}
```

Resolution: fixed
