# Issue 32273: Update igraph to 0.9.4 and python_igraph to 0.9.6

Issue created by migration from https://trac.sagemath.org/ticket/32510

Original creator: dcoudert

Original creation time: 2021-09-14 09:32:23

CC:  mkoeppe dimpase fbissey slelievre

Released 
- `igraph`, May 2021 https://github.com/igraph/igraph/releases/tag/0.9.4
- `pyhton_igraph`, Jun 2021 https://github.com/igraph/python-igraph/releases/tag/0.9.6

the previous update was in #30899.


---

Comment by dcoudert created at 2021-09-14 09:43:56

I was able to install on fedora 32 but I have compilation errors of igraph on macOS. I will investigate further.
----
New commits:


---

Comment by dcoudert created at 2021-09-14 09:43:56

Changing status from new to needs_review.


---

Comment by dcoudert created at 2021-09-14 11:28:45

at least, it's working well with a homebrew install of igraph 0.9.4.


---

Comment by mkoeppe created at 2021-09-14 21:24:41

This would benefit from a GH Actions run https://doc.sagemath.org/html/en/developer/portability_testing.html#automatic-parallel-tox-runs-on-github-actions


---

Comment by dcoudert created at 2021-09-15 16:55:46

Not sure how to do that...


---

Comment by slelievre created at 2021-09-15 21:18:34

To launch a run of github actions:

- visit https://github.com/sagemath/sage and click "Fork" at the top right
- in a terminal, in your Sage directory, add a remote for your fork:

    `git remote add gh-dcoudert git`@`github.com:dcoudert/sage.git`

- switch to the branch for this ticket
- create a tag: `git tag ci-32510`
- push the tag to your fork: `git push gh-dcoudert ci-32510`

That's it. You can check the results at https://github.com/dcoudert/sage/actions


---

Comment by dcoudert created at 2021-09-16 08:52:51

Thank you for this very clear how-to.

I did it, but so far I don't see any change at https://github.com/dcoudert/sage/actions. I'll check again later.


---

Comment by dcoudert created at 2021-09-17 11:25:42

Actually, I don't see the `ci-32510` tag at https://github.com/dcoudert/sage/actions. I don't know if I did something wrong or if I have something else to do.


---

Comment by slelievre created at 2021-09-17 14:39:46

Did I forget and skip one step?
Hopefully Dima or Matthias can spot which.


---

Comment by mkoeppe created at 2021-09-18 01:20:51

I ran this with a bunch of other upgrade tickets. The igraph update does not seem to work:
https://github.com/mkoeppe/sage/runs/3625053548?check_suite_focus=true

```
Attempting to download from https://github.com/igraph/igraph/releases/download/0.9.4/igraph-0.9.4.tar.gz
[......................................................................]
igraph-0.9.4
====================================================
Setting up build directory for igraph-0.9.4
Finished extraction
No patch files found in ../patches
****************************************************
Host system:
Darwin Mac-1631840975117.local 19.6.0 Darwin Kernel Version 19.6.0: Tue Aug 24 20:28:00 PDT 2021; root:xnu-6153.141.40~1/RELEASE_X86_64 x86_64
****************************************************
C compiler: gcc
C compiler version:
Configured with: --prefix=/Applications/Xcode_12.4.app/Contents/Developer/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX10.15.sdk/usr/include/c++/4.2.1
Apple clang version 12.0.0 (clang-1200.0.32.29)
Target: x86_64-apple-darwin19.6.0
Thread model: posix
InstalledDir: /Applications/Xcode_12.4.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
****************************************************
Package 'igraph' is currently not installed
No legacy uninstaller found for 'igraph'; nothing to do
Configuring igraph-0.9.4
/Users/runner/work/sage/sage/build/bin/sage-dist-helpers: line 179: ./configure: No such file or directory
/Users/runner/work/sage/sage/build/bin/sage-dist-helpers: line 181: ./configure: No such file or directory
********************************************************************************
Error configuring igraph-0.9.4
********************************************************************************
```



---

Comment by mkoeppe created at 2021-09-18 01:20:57

Changing status from needs_review to needs_work.


---

Comment by dcoudert created at 2021-09-18 09:15:49

I see that it runs `make igraph` and not `make python_igraph`. This can explain the issue.


---

Comment by git created at 2021-11-10 01:32:21

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2021-11-10 01:32:47

Changing status from needs_work to needs_review.


---

Comment by git created at 2021-11-10 01:54:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-11-10 02:03:31

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by dcoudert created at 2021-11-10 08:00:35

I assume we must now change `# optional - python_igraph` to `# optional - igraph` in doctests ?


---

Comment by mkoeppe created at 2021-11-10 16:44:12

No, the name of the SPKG (= the tag for `# optional`) has not changed.


---

Comment by dcoudert created at 2021-11-10 17:09:15

I tried on a desktop with fedora 32 and it's working well (install and doctests of the graph module). I just had to remember to use `./configure --enable-download-from-upstream-url` first.

Should we wait for further tests ?


---

Comment by mkoeppe created at 2021-12-18 19:53:12

Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.


---

Comment by git created at 2021-12-23 19:32:53

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:


---

Comment by dcoudert created at 2021-12-30 13:08:55

Works successfully on macOS 10.15.7 with a homebrew version of igraph and on fedora 35, both on top of 9.5.beta9.

Can I set this ticket to positive or do you prefer to wait for more feedback ?


---

Comment by mkoeppe created at 2021-12-30 16:33:44

Thanks for testing! I think this is good to go.


---

Comment by dcoudert created at 2021-12-30 17:23:44

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2021-12-30 17:23:44

LGTM.


---

Comment by mkoeppe created at 2021-12-30 17:24:27

Thanks!


---

Comment by vbraun created at 2022-01-31 23:31:26

Resolution: fixed


---

Comment by mkoeppe created at 2022-03-18 18:40:51

Follow-up in #33526
