# Issue 13957: add a _test_antipode method for Hopf algebras

archive/issues_013957.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  zabrocki\n\nKeywords: hopf algebras\n\nDesired doctests:\n\n```\n                sage: R = NonCommutativeSymmetricFunctions(QQ).ribbon()\n                sage: R._test_antipode()\n\n            ::\n\n                sage: s = SymmetricFunctions(QQ).schur()\n                sage: s._test_antipode()\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/14161\n\n",
    "created_at": "2013-02-22T05:09:34Z",
    "labels": [
        "combinatorics",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.10",
    "title": "add a _test_antipode method for Hopf algebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13957",
    "user": "saliola"
}
```
Assignee: sage-combinat

CC:  zabrocki

Keywords: hopf algebras

Desired doctests:

```
                sage: R = NonCommutativeSymmetricFunctions(QQ).ribbon()
                sage: R._test_antipode()

            ::

                sage: s = SymmetricFunctions(QQ).schur()
                sage: s._test_antipode()
```


Issue created by migration from https://trac.sagemath.org/ticket/14161





---

archive/issue_comments_174194.json:
```json
{
    "body": "Attachment [trac_14161-fs.patch](tarball://root/attachments/some-uuid/ticket14161/trac_14161-fs.patch) by saliola created at 2013-02-22 05:16:58",
    "created_at": "2013-02-22T05:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174194",
    "user": "saliola"
}
```

Attachment [trac_14161-fs.patch](tarball://root/attachments/some-uuid/ticket14161/trac_14161-fs.patch) by saliola created at 2013-02-22 05:16:58



---

archive/issue_comments_174195.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-02-22T05:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174195",
    "user": "saliola"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_174196.json:
```json
{
    "body": "It would also be nice to implement a proper `some_elements` method.",
    "created_at": "2013-02-22T05:28:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174196",
    "user": "saliola"
}
```

It would also be nice to implement a proper `some_elements` method.



---

archive/issue_comments_174197.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2013-02-22T05:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174197",
    "user": "saliola"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_174198.json:
```json
{
    "body": "I don't think that the antipode has to be an involution in general. This is automatic if the Hopf algebra is commutative or cocommutative, but may not hold otherwise.",
    "created_at": "2013-02-22T06:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174198",
    "user": "jhpalmieri"
}
```

I don't think that the antipode has to be an involution in general. This is automatic if the Hopf algebra is commutative or cocommutative, but may not hold otherwise.



---

archive/issue_comments_174199.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-02-22T17:22:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174199",
    "user": "zabrocki"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_174200.json:
```json
{
    "body": "Attachment [trac_14161-fs.2.patch](tarball://root/attachments/some-uuid/ticket14161/trac_14161-fs.2.patch) by saliola created at 2013-02-22 21:12:40\n\nThanks for catching that, John. I deleted the corresponding lines.\n\n(For the record, Mike and I discussed using `is_commutative` and `is_cocommutative`, but neither seems to be reliably implemented. So we won't test it until the appropriate categories are implemented.)",
    "created_at": "2013-02-22T21:12:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174200",
    "user": "saliola"
}
```

Attachment [trac_14161-fs.2.patch](tarball://root/attachments/some-uuid/ticket14161/trac_14161-fs.2.patch) by saliola created at 2013-02-22 21:12:40

Thanks for catching that, John. I deleted the corresponding lines.

(For the record, Mike and I discussed using `is_commutative` and `is_cocommutative`, but neither seems to be reliably implemented. So we won't test it until the appropriate categories are implemented.)



---

archive/issue_comments_174201.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-02-22T21:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174201",
    "user": "saliola"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_174202.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-02-22T21:21:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174202",
    "user": "saliola"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_174203.json:
```json
{
    "body": "Hmm, I am seeing doctest failures in `k_dual` and `new_k_schur`. \n\nI guess these don't have antipodes implemented?\n\nSo, back to needs work.",
    "created_at": "2013-02-22T21:21:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174203",
    "user": "saliola"
}
```

Hmm, I am seeing doctest failures in `k_dual` and `new_k_schur`. 

I guess these don't have antipodes implemented?

So, back to needs work.



---

archive/issue_comments_174204.json:
```json
{
    "body": "The spaces implemented in `k_dual` and `new_k_schur` are not Hopf algebras.  It may be that they are in the wrong category.  They can be made into Hopf algebras but we would worry if this is done un-naturally.",
    "created_at": "2013-02-23T02:01:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174204",
    "user": "zabrocki"
}
```

The spaces implemented in `k_dual` and `new_k_schur` are not Hopf algebras.  It may be that they are in the wrong category.  They can be made into Hopf algebras but we would worry if this is done un-naturally.



---

archive/issue_comments_174205.json:
```json
{
    "body": "Are they bialgebras ?",
    "created_at": "2013-02-23T02:12:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174205",
    "user": "saliola"
}
```

Are they bialgebras ?



---

archive/issue_comments_174206.json:
```json
{
    "body": "if you multiply two k-Schurs together the result may or may not be in the k-Schur space.  If not, then just `.lift()` the result in the `SymmetricFunctions`.  The coproduct is implemented and is k-Schur positive.\n\nThe coproduct of dual k-Schurs is not implemented.  It is a Hopf algebra if you use the usual coproduct, but it is not clear if this is the 'correct' thing to do.  If t=1 then it is probably 'correct' to use the usual coproduct.",
    "created_at": "2013-02-23T03:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174206",
    "user": "zabrocki"
}
```

if you multiply two k-Schurs together the result may or may not be in the k-Schur space.  If not, then just `.lift()` the result in the `SymmetricFunctions`.  The coproduct is implemented and is k-Schur positive.

The coproduct of dual k-Schurs is not implemented.  It is a Hopf algebra if you use the usual coproduct, but it is not clear if this is the 'correct' thing to do.  If t=1 then it is probably 'correct' to use the usual coproduct.



---

archive/issue_comments_174207.json:
```json
{
    "body": "The failure only seems to occur when `t=1`, since the categories seem to be correctly defined for other `t`.\n\nSo the question is whether we should keep this space for `t=1` as a Hopf algebra or put it in the category of bialgebras instead.",
    "created_at": "2013-02-23T15:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174207",
    "user": "saliola"
}
```

The failure only seems to occur when `t=1`, since the categories seem to be correctly defined for other `t`.

So the question is whether we should keep this space for `t=1` as a Hopf algebra or put it in the category of bialgebras instead.



---

archive/issue_comments_174208.json:
```json
{
    "body": "I vote to keep as a Hopf algebra! If you call something a Hopf algebra, do you have to implement the antipode? Isn't \"Not implemented\" acceptable? It's still a Hopf algebra even if it doesn't know how to compute the antipode.\n\nI think the description of this ticket could be a little more informative than just a few doctests. Without reading the code, I'm not exactly sure what this ticket is about.",
    "created_at": "2013-02-23T18:29:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174208",
    "user": "chrisjamesberg"
}
```

I vote to keep as a Hopf algebra! If you call something a Hopf algebra, do you have to implement the antipode? Isn't "Not implemented" acceptable? It's still a Hopf algebra even if it doesn't know how to compute the antipode.

I think the description of this ticket could be a little more informative than just a few doctests. Without reading the code, I'm not exactly sure what this ticket is about.



---

archive/issue_comments_174209.json:
```json
{
    "body": "For `t=1` the antipode should be the usual antipode.",
    "created_at": "2013-02-23T18:51:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174209",
    "user": "zabrocki"
}
```

For `t=1` the antipode should be the usual antipode.



---

archive/issue_comments_174210.json:
```json
{
    "body": "Replying to [comment:15 chrisjamesberg]:\n> I vote to keep as a Hopf algebra! If you call something a Hopf algebra, do you have to implement the antipode? Isn't \"Not implemented\" acceptable? It's still a Hopf algebra even if it doesn't know how to compute the antipode.\n\nI'd like to keep it as a Hopf algebra, too. Especially since we know how to compute the antipode (see Mike's comment). Can you implement it?\n\n> I think the description of this ticket could be a little more informative than just a few doctests. Without reading the code, I'm not exactly sure what this ticket is about.\n\nI thought it was pretty self-explanatory based on the understanding that the purpose of all the `_test_*` methods is to make sure that something isn't obviously wrong with the code by running a few tests. Such a test would/should have caught the bug we found with the antipode of NSym because it failed the defining condition for an antipode.",
    "created_at": "2013-02-24T02:55:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174210",
    "user": "saliola"
}
```

Replying to [comment:15 chrisjamesberg]:
> I vote to keep as a Hopf algebra! If you call something a Hopf algebra, do you have to implement the antipode? Isn't "Not implemented" acceptable? It's still a Hopf algebra even if it doesn't know how to compute the antipode.

I'd like to keep it as a Hopf algebra, too. Especially since we know how to compute the antipode (see Mike's comment). Can you implement it?

> I think the description of this ticket could be a little more informative than just a few doctests. Without reading the code, I'm not exactly sure what this ticket is about.

I thought it was pretty self-explanatory based on the understanding that the purpose of all the `_test_*` methods is to make sure that something isn't obviously wrong with the code by running a few tests. Such a test would/should have caught the bug we found with the antipode of NSym because it failed the defining condition for an antipode.



---

archive/issue_comments_174211.json:
```json
{
    "body": "I opened ticket #14220 where I intend to do a little cleanup of the symmetric function code.  I will put the antipode for the k-bounded quotient in that patch.",
    "created_at": "2013-03-03T20:41:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174211",
    "user": "zabrocki"
}
```

I opened ticket #14220 where I intend to do a little cleanup of the symmetric function code.  I will put the antipode for the k-bounded quotient in that patch.



---

archive/issue_comments_174212.json:
```json
{
    "body": "Thanks, Mike! I'll set it as a dependency for this ticket.",
    "created_at": "2013-03-04T01:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174212",
    "user": "saliola"
}
```

Thanks, Mike! I'll set it as a dependency for this ticket.



---

archive/issue_comments_174213.json:
```json
{
    "body": "I opened two more tickets which implements the coalgebra and Hopf structure in k_dual.py and new_kschur.py",
    "created_at": "2013-03-06T13:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174213",
    "user": "zabrocki"
}
```

I opened two more tickets which implements the coalgebra and Hopf structure in k_dual.py and new_kschur.py



---

archive/issue_comments_174214.json:
```json
{
    "body": "This patch seems to work but it now causes failures in algebras/steenrod/steenrod_algebra.py",
    "created_at": "2013-05-20T17:51:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174214",
    "user": "zabrocki"
}
```

This patch seems to work but it now causes failures in algebras/steenrod/steenrod_algebra.py



---

archive/issue_comments_174215.json:
```json
{
    "body": "That's because the Steenrod algebra code doesn't define a counit. See the attached patch.",
    "created_at": "2013-05-21T01:36:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174215",
    "user": "jhpalmieri"
}
```

That's because the Steenrod algebra code doesn't define a counit. See the attached patch.



---

archive/issue_comments_174216.json:
```json
{
    "body": "Attachment [trac_14161-jhp.patch](tarball://root/attachments/some-uuid/ticket14161/trac_14161-jhp.patch) by jhpalmieri created at 2013-05-21 01:38:03",
    "created_at": "2013-05-21T01:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174216",
    "user": "jhpalmieri"
}
```

Attachment [trac_14161-jhp.patch](tarball://root/attachments/some-uuid/ticket14161/trac_14161-jhp.patch) by jhpalmieri created at 2013-05-21 01:38:03



---

archive/issue_comments_174217.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-05-22T11:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174217",
    "user": "zabrocki"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_174218.json:
```json
{
    "body": "Attachment [trac_14161_review_mz.patch](tarball://root/attachments/some-uuid/ticket14161/trac_14161_review_mz.patch) by zabrocki created at 2013-05-22 11:45:58\n\nFranco, I've tested everything and would set positive review, but since it has sat for a while, you should look this over too.\n-Mike",
    "created_at": "2013-05-22T11:45:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174218",
    "user": "zabrocki"
}
```

Attachment [trac_14161_review_mz.patch](tarball://root/attachments/some-uuid/ticket14161/trac_14161_review_mz.patch) by zabrocki created at 2013-05-22 11:45:58

Franco, I've tested everything and would set positive review, but since it has sat for a while, you should look this over too.
-Mike



---

archive/issue_comments_174219.json:
```json
{
    "body": "All tests pass. It looks good to me!",
    "created_at": "2013-05-22T12:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174219",
    "user": "saliola"
}
```

All tests pass. It looks good to me!



---

archive/issue_comments_174220.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-05-22T12:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174220",
    "user": "saliola"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_174221.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-05-29T07:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13957#issuecomment-174221",
    "user": "jdemeyer"
}
```

Resolution: fixed
