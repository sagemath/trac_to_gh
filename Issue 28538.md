# Issue 28538: Broken jsmol graphics

archive/issues_028538.json:
```json
{
    "body": "Following shows picture but when you click it, it changes to a cloud of points. \n\n\n```\nExample306(x,y) = -x*y*exp(-(x^2 + y^2)/2)\np1 = plot3d(Example306(x,y),(x,-2,2),(y,-2,2))\np2 = point((0,0,Example306(0,0)),size=20,color='red')\np3 = point((1,-1,Example306(1,-1)),size=20,color='green')\np4 = point((-1,1,Example306(1,-1)),size=20,color='green')\np5 = point((1,1,Example306(1,1)),size=20,color='black')\np6 = point((-1,-1,Example306(-1,-1)),size=20,color='black')\nshow(p1+p2+p3+p4+p5+p6, viewer='jsmol')\n```\n\n\nWith `viewer='threejs'` it works.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/28775\n\n",
    "created_at": "2019-11-20T08:41:38Z",
    "labels": [
        "graphics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Broken jsmol graphics",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28538",
    "user": "jmantysalo"
}
```
Following shows picture but when you click it, it changes to a cloud of points. 


```
Example306(x,y) = -x*y*exp(-(x^2 + y^2)/2)
p1 = plot3d(Example306(x,y),(x,-2,2),(y,-2,2))
p2 = point((0,0,Example306(0,0)),size=20,color='red')
p3 = point((1,-1,Example306(1,-1)),size=20,color='green')
p4 = point((-1,1,Example306(1,-1)),size=20,color='green')
p5 = point((1,1,Example306(1,1)),size=20,color='black')
p6 = point((-1,-1,Example306(-1,-1)),size=20,color='black')
show(p1+p2+p3+p4+p5+p6, viewer='jsmol')
```


With `viewer='threejs'` it works.


Issue created by migration from https://trac.sagemath.org/ticket/28775





---

archive/issue_comments_402913.json:
```json
{
    "body": "I can not reproduce it (Sage 9.0.beta6, Debian buster 64bit, firefox-esr).",
    "created_at": "2019-11-21T19:48:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28538#issuecomment-402913",
    "user": "tmonteil"
}
```

I can not reproduce it (Sage 9.0.beta6, Debian buster 64bit, firefox-esr).



---

archive/issue_comments_402914.json:
```json
{
    "body": "On a fresh install 1) I was not able to open SageNB at all, and 2) `viewer='jsmol'` says `.../local/lib/python3.7/site-packages/sage/repl/rich_output/display_manager.py:583: UserWarning: viewer=jsmol is not supported`.\n\nSomething strange here.",
    "created_at": "2019-11-23T14:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28538#issuecomment-402914",
    "user": "jmantysalo"
}
```

On a fresh install 1) I was not able to open SageNB at all, and 2) `viewer='jsmol'` says `.../local/lib/python3.7/site-packages/sage/repl/rich_output/display_manager.py:583: UserWarning: viewer=jsmol is not supported`.

Something strange here.



---

archive/issue_comments_402915.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28538#issuecomment-402915",
    "user": "embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_402916.json:
```json
{
    "body": "Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28538#issuecomment-402916",
    "user": "mkoeppe"
}
```

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_comments_402917.json:
```json
{
    "body": "works for me. Given that OP mentions SageNB, this may be outdated altogether",
    "created_at": "2020-08-07T18:02:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28538#issuecomment-402917",
    "user": "mkoeppe"
}
```

works for me. Given that OP mentions SageNB, this may be outdated altogether



---

archive/issue_comments_402918.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-07T18:02:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28538#issuecomment-402918",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_402919.json:
```json
{
    "body": "I get the same warning as in comment:2, so it seems that `threejs` is used instead of `jsmol`. I do not know anything about jsmol though, so I am not sure if this is a bug.",
    "created_at": "2020-08-13T18:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28538#issuecomment-402919",
    "user": "@mwageringel"
}
```

I get the same warning as in comment:2, so it seems that `threejs` is used instead of `jsmol`. I do not know anything about jsmol though, so I am not sure if this is a bug.



---

archive/issue_comments_402920.json:
```json
{
    "body": "Replying to [comment:6 gh-mwageringel]:\n> I get the same warning as in comment:2, so it seems that `threejs` is used instead of `jsmol`. I do not know anything about jsmol though, so I am not sure if this is a bug.\nThe viewer should be `jmol`, not `jsmol`. With the former there is no error in the current notebook. I do remember seeing the error when first reported, but it's not there now.",
    "created_at": "2020-08-13T20:49:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28538#issuecomment-402920",
    "user": "paulmasson"
}
```

Replying to [comment:6 gh-mwageringel]:
> I get the same warning as in comment:2, so it seems that `threejs` is used instead of `jsmol`. I do not know anything about jsmol though, so I am not sure if this is a bug.
The viewer should be `jmol`, not `jsmol`. With the former there is no error in the current notebook. I do remember seeing the error when first reported, but it's not there now.



---

archive/issue_comments_402921.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-13T20:49:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28538#issuecomment-402921",
    "user": "paulmasson"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_402922.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2020-10-11T16:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28538",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28538#issuecomment-402922",
    "user": "slelievre"
}
```

Resolution: worksforme
