# Issue 34428: openssl spkg-configure.m4: Also require openssl if curl needs to be built

Issue created by migration from https://trac.sagemath.org/ticket/34665

Original creator: mkoeppe

Original creation time: 2022-10-15 23:26:55

CC:  tmonteil dimpase mjo

Seen in `opensuse-15.3-gcc_11-python3.9`: 
https://github.com/mkoeppe/sage/actions/runs/3251926884/jobs/5344443553

```
  [curl-7.84.0]   checking for openssl options with pkg-config... no
  [curl-7.84.0]   checking for HMAC_Update in -lcrypto... no
  [curl-7.84.0]   checking for HMAC_Init_ex in -lcrypto... no
  [curl-7.84.0]   checking OpenSSL linking with -ldl... no
  [curl-7.84.0]   checking OpenSSL linking with -ldl and -lpthread... no
  [curl-7.84.0]   configure: OPT_OPENSSL: yes
  [curl-7.84.0]   configure: OPENSSL_ENABLED: 
  [curl-7.84.0]   configure: error: --with-openssl was given but OpenSSL could not be detected
  [curl-7.84.0]   ********************************************************************************
```



---

Comment by mkoeppe created at 2022-10-16 00:24:52

Tested successfully using `tox -e docker-opensuse-15.3-gcc_11-python3.9-minimal -- curl`
----
New commits:


---

Comment by mkoeppe created at 2022-10-16 00:24:52

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-10-23 19:18:51

Let's get this in please


---

Comment by dimpase created at 2022-10-23 21:17:50

Can we refactor this using `SAGE_SPKG_DEPCHECK` ?


---

Comment by mkoeppe created at 2022-10-23 21:35:31

No, that's an unrelated mechanism.


---

Comment by dimpase created at 2022-10-25 11:42:53

ok


---

Comment by dimpase created at 2022-10-25 11:42:53

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-10-25 20:17:13

Thanks!


---

Comment by vbraun created at 2022-11-07 20:26:13

Resolution: fixed
