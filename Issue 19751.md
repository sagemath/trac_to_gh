# Issue 19751: Update to matplotlib 1.5.1

archive/issues_019751.json:
```json
{
    "body": "CC:  aginiewicz fbissey etn40ff\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/19988\n\n",
    "created_at": "2016-01-30T20:52:54Z",
    "labels": [
        "PLEASE CHANGE",
        "major"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.1",
    "title": "Update to matplotlib 1.5.1",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19751",
    "user": "vbraun"
}
```
CC:  aginiewicz fbissey etn40ff



Issue created by migration from https://trac.sagemath.org/ticket/19988





---

archive/issue_comments_271538.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2016-01-30T20:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271538",
    "user": "vbraun"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_271539.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to packages: standard.",
    "created_at": "2016-01-30T20:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271539",
    "user": "vbraun"
}
```

Changing component from PLEASE CHANGE to packages: standard.



---

archive/issue_comments_271540.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-01-30T20:59:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271540",
    "user": "vbraun"
}
```

New commits:



---

archive/issue_comments_271541.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-01-30T21:00:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271541",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_271542.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-01-30T21:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271542",
    "user": "vbraun"
}
```

New commits:



---

archive/issue_comments_271543.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-01-30T21:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271543",
    "user": "vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_271544.json:
```json
{
    "body": "\n```\nsage -t --warn-long 44.7 src/sage/plot/graphics.py  # 2 doctests failed\nsage -t --warn-long 44.7 src/sage/plot/contour_plot.py  # 1 doctest failed\n```\n\nsomething to do with `Contour levels must be increasing`, e.g.\n\n```\nsage -t --warn-long 44.7 src/sage/plot/contour_plot.py\n**********************************************************************\nFile \"src/sage/plot/contour_plot.py\", line 638, in sage.plot.contour_plot.implicit_plot\nFailed example:\n    implicit_plot(x^2+y^2-2, (x,-3,3), (y,-3,3))\nExpected:\n    Graphics object consisting of 1 graphics primitive\nGot:\n    doctest:590: RichReprWarning: Exception in _rich_repr_ while displaying object: Contour levels must be increasing\n    Graphics object consisting of 1 graphics primitive\n```\n",
    "created_at": "2016-01-30T21:53:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271544",
    "user": "dimpase"
}
```


```
sage -t --warn-long 44.7 src/sage/plot/graphics.py  # 2 doctests failed
sage -t --warn-long 44.7 src/sage/plot/contour_plot.py  # 1 doctest failed
```

something to do with `Contour levels must be increasing`, e.g.

```
sage -t --warn-long 44.7 src/sage/plot/contour_plot.py
**********************************************************************
File "src/sage/plot/contour_plot.py", line 638, in sage.plot.contour_plot.implicit_plot
Failed example:
    implicit_plot(x^2+y^2-2, (x,-3,3), (y,-3,3))
Expected:
    Graphics object consisting of 1 graphics primitive
Got:
    doctest:590: RichReprWarning: Exception in _rich_repr_ while displaying object: Contour levels must be increasing
    Graphics object consisting of 1 graphics primitive
```




---

archive/issue_comments_271545.json:
```json
{
    "body": "google says \"This error was added in matplotlib 1.5.1 because of a bug in all versions of contourf prior to 1.5.0.\"",
    "created_at": "2016-01-30T21:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271545",
    "user": "dimpase"
}
```

google says "This error was added in matplotlib 1.5.1 because of a bug in all versions of contourf prior to 1.5.0."



---

archive/issue_comments_271546.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-01-30T22:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271546",
    "user": "dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_271547.json:
```json
{
    "body": "This was already on sage-devel - https://groups.google.com/forum/#!topic/sage-devel/eeuC8CYUsnM - I thought it was in 1.5.0 as well, now I noticed Fran\u00e7ois explicitly mentioned 1.5.1.\n\nAnyway, I tested that None does not work, but changing default option of contours=[0,0] in implicit_plot to contours=[-1e307,0,1e307] (like in region_plot) seems to work, but I'm not sure if this does not break something else.",
    "created_at": "2016-01-30T22:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271547",
    "user": "aginiewicz"
}
```

This was already on sage-devel - https://groups.google.com/forum/#!topic/sage-devel/eeuC8CYUsnM - I thought it was in 1.5.0 as well, now I noticed Fran√ßois explicitly mentioned 1.5.1.

Anyway, I tested that None does not work, but changing default option of contours=[0,0] in implicit_plot to contours=[-1e307,0,1e307] (like in region_plot) seems to work, but I'm not sure if this does not break something else.



---

archive/issue_comments_271548.json:
```json
{
    "body": "RTFM :-) The most meaningful output seems to be with `contours=0`. The docs of `contour_plot` say\n\n```\n  * \"contours\" -- integer or list of numbers (default: \"None\"): If\n     a list of numbers is given, then this specifies the contour\n     levels to use.  If an integer is given, then this many contour\n     lines are used, but the exact levels are determined\n     automatically. If \"None\" is passed (or the option is not given),\n     then the number of contour lines is determined automatically, and\n     is usually about 5.\n```\n\nand this explains why `None` gives you nonsense, usually. `contours=1` give 2 contours, not 1, apparently there is a shift by 1 somewhere...",
    "created_at": "2016-01-31T08:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271548",
    "user": "dimpase"
}
```

RTFM :-) The most meaningful output seems to be with `contours=0`. The docs of `contour_plot` say

```
  * "contours" -- integer or list of numbers (default: "None"): If
     a list of numbers is given, then this specifies the contour
     levels to use.  If an integer is given, then this many contour
     lines are used, but the exact levels are determined
     automatically. If "None" is passed (or the option is not given),
     then the number of contour lines is determined automatically, and
     is usually about 5.
```

and this explains why `None` gives you nonsense, usually. `contours=1` give 2 contours, not 1, apparently there is a shift by 1 somewhere...



---

archive/issue_comments_271549.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-02-20T13:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271549",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_271550.json:
```json
{
    "body": "An implicit plot is just a contour plot with a single contour at 0, not two contours at zero. The old `contours=[0,0]` probably never made sense...",
    "created_at": "2016-02-20T13:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271550",
    "user": "vbraun"
}
```

An implicit plot is just a contour plot with a single contour at 0, not two contours at zero. The old `contours=[0,0]` probably never made sense...



---

archive/issue_comments_271551.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-02-20T13:29:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271551",
    "user": "vbraun"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_271552.json:
```json
{
    "body": "OK, looks good to me",
    "created_at": "2016-02-20T14:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271552",
    "user": "dimpase"
}
```

OK, looks good to me



---

archive/issue_comments_271553.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-02-20T14:49:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271553",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_271554.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-02-21T09:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19751",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19751#issuecomment-271554",
    "user": "vbraun"
}
```

Resolution: fixed
