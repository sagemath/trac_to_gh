# Issue 22810: Meta Ticket: Utilize coercion framework for scheme points and morphisms

Issue created by migration from https://trac.sagemath.org/ticket/23047

Original creator: bhutz

Original creation time: 2017-05-22 01:29:54

CC:  novoselt paulfili atowsley

While there is some coercion-like behavior for schemes objects, it is done in an ad-hoc way that does not utilize the coercion framework and is overdue to be updated.

The following three scenarios should work using the coercion model.

 - Coercion between ambient spaces whose base rings are compatible.

 For example, `\mathbb{P}^n(ZZ)` should be coercible to `\mathbb{P}^n(QQ)` since `ZZ` is coercible to `QQ`. This may involve a finding a larger common parent.


```
sage: P.<x,y> = ProjectiveSpace(QQ,1)
sage: T.<u,v> = ProjectiveSpace(ZZ,1)
sage: Q = P(1,1);Q2 = T(1,1)
sage: Q == Q2
False
```


    This would be a major a paradigm shift for schemes, since currently the first comparison for points is equality of the ambient spaces. The current behavior is in direct contradiction to other areas of Sage, for example, matrix spaces.


```
sage: m1=matrix(QQ,2,2,[1,1,0,1])
sage: m2=matrix(ZZ,2,2,[1,1,0,1])
sage: m1==m2
True
```


    This would also allow functions to act on points when the domain of the function and ambient space of the point are compatible.


 - Coercion of other objects to schemes points

    These other objects could be any object which makes sense to coerce such as: base ring elements or list/tuples of base ring elements.
    
    While it is sometimes possible to initialize a point in some of these scenarios, since it is not done through the coercion framework, comparisons fail.


```
sage: P.<u,v>=ProjectiveSpace(ZZ,1)
sage: P(0) == 0
False
```


 - left and right actions for base rings and matrices on scheme points and morphisms

        There is a natural `PGL` action on projective space and `GL` action on affine space. It would be natural to use the aspect of the coercion model.
        
        There is also a natural action of the base ring on projective points and morphisms. This is currently done with the scale_by() function, which modifies the object in place. However, there are good arguments for why this should be changed (see ticket #22268).


---

Comment by bhutz created at 2017-09-09 22:58:45

The three tickets for this functionality are the following:

- #23805 - coercion for points

- #23814 - matrix action on maps

- #23816 - matrix action on points


---

Comment by bhutz created at 2017-09-09 22:58:45

Set assignee to bhutz.


---

Comment by atowsley created at 2017-09-10 00:10:17

The three tickets for this functionality are the following: (change 23814 to 23813)

#23805 - coercion for points

#23813 - matrix action on maps

#23816 - matrix action on points


---

Comment by bhutz created at 2019-11-27 20:28:45

Changing status from new to needs_review.


---

Comment by bhutz created at 2019-11-27 20:28:45

all tickets finished as of sage-days 104


---

Comment by bhutz created at 2019-11-27 20:29:33

not sure how to go about closing a meta ticket like this. I'm marking it positive as all aspects are now completed.


---

Comment by bhutz created at 2019-11-27 20:29:33

Changing status from needs_review to positive_review.


---

Comment by bhutz created at 2019-11-27 20:29:59

Changing keywords from "" to "sd104,SI2019".


---

Comment by chapoton created at 2019-11-27 20:45:58

Not sure how to close that kind of ticket either, so used "works for me"


---

Comment by chapoton created at 2019-11-27 20:45:58

Resolution: worksforme
