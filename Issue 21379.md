# Issue 21379: py3 use key for display order of complex numbers

Issue created by migration from Trac.

Original creator: chapoton

Original creation time: 2016-09-30 17:19:31

CC:  jmantysalo tscrim aapitzsch jdemeyer

because sorting using `cmp=` is no longer allowed in py3,
one needs to change the way the complex numbers are sorted for display


---

Comment by chapoton created at 2016-09-30 17:28:20

first tentative, not quite good enough
----
New commits:


---

Comment by git created at 2016-09-30 18:57:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-10-01 08:19:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-10-03 18:52:30

Changing status from new to needs_review.


---

Comment by chapoton created at 2016-10-03 18:52:30

seems to be good enough, although the choices made should be discussed


---

Comment by jmantysalo created at 2016-10-04 18:35:49

I don't understand. "Sorted for display", in what cases is this function / sorting used?


---

Comment by chapoton created at 2016-10-04 18:37:39

in a few places, where the answer is a list of complex numbers (typically roots of polynomials)


---

Comment by jmantysalo created at 2016-10-04 18:47:07

Like


```
P.<x> = ZZ[]; (x^4-3*x^3+2*x^2-3).roots(ring=CC)
```


? I did not know they are sorted in any way. But good that they are.


---

Comment by tscrim created at 2016-10-04 20:42:10

You can replace `key=lambda t: _key_complex_for_display(t))` with `key=_key_complex_for_display`. I'm not sure about the exact validity of the key function, but since it's only for display, I don't see any harm (assuming no doctests break).


---

Comment by git created at 2016-10-11 18:10:45

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2016-10-11 18:11:01

done


---

Comment by chapoton created at 2016-10-14 18:53:16

ping (one patchbot is green !)


---

Comment by tscrim created at 2016-10-15 03:50:05

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-10-21 07:03:56

Resolution: fixed
