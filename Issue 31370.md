# Issue 31370: pynac substitutions can crash inside a hold context

Issue created by migration from https://trac.sagemath.org/ticket/31607

Original creator: @DaveWitteMorris

Original creation time: 2021-04-05 00:16:26

Keywords: pynac, substitution

It was pointed out in the description of #31554 that pynac (at least as far back as v9.1) can crash when performing very easy substitutions inside a hold context.

```
sage: a,b = var("a b")
sage: f(x) = (a + b*x).series(x, 2)
sage: print(f"f(1) = {f(1)}")
f(1) = a + b
sage: with hold: 
....:     print(f(1))

<segmentation fault>
```

Testing on CoCalc results in a quickly increasing memory gauge, so the crash seems to be due to running out of memory (presumably in an infinite loop).

Related ticket: #31597.


---

Comment by mkoeppe created at 2021-04-05 17:07:31

Changing priority from major to critical.
