# Issue 27680: Standardize doctest headers

Issue created by migration from https://trac.sagemath.org/ticket/27917

Original creator: @black-stones

Original creation time: 2019-06-01 20:41:42

CC:  jdemeyer slelievre

Keywords: doctest

It has recently come to my attention that there are a few doctest strings within Sage that do not follow the standard (http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings). Please see the comments in #5548 for the details/conversation, but essentially, all doctests should be preceded by either a `TESTS::` or `EXAMPLES::` header.

I have found a few places where this is not done:
* set_calculus_method() of src/sage/manifolds/manifold.py
* from_tamari_sorting_tuple() of src/sage/combinat/binary_tree.py ("EXEMPLES" instead of "EXAMPLES")
* init() of GenericGraphQuery? in src/sage/graphs/graph_database.py 
* _hnf_mod() of src/sage/matrix/matrix_integer_dense.pyx

There are also a few places where we have `Examples::` or `Tests::` instead of `EXAMPLES::` or `TESTS::`, and other places have `EXAMPLES:` (only one colon)... I am not sure if this matters for running doctests but for consistency, they should be fixed too.

* preimage() and dual() of src/sage/schemes/projective/projective_subscheme.py
* _richcmp_() of src/sage/schemes/projective/projective_point.py
* Lattes_map() of src/sage/schemes/projective/projective_space.py
* _call_(), SchemeMorphism_polynomial, __getitem__(), __mul__(), glue_along_domains() of src/sage/schemes/generic/morphism.py

I have undoubtedly missed many other mistakes, so I believe this ticket is two-fold - we should first compile a list of files with incorrect docstring headers, and then fix them.




---

Comment by chapoton created at 2019-06-02 09:21:56

* The use of `TESTS:` and `EXAMPLES:` is correct. The double colon is only needed if this is directly followed by doctests.

* All `EXEMPLES` have been fixed recently.

* `Examples` and `Tests` could be fixed, but this has low priority.


---

Comment by jhpalmieri created at 2019-06-02 15:52:36

Replying to [comment:1 chapoton]:
> * The use of `TESTS:` and `EXAMPLES:` is correct. The double colon is only needed if this is directly followed by doctests.

In more detail: if the following line is not indented, a single colon is correct, like this:

```
EXAMPLES:

Here is some explanatory text. ::

    sage: 2+2
    5
```

Using `EXAMPLES::` would produce an error.


---

Comment by embray created at 2019-06-14 14:55:27

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).


---

Comment by embray created at 2019-06-14 14:57:37

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).


---

Comment by chapoton created at 2019-08-24 19:52:26

Changing status from new to needs_review.


---

Comment by chapoton created at 2019-08-24 19:52:26

done, please review
----
New commits:


---

Comment by klui created at 2019-08-25 03:20:09

Changing type from PLEASE CHANGE to defect.


---

Comment by klui created at 2019-08-25 03:20:09

Changing status from needs_review to positive_review.


---

Comment by klui created at 2019-08-25 03:20:09

Looks good. 

I also change the ticket type to `defect`.


---

Comment by vbraun created at 2019-09-02 21:40:54

Resolution: fixed
