# Issue 18104: Sphinx tarball needs renaming

archive/issues_018104.json:
```json
{
    "body": "Sphinx is built from `Sphinx-1.2.2.tar.gz`. it turns out that `sage -sh sage-fix-pkg-checksums`, that computes the checksums, will treat only lower-case-named tarballs ... except on Macs, whose filesystems will find `Sphinx-1.2.2.tar.gz` when asked for `sphinx-1.2.2.tar.gz`. See #18229 for discussion.\n\nThis is documented in the Developer's guide ([http://www.sagemath.org/doc/developer/packaging.html](http://www.sagemath.org/doc/developer/packaging.html), paragraph \"Directory structure\"), that states :\n\n> \"The build scripts and associated files are in a subdirectory SAGE_ROOT/build/pkgs/package, where you replace package with a lower-case version of the upstream project name.\"\n\nI suppose that the original Sphinx porter might have been a Mac user, and that nobody caught the problem.\n\nHTH,\n\nIssue created by migration from https://trac.sagemath.org/ticket/18341\n\n",
    "created_at": "2015-04-30T06:25:43Z",
    "labels": [
        "packages: standard",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Sphinx tarball needs renaming",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18104",
    "user": "@EmmanuelCharpentier"
}
```
Sphinx is built from `Sphinx-1.2.2.tar.gz`. it turns out that `sage -sh sage-fix-pkg-checksums`, that computes the checksums, will treat only lower-case-named tarballs ... except on Macs, whose filesystems will find `Sphinx-1.2.2.tar.gz` when asked for `sphinx-1.2.2.tar.gz`. See #18229 for discussion.

This is documented in the Developer's guide ([http://www.sagemath.org/doc/developer/packaging.html](http://www.sagemath.org/doc/developer/packaging.html), paragraph "Directory structure"), that states :

> "The build scripts and associated files are in a subdirectory SAGE_ROOT/build/pkgs/package, where you replace package with a lower-case version of the upstream project name."

I suppose that the original Sphinx porter might have been a Mac user, and that nobody caught the problem.

HTH,

Issue created by migration from https://trac.sagemath.org/ticket/18341





---

archive/issue_comments_244002.json:
```json
{
    "body": "What's the problem really? I don't think it is a requirement that the tarball name matches the package name. It builds and the current checksums are correct, so...? The next person to update the package can still rename the tarball.",
    "created_at": "2015-04-30T07:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18104#issuecomment-244002",
    "user": "@jdemeyer"
}
```

What's the problem really? I don't think it is a requirement that the tarball name matches the package name. It builds and the current checksums are correct, so...? The next person to update the package can still rename the tarball.



---

archive/issue_comments_244003.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-04-30T07:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18104#issuecomment-244003",
    "user": "@jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_244004.json:
```json
{
    "body": "Replying to [comment:2 jdemeyer]:\n> What's the problem really? I don't think it is a requirement that the tarball name matches the package name.\n\nIt is :\n* [Developer's guide](http://www.sagemath.org/doc/developer/packaging.html) requirement, as quoted in the ticket description\n* The current sage-fix-spkg-checksums won't update the checksums on anything but a Mac with their pseudo-case-sensitive filesystem. See #18229 for an exchange between Fran\u00e7ois Bissey and myself.\n\n\n> It builds and the current checksums are correct,\n\nHow do you know ? You don't have a way to know that unless you're on a Mac or you're recomputing the checksums by hand (sage-fix-spkg-checksums won't do it on anything but a Mac).\n\n> so...? The next person to update the package can still rename the tarball.\n\nI agree that the lower-case tarball requirement seems odd. It has been a thorn in my bu...err...backside since I started to keep R up-to-date. But the problem exists, and won't go away until the parts of the build system that are tarball-case-sensitive are fixed.\n\nI posted something to that effect on sage-devel. Could we move this discussion  there ?\n\nIn the interim, status ==> needs_work.",
    "created_at": "2015-04-30T08:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18104#issuecomment-244004",
    "user": "@EmmanuelCharpentier"
}
```

Replying to [comment:2 jdemeyer]:
> What's the problem really? I don't think it is a requirement that the tarball name matches the package name.

It is :
* [Developer's guide](http://www.sagemath.org/doc/developer/packaging.html) requirement, as quoted in the ticket description
* The current sage-fix-spkg-checksums won't update the checksums on anything but a Mac with their pseudo-case-sensitive filesystem. See #18229 for an exchange between FranÃ§ois Bissey and myself.


> It builds and the current checksums are correct,

How do you know ? You don't have a way to know that unless you're on a Mac or you're recomputing the checksums by hand (sage-fix-spkg-checksums won't do it on anything but a Mac).

> so...? The next person to update the package can still rename the tarball.

I agree that the lower-case tarball requirement seems odd. It has been a thorn in my bu...err...backside since I started to keep R up-to-date. But the problem exists, and won't go away until the parts of the build system that are tarball-case-sensitive are fixed.

I posted something to that effect on sage-devel. Could we move this discussion  there ?

In the interim, status ==> needs_work.



---

archive/issue_comments_244005.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-04-30T08:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18104#issuecomment-244005",
    "user": "@EmmanuelCharpentier"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_244006.json:
```json
{
    "body": "Replying to [comment:3 charpent]:\n> Replying to [comment:2 jdemeyer]:\n> > What's the problem really? I don't think it is a requirement that the tarball name matches the package name.\n> \n> It is :\n> * [Developer's guide](http://www.sagemath.org/doc/developer/packaging.html) requirement, as quoted in the ticket description\nNot really, that just says something about the name of the directory in `build/pkgs`.\n\n> * The current sage-fix-spkg-checksums won't update the checksums on anything but a Mac\nThat's true, but is that a reason to rename the tarball now?\n\n> > It builds and the current checksums are correct,\n> \n> How do you know ?\nBecause `make` succeeds.",
    "created_at": "2015-04-30T09:10:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18104#issuecomment-244006",
    "user": "@jdemeyer"
}
```

Replying to [comment:3 charpent]:
> Replying to [comment:2 jdemeyer]:
> > What's the problem really? I don't think it is a requirement that the tarball name matches the package name.
> 
> It is :
> * [Developer's guide](http://www.sagemath.org/doc/developer/packaging.html) requirement, as quoted in the ticket description
Not really, that just says something about the name of the directory in `build/pkgs`.

> * The current sage-fix-spkg-checksums won't update the checksums on anything but a Mac
That's true, but is that a reason to rename the tarball now?

> > It builds and the current checksums are correct,
> 
> How do you know ?
Because `make` succeeds.



---

archive/issue_comments_244007.json:
```json
{
    "body": "Replying to [comment:4 jdemeyer]:\n> Replying to [comment:3 charpent]:\n> > Replying to [comment:2 jdemeyer]:\n> > > What's the problem really? I don't think it is a requirement that the tarball name matches the package name.\n> > \n> > It is :\n> > * [Developer's guide](http://www.sagemath.org/doc/developer/packaging.html) requirement, as quoted in the ticket description\n> Not really, that just says something about the name of the directory in `build/pkgs`.\n\n< Insert \"consistency\" sermon here ... >\n\n> \n> > * The current sage-fix-spkg-checksums won't update the checksums on anything but a Mac\n> That's true, but is that a reason to rename the tarball now?\n\nYes : you might get run over by a truck, and the next maintainer of (P|p)illow, who might not be a Mac user, would be stuck with the mess...\n\n> > > It builds and the current checksums are correct,\n> > \n> > How do you know ?\n> Because `make` succeeds.\n\n... On your Mac ! Or with the current (P|p)illow version. Again, it's the maintenance that seems problematic.\n\nHTH,",
    "created_at": "2015-04-30T09:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18104#issuecomment-244007",
    "user": "@EmmanuelCharpentier"
}
```

Replying to [comment:4 jdemeyer]:
> Replying to [comment:3 charpent]:
> > Replying to [comment:2 jdemeyer]:
> > > What's the problem really? I don't think it is a requirement that the tarball name matches the package name.
> > 
> > It is :
> > * [Developer's guide](http://www.sagemath.org/doc/developer/packaging.html) requirement, as quoted in the ticket description
> Not really, that just says something about the name of the directory in `build/pkgs`.

< Insert "consistency" sermon here ... >

> 
> > * The current sage-fix-spkg-checksums won't update the checksums on anything but a Mac
> That's true, but is that a reason to rename the tarball now?

Yes : you might get run over by a truck, and the next maintainer of (P|p)illow, who might not be a Mac user, would be stuck with the mess...

> > > It builds and the current checksums are correct,
> > 
> > How do you know ?
> Because `make` succeeds.

... On your Mac ! Or with the current (P|p)illow version. Again, it's the maintenance that seems problematic.

HTH,



---

archive/issue_comments_244008.json:
```json
{
    "body": "Replying to [comment:5 charpent]:\n> > Not really, that just says something about the name of the directory in `build/pkgs`.\n> \n> < Insert \"consistency\" sermon here ... >\nIf you want consistency, then make this a ticket about enforcing consistency, not about renaming one random tarball.",
    "created_at": "2015-04-30T09:43:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18104#issuecomment-244008",
    "user": "@jdemeyer"
}
```

Replying to [comment:5 charpent]:
> > Not really, that just says something about the name of the directory in `build/pkgs`.
> 
> < Insert "consistency" sermon here ... >
If you want consistency, then make this a ticket about enforcing consistency, not about renaming one random tarball.



---

archive/issue_comments_244009.json:
```json
{
    "body": "Replying to [comment:5 charpent]:\n> > > * The current sage-fix-spkg-checksums won't update the checksums on anything but a Mac\n> > That's true, but is that a reason to rename the tarball now?\n> \n> Yes : you might get run over by a truck, and the next maintainer of (P|p)illow, who might not be a Mac user, would be stuck with the mess...\nYou think that it will make maintaining Pillow easier if we rename the Pillow tarball now? If you *really* believe that, then I guess it's worth renaming the tarball now.\n\n> ... On your Mac !\nI don't have a Mac and still my Sage builds fine. The checksums are equally correct on my Linux machine than on somebody else's Mac.",
    "created_at": "2015-04-30T09:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18104#issuecomment-244009",
    "user": "@jdemeyer"
}
```

Replying to [comment:5 charpent]:
> > > * The current sage-fix-spkg-checksums won't update the checksums on anything but a Mac
> > That's true, but is that a reason to rename the tarball now?
> 
> Yes : you might get run over by a truck, and the next maintainer of (P|p)illow, who might not be a Mac user, would be stuck with the mess...
You think that it will make maintaining Pillow easier if we rename the Pillow tarball now? If you *really* believe that, then I guess it's worth renaming the tarball now.

> ... On your Mac !
I don't have a Mac and still my Sage builds fine. The checksums are equally correct on my Linux machine than on somebody else's Mac.



---

archive/issue_comments_244010.json:
```json
{
    "body": "`sage -sh sage-fix-pkg-checksums` works for me. Also `Sphinx-1.2.2.tar.gz` is treated.",
    "created_at": "2015-05-25T12:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18104#issuecomment-244010",
    "user": "@a-andre"
}
```

`sage -sh sage-fix-pkg-checksums` works for me. Also `Sphinx-1.2.2.tar.gz` is treated.



---

archive/issue_comments_244011.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-05-25T12:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18104#issuecomment-244011",
    "user": "@a-andre"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_244012.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-06-06T10:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18104#issuecomment-244012",
    "user": "@jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_244013.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2015-06-19T08:40:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18104",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18104#issuecomment-244013",
    "user": "@vbraun"
}
```

Resolution: invalid
