# Issue 13513: Upgrade to sagenb 0.10.3

Issue created by migration from https://trac.sagemath.org/ticket/13717

Original creator: jason

Original creation time: 2012-11-16 15:33:01

Assignee: tbd

CC:  kini jhpalmieri

This is a relatively minor upgrade (a few bugfixes, plus packaging one more dependency to take care of the problem at #12719.

Spkg at http://sage.math.washington.edu/home/jason/sagenb-0.10.3.spkg


---

Comment by jason created at 2012-11-16 15:59:29

It looks like we have two failing doctests: 


```
sage -t  -force_lib "devel/sagenb-main/sagenb/misc/sphinxify.py"
**********************************************************************
File "/Users/grout/sage-trees/sage-5.4/devel/sagenb-main/sagenb/misc/sphinxify.py", line 57:
    sage: sphinxify('`x=y`')
Expected:
    '\n<div class="docstring">\n    \n  <p><span class="math">\\(x=y\\)</span></p>\n\n\n</div>'
Got:
    '\n<div class="docstring">\n    \n  <p><span class="math">x=y</span></p>\n\n\n</div>'
**********************************************************************
1 items had failures:
   1 of   9 in __main__.example_1
***Test Failed*** 1 failures.
For whitespace errors, see the file /Users/grout/.sage//tmp/sphinxify_78034.py
	 [3.1 s]
sage -t  -force_lib "devel/sagenb-main/sagenb/misc/support.py"
**********************************************************************
File "/Users/grout/sage-trees/sage-5.4/devel/sagenb-main/sagenb/misc/support.py", line 246:
    sage: D = docstring("r.lm", globs=globals())
Exception raised:
    Traceback (most recent call last):
      File "/Users/grout/sage-trees/sage-5.4/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/grout/sage-trees/sage-5.4/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/grout/sage-trees/sage-5.4/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_4[3]>", line 1, in <module>
        D = docstring("r.lm", globs=globals())###line 246:
    sage: D = docstring("r.lm", globs=globals())
      File "/Users/grout/sage-trees/sage-5.4/devel/sagenb/sagenb/misc/support.py", line 275, in docstring
        return html_markup(s.decode('utf-8'))
      File "/Users/grout/sage-trees/sage-5.4/devel/sagenb/sagenb/misc/support.py", line 280, in html_markup
        return sphinxify(s)
      File "/Users/grout/sage-trees/sage-5.4/devel/sagenb/sagenb/misc/sphinxify.py", line 79, in sphinxify
        filed.write(docstring)
    UnicodeEncodeError: 'ascii' codec can't encode character u'\u2018' in position 370: ordinal not in range(128)
**********************************************************************
1 items had failures:
   1 of   5 in __main__.example_4
***Test Failed*** 1 failures.
```


jhpalmieri, these both seem to be in your area of expertise.  What do you think?


---

Comment by jason created at 2012-11-16 16:09:13

Changing status from new to needs_review.


---

Comment by jason created at 2012-11-16 16:09:20

Changing status from needs_review to needs_work.


---

Comment by jason created at 2012-11-16 16:10:28

(I got those failures above on 5.4 using `sage -t -sagenb`.   Is the problem that I was working on 5.4?


---

Comment by jason created at 2012-11-16 16:20:45

I've moved discussion of these failing doctests back over to github: https://github.com/sagemath/sagenb/issues/112


---

Comment by fbissey created at 2013-01-15 21:55:32

This now blocks #10353 is the sphinx problem the only thing holding the upgrade?


---

Comment by kini created at 2013-01-16 08:56:34

I guess we should probably merge [gh-96](https://github.com/sagemath/sagenb/pull/96) for #13504 and [gh-125](https://github.com/sagemath/sagenb/pull/125) for #13678, along with a fix for the above mentioned sphinx issues, into 0.10.4 and update this ticket with a new spkg.


---

Comment by kini created at 2013-01-17 07:57:38

Changing status from needs_work to needs_review.


---

Comment by kini created at 2013-01-17 07:58:51

Please test! :)


---

Comment by jdemeyer created at 2013-01-17 10:08:18


```
jdemeyer@sage:/home/release/sage-5.7.beta0$ wget http://wstein.org/home/keshav/sagenb-0.10.4.spkg
--11:07:30--  http://wstein.org/home/keshav/sagenb-0.10.4.spkg
           => `sagenb-0.10.4.spkg'
Resolving wstein.org... 128.208.160.191, 128.208.160.197
Connecting to wstein.org|128.208.160.191|:80... connected.
HTTP request sent, awaiting response... 404 Not Found
11:07:30 ERROR 404: Not Found.
```



---

Comment by jdemeyer created at 2013-01-17 10:08:18

Changing status from needs_review to needs_work.


---

Comment by kini created at 2013-01-17 14:53:59

D'oh. Sorry about that.


---

Comment by kini created at 2013-01-17 14:53:59

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2013-01-20 08:40:34

I won't formally review this, but it *builds and passes doctests* without problems on the buildbots.


---

Comment by kini created at 2013-01-20 09:31:10

Glad to hear it!


---

Comment by vbraun created at 2013-01-23 15:29:16

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2013-01-23 15:29:16

Packaging of the sagenb point release looks good to me.


---

Comment by jdemeyer created at 2013-01-23 15:36:13

Resolution: fixed


---

Comment by kini created at 2013-03-22 02:53:42

Followup: #14330
