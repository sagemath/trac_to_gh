# Issue 13513: Upgrade to sagenb 0.10.3

archive/issues_013513.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  @kini @jhpalmieri\n\nThis is a relatively minor upgrade (a few bugfixes, plus packaging one more dependency to take care of the problem at #12719.\n\nSpkg at http://sage.math.washington.edu/home/jason/sagenb-0.10.3.spkg\n\nIssue created by migration from https://trac.sagemath.org/ticket/13717\n\n",
    "created_at": "2012-11-16T15:33:01Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.7",
    "title": "Upgrade to sagenb 0.10.3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13513",
    "user": "https://github.com/jasongrout"
}
```
Assignee: tbd

CC:  @kini @jhpalmieri

This is a relatively minor upgrade (a few bugfixes, plus packaging one more dependency to take care of the problem at #12719.

Spkg at http://sage.math.washington.edu/home/jason/sagenb-0.10.3.spkg

Issue created by migration from https://trac.sagemath.org/ticket/13717





---

archive/issue_comments_166529.json:
```json
{
    "body": "It looks like we have two failing doctests: \n\n\n```\nsage -t  -force_lib \"devel/sagenb-main/sagenb/misc/sphinxify.py\"\n**********************************************************************\nFile \"/Users/grout/sage-trees/sage-5.4/devel/sagenb-main/sagenb/misc/sphinxify.py\", line 57:\n    sage: sphinxify('`x=y`')\nExpected:\n    '\\n<div class=\"docstring\">\\n    \\n  <p><span class=\"math\">\\\\(x=y\\\\)</span></p>\\n\\n\\n</div>'\nGot:\n    '\\n<div class=\"docstring\">\\n    \\n  <p><span class=\"math\">x=y</span></p>\\n\\n\\n</div>'\n**********************************************************************\n1 items had failures:\n   1 of   9 in __main__.example_1\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /Users/grout/.sage//tmp/sphinxify_78034.py\n\t [3.1 s]\nsage -t  -force_lib \"devel/sagenb-main/sagenb/misc/support.py\"\n**********************************************************************\nFile \"/Users/grout/sage-trees/sage-5.4/devel/sagenb-main/sagenb/misc/support.py\", line 246:\n    sage: D = docstring(\"r.lm\", globs=globals())\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/grout/sage-trees/sage-5.4/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/grout/sage-trees/sage-5.4/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/grout/sage-trees/sage-5.4/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_4[3]>\", line 1, in <module>\n        D = docstring(\"r.lm\", globs=globals())###line 246:\n    sage: D = docstring(\"r.lm\", globs=globals())\n      File \"/Users/grout/sage-trees/sage-5.4/devel/sagenb/sagenb/misc/support.py\", line 275, in docstring\n        return html_markup(s.decode('utf-8'))\n      File \"/Users/grout/sage-trees/sage-5.4/devel/sagenb/sagenb/misc/support.py\", line 280, in html_markup\n        return sphinxify(s)\n      File \"/Users/grout/sage-trees/sage-5.4/devel/sagenb/sagenb/misc/sphinxify.py\", line 79, in sphinxify\n        filed.write(docstring)\n    UnicodeEncodeError: 'ascii' codec can't encode character u'\\u2018' in position 370: ordinal not in range(128)\n**********************************************************************\n1 items had failures:\n   1 of   5 in __main__.example_4\n***Test Failed*** 1 failures.\n```\n\n\njhpalmieri, these both seem to be in your area of expertise.  What do you think?",
    "created_at": "2012-11-16T15:59:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166529",
    "user": "https://github.com/jasongrout"
}
```

It looks like we have two failing doctests: 


```
sage -t  -force_lib "devel/sagenb-main/sagenb/misc/sphinxify.py"
**********************************************************************
File "/Users/grout/sage-trees/sage-5.4/devel/sagenb-main/sagenb/misc/sphinxify.py", line 57:
    sage: sphinxify('`x=y`')
Expected:
    '\n<div class="docstring">\n    \n  <p><span class="math">\\(x=y\\)</span></p>\n\n\n</div>'
Got:
    '\n<div class="docstring">\n    \n  <p><span class="math">x=y</span></p>\n\n\n</div>'
**********************************************************************
1 items had failures:
   1 of   9 in __main__.example_1
***Test Failed*** 1 failures.
For whitespace errors, see the file /Users/grout/.sage//tmp/sphinxify_78034.py
	 [3.1 s]
sage -t  -force_lib "devel/sagenb-main/sagenb/misc/support.py"
**********************************************************************
File "/Users/grout/sage-trees/sage-5.4/devel/sagenb-main/sagenb/misc/support.py", line 246:
    sage: D = docstring("r.lm", globs=globals())
Exception raised:
    Traceback (most recent call last):
      File "/Users/grout/sage-trees/sage-5.4/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/grout/sage-trees/sage-5.4/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/grout/sage-trees/sage-5.4/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_4[3]>", line 1, in <module>
        D = docstring("r.lm", globs=globals())###line 246:
    sage: D = docstring("r.lm", globs=globals())
      File "/Users/grout/sage-trees/sage-5.4/devel/sagenb/sagenb/misc/support.py", line 275, in docstring
        return html_markup(s.decode('utf-8'))
      File "/Users/grout/sage-trees/sage-5.4/devel/sagenb/sagenb/misc/support.py", line 280, in html_markup
        return sphinxify(s)
      File "/Users/grout/sage-trees/sage-5.4/devel/sagenb/sagenb/misc/sphinxify.py", line 79, in sphinxify
        filed.write(docstring)
    UnicodeEncodeError: 'ascii' codec can't encode character u'\u2018' in position 370: ordinal not in range(128)
**********************************************************************
1 items had failures:
   1 of   5 in __main__.example_4
***Test Failed*** 1 failures.
```


jhpalmieri, these both seem to be in your area of expertise.  What do you think?



---

archive/issue_comments_166530.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-16T16:09:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166530",
    "user": "https://github.com/jasongrout"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_166531.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-11-16T16:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166531",
    "user": "https://github.com/jasongrout"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_166532.json:
```json
{
    "body": "(I got those failures above on 5.4 using `sage -t -sagenb`.   Is the problem that I was working on 5.4?",
    "created_at": "2012-11-16T16:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166532",
    "user": "https://github.com/jasongrout"
}
```

(I got those failures above on 5.4 using `sage -t -sagenb`.   Is the problem that I was working on 5.4?



---

archive/issue_comments_166533.json:
```json
{
    "body": "I've moved discussion of these failing doctests back over to github: https://github.com/sagemath/sagenb/issues/112",
    "created_at": "2012-11-16T16:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166533",
    "user": "https://github.com/jasongrout"
}
```

I've moved discussion of these failing doctests back over to github: https://github.com/sagemath/sagenb/issues/112



---

archive/issue_comments_166534.json:
```json
{
    "body": "This now blocks #10353 is the sphinx problem the only thing holding the upgrade?",
    "created_at": "2013-01-15T21:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166534",
    "user": "https://github.com/kiwifb"
}
```

This now blocks #10353 is the sphinx problem the only thing holding the upgrade?



---

archive/issue_comments_166535.json:
```json
{
    "body": "I guess we should probably merge [gh-96](https://github.com/sagemath/sagenb/pull/96) for #13504 and [gh-125](https://github.com/sagemath/sagenb/pull/125) for #13678, along with a fix for the above mentioned sphinx issues, into 0.10.4 and update this ticket with a new spkg.",
    "created_at": "2013-01-16T08:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166535",
    "user": "https://github.com/kini"
}
```

I guess we should probably merge [gh-96](https://github.com/sagemath/sagenb/pull/96) for #13504 and [gh-125](https://github.com/sagemath/sagenb/pull/125) for #13678, along with a fix for the above mentioned sphinx issues, into 0.10.4 and update this ticket with a new spkg.



---

archive/issue_comments_166536.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-01-17T07:57:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166536",
    "user": "https://github.com/kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_166537.json:
```json
{
    "body": "Please test! :)",
    "created_at": "2013-01-17T07:58:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166537",
    "user": "https://github.com/kini"
}
```

Please test! :)



---

archive/issue_comments_166538.json:
```json
{
    "body": "\n```\njdemeyer@sage:/home/release/sage-5.7.beta0$ wget http://wstein.org/home/keshav/sagenb-0.10.4.spkg\n--11:07:30--  http://wstein.org/home/keshav/sagenb-0.10.4.spkg\n           => `sagenb-0.10.4.spkg'\nResolving wstein.org... 128.208.160.191, 128.208.160.197\nConnecting to wstein.org|128.208.160.191|:80... connected.\nHTTP request sent, awaiting response... 404 Not Found\n11:07:30 ERROR 404: Not Found.\n```\n",
    "created_at": "2013-01-17T10:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166538",
    "user": "https://github.com/jdemeyer"
}
```


```
jdemeyer@sage:/home/release/sage-5.7.beta0$ wget http://wstein.org/home/keshav/sagenb-0.10.4.spkg
--11:07:30--  http://wstein.org/home/keshav/sagenb-0.10.4.spkg
           => `sagenb-0.10.4.spkg'
Resolving wstein.org... 128.208.160.191, 128.208.160.197
Connecting to wstein.org|128.208.160.191|:80... connected.
HTTP request sent, awaiting response... 404 Not Found
11:07:30 ERROR 404: Not Found.
```




---

archive/issue_comments_166539.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-01-17T10:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166539",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_166540.json:
```json
{
    "body": "D'oh. Sorry about that.",
    "created_at": "2013-01-17T14:53:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166540",
    "user": "https://github.com/kini"
}
```

D'oh. Sorry about that.



---

archive/issue_comments_166541.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-01-17T14:53:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166541",
    "user": "https://github.com/kini"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_166542.json:
```json
{
    "body": "I won't formally review this, but it **builds and passes doctests** without problems on the buildbots.",
    "created_at": "2013-01-20T08:40:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166542",
    "user": "https://github.com/jdemeyer"
}
```

I won't formally review this, but it **builds and passes doctests** without problems on the buildbots.



---

archive/issue_comments_166543.json:
```json
{
    "body": "Glad to hear it!",
    "created_at": "2013-01-20T09:31:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166543",
    "user": "https://github.com/kini"
}
```

Glad to hear it!



---

archive/issue_comments_166544.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-01-23T15:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166544",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_166545.json:
```json
{
    "body": "Packaging of the sagenb point release looks good to me.",
    "created_at": "2013-01-23T15:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166545",
    "user": "https://github.com/vbraun"
}
```

Packaging of the sagenb point release looks good to me.



---

archive/issue_events_013380.json:
```json
{
    "actor": "@jdemeyer",
    "created_at": "2013-01-23T15:36:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13513#event-13380"
}
```



---

archive/issue_comments_166546.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-01-23T15:36:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166546",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_166547.json:
```json
{
    "body": "Followup: #14330",
    "created_at": "2013-03-22T02:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13513",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13513#issuecomment-166547",
    "user": "https://github.com/kini"
}
```

Followup: #14330
