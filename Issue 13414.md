# Issue 13414: Doctest coverage to rings

archive/issues_013414.json:
```json
{
    "body": "Assignee: tscrim\n\nCC:  kini\n\nKeywords: doctests\n\nAdding doctests to\n\n* `rings/complex*`\n* `rings/homset.py`\n* `rings/ideal.py`\n* `rings/rational*`\n\nas part of #12024 and cleaning up documentation.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13618\n\n",
    "created_at": "2012-10-19T00:40:18Z",
    "labels": [
        "doctest coverage",
        "major",
        "enhancement"
    ],
    "title": "Doctest coverage to rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13414",
    "user": "tscrim"
}
```
Assignee: tscrim

CC:  kini

Keywords: doctests

Adding doctests to

* `rings/complex*`
* `rings/homset.py`
* `rings/ideal.py`
* `rings/rational*`

as part of #12024 and cleaning up documentation.

Issue created by migration from https://trac.sagemath.org/ticket/13618





---

archive/issue_comments_165251.json:
```json
{
    "body": "The dependency on #13634 is for the output of scientific notation of complex interval field.",
    "created_at": "2012-10-21T06:05:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165251",
    "user": "tscrim"
}
```

The dependency on #13634 is for the output of scientific notation of complex interval field.



---

archive/issue_comments_165252.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-10-22T01:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165252",
    "user": "tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_165253.json:
```json
{
    "body": "If someone is willing to review this, please also review the smaller #13634. Thank you.",
    "created_at": "2012-10-22T01:46:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165253",
    "user": "tscrim"
}
```

If someone is willing to review this, please also review the smaller #13634. Thank you.



---

archive/issue_comments_165254.json:
```json
{
    "body": "Adding #12802 as a dependency since it modifies `ideal.py`. I will upload a rebased patch in the near future once I finish `rings/real*`.",
    "created_at": "2012-11-03T01:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165254",
    "user": "tscrim"
}
```

Adding #12802 as a dependency since it modifies `ideal.py`. I will upload a rebased patch in the near future once I finish `rings/real*`.



---

archive/issue_comments_165255.json:
```json
{
    "body": "Ready for review.",
    "created_at": "2012-11-03T19:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165255",
    "user": "tscrim"
}
```

Ready for review.



---

archive/issue_comments_165256.json:
```json
{
    "body": "<edit>Removed patchbot message</edit>",
    "created_at": "2012-11-05T03:11:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165256",
    "user": "tscrim"
}
```

<edit>Removed patchbot message</edit>



---

archive/issue_comments_165257.json:
```json
{
    "body": "The doctests fail, you need separate # 32bit  / # 64bit cases for the `__hash__`'es",
    "created_at": "2012-11-06T02:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165257",
    "user": "vbraun"
}
```

The doctests fail, you need separate # 32bit  / # 64bit cases for the `__hash__`'es



---

archive/issue_comments_165258.json:
```json
{
    "body": "Replying to [comment:6 vbraun]:\n> The doctests fail, you need separate # 32bit  / # 64bit cases for the `__hash__`'es\n\nWhat's the best way to do so? Thanks.",
    "created_at": "2012-11-06T21:00:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165258",
    "user": "tscrim"
}
```

Replying to [comment:6 vbraun]:
> The doctests fail, you need separate # 32bit  / # 64bit cases for the `__hash__`'es

What's the best way to do so? Thanks.



---

archive/issue_comments_165259.json:
```json
{
    "body": "Here is an example from sage/rings/polynomial/infinite_polynomial_element.py\n\n```\n    def _hash_(self):\n        \"\"\"\n        TESTS::\n\n            sage: X.<x> = InfinitePolynomialRing(QQ)\n            sage: a = x[0] + x[1]\n            sage: hash(a) # indirect doctest\n            -6172640511012239345   # 64-bit\n            -957478897             # 32-bit\n\n        \"\"\"\n        return hash(self._p)\n```\n",
    "created_at": "2012-11-06T21:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165259",
    "user": "vbraun"
}
```

Here is an example from sage/rings/polynomial/infinite_polynomial_element.py

```
    def _hash_(self):
        """
        TESTS::

            sage: X.<x> = InfinitePolynomialRing(QQ)
            sage: a = x[0] + x[1]
            sage: hash(a) # indirect doctest
            -6172640511012239345   # 64-bit
            -957478897             # 32-bit

        """
        return hash(self._p)
```




---

archive/issue_comments_165260.json:
```json
{
    "body": "Changed. Thank you.\n\nEdit:\n\nFor patchbot:\n\nApply: trac_13618-rings_doc-ts.patch",
    "created_at": "2012-11-06T22:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165260",
    "user": "tscrim"
}
```

Changed. Thank you.

Edit:

For patchbot:

Apply: trac_13618-rings_doc-ts.patch



---

archive/issue_comments_165261.json:
```json
{
    "body": "It would be a pity to lose all this work, any chance it can be rebased and fixed?",
    "created_at": "2013-02-05T19:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165261",
    "user": "jdemeyer"
}
```

It would be a pity to lose all this work, any chance it can be rebased and fixed?



---

archive/issue_comments_165262.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-02-05T19:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165262",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_165263.json:
```json
{
    "body": "I'll upgrade my version of sage tonight and rebase it.",
    "created_at": "2013-02-05T19:32:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165263",
    "user": "tscrim"
}
```

I'll upgrade my version of sage tonight and rebase it.



---

archive/issue_comments_165264.json:
```json
{
    "body": "I've rebased and split it into 3 more manageable files.\n\nFor patchbot:\n\nApply: attachment:trac_13618-rings_doc_real-ts.patch, trac_13618-rings_doc_complex-ts.patch, trac_13618-rings_doc_others-ts.patch",
    "created_at": "2013-02-06T15:16:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165264",
    "user": "tscrim"
}
```

I've rebased and split it into 3 more manageable files.

For patchbot:

Apply: attachment:trac_13618-rings_doc_real-ts.patch, trac_13618-rings_doc_complex-ts.patch, trac_13618-rings_doc_others-ts.patch



---

archive/issue_comments_165265.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-02-06T15:16:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165265",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_165266.json:
```json
{
    "body": "I hereby intend to review a part of this ticket: the `real*` bit. I will come up with comments, if any in a few hours. ~KnS",
    "created_at": "2013-02-10T11:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165266",
    "user": "knsam"
}
```

I hereby intend to review a part of this ticket: the `real*` bit. I will come up with comments, if any in a few hours. ~KnS



---

archive/issue_comments_165267.json:
```json
{
    "body": "Oops!! I applied the `real*` patch but tests fail! sage -t real* spits out a whole bunch of error on Sage 5.7.beta4 (I am on a ubuntu 12.04 64 bit box). \n\nCould you point me the mistake I am making?",
    "created_at": "2013-02-10T13:16:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165267",
    "user": "knsam"
}
```

Oops!! I applied the `real*` patch but tests fail! sage -t real* spits out a whole bunch of error on Sage 5.7.beta4 (I am on a ubuntu 12.04 64 bit box). 

Could you point me the mistake I am making?



---

archive/issue_comments_165268.json:
```json
{
    "body": "Hmmm...did the patch apply cleanly? What are the errors?\n\nAlso, you should apply the complex* part since that adds a few of the real* files to the doc.\n\nBest,\n\nTravis",
    "created_at": "2013-02-10T14:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165268",
    "user": "tscrim"
}
```

Hmmm...did the patch apply cleanly? What are the errors?

Also, you should apply the complex* part since that adds a few of the real* files to the doc.

Best,

Travis



---

archive/issue_comments_165269.json:
```json
{
    "body": "For the record, this also takes care of #13383.",
    "created_at": "2013-02-16T03:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165269",
    "user": "tscrim"
}
```

For the record, this also takes care of #13383.



---

archive/issue_comments_165270.json:
```json
{
    "body": "I've looked through the other two patches and they look good to me except that there is lots of unnecessary whitespace change. This does nothing but break other patches on trac. We'll programmatically remove trailing whitespace when we change to git. Can you go through them and at least remove the patch hunks that do nothing but whitespace change? Like this\n\n```\n[...]\n@@ -359,9 +422,9 @@ class Ideal_generic(MonoidElement):\n     def base_ring(self):\n         r\"\"\"\n         Returns the base ring of this ideal.\n-        \n+\n         EXAMPLES::\n-        \n+\n             sage: R = ZZ\n             sage: I = 3*R; I\n             Principal ideal (3) of Integer Ring\n@@ -370,16 +433,16 @@ class Ideal_generic(MonoidElement):\n[...]\n```\n\nKannappan, are you still reviewing the \"real\" patch?",
    "created_at": "2013-02-17T13:06:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165270",
    "user": "vbraun"
}
```

I've looked through the other two patches and they look good to me except that there is lots of unnecessary whitespace change. This does nothing but break other patches on trac. We'll programmatically remove trailing whitespace when we change to git. Can you go through them and at least remove the patch hunks that do nothing but whitespace change? Like this

```
[...]
@@ -359,9 +422,9 @@ class Ideal_generic(MonoidElement):
     def base_ring(self):
         r"""
         Returns the base ring of this ideal.
-        
+
         EXAMPLES::
-        
+
             sage: R = ZZ
             sage: I = 3*R; I
             Principal ideal (3) of Integer Ring
@@ -370,16 +433,16 @@ class Ideal_generic(MonoidElement):
[...]
```

Kannappan, are you still reviewing the "real" patch?



---

archive/issue_comments_165271.json:
```json
{
    "body": "Oops! Sorry for the delay!! I had to look through, because reviewing doctests is new to me. But, I have just finished it! \n\nHere are some trivial comments, rectifying these as necessary should give this positive review: \n\n1. In `real_double`, `real_mpfr`: It might be nice if we codify the PARI commands too. For instance, the algorithm for `algebraic_dependence()` and `algdep()`, we refer to the PARI command `algdep`. \n2. In `real_mpfi`: In the documentation for the method `str()`, could you please use `\\cdot` instead of `*`? \n3. In `real_interval_absolute`: Some docstrings are too short to be useful; we'd also would have to look into the grammar and codify appropriate things like self. The example for `upper()` is not formatted properly. (I'd be totally OK if this goes into another ticket.) \n\nElse, as I said, this is fantastic! \n\n~KnS",
    "created_at": "2013-02-17T17:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165271",
    "user": "knsam"
}
```

Oops! Sorry for the delay!! I had to look through, because reviewing doctests is new to me. But, I have just finished it! 

Here are some trivial comments, rectifying these as necessary should give this positive review: 

1. In `real_double`, `real_mpfr`: It might be nice if we codify the PARI commands too. For instance, the algorithm for `algebraic_dependence()` and `algdep()`, we refer to the PARI command `algdep`. 
2. In `real_mpfi`: In the documentation for the method `str()`, could you please use `\cdot` instead of `*`? 
3. In `real_interval_absolute`: Some docstrings are too short to be useful; we'd also would have to look into the grammar and codify appropriate things like self. The example for `upper()` is not formatted properly. (I'd be totally OK if this goes into another ticket.) 

Else, as I said, this is fantastic! 

~KnS



---

archive/issue_comments_165272.json:
```json
{
    "body": "Attachment [trac_13618-rings_doc_others-ts.patch](tarball://root/attachments/some-uuid/ticket13618/trac_13618-rings_doc_others-ts.patch) by tscrim created at 2013-02-17 19:17:28\n\nEverything else",
    "created_at": "2013-02-17T19:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165272",
    "user": "tscrim"
}
```

Attachment [trac_13618-rings_doc_others-ts.patch](tarball://root/attachments/some-uuid/ticket13618/trac_13618-rings_doc_others-ts.patch) by tscrim created at 2013-02-17 19:17:28

Everything else



---

archive/issue_comments_165273.json:
```json
{
    "body": "Alright, I've removed all the whitespace hunks I could find and addressed all of Kannappan's comments as much as I could. Thank you both for reviewing this!\n\nThank you,\n\nTravis\n\nPS - Also incase anyone is feeling extra generous (or wants me to owe them another favor) there's also the followup #13685.",
    "created_at": "2013-02-17T19:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165273",
    "user": "tscrim"
}
```

Alright, I've removed all the whitespace hunks I could find and addressed all of Kannappan's comments as much as I could. Thank you both for reviewing this!

Thank you,

Travis

PS - Also incase anyone is feeling extra generous (or wants me to owe them another favor) there's also the followup #13685.



---

archive/issue_comments_165274.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-02-17T20:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165274",
    "user": "vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_165275.json:
```json
{
    "body": "This needs to be rebased to #6495.",
    "created_at": "2013-02-19T10:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165275",
    "user": "jdemeyer"
}
```

This needs to be rebased to #6495.



---

archive/issue_comments_165276.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-02-19T10:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165276",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_165277.json:
```json
{
    "body": "Attachment [trac_13618-rings_doc_complex-ts.patch](tarball://root/attachments/some-uuid/ticket13618/trac_13618-rings_doc_complex-ts.patch) by tscrim created at 2013-02-19 15:20:55\n\nRebased",
    "created_at": "2013-02-19T15:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165277",
    "user": "tscrim"
}
```

Attachment [trac_13618-rings_doc_complex-ts.patch](tarball://root/attachments/some-uuid/ticket13618/trac_13618-rings_doc_complex-ts.patch) by tscrim created at 2013-02-19 15:20:55

Rebased



---

archive/issue_comments_165278.json:
```json
{
    "body": "Rebased",
    "created_at": "2013-02-19T15:56:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165278",
    "user": "tscrim"
}
```

Rebased



---

archive/issue_comments_165279.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-02-19T15:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165279",
    "user": "tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_165280.json:
```json
{
    "body": "Attachment [trac_13618-rings_doc_real-ts.patch](tarball://root/attachments/some-uuid/ticket13618/trac_13618-rings_doc_real-ts.patch) by tscrim created at 2013-02-19 15:57:31\n\nRebased.",
    "created_at": "2013-02-19T15:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165280",
    "user": "tscrim"
}
```

Attachment [trac_13618-rings_doc_real-ts.patch](tarball://root/attachments/some-uuid/ticket13618/trac_13618-rings_doc_real-ts.patch) by tscrim created at 2013-02-19 15:57:31

Rebased.



---

archive/issue_comments_165281.json:
```json
{
    "body": "Congratulations!\n\n\n```\nOverall weighted coverage score:  90.6%\nTotal number of functions:  31495\nWe need 1397 more functions to get to 95% coverage.\nWe need 2657 more functions to get to 99% coverage.\n```\n",
    "created_at": "2013-02-20T10:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165281",
    "user": "jdemeyer"
}
```

Congratulations!


```
Overall weighted coverage score:  90.6%
Total number of functions:  31495
We need 1397 more functions to get to 95% coverage.
We need 2657 more functions to get to 99% coverage.
```




---

archive/issue_comments_165282.json:
```json
{
    "body": "Replying to [comment:26 jdemeyer]:\n> Congratulations!\n> \n> {{{\n> Overall weighted coverage score:  90.6%\n> Total number of functions:  31495\n> We need 1397 more functions to get to 95% coverage.\n> We need 2657 more functions to get to 99% coverage.\n> }}}\n\nYay! So what should we do about #12024? Set it to positive review?",
    "created_at": "2013-02-21T17:21:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165282",
    "user": "tscrim"
}
```

Replying to [comment:26 jdemeyer]:
> Congratulations!
> 
> {{{
> Overall weighted coverage score:  90.6%
> Total number of functions:  31495
> We need 1397 more functions to get to 95% coverage.
> We need 2657 more functions to get to 99% coverage.
> }}}

Yay! So what should we do about #12024? Set it to positive review?



---

archive/issue_comments_165283.json:
```json
{
    "body": "Replying to [comment:27 tscrim]: \n> Yay! So what should we do about #12024? Set it to positive review?\n\nIMHO, that could still serve as a meta ticket, so that all we can track all the work proposed to be undertaken by various developers and those unclaimed still remain. Perhaps, we should change the title to something else. But, not close it. Just my feeling, but feel free to ignore. ~KnS",
    "created_at": "2013-02-21T17:29:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165283",
    "user": "knsam"
}
```

Replying to [comment:27 tscrim]: 
> Yay! So what should we do about #12024? Set it to positive review?

IMHO, that could still serve as a meta ticket, so that all we can track all the work proposed to be undertaken by various developers and those unclaimed still remain. Perhaps, we should change the title to something else. But, not close it. Just my feeling, but feel free to ignore. ~KnS



---

archive/issue_comments_165284.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-02-22T19:11:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165284",
    "user": "jdemeyer"
}
```

Resolution: fixed



---

archive/issue_comments_165285.json:
```json
{
    "body": "Since this patch is already merged, the following advise can only serve as a warning for the future: **you should not make needless whitespace changes**. Changing whitespace all over the place makes rebasing more difficult than it should be.",
    "created_at": "2013-02-27T18:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13414",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13414#issuecomment-165285",
    "user": "jdemeyer"
}
```

Since this patch is already merged, the following advise can only serve as a warning for the future: **you should not make needless whitespace changes**. Changing whitespace all over the place makes rebasing more difficult than it should be.
