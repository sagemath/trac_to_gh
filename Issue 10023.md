# Issue 10023: dump()/dumps() fails for class Polyhedron

Issue created by migration from https://trac.sagemath.org/ticket/10024

Original creator: terhorst

Original creation time: 2010-09-27 21:50:40

Assignee: mhampton

CC:  vbraun

Polyhedra (objects of class Polyhedron) cannot be dumped or saved:


```
sage: polytopes.dodecahedron(QQ).dumps()
---------------------------------------------------------------------------
PicklingError                             Traceback (most recent call last)

/home/terhorst/<ipython console> in <module>()

/opt/sage/local/lib/python2.6/site-packages/sage/structure/sage_object.so in sage.structure.sage_object.SageObject.dumps (sage/structure/sage_object.c:2108)()

PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed
```


As a workaround, I pickle a hash of the rays, vertices, and lines defining the polyhedron. 



---

Comment by novoselt created at 2010-09-28 01:59:26

Changing keywords from "" to "polyhedron polyhedra pickle dumps dump".


---

Attachment

Initial patch


---

Comment by vbraun created at 2010-10-24 18:59:45

Changing status from new to needs_review.


---

Comment by vbraun created at 2010-10-24 18:59:45

Patch fixes `load`/`dump` and adds comparisons, for example, `P<=Q` means `P` is a not-necessarily-strict subpolyhedron of `Q`.


---

Comment by novoselt created at 2010-10-30 03:08:54

1. I think `__setstate__` would look better without checks for `exclude_keys` which is unnecessary.
 1. Equality/"non-equality" tests seem to be not the most efficient ones, although for generic polyhedra it is not obvious what one should do instead.
 1. Chosen definition of `==`, i.e. equality as sets of points, fits nicely together with other containment checks, but is inconsistent with the current situation for cones and fans. This bugs me a little bit, but not too much and I still prefer cones to take into account the ray order.

Anyway, all this is more like just thinking aloud, I am satisfied with the patch as is and switching it to positive review! (But feel free to address the first issue if you want ;-))


---

Comment by novoselt created at 2010-10-30 03:08:54

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2010-11-01 10:13:00

Resolution: fixed
