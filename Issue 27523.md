# Issue 27523: Generalized Permutohedra and type H4 4-uniform polytopes

archive/issues_027523.json:
```json
{
    "body": "CC:  winfried @jplab @mkoeppe @videlec @tscrim\n\nKeywords: polytopes, non-rational, normaliz\n\nOne sort of generalized permutahedra consists in putting the starting point, which is usually taken inside the fundamental chamber, on the boundary of the fundamental chamber.\n\nSee https://arxiv.org/abs/1904.11029 for a recent related paper.\n\nThis ticket implements the generalized permutahedra and on the way, adds the fifteen H4 4-uniform polytopes.\n\nSee https://en.wikipedia.org/wiki/H4_polytope for a list of them.\n\nMany of them are quite large and can only be computed in reasonable time using the backend `normaliz`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/27760\n\n",
    "created_at": "2019-05-02T14:56:33Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "Generalized Permutohedra and type H4 4-uniform polytopes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27523",
    "user": "https://github.com/jplab"
}
```
CC:  winfried @jplab @mkoeppe @videlec @tscrim

Keywords: polytopes, non-rational, normaliz

One sort of generalized permutahedra consists in putting the starting point, which is usually taken inside the fundamental chamber, on the boundary of the fundamental chamber.

See https://arxiv.org/abs/1904.11029 for a recent related paper.

This ticket implements the generalized permutahedra and on the way, adds the fifteen H4 4-uniform polytopes.

See https://en.wikipedia.org/wiki/H4_polytope for a list of them.

Many of them are quite large and can only be computed in reasonable time using the backend `normaliz`.

Issue created by migration from https://trac.sagemath.org/ticket/27760





---

archive/issue_comments_387832.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-02T15:02:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387832",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387833.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-02T15:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387833",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387834.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-03T10:12:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387834",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387835.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-03T11:34:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387835",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387836.json:
```json
{
    "body": "As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387836",
    "user": "https://github.com/embray"
}
```

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_comments_387837.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-21T16:05:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387837",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387838.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-21T16:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387838",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387839.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-07-21T16:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387839",
    "user": "https://github.com/jplab"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_387840.json:
```json
{
    "body": "Changing keywords from \"polytopes, non-rational, normaliz\" to \"polytopes, non-rational, normaliz, days100\".",
    "created_at": "2019-07-21T16:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387840",
    "user": "https://github.com/jplab"
}
```

Changing keywords from "polytopes, non-rational, normaliz" to "polytopes, non-rational, normaliz, days100".



---

archive/issue_comments_387841.json:
```json
{
    "body": "apparemment, la doc ne compile pas, voir patchbot",
    "created_at": "2019-07-21T20:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387841",
    "user": "https://github.com/fchapoton"
}
```

apparemment, la doc ne compile pas, voir patchbot



---

archive/issue_comments_387842.json:
```json
{
    "body": "Replying to [comment:10 chapoton]:\n> apparemment, la doc ne compile pas, voir patchbot\n\nHm, all right. I'm on it!",
    "created_at": "2019-07-21T20:13:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387842",
    "user": "https://github.com/jplab"
}
```

Replying to [comment:10 chapoton]:
> apparemment, la doc ne compile pas, voir patchbot

Hm, all right. I'm on it!



---

archive/issue_comments_387843.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-21T20:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387843",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387844.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-22T09:55:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387844",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387845.json:
```json
{
    "body": "* missing the word 'polytope' here, I think:\n\n```\nThe runcitruncated 600-cell is a 4-dimensional 4-uniform in the `H_4`\n```\n\nand the same in all the examples.\n\n* Here, you could remove the `[]`\n\n```\nsum([adjusted_col[j]**2 for j in range(n) if j != i])\n```\n\n\napart from that, ready to go..",
    "created_at": "2019-07-22T20:18:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387845",
    "user": "https://github.com/fchapoton"
}
```

* missing the word 'polytope' here, I think:

```
The runcitruncated 600-cell is a 4-dimensional 4-uniform in the `H_4`
```

and the same in all the examples.

* Here, you could remove the `[]`

```
sum([adjusted_col[j]**2 for j in range(n) if j != i])
```


apart from that, ready to go..



---

archive/issue_comments_387846.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-23T06:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387846",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387847.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-23T09:22:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387847",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_387848.json:
```json
{
    "body": "ok, good to go",
    "created_at": "2019-07-23T09:22:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387848",
    "user": "https://github.com/fchapoton"
}
```

ok, good to go



---

archive/issue_comments_387849.json:
```json
{
    "body": "Merci!",
    "created_at": "2019-07-23T14:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387849",
    "user": "https://github.com/jplab"
}
```

Merci!



---

archive/issue_comments_387850.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-07-25T20:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387850",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_387851.json:
```json
{
    "body": "This dies on most 32-bit buildbots:\n\n```\nsage: perm_b3 = polytopes.generalized_permutahedron(['B',3]); perm_b3 ## line 2324 ##\nA 3-dimensional polyhedron in (Number Field in a with defining polynomial x^2 - 2 with a = 1.414213562373095?)^3 defined as the convex hull of 48 vertices\nsage: perm_b3_reg = polytopes.generalized_permutahedron(['B',3],regular=True); perm_b3_reg # long time - 12sec. ## line 2326 ##\n------------------------------------------------------------------------\n/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/cysignals/signals.so(+0x5f22)[0xf5fbdf22]\n/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/cysignals/signals.so(+0x5fc6)[0xf5fbdfc6]\n/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/cysignals/signals.so(+0x76e5)[0xf5fbf6e5]\nlinux-gate.so.1(__kernel_sigreturn+0x0)[0xf77b6ca0]\n/home/buildbot/slave/sage_git/build/local/lib/libgmp.so.23(__gmpn_mul_basecase+0x83)[0xf6cabd4b]\n------------------------------------------------------------------------\nAttaching gdb to process id 20319.\nCannot find gdb installed\nGDB is not installed.\nInstall gdb for enhanced tracebacks.\n------------------------------------------------------------------------\n**********************************************************************\n----------------------------------------------------------------------\nsage -t --long src/sage/geometry/polyhedron/library.py  # Timed out\n----------------------------------------------------------------------\n```\n",
    "created_at": "2019-07-25T20:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387851",
    "user": "https://github.com/vbraun"
}
```

This dies on most 32-bit buildbots:

```
sage: perm_b3 = polytopes.generalized_permutahedron(['B',3]); perm_b3 ## line 2324 ##
A 3-dimensional polyhedron in (Number Field in a with defining polynomial x^2 - 2 with a = 1.414213562373095?)^3 defined as the convex hull of 48 vertices
sage: perm_b3_reg = polytopes.generalized_permutahedron(['B',3],regular=True); perm_b3_reg # long time - 12sec. ## line 2326 ##
------------------------------------------------------------------------
/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/cysignals/signals.so(+0x5f22)[0xf5fbdf22]
/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/cysignals/signals.so(+0x5fc6)[0xf5fbdfc6]
/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/cysignals/signals.so(+0x76e5)[0xf5fbf6e5]
linux-gate.so.1(__kernel_sigreturn+0x0)[0xf77b6ca0]
/home/buildbot/slave/sage_git/build/local/lib/libgmp.so.23(__gmpn_mul_basecase+0x83)[0xf6cabd4b]
------------------------------------------------------------------------
Attaching gdb to process id 20319.
Cannot find gdb installed
GDB is not installed.
Install gdb for enhanced tracebacks.
------------------------------------------------------------------------
**********************************************************************
----------------------------------------------------------------------
sage -t --long src/sage/geometry/polyhedron/library.py  # Timed out
----------------------------------------------------------------------
```




---

archive/issue_comments_387852.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-28T10:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387852",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387853.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-07-28T10:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387853",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_387854.json:
```json
{
    "body": "ok, let us try again",
    "created_at": "2019-07-28T11:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387854",
    "user": "https://github.com/fchapoton"
}
```

ok, let us try again



---

archive/issue_comments_387855.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-07-28T11:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387855",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_387856.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-07-29T13:03:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387856",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_387857.json:
```json
{
    "body": "\n```\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/library.py\", line 2324, in sage.geometry.polyhedron.library.Polytopes.generalized_permutahedron\nFailed example:\n    perm_b3 = polytopes.generalized_permutahedron(['B',3]); perm_b3\nExpected:\n    A 3-dimensional polyhedron in (Number Field in a with defining polynomial x^2 - 2 with a = 1.414213562373095?)^3 defined as the convex hull of 48 vertices\n    A 3-dimensional polyhedron in AA^3 defined as the convex hull of 48 vertices\nGot:\n    A 3-dimensional polyhedron in (Number Field in a with defining polynomial x^2 - 2 with a = 1.414213562373095?)^3 defined as the convex hull of 48 vertices\n**********************************************************************\n1 item had failures:\n   1 of  21 in sage.geometry.polyhedron.library.Polytopes.generalized_permutahedron\n    [240 tests, 1 failure, 156.68 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/geometry/polyhedron/library.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n",
    "created_at": "2019-07-29T13:03:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387857",
    "user": "https://github.com/vbraun"
}
```


```
**********************************************************************
File "src/sage/geometry/polyhedron/library.py", line 2324, in sage.geometry.polyhedron.library.Polytopes.generalized_permutahedron
Failed example:
    perm_b3 = polytopes.generalized_permutahedron(['B',3]); perm_b3
Expected:
    A 3-dimensional polyhedron in (Number Field in a with defining polynomial x^2 - 2 with a = 1.414213562373095?)^3 defined as the convex hull of 48 vertices
    A 3-dimensional polyhedron in AA^3 defined as the convex hull of 48 vertices
Got:
    A 3-dimensional polyhedron in (Number Field in a with defining polynomial x^2 - 2 with a = 1.414213562373095?)^3 defined as the convex hull of 48 vertices
**********************************************************************
1 item had failures:
   1 of  21 in sage.geometry.polyhedron.library.Polytopes.generalized_permutahedron
    [240 tests, 1 failure, 156.68 s]
----------------------------------------------------------------------
sage -t --long src/sage/geometry/polyhedron/library.py  # 1 doctest failed
----------------------------------------------------------------------
```




---

archive/issue_comments_387858.json:
```json
{
    "body": "Replying to [comment:23 vbraun]:\n> {{{\n> **********************************************************************\n> File \"src/sage/geometry/polyhedron/library.py\", line 2324, in sage.geometry.polyhedron.library.Polytopes.generalized_permutahedron\n> Failed example:\n>     perm_b3 = polytopes.generalized_permutahedron(['B',3]); perm_b3\n> Expected:\n>     A 3-dimensional polyhedron in (Number Field in a with defining polynomial x^2 - 2 with a = 1.414213562373095?)^3 defined as the convex hull of 48 vertices\n>     A 3-dimensional polyhedron in AA^3 defined as the convex hull of 48 vertices\n> Got:\n>     A 3-dimensional polyhedron in (Number Field in a with defining polynomial x^2 - 2 with a = 1.414213562373095?)^3 defined as the convex hull of 48 vertices\n> **********************************************************************\n> 1 item had failures:\n>    1 of  21 in sage.geometry.polyhedron.library.Polytopes.generalized_permutahedron\n>     [240 tests, 1 failure, 156.68 s]\n> ----------------------------------------------------------------------\n> sage -t --long src/sage/geometry/polyhedron/library.py  # 1 doctest failed\n> ----------------------------------------------------------------------\n> }}}\n\nI have trouble figuring out how this failure occurred. \n\nThe expected block is not as the attached branch would predict. Namely, the second line is absent. I merged the last version of develop into this ticket and made a test on my machine and I got:\n\n\n```\njplabbe@blackbomb:~/sage/src/sage/geometry/polyhedron$ sage -t library.py \nUsing --optional=4ti2,bliss,build,dochtml,e_antic,gfortran,latte_int,lidia,lrslib,memlimit,ninja_build,normaliz,pynormaliz,python2,sage,topcom\nDoctesting 1 file.\nsage -t library.py\n    [305 tests, 77.99 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 78.1 seconds\n    cpu time: 78.0 seconds\n    cumulative wall time: 78.0 seconds\n```\n\n\nI get 305 tests in total. Would it be possible to get more feedback on how this failing doctest occurred? (which optional packages were used?)",
    "created_at": "2019-08-21T12:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387858",
    "user": "https://github.com/jplab"
}
```

Replying to [comment:23 vbraun]:
> {{{
> **********************************************************************
> File "src/sage/geometry/polyhedron/library.py", line 2324, in sage.geometry.polyhedron.library.Polytopes.generalized_permutahedron
> Failed example:
>     perm_b3 = polytopes.generalized_permutahedron(['B',3]); perm_b3
> Expected:
>     A 3-dimensional polyhedron in (Number Field in a with defining polynomial x^2 - 2 with a = 1.414213562373095?)^3 defined as the convex hull of 48 vertices
>     A 3-dimensional polyhedron in AA^3 defined as the convex hull of 48 vertices
> Got:
>     A 3-dimensional polyhedron in (Number Field in a with defining polynomial x^2 - 2 with a = 1.414213562373095?)^3 defined as the convex hull of 48 vertices
> **********************************************************************
> 1 item had failures:
>    1 of  21 in sage.geometry.polyhedron.library.Polytopes.generalized_permutahedron
>     [240 tests, 1 failure, 156.68 s]
> ----------------------------------------------------------------------
> sage -t --long src/sage/geometry/polyhedron/library.py  # 1 doctest failed
> ----------------------------------------------------------------------
> }}}

I have trouble figuring out how this failure occurred. 

The expected block is not as the attached branch would predict. Namely, the second line is absent. I merged the last version of develop into this ticket and made a test on my machine and I got:


```
jplabbe@blackbomb:~/sage/src/sage/geometry/polyhedron$ sage -t library.py 
Using --optional=4ti2,bliss,build,dochtml,e_antic,gfortran,latte_int,lidia,lrslib,memlimit,ninja_build,normaliz,pynormaliz,python2,sage,topcom
Doctesting 1 file.
sage -t library.py
    [305 tests, 77.99 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 78.1 seconds
    cpu time: 78.0 seconds
    cumulative wall time: 78.0 seconds
```


I get 305 tests in total. Would it be possible to get more feedback on how this failing doctest occurred? (which optional packages were used?)



---

archive/issue_comments_387859.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-08-21T12:41:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387859",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387860.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-08-21T12:42:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387860",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_387861.json:
```json
{
    "body": "Let's have another run of bots to see if the problem still occurs. This failure is strange.",
    "created_at": "2019-08-21T12:45:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387861",
    "user": "https://github.com/jplab"
}
```

Let's have another run of bots to see if the problem still occurs. This failure is strange.



---

archive/issue_comments_387862.json:
```json
{
    "body": "patchbot reports another failure",
    "created_at": "2019-08-22T10:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387862",
    "user": "https://github.com/fchapoton"
}
```

patchbot reports another failure



---

archive/issue_comments_387863.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-08-22T10:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387863",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387864.json:
```json
{
    "body": "Found it.\n\nIt was a missing tag from fixing comment 19. Should be good to go now...",
    "created_at": "2019-08-22T10:50:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387864",
    "user": "https://github.com/jplab"
}
```

Found it.

It was a missing tag from fixing comment 19. Should be good to go now...



---

archive/issue_comments_387865.json:
```json
{
    "body": "Adding tags on the results of doctests make no sense.\n\nThis does not fix the patchbot failure.",
    "created_at": "2019-08-23T06:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387865",
    "user": "https://github.com/fchapoton"
}
```

Adding tags on the results of doctests make no sense.

This does not fix the patchbot failure.



---

archive/issue_comments_387866.json:
```json
{
    "body": "Replying to [comment:31 chapoton]:\n> Adding tags on the results of doctests make no sense.\n> \n> This does not fix the patchbot failure.\n\nThat's what I thought at first too!\n\nBut then, that's the only way I can make sense of seeing \n\n\n```\nExpected:\n    A 3-dimensional polyhedron in (Number Field in a with defining polynomial x^2 - 2 with a = 1.414213562373095?)^3 defined as the convex hull of 48 vertices\n    A 3-dimensional polyhedron in AA^3 defined as the convex hull of 48 vertices\n```\n\n\nwhich are two distinct consecutive outputs of test, the second of which is not tested. I was thinking that it might preparse the string and remove the not tested things and thus the expected block would now consist of two lines.\n\nOtherwise, I have no clue how come the expected block would consist of two lines, it is simply not as the source entails!?\n\nPuzzled.",
    "created_at": "2019-08-23T08:44:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387866",
    "user": "https://github.com/jplab"
}
```

Replying to [comment:31 chapoton]:
> Adding tags on the results of doctests make no sense.
> 
> This does not fix the patchbot failure.

That's what I thought at first too!

But then, that's the only way I can make sense of seeing 


```
Expected:
    A 3-dimensional polyhedron in (Number Field in a with defining polynomial x^2 - 2 with a = 1.414213562373095?)^3 defined as the convex hull of 48 vertices
    A 3-dimensional polyhedron in AA^3 defined as the convex hull of 48 vertices
```


which are two distinct consecutive outputs of test, the second of which is not tested. I was thinking that it might preparse the string and remove the not tested things and thus the expected block would now consist of two lines.

Otherwise, I have no clue how come the expected block would consist of two lines, it is simply not as the source entails!?

Puzzled.



---

archive/issue_comments_387867.json:
```json
{
    "body": "Replying to [comment:31 chapoton]:\n> Adding tags on the results of doctests make no sense.\n> \n> This does not fix the patchbot failure.\n\nFrom the patch bot shortog, the following information is a bit obscure:\n\n\n```\nExpected:\n    There are 7 tests in sage/combinat/finite_state_machine.py that are not being run\n    There are 3 unexpected tests being run in sage/doctest/parsing.py\n    There are 1 unexpected tests being run in sage/doctest/reporting.py\n    There are 3 tests in sage/rings/invariants/invariant_theory.py that are not being run\nGot:\n    There are 7 tests in sage/combinat/finite_state_machine.py that are not being run\n    There are 3 unexpected tests being run in sage/doctest/parsing.py\n    There are 1 unexpected tests being run in sage/doctest/reporting.py\n    There are 1 unexpected tests being run in sage/geometry/polyhedron/library.py\n    There are 3 tests in sage/rings/invariants/invariant_theory.py that are not being run\n**********************************************************************\n```\n\n\nI guess it is the same test that causes a problem, but I have no output to inspect. Also, I am curious, what is an \"unexpected test\"? It's the first time I see such a thing.",
    "created_at": "2019-08-23T08:49:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387867",
    "user": "https://github.com/jplab"
}
```

Replying to [comment:31 chapoton]:
> Adding tags on the results of doctests make no sense.
> 
> This does not fix the patchbot failure.

From the patch bot shortog, the following information is a bit obscure:


```
Expected:
    There are 7 tests in sage/combinat/finite_state_machine.py that are not being run
    There are 3 unexpected tests being run in sage/doctest/parsing.py
    There are 1 unexpected tests being run in sage/doctest/reporting.py
    There are 3 tests in sage/rings/invariants/invariant_theory.py that are not being run
Got:
    There are 7 tests in sage/combinat/finite_state_machine.py that are not being run
    There are 3 unexpected tests being run in sage/doctest/parsing.py
    There are 1 unexpected tests being run in sage/doctest/reporting.py
    There are 1 unexpected tests being run in sage/geometry/polyhedron/library.py
    There are 3 tests in sage/rings/invariants/invariant_theory.py that are not being run
**********************************************************************
```


I guess it is the same test that causes a problem, but I have no output to inspect. Also, I am curious, what is an "unexpected test"? It's the first time I see such a thing.



---

archive/issue_comments_387868.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-08-23T09:05:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387868",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_387869.json:
```json
{
    "body": "Replying to [comment:34 git]:\n> Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n\nI removed the unless tag on the doctest result...",
    "created_at": "2019-08-23T09:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387869",
    "user": "https://github.com/jplab"
}
```

Replying to [comment:34 git]:
> Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:

I removed the unless tag on the doctest result...



---

archive/issue_comments_387870.json:
```json
{
    "body": "Apparemment, ce qui pose probl\u00e8me est le fait que l'annotation contienne `\"64-bits\"`.",
    "created_at": "2019-08-23T19:58:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387870",
    "user": "https://github.com/fchapoton"
}
```

Apparemment, ce qui pose problème est le fait que l'annotation contienne `"64-bits"`.



---

archive/issue_comments_387871.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-08-23T19:58:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387871",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_387872.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-08-24T08:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387872",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_387873.json:
```json
{
    "body": "ok, let us try again",
    "created_at": "2019-08-24T08:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387873",
    "user": "https://github.com/fchapoton"
}
```

ok, let us try again



---

archive/issue_comments_387874.json:
```json
{
    "body": "Replying to [comment:36 chapoton]:\n> Apparemment, ce qui pose probl\u00e8me est le fait que l'annotation contienne `\"64-bits\"`.\n> \n\nWow. I see. Good to know. It looks like it's passing the test now at least.",
    "created_at": "2019-08-26T10:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387874",
    "user": "https://github.com/jplab"
}
```

Replying to [comment:36 chapoton]:
> Apparemment, ce qui pose problème est le fait que l'annotation contienne `"64-bits"`.
> 

Wow. I see. Good to know. It looks like it's passing the test now at least.



---

archive/issue_events_025542.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2019-08-26T22:15:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27523#event-25542"
}
```



---

archive/issue_comments_387875.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-08-26T22:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27523",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27523#issuecomment-387875",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
