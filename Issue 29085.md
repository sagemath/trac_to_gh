# Issue 29085: Fix or disable failing package testsuites

archive/issues_029085.json:
```json
{
    "body": "CC:  @dimpase @jhpalmieri\n\nThere are many spkgs whose testsuites fail.\n\n`sage-spkg` uses the following defaults:\n\n```\n# Since Python's self-tests seem to fail on all platforms, we disable\n# its test suite by default.\nif [ -z \"$SAGE_CHECK_PACKAGES\" ]; then\n    SAGE_CHECK_PACKAGES='!python2,!python3'\nfi\n```\n\n\nMore should be added to adjust for expected failures.\n\nSee also:  #29301 - `sage-spkg`: Add an option `-w` for warning only if `spkg-check` fails\n\nIssue created by migration from https://trac.sagemath.org/ticket/29322\n\n",
    "created_at": "2020-03-12T20:46:51Z",
    "labels": [
        "component: build",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Fix or disable failing package testsuites",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29085",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @dimpase @jhpalmieri

There are many spkgs whose testsuites fail.

`sage-spkg` uses the following defaults:

```
# Since Python's self-tests seem to fail on all platforms, we disable
# its test suite by default.
if [ -z "$SAGE_CHECK_PACKAGES" ]; then
    SAGE_CHECK_PACKAGES='!python2,!python3'
fi
```


More should be added to adjust for expected failures.

See also:  #29301 - `sage-spkg`: Add an option `-w` for warning only if `spkg-check` fails

Issue created by migration from https://trac.sagemath.org/ticket/29322





---

archive/issue_comments_411238.json:
```json
{
    "body": "See also https://groups.google.com/d/msg/sage-devel/abysgIIVGZI/fF7efL9RAwAJ",
    "created_at": "2020-03-12T21:56:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29085#issuecomment-411238",
    "user": "https://github.com/jhpalmieri"
}
```

See also https://groups.google.com/d/msg/sage-devel/abysgIIVGZI/fF7efL9RAwAJ



---

archive/issue_comments_411239.json:
```json
{
    "body": "Let's update the default list of `SAGE_CHECK_PACKAGES` -- and perhaps also invent another syntax in addition to '!SPKG', perhaps '?SPKG', to indicate that this package should only be run like `SAGE_CHECK=warn`.",
    "created_at": "2020-07-08T13:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29085#issuecomment-411239",
    "user": "https://github.com/mkoeppe"
}
```

Let's update the default list of `SAGE_CHECK_PACKAGES` -- and perhaps also invent another syntax in addition to '!SPKG', perhaps '?SPKG', to indicate that this package should only be run like `SAGE_CHECK=warn`.



---

archive/issue_comments_411240.json:
```json
{
    "body": "Also there are some additional packages for which it just does not make any sense to run the testsuite: `curl`, `git`, ...",
    "created_at": "2020-07-08T15:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29085#issuecomment-411240",
    "user": "https://github.com/mkoeppe"
}
```

Also there are some additional packages for which it just does not make any sense to run the testsuite: `curl`, `git`, ...



---

archive/issue_comments_411241.json:
```json
{
    "body": "Well, we can just disable those test suites permanently, by making their `spkg-check.in` a no-op. (I would prefer this to deleting `spkg-check.in`, in case some enterprising developer later decides to add one.)",
    "created_at": "2020-07-08T19:58:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29085#issuecomment-411241",
    "user": "https://github.com/jhpalmieri"
}
```

Well, we can just disable those test suites permanently, by making their `spkg-check.in` a no-op. (I would prefer this to deleting `spkg-check.in`, in case some enterprising developer later decides to add one.)



---

archive/issue_comments_411242.json:
```json
{
    "body": "Replying to [comment:10 jhpalmieri]:\n> Well, we can just disable those test suites permanently, by making their `spkg-check.in` a no-op. (I would prefer this to deleting `spkg-check.in`, in case some enterprising developer later decides to add one.)\n\nThat (+ a comment why it is disabled) sounds good.",
    "created_at": "2020-07-08T20:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29085#issuecomment-411242",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:10 jhpalmieri]:
> Well, we can just disable those test suites permanently, by making their `spkg-check.in` a no-op. (I would prefer this to deleting `spkg-check.in`, in case some enterprising developer later decides to add one.)

That (+ a comment why it is disabled) sounds good.



---

archive/issue_comments_411243.json:
```json
{
    "body": "See #30093.",
    "created_at": "2020-07-08T20:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29085#issuecomment-411243",
    "user": "https://github.com/jhpalmieri"
}
```

See #30093.



---

archive/issue_comments_411244.json:
```json
{
    "body": "Moving this ticket to 9.4, as it seems unlikely that it will be merged in 9.3, which is in the release candidate stage",
    "created_at": "2021-04-02T20:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29085",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29085#issuecomment-411244",
    "user": "https://github.com/mkoeppe"
}
```

Moving this ticket to 9.4, as it seems unlikely that it will be merged in 9.3, which is in the release candidate stage
