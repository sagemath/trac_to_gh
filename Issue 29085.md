# Issue 29085: Fix or disable failing package testsuites

Issue created by migration from https://trac.sagemath.org/ticket/29322

Original creator: mkoeppe

Original creation time: 2020-03-12 20:46:51

CC:  dimpase jhpalmieri

There are many spkgs whose testsuites fail.

`sage-spkg` uses the following defaults:

```
# Since Python's self-tests seem to fail on all platforms, we disable
# its test suite by default.
if [ -z "$SAGE_CHECK_PACKAGES" ]; then
    SAGE_CHECK_PACKAGES='!python2,!python3'
fi
```


More should be added to adjust for expected failures.

See also:  #29301 - `sage-spkg`: Add an option `-w` for warning only if `spkg-check` fails


---

Comment by jhpalmieri created at 2020-03-12 21:56:05

See also https://groups.google.com/d/msg/sage-devel/abysgIIVGZI/fF7efL9RAwAJ


---

Comment by mkoeppe created at 2020-07-08 13:13:18

Let's update the default list of `SAGE_CHECK_PACKAGES` -- and perhaps also invent another syntax in addition to '!SPKG', perhaps '?SPKG', to indicate that this package should only be run like `SAGE_CHECK=warn`.


---

Comment by mkoeppe created at 2020-07-08 15:56:58

Also there are some additional packages for which it just does not make any sense to run the testsuite: `curl`, `git`, ...


---

Comment by jhpalmieri created at 2020-07-08 19:58:30

Well, we can just disable those test suites permanently, by making their `spkg-check.in` a no-op. (I would prefer this to deleting `spkg-check.in`, in case some enterprising developer later decides to add one.)


---

Comment by mkoeppe created at 2020-07-08 20:19:54

Replying to [comment:10 jhpalmieri]:
> Well, we can just disable those test suites permanently, by making their `spkg-check.in` a no-op. (I would prefer this to deleting `spkg-check.in`, in case some enterprising developer later decides to add one.)

That (+ a comment why it is disabled) sounds good.


---

Comment by jhpalmieri created at 2020-07-08 20:46:17

See #30093.


---

Comment by mkoeppe created at 2021-04-02 20:21:54

Moving this ticket to 9.4, as it seems unlikely that it will be merged in 9.3, which is in the release candidate stage
