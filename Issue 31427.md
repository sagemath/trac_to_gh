# Issue 31427: Add package msolve (multivariate polynomial system solver)

Issue created by migration from https://trac.sagemath.org/ticket/31664

Original creator: mkoeppe

Original creation time: 2021-04-12 23:44:04

CC:  dimpase yzh isuruf fbissey

https://msolve.lip6.fr/index.html

https://gitlab.lip6.fr/safey/msolve


---

Comment by yzh created at 2021-04-12 23:56:17

https://msolve.lip6.fr/downloads/msolve-tutorial.pdf section 8 talks about their sage interface.


---

Comment by dimpase created at 2021-04-13 14:45:12

It needs to be autoconfiscated, or cmake'd - working with something that only has  a Makefile is not what we do. I'll ask an  author I know about their plans in this respect.


---

Comment by mkoeppe created at 2021-06-24 16:50:24

What's the status here?


---

Comment by dimpase created at 2021-06-26 08:56:48

it appears that autotools have been added, cf. https://gitlab.lip6.fr/safey/msolve


---

Comment by dimpase created at 2021-06-26 09:17:51

I was able to build on macOS Homebrew with default options (except CC and CXX, clang) and solve a test example.
Unfortunately there are still no real tests in the repo.


---

Comment by mmezzarobba created at 2022-04-20 08:50:33

See also #33734 for using msolve in `variety()`.


---

Comment by mkoeppe created at 2022-09-11 19:22:05

Where are their source tarballs?


---

Comment by mkoeppe created at 2022-09-11 19:24:47

https://gitlab.lip6.fr/safey/msolve/-/archive/v0.4.4/msolve-v0.4.4.tar.gz is just an archive, does not contain the bootstrapped artifacts


---

Comment by mkoeppe created at 2022-09-11 19:28:45

ran "./autogen.sh && ./configure && make dist"


---

Attachment


---

Comment by mkoeppe created at 2022-09-11 19:34:05

I'm getting

```
[msolve-0.4.4] Making all in src/neogb
[msolve-0.4.4] /usr/local/bin/bash ../../libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I../..    -mmmx -msse -msse2 -msse3 -mssse3 -msse4.1 -msse4.2 -maes -mavx -mfma -mavx2 -mrdrnd -mbmi -mbmi2 -madx  -g -O2 -c -o libneogb_la-gb.lo `test -f 'gb.c' || echo './'`gb.c
[msolve-0.4.4] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I../.. -mmmx -msse -msse2 -msse3 -mssse3 -msse4.1 -msse4.2 -maes -mavx -mfma -mavx2 -mrdrnd -mbmi -mbmi2 -madx -g -O2 -c gb.c  -fno-common -DPIC -o .libs/libneogb_la-gb.o
[msolve-0.4.4] gb.c:50:10: fatal error: 'f4sat.c' file not found
[msolve-0.4.4] #include "f4sat.c"    /* implemenation of saturation algorithm */
[msolve-0.4.4]          ^~~~~~~~~
[msolve-0.4.4] 1 error generated.
[msolve-0.4.4] make[5]: *** [libneogb_la-gb.lo] Error 1
[msolve-0.4.4] make[4]: *** [all-recursive] Error 1
[msolve-0.4.4] make[3]: *** [all] Error 2
```

----
New commits:


---

Comment by mkoeppe created at 2022-09-11 19:38:56

OK, `make dist` is broken, I'm working on a fix.


---

Comment by mkoeppe created at 2022-09-11 19:54:05

While running `make check`, I'm getting

```
depbase=`echo test/neogb/io/validate_input_data.o | sed 's|[^/]*$|.deps/&|;s|\.o$||'`;\
	gcc -DHAVE_CONFIG_H -I. -I../..    -mmmx -msse -msse2 -msse3 -mssse3 -msse4.1 -msse4.2 -maes -mavx -mfma -mavx2 -mrdrnd -mbmi -mbmi2 -madx  -g -O2 -MT test/neogb/io/validate_input_data.o -MD -MP -MF $depbase.Tpo -c -o test/neogb/io/validate_input_data.o ../../test/neogb/io/validate_input_data.c &&\
	mv -f $depbase.Tpo $depbase.Po
../../test/neogb/io/validate_input_data.c:25:65: error: too few arguments to function call, expected 17, have 16
            &la_option, &use_signatures, &reduce_gb, &info_level);
                                                                ^
../../test/neogb/io/../../../src/neogb/io.h:137:5: note: 'validate_input_data' declared here
int validate_input_data(
    ^
1 error generated.
```



---

Attachment

I've created a fork in https://github.com/sagemath/msolve because the upstream gitlab instance is compartmentalized


---

Comment by git created at 2022-09-11 20:07:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-09-11 20:08:32

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-09-11 20:08:32

Builds for me on macOS. Haven't tested anything else.


---

Comment by mkoeppe created at 2022-09-11 20:09:34

Can't even report an Issue in upstream's gitlab instance.
https://gitlab.lip6.fr/users/sign_in


---

Comment by mmezzarobba created at 2022-09-12 05:49:49

Replying to [comment:24 Matthias KÃ¶ppe]:
> Can't even report an Issue in upstream's gitlab instance.
> https://gitlab.lip6.fr/users/sign_in

They have a github mirror at https://github.com/algebraic-solving/msolve which seems to accept issues.


---

Comment by mkoeppe created at 2022-09-12 14:38:40

Thanks!


---

Comment by git created at 2022-09-12 14:41:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-09-15 19:39:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mmezzarobba created at 2022-09-16 10:14:16

- Rebased everything on top of #34519 because I had force-pushed there before noticing you had a branch based on it.
- Did you push the tarball you created anywhere? I don't see it in the github releases of your fork, and `make dist` on your msolve branch does not seem to be enough to generate it.
----
New commits:


---

Comment by mkoeppe created at 2022-09-16 16:53:54

Replying to [comment:32 Marc Mezzarobba]:
> - Rebased everything on top of #34519 because I had force-pushed there before noticing you had a branch based on it.

Thank you.

> - Did you push the tarball you created anywhere? I don't see it in the github releases of your fork

See `checksums.ini`.

To test, no manual action is needed. Just use `./configure --enable-download-from-upstream-url`, and installing the package will download the tarball


---

Comment by mmezzarobba created at 2022-09-16 18:20:01

Changing status from needs_review to positive_review.


---

Comment by mmezzarobba created at 2022-09-16 18:20:01

Ok, thank you!


---

Comment by mkoeppe created at 2022-09-16 18:23:59

Thank you!


---

Comment by vbraun created at 2022-09-27 22:32:30

Resolution: fixed
