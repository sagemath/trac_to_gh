# Issue 34258: Construction for invariant/equivariant submodules

Issue created by migration from https://trac.sagemath.org/ticket/34495

Original creator: mkoeppe

Original creation time: 2022-09-05 16:55:02

CC:  tscrim tkarn egourgoulhon aschilling

We introduce a construction functor for invariant and equivariant submodules.

`sage.modules.with_basis.invariant.FiniteDimensionalInvariantModule` gets a `construction` method.

In a follow-up ticket, also the tensor modules with prescribed monoterm symmetries from #30229 will get a `construction` method. (This will depend on first modeling the group action, see #32029, #30276.)


---

Comment by git created at 2022-09-05 18:28:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-09-05 21:54:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-09-05 21:59:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-09-05 22:13:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-09-05 22:14:45

Changing status from new to needs_review.


---

Comment by git created at 2022-09-05 22:27:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-09-05 22:29:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-09-06 02:19:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2022-09-07 04:16:34

Are we sure that the invariant module cannot get bigger when we extend scalars? I think the answer is no because the multiplicity of 1 as a root of the minimal polynomial of the matrix that encodes the group action. What I am worried about is a situation similar to what happens for a C<sub>4</sub> action over **R** versus **C** with the 2 dimensional rotation representation. Do you agree with my reasoning (or have an alternative proof)?

If you are not expecting this to work with pushouts (at least, this is the only reason I know for having the constructor functors), what is your reasoning for adding the construction functor? It starts feeling like unnecessary weight for the class on its own.

Also, I am curious what your thoughts are about the OS/OT algebra invariants not having a construction functor. It seems to suggest that the `invariant_module()` hook has a deficiency.


---

Comment by mkoeppe created at 2022-09-07 04:36:48

Yes, this is for pushouts.


---

Comment by mkoeppe created at 2022-09-07 04:46:34

Replying to [comment:13 Travis Scrimshaw]:
> Are we sure that the invariant module cannot get bigger when we extend scalars? 

Are you asking why the constructed pushout is a correct pushout? In the end, this will depend on the Action doing the right thing on the elements of the larger module. If it doesn't, then all bets are off.


---

Comment by tscrim created at 2022-09-07 04:57:32

Replying to [comment:15 Matthias Köppe]:
> Replying to [comment:13 Travis Scrimshaw]:
> > Are we sure that the invariant module cannot get bigger when we extend scalars? 
> 
> Are you asking why the constructed pushout is a correct pushout? In the end, this will depend on the Action doing the right thing on the elements of the larger module. If it doesn't, then all bets are off.

Ah, right, because it goes through the hook and doesn’t try to simply change the ring of the class. Perhaps then my question is an optimization one. Can we simply just change the base field (IIRC, it doesn’t work over general commutative rings, maybe not even `ZZ`, but I am not sure offhand) and not go through the (likely expensive) linear algebra computation? Although this creates some issues for subclasses with different construction signatures and forcing things to be overriden… I am wondering if we can find a good solution to that.


---

Comment by mkoeppe created at 2022-09-07 05:03:39

There will be easy cases and hard cases. 

In my immediate application (#34499), it does not matter because the invariant module is not actually computed using linear algebra.


---

Comment by tscrim created at 2022-09-07 05:25:11

True, and more specific cases (e.g., the `FiniteDimensionalInvariantModule`) could then implement their own version rather than going through the hook. The `invariant_module()` hook might need some more thought at some point about its signature since it was just considered in a more local context.

Only thing left is the failures in the (graded) free resolutions. I don’t think they are related, but I don’t know what would cause them to fail in general.


---

Comment by mkoeppe created at 2022-09-07 05:36:12

Replying to [comment:18 Travis Scrimshaw]:
> Only thing left is the failures in the (graded) free resolutions. I don’t think they are related, but I don’t know what would cause them to fail in general.

Maybe just someone's broken patchbot? I don't see these failures in the Build&Test run


---

Comment by mkoeppe created at 2022-09-07 05:40:32

I've run it again locally, with `--long`. Can't reproduce these failures in `sage.homology`.


---

Comment by tscrim created at 2022-09-07 06:03:42

Then it should be unrelated.


---

Comment by tscrim created at 2022-09-07 06:03:42

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-09-07 14:52:32

Thanks for the review!


---

Comment by vbraun created at 2022-09-22 22:35:11

Resolution: fixed
