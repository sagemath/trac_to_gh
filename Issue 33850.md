# Issue 33850: inverse reciprocal trig functions not (back)translated to/from Mathematica

Issue created by migration from https://trac.sagemath.org/ticket/34087

Original creator: charpent

Original creation time: 2022-06-26 16:14:48

Consider


```
sage: IFL=[arcsin, arccos, arctan, arccot, arcsec, arccsc, arcsinh, arccosh, arctanh, arccoth, arcsech, arccsch]
sage: [u(x)._mathematica_() for u in IFL]
[ArcSin[x],   # OK
 ArcCos[x],   # OK
 ArcTan[x],   # OK
 Arccot[x],   # WRONG !
 Arcsec[x],   # WRONG !
 Arccsc[x],   # WRONG !
 ArcSinh[x],  # OK
 ArcCosh[x],  # OK
 ArcTanh[x],  # OK
 Arccoth[x],  # WRONG !
 Arcsech[x],  # WRONG !
 Arccsch[x]]  # WRONG !
```





---

Comment by chapoton created at 2022-06-26 18:09:40

Hello,

would you please test #34062 if you have Mathematica ?

And for your issue, please check the conversions dictionary inside

```
src/sage/functions/trig.py
```



---

Comment by charpent created at 2022-06-26 19:49:16

Replying to [comment:1 chapoton]:
> Hello,
> 
> would you please test #34062 if you have Mathematica ?

I'll look into this. I also suggest to test against the Wolfram engine (newer than my (bootleg) copy of Mathematica) : I can look into this in a virtual Debian machine running under Windows. Is that sufficient ?
 
> And for your issue, please check the conversions dictionary inside
> {{{
> src/sage/functions/trig.py
> }}}

That's where  I fixed it (and in `src/sage/functions/hyperbolic.py`), doctests in `src/sage/interfaces/mathematica.py`.

But I currently can't push to trac (authentication problem, notwithstanding the recent upgrade of my key to ED25519)...


---

Comment by charpent created at 2022-06-26 21:07:10

New commits:


---

Comment by charpent created at 2022-06-26 21:11:22

Changing status from new to needs_review.


---

Comment by charpent created at 2022-06-26 21:11:22

Passes its own specific doctest (in `src/sage/interfaces/mathematica.py`) and `ptestlong`.

==> `needs_review`.


---

Comment by chapoton created at 2022-06-27 06:41:47

hypergolic ?

and missing the `optional - mathematica` tag


---

Comment by charpent created at 2022-06-28 16:29:22

Replying to [comment:5 chapoton]:
> hypergolic ?

Wups ! I'm probably the worst typist east of the Pond...

> and missing the `optional - mathematica` tag

Okay, I'll fix it.

==>`needs_work`


---

Comment by charpent created at 2022-06-28 16:29:22

Changing status from needs_review to needs_work.


---

Comment by git created at 2022-06-28 16:36:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by charpent created at 2022-06-28 16:37:48

Changing status from needs_work to needs_review.


---

Comment by charpent created at 2022-06-28 16:37:48

Replying to [comment:7 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[7b64a0f](https://git.sagemath.org/sage.git/commit/?id=7b64a0fd61c5a8df8cc389cebb1d8cfca835fc09)||`Trac 34087 : fix typo and thinko...`||

Done. ==>`needs_review`.


---

Comment by chapoton created at 2022-06-30 17:34:15

`# optional - mathematica` should rather be written after every doctest line, as you can see in all other examples inside `src/sage/interfaces/mathematica.py`


---

Comment by charpent created at 2022-06-30 19:39:45

Okayyy... Will fix it.


---

Comment by charpent created at 2022-06-30 19:39:45

Changing status from needs_review to needs_work.


---

Comment by git created at 2022-06-30 19:43:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by charpent created at 2022-06-30 19:45:39

Replying to [comment:11 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[5c52eea](https://git.sagemath.org/sage.git/commit/?id=5c52eea9607d9af3556d9e7a9ecbdd72caa3cc9d)||`Trac 34087 : fiddle with doctest formatting.`||

This nitpicking should be final...

==>`needs_review`.


---

Comment by charpent created at 2022-06-30 19:45:39

Changing status from needs_work to needs_review.


---

Comment by charpent created at 2022-06-30 19:55:55

BTW : "Lint" and "Build and test" are marked as failing, but I'm unable to find the job logs pointing to the errors...*

Where is this documented ?


---

Comment by charpent created at 2022-06-30 20:09:22

Forgot my name. Again...


---

Comment by mkoeppe created at 2022-07-01 01:12:05

Replying to [comment:13 charpent]:
> BTW : "Lint" and "Build and test" are marked as failing, but I'm unable to find the job logs pointing to the errors...*
> 
> Where is this documented ?

https://trac.sagemath.org/wiki/ReleaseTours/sage-9.6#BuildsandchecksofticketbranchesonGitHubActions is what comes closest to a documentation of this


---

Comment by mkoeppe created at 2022-07-01 01:22:11

Replying to [comment:9 chapoton]:
> `# optional - mathematica` should rather be written after every doctest line, as you can see in all other examples inside `src/sage/interfaces/mathematica.py`

To be more precise, it should be written on each `sage:` line but not on the `....:` lines.


---

Comment by mkoeppe created at 2022-07-01 01:28:05

Replying to [comment:13 charpent]:
> BTW : "Lint" and "Build and test" are marked as failing, but I'm unable to find the job logs pointing to the errors...*

The "Build and test" workflow failed for an unrelated reason, fixed in #34104


---

Comment by charpent created at 2022-07-01 21:30:26

Changing status from needs_review to needs_work.


---

Comment by charpent created at 2022-07-01 21:30:26

Replying to [comment:16 mkoeppe]:
> Replying to [comment:9 chapoton]:
> > `# optional - mathematica` should rather be written after every doctest line, as you can see in all other examples inside `src/sage/interfaces/mathematica.py`
> 
> To be more precise, it should be written on each `sage:` line but not on the `....:` lines.

The precision would have been more useful oif given, //before// the fix...


---

Comment by git created at 2022-07-01 21:36:19

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by charpent created at 2022-07-01 21:37:18

Changing status from needs_work to needs_review.


---

Comment by charpent created at 2022-07-01 21:37:18

Replying to [comment:19 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> ||[e53971f](https://git.sagemath.org/sage.git/commit/?id=e53971f2f2f657a90c29a0bcdc1d8209bf84a250)||`Trac#34087 : doubleplus nitpicking doctest formatting.`||

Done. ==> `needs_review`.


---

Comment by chapoton created at 2022-07-02 09:34:33

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2022-07-02 09:34:33

ok, merci


---

Comment by vbraun created at 2022-07-11 21:55:40

Resolution: fixed
