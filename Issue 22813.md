# Issue 22813: method to reverse row and column orders of matrice

Issue created by migration from Trac.

Original creator: vdelecroix

Original creation time: 2017-05-22 07:54:58

CC:  klee




---

Comment by vdelecroix created at 2017-05-22 08:04:49

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2017-05-22 08:04:49

New commits:


---

Comment by mforets created at 2017-05-22 09:00:57

salut Vincent, i saw your cool function, maybe you can paste this too or similar:


```
The row-and-column-reversed matrix of `M` is defined as:

.. MATH::

    (i,j) \mapsto M[nrows - i - 1, ncols - j - 1]

In other words, this function flips `M` up to down and left to right.
```



---

Comment by vdelecroix created at 2017-05-22 09:27:12

Replying to [comment:2 mforets]:
> salut Vincent, i saw your cool function, maybe you can paste this too or similar:
> 
> {{{
> The row-and-column-reversed matrix of `M` is defined as:
> 
> .. MATH::
> 
>     (i,j) \mapsto M[nrows - i - 1, ncols - j - 1]
> 
> In other words, this function flips `M` up to down and left to right.
> }}}

good idea.


---

Comment by klee created at 2017-05-22 09:27:58

Looks and works nice. Thank you! Just two minor comments:

1. Docstrings better to be consistent in the three methods. Note the period at the end.

```
Reverse the orders of rows and columns.
```


2. You may want to also show the matrices before reversing in some of the examples.


---

Comment by vdelecroix created at 2017-05-22 10:44:19

What do you think of calling the method simply `reverse`?


---

Comment by klee created at 2017-05-22 10:47:29

If someone implements `reverse_rows` or `reverse_columns` in future, then `reverse` will be somewhat unclear. I prefer to stick to the current name.


---

Comment by vdelecroix created at 2017-05-22 11:07:51

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2017-05-22 11:07:51

This method already exists and called `antitranspose`! I propose to keep this ticket to make an inplace version.


---

Comment by vdelecroix created at 2017-05-22 12:20:34

Sorry, it is different: transpose and antitranspose does inverse rows <-> columns. They are symmetries with respect to diagonals. However, both transpose and antitranspose return a different matrix. It would be weird to have a different behavior for reverse.

I propose to have
- `transpose`, `antitranspose`, `reverse` as methods returning a different matrix
- `_transpose_inplace`, `_antitranspose_inplace` and `_reverse_inplace` that modifies the matrix


---

Comment by vdelecroix created at 2017-05-22 12:21:14

Note that in numpy, there is method to do reflection that is called flip. What I am trying to achieve with this ticket corresponds to

```
sage: import numpy as np
sage: a = numpy.array([[0,1],[2,3],[4,5]])
sage: np.flip(np.flip(a,0), 1)
array([[5, 4],
       [3, 2],
       [1, 0]])
```

And numpy provides shortcuts `flipud` (up/down) and `fliplr` (left/right) for flipping with respect to axes 0 and 1.


---

Comment by git created at 2017-05-22 17:37:50

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by vdelecroix created at 2017-05-22 17:41:01

Needs review again. Transpose and antitranspose are a bit different since the matrix space changes.


---

Comment by vdelecroix created at 2017-05-22 17:41:01

Changing status from needs_work to needs_review.


---

Comment by git created at 2017-05-22 17:44:47

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by klee created at 2017-05-22 20:15:49

Still missing a period at the end:

```
Reverse the row order and column order of this matrix.
```



---

Comment by klee created at 2017-05-22 20:20:38

You may fold this long line

```
ValueError: matrix is immutable; please change a copy instead (i.e., use copy(M) to change a copy of M).
```



---

Comment by git created at 2017-05-23 06:28:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2017-05-23 06:29:09

done


---

Comment by klee created at 2017-05-23 09:04:39

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-05-24 19:10:41

Resolution: fixed
