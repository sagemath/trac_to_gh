# Issue 12401: sum of powers of root of unity fails

Issue created by migration from Trac.

Original creator: dkrenn

Original creation time: 2012-02-23 13:32:42

Assignee: was

Keywords: sum, number field, root of unity

The following problem was reported to me by Volker Ziegler:

```
sage: PZ.<X>=PolynomialRing(ZZ) 
sage: Cyclic3.<z>=NumberField(X^2+3) 
sage: zi=Cyclic3.primitive_root_of_unity()
sage: sum([zi^i for i in range(5)]) 
1/2*z - 1/2
sage: sum(zi^i,i,0,5) 
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (1288, 0))

Traceback (most recent call last)
...
TypeError: An embedding into RR or CC must be specified.
```

The function ``sum`` works in the first case, but fails in the second.


---

Comment by jdemeyer created at 2014-11-05 13:47:32

Not a bug. Conversion of number field elements to `SR` requires an embedding, like the error message tries to make clear.


```
sage: Cyclic3.<z> = QuadraticField(-3)    # comes with embedding
sage: zi = Cyclic3.primitive_root_of_unity()
sage: var('i')
i
sage: sum(zi^i,i,0,5)
0
```



---

Comment by jdemeyer created at 2014-11-05 13:47:32

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2014-11-05 13:47:37

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-11-06 12:10:46

Resolution: invalid
