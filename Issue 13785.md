# Issue 13785: Updating PolyBoRi to release 0.8.3

Issue created by migration from Trac.

Original creator: AlexanderDreyer

Original creation time: 2013-01-22 22:29:37

Assignee: malb

CC:  burcin malb polybori

PolyBoRi's next minor release will be out soon.
There were no changes of the interface between PolyBoRi 0.8.3 and 0.8.2, so we just have to update the sources from here:

https://sourceforge.net/projects/polybori/files/polybori/0.8.3rc

PolyBoRi 0.8.3 is a bugfix release incorporating all previous patches from Sage.
It also fixes some bugs in the build system and tries to become more standard conformimng (library naming scheme).

### Current spkg
 * *Install* http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.3rc1.spkg


---

Comment by AlexanderDreyer created at 2013-01-22 23:12:30

Changing status from new to needs_review.


---

Comment by AlexanderDreyer created at 2013-01-28 21:59:42

There 's an updated spkg with the newest rc:
http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.3rc2.spkg


---

Comment by malb created at 2013-01-29 12:43:25

* doctests pass etc.
 * SPKG.txt and hg log look in order
 * hg status reports a problem however

```
malb`@`sage:~/scratch/polybori-0.8.3rc2$ hg status
! patches/0001_PolyEntryVector_throw_instead_assert.patch
```


I'd say modulo the hg status issue it's good to go.


---

Comment by malb created at 2013-01-29 12:43:25

Changing status from needs_review to needs_work.


---

Comment by AlexanderDreyer created at 2013-01-29 13:21:08

Thanks, I forgot hg rm after rollback. The corrected spkg is at the same place.


---

Comment by AlexanderDreyer created at 2013-01-29 13:21:08

Changing status from needs_work to needs_review.


---

Comment by malb created at 2013-01-29 14:06:08

Looks fine. Are we going to ship 0.8.3*rc2* though?


---

Comment by AlexanderDreyer created at 2013-01-29 22:00:47

Replying to [comment:5 malb]:
> Looks fine. Are we going to ship 0.8.3*rc2* though?
I'll release this week, then we can skip the rc2.


---

Comment by AlexanderDreyer created at 2013-01-30 15:46:27

`PolyBoRi` 0.8.3 will be out tonight. The spkg at
http://boxen.math.washington.edu/home/dreyer/spkg/polybori-0.8.3.spkg
already contains the most recent sources.


---

Comment by AlexanderDreyer created at 2013-03-13 08:26:11

Changing status from needs_review to needs_work.


---

Comment by AlexanderDreyer created at 2013-03-13 08:26:11

I add two issues, which are not strictly due to the spkg, but for compatibility reasons with the polybori 0.8.3 package on sage-on-debian.

The Sage library currently uses the .conf file generate by polybori to get `PolyBoRi`'s preprocessor defines. This is not necessary any more, since polybori stores them consistently in polybori/config.h now. (Removing this dependency is necessary, since .conf file is not part of polybori 0.8.3's debian package.)

Also, the Sage library should use the fully qualified library names, i.e. polybori-0.8, polybori_groebner-0.8, since the convenience link libpolybori.so is not installed by the debian package. This strictly depends on this ticket, because the library naming scheme had changes with 0.8.3.


---

Comment by AlexanderDreyer created at 2013-03-14 10:44:14

Changing status from needs_work to needs_review.


---

Comment by AlexanderDreyer created at 2013-03-14 10:44:14

I've added a patch, that takes care of the changes to devel/sage that I've proposed above:
 * share/polybori/flags.conf
   (obsolete, `PolyBoRi`'s header takes care of the predefines now)
 * non-versionated libraries polybori, polybori_groebner
   (using polybori-0.8, polybori_groebner-0.8 instead)

Please
  apply remove_deprecated_polybori_stuff.patch


---

Comment by Snark created at 2013-03-15 08:03:55

The patch applies (though with a fuzz) ; the spkg compiles ; the sage lib compiles ; running sage -t --long on the *polybori* files in devel/sage passes everything... is there something more to test before I give a positive review?


---

Comment by AlexanderDreyer created at 2013-03-15 08:12:47

Replying to [comment:12 Snark]:
> The patch applies (though with a fuzz) ; the spkg compiles ; the sage lib compiles ; running sage -t --long on the *polybori* files in devel/sage passes everything... is there something more to test before I give a positive review?
No, this is fine. (Martin already had tested details of the spkg before.) In case you need it for Sage 5.8, you can change the Milestone accordingly.


---

Comment by Snark created at 2013-03-15 09:24:05

5.8 is not a milestone anymore ; positive review as it's simple, cleaning things, syncing with upstream and... I'm sure there are other good things to say about that change, but that should definitely do!


---

Comment by Snark created at 2013-03-15 09:24:05

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-03-15 13:07:52

1. Is the work issue still relevant (if not: remove it)

2. The patch is missing some metadata, such as a username. Did you generate it using `hg export` and do you have a `~/.hgrc` with a username?


---

Comment by jdemeyer created at 2013-03-15 13:07:52

Changing status from positive_review to needs_info.


---

Attachment


---

Comment by AlexanderDreyer created at 2013-03-15 15:02:31

Sorry!
Replying to [comment:15 jdemeyer]:
> 1. Is the work issue still relevant (if not: remove it)
No, I've removed the issue now.

> 2. The patch is missing some metadata, such as a username. Did you generate it using `hg export` and do you have a `~/.hgrc` with a username?
I should know better that the patch-queue patches are not complete. I've replaced the the attachment with the exported patch.


---

Comment by AlexanderDreyer created at 2013-03-15 15:13:13

Changing status from needs_info to needs_review.


---

Comment by jpflori created at 2013-03-15 16:59:50

This still fails on Solaris, more explanation at:
* https://groups.google.com/d/msg/sage-release/1felF4mvFMM/EUuapbJbi6EJ


---

Comment by jdemeyer created at 2013-03-15 21:51:38

Regarding PolyBoRi: could somebody please review #14026? (if you think #14026 is totally unneccessary, that's fine and I'll close the ticket as invalid).


---

Comment by jdemeyer created at 2013-03-15 21:53:01

Replying to [comment:18 jpflori]:
> This still fails on Solaris, more explanation at:
If it fails on Solaris, it needs work.


---

Comment by jdemeyer created at 2013-03-15 21:53:01

Changing status from needs_review to needs_work.


---

Comment by AlexanderDreyer created at 2013-03-15 22:32:49

Replying to [comment:20 jdemeyer]:
> Replying to [comment:18 jpflori]:
> > This still fails on Solaris, more explanation at:
> If it fails on Solaris, it needs work.
I'll have a look at that. Unfortunately Solaris wants to resolve all symbols from the lib, not only the actually used. 
Is there a gcc option to avoid this?


---

Comment by AlexanderDreyer created at 2013-03-16 00:40:42

Meanwhile you could try to add
`LIBS+=['png12']` to the file custom.py in the spkg.


---

Comment by jpflori created at 2013-03-29 23:10:35

Ok my latest try on Solaris with a better built GCC (using Sun's ld and as rather than GNU ones) was more successful with polybori 0.8.2 which buil successfully.

I'll check it is also the case for 0.8.3 asap.


---

Comment by jpflori created at 2013-03-29 23:35:18

It works with 0.8.3 as well, so I'm putting the ticket back to positive review as that was the status at http://trac.sagemath.org/sage_trac/ticket/13989#comment:14 and there is metadata in the patch now.


---

Comment by jpflori created at 2013-03-29 23:35:18

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2013-03-30 03:24:07

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2013-03-30 03:24:07

Sorry, but this needs to be rebased to #14379.


---

Comment by AlexanderDreyer created at 2013-04-02 08:21:31

Thanks for the hint! The spkg is rebased to #14379 now. (At the url mentioned above.)


---

Comment by AlexanderDreyer created at 2013-04-02 08:21:31

Changing status from needs_work to needs_review.


---

Comment by jpflori created at 2013-04-02 09:00:06

Changing status from needs_review to positive_review.


---

Comment by jpflori created at 2013-04-02 09:00:06

Great! Looks fine and works on a usual system. Back to positive_review. (I'll give it a try on a Solaris setup later, but the ssh server there looks broken and I have neither physical access, nor admin rights anyway.)


---

Comment by jdemeyer created at 2013-04-02 10:55:23

Changing component from commutative algebra to packages: standard.


---

Comment by jpflori created at 2013-04-02 12:54:35

FYI no problem on Solaris using FSF GCC with Sun as and ld.


---

Comment by jdemeyer created at 2013-04-04 17:40:07

Resolution: fixed
