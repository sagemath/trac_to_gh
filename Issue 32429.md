# Issue 32429: Polyhedron_base.vertex_adjacency_matrix: Do not use face_lattice

Issue created by migration from https://trac.sagemath.org/ticket/32666

Original creator: mkoeppe

Original creation time: 2021-10-11 03:27:28

CC:  @kliem

instead just go through `self.combinatorial_polyhedron().edges()`

This should be faster - and only avoids an indirect dependency of `sage.geometry.polyhedron.plot` on `sage.combinat`


---

Comment by @kliem created at 2021-10-11 07:30:50

New commits:


---

Comment by @kliem created at 2021-10-11 07:30:50

Changing status from new to needs_review.


---

Comment by chapoton created at 2021-10-11 15:39:46

ok, looks good


---

Comment by chapoton created at 2021-10-11 15:39:46

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-10-11 17:16:26

Thanks for working on this!


---

Comment by @kliem created at 2021-10-11 19:06:08

Thanks for the review.
This change turned out to be surprisingly uncomplicated.


---

Comment by mkoeppe created at 2021-10-11 19:56:56

how about

```
--- a/src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx
+++ b/src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx
@@ -1276,7 +1276,7 @@ cdef class CombinatorialPolyhedron(SageObject):
             sage: polytopes.cube().vertex_adjacency_matrix().is_immutable()
             True
         """
-        from sage.rings.all import ZZ
+        from sage.rings.integer_ring import ZZ
         from sage.matrix.constructor import matrix
```



---

Comment by git created at 2021-10-11 19:58:43

Changing status from positive_review to needs_review.


---

Comment by git created at 2021-10-11 19:58:43

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by mkoeppe created at 2021-10-11 21:08:47

Thanks!


---

Comment by mkoeppe created at 2021-10-11 21:08:47

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-10-19 20:31:31

Resolution: fixed
