# Issue 17943: Remove a few unused modules

archive/issues_017943.json:
```json
{
    "body": "CC:  jdemeyer\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/18180\n\n",
    "created_at": "2015-04-13T16:13:24Z",
    "labels": [
        "misc",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.6",
    "title": "Remove a few unused modules",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17943",
    "user": "mmezzarobba"
}
```
CC:  jdemeyer



Issue created by migration from https://trac.sagemath.org/ticket/18180





---

archive/issue_comments_241042.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-04-13T16:13:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241042",
    "user": "mmezzarobba"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_241043.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-04-13T16:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241043",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_241044.json:
```json
{
    "body": "Looks good. I'd say that this refcount stuff could possibly be useful, but it mostly looks totally forgotten and we can reimplement it right somewhere else if we need it. Plus it does not look like something very sage-specific anyway. Isn't there a way to do this in Python directly?\n\nNathann",
    "created_at": "2015-04-13T16:34:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241044",
    "user": "ncohen"
}
```

Looks good. I'd say that this refcount stuff could possibly be useful, but it mostly looks totally forgotten and we can reimplement it right somewhere else if we need it. Plus it does not look like something very sage-specific anyway. Isn't there a way to do this in Python directly?

Nathann



---

archive/issue_comments_241045.json:
```json
{
    "body": "Replying to [comment:2 ncohen]:\n>  Isn't there a way to do this in Python directly?\n\nPerhaps `sys.getrefcount`; I'm not sure if it's the same thing.",
    "created_at": "2015-04-13T16:41:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241045",
    "user": "mmezzarobba"
}
```

Replying to [comment:2 ncohen]:
>  Isn't there a way to do this in Python directly?

Perhaps `sys.getrefcount`; I'm not sure if it's the same thing.



---

archive/issue_comments_241046.json:
```json
{
    "body": "Can we just delete things without first deprecating them? What if third party code uses some of this?",
    "created_at": "2015-04-13T17:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241046",
    "user": "jhpalmieri"
}
```

Can we just delete things without first deprecating them? What if third party code uses some of this?



---

archive/issue_comments_241047.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2015-04-13T17:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241047",
    "user": "jhpalmieri"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_241048.json:
```json
{
    "body": "> Can we just delete things without first deprecating them?\n\nI believe that the custom is to only deprecate things which are somehow accessible in the global namespace, and that we can remove/change whatever has to be imported manually.\n\n> What if third party code uses some of this?\n\nThey will have to update it. Exactly as they would have to if we deprecate them for a year before that (and assuming that they update and run sage using those files during the next year).\n\nDo you think that adding deprecation warnings, which contain a message indicating how the code should be rewritten, would help in this case?\n\nI believe that the feature implemented by `file_to_worksheet` is already more easily available through the notebook interface (or the cloud) and less likely to be broken. For the refcount it is a bit more questionable, but then I thought that it would not be a problem as a guy who needs this kind of feature knows what he is doing.\n\nTell us what you think,\n\nNathann",
    "created_at": "2015-04-13T17:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241048",
    "user": "ncohen"
}
```

> Can we just delete things without first deprecating them?

I believe that the custom is to only deprecate things which are somehow accessible in the global namespace, and that we can remove/change whatever has to be imported manually.

> What if third party code uses some of this?

They will have to update it. Exactly as they would have to if we deprecate them for a year before that (and assuming that they update and run sage using those files during the next year).

Do you think that adding deprecation warnings, which contain a message indicating how the code should be rewritten, would help in this case?

I believe that the feature implemented by `file_to_worksheet` is already more easily available through the notebook interface (or the cloud) and less likely to be broken. For the refcount it is a bit more questionable, but then I thought that it would not be a problem as a guy who needs this kind of feature knows what he is doing.

Tell us what you think,

Nathann



---

archive/issue_comments_241049.json:
```json
{
    "body": "The safe way is to deprecate first, delete later, precisely because we don't know what is used \"in the wild\". I don't see a compelling reason to do anything else.\n\nI believe that the particular deletions here are probably safe to do now, but a deprecation now followed by deletion later would be even safer.\n\n> I believe that the custom is to only deprecate things which are somehow accessible in the global namespace, and that we can remove/change whatever has to be imported manually.\n\nI don't know this custom. Certainly `sage.rings.integer_ring_python.iterator(...)` can be run without an import, just like the deprecated function `sage.combinat.alternating_sign_matrix.to_monotone_triangle` (for example).",
    "created_at": "2015-04-13T18:45:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241049",
    "user": "jhpalmieri"
}
```

The safe way is to deprecate first, delete later, precisely because we don't know what is used "in the wild". I don't see a compelling reason to do anything else.

I believe that the particular deletions here are probably safe to do now, but a deprecation now followed by deletion later would be even safer.

> I believe that the custom is to only deprecate things which are somehow accessible in the global namespace, and that we can remove/change whatever has to be imported manually.

I don't know this custom. Certainly `sage.rings.integer_ring_python.iterator(...)` can be run without an import, just like the deprecated function `sage.combinat.alternating_sign_matrix.to_monotone_triangle` (for example).



---

archive/issue_comments_241050.json:
```json
{
    "body": "Okay. I personally believe that deprecating code like this is mostly a waste of time, so if you think that it is important please help Marc by reviewing it.\n\nGood evening,\n\nNathann",
    "created_at": "2015-04-13T18:53:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241050",
    "user": "ncohen"
}
```

Okay. I personally believe that deprecating code like this is mostly a waste of time, so if you think that it is important please help Marc by reviewing it.

Good evening,

Nathann



---

archive/issue_comments_241051.json:
```json
{
    "body": "Replying to [comment:7 jhpalmieri]:\n> The safe way is to deprecate first, delete later, precisely because we don't know what is used \"in the wild\". I don't see a compelling reason to do anything else.\n\nI don't think formally deprecating these modules is worth the effort, but please feel free to do it if you want. Like Nathann, I thought that deprecations only were required for the more easily accessible stuff--otherwise, pretty much every change to sage would require a deprecation period!\n\n(Cc:ing Jeroen as he suggested part of the removals.)",
    "created_at": "2015-04-13T19:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241051",
    "user": "mmezzarobba"
}
```

Replying to [comment:7 jhpalmieri]:
> The safe way is to deprecate first, delete later, precisely because we don't know what is used "in the wild". I don't see a compelling reason to do anything else.

I don't think formally deprecating these modules is worth the effort, but please feel free to do it if you want. Like Nathann, I thought that deprecations only were required for the more easily accessible stuff--otherwise, pretty much every change to sage would require a deprecation period!

(Cc:ing Jeroen as he suggested part of the removals.)



---

archive/issue_comments_241052.json:
```json
{
    "body": "Replying to [comment:9 mmezzarobba]:\n> Like Nathann, I thought that deprecations only were required for the more easily accessible stuff--otherwise, pretty much every change to sage would require a deprecation period!\n\nTechnically, every removal requires a deprecation. However, in this case it looks very unlikely that this code is actually used: it's not used in the Sage library, the functionality is very limited and the files haven't seen any non-trivial commits in years. So in this case the pragmatic thing to do is just removing them.",
    "created_at": "2015-04-13T19:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241052",
    "user": "jdemeyer"
}
```

Replying to [comment:9 mmezzarobba]:
> Like Nathann, I thought that deprecations only were required for the more easily accessible stuff--otherwise, pretty much every change to sage would require a deprecation period!

Technically, every removal requires a deprecation. However, in this case it looks very unlikely that this code is actually used: it's not used in the Sage library, the functionality is very limited and the files haven't seen any non-trivial commits in years. So in this case the pragmatic thing to do is just removing them.



---

archive/issue_comments_241053.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2015-04-13T19:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241053",
    "user": "jdemeyer"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_241054.json:
```json
{
    "body": "Note that `src/sage/stats/test.py` does have a non-trivial doctest which should remain in Sage.",
    "created_at": "2015-04-13T19:35:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241054",
    "user": "jdemeyer"
}
```

Note that `src/sage/stats/test.py` does have a non-trivial doctest which should remain in Sage.



---

archive/issue_comments_241055.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-04-13T19:55:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241055",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_241056.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-04-13T19:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241056",
    "user": "mmezzarobba"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_241057.json:
```json
{
    "body": "There is really no reason why this should depend on #18170, please un-rebase to #18170 or justify the dependency.",
    "created_at": "2015-04-13T20:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241057",
    "user": "jdemeyer"
}
```

There is really no reason why this should depend on #18170, please un-rebase to #18170 or justify the dependency.



---

archive/issue_comments_241058.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2015-04-13T20:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241058",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_241059.json:
```json
{
    "body": "Replying to [comment:14 jdemeyer]:\n> There is really no reason why this should depend on #18170, please un-rebase to #18170 or justify the dependency.\n\nBoth now modify the module docstring of `stats.r`",
    "created_at": "2015-04-13T20:29:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241059",
    "user": "mmezzarobba"
}
```

Replying to [comment:14 jdemeyer]:
> There is really no reason why this should depend on #18170, please un-rebase to #18170 or justify the dependency.

Both now modify the module docstring of `stats.r`



---

archive/issue_comments_241060.json:
```json
{
    "body": "Replying to [comment:15 mmezzarobba]:\n> Replying to [comment:14 jdemeyer]:\n> > There is really no reason why this should depend on #18170, please un-rebase to #18170 or justify the dependency.\n> \n> Both now modify the module docstring of `stats.r`\nWell, you wrote both tickets, you could just modify the docstring once...",
    "created_at": "2015-04-14T07:20:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241060",
    "user": "jdemeyer"
}
```

Replying to [comment:15 mmezzarobba]:
> Replying to [comment:14 jdemeyer]:
> > There is really no reason why this should depend on #18170, please un-rebase to #18170 or justify the dependency.
> 
> Both now modify the module docstring of `stats.r`
Well, you wrote both tickets, you could just modify the docstring once...



---

archive/issue_comments_241061.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-04-14T07:25:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241061",
    "user": "jdemeyer"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_241062.json:
```json
{
    "body": "Can we also remove `sage/misc/typecheck` please?",
    "created_at": "2015-04-15T20:34:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241062",
    "user": "jdemeyer"
}
```

Can we also remove `sage/misc/typecheck` please?



---

archive/issue_comments_241063.json:
```json
{
    "body": "Wow. Nice find. Yeah, +1 to removing it `:-P`",
    "created_at": "2015-04-15T20:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241063",
    "user": "ncohen"
}
```

Wow. Nice find. Yeah, +1 to removing it `:-P`



---

archive/issue_comments_241064.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-16T06:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241064",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241065.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-04-16T06:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241065",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_241066.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-04-27T11:47:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241066",
    "user": "mmezzarobba"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_241067.json:
```json
{
    "body": "Why `needs_work`?",
    "created_at": "2015-04-27T18:48:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241067",
    "user": "jdemeyer"
}
```

Why `needs_work`?



---

archive/issue_comments_241068.json:
```json
{
    "body": "It probably conflicts with #18170 again. I didn't check, but I didn't want people to waste their time on this ticket before I could rebase it...",
    "created_at": "2015-04-27T19:43:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241068",
    "user": "mmezzarobba"
}
```

It probably conflicts with #18170 again. I didn't check, but I didn't want people to waste their time on this ticket before I could rebase it...



---

archive/issue_comments_241069.json:
```json
{
    "body": "6.7.beta4 is released. If you rebase, I will review.",
    "created_at": "2015-05-05T20:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241069",
    "user": "jdemeyer"
}
```

6.7.beta4 is released. If you rebase, I will review.



---

archive/issue_comments_241070.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-21T08:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241070",
    "user": "jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_241071.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-05-21T08:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241071",
    "user": "jdemeyer"
}
```

New commits:



---

archive/issue_comments_241072.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-24T10:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241072",
    "user": "mmezzarobba"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_241073.json:
```json
{
    "body": "\n```\n$ ./sage -t src/sage/combinat/species/stream.py \nRunning doctests with ID 2015-05-24-12-23-57-1ed2a4c9.\nGit branch: HEAD\nDoctesting 1 file.\nsage -t --warn-long 23.1 src/sage/combinat/species/stream.py\n**********************************************************************\nFile \"src/sage/combinat/species/stream.py\", line 146, in sage.combinat.species.stream.Stream_class.__init__\nFailed example:\n    list(sorted(s.__dict__.iteritems()))\nExpected:\n    [('_constant', None),\n     ('_gen', <generator object iterator at 0x...>),\n     ('_last_index', -1),\n     ('_list', []),\n     ('end_reached', False)]\nGot:\n    [('_constant', None),\n     ('_gen', <generator object at 0x7f767b09c6b0>),\n     ('_last_index', -1),\n     ('_list', []),\n     ('end_reached', False)]\n**********************************************************************\n```\n",
    "created_at": "2015-05-24T10:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241073",
    "user": "mmezzarobba"
}
```


```
$ ./sage -t src/sage/combinat/species/stream.py 
Running doctests with ID 2015-05-24-12-23-57-1ed2a4c9.
Git branch: HEAD
Doctesting 1 file.
sage -t --warn-long 23.1 src/sage/combinat/species/stream.py
**********************************************************************
File "src/sage/combinat/species/stream.py", line 146, in sage.combinat.species.stream.Stream_class.__init__
Failed example:
    list(sorted(s.__dict__.iteritems()))
Expected:
    [('_constant', None),
     ('_gen', <generator object iterator at 0x...>),
     ('_last_index', -1),
     ('_list', []),
     ('end_reached', False)]
Got:
    [('_constant', None),
     ('_gen', <generator object at 0x7f767b09c6b0>),
     ('_last_index', -1),
     ('_list', []),
     ('end_reached', False)]
**********************************************************************
```




---

archive/issue_comments_241074.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-24T16:17:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241074",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_241075.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-24T16:19:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241075",
    "user": "jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_241076.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-24T17:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241076",
    "user": "mmezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_241077.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-25T07:29:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17943",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17943#issuecomment-241077",
    "user": "vbraun"
}
```

Resolution: fixed
