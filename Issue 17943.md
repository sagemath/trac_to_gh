# Issue 17943: Remove a few unused modules

Issue created by migration from Trac.

Original creator: mmezzarobba

Original creation time: 2015-04-13 16:13:24

CC:  jdemeyer




---

Comment by mmezzarobba created at 2015-04-13 16:13:34

Changing status from new to needs_review.


---

Comment by ncohen created at 2015-04-13 16:34:09

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2015-04-13 16:34:09

Looks good. I'd say that this refcount stuff could possibly be useful, but it mostly looks totally forgotten and we can reimplement it right somewhere else if we need it. Plus it does not look like something very sage-specific anyway. Isn't there a way to do this in Python directly?

Nathann


---

Comment by mmezzarobba created at 2015-04-13 16:41:27

Replying to [comment:2 ncohen]:
>  Isn't there a way to do this in Python directly?

Perhaps `sys.getrefcount`; I'm not sure if it's the same thing.


---

Comment by jhpalmieri created at 2015-04-13 17:12:16

Can we just delete things without first deprecating them? What if third party code uses some of this?


---

Comment by jhpalmieri created at 2015-04-13 17:12:24

Changing status from positive_review to needs_info.


---

Comment by ncohen created at 2015-04-13 17:28:45

> Can we just delete things without first deprecating them?

I believe that the custom is to only deprecate things which are somehow accessible in the global namespace, and that we can remove/change whatever has to be imported manually.

> What if third party code uses some of this?

They will have to update it. Exactly as they would have to if we deprecate them for a year before that (and assuming that they update and run sage using those files during the next year).

Do you think that adding deprecation warnings, which contain a message indicating how the code should be rewritten, would help in this case?

I believe that the feature implemented by `file_to_worksheet` is already more easily available through the notebook interface (or the cloud) and less likely to be broken. For the refcount it is a bit more questionable, but then I thought that it would not be a problem as a guy who needs this kind of feature knows what he is doing.

Tell us what you think,

Nathann


---

Comment by jhpalmieri created at 2015-04-13 18:45:37

The safe way is to deprecate first, delete later, precisely because we don't know what is used "in the wild". I don't see a compelling reason to do anything else.

I believe that the particular deletions here are probably safe to do now, but a deprecation now followed by deletion later would be even safer.

> I believe that the custom is to only deprecate things which are somehow accessible in the global namespace, and that we can remove/change whatever has to be imported manually.

I don't know this custom. Certainly `sage.rings.integer_ring_python.iterator(...)` can be run without an import, just like the deprecated function `sage.combinat.alternating_sign_matrix.to_monotone_triangle` (for example).


---

Comment by ncohen created at 2015-04-13 18:53:52

Okay. I personally believe that deprecating code like this is mostly a waste of time, so if you think that it is important please help Marc by reviewing it.

Good evening,

Nathann


---

Comment by mmezzarobba created at 2015-04-13 19:20:18

Replying to [comment:7 jhpalmieri]:
> The safe way is to deprecate first, delete later, precisely because we don't know what is used "in the wild". I don't see a compelling reason to do anything else.

I don't think formally deprecating these modules is worth the effort, but please feel free to do it if you want. Like Nathann, I thought that deprecations only were required for the more easily accessible stuff--otherwise, pretty much every change to sage would require a deprecation period!

(Cc:ing Jeroen as he suggested part of the removals.)


---

Comment by jdemeyer created at 2015-04-13 19:33:41

Replying to [comment:9 mmezzarobba]:
> Like Nathann, I thought that deprecations only were required for the more easily accessible stuff--otherwise, pretty much every change to sage would require a deprecation period!

Technically, every removal requires a deprecation. However, in this case it looks very unlikely that this code is actually used: it's not used in the Sage library, the functionality is very limited and the files haven't seen any non-trivial commits in years. So in this case the pragmatic thing to do is just removing them.


---

Comment by jdemeyer created at 2015-04-13 19:35:29

Changing status from needs_info to needs_work.


---

Comment by jdemeyer created at 2015-04-13 19:35:29

Note that `src/sage/stats/test.py` does have a non-trivial doctest which should remain in Sage.


---

Comment by git created at 2015-04-13 19:55:42

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by mmezzarobba created at 2015-04-13 19:56:29

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2015-04-13 20:04:25

There is really no reason why this should depend on #18170, please un-rebase to #18170 or justify the dependency.


---

Comment by jdemeyer created at 2015-04-13 20:04:25

Changing status from needs_review to needs_info.


---

Comment by mmezzarobba created at 2015-04-13 20:29:22

Replying to [comment:14 jdemeyer]:
> There is really no reason why this should depend on #18170, please un-rebase to #18170 or justify the dependency.

Both now modify the module docstring of `stats.r`


---

Comment by jdemeyer created at 2015-04-14 07:20:01

Replying to [comment:15 mmezzarobba]:
> Replying to [comment:14 jdemeyer]:
> > There is really no reason why this should depend on #18170, please un-rebase to #18170 or justify the dependency.
> 
> Both now modify the module docstring of `stats.r`
Well, you wrote both tickets, you could just modify the docstring once...


---

Comment by jdemeyer created at 2015-04-14 07:25:45

Changing status from needs_info to needs_review.


---

Comment by jdemeyer created at 2015-04-15 20:34:48

Can we also remove `sage/misc/typecheck` please?


---

Comment by ncohen created at 2015-04-15 20:36:57

Wow. Nice find. Yeah, +1 to removing it `:-P`


---

Comment by git created at 2015-04-16 06:02:28

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2015-04-16 06:20:08

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mmezzarobba created at 2015-04-27 11:47:33

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2015-04-27 18:48:37

Why `needs_work`?


---

Comment by mmezzarobba created at 2015-04-27 19:43:14

It probably conflicts with #18170 again. I didn't check, but I didn't want people to waste their time on this ticket before I could rebase it...


---

Comment by jdemeyer created at 2015-05-05 20:49:48

6.7.beta4 is released. If you rebase, I will review.


---

Comment by jdemeyer created at 2015-05-21 08:50:14

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2015-05-21 08:50:14

New commits:


---

Comment by mmezzarobba created at 2015-05-24 10:24:20

Changing status from needs_review to needs_work.


---

Comment by mmezzarobba created at 2015-05-24 10:24:20


```
$ ./sage -t src/sage/combinat/species/stream.py 
Running doctests with ID 2015-05-24-12-23-57-1ed2a4c9.
Git branch: HEAD
Doctesting 1 file.
sage -t --warn-long 23.1 src/sage/combinat/species/stream.py
**********************************************************************
File "src/sage/combinat/species/stream.py", line 146, in sage.combinat.species.stream.Stream_class.__init__
Failed example:
    list(sorted(s.__dict__.iteritems()))
Expected:
    [('_constant', None),
     ('_gen', <generator object iterator at 0x...>),
     ('_last_index', -1),
     ('_list', []),
     ('end_reached', False)]
Got:
    [('_constant', None),
     ('_gen', <generator object at 0x7f767b09c6b0>),
     ('_last_index', -1),
     ('_list', []),
     ('end_reached', False)]
**********************************************************************
```



---

Comment by git created at 2015-05-24 16:17:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jdemeyer created at 2015-05-24 16:19:57

Changing status from needs_work to needs_review.


---

Comment by mmezzarobba created at 2015-05-24 17:29:03

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2015-05-25 07:29:51

Resolution: fixed
