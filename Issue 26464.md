# Issue 26464: Simplifications in the computation of the inverse of a transition map

Issue created by migration from https://trac.sagemath.org/ticket/26701

Original creator: egourgoulhon

Original creation time: 2018-11-13 15:02:33

CC:  tscrim

Keywords: manifold, coordinate chart, transition map

We have currently:

```
sage: M = Manifold(2, 'M')
sage: c_xy.<x,y> = M.chart()
sage: c_uv.<u,v> = M.chart()
sage: phi = var('phi', domain='real')
sage: xy_to_uv = c_xy.transition_map(c_uv, [cos(phi)*x + sin(phi)*y,
....:                                       -sin(phi)*x + cos(phi)*y])
sage: xy_to_uv.inverse().display()
x = (u*cos(phi) - v*sin(phi))/(cos(phi)^2 + sin(phi)^2)
y = (v*cos(phi) + u*sin(phi))/(cos(phi)^2 + sin(phi)^2)
```

Clearly the inverse transition map lacks simplification. This results from a bug in the method `CoordChange.inverse()`, which makes the simplification ineffective. With this ticket, the last line becomes

```
sage: xy_to_uv.inverse().display()
x = u*cos(phi) - v*sin(phi)
y = v*cos(phi) + u*sin(phi)
```

In addition, this ticket removes the auxiliary symbolic variables `xxxx*` that have been introduced by `CoordChange.inverse()` from the list of assumptions: after the above code is run, we have currently:

```
sage: assumptions()
[x is real,
 y is real,
 u is real,
 v is real,
 phi is real,
 xxxx0 is real,
 xxxx1 is real]
```

With this ticket, this becomes:

```
sage: assumptions()
[x is real, y is real, u is real, v is real, phi is real]
```






---

Comment by egourgoulhon created at 2018-11-13 15:06:42

New commits:


---

Comment by egourgoulhon created at 2018-11-13 15:08:05

Changing status from new to needs_review.


---

Comment by tscrim created at 2018-11-14 04:59:45

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2018-11-14 04:59:45

LGTM.


---

Comment by egourgoulhon created at 2018-11-14 09:13:31

Thanks Travis!


---

Comment by vbraun created at 2018-11-15 22:57:06

Resolution: fixed
