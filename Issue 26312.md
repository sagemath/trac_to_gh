# Issue 26312: Formal power series over large commutative rings

Issue created by migration from https://trac.sagemath.org/ticket/26549

Original creator: @NatStapleton

Original creation time: 2018-10-24 20:46:53

CC:  niles

Keywords: formal power series

The goal of this project is to build software in Sage for doing lazy computation with multivariable formal power series over large commutative ring (such as the Lazard ring, which is a polynomial ring over the integers in an countable number of variables). 

We will define power series by describing a function from a cartesian power of the natural numbers to the coefficient ring. We plan to manipulate such power series in a completely formal manner. For example, when two formal power series are added, the resulting formal power series is just a tree containing the node "+" with the two functions defining the formal power series as children. The only time computation of the coefficients occurs is when the user asks to "view" a power series out to some range. Then our goal is to perform the minimal amount of computation in order to show the resulting power series to the user to the specified precision.

We also introduce a class of commutative rings called "IndRings". They are simply sequential diagrams of finitely generated k-algebras, where k is a base ring that Sage knows about. An IndRing is defined by specifying a function from the natural numbers to finitely generated k-algebras and, for each natural number i, a map of k-algebras from the k-algebra associated to i to the k-algebra associated to i+1. 

A map of IndRings is a map of Ind-objects in finitely generated k-algebras. That is, it is given by specifying countable subsets S and T of the natural numbers and a surjective lax order preserving map f from S to T and a map of k-algebras from the k-algebra associated to an element s in S to the k-algebra associated to f(s). These maps are supposed to commute with all of the structure, but we will not check this in the software.

We also provide a way to promote a finitely generated k-algebra to an IndRing.


---

Comment by @NatStapleton created at 2018-10-31 20:14:40

Set assignee to @NatStapleton.


---

Attachment

the formal power series package, do "sage --preparse FPS.sage" to be able to import it


---

Attachment

the IndRing package, run "sage --preparse IndRing.sage", you may need to move IndRing.sage.py to IndRing.py.


---

Comment by @NatStapleton created at 2018-11-14 22:35:35

Examples that use our packages


---

Attachment


---

Comment by niles created at 2018-11-19 14:56:53

Great!  I can't see the branch you've created -- perhaps it is not uploaded to trac?  Are you using the `git trac` command ([here](http://doc.sagemath.org/html/en/developer/git_trac.html#uploading-changes-to-trac))? Or using git directly (known as [the hard way](http://doc.sagemath.org/html/en/developer/manual_git.html#git-the-hard-way), but it's not that hard ;)?

In any case, one of the questions I know people will ask will be how this relates/integrates with the existing power series.  Can this be implemented as an add-on to the current interface? (maybe you've already done that in your branch?)

Another question will be some examples demonstrating differences in speed and memory usage in this implementation v.s. the current power series.  If you have any such examples, let me know.


---

Comment by niles created at 2019-01-16 21:11:37

Thanks!  I've been slow at getting to this, but it is on my list :)
----
New commits:


---

Comment by git created at 2019-02-06 21:04:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-02-06 21:45:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-02-13 18:21:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-02-13 22:45:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by niles created at 2019-02-14 17:49:43

I think this is good progress.  Eventually the examples should be folded in to the docstrings, so you might consider moving toward that format.  For example, the documentation for power series looks like this:

https://doc.sagemath.org/html/en/reference/calculus/sage/symbolic/series.html

and the source code is like this:

https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/symbolic/series.pyx

Since there is a lot of stuff in your code, I will try to go through it in parts.  I'll start with  the `IndRing` stuff, unless you think there is a better place to start -- let me know :)


---

Comment by git created at 2019-02-20 22:43:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by embray created at 2019-03-25 10:56:15

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)


---

Comment by git created at 2019-03-27 19:59:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-04-10 21:21:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-04-17 20:09:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2019-04-17 22:22:10

>  Second, we found the multiplication of multivariable power series to be slow. After looking at the code, we believe that this is due to the fact that the current code multiplies the underlying polynomials and then truncates the result. Of course, it is more efficient to only multiply terms that contribute to the product up to the degree that you are interested in. We have implemented this more efficient multiplication in this code and it is the default multiplication for formal power series. We also make use of this faster multiplication when the user asks to view the composite of certain formal power series. 

I think this should be split off as a separate ticket as it is of independent interest and would be good to get into Sage faster. `;)`


---

Comment by git created at 2019-05-15 19:34:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by embray created at 2019-06-14 14:55:02

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).


---

Comment by mantepse created at 2022-09-15 20:15:21

Changing keywords from "formal power series" to "formal power series, LazyPowerSeries".
