# Issue 12726: Update top-level README.txt

Issue created by migration from https://trac.sagemath.org/ticket/12898

Original creator: jdemeyer

Original creation time: 2012-05-02 07:10:43

Assignee: mvngu

CC:  drkirkby

The file `$SAGE_ROOT/README.txt` still says you need a fortran compiler, except on OSX, with no
mention of the gcc package, or how one might use or disable it.


---

Comment by jdemeyer created at 2012-05-02 09:47:28

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2012-05-02 09:47:28

This is a first attempt.


---

Comment by kcrisman created at 2012-05-02 13:03:55

This doesn't make sense.

```
Since includes a GCC (GNU Compiler Collection) package.  In order to 
```

Trivial to fix but I don't know exactly what wording you want here.  Maybe just one sentence instead of two?  Anyway, the first sentence has no verb.


---

Comment by kcrisman created at 2012-05-02 13:03:55

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2012-05-02 14:44:36

Replying to [comment:2 kcrisman]:
> Anyway, the first sentence has no verb.
"includes" is a verb :-)


---

Comment by jdemeyer created at 2012-05-02 14:45:09

Changing status from needs_work to needs_review.


---

Comment by was created at 2012-05-02 16:47:34

Changing status from needs_review to positive_review.


---

Comment by was created at 2012-05-02 16:47:34

It looks good to me.


---

Comment by kcrisman created at 2012-05-02 16:50:20

Aah!  I was in the process of submitting...

For reference:
----
> > Anyway, the first sentence has no verb.
> "includes" is a verb :-)
Main verb, yes.

Questions/comments:
 * Some things I kind of get are true from previous tickets (3 GB, changing to `--optional` from `-optional` and so forth) but I don't actually _know_ they are true; I guess I should just trust the author?  ;-)
 * So Sage compiles with Sun compilers on Solaris now because we build and use GCC?  I don't remember reading that but haven't been paying close attention to the thread, seems plausible.
 * I understand that the `v` flag for untarring is optional, but if you remove that flag, then you should probably tell the user how long they should expect to wait for Sage to untar.  It takes a *long* time (I've done this with a student on a couple occasions and we weren't sure if the connection had timed out!), and I would expect that some of the spkgs inside Sage likewise take at least more than a couple minutes to untar - ?

But in general this looks good and applies properly etc.  Positive review?  I can't take responsibility for every one of the little changes, like the comment about Ubuntu 12.04, obviously, so I hesitate... but seems like it's ready and certainly helpful.


---

Comment by jdemeyer created at 2012-05-02 17:46:41

Replying to [comment:6 kcrisman]:
>  So Sage compiles with Sun compilers on Solaris now because we build and use GCC?
Exactly.  It's even tested on the buildbot (on i386 OpenSolaris at least).

>  I understand that the `v` flag for untarring is optional, but if you remove that flag, then you should probably tell the user how long they should expect to wait for Sage to untar.  It takes a *long* time (I've done this with a student on a couple occasions and we weren't sure if the connection had timed out!), and I would expect that some of the spkgs inside Sage likewise take at least more than a couple minutes to untar - ?
Fair enough, I added back that flag.


---

Comment by kcrisman created at 2012-05-03 01:11:38

> >  I understand that the `v` flag for untarring is optional, but if you remove that flag, then you should probably tell the user how long they should expect to wait for Sage to untar.  It takes a *long* time (I've done this with a student on a couple occasions and we weren't sure if the connection had timed out!), and I would expect that some of the spkgs inside Sage likewise take at least more than a couple minutes to untar - ?
> Fair enough, I added back that flag.
Either that or a clarification without `-v` is fine, I just wasn't sure if there was some other reason to get rid of that flag (e.g., the verbosity for some with a lot of image files is VERY verbose).   I assume the `-xj` and `-jx` switch is because the mandatory flag is supposed to come first?  I know little of such things but that seems plausible.

Nice that we can build more places.  I wonder if Sage would even build with other compilers, then... say, on Windows or some other Unices... but probably not, due to other issues like linkers etc.?  (About which I also know nothing, but it's fun to speculate.)


---

Comment by drkirkby created at 2012-05-05 10:06:51

Is is true that _"Each spkg in $SAGE_ROOT/spkg/standard/ is a bzip'd tarball"_, as stated? I doubt the bzip2 package is. I think that is an uncompressed tarball. I'm not sure if there are any others either. 

Also, I don't know why anyone puts *-xfj* or similar, when *xfj* will do. Tar is not defined by POSIX, so it's impossible to give an authoritative answer, but every tar program I have ever used, does not need the minus sign. The use of x (to extract), c (to create), t (to view), u (to update) or r (to replace) are not options. You *must* have one of them. Since they are not options, you don't need the minus sign. The *j* is an option, but GNU tar does not require the minus sign. So one might as well save a bit of wear on the keyboard, and not put the minus sign. 

I thought GNU tar was supposed to be a requirement to build Sage. In which case, one might as well drop the *j* too, since GNU tar will work out for itself that the file is compressed or not. If it's compressed, it will silently uncompress it. 

Dave


---

Comment by jdemeyer created at 2012-05-05 20:57:05

Replying to [comment:10 drkirkby]:
> Is is true that _"Each spkg in $SAGE_ROOT/spkg/standard/ is a bzip'd tarball"_, as stated? I doubt the bzip2 package is. I think that is an uncompressed tarball. I'm not sure if there are any others either.
`bzip2` is gzip-compressed, the other packages are all bzip2-compressed.


---

Comment by jdemeyer created at 2012-05-05 21:31:50

David, I made some changes you suggested.  Please review.


---

Comment by jdemeyer created at 2012-05-05 21:31:50

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2012-05-05 21:32:08

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2012-05-07 16:11:36

new version says :
"recent and equal versions of gcc, g++ and gfortran." 

It is not clear what "equal" means here...


---

Comment by jdemeyer created at 2012-05-07 18:33:21

Clarified:

```
If you don't want to install GCC, you need to have recent
versions of gcc, g++ and gfortran; moreover, the versions must be equal.
```



---

Comment by mraum created at 2012-05-07 22:09:35

I think the double space looks a bit too much like emacs, and I removed it. I also made the link to the environment variable page more visible, and I removed the dash in the second tar command, just to be a bit more consequent (the other was removed as well).

Apart from this the changes look good.


---

Comment by jdemeyer created at 2012-05-08 06:59:45

I made some further changes:

```patch
diff --git a/README.txt b/README.txt
--- a/README.txt
+++ b/README.txt
@@ -69,12 +69,12 @@

 1. Make sure you have the dependencies and 3 GB of free disk space.

-   Linux: GCC, make, m4, perl, ranlib, and tar.
+   Linux: gcc, make, m4, perl, ranlib, and tar.
    (install these using your package manager)
    On recent Debian or Ubuntu systems (in particular Ubuntu 12.04
    "Precise"), you need the dpkg-dev package.

-   OS X: Xcode.  Make sure you have installed the most recent version
+   OS X: Xcode. Make sure you have installed the most recent version
    of Xcode. For pre-Lion versions of OS X, you can download Xcode
    from http://developer.apple.com/downloads/. For OS X Lion, you can
    install it using the App Store. With Xcode 4.3 or later, you need
@@ -112,12 +112,12 @@

 On Linux, if you get this error message:

-    " restore segment prot after reloc: Permission denied "
+    Error: cannot restore segment prot after reloc: Permission denied

 the problem is probably related to SELinux. See the following URL for
 further information:

-    http://www.ittvis.com/services/techtip.asp?ttid=3092
+    http://www.exelisvis.com/Support/HelpArticleDetail/ArticleId/3092.aspx


 IMPLEMENTATION
@@ -184,17 +184,15 @@
        export SAGE_CHECK="yes"

    before starting the Sage build. This will run each test suite and
-   will raise an error if any failures occur.  Warning: on many
-   platforms, this will cause failures in the installation of the
-   Python spkg, so Python's test suite has been disabled by default.
-   To renable it, set the environment variable SAGE_CHECK_PACKAGES to
-   'python'.
-
+   will raise an error if any failures occur. Python's test suite has
+   been disabled by default, because it causes failures on most
+   systems. To renable the Python testsuite, set the environment
+   variable SAGE_CHECK_PACKAGES to "python".
+
    To start the build, type:

        make

-
 4. Wait about 1 hour to 14 days, depending on your computer (it took
    about 2 weeks to build Sage on the T-Mobile G1 Android cell phone).

@@ -265,7 +263,7 @@

 Sage includes a GCC (GNU Compiler Collection) package. In order to
 build Sage, you need a C compiler which can build GCC and its
-prerequisites. GCC version 4.0.1 or later should probably work. On
+prerequisites. gcc version 4.0.1 or later should probably work. On
 Solaris or OpenSolaris, building with the Sun compiler should also work.

 The GCC package in Sage is not always installed. It is determined
```



---

Comment by mraum created at 2012-05-08 07:19:53

Changing status from needs_review to positive_review.


---

Attachment

Looks good now.


---

Comment by jdemeyer created at 2012-05-08 20:30:31

Resolution: fixed
