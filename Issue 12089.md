# Issue 12089: Bring Doctest coverage for element_ext_pari.py to 100%

archive/issues_012089.json:
```json
{
    "body": "Assignee: mvngu\n\nCC:  @robertwb\n\nPart of metaticket #12024\n\nIssue created by migration from https://trac.sagemath.org/ticket/12261\n\n",
    "created_at": "2012-01-04T13:27:31Z",
    "labels": [
        "component: doctest coverage"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.0",
    "title": "Bring Doctest coverage for element_ext_pari.py to 100%",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12089",
    "user": "https://github.com/roed314"
}
```
Assignee: mvngu

CC:  @robertwb

Part of metaticket #12024

Issue created by migration from https://trac.sagemath.org/ticket/12261





---

archive/issue_comments_139946.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-01-04T14:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139946",
    "user": "https://github.com/roed314"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_139947.json:
```json
{
    "body": "Attachment [12261.patch](tarball://root/attachments/some-uuid/ticket12261/12261.patch) by @roed314 created at 2012-01-04 14:32:28",
    "created_at": "2012-01-04T14:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139947",
    "user": "https://github.com/roed314"
}
```

Attachment [12261.patch](tarball://root/attachments/some-uuid/ticket12261/12261.patch) by @roed314 created at 2012-01-04 14:32:28



---

archive/issue_comments_139948.json:
```json
{
    "body": "I'm finding it hard to find any problems with this that aren't nearly trivial.  Comments that may or may not warrant addressing:\n* Typo \n  {{{\nThe has of this element \n  }}}\n* `def __compat(self, other):` removed because...?  (I assume this is obvious to someone familiar with this code, but they haven't reviewed this.)\n* I really like that you actually mention that the doctests are indirect when they are.  We need to do that more.\n* You got 'em:\n\n```\n$ ../../sage -coverage ../../devel/sage/sage/rings/finite_rings/element_ext_pari.py\n----------------------------------------------------------------------\n../../devel/sage/sage/rings/finite_rings/element_ext_pari.py\nSCORE ../../devel/sage/sage/rings/finite_rings/element_ext_pari.py: 100% (31 of 31)\n----------------------------------------------------------------------\n```\n\n   and testing seems fine.\n* Although not really part of this ticket, one *could* add this to the reference manual; if so, might as well change `See self.square_root()` to `See :meth:`square_root`` or whatever the right syntax is.\n* Really picky; is it Pari or pari, officially?  I feel like this was unified at some point in our docs.\n* There is a typo that has nothing to do with this ticket but should be fixed - `probabalistic`\n \nLet me know what you want to deal with on a refresh (probably at least the typos) and otherwise this should go in.",
    "created_at": "2012-01-27T03:45:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139948",
    "user": "https://github.com/kcrisman"
}
```

I'm finding it hard to find any problems with this that aren't nearly trivial.  Comments that may or may not warrant addressing:
* Typo 
  {{{
The has of this element 
  }}}
* `def __compat(self, other):` removed because...?  (I assume this is obvious to someone familiar with this code, but they haven't reviewed this.)
* I really like that you actually mention that the doctests are indirect when they are.  We need to do that more.
* You got 'em:

```
$ ../../sage -coverage ../../devel/sage/sage/rings/finite_rings/element_ext_pari.py
----------------------------------------------------------------------
../../devel/sage/sage/rings/finite_rings/element_ext_pari.py
SCORE ../../devel/sage/sage/rings/finite_rings/element_ext_pari.py: 100% (31 of 31)
----------------------------------------------------------------------
```

   and testing seems fine.
* Although not really part of this ticket, one *could* add this to the reference manual; if so, might as well change `See self.square_root()` to `See :meth:`square_root`` or whatever the right syntax is.
* Really picky; is it Pari or pari, officially?  I feel like this was unified at some point in our docs.
* There is a typo that has nothing to do with this ticket but should be fixed - `probabalistic`
 
Let me know what you want to deal with on a refresh (probably at least the typos) and otherwise this should go in.



---

archive/issue_comments_139949.json:
```json
{
    "body": "Attachment [12261.2.patch](tarball://root/attachments/some-uuid/ticket12261/12261.2.patch) by @roed314 created at 2012-02-02 09:16:14\n\nApply this patch only",
    "created_at": "2012-02-02T09:16:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139949",
    "user": "https://github.com/roed314"
}
```

Attachment [12261.2.patch](tarball://root/attachments/some-uuid/ticket12261/12261.2.patch) by @roed314 created at 2012-02-02 09:16:14

Apply this patch only



---

archive/issue_comments_139950.json:
```json
{
    "body": "Sorry: I should have made a reviewer patch rather than a whole new one.  But I'd already qrefreshed...",
    "created_at": "2012-02-02T09:17:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139950",
    "user": "https://github.com/roed314"
}
```

Sorry: I should have made a reviewer patch rather than a whole new one.  But I'd already qrefreshed...



---

archive/issue_comments_139951.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-02T18:24:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139951",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_139952.json:
```json
{
    "body": "That's ok.    Patch is fine.\n\nI don't feel comfortable giving final positive review because of the `__compat` issue - again, I'm sure this is obvious to those in the know, but I don't want to be responsible for removing a function it turns out is crucial to someone (even an underscore function).\n\nAlso (less crucially) now I realize that I think the [folks in Bordeaux](http://pari.math.u-bordeaux.fr/) *really* want PARI and not Pari... I just don't know, and hate all that stuff, but it's probably important to them.\n\nJeroen probably also won't accept this due to the commit \"message\".  I'm really sorry... I know from experience how much work doctest upgrades end up taking when you think they will be a 5-minute job.",
    "created_at": "2012-02-02T18:24:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139952",
    "user": "https://github.com/kcrisman"
}
```

That's ok.    Patch is fine.

I don't feel comfortable giving final positive review because of the `__compat` issue - again, I'm sure this is obvious to those in the know, but I don't want to be responsible for removing a function it turns out is crucial to someone (even an underscore function).

Also (less crucially) now I realize that I think the [folks in Bordeaux](http://pari.math.u-bordeaux.fr/) *really* want PARI and not Pari... I just don't know, and hate all that stuff, but it's probably important to them.

Jeroen probably also won't accept this due to the commit "message".  I'm really sorry... I know from experience how much work doctest upgrades end up taking when you think they will be a 5-minute job.



---

archive/issue_comments_139953.json:
```json
{
    "body": "Most recent update",
    "created_at": "2012-02-02T20:02:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139953",
    "user": "https://github.com/roed314"
}
```

Most recent update



---

archive/issue_comments_139954.json:
```json
{
    "body": "Attachment [12261.3.patch](tarball://root/attachments/some-uuid/ticket12261/12261.3.patch) by @roed314 created at 2012-02-02 20:04:50\n\nNo problem.  I'm not convinced that we need to worry about the `__compat` function since it's a double underscore method (and does something useful only to coercion), but oh well: I added a deprecation warning instead.\n\nI also updated the commit message and changed Pari to PARI.",
    "created_at": "2012-02-02T20:04:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139954",
    "user": "https://github.com/roed314"
}
```

Attachment [12261.3.patch](tarball://root/attachments/some-uuid/ticket12261/12261.3.patch) by @roed314 created at 2012-02-02 20:04:50

No problem.  I'm not convinced that we need to worry about the `__compat` function since it's a double underscore method (and does something useful only to coercion), but oh well: I added a deprecation warning instead.

I also updated the commit message and changed Pari to PARI.



---

archive/issue_comments_139955.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-02T20:04:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139955",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_139956.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-02-02T20:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139956",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_139957.json:
```json
{
    "body": "As I suspected, changing `raise` to `Raise` would cause problems.\n\n```\n./sage -b\n<snip>\nSyntaxError: invalid syntax (element_ext_pari.py, line 653)\nError importing ipy_profile_sage - perhaps you should run %upgrade?\nWARNING: Loading of ipy_profile_sage failed.\n```\n\nI don't mind you removing that function!  I just don't know what it does or why it can now be removed - actually, upon reading it, it does make sense.  If someone else (e.g., robertwb) can verify that the same functionality of checking that two such elements come from the same finite field is in Sage, I am very happy with reducing our doctest needs by removing that.",
    "created_at": "2012-02-02T20:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139957",
    "user": "https://github.com/kcrisman"
}
```

As I suspected, changing `raise` to `Raise` would cause problems.

```
./sage -b
<snip>
SyntaxError: invalid syntax (element_ext_pari.py, line 653)
Error importing ipy_profile_sage - perhaps you should run %upgrade?
WARNING: Loading of ipy_profile_sage failed.
```

I don't mind you removing that function!  I just don't know what it does or why it can now be removed - actually, upon reading it, it does make sense.  If someone else (e.g., robertwb) can verify that the same functionality of checking that two such elements come from the same finite field is in Sage, I am very happy with reducing our doctest needs by removing that.



---

archive/issue_comments_139958.json:
```json
{
    "body": "Even more recent update.  It would be nice to be able to delete patches....",
    "created_at": "2012-02-02T20:44:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139958",
    "user": "https://github.com/roed314"
}
```

Even more recent update.  It would be nice to be able to delete patches....



---

archive/issue_comments_139959.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-02-02T20:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139959",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_139960.json:
```json
{
    "body": "Attachment [12261.4.patch](tarball://root/attachments/some-uuid/ticket12261/12261.4.patch) by @roed314 created at 2012-02-02 20:46:10\n\nOops.  Command C on a Mac capitalizes things; that was not intentional.\n\nI've removed `__compat` again. I'll find someone else to sign off on it.\n\nApply 12261.4.patch only.",
    "created_at": "2012-02-02T20:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139960",
    "user": "https://github.com/roed314"
}
```

Attachment [12261.4.patch](tarball://root/attachments/some-uuid/ticket12261/12261.4.patch) by @roed314 created at 2012-02-02 20:46:10

Oops.  Command C on a Mac capitalizes things; that was not intentional.

I've removed `__compat` again. I'll find someone else to sign off on it.

Apply 12261.4.patch only.



---

archive/issue_comments_139961.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-02-02T23:10:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139961",
    "user": "https://github.com/adeines"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_139962.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-02-06T21:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12089#issuecomment-139962",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_012110.json:
```json
{
    "actor": "@jdemeyer",
    "created_at": "2012-02-06T21:25:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12089",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12089#event-12110"
}
```
