# Issue 21666: LatticePoset: add neutral_elements

Issue created by migration from https://trac.sagemath.org/ticket/21903

Original creator: jmantysalo

Original creation time: 2016-11-19 20:47:37

CC:  tscrim

This patch will add function to compute neutral elements of a lattice.

For testing here is the trivial impelementation


```
def neutral_trivial_implementation(self):
    result = []
    for e in self:
        if all(self.sublattice([e, x, y]).is_distributive() for x in self for y in self):
            result.append(e)
    return result
```


Use it for example like


```
for i in range(100):
    set_random_seed(i)
    L = Posets.RandomLattice(15, 0.998)
    print i, neutral_trivial_implementation(L) == L.neutral_elements()
```




---

Comment by jmantysalo created at 2016-11-19 20:48:25

New commits:


---

Comment by jmantysalo created at 2016-11-19 20:48:25

Changing status from new to needs_review.


---

Comment by git created at 2016-11-27 17:20:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-11-27 17:25:33

Travis (again)?


---

Comment by tscrim created at 2016-12-01 22:23:23

I believe you can simplify:

```python
comparables = set(list(self.depth_first_search(a)) +
                  list(self.depth_first_search(a, neighbors=self.neighbors_in)))
noncomp = all_elements.difference(comparables)
```

to

```python
noncomp = all_elements.difference(self.depth_first_search(a))
noncomp = noncomp.difference_update(self.depth_first_search(a, neighbors=self.neighbors_in))
```

Otherwise LGTM.


---

Comment by git created at 2016-12-02 08:00:02

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-12-02 08:02:13

Replying to [comment:5 tscrim]:

> {{{#!python
> noncomp.difference_update
> }}}

Good point. To be honest, I haven't noticed that function it Python...

(I may make better version of the code, but this is a good reference implementation in any case.)


---

Comment by tscrim created at 2016-12-02 15:09:08

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2016-12-02 15:09:08

This will be good enough for now.


---

Comment by vbraun created at 2016-12-05 00:44:36

Resolution: fixed
