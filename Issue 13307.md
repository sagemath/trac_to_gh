# Issue 13307: Allow access to principal values of integrals

Issue created by migration from Trac.

Original creator: kcrisman

Original creation time: 2012-09-20 12:17:21

Assignee: burcin

In [this sage-support thread](https://groups.google.com/forum/?fromgroups#!topic/sage-devel/AAZy318mXv4), the question was raised about accessing principal values of divergent integrals when they exist.  This is in Maxima, but we currently raise an error if the integral is divergent.  Some options mentioned in the thread were having another parameter, another method, or something else.


---

Comment by kcrisman created at 2015-01-09 02:38:42

Perhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!

```

(%i1) integral(sec(x), x, -%pi/4, %pi/4);
                                              %pi  %pi
(%o1)                   integral(sec(x), x, - ---, ---)
                                               4    4
(%i2) integrate(sec(x), x, -%pi/4, %pi/4);
Principal Value
                         sqrt(2) + 2          sqrt(2) - 2
(%o2)                log(-----------) - log(- -----------)
                              2                    2
```

See #17608.


---

Comment by nbruin created at 2015-01-09 03:57:27

Replying to [comment:5 kcrisman]:
> Perhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!
Isn't it a bug in maxima that it warns about Principal Value when it really is just the proper value?


---

Comment by kcrisman created at 2015-01-09 13:11:52

> > Perhaps more importantly, sometimes the principal value returned is correct even without considering improper integrals!
> Isn't it a bug in maxima that it warns about Principal Value when it really is just the proper value?
Possibly, though perhaps it's just saying this is how it was calculated.   See https://sourceforge.net/p/maxima/bugs/2880/ which was the genesis of #17608.  I feel like they are two separate tickets, however you can feel free to disagree and I won't object very strongly, it's quite amorphous.


---

Comment by nbruin created at 2015-01-09 16:08:21

It gets even more exciting:

```
(%i2) integrate(sec(x),x,0,%pi/4);

(%o2) log((sqrt(2)+2)/2)/2-log(-(sqrt(2)-2)/2)/2
(%i3) integrate(sec(x),x,-%pi/4,0);
Principal Value
(%o3) log((sqrt(2)+2)/2)/2-log(-(sqrt(2)-2)/2)/2
```

