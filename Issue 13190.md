# Issue 13190: Fix bug in build_flow_graph

archive/issues_013190.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nCC:  ncohen\n\nThe function `build_flow_graph` (called by the `flow` function) contains a\n\n```\ng.set_edge_label(l)\n```\n\ninstead of\n\n```\ng.set_edge_label(sp[i],sp[i+1],l) \n```\n\nwhere ``l`` is a number.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/13362\n\n",
    "created_at": "2012-08-13T12:14:30Z",
    "labels": [
        "graph theory",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.4",
    "title": "Fix bug in build_flow_graph",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13190",
    "user": "dcoudert"
}
```
Assignee: jason, ncohen, rlm

CC:  ncohen

The function `build_flow_graph` (called by the `flow` function) contains a

```
g.set_edge_label(l)
```

instead of

```
g.set_edge_label(sp[i],sp[i+1],l) 
```

where ``l`` is a number.


Issue created by migration from https://trac.sagemath.org/ticket/13362





---

archive/issue_comments_161055.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-08-13T12:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13190#issuecomment-161055",
    "user": "dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_161056.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2012-08-13T12:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13190#issuecomment-161056",
    "user": "dcoudert"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_161057.json:
```json
{
    "body": "The patch is working for both sage-5.3.beta0 and sage-5.3.beta1.",
    "created_at": "2012-08-13T14:34:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13190#issuecomment-161057",
    "user": "dcoudert"
}
```

The patch is working for both sage-5.3.beta0 and sage-5.3.beta1.



---

archive/issue_comments_161058.json:
```json
{
    "body": "It looks like the call you replaced is just completely broken and would throw `TypeError` when executed. I assume that this wasn't caught by a doctest. Could you write a doctest which goes through this code path?",
    "created_at": "2012-08-14T05:21:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13190#issuecomment-161058",
    "user": "kini"
}
```

It looks like the call you replaced is just completely broken and would throw `TypeError` when executed. I assume that this wasn't caught by a doctest. Could you write a doctest which goes through this code path?



---

archive/issue_comments_161059.json:
```json
{
    "body": "It wasn't in the doctests. In fact the existence of 0-cost cycles in flows depends on the LP solver and the instance. Some LP solver simplifies the solution returning the minimum possible number of non zero variables.\n\nI added some very artificial doctests, but it does the job.",
    "created_at": "2012-08-14T08:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13190#issuecomment-161059",
    "user": "dcoudert"
}
```

It wasn't in the doctests. In fact the existence of 0-cost cycles in flows depends on the LP solver and the instance. Some LP solver simplifies the solution returning the minimum possible number of non zero variables.

I added some very artificial doctests, but it does the job.



---

archive/issue_comments_161060.json:
```json
{
    "body": "Attachment [trac_13362.patch](tarball://root/attachments/some-uuid/ticket13362/trac_13362.patch) by dcoudert created at 2012-08-14 09:55:40\n\nwith doctests",
    "created_at": "2012-08-14T09:55:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13190#issuecomment-161060",
    "user": "dcoudert"
}
```

Attachment [trac_13362.patch](tarball://root/attachments/some-uuid/ticket13362/trac_13362.patch) by dcoudert created at 2012-08-14 09:55:40

with doctests



---

archive/issue_comments_161061.json:
```json
{
    "body": "every lines of the `_build_flow_graph` method have trailing white spaces. This is super boring!!! I have only removed those from edited lines, but I'm eager to remove all of them...",
    "created_at": "2012-08-14T09:58:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13190#issuecomment-161061",
    "user": "dcoudert"
}
```

every lines of the `_build_flow_graph` method have trailing white spaces. This is super boring!!! I have only removed those from edited lines, but I'm eager to remove all of them...



---

archive/issue_comments_161062.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-09-20T13:23:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13190#issuecomment-161062",
    "user": "ncohen"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_161063.json:
```json
{
    "body": "Well, then if doctests pass and the bug is fixed... `:-)`\n\nNathann",
    "created_at": "2012-09-20T13:23:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13190#issuecomment-161063",
    "user": "ncohen"
}
```

Well, then if doctests pass and the bug is fixed... `:-)`

Nathann



---

archive/issue_comments_161064.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-09-23T16:22:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13190",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13190#issuecomment-161064",
    "user": "jdemeyer"
}
```

Resolution: fixed
