# Issue 13873: Doctest failures on ARM Chromebook

archive/issues_013873.json:
```json
{
    "body": "Assignee: jason, jkantor\n\n```\nuname -a\nLinux localhost.localdomain 3.4.0 #1 SMP Tue Dec 11 03:10:30 PST 2012 armv7l armv7l armv7l GNU/Linux\n```\n\n```\ncat /proc/cpuinfo\nProcessor: ARMv7 Processor rev 4 (v7l)\nprocessor: 0\nBogoMIPS: 1694.10\n\nprocessor: 1\nBogoMIPS: 1694.10\n\nFeatures: swp half thumb fastmult vfp edsp thumbee neon vfpv3 tls vfpv4 idiva idivt \nCPU implementer: 0x41\nCPU architecture: 7\nCPU variant: 0x0\nCPU part: 0xc0f\nCPU revision: 4\n\nHardware: SAMSUNG EXYNOS5 (Flattened Device Tree)\nRevision: 0000\nSerial: 0000000000000000\n```\n\n```\nmake ptestlong\n...\nThe following tests failed:\n\nsage -t  --long -force_lib devel/sage/sage/rings/arith.py # 1 doctests failed\nsage -t  --long -force_lib devel/sage/sage/symbolic/expression.pyx # 1 doctests failed\nsage -t  --long -force_lib devel/sage/sage/functions/other.py # 1 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 11437.2 seconds\n```\n\nThe detailed failures are:\n\n```\n**********************************************************************\nFile \"/home/user/Downloads/sage-5.6/devel/sage/sage/rings/arith.py\", line 3162:\n    sage: binomial(0.5r, 5)\nExpected:\n    0.02734375\nGot:\n    0.02734375000000001\n**********************************************************************\n```\n\n```\n**********************************************************************\nFile \"/home/user/Downloads/sage-5.6/devel/sage/sage/symbolic/expression.pyx\", line 6698:\n    sage: SR(10.0r).gamma()\nExpected:\n    362880.0\nGot:\n    362880.00000000047\n#0: simplify_sum(expr='sum(q^k,k,0,inf))\n#1: simplify_sum(expr=a*'sum(q^k,k,0,inf))\n**********************************************************************\n```\nand:\n\n```\n**********************************************************************\nFile \"/home/user/Downloads/sage-5.6/devel/sage/sage/functions/other.py\", line 664:\n    sage: gamma1(float(6))\nExpected:\n    120.0\nGot:\n    119.99999999999997\n**********************************************************************\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/14077\n\n",
    "closed_at": "2014-01-31T23:02:23Z",
    "created_at": "2013-02-07T08:37:22Z",
    "labels": [
        "component: numerical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "Doctest failures on ARM Chromebook",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13873",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```
Assignee: jason, jkantor

```
uname -a
Linux localhost.localdomain 3.4.0 #1 SMP Tue Dec 11 03:10:30 PST 2012 armv7l armv7l armv7l GNU/Linux
```

```
cat /proc/cpuinfo
Processor: ARMv7 Processor rev 4 (v7l)
processor: 0
BogoMIPS: 1694.10

processor: 1
BogoMIPS: 1694.10

Features: swp half thumb fastmult vfp edsp thumbee neon vfpv3 tls vfpv4 idiva idivt 
CPU implementer: 0x41
CPU architecture: 7
CPU variant: 0x0
CPU part: 0xc0f
CPU revision: 4

Hardware: SAMSUNG EXYNOS5 (Flattened Device Tree)
Revision: 0000
Serial: 0000000000000000
```

```
make ptestlong
...
The following tests failed:

sage -t  --long -force_lib devel/sage/sage/rings/arith.py # 1 doctests failed
sage -t  --long -force_lib devel/sage/sage/symbolic/expression.pyx # 1 doctests failed
sage -t  --long -force_lib devel/sage/sage/functions/other.py # 1 doctests failed
----------------------------------------------------------------------
Total time for all tests: 11437.2 seconds
```

The detailed failures are:

```
**********************************************************************
File "/home/user/Downloads/sage-5.6/devel/sage/sage/rings/arith.py", line 3162:
    sage: binomial(0.5r, 5)
Expected:
    0.02734375
Got:
    0.02734375000000001
**********************************************************************
```

```
**********************************************************************
File "/home/user/Downloads/sage-5.6/devel/sage/sage/symbolic/expression.pyx", line 6698:
    sage: SR(10.0r).gamma()
Expected:
    362880.0
Got:
    362880.00000000047
#0: simplify_sum(expr='sum(q^k,k,0,inf))
#1: simplify_sum(expr=a*'sum(q^k,k,0,inf))
**********************************************************************
```
and:

```
**********************************************************************
File "/home/user/Downloads/sage-5.6/devel/sage/sage/functions/other.py", line 664:
    sage: gamma1(float(6))
Expected:
    120.0
Got:
    119.99999999999997
**********************************************************************
```


Issue created by migration from https://trac.sagemath.org/ticket/14077





---

archive/issue_comments_172459.json:
```json
{
    "body": "Isn't this essentially a duplicate of #10285?",
    "created_at": "2013-02-07T08:44:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13873#issuecomment-172459",
    "user": "https://github.com/jdemeyer"
}
```

Isn't this essentially a duplicate of #10285?



---

archive/issue_comments_172460.json:
```json
{
    "body": "I guess its the same libc bug isn't it?\nSee http://trac.sagemath.org/sage_trac/ticket/10285#comment:36\nand https://groups.google.com/d/msg/sage-devel/QACdziLhniU/nvBT-EwS4b4J\n\nFYI we have the same problem on Cygwin,\nsee http://trac.sagemath.org/sage_trac/ticket/6743#comment:116",
    "created_at": "2013-02-07T09:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13873#issuecomment-172460",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

I guess its the same libc bug isn't it?
See http://trac.sagemath.org/sage_trac/ticket/10285#comment:36
and https://groups.google.com/d/msg/sage-devel/QACdziLhniU/nvBT-EwS4b4J

FYI we have the same problem on Cygwin,
see http://trac.sagemath.org/sage_trac/ticket/6743#comment:116



---

archive/issue_events_039642.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13873",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13873#event-39642"
}
```



---

archive/issue_events_039643.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13873",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13873#event-39643"
}
```



---

archive/issue_events_039644.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/13873",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13873#event-39644"
}
```



---

archive/issue_comments_172461.json:
```json
{
    "body": "I propose this be closed as a duplicate.",
    "created_at": "2014-01-31T19:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13873#issuecomment-172461",
    "user": "https://github.com/dimpase"
}
```

I propose this be closed as a duplicate.



---

archive/issue_comments_172462.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-01-31T19:59:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13873#issuecomment-172462",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_172463.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-01-31T19:59:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13873#issuecomment-172463",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_172464.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2014-01-31T23:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13873",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13873#issuecomment-172464",
    "user": "https://github.com/vbraun"
}
```

Resolution: duplicate



---

archive/issue_events_039645.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-01-31T23:02:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13873",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13873#event-39645"
}
```
