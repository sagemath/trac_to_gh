# Issue 32796: Prepare sage.doctest for namespace packages

archive/issues_032796.json:
```json
{
    "body": "CC:  @tobiasdiez klee fbissey arojas slabbe\n\nThe behavior of the Sage doctester decides whether a Python file is part of package based on the presence of `__init__.py` files. This is no longer appropriate because PEP 420 implicit namespace packages do not have `__init__.py` files.\n\nIssue created by migration from https://trac.sagemath.org/ticket/33033\n\n",
    "created_at": "2021-12-16T17:15:26Z",
    "labels": [
        "doctest framework",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Prepare sage.doctest for namespace packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32796",
    "user": "mkoeppe"
}
```
CC:  @tobiasdiez klee fbissey arojas slabbe

The behavior of the Sage doctester decides whether a Python file is part of package based on the presence of `__init__.py` files. This is no longer appropriate because PEP 420 implicit namespace packages do not have `__init__.py` files.

Issue created by migration from https://trac.sagemath.org/ticket/33033





---

archive/issue_comments_467696.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-16T18:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467696",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467697.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-12-16T18:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467697",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_467698.json:
```json
{
    "body": "A few nitpicks from my side, otherwise looks good (codewise, didn't try it locally).\n\nThe explicit bool in https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/prepare_sage_doctest_for_namespace_packages#diff-944be831a2285f89611252d94988abde763acd41fd84353c5b46c01df443dc82L680-L683 can probably be removed (at least according to the comment that had been there).\n\n\n> sage: d = os.path.dirname(sage.cpython.__file__); d\n\nFor readability, I would propose to use `dir` or `directory` instead of the single-letter variable name.",
    "created_at": "2021-12-16T19:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467698",
    "user": "@tobiasdiez"
}
```

A few nitpicks from my side, otherwise looks good (codewise, didn't try it locally).

The explicit bool in https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/prepare_sage_doctest_for_namespace_packages#diff-944be831a2285f89611252d94988abde763acd41fd84353c5b46c01df443dc82L680-L683 can probably be removed (at least according to the comment that had been there).


> sage: d = os.path.dirname(sage.cpython.__file__); d

For readability, I would propose to use `dir` or `directory` instead of the single-letter variable name.



---

archive/issue_comments_467699.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-16T19:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467699",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467700.json:
```json
{
    "body": "Thanks, the changes look good to me!",
    "created_at": "2021-12-16T19:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467700",
    "user": "@tobiasdiez"
}
```

Thanks, the changes look good to me!



---

archive/issue_comments_467701.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-16T21:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467701",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467702.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-12-17T04:01:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467702",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_467703.json:
```json
{
    "body": "Turns out that this module is not the best place for the new function because the function will need to be packaged in the distribution **sagemath-environment**.",
    "created_at": "2021-12-17T04:01:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467703",
    "user": "mkoeppe"
}
```

Turns out that this module is not the best place for the new function because the function will need to be packaged in the distribution **sagemath-environment**.



---

archive/issue_comments_467704.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-17T05:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467704",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467705.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-12-17T05:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467705",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_467706.json:
```json
{
    "body": "Ready for review",
    "created_at": "2021-12-21T17:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467706",
    "user": "mkoeppe"
}
```

Ready for review



---

archive/issue_comments_467707.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-01-23T05:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467707",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467708.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-01T06:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467708",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467709.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2022-02-01T06:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467709",
    "user": "mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_467710.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-06T23:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467710",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467711.json:
```json
{
    "body": "LGTM.",
    "created_at": "2022-02-08T02:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467711",
    "user": "klee"
}
```

LGTM.



---

archive/issue_comments_467712.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-08T02:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467712",
    "user": "klee"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_467713.json:
```json
{
    "body": "Thank you!",
    "created_at": "2022-02-08T02:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467713",
    "user": "mkoeppe"
}
```

Thank you!



---

archive/issue_comments_467714.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-02-13T10:17:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467714",
    "user": "vbraun"
}
```

Resolution: fixed
