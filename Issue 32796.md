# Issue 32796: Prepare sage.doctest for namespace packages

archive/issues_032796.json:
```json
{
    "body": "CC:  @tobiasdiez @kwankyu @kiwifb @antonio-rojas @seblabbe\n\nThe behavior of the Sage doctester decides whether a Python file is part of package based on the presence of `__init__.py` files. This is no longer appropriate because PEP 420 implicit namespace packages do not have `__init__.py` files.\n\nIssue created by migration from https://trac.sagemath.org/ticket/33033\n\n",
    "created_at": "2021-12-16T17:15:26Z",
    "labels": [
        "component: doctest framework"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Prepare sage.doctest for namespace packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32796",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @tobiasdiez @kwankyu @kiwifb @antonio-rojas @seblabbe

The behavior of the Sage doctester decides whether a Python file is part of package based on the presence of `__init__.py` files. This is no longer appropriate because PEP 420 implicit namespace packages do not have `__init__.py` files.

Issue created by migration from https://trac.sagemath.org/ticket/33033





---

archive/issue_comments_467127.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-16T18:46:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467127",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467128.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-12-16T18:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467128",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_467129.json:
```json
{
    "body": "A few nitpicks from my side, otherwise looks good (codewise, didn't try it locally).\n\nThe explicit bool in https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/prepare_sage_doctest_for_namespace_packages#diff-944be831a2285f89611252d94988abde763acd41fd84353c5b46c01df443dc82L680-L683 can probably be removed (at least according to the comment that had been there).\n\n\n> sage: d = os.path.dirname(sage.cpython.__file__); d\n\nFor readability, I would propose to use `dir` or `directory` instead of the single-letter variable name.",
    "created_at": "2021-12-16T19:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467129",
    "user": "https://github.com/tobiasdiez"
}
```

A few nitpicks from my side, otherwise looks good (codewise, didn't try it locally).

The explicit bool in https://github.com/sagemath/sagetrac-mirror/compare/develop...u/mkoeppe/prepare_sage_doctest_for_namespace_packages#diff-944be831a2285f89611252d94988abde763acd41fd84353c5b46c01df443dc82L680-L683 can probably be removed (at least according to the comment that had been there).


> sage: d = os.path.dirname(sage.cpython.__file__); d

For readability, I would propose to use `dir` or `directory` instead of the single-letter variable name.



---

archive/issue_comments_467130.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-16T19:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467130",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467131.json:
```json
{
    "body": "Thanks, the changes look good to me!",
    "created_at": "2021-12-16T19:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467131",
    "user": "https://github.com/tobiasdiez"
}
```

Thanks, the changes look good to me!



---

archive/issue_comments_467132.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-16T21:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467132",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467133.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-12-17T04:01:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467133",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_467134.json:
```json
{
    "body": "Turns out that this module is not the best place for the new function because the function will need to be packaged in the distribution **sagemath-environment**.",
    "created_at": "2021-12-17T04:01:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467134",
    "user": "https://github.com/mkoeppe"
}
```

Turns out that this module is not the best place for the new function because the function will need to be packaged in the distribution **sagemath-environment**.



---

archive/issue_comments_467135.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-12-17T05:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467135",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467136.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-12-17T05:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467136",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_467137.json:
```json
{
    "body": "Ready for review",
    "created_at": "2021-12-21T17:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467137",
    "user": "https://github.com/mkoeppe"
}
```

Ready for review



---

archive/issue_comments_467138.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-01-23T05:53:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467138",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467139.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-01T06:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467139",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467140.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2022-02-01T06:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467140",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_467141.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-02-06T23:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467141",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467142.json:
```json
{
    "body": "LGTM.",
    "created_at": "2022-02-08T02:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467142",
    "user": "https://github.com/kwankyu"
}
```

LGTM.



---

archive/issue_comments_467143.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-02-08T02:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467143",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_467144.json:
```json
{
    "body": "Thank you!",
    "created_at": "2022-02-08T02:30:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467144",
    "user": "https://github.com/mkoeppe"
}
```

Thank you!



---

archive/issue_comments_467145.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-02-13T10:17:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32796#issuecomment-467145",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
