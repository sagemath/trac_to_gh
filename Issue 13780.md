# Issue 13780: Improve the is_vertex_transitive test

archive/issues_013780.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  azi ncohen\n\nAs it turned out from the discussion in the TRAC ticket 13721, the is_vertex_transitive method can be optimized and simplified substantially. \n\nThis TRAC ticket aims at achieving that. \n\nIssue created by migration from https://trac.sagemath.org/ticket/13984\n\n",
    "created_at": "2013-01-22T12:49:20Z",
    "labels": [
        "component: please change"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.7",
    "title": "Improve the is_vertex_transitive test",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13780",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```
Assignee: tbd

CC:  azi ncohen

As it turned out from the discussion in the TRAC ticket 13721, the is_vertex_transitive method can be optimized and simplified substantially. 

This TRAC ticket aims at achieving that. 

Issue created by migration from https://trac.sagemath.org/ticket/13984





---

archive/issue_comments_170811.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2013-01-22T13:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170811",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_170812.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to graph theory.",
    "created_at": "2013-01-22T13:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170812",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing component from PLEASE CHANGE to graph theory.



---

archive/issue_comments_170813.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2013-01-22T13:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170813",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_170814.json:
```json
{
    "body": "`partition` an `new_partition` are both partitions of the vertex set, and new_partition is necessarily more refined (i.e. each set of `new_partition` is a subset of some set of `partition`). Hence, they are equal if and only if they have same length !\n\nNathann",
    "created_at": "2013-01-22T13:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170814",
    "user": "https://github.com/nathanncohen"
}
```

`partition` an `new_partition` are both partitions of the vertex set, and new_partition is necessarily more refined (i.e. each set of `new_partition` is a subset of some set of `partition`). Hence, they are equal if and only if they have same length !

Nathann



---

archive/issue_comments_170815.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2013-01-22T13:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170815",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_170816.json:
```json
{
    "body": "I can fix the code if someone explain to me what exactly should this partition thing be doing in the first place. I suspect what it wants to verify is if a given partition is a  system of imprimitivity?",
    "created_at": "2013-01-22T15:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170816",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

I can fix the code if someone explain to me what exactly should this partition thing be doing in the first place. I suspect what it wants to verify is if a given partition is a  system of imprimitivity?



---

archive/issue_comments_170817.json:
```json
{
    "body": "Helloooooo !!\n\nWell, I just uploaded a code that replaces the block of 4 lines by the equality test. The point is that `partition` is necessarily blocks of imprimitivity of the automorphism group, for this argument says that Sage should only consider automorphisms that respect the partition given (i.e. only those such that an element from a set inside of `partition` stay in the same set). And as `new_partition` is necessarily a refinment of `new_partition`, the two are equal if and only if their lengths are the same.\n\nNathann",
    "created_at": "2013-01-22T17:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170817",
    "user": "https://github.com/nathanncohen"
}
```

Helloooooo !!

Well, I just uploaded a code that replaces the block of 4 lines by the equality test. The point is that `partition` is necessarily blocks of imprimitivity of the automorphism group, for this argument says that Sage should only consider automorphisms that respect the partition given (i.e. only those such that an element from a set inside of `partition` stay in the same set). And as `new_partition` is necessarily a refinment of `new_partition`, the two are equal if and only if their lengths are the same.

Nathann



---

archive/issue_comments_170818.json:
```json
{
    "body": "Indeed, this makes sense! Also could you add a quick regularity check inside? \n\nThe degrees of every  element of the same partition should coincide!",
    "created_at": "2013-01-22T17:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170818",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Indeed, this makes sense! Also could you add a quick regularity check inside? 

The degrees of every  element of the same partition should coincide!



---

archive/issue_comments_170819.json:
```json
{
    "body": "Here it is !\n\nNathann",
    "created_at": "2013-01-22T17:57:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170819",
    "user": "https://github.com/nathanncohen"
}
```

Here it is !

Nathann



---

archive/issue_comments_170820.json:
```json
{
    "body": "Looks good! \n\nMy only two questions are\n\n1. Can we expect a partition cell to be empty\n2. What happens if we call this thing on the empty graph?",
    "created_at": "2013-01-22T18:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170820",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Looks good! 

My only two questions are

1. Can we expect a partition cell to be empty
2. What happens if we call this thing on the empty graph?



---

archive/issue_comments_170821.json:
```json
{
    "body": "Attachment [trac_13984.patch](tarball://root/attachments/some-uuid/ticket13984/trac_13984.patch) by @nathanncohen created at 2013-01-22 18:33:00",
    "created_at": "2013-01-22T18:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170821",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [trac_13984.patch](tarball://root/attachments/some-uuid/ticket13984/trac_13984.patch) by @nathanncohen created at 2013-01-22 18:33:00



---

archive/issue_comments_170822.json:
```json
{
    "body": "Updated !!\n\nNathann",
    "created_at": "2013-01-22T18:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170822",
    "user": "https://github.com/nathanncohen"
}
```

Updated !!

Nathann



---

archive/issue_comments_170823.json:
```json
{
    "body": "The patch looks fine to me. Shall I mark it as positively reviewed?",
    "created_at": "2013-01-22T22:37:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170823",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

The patch looks fine to me. Shall I mark it as positively reviewed?



---

archive/issue_comments_170824.json:
```json
{
    "body": "Yep, you can ! `:-)`\n\nNathann",
    "created_at": "2013-01-23T01:17:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170824",
    "user": "https://github.com/nathanncohen"
}
```

Yep, you can ! `:-)`

Nathann



---

archive/issue_comments_170825.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-01-23T11:23:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170825",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_170826.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-01-30T07:35:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170826",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_013617.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-30T07:35:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13780#event-13617"
}
```



---

archive/issue_comments_170827.json:
```json
{
    "body": "(oh, and by the way I sent an email to Robert Miller, who originally wrote that code, and agreed with the shortcut that this patch implements) `:-)`\n\nNathann",
    "created_at": "2013-02-04T10:32:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13780",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13780#issuecomment-170827",
    "user": "https://github.com/nathanncohen"
}
```

(oh, and by the way I sent an email to Robert Miller, who originally wrote that code, and agreed with the shortcut that this patch implements) `:-)`

Nathann
