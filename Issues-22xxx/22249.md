# Issue 22249: Test if a graph is a cycle

archive/issues_022012.json:
```json
{
    "assignees": [],
    "body": "Method to test is a graph is a cycle or if a directed graph is a circuit. Such test is needed for instance in #22157.\n\nCC:  @sagetrac-jfallon\n\nComponent: **graph theory**\n\nAuthor: **David Coudert**\n\nBranch/Commit: **[`bee9aaf`](https://github.com/sagemath/sagetrac-mirror/commit/bee9aaf8d5f8c9473bc50cfad24e294eb6b6565b)**\n\nReviewer: **Mark Saaltink**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22249_\n\n",
    "closed_at": "2017-02-02T22:09:19Z",
    "created_at": "2017-01-24T17:11:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Test if a graph is a cycle",
    "type": "issue",
    "updated_at": "2017-02-02T22:09:19Z",
    "url": "https://github.com/sagemath/sage/issues/22249",
    "user": "https://github.com/dcoudert"
}
```
Method to test is a graph is a cycle or if a directed graph is a circuit. Such test is needed for instance in #22157.

CC:  @sagetrac-jfallon

Component: **graph theory**

Author: **David Coudert**

Branch/Commit: **[`bee9aaf`](https://github.com/sagemath/sagetrac-mirror/commit/bee9aaf8d5f8c9473bc50cfad24e294eb6b6565b)**

Reviewer: **Mark Saaltink**

_Issue created by migration from https://trac.sagemath.org/ticket/22249_





---

archive/issue_events_308641.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-01-24T17:11:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22249#event-308641"
}
```



---

archive/issue_events_308642.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-01-24T17:11:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22249#event-308642"
}
```



---

archive/issue_events_308643.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-01-24T17:11:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22249#event-308643"
}
```



---

archive/issue_events_308644.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-01-24T17:11:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22249#event-308644"
}
```



---

archive/issue_comments_328737.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+Method to test is a graph is a cycle or if a directed graph is a circuit. Such test is needed for instance in #22157.\n``````\n",
    "created_at": "2017-01-24T17:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22249#issuecomment-328737",
    "user": "https://github.com/dcoudert"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+Method to test is a graph is a cycle or if a directed graph is a circuit. Such test is needed for instance in #22157.
``````




---

archive/issue_events_308645.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-01-24T17:14:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22249#event-308645"
}
```



---

archive/issue_comments_328738.json:
```json
{
    "body": "Commit: **[`0c28267`](https://github.com/sagemath/sagetrac-mirror/commit/0c282678c0a5f1a1ca89a1ea791cb6cc474f0c56)**",
    "created_at": "2017-01-24T17:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22249#issuecomment-328738",
    "user": "https://github.com/dcoudert"
}
```

Commit: **[`0c28267`](https://github.com/sagemath/sagetrac-mirror/commit/0c282678c0a5f1a1ca89a1ea791cb6cc474f0c56)**



---

archive/issue_comments_328739.json:
```json
{
    "body": "Branch: **[u/dcoudert/22249](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/22249)**",
    "created_at": "2017-01-24T17:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22249#issuecomment-328739",
    "user": "https://github.com/dcoudert"
}
```

Branch: **[u/dcoudert/22249](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/22249)**



---

archive/issue_comments_328740.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c282678c0a5f1a1ca89a1ea791cb6cc474f0c56\"><code>0c28267</code></a></td><td><code>trac #22249: add method is_cycle to generic_graph.py</code></td></tr></table>\n",
    "created_at": "2017-01-24T17:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22249#issuecomment-328740",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c282678c0a5f1a1ca89a1ea791cb6cc474f0c56"><code>0c28267</code></a></td><td><code>trac #22249: add method is_cycle to generic_graph.py</code></td></tr></table>




---

archive/issue_comments_328741.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThe reference, Wikipedia, is not clear on the exact definition, particularly in the case of directed graphs or multiple edges.  MathWorld, which it refers to, includes C_2 (with two edges between its two vertices) as a cycle graph, while the code here does not.  Perhaps reference to a book on graph theory with the precise definitions would be preferable.  I think the theory is nicer if C_2 counts as a cycle (e.g., then every multigraph with all vertices of even degree can have its edges partitioned into cycles).  It might be argued that C_1, a single vertex with a loop, deserves to be a cycle for the same reason.\n\nIt is perhaps surprising that `graphs.CycleGraph(n).is_cycle()` will be false for n < 3, but unless that construction would allow loops or multiedges that is just how it is, and `n=0` will definitely not be a cycle.",
    "created_at": "2017-01-30T16:41:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22249#issuecomment-328741",
    "user": "https://github.com/sagetrac-msaaltink"
}
```

<div id="comment:2" align="right">comment:2</div>

The reference, Wikipedia, is not clear on the exact definition, particularly in the case of directed graphs or multiple edges.  MathWorld, which it refers to, includes C_2 (with two edges between its two vertices) as a cycle graph, while the code here does not.  Perhaps reference to a book on graph theory with the precise definitions would be preferable.  I think the theory is nicer if C_2 counts as a cycle (e.g., then every multigraph with all vertices of even degree can have its edges partitioned into cycles).  It might be argued that C_1, a single vertex with a loop, deserves to be a cycle for the same reason.

It is perhaps surprising that `graphs.CycleGraph(n).is_cycle()` will be false for n < 3, but unless that construction would allow loops or multiedges that is just how it is, and `n=0` will definitely not be a cycle.



---

archive/issue_comments_328742.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThank you for your comments. I knew that the definition was not so \"clear\".\n\nI checked on the french translation of the book of Bondy and Murty \"Graph theory\" (http://www-sop.inria.fr/members/Frederic.Havet/Traduction-Bondy-Murty.pdf), Section 1.1 pages 4-5. It says that `a cycle on three or more vertices is a simple graph whose vertices can be arranged in a cyclic order so that two vertices are adjacent if they are consecutive in the order, and not adjacent otherwise. A cycle on a vertex consists of a single vertex provided with a loop and a cycle with two vertices consists of two vertices connected by a pair of parallel edges.` \nSo this is what you propose.\n\nSo I can add the 1 vertex with a unique loop case and the 2 vertices with exactly 2 parallel edges one. And of course add a reference to `Bondy, John Adrian; Murty, U.S.R. (2008), Graph Theory, Springer.`\n\nYou agree?",
    "created_at": "2017-01-30T17:39:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22249#issuecomment-328742",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">comment:3</div>

Thank you for your comments. I knew that the definition was not so "clear".

I checked on the french translation of the book of Bondy and Murty "Graph theory" (http://www-sop.inria.fr/members/Frederic.Havet/Traduction-Bondy-Murty.pdf), Section 1.1 pages 4-5. It says that `a cycle on three or more vertices is a simple graph whose vertices can be arranged in a cyclic order so that two vertices are adjacent if they are consecutive in the order, and not adjacent otherwise. A cycle on a vertex consists of a single vertex provided with a loop and a cycle with two vertices consists of two vertices connected by a pair of parallel edges.` 
So this is what you propose.

So I can add the 1 vertex with a unique loop case and the 2 vertices with exactly 2 parallel edges one. And of course add a reference to `Bondy, John Adrian; Murty, U.S.R. (2008), Graph Theory, Springer.`

You agree?



---

archive/issue_comments_328743.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThat sounds good.  Do Bondy and Murty talk about digraphs too?\n\nFor the case of a digraph, I'm not sure it is correct to use \"to_simple\" as that just discards loops and multiple edges.  This looks wrong:\n\n```\nsage: d = DiGraph([(0,0), (0,1), (1,2), (2,0)], loops=True)\nsage: d.is_cycle()\nTrue\n```\nHowever, this is clearly documented in the code so should not be too surprising to the user.\n\nIn the documentation it might be clearer to write \"A cycle graph consists of a single cycle **connecting** all its vertices ...\" rather than \"A cycle graph consists of a single cycle connected all its vertices ...\".",
    "created_at": "2017-01-30T19:07:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22249#issuecomment-328743",
    "user": "https://github.com/sagetrac-msaaltink"
}
```

<div id="comment:4" align="right">comment:4</div>

That sounds good.  Do Bondy and Murty talk about digraphs too?

For the case of a digraph, I'm not sure it is correct to use "to_simple" as that just discards loops and multiple edges.  This looks wrong:

```
sage: d = DiGraph([(0,0), (0,1), (1,2), (2,0)], loops=True)
sage: d.is_cycle()
True
```
However, this is clearly documented in the code so should not be too surprising to the user.

In the documentation it might be clearer to write "A cycle graph consists of a single cycle **connecting** all its vertices ..." rather than "A cycle graph consists of a single cycle connected all its vertices ...".



---

archive/issue_comments_328744.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9891b9f9ab49012043e218acbdc2b8db1e0ca406\"><code>9891b9f</code></a></td><td><code>trac #22249: Merged with 7.6.beta1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0346411c8682f5f360cf59d8285f98f228ad905a\"><code>0346411</code></a></td><td><code>trac #22249: add reference to Graph Theory book of Bondy and Murty</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bee9aaf8d5f8c9473bc50cfad24e294eb6b6565b\"><code>bee9aaf</code></a></td><td><code>trac #22249: improved version and description of is_cycle</code></td></tr></table>\n",
    "created_at": "2017-01-30T23:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22249#issuecomment-328744",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9891b9f9ab49012043e218acbdc2b8db1e0ca406"><code>9891b9f</code></a></td><td><code>trac #22249: Merged with 7.6.beta1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0346411c8682f5f360cf59d8285f98f228ad905a"><code>0346411</code></a></td><td><code>trac #22249: add reference to Graph Theory book of Bondy and Murty</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bee9aaf8d5f8c9473bc50cfad24e294eb6b6565b"><code>bee9aaf</code></a></td><td><code>trac #22249: improved version and description of is_cycle</code></td></tr></table>




---

archive/issue_comments_328745.json:
```json
{
    "body": "Changed commit from **[`0c28267`](https://github.com/sagemath/sagetrac-mirror/commit/0c282678c0a5f1a1ca89a1ea791cb6cc474f0c56)** to **[`bee9aaf`](https://github.com/sagemath/sagetrac-mirror/commit/bee9aaf8d5f8c9473bc50cfad24e294eb6b6565b)**",
    "created_at": "2017-01-30T23:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22249#issuecomment-328745",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0c28267`](https://github.com/sagemath/sagetrac-mirror/commit/0c282678c0a5f1a1ca89a1ea791cb6cc474f0c56)** to **[`bee9aaf`](https://github.com/sagemath/sagetrac-mirror/commit/bee9aaf8d5f8c9473bc50cfad24e294eb6b6565b)**



---

archive/issue_comments_328746.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe Bondy Murty book has no precise definition for directed graphs, but I believe it is easier to agree on the definition. Let me know if further improvements are needed.",
    "created_at": "2017-01-31T00:00:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22249#issuecomment-328746",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:6" align="right">comment:6</div>

The Bondy Murty book has no precise definition for directed graphs, but I believe it is easier to agree on the definition. Let me know if further improvements are needed.



---

archive/issue_comments_328747.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nLooks good.  I am unable to check the docbuild at the moment, but everything else looks fine.",
    "created_at": "2017-01-31T03:29:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22249#issuecomment-328747",
    "user": "https://github.com/sagetrac-msaaltink"
}
```

<div id="comment:7" align="right">comment:7</div>

Looks good.  I am unable to check the docbuild at the moment, but everything else looks fine.



---

archive/issue_comments_328748.json:
```json
{
    "body": "Reviewer: **Mark Saaltink**",
    "created_at": "2017-01-31T03:29:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22249#issuecomment-328748",
    "user": "https://github.com/sagetrac-msaaltink"
}
```

Reviewer: **Mark Saaltink**



---

archive/issue_events_308646.json:
```json
{
    "actor": "https://github.com/sagetrac-msaaltink",
    "created_at": "2017-01-31T03:29:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22249#event-308646"
}
```



---

archive/issue_events_308647.json:
```json
{
    "actor": "https://github.com/sagetrac-msaaltink",
    "created_at": "2017-01-31T03:29:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22249#event-308647"
}
```



---

archive/issue_comments_328749.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThanks.\nIt's a bit embarrassing if you cannot check the docbuild. It seems ok for me, but it's better to have a double check.",
    "created_at": "2017-01-31T07:36:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22249#issuecomment-328749",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:8" align="right">comment:8</div>

Thanks.
It's a bit embarrassing if you cannot check the docbuild. It seems ok for me, but it's better to have a double check.



---

archive/issue_events_308648.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-02T22:09:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22249#event-308648"
}
```



---

archive/issue_events_308649.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c5ba408ff685027a4441313aa2fcbe968b549f5f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-02-02T22:09:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22249#event-308649"
}
```



---

archive/issue_comments_328750.json:
```json
{
    "body": "Changed branch from **[u/dcoudert/22249](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/22249)** to **[`bee9aaf`](https://github.com/sagemath/sagetrac-mirror/commit/bee9aaf8d5f8c9473bc50cfad24e294eb6b6565b)**",
    "created_at": "2017-02-02T22:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22249",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22249#issuecomment-328750",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dcoudert/22249](https://github.com/sagemath/sagetrac-mirror/tree/u/dcoudert/22249)** to **[`bee9aaf`](https://github.com/sagemath/sagetrac-mirror/commit/bee9aaf8d5f8c9473bc50cfad24e294eb6b6565b)**
