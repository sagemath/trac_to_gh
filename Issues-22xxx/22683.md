# Issue 22683: backend_polymake for Polyhedron

archive/issues_022446.json:
```json
{
    "body": "Building upon #22658 (Support interface coercion `polymake(X)` for `Polyhedron`), we provide a backend in `backend_polymake.py` that does all `Polyhedron` computations using polymake (in particular, the initial computation of the double description).\n\nFor quadratic field extensions of the rationals, this backend should be faster than the generic implementation in Python (unless the pexpect overhead dominates). \n\n\nCC:  simonking @jplab @videlec @tscrim @yuan-zhou\n\nBranch/Commit: 6d1774b1d460ab8927f127abf4abc36305baf674\n\nReviewer: Travis Scrimshaw\n\nAuthor: Matthias Koeppe\n\nDependencies: #22658\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22683\n\n",
    "closed_at": "2017-04-05T19:37:55Z",
    "created_at": "2017-03-26T19:43:10Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "backend_polymake for Polyhedron",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22683",
    "user": "https://github.com/mkoeppe"
}
```
Building upon #22658 (Support interface coercion `polymake(X)` for `Polyhedron`), we provide a backend in `backend_polymake.py` that does all `Polyhedron` computations using polymake (in particular, the initial computation of the double description).

For quadratic field extensions of the rationals, this backend should be faster than the generic implementation in Python (unless the pexpect overhead dominates). 


CC:  simonking @jplab @videlec @tscrim @yuan-zhou

Branch/Commit: 6d1774b1d460ab8927f127abf4abc36305baf674

Reviewer: Travis Scrimshaw

Author: Matthias Koeppe

Dependencies: #22658

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22683





---

archive/issue_comments_425263.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/backend_polymake_for_polyhedron\"",
    "created_at": "2017-03-26T22:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425263",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/backend_polymake_for_polyhedron"



---

archive/issue_comments_425264.json:
```json
{
    "body": "<a id='comment:2'></a>\nAs preparation, I have implemented the `_sage_` method. \n\n---\nLast 10 new commits:\n|                                                                                                                                          |                                                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|\n|[7588b62](https://github.com/sagemath/sagetrac-mirror/commit/7588b6299efaf301062afdd3f7f5c26f09f0a439)|`Polyhedron_base: Provide _polymake_init_ instead of `@`cached_method _polymake_`|\n|[07270d4](https://github.com/sagemath/sagetrac-mirror/commit/07270d402a77a187944f8b37f7764ca36d01d0af)|`Polyhedron_base._polymake_init_: Pass both representations to polymake, add tests`|\n|[5fadbcd](https://github.com/sagemath/sagetrac-mirror/commit/5fadbcd12949881c85a5fdd03cb499c56b22caa0)|`Add _polymake_init_ for some rings`|\n|[3d3cef2](https://github.com/sagemath/sagetrac-mirror/commit/3d3cef22d65ac32abe7a5c52361260614a3eb3e1)|`Polymake: fix typo in docstring`|\n|[6598823](https://github.com/sagemath/sagetrac-mirror/commit/65988239e463e512f11d759eb8c01f8c71d812f7)|`Polyhedron_base._polymake_init_: Support polyhedra over quadratic extensions`|\n|[ef23af4](https://github.com/sagemath/sagetrac-mirror/commit/ef23af4ada9587307f001690662e3c4d715fb6e6)|`Polyhedron_base._polymake_init_: Add test for RDF polyhedra`|\n|[205879f](https://github.com/sagemath/sagetrac-mirror/commit/205879fb118e1c7c3fd954e42022b7fe0c6af119)|`Matrix, MatrixSpace: Add coercion to polymake interface`|\n|[e49765e](https://github.com/sagemath/sagetrac-mirror/commit/e49765eaa94319320c1a40e820d45010b32ea94d)|`Polymake: Fix tests whose error messages changed because we do not use files`|\n|[51af468](https://github.com/sagemath/sagetrac-mirror/commit/51af46867c3e26a5c5b3aaefc94b6722f3b94dbc)|`PolymakeElement.__iter__: New`|\n|[2f0e059](https://github.com/sagemath/sagetrac-mirror/commit/2f0e0594a0ce0d0342427f0d75ea1e7e4d9e13b3)|`PolymakeElement._sage_: Implement for *Vector, *Matrix, QuadraticExtension`|",
    "created_at": "2017-03-26T22:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425264",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
As preparation, I have implemented the `_sage_` method. 

---
Last 10 new commits:
|                                                                                                                                          |                                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|
|[7588b62](https://github.com/sagemath/sagetrac-mirror/commit/7588b6299efaf301062afdd3f7f5c26f09f0a439)|`Polyhedron_base: Provide _polymake_init_ instead of `@`cached_method _polymake_`|
|[07270d4](https://github.com/sagemath/sagetrac-mirror/commit/07270d402a77a187944f8b37f7764ca36d01d0af)|`Polyhedron_base._polymake_init_: Pass both representations to polymake, add tests`|
|[5fadbcd](https://github.com/sagemath/sagetrac-mirror/commit/5fadbcd12949881c85a5fdd03cb499c56b22caa0)|`Add _polymake_init_ for some rings`|
|[3d3cef2](https://github.com/sagemath/sagetrac-mirror/commit/3d3cef22d65ac32abe7a5c52361260614a3eb3e1)|`Polymake: fix typo in docstring`|
|[6598823](https://github.com/sagemath/sagetrac-mirror/commit/65988239e463e512f11d759eb8c01f8c71d812f7)|`Polyhedron_base._polymake_init_: Support polyhedra over quadratic extensions`|
|[ef23af4](https://github.com/sagemath/sagetrac-mirror/commit/ef23af4ada9587307f001690662e3c4d715fb6e6)|`Polyhedron_base._polymake_init_: Add test for RDF polyhedra`|
|[205879f](https://github.com/sagemath/sagetrac-mirror/commit/205879fb118e1c7c3fd954e42022b7fe0c6af119)|`Matrix, MatrixSpace: Add coercion to polymake interface`|
|[e49765e](https://github.com/sagemath/sagetrac-mirror/commit/e49765eaa94319320c1a40e820d45010b32ea94d)|`Polymake: Fix tests whose error messages changed because we do not use files`|
|[51af468](https://github.com/sagemath/sagetrac-mirror/commit/51af46867c3e26a5c5b3aaefc94b6722f3b94dbc)|`PolymakeElement.__iter__: New`|
|[2f0e059](https://github.com/sagemath/sagetrac-mirror/commit/2f0e0594a0ce0d0342427f0d75ea1e7e4d9e13b3)|`PolymakeElement._sage_: Implement for *Vector, *Matrix, QuadraticExtension`|



---

archive/issue_comments_425265.json:
```json
{
    "body": "Changing commit from \"\" to \"2f0e0594a0ce0d0342427f0d75ea1e7e4d9e13b3\"",
    "created_at": "2017-03-26T22:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425265",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "2f0e0594a0ce0d0342427f0d75ea1e7e4d9e13b3"



---

archive/issue_comments_425266.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#22658\"",
    "created_at": "2017-03-26T22:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425266",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#22658"



---

archive/issue_comments_425267.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2017-03-26T22:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425267",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_425268.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[218daca](https://github.com/sagemath/sagetrac-mirror/commit/218daca488ac24b80c6cea51b6e06fbf28c7874a)|`Add Polyhedron_polymake`|",
    "created_at": "2017-03-27T06:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425268",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[218daca](https://github.com/sagemath/sagetrac-mirror/commit/218daca488ac24b80c6cea51b6e06fbf28c7874a)|`Add Polyhedron_polymake`|



---

archive/issue_comments_425269.json:
```json
{
    "body": "Changing commit from \"2f0e0594a0ce0d0342427f0d75ea1e7e4d9e13b3\" to \"218daca488ac24b80c6cea51b6e06fbf28c7874a\"",
    "created_at": "2017-03-27T06:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425269",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2f0e0594a0ce0d0342427f0d75ea1e7e4d9e13b3" to "218daca488ac24b80c6cea51b6e06fbf28c7874a"



---

archive/issue_comments_425270.json:
```json
{
    "body": "Changing commit from \"218daca488ac24b80c6cea51b6e06fbf28c7874a\" to \"5ab94a2172c456509036a8dd5e77dbbe692c8635\"",
    "created_at": "2017-03-27T06:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425270",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "218daca488ac24b80c6cea51b6e06fbf28c7874a" to "5ab94a2172c456509036a8dd5e77dbbe692c8635"



---

archive/issue_comments_425271.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|\n|[5ab94a2](https://github.com/sagemath/sagetrac-mirror/commit/5ab94a2172c456509036a8dd5e77dbbe692c8635)|`Merge tag '7.6' into t/22683/backend_polymake_for_polyhedron`|",
    "created_at": "2017-03-27T06:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425271",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
|[5ab94a2](https://github.com/sagemath/sagetrac-mirror/commit/5ab94a2172c456509036a8dd5e77dbbe692c8635)|`Merge tag '7.6' into t/22683/backend_polymake_for_polyhedron`|



---

archive/issue_comments_425272.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-27T06:20:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425272",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_425273.json:
```json
{
    "body": "<a id='comment:8'></a>\nTwo things I see:\n\n- `def _polymake_` is missing doctests.\n- In `__iter__`, you should use ```self``` in the docstrings. You also don't need to have an `INPUT:` block since there essentially no input.\n\nOtherwise LGTM modulo the dependency.",
    "created_at": "2017-03-27T14:43:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425273",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
Two things I see:

- `def _polymake_` is missing doctests.
- In `__iter__`, you should use ```self``` in the docstrings. You also don't need to have an `INPUT:` block since there essentially no input.

Otherwise LGTM modulo the dependency.



---

archive/issue_comments_425274.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[8fd81c7](https://github.com/sagemath/sagetrac-mirror/commit/8fd81c72dfcf1cd84e13de8f1f2740de4dbdb217)|`Polyhedron_polymake._polymake_: Add doctest`|\n|[952b860](https://github.com/sagemath/sagetrac-mirror/commit/952b8607c9a4756cf35fe358e2718e33f04bb6b7)|`PolymakeElement.__iter__: Doc fixes`|",
    "created_at": "2017-03-27T23:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425274",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[8fd81c7](https://github.com/sagemath/sagetrac-mirror/commit/8fd81c72dfcf1cd84e13de8f1f2740de4dbdb217)|`Polyhedron_polymake._polymake_: Add doctest`|
|[952b860](https://github.com/sagemath/sagetrac-mirror/commit/952b8607c9a4756cf35fe358e2718e33f04bb6b7)|`PolymakeElement.__iter__: Doc fixes`|



---

archive/issue_comments_425275.json:
```json
{
    "body": "Changing commit from \"5ab94a2172c456509036a8dd5e77dbbe692c8635\" to \"952b8607c9a4756cf35fe358e2718e33f04bb6b7\"",
    "created_at": "2017-03-27T23:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425275",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5ab94a2172c456509036a8dd5e77dbbe692c8635" to "952b8607c9a4756cf35fe358e2718e33f04bb6b7"



---

archive/issue_comments_425276.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2017-03-28T02:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425276",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_425277.json:
```json
{
    "body": "<a id='comment:10'></a>\nThank you.",
    "created_at": "2017-03-28T02:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425277",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
Thank you.



---

archive/issue_comments_425278.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-28T02:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425278",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_425279.json:
```json
{
    "body": "<a id='comment:11'></a>\nThanks for reviewing!",
    "created_at": "2017-03-28T02:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425279",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Thanks for reviewing!



---

archive/issue_comments_425280.json:
```json
{
    "body": "<a id='comment:12'></a>\nNot a problem; happy to help.",
    "created_at": "2017-03-28T02:40:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425280",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>
Not a problem; happy to help.



---

archive/issue_comments_425281.json:
```json
{
    "body": "<a id='comment:13'></a>\nI suspect this will pass tests on the bots with stand-alone sage. It gives me trouble in sage-on-gentoo while building the documentation, I am not sure how other distros deal with the doc building. I have the following failure related to this ticket\n\n```\n[discrete_] /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/doc/en/reference/discrete_geometry/sage/geometry/polyhedron/library.rst:11: WARNING: autodoc: failed to import module u'sage.geometry.polyhedron.library'; the following exception was raised:\n[discrete_] Traceback (most recent call last):\n[discrete_] File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/sage_setup/docbuild/ext/sage_autodoc.py\", line 525, in import_object\n[discrete_] __import__(self.modname)\n[discrete_] File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/lib/sage/geometry/polyhedron/library.py\", line 75, in <module>\n[discrete_] from sage.combinat.root_system.associahedron import Associahedron\n[discrete_] File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/lib/sage/combinat/root_system/associahedron.py\", line 23, in <module>\n[discrete_] from sage.geometry.polyhedron.parent import Polyhedra_QQ_ppl\n[discrete_] File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/lib/sage/geometry/polyhedron/parent.py\", line 825, in <module>\n[discrete_] from sage.geometry.polyhedron.backend_polymake import Polyhedron_polymake\n[discrete_] File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/lib/sage/geometry/polyhedron/backend_polymake.py\", line 31, in <module>\n[discrete_] from sage.rings.integer import LCM_list\n[discrete_] ImportError: cannot import name LCM_list\n[discrete_] /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/doc/en/reference/discrete_geometry/sage/geometry/polyhedron/parent.rst:11: WARNING: autodoc: failed to import module u'sage.geometry.polyhedron.parent'; the following exception was raised:\n[discrete_] Traceback (most recent call last):\n[discrete_] File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/sage_setup/docbuild/ext/sage_autodoc.py\", line 525, in import_object\n[discrete_] __import__(self.modname)\n[discrete_] File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/lib/sage/geometry/polyhedron/parent.py\", line 825, in <module>\n[discrete_] from sage.geometry.polyhedron.backend_polymake import Polyhedron_polymake\n[discrete_] File \"/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/lib/sage/geometry/polyhedron/backend_polymake.py\", line 31, in <module>\n[discrete_] from sage.rings.integer import LCM_list\n[discrete_] ImportError: cannot import name LCM_list\n```\nwhich itself comes from #22630. Volker is currently testing the ticket so don't touch it now. If it is accepted as is, could we have a follow up to import `LCM_list` directly from `sage.arith.functions`? Although if I have problems with `lazy_import`, I will be fighting symptoms rather than the disease by doing that.",
    "created_at": "2017-04-01T22:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425281",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:13'></a>
I suspect this will pass tests on the bots with stand-alone sage. It gives me trouble in sage-on-gentoo while building the documentation, I am not sure how other distros deal with the doc building. I have the following failure related to this ticket

```
[discrete_] /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/doc/en/reference/discrete_geometry/sage/geometry/polyhedron/library.rst:11: WARNING: autodoc: failed to import module u'sage.geometry.polyhedron.library'; the following exception was raised:
[discrete_] Traceback (most recent call last):
[discrete_] File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/sage_setup/docbuild/ext/sage_autodoc.py", line 525, in import_object
[discrete_] __import__(self.modname)
[discrete_] File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/lib/sage/geometry/polyhedron/library.py", line 75, in <module>
[discrete_] from sage.combinat.root_system.associahedron import Associahedron
[discrete_] File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/lib/sage/combinat/root_system/associahedron.py", line 23, in <module>
[discrete_] from sage.geometry.polyhedron.parent import Polyhedra_QQ_ppl
[discrete_] File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/lib/sage/geometry/polyhedron/parent.py", line 825, in <module>
[discrete_] from sage.geometry.polyhedron.backend_polymake import Polyhedron_polymake
[discrete_] File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/lib/sage/geometry/polyhedron/backend_polymake.py", line 31, in <module>
[discrete_] from sage.rings.integer import LCM_list
[discrete_] ImportError: cannot import name LCM_list
[discrete_] /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/doc/en/reference/discrete_geometry/sage/geometry/polyhedron/parent.rst:11: WARNING: autodoc: failed to import module u'sage.geometry.polyhedron.parent'; the following exception was raised:
[discrete_] Traceback (most recent call last):
[discrete_] File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/sage_setup/docbuild/ext/sage_autodoc.py", line 525, in import_object
[discrete_] __import__(self.modname)
[discrete_] File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/lib/sage/geometry/polyhedron/parent.py", line 825, in <module>
[discrete_] from sage.geometry.polyhedron.backend_polymake import Polyhedron_polymake
[discrete_] File "/dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src-python2_7/build/lib/sage/geometry/polyhedron/backend_polymake.py", line 31, in <module>
[discrete_] from sage.rings.integer import LCM_list
[discrete_] ImportError: cannot import name LCM_list
```
which itself comes from #22630. Volker is currently testing the ticket so don't touch it now. If it is accepted as is, could we have a follow up to import `LCM_list` directly from `sage.arith.functions`? Although if I have problems with `lazy_import`, I will be fighting symptoms rather than the disease by doing that.



---

archive/issue_comments_425282.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-04-02T00:01:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425282",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_425283.json:
```json
{
    "body": "<a id='comment:14'></a>\n`LCM_list` is never called in the code AFAICS. So it should just be as simple as removing the import so this doesn't have to be based on #22630. Which ticket do you mean by \"the ticket\"?",
    "created_at": "2017-04-02T00:01:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425283",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
`LCM_list` is never called in the code AFAICS. So it should just be as simple as removing the import so this doesn't have to be based on #22630. Which ticket do you mean by "the ticket"?



---

archive/issue_comments_425284.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [tscrim](#comment%3A14):\n> `LCM_list` is never called in the code AFAICS. So it should just be as simple as removing the import so this doesn't have to be based on #22630. Which ticket do you mean by \"the ticket\"?\n\n\nThis, here, ticket. I am signaling because I need to keep track of these things but I don't want to stop normal progress. Any issue I have, could be dealt with in a follow up ticket. Volker's already merged this ticket in his testing branch and if all goes well we shouldn't prevent the closing of this ticket because of sage-on-gentoo [OK, I would stop it if I thought you did something terrible].",
    "created_at": "2017-04-02T03:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425284",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:15'></a>
Replying to [tscrim](#comment%3A14):
> `LCM_list` is never called in the code AFAICS. So it should just be as simple as removing the import so this doesn't have to be based on #22630. Which ticket do you mean by "the ticket"?


This, here, ticket. I am signaling because I need to keep track of these things but I don't want to stop normal progress. Any issue I have, could be dealt with in a follow up ticket. Volker's already merged this ticket in his testing branch and if all goes well we shouldn't prevent the closing of this ticket because of sage-on-gentoo [OK, I would stop it if I thought you did something terrible].



---

archive/issue_comments_425285.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-04-02T03:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425285",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_425286.json:
```json
{
    "body": "<a id='comment:16'></a>\nFollow-up ticket at #22740.",
    "created_at": "2017-04-02T04:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425286",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Follow-up ticket at #22740.



---

archive/issue_comments_425287.json:
```json
{
    "body": "<a id='comment:17'></a>\nDocumentation doesn't build",
    "created_at": "2017-04-02T14:22:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425287",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>
Documentation doesn't build



---

archive/issue_comments_425288.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-04-02T14:22:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425288",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_425289.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                                                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|\n|[b47f6f9](https://github.com/sagemath/sagetrac-mirror/commit/b47f6f926b549cdf167530cdb2f25e742a8d70a9)|`Polyhedron_base._polymake_init_: Add work around for empty polytopes with Polymake 3.0`|\n|[3b49a54](https://github.com/sagemath/sagetrac-mirror/commit/3b49a54dc04adec084b7f77f1c70328e608eb967)|`Polymake: Fix another test whose error message depends on whether we use files`|\n|[07a1757](https://github.com/sagemath/sagetrac-mirror/commit/07a17571db553f2aa91f87184fd96492317a4d93)|`Polyhedron_base._polymake_init_: Fix comment`|\n|[09942e7](https://github.com/sagemath/sagetrac-mirror/commit/09942e7983510e41912f04fe14cdeb52a1f0c5a9)|`coercion tutorial: Update introspection results`|\n|[19d05f1](https://github.com/sagemath/sagetrac-mirror/commit/19d05f1b1053dac87c1a21c98a4f3844e0e6a7e3)|`Add more 'optional - polymake`|\n|[cd583e2](https://github.com/sagemath/sagetrac-mirror/commit/cd583e2934e499211c8c8a6addf7dddeb36314cb)|`Remove one unneccessary 'optional - polymake`|\n|[7bcc04c](https://github.com/sagemath/sagetrac-mirror/commit/7bcc04c590a7583fb7d8d0a859fd443fa02c4d8c)|`Merge tag '8.0.beta0' into t/22658/polyhedron_methods_using_the_polymake_pexpect_interface`|\n|[d7d4234](https://github.com/sagemath/sagetrac-mirror/commit/d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c)|`Add '# optional - polymake'`|\n|[4719102](https://github.com/sagemath/sagetrac-mirror/commit/47191027951fa16491a48440e5ec96d1c7d09631)|`Merge remote-tracking branch 'trac/u/mkoeppe/polyhedron_methods_using_the_polymake_pexpect_interface' into t/22683/backend_polymake_for_polyhedron`|\n|[6d1774b](https://github.com/sagemath/sagetrac-mirror/commit/6d1774b1d460ab8927f127abf4abc36305baf674)|`Reference manual: Add backend_polymake`|",
    "created_at": "2017-04-02T19:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425289",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------|
|[b47f6f9](https://github.com/sagemath/sagetrac-mirror/commit/b47f6f926b549cdf167530cdb2f25e742a8d70a9)|`Polyhedron_base._polymake_init_: Add work around for empty polytopes with Polymake 3.0`|
|[3b49a54](https://github.com/sagemath/sagetrac-mirror/commit/3b49a54dc04adec084b7f77f1c70328e608eb967)|`Polymake: Fix another test whose error message depends on whether we use files`|
|[07a1757](https://github.com/sagemath/sagetrac-mirror/commit/07a17571db553f2aa91f87184fd96492317a4d93)|`Polyhedron_base._polymake_init_: Fix comment`|
|[09942e7](https://github.com/sagemath/sagetrac-mirror/commit/09942e7983510e41912f04fe14cdeb52a1f0c5a9)|`coercion tutorial: Update introspection results`|
|[19d05f1](https://github.com/sagemath/sagetrac-mirror/commit/19d05f1b1053dac87c1a21c98a4f3844e0e6a7e3)|`Add more 'optional - polymake`|
|[cd583e2](https://github.com/sagemath/sagetrac-mirror/commit/cd583e2934e499211c8c8a6addf7dddeb36314cb)|`Remove one unneccessary 'optional - polymake`|
|[7bcc04c](https://github.com/sagemath/sagetrac-mirror/commit/7bcc04c590a7583fb7d8d0a859fd443fa02c4d8c)|`Merge tag '8.0.beta0' into t/22658/polyhedron_methods_using_the_polymake_pexpect_interface`|
|[d7d4234](https://github.com/sagemath/sagetrac-mirror/commit/d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c)|`Add '# optional - polymake'`|
|[4719102](https://github.com/sagemath/sagetrac-mirror/commit/47191027951fa16491a48440e5ec96d1c7d09631)|`Merge remote-tracking branch 'trac/u/mkoeppe/polyhedron_methods_using_the_polymake_pexpect_interface' into t/22683/backend_polymake_for_polyhedron`|
|[6d1774b](https://github.com/sagemath/sagetrac-mirror/commit/6d1774b1d460ab8927f127abf4abc36305baf674)|`Reference manual: Add backend_polymake`|



---

archive/issue_comments_425290.json:
```json
{
    "body": "Changing commit from \"952b8607c9a4756cf35fe358e2718e33f04bb6b7\" to \"6d1774b1d460ab8927f127abf4abc36305baf674\"",
    "created_at": "2017-04-02T19:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425290",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "952b8607c9a4756cf35fe358e2718e33f04bb6b7" to "6d1774b1d460ab8927f127abf4abc36305baf674"



---

archive/issue_comments_425291.json:
```json
{
    "body": "<a id='comment:19'></a>\nI've merged in #22740, which was intended to be a follow-up ticket, hoping that this will fix the doc build problems. \nAlso merged the updated branch prereq #22658 (which I'll mark as dup), which brings in 8.0.beta0. \nAnd added `backend_polymake` to the discrete geometry section of the manual. \nDocumentation builds for me on this branch.",
    "created_at": "2017-04-02T19:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425291",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>
I've merged in #22740, which was intended to be a follow-up ticket, hoping that this will fix the doc build problems. 
Also merged the updated branch prereq #22658 (which I'll mark as dup), which brings in 8.0.beta0. 
And added `backend_polymake` to the discrete geometry section of the manual. 
Documentation builds for me on this branch.



---

archive/issue_comments_425292.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-04-02T19:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425292",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_425293.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-02T19:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425293",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_425294.json:
```json
{
    "body": "<a id='comment:20'></a>\nI would have been somewhat surprised if the doc did build on Volker's testing branch given[comment:13](#comment%3A13). Changes LGTM.",
    "created_at": "2017-04-02T19:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425294",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>
I would have been somewhat surprised if the doc did build on Volker's testing branch given[comment:13](#comment%3A13). Changes LGTM.



---

archive/issue_comments_425295.json:
```json
{
    "body": "<a id='comment:21'></a>\nWell, I would have thought you build your branch and the documentation. So, to me it was probably a problem on my side.",
    "created_at": "2017-04-02T19:49:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425295",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:21'></a>
Well, I would have thought you build your branch and the documentation. So, to me it was probably a problem on my side.



---

archive/issue_comments_425296.json:
```json
{
    "body": "<a id='comment:22'></a>\nI didn't test it in conjunction with #22630 and didn't notice the conflict.",
    "created_at": "2017-04-02T19:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425296",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>
I didn't test it in conjunction with #22630 and didn't notice the conflict.



---

archive/issue_events_067229.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-05T19:37:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22683#event-67229"
}
```



---

archive/issue_comments_425297.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-05T19:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425297",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_425298.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/backend_polymake_for_polyhedron\" to \"6d1774b1d460ab8927f127abf4abc36305baf674\"",
    "created_at": "2017-04-05T19:37:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22683",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22683#issuecomment-425298",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/backend_polymake_for_polyhedron" to "6d1774b1d460ab8927f127abf4abc36305baf674"
