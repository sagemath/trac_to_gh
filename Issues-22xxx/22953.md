# Issue 22953: Add "sage --python3" command

archive/issues_022716.json:
```json
{
    "assignees": [],
    "body": "Add \"sage --python3\" to run Sage's Python 3 interpreter.\n\nCC:  @fchapoton\n\nKeywords: **python3**\n\nBranch/Commit: **[`2535021`](https://github.com/sagemath/sagetrac-mirror/commit/253502169a1efb5b7e2b30ba5ebace8432920fb3)**\n\nReviewer: **Fr\u00e9d\u00e9ric Chapoton**\n\nAuthor: **John Palmieri**\n\nComponent: **scripts**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22953_\n\n",
    "closed_at": "2017-05-14T08:19:55Z",
    "created_at": "2017-05-05T20:06:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20scripts",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add \"sage --python3\" command",
    "type": "issue",
    "updated_at": "2017-05-14T08:19:55Z",
    "url": "https://github.com/sagemath/sage/issues/22953",
    "user": "https://github.com/jhpalmieri"
}
```
Add "sage --python3" to run Sage's Python 3 interpreter.

CC:  @fchapoton

Keywords: **python3**

Branch/Commit: **[`2535021`](https://github.com/sagemath/sagetrac-mirror/commit/253502169a1efb5b7e2b30ba5ebace8432920fb3)**

Reviewer: **Frédéric Chapoton**

Author: **John Palmieri**

Component: **scripts**

_Issue created by migration from https://trac.sagemath.org/ticket/22953_





---

archive/issue_events_320125.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2017-05-05T20:06:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22953#event-320125"
}
```



---

archive/issue_events_320126.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2017-05-05T20:06:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20scripts",
    "label_color": "000080",
    "label_name": "c: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22953#event-320126"
}
```



---

archive/issue_events_320127.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2017-05-05T20:06:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22953#event-320127"
}
```



---

archive/issue_events_320128.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2017-05-05T20:06:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22953#event-320128"
}
```



---

archive/issue_comments_342869.json:
```json
{
    "body": "Branch: **[u/jhpalmieri/python3-cmd](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/python3-cmd)**",
    "created_at": "2017-05-05T20:07:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22953#issuecomment-342869",
    "user": "https://github.com/jhpalmieri"
}
```

Branch: **[u/jhpalmieri/python3-cmd](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/python3-cmd)**



---

archive/issue_comments_342870.json:
```json
{
    "body": "Commit: **[`2535021`](https://github.com/sagemath/sagetrac-mirror/commit/253502169a1efb5b7e2b30ba5ebace8432920fb3)**",
    "created_at": "2017-05-05T20:07:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22953#issuecomment-342870",
    "user": "https://github.com/jhpalmieri"
}
```

Commit: **[`2535021`](https://github.com/sagemath/sagetrac-mirror/commit/253502169a1efb5b7e2b30ba5ebace8432920fb3)**



---

archive/issue_events_320129.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2017-05-05T20:07:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22953#event-320129"
}
```



---

archive/issue_comments_342871.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/253502169a1efb5b7e2b30ba5ebace8432920fb3\"><code>2535021</code></a></td><td><code>trac 22953: implement \"sage --python3\"</code></td></tr></table>\n",
    "created_at": "2017-05-05T20:07:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22953#issuecomment-342871",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/253502169a1efb5b7e2b30ba5ebace8432920fb3"><code>2535021</code></a></td><td><code>trac 22953: implement "sage --python3"</code></td></tr></table>




---

archive/issue_comments_342872.json:
```json
{
    "body": "Changed keywords from none to **python3**",
    "created_at": "2017-05-05T20:24:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22953#issuecomment-342872",
    "user": "https://github.com/jhpalmieri"
}
```

Changed keywords from none to **python3**



---

archive/issue_comments_342873.json:
```json
{
    "body": "Reviewer: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2017-05-09T19:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22953#issuecomment-342873",
    "user": "https://github.com/fchapoton"
}
```

Reviewer: **Frédéric Chapoton**



---

archive/issue_events_320130.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-09T19:00:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22953#event-320130"
}
```



---

archive/issue_events_320131.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-05-09T19:00:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22953#event-320131"
}
```



---

archive/issue_comments_342874.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nok, looks good to me",
    "created_at": "2017-05-09T19:00:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22953#issuecomment-342874",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4" align="right">comment:4</div>

ok, looks good to me



---

archive/issue_comments_342875.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nMaybe we could do the same for ipython3, which is quite convenient to have.",
    "created_at": "2017-05-11T14:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22953#issuecomment-342875",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">comment:5</div>

Maybe we could do the same for ipython3, which is quite convenient to have.



---

archive/issue_comments_342876.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAs far as I can tell, ipython3 is only installed if `SAGE_PYTHON3=yes`. (This is up to IPython's installation, not a Sage decision.) We could make these changes, in any case, either here or on a new ticket:\n\n```diff\ndiff --git a/src/bin/sage b/src/bin/sage\nindex 2091144..206bbeb 100755\n--- a/src/bin/sage\n+++ b/src/bin/sage\n@@ -100,6 +100,9 @@ usage_advanced() {\n     echo \"  -gp [...]           -- run Sage's PARI/GP calculator with given arguments\"\n     echo \"  -ipython [...]      -- run Sage's IPython using the default environment (not\"\n     echo \"                         Sage), passing additional options to IPython\"\n+    echo \"  -ipython3 [...]     -- run Sage's IPython3 (if available) using the default\"\n+    echo \"                         environment (not Sage), passing additional options\"\n+    echo \"                         to IPython3\"\n     echo \"  -kash [...]         -- run Sage's Kash with given arguments\"\n     command -v kash &>/dev/null || \\\n     echo \"                         (not installed currently, run sage -i kash)\"\n@@ -593,6 +596,11 @@ if [ \"$1\" = '-ipython' -o \"$1\" = '--ipython' ]; then\n     exec ipython \"$@\"\n fi\n \n+if [ \"$1\" = '-ipython3' -o \"$1\" = '--ipython3' ]; then\n+    shift\n+    exec ipython3 \"$@\"\n+fi\n+\n if [ \"$1\" = '-git' -o \"$1\" = '--git' ]; then\n     shift\n     exec git \"$@\"\ndiff --git a/src/doc/en/reference/repl/options.rst b/src/doc/en/reference/repl/options.rst\nindex e87c58a..6878504 100644\n--- a/src/doc/en/reference/repl/options.rst\n+++ b/src/doc/en/reference/repl/options.rst\n@@ -67,6 +67,10 @@ Command-line options for Sage\n - ``--gp [...]`` -- run Sage's PARI/GP calculator with the given arguments\n - ``--ipython [...]`` -- run Sage's IPython using the default\n   environment (not Sage), passing additional options to IPython\n+- ``--ipython3 [...]`` -- run Sage's IPython3 using the default\n+  environment (not Sage), passing additional options to IPython3. Note\n+  that IPython3 is only installed if Sage is built with the\n+  environment variable :envvar:`SAGE_PYTHON3` set to \"yes\".\n - ``--kash [...]`` -- run Sage's Kash with the given arguments\n - ``--M2 [...]`` -- run Sage's Macaulay2 with the given arguments\n - ``--maxima [...]`` -- run Sage's Maxima with the given arguments\n```",
    "created_at": "2017-05-11T17:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22953#issuecomment-342876",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

As far as I can tell, ipython3 is only installed if `SAGE_PYTHON3=yes`. (This is up to IPython's installation, not a Sage decision.) We could make these changes, in any case, either here or on a new ticket:

```diff
diff --git a/src/bin/sage b/src/bin/sage
index 2091144..206bbeb 100755
--- a/src/bin/sage
+++ b/src/bin/sage
@@ -100,6 +100,9 @@ usage_advanced() {
     echo "  -gp [...]           -- run Sage's PARI/GP calculator with given arguments"
     echo "  -ipython [...]      -- run Sage's IPython using the default environment (not"
     echo "                         Sage), passing additional options to IPython"
+    echo "  -ipython3 [...]     -- run Sage's IPython3 (if available) using the default"
+    echo "                         environment (not Sage), passing additional options"
+    echo "                         to IPython3"
     echo "  -kash [...]         -- run Sage's Kash with given arguments"
     command -v kash &>/dev/null || \
     echo "                         (not installed currently, run sage -i kash)"
@@ -593,6 +596,11 @@ if [ "$1" = '-ipython' -o "$1" = '--ipython' ]; then
     exec ipython "$@"
 fi
 
+if [ "$1" = '-ipython3' -o "$1" = '--ipython3' ]; then
+    shift
+    exec ipython3 "$@"
+fi
+
 if [ "$1" = '-git' -o "$1" = '--git' ]; then
     shift
     exec git "$@"
diff --git a/src/doc/en/reference/repl/options.rst b/src/doc/en/reference/repl/options.rst
index e87c58a..6878504 100644
--- a/src/doc/en/reference/repl/options.rst
+++ b/src/doc/en/reference/repl/options.rst
@@ -67,6 +67,10 @@ Command-line options for Sage
 - ``--gp [...]`` -- run Sage's PARI/GP calculator with the given arguments
 - ``--ipython [...]`` -- run Sage's IPython using the default
   environment (not Sage), passing additional options to IPython
+- ``--ipython3 [...]`` -- run Sage's IPython3 using the default
+  environment (not Sage), passing additional options to IPython3. Note
+  that IPython3 is only installed if Sage is built with the
+  environment variable :envvar:`SAGE_PYTHON3` set to "yes".
 - ``--kash [...]`` -- run Sage's Kash with the given arguments
 - ``--M2 [...]`` -- run Sage's Macaulay2 with the given arguments
 - ``--maxima [...]`` -- run Sage's Maxima with the given arguments
```



---

archive/issue_events_320132.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-14T08:19:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22953#event-320132"
}
```



---

archive/issue_events_320133.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "140c85c9816d861385313b12fb8a4a55b24694e8",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-05-14T08:19:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22953#event-320133"
}
```



---

archive/issue_comments_342877.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/python3-cmd](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/python3-cmd)** to **[`2535021`](https://github.com/sagemath/sagetrac-mirror/commit/253502169a1efb5b7e2b30ba5ebace8432920fb3)**",
    "created_at": "2017-05-14T08:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22953#issuecomment-342877",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jhpalmieri/python3-cmd](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/python3-cmd)** to **[`2535021`](https://github.com/sagemath/sagetrac-mirror/commit/253502169a1efb5b7e2b30ba5ebace8432920fb3)**
