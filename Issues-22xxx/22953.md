# Issue 22953: Add "sage --python3" command

archive/issues_022716.json:
```json
{
    "body": "Add \"sage --python3\" to run Sage's Python 3 interpreter.\n\nCC:  @fchapoton\n\nKeywords: python3\n\nBranch/Commit: 253502169a1efb5b7e2b30ba5ebace8432920fb3\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: John Palmieri\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22953\n\n",
    "closed_at": "2017-05-14T08:19:55Z",
    "created_at": "2017-05-05T20:06:53Z",
    "labels": [
        "component: scripts"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Add \"sage --python3\" command",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22953",
    "user": "https://github.com/jhpalmieri"
}
```
Add "sage --python3" to run Sage's Python 3 interpreter.

CC:  @fchapoton

Keywords: python3

Branch/Commit: 253502169a1efb5b7e2b30ba5ebace8432920fb3

Reviewer: Frédéric Chapoton

Author: John Palmieri

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22953





---

archive/issue_comments_429313.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jhpalmieri/python3-cmd\"",
    "created_at": "2017-05-05T20:07:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22953#issuecomment-429313",
    "user": "https://github.com/jhpalmieri"
}
```

Changing branch from "" to "u/jhpalmieri/python3-cmd"



---

archive/issue_comments_429314.json:
```json
{
    "body": "Changing commit from \"\" to \"253502169a1efb5b7e2b30ba5ebace8432920fb3\"",
    "created_at": "2017-05-05T20:07:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22953#issuecomment-429314",
    "user": "https://github.com/jhpalmieri"
}
```

Changing commit from "" to "253502169a1efb5b7e2b30ba5ebace8432920fb3"



---

archive/issue_comments_429315.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-05T20:07:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22953#issuecomment-429315",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_429316.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[2535021](https://git.sagemath.org/sage.git/commit?id=253502169a1efb5b7e2b30ba5ebace8432920fb3)|`trac 22953: implement \"sage --python3\"`|",
    "created_at": "2017-05-05T20:07:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22953#issuecomment-429316",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[2535021](https://git.sagemath.org/sage.git/commit?id=253502169a1efb5b7e2b30ba5ebace8432920fb3)|`trac 22953: implement "sage --python3"`|



---

archive/issue_comments_429317.json:
```json
{
    "body": "Changing keywords from \"\" to \"python3\".",
    "created_at": "2017-05-05T20:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22953#issuecomment-429317",
    "user": "https://github.com/jhpalmieri"
}
```

Changing keywords from "" to "python3".



---

archive/issue_comments_429318.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2017-05-09T19:00:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22953#issuecomment-429318",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Frédéric Chapoton"



---

archive/issue_comments_429319.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-09T19:00:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22953#issuecomment-429319",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_429320.json:
```json
{
    "body": "<a id='comment:4'></a>\nok, looks good to me",
    "created_at": "2017-05-09T19:00:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22953#issuecomment-429320",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
ok, looks good to me



---

archive/issue_comments_429321.json:
```json
{
    "body": "<a id='comment:5'></a>\nMaybe we could do the same for ipython3, which is quite convenient to have.",
    "created_at": "2017-05-11T14:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22953#issuecomment-429321",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
Maybe we could do the same for ipython3, which is quite convenient to have.



---

archive/issue_comments_429322.json:
```json
{
    "body": "<a id='comment:6'></a>\nAs far as I can tell, ipython3 is only installed if `SAGE_PYTHON3=yes`. (This is up to IPython's installation, not a Sage decision.) We could make these changes, in any case, either here or on a new ticket:\n\n```diff\ndiff --git a/src/bin/sage b/src/bin/sage\nindex 2091144..206bbeb 100755\n--- a/src/bin/sage\n+++ b/src/bin/sage\n@@ -100,6 +100,9 @@ usage_advanced() {\n     echo \"  -gp [...]           -- run Sage's PARI/GP calculator with given arguments\"\n     echo \"  -ipython [...]      -- run Sage's IPython using the default environment (not\"\n     echo \"                         Sage), passing additional options to IPython\"\n+    echo \"  -ipython3 [...]     -- run Sage's IPython3 (if available) using the default\"\n+    echo \"                         environment (not Sage), passing additional options\"\n+    echo \"                         to IPython3\"\n     echo \"  -kash [...]         -- run Sage's Kash with given arguments\"\n     command -v kash &>/dev/null || \\\n     echo \"                         (not installed currently, run sage -i kash)\"\n@@ -593,6 +596,11 @@ if [ \"$1\" = '-ipython' -o \"$1\" = '--ipython' ]; then\n     exec ipython \"$@\"\n fi\n \n+if [ \"$1\" = '-ipython3' -o \"$1\" = '--ipython3' ]; then\n+    shift\n+    exec ipython3 \"$@\"\n+fi\n+\n if [ \"$1\" = '-git' -o \"$1\" = '--git' ]; then\n     shift\n     exec git \"$@\"\ndiff --git a/src/doc/en/reference/repl/options.rst b/src/doc/en/reference/repl/options.rst\nindex e87c58a..6878504 100644\n--- a/src/doc/en/reference/repl/options.rst\n+++ b/src/doc/en/reference/repl/options.rst\n@@ -67,6 +67,10 @@ Command-line options for Sage\n - ``--gp [...]`` -- run Sage's PARI/GP calculator with the given arguments\n - ``--ipython [...]`` -- run Sage's IPython using the default\n   environment (not Sage), passing additional options to IPython\n+- ``--ipython3 [...]`` -- run Sage's IPython3 using the default\n+  environment (not Sage), passing additional options to IPython3. Note\n+  that IPython3 is only installed if Sage is built with the\n+  environment variable :envvar:`SAGE_PYTHON3` set to \"yes\".\n - ``--kash [...]`` -- run Sage's Kash with the given arguments\n - ``--M2 [...]`` -- run Sage's Macaulay2 with the given arguments\n - ``--maxima [...]`` -- run Sage's Maxima with the given arguments\n```",
    "created_at": "2017-05-11T17:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22953#issuecomment-429322",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>
As far as I can tell, ipython3 is only installed if `SAGE_PYTHON3=yes`. (This is up to IPython's installation, not a Sage decision.) We could make these changes, in any case, either here or on a new ticket:

```diff
diff --git a/src/bin/sage b/src/bin/sage
index 2091144..206bbeb 100755
--- a/src/bin/sage
+++ b/src/bin/sage
@@ -100,6 +100,9 @@ usage_advanced() {
     echo "  -gp [...]           -- run Sage's PARI/GP calculator with given arguments"
     echo "  -ipython [...]      -- run Sage's IPython using the default environment (not"
     echo "                         Sage), passing additional options to IPython"
+    echo "  -ipython3 [...]     -- run Sage's IPython3 (if available) using the default"
+    echo "                         environment (not Sage), passing additional options"
+    echo "                         to IPython3"
     echo "  -kash [...]         -- run Sage's Kash with given arguments"
     command -v kash &>/dev/null || \
     echo "                         (not installed currently, run sage -i kash)"
@@ -593,6 +596,11 @@ if [ "$1" = '-ipython' -o "$1" = '--ipython' ]; then
     exec ipython "$@"
 fi
 
+if [ "$1" = '-ipython3' -o "$1" = '--ipython3' ]; then
+    shift
+    exec ipython3 "$@"
+fi
+
 if [ "$1" = '-git' -o "$1" = '--git' ]; then
     shift
     exec git "$@"
diff --git a/src/doc/en/reference/repl/options.rst b/src/doc/en/reference/repl/options.rst
index e87c58a..6878504 100644
--- a/src/doc/en/reference/repl/options.rst
+++ b/src/doc/en/reference/repl/options.rst
@@ -67,6 +67,10 @@ Command-line options for Sage
 - ``--gp [...]`` -- run Sage's PARI/GP calculator with the given arguments
 - ``--ipython [...]`` -- run Sage's IPython using the default
   environment (not Sage), passing additional options to IPython
+- ``--ipython3 [...]`` -- run Sage's IPython3 using the default
+  environment (not Sage), passing additional options to IPython3. Note
+  that IPython3 is only installed if Sage is built with the
+  environment variable :envvar:`SAGE_PYTHON3` set to "yes".
 - ``--kash [...]`` -- run Sage's Kash with the given arguments
 - ``--M2 [...]`` -- run Sage's Macaulay2 with the given arguments
 - ``--maxima [...]`` -- run Sage's Maxima with the given arguments
```



---

archive/issue_events_059511.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-14T08:19:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22953",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22953#event-59511"
}
```



---

archive/issue_comments_429323.json:
```json
{
    "body": "Changing branch from \"u/jhpalmieri/python3-cmd\" to \"253502169a1efb5b7e2b30ba5ebace8432920fb3\"",
    "created_at": "2017-05-14T08:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22953#issuecomment-429323",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jhpalmieri/python3-cmd" to "253502169a1efb5b7e2b30ba5ebace8432920fb3"



---

archive/issue_comments_429324.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-14T08:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22953#issuecomment-429324",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
