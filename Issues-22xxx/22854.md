# Issue 22854: Extend bruhat graphs

archive/issues_022617.json:
```json
{
    "body": "Right now we can only get the Bruhat graph of Weyl groups even though we can do the same thing for Coxeter Groups. I plan on moving bruhat_graph from the WeylGroups class in combinat/root_system to the category of Coxeter groups. This will keep WeylGroup having the method, but expand it to Coxter groups.\n\nAdditionally, it would be natural to not require two elements to find a the graph between them. So instead, if the group is finite, we'll allow the calling of bruhat_graph() which will bring back the entire graph.\n\nCC:  @nthiery @tscrim @fchapoton\n\nKeywords: sagedays86\n\nBranch/Commit: 33265f88aa753bbf0666ed50d82b4896ec842514\n\nReviewer: Travis Scrimshaw, Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Aram Dermenjian\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22854\n\n",
    "closed_at": "2017-05-31T22:25:39Z",
    "created_at": "2017-04-21T18:32:13Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Extend bruhat graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22854",
    "user": "https://github.com/thecaligarmo"
}
```
Right now we can only get the Bruhat graph of Weyl groups even though we can do the same thing for Coxeter Groups. I plan on moving bruhat_graph from the WeylGroups class in combinat/root_system to the category of Coxeter groups. This will keep WeylGroup having the method, but expand it to Coxter groups.

Additionally, it would be natural to not require two elements to find a the graph between them. So instead, if the group is finite, we'll allow the calling of bruhat_graph() which will bring back the entire graph.

CC:  @nthiery @tscrim @fchapoton

Keywords: sagedays86

Branch/Commit: 33265f88aa753bbf0666ed50d82b4896ec842514

Reviewer: Travis Scrimshaw, Frédéric Chapoton

Author: Aram Dermenjian

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22854





---

archive/issue_comments_426926.json:
```json
{
    "body": "Changing keywords from \"\" to \"sagedays86\".",
    "created_at": "2017-04-21T18:51:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426926",
    "user": "https://github.com/thecaligarmo"
}
```

Changing keywords from "" to "sagedays86".



---

archive/issue_comments_426927.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-Move bruhat_graph from WeylGroups? to the CoxeterGroups? category and if the group is finite, allow bruhat_graph() to return the entire graph.\n+Right now we can only get the Bruhat graph of Weyl groups even though we can do the same thing for Coxeter Groups. I plan on moving bruhat_graph from the WeylGroups class in combinat/root_system to the category of Coxeter groups. This will keep WeylGroup having the method, but expand it to Coxter groups.\n+\n+Additionally, it would be natural to not require two elements to find a the graph between them. So instead, if the group is finite, we'll allow the calling of bruhat_graph() which will bring back the entire graph.\n``````\n",
    "created_at": "2017-04-21T18:51:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426927",
    "user": "https://github.com/thecaligarmo"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-Move bruhat_graph from WeylGroups? to the CoxeterGroups? category and if the group is finite, allow bruhat_graph() to return the entire graph.
+Right now we can only get the Bruhat graph of Weyl groups even though we can do the same thing for Coxeter Groups. I plan on moving bruhat_graph from the WeylGroups class in combinat/root_system to the category of Coxeter groups. This will keep WeylGroup having the method, but expand it to Coxter groups.
+
+Additionally, it would be natural to not require two elements to find a the graph between them. So instead, if the group is finite, we'll allow the calling of bruhat_graph() which will bring back the entire graph.
``````




---

archive/issue_comments_426928.json:
```json
{
    "body": "Changing branch from \"\" to \"u/aram.dermenjian/generalize_bruhat_graphs\"",
    "created_at": "2017-04-21T18:52:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426928",
    "user": "https://github.com/thecaligarmo"
}
```

Changing branch from "" to "u/aram.dermenjian/generalize_bruhat_graphs"



---

archive/issue_comments_426929.json:
```json
{
    "body": "<a id='comment:4'></a>\nThis should be ready for review.\n\n---\nNew commits:\n|                                                                                                                                          |                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[f64c494](https://git.sagemath.org/sage.git/commit?id=f64c4942b14ad4451860537b16a0e9467a5cb6df)|`Move bruhat_graph to Coxeter category`|",
    "created_at": "2017-04-21T18:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426929",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:4'></a>
This should be ready for review.

---
New commits:
|                                                                                                                                          |                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[f64c494](https://git.sagemath.org/sage.git/commit?id=f64c4942b14ad4451860537b16a0e9467a5cb6df)|`Move bruhat_graph to Coxeter category`|



---

archive/issue_comments_426930.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-04-21T18:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426930",
    "user": "https://github.com/thecaligarmo"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_426931.json:
```json
{
    "body": "Changing commit from \"\" to \"f64c4942b14ad4451860537b16a0e9467a5cb6df\"",
    "created_at": "2017-04-21T18:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426931",
    "user": "https://github.com/thecaligarmo"
}
```

Changing commit from "" to "f64c4942b14ad4451860537b16a0e9467a5cb6df"



---

archive/issue_comments_426932.json:
```json
{
    "body": "Changing reviewer from \"\" to \"nthiery,tscrim,chapoton\"",
    "created_at": "2017-04-21T18:58:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426932",
    "user": "https://github.com/thecaligarmo"
}
```

Changing reviewer from "" to "nthiery,tscrim,chapoton"



---

archive/issue_comments_426933.json:
```json
{
    "body": "Changing author from \"aram.dermenjian\" to \"Aram Dermenjian\"",
    "created_at": "2017-04-21T19:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426933",
    "user": "https://github.com/thecaligarmo"
}
```

Changing author from "aram.dermenjian" to "Aram Dermenjian"



---

archive/issue_comments_426934.json:
```json
{
    "body": "Changing reviewer from \"nthiery,tscrim,chapoton\" to \"Nicolas M. Thi\u00e9ry,Travis Scrimshaw,Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2017-04-21T19:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426934",
    "user": "https://github.com/thecaligarmo"
}
```

Changing reviewer from "nthiery,tscrim,chapoton" to "Nicolas M. Thiéry,Travis Scrimshaw,Frédéric Chapoton"



---

archive/issue_comments_426935.json:
```json
{
    "body": "Changing reviewer from \"Nicolas M. Thi\u00e9ry,Travis Scrimshaw,Fr\u00e9d\u00e9ric Chapoton\" to \"\"",
    "created_at": "2017-04-21T19:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426935",
    "user": "https://github.com/thecaligarmo"
}
```

Changing reviewer from "Nicolas M. Thiéry,Travis Scrimshaw,Frédéric Chapoton" to ""



---

archive/issue_comments_426936.json:
```json
{
    "body": "<a id='comment:7'></a>\nSome comments:\n\n-I think the extra doctests should not be in the block below saying `:trac:`17744``, but above it.\n- Instead of this complicated check for the long element and you already test `self.is_finite()`, so just do the default being the long element there. This is better locality of code.\n- A better error message would be `infinite groups must specify a maximal element`.\n- `reflection_length` needs a doctest.\n- Even though it is slight code duplication, it would be faster (and probably cleaner) to use code similar to `bruhat_interval`. While this could be done on a separate ticket, I think it would be better to do this here and now.",
    "created_at": "2017-04-22T02:24:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426936",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
Some comments:

-I think the extra doctests should not be in the block below saying `:trac:`17744``, but above it.
- Instead of this complicated check for the long element and you already test `self.is_finite()`, so just do the default being the long element there. This is better locality of code.
- A better error message would be `infinite groups must specify a maximal element`.
- `reflection_length` needs a doctest.
- Even though it is slight code duplication, it would be faster (and probably cleaner) to use code similar to `bruhat_interval`. While this could be done on a separate ticket, I think it would be better to do this here and now.



---

archive/issue_comments_426937.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[edda1ff](https://git.sagemath.org/sage.git/commit/?id=edda1ff1eaebc41a47fa31f71b388906a8ec2ad4)|`Update doctests and error messaging`|",
    "created_at": "2017-04-22T13:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426937",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[edda1ff](https://git.sagemath.org/sage.git/commit/?id=edda1ff1eaebc41a47fa31f71b388906a8ec2ad4)|`Update doctests and error messaging`|



---

archive/issue_comments_426938.json:
```json
{
    "body": "Changing commit from \"f64c4942b14ad4451860537b16a0e9467a5cb6df\" to \"edda1ff1eaebc41a47fa31f71b388906a8ec2ad4\"",
    "created_at": "2017-04-22T13:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426938",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f64c4942b14ad4451860537b16a0e9467a5cb6df" to "edda1ff1eaebc41a47fa31f71b388906a8ec2ad4"



---

archive/issue_comments_426939.json:
```json
{
    "body": "Changing commit from \"edda1ff1eaebc41a47fa31f71b388906a8ec2ad4\" to \"bea06bac026df5af3d7401932e63aee2f363ae41\"",
    "created_at": "2017-04-22T13:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426939",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "edda1ff1eaebc41a47fa31f71b388906a8ec2ad4" to "bea06bac026df5af3d7401932e63aee2f363ae41"



---

archive/issue_comments_426940.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------|\n|[bea06ba](https://git.sagemath.org/sage.git/commit/?id=bea06bac026df5af3d7401932e63aee2f363ae41)|`doc tests`|",
    "created_at": "2017-04-22T13:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426940",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------|
|[bea06ba](https://git.sagemath.org/sage.git/commit/?id=bea06bac026df5af3d7401932e63aee2f363ae41)|`doc tests`|



---

archive/issue_comments_426941.json:
```json
{
    "body": "<a id='comment:10'></a>\nSo all the above corrections have been made.\n\nI didn't understand what you meant by replicating bruhat_interval in your last comment. Do you mean using a similar while loop in bruhat_group to find all potential additional chains? The issue here is that if the group is infinite we can't go through \"all\" the reflections to test things out. Hence why this method was used (and I kept it over from the current version). Unless you mean something different?\n\n---\nNew commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[edda1ff](https://git.sagemath.org/sage.git/commit?id=edda1ff1eaebc41a47fa31f71b388906a8ec2ad4)|`Update doctests and error messaging`|\n|[bea06ba](https://git.sagemath.org/sage.git/commit?id=bea06bac026df5af3d7401932e63aee2f363ae41)|`doc tests`|",
    "created_at": "2017-04-22T13:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426941",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:10'></a>
So all the above corrections have been made.

I didn't understand what you meant by replicating bruhat_interval in your last comment. Do you mean using a similar while loop in bruhat_group to find all potential additional chains? The issue here is that if the group is infinite we can't go through "all" the reflections to test things out. Hence why this method was used (and I kept it over from the current version). Unless you mean something different?

---
New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[edda1ff](https://git.sagemath.org/sage.git/commit?id=edda1ff1eaebc41a47fa31f71b388906a8ec2ad4)|`Update doctests and error messaging`|
|[bea06ba](https://git.sagemath.org/sage.git/commit?id=bea06bac026df5af3d7401932e63aee2f363ae41)|`doc tests`|



---

archive/issue_comments_426942.json:
```json
{
    "body": "<a id='comment:11'></a>\nActually, looking into this a bit more, I think we should have `bruhat_graph` be constructed from the transitive closure of the digraph of the Bruhat cover relations. This way we would not have to look at what is a reflection and what is not.\n\nSo what I would do is start with a hidden method `_bruhat_covers_digraph`, which builds the digraph of cover relations by using code from `bruhat_interval`. Then `bruhat_graph` would return `self._bruhat_covers_digraph(x,y).transitive_closure()`. Furthermore, `bruhat_poset` could be lifted and generalized to return `Poset(self._bruhat_covers_digraph(x,y), cover_relations=True, facade=facade)`.\n\nI can do this is if you want me to.",
    "created_at": "2017-04-22T14:04:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426942",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
Actually, looking into this a bit more, I think we should have `bruhat_graph` be constructed from the transitive closure of the digraph of the Bruhat cover relations. This way we would not have to look at what is a reflection and what is not.

So what I would do is start with a hidden method `_bruhat_covers_digraph`, which builds the digraph of cover relations by using code from `bruhat_interval`. Then `bruhat_graph` would return `self._bruhat_covers_digraph(x,y).transitive_closure()`. Furthermore, `bruhat_poset` could be lifted and generalized to return `Poset(self._bruhat_covers_digraph(x,y), cover_relations=True, facade=facade)`.

I can do this is if you want me to.



---

archive/issue_comments_426943.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[d5875c1](https://git.sagemath.org/sage.git/commit/?id=d5875c1e23455500e7dd892d0be66ca9d8cb4511)|`Allow edge labels in Bruhat graph`|",
    "created_at": "2017-05-10T20:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426943",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[d5875c1](https://git.sagemath.org/sage.git/commit/?id=d5875c1e23455500e7dd892d0be66ca9d8cb4511)|`Allow edge labels in Bruhat graph`|



---

archive/issue_comments_426944.json:
```json
{
    "body": "Changing commit from \"bea06bac026df5af3d7401932e63aee2f363ae41\" to \"d5875c1e23455500e7dd892d0be66ca9d8cb4511\"",
    "created_at": "2017-05-10T20:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426944",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bea06bac026df5af3d7401932e63aee2f363ae41" to "d5875c1e23455500e7dd892d0be66ca9d8cb4511"



---

archive/issue_comments_426945.json:
```json
{
    "body": "<a id='comment:13'></a>\nSo one reason transitive closure isn't a good idea is because I'd like to keep track of the reflection used to make that transition (as added in my latest commit). Also, I'm not exactly sure how the transitive closure would work in this case. Do you want to do a run with the poset and if it works as expected I can merge the two with Bruhat graph? (Or you can add it into Bruhat graph directly if you'd prefer)",
    "created_at": "2017-05-10T20:59:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426945",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:13'></a>
So one reason transitive closure isn't a good idea is because I'd like to keep track of the reflection used to make that transition (as added in my latest commit). Also, I'm not exactly sure how the transitive closure would work in this case. Do you want to do a run with the poset and if it works as expected I can merge the two with Bruhat graph? (Or you can add it into Bruhat graph directly if you'd prefer)



---

archive/issue_comments_426946.json:
```json
{
    "body": "Changing branch from \"u/aram.dermenjian/generalize_bruhat_graphs\" to \"public/combinat/extend_bruhat_graphs-22854\"",
    "created_at": "2017-05-17T23:03:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426946",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "u/aram.dermenjian/generalize_bruhat_graphs" to "public/combinat/extend_bruhat_graphs-22854"



---

archive/issue_comments_426947.json:
```json
{
    "body": "Changing commit from \"d5875c1e23455500e7dd892d0be66ca9d8cb4511\" to \"33265f88aa753bbf0666ed50d82b4896ec842514\"",
    "created_at": "2017-05-17T23:03:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426947",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "d5875c1e23455500e7dd892d0be66ca9d8cb4511" to "33265f88aa753bbf0666ed50d82b4896ec842514"



---

archive/issue_comments_426948.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2017-05-17T23:03:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426948",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_426949.json:
```json
{
    "body": "<a id='comment:14'></a>\nActually, the transitive closure is too permissive as you can get differences that are products of reflections, which of course, are not always reflections. However, I was able to get a massive speed boost by sorting the `bruhat_interval` by length so we only have to do approx `n^2 / 2` checks and not have to do the length checks each time.\n\nI also added a `bruhat_interval_poset`, which goes slightly beyond the scope of the ticket but is in the spirit of it, instead of lifting up `bruhat_poset` to keep that reserved for the entire Bruhat order poset.\n\n---\nNew commits:\n|                                                                                                                                          |                                                                                                                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|\n|[9164839](https://git.sagemath.org/sage.git/commit?id=91648393697c1a36b02213546c645e1f29fe734c)|`Merge branch 'u/aram.dermenjian/generalize_bruhat_graphs' of git://trac.sagemath.org/sage into public/combinat/extend_bruhat_graphs-22854`|\n|[33265f8](https://git.sagemath.org/sage.git/commit?id=33265f88aa753bbf0666ed50d82b4896ec842514)|`Add bruhat_interval_poset and speedup of bruhat_graph.`|",
    "created_at": "2017-05-17T23:03:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426949",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
Actually, the transitive closure is too permissive as you can get differences that are products of reflections, which of course, are not always reflections. However, I was able to get a massive speed boost by sorting the `bruhat_interval` by length so we only have to do approx `n^2 / 2` checks and not have to do the length checks each time.

I also added a `bruhat_interval_poset`, which goes slightly beyond the scope of the ticket but is in the spirit of it, instead of lifting up `bruhat_poset` to keep that reserved for the entire Bruhat order poset.

---
New commits:
|                                                                                                                                          |                                                                                                                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
|[9164839](https://git.sagemath.org/sage.git/commit?id=91648393697c1a36b02213546c645e1f29fe734c)|`Merge branch 'u/aram.dermenjian/generalize_bruhat_graphs' of git://trac.sagemath.org/sage into public/combinat/extend_bruhat_graphs-22854`|
|[33265f8](https://git.sagemath.org/sage.git/commit?id=33265f88aa753bbf0666ed50d82b4896ec842514)|`Add bruhat_interval_poset and speedup of bruhat_graph.`|



---

archive/issue_comments_426950.json:
```json
{
    "body": "<a id='comment:15'></a>\nping - Patchbot is (essentially) green.",
    "created_at": "2017-05-29T21:05:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426950",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>
ping - Patchbot is (essentially) green.



---

archive/issue_comments_426951.json:
```json
{
    "body": "Changing reviewer from \"Travis Scrimshaw\" to \"Travis Scrimshaw, Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2017-05-30T07:37:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426951",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "Travis Scrimshaw" to "Travis Scrimshaw, Frédéric Chapoton"



---

archive/issue_comments_426952.json:
```json
{
    "body": "<a id='comment:16'></a>\nok, let it be (though I do not like that \"reflection length\" is not just an alias).",
    "created_at": "2017-05-30T07:37:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426952",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:16'></a>
ok, let it be (though I do not like that "reflection length" is not just an alias).



---

archive/issue_comments_426953.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-30T07:37:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426953",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_426954.json:
```json
{
    "body": "<a id='comment:17'></a>\nLooks good on my end too. I can always quickly alter reflection length to be an alias instead of a direct call if you'd prefer Chapoton. (I hadn't realised aliasing was possible) Just let me know and I'll quickly do it tonight.",
    "created_at": "2017-05-30T11:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426954",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:17'></a>
Looks good on my end too. I can always quickly alter reflection length to be an alias instead of a direct call if you'd prefer Chapoton. (I hadn't realised aliasing was possible) Just let me know and I'll quickly do it tonight.



---

archive/issue_comments_426955.json:
```json
{
    "body": "<a id='comment:18'></a>\nNo, let us keep things as they are, no need to re-open the ticket for that.",
    "created_at": "2017-05-30T11:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426955",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:18'></a>
No, let us keep things as they are, no need to re-open the ticket for that.



---

archive/issue_events_059375.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-31T22:25:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22854#event-59375"
}
```



---

archive/issue_comments_426956.json:
```json
{
    "body": "Changing branch from \"public/combinat/extend_bruhat_graphs-22854\" to \"33265f88aa753bbf0666ed50d82b4896ec842514\"",
    "created_at": "2017-05-31T22:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426956",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/combinat/extend_bruhat_graphs-22854" to "33265f88aa753bbf0666ed50d82b4896ec842514"



---

archive/issue_comments_426957.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-31T22:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22854",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22854#issuecomment-426957",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
