# Issue 22801: SymPy as optional symbolic method for manifolds

archive/issues_022564.json:
```json
{
    "body": "The symbolic method used for manifolds and differentiable manifolds is \"symbolic\", the default in [SageMath](SageMath).\nIn this ticket we introduce the use of SymPy as an option when the Chart in the manifold is created.\n\nAt this point there is a dependence on Sympy ticket:\n\"sympy to sage conversion : Abstract function.\"\nhttps://github.com/sympy/sympy/pull/12826\n\nCC:  @egourgoulhon\n\nBranch/Commit: 87877f05a3908e13507afdc281289853a7e1e946\n\nReviewer: Eric Gourgoulhon, Ralf Stephan, Richard Lozes\n\nAuthor: Marco Mancini\n\nDependencies: #22802 #24006 #20204 #24232\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22801\n\n",
    "closed_at": "2017-12-13T17:38:43Z",
    "created_at": "2017-04-13T09:13:12Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "SymPy as optional symbolic method for manifolds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22801",
    "user": "https://github.com/man74cio"
}
```
The symbolic method used for manifolds and differentiable manifolds is "symbolic", the default in [SageMath](SageMath).
In this ticket we introduce the use of SymPy as an option when the Chart in the manifold is created.

At this point there is a dependence on Sympy ticket:
"sympy to sage conversion : Abstract function."
https://github.com/sympy/sympy/pull/12826

CC:  @egourgoulhon

Branch/Commit: 87877f05a3908e13507afdc281289853a7e1e946

Reviewer: Eric Gourgoulhon, Ralf Stephan, Richard Lozes

Author: Marco Mancini

Dependencies: #22802 #24006 #20204 #24232

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22801





---

archive/issue_comments_419932.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#22802\"",
    "created_at": "2017-04-13T09:44:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419932",
    "user": "https://github.com/man74cio"
}
```

Changing dependencies from "" to "#22802"



---

archive/issue_comments_419933.json:
```json
{
    "body": "Changing branch from \"\" to \"22801-manifold-sympy\"",
    "created_at": "2017-04-13T11:29:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419933",
    "user": "https://github.com/man74cio"
}
```

Changing branch from "" to "22801-manifold-sympy"



---

archive/issue_comments_419934.json:
```json
{
    "body": "Changing commit from \"\" to \"3da57124a6e7cd88ba7928c0a5bdf67603f321c6\"",
    "created_at": "2017-04-13T11:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419934",
    "user": "https://github.com/man74cio"
}
```

Changing commit from "" to "3da57124a6e7cd88ba7928c0a5bdf67603f321c6"



---

archive/issue_comments_419935.json:
```json
{
    "body": "Changing branch from \"22801-manifold-sympy\" to \"public/22801-manifold-sympy\"",
    "created_at": "2017-04-13T11:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419935",
    "user": "https://github.com/man74cio"
}
```

Changing branch from "22801-manifold-sympy" to "public/22801-manifold-sympy"



---

archive/issue_comments_419936.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[b494a4f](https://github.com/sagemath/sagetrac-mirror/commit/b494a4f646383de66c0836b404f60134f88b0497)|`Added sympy symbolic method for manifolds.`|\n|[3da5712](https://github.com/sagemath/sagetrac-mirror/commit/3da57124a6e7cd88ba7928c0a5bdf67603f321c6)|`merged with develop`|",
    "created_at": "2017-04-13T11:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419936",
    "user": "https://github.com/man74cio"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[b494a4f](https://github.com/sagemath/sagetrac-mirror/commit/b494a4f646383de66c0836b404f60134f88b0497)|`Added sympy symbolic method for manifolds.`|
|[3da5712](https://github.com/sagemath/sagetrac-mirror/commit/3da57124a6e7cd88ba7928c0a5bdf67603f321c6)|`merged with develop`|



---

archive/issue_comments_419937.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------|\n|[3be4547](https://github.com/sagemath/sagetrac-mirror/commit/3be45473000c9141d38710f71ea99373b3c747c0)|`created the class ChartFunction which will replace the CoordFunction. also the singleton to manage symbolic method was created`|",
    "created_at": "2017-06-01T15:38:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419937",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------|
|[3be4547](https://github.com/sagemath/sagetrac-mirror/commit/3be45473000c9141d38710f71ea99373b3c747c0)|`created the class ChartFunction which will replace the CoordFunction. also the singleton to manage symbolic method was created`|



---

archive/issue_comments_419938.json:
```json
{
    "body": "Changing commit from \"3da57124a6e7cd88ba7928c0a5bdf67603f321c6\" to \"3be45473000c9141d38710f71ea99373b3c747c0\"",
    "created_at": "2017-06-01T15:38:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419938",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3da57124a6e7cd88ba7928c0a5bdf67603f321c6" to "3be45473000c9141d38710f71ea99373b3c747c0"



---

archive/issue_comments_419939.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------|\n|[01bc664](https://github.com/sagemath/sagetrac-mirror/commit/01bc6644d4d2647c465920591ff496108f9bcf67)|`Merge branch 'public/22801-manifold-sympy' of git://trac.sagemath.org/sage into public/22801-manifold-sympy`|",
    "created_at": "2017-06-01T16:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419939",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------|
|[01bc664](https://github.com/sagemath/sagetrac-mirror/commit/01bc6644d4d2647c465920591ff496108f9bcf67)|`Merge branch 'public/22801-manifold-sympy' of git://trac.sagemath.org/sage into public/22801-manifold-sympy`|



---

archive/issue_comments_419940.json:
```json
{
    "body": "Changing commit from \"3be45473000c9141d38710f71ea99373b3c747c0\" to \"01bc6644d4d2647c465920591ff496108f9bcf67\"",
    "created_at": "2017-06-01T16:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419940",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3be45473000c9141d38710f71ea99373b3c747c0" to "01bc6644d4d2647c465920591ff496108f9bcf67"



---

archive/issue_comments_419941.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[b07e5fb](https://github.com/sagemath/sagetrac-mirror/commit/b07e5fb080271ce765a1f5d27d6b60089e091989)|`ChartFunction pass almost all tests`|",
    "created_at": "2017-06-08T13:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419941",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[b07e5fb](https://github.com/sagemath/sagetrac-mirror/commit/b07e5fb080271ce765a1f5d27d6b60089e091989)|`ChartFunction pass almost all tests`|



---

archive/issue_comments_419942.json:
```json
{
    "body": "Changing commit from \"01bc6644d4d2647c465920591ff496108f9bcf67\" to \"b07e5fb080271ce765a1f5d27d6b60089e091989\"",
    "created_at": "2017-06-08T13:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419942",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "01bc6644d4d2647c465920591ff496108f9bcf67" to "b07e5fb080271ce765a1f5d27d6b60089e091989"



---

archive/issue_comments_419943.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[9a1a1f2](https://github.com/sagemath/sagetrac-mirror/commit/9a1a1f20b1a764d8e867776ffc392bced24dc79e)|`added all test for sympy in chart_func`|\n|[4998a56](https://github.com/sagemath/sagetrac-mirror/commit/4998a56d67d052edb8466c77796e987500a242e9)|`Changes in chart_func are propagated on all manifolds files.`|\n|[1e2dc01](https://github.com/sagemath/sagetrac-mirror/commit/1e2dc01b1e300fe35e9eb5a96f9fb338558b63e4)|`Propagated changes in manifolds/differentiable and added many tests.`|",
    "created_at": "2017-06-27T14:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419943",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[9a1a1f2](https://github.com/sagemath/sagetrac-mirror/commit/9a1a1f20b1a764d8e867776ffc392bced24dc79e)|`added all test for sympy in chart_func`|
|[4998a56](https://github.com/sagemath/sagetrac-mirror/commit/4998a56d67d052edb8466c77796e987500a242e9)|`Changes in chart_func are propagated on all manifolds files.`|
|[1e2dc01](https://github.com/sagemath/sagetrac-mirror/commit/1e2dc01b1e300fe35e9eb5a96f9fb338558b63e4)|`Propagated changes in manifolds/differentiable and added many tests.`|



---

archive/issue_comments_419944.json:
```json
{
    "body": "Changing commit from \"b07e5fb080271ce765a1f5d27d6b60089e091989\" to \"1e2dc01b1e300fe35e9eb5a96f9fb338558b63e4\"",
    "created_at": "2017-06-27T14:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419944",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b07e5fb080271ce765a1f5d27d6b60089e091989" to "1e2dc01b1e300fe35e9eb5a96f9fb338558b63e4"



---

archive/issue_comments_419945.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,6 @@\n The symbolic method used for manifolds and differentiable manifolds is \"symbolic\", the default in [SageMath](SageMath).\n In this ticket we introduce the use of SymPy as an option when the Chart in the manifold is created.\n+\n+At this point there is a dependence on Sympy ticket:\n+\"sympy to sage conversion : Abstract function.\"\n+https://github.com/sympy/sympy/pull/12826\n``````\n",
    "created_at": "2017-06-28T11:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419945",
    "user": "https://github.com/man74cio"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,6 @@
 The symbolic method used for manifolds and differentiable manifolds is "symbolic", the default in [SageMath](SageMath).
 In this ticket we introduce the use of SymPy as an option when the Chart in the manifold is created.
+
+At this point there is a dependence on Sympy ticket:
+"sympy to sage conversion : Abstract function."
+https://github.com/sympy/sympy/pull/12826
``````




---

archive/issue_comments_419946.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------|\n|[7fcf258](https://github.com/sagemath/sagetrac-mirror/commit/7fcf258a2ca94c6138a721bd816ddb0a98e11cb2)|`passing all test if src/sage/symbolic/expression_conversions.py and changed as in #22802`|",
    "created_at": "2017-07-19T12:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419946",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------|
|[7fcf258](https://github.com/sagemath/sagetrac-mirror/commit/7fcf258a2ca94c6138a721bd816ddb0a98e11cb2)|`passing all test if src/sage/symbolic/expression_conversions.py and changed as in #22802`|



---

archive/issue_comments_419947.json:
```json
{
    "body": "Changing commit from \"1e2dc01b1e300fe35e9eb5a96f9fb338558b63e4\" to \"7fcf258a2ca94c6138a721bd816ddb0a98e11cb2\"",
    "created_at": "2017-07-19T12:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419947",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1e2dc01b1e300fe35e9eb5a96f9fb338558b63e4" to "7fcf258a2ca94c6138a721bd816ddb0a98e11cb2"



---

archive/issue_comments_419948.json:
```json
{
    "body": "Changing commit from \"7fcf258a2ca94c6138a721bd816ddb0a98e11cb2\" to \"66f73dfedce548c8bc61b14ba5f671d5111ac480\"",
    "created_at": "2017-09-08T14:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419948",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7fcf258a2ca94c6138a721bd816ddb0a98e11cb2" to "66f73dfedce548c8bc61b14ba5f671d5111ac480"



---

archive/issue_comments_419949.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                                                                                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------|\n|[068d495](https://github.com/sagemath/sagetrac-mirror/commit/068d495bb14e3702a8bd9d598dc812c4f12542cb)|`Merge branch 'public/22802_sympy_abstact_function' of git://trac.sagemath.org/sage into public/22802_sympy_abstact_function`|\n|[078532f](https://github.com/sagemath/sagetrac-mirror/commit/078532f03b0720617ba5a25b965ec5d6805eb541)|`docstring modifications`|\n|[67f7f46](https://github.com/sagemath/sagetrac-mirror/commit/67f7f4693f271e068e0e073b70909d5013608cf0)|`integrated modifications to composition. But an error remains in french_book.recequadiff tests`|\n|[1b5227d](https://github.com/sagemath/sagetrac-mirror/commit/1b5227d6a85a540663aa138e8304a9055ba110fd)|`Error in french_book.recequadiff tests corrected`|\n|[018d753](https://github.com/sagemath/sagetrac-mirror/commit/018d753eedd53686dfd4f086dfb7c20dda02b7e0)|`Merge branch 'develop' into t/23496/public/23496_patch_sympy_abstact_function`|\n|[94af74b](https://github.com/sagemath/sagetrac-mirror/commit/94af74bb32f09a0b2d08b50e2ef34f22e8212d9f)|`#23496 : (temp) revert order in rsolve recequadiff.tex test`|\n|[d76caea](https://github.com/sagemath/sagetrac-mirror/commit/d76caea0b97af8769edf9a1064db9f7486232b1d)|`#23496 : add message for change in doctest`|\n|[bc21300](https://github.com/sagemath/sagetrac-mirror/commit/bc21300122019b04a30dba02aaa2cd728ff7453f)|`#23496 : fix a _sympy_init_ doctest`|\n|[0be1d90](https://github.com/sagemath/sagetrac-mirror/commit/0be1d909ba8dda133a45e08a4470951e0935092f)|`Merge branch 'public/23496_patch_sympy_abstract_function' into 22802_sympy_abstract_function`|\n|[66f73df](https://github.com/sagemath/sagetrac-mirror/commit/66f73dfedce548c8bc61b14ba5f671d5111ac480)|`Merge branch 'public/22802_sympy_abstract_function' of git://trac.sagemath.org/sage into public/22801-manifold-sympy`|",
    "created_at": "2017-09-08T14:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419949",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                                                                                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------|
|[068d495](https://github.com/sagemath/sagetrac-mirror/commit/068d495bb14e3702a8bd9d598dc812c4f12542cb)|`Merge branch 'public/22802_sympy_abstact_function' of git://trac.sagemath.org/sage into public/22802_sympy_abstact_function`|
|[078532f](https://github.com/sagemath/sagetrac-mirror/commit/078532f03b0720617ba5a25b965ec5d6805eb541)|`docstring modifications`|
|[67f7f46](https://github.com/sagemath/sagetrac-mirror/commit/67f7f4693f271e068e0e073b70909d5013608cf0)|`integrated modifications to composition. But an error remains in french_book.recequadiff tests`|
|[1b5227d](https://github.com/sagemath/sagetrac-mirror/commit/1b5227d6a85a540663aa138e8304a9055ba110fd)|`Error in french_book.recequadiff tests corrected`|
|[018d753](https://github.com/sagemath/sagetrac-mirror/commit/018d753eedd53686dfd4f086dfb7c20dda02b7e0)|`Merge branch 'develop' into t/23496/public/23496_patch_sympy_abstact_function`|
|[94af74b](https://github.com/sagemath/sagetrac-mirror/commit/94af74bb32f09a0b2d08b50e2ef34f22e8212d9f)|`#23496 : (temp) revert order in rsolve recequadiff.tex test`|
|[d76caea](https://github.com/sagemath/sagetrac-mirror/commit/d76caea0b97af8769edf9a1064db9f7486232b1d)|`#23496 : add message for change in doctest`|
|[bc21300](https://github.com/sagemath/sagetrac-mirror/commit/bc21300122019b04a30dba02aaa2cd728ff7453f)|`#23496 : fix a _sympy_init_ doctest`|
|[0be1d90](https://github.com/sagemath/sagetrac-mirror/commit/0be1d909ba8dda133a45e08a4470951e0935092f)|`Merge branch 'public/23496_patch_sympy_abstract_function' into 22802_sympy_abstract_function`|
|[66f73df](https://github.com/sagemath/sagetrac-mirror/commit/66f73dfedce548c8bc61b14ba5f671d5111ac480)|`Merge branch 'public/22802_sympy_abstract_function' of git://trac.sagemath.org/sage into public/22801-manifold-sympy`|



---

archive/issue_comments_419950.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[fdb396b](https://github.com/sagemath/sagetrac-mirror/commit/fdb396baa4a2c5027c7a890b22de675949512669)|`Minor changes in chart_func`|",
    "created_at": "2017-09-13T09:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419950",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[fdb396b](https://github.com/sagemath/sagetrac-mirror/commit/fdb396baa4a2c5027c7a890b22de675949512669)|`Minor changes in chart_func`|



---

archive/issue_comments_419951.json:
```json
{
    "body": "Changing commit from \"66f73dfedce548c8bc61b14ba5f671d5111ac480\" to \"fdb396baa4a2c5027c7a890b22de675949512669\"",
    "created_at": "2017-09-13T09:28:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419951",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "66f73dfedce548c8bc61b14ba5f671d5111ac480" to "fdb396baa4a2c5027c7a890b22de675949512669"



---

archive/issue_comments_419952.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[8f20b54](https://github.com/sagemath/sagetrac-mirror/commit/8f20b54684118bf5c274c540893d397e45d3171f)|`Merge branch 'develop' into public/22801-manifold-sympy`|",
    "created_at": "2017-09-13T12:08:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419952",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[8f20b54](https://github.com/sagemath/sagetrac-mirror/commit/8f20b54684118bf5c274c540893d397e45d3171f)|`Merge branch 'develop' into public/22801-manifold-sympy`|



---

archive/issue_comments_419953.json:
```json
{
    "body": "Changing commit from \"fdb396baa4a2c5027c7a890b22de675949512669\" to \"8f20b54684118bf5c274c540893d397e45d3171f\"",
    "created_at": "2017-09-13T12:08:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419953",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fdb396baa4a2c5027c7a890b22de675949512669" to "8f20b54684118bf5c274c540893d397e45d3171f"



---

archive/issue_comments_419954.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-09-13T12:16:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419954",
    "user": "https://github.com/man74cio"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_419955.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Eric Gourgoulhon\"",
    "created_at": "2017-09-13T12:16:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419955",
    "user": "https://github.com/man74cio"
}
```

Changing reviewer from "" to "Eric Gourgoulhon"



---

archive/issue_comments_419956.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------|\n|[102a3e1](https://github.com/sagemath/sagetrac-mirror/commit/102a3e124d9c5e6a766cae6352ab1956191dc2c9)|`error in docstring`|",
    "created_at": "2017-09-14T11:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419956",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
|[102a3e1](https://github.com/sagemath/sagetrac-mirror/commit/102a3e124d9c5e6a766cae6352ab1956191dc2c9)|`error in docstring`|



---

archive/issue_comments_419957.json:
```json
{
    "body": "Changing commit from \"8f20b54684118bf5c274c540893d397e45d3171f\" to \"102a3e124d9c5e6a766cae6352ab1956191dc2c9\"",
    "created_at": "2017-09-14T11:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419957",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8f20b54684118bf5c274c540893d397e45d3171f" to "102a3e124d9c5e6a766cae6352ab1956191dc2c9"



---

archive/issue_comments_419958.json:
```json
{
    "body": "<a id='comment:17'></a>\nThere are a few things that need fixing.\n\n- Not all methods have docstrings/tests\n- There are a number of tests where the line before is informational, but it needs a blankline, e.g.:\n  {{{#!diff\n`@``@` -1641,6 +1641,19 `@``@` class TopologicalManifold(ManifoldSubset):\n             F: U --> R\n                (x, y, z) |--> cos(y)*sin(x) + z\n \n+\n+        Same tests with ``sympy``::\n+            sage: c_xyz.set_calculus_method('sympy')\n+            sage: f = U.scalar_field(sin(x)*cos(y) + z, name='F'); f\n+            Scalar field F on the Open subset U of the 3-dimensional topological manifold M\n+            sage: f.display()\n+            F: U --> R\n+               (x, y, z) |--> cos(y)*sin(x) + z\n+\n+            sage: type(f.coord_function(c_xyz).expr())\n+               <class 'sympy.core.add.Add'>\n+\n+\n}}}\n- IMO, you are too liberal with your blanklines spacing things out that makes the code a little uneven to read.",
    "created_at": "2017-09-15T20:48:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419958",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>
There are a few things that need fixing.

- Not all methods have docstrings/tests
- There are a number of tests where the line before is informational, but it needs a blankline, e.g.:
  {{{#!diff
`@``@` -1641,6 +1641,19 `@``@` class TopologicalManifold(ManifoldSubset):
             F: U --> R
                (x, y, z) |--> cos(y)*sin(x) + z
 
+
+        Same tests with ``sympy``::
+            sage: c_xyz.set_calculus_method('sympy')
+            sage: f = U.scalar_field(sin(x)*cos(y) + z, name='F'); f
+            Scalar field F on the Open subset U of the 3-dimensional topological manifold M
+            sage: f.display()
+            F: U --> R
+               (x, y, z) |--> cos(y)*sin(x) + z
+
+            sage: type(f.coord_function(c_xyz).expr())
+               <class 'sympy.core.add.Add'>
+
+
}}}
- IMO, you are too liberal with your blanklines spacing things out that makes the code a little uneven to read.



---

archive/issue_comments_419959.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-09-15T20:48:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419959",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_419960.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[4800d97](https://github.com/sagemath/sagetrac-mirror/commit/4800d97f9dca68300c1799541b4b208a5b43d023)|`Added better (I hope) docstring`|",
    "created_at": "2017-09-21T13:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419960",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[4800d97](https://github.com/sagemath/sagetrac-mirror/commit/4800d97f9dca68300c1799541b4b208a5b43d023)|`Added better (I hope) docstring`|



---

archive/issue_comments_419961.json:
```json
{
    "body": "Changing commit from \"102a3e124d9c5e6a766cae6352ab1956191dc2c9\" to \"4800d97f9dca68300c1799541b4b208a5b43d023\"",
    "created_at": "2017-09-21T13:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419961",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "102a3e124d9c5e6a766cae6352ab1956191dc2c9" to "4800d97f9dca68300c1799541b4b208a5b43d023"



---

archive/issue_comments_419962.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-09-21T13:40:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419962",
    "user": "https://github.com/man74cio"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_419963.json:
```json
{
    "body": "<a id='comment:19'></a>\nI hope that now the docstring is better (and less liberal)",
    "created_at": "2017-09-21T13:40:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419963",
    "user": "https://github.com/man74cio"
}
```

<a id='comment:19'></a>
I hope that now the docstring is better (and less liberal)



---

archive/issue_comments_419964.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [mmancini](#comment%3A19):\n> I hope that now the docstring is better (and less liberal) \n\n\nThanks a lot for these improvements! I'll have a look at the code next week. Just a quick comment: as revealed by the patchbot, there are still some coverage issue, as well as a problem with `sage/manifolds/chart_func.py` when building the documentation. There are also some doctest failures.",
    "created_at": "2017-09-21T19:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419964",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:20'></a>
Replying to [mmancini](#comment%3A19):
> I hope that now the docstring is better (and less liberal) 


Thanks a lot for these improvements! I'll have a look at the code next week. Just a quick comment: as revealed by the patchbot, there are still some coverage issue, as well as a problem with `sage/manifolds/chart_func.py` when building the documentation. There are also some doctest failures.



---

archive/issue_comments_419965.json:
```json
{
    "body": "Changing commit from \"4800d97f9dca68300c1799541b4b208a5b43d023\" to \"ae47c5d7311287403f0ba44e943cc322c33da315\"",
    "created_at": "2017-09-22T14:36:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419965",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4800d97f9dca68300c1799541b4b208a5b43d023" to "ae47c5d7311287403f0ba44e943cc322c33da315"



---

archive/issue_comments_419966.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[ae47c5d](https://github.com/sagemath/sagetrac-mirror/commit/ae47c5d7311287403f0ba44e943cc322c33da315)|`Again changes in docstring`|",
    "created_at": "2017-09-22T14:36:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419966",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[ae47c5d](https://github.com/sagemath/sagetrac-mirror/commit/ae47c5d7311287403f0ba44e943cc322c33da315)|`Again changes in docstring`|



---

archive/issue_comments_419967.json:
```json
{
    "body": "<a id='comment:22'></a>\nAccording to the patchbots, there are still failing doctests in `tensorfield.py` and the doc does not build.",
    "created_at": "2017-10-02T09:17:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419967",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:22'></a>
According to the patchbots, there are still failing doctests in `tensorfield.py` and the doc does not build.



---

archive/issue_comments_419968.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-02T09:17:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419968",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_419969.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[611f5de](https://github.com/sagemath/sagetrac-mirror/commit/611f5de331fef531e0ac7effd6a88fa70f743103)|`docstring: again problems with sympy`|",
    "created_at": "2017-10-02T19:52:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419969",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[611f5de](https://github.com/sagemath/sagetrac-mirror/commit/611f5de331fef531e0ac7effd6a88fa70f743103)|`docstring: again problems with sympy`|



---

archive/issue_comments_419970.json:
```json
{
    "body": "Changing commit from \"ae47c5d7311287403f0ba44e943cc322c33da315\" to \"611f5de331fef531e0ac7effd6a88fa70f743103\"",
    "created_at": "2017-10-02T19:52:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419970",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ae47c5d7311287403f0ba44e943cc322c33da315" to "611f5de331fef531e0ac7effd6a88fa70f743103"



---

archive/issue_comments_419971.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-02T19:54:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419971",
    "user": "https://github.com/man74cio"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_419972.json:
```json
{
    "body": "<a id='comment:25'></a>\nThe last commit fixes the doc build, but not the doctest failures in `tensorfield.py`.",
    "created_at": "2017-10-03T16:20:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419972",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:25'></a>
The last commit fixes the doc build, but not the doctest failures in `tensorfield.py`.



---

archive/issue_comments_419973.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-03T16:20:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419973",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_419974.json:
```json
{
    "body": "<a id='comment:26'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|\n|[dd82a15](https://github.com/sagemath/sagetrac-mirror/commit/dd82a154e88edc0be9246337c7146e7088ab8b77)|`chart_func : changing again display depending on calculus method`|",
    "created_at": "2017-10-04T14:19:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419974",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|
|[dd82a15](https://github.com/sagemath/sagetrac-mirror/commit/dd82a154e88edc0be9246337c7146e7088ab8b77)|`chart_func : changing again display depending on calculus method`|



---

archive/issue_comments_419975.json:
```json
{
    "body": "Changing commit from \"611f5de331fef531e0ac7effd6a88fa70f743103\" to \"dd82a154e88edc0be9246337c7146e7088ab8b77\"",
    "created_at": "2017-10-04T14:19:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419975",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "611f5de331fef531e0ac7effd6a88fa70f743103" to "dd82a154e88edc0be9246337c7146e7088ab8b77"



---

archive/issue_comments_419976.json:
```json
{
    "body": "Changing commit from \"dd82a154e88edc0be9246337c7146e7088ab8b77\" to \"c1d9e4fec66987ea82a7b22d298839979ed15ac0\"",
    "created_at": "2017-10-05T06:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419976",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "dd82a154e88edc0be9246337c7146e7088ab8b77" to "c1d9e4fec66987ea82a7b22d298839979ed15ac0"



---

archive/issue_comments_419977.json:
```json
{
    "body": "<a id='comment:27'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|\n|[c1d9e4f](https://github.com/sagemath/sagetrac-mirror/commit/c1d9e4fec66987ea82a7b22d298839979ed15ac0)|`chart_func : changing again display depending on calculus method. All test passed`|",
    "created_at": "2017-10-05T06:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419977",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|
|[c1d9e4f](https://github.com/sagemath/sagetrac-mirror/commit/c1d9e4fec66987ea82a7b22d298839979ed15ac0)|`chart_func : changing again display depending on calculus method. All test passed`|



---

archive/issue_comments_419978.json:
```json
{
    "body": "<a id='comment:28'></a>\nDisplay for ``ChartFunction`` has been changed: now the result is different for  ``Sympy`` and ``SR``. All test results have been modified.",
    "created_at": "2017-10-05T07:02:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419978",
    "user": "https://github.com/man74cio"
}
```

<a id='comment:28'></a>
Display for ``ChartFunction`` has been changed: now the result is different for  ``Sympy`` and ``SR``. All test results have been modified.



---

archive/issue_comments_419979.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-05T07:02:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419979",
    "user": "https://github.com/man74cio"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_419980.json:
```json
{
    "body": "<a id='comment:29'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|\n|[fb0fb7e](https://github.com/sagemath/sagetrac-mirror/commit/fb0fb7e66395268a1c3e7d9abbf8b5613bf813bf)|`SymPy on manifolds: first reviewer tweaks (more to come)`|",
    "created_at": "2017-10-06T16:29:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419980",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|
|[fb0fb7e](https://github.com/sagemath/sagetrac-mirror/commit/fb0fb7e66395268a1c3e7d9abbf8b5613bf813bf)|`SymPy on manifolds: first reviewer tweaks (more to come)`|



---

archive/issue_comments_419981.json:
```json
{
    "body": "Changing commit from \"c1d9e4fec66987ea82a7b22d298839979ed15ac0\" to \"fb0fb7e66395268a1c3e7d9abbf8b5613bf813bf\"",
    "created_at": "2017-10-06T16:29:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419981",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c1d9e4fec66987ea82a7b22d298839979ed15ac0" to "fb0fb7e66395268a1c3e7d9abbf8b5613bf813bf"



---

archive/issue_comments_419982.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [git](#comment%3A29):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                                                          |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|\n> |[fb0fb7e](https://github.com/sagemath/sagetrac-mirror/commit/fb0fb7e66395268a1c3e7d9abbf8b5613bf813bf)|`SymPy on manifolds: first reviewer tweaks (more to come)`|\n\n\nI see in the difference the following one:\n\n```\n@@ -231,7 +225,7 @@ class DiffForm(TensorField):\n         sage: a.display(eU)\n         a = x*(y**2 + 2) dx/\\dy\n         sage: a.display(eV)\n-        a = (-u**3/16 + u**2*v/16 + u*v**2/16 - u/2 - v**3/16 - v/2) du/\\dv\n+        a = (-u**3/16 + u*v**2/16 - u/2 - v**3/16 + v*(u**2 - 8)/16) du/\\dv\n```\n\nI found is surprising : do you know where this difference comes from?",
    "created_at": "2017-10-06T20:38:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419982",
    "user": "https://github.com/man74cio"
}
```

<a id='comment:30'></a>
Replying to [git](#comment%3A29):
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                                                          |
> |-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------|
> |[fb0fb7e](https://github.com/sagemath/sagetrac-mirror/commit/fb0fb7e66395268a1c3e7d9abbf8b5613bf813bf)|`SymPy on manifolds: first reviewer tweaks (more to come)`|


I see in the difference the following one:

```
@@ -231,7 +225,7 @@ class DiffForm(TensorField):
         sage: a.display(eU)
         a = x*(y**2 + 2) dx/\dy
         sage: a.display(eV)
-        a = (-u**3/16 + u**2*v/16 + u*v**2/16 - u/2 - v**3/16 - v/2) du/\dv
+        a = (-u**3/16 + u*v**2/16 - u/2 - v**3/16 + v*(u**2 - 8)/16) du/\dv
```

I found is surprising : do you know where this difference comes from?



---

archive/issue_comments_419983.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [mmancini](#comment%3A30):\n> \n> I see in the difference the following one:\n> \n> \n> ```\n> @@ -231,7 +225,7 @@ class DiffForm(TensorField):\n>          sage: a.display(eU)\n>          a = x*(y**2 + 2) dx/\\dy\n>          sage: a.display(eV)\n> -        a = (-u**3/16 + u**2*v/16 + u*v**2/16 - u/2 - v**3/16 - v/2) du/\\dv\n> +        a = (-u**3/16 + u*v**2/16 - u/2 - v**3/16 + v*(u**2 - 8)/16) du/\\dv\n> ```\n> \n> I found is surprising : do you know where this difference comes from? \n\nIt is due to a different setting: in the previous version, the transition map `xy_to_uv` was redefined, thereby causing a different handling of computations between `SR` and `sympy`. Note that the two expressions of `a` are mathematically equivalent, which is satisfactory.",
    "created_at": "2017-10-07T12:12:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419983",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:31'></a>
Replying to [mmancini](#comment%3A30):
> 
> I see in the difference the following one:
> 
> 
> ```
> @@ -231,7 +225,7 @@ class DiffForm(TensorField):
>          sage: a.display(eU)
>          a = x*(y**2 + 2) dx/\dy
>          sage: a.display(eV)
> -        a = (-u**3/16 + u**2*v/16 + u*v**2/16 - u/2 - v**3/16 - v/2) du/\dv
> +        a = (-u**3/16 + u*v**2/16 - u/2 - v**3/16 + v*(u**2 - 8)/16) du/\dv
> ```
> 
> I found is surprising : do you know where this difference comes from? 

It is due to a different setting: in the previous version, the transition map `xy_to_uv` was redefined, thereby causing a different handling of computations between `SR` and `sympy`. Note that the two expressions of `a` are mathematically equivalent, which is satisfactory.



---

archive/issue_comments_419984.json:
```json
{
    "body": "Changing commit from \"fb0fb7e66395268a1c3e7d9abbf8b5613bf813bf\" to \"f985a2f3fed328b8b008f53afb080691d32c64b7\"",
    "created_at": "2017-10-08T21:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419984",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fb0fb7e66395268a1c3e7d9abbf8b5613bf813bf" to "f985a2f3fed328b8b008f53afb080691d32c64b7"



---

archive/issue_comments_419985.json:
```json
{
    "body": "<a id='comment:32'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|\n|[f985a2f](https://github.com/sagemath/sagetrac-mirror/commit/f985a2f3fed328b8b008f53afb080691d32c64b7)|`SymPy on manifolds: second reviewer tweaks (a slight more to come)`|",
    "created_at": "2017-10-08T21:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419985",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|
|[f985a2f](https://github.com/sagemath/sagetrac-mirror/commit/f985a2f3fed328b8b008f53afb080691d32c64b7)|`SymPy on manifolds: second reviewer tweaks (a slight more to come)`|



---

archive/issue_comments_419986.json:
```json
{
    "body": "<a id='comment:33'></a>\nThe above commit contains some polishing of the code (mostly layout) and improvements in the documentation. In particular, it restores the section the rubric *Differences between chart fucntions and callable symbolic expressions* of the previous class `CoordFunctionSymb`. \n\nTwo questions: \n\n- Why is there an argument `expression` in method `ChartFunction._simplify`? I mean, if `expression` is not `self.expr(method=calc_method)`, why not calling directly the `simplify` method of `CalculusMethod` on it?\n\n- In the docstring of `ChartFunctionRing._coerce_map_from_`, there is a TODO section with *There is a problem with coercion with rationals*. What is that?",
    "created_at": "2017-10-08T21:39:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419986",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:33'></a>
The above commit contains some polishing of the code (mostly layout) and improvements in the documentation. In particular, it restores the section the rubric *Differences between chart fucntions and callable symbolic expressions* of the previous class `CoordFunctionSymb`. 

Two questions: 

- Why is there an argument `expression` in method `ChartFunction._simplify`? I mean, if `expression` is not `self.expr(method=calc_method)`, why not calling directly the `simplify` method of `CalculusMethod` on it?

- In the docstring of `ChartFunctionRing._coerce_map_from_`, there is a TODO section with *There is a problem with coercion with rationals*. What is that?



---

archive/issue_comments_419987.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [egourgoulhon](#comment%3A33):\n> The above commit contains some polishing of the code (mostly layout) and improvements in the documentation. In particular, it restores the section the rubric *Differences between chart fucntions and callable symbolic expressions* of the previous class `CoordFunctionSymb`. \n\n\nThanks\n\n> \n> Two questions: \n> \n> - Why is there an argument `expression` in method `ChartFunction._simplify`? I mean, if `expression` is not `self.expr(method=calc_method)`, why not calling directly the `simplify` method of `CalculusMethod` on it?\n\n\nAt a particular moment during development I introduced it but I don't remember its functionality. As it is used only internally to `ChartFunction` I will remove this argument. \n \n> - In the docstring of `ChartFunctionRing._coerce_map_from_`, there is a TODO section with *There is a problem with coercion with rationals*. What is that?\n \nLook at this example:\n\n```\nM = Manifold(2, 'M', structure='topological')\nX.<x,y> = M.chart()\nf = X.function(x^2+3*y+1)\ng = f+1/2\n\nTypeError                                 Traceback (most recent call last)\n<ipython-input-5-83503284e242> in <module>()\n----> 1 g=f+Integer(1)/Integer(2)\n\n/home/mmancini/Sage-last/sage/src/sage/structure/element.pyx in sage.structure.element.Element.__add__ (build/cythonized/sage/structure/element.c:10823)()\n   1240         # Left and right are Sage elements => use coercion model\n   1241         if BOTH_ARE_ELEMENT(cl):\n-> 1242             return coercion_model.bin_op(left, right, add)\n   1243 \n   1244         try:\n\n...\n...\n...\n```",
    "created_at": "2017-10-09T08:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419987",
    "user": "https://github.com/man74cio"
}
```

<a id='comment:34'></a>
Replying to [egourgoulhon](#comment%3A33):
> The above commit contains some polishing of the code (mostly layout) and improvements in the documentation. In particular, it restores the section the rubric *Differences between chart fucntions and callable symbolic expressions* of the previous class `CoordFunctionSymb`. 


Thanks

> 
> Two questions: 
> 
> - Why is there an argument `expression` in method `ChartFunction._simplify`? I mean, if `expression` is not `self.expr(method=calc_method)`, why not calling directly the `simplify` method of `CalculusMethod` on it?


At a particular moment during development I introduced it but I don't remember its functionality. As it is used only internally to `ChartFunction` I will remove this argument. 
 
> - In the docstring of `ChartFunctionRing._coerce_map_from_`, there is a TODO section with *There is a problem with coercion with rationals*. What is that?
 
Look at this example:

```
M = Manifold(2, 'M', structure='topological')
X.<x,y> = M.chart()
f = X.function(x^2+3*y+1)
g = f+1/2

TypeError                                 Traceback (most recent call last)
<ipython-input-5-83503284e242> in <module>()
----> 1 g=f+Integer(1)/Integer(2)

/home/mmancini/Sage-last/sage/src/sage/structure/element.pyx in sage.structure.element.Element.__add__ (build/cythonized/sage/structure/element.c:10823)()
   1240         # Left and right are Sage elements => use coercion model
   1241         if BOTH_ARE_ELEMENT(cl):
-> 1242             return coercion_model.bin_op(left, right, add)
   1243 
   1244         try:

...
...
...
```



---

archive/issue_comments_419988.json:
```json
{
    "body": "<a id='comment:35'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[c8b3bdc](https://github.com/sagemath/sagetrac-mirror/commit/c8b3bdcd62d9a864ecf3236524c8b22902cc1d3f)|`ChartFunction: modification of _symplify`|",
    "created_at": "2017-10-09T09:22:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419988",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[c8b3bdc](https://github.com/sagemath/sagetrac-mirror/commit/c8b3bdcd62d9a864ecf3236524c8b22902cc1d3f)|`ChartFunction: modification of _symplify`|



---

archive/issue_comments_419989.json:
```json
{
    "body": "Changing commit from \"f985a2f3fed328b8b008f53afb080691d32c64b7\" to \"c8b3bdcd62d9a864ecf3236524c8b22902cc1d3f\"",
    "created_at": "2017-10-09T09:22:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419989",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f985a2f3fed328b8b008f53afb080691d32c64b7" to "c8b3bdcd62d9a864ecf3236524c8b22902cc1d3f"



---

archive/issue_comments_419990.json:
```json
{
    "body": "Changing commit from \"c8b3bdcd62d9a864ecf3236524c8b22902cc1d3f\" to \"e1052fab39827595b670bb4d4b5651102781fb3b\"",
    "created_at": "2017-10-09T15:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419990",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c8b3bdcd62d9a864ecf3236524c8b22902cc1d3f" to "e1052fab39827595b670bb4d4b5651102781fb3b"



---

archive/issue_comments_419991.json:
```json
{
    "body": "<a id='comment:36'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|\n|[e1052fa](https://github.com/sagemath/sagetrac-mirror/commit/e1052fab39827595b670bb4d4b5651102781fb3b)|`Use of SymPy subs when relevant in ChartFunction.__call__`|",
    "created_at": "2017-10-09T15:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419991",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------|
|[e1052fa](https://github.com/sagemath/sagetrac-mirror/commit/e1052fab39827595b670bb4d4b5651102781fb3b)|`Use of SymPy subs when relevant in ChartFunction.__call__`|



---

archive/issue_comments_419992.json:
```json
{
    "body": "<a id='comment:37'></a>\nThe above commit\n\n- makes `_simplify` a mere shortcut to `CalculusMethod.simplify` in `ChartFunction`\n- introduces the data member `._chart` in class `ChartFunction`\n- uses SymPy substitutions (instead of forcing a conversion to `SR`) in `ChartFunction.__call__` when dealing with SymPy expressions\n- makes sure that `simplify_chain_real_sympy` returns a SymPy object\n- fixes the issue of coercion of `QQ` to `ChartFunctionRing`",
    "created_at": "2017-10-09T19:15:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419992",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:37'></a>
The above commit

- makes `_simplify` a mere shortcut to `CalculusMethod.simplify` in `ChartFunction`
- introduces the data member `._chart` in class `ChartFunction`
- uses SymPy substitutions (instead of forcing a conversion to `SR`) in `ChartFunction.__call__` when dealing with SymPy expressions
- makes sure that `simplify_chain_real_sympy` returns a SymPy object
- fixes the issue of coercion of `QQ` to `ChartFunctionRing`



---

archive/issue_comments_419993.json:
```json
{
    "body": "Changing commit from \"e1052fab39827595b670bb4d4b5651102781fb3b\" to \"124c582421b49afc38cdd565d0057031c347b044\"",
    "created_at": "2017-10-09T21:23:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419993",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e1052fab39827595b670bb4d4b5651102781fb3b" to "124c582421b49afc38cdd565d0057031c347b044"



---

archive/issue_comments_419994.json:
```json
{
    "body": "<a id='comment:38'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|\n|[124c582](https://github.com/sagemath/sagetrac-mirror/commit/124c582421b49afc38cdd565d0057031c347b044)|`Improve SymPy documentation in sage/manifolds/scalarfield.py`|",
    "created_at": "2017-10-09T21:23:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419994",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
|[124c582](https://github.com/sagemath/sagetrac-mirror/commit/124c582421b49afc38cdd565d0057031c347b044)|`Improve SymPy documentation in sage/manifolds/scalarfield.py`|



---

archive/issue_comments_419995.json:
```json
{
    "body": "Changing commit from \"124c582421b49afc38cdd565d0057031c347b044\" to \"eea0070a852b76cee592047307bb273172e2dc71\"",
    "created_at": "2017-10-10T13:36:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419995",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "124c582421b49afc38cdd565d0057031c347b044" to "eea0070a852b76cee592047307bb273172e2dc71"



---

archive/issue_comments_419996.json:
```json
{
    "body": "<a id='comment:39'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|\n|[eea0070](https://github.com/sagemath/sagetrac-mirror/commit/eea0070a852b76cee592047307bb273172e2dc71)|`Change in SymPy conversion function of CalculusMethod + use of SymPy variable in ChartFunction.diff when relevant`|",
    "created_at": "2017-10-10T13:36:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419996",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|
|[eea0070](https://github.com/sagemath/sagetrac-mirror/commit/eea0070a852b76cee592047307bb273172e2dc71)|`Change in SymPy conversion function of CalculusMethod + use of SymPy variable in ChartFunction.diff when relevant`|



---

archive/issue_comments_419997.json:
```json
{
    "body": "<a id='comment:40'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[07bef4d](https://github.com/sagemath/sagetrac-mirror/commit/07bef4df2312f4413a05e2808d3ddf33b80e1195)|`Changing docstring for test results in Sympy`|",
    "created_at": "2017-10-11T14:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419997",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[07bef4d](https://github.com/sagemath/sagetrac-mirror/commit/07bef4df2312f4413a05e2808d3ddf33b80e1195)|`Changing docstring for test results in Sympy`|



---

archive/issue_comments_419998.json:
```json
{
    "body": "Changing commit from \"eea0070a852b76cee592047307bb273172e2dc71\" to \"07bef4df2312f4413a05e2808d3ddf33b80e1195\"",
    "created_at": "2017-10-11T14:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419998",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "eea0070a852b76cee592047307bb273172e2dc71" to "07bef4df2312f4413a05e2808d3ddf33b80e1195"



---

archive/issue_comments_419999.json:
```json
{
    "body": "<a id='comment:41'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[e5ea40e](https://github.com/sagemath/sagetrac-mirror/commit/e5ea40e52531f2b1d063df2000b786ebc005dde3)|`- Small error in inverse calculation resolved`|",
    "created_at": "2017-10-16T09:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-419999",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[e5ea40e](https://github.com/sagemath/sagetrac-mirror/commit/e5ea40e52531f2b1d063df2000b786ebc005dde3)|`- Small error in inverse calculation resolved`|



---

archive/issue_comments_420000.json:
```json
{
    "body": "Changing commit from \"07bef4df2312f4413a05e2808d3ddf33b80e1195\" to \"e5ea40e52531f2b1d063df2000b786ebc005dde3\"",
    "created_at": "2017-10-16T09:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420000",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "07bef4df2312f4413a05e2808d3ddf33b80e1195" to "e5ea40e52531f2b1d063df2000b786ebc005dde3"



---

archive/issue_comments_420001.json:
```json
{
    "body": "Changing commit from \"e5ea40e52531f2b1d063df2000b786ebc005dde3\" to \"80f67852937d2a2ebffaaf7d0b8318dd9e5847b9\"",
    "created_at": "2017-10-17T15:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420001",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e5ea40e52531f2b1d063df2000b786ebc005dde3" to "80f67852937d2a2ebffaaf7d0b8318dd9e5847b9"



---

archive/issue_comments_420002.json:
```json
{
    "body": "<a id='comment:42'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[9462954](https://github.com/sagemath/sagetrac-mirror/commit/946295436e135f8ed5c36ea177e97c9d57f4ef98)|`23990: Convert symbolic relations to SymPy`|\n|[07f4744](https://github.com/sagemath/sagetrac-mirror/commit/07f474458ffef1fc032721ae7e34720820bed1a9)|`23990: handle unequality`|\n|[0ed659f](https://github.com/sagemath/sagetrac-mirror/commit/0ed659fbff057912ecb93a97cec6b75f4cecd63a)|`23990: do not evaluate`|\n|[5f023ea](https://github.com/sagemath/sagetrac-mirror/commit/5f023eafe9cfb18a38d372fcec486c2c65d15ccc)|`23990: convert relations from SymPy to Sage, with test`|\n|[0f596bb](https://github.com/sagemath/sagetrac-mirror/commit/0f596bbdcb041c95cd846c02fea49bb38b467816)|`23990: fix patch`|\n|[479e206](https://github.com/sagemath/sagetrac-mirror/commit/479e206216ca370a9986d5e9098a912cb7656a9f)|`23990: sympy patchlevel bump`|\n|[3e362ee](https://github.com/sagemath/sagetrac-mirror/commit/3e362ee1b623af7aa878676b20c2609c434be321)|`24006: SymPy --> Sage conversion completely inside Sage`|\n|[8dd5f88](https://github.com/sagemath/sagetrac-mirror/commit/8dd5f88303b980b6796e07e2a7958030263cbd74)|`24006: add missing file, fixes`|\n|[e0310dd](https://github.com/sagemath/sagetrac-mirror/commit/e0310ddb4ea6740140706362a31ce0ba1fd436c8)|`Merge branch 'u/rws/24006' of git://trac.sagemath.org/sage into public/22801-manifold-sympy`|\n|[80f6785](https://github.com/sagemath/sagetrac-mirror/commit/80f67852937d2a2ebffaaf7d0b8318dd9e5847b9)|`Resolved the problem of simplification in S2 Chart.set_inverse function`|",
    "created_at": "2017-10-17T15:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420002",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[9462954](https://github.com/sagemath/sagetrac-mirror/commit/946295436e135f8ed5c36ea177e97c9d57f4ef98)|`23990: Convert symbolic relations to SymPy`|
|[07f4744](https://github.com/sagemath/sagetrac-mirror/commit/07f474458ffef1fc032721ae7e34720820bed1a9)|`23990: handle unequality`|
|[0ed659f](https://github.com/sagemath/sagetrac-mirror/commit/0ed659fbff057912ecb93a97cec6b75f4cecd63a)|`23990: do not evaluate`|
|[5f023ea](https://github.com/sagemath/sagetrac-mirror/commit/5f023eafe9cfb18a38d372fcec486c2c65d15ccc)|`23990: convert relations from SymPy to Sage, with test`|
|[0f596bb](https://github.com/sagemath/sagetrac-mirror/commit/0f596bbdcb041c95cd846c02fea49bb38b467816)|`23990: fix patch`|
|[479e206](https://github.com/sagemath/sagetrac-mirror/commit/479e206216ca370a9986d5e9098a912cb7656a9f)|`23990: sympy patchlevel bump`|
|[3e362ee](https://github.com/sagemath/sagetrac-mirror/commit/3e362ee1b623af7aa878676b20c2609c434be321)|`24006: SymPy --> Sage conversion completely inside Sage`|
|[8dd5f88](https://github.com/sagemath/sagetrac-mirror/commit/8dd5f88303b980b6796e07e2a7958030263cbd74)|`24006: add missing file, fixes`|
|[e0310dd](https://github.com/sagemath/sagetrac-mirror/commit/e0310ddb4ea6740140706362a31ce0ba1fd436c8)|`Merge branch 'u/rws/24006' of git://trac.sagemath.org/sage into public/22801-manifold-sympy`|
|[80f6785](https://github.com/sagemath/sagetrac-mirror/commit/80f67852937d2a2ebffaaf7d0b8318dd9e5847b9)|`Resolved the problem of simplification in S2 Chart.set_inverse function`|



---

archive/issue_comments_420003.json:
```json
{
    "body": "Changing dependencies from \"#22802\" to \"#22802 #24006\"",
    "created_at": "2017-10-17T15:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420003",
    "user": "https://github.com/man74cio"
}
```

Changing dependencies from "#22802" to "#22802 #24006"



---

archive/issue_comments_420004.json:
```json
{
    "body": "<a id='comment:44'></a>\nBetter base everything on #20204 as it contains all SymPy Interface improvements, ie abstract functions.",
    "created_at": "2017-10-17T16:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420004",
    "user": "https://github.com/rwst"
}
```

<a id='comment:44'></a>
Better base everything on #20204 as it contains all SymPy Interface improvements, ie abstract functions.



---

archive/issue_comments_420005.json:
```json
{
    "body": "Changing commit from \"80f67852937d2a2ebffaaf7d0b8318dd9e5847b9\" to \"952970d2b293ad801ced530645a77cea7dc6d9bc\"",
    "created_at": "2017-10-17T17:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420005",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "80f67852937d2a2ebffaaf7d0b8318dd9e5847b9" to "952970d2b293ad801ced530645a77cea7dc6d9bc"



---

archive/issue_comments_420006.json:
```json
{
    "body": "<a id='comment:45'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[a68d57f](https://github.com/sagemath/sagetrac-mirror/commit/a68d57ffcd1199f336184fca569b9deff0d5177b)|`23923: Interface cases function with SymPy's piecewise`|\n|[b80d98c](https://github.com/sagemath/sagetrac-mirror/commit/b80d98c2415f106f9f90270f1b0a7f9f240b76f4)|`23923: fix typo`|\n|[2afa0ee](https://github.com/sagemath/sagetrac-mirror/commit/2afa0ee105e99e3b7c8185c8d7b4721a9b4d7c86)|`22566: interface SymPy's ceiling()`|\n|[9494f6c](https://github.com/sagemath/sagetrac-mirror/commit/9494f6cc69630d3af9567c1179e56a0a62af736d)|`22566: add test`|\n|[8215d37](https://github.com/sagemath/sagetrac-mirror/commit/8215d37edd3eabc1eb881800e44210f2f77d64bc)|`Merge branch 'develop' into tmp05`|\n|[7899ea9](https://github.com/sagemath/sagetrac-mirror/commit/7899ea992d19f75e38e7db5526bb5c311d09d79a)|`20204: convert SymPy abstract functions`|\n|[b261ec3](https://github.com/sagemath/sagetrac-mirror/commit/b261ec3e671179d04d1922d15d9116e4f6e1d47f)|`23923: fix doctest`|\n|[5010acf](https://github.com/sagemath/sagetrac-mirror/commit/5010acf00b2811420ba1a725deb2351f77eb0c01)|`Merge branch 'u/rws/23923' of git://trac.sagemath.org/sage into t/20204/20204`|\n|[952970d](https://github.com/sagemath/sagetrac-mirror/commit/952970d2b293ad801ced530645a77cea7dc6d9bc)|`Merge branch 'u/rws/20204' of git://trac.sagemath.org/sage into public/22801-manifold-sympy`|",
    "created_at": "2017-10-17T17:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420006",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[a68d57f](https://github.com/sagemath/sagetrac-mirror/commit/a68d57ffcd1199f336184fca569b9deff0d5177b)|`23923: Interface cases function with SymPy's piecewise`|
|[b80d98c](https://github.com/sagemath/sagetrac-mirror/commit/b80d98c2415f106f9f90270f1b0a7f9f240b76f4)|`23923: fix typo`|
|[2afa0ee](https://github.com/sagemath/sagetrac-mirror/commit/2afa0ee105e99e3b7c8185c8d7b4721a9b4d7c86)|`22566: interface SymPy's ceiling()`|
|[9494f6c](https://github.com/sagemath/sagetrac-mirror/commit/9494f6cc69630d3af9567c1179e56a0a62af736d)|`22566: add test`|
|[8215d37](https://github.com/sagemath/sagetrac-mirror/commit/8215d37edd3eabc1eb881800e44210f2f77d64bc)|`Merge branch 'develop' into tmp05`|
|[7899ea9](https://github.com/sagemath/sagetrac-mirror/commit/7899ea992d19f75e38e7db5526bb5c311d09d79a)|`20204: convert SymPy abstract functions`|
|[b261ec3](https://github.com/sagemath/sagetrac-mirror/commit/b261ec3e671179d04d1922d15d9116e4f6e1d47f)|`23923: fix doctest`|
|[5010acf](https://github.com/sagemath/sagetrac-mirror/commit/5010acf00b2811420ba1a725deb2351f77eb0c01)|`Merge branch 'u/rws/23923' of git://trac.sagemath.org/sage into t/20204/20204`|
|[952970d](https://github.com/sagemath/sagetrac-mirror/commit/952970d2b293ad801ced530645a77cea7dc6d9bc)|`Merge branch 'u/rws/20204' of git://trac.sagemath.org/sage into public/22801-manifold-sympy`|



---

archive/issue_comments_420007.json:
```json
{
    "body": "Changing dependencies from \"#22802 #24006\" to \"#22802 #24006 #20204\"",
    "created_at": "2017-10-18T07:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420007",
    "user": "https://github.com/man74cio"
}
```

Changing dependencies from "#22802 #24006" to "#22802 #24006 #20204"



---

archive/issue_comments_420008.json:
```json
{
    "body": "Changing commit from \"952970d2b293ad801ced530645a77cea7dc6d9bc\" to \"1ff225cce1ffa1f84664bc58002099b883a2fef5\"",
    "created_at": "2017-10-18T14:18:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420008",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "952970d2b293ad801ced530645a77cea7dc6d9bc" to "1ff225cce1ffa1f84664bc58002099b883a2fef5"



---

archive/issue_comments_420009.json:
```json
{
    "body": "<a id='comment:47'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|\n|[1ff225c](https://github.com/sagemath/sagetrac-mirror/commit/1ff225cce1ffa1f84664bc58002099b883a2fef5)|`Added Subs._sage_. Now differentiation in manifold work. A problem in dispaly in diff_form.py appeared`|",
    "created_at": "2017-10-18T14:18:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420009",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
|[1ff225c](https://github.com/sagemath/sagetrac-mirror/commit/1ff225cce1ffa1f84664bc58002099b883a2fef5)|`Added Subs._sage_. Now differentiation in manifold work. A problem in dispaly in diff_form.py appeared`|



---

archive/issue_comments_420010.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-10-20T19:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420010",
    "user": "https://github.com/man74cio"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_420011.json:
```json
{
    "body": "Changing commit from \"1ff225cce1ffa1f84664bc58002099b883a2fef5\" to \"ff540a3994578046e4f2e3c46f81de5902bb02fd\"",
    "created_at": "2017-10-20T19:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420011",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1ff225cce1ffa1f84664bc58002099b883a2fef5" to "ff540a3994578046e4f2e3c46f81de5902bb02fd"



---

archive/issue_comments_420012.json:
```json
{
    "body": "<a id='comment:49'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|\n|[ff540a3](https://github.com/sagemath/sagetrac-mirror/commit/ff540a3994578046e4f2e3c46f81de5902bb02fd)|`Corrected error in ChartFunction._lmul_ , _rmul_. Still a problem with sympy _eq_`|",
    "created_at": "2017-10-20T19:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420012",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|
|[ff540a3](https://github.com/sagemath/sagetrac-mirror/commit/ff540a3994578046e4f2e3c46f81de5902bb02fd)|`Corrected error in ChartFunction._lmul_ , _rmul_. Still a problem with sympy _eq_`|



---

archive/issue_comments_420013.json:
```json
{
    "body": "Changing commit from \"ff540a3994578046e4f2e3c46f81de5902bb02fd\" to \"d0cbda9771f7a2f084331fa5c2101496ad1f4f4c\"",
    "created_at": "2017-10-23T11:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420013",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ff540a3994578046e4f2e3c46f81de5902bb02fd" to "d0cbda9771f7a2f084331fa5c2101496ad1f4f4c"



---

archive/issue_comments_420014.json:
```json
{
    "body": "<a id='comment:50'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[9962353](https://github.com/sagemath/sagetrac-mirror/commit/9962353a21af15373379519b7db28ccb6158aac5)|`Changed __eq__ for chartfunction in sympy case`|\n|[14b1c52](https://github.com/sagemath/sagetrac-mirror/commit/14b1c523c468bfb304191edfe6e85a5c94e916f5)|`20204: more doctests`|\n|[df57f9e](https://github.com/sagemath/sagetrac-mirror/commit/df57f9e22358ec2acaca0bcdd27a7e011365e03e)|`Merge branch 'u/rws/20204' of git://trac.sagemath.org/sage into public/22801-manifold-sympy`|\n|[9169924](https://github.com/sagemath/sagetrac-mirror/commit/9169924ca14501168066f1a2ed9d03bcc887db34)|`Merge branch 'develop' into t/24006/24006`|\n|[d43419f](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)|`24006: bump sympy patchlevel`|\n|[d0cbda9](https://github.com/sagemath/sagetrac-mirror/commit/d0cbda9771f7a2f084331fa5c2101496ad1f4f4c)|`Merge branch 'u/rws/24006' of git://trac.sagemath.org/sage into public/22801-manifold-sympy`|",
    "created_at": "2017-10-23T11:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420014",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[9962353](https://github.com/sagemath/sagetrac-mirror/commit/9962353a21af15373379519b7db28ccb6158aac5)|`Changed __eq__ for chartfunction in sympy case`|
|[14b1c52](https://github.com/sagemath/sagetrac-mirror/commit/14b1c523c468bfb304191edfe6e85a5c94e916f5)|`20204: more doctests`|
|[df57f9e](https://github.com/sagemath/sagetrac-mirror/commit/df57f9e22358ec2acaca0bcdd27a7e011365e03e)|`Merge branch 'u/rws/20204' of git://trac.sagemath.org/sage into public/22801-manifold-sympy`|
|[9169924](https://github.com/sagemath/sagetrac-mirror/commit/9169924ca14501168066f1a2ed9d03bcc887db34)|`Merge branch 'develop' into t/24006/24006`|
|[d43419f](https://github.com/sagemath/sagetrac-mirror/commit/d43419f73f455259896cbd9aeff86bbaa5d764c7)|`24006: bump sympy patchlevel`|
|[d0cbda9](https://github.com/sagemath/sagetrac-mirror/commit/d0cbda9771f7a2f084331fa5c2101496ad1f4f4c)|`Merge branch 'u/rws/24006' of git://trac.sagemath.org/sage into public/22801-manifold-sympy`|



---

archive/issue_comments_420015.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-10-23T11:20:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420015",
    "user": "https://github.com/man74cio"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_420016.json:
```json
{
    "body": "Changing reviewer from \"Eric Gourgoulhon\" to \"Eric Gourgoulhon, Ralf Stephan\"",
    "created_at": "2017-10-24T06:31:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420016",
    "user": "https://github.com/rwst"
}
```

Changing reviewer from "Eric Gourgoulhon" to "Eric Gourgoulhon, Ralf Stephan"



---

archive/issue_comments_420017.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-10-24T06:31:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420017",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_420018.json:
```json
{
    "body": "<a id='comment:52'></a>\nI cannot confirm the one patchbot failure. Most of this was reviewed by Eric, and the rest by me, LGTM.",
    "created_at": "2017-10-24T06:31:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420018",
    "user": "https://github.com/rwst"
}
```

<a id='comment:52'></a>
I cannot confirm the one patchbot failure. Most of this was reviewed by Eric, and the rest by me, LGTM.



---

archive/issue_events_075256.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-24T06:31:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22801#event-75256"
}
```



---

archive/issue_comments_420019.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-10-24T08:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420019",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_420020.json:
```json
{
    "body": "<a id='comment:54'></a>\nThank you Ralf but I would like to check a few more things before the final positive review",
    "created_at": "2017-10-24T12:05:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420020",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:54'></a>
Thank you Ralf but I would like to check a few more things before the final positive review



---

archive/issue_comments_420021.json:
```json
{
    "body": "Changing commit from \"d0cbda9771f7a2f084331fa5c2101496ad1f4f4c\" to \"b1f6587e44043135087d8da33da7ce1ce6cfb1f9\"",
    "created_at": "2017-10-26T12:35:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420021",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d0cbda9771f7a2f084331fa5c2101496ad1f4f4c" to "b1f6587e44043135087d8da33da7ce1ce6cfb1f9"



---

archive/issue_comments_420022.json:
```json
{
    "body": "<a id='comment:55'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[b1f6587](https://github.com/sagemath/sagetrac-mirror/commit/b1f6587e44043135087d8da33da7ce1ce6cfb1f9)|`Allow for SymPy computation of metric determinant`|",
    "created_at": "2017-10-26T12:35:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420022",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[b1f6587](https://github.com/sagemath/sagetrac-mirror/commit/b1f6587e44043135087d8da33da7ce1ce6cfb1f9)|`Allow for SymPy computation of metric determinant`|



---

archive/issue_comments_420023.json:
```json
{
    "body": "<a id='comment:56'></a>\nThe above commit fixes the computation of metric determinants when sympy is the calculus method. With it, most of the manifold tutorial passes with all calculations performed with SymPy: http://nbviewer.jupyter.org/github/sagemanifolds/SageManifolds/blob/master/Worksheets/v1.1/SM_tutorial_sympy.ipynb.\n\nI have still to check a few extra things to complete the review.",
    "created_at": "2017-10-26T12:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420023",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:56'></a>
The above commit fixes the computation of metric determinants when sympy is the calculus method. With it, most of the manifold tutorial passes with all calculations performed with SymPy: http://nbviewer.jupyter.org/github/sagemanifolds/SageManifolds/blob/master/Worksheets/v1.1/SM_tutorial_sympy.ipynb.

I have still to check a few extra things to complete the review.



---

archive/issue_comments_420024.json:
```json
{
    "body": "<a id='comment:57'></a>\nGrep finds a few mentions of 'manifolds.coord_func' in commentary:\n\ndifferentiable/scalarfield.py:    :class:`~sage.manifolds.coord_func.CoordFunction`::\ndifferentiable/affine_connection.py:    :class:`~sage.manifolds.coord_func.CoordFunction` (of the subclass\ndifferentiable/affine_connection.py:    :class:`~sage.manifolds.coord_func_symb.CoordFunctionSymb` in the current\ndifferentiable/affine_connection.py:          :class:`~sage.manifolds.coord_func.CoordFunction`\ndifferentiable/chart.py:          (cf. :class:`~sage.manifolds.coord_func.CoordFunction`)\ndifferentiable/chart.py:          (cf. :class:`~sage.manifolds.coord_func.CoordFunction`)\ndifferentiable/diff_map.py:          :class:`~sage.manifolds.coord_func.CoordFunction`",
    "created_at": "2017-10-26T18:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420024",
    "user": "https://github.com/rll2021"
}
```

<a id='comment:57'></a>
Grep finds a few mentions of 'manifolds.coord_func' in commentary:

differentiable/scalarfield.py:    :class:`~sage.manifolds.coord_func.CoordFunction`::
differentiable/affine_connection.py:    :class:`~sage.manifolds.coord_func.CoordFunction` (of the subclass
differentiable/affine_connection.py:    :class:`~sage.manifolds.coord_func_symb.CoordFunctionSymb` in the current
differentiable/affine_connection.py:          :class:`~sage.manifolds.coord_func.CoordFunction`
differentiable/chart.py:          (cf. :class:`~sage.manifolds.coord_func.CoordFunction`)
differentiable/chart.py:          (cf. :class:`~sage.manifolds.coord_func.CoordFunction`)
differentiable/diff_map.py:          :class:`~sage.manifolds.coord_func.CoordFunction`



---

archive/issue_comments_420025.json:
```json
{
    "body": "<a id='comment:58'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|\n|[5e2da17](https://github.com/sagemath/sagetrac-mirror/commit/5e2da17ca685852b6d0802cd4705a1e70fe2e123)|`Purged references to sage.manifolds.coord_func.CoordFunction`|",
    "created_at": "2017-10-27T09:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420025",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
|[5e2da17](https://github.com/sagemath/sagetrac-mirror/commit/5e2da17ca685852b6d0802cd4705a1e70fe2e123)|`Purged references to sage.manifolds.coord_func.CoordFunction`|



---

archive/issue_comments_420026.json:
```json
{
    "body": "Changing commit from \"b1f6587e44043135087d8da33da7ce1ce6cfb1f9\" to \"5e2da17ca685852b6d0802cd4705a1e70fe2e123\"",
    "created_at": "2017-10-27T09:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420026",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b1f6587e44043135087d8da33da7ce1ce6cfb1f9" to "5e2da17ca685852b6d0802cd4705a1e70fe2e123"



---

archive/issue_comments_420027.json:
```json
{
    "body": "<a id='comment:59'></a>\nReplying to [rllozes](#comment%3A57):\n\nI removed the old references, thanks\n\n> Grep finds a few mentions of 'manifolds.coord_func' in commentary:\n> \n> differentiable/scalarfield.py:    :class:`~sage.manifolds.coord_func.CoordFunction`::\n> differentiable/affine_connection.py:    :class:`~sage.manifolds.coord_func.CoordFunction` (of the subclass\n> differentiable/affine_connection.py:    :class:`~sage.manifolds.coord_func_symb.CoordFunctionSymb` in the current\n> differentiable/affine_connection.py:          :class:`~sage.manifolds.coord_func.CoordFunction`\n> differentiable/chart.py:          (cf. :class:`~sage.manifolds.coord_func.CoordFunction`)\n> differentiable/chart.py:          (cf. :class:`~sage.manifolds.coord_func.CoordFunction`)\n> differentiable/diff_map.py:          :class:`~sage.manifolds.coord_func.CoordFunction`\n\n>",
    "created_at": "2017-10-27T09:53:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420027",
    "user": "https://github.com/man74cio"
}
```

<a id='comment:59'></a>
Replying to [rllozes](#comment%3A57):

I removed the old references, thanks

> Grep finds a few mentions of 'manifolds.coord_func' in commentary:
> 
> differentiable/scalarfield.py:    :class:`~sage.manifolds.coord_func.CoordFunction`::
> differentiable/affine_connection.py:    :class:`~sage.manifolds.coord_func.CoordFunction` (of the subclass
> differentiable/affine_connection.py:    :class:`~sage.manifolds.coord_func_symb.CoordFunctionSymb` in the current
> differentiable/affine_connection.py:          :class:`~sage.manifolds.coord_func.CoordFunction`
> differentiable/chart.py:          (cf. :class:`~sage.manifolds.coord_func.CoordFunction`)
> differentiable/chart.py:          (cf. :class:`~sage.manifolds.coord_func.CoordFunction`)
> differentiable/diff_map.py:          :class:`~sage.manifolds.coord_func.CoordFunction`

>



---

archive/issue_comments_420028.json:
```json
{
    "body": "<a id='comment:60'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|\n|[92e508b](https://github.com/sagemath/sagetrac-mirror/commit/92e508b9550df9924c8db0a2a2641609dd8a2999)|`Fix LaTeX display of continuous maps with SymPy expressions`|\n|[31f56d2](https://github.com/sagemath/sagetrac-mirror/commit/31f56d2a81e97f1244cc038db3618e26003713e4)|`Allow arithmetics of Components with SymPy numbers`|",
    "created_at": "2017-10-27T22:16:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420028",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
|[92e508b](https://github.com/sagemath/sagetrac-mirror/commit/92e508b9550df9924c8db0a2a2641609dd8a2999)|`Fix LaTeX display of continuous maps with SymPy expressions`|
|[31f56d2](https://github.com/sagemath/sagetrac-mirror/commit/31f56d2a81e97f1244cc038db3618e26003713e4)|`Allow arithmetics of Components with SymPy numbers`|



---

archive/issue_comments_420029.json:
```json
{
    "body": "Changing commit from \"5e2da17ca685852b6d0802cd4705a1e70fe2e123\" to \"31f56d2a81e97f1244cc038db3618e26003713e4\"",
    "created_at": "2017-10-27T22:16:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420029",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5e2da17ca685852b6d0802cd4705a1e70fe2e123" to "31f56d2a81e97f1244cc038db3618e26003713e4"



---

archive/issue_comments_420030.json:
```json
{
    "body": "<a id='comment:61'></a>\nWith the above two commits, all the S<sup>2</sup> notebook passes with SymPy:\nhttp://nbviewer.jupyter.org/github/sagemanifolds/SageManifolds/blob/master/Worksheets/v1.1/SM_sphere_S2_sympy.ipynb\nexcept for the 3D graphics of the tangent vector field to the loxodrome (commented cell 193); this is because Sage's matrix constructor (`sage.matrix.constructor.prepare`) cannot take SymPy numbers (`sympy.core.numbers.Float`) as elements: it generates the error\n\n```\nTypeError: unable to find a common ring for all elements\n``` \nThe need for such a matrix arises from a change of basis in some tangent space to the sphere, where all tensor components are expressed in terms of SymPy floats (because of the sampling for the drawing). Probably some workaround can be found.\n\nBesides, I am still checking a few other things...",
    "created_at": "2017-10-27T22:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420030",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:61'></a>
With the above two commits, all the S<sup>2</sup> notebook passes with SymPy:
http://nbviewer.jupyter.org/github/sagemanifolds/SageManifolds/blob/master/Worksheets/v1.1/SM_sphere_S2_sympy.ipynb
except for the 3D graphics of the tangent vector field to the loxodrome (commented cell 193); this is because Sage's matrix constructor (`sage.matrix.constructor.prepare`) cannot take SymPy numbers (`sympy.core.numbers.Float`) as elements: it generates the error

```
TypeError: unable to find a common ring for all elements
``` 
The need for such a matrix arises from a change of basis in some tangent space to the sphere, where all tensor components are expressed in terms of SymPy floats (because of the sampling for the drawing). Probably some workaround can be found.

Besides, I am still checking a few other things...



---

archive/issue_comments_420031.json:
```json
{
    "body": "<a id='comment:62'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|\n|[426f98c](https://github.com/sagemath/sagetrac-mirror/commit/426f98c66cff2a79268e385d4239a02ff05e9ec3)|`Another series of reviewer tweaks for SymPy calculus on manifolds`|",
    "created_at": "2017-10-28T16:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420031",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:62'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|
|[426f98c](https://github.com/sagemath/sagetrac-mirror/commit/426f98c66cff2a79268e385d4239a02ff05e9ec3)|`Another series of reviewer tweaks for SymPy calculus on manifolds`|



---

archive/issue_comments_420032.json:
```json
{
    "body": "Changing commit from \"31f56d2a81e97f1244cc038db3618e26003713e4\" to \"426f98c66cff2a79268e385d4239a02ff05e9ec3\"",
    "created_at": "2017-10-28T16:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420032",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "31f56d2a81e97f1244cc038db3618e26003713e4" to "426f98c66cff2a79268e385d4239a02ff05e9ec3"



---

archive/issue_comments_420033.json:
```json
{
    "body": "<a id='comment:63'></a>\nThe above commit mostly improves the documentation. In particular, it adds the missing item `calc_method` in some `INPUT` sections and slightly improves some doctests.",
    "created_at": "2017-10-28T17:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420033",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:63'></a>
The above commit mostly improves the documentation. In particular, it adds the missing item `calc_method` in some `INPUT` sections and slightly improves some doctests.



---

archive/issue_comments_420034.json:
```json
{
    "body": "<a id='comment:64'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[8ffa9c4](https://github.com/sagemath/sagetrac-mirror/commit/8ffa9c486af89941311b8f922a4a0893107e176b)|`Improve documentation for SymPy calculus on manifolds`|",
    "created_at": "2017-10-29T22:26:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420034",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[8ffa9c4](https://github.com/sagemath/sagetrac-mirror/commit/8ffa9c486af89941311b8f922a4a0893107e176b)|`Improve documentation for SymPy calculus on manifolds`|



---

archive/issue_comments_420035.json:
```json
{
    "body": "Changing commit from \"426f98c66cff2a79268e385d4239a02ff05e9ec3\" to \"8ffa9c486af89941311b8f922a4a0893107e176b\"",
    "created_at": "2017-10-29T22:26:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420035",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "426f98c66cff2a79268e385d4239a02ff05e9ec3" to "8ffa9c486af89941311b8f922a4a0893107e176b"



---

archive/issue_comments_420036.json:
```json
{
    "body": "<a id='comment:65'></a>\nI am almost done checking the documentation; shall finish tomorrow...",
    "created_at": "2017-10-29T22:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420036",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:65'></a>
I am almost done checking the documentation; shall finish tomorrow...



---

archive/issue_comments_420037.json:
```json
{
    "body": "<a id='comment:66'></a>\nOn my 3-manifold, I observe the following timings:\n\n# One thread takes 317s in Sage, 9311s in SymPy!\\\\\n\nnabla = g.connection()\n\n# One thread takes 95s in Sage, 1134s in SymPy!\\\\\n\nLBpsi = nabla(nabla(psi).up(g)).trace(); LBpsi;\n\n# One thread takes 872s in Sage, 36221s in SymPy!\\\\\n\nRic_g = g.ricci_scalar()\n\n# One thread takes 482s in Sage, 24220s in SymPy!\\\\\n\nCot_g = g.cotton(); Cot_g.parent(); Cot_g.display()\n\nI suggest we take a deeper look *after* getting the functionality released.",
    "created_at": "2017-10-30T15:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420037",
    "user": "https://github.com/rll2021"
}
```

<a id='comment:66'></a>
On my 3-manifold, I observe the following timings:

# One thread takes 317s in Sage, 9311s in SymPy!\\

nabla = g.connection()

# One thread takes 95s in Sage, 1134s in SymPy!\\

LBpsi = nabla(nabla(psi).up(g)).trace(); LBpsi;

# One thread takes 872s in Sage, 36221s in SymPy!\\

Ric_g = g.ricci_scalar()

# One thread takes 482s in Sage, 24220s in SymPy!\\

Cot_g = g.cotton(); Cot_g.parent(); Cot_g.display()

I suggest we take a deeper look *after* getting the functionality released.



---

archive/issue_comments_420038.json:
```json
{
    "body": "<a id='comment:67'></a>\nReplying to [rllozes](#comment%3A66):\n\nI also noticed that SymPy is slower than Sage's symbolic (in particular in the tutorial and S<sup>2</sup> notebooks mentioned in[comment:56](#comment%3A56) and[comment:61](#comment%3A61)).\n\n> \n> I suggest we take a deeper look *after* getting the functionality released.\n\n\nI agree.",
    "created_at": "2017-10-30T16:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420038",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:67'></a>
Replying to [rllozes](#comment%3A66):

I also noticed that SymPy is slower than Sage's symbolic (in particular in the tutorial and S<sup>2</sup> notebooks mentioned in[comment:56](#comment%3A56) and[comment:61](#comment%3A61)).

> 
> I suggest we take a deeper look *after* getting the functionality released.


I agree.



---

archive/issue_comments_420039.json:
```json
{
    "body": "Attachment [22801_4threads.failure](tarball://root/attachments/some-uuid/ticket22801/22801_4threads.failure) by @rll2021 created at 2017-10-30 22:19:08",
    "created_at": "2017-10-30T22:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420039",
    "user": "https://github.com/rll2021"
}
```

Attachment [22801_4threads.failure](tarball://root/attachments/some-uuid/ticket22801/22801_4threads.failure) by @rll2021 created at 2017-10-30 22:19:08



---

archive/issue_comments_420040.json:
```json
{
    "body": "<a id='comment:68'></a>\nThe above attached notebook shows a failure when run with the multiprocessing directive \n\n```\nParallelism().set(nproc=4)\n```\nwhile computing the Laplace-Beltrami operator acting on a scalar field\n\n```\nnabla(nabla(psi).up(g)).trace()\n``` \ndefined on a manifold having the 'sympy' option set\n\n```\nM.set_calculus_method('sympy')\n```\nWhen multiprocessing is turned off (nproc=1), this notebook completes without error.\n\nI will try to find a quicker-running example.",
    "created_at": "2017-10-30T22:29:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420040",
    "user": "https://github.com/rll2021"
}
```

<a id='comment:68'></a>
The above attached notebook shows a failure when run with the multiprocessing directive 

```
Parallelism().set(nproc=4)
```
while computing the Laplace-Beltrami operator acting on a scalar field

```
nabla(nabla(psi).up(g)).trace()
``` 
defined on a manifold having the 'sympy' option set

```
M.set_calculus_method('sympy')
```
When multiprocessing is turned off (nproc=1), this notebook completes without error.

I will try to find a quicker-running example.



---

archive/issue_comments_420041.json:
```json
{
    "body": "<a id='comment:69'></a>\nReplying to [rllozes](#comment%3A68):\n> The above attached notebook shows a failure when run with the multiprocessing directive \n\n\nCan you resend the notebook? When I try to open it, I get the error\n\n```\nUnreadable Notebook: /home/eric/sage/8.1.beta8/22801_4threads_failure.ipynb NotJSONError(\"Notebook does not appear to be JSON:u'\\\\n{{{id=44|\\\\n# trac 22801 on top of .....\",)\n```",
    "created_at": "2017-10-31T09:51:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420041",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:69'></a>
Replying to [rllozes](#comment%3A68):
> The above attached notebook shows a failure when run with the multiprocessing directive 


Can you resend the notebook? When I try to open it, I get the error

```
Unreadable Notebook: /home/eric/sage/8.1.beta8/22801_4threads_failure.ipynb NotJSONError("Notebook does not appear to be JSON:u'\\n{{{id=44|\\n# trac 22801 on top of .....",)
```



---

archive/issue_comments_420042.json:
```json
{
    "body": "Changing commit from \"8ffa9c486af89941311b8f922a4a0893107e176b\" to \"7a49a7814eb436ca991f7dd02ad64ac03f38de77\"",
    "created_at": "2017-10-31T12:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420042",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8ffa9c486af89941311b8f922a4a0893107e176b" to "7a49a7814eb436ca991f7dd02ad64ac03f38de77"



---

archive/issue_comments_420043.json:
```json
{
    "body": "<a id='comment:70'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[7a49a78](https://github.com/sagemath/sagetrac-mirror/commit/7a49a7814eb436ca991f7dd02ad64ac03f38de77)|`Some tweak of documention of tensor fields with SymPy`|",
    "created_at": "2017-10-31T12:12:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420043",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:70'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[7a49a78](https://github.com/sagemath/sagetrac-mirror/commit/7a49a7814eb436ca991f7dd02ad64ac03f38de77)|`Some tweak of documention of tensor fields with SymPy`|



---

archive/issue_comments_420044.json:
```json
{
    "body": "Changing reviewer from \"Eric Gourgoulhon, Ralf Stephan\" to \"Eric Gourgoulhon, Ralf Stephan, Richard Lozes\"",
    "created_at": "2017-10-31T12:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420044",
    "user": "https://github.com/egourgoulhon"
}
```

Changing reviewer from "Eric Gourgoulhon, Ralf Stephan" to "Eric Gourgoulhon, Ralf Stephan, Richard Lozes"



---

archive/issue_comments_420045.json:
```json
{
    "body": "<a id='comment:71'></a>\nI've finished to review the ticket. Marco, Ralf or Richard, if you agree with my changes, please set the ticket back to positive review (the parallelization issue raised in[comment:68](#comment%3A68), if confirmed, could be dealt with in a separate ticket).\n\nThank you very much Marco for your work on this; it will be great to have the SymPy functionaly for manifolds in Sage 8.1!",
    "created_at": "2017-10-31T12:19:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420045",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:71'></a>
I've finished to review the ticket. Marco, Ralf or Richard, if you agree with my changes, please set the ticket back to positive review (the parallelization issue raised in[comment:68](#comment%3A68), if confirmed, could be dealt with in a separate ticket).

Thank you very much Marco for your work on this; it will be great to have the SymPy functionaly for manifolds in Sage 8.1!



---

archive/issue_comments_420046.json:
```json
{
    "body": "<a id='comment:72'></a>\nI will abstain, having not read through all the changes. \nI can say that I am able to successfully build and run all the doctests (ptestlong).",
    "created_at": "2017-10-31T15:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420046",
    "user": "https://github.com/rll2021"
}
```

<a id='comment:72'></a>
I will abstain, having not read through all the changes. 
I can say that I am able to successfully build and run all the doctests (ptestlong).



---

archive/issue_comments_420047.json:
```json
{
    "body": "<a id='comment:73'></a>\nThanks to all for the review. \nI am going to treat the issue of parallelization (comment:68) which it seems not connencted to sympy.",
    "created_at": "2017-11-02T08:49:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420047",
    "user": "https://github.com/man74cio"
}
```

<a id='comment:73'></a>
Thanks to all for the review. 
I am going to treat the issue of parallelization (comment:68) which it seems not connencted to sympy.



---

archive/issue_comments_420048.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-11-02T09:42:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420048",
    "user": "https://github.com/man74cio"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_420049.json:
```json
{
    "body": "Attachment [22801_proc _gt_1.sws](tarball://root/attachments/some-uuid/ticket22801/22801_proc _gt_1.sws) by @rll2021 created at 2017-11-02 17:39:08\n\nShowing failure with computations using sympy and parallelism (proc>1)",
    "created_at": "2017-11-02T17:39:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420049",
    "user": "https://github.com/rll2021"
}
```

Attachment [22801_proc _gt_1.sws](tarball://root/attachments/some-uuid/ticket22801/22801_proc _gt_1.sws) by @rll2021 created at 2017-11-02 17:39:08

Showing failure with computations using sympy and parallelism (proc>1)



---

archive/issue_comments_420050.json:
```json
{
    "body": "<a id='comment:75'></a>\nReplying to [egourgoulhon](#comment%3A69):\n> Replying to [rllozes](#comment%3A68):\n> > The above attached notebook shows a failure when run with the multiprocessing directive \n\n> \n> Can you resend the notebook? When I try to open it, I get the error\n> \n> ```\n> Unreadable Notebook: /home/eric/sage/8.1.beta8/22801_4threads_failure.ipynb NotJSONError(\"Notebook does not appear to be JSON:u'\\\\n{{{id=44|\\\\n# trac 22801 on top of .....\",)\n> ```\n\n\nSorry - Please see second attachment. I will still try to find a simpler case.",
    "created_at": "2017-11-02T17:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420050",
    "user": "https://github.com/rll2021"
}
```

<a id='comment:75'></a>
Replying to [egourgoulhon](#comment%3A69):
> Replying to [rllozes](#comment%3A68):
> > The above attached notebook shows a failure when run with the multiprocessing directive 

> 
> Can you resend the notebook? When I try to open it, I get the error
> 
> ```
> Unreadable Notebook: /home/eric/sage/8.1.beta8/22801_4threads_failure.ipynb NotJSONError("Notebook does not appear to be JSON:u'\\n{{{id=44|\\n# trac 22801 on top of .....",)
> ```


Sorry - Please see second attachment. I will still try to find a simpler case.



---

archive/issue_comments_420051.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-11-02T21:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420051",
    "user": "https://github.com/rll2021"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_420052.json:
```json
{
    "body": "<a id='comment:76'></a>\n1) Please remove redundant word \"curve\" which occurs within the documentation of curve.py and integrated_curve.py.\n2) Are we letting the TODO's remain undone for this release?\n3) In vectorfield_module.py, two occurrences each of \"from the North pole\" and \"from the South pole\" were changed to \"from North pole\" and \"from South pole\", respectively, resulting in non-standard English.",
    "created_at": "2017-11-02T21:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420052",
    "user": "https://github.com/rll2021"
}
```

<a id='comment:76'></a>
1) Please remove redundant word "curve" which occurs within the documentation of curve.py and integrated_curve.py.
2) Are we letting the TODO's remain undone for this release?
3) In vectorfield_module.py, two occurrences each of "from the North pole" and "from the South pole" were changed to "from North pole" and "from South pole", respectively, resulting in non-standard English.



---

archive/issue_comments_420053.json:
```json
{
    "body": "Changing commit from \"7a49a7814eb436ca991f7dd02ad64ac03f38de77\" to \"ce4acb44667b5e772bb4bd027ac507e63530b4b6\"",
    "created_at": "2017-11-03T09:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420053",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7a49a7814eb436ca991f7dd02ad64ac03f38de77" to "ce4acb44667b5e772bb4bd027ac507e63530b4b6"



---

archive/issue_comments_420054.json:
```json
{
    "body": "<a id='comment:77'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|\n|[ce4acb4](https://github.com/sagemath/sagetrac-mirror/commit/ce4acb44667b5e772bb4bd027ac507e63530b4b6)|`Correct some typo in doc and renable trigonometric simplifications in SymPy calculus on manifolds`|",
    "created_at": "2017-11-03T09:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420054",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:77'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
|[ce4acb4](https://github.com/sagemath/sagetrac-mirror/commit/ce4acb44667b5e772bb4bd027ac507e63530b4b6)|`Correct some typo in doc and renable trigonometric simplifications in SymPy calculus on manifolds`|



---

archive/issue_comments_420055.json:
```json
{
    "body": "<a id='comment:78'></a>\nReplying to [rllozes](#comment%3A75):\n> \n> Sorry - Please see second attachment. I will still try to find a simpler case.\n\n\nSorry I still cannot read this file: when I run `sage -n sagenb` and try to open it, I get \"500: internal server error\".",
    "created_at": "2017-11-03T09:30:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420055",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:78'></a>
Replying to [rllozes](#comment%3A75):
> 
> Sorry - Please see second attachment. I will still try to find a simpler case.


Sorry I still cannot read this file: when I run `sage -n sagenb` and try to open it, I get "500: internal server error".



---

archive/issue_comments_420056.json:
```json
{
    "body": "<a id='comment:79'></a>\nReplying to [rllozes](#comment%3A76):\n> 1) Please remove redundant word \"curve\" which occurs within the documentation of curve.py and integrated_curve.py.\n\n\nDone in the above commit.\n\n> 2) Are we letting the TODO's remain undone for this release?\n\n\nIMHO yes, because they require substantial work and do not hinder the functionality implemented here.\n\n> 3) In vectorfield_module.py, two occurrences each of \"from the North pole\" and \"from the South pole\" were changed to \"from North pole\" and \"from South pole\", respectively, resulting in non-standard English.\n\n\nCorrected in the above commit; thanks.\n\nBesides the above typos, the last commit restores the trig simplification that was commented out in `simplify_chain_generic_sympy` and `simplify_chain_real_sympy`. On general grounds, the SymPy simplification chain should be improved in another ticket.",
    "created_at": "2017-11-03T09:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420056",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:79'></a>
Replying to [rllozes](#comment%3A76):
> 1) Please remove redundant word "curve" which occurs within the documentation of curve.py and integrated_curve.py.


Done in the above commit.

> 2) Are we letting the TODO's remain undone for this release?


IMHO yes, because they require substantial work and do not hinder the functionality implemented here.

> 3) In vectorfield_module.py, two occurrences each of "from the North pole" and "from the South pole" were changed to "from North pole" and "from South pole", respectively, resulting in non-standard English.


Corrected in the above commit; thanks.

Besides the above typos, the last commit restores the trig simplification that was commented out in `simplify_chain_generic_sympy` and `simplify_chain_real_sympy`. On general grounds, the SymPy simplification chain should be improved in another ticket.



---

archive/issue_comments_420057.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-11-03T09:38:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420057",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_420058.json:
```json
{
    "body": "<a id='comment:81'></a>\nFinished review of all changed code and docs. \nI concur with status of positive_review.",
    "created_at": "2017-11-04T01:42:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420058",
    "user": "https://github.com/rll2021"
}
```

<a id='comment:81'></a>
Finished review of all changed code and docs. 
I concur with status of positive_review.



---

archive/issue_comments_420059.json:
```json
{
    "body": "<a id='comment:82'></a>\nAttachment [22801_proc_eq_1.sws](tarball://root/attachments/some-uuid/ticket22801/22801_proc_eq_1.sws) by @rll2021 created at 2017-11-04 01:54:11\n\nReplying to [egourgoulhon](#comment%3A78):\n> Replying to [rllozes](#comment%3A75):\n> > \n> > Sorry - Please see second attachment. I will still try to find a simpler case.\n\n> \n> Sorry I still cannot read this file: when I run `sage -n sagenb` and try to open it, I get \"500: internal server error\".\n\n\nI have just uploaded another copy, with a new name, after stripping the output and a few commented-out cells. It should open with the standard upload link in the Sage Notebook. It should run as is, and it should fail after changing Parallelism().set(nproc=1) from 1 to 2.",
    "created_at": "2017-11-04T01:54:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420059",
    "user": "https://github.com/rll2021"
}
```

<a id='comment:82'></a>
Attachment [22801_proc_eq_1.sws](tarball://root/attachments/some-uuid/ticket22801/22801_proc_eq_1.sws) by @rll2021 created at 2017-11-04 01:54:11

Replying to [egourgoulhon](#comment%3A78):
> Replying to [rllozes](#comment%3A75):
> > 
> > Sorry - Please see second attachment. I will still try to find a simpler case.

> 
> Sorry I still cannot read this file: when I run `sage -n sagenb` and try to open it, I get "500: internal server error".


I have just uploaded another copy, with a new name, after stripping the output and a few commented-out cells. It should open with the standard upload link in the Sage Notebook. It should run as is, and it should fail after changing Parallelism().set(nproc=1) from 1 to 2.



---

archive/issue_comments_420060.json:
```json
{
    "body": "<a id='comment:83'></a>\nI have the same error,\nlooking into the file I don't see any sage command.",
    "created_at": "2017-11-04T05:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420060",
    "user": "https://github.com/man74cio"
}
```

<a id='comment:83'></a>
I have the same error,
looking into the file I don't see any sage command.



---

archive/issue_comments_420061.json:
```json
{
    "body": "<a id='comment:84'></a>\nReplying to [rllozes](#comment%3A82):\n> \n> I have just uploaded another copy, with a new name, after stripping the output and a few commented-out cells. It should open with the standard upload link in the Sage Notebook. It should run as is, and it should fail after changing Parallelism().set(nproc=1) from 1 to 2.\n\n\nThis time, I can open the worksheet. Thank you. I am just running it.",
    "created_at": "2017-11-04T08:21:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420061",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:84'></a>
Replying to [rllozes](#comment%3A82):
> 
> I have just uploaded another copy, with a new name, after stripping the output and a few commented-out cells. It should open with the standard upload link in the Sage Notebook. It should run as is, and it should fail after changing Parallelism().set(nproc=1) from 1 to 2.


This time, I can open the worksheet. Thank you. I am just running it.



---

archive/issue_comments_420062.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-11-04T23:31:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420062",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_420063.json:
```json
{
    "body": "<a id='comment:85'></a>\nMerge conflict with #24062",
    "created_at": "2017-11-04T23:31:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420063",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:85'></a>
Merge conflict with #24062



---

archive/issue_comments_420064.json:
```json
{
    "body": "<a id='comment:86'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[9c4119a](https://github.com/sagemath/sagetrac-mirror/commit/9c4119a3feda956846bd1fa78256830aef4739f8)|`16801: Conversion of psi(x,y) to/from SymPy`|\n|[d5c60e3](https://github.com/sagemath/sagetrac-mirror/commit/d5c60e3418468f8b5325f06997646fb4f9bf6ced)|`24062: pkg version/chksum`|\n|[1cbc23e](https://github.com/sagemath/sagetrac-mirror/commit/1cbc23e8c18d4d93a19c225bf79cc85e3f37fd01)|`24062: remove obsolote patches; adapt remaining`|\n|[94f359f](https://github.com/sagemath/sagetrac-mirror/commit/94f359f5a48696e2b98c346e3f120e9481d89a7c)|`24062: doctest fixes`|\n|[e5de469](https://github.com/sagemath/sagetrac-mirror/commit/e5de46981dbe0b23ce7dbbd1509c53c49ad19663)|`Merge branch 'u/rws/24062' of git://trac.sagemath.org/sage into public/22801-manifold-sympy`|",
    "created_at": "2017-11-06T10:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420064",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:86'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[9c4119a](https://github.com/sagemath/sagetrac-mirror/commit/9c4119a3feda956846bd1fa78256830aef4739f8)|`16801: Conversion of psi(x,y) to/from SymPy`|
|[d5c60e3](https://github.com/sagemath/sagetrac-mirror/commit/d5c60e3418468f8b5325f06997646fb4f9bf6ced)|`24062: pkg version/chksum`|
|[1cbc23e](https://github.com/sagemath/sagetrac-mirror/commit/1cbc23e8c18d4d93a19c225bf79cc85e3f37fd01)|`24062: remove obsolote patches; adapt remaining`|
|[94f359f](https://github.com/sagemath/sagetrac-mirror/commit/94f359f5a48696e2b98c346e3f120e9481d89a7c)|`24062: doctest fixes`|
|[e5de469](https://github.com/sagemath/sagetrac-mirror/commit/e5de46981dbe0b23ce7dbbd1509c53c49ad19663)|`Merge branch 'u/rws/24062' of git://trac.sagemath.org/sage into public/22801-manifold-sympy`|



---

archive/issue_comments_420065.json:
```json
{
    "body": "Changing commit from \"ce4acb44667b5e772bb4bd027ac507e63530b4b6\" to \"e5de46981dbe0b23ce7dbbd1509c53c49ad19663\"",
    "created_at": "2017-11-06T10:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420065",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ce4acb44667b5e772bb4bd027ac507e63530b4b6" to "e5de46981dbe0b23ce7dbbd1509c53c49ad19663"



---

archive/issue_comments_420066.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-11-06T10:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420066",
    "user": "https://github.com/man74cio"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_420067.json:
```json
{
    "body": "<a id='comment:87'></a>\nThe merge with #24062 done in the last commit. \nNo problem for me",
    "created_at": "2017-11-06T10:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420067",
    "user": "https://github.com/man74cio"
}
```

<a id='comment:87'></a>
The merge with #24062 done in the last commit. 
No problem for me



---

archive/issue_comments_420068.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-11-06T14:48:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420068",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_420069.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-11-12T13:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420069",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_420070.json:
```json
{
    "body": "Changing commit from \"e5de46981dbe0b23ce7dbbd1509c53c49ad19663\" to \"1f557696bf5045d4b6b9c73004715385b19e69ca\"",
    "created_at": "2017-11-12T13:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420070",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e5de46981dbe0b23ce7dbbd1509c53c49ad19663" to "1f557696bf5045d4b6b9c73004715385b19e69ca"



---

archive/issue_comments_420071.json:
```json
{
    "body": "<a id='comment:89'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n|                                                                                                                                           |                                                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------|\n|[6eb6bde](https://github.com/sagemath/sagetrac-mirror/commit/6eb6bdefa0cae2a02e421f2e62713d22643e01ba)|`Improve simplifications in calculus on manifolds when derivatives of symbolic functions are involved`|\n|[1f55769](https://github.com/sagemath/sagetrac-mirror/commit/1f557696bf5045d4b6b9c73004715385b19e69ca)|`Merge branch of #22801 into that of #24199`|",
    "created_at": "2017-11-12T13:45:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420071",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:89'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
|                                                                                                                                           |                                                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------|
|[6eb6bde](https://github.com/sagemath/sagetrac-mirror/commit/6eb6bdefa0cae2a02e421f2e62713d22643e01ba)|`Improve simplifications in calculus on manifolds when derivatives of symbolic functions are involved`|
|[1f55769](https://github.com/sagemath/sagetrac-mirror/commit/1f557696bf5045d4b6b9c73004715385b19e69ca)|`Merge branch of #22801 into that of #24199`|



---

archive/issue_comments_420072.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-11-12T13:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420072",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_420073.json:
```json
{
    "body": "Changing dependencies from \"#22802 #24006 #20204\" to \"#22802 #24006 #20204 #24199\"",
    "created_at": "2017-11-12T13:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420073",
    "user": "https://github.com/egourgoulhon"
}
```

Changing dependencies from "#22802 #24006 #20204" to "#22802 #24006 #20204 #24199"



---

archive/issue_comments_420074.json:
```json
{
    "body": "<a id='comment:90'></a>\nThe above commit simply fixes a conflict with #24199. So I am setting the ticket back to \"positive review\".",
    "created_at": "2017-11-12T13:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420074",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:90'></a>
The above commit simply fixes a conflict with #24199. So I am setting the ticket back to "positive review".



---

archive/issue_comments_420075.json:
```json
{
    "body": "Changing dependencies from \"#22802 #24006 #20204 #24199\" to \"#22802 #24006 #20204 #24232\"",
    "created_at": "2017-11-19T10:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420075",
    "user": "https://github.com/egourgoulhon"
}
```

Changing dependencies from "#22802 #24006 #20204 #24199" to "#22802 #24006 #20204 #24232"



---

archive/issue_comments_420076.json:
```json
{
    "body": "<a id='comment:92'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n|                                                                                                                                           |                                                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|\n|[7e5baa5](https://github.com/sagemath/sagetrac-mirror/commit/7e5baa5a956794176c965cd5555c83e79d37b20b)|`Reimplement simplifications in calculus on manifolds via the expression tree`|\n|[61d97c2](https://github.com/sagemath/sagetrac-mirror/commit/61d97c242aaa27f446d58af4e15fbe6d16dfe3f8)|`Remove unnecessary __init__ and slightly change in the treatment of 1/sqrt(...)`|\n|[ec105bb](https://github.com/sagemath/sagetrac-mirror/commit/ec105bbb42a97c9ac2bff745112688c655a0ecb4)|`Use of wildcards for pattern search in simplifications regarding calculus on manifolds`|\n|[87877f0](https://github.com/sagemath/sagetrac-mirror/commit/87877f05a3908e13507afdc281289853a7e1e946)|`Solve merge conflict of #22801 in the dependency #24232`|",
    "created_at": "2017-11-23T16:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420076",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:92'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
|                                                                                                                                           |                                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------|
|[7e5baa5](https://github.com/sagemath/sagetrac-mirror/commit/7e5baa5a956794176c965cd5555c83e79d37b20b)|`Reimplement simplifications in calculus on manifolds via the expression tree`|
|[61d97c2](https://github.com/sagemath/sagetrac-mirror/commit/61d97c242aaa27f446d58af4e15fbe6d16dfe3f8)|`Remove unnecessary __init__ and slightly change in the treatment of 1/sqrt(...)`|
|[ec105bb](https://github.com/sagemath/sagetrac-mirror/commit/ec105bbb42a97c9ac2bff745112688c655a0ecb4)|`Use of wildcards for pattern search in simplifications regarding calculus on manifolds`|
|[87877f0](https://github.com/sagemath/sagetrac-mirror/commit/87877f05a3908e13507afdc281289853a7e1e946)|`Solve merge conflict of #22801 in the dependency #24232`|



---

archive/issue_comments_420077.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-11-23T16:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420077",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_420078.json:
```json
{
    "body": "Changing commit from \"1f557696bf5045d4b6b9c73004715385b19e69ca\" to \"87877f05a3908e13507afdc281289853a7e1e946\"",
    "created_at": "2017-11-23T16:01:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420078",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1f557696bf5045d4b6b9c73004715385b19e69ca" to "87877f05a3908e13507afdc281289853a7e1e946"



---

archive/issue_comments_420079.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-11-23T16:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420079",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_420080.json:
```json
{
    "body": "<a id='comment:93'></a>\nThe above commit simply solves a new merge conflict that appeared after the replacement of #24199 by #24232 in the dependencies.",
    "created_at": "2017-11-23T16:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420080",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:93'></a>
The above commit simply solves a new merge conflict that appeared after the replacement of #24199 by #24232 in the dependencies.



---

archive/issue_comments_420081.json:
```json
{
    "body": "<a id='comment:94'></a>\nSee the following bug report, in case\nhttps://groups.google.com/d/msg/sage-devel/3sN7gVTdNuY/U9v70LoDAwAJ\n\nBy the way, I wonder why you prefer using pexpect interface to maxima, instead of much faster maxima_calcuclus loadable library interface?",
    "created_at": "2017-11-26T10:22:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420081",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:94'></a>
See the following bug report, in case
https://groups.google.com/d/msg/sage-devel/3sN7gVTdNuY/U9v70LoDAwAJ

By the way, I wonder why you prefer using pexpect interface to maxima, instead of much faster maxima_calcuclus loadable library interface?



---

archive/issue_comments_420082.json:
```json
{
    "body": "<a id='comment:95'></a>\nReplying to [dimpase](#comment%3A94):\n> See the following bug report, in case\n> https://groups.google.com/d/msg/sage-devel/3sN7gVTdNuY/U9v70LoDAwAJ\n> \n\n\nAs you pointed out in https://groups.google.com/d/msg/sage-devel/3sN7gVTdNuY/U9v70LoDAwAJ , this bug is not related to this ticket.\n\n> By the way, I wonder why you prefer using pexpect interface to maxima, instead of much faster maxima_calcuclus loadable library interface?\n\n\nCertainly by lack of knowledge... Thanks for your feedback! Can you elaborate a little bit though? Do you mean it is bad to use `expr._maxima_()` for `expr` in `SR`?",
    "created_at": "2017-11-26T14:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420082",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:95'></a>
Replying to [dimpase](#comment%3A94):
> See the following bug report, in case
> https://groups.google.com/d/msg/sage-devel/3sN7gVTdNuY/U9v70LoDAwAJ
> 


As you pointed out in https://groups.google.com/d/msg/sage-devel/3sN7gVTdNuY/U9v70LoDAwAJ , this bug is not related to this ticket.

> By the way, I wonder why you prefer using pexpect interface to maxima, instead of much faster maxima_calcuclus loadable library interface?


Certainly by lack of knowledge... Thanks for your feedback! Can you elaborate a little bit though? Do you mean it is bad to use `expr._maxima_()` for `expr` in `SR`?



---

archive/issue_comments_420083.json:
```json
{
    "body": "<a id='comment:96'></a>\nReplying to [egourgoulhon](#comment%3A95):\n> Certainly by lack of knowledge... Thanks for your feedback! Can you elaborate a little bit though? Do you mean it is bad to use `expr._maxima_()` for `expr` in `SR`?\n\n\nThis uses `sage/interfaces/interfaces.py` which is pexpect. The libmaxima functionality can be found in `sage/interfaces/maxima_lib.py`.",
    "created_at": "2017-11-26T14:28:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420083",
    "user": "https://github.com/rwst"
}
```

<a id='comment:96'></a>
Replying to [egourgoulhon](#comment%3A95):
> Certainly by lack of knowledge... Thanks for your feedback! Can you elaborate a little bit though? Do you mean it is bad to use `expr._maxima_()` for `expr` in `SR`?


This uses `sage/interfaces/interfaces.py` which is pexpect. The libmaxima functionality can be found in `sage/interfaces/maxima_lib.py`.



---

archive/issue_comments_420084.json:
```json
{
    "body": "<a id='comment:97'></a>\nI wonder why `_maxima_lib_()` is used only in few places in the library code, as opposed to `_maxima_()`. Should one open a ticket to modify all these places? \n\nCertainly `maxima_lib` is more robust and ought to be faster on large data of certain type, at least. It runs Maxima in a Python extension module rather than talks to Maxima run as an external process.",
    "created_at": "2017-11-26T15:46:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420084",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:97'></a>
I wonder why `_maxima_lib_()` is used only in few places in the library code, as opposed to `_maxima_()`. Should one open a ticket to modify all these places? 

Certainly `maxima_lib` is more robust and ought to be faster on large data of certain type, at least. It runs Maxima in a Python extension module rather than talks to Maxima run as an external process.



---

archive/issue_comments_420085.json:
```json
{
    "body": "<a id='comment:98'></a>\nReplying to [dimpase](#comment%3A97):\n> I wonder why `_maxima_lib_()` is used only in few places in the library code, as opposed to `_maxima_()`. Should one open a ticket to modify all these places? \n> \n\n\nFrom what you say about `maxima_lib`, I would say yes. In particular, `_maxima_()` is used in various methods of `sage.symbolic.expression.Expression`, like `simplify()`, `simplify_factorial()` and `simplify_trig()`.",
    "created_at": "2017-11-26T16:36:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420085",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:98'></a>
Replying to [dimpase](#comment%3A97):
> I wonder why `_maxima_lib_()` is used only in few places in the library code, as opposed to `_maxima_()`. Should one open a ticket to modify all these places? 
> 


From what you say about `maxima_lib`, I would say yes. In particular, `_maxima_()` is used in various methods of `sage.symbolic.expression.Expression`, like `simplify()`, `simplify_factorial()` and `simplify_trig()`.



---

archive/issue_comments_420086.json:
```json
{
    "body": "<a id='comment:99'></a>\nSee #17753 and https://trac.sagemath.org/wiki/symbolics/maxima for a summary.",
    "created_at": "2017-11-26T16:43:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420086",
    "user": "https://github.com/rwst"
}
```

<a id='comment:99'></a>
See #17753 and https://trac.sagemath.org/wiki/symbolics/maxima for a summary.



---

archive/issue_comments_420087.json:
```json
{
    "body": "<a id='comment:0'></a>\nIn the code at https://groups.google.com/d/msg/sage-devel/3sN7gVTdNuY/U9v70LoDAwAJ, if we change the computation method from 'SR' to 'sympy', the same Maxima/ECL bug occurs when computing g.inverse(), where 'g' is the Riemannian metric. Why does the code call the same simplification logic, disregarding the computation method setting as 'sympy'?",
    "created_at": "2017-11-28T02:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420087",
    "user": "https://github.com/rll2021"
}
```

<a id='comment:0'></a>
In the code at https://groups.google.com/d/msg/sage-devel/3sN7gVTdNuY/U9v70LoDAwAJ, if we change the computation method from 'SR' to 'sympy', the same Maxima/ECL bug occurs when computing g.inverse(), where 'g' is the Riemannian metric. Why does the code call the same simplification logic, disregarding the computation method setting as 'sympy'?



---

archive/issue_comments_420088.json:
```json
{
    "body": "<a id='comment:1'></a>\nPlease open a new ticket.",
    "created_at": "2017-11-28T06:51:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420088",
    "user": "https://github.com/rwst"
}
```

<a id='comment:1'></a>
Please open a new ticket.



---

archive/issue_comments_420089.json:
```json
{
    "body": "<a id='comment:102'></a>\nReplying to [rws](#comment%3A101):\n> Please open a new ticket.\n\n\nThis is #24290. It was on the todo list anyway (cf. the TODO statement in line 794 of https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/manifolds/utilities.py?id=780e1a477fe81c46d32286174fcb58d53e8cbe4c ).",
    "created_at": "2017-11-28T08:43:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420089",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:102'></a>
Replying to [rws](#comment%3A101):
> Please open a new ticket.


This is #24290. It was on the todo list anyway (cf. the TODO statement in line 794 of https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/manifolds/utilities.py?id=780e1a477fe81c46d32286174fcb58d53e8cbe4c ).



---

archive/issue_comments_420090.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-12-13T17:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420090",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_075257.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-13T17:38:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22801#event-75257"
}
```



---

archive/issue_comments_420091.json:
```json
{
    "body": "Changing branch from \"public/22801-manifold-sympy\" to \"87877f05a3908e13507afdc281289853a7e1e946\"",
    "created_at": "2017-12-13T17:38:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22801",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22801#issuecomment-420091",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/22801-manifold-sympy" to "87877f05a3908e13507afdc281289853a7e1e946"
