# Issue 22821: Tweak Mac app handling of Jupyter upgrades

archive/issues_022584.json:
```json
{
    "assignees": [
        "https://github.com/gvol"
    ],
    "body": "Currently, the Mac app only checks once whether people want to upgrade sagenb to Jupyter - and the default save location is atrocious.  From the author:\n\n```\nIf it\u2019s what I think you\u2019re talking about, then yes it is Mac app specific.  It checks to see if there is a file at ~/.sage/sage_notebook.sagenb/users.pickle, and then asks if they want to \"Upgrade\", \"Ask me Later\", or \"Don\u2019task again\".  It won\u2019t ask again unless you choose \"Ask me Later\".  In particular, if you Upgrade then it won\u2019t ask again (because presumably there is no need).  You can reset the check by running:\n\n\tdefaults write org.sagemath.Sage askToUpgradeNB 1\n\nThe check itself is on line 511 of AppController.m in case you need to change anything.  I could easily add a menu option to upgrade, but I didn\u2019t think it was worth it at the time.\n```\nIdeally we'd add a menu option as well.\n\nBlocker because we will have a lot of people who only interact with this via the GUI who will be confused.\n\nCC:  @gvol @jdemeyer @vbraun\n\nBranch/Commit: **[`6ca6859`](https://github.com/sagemath/sagetrac-mirror/commit/6ca685969e894679af93a2a489870ce1d5731dc7)**\n\nReviewer: **Karl-Dieter Crisman, Volker Braun**\n\nAuthor: **Ivan Andrus**\n\nComponent: **user interface**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22821_\n\n",
    "closed_at": "2017-05-26T21:28:15Z",
    "created_at": "2017-04-17T11:00:16Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Tweak Mac app handling of Jupyter upgrades",
    "type": "issue",
    "updated_at": "2017-05-26T21:28:15Z",
    "url": "https://github.com/sagemath/sage/issues/22821",
    "user": "https://github.com/kcrisman"
}
```
Currently, the Mac app only checks once whether people want to upgrade sagenb to Jupyter - and the default save location is atrocious.  From the author:

```
If it’s what I think you’re talking about, then yes it is Mac app specific.  It checks to see if there is a file at ~/.sage/sage_notebook.sagenb/users.pickle, and then asks if they want to "Upgrade", "Ask me Later", or "Don’task again".  It won’t ask again unless you choose "Ask me Later".  In particular, if you Upgrade then it won’t ask again (because presumably there is no need).  You can reset the check by running:

	defaults write org.sagemath.Sage askToUpgradeNB 1

The check itself is on line 511 of AppController.m in case you need to change anything.  I could easily add a menu option to upgrade, but I didn’t think it was worth it at the time.
```
Ideally we'd add a menu option as well.

Blocker because we will have a lot of people who only interact with this via the GUI who will be confused.

CC:  @gvol @jdemeyer @vbraun

Branch/Commit: **[`6ca6859`](https://github.com/sagemath/sagetrac-mirror/commit/6ca685969e894679af93a2a489870ce1d5731dc7)**

Reviewer: **Karl-Dieter Crisman, Volker Braun**

Author: **Ivan Andrus**

Component: **user interface**

_Issue created by migration from https://trac.sagemath.org/ticket/22821_





---

archive/issue_events_320012.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-04-17T11:00:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22821#event-320012"
}
```



---

archive/issue_events_320013.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-04-17T11:00:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20user%20interface",
    "label_color": "000080",
    "label_name": "c: user interface",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22821#event-320013"
}
```



---

archive/issue_events_320014.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-04-17T11:00:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22821#event-320014"
}
```



---

archive/issue_events_320015.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-04-17T11:00:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22821#event-320015"
}
```



---

archive/issue_comments_340210.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThere are two commits.  The first unconditionally adds the menu item and the second greys it out if there are no files to be upgraded.  It's fine with me if you want to just use the first because you think it will be less confusing.\n\nI should note that I didn't test the actual upgrade.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/acf111a3ea6f4870e633a7052ce64c39dc5ec062\"><code>acf111a</code></a></td><td><code>trac 22821 Add menu item for upgrading NB to Jupyter</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7ca77edd2e11f28582d8d41074f832a92bbd258\"><code>b7ca77e</code></a></td><td><code>trac 22821 Grey out the menu item if there is nothing to upgrade</code></td></tr></table>\n",
    "created_at": "2017-04-19T04:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340210",
    "user": "https://github.com/gvol"
}
```

<div id="comment:1" align="right">comment:1</div>

There are two commits.  The first unconditionally adds the menu item and the second greys it out if there are no files to be upgraded.  It's fine with me if you want to just use the first because you think it will be less confusing.

I should note that I didn't test the actual upgrade.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/acf111a3ea6f4870e633a7052ce64c39dc5ec062"><code>acf111a</code></a></td><td><code>trac 22821 Add menu item for upgrading NB to Jupyter</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7ca77edd2e11f28582d8d41074f832a92bbd258"><code>b7ca77e</code></a></td><td><code>trac 22821 Grey out the menu item if there is nothing to upgrade</code></td></tr></table>




---

archive/issue_comments_340211.json:
```json
{
    "body": "Author: **Ivan Andrus**",
    "created_at": "2017-04-19T04:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340211",
    "user": "https://github.com/gvol"
}
```

Author: **Ivan Andrus**



---

archive/issue_comments_340212.json:
```json
{
    "body": "Branch: **[u/iandrus/mac-app-upgrade-nb](https://github.com/sagemath/sagetrac-mirror/tree/u/iandrus/mac-app-upgrade-nb)**",
    "created_at": "2017-04-19T04:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340212",
    "user": "https://github.com/gvol"
}
```

Branch: **[u/iandrus/mac-app-upgrade-nb](https://github.com/sagemath/sagetrac-mirror/tree/u/iandrus/mac-app-upgrade-nb)**



---

archive/issue_comments_340213.json:
```json
{
    "body": "Commit: **[`b7ca77e`](https://github.com/sagemath/sagetrac-mirror/commit/b7ca77edd2e11f28582d8d41074f832a92bbd258)**",
    "created_at": "2017-04-19T04:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340213",
    "user": "https://github.com/gvol"
}
```

Commit: **[`b7ca77e`](https://github.com/sagemath/sagetrac-mirror/commit/b7ca77edd2e11f28582d8d41074f832a92bbd258)**



---

archive/issue_events_320016.json:
```json
{
    "actor": "https://github.com/gvol",
    "created_at": "2017-04-19T04:03:37Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "subject": "https://github.com/gvol",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22821#event-320016"
}
```



---

archive/issue_comments_340214.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nFrom [this sage-release thread](https://groups.google.com/forum/#!topic/sage-release/dZNnFGatC0M):\n\n```\nI used the occasion of SD86 to try out: \n\n        sage-8.0.beta0-OSX_10.11.6-x86_64.app.dmg \n\non a participant's mac. I dragged and dropped the app from the dmg \ninto Applications. I get an icon in the tray. However clicking the \nicon just starts the legacy notebook without reference to Jupyter. \n\nRunning Jupyter from the command line works fine: \n\n        /Applications/Sagexxx/sage -notebook jupyter \n\nDid I miss something along the way? \n```\nShould we then have a different message if there is nothing to upgrade when people want to launch Sage?  I believe the default is supposed to move to Jupyter at that point (Sage 8.0).  Volker, do I understand that correctly that we'd want the Mac app to default to Jupyter at that time?  So maybe we need a message asking  about this.\n\nAlso, Ivan, I think a message warning people on upgrade to choose a good folder to save their upgrades might be good.  I don't know how annoying that would be to implement.  I do like the greyed-out option idea.  Upgrades themselves work fine (or as fine as can be expected), I have tested this.",
    "created_at": "2017-04-19T14:40:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340214",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:2" align="right">comment:2</div>

From [this sage-release thread](https://groups.google.com/forum/#!topic/sage-release/dZNnFGatC0M):

```
I used the occasion of SD86 to try out: 

        sage-8.0.beta0-OSX_10.11.6-x86_64.app.dmg 

on a participant's mac. I dragged and dropped the app from the dmg 
into Applications. I get an icon in the tray. However clicking the 
icon just starts the legacy notebook without reference to Jupyter. 

Running Jupyter from the command line works fine: 

        /Applications/Sagexxx/sage -notebook jupyter 

Did I miss something along the way? 
```
Should we then have a different message if there is nothing to upgrade when people want to launch Sage?  I believe the default is supposed to move to Jupyter at that point (Sage 8.0).  Volker, do I understand that correctly that we'd want the Mac app to default to Jupyter at that time?  So maybe we need a message asking  about this.

Also, Ivan, I think a message warning people on upgrade to choose a good folder to save their upgrades might be good.  I don't know how annoying that would be to implement.  I do like the greyed-out option idea.  Upgrades themselves work fine (or as fine as can be expected), I have tested this.



---

archive/issue_comments_340215.json:
```json
{
    "body": "Changed commit from **[`b7ca77e`](https://github.com/sagemath/sagetrac-mirror/commit/b7ca77edd2e11f28582d8d41074f832a92bbd258)** to **[`aa00327`](https://github.com/sagemath/sagetrac-mirror/commit/aa00327db00dd4c9d034b84088822553e6c657a5)**",
    "created_at": "2017-04-20T03:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340215",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b7ca77e`](https://github.com/sagemath/sagetrac-mirror/commit/b7ca77edd2e11f28582d8d41074f832a92bbd258)** to **[`aa00327`](https://github.com/sagemath/sagetrac-mirror/commit/aa00327db00dd4c9d034b84088822553e6c657a5)**



---

archive/issue_comments_340216.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa00327db00dd4c9d034b84088822553e6c657a5\"><code>aa00327</code></a></td><td><code>trac 22821 Prefer Jupyter by default</code></td></tr></table>\n",
    "created_at": "2017-04-20T03:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340216",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa00327db00dd4c9d034b84088822553e6c657a5"><code>aa00327</code></a></td><td><code>trac 22821 Prefer Jupyter by default</code></td></tr></table>




---

archive/issue_comments_340217.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI changed the default to prefer Jupyter (you can set it in Preferences).  I could add a startup message to make them choose if we wanted.\n\nThere is already a setting for where Jupyter should be saved (~/Documents/Sage/ by default).  Is the problem that the default is bad (or should be set at the very beginning), or that it's not being used?  If the latter, is it not being used when starting the server or when exporting?  Right now my checkout of Sage seems to be irrevocably broken (it always happens when I try to jump too many versions) so I can't test it right now.",
    "created_at": "2017-04-20T03:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340217",
    "user": "https://github.com/gvol"
}
```

<div id="comment:4" align="right">comment:4</div>

I changed the default to prefer Jupyter (you can set it in Preferences).  I could add a startup message to make them choose if we wanted.

There is already a setting for where Jupyter should be saved (~/Documents/Sage/ by default).  Is the problem that the default is bad (or should be set at the very beginning), or that it's not being used?  If the latter, is it not being used when starting the server or when exporting?  Right now my checkout of Sage seems to be irrevocably broken (it always happens when I try to jump too many versions) so I can't test it right now.



---

archive/issue_comments_340218.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@gvol](#comment:4):\n> I changed the default to prefer Jupyter (you can set it in Preferences).  I could add a startup message to make them choose if we wanted.\n\nOh!  I'll have to check that out - my sense was it was within the Sage app bundle directory but I may have just not been paying attention.\n\n> \n> There is already a setting for where Jupyter should be saved (~/Documents/Sage/ by default).  Is the problem that the default is bad (or should be set at the very beginning), or that it's not being used?  If the latter, is it not being used when starting the server or when exporting?  Right now my checkout of Sage seems to be irrevocably broken (it always happens when I try to jump too many versions) so I can't test it right now.",
    "created_at": "2017-04-20T13:06:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340218",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@gvol](#comment:4):
> I changed the default to prefer Jupyter (you can set it in Preferences).  I could add a startup message to make them choose if we wanted.

Oh!  I'll have to check that out - my sense was it was within the Sage app bundle directory but I may have just not been paying attention.

> 
> There is already a setting for where Jupyter should be saved (~/Documents/Sage/ by default).  Is the problem that the default is bad (or should be set at the very beginning), or that it's not being used?  If the latter, is it not being used when starting the server or when exporting?  Right now my checkout of Sage seems to be irrevocably broken (it always happens when I try to jump too many versions) so I can't test it right now.



---

archive/issue_comments_340219.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI can't even get this to open Jupyter now.  (I haven't added the commits on this ticket, to be clear, but I don't think that should impact it.)  I open the app, it opens the sagenb, I sign out, stop the sagenb server, then try to start Jupyter.  The menu icon turns green again, but the log shows no indication anything is going on, `top` shows no Python processes, *and* the check mark in the menu consistently is on \"Stop Jupyter\" no matter what I do.\n\nThen when I click \"Stop Jupyter\" again I get the evil red menu icon, from which I cannot quit Sage.  I have to quit from the Dock in that case.  Ideas?",
    "created_at": "2017-04-20T13:49:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340219",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:6" align="right">comment:6</div>

I can't even get this to open Jupyter now.  (I haven't added the commits on this ticket, to be clear, but I don't think that should impact it.)  I open the app, it opens the sagenb, I sign out, stop the sagenb server, then try to start Jupyter.  The menu icon turns green again, but the log shows no indication anything is going on, `top` shows no Python processes, *and* the check mark in the menu consistently is on "Stop Jupyter" no matter what I do.

Then when I click "Stop Jupyter" again I get the evil red menu icon, from which I cannot quit Sage.  I have to quit from the Dock in that case.  Ideas?



---

archive/issue_comments_340220.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIt doesn't work for me either, always starts sagenb.\n* To run legacy SageNB: `sage --notebook=sagenb`\n* To run Jupyter: `sage --notebook=jupyter`\n* To run the SageNB -> Jupyter converter web app: `sage --notebook=export`\n\nThe menu points are\n* Start SageNB Server\n* Stop SageNB Server\n* Start Jupyter        <-- does nothing?  Log is empty\n* Stop Jupyter \n* Start SageNB Server  <-- again\n* Stop SageNB Server   <-- again\n\n\nBtw preferences -> Use alternate Sage executable is not saved (always unset after restart) and apparently never used",
    "created_at": "2017-04-22T19:29:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340220",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:7" align="right">comment:7</div>

It doesn't work for me either, always starts sagenb.
* To run legacy SageNB: `sage --notebook=sagenb`
* To run Jupyter: `sage --notebook=jupyter`
* To run the SageNB -> Jupyter converter web app: `sage --notebook=export`

The menu points are
* Start SageNB Server
* Stop SageNB Server
* Start Jupyter        <-- does nothing?  Log is empty
* Stop Jupyter 
* Start SageNB Server  <-- again
* Stop SageNB Server   <-- again


Btw preferences -> Use alternate Sage executable is not saved (always unset after restart) and apparently never used



---

archive/issue_comments_340221.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI pushed a fix to ensure that the Jupyter directory exists (which was why it wouldn't start).\n\nHowever, Use Alternate Sage Executable has worked great for me for a long time.  Moreover, you should only see Start/Stop SageNB Server in the menu once.  One set should be hidden based on the setting of preferSageNB.   Volker, can you tell me more about what problems you are experiencing?",
    "created_at": "2017-04-25T04:19:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340221",
    "user": "https://github.com/gvol"
}
```

<div id="comment:8" align="right">comment:8</div>

I pushed a fix to ensure that the Jupyter directory exists (which was why it wouldn't start).

However, Use Alternate Sage Executable has worked great for me for a long time.  Moreover, you should only see Start/Stop SageNB Server in the menu once.  One set should be hidden based on the setting of preferSageNB.   Volker, can you tell me more about what problems you are experiencing?



---

archive/issue_comments_340222.json:
```json
{
    "body": "Changed commit from **[`aa00327`](https://github.com/sagemath/sagetrac-mirror/commit/aa00327db00dd4c9d034b84088822553e6c657a5)** to **[`a06cabd`](https://github.com/sagemath/sagetrac-mirror/commit/a06cabdacb9310c8cd5ebf0e187363f55d4e5840)**",
    "created_at": "2017-04-25T04:22:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340222",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aa00327`](https://github.com/sagemath/sagetrac-mirror/commit/aa00327db00dd4c9d034b84088822553e6c657a5)** to **[`a06cabd`](https://github.com/sagemath/sagetrac-mirror/commit/a06cabdacb9310c8cd5ebf0e187363f55d4e5840)**



---

archive/issue_comments_340223.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a06cabdacb9310c8cd5ebf0e187363f55d4e5840\"><code>a06cabd</code></a></td><td><code>trac 22821 Create Jupyter directory before use and prompt if it doesn\u2019t exist</code></td></tr></table>\n",
    "created_at": "2017-04-25T04:22:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340223",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a06cabdacb9310c8cd5ebf0e187363f55d4e5840"><code>a06cabd</code></a></td><td><code>trac 22821 Create Jupyter directory before use and prompt if it doesn’t exist</code></td></tr></table>




---

archive/issue_comments_340224.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAwesome, yes, I definitely didn't have that directory.  When I change the default in preferences this works.  *However* for some reason the check mark does not move away from \"Stop Jupyter\" no matter what I do.\n\nWhen I switch (still without this ticket) to not preferring old sagenb, I don't see gray out or hidden.   It does switch to the \"lower\" set of start/stop.\n\nI think if you can change the \"please wait\" page to note that they can find the url (including token) if the auto-open doesn't work in the \"View log\", that would be a very helpful easy change.  Also, that loading page should mention where they can switch that preference (in the Preferences -> Notebook and also to start/stop in menu icon).  I hope that is not too much trouble.\n\nI forget by now how to test an update to just the Mac app - I really don't want to have to go to all the trouble to build a new binary, especially now that the `binary-pkg` is an even bigger behemoth (or seems so to me).  Anyone remember?  Pull and make, but then what?",
    "created_at": "2017-04-25T13:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340224",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:10" align="right">comment:10</div>

Awesome, yes, I definitely didn't have that directory.  When I change the default in preferences this works.  *However* for some reason the check mark does not move away from "Stop Jupyter" no matter what I do.

When I switch (still without this ticket) to not preferring old sagenb, I don't see gray out or hidden.   It does switch to the "lower" set of start/stop.

I think if you can change the "please wait" page to note that they can find the url (including token) if the auto-open doesn't work in the "View log", that would be a very helpful easy change.  Also, that loading page should mention where they can switch that preference (in the Preferences -> Notebook and also to start/stop in menu icon).  I hope that is not too much trouble.

I forget by now how to test an update to just the Mac app - I really don't want to have to go to all the trouble to build a new binary, especially now that the `binary-pkg` is an even bigger behemoth (or seems so to me).  Anyone remember?  Pull and make, but then what?



---

archive/issue_comments_340225.json:
```json
{
    "body": "Changed commit from **[`a06cabd`](https://github.com/sagemath/sagetrac-mirror/commit/a06cabdacb9310c8cd5ebf0e187363f55d4e5840)** to **[`5aabb31`](https://github.com/sagemath/sagetrac-mirror/commit/5aabb312cfa68e73d6edd699f3fd79cc3ec65033)**",
    "created_at": "2017-04-26T05:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340225",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a06cabd`](https://github.com/sagemath/sagetrac-mirror/commit/a06cabdacb9310c8cd5ebf0e187363f55d4e5840)** to **[`5aabb31`](https://github.com/sagemath/sagetrac-mirror/commit/5aabb312cfa68e73d6edd699f3fd79cc3ec65033)**



---

archive/issue_comments_340226.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca3f558cc2b1c3e69ae263d280cfbcb2490d6824\"><code>ca3f558</code></a></td><td><code>trac 22821 don\u2019t check the \"Stop Sage\" menu item</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5aabb312cfa68e73d6edd699f3fd79cc3ec65033\"><code>5aabb31</code></a></td><td><code>trac 22821 Open loading page for Jupyter as well as SageNB</code></td></tr></table>\n",
    "created_at": "2017-04-26T05:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340226",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca3f558cc2b1c3e69ae263d280cfbcb2490d6824"><code>ca3f558</code></a></td><td><code>trac 22821 don’t check the "Stop Sage" menu item</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5aabb312cfa68e73d6edd699f3fd79cc3ec65033"><code>5aabb31</code></a></td><td><code>trac 22821 Open loading page for Jupyter as well as SageNB</code></td></tr></table>




---

archive/issue_comments_340227.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nIt still shows the possibility of starting either server.  My thought was that even if you prefer one, you should have the option of using the other.\n\nIt looks like the checkmark of \"Stop Jupyter\" was just set for some reason.  I wonder when I messed that up.  I have fixed it.\n\nI changed the loading page to work for Jupyter too.  Hopefully, it's something like what you had in mind.\n\nTo test, just the mac app\n\n```\nopen ./src/mac-app/Sage.xcodeproj/ # will open in Xcode\n```\nThen Command-R will build and run Sage.app (you'll have to set it to Use Alternate Sage Exectable in Preferences).  I think the only thing that doesn't work is the that Sage Version in About Sage isn't set (but who cares?).",
    "created_at": "2017-04-26T05:11:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340227",
    "user": "https://github.com/gvol"
}
```

<div id="comment:12" align="right">comment:12</div>

It still shows the possibility of starting either server.  My thought was that even if you prefer one, you should have the option of using the other.

It looks like the checkmark of "Stop Jupyter" was just set for some reason.  I wonder when I messed that up.  I have fixed it.

I changed the loading page to work for Jupyter too.  Hopefully, it's something like what you had in mind.

To test, just the mac app

```
open ./src/mac-app/Sage.xcodeproj/ # will open in Xcode
```
Then Command-R will build and run Sage.app (you'll have to set it to Use Alternate Sage Exectable in Preferences).  I think the only thing that doesn't work is the that Sage Version in About Sage isn't set (but who cares?).



---

archive/issue_comments_340228.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThanks for the testing instructions!  It gave me all kinds of warnings but I ignored them because I think they are to stay backwards-compatible - good.\n\nUnfortunately, it seems to still be starting the sagenb?  I don't have that preference set right now, yet it is still starting sagenb by default (even when I just do \"Open Notebook\" from the menu items).  Is there something else that has to happen to make that start?\n\nPerhaps more importantly, I can't find the upgrade menu item.  I know I am using the more recent version because the check mark is gone and the loading page is updated.  Where should I look?\n\nIn general though I can't say enough about your commitment to this project and how nice and usable it is.  We get many people on ask.sagemath who know nothing other than the app, which I think is a testament to this labor of love.  Someday I'll learn Obj-C and be able to help ...",
    "created_at": "2017-04-27T15:46:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340228",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:13" align="right">comment:13</div>

Thanks for the testing instructions!  It gave me all kinds of warnings but I ignored them because I think they are to stay backwards-compatible - good.

Unfortunately, it seems to still be starting the sagenb?  I don't have that preference set right now, yet it is still starting sagenb by default (even when I just do "Open Notebook" from the menu items).  Is there something else that has to happen to make that start?

Perhaps more importantly, I can't find the upgrade menu item.  I know I am using the more recent version because the check mark is gone and the loading page is updated.  Where should I look?

In general though I can't say enough about your commitment to this project and how nice and usable it is.  We get many people on ask.sagemath who know nothing other than the app, which I think is a testament to this labor of love.  Someday I'll learn Obj-C and be able to help ...



---

archive/issue_comments_340229.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI put the upgrade menu item in the main menu, but I forgot to put it in the status bar item (which I assume is what you're using).  I pushed a fix.\n\nThe point about Open Notebook and New Worksheet is interesting.  Those actually only work with SageNB because there was no way to get them to work with Jupyter when I tried a few years ago.  I don't remember the details, but I think it had to do with authentication.  Maybe.  Perhaps we should hide/disable them entirely if SageNB isn't the preferred notebook.  Alternately, we could rename them to indicate they are SageNB only, but I think that's a bit clunky.\n\nI'm glad you like the app, but I have to say it wouldn't be nearly as good without you testing it and keeping me honest.  :-)",
    "created_at": "2017-04-28T04:22:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340229",
    "user": "https://github.com/gvol"
}
```

<div id="comment:14" align="right">comment:14</div>

I put the upgrade menu item in the main menu, but I forgot to put it in the status bar item (which I assume is what you're using).  I pushed a fix.

The point about Open Notebook and New Worksheet is interesting.  Those actually only work with SageNB because there was no way to get them to work with Jupyter when I tried a few years ago.  I don't remember the details, but I think it had to do with authentication.  Maybe.  Perhaps we should hide/disable them entirely if SageNB isn't the preferred notebook.  Alternately, we could rename them to indicate they are SageNB only, but I think that's a bit clunky.

I'm glad you like the app, but I have to say it wouldn't be nearly as good without you testing it and keeping me honest.  :-)



---

archive/issue_comments_340230.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nYou may have pushed a fix locally, but maybe it's not pushed to Trac?\n\nI think that if \"Open Notebook\" became an alias to \"Start X\" where X is the default in the Preferences, that would solve that.  Then \"New Worksheet\" could either go away (in both location, menu and icon) or could be renamed.  My first instinct is to say go away, though I'm not sure why.  It is certainly useful.  \n\nBy the way, if the loading page doesn't already mention the preference for setting your preferred notebook, that would be useful.  I know it's getting a bit busy.",
    "created_at": "2017-04-28T15:57:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340230",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:15" align="right">comment:15</div>

You may have pushed a fix locally, but maybe it's not pushed to Trac?

I think that if "Open Notebook" became an alias to "Start X" where X is the default in the Preferences, that would solve that.  Then "New Worksheet" could either go away (in both location, menu and icon) or could be renamed.  My first instinct is to say go away, though I'm not sure why.  It is certainly useful.  

By the way, if the loading page doesn't already mention the preference for setting your preferred notebook, that would be useful.  I know it's getting a bit busy.



---

archive/issue_comments_340231.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nYou're right.  I tried to push it and it failed.  I'm still not sure why.  I can't push it now either, maybe because I'm at work?\n\nI'll try to look into the others tonight.",
    "created_at": "2017-04-28T17:23:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340231",
    "user": "https://github.com/gvol"
}
```

<div id="comment:16" align="right">comment:16</div>

You're right.  I tried to push it and it failed.  I'm still not sure why.  I can't push it now either, maybe because I'm at work?

I'll try to look into the others tonight.



---

archive/issue_comments_340232.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84fb0088b171dcd9236366265d896b349daad3f8\"><code>84fb008</code></a></td><td><code>Add Upgrade SageNB menu to the status bar item.</code></td></tr></table>\n",
    "created_at": "2017-04-29T01:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340232",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84fb0088b171dcd9236366265d896b349daad3f8"><code>84fb008</code></a></td><td><code>Add Upgrade SageNB menu to the status bar item.</code></td></tr></table>




---

archive/issue_comments_340233.json:
```json
{
    "body": "Changed commit from **[`5aabb31`](https://github.com/sagemath/sagetrac-mirror/commit/5aabb312cfa68e73d6edd699f3fd79cc3ec65033)** to **[`84fb008`](https://github.com/sagemath/sagetrac-mirror/commit/84fb0088b171dcd9236366265d896b349daad3f8)**",
    "created_at": "2017-04-29T01:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340233",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5aabb31`](https://github.com/sagemath/sagetrac-mirror/commit/5aabb312cfa68e73d6edd699f3fd79cc3ec65033)** to **[`84fb008`](https://github.com/sagemath/sagetrac-mirror/commit/84fb0088b171dcd9236366265d896b349daad3f8)**



---

archive/issue_comments_340234.json:
```json
{
    "body": "Changed commit from **[`84fb008`](https://github.com/sagemath/sagetrac-mirror/commit/84fb0088b171dcd9236366265d896b349daad3f8)** to **[`1cfce71`](https://github.com/sagemath/sagetrac-mirror/commit/1cfce71a794ca7812873683cc1e8473c984443f4)**",
    "created_at": "2017-05-03T03:53:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340234",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`84fb008`](https://github.com/sagemath/sagetrac-mirror/commit/84fb0088b171dcd9236366265d896b349daad3f8)** to **[`1cfce71`](https://github.com/sagemath/sagetrac-mirror/commit/1cfce71a794ca7812873683cc1e8473c984443f4)**



---

archive/issue_comments_340235.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b52cfea75aa66f7a7d40ebbee7ef4943a012ee7d\"><code>b52cfea</code></a></td><td><code>trac 22821 Add menu item for upgrading NB to Jupyter</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63f7e83669e5dc852a5d24ed1b9b9294ece11ad5\"><code>63f7e83</code></a></td><td><code>trac 22821 Prefer Jupyter by default</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd241a7ecfb1a4077465eef9f2aa0bd6b3108cc6\"><code>dd241a7</code></a></td><td><code>trac 22821 Create Jupyter directory before use and prompt if it doesn\u2019t exist</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e734a5135ba4ee3b7f72b0312e98fcdf40d1e2d\"><code>7e734a5</code></a></td><td><code>trac 22821 Open loading page for Jupyter as well as SageNB</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cfce71a794ca7812873683cc1e8473c984443f4\"><code>1cfce71</code></a></td><td><code>trac 22821 Clean up menus a little</code></td></tr></table>\n",
    "created_at": "2017-05-03T03:53:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340235",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b52cfea75aa66f7a7d40ebbee7ef4943a012ee7d"><code>b52cfea</code></a></td><td><code>trac 22821 Add menu item for upgrading NB to Jupyter</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63f7e83669e5dc852a5d24ed1b9b9294ece11ad5"><code>63f7e83</code></a></td><td><code>trac 22821 Prefer Jupyter by default</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd241a7ecfb1a4077465eef9f2aa0bd6b3108cc6"><code>dd241a7</code></a></td><td><code>trac 22821 Create Jupyter directory before use and prompt if it doesn’t exist</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e734a5135ba4ee3b7f72b0312e98fcdf40d1e2d"><code>7e734a5</code></a></td><td><code>trac 22821 Open loading page for Jupyter as well as SageNB</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cfce71a794ca7812873683cc1e8473c984443f4"><code>1cfce71</code></a></td><td><code>trac 22821 Clean up menus a little</code></td></tr></table>




---

archive/issue_comments_340236.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI made Open Notebook into \"open a currently running server or start the preferred,\" and hid New Worksheet unless they prefer SageNB.\n\nSince I think we're getting close to something usable (if not there already) I rebased on develop and cleaned up the commits a little.  I hope that's not too onerous.",
    "created_at": "2017-05-03T03:55:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340236",
    "user": "https://github.com/gvol"
}
```

<div id="comment:19" align="right">comment:19</div>

I made Open Notebook into "open a currently running server or start the preferred," and hid New Worksheet unless they prefer SageNB.

Since I think we're getting close to something usable (if not there already) I rebased on develop and cleaned up the commits a little.  I hope that's not too onerous.



---

archive/issue_comments_340237.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nPerfect - and, assuming I can do one final run-through of looking at this in the next few days, I would hope it's better to merge in Sage 8.0 than keep working at this.  Thank you!",
    "created_at": "2017-05-03T04:15:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340237",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:20" align="right">comment:20</div>

Perfect - and, assuming I can do one final run-through of looking at this in the next few days, I would hope it's better to merge in Sage 8.0 than keep working at this.  Thank you!



---

archive/issue_events_320017.json:
```json
{
    "actor": "https://github.com/gvol",
    "created_at": "2017-05-05T00:48:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22821#event-320017"
}
```



---

archive/issue_comments_340238.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nSorry about the delay - I am building the latest Sage beta and will do a final check on this, but I have no reason to believe it's not good enough to go.",
    "created_at": "2017-05-16T15:07:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340238",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:22" align="right">comment:22</div>

Sorry about the delay - I am building the latest Sage beta and will do a final check on this, but I have no reason to believe it's not good enough to go.



---

archive/issue_comments_340239.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThis looks good.  I do note that the new push seems to still default to the legacy notebook even when I didn't have that clicked.  Is that a glitch on my computer because I tested this?  It was already not checked when I started the app on this most recent one.\n\nMost importantly, the upgrade is indeed now always accessible - by far the most important part.\n\nSo the only issue is that on *start only* it seems to always do legacy sagenb even if not checked to do so.  My guess is that there is still some default that went back to \"yes\" or something.  \n\n> I made Open Notebook into \"open a currently running server or start the preferred,\" and hid New Worksheet unless they prefer SageNB.\n\nYes, this works now.  I'll note that \"New Worksheet\" *always* appears in the File menu (as opposed to the menu item).  I don't know if that is intended, though.\n\nOtherwise this should be merged and people should enjoy Sage 8.0!",
    "created_at": "2017-05-16T20:12:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340239",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:23" align="right">comment:23</div>

This looks good.  I do note that the new push seems to still default to the legacy notebook even when I didn't have that clicked.  Is that a glitch on my computer because I tested this?  It was already not checked when I started the app on this most recent one.

Most importantly, the upgrade is indeed now always accessible - by far the most important part.

So the only issue is that on *start only* it seems to always do legacy sagenb even if not checked to do so.  My guess is that there is still some default that went back to "yes" or something.  

> I made Open Notebook into "open a currently running server or start the preferred," and hid New Worksheet unless they prefer SageNB.

Yes, this works now.  I'll note that "New Worksheet" *always* appears in the File menu (as opposed to the menu item).  I don't know if that is intended, though.

Otherwise this should be merged and people should enjoy Sage 8.0!



---

archive/issue_comments_340240.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n> So the only issue is that on start only it seems to always do legacy sagenb even if not checked to do so. My guess is that there is still some default that went back to \"yes\" or something.\n\nIt is amusing to unset the default Jupyter directory, close Sage, restart it, be asked to pick a directory (which is awesome), and then have the *sagenb* notebook start up ;-)",
    "created_at": "2017-05-16T20:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340240",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:24" align="right">comment:24</div>

> So the only issue is that on start only it seems to always do legacy sagenb even if not checked to do so. My guess is that there is still some default that went back to "yes" or something.

It is amusing to unset the default Jupyter directory, close Sage, restart it, be asked to pick a directory (which is awesome), and then have the *sagenb* notebook start up ;-)



---

archive/issue_comments_340241.json:
```json
{
    "body": "Work Issues: **fix default start**",
    "created_at": "2017-05-16T20:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340241",
    "user": "https://github.com/kcrisman"
}
```

Work Issues: **fix default start**



---

archive/issue_events_320018.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-05-16T20:15:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22821#event-320018"
}
```



---

archive/issue_events_320019.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-05-16T20:15:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22821#event-320019"
}
```



---

archive/issue_comments_340242.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nIvan, is the problem here in `AppController.m`?\n\n```\n-(IBAction)openNotebook:(id)sender{\n    if ( jupyterURL != nil ) {\n        [self browseRemoteURL:jupyterURL];\n    } else if ( port != 0 || (defaults && [defaults boolForKey:@\"preferSageNB\"]) ) {\n        [self browseLocalSageURL:@\"\"];\n    } else {\n        [self startJupyter:sender];\n    }\n}\n```\n\nOr conceivably in `start-sage.sh`\n\n```\nif [ \"$NB_TYPE\" = jupyter ]; then\n\n./sage --notebook=jupyter $4 >> \"$SAGE_LOG\" 2>> \"$SAGE_LOG\" &\n\n```\nMaybe this hasn't actually been used properly?\n\nI couldn't find any other place where this seems to be done. In particular \n\n```\n   } else if ( port != 0 || (defaults && [defaults boolForKey:@\"preferSageNB\"]) ) {\n```\nmaybe somehow `port` is set (I couldn't figure out how) accidentally when we start off?\n\nVolker, truly this is otherwise ready to go, just FYI.",
    "created_at": "2017-05-23T21:57:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340242",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:26" align="right">comment:26</div>

Ivan, is the problem here in `AppController.m`?

```
-(IBAction)openNotebook:(id)sender{
    if ( jupyterURL != nil ) {
        [self browseRemoteURL:jupyterURL];
    } else if ( port != 0 || (defaults && [defaults boolForKey:@"preferSageNB"]) ) {
        [self browseLocalSageURL:@""];
    } else {
        [self startJupyter:sender];
    }
}
```

Or conceivably in `start-sage.sh`

```
if [ "$NB_TYPE" = jupyter ]; then

./sage --notebook=jupyter $4 >> "$SAGE_LOG" 2>> "$SAGE_LOG" &

```
Maybe this hasn't actually been used properly?

I couldn't find any other place where this seems to be done. In particular 

```
   } else if ( port != 0 || (defaults && [defaults boolForKey:@"preferSageNB"]) ) {
```
maybe somehow `port` is set (I couldn't figure out how) accidentally when we start off?

Volker, truly this is otherwise ready to go, just FYI.



---

archive/issue_comments_340243.json:
```json
{
    "body": "Changed commit from **[`1cfce71`](https://github.com/sagemath/sagetrac-mirror/commit/1cfce71a794ca7812873683cc1e8473c984443f4)** to **[`6ca6859`](https://github.com/sagemath/sagetrac-mirror/commit/6ca685969e894679af93a2a489870ce1d5731dc7)**",
    "created_at": "2017-05-24T03:13:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340243",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1cfce71`](https://github.com/sagemath/sagetrac-mirror/commit/1cfce71a794ca7812873683cc1e8473c984443f4)** to **[`6ca6859`](https://github.com/sagemath/sagetrac-mirror/commit/6ca685969e894679af93a2a489870ce1d5731dc7)**



---

archive/issue_comments_340244.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f89dd5e2d3cc179b52476d20a2859604ea64644\"><code>6f89dd5</code></a></td><td><code>trac 22821 Hide New Worksheet in the File menu too</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ca685969e894679af93a2a489870ce1d5731dc7\"><code>6ca6859</code></a></td><td><code>trac 22821 Correctly start Jupyter on startup based on setting</code></td></tr></table>\n",
    "created_at": "2017-05-24T03:13:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340244",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f89dd5e2d3cc179b52476d20a2859604ea64644"><code>6f89dd5</code></a></td><td><code>trac 22821 Hide New Worksheet in the File menu too</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ca685969e894679af93a2a489870ce1d5731dc7"><code>6ca6859</code></a></td><td><code>trac 22821 Correctly start Jupyter on startup based on setting</code></td></tr></table>




---

archive/issue_comments_340245.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nOkay, those two should be fixed.  Thanks so much for your patience Karl-Dieter.",
    "created_at": "2017-05-24T03:15:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340245",
    "user": "https://github.com/gvol"
}
```

<div id="comment:28" align="right">comment:28</div>

Okay, those two should be fixed.  Thanks so much for your patience Karl-Dieter.



---

archive/issue_events_320020.json:
```json
{
    "actor": "https://github.com/gvol",
    "created_at": "2017-05-24T03:15:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22821#event-320020"
}
```



---

archive/issue_events_320021.json:
```json
{
    "actor": "https://github.com/gvol",
    "created_at": "2017-05-24T03:15:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22821#event-320021"
}
```



---

archive/issue_comments_340246.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nYes!!!\n\nOnly tiny remaining thing I could find was the preference \"Start server when opening sws files\" might accidentally start Jupyter if that pref is set, but apparently even that works right.  Yay!  Thank you so much.",
    "created_at": "2017-05-24T05:18:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340246",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:29" align="right">comment:29</div>

Yes!!!

Only tiny remaining thing I could find was the preference "Start server when opening sws files" might accidentally start Jupyter if that pref is set, but apparently even that works right.  Yay!  Thank you so much.



---

archive/issue_comments_340247.json:
```json
{
    "body": "Changed work issues from **fix default start** to none",
    "created_at": "2017-05-24T05:18:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340247",
    "user": "https://github.com/kcrisman"
}
```

Changed work issues from **fix default start** to none



---

archive/issue_events_320022.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-05-24T05:18:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22821#event-320022"
}
```



---

archive/issue_events_320023.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2017-05-24T05:18:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22821#event-320023"
}
```



---

archive/issue_comments_340248.json:
```json
{
    "body": "Reviewer: **Karl-Dieter Crisman, Volker Braun**",
    "created_at": "2017-05-24T05:18:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340248",
    "user": "https://github.com/kcrisman"
}
```

Reviewer: **Karl-Dieter Crisman, Volker Braun**



---

archive/issue_events_320024.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-26T21:28:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22821#event-320024"
}
```



---

archive/issue_events_320025.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1f6a0cdc324367b49bead338daf8248c8c6f51b3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-05-26T21:28:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22821#event-320025"
}
```



---

archive/issue_comments_340249.json:
```json
{
    "body": "Changed branch from **[u/iandrus/mac-app-upgrade-nb](https://github.com/sagemath/sagetrac-mirror/tree/u/iandrus/mac-app-upgrade-nb)** to **[`6ca6859`](https://github.com/sagemath/sagetrac-mirror/commit/6ca685969e894679af93a2a489870ce1d5731dc7)**",
    "created_at": "2017-05-26T21:28:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22821#issuecomment-340249",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/iandrus/mac-app-upgrade-nb](https://github.com/sagemath/sagetrac-mirror/tree/u/iandrus/mac-app-upgrade-nb)** to **[`6ca6859`](https://github.com/sagemath/sagetrac-mirror/commit/6ca685969e894679af93a2a489870ce1d5731dc7)**
