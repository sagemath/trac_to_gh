# Issue 22565: Make "sage_input" for polyhedron objects output the backend used

archive/issues_022328.json:
```json
{
    "body": "Currently, the ` sage_input` function of a Polyhedron object does not provide the backend used.\n\n```\n\nsage: P1 = Polyhedron(vertices = [[1, 0], [0, 1]], rays = [[1, 1]], backend='normaliz')\nsage: sage_input(P1)\nPolyhedron(base_ring=ZZ, rays=[(1, 1)], vertices=[(0, 1), (1, 0)])\nsage: P2 = Polyhedron(vertices = [[1, 0], [0, 1]], rays = [[1, 1]], backend='ppl')\nsage: sage_input(P2)\nPolyhedron(base_ring=ZZ, rays=[(1, 1)], vertices=[(0, 1), (1, 0)])\n\n```\n\nIt should be able to give it.\n\nCC:  @mo271 @mkoeppe @videlec tmonteil @fchapoton\n\nKeywords: days84, geometry\n\nBranch/Commit: [28e2b71ef1a9dbe0725e873eec16662f6db593dc](https://github.com/sagemath/sagetrac-mirror/commit/28e2b71ef1a9dbe0725e873eec16662f6db593dc)\n\nWork Issues: Broke the associahedron\n\nReviewer: Jean-Philippe Labb\u00e9, Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Moritz Firsching\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22565\n\n",
    "closed_at": "2017-09-20T22:26:15Z",
    "created_at": "2017-03-10T09:56:45Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Make \"sage_input\" for polyhedron objects output the backend used",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22565",
    "user": "https://github.com/jplab"
}
```
Currently, the ` sage_input` function of a Polyhedron object does not provide the backend used.

```

sage: P1 = Polyhedron(vertices = [[1, 0], [0, 1]], rays = [[1, 1]], backend='normaliz')
sage: sage_input(P1)
Polyhedron(base_ring=ZZ, rays=[(1, 1)], vertices=[(0, 1), (1, 0)])
sage: P2 = Polyhedron(vertices = [[1, 0], [0, 1]], rays = [[1, 1]], backend='ppl')
sage: sage_input(P2)
Polyhedron(base_ring=ZZ, rays=[(1, 1)], vertices=[(0, 1), (1, 0)])

```

It should be able to give it.

CC:  @mo271 @mkoeppe @videlec tmonteil @fchapoton

Keywords: days84, geometry

Branch/Commit: [28e2b71ef1a9dbe0725e873eec16662f6db593dc](https://github.com/sagemath/sagetrac-mirror/commit/28e2b71ef1a9dbe0725e873eec16662f6db593dc)

Work Issues: Broke the associahedron

Reviewer: Jean-Philippe Labbé, Frédéric Chapoton

Author: Moritz Firsching

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22565





---

archive/issue_comments_421960.json:
```json
{
    "body": "<a id='comment:1'></a>\nI agree that we need to have this feature! Perhaps it would make sense to implement a function `get_backend` (like we have in `MixedIntegerLinearProgram`), that returns the `backend` first? (Or perhaps simply call this function `backend`?\n \n\nSo I guess it would be cleanest to store the backend information somehow in `P1._backend`. Should this be done directly in the init of `class Polyhedra_base` in `parent.py`, similar to `P1._ambient_dim`? Or should this rather be done inside each backend class? Or yet elsewhere?\n\nWhat do you think?",
    "created_at": "2017-05-08T20:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421960",
    "user": "https://github.com/mo271"
}
```

<a id='comment:1'></a>
I agree that we need to have this feature! Perhaps it would make sense to implement a function `get_backend` (like we have in `MixedIntegerLinearProgram`), that returns the `backend` first? (Or perhaps simply call this function `backend`?
 

So I guess it would be cleanest to store the backend information somehow in `P1._backend`. Should this be done directly in the init of `class Polyhedra_base` in `parent.py`, similar to `P1._ambient_dim`? Or should this rather be done inside each backend class? Or yet elsewhere?

What do you think?



---

archive/issue_comments_421961.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2017-07-07T14:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421961",
    "user": "https://github.com/mo271"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_421962.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [moritz](#comment%3A1):\n> I agree that we need to have this feature! Perhaps it would make sense to implement a function `get_backend` (like we have in `MixedIntegerLinearProgram`), that returns the `backend` first? (Or perhaps simply call this function `backend`?\n\n\n+1 for getting a function `backend`. (I would choose `backend` to make it similar to `base_ring` and further starting with `get_` is annoying when using tab completion. Just to be sure I would look at the naming conventions of Sage, I guess `backend` is better.)  \n>  \n\n> \n> So I guess it would be cleanest to store the backend information somehow in `P1._backend`. Should this be done directly in the init of `class Polyhedra_base` in `parent.py`, similar to `P1._ambient_dim`? Or should this rather be done inside each backend class? Or yet elsewhere?\n\n\nOne way to go, since each (backend/base_ring) combination creates a different parent in parent.py would be to create an init function for each of these parents that executes the init of the `Polyhedra_base` and adds an attribute `_backend` on top.\n\nBecause doing it in Polyhedra_base seems to be messy (how to know the backend information at this stage?).",
    "created_at": "2017-07-12T09:14:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421962",
    "user": "https://github.com/jplab"
}
```

<a id='comment:3'></a>
Replying to [moritz](#comment%3A1):
> I agree that we need to have this feature! Perhaps it would make sense to implement a function `get_backend` (like we have in `MixedIntegerLinearProgram`), that returns the `backend` first? (Or perhaps simply call this function `backend`?


+1 for getting a function `backend`. (I would choose `backend` to make it similar to `base_ring` and further starting with `get_` is annoying when using tab completion. Just to be sure I would look at the naming conventions of Sage, I guess `backend` is better.)  
>  

> 
> So I guess it would be cleanest to store the backend information somehow in `P1._backend`. Should this be done directly in the init of `class Polyhedra_base` in `parent.py`, similar to `P1._ambient_dim`? Or should this rather be done inside each backend class? Or yet elsewhere?


One way to go, since each (backend/base_ring) combination creates a different parent in parent.py would be to create an init function for each of these parents that executes the init of the `Polyhedra_base` and adds an attribute `_backend` on top.

Because doing it in Polyhedra_base seems to be messy (how to know the backend information at this stage?).



---

archive/issue_comments_421963.json:
```json
{
    "body": "Changing branch from \"\" to \"u/moritz/22565\"",
    "created_at": "2017-07-18T12:01:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421963",
    "user": "https://github.com/mo271"
}
```

Changing branch from "" to "u/moritz/22565"



---

archive/issue_comments_421964.json:
```json
{
    "body": "<a id='comment:5'></a>\nI looked at it again and now think its best to put it in `parent.py.` There a treatment that is analogous to `ambient_dim` and `base_ring` is possible. Please have a look at the patch!\n\nOnce the `backend`-function is approved it will be easy to enhance the `sage_input`-function as requested in the description of the ticket.\n\n---\nNew commits:\n|                                                                                                                                          |                                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[e1e56a7](https://github.com/sagemath/sagetrac-mirror/commit/e1e56a7bf9c73d8455cad526094d4d911e312abb)|`introduce backend parameter, variable and function`|",
    "created_at": "2017-07-18T12:08:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421964",
    "user": "https://github.com/mo271"
}
```

<a id='comment:5'></a>
I looked at it again and now think its best to put it in `parent.py.` There a treatment that is analogous to `ambient_dim` and `base_ring` is possible. Please have a look at the patch!

Once the `backend`-function is approved it will be easy to enhance the `sage_input`-function as requested in the description of the ticket.

---
New commits:
|                                                                                                                                          |                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[e1e56a7](https://github.com/sagemath/sagetrac-mirror/commit/e1e56a7bf9c73d8455cad526094d4d911e312abb)|`introduce backend parameter, variable and function`|



---

archive/issue_comments_421965.json:
```json
{
    "body": "Changing commit from \"\" to \"e1e56a7bf9c73d8455cad526094d4d911e312abb\"",
    "created_at": "2017-07-18T12:08:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421965",
    "user": "https://github.com/mo271"
}
```

Changing commit from "" to "e1e56a7bf9c73d8455cad526094d4d911e312abb"



---

archive/issue_comments_421966.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe backend method looks good. I guess you can proceed with the sage_input part.\n\nThanks!",
    "created_at": "2017-08-22T17:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421966",
    "user": "https://github.com/jplab"
}
```

<a id='comment:6'></a>
The backend method looks good. I guess you can proceed with the sage_input part.

Thanks!



---

archive/issue_comments_421967.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2017-08-22T17:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421967",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_421968.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[afa5286](https://github.com/sagemath/sagetrac-mirror/commit/afa5286f6b7311cdac2e274968c947c90e0976f1)|`introduce backend parameter, variable and function`|\n|[e7f81ec](https://github.com/sagemath/sagetrac-mirror/commit/e7f81ec151bf05e5b3b35b31eb0d8b19c5413270)|`backend function in base.py`|\n|[739af0c](https://github.com/sagemath/sagetrac-mirror/commit/739af0c819306f8efdde2772245e0dc4f7d20e18)|`added 'backend' to 'sage_input'`|",
    "created_at": "2017-08-22T20:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421968",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[afa5286](https://github.com/sagemath/sagetrac-mirror/commit/afa5286f6b7311cdac2e274968c947c90e0976f1)|`introduce backend parameter, variable and function`|
|[e7f81ec](https://github.com/sagemath/sagetrac-mirror/commit/e7f81ec151bf05e5b3b35b31eb0d8b19c5413270)|`backend function in base.py`|
|[739af0c](https://github.com/sagemath/sagetrac-mirror/commit/739af0c819306f8efdde2772245e0dc4f7d20e18)|`added 'backend' to 'sage_input'`|



---

archive/issue_comments_421969.json:
```json
{
    "body": "Changing commit from \"e1e56a7bf9c73d8455cad526094d4d911e312abb\" to \"739af0c819306f8efdde2772245e0dc4f7d20e18\"",
    "created_at": "2017-08-22T20:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421969",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e1e56a7bf9c73d8455cad526094d4d911e312abb" to "739af0c819306f8efdde2772245e0dc4f7d20e18"



---

archive/issue_comments_421970.json:
```json
{
    "body": "<a id='comment:8'></a>\nI have not (yet) added doctests polymake and (py)normaliz; do you think this is needed?",
    "created_at": "2017-08-22T20:31:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421970",
    "user": "https://github.com/mo271"
}
```

<a id='comment:8'></a>
I have not (yet) added doctests polymake and (py)normaliz; do you think this is needed?



---

archive/issue_comments_421971.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [moritz](#comment%3A8):\n> I have not (yet) added doctests polymake and (py)normaliz; do you think this is needed?\n\n\nYes, that would be nice! Especially since they are backends and it's about backends...",
    "created_at": "2017-08-22T21:12:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421971",
    "user": "https://github.com/jplab"
}
```

<a id='comment:9'></a>
Replying to [moritz](#comment%3A8):
> I have not (yet) added doctests polymake and (py)normaliz; do you think this is needed?


Yes, that would be nice! Especially since they are backends and it's about backends...



---

archive/issue_comments_421972.json:
```json
{
    "body": "Changing commit from \"739af0c819306f8efdde2772245e0dc4f7d20e18\" to \"3bd35ca89d586baea6bc9917e46c32f2aff741e8\"",
    "created_at": "2017-08-23T07:32:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421972",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "739af0c819306f8efdde2772245e0dc4f7d20e18" to "3bd35ca89d586baea6bc9917e46c32f2aff741e8"



---

archive/issue_comments_421973.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[3bd35ca](https://github.com/sagemath/sagetrac-mirror/commit/3bd35ca89d586baea6bc9917e46c32f2aff741e8)|`added normaliz and polymake doctests`|",
    "created_at": "2017-08-23T07:32:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421973",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[3bd35ca](https://github.com/sagemath/sagetrac-mirror/commit/3bd35ca89d586baea6bc9917e46c32f2aff741e8)|`added normaliz and polymake doctests`|



---

archive/issue_comments_421974.json:
```json
{
    "body": "<a id='comment:11'></a>\nI have not tested the polymake doctest, since I don't have polymake installed at the moment. Let's see what the bot says..",
    "created_at": "2017-08-23T07:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421974",
    "user": "https://github.com/mo271"
}
```

<a id='comment:11'></a>
I have not tested the polymake doctest, since I don't have polymake installed at the moment. Let's see what the bot says..



---

archive/issue_comments_421975.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-08-23T07:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421975",
    "user": "https://github.com/mo271"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_421976.json:
```json
{
    "body": "<a id='comment:12'></a>\n> I have not tested the polymake doctest, since I don't have polymake installed at the moment. Let's see what the bot says..\n\n\nAll right, I'll have a look!",
    "created_at": "2017-08-23T16:00:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421976",
    "user": "https://github.com/jplab"
}
```

<a id='comment:12'></a>
> I have not tested the polymake doctest, since I don't have polymake installed at the moment. Let's see what the bot says..


All right, I'll have a look!



---

archive/issue_comments_421977.json:
```json
{
    "body": "<a id='comment:13'></a>\nFor now, I get:\n\n```\nsage -t base.py\n**********************************************************************\nFile \"base.py\", line 171, in sage.geometry.polyhedron.base.Polyhedron_base._sage_input_\nFailed example:\n    sage_input(P)                                                                    # optional - polymake\nExpected:\n    Polyhedron(backend='polymake', base_ring=ZZ, rays=[(1, 1)], vertices=[(0, 1), (1, 0)])\nGot:\n    Polyhedron(backend='polymake', base_ring=QQ, rays=[(QQ(1), QQ(1))], vertices=[(QQ(1), QQ(0)), (QQ(0), QQ(1))])\n**********************************************************************\n```\n\nIf you don't want to see the `QQ(.)`, there's the option `preparse=False` in `sage_input`.",
    "created_at": "2017-08-23T21:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421977",
    "user": "https://github.com/jplab"
}
```

<a id='comment:13'></a>
For now, I get:

```
sage -t base.py
**********************************************************************
File "base.py", line 171, in sage.geometry.polyhedron.base.Polyhedron_base._sage_input_
Failed example:
    sage_input(P)                                                                    # optional - polymake
Expected:
    Polyhedron(backend='polymake', base_ring=ZZ, rays=[(1, 1)], vertices=[(0, 1), (1, 0)])
Got:
    Polyhedron(backend='polymake', base_ring=QQ, rays=[(QQ(1), QQ(1))], vertices=[(QQ(1), QQ(0)), (QQ(0), QQ(1))])
**********************************************************************
```

If you don't want to see the `QQ(.)`, there's the option `preparse=False` in `sage_input`.



---

archive/issue_comments_421978.json:
```json
{
    "body": "Changing branch from \"u/moritz/22565\" to \"u/jipilab/22565\"",
    "created_at": "2017-08-23T22:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421978",
    "user": "https://github.com/jplab"
}
```

Changing branch from "u/moritz/22565" to "u/jipilab/22565"



---

archive/issue_comments_421979.json:
```json
{
    "body": "Changing commit from \"3bd35ca89d586baea6bc9917e46c32f2aff741e8\" to \"dd3a1210c6d597995c2483ffec66c4d881ccce8e\"",
    "created_at": "2017-08-23T22:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421979",
    "user": "https://github.com/jplab"
}
```

Changing commit from "3bd35ca89d586baea6bc9917e46c32f2aff741e8" to "dd3a1210c6d597995c2483ffec66c4d881ccce8e"



---

archive/issue_comments_421980.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jean-Philippe Labb\u00e9\"",
    "created_at": "2017-08-23T22:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421980",
    "user": "https://github.com/jplab"
}
```

Changing reviewer from "" to "Jean-Philippe Labbé"



---

archive/issue_comments_421981.json:
```json
{
    "body": "Changing author from \"\" to \"Moritz Firsching\"",
    "created_at": "2017-08-23T22:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421981",
    "user": "https://github.com/jplab"
}
```

Changing author from "" to "Moritz Firsching"



---

archive/issue_comments_421982.json:
```json
{
    "body": "<a id='comment:15'></a>\nHi Moritz,\n\nAll tests pass on beta3. It seems to fix the issue with the backend. I put a TODO in the doctest to add handling of the `preparse` option of `sage_input` eventually to get rid of the `QQ` in the output.\n\nLook at the change and if you are happy, you can set it as positive review.\n\n---\nNew commits:\n|                                                                                                                                          |                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[dd3a121](https://github.com/sagemath/sagetrac-mirror/commit/dd3a1210c6d597995c2483ffec66c4d881ccce8e)|`Fixed a failing polymake test`|",
    "created_at": "2017-08-23T22:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421982",
    "user": "https://github.com/jplab"
}
```

<a id='comment:15'></a>
Hi Moritz,

All tests pass on beta3. It seems to fix the issue with the backend. I put a TODO in the doctest to add handling of the `preparse` option of `sage_input` eventually to get rid of the `QQ` in the output.

Look at the change and if you are happy, you can set it as positive review.

---
New commits:
|                                                                                                                                          |                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[dd3a121](https://github.com/sagemath/sagetrac-mirror/commit/dd3a1210c6d597995c2483ffec66c4d881ccce8e)|`Fixed a failing polymake test`|



---

archive/issue_comments_421983.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-08-24T08:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421983",
    "user": "https://github.com/mo271"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_421984.json:
```json
{
    "body": "<a id='comment:16'></a>\nthanks for the review, JP!",
    "created_at": "2017-08-24T08:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421984",
    "user": "https://github.com/mo271"
}
```

<a id='comment:16'></a>
thanks for the review, JP!



---

archive/issue_comments_421985.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-08-27T22:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421985",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_421986.json:
```json
{
    "body": "<a id='comment:17'></a>\nSee the patchbot result",
    "created_at": "2017-08-27T22:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421986",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>
See the patchbot result



---

archive/issue_comments_421987.json:
```json
{
    "body": "Changing work_issues from \"\" to \"Broke the associahedron\"",
    "created_at": "2017-08-29T12:15:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421987",
    "user": "https://github.com/jplab"
}
```

Changing work_issues from "" to "Broke the associahedron"



---

archive/issue_comments_421988.json:
```json
{
    "body": "<a id='comment:18'></a>\nIt seems that the creation of the associahedron is broken by this code (!?)",
    "created_at": "2017-08-29T12:15:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421988",
    "user": "https://github.com/jplab"
}
```

<a id='comment:18'></a>
It seems that the creation of the associahedron is broken by this code (!?)



---

archive/issue_comments_421989.json:
```json
{
    "body": "<a id='comment:19'></a>\nMaybe the backend must be specified in \n\n```\n        associahedron = super(Associahedra, self)._element_constructor_(None, [inequalities, []])\n```\nnear the end of src/sage/combinat/root_system/associahedron.py",
    "created_at": "2017-08-29T12:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421989",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:19'></a>
Maybe the backend must be specified in 

```
        associahedron = super(Associahedra, self)._element_constructor_(None, [inequalities, []])
```
near the end of src/sage/combinat/root_system/associahedron.py



---

archive/issue_comments_421990.json:
```json
{
    "body": "<a id='comment:20'></a>\n> Maybe the backend must be specified in \n> \n> ```\n>         associahedron = super(Associahedra, self)._element_constructor_(None, [inequalities, []])\n> ```\n> near the end of src/sage/combinat/root_system/associahedron.py\n\n\nThat does not seem to be enough. I'm puzzled by how to fix this. Now the `__init__` of the polyhedron base class requires 4 arguments. But how to pass this new argument when having a subparent class `Associahedra`.\n\nI changed also line 33 like this:\n\n```\n33     parent = Associahedra(QQ, cartan_type.rank(),'ppl')\n```\n\nto get the correct backend. But I still get similar errors. Any cues?",
    "created_at": "2017-08-30T13:49:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421990",
    "user": "https://github.com/jplab"
}
```

<a id='comment:20'></a>
> Maybe the backend must be specified in 
> 
> ```
>         associahedron = super(Associahedra, self)._element_constructor_(None, [inequalities, []])
> ```
> near the end of src/sage/combinat/root_system/associahedron.py


That does not seem to be enough. I'm puzzled by how to fix this. Now the `__init__` of the polyhedron base class requires 4 arguments. But how to pass this new argument when having a subparent class `Associahedra`.

I changed also line 33 like this:

```
33     parent = Associahedra(QQ, cartan_type.rank(),'ppl')
```

to get the correct backend. But I still get similar errors. Any cues?



---

archive/issue_comments_421991.json:
```json
{
    "body": "Changing branch from \"u/jipilab/22565\" to \"public/22565\"",
    "created_at": "2017-08-30T14:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421991",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/jipilab/22565" to "public/22565"



---

archive/issue_comments_421992.json:
```json
{
    "body": "<a id='comment:21'></a>\nHere is a tentative that works.. Maybe Travis would find a better way ?\n\n---\nNew commits:\n|                                                                                                                                          |                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[951735b](https://github.com/sagemath/sagetrac-mirror/commit/951735b5428187980dfa798b7f52fe293733494d)|`trac 22565 fixing associahedra (sort of)`|",
    "created_at": "2017-08-30T14:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421992",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>
Here is a tentative that works.. Maybe Travis would find a better way ?

---
New commits:
|                                                                                                                                          |                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[951735b](https://github.com/sagemath/sagetrac-mirror/commit/951735b5428187980dfa798b7f52fe293733494d)|`trac 22565 fixing associahedra (sort of)`|



---

archive/issue_comments_421993.json:
```json
{
    "body": "Changing commit from \"dd3a1210c6d597995c2483ffec66c4d881ccce8e\" to \"951735b5428187980dfa798b7f52fe293733494d\"",
    "created_at": "2017-08-30T14:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421993",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "dd3a1210c6d597995c2483ffec66c4d881ccce8e" to "951735b5428187980dfa798b7f52fe293733494d"



---

archive/issue_comments_421994.json:
```json
{
    "body": "<a id='comment:22'></a>\nOh, I see! But isn't this a bit weird considering the fact that the class `Associahedra` inherits from `Polyhedra_QQ_ppl`?",
    "created_at": "2017-08-30T14:53:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421994",
    "user": "https://github.com/jplab"
}
```

<a id='comment:22'></a>
Oh, I see! But isn't this a bit weird considering the fact that the class `Associahedra` inherits from `Polyhedra_QQ_ppl`?



---

archive/issue_comments_421995.json:
```json
{
    "body": "<a id='comment:23'></a>\nI think it is a bad idea in the first place to have a class such as `Associahedron_class` inherit from a particular polyhedron backend class.",
    "created_at": "2017-08-30T16:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421995",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>
I think it is a bad idea in the first place to have a class such as `Associahedron_class` inherit from a particular polyhedron backend class.



---

archive/issue_comments_421996.json:
```json
{
    "body": "<a id='comment:24'></a>\nThe bot seems to like the hack.\n\nPerhaps as a follow-up, it would be good to change the inheritance of the `Associahedron_class` to `Polyhedra` ? What do you think?\n\nOtherwise, as of now, I would put this ticket as positive review.",
    "created_at": "2017-09-01T10:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421996",
    "user": "https://github.com/jplab"
}
```

<a id='comment:24'></a>
The bot seems to like the hack.

Perhaps as a follow-up, it would be good to change the inheritance of the `Associahedron_class` to `Polyhedra` ? What do you think?

Otherwise, as of now, I would put this ticket as positive review.



---

archive/issue_comments_421997.json:
```json
{
    "body": "<a id='comment:25'></a>\n`TODO::`\nshould be\n`.. TODO::`\nOtherwise, looks good to me",
    "created_at": "2017-09-02T06:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421997",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:25'></a>
`TODO::`
should be
`.. TODO::`
Otherwise, looks good to me



---

archive/issue_comments_421998.json:
```json
{
    "body": "<a id='comment:26'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[79af7fc](https://github.com/sagemath/sagetrac-mirror/commit/79af7fc626ad322fe8cca88940a4594f4dcc0974)|`introduce backend parameter, variable and function`|\n|[a8de4a7](https://github.com/sagemath/sagetrac-mirror/commit/a8de4a73a64282f6d3d9118ba20b138462dd8316)|`backend function in base.py`|\n|[deebcf7](https://github.com/sagemath/sagetrac-mirror/commit/deebcf7a6fd802e554fcd9f41a47cdf1883c489f)|`added 'backend' to 'sage_input'`|\n|[c10357f](https://github.com/sagemath/sagetrac-mirror/commit/c10357f527e4d35844c48cd6293b5d145db679d0)|`added normaliz and polymake doctests`|\n|[435525a](https://github.com/sagemath/sagetrac-mirror/commit/435525a81becea32418fbe029d62713b7a915593)|`Fixed a failing polymake test`|\n|[04eda4d](https://github.com/sagemath/sagetrac-mirror/commit/04eda4d63c30e26eeb37aa45bdbb649e6896e1e3)|`trac 22565 fixing associahedra (sort of)`|\n|[28e2b71](https://github.com/sagemath/sagetrac-mirror/commit/28e2b71ef1a9dbe0725e873eec16662f6db593dc)|`rebase and '.. TODO'`|",
    "created_at": "2017-09-11T10:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421998",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[79af7fc](https://github.com/sagemath/sagetrac-mirror/commit/79af7fc626ad322fe8cca88940a4594f4dcc0974)|`introduce backend parameter, variable and function`|
|[a8de4a7](https://github.com/sagemath/sagetrac-mirror/commit/a8de4a73a64282f6d3d9118ba20b138462dd8316)|`backend function in base.py`|
|[deebcf7](https://github.com/sagemath/sagetrac-mirror/commit/deebcf7a6fd802e554fcd9f41a47cdf1883c489f)|`added 'backend' to 'sage_input'`|
|[c10357f](https://github.com/sagemath/sagetrac-mirror/commit/c10357f527e4d35844c48cd6293b5d145db679d0)|`added normaliz and polymake doctests`|
|[435525a](https://github.com/sagemath/sagetrac-mirror/commit/435525a81becea32418fbe029d62713b7a915593)|`Fixed a failing polymake test`|
|[04eda4d](https://github.com/sagemath/sagetrac-mirror/commit/04eda4d63c30e26eeb37aa45bdbb649e6896e1e3)|`trac 22565 fixing associahedra (sort of)`|
|[28e2b71](https://github.com/sagemath/sagetrac-mirror/commit/28e2b71ef1a9dbe0725e873eec16662f6db593dc)|`rebase and '.. TODO'`|



---

archive/issue_comments_421999.json:
```json
{
    "body": "Changing commit from \"951735b5428187980dfa798b7f52fe293733494d\" to \"28e2b71ef1a9dbe0725e873eec16662f6db593dc\"",
    "created_at": "2017-09-11T10:07:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-421999",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "951735b5428187980dfa798b7f52fe293733494d" to "28e2b71ef1a9dbe0725e873eec16662f6db593dc"



---

archive/issue_comments_422000.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-09-11T10:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-422000",
    "user": "https://github.com/mo271"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_067006.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-09-11T10:11:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22565#event-67006"
}
```



---

archive/issue_comments_422001.json:
```json
{
    "body": "<a id='comment:29'></a>\nThis looks good to go. The last bot gave a green light.",
    "created_at": "2017-09-19T15:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-422001",
    "user": "https://github.com/jplab"
}
```

<a id='comment:29'></a>
This looks good to go. The last bot gave a green light.



---

archive/issue_comments_422002.json:
```json
{
    "body": "Changing reviewer from \"Jean-Philippe Labb\u00e9\" to \"Jean-Philippe Labb\u00e9, Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2017-09-19T15:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-422002",
    "user": "https://github.com/jplab"
}
```

Changing reviewer from "Jean-Philippe Labbé" to "Jean-Philippe Labbé, Frédéric Chapoton"



---

archive/issue_comments_422003.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-19T15:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-422003",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_422004.json:
```json
{
    "body": "Changing branch from \"public/22565\" to \"28e2b71ef1a9dbe0725e873eec16662f6db593dc\"",
    "created_at": "2017-09-20T22:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-422004",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/22565" to "28e2b71ef1a9dbe0725e873eec16662f6db593dc"



---

archive/issue_events_067007.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-20T22:26:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22565#event-67007"
}
```



---

archive/issue_comments_422005.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-09-20T22:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22565",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22565#issuecomment-422005",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
