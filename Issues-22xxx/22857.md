# Issue 22857: Using symbolic variables in domain 'positive' makes Sage crash

archive/issues_022620.json:
```json
{
    "assignees": [],
    "body": "In Sage 7.6 and 8.0.beta2, we have\n\n```\nsage: a, b = var('a b', domain='positive')\nsage: bool((a-b)*b == 0)\n\n;;;\n;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n;;; Jumping to the outermost toplevel prompt\n;;;\n\nErreur de segmentation (core dumped)\n```\n\nThis was reported on [this ask question](https://ask.sagemath.org/question/37355/computing-riemann-connection-fails-in-maxima/).\n\nCC:  @rwst @sagetrac-tmonteil @slel\n\nBranch/Commit: **[`4cbf230`](https://github.com/sagemath/sagetrac-mirror/commit/4cbf230a0e4c49fc00acdef92cc24bb96f70598c)**\n\nReviewer: **Eric Gourgoulhon, Thierry Monteil**\n\nAuthor: **Dave Morris**\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22857_\n\n",
    "closed_at": "2022-08-01T20:20:44Z",
    "created_at": "2017-04-22T14:07:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Using symbolic variables in domain 'positive' makes Sage crash",
    "type": "issue",
    "updated_at": "2022-08-01T20:20:44Z",
    "url": "https://github.com/sagemath/sage/issues/22857",
    "user": "https://github.com/egourgoulhon"
}
```
In Sage 7.6 and 8.0.beta2, we have

```
sage: a, b = var('a b', domain='positive')
sage: bool((a-b)*b == 0)

;;;
;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
;;; Jumping to the outermost toplevel prompt
;;;

Erreur de segmentation (core dumped)
```

This was reported on [this ask question](https://ask.sagemath.org/question/37355/computing-riemann-connection-fails-in-maxima/).

CC:  @rwst @sagetrac-tmonteil @slel

Branch/Commit: **[`4cbf230`](https://github.com/sagemath/sagetrac-mirror/commit/4cbf230a0e4c49fc00acdef92cc24bb96f70598c)**

Reviewer: **Eric Gourgoulhon, Thierry Monteil**

Author: **Dave Morris**

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/22857_





---

archive/issue_events_318955.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2017-04-22T14:07:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318955"
}
```



---

archive/issue_events_318956.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2017-04-22T14:07:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318956"
}
```



---

archive/issue_events_318957.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2017-04-22T14:07:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318957"
}
```



---

archive/issue_events_318958.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2017-04-22T14:07:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318958"
}
```



---

archive/issue_comments_340992.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nin my machine (mac osx 10.11.6) the command works in v7.5.1, but breaks in v8.0beta2.\n\n```\nsage: version()\n'SageMath version 7.5.1, Release Date: 2017-01-15'\nsage: a, b = var('a b', domain='positive')\nsage: bool((a-b)*b == 0)\nFalse\n```\n\n\n```\nsage: version()\n'SageMath version 8.0.beta2, Release Date: 2017-04-12'\nsage: a, b = var('a b', domain='positive')\nsage: bool((a-b)*b == 0)\n;;;\n;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.\n;;; Jumping to the outermost toplevel prompt\n;;;\n\nIllegal instruction: 4\n```",
    "created_at": "2017-04-22T17:30:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-340992",
    "user": "https://github.com/mforets"
}
```

<div id="comment:2" align="right">comment:2</div>

in my machine (mac osx 10.11.6) the command works in v7.5.1, but breaks in v8.0beta2.

```
sage: version()
'SageMath version 7.5.1, Release Date: 2017-01-15'
sage: a, b = var('a b', domain='positive')
sage: bool((a-b)*b == 0)
False
```


```
sage: version()
'SageMath version 8.0.beta2, Release Date: 2017-04-12'
sage: a, b = var('a b', domain='positive')
sage: bool((a-b)*b == 0)
;;;
;;; Detected access to protected memory, also kwown as 'bus or segmentation fault'.
;;; Jumping to the outermost toplevel prompt
;;;

Illegal instruction: 4
```



---

archive/issue_comments_340993.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,3 +11,5 @@\n \n Erreur de segmentation (core dumped)\n ```\n+\n+This was reported on [this ask question](https://ask.sagemath.org/question/37355/computing-riemann-connection-fails-in-maxima/).\n``````\n",
    "created_at": "2017-04-22T20:58:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-340993",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,3 +11,5 @@
 
 Erreur de segmentation (core dumped)
 ```
+
+This was reported on [this ask question](https://ask.sagemath.org/question/37355/computing-riemann-connection-fails-in-maxima/).
``````




---

archive/issue_comments_340994.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nCan you isolate the actual sequence of maxima commands that lead to the error? Then it's possible to see if it's a bug in ECL or something in Maxima itself (the kind of error suggests it's something that is poorly handled in ECL)",
    "created_at": "2017-04-22T21:20:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-340994",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:4" align="right">comment:4</div>

Can you isolate the actual sequence of maxima commands that lead to the error? Then it's possible to see if it's a bug in ECL or something in Maxima itself (the kind of error suggests it's something that is poorly handled in ECL)



---

archive/issue_comments_340995.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI cannot reproduce it with:\n\n```\nsage: a, b = var('a b')\nsage: (a>0)._maxima_init_assume_()\n'(_SAGE_VAR_a)>(0)'\nsage: maxima.assume(_)\n[_SAGE_VAR_a>0]\nsage: (b>0)._maxima_init_assume_()\n'(_SAGE_VAR_b)>(0)'\nsage: maxima.assume(_)\n[_SAGE_VAR_b>0]\nsage: bool((a-b)*b==0)\nFalse\n```\nbut I can make it disappear with:\n\n```\ndiff --git a/src/sage/symbolic/expression.pyx b/src/sage/symbolic/expression.pyx\nindex 01319b5e68..8522746f27 100644\n--- a/src/sage/symbolic/expression.pyx\n+++ b/src/sage/symbolic/expression.pyx\n@@ -1786,7 +1786,7 @@ cdef class Expression(CommutativeRingElement):\n             pynac_assume_rel(self._gobj)\n             if str(s._sage_()[0]) in ['meaningless','inconsistent','redundant']:\n                 raise ValueError(\"Assumption is %s\" % str(s._sage_()[0]))\n-            _assumptions.append(self)\n+            #_assumptions.append(self)\n \n     def forget(self):\n         \"\"\"\n\n```\nAnyway, with the original trigger ECL goes into an infinite loop:\n\n```\n#114 0x00007ffd8f408645 in L125signdiff_special (v1xlhs=0x3b56401, \n    v2xrhs=0x3b19fb1) at binary-ecl/compar.c:6765\n#115 0x00007ffd8f3ffaaa in L124signdiff (v1x=<optimized out>)\n    at binary-ecl/compar.c:6679\n#116 0x00007ffd8f3f0bf2 in L123sign_mplus (v1x=0x3b56e81)\n    at binary-ecl/compar.c:6420\n#117 0x00007ffd8f409c73 in L108sign1 (v1x=<optimized out>)\n    at binary-ecl/compar.c:5682\n#118 0x00007ffd8f3fb620 in L104sign_ (v1x=0x3b56e81)\n    at binary-ecl/compar.c:5304\n#119 0x00007ffd8f408645 in L125signdiff_special (v1xlhs=0x3b19f51, \n    v2xrhs=0x5ce7180) at binary-ecl/compar.c:6765\n#120 0x00007ffd8f3ffaaa in L124signdiff (v1x=<optimized out>)\n    at binary-ecl/compar.c:6679\n#121 0x00007ffd8f3f0bf2 in L123sign_mplus (v1x=0x3b0b1a1)\n    at binary-ecl/compar.c:6420\n#122 0x00007ffd8f409c73 in L108sign1 (v1x=<optimized out>)\n    at binary-ecl/compar.c:5682\n#123 0x00007ffd8f3fb620 in L104sign_ (v1x=0x3b0b1a1)\n    at binary-ecl/compar.c:5304\n```",
    "created_at": "2017-04-23T06:18:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-340995",
    "user": "https://github.com/rwst"
}
```

<div id="comment:5" align="right">comment:5</div>

I cannot reproduce it with:

```
sage: a, b = var('a b')
sage: (a>0)._maxima_init_assume_()
'(_SAGE_VAR_a)>(0)'
sage: maxima.assume(_)
[_SAGE_VAR_a>0]
sage: (b>0)._maxima_init_assume_()
'(_SAGE_VAR_b)>(0)'
sage: maxima.assume(_)
[_SAGE_VAR_b>0]
sage: bool((a-b)*b==0)
False
```
but I can make it disappear with:

```
diff --git a/src/sage/symbolic/expression.pyx b/src/sage/symbolic/expression.pyx
index 01319b5e68..8522746f27 100644
--- a/src/sage/symbolic/expression.pyx
+++ b/src/sage/symbolic/expression.pyx
@@ -1786,7 +1786,7 @@ cdef class Expression(CommutativeRingElement):
             pynac_assume_rel(self._gobj)
             if str(s._sage_()[0]) in ['meaningless','inconsistent','redundant']:
                 raise ValueError("Assumption is %s" % str(s._sage_()[0]))
-            _assumptions.append(self)
+            #_assumptions.append(self)
 
     def forget(self):
         """

```
Anyway, with the original trigger ECL goes into an infinite loop:

```
#114 0x00007ffd8f408645 in L125signdiff_special (v1xlhs=0x3b56401, 
    v2xrhs=0x3b19fb1) at binary-ecl/compar.c:6765
#115 0x00007ffd8f3ffaaa in L124signdiff (v1x=<optimized out>)
    at binary-ecl/compar.c:6679
#116 0x00007ffd8f3f0bf2 in L123sign_mplus (v1x=0x3b56e81)
    at binary-ecl/compar.c:6420
#117 0x00007ffd8f409c73 in L108sign1 (v1x=<optimized out>)
    at binary-ecl/compar.c:5682
#118 0x00007ffd8f3fb620 in L104sign_ (v1x=0x3b56e81)
    at binary-ecl/compar.c:5304
#119 0x00007ffd8f408645 in L125signdiff_special (v1xlhs=0x3b19f51, 
    v2xrhs=0x5ce7180) at binary-ecl/compar.c:6765
#120 0x00007ffd8f3ffaaa in L124signdiff (v1x=<optimized out>)
    at binary-ecl/compar.c:6679
#121 0x00007ffd8f3f0bf2 in L123sign_mplus (v1x=0x3b0b1a1)
    at binary-ecl/compar.c:6420
#122 0x00007ffd8f409c73 in L108sign1 (v1x=<optimized out>)
    at binary-ecl/compar.c:5682
#123 0x00007ffd8f3fb620 in L104sign_ (v1x=0x3b0b1a1)
    at binary-ecl/compar.c:5304
```



---

archive/issue_comments_340996.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOK here the confirmation:\n\n```\nsage: a, b = var('a b')\nsage: (a>0)._maxima_init_assume_()\n'(_SAGE_VAR_a)>(0)'\nsage: maxima.assume(_)\n[_SAGE_VAR_a>0]\nsage: (b>0)._maxima_init_assume_()\n'(_SAGE_VAR_b)>(0)'\nsage: maxima.assume(_)\n[_SAGE_VAR_b>0]\nsage: maxima._eval_line('is (equal((_SAGE_VAR_a-_SAGE_VAR_b)*_SAGE_VAR_b,0))')\n\n/home/ralf/sage/local/lib/python2.7/site-packages/sage/interfaces/maxima.pyc in _eval_line(self, line, allow_use_file, wait_for_prompt, reformat, error_check, restart_if_needed)\n    791         assert line_echo.strip().endswith(line.strip()), 'mismatch:\\n' + line_echo + line\n    792 \n--> 793         self._expect_expr(self._display_prompt)\n    794         out = self._before()        # input echo + output prompt + output\n    795         if error_check:\n\n/home/ralf/sage/local/lib/python2.7/site-packages/sage/interfaces/maxima.pyc in _expect_expr(self, expr, timeout)\n    713                 i = self._expect.expect(expr,timeout=timeout)\n    714             else:\n--> 715                 i = self._expect.expect(expr)\n    716             if i > 0:\n    717                 v = self._expect.before\n\n/home/ralf/sage/local/lib/python2.7/site-packages/pexpect/spawnbase.pyc in expect(self, pattern, timeout, searchwindowsize, async)\n    319         compiled_pattern_list = self.compile_pattern_list(pattern)\n    320         return self.expect_list(compiled_pattern_list,\n--> 321                 timeout, searchwindowsize, async)\n    322 \n    323     def expect_list(self, pattern_list, timeout=-1, searchwindowsize=-1,\n\n/home/ralf/sage/local/lib/python2.7/site-packages/pexpect/spawnbase.pyc in expect_list(self, pattern_list, timeout, searchwindowsize, async)\n    343             return expect_async(exp, timeout)\n    344         else:\n--> 345             return exp.expect_loop(timeout)\n    346 \n    347     def expect_exact(self, pattern_list, timeout=-1, searchwindowsize=-1,\n\n/home/ralf/sage/local/lib/python2.7/site-packages/pexpect/expect.pyc in expect_loop(self, timeout)\n    103                     timeout = end_time - time.time()\n    104         except EOF as e:\n--> 105             return self.eof(e)\n    106         except TIMEOUT as e:\n    107             return self.timeout(e)\n\n/home/ralf/sage/local/lib/python2.7/site-packages/pexpect/expect.pyc in eof(self, err)\n     48             if err is not None:\n     49                 msg = str(err) + '\\n' + msg\n---> 50             raise EOF(msg)\n     51 \n     52     def timeout(self, err=None):\n\nEOF: End Of File (EOF). Exception style platform.\nMaxima with PID 23086 running /home/ralf/sage/local/bin/maxima --userdir=/home/ralf/.sage/maxima -p /home/ralf/sage/local/bin/sage-maxima.lisp\ncommand: /home/ralf/sage/local/bin/maxima\nargs: ['/home/ralf/sage/local/bin/maxima', '--userdir=/home/ralf/.sage/maxima', '-p', '/home/ralf/sage/local/bin/sage-maxima.lisp']\nbuffer (last 100 chars): ''\nbefore (last 100 chars): \"y, also kwown as 'bus or segmentation fault'.\\r\\n;;; Jumping to the outermost toplevel prompt\\r\\n;;;\\r\\n\\r\\n\"\nafter: <class 'pexpect.exceptions.EOF'>\nmatch: None\nmatch_index: None\nexitstatus: None\nflag_eof: True\npid: 23086\nchild_fd: 14\nclosed: False\ntimeout: None\ndelimiter: <class 'pexpect.exceptions.EOF'>\nlogfile: None\nlogfile_read: None\nlogfile_send: None\nmaxread: 4194304\nignorecase: False\nsearchwindowsize: None\ndelaybeforesend: None\ndelayafterclose: 0.1\ndelayafterterminate: 0.1\nsearcher: searcher_re:\n    0: re.compile(\"<sage-display>\")\nsage: \n```",
    "created_at": "2017-04-23T06:23:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-340996",
    "user": "https://github.com/rwst"
}
```

<div id="comment:6" align="right">comment:6</div>

OK here the confirmation:

```
sage: a, b = var('a b')
sage: (a>0)._maxima_init_assume_()
'(_SAGE_VAR_a)>(0)'
sage: maxima.assume(_)
[_SAGE_VAR_a>0]
sage: (b>0)._maxima_init_assume_()
'(_SAGE_VAR_b)>(0)'
sage: maxima.assume(_)
[_SAGE_VAR_b>0]
sage: maxima._eval_line('is (equal((_SAGE_VAR_a-_SAGE_VAR_b)*_SAGE_VAR_b,0))')

/home/ralf/sage/local/lib/python2.7/site-packages/sage/interfaces/maxima.pyc in _eval_line(self, line, allow_use_file, wait_for_prompt, reformat, error_check, restart_if_needed)
    791         assert line_echo.strip().endswith(line.strip()), 'mismatch:\n' + line_echo + line
    792 
--> 793         self._expect_expr(self._display_prompt)
    794         out = self._before()        # input echo + output prompt + output
    795         if error_check:

/home/ralf/sage/local/lib/python2.7/site-packages/sage/interfaces/maxima.pyc in _expect_expr(self, expr, timeout)
    713                 i = self._expect.expect(expr,timeout=timeout)
    714             else:
--> 715                 i = self._expect.expect(expr)
    716             if i > 0:
    717                 v = self._expect.before

/home/ralf/sage/local/lib/python2.7/site-packages/pexpect/spawnbase.pyc in expect(self, pattern, timeout, searchwindowsize, async)
    319         compiled_pattern_list = self.compile_pattern_list(pattern)
    320         return self.expect_list(compiled_pattern_list,
--> 321                 timeout, searchwindowsize, async)
    322 
    323     def expect_list(self, pattern_list, timeout=-1, searchwindowsize=-1,

/home/ralf/sage/local/lib/python2.7/site-packages/pexpect/spawnbase.pyc in expect_list(self, pattern_list, timeout, searchwindowsize, async)
    343             return expect_async(exp, timeout)
    344         else:
--> 345             return exp.expect_loop(timeout)
    346 
    347     def expect_exact(self, pattern_list, timeout=-1, searchwindowsize=-1,

/home/ralf/sage/local/lib/python2.7/site-packages/pexpect/expect.pyc in expect_loop(self, timeout)
    103                     timeout = end_time - time.time()
    104         except EOF as e:
--> 105             return self.eof(e)
    106         except TIMEOUT as e:
    107             return self.timeout(e)

/home/ralf/sage/local/lib/python2.7/site-packages/pexpect/expect.pyc in eof(self, err)
     48             if err is not None:
     49                 msg = str(err) + '\n' + msg
---> 50             raise EOF(msg)
     51 
     52     def timeout(self, err=None):

EOF: End Of File (EOF). Exception style platform.
Maxima with PID 23086 running /home/ralf/sage/local/bin/maxima --userdir=/home/ralf/.sage/maxima -p /home/ralf/sage/local/bin/sage-maxima.lisp
command: /home/ralf/sage/local/bin/maxima
args: ['/home/ralf/sage/local/bin/maxima', '--userdir=/home/ralf/.sage/maxima', '-p', '/home/ralf/sage/local/bin/sage-maxima.lisp']
buffer (last 100 chars): ''
before (last 100 chars): "y, also kwown as 'bus or segmentation fault'.\r\n;;; Jumping to the outermost toplevel prompt\r\n;;;\r\n\r\n"
after: <class 'pexpect.exceptions.EOF'>
match: None
match_index: None
exitstatus: None
flag_eof: True
pid: 23086
child_fd: 14
closed: False
timeout: None
delimiter: <class 'pexpect.exceptions.EOF'>
logfile: None
logfile_read: None
logfile_send: None
maxread: 4194304
ignorecase: False
searchwindowsize: None
delaybeforesend: None
delayafterclose: 0.1
delayafterterminate: 0.1
searcher: searcher_re:
    0: re.compile("<sage-display>")
sage: 
```



---

archive/issue_comments_340997.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nJust to tell that the bug is still there in Sage 8.7.beta3.",
    "created_at": "2019-02-12T18:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-340997",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:7" align="right">comment:7</div>

Just to tell that the bug is still there in Sage 8.7.beta3.



---

archive/issue_comments_340998.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nStill there in 9.2.beta3",
    "created_at": "2020-07-06T07:38:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-340998",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Still there in 9.2.beta3



---

archive/issue_events_318959.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-06T07:38:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318959"
}
```



---

archive/issue_events_318960.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-06T07:38:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318960"
}
```



---

archive/issue_events_318961.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T16:39:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318961"
}
```



---

archive/issue_events_318962.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T16:39:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318962"
}
```



---

archive/issue_comments_340999.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nStill in 9.2.beta8",
    "created_at": "2020-08-13T16:39:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-340999",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Still in 9.2.beta8



---

archive/issue_events_318963.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T15:35:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318963"
}
```



---

archive/issue_events_318964.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T15:35:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318964"
}
```



---

archive/issue_events_318965.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T15:35:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318965"
}
```



---

archive/issue_events_318966.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T15:35:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318966"
}
```



---

archive/issue_comments_341000.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nLooks like this was fixed by #30063",
    "created_at": "2020-08-29T15:35:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-341000",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Looks like this was fixed by #30063



---

archive/issue_comments_341001.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@mkoeppe](#comment:10):\n> Looks like this was fixed by #30063\n\nIndeed, the bug is no longer there in Sage 9.2.beta10.",
    "created_at": "2020-08-29T22:14:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-341001",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@mkoeppe](#comment:10):
> Looks like this was fixed by #30063

Indeed, the bug is no longer there in Sage 9.2.beta10.



---

archive/issue_comments_341002.json:
```json
{
    "body": "Reviewer: **Eric Gourgoulhon**",
    "created_at": "2020-08-29T22:15:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-341002",
    "user": "https://github.com/egourgoulhon"
}
```

Reviewer: **Eric Gourgoulhon**



---

archive/issue_events_318967.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2020-08-29T22:15:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318967"
}
```



---

archive/issue_events_318968.json:
```json
{
    "actor": "https://github.com/egourgoulhon",
    "created_at": "2020-08-29T22:15:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318968"
}
```



---

archive/issue_comments_341003.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nNo doctest was added for this at #30063. We should add one here.",
    "created_at": "2020-08-30T16:21:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-341003",
    "user": "https://github.com/slel"
}
```

<div id="comment:13" align="right">comment:13</div>

No doctest was added for this at #30063. We should add one here.



---

archive/issue_events_318969.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-08-30T16:21:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318969"
}
```



---

archive/issue_events_318970.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-08-30T16:21:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318970"
}
```



---

archive/issue_events_318971.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-08-30T16:21:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318971"
}
```



---

archive/issue_events_318972.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318972"
}
```



---

archive/issue_events_318973.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318973"
}
```



---

archive/issue_comments_341004.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-341004",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_318974.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318974"
}
```



---

archive/issue_events_318975.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318975"
}
```



---

archive/issue_events_318976.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318976"
}
```



---

archive/issue_events_318977.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318977"
}
```



---

archive/issue_events_318978.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318978"
}
```



---

archive/issue_events_318979.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318979"
}
```



---

archive/issue_events_318980.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:19:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318980"
}
```



---

archive/issue_events_318981.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-05-03T15:19:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318981"
}
```



---

archive/issue_comments_341005.json:
```json
{
    "body": "Branch: **[public/22857](https://github.com/sagemath/sagetrac-mirror/tree/public/22857)**",
    "created_at": "2022-07-24T02:17:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-341005",
    "user": "https://github.com/DaveWitteMorris"
}
```

Branch: **[public/22857](https://github.com/sagemath/sagetrac-mirror/tree/public/22857)**



---

archive/issue_comments_341006.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThe commit just adds a doctest to make sure the problem doesn't come back.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4cbf230a0e4c49fc00acdef92cc24bb96f70598c\">4cbf230</a></td><td><code>doctest for trac 22857</code></td></tr></table>\n",
    "created_at": "2022-07-24T02:19:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-341006",
    "user": "https://github.com/DaveWitteMorris"
}
```

<div id="comment:20" align="right">comment:20</div>

The commit just adds a doctest to make sure the problem doesn't come back.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4cbf230a0e4c49fc00acdef92cc24bb96f70598c">4cbf230</a></td><td><code>doctest for trac 22857</code></td></tr></table>




---

archive/issue_comments_341007.json:
```json
{
    "body": "Author: **Dave Morris**",
    "created_at": "2022-07-24T02:19:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-341007",
    "user": "https://github.com/DaveWitteMorris"
}
```

Author: **Dave Morris**



---

archive/issue_events_318982.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2022-07-24T02:19:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318982"
}
```



---

archive/issue_events_318983.json:
```json
{
    "actor": "https://github.com/DaveWitteMorris",
    "created_at": "2022-07-24T02:19:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318983"
}
```



---

archive/issue_comments_341008.json:
```json
{
    "body": "Commit: **[`4cbf230`](https://github.com/sagemath/sagetrac-mirror/commit/4cbf230a0e4c49fc00acdef92cc24bb96f70598c)**",
    "created_at": "2022-07-24T02:19:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-341008",
    "user": "https://github.com/DaveWitteMorris"
}
```

Commit: **[`4cbf230`](https://github.com/sagemath/sagetrac-mirror/commit/4cbf230a0e4c49fc00acdef92cc24bb96f70598c)**



---

archive/issue_comments_341009.json:
```json
{
    "body": "Changed reviewer from **Eric Gourgoulhon** to **Eric Gourgoulhon, Thierry Monteil**",
    "created_at": "2022-07-24T07:49:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-341009",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Changed reviewer from **Eric Gourgoulhon** to **Eric Gourgoulhon, Thierry Monteil**



---

archive/issue_comments_341010.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nLGTM.",
    "created_at": "2022-07-24T07:49:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-341010",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:21" align="right">comment:21</div>

LGTM.



---

archive/issue_events_318984.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2022-07-24T07:49:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318984"
}
```



---

archive/issue_events_318985.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2022-07-24T07:49:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318985"
}
```



---

archive/issue_comments_341011.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThanks!",
    "created_at": "2022-07-24T07:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-341011",
    "user": "https://github.com/DaveWitteMorris"
}
```

<div id="comment:22" align="right">comment:22</div>

Thanks!



---

archive/issue_comments_341012.json:
```json
{
    "body": "Changed branch from **[public/22857](https://github.com/sagemath/sagetrac-mirror/tree/public/22857)** to **[`4cbf230`](https://github.com/sagemath/sagetrac-mirror/commit/4cbf230a0e4c49fc00acdef92cc24bb96f70598c)**",
    "created_at": "2022-08-01T20:20:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22857#issuecomment-341012",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/22857](https://github.com/sagemath/sagetrac-mirror/tree/public/22857)** to **[`4cbf230`](https://github.com/sagemath/sagetrac-mirror/commit/4cbf230a0e4c49fc00acdef92cc24bb96f70598c)**



---

archive/issue_events_318986.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-08-01T20:20:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318986"
}
```



---

archive/issue_events_318987.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c3f96d42085a047fd80658203b0ecc069ad9cfe5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-08-01T20:20:44Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22857",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22857#event-318987"
}
```
