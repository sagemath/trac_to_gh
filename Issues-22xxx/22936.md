# Issue 22936: Newton polygon of polynomials over power series with infinite precision

archive/issues_022699.json:
```json
{
    "body": "Computing the Newton polygon of a polynomial with coefficients in a ring of power series fails if the coefficients have infinite precision:\n\n```python\nsage: S.<x> = PowerSeriesRing(GF(5))\nsage: R.<y> = S[]\nsage: p = x^2+y+x*y^2\nsage: p.newton_polygon()\nTraceback (most recent call last):\n...\nIndexError: list index out of range\n```\n\n\nCC:  @xcaruso\n\nKeywords: newton polygon\n\nBranch/Commit: [f5fbc720f82b11787301b36efe8359c7e1dc653b](https://github.com/sagemath/sagetrac-mirror/commit/f5fbc720f82b11787301b36efe8359c7e1dc653b)\n\nReviewer: Bruno Grenet, Julian R\u00fcth\n\nAuthor: Xavier Caruso\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22936\n\n",
    "closed_at": "2017-05-14T08:20:02Z",
    "created_at": "2017-05-03T12:33:49Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Newton polygon of polynomials over power series with infinite precision",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22936",
    "user": "https://github.com/bgrenet"
}
```
Computing the Newton polygon of a polynomial with coefficients in a ring of power series fails if the coefficients have infinite precision:

```python
sage: S.<x> = PowerSeriesRing(GF(5))
sage: R.<y> = S[]
sage: p = x^2+y+x*y^2
sage: p.newton_polygon()
Traceback (most recent call last):
...
IndexError: list index out of range
```


CC:  @xcaruso

Keywords: newton polygon

Branch/Commit: [f5fbc720f82b11787301b36efe8359c7e1dc653b](https://github.com/sagemath/sagetrac-mirror/commit/f5fbc720f82b11787301b36efe8359c7e1dc653b)

Reviewer: Bruno Grenet, Julian Rüth

Author: Xavier Caruso

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22936





---

archive/issue_comments_431469.json:
```json
{
    "body": "Changing branch from \"\" to \"u/caruso/newton_polygon_infinite_prec\"",
    "created_at": "2017-05-11T20:21:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431469",
    "user": "https://github.com/xcaruso"
}
```

Changing branch from "" to "u/caruso/newton_polygon_infinite_prec"



---

archive/issue_comments_431470.json:
```json
{
    "body": "<a id='comment:2'></a>\nI attach a small patch fixing this issue.\nI've also updated the method `_factor_of_degree` in order to make the slope factorization work correctly. (Otherwise, at infinite precision, it may never stop.)",
    "created_at": "2017-05-11T20:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431470",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:2'></a>
I attach a small patch fixing this issue.
I've also updated the method `_factor_of_degree` in order to make the slope factorization work correctly. (Otherwise, at infinite precision, it may never stop.)



---

archive/issue_comments_431471.json:
```json
{
    "body": "Changing commit from \"\" to \"8204e97c49c9ef9b1dad0d3b20c3a2cceb0be199\"",
    "created_at": "2017-05-11T20:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431471",
    "user": "https://github.com/xcaruso"
}
```

Changing commit from "" to "8204e97c49c9ef9b1dad0d3b20c3a2cceb0be199"



---

archive/issue_comments_431472.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-11T20:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431472",
    "user": "https://github.com/xcaruso"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_431473.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[61cb00c](https://github.com/sagemath/sagetrac-mirror/commit/61cb00ccf1648775300d83c7896ae058a51b0ebb)|`Newton polygon and slope factorization fixed`|",
    "created_at": "2017-05-11T20:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[61cb00c](https://github.com/sagemath/sagetrac-mirror/commit/61cb00ccf1648775300d83c7896ae058a51b0ebb)|`Newton polygon and slope factorization fixed`|



---

archive/issue_comments_431474.json:
```json
{
    "body": "Changing commit from \"8204e97c49c9ef9b1dad0d3b20c3a2cceb0be199\" to \"61cb00ccf1648775300d83c7896ae058a51b0ebb\"",
    "created_at": "2017-05-11T20:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8204e97c49c9ef9b1dad0d3b20c3a2cceb0be199" to "61cb00ccf1648775300d83c7896ae058a51b0ebb"



---

archive/issue_comments_431475.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[ac0d975](https://github.com/sagemath/sagetrac-mirror/commit/ac0d97598c09c76e7a7b8ccf56e4bad9d6a1ce5a)|`Replace TESTS: by TESTS::`|",
    "created_at": "2017-05-11T20:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431475",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[ac0d975](https://github.com/sagemath/sagetrac-mirror/commit/ac0d97598c09c76e7a7b8ccf56e4bad9d6a1ce5a)|`Replace TESTS: by TESTS::`|



---

archive/issue_comments_431476.json:
```json
{
    "body": "Changing commit from \"61cb00ccf1648775300d83c7896ae058a51b0ebb\" to \"ac0d97598c09c76e7a7b8ccf56e4bad9d6a1ce5a\"",
    "created_at": "2017-05-11T20:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431476",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "61cb00ccf1648775300d83c7896ae058a51b0ebb" to "ac0d97598c09c76e7a7b8ccf56e4bad9d6a1ce5a"



---

archive/issue_comments_431477.json:
```json
{
    "body": "<a id='comment:5'></a>\nLooks good, except for the `TESTS:`. Positive review if the patchbot is happy.\n\n---\nNew commits:\n|                                                                                                                                          |                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[ac0d975](https://github.com/sagemath/sagetrac-mirror/commit/ac0d97598c09c76e7a7b8ccf56e4bad9d6a1ce5a)|`Replace TESTS: by TESTS::`|",
    "created_at": "2017-05-11T20:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431477",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:5'></a>
Looks good, except for the `TESTS:`. Positive review if the patchbot is happy.

---
New commits:
|                                                                                                                                          |                           |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[ac0d975](https://github.com/sagemath/sagetrac-mirror/commit/ac0d97598c09c76e7a7b8ccf56e4bad9d6a1ce5a)|`Replace TESTS: by TESTS::`|



---

archive/issue_comments_431478.json:
```json
{
    "body": "<a id='comment:6'></a>\n~~Two~~ One comment~~s~~:\n\n* You changed too many `TESTS:` by `TESTS::`: There should be double colons only when `TESTS:` is followed by an actual test, not when it is followed by a sentence that explains the test.\n\n* ~~It would be nice to add a test for slope factorization.~~ (The test already exists...)",
    "created_at": "2017-05-12T08:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431478",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:6'></a>
~~Two~~ One comment~~s~~:

* You changed too many `TESTS:` by `TESTS::`: There should be double colons only when `TESTS:` is followed by an actual test, not when it is followed by a sentence that explains the test.

* ~~It would be nice to add a test for slope factorization.~~ (The test already exists...)



---

archive/issue_comments_431479.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-05-12T08:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431479",
    "user": "https://github.com/bgrenet"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_431480.json:
```json
{
    "body": "Changing commit from \"ac0d97598c09c76e7a7b8ccf56e4bad9d6a1ce5a\" to \"f5fbc720f82b11787301b36efe8359c7e1dc653b\"",
    "created_at": "2017-05-12T15:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431480",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ac0d97598c09c76e7a7b8ccf56e4bad9d6a1ce5a" to "f5fbc720f82b11787301b36efe8359c7e1dc653b"



---

archive/issue_comments_431481.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[144898d](https://github.com/sagemath/sagetrac-mirror/commit/144898d6c74b5a5a5657153da744280670e0faae)|`Merge branch 'newton_polygon_infinite_prec' into a`|\n|[f5fbc72](https://github.com/sagemath/sagetrac-mirror/commit/f5fbc720f82b11787301b36efe8359c7e1dc653b)|`Better writing for TESTS::?`|",
    "created_at": "2017-05-12T15:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431481",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[144898d](https://github.com/sagemath/sagetrac-mirror/commit/144898d6c74b5a5a5657153da744280670e0faae)|`Merge branch 'newton_polygon_infinite_prec' into a`|
|[f5fbc72](https://github.com/sagemath/sagetrac-mirror/commit/f5fbc720f82b11787301b36efe8359c7e1dc653b)|`Better writing for TESTS::?`|



---

archive/issue_comments_431482.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-12T15:52:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431482",
    "user": "https://github.com/xcaruso"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_431483.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Bruno Grenet, Julian R\u00fcth\"",
    "created_at": "2017-05-12T16:26:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431483",
    "user": "https://github.com/bgrenet"
}
```

Changing reviewer from "" to "Bruno Grenet, Julian Rüth"



---

archive/issue_comments_431484.json:
```json
{
    "body": "Changing author from \"\" to \"Xavier Caruso\"",
    "created_at": "2017-05-12T16:26:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431484",
    "user": "https://github.com/bgrenet"
}
```

Changing author from "" to "Xavier Caruso"



---

archive/issue_comments_431485.json:
```json
{
    "body": "<a id='comment:9'></a>\nLGTM, thanks for the patch!",
    "created_at": "2017-05-12T16:26:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431485",
    "user": "https://github.com/bgrenet"
}
```

<a id='comment:9'></a>
LGTM, thanks for the patch!



---

archive/issue_comments_431486.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-12T16:26:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431486",
    "user": "https://github.com/bgrenet"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_067657.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-14T08:20:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22936#event-67657"
}
```



---

archive/issue_comments_431487.json:
```json
{
    "body": "Changing branch from \"u/caruso/newton_polygon_infinite_prec\" to \"f5fbc720f82b11787301b36efe8359c7e1dc653b\"",
    "created_at": "2017-05-14T08:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431487",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/caruso/newton_polygon_infinite_prec" to "f5fbc720f82b11787301b36efe8359c7e1dc653b"



---

archive/issue_comments_431488.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-14T08:20:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22936",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22936#issuecomment-431488",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
