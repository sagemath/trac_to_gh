# Issue 22649: py3 use richcmp for morphisms of schemes

archive/issues_022412.json:
```json
{
    "body": "tentative to move towards python3\n\n**CC:**  @tscrim @jdemeyer @bhutz @JohnCremona rlmiller\n\n**Branch/Commit:** [6f72778fb233bb50d42586bce56d8f7d0b1f947b](https://github.com/sagemath/sagetrac-mirror/commit/6f72778fb233bb50d42586bce56d8f7d0b1f947b)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/22649\n\n",
    "closed_at": "2017-04-16T11:31:22Z",
    "created_at": "2017-03-19T20:43:15Z",
    "labels": [
        "component: python3",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "py3 use richcmp for morphisms of schemes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22649",
    "user": "https://github.com/fchapoton"
}
```
tentative to move towards python3

**CC:**  @tscrim @jdemeyer @bhutz @JohnCremona rlmiller

**Branch/Commit:** [6f72778fb233bb50d42586bce56d8f7d0b1f947b](https://github.com/sagemath/sagetrac-mirror/commit/6f72778fb233bb50d42586bce56d8f7d0b1f947b)

**Reviewer:** Travis Scrimshaw

**Author:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/22649





---

archive/issue_comments_340716.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f301b9e18da69fee529fac9819f1413af4c933f3\">f301b9e</a></td><td><code>tentative use of richcmp for morphisms of schemes</code></td></tr></table>\n",
    "created_at": "2017-03-19T20:44:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340716",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f301b9e18da69fee529fac9819f1413af4c933f3">f301b9e</a></td><td><code>tentative use of richcmp for morphisms of schemes</code></td></tr></table>




---

archive/issue_comments_340717.json:
```json
{
    "body": "**Branch:** [u/chapoton/22649](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22649)",
    "created_at": "2017-03-19T20:44:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340717",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/chapoton/22649](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22649)



---

archive/issue_comments_340718.json:
```json
{
    "body": "**Commit:** [f301b9e18da69fee529fac9819f1413af4c933f3](https://github.com/sagemath/sagetrac-mirror/commit/f301b9e18da69fee529fac9819f1413af4c933f3)",
    "created_at": "2017-03-19T20:44:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340718",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [f301b9e18da69fee529fac9819f1413af4c933f3](https://github.com/sagemath/sagetrac-mirror/commit/f301b9e18da69fee529fac9819f1413af4c933f3)



---

archive/issue_comments_340719.json:
```json
{
    "body": "<a id='comment:2'></a>\nalmost works..",
    "created_at": "2017-03-20T19:24:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340719",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
almost works..



---

archive/issue_comments_340720.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04cbb20db3d893ff5611a6a9483f20ab7446f31e\">04cbb20</a></td><td><code>Merge branch 'u/chapoton/22649' in 8.0.b0</code></td></tr></table>\n",
    "created_at": "2017-04-01T19:59:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340720",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04cbb20db3d893ff5611a6a9483f20ab7446f31e">04cbb20</a></td><td><code>Merge branch 'u/chapoton/22649' in 8.0.b0</code></td></tr></table>




---

archive/issue_comments_340721.json:
```json
{
    "body": "**Changing commit** from \"[f301b9e18da69fee529fac9819f1413af4c933f3](https://github.com/sagemath/sagetrac-mirror/commit/f301b9e18da69fee529fac9819f1413af4c933f3)\" to \"[04cbb20db3d893ff5611a6a9483f20ab7446f31e](https://github.com/sagemath/sagetrac-mirror/commit/04cbb20db3d893ff5611a6a9483f20ab7446f31e)\".",
    "created_at": "2017-04-01T19:59:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340721",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f301b9e18da69fee529fac9819f1413af4c933f3](https://github.com/sagemath/sagetrac-mirror/commit/f301b9e18da69fee529fac9819f1413af4c933f3)" to "[04cbb20db3d893ff5611a6a9483f20ab7446f31e](https://github.com/sagemath/sagetrac-mirror/commit/04cbb20db3d893ff5611a6a9483f20ab7446f31e)".



---

archive/issue_comments_340722.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c5e225979719cccc098fda4e2bd2d5673ca75a4\">5c5e225</a></td><td><code>trac 22649 correct failing doctests</code></td></tr></table>\n",
    "created_at": "2017-04-01T20:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c5e225979719cccc098fda4e2bd2d5673ca75a4">5c5e225</a></td><td><code>trac 22649 correct failing doctests</code></td></tr></table>




---

archive/issue_comments_340723.json:
```json
{
    "body": "**Changing commit** from \"[04cbb20db3d893ff5611a6a9483f20ab7446f31e](https://github.com/sagemath/sagetrac-mirror/commit/04cbb20db3d893ff5611a6a9483f20ab7446f31e)\" to \"[5c5e225979719cccc098fda4e2bd2d5673ca75a4](https://github.com/sagemath/sagetrac-mirror/commit/5c5e225979719cccc098fda4e2bd2d5673ca75a4)\".",
    "created_at": "2017-04-01T20:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340723",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[04cbb20db3d893ff5611a6a9483f20ab7446f31e](https://github.com/sagemath/sagetrac-mirror/commit/04cbb20db3d893ff5611a6a9483f20ab7446f31e)" to "[5c5e225979719cccc098fda4e2bd2d5673ca75a4](https://github.com/sagemath/sagetrac-mirror/commit/5c5e225979719cccc098fda4e2bd2d5673ca75a4)".



---

archive/issue_comments_340724.json:
```json
{
    "body": "<a id='comment:5'></a>\nIt seems that the current state of this ticket has the following effect:\n\n**Before**, comparison of an element of projective space Pn with \"other\" tried (by itself) to convert \"other\" to an element of Pn\n\n**After**, no such conversion is performed. This means that comparison behaves differently, for example P1(0,1) == 0 is not True.\n\nThis should rather be fixed by a proper coercion, maybe ?",
    "created_at": "2017-04-01T20:42:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340724",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>
It seems that the current state of this ticket has the following effect:

**Before**, comparison of an element of projective space Pn with "other" tried (by itself) to convert "other" to an element of Pn

**After**, no such conversion is performed. This means that comparison behaves differently, for example P1(0,1) == 0 is not True.

This should rather be fixed by a proper coercion, maybe ?



---

archive/issue_events_205927.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-04-01T20:42:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22649#event-205927"
}
```



---

archive/issue_comments_340725.json:
```json
{
    "body": "**Changing commit** from \"[5c5e225979719cccc098fda4e2bd2d5673ca75a4](https://github.com/sagemath/sagetrac-mirror/commit/5c5e225979719cccc098fda4e2bd2d5673ca75a4)\" to \"[6f72778fb233bb50d42586bce56d8f7d0b1f947b](https://github.com/sagemath/sagetrac-mirror/commit/6f72778fb233bb50d42586bce56d8f7d0b1f947b)\".",
    "created_at": "2017-04-02T18:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340725",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5c5e225979719cccc098fda4e2bd2d5673ca75a4](https://github.com/sagemath/sagetrac-mirror/commit/5c5e225979719cccc098fda4e2bd2d5673ca75a4)" to "[6f72778fb233bb50d42586bce56d8f7d0b1f947b](https://github.com/sagemath/sagetrac-mirror/commit/6f72778fb233bb50d42586bce56d8f7d0b1f947b)".



---

archive/issue_comments_340726.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f72778fb233bb50d42586bce56d8f7d0b1f947b\">6f72778</a></td><td><code>trac 22649 fixing doctests again</code></td></tr></table>\n",
    "created_at": "2017-04-02T18:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340726",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f72778fb233bb50d42586bce56d8f7d0b1f947b">6f72778</a></td><td><code>trac 22649 fixing doctests again</code></td></tr></table>




---

archive/issue_comments_340727.json:
```json
{
    "body": "<a id='comment:7'></a>\none doctest failure should be solved by #22743",
    "created_at": "2017-04-02T19:19:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340727",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
one doctest failure should be solved by #22743



---

archive/issue_comments_340728.json:
```json
{
    "body": "<a id='comment:8'></a>\nMay be good now. Back to needs review. Waiting for a bot to go through.",
    "created_at": "2017-04-07T16:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340728",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
May be good now. Back to needs review. Waiting for a bot to go through.



---

archive/issue_events_205928.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-04-07T16:36:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22649#event-205928"
}
```



---

archive/issue_events_205929.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-04-07T16:36:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22649#event-205929"
}
```



---

archive/issue_comments_340729.json:
```json
{
    "body": "<a id='comment:9'></a>\nok,green bot, please review",
    "created_at": "2017-04-11T20:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340729",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>
ok,green bot, please review



---

archive/issue_comments_340730.json:
```json
{
    "body": "<a id='comment:10'></a>\nI think you might want to cc some of the people who work on schemes to look at this because of the behavior change. I don't know enough about that area of math or how that code is used to say whether or not the change is likely to break stuff.",
    "created_at": "2017-04-11T22:07:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340730",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
I think you might want to cc some of the people who work on schemes to look at this because of the behavior change. I don't know enough about that area of math or how that code is used to say whether or not the change is likely to break stuff.



---

archive/issue_comments_340731.json:
```json
{
    "body": "<a id='comment:11'></a>\nok, but who are they ?",
    "created_at": "2017-04-12T06:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340731",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>
ok, but who are they ?



---

archive/issue_comments_340732.json:
```json
{
    "body": "<a id='comment:13'></a>\nI agree that coercion is the right way to go (it's been on the TODO list for awhile now).\n\nAs for this change without coercion. I'm not concerned with most of the schemes files as anything being careful about where points live will be fine and those short cuts are much less intuitive when the dimension is >1. I thought the elliptic curve files used the implicit P(0,1)==0 fairly often, but it seems like all tests currently pass. Perhaps John Cremona can comment more on the elliptic curve perspective. \n\nIt might be a little more annoying to the user until we get coercion for schemes implemented, but I don't see anything wrong with the new behavior.",
    "created_at": "2017-04-12T14:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340732",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:13'></a>
I agree that coercion is the right way to go (it's been on the TODO list for awhile now).

As for this change without coercion. I'm not concerned with most of the schemes files as anything being careful about where points live will be fine and those short cuts are much less intuitive when the dimension is >1. I thought the elliptic curve files used the implicit P(0,1)==0 fairly often, but it seems like all tests currently pass. Perhaps John Cremona can comment more on the elliptic curve perspective. 

It might be a little more annoying to the user until we get coercion for schemes implemented, but I don't see anything wrong with the new behavior.



---

archive/issue_comments_340733.json:
```json
{
    "body": "<a id='comment:14'></a>\n@JohnCremona, any comments ?",
    "created_at": "2017-04-15T09:56:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340733",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>
@JohnCremona, any comments ?



---

archive/issue_comments_340734.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [chapoton](#comment%3A14):\n> @JohnCremona, any comments ?\nNo. I try to avoid looking at this low level stuff so if tests still pass and it is no slower to test equality of points on elliptic curves then go ahead.",
    "created_at": "2017-04-15T13:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340734",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:15'></a>
Replying to [chapoton](#comment%3A14):
> @JohnCremona, any comments ?
No. I try to avoid looking at this low level stuff so if tests still pass and it is no slower to test equality of points on elliptic curves then go ahead.



---

archive/issue_comments_340735.json:
```json
{
    "body": "<a id='comment:16'></a>\nSince that is a relatively special case, I don't think it will be used that much. If it is desired, then 1-dim projective spaces from their base rings, which would be the simplest way to get the old behavior back. (At least, this is my impression from quickly looking at things.) So I'm setting a positive review and the coercion can be done on a followup ticket.",
    "created_at": "2017-04-15T16:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340735",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>
Since that is a relatively special case, I don't think it will be used that much. If it is desired, then 1-dim projective spaces from their base rings, which would be the simplest way to get the old behavior back. (At least, this is my impression from quickly looking at things.) So I'm setting a positive review and the coercion can be done on a followup ticket.



---

archive/issue_comments_340736.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2017-04-15T16:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340736",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_events_205930.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-04-15T16:22:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22649#event-205930"
}
```



---

archive/issue_events_205931.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-04-15T16:22:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22649#event-205931"
}
```



---

archive/issue_events_205932.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-16T11:31:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22649#event-205932"
}
```



---

archive/issue_events_205933.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-16T11:31:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22649#event-205933"
}
```



---

archive/issue_comments_340737.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/22649](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22649)\" to \"[6f72778fb233bb50d42586bce56d8f7d0b1f947b](https://github.com/sagemath/sagetrac-mirror/commit/6f72778fb233bb50d42586bce56d8f7d0b1f947b)\".",
    "created_at": "2017-04-16T11:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22649#issuecomment-340737",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/chapoton/22649](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22649)" to "[6f72778fb233bb50d42586bce56d8f7d0b1f947b](https://github.com/sagemath/sagetrac-mirror/commit/6f72778fb233bb50d42586bce56d8f7d0b1f947b)".
