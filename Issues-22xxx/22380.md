# Issue 22380: Upgrade to cvxopt 1.2.x

archive/issues_022143.json:
```json
{
    "assignees": [
        "https://github.com/embray"
    ],
    "body": "This ticket is to upgrade to cvxopt 1.2.3\n- **Download page**: https://pypi.org/project/cvxopt/#files\n- **Tarballs**: \n  * https://files.pythonhosted.org/packages/00/02/13657bcd12d93f53b64a19b68d204f43d5f3247c29287c9eaeefcfa58fb9/cvxopt-1.2.3.tar.gz\n  * https://github.com/DrTimothyAldenDavis/SuiteSparse/archive/v5.6.0.tar.gz\n\n[Somehow downloads as `SuiteSparse-5.6.0.tar.gz` in chromium]\nSince cvxopt 1.1.9, [SuiteSparse](http://faculty.cse.tamu.edu/davis/suitesparse.html)\nis no longer included, thus it will have to be packaged separately.\n\nTicket #19687 was our previous upgrade, to cvxopt 1.1.8 (released 2015-09-22).\n\nCC:  @antonio-rojas @embray @kiwifb @timokau @infinity0 @sagetrac-pcpa @saraedum @slel @strogdon @tobihan @sagetrac-tmonteil\n\nKeywords: **upgrade, cvxopt**\n\nBranch: **[`e23d5c5`](https://github.com/sagemath/sagetrac-mirror/commit/e23d5c514ed9e6f6f6d0e7252b6b085ee8d98b5b)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Fran\u00e7ois Bissey**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22380_\n\n",
    "closed_at": "2019-11-28T21:53:48Z",
    "created_at": "2017-02-14T05:47:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to cvxopt 1.2.x",
    "type": "issue",
    "updated_at": "2019-12-02T11:58:55Z",
    "url": "https://github.com/sagemath/sage/issues/22380",
    "user": "https://github.com/dimpase"
}
```
This ticket is to upgrade to cvxopt 1.2.3
- **Download page**: https://pypi.org/project/cvxopt/#files
- **Tarballs**: 
  * https://files.pythonhosted.org/packages/00/02/13657bcd12d93f53b64a19b68d204f43d5f3247c29287c9eaeefcfa58fb9/cvxopt-1.2.3.tar.gz
  * https://github.com/DrTimothyAldenDavis/SuiteSparse/archive/v5.6.0.tar.gz

[Somehow downloads as `SuiteSparse-5.6.0.tar.gz` in chromium]
Since cvxopt 1.1.9, [SuiteSparse](http://faculty.cse.tamu.edu/davis/suitesparse.html)
is no longer included, thus it will have to be packaged separately.

Ticket #19687 was our previous upgrade, to cvxopt 1.1.8 (released 2015-09-22).

CC:  @antonio-rojas @embray @kiwifb @timokau @infinity0 @sagetrac-pcpa @saraedum @slel @strogdon @tobihan @sagetrac-tmonteil

Keywords: **upgrade, cvxopt**

Branch: **[`e23d5c5`](https://github.com/sagemath/sagetrac-mirror/commit/e23d5c514ed9e6f6f6d0e7252b6b085ee8d98b5b)**

Reviewer: **Dima Pasechnik**

Author: **François Bissey**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/22380_





---

archive/issue_events_314439.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-02-14T05:47:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314439"
}
```



---

archive/issue_events_314440.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-02-14T05:47:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314440"
}
```



---

archive/issue_events_314441.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-02-14T05:47:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314441"
}
```



---

archive/issue_events_314442.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-02-14T05:47:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314442"
}
```



---

archive/issue_comments_330760.json:
```json
{
    "body": "Attachment: **[LICENSE.txt](https://github.com/sagemath/sage/files/ticket22380/LICENSE.txt)**\n\nsuite-sparse license",
    "created_at": "2017-02-14T08:58:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330760",
    "user": "https://github.com/dimpase"
}
```

Attachment: **[LICENSE.txt](https://github.com/sagemath/sage/files/ticket22380/LICENSE.txt)**

suite-sparse license



---

archive/issue_comments_330761.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,4 @@\n cvxopt 1.1.9 was released in Nov 2016, so we need to update.\n+\n+[SuiteSparse http://faculty.cse.tamu.edu/davis/suitesparse.html] is no longer included, thus we will have to package\n+it seperately.\n``````\n",
    "created_at": "2017-02-14T09:05:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330761",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,4 @@
 cvxopt 1.1.9 was released in Nov 2016, so we need to update.
+
+[SuiteSparse http://faculty.cse.tamu.edu/davis/suitesparse.html] is no longer included, thus we will have to package
+it seperately.
``````




---

archive/issue_comments_330762.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nthe 1st task would be to understand whether the Suite tarfile needs to be cut to exclude non-GPL compatible parts (see attachment)...",
    "created_at": "2017-02-14T09:05:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330762",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1" align="right">comment:1</div>

the 1st task would be to understand whether the Suite tarfile needs to be cut to exclude non-GPL compatible parts (see attachment)...



---

archive/issue_comments_330763.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI don't know about debian and other but we split `suitesparse` in components in Gentoo. I would be shocked if the other didn't do the same. It looks like upstream integrated a lot of the autoconfig patches that were floating around which makes life easier.\nWhat cvxopt needs:\n* suitesparseconfig\n   *amd\n     *umfpack\n  *colamd\n     *cholmod\n\nIndentation is for dependency. That's without optional or more complicated configuration - a minimal setup (although options using blas/lapack could be enabled without extra burden). All the above in mimimum configuration is LGPL 2.1. In non-mimimum configuration some switch to GPL-2.",
    "created_at": "2017-02-14T09:52:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330763",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:2" align="right">comment:2</div>

I don't know about debian and other but we split `suitesparse` in components in Gentoo. I would be shocked if the other didn't do the same. It looks like upstream integrated a lot of the autoconfig patches that were floating around which makes life easier.
What cvxopt needs:
* suitesparseconfig
   *amd
     *umfpack
  *colamd
     *cholmod

Indentation is for dependency. That's without optional or more complicated configuration - a minimal setup (although options using blas/lapack could be enabled without extra burden). All the above in mimimum configuration is LGPL 2.1. In non-mimimum configuration some switch to GPL-2.



---

archive/issue_comments_330764.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nFrom `setup.py` - this can all be overridden, but it horrifies me\n\n```\n# Guess SUITESPARSE_LIB_DIR and SUITESPARSE_INC_DIR\nif platform.platform().startswith(\"Darwin\"):\n    # macOS\n    SUITESPARSE_LIB_DIR = '/usr/local/lib'\n    SUITESPARSE_INC_DIR = '/usr/local/include'\nelse: \n    # default: Ubuntu/Debian\n    SUITESPARSE_LIB_DIR = \"/usr/lib/x86_64-linux-gnu\"\n    SUITESPARSE_INC_DIR = \"/usr/include/suitesparse\"\n```\nThe only line that is valid is the default include directory for debian. The rest is accessible by default without defining anything.\nBasically it destroys stuff that would work out of the box without any values. This is relevant in that it means we will have to override things manually when it could work out of the box if left alone. That's not just `suitesparse`. gsl, glpk...\nOf course there are limitations of distutils that complicate things (an empty `includedir` statement generate a `-I` in the compilation line instead of nothing at all, the compiler then gets confused. The best default is probably '.' if you have to put something).",
    "created_at": "2017-02-15T00:28:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330764",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:3" align="right">comment:3</div>

From `setup.py` - this can all be overridden, but it horrifies me

```
# Guess SUITESPARSE_LIB_DIR and SUITESPARSE_INC_DIR
if platform.platform().startswith("Darwin"):
    # macOS
    SUITESPARSE_LIB_DIR = '/usr/local/lib'
    SUITESPARSE_INC_DIR = '/usr/local/include'
else: 
    # default: Ubuntu/Debian
    SUITESPARSE_LIB_DIR = "/usr/lib/x86_64-linux-gnu"
    SUITESPARSE_INC_DIR = "/usr/include/suitesparse"
```
The only line that is valid is the default include directory for debian. The rest is accessible by default without defining anything.
Basically it destroys stuff that would work out of the box without any values. This is relevant in that it means we will have to override things manually when it could work out of the box if left alone. That's not just `suitesparse`. gsl, glpk...
Of course there are limitations of distutils that complicate things (an empty `includedir` statement generate a `-I` in the compilation line instead of nothing at all, the compiler then gets confused. The best default is probably '.' if you have to put something).



---

archive/issue_comments_330765.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nGood news, `cvxopt-1.1.9` is in gentoo now and no doctests were harmed by the upgrade in sage-on-gentoo. The bad news is that writing the spkgs for this is not high on my TODO list.",
    "created_at": "2017-03-04T20:24:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330765",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:4" align="right">comment:4</div>

Good news, `cvxopt-1.1.9` is in gentoo now and no doctests were harmed by the upgrade in sage-on-gentoo. The bad news is that writing the spkgs for this is not high on my TODO list.



---

archive/issue_events_314443.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-10-18T05:08:30Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "title_is": "Upgrade to cvxopt 1.2.1",
    "title_was": "update cvxopt to 1.1.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314443"
}
```



---

archive/issue_comments_330766.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nSage-on-Gentoo just upgraded to cvxopt 1.2.1.\n\nSee https://github.com/cschwan/sage-on-gentoo/issues/524",
    "created_at": "2018-10-18T05:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330766",
    "user": "https://github.com/slel"
}
```

<div id="comment:5" align="right">comment:5</div>

Sage-on-Gentoo just upgraded to cvxopt 1.2.1.

See https://github.com/cschwan/sage-on-gentoo/issues/524



---

archive/issue_comments_330767.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n-cvxopt 1.1.9 was released in Nov 2016, so we need to update.\n+This ticket is to upgrade to cvxopt 1.2.1, released 2018-08-31.\n \n-[SuiteSparse http://faculty.cse.tamu.edu/davis/suitesparse.html] is no longer included, thus we will have to package\n-it seperately.\n+Tarball: https://files.pythonhosted.org/packages/50/f5/254cbdccf67eb86fb6dec91da48430d16ac4195e2c30100239e54a79eebe/cvxopt-1.2.1.tar.gz\n+\n+Since cvxopt 1.1.9, [SuiteSparse](http://faculty.cse.tamu.edu/davis/suitesparse.html)\n+is no longer included, thus it will have to be packaged separately.\n+\n+Ticket #19687 was our previous upgrade, to cvxopt 1.1.8 (released 2015-09-22).\n``````\n",
    "created_at": "2018-10-18T05:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330767",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
-cvxopt 1.1.9 was released in Nov 2016, so we need to update.
+This ticket is to upgrade to cvxopt 1.2.1, released 2018-08-31.
 
-[SuiteSparse http://faculty.cse.tamu.edu/davis/suitesparse.html] is no longer included, thus we will have to package
-it seperately.
+Tarball: https://files.pythonhosted.org/packages/50/f5/254cbdccf67eb86fb6dec91da48430d16ac4195e2c30100239e54a79eebe/cvxopt-1.2.1.tar.gz
+
+Since cvxopt 1.1.9, [SuiteSparse](http://faculty.cse.tamu.edu/davis/suitesparse.html)
+is no longer included, thus it will have to be packaged separately.
+
+Ticket #19687 was our previous upgrade, to cvxopt 1.1.8 (released 2015-09-22).
``````




---

archive/issue_comments_330768.json:
```json
{
    "body": "Changed keywords from none to **upgrade, cvxopt**",
    "created_at": "2018-10-18T05:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330768",
    "user": "https://github.com/slel"
}
```

Changed keywords from none to **upgrade, cvxopt**



---

archive/issue_events_314444.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-10-18T05:08:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314444"
}
```



---

archive/issue_events_314445.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-10-18T05:08:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314445"
}
```



---

archive/issue_comments_330769.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIt would be great if Gentoo's suite-sparse can be lifted to become a Sage package.\n\nFor starters I should get sage-on-gentoo running on my Gentoo laptop.\nHow do I start with it?",
    "created_at": "2018-10-18T10:08:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330769",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

It would be great if Gentoo's suite-sparse can be lifted to become a Sage package.

For starters I should get sage-on-gentoo running on my Gentoo laptop.
How do I start with it?



---

archive/issue_comments_330770.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@dimpase](#comment:6):\n> It would be great if Gentoo's suite-sparse can be lifted to become a Sage package.\n> \n> For starters I should get sage-on-gentoo running on my Gentoo laptop.\n> How do I start with it?\n\nWell we are a bit old school but the instructions of the README at https://github.com/cschwan/sage-on-gentoo are still working. One day I'll update them to something a little bit more modern. Note that you also need the science overlay. I won't finish sage 8.4 tongiht I am afraid. Too much to do, it will be ready in 12 hours.",
    "created_at": "2018-10-18T10:40:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330770",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@dimpase](#comment:6):
> It would be great if Gentoo's suite-sparse can be lifted to become a Sage package.
> 
> For starters I should get sage-on-gentoo running on my Gentoo laptop.
> How do I start with it?

Well we are a bit old school but the instructions of the README at https://github.com/cschwan/sage-on-gentoo are still working. One day I'll update them to something a little bit more modern. Note that you also need the science overlay. I won't finish sage 8.4 tongiht I am afraid. Too much to do, it will be ready in 12 hours.



---

archive/issue_comments_330771.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nNote: cvxopt 1.2.2 was released a few days ago.",
    "created_at": "2018-10-23T10:11:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330771",
    "user": "https://github.com/Konrad127123"
}
```

<div id="comment:8" align="right">comment:8</div>

Note: cvxopt 1.2.2 was released a few days ago.



---

archive/issue_comments_330772.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nUpdating ticket description following the release of cvxopt 1.2.2.",
    "created_at": "2018-10-23T16:08:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330772",
    "user": "https://github.com/slel"
}
```

<div id="comment:9" align="right">comment:9</div>

Updating ticket description following the release of cvxopt 1.2.2.



---

archive/issue_comments_330773.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n-This ticket is to upgrade to cvxopt 1.2.1, released 2018-08-31.\n+This ticket is to upgrade to cvxopt 1.2.2, released 2018-10-19.\n \n-Tarball: https://files.pythonhosted.org/packages/50/f5/254cbdccf67eb86fb6dec91da48430d16ac4195e2c30100239e54a79eebe/cvxopt-1.2.1.tar.gz\n+- **Download page**: https://pypi.org/project/cvxopt/#files\n+- **Tarball**: https://files.pythonhosted.org/packages/53/9c/cb7f362e651ff6eb1c6c490435ffded2a2c4074d54fa87bf9a99be4d7763/cvxopt-1.2.2.tar.gz\n \n Since cvxopt 1.1.9, [SuiteSparse](http://faculty.cse.tamu.edu/davis/suitesparse.html)\n is no longer included, thus it will have to be packaged separately.\n``````\n",
    "created_at": "2018-10-23T16:08:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330773",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
-This ticket is to upgrade to cvxopt 1.2.1, released 2018-08-31.
+This ticket is to upgrade to cvxopt 1.2.2, released 2018-10-19.
 
-Tarball: https://files.pythonhosted.org/packages/50/f5/254cbdccf67eb86fb6dec91da48430d16ac4195e2c30100239e54a79eebe/cvxopt-1.2.1.tar.gz
+- **Download page**: https://pypi.org/project/cvxopt/#files
+- **Tarball**: https://files.pythonhosted.org/packages/53/9c/cb7f362e651ff6eb1c6c490435ffded2a2c4074d54fa87bf9a99be4d7763/cvxopt-1.2.2.tar.gz
 
 Since cvxopt 1.1.9, [SuiteSparse](http://faculty.cse.tamu.edu/davis/suitesparse.html)
 is no longer included, thus it will have to be packaged separately.
``````




---

archive/issue_events_314446.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2018-10-23T16:08:38Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "title_is": "Upgrade to cvxopt 1.2.x",
    "title_was": "Upgrade to cvxopt 1.2.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314446"
}
```



---

archive/issue_comments_330774.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@kiwifb](#comment:7):\n\n> Well we are a bit old school but the instructions of the README at https://github.com/cschwan/sage-on-gentoo are still working. \n\nA somewhat cryptic error:\n\n```\n!!! The ebuild selected to satisfy \"sage\" has unmet requirements.\n- sci-mathematics/sage-8.4::sage-on-gentoo USE=\"X doc-html-bin -bliss -debug -doc-html -doc-pdf -doc-pdf-bin -jmol -latex -modular_decomposition -sagenb -testsuite\" ABI_X86=\"(64)\" L10N=\"-ca -de -en -es -fr -hu -it -ja -pt -ru -tr\" PYTHON_TARGETS=\"python2_7 python3_6\"\n\n  The following REQUIRED_USE flag constraints are unsatisfied:\n    doc-html-bin? ( l10n_en )\n\n  The above constraints are a subset of the following complete expression:\n    doc-html? ( l10n_en sagenb ) doc-pdf? ( sagenb ) testsuite? ( any-of ( doc-html doc-html-bin ) ) doc-html-bin? ( !doc-html !doc-pdf l10n_en ) doc-pdf-bin? ( !doc-html !doc-pdf l10n_en ) any-of ( python_targets_python2_7 python_targets_python3_6 )\n```\n\nno idea what's wrong. Changing `doc-html-bin` to `-doc-html-bin` allows the build to go forward.",
    "created_at": "2018-10-27T08:41:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330774",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@kiwifb](#comment:7):

> Well we are a bit old school but the instructions of the README at https://github.com/cschwan/sage-on-gentoo are still working. 

A somewhat cryptic error:

```
!!! The ebuild selected to satisfy "sage" has unmet requirements.
- sci-mathematics/sage-8.4::sage-on-gentoo USE="X doc-html-bin -bliss -debug -doc-html -doc-pdf -doc-pdf-bin -jmol -latex -modular_decomposition -sagenb -testsuite" ABI_X86="(64)" L10N="-ca -de -en -es -fr -hu -it -ja -pt -ru -tr" PYTHON_TARGETS="python2_7 python3_6"

  The following REQUIRED_USE flag constraints are unsatisfied:
    doc-html-bin? ( l10n_en )

  The above constraints are a subset of the following complete expression:
    doc-html? ( l10n_en sagenb ) doc-pdf? ( sagenb ) testsuite? ( any-of ( doc-html doc-html-bin ) ) doc-html-bin? ( !doc-html !doc-pdf l10n_en ) doc-pdf-bin? ( !doc-html !doc-pdf l10n_en ) any-of ( python_targets_python2_7 python_targets_python3_6 )
```

no idea what's wrong. Changing `doc-html-bin` to `-doc-html-bin` allows the build to go forward.



---

archive/issue_comments_330775.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThat's part of the possible useflags. Basically I allow you to choose which language you want to build but because the english version is the only complete one, if you elect to have documentation, the english one is compulsory. Put \n\n```\nL10N=\"en\"\n```\nin `make.conf` and you'll get pre-built english documentation installed.",
    "created_at": "2018-10-27T08:44:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330775",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

That's part of the possible useflags. Basically I allow you to choose which language you want to build but because the english version is the only complete one, if you elect to have documentation, the english one is compulsory. Put 

```
L10N="en"
```
in `make.conf` and you'll get pre-built english documentation installed.



---

archive/issue_comments_330776.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI am going to make an attempt at a \"reduced\" suitesparse spkg. Reduced because I will not make default packages (which aren't used by anything else) that use cmake. Note that suitesparse will move to cmake for the whole thing in the near future.\n\nThe fun bit is that suitesparse is effectively a small mini distribution itself (but most of the upstreams are now totally absorbed by the project). It doesn't currently work very nicely with building phases unless we break down the various components. It does install directly on the file system and because it is like a mini distribution, trying to stop it will break the build system (where are my libraries and my include files).\n\nOnce it is completely cmake-ified it may actually behave better in that respect.",
    "created_at": "2018-11-01T22:57:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330776",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:12" align="right">comment:12</div>

I am going to make an attempt at a "reduced" suitesparse spkg. Reduced because I will not make default packages (which aren't used by anything else) that use cmake. Note that suitesparse will move to cmake for the whole thing in the near future.

The fun bit is that suitesparse is effectively a small mini distribution itself (but most of the upstreams are now totally absorbed by the project). It doesn't currently work very nicely with building phases unless we break down the various components. It does install directly on the file system and because it is like a mini distribution, trying to stop it will break the build system (where are my libraries and my include files).

Once it is completely cmake-ified it may actually behave better in that respect.



---

archive/issue_comments_330777.json:
```json
{
    "body": "Commit: **[`32e028e`](https://github.com/sagemath/sagetrac-mirror/commit/32e028e9d3b2a048cfe8db6b56212afbfe2321c8)**",
    "created_at": "2018-11-02T08:40:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330777",
    "user": "https://github.com/kiwifb"
}
```

Commit: **[`32e028e`](https://github.com/sagemath/sagetrac-mirror/commit/32e028e9d3b2a048cfe8db6b56212afbfe2321c8)**



---

archive/issue_comments_330778.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,9 @@\n This ticket is to upgrade to cvxopt 1.2.2, released 2018-10-19.\n \n - **Download page**: https://pypi.org/project/cvxopt/#files\n-- **Tarball**: https://files.pythonhosted.org/packages/53/9c/cb7f362e651ff6eb1c6c490435ffded2a2c4074d54fa87bf9a99be4d7763/cvxopt-1.2.2.tar.gz\n+- **Tarballs**: \n+  * https://files.pythonhosted.org/packages/53/9c/cb7f362e651ff6eb1c6c490435ffded2a2c4074d54fa87bf9a99be4d7763/cvxopt-1.2.2.tar.gz\n+  * http://faculty.cse.tamu.edu/davis/SuiteSparse/SuiteSparse-5.3.0.tar.gz\n \n Since cvxopt 1.1.9, [SuiteSparse](http://faculty.cse.tamu.edu/davis/suitesparse.html)\n is no longer included, thus it will have to be packaged separately.\n``````\n",
    "created_at": "2018-11-02T08:40:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330778",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,9 @@
 This ticket is to upgrade to cvxopt 1.2.2, released 2018-10-19.
 
 - **Download page**: https://pypi.org/project/cvxopt/#files
-- **Tarball**: https://files.pythonhosted.org/packages/53/9c/cb7f362e651ff6eb1c6c490435ffded2a2c4074d54fa87bf9a99be4d7763/cvxopt-1.2.2.tar.gz
+- **Tarballs**: 
+  * https://files.pythonhosted.org/packages/53/9c/cb7f362e651ff6eb1c6c490435ffded2a2c4074d54fa87bf9a99be4d7763/cvxopt-1.2.2.tar.gz
+  * http://faculty.cse.tamu.edu/davis/SuiteSparse/SuiteSparse-5.3.0.tar.gz
 
 Since cvxopt 1.1.9, [SuiteSparse](http://faculty.cse.tamu.edu/davis/suitesparse.html)
 is no longer included, thus it will have to be packaged separately.
``````




---

archive/issue_comments_330779.json:
```json
{
    "body": "Branch: **[u/fbissey/cvxopt-1.2.2](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/cvxopt-1.2.2)**",
    "created_at": "2018-11-02T08:40:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330779",
    "user": "https://github.com/kiwifb"
}
```

Branch: **[u/fbissey/cvxopt-1.2.2](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/cvxopt-1.2.2)**



---

archive/issue_comments_330780.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n`SPKG.txt` for suitesparse needs a bit of polish but this is a good start for anyone who wants to tests this. This is open for reviews even though I am expecting a bit more work needs to be done.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94517d2079f53af11e60e1dc0a67dcd2038506d3\"><code>94517d2</code></a></td><td><code>basic suitsparse spkg</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/903741fb9d61bddf187f517fb8bdb1d60d18a73e\"><code>903741f</code></a></td><td><code>initial update to cvxopt 1.2.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/093e5f342d6ae072e0e4fc67b695420edca594c9\"><code>093e5f3</code></a></td><td><code>Merge branch 'develop' into cvxopt-1.22</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32e028e9d3b2a048cfe8db6b56212afbfe2321c8\"><code>32e028e</code></a></td><td><code>add suitesparse to cvxopt dependencies</code></td></tr></table>\n",
    "created_at": "2018-11-02T08:40:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330780",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">comment:13</div>

`SPKG.txt` for suitesparse needs a bit of polish but this is a good start for anyone who wants to tests this. This is open for reviews even though I am expecting a bit more work needs to be done.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94517d2079f53af11e60e1dc0a67dcd2038506d3"><code>94517d2</code></a></td><td><code>basic suitsparse spkg</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/903741fb9d61bddf187f517fb8bdb1d60d18a73e"><code>903741f</code></a></td><td><code>initial update to cvxopt 1.2.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/093e5f342d6ae072e0e4fc67b695420edca594c9"><code>093e5f3</code></a></td><td><code>Merge branch 'develop' into cvxopt-1.22</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32e028e9d3b2a048cfe8db6b56212afbfe2321c8"><code>32e028e</code></a></td><td><code>add suitesparse to cvxopt dependencies</code></td></tr></table>




---

archive/issue_events_314447.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-11-02T08:40:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314447"
}
```



---

archive/issue_events_314448.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-11-02T08:40:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314448"
}
```



---

archive/issue_comments_330781.json:
```json
{
    "body": "Author: **Fran\u00e7ois Bissey**",
    "created_at": "2018-11-02T08:40:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330781",
    "user": "https://github.com/kiwifb"
}
```

Author: **François Bissey**



---

archive/issue_events_314449.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2018-11-02T08:40:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314449"
}
```



---

archive/issue_comments_330782.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI'm getting an `Invalid checksum` error for `cvxopt-1.2.2.tar.gz`.\n\n`cvxopt/checksums.ini` says:\n\n```\ntarball=cvxopt-VERSION.tar.gz\nsha1=725ce85fe122cd0fcda9d1b1a45ae43adf6fea2c\nmd5=ef9ab5f939380e9488e57b113103d96a\ncksum=4099798435\n```\nbut I get:\n\n```\n$ sha1sum ../../upstream/cvxopt-1.2.2.tar.gz \n43113a138e5e8f3ba42dc53ccb8c3c7501d5576b  ../../upstream/cvxopt-1.2.2.tar.gz\n$ md5sum ../../upstream/cvxopt-1.2.2.tar.gz \nfc2546fdba2faa6c4996e9b40fce5269  ../../upstream/cvxopt-1.2.2.tar.gz\n$ cksum ../../upstream/cvxopt-1.2.2.tar.gz\n3288957477 1877253 ../../upstream/cvxopt-1.2.2.tar.gz\n```",
    "created_at": "2018-11-02T11:02:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330782",
    "user": "https://github.com/Konrad127123"
}
```

<div id="comment:14" align="right">comment:14</div>

I'm getting an `Invalid checksum` error for `cvxopt-1.2.2.tar.gz`.

`cvxopt/checksums.ini` says:

```
tarball=cvxopt-VERSION.tar.gz
sha1=725ce85fe122cd0fcda9d1b1a45ae43adf6fea2c
md5=ef9ab5f939380e9488e57b113103d96a
cksum=4099798435
```
but I get:

```
$ sha1sum ../../upstream/cvxopt-1.2.2.tar.gz 
43113a138e5e8f3ba42dc53ccb8c3c7501d5576b  ../../upstream/cvxopt-1.2.2.tar.gz
$ md5sum ../../upstream/cvxopt-1.2.2.tar.gz 
fc2546fdba2faa6c4996e9b40fce5269  ../../upstream/cvxopt-1.2.2.tar.gz
$ cksum ../../upstream/cvxopt-1.2.2.tar.gz
3288957477 1877253 ../../upstream/cvxopt-1.2.2.tar.gz
```



---

archive/issue_comments_330783.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nMy bad I used the wrong tarball (github instead of pypi) when creating the checksum. I'll fix it shortly.",
    "created_at": "2018-11-02T18:42:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330783",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:15" align="right">comment:15</div>

My bad I used the wrong tarball (github instead of pypi) when creating the checksum. I'll fix it shortly.



---

archive/issue_comments_330784.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21e7280425f0e37e07265563b97dfc527332c548\"><code>21e7280</code></a></td><td><code>fix cvxopt checksum</code></td></tr></table>\n",
    "created_at": "2018-11-02T18:45:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330784",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21e7280425f0e37e07265563b97dfc527332c548"><code>21e7280</code></a></td><td><code>fix cvxopt checksum</code></td></tr></table>




---

archive/issue_comments_330785.json:
```json
{
    "body": "Changed commit from **[`32e028e`](https://github.com/sagemath/sagetrac-mirror/commit/32e028e9d3b2a048cfe8db6b56212afbfe2321c8)** to **[`21e7280`](https://github.com/sagemath/sagetrac-mirror/commit/21e7280425f0e37e07265563b97dfc527332c548)**",
    "created_at": "2018-11-02T18:45:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330785",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`32e028e`](https://github.com/sagemath/sagetrac-mirror/commit/32e028e9d3b2a048cfe8db6b56212afbfe2321c8)** to **[`21e7280`](https://github.com/sagemath/sagetrac-mirror/commit/21e7280425f0e37e07265563b97dfc527332c548)**



---

archive/issue_comments_330786.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87f00486d061445a8fa83ddaf9133cd7be0aaca6\"><code>87f0048</code></a></td><td><code>Flesh out SPKG.txt</code></td></tr></table>\n",
    "created_at": "2018-11-02T22:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330786",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87f00486d061445a8fa83ddaf9133cd7be0aaca6"><code>87f0048</code></a></td><td><code>Flesh out SPKG.txt</code></td></tr></table>




---

archive/issue_comments_330787.json:
```json
{
    "body": "Changed commit from **[`21e7280`](https://github.com/sagemath/sagetrac-mirror/commit/21e7280425f0e37e07265563b97dfc527332c548)** to **[`87f0048`](https://github.com/sagemath/sagetrac-mirror/commit/87f00486d061445a8fa83ddaf9133cd7be0aaca6)**",
    "created_at": "2018-11-02T22:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330787",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`21e7280`](https://github.com/sagemath/sagetrac-mirror/commit/21e7280425f0e37e07265563b97dfc527332c548)** to **[`87f0048`](https://github.com/sagemath/sagetrac-mirror/commit/87f00486d061445a8fa83ddaf9133cd7be0aaca6)**



---

archive/issue_comments_330788.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI would be OK for things to ship as they are now but I am open to suggestions. An alternative is to split `SuiteSparse` into components but that's more work.",
    "created_at": "2018-11-02T22:36:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330788",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:18" align="right">comment:18</div>

I would be OK for things to ship as they are now but I am open to suggestions. An alternative is to split `SuiteSparse` into components but that's more work.



---

archive/issue_comments_330789.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nBuilding with `SAGE_CHECK=\"yes\"` still fails when running headless (#24657).",
    "created_at": "2018-11-07T12:05:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330789",
    "user": "https://github.com/Konrad127123"
}
```

<div id="comment:19" align="right">comment:19</div>

Building with `SAGE_CHECK="yes"` still fails when running headless (#24657).



---

archive/issue_comments_330790.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI see, I was not aware of this issue. I see that matplotlib is involved, probably in the same way some doctest could be failing on debian. That will require some code inspection.",
    "created_at": "2018-11-07T18:58:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330790",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:20" align="right">comment:20</div>

I see, I was not aware of this issue. I see that matplotlib is involved, probably in the same way some doctest could be failing on debian. That will require some code inspection.



---

archive/issue_comments_330791.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nWithout openmp, or with openmp installed in /usr/local/, I get\nI get \n\n```\n[suitesparse-5.3.0] /usr/bin/ld: error: unable to find library -lomp\n[suitesparse-5.3.0] cc: error: linker command failed with exit code 1 (use -v to see invocation)\n```\nIs openmp a pre-req?\n\nOne way or another, the installation ought to be smarter as far as the location of openmp is concerned.",
    "created_at": "2018-11-27T22:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330791",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:21" align="right">comment:21</div>

Without openmp, or with openmp installed in /usr/local/, I get
I get 

```
[suitesparse-5.3.0] /usr/bin/ld: error: unable to find library -lomp
[suitesparse-5.3.0] cc: error: linker command failed with exit code 1 (use -v to see invocation)
```
Is openmp a pre-req?

One way or another, the installation ought to be smarter as far as the location of openmp is concerned.



---

archive/issue_comments_330792.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nYes it should be smarter. Now can you give me more info? Is this OS X? which sub-package of suitesparse? In short a longer log please.",
    "created_at": "2018-11-27T22:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330792",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:22" align="right">comment:22</div>

Yes it should be smarter. Now can you give me more info? Is this OS X? which sub-package of suitesparse? In short a longer log please.



---

archive/issue_comments_330793.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThis is FreeBSD 12.0. With openmp installed (in /usr/local, which is \"standard\" location on such a system), everything works (passes relevant Sage tests too) if I export `LDFLAGS=\"$LDFLAGS -L/usr/local/lib\"` before installation. If LDFLAGS are not passed, it breaks at CHOLMOD as follows:\n\n```\n...\n[suitesparse-5.3.0] a - cholmod_l_nesdis.o\n[suitesparse-5.3.0] a - cholmod_l_camd.o\n[suitesparse-5.3.0] cc -L/usr/home/dimpase/Sage/sagemath/local/lib -Wl,-rpath,/usr/home/dimpase/Sage/sagemath/local/lib  -L/usr/home/dimpase/Sage/sagemath/local/lib -L/usr/home/dimpase/Sage/sagemath/local/lib -L/usr/home/dimpase/Sage/sagemath/local/lib -shared -Wl,-soname -Wl,libcholmod.so.3 -Wl,--no-undefined -fopenmp cholmod_aat.o cholmod_add.o cholmod_band.o cholmod_change_factor.o cholmod_common.o cholmod_complex.o cholmod_copy.o cholmod_dense.o cholmod_error.o cholmod_factor.o cholmod_memory.o cholmod_sparse.o cholmod_transpose.o cholmod_triplet.o cholmod_version.o cholmod_check.o cholmod_read.o cholmod_write.o cholmod_amd.o cholmod_analyze.o cholmod_colamd.o cholmod_etree.o cholmod_factorize.o cholmod_postorder.o cholmod_rcond.o cholmod_resymbol.o cholmod_rowcolcounts.o cholmod_rowfac.o cholmod_solve.o cholmod_spsolve.o cholmod_drop.o cholmod_horzcat.o cholmod_norm.o cholmod_scale.o cholmod_sdmult.o cholmod_ssmult.o cholmod_submatrix.o cholmod_vertcat.o cholmod_symmetry.o cholmod_rowadd.o cholmod_rowdel.o cholmod_updown.o cholmod_super_numeric.o cholmod_super_solve.o cholmod_super_symbolic.o cholmod_ccolamd.o cholmod_csymamd.o cholmod_metis.o cholmod_nesdis.o cholmod_camd.o cholmod_l_aat.o cholmod_l_add.o cholmod_l_band.o cholmod_l_change_factor.o cholmod_l_common.o cholmod_l_complex.o cholmod_l_copy.o cholmod_l_dense.o cholmod_l_error.o cholmod_l_factor.o cholmod_l_memory.o cholmod_l_sparse.o cholmod_l_transpose.o cholmod_l_triplet.o cholmod_l_version.o cholmod_l_check.o cholmod_l_read.o cholmod_l_write.o cholmod_l_amd.o cholmod_l_analyze.o cholmod_l_colamd.o cholmod_l_etree.o cholmod_l_factorize.o cholmod_l_postorder.o cholmod_l_rcond.o cholmod_l_resymbol.o cholmod_l_rowcolcounts.o cholmod_l_rowfac.o cholmod_l_solve.o cholmod_l_spsolve.o cholmod_l_drop.o cholmod_l_horzcat.o cholmod_l_norm.o cholmod_l_scale.o cholmod_l_sdmult.o cholmod_l_ssmult.o cholmod_l_submatrix.o cholmod_l_vertcat.o cholmod_l_symmetry.o cholmod_l_rowadd.o cholmod_l_rowdel.o cholmod_l_updown.o cholmod_l_super_numeric.o cholmod_l_super_solve.o cholmod_l_super_symbolic.o cholmod_l_ccolamd.o cholmod_l_csymamd.o cholmod_l_metis.o cholmod_l_nesdis.o cholmod_l_camd.o -o /usr/home/dimpase/Sage/sagemath/local/lib/libcholmod.so.3.0.12 -lm -lamd -lcolamd -lsuitesparseconfig -lccolamd -lcamd -lopenblas  -lopenblas \n[suitesparse-5.3.0] ranlib libcholmod.a\n[suitesparse-5.3.0] /usr/bin/ld: error: unable to find library -lomp\n[suitesparse-5.3.0] cc: error: linker command failed with exit code 1 (use -v to see invocation)\n[suitesparse-5.3.0] gmake[4]: *** [Makefile:544: /usr/home/dimpase/Sage/sagemath/local/lib/libcholmod.so.3.0.12] Error 1\n[suitesparse-5.3.0] gmake[4]: Leaving directory '/usr/home/dimpase/Sage/sagemath/local/var/tmp/sage/build/suitesparse-5.3.0/src/CHOLMOD/Lib'\n```\n\nAnd with openmp not installed, it also breaks at CHOLMOD, although the output is differently ordered, somehow.\n\n```\n...\n[suitesparse-5.3.0] a - cholmod_l_nesdis.o\n[suitesparse-5.3.0] a - cholmod_l_camd.o\n[suitesparse-5.3.0] ranlib libcholmod.a\n[suitesparse-5.3.0] /usr/bin/ld: error: unable to find library -lomp\n[suitesparse-5.3.0] cc: error: linker command failed with exit code 1 (use -v to see invocation)\n[suitesparse-5.3.0] gmake[4]: *** [Makefile:544: /usr/home/dimpase/Sage/sagemath/local/lib/libcholmod.so.3.0.12] Error 1\n[suitesparse-5.3.0] gmake[4]: Leaving directory '/usr/home/dimpase/Sage/sagemath/local/var/tmp/sage/build/suitesparse-5.3.0/src/CHOLMOD/Lib'\n```",
    "created_at": "2018-11-27T22:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330793",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

This is FreeBSD 12.0. With openmp installed (in /usr/local, which is "standard" location on such a system), everything works (passes relevant Sage tests too) if I export `LDFLAGS="$LDFLAGS -L/usr/local/lib"` before installation. If LDFLAGS are not passed, it breaks at CHOLMOD as follows:

```
...
[suitesparse-5.3.0] a - cholmod_l_nesdis.o
[suitesparse-5.3.0] a - cholmod_l_camd.o
[suitesparse-5.3.0] cc -L/usr/home/dimpase/Sage/sagemath/local/lib -Wl,-rpath,/usr/home/dimpase/Sage/sagemath/local/lib  -L/usr/home/dimpase/Sage/sagemath/local/lib -L/usr/home/dimpase/Sage/sagemath/local/lib -L/usr/home/dimpase/Sage/sagemath/local/lib -shared -Wl,-soname -Wl,libcholmod.so.3 -Wl,--no-undefined -fopenmp cholmod_aat.o cholmod_add.o cholmod_band.o cholmod_change_factor.o cholmod_common.o cholmod_complex.o cholmod_copy.o cholmod_dense.o cholmod_error.o cholmod_factor.o cholmod_memory.o cholmod_sparse.o cholmod_transpose.o cholmod_triplet.o cholmod_version.o cholmod_check.o cholmod_read.o cholmod_write.o cholmod_amd.o cholmod_analyze.o cholmod_colamd.o cholmod_etree.o cholmod_factorize.o cholmod_postorder.o cholmod_rcond.o cholmod_resymbol.o cholmod_rowcolcounts.o cholmod_rowfac.o cholmod_solve.o cholmod_spsolve.o cholmod_drop.o cholmod_horzcat.o cholmod_norm.o cholmod_scale.o cholmod_sdmult.o cholmod_ssmult.o cholmod_submatrix.o cholmod_vertcat.o cholmod_symmetry.o cholmod_rowadd.o cholmod_rowdel.o cholmod_updown.o cholmod_super_numeric.o cholmod_super_solve.o cholmod_super_symbolic.o cholmod_ccolamd.o cholmod_csymamd.o cholmod_metis.o cholmod_nesdis.o cholmod_camd.o cholmod_l_aat.o cholmod_l_add.o cholmod_l_band.o cholmod_l_change_factor.o cholmod_l_common.o cholmod_l_complex.o cholmod_l_copy.o cholmod_l_dense.o cholmod_l_error.o cholmod_l_factor.o cholmod_l_memory.o cholmod_l_sparse.o cholmod_l_transpose.o cholmod_l_triplet.o cholmod_l_version.o cholmod_l_check.o cholmod_l_read.o cholmod_l_write.o cholmod_l_amd.o cholmod_l_analyze.o cholmod_l_colamd.o cholmod_l_etree.o cholmod_l_factorize.o cholmod_l_postorder.o cholmod_l_rcond.o cholmod_l_resymbol.o cholmod_l_rowcolcounts.o cholmod_l_rowfac.o cholmod_l_solve.o cholmod_l_spsolve.o cholmod_l_drop.o cholmod_l_horzcat.o cholmod_l_norm.o cholmod_l_scale.o cholmod_l_sdmult.o cholmod_l_ssmult.o cholmod_l_submatrix.o cholmod_l_vertcat.o cholmod_l_symmetry.o cholmod_l_rowadd.o cholmod_l_rowdel.o cholmod_l_updown.o cholmod_l_super_numeric.o cholmod_l_super_solve.o cholmod_l_super_symbolic.o cholmod_l_ccolamd.o cholmod_l_csymamd.o cholmod_l_metis.o cholmod_l_nesdis.o cholmod_l_camd.o -o /usr/home/dimpase/Sage/sagemath/local/lib/libcholmod.so.3.0.12 -lm -lamd -lcolamd -lsuitesparseconfig -lccolamd -lcamd -lopenblas  -lopenblas 
[suitesparse-5.3.0] ranlib libcholmod.a
[suitesparse-5.3.0] /usr/bin/ld: error: unable to find library -lomp
[suitesparse-5.3.0] cc: error: linker command failed with exit code 1 (use -v to see invocation)
[suitesparse-5.3.0] gmake[4]: *** [Makefile:544: /usr/home/dimpase/Sage/sagemath/local/lib/libcholmod.so.3.0.12] Error 1
[suitesparse-5.3.0] gmake[4]: Leaving directory '/usr/home/dimpase/Sage/sagemath/local/var/tmp/sage/build/suitesparse-5.3.0/src/CHOLMOD/Lib'
```

And with openmp not installed, it also breaks at CHOLMOD, although the output is differently ordered, somehow.

```
...
[suitesparse-5.3.0] a - cholmod_l_nesdis.o
[suitesparse-5.3.0] a - cholmod_l_camd.o
[suitesparse-5.3.0] ranlib libcholmod.a
[suitesparse-5.3.0] /usr/bin/ld: error: unable to find library -lomp
[suitesparse-5.3.0] cc: error: linker command failed with exit code 1 (use -v to see invocation)
[suitesparse-5.3.0] gmake[4]: *** [Makefile:544: /usr/home/dimpase/Sage/sagemath/local/lib/libcholmod.so.3.0.12] Error 1
[suitesparse-5.3.0] gmake[4]: Leaving directory '/usr/home/dimpase/Sage/sagemath/local/var/tmp/sage/build/suitesparse-5.3.0/src/CHOLMOD/Lib'
```



---

archive/issue_comments_330794.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nYes it is unusual. And very strange. There is some control for openmp in the main makefile I think so it has to be turned off there (or autodetected properly there). But not finding stuff in `/usr/local/lib` is highly unusual - and it appears this is not your compiler's fault but ld's fault. Is it GNU ld, some kind of BSD ld or llvm's ld?",
    "created_at": "2018-11-27T22:56:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330794",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:24" align="right">comment:24</div>

Yes it is unusual. And very strange. There is some control for openmp in the main makefile I think so it has to be turned off there (or autodetected properly there). But not finding stuff in `/usr/local/lib` is highly unusual - and it appears this is not your compiler's fault but ld's fault. Is it GNU ld, some kind of BSD ld or llvm's ld?



---

archive/issue_comments_330795.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nIs there urgency to have this in 8.5? I have been thinking that I have a longer time frame I may want to try splitting suitesparse into just the components needed for cvxopt.",
    "created_at": "2018-11-27T22:57:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330795",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:25" align="right">comment:25</div>

Is there urgency to have this in 8.5? I have been thinking that I have a longer time frame I may want to try splitting suitesparse into just the components needed for cvxopt.



---

archive/issue_comments_330796.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nPS. I hear that openmp support on OSX is an especially brutal form of hell, so it has got to be tested there too.",
    "created_at": "2018-11-27T22:57:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330796",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">comment:26</div>

PS. I hear that openmp support on OSX is an especially brutal form of hell, so it has got to be tested there too.



---

archive/issue_comments_330797.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@dimpase](#comment:26):\n> PS. I hear that openmp support on OSX is an especially brutal form of hell, so it has got to be tested there too.\n\nIf I remember correctly it is just turned off as soon as darwin is detected.",
    "created_at": "2018-11-27T22:58:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330797",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@dimpase](#comment:26):
> PS. I hear that openmp support on OSX is an especially brutal form of hell, so it has got to be tested there too.

If I remember correctly it is just turned off as soon as darwin is detected.



---

archive/issue_comments_330798.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nFor one, if openmp is not installed then `-fopenmp` should not even be mentioned in the calls, but it does get mentioned.",
    "created_at": "2018-11-27T22:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330798",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">comment:28</div>

For one, if openmp is not installed then `-fopenmp` should not even be mentioned in the calls, but it does get mentioned.



---

archive/issue_comments_330799.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nWe unfortunately deal with a meta build driven by a master makefile. No configuration is done apart possibly some flags passed to make.",
    "created_at": "2018-11-27T23:01:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330799",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">comment:29</div>

We unfortunately deal with a meta build driven by a master makefile. No configuration is done apart possibly some flags passed to make.



---

archive/issue_comments_330800.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThe good stuff to look at configuration and what they do `SuiteSparse_config/SuiteSparse_config.mk` and to see what happen with the flags you want `make ${my_flags} config` I actually run it at the beginning of the build so it is logged. Setting `CFOPENMP=\"\"` should kill openmp.",
    "created_at": "2018-11-27T23:08:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330800",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:30" align="right">comment:30</div>

The good stuff to look at configuration and what they do `SuiteSparse_config/SuiteSparse_config.mk` and to see what happen with the flags you want `make ${my_flags} config` I actually run it at the beginning of the build so it is logged. Setting `CFOPENMP=""` should kill openmp.



---

archive/issue_comments_330801.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI'd rather see a way to use system's SuiteSparse (as in #26286) rather than spending time on cutting custom tarballs...",
    "created_at": "2018-11-27T23:14:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330801",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:31" align="right">comment:31</div>

I'd rather see a way to use system's SuiteSparse (as in #26286) rather than spending time on cutting custom tarballs...



---

archive/issue_comments_330802.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nA lot of system split suitesparse so we would have to check the components individually. In any case I would not use spkg-src to make little tarballs. I would deal with it the same way gfortran and gcc are dealt with but on a bigger scale.",
    "created_at": "2018-11-27T23:16:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330802",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:32" align="right">comment:32</div>

A lot of system split suitesparse so we would have to check the components individually. In any case I would not use spkg-src to make little tarballs. I would deal with it the same way gfortran and gcc are dealt with but on a bigger scale.



---

archive/issue_comments_330803.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@kiwifb](#comment:24):\n> Yes it is unusual. And very strange. There is some control for openmp in the main makefile I think so it has to be turned off there (or autodetected properly there). But not finding stuff in `/usr/local/lib` is highly unusual - and it appears this is not your compiler's fault but ld's fault. Is it GNU ld, some kind of BSD ld or llvm's ld?\n\n```\n$ ld -v\nLLD 6.0.1 (FreeBSD 335540-1200005) (compatible with GNU linkers)\n```",
    "created_at": "2018-11-27T23:17:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330803",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@kiwifb](#comment:24):
> Yes it is unusual. And very strange. There is some control for openmp in the main makefile I think so it has to be turned off there (or autodetected properly there). But not finding stuff in `/usr/local/lib` is highly unusual - and it appears this is not your compiler's fault but ld's fault. Is it GNU ld, some kind of BSD ld or llvm's ld?

```
$ ld -v
LLD 6.0.1 (FreeBSD 335540-1200005) (compatible with GNU linkers)
```



---

archive/issue_comments_330804.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI believe this is llvm's `ld` then.",
    "created_at": "2018-11-27T23:20:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330804",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:34" align="right">comment:34</div>

I believe this is llvm's `ld` then.



---

archive/issue_comments_330805.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@kiwifb](#comment:34):\n> I believe this is llvm's `ld` then.\n\nyep. If it is called directly, it does not know where to look for libraries, so one much pass \n`-L/lib -L/usr/lib -L` etc to it.",
    "created_at": "2018-11-27T23:36:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330805",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@kiwifb](#comment:34):
> I believe this is llvm's `ld` then.

yep. If it is called directly, it does not know where to look for libraries, so one much pass 
`-L/lib -L/usr/lib -L` etc to it.



---

archive/issue_comments_330806.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@dimpase](#comment:35):\n> Replying to [@kiwifb](#comment:34):\n> > I believe this is llvm's `ld` then.\n\n> \n> yep. If it is called directly, it does not know where to look for libraries, so one much pass \n> `-L/lib -L/usr/lib -L` etc to it.\n\nDefinitely not called directly (I checked) the compiler is called to do the linking so `-fopenmp` should set all the flags properly. I am calling that a bug in linking driver of the compiler.",
    "created_at": "2018-11-27T23:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330806",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@dimpase](#comment:35):
> Replying to [@kiwifb](#comment:34):
> > I believe this is llvm's `ld` then.

> 
> yep. If it is called directly, it does not know where to look for libraries, so one much pass 
> `-L/lib -L/usr/lib -L` etc to it.

Definitely not called directly (I checked) the compiler is called to do the linking so `-fopenmp` should set all the flags properly. I am calling that a bug in linking driver of the compiler.



---

archive/issue_comments_330807.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@kiwifb](#comment:36):\n> Replying to [@dimpase](#comment:35):\n> > Replying to [@kiwifb](#comment:34):\n> > > I believe this is llvm's `ld` then.\n\n> > \n> > yep. If it is called directly, it does not know where to look for libraries, so one much pass \n> > `-L/lib -L/usr/lib -L` etc to it.\n\n> \n> Definitely not called directly (I checked) the compiler is called to do the linking so `-fopenmp` should set all the flags properly. I am calling that a bug in linking driver of the compiler.\n\nI think I agree. It's ludicrous that LDFLAGS need to be set for openMP to work.\nAnd it appears to be well-known: https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=222858",
    "created_at": "2018-11-28T09:42:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330807",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@kiwifb](#comment:36):
> Replying to [@dimpase](#comment:35):
> > Replying to [@kiwifb](#comment:34):
> > > I believe this is llvm's `ld` then.

> > 
> > yep. If it is called directly, it does not know where to look for libraries, so one much pass 
> > `-L/lib -L/usr/lib -L` etc to it.

> 
> Definitely not called directly (I checked) the compiler is called to do the linking so `-fopenmp` should set all the flags properly. I am calling that a bug in linking driver of the compiler.

I think I agree. It's ludicrous that LDFLAGS need to be set for openMP to work.
And it appears to be well-known: https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=222858



---

archive/issue_comments_330808.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nBasically the `-fopenmp` switch doesn't work. Well this is half assed, it should either work or not work, but not partially work. Obviously it still add `-lomp` to the linker call.",
    "created_at": "2018-11-28T09:48:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330808",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:38" align="right">comment:38</div>

Basically the `-fopenmp` switch doesn't work. Well this is half assed, it should either work or not work, but not partially work. Obviously it still add `-lomp` to the linker call.



---

archive/issue_events_314450.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-11-28T09:54:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314450"
}
```



---

archive/issue_events_314451.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-11-28T09:54:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314451"
}
```



---

archive/issue_comments_330809.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@kiwifb](#comment:32):\n> A lot of system split suitesparse so we would have to check the components individually. In any case I would not use spkg-src to make little tarballs. I would deal with it the same way gfortran and gcc are dealt with but on a bigger scale.\n\nChecking components would be needed anyway, as it's installed as a bunch of separate libraries, whether they come from one blob or many.\n\nAnyhow, send this one to the bots!",
    "created_at": "2018-11-28T09:54:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330809",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@kiwifb](#comment:32):
> A lot of system split suitesparse so we would have to check the components individually. In any case I would not use spkg-src to make little tarballs. I would deal with it the same way gfortran and gcc are dealt with but on a bigger scale.

Checking components would be needed anyway, as it's installed as a bunch of separate libraries, whether they come from one blob or many.

Anyhow, send this one to the bots!



---

archive/issue_comments_330810.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2018-11-28T09:54:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330810",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_330811.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nThe separation would make it either to separate build and install. It would allow the \"uninstall\" work from Erik to work. Not all the libraries would be installed either.",
    "created_at": "2018-11-28T09:58:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330811",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:40" align="right">comment:40</div>

The separation would make it either to separate build and install. It would allow the "uninstall" work from Erik to work. Not all the libraries would be installed either.



---

archive/issue_comments_330812.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nFails on Cygwin\n\n```\n[suitesparse-5.3.0] ranlib libamd.a\n[suitesparse-5.3.0] gcc -L/home/Admin/sage-buildbot-worker/sage_git/build/local/lib -Wl,-rpath,/home/Admin/sage-buildbot-worker/sage_git/build/local/lib  -L/home/Admin/sage-buildbot-worker/sage_git/build/local/lib -L/home/Admin/sage-buildbot-worker/sage_git/build/local/lib -L/home/Admin/sage-buildbot-worker/sage_git/build/local/lib -shared -Wl,-soname -Wl,libamd.so.2 -Wl,--no-undefined amd_i_aat.o amd_i_1.o amd_i_2.o amd_i_dump.o amd_i_postorder.o amd_i_defaults.o amd_i_post_tree.o amd_i_order.o amd_i_control.o amd_i_info.o amd_i_valid.o amd_i_preprocess.o amd_l_aat.o amd_l_1.o amd_l_2.o amd_l_dump.o amd_l_postorder.o amd_l_defaults.o amd_l_post_tree.o amd_l_order.o amd_l_control.o amd_l_info.o amd_l_valid.o amd_l_preprocess.o -o /home/Admin/sage-buildbot-worker/sage_git/build/local/lib/libamd.so.2.4.6 -lm -lsuitesparseconfig\n[sagelib-8.5.beta5] running build_ext\n[suitesparse-5.3.0] /usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lsuitesparseconfig\n[suitesparse-5.3.0] collect2: error: ld returned 1 exit status\n[suitesparse-5.3.0] make[6]: *** [Makefile:90: /home/Admin/sage-buildbot-worker/sage_git/build/local/lib/libamd.so.2.4.6] Error 1\n[suitesparse-5.3.0] make[6]: Target 'install' not remade because of errors.\n```",
    "created_at": "2018-11-30T23:33:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330812",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:41" align="right">comment:41</div>

Fails on Cygwin

```
[suitesparse-5.3.0] ranlib libamd.a
[suitesparse-5.3.0] gcc -L/home/Admin/sage-buildbot-worker/sage_git/build/local/lib -Wl,-rpath,/home/Admin/sage-buildbot-worker/sage_git/build/local/lib  -L/home/Admin/sage-buildbot-worker/sage_git/build/local/lib -L/home/Admin/sage-buildbot-worker/sage_git/build/local/lib -L/home/Admin/sage-buildbot-worker/sage_git/build/local/lib -shared -Wl,-soname -Wl,libamd.so.2 -Wl,--no-undefined amd_i_aat.o amd_i_1.o amd_i_2.o amd_i_dump.o amd_i_postorder.o amd_i_defaults.o amd_i_post_tree.o amd_i_order.o amd_i_control.o amd_i_info.o amd_i_valid.o amd_i_preprocess.o amd_l_aat.o amd_l_1.o amd_l_2.o amd_l_dump.o amd_l_postorder.o amd_l_defaults.o amd_l_post_tree.o amd_l_order.o amd_l_control.o amd_l_info.o amd_l_valid.o amd_l_preprocess.o -o /home/Admin/sage-buildbot-worker/sage_git/build/local/lib/libamd.so.2.4.6 -lm -lsuitesparseconfig
[sagelib-8.5.beta5] running build_ext
[suitesparse-5.3.0] /usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lsuitesparseconfig
[suitesparse-5.3.0] collect2: error: ld returned 1 exit status
[suitesparse-5.3.0] make[6]: *** [Makefile:90: /home/Admin/sage-buildbot-worker/sage_git/build/local/lib/libamd.so.2.4.6] Error 1
[suitesparse-5.3.0] make[6]: Target 'install' not remade because of errors.
```



---

archive/issue_events_314452.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-11-30T23:33:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314452"
}
```



---

archive/issue_events_314453.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-11-30T23:33:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314453"
}
```



---

archive/issue_comments_330813.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nHardly shocking. The build system being what it is. I think properly splitting the sub-package will help with that error. But it will take some time to do properly.",
    "created_at": "2018-12-01T00:29:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330813",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:42" align="right">comment:42</div>

Hardly shocking. The build system being what it is. I think properly splitting the sub-package will help with that error. But it will take some time to do properly.



---

archive/issue_comments_330814.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nI didn't know the Cygwin buildbot was even working.  Last I checked on it it was having problems with hanging on the doc build.  I meant to look into it before vacation and then it just slipped off my radar.  I'll look into it though.",
    "created_at": "2019-01-15T17:41:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330814",
    "user": "https://github.com/embray"
}
```

<div id="comment:43" align="right">comment:43</div>

I didn't know the Cygwin buildbot was even working.  Last I checked on it it was having problems with hanging on the doc build.  I meant to look into it before vacation and then it just slipped off my radar.  I'll look into it though.



---

archive/issue_events_314454.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:06:20Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "subject": "https://github.com/embray",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314454"
}
```



---

archive/issue_comments_330815.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nIn the course of fixing this, I request that the testsuite be fixed, too. Newer versions of `cvxopt` use `nose`, which is a standard Sage package, so testing should be easy to implement. (The current versions have a more ad hoc system which is currently broken, and so is being removed at #28730.)",
    "created_at": "2019-11-14T00:35:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330815",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:45" align="right">comment:45</div>

In the course of fixing this, I request that the testsuite be fixed, too. Newer versions of `cvxopt` use `nose`, which is a standard Sage package, so testing should be easy to implement. (The current versions have a more ad hoc system which is currently broken, and so is being removed at #28730.)



---

archive/issue_comments_330816.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI'll be trying to blow new life in this ticket soon. I may use a split suitesparse based on my gentoo work.",
    "created_at": "2019-11-14T00:36:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330816",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:46" align="right">comment:46</div>

I'll be trying to blow new life in this ticket soon. I may use a split suitesparse based on my gentoo work.



---

archive/issue_comments_330817.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\ncvxopt is meanwhile version 1.2.3",
    "created_at": "2019-11-14T11:17:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330817",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:47" align="right">comment:47</div>

cvxopt is meanwhile version 1.2.3



---

archive/issue_events_314455.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-11-20T00:14:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314455"
}
```



---

archive/issue_events_314456.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-11-20T00:14:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314456"
}
```



---

archive/issue_comments_330818.json:
```json
{
    "body": "Changed branch from **[u/fbissey/cvxopt-1.2.2](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/cvxopt-1.2.2)** to **[u/fbissey/cvxopt-1.2.x](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/cvxopt-1.2.x)**",
    "created_at": "2019-11-20T00:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330818",
    "user": "https://github.com/kiwifb"
}
```

Changed branch from **[u/fbissey/cvxopt-1.2.2](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/cvxopt-1.2.2)** to **[u/fbissey/cvxopt-1.2.x](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/cvxopt-1.2.x)**



---

archive/issue_comments_330819.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nBasic bump to latest versions without any splitting of suitesparse. In the event of a split with need the following components\n* suitesparseconfig\n* amd\n* colamd\n* cholmod\n* umfpack\n\nThe order is indicative or the compilation order [OK amd and colamd do not depend on each other].\n\nThis doesn't include a new `spkg-check`. I want to defer that to a positive review of this part on cygwin at least.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39316e073bbc4dcaa438f61ad521e2ab67eb4ed6\"><code>39316e0</code></a></td><td><code>Merge branch 'develop' into cvxopt-1.2.x</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a946e6e817ccebe44f9c1b21dffeaf1339258fce\"><code>a946e6e</code></a></td><td><code>Update to cvxopt-1.2.3 and suitesparse 5.6.0</code></td></tr></table>\n",
    "created_at": "2019-11-20T00:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330819",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:48" align="right">comment:48</div>

Basic bump to latest versions without any splitting of suitesparse. In the event of a split with need the following components
* suitesparseconfig
* amd
* colamd
* cholmod
* umfpack

The order is indicative or the compilation order [OK amd and colamd do not depend on each other].

This doesn't include a new `spkg-check`. I want to defer that to a positive review of this part on cygwin at least.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39316e073bbc4dcaa438f61ad521e2ab67eb4ed6"><code>39316e0</code></a></td><td><code>Merge branch 'develop' into cvxopt-1.2.x</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a946e6e817ccebe44f9c1b21dffeaf1339258fce"><code>a946e6e</code></a></td><td><code>Update to cvxopt-1.2.3 and suitesparse 5.6.0</code></td></tr></table>




---

archive/issue_events_314457.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-11-20T00:14:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "milestone_number": null,
    "milestone_title": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314457"
}
```



---

archive/issue_events_314458.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2019-11-20T00:14:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "milestone_number": null,
    "milestone_title": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314458"
}
```



---

archive/issue_comments_330820.json:
```json
{
    "body": "Changed commit from **[`87f0048`](https://github.com/sagemath/sagetrac-mirror/commit/87f00486d061445a8fa83ddaf9133cd7be0aaca6)** to **[`a946e6e`](https://github.com/sagemath/sagetrac-mirror/commit/a946e6e817ccebe44f9c1b21dffeaf1339258fce)**",
    "created_at": "2019-11-20T00:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330820",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[`87f0048`](https://github.com/sagemath/sagetrac-mirror/commit/87f00486d061445a8fa83ddaf9133cd7be0aaca6)** to **[`a946e6e`](https://github.com/sagemath/sagetrac-mirror/commit/a946e6e817ccebe44f9c1b21dffeaf1339258fce)**



---

archive/issue_comments_330821.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n-This ticket is to upgrade to cvxopt 1.2.2, released 2018-10-19.\n-\n+This ticket is to upgrade to cvxopt 1.2.3\n - **Download page**: https://pypi.org/project/cvxopt/#files\n - **Tarballs**: \n-  * https://files.pythonhosted.org/packages/53/9c/cb7f362e651ff6eb1c6c490435ffded2a2c4074d54fa87bf9a99be4d7763/cvxopt-1.2.2.tar.gz\n-  * http://faculty.cse.tamu.edu/davis/SuiteSparse/SuiteSparse-5.3.0.tar.gz\n+  * https://files.pythonhosted.org/packages/00/02/13657bcd12d93f53b64a19b68d204f43d5f3247c29287c9eaeefcfa58fb9/cvxopt-1.2.3.tar.gz\n+  * https://github.com/DrTimothyAldenDavis/SuiteSparse/archive/v5.6.0.tar.gz\n \n+[Somehow downloads as `SuiteSparse-5.6.0.tar.gz` in chromium]\n Since cvxopt 1.1.9, [SuiteSparse](http://faculty.cse.tamu.edu/davis/suitesparse.html)\n is no longer included, thus it will have to be packaged separately.\n \n``````\n",
    "created_at": "2019-11-20T00:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330821",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
-This ticket is to upgrade to cvxopt 1.2.2, released 2018-10-19.
-
+This ticket is to upgrade to cvxopt 1.2.3
 - **Download page**: https://pypi.org/project/cvxopt/#files
 - **Tarballs**: 
-  * https://files.pythonhosted.org/packages/53/9c/cb7f362e651ff6eb1c6c490435ffded2a2c4074d54fa87bf9a99be4d7763/cvxopt-1.2.2.tar.gz
-  * http://faculty.cse.tamu.edu/davis/SuiteSparse/SuiteSparse-5.3.0.tar.gz
+  * https://files.pythonhosted.org/packages/00/02/13657bcd12d93f53b64a19b68d204f43d5f3247c29287c9eaeefcfa58fb9/cvxopt-1.2.3.tar.gz
+  * https://github.com/DrTimothyAldenDavis/SuiteSparse/archive/v5.6.0.tar.gz
 
+[Somehow downloads as `SuiteSparse-5.6.0.tar.gz` in chromium]
 Since cvxopt 1.1.9, [SuiteSparse](http://faculty.cse.tamu.edu/davis/suitesparse.html)
 is no longer included, thus it will have to be packaged separately.
 
``````




---

archive/issue_comments_330822.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nI think we should proceed with it without splitting the suitesparse. Well, 55Mb, so what. If anyone likes to make it smaller, they should volunteer...",
    "created_at": "2019-11-20T11:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330822",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:49" align="right">comment:49</div>

I think we should proceed with it without splitting the suitesparse. Well, 55Mb, so what. If anyone likes to make it smaller, they should volunteer...



---

archive/issue_comments_330823.json:
```json
{
    "body": "Changed commit from **[`a946e6e`](https://github.com/sagemath/sagetrac-mirror/commit/a946e6e817ccebe44f9c1b21dffeaf1339258fce)** to **[`e23d5c5`](https://github.com/sagemath/sagetrac-mirror/commit/e23d5c514ed9e6f6f6d0e7252b6b085ee8d98b5b)**",
    "created_at": "2019-11-21T21:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330823",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a946e6e`](https://github.com/sagemath/sagetrac-mirror/commit/a946e6e817ccebe44f9c1b21dffeaf1339258fce)** to **[`e23d5c5`](https://github.com/sagemath/sagetrac-mirror/commit/e23d5c514ed9e6f6f6d0e7252b6b085ee8d98b5b)**



---

archive/issue_comments_330824.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e23d5c514ed9e6f6f6d0e7252b6b085ee8d98b5b\"><code>e23d5c5</code></a></td><td><code>adding cvxopt testsuite with nose</code></td></tr></table>\n",
    "created_at": "2019-11-21T21:27:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330824",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e23d5c514ed9e6f6f6d0e7252b6b085ee8d98b5b"><code>e23d5c5</code></a></td><td><code>adding cvxopt testsuite with nose</code></td></tr></table>




---

archive/issue_comments_330825.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nAdded `spkg-check` after testing that it is working. Shamelessly copied it from the `networkx` one with appropriate adjustments.",
    "created_at": "2019-11-21T21:29:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330825",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:51" align="right">comment:51</div>

Added `spkg-check` after testing that it is working. Shamelessly copied it from the `networkx` one with appropriate adjustments.



---

archive/issue_comments_330826.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [@dimpase](#comment:49):\n> I think we should proceed with it without splitting the suitesparse. Well, 55Mb, so what. If anyone likes to make it smaller, they should volunteer...\n\nI think that the full suitesparse requires cmake, and I'd rather not have to make `cmake` a standard package.",
    "created_at": "2019-11-21T23:09:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330826",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [@dimpase](#comment:49):
> I think we should proceed with it without splitting the suitesparse. Well, 55Mb, so what. If anyone likes to make it smaller, they should volunteer...

I think that the full suitesparse requires cmake, and I'd rather not have to make `cmake` a standard package.



---

archive/issue_comments_330827.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@jhpalmieri](#comment:52):\n> Replying to [@dimpase](#comment:49):\n> > I think we should proceed with it without splitting the suitesparse. Well, 55Mb, so what. If anyone likes to make it smaller, they should volunteer...\n\n> \n> I think that the full suitesparse requires cmake, and I'd rather not have to make `cmake` a standard package.\n\nI specifically disabled the bits requiring cmake. The packages requiring cmake are not used by any other of the packages. It somewhat feels like someone is packaging some pet packages along the more widely used stuff.",
    "created_at": "2019-11-21T23:13:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330827",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@jhpalmieri](#comment:52):
> Replying to [@dimpase](#comment:49):
> > I think we should proceed with it without splitting the suitesparse. Well, 55Mb, so what. If anyone likes to make it smaller, they should volunteer...

> 
> I think that the full suitesparse requires cmake, and I'd rather not have to make `cmake` a standard package.

I specifically disabled the bits requiring cmake. The packages requiring cmake are not used by any other of the packages. It somewhat feels like someone is packaging some pet packages along the more widely used stuff.



---

archive/issue_comments_330828.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nYes, it's fine to include the full suitesparse, as long as we don't build the full suitesparse.",
    "created_at": "2019-11-21T23:29:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330828",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:54" align="right">comment:54</div>

Yes, it's fine to include the full suitesparse, as long as we don't build the full suitesparse.



---

archive/issue_comments_330829.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nI guess I could go \"redux\" and only install what we need. Note that some bits of suitesparse are also bundled (as in vendored) in `glpk`. And because `glpk` is autotooled, removing the bundled bits would require patching configure and generating a sage specific tarball.",
    "created_at": "2019-11-21T23:33:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330829",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:55" align="right">comment:55</div>

I guess I could go "redux" and only install what we need. Note that some bits of suitesparse are also bundled (as in vendored) in `glpk`. And because `glpk` is autotooled, removing the bundled bits would require patching configure and generating a sage specific tarball.



---

archive/issue_comments_330830.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nAnd now I remember we already unvendor zlib from glpk. May as well unvendor `amd` and `colamd` in a later ticket if we ship suitesparse (even in redux form since those are also needed by cvxopt).",
    "created_at": "2019-11-21T23:39:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330830",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:56" align="right">comment:56</div>

And now I remember we already unvendor zlib from glpk. May as well unvendor `amd` and `colamd` in a later ticket if we ship suitesparse (even in redux form since those are also needed by cvxopt).



---

archive/issue_comments_330831.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nBy the way, with OS X 10.14.6, the `cvxopt` test suite passes, and Sage passes its tests.",
    "created_at": "2019-11-21T23:52:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330831",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:57" align="right">comment:57</div>

By the way, with OS X 10.14.6, the `cvxopt` test suite passes, and Sage passes its tests.



---

archive/issue_comments_330832.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nAny volunteer to positive review this, or is there anything you wish me to change?",
    "created_at": "2019-11-25T21:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330832",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:58" align="right">comment:58</div>

Any volunteer to positive review this, or is there anything you wish me to change?



---

archive/issue_events_314459.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-11-25T21:24:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314459"
}
```



---

archive/issue_events_314460.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-11-25T21:24:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314460"
}
```



---

archive/issue_comments_330833.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nok. not tested on cygwin, but it should not stop it (I think cvxopt is well tested on windows)",
    "created_at": "2019-11-25T21:24:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330833",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:59" align="right">comment:59</div>

ok. not tested on cygwin, but it should not stop it (I think cvxopt is well tested on windows)



---

archive/issue_events_314461.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-11-28T21:53:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314461"
}
```



---

archive/issue_events_314462.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "695306e10b3ff530269242508a61a8b9625ad2d4",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-11-28T21:53:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22380#event-314462"
}
```



---

archive/issue_comments_330834.json:
```json
{
    "body": "Changed branch from **[u/fbissey/cvxopt-1.2.x](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/cvxopt-1.2.x)** to **[`e23d5c5`](https://github.com/sagemath/sagetrac-mirror/commit/e23d5c514ed9e6f6f6d0e7252b6b085ee8d98b5b)**",
    "created_at": "2019-11-28T21:53:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330834",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/fbissey/cvxopt-1.2.x](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/cvxopt-1.2.x)** to **[`e23d5c5`](https://github.com/sagemath/sagetrac-mirror/commit/e23d5c514ed9e6f6f6d0e7252b6b085ee8d98b5b)**



---

archive/issue_comments_330835.json:
```json
{
    "body": "Changed commit from **[`e23d5c5`](https://github.com/sagemath/sagetrac-mirror/commit/e23d5c514ed9e6f6f6d0e7252b6b085ee8d98b5b)** to none",
    "created_at": "2019-12-02T11:58:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330835",
    "user": "https://github.com/embray"
}
```

Changed commit from **[`e23d5c5`](https://github.com/sagemath/sagetrac-mirror/commit/e23d5c514ed9e6f6f6d0e7252b6b085ee8d98b5b)** to none



---

archive/issue_comments_330836.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@dimpase](#comment:59):\n> ok. not tested on cygwin, but it should not stop it (I think cvxopt is well tested on windows)\n\nIt should have--if you needed me to I would have done it, but I don't have time to check every issue so you need to ping me directly if it seems I'm not responding.",
    "created_at": "2019-12-02T11:58:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22380#issuecomment-330836",
    "user": "https://github.com/embray"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@dimpase](#comment:59):
> ok. not tested on cygwin, but it should not stop it (I think cvxopt is well tested on windows)

It should have--if you needed me to I would have done it, but I don't have time to check every issue so you need to ping me directly if it seems I'm not responding.
