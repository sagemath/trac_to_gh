# Issue 22169: flint 2.5.2.p0 build failure on Cygwin 32-bit

archive/issues_021932.json:
```json
{
    "assignees": [
        "https://github.com/embray"
    ],
    "body": "I'm starting to work on getting Sage working on 32-bit Cygwin again (64-bit is basically working minus a few unmerged patches).\n\nThe build fails while building flint (though it looks not unlikely to have something to do with NTL as well).  Buried among hundreds of warnings about `long long` is the actual error:\n\n```\n/opt/sagemath-7.4/local/include/NTL/SmartPtr.h: In member function 'void NTL::AlignedArray<T, align>::SetLength(long int)':\n/opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: error: there are no arguments to 'posix_memalign' that depend on a template parameter, so a declaration of 'posix_memalign' must be available [-fpermissive]\n   if (posix_memalign(&p, align, n*sizeof(T))) MemoryError();\n                                            ^\n/opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)\n```\n\nCC:  @tscrim\n\nKeywords: **windows, cygwin, flint, ntl, cygwin32**\n\nReviewer: **Travis Scrimshaw**\n\nComponent: **porting: Cygwin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22169_\n\n",
    "closed_at": "2021-09-10T04:50:10Z",
    "created_at": "2017-01-11T11:18:54Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "flint 2.5.2.p0 build failure on Cygwin 32-bit",
    "type": "issue",
    "updated_at": "2021-09-10T04:50:10Z",
    "url": "https://github.com/sagemath/sage/issues/22169",
    "user": "https://github.com/embray"
}
```
I'm starting to work on getting Sage working on 32-bit Cygwin again (64-bit is basically working minus a few unmerged patches).

The build fails while building flint (though it looks not unlikely to have something to do with NTL as well).  Buried among hundreds of warnings about `long long` is the actual error:

```
/opt/sagemath-7.4/local/include/NTL/SmartPtr.h: In member function 'void NTL::AlignedArray<T, align>::SetLength(long int)':
/opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: error: there are no arguments to 'posix_memalign' that depend on a template parameter, so a declaration of 'posix_memalign' must be available [-fpermissive]
   if (posix_memalign(&p, align, n*sizeof(T))) MemoryError();
                                            ^
/opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)
```

CC:  @tscrim

Keywords: **windows, cygwin, flint, ntl, cygwin32**

Reviewer: **Travis Scrimshaw**

Component: **porting: Cygwin**

_Issue created by migration from https://trac.sagemath.org/ticket/22169_





---

archive/issue_events_310413.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-01-11T11:18:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310413"
}
```



---

archive/issue_events_310414.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-01-11T11:18:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
    "label_color": "000080",
    "label_name": "c: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310414"
}
```



---

archive/issue_events_310415.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-01-11T11:18:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310415"
}
```



---

archive/issue_events_310416.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-01-11T11:18:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310416"
}
```



---

archive/issue_comments_327443.json:
```json
{
    "body": "Attachment: **[flint-2.5.2.p0.log](https://github.com/sagemath/sage/files/ticket22169/flint-2.5.2.p0.log)**",
    "created_at": "2017-01-11T11:22:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22169#issuecomment-327443",
    "user": "https://github.com/embray"
}
```

Attachment: **[flint-2.5.2.p0.log](https://github.com/sagemath/sage/files/ticket22169/flint-2.5.2.p0.log)**



---

archive/issue_comments_327444.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n I'm starting to work on getting Sage working on 32-bit Cygwin again (64-bit is basically working minus a few unmerged patches).\n \n-The build fails while building flint (though it looks not unlikely to have something to do with NTL as well).  I don't know what any of it means yet.  See attached build log.\n+The build fails while building flint (though it looks not unlikely to have something to do with NTL as well).  I don't know what any of it means yet, though it probably has something to do with `unsigned long long` support.  See attached build log.\n``````\n",
    "created_at": "2017-01-11T11:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22169#issuecomment-327444",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 I'm starting to work on getting Sage working on 32-bit Cygwin again (64-bit is basically working minus a few unmerged patches).
 
-The build fails while building flint (though it looks not unlikely to have something to do with NTL as well).  I don't know what any of it means yet.  See attached build log.
+The build fails while building flint (though it looks not unlikely to have something to do with NTL as well).  I don't know what any of it means yet, though it probably has something to do with `unsigned long long` support.  See attached build log.
``````




---

archive/issue_comments_327445.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,11 @@\n I'm starting to work on getting Sage working on 32-bit Cygwin again (64-bit is basically working minus a few unmerged patches).\n \n-The build fails while building flint (though it looks not unlikely to have something to do with NTL as well).  I don't know what any of it means yet, though it probably has something to do with `unsigned long long` support.  See attached build log.\n+The build fails while building flint (though it looks not unlikely to have something to do with NTL as well).  Buried among hundreds of warnings about `long long` is the actual error:\n+\n+```\n+[flint-2.5.2.p0] /opt/sagemath-7.4/local/include/NTL/SmartPtr.h: In member funct                                                                       ion 'void NTL::AlignedArray<T, align>::SetLength(long int)':\n+[flint-2.5.2.p0] /opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: error:                                                                        there are no arguments to 'posix_memalign' that depend on a template parameter,                                                                        so a declaration of 'posix_memalign' must be available [-fpermissive]\n+[flint-2.5.2.p0]    if (posix_memalign(&p, align, n*sizeof(T))) MemoryError();\n+[flint-2.5.2.p0]                                             ^\n+[flint-2.5.2.p0] /opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: note: (                                                                       if you use '-fpermissive', G++ will accept your code, but allowing the use of an                                                                        undeclared name is deprecated)\n+```\n``````\n",
    "created_at": "2017-01-11T11:32:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22169#issuecomment-327445",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,11 @@
 I'm starting to work on getting Sage working on 32-bit Cygwin again (64-bit is basically working minus a few unmerged patches).
 
-The build fails while building flint (though it looks not unlikely to have something to do with NTL as well).  I don't know what any of it means yet, though it probably has something to do with `unsigned long long` support.  See attached build log.
+The build fails while building flint (though it looks not unlikely to have something to do with NTL as well).  Buried among hundreds of warnings about `long long` is the actual error:
+
+```
+[flint-2.5.2.p0] /opt/sagemath-7.4/local/include/NTL/SmartPtr.h: In member funct                                                                       ion 'void NTL::AlignedArray<T, align>::SetLength(long int)':
+[flint-2.5.2.p0] /opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: error:                                                                        there are no arguments to 'posix_memalign' that depend on a template parameter,                                                                        so a declaration of 'posix_memalign' must be available [-fpermissive]
+[flint-2.5.2.p0]    if (posix_memalign(&p, align, n*sizeof(T))) MemoryError();
+[flint-2.5.2.p0]                                             ^
+[flint-2.5.2.p0] /opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: note: (                                                                       if you use '-fpermissive', G++ will accept your code, but allowing the use of an                                                                        undeclared name is deprecated)
+```
``````




---

archive/issue_comments_327446.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,9 +3,9 @@\n The build fails while building flint (though it looks not unlikely to have something to do with NTL as well).  Buried among hundreds of warnings about `long long` is the actual error:\n \n ```\n-[flint-2.5.2.p0] /opt/sagemath-7.4/local/include/NTL/SmartPtr.h: In member funct                                                                       ion 'void NTL::AlignedArray<T, align>::SetLength(long int)':\n-[flint-2.5.2.p0] /opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: error:                                                                        there are no arguments to 'posix_memalign' that depend on a template parameter,                                                                        so a declaration of 'posix_memalign' must be available [-fpermissive]\n-[flint-2.5.2.p0]    if (posix_memalign(&p, align, n*sizeof(T))) MemoryError();\n-[flint-2.5.2.p0]                                             ^\n-[flint-2.5.2.p0] /opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: note: (                                                                       if you use '-fpermissive', G++ will accept your code, but allowing the use of an                                                                        undeclared name is deprecated)\n+/opt/sagemath-7.4/local/include/NTL/SmartPtr.h: In member function 'void NTL::AlignedArray<T, align>::SetLength(long int)':\n+/opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: error: there are no arguments to 'posix_memalign' that depend on a template parameter, so a declaration of 'posix_memalign' must be available [-fpermissive]\n+   if (posix_memalign(&p, align, n*sizeof(T))) MemoryError();\n+                                            ^\n+/opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)\n ```\n``````\n",
    "created_at": "2017-01-11T11:33:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22169#issuecomment-327446",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,9 +3,9 @@
 The build fails while building flint (though it looks not unlikely to have something to do with NTL as well).  Buried among hundreds of warnings about `long long` is the actual error:
 
 ```
-[flint-2.5.2.p0] /opt/sagemath-7.4/local/include/NTL/SmartPtr.h: In member funct                                                                       ion 'void NTL::AlignedArray<T, align>::SetLength(long int)':
-[flint-2.5.2.p0] /opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: error:                                                                        there are no arguments to 'posix_memalign' that depend on a template parameter,                                                                        so a declaration of 'posix_memalign' must be available [-fpermissive]
-[flint-2.5.2.p0]    if (posix_memalign(&p, align, n*sizeof(T))) MemoryError();
-[flint-2.5.2.p0]                                             ^
-[flint-2.5.2.p0] /opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: note: (                                                                       if you use '-fpermissive', G++ will accept your code, but allowing the use of an                                                                        undeclared name is deprecated)
+/opt/sagemath-7.4/local/include/NTL/SmartPtr.h: In member function 'void NTL::AlignedArray<T, align>::SetLength(long int)':
+/opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: error: there are no arguments to 'posix_memalign' that depend on a template parameter, so a declaration of 'posix_memalign' must be available [-fpermissive]
+   if (posix_memalign(&p, align, n*sizeof(T))) MemoryError();
+                                            ^
+/opt/sagemath-7.4/local/include/NTL/SmartPtr.h:1420:44: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)
 ```
``````




---

archive/issue_comments_327447.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHaven't fully tested yet, but i think adding `-std=gnu++98` to the `CXXFLAGS` should work around it, a la #20381.",
    "created_at": "2017-01-11T11:50:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22169#issuecomment-327447",
    "user": "https://github.com/embray"
}
```

<div id="comment:4" align="right">comment:4</div>

Haven't fully tested yet, but i think adding `-std=gnu++98` to the `CXXFLAGS` should work around it, a la #20381.



---

archive/issue_comments_327448.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nYes, that seems to have done the trick.",
    "created_at": "2017-01-11T13:40:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22169#issuecomment-327448",
    "user": "https://github.com/embray"
}
```

<div id="comment:5" align="right">comment:5</div>

Yes, that seems to have done the trick.



---

archive/issue_events_310417.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-01-11T13:45:10Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "subject": "https://github.com/embray",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310417"
}
```



---

archive/issue_events_310418.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-11T14:11:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310418"
}
```



---

archive/issue_events_310419.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-11T14:11:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310419"
}
```



---

archive/issue_comments_327449.json:
```json
{
    "body": "Changed keywords from **windows cygwin flint ntl** to **windows, cygwin, flint, ntl, cygwin32**",
    "created_at": "2017-04-18T09:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22169#issuecomment-327449",
    "user": "https://github.com/embray"
}
```

Changed keywords from **windows cygwin flint ntl** to **windows, cygwin, flint, ntl, cygwin32**



---

archive/issue_events_310420.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-07T08:48:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310420"
}
```



---

archive/issue_events_310421.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-07T08:48:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "label": "https://github.com/sagemath/sage/labels/wishlist%20item",
    "label_color": "e81ff9",
    "label_name": "wishlist item",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310421"
}
```



---

archive/issue_events_310422.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-07T08:48:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310422"
}
```



---

archive/issue_comments_327450.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOutdated, should close",
    "created_at": "2021-09-07T08:48:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22169#issuecomment-327450",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Outdated, should close



---

archive/issue_events_310423.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-07T08:48:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310423"
}
```



---

archive/issue_events_310424.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-09-10T04:25:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310424"
}
```



---

archive/issue_events_310425.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-09-10T04:25:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310425"
}
```



---

archive/issue_comments_327451.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2021-09-10T04:25:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22169#issuecomment-327451",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_310426.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-10T04:50:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310426"
}
```



---

archive/issue_events_310427.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-10T04:50:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22169",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22169#event-310427"
}
```
