# Issue 22162: Return Unknown from ex.is_xyz() if Pynac returns false

archive/issues_021925.json:
```json
{
    "body": "Expected:\n\n```\nsage: x.is_integer()\nUnknown\nsage: if x.is_real(): True\nsage: if not x.is_real(): False\nFalse\n```\n\nTo clarify, I think it's possible to separate the issue of\n\"why do I get False\" from the issue of deciding between\n`True/False/Unknown`, by simply returning Unknown if the\nPynac logic returns false.\n\nIt would be much less surprising to the user.\n\nLater, when the complementary flags (irreal, noninteger, nonpositive) are implemented in Pynac these function can return `True/Unknown/False`, e.g. `is_integer` will return False if `is_noninteger` returns True, so both behave complementary.\n\nCC:  @pelegm\n\nAuthor: Ralf Stephan\n\nBranch: u/rws/22162-1\n\nStatus: needs_work\n\nCommit: 079597de7de7ff2f5474c1dd591942957818e4fc\n\nIssue created by migration from https://trac.sagemath.org/ticket/22162\n\n",
    "created_at": "2017-01-10T06:52:36Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Return Unknown from ex.is_xyz() if Pynac returns false",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22162",
    "user": "https://github.com/rwst"
}
```
Expected:

```
sage: x.is_integer()
Unknown
sage: if x.is_real(): True
sage: if not x.is_real(): False
False
```

To clarify, I think it's possible to separate the issue of
"why do I get False" from the issue of deciding between
`True/False/Unknown`, by simply returning Unknown if the
Pynac logic returns false.

It would be much less surprising to the user.

Later, when the complementary flags (irreal, noninteger, nonpositive) are implemented in Pynac these function can return `True/Unknown/False`, e.g. `is_integer` will return False if `is_noninteger` returns True, so both behave complementary.

CC:  @pelegm

Author: Ralf Stephan

Branch: u/rws/22162-1

Status: needs_work

Commit: 079597de7de7ff2f5474c1dd591942957818e4fc

Issue created by migration from https://trac.sagemath.org/ticket/22162





---

archive/issue_comments_410449.json:
```json
{
    "body": "Changing branch from \"\" to \"u/rws/return_unknown_from_ex_is_xyz___if_pynac_returns_false\"",
    "created_at": "2017-01-10T07:46:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410449",
    "user": "https://github.com/rwst"
}
```

Changing branch from "" to "u/rws/return_unknown_from_ex_is_xyz___if_pynac_returns_false"



---

archive/issue_comments_410450.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-01-10T07:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410450",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_410451.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[5918af7](https://git.sagemath.org/sage.git/commit?id=5918af7b6f0ab73bf94a340c62fab26d2992966a)|`22162: return Unknown from is_integer()`|",
    "created_at": "2017-01-10T07:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410451",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[5918af7](https://git.sagemath.org/sage.git/commit?id=5918af7b6f0ab73bf94a340c62fab26d2992966a)|`22162: return Unknown from is_integer()`|



---

archive/issue_comments_410452.json:
```json
{
    "body": "Changing commit from \"\" to \"5918af7b6f0ab73bf94a340c62fab26d2992966a\"",
    "created_at": "2017-01-10T07:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410452",
    "user": "https://github.com/rwst"
}
```

Changing commit from "" to "5918af7b6f0ab73bf94a340c62fab26d2992966a"



---

archive/issue_comments_410453.json:
```json
{
    "body": "Changing author from \"\" to \"Ralf Stephan\"",
    "created_at": "2017-01-10T07:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410453",
    "user": "https://github.com/rwst"
}
```

Changing author from "" to "Ralf Stephan"



---

archive/issue_comments_410454.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,4 +8,11 @@\n sage: \n ```\n \n+To clarify, I think it's possible to separate the issue of\n+\"why do I get False\" from the issue of deciding between\n+True/False/Unknown, by simply returning Unknown if the\n+Pynac logic returns false.\n+\n+It would be much less surprising to the user.\n+\n This ticket branch should change the behaviour of selected `is_xyz()` functions first, in order to see what's involved.\n``````\n",
    "created_at": "2017-01-10T07:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410454",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,4 +8,11 @@
 sage: 
 ```
 
+To clarify, I think it's possible to separate the issue of
+"why do I get False" from the issue of deciding between
+True/False/Unknown, by simply returning Unknown if the
+Pynac logic returns false.
+
+It would be much less surprising to the user.
+
 This ticket branch should change the behaviour of selected `is_xyz()` functions first, in order to see what's involved.
``````




---

archive/issue_comments_410455.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n \n To clarify, I think it's possible to separate the issue of\n \"why do I get False\" from the issue of deciding between\n-True/False/Unknown, by simply returning Unknown if the\n+`True/False/Unknown`, by simply returning Unknown if the\n Pynac logic returns false.\n \n It would be much less surprising to the user.\n``````\n",
    "created_at": "2017-01-10T07:59:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410455",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 
 To clarify, I think it's possible to separate the issue of
 "why do I get False" from the issue of deciding between
-True/False/Unknown, by simply returning Unknown if the
+`True/False/Unknown`, by simply returning Unknown if the
 Pynac logic returns false.
 
 It would be much less surprising to the user.
``````




---

archive/issue_comments_410456.json:
```json
{
    "body": "<a id='comment:5'></a>\nRegarding `Unknown`, shouldn't we disallow conversion to `bool`? Currently, `bool(Unknown)` is `False` and `not Unknown` is `True`. What do you think about that?",
    "created_at": "2017-01-10T08:47:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410456",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
Regarding `Unknown`, shouldn't we disallow conversion to `bool`? Currently, `bool(Unknown)` is `False` and `not Unknown` is `True`. What do you think about that?



---

archive/issue_comments_410457.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[5f5d134](https://git.sagemath.org/sage.git/commit/?id=5f5d1348d22dbfe3850f542a70afbd9c447a183c)|`22162: refine doctests`|",
    "created_at": "2017-01-10T08:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410457",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[5f5d134](https://git.sagemath.org/sage.git/commit/?id=5f5d1348d22dbfe3850f542a70afbd9c447a183c)|`22162: refine doctests`|



---

archive/issue_comments_410458.json:
```json
{
    "body": "Changing commit from \"5918af7b6f0ab73bf94a340c62fab26d2992966a\" to \"5f5d1348d22dbfe3850f542a70afbd9c447a183c\"",
    "created_at": "2017-01-10T08:54:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410458",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5918af7b6f0ab73bf94a340c62fab26d2992966a" to "5f5d1348d22dbfe3850f542a70afbd9c447a183c"



---

archive/issue_comments_410459.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [jdemeyer](#comment%3A5):\n> Regarding `Unknown`, shouldn't we disallow conversion to `bool`? Currently, `bool(Unknown)` is `False` and `not Unknown` is `True`. What do you think about that?\n\n\nThat would have to be changed to preserve previous usage. I don't think there is much of that in Sage (except `is_zero` which I don't want to deal with here).",
    "created_at": "2017-01-10T09:52:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410459",
    "user": "https://github.com/rwst"
}
```

<a id='comment:7'></a>
Replying to [jdemeyer](#comment%3A5):
> Regarding `Unknown`, shouldn't we disallow conversion to `bool`? Currently, `bool(Unknown)` is `False` and `not Unknown` is `True`. What do you think about that?


That would have to be changed to preserve previous usage. I don't think there is much of that in Sage (except `is_zero` which I don't want to deal with here).



---

archive/issue_comments_410460.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [jdemeyer](#comment%3A5):\n> Regarding `Unknown`, shouldn't we disallow conversion to `bool`? Currently, `bool(Unknown)` is `False` and `not Unknown` is `True`. What do you think about that?\n\n\nActually, what I meant is that it is fine as it is, as it preserves previous usage.",
    "created_at": "2017-01-10T13:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410460",
    "user": "https://github.com/rwst"
}
```

<a id='comment:8'></a>
Replying to [jdemeyer](#comment%3A5):
> Regarding `Unknown`, shouldn't we disallow conversion to `bool`? Currently, `bool(Unknown)` is `False` and `not Unknown` is `True`. What do you think about that?


Actually, what I meant is that it is fine as it is, as it preserves previous usage.



---

archive/issue_comments_410461.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,11 +1,11 @@\n Expected:\n \n ```\n-sage: x.is_real()\n+sage: x.is_integer()\n Unknown\n sage: if x.is_real(): True\n sage: if not x.is_real(): False\n-sage: \n+False\n ```\n \n To clarify, I think it's possible to separate the issue of\n``````\n",
    "created_at": "2017-01-10T13:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410461",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,11 +1,11 @@
 Expected:
 
 ```
-sage: x.is_real()
+sage: x.is_integer()
 Unknown
 sage: if x.is_real(): True
 sage: if not x.is_real(): False
-sage: 
+False
 ```
 
 To clarify, I think it's possible to separate the issue of
``````




---

archive/issue_comments_410462.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [rws](#comment%3A8):\n> Actually, what I meant is that it is fine as it is, as it preserves previous usage.\n\n\nIf the goal of this ticket is to preserve previous usage, why bother at all? Shouldn't the goal be to *fix* the bad previous usage instead? That means that `Unknown` should be treated really as an unknown value and not as a small variation on `False`.",
    "created_at": "2017-01-10T14:24:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410462",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
Replying to [rws](#comment%3A8):
> Actually, what I meant is that it is fine as it is, as it preserves previous usage.


If the goal of this ticket is to preserve previous usage, why bother at all? Shouldn't the goal be to *fix* the bad previous usage instead? That means that `Unknown` should be treated really as an unknown value and not as a small variation on `False`.



---

archive/issue_comments_410463.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[bb6f53f](https://git.sagemath.org/sage.git/commit/?id=bb6f53f68ed3cd499c60e4655ba1eb8d261b38ea)|`22162: change more is_xyz() methods and doctests`|",
    "created_at": "2017-01-10T14:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410463",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[bb6f53f](https://git.sagemath.org/sage.git/commit/?id=bb6f53f68ed3cd499c60e4655ba1eb8d261b38ea)|`22162: change more is_xyz() methods and doctests`|



---

archive/issue_comments_410464.json:
```json
{
    "body": "Changing commit from \"5f5d1348d22dbfe3850f542a70afbd9c447a183c\" to \"bb6f53f68ed3cd499c60e4655ba1eb8d261b38ea\"",
    "created_at": "2017-01-10T14:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410464",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5f5d1348d22dbfe3850f542a70afbd9c447a183c" to "bb6f53f68ed3cd499c60e4655ba1eb8d261b38ea"



---

archive/issue_comments_410465.json:
```json
{
    "body": "<a id='comment:11'></a>\nAs it was a no-brainer I changed the other `is_xyz()` function except for comparisons with zero, and I consider the ticket complete, apart from bug or doctest fixes.\n\nPlease review.",
    "created_at": "2017-01-10T14:41:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410465",
    "user": "https://github.com/rwst"
}
```

<a id='comment:11'></a>
As it was a no-brainer I changed the other `is_xyz()` function except for comparisons with zero, and I consider the ticket complete, apart from bug or doctest fixes.

Please review.



---

archive/issue_comments_410466.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2017-01-10T15:17:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410466",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_410467.json:
```json
{
    "body": "<a id='comment:13'></a>\nI think we should think about [comment:9] before merging this. What good is `Unknown` if it behaves the same as `False` for practical purposes?",
    "created_at": "2017-01-10T15:18:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410467",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
I think we should think about [comment:9] before merging this. What good is `Unknown` if it behaves the same as `False` for practical purposes?



---

archive/issue_comments_410468.json:
```json
{
    "body": "<a id='comment:14'></a>\nWell, quoting `unknown.py`, `..warning:: Unless PEP 335 is accepted, in the following cases, and, not and or return a somewhat wrong value::`. PEP 335 was rejected so I'm being pragmatic and accept the (admittedly) small value of serving the users that don't write Sage code.\n\nAlso, isn't that an independent issue?",
    "created_at": "2017-01-10T15:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410468",
    "user": "https://github.com/rwst"
}
```

<a id='comment:14'></a>
Well, quoting `unknown.py`, `..warning:: Unless PEP 335 is accepted, in the following cases, and, not and or return a somewhat wrong value::`. PEP 335 was rejected so I'm being pragmatic and accept the (admittedly) small value of serving the users that don't write Sage code.

Also, isn't that an independent issue?



---

archive/issue_comments_410469.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [rws](#comment%3A14):\n> Also, isn't that an independent issue?\n\n\nNo, I think it's not an independent issue because it's the motivation of this ticket. Which problem does this ticket solve if you don't fix `Unknown`?",
    "created_at": "2017-01-10T16:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410469",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Replying to [rws](#comment%3A14):
> Also, isn't that an independent issue?


No, I think it's not an independent issue because it's the motivation of this ticket. Which problem does this ticket solve if you don't fix `Unknown`?



---

archive/issue_comments_410470.json:
```json
{
    "body": "<a id='comment:16'></a>\nThere is also the purely practical point that it's easier to change the functionality of `Unknown` if it's only used very little.",
    "created_at": "2017-01-10T16:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410470",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
There is also the purely practical point that it's easier to change the functionality of `Unknown` if it's only used very little.



---

archive/issue_comments_410471.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [jdemeyer](#comment%3A15):\n> Which problem does this ticket solve if you don't fix `Unknown`?\n\n\nSemantic inconsistency: `Unknown` is meant but the output is `False`.",
    "created_at": "2017-01-10T16:27:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410471",
    "user": "https://github.com/rwst"
}
```

<a id='comment:17'></a>
Replying to [jdemeyer](#comment%3A15):
> Which problem does this ticket solve if you don't fix `Unknown`?


Semantic inconsistency: `Unknown` is meant but the output is `False`.



---

archive/issue_comments_410472.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [rws](#comment%3A17):\n> Semantic inconsistency: `Unknown` is meant but the output is `False`.\n\n\nWith this patch, you get an object 'Unknown' which *behaves* a lot like `False`. So this doesn't fix much...",
    "created_at": "2017-01-10T16:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410472",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
Replying to [rws](#comment%3A17):
> Semantic inconsistency: `Unknown` is meant but the output is `False`.


With this patch, you get an object 'Unknown' which *behaves* a lot like `False`. So this doesn't fix much...



---

archive/issue_comments_410473.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [jdemeyer](#comment%3A13):\n> I think we should think about [comment:9] before merging this. What good is `Unknown` if it behaves the same as `False` for practical purposes?\n\n\nDisclaimer: Python is not my specialty.\n\nEither you convert `Unknown` to `bool` (and you provide the means to do it via `__nonzero__`) or you don't (and deny any attempt). The former is this branch at the moment, the latter would force users to explicitly compare with `True/False/Unknown`, disallowing `if is_xyz():` conditionals. It would also disallow `not is_xyz()` and `is_xy() and/or is_yz()`. By disallow I mean an exception is raised. The patch to achieve this would simply be:\n\n```\ndiff --git a/src/sage/misc/unknown.py b/src/sage/misc/unknown.py\nindex b05751e..4a6979a 100644\n--- a/src/sage/misc/unknown.py\n+++ b/src/sage/misc/unknown.py\n@@ -66,7 +66,7 @@ class UnknownClass(UniqueRepresentation, SageObject):\n             sage: not Unknown\n             True\n         \"\"\"\n-        return False\n+        raise NotImplementedError('Python does not support tri-valued logic.')\n \n     __nonzero__ = __bool__\n```\n \n`Unknown` is used in a few places. With the patch I get about 100 doctest fails in `combinat`. I have not looked further into this.",
    "created_at": "2017-01-11T14:57:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410473",
    "user": "https://github.com/rwst"
}
```

<a id='comment:19'></a>
Replying to [jdemeyer](#comment%3A13):
> I think we should think about [comment:9] before merging this. What good is `Unknown` if it behaves the same as `False` for practical purposes?


Disclaimer: Python is not my specialty.

Either you convert `Unknown` to `bool` (and you provide the means to do it via `__nonzero__`) or you don't (and deny any attempt). The former is this branch at the moment, the latter would force users to explicitly compare with `True/False/Unknown`, disallowing `if is_xyz():` conditionals. It would also disallow `not is_xyz()` and `is_xy() and/or is_yz()`. By disallow I mean an exception is raised. The patch to achieve this would simply be:

```
diff --git a/src/sage/misc/unknown.py b/src/sage/misc/unknown.py
index b05751e..4a6979a 100644
--- a/src/sage/misc/unknown.py
+++ b/src/sage/misc/unknown.py
@@ -66,7 +66,7 @@ class UnknownClass(UniqueRepresentation, SageObject):
             sage: not Unknown
             True
         """
-        return False
+        raise NotImplementedError('Python does not support tri-valued logic.')
 
     __nonzero__ = __bool__
```
 
`Unknown` is used in a few places. With the patch I get about 100 doctest fails in `combinat`. I have not looked further into this.



---

archive/issue_comments_410474.json:
```json
{
    "body": "<a id='comment:20'></a>\nAre the conclusions of the above comments changed if we regard Python3 richcmp? Specifically can Py3 richcmp provide an `Unknown` object that is more useful than simply being `False`, e.g., can we change the behaviour of `if is_xyz():` and `not is_xyz()` such that the former compares with `True` and the latter with `False`?",
    "created_at": "2017-12-07T15:43:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410474",
    "user": "https://github.com/rwst"
}
```

<a id='comment:20'></a>
Are the conclusions of the above comments changed if we regard Python3 richcmp? Specifically can Py3 richcmp provide an `Unknown` object that is more useful than simply being `False`, e.g., can we change the behaviour of `if is_xyz():` and `not is_xyz()` such that the former compares with `True` and the latter with `False`?



---

archive/issue_comments_410475.json:
```json
{
    "body": "<a id='comment:21'></a>\nActually I find that the combinat doctest fails are fixable with a few natural changes, and so an `Unknown` that behaves differently from `False` seems possible.",
    "created_at": "2017-12-07T16:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410475",
    "user": "https://github.com/rwst"
}
```

<a id='comment:21'></a>
Actually I find that the combinat doctest fails are fixable with a few natural changes, and so an `Unknown` that behaves differently from `False` seems possible.



---

archive/issue_comments_410476.json:
```json
{
    "body": "<a id='comment:22'></a>\nSee #24345.",
    "created_at": "2017-12-08T15:35:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410476",
    "user": "https://github.com/rwst"
}
```

<a id='comment:22'></a>
See #24345.



---

archive/issue_events_058263.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-12-08T15:35:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58263"
}
```



---

archive/issue_comments_410477.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#24345\"",
    "created_at": "2017-12-08T15:35:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410477",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "" to "#24345"



---

archive/issue_comments_410478.json:
```json
{
    "body": "Changing commit from \"bb6f53f68ed3cd499c60e4655ba1eb8d261b38ea\" to \"\"",
    "created_at": "2017-12-08T15:35:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410478",
    "user": "https://github.com/rwst"
}
```

Changing commit from "bb6f53f68ed3cd499c60e4655ba1eb8d261b38ea" to ""



---

archive/issue_comments_410479.json:
```json
{
    "body": "Changing branch from \"u/rws/return_unknown_from_ex_is_xyz___if_pynac_returns_false\" to \"\"",
    "created_at": "2017-12-08T15:35:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410479",
    "user": "https://github.com/rwst"
}
```

Changing branch from "u/rws/return_unknown_from_ex_is_xyz___if_pynac_returns_false" to ""



---

archive/issue_comments_410480.json:
```json
{
    "body": "Changing author from \"Ralf Stephan\" to \"\"",
    "created_at": "2017-12-08T15:35:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410480",
    "user": "https://github.com/rwst"
}
```

Changing author from "Ralf Stephan" to ""



---

archive/issue_comments_410481.json:
```json
{
    "body": "Changing branch from \"\" to \"u/rws/22162\"",
    "created_at": "2017-12-12T08:02:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410481",
    "user": "https://github.com/rwst"
}
```

Changing branch from "" to "u/rws/22162"



---

archive/issue_comments_410482.json:
```json
{
    "body": "Changing commit from \"\" to \"c86618152fad77de88f8e07c74770adc72c20e8a\"",
    "created_at": "2017-12-12T08:04:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410482",
    "user": "https://github.com/rwst"
}
```

Changing commit from "" to "c86618152fad77de88f8e07c74770adc72c20e8a"



---

archive/issue_comments_410483.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,5 +14,3 @@\n Pynac logic returns false.\n \n It would be much less surprising to the user.\n-\n-This ticket branch should change the behaviour of selected `is_xyz()` functions first, in order to see what's involved.\n``````\n",
    "created_at": "2017-12-12T08:04:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410483",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,5 +14,3 @@
 Pynac logic returns false.
 
 It would be much less surprising to the user.
-
-This ticket branch should change the behaviour of selected `is_xyz()` functions first, in order to see what's involved.
``````




---

archive/issue_comments_410484.json:
```json
{
    "body": "Changing author from \"\" to \"Ralf Stephan\"",
    "created_at": "2017-12-12T08:04:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410484",
    "user": "https://github.com/rwst"
}
```

Changing author from "" to "Ralf Stephan"



---

archive/issue_comments_410485.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2017-12-12T08:04:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410485",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_410486.json:
```json
{
    "body": "<a id='comment:24'></a>\nNew commits:\n|                                                                                                                                          |                                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|\n|[c866181](https://git.sagemath.org/sage.git/commit?id=c86618152fad77de88f8e07c74770adc72c20e8a)|`22162: Return Unknown from ex.is_xyz() if Pynac returns false`|",
    "created_at": "2017-12-12T08:04:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410486",
    "user": "https://github.com/rwst"
}
```

<a id='comment:24'></a>
New commits:
|                                                                                                                                          |                                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|
|[c866181](https://git.sagemath.org/sage.git/commit?id=c86618152fad77de88f8e07c74770adc72c20e8a)|`22162: Return Unknown from ex.is_xyz() if Pynac returns false`|



---

archive/issue_comments_410487.json:
```json
{
    "body": "Changing dependencies from \"#24345\" to \"\"",
    "created_at": "2017-12-12T08:04:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410487",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "#24345" to ""



---

archive/issue_comments_410488.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,3 +14,5 @@\n Pynac logic returns false.\n \n It would be much less surprising to the user.\n+\n+Later, when the complementary flags (irreal, noninteger, nonpositive) are implemented in Pynac these function can return `True/Unknown/False`, e.g. `is_integer` will return False if `is_noninteger` returns True, so both behave complementary.\n``````\n",
    "created_at": "2017-12-12T08:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410488",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,3 +14,5 @@
 Pynac logic returns false.
 
 It would be much less surprising to the user.
+
+Later, when the complementary flags (irreal, noninteger, nonpositive) are implemented in Pynac these function can return `True/Unknown/False`, e.g. `is_integer` will return False if `is_noninteger` returns True, so both behave complementary.
``````




---

archive/issue_comments_410489.json:
```json
{
    "body": "<a id='comment:25'></a>\nLater, when the complementary flags (irreal, noninteger, nonpositive) are implemented in Pynac these function can return `True/Unknown/False`, e.g. `is_integer` will return False if `is_noninteger` returns True, so both behave complementary.",
    "created_at": "2017-12-12T08:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410489",
    "user": "https://github.com/rwst"
}
```

<a id='comment:25'></a>
Later, when the complementary flags (irreal, noninteger, nonpositive) are implemented in Pynac these function can return `True/Unknown/False`, e.g. `is_integer` will return False if `is_noninteger` returns True, so both behave complementary.



---

archive/issue_comments_410490.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [rws](#comment%3A25):\n> Later, when the complementary flags (irreal, noninteger, nonpositive) are implemented in Pynac these function can return `True/Unknown/False`, e.g. `is_integer` will return False if `is_noninteger` returns True, so both behave complementary.\n\n\nWhat would be the point of having `is_noninteger` if `is_integer` is already doing the job!?",
    "created_at": "2017-12-14T23:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410490",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'></a>
Replying to [rws](#comment%3A25):
> Later, when the complementary flags (irreal, noninteger, nonpositive) are implemented in Pynac these function can return `True/Unknown/False`, e.g. `is_integer` will return False if `is_noninteger` returns True, so both behave complementary.


What would be the point of having `is_noninteger` if `is_integer` is already doing the job!?



---

archive/issue_comments_410491.json:
```json
{
    "body": "<a id='comment:27'></a>\nAgree. Exposing the flag to the user is not really necessary.",
    "created_at": "2017-12-15T04:16:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410491",
    "user": "https://github.com/rwst"
}
```

<a id='comment:27'></a>
Agree. Exposing the flag to the user is not really necessary.



---

archive/issue_comments_410492.json:
```json
{
    "body": "Changing branch from \"u/rws/22162\" to \"u/rws/22162-1\"",
    "created_at": "2018-03-03T16:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410492",
    "user": "https://github.com/rwst"
}
```

Changing branch from "u/rws/22162" to "u/rws/22162-1"



---

archive/issue_comments_410493.json:
```json
{
    "body": "<a id='comment:29'></a>\nNew commits:\n|                                                                                                                                          |                                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|\n|[079597d](https://git.sagemath.org/sage.git/commit?id=079597de7de7ff2f5474c1dd591942957818e4fc)|`22162: Return Unknown from ex.is_xyz() if Pynac returns false`|",
    "created_at": "2018-04-07T16:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410493",
    "user": "https://github.com/pelegm"
}
```

<a id='comment:29'></a>
New commits:
|                                                                                                                                          |                                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|
|[079597d](https://git.sagemath.org/sage.git/commit?id=079597de7de7ff2f5474c1dd591942957818e4fc)|`22162: Return Unknown from ex.is_xyz() if Pynac returns false`|



---

archive/issue_comments_410494.json:
```json
{
    "body": "Changing commit from \"c86618152fad77de88f8e07c74770adc72c20e8a\" to \"079597de7de7ff2f5474c1dd591942957818e4fc\"",
    "created_at": "2018-04-07T16:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410494",
    "user": "https://github.com/pelegm"
}
```

Changing commit from "c86618152fad77de88f8e07c74770adc72c20e8a" to "079597de7de7ff2f5474c1dd591942957818e4fc"



---

archive/issue_events_058264.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-22T15:30:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58264"
}
```



---

archive/issue_events_058265.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2020-02-22T15:30:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58265"
}
```



---

archive/issue_comments_410495.json:
```json
{
    "body": "<a id='comment:30'></a>\n#24345 is merged in 9.1.beta5 but this one needs a rebase",
    "created_at": "2020-02-22T15:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410495",
    "user": "https://github.com/videlec"
}
```

<a id='comment:30'></a>
#24345 is merged in 9.1.beta5 but this one needs a rebase



---

archive/issue_comments_410496.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-02-22T15:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410496",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_058266.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58266"
}
```



---

archive/issue_events_058267.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-05-01T04:28:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58267"
}
```



---

archive/issue_comments_410497.json:
```json
{
    "body": "<a id='comment:31'></a>\nMoving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410497",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>
Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_events_058268.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58268"
}
```



---

archive/issue_events_058269.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58269"
}
```



---

archive/issue_events_058270.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58270"
}
```



---

archive/issue_events_058271.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58271"
}
```



---

archive/issue_comments_410498.json:
```json
{
    "body": "<a id='comment:33'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410498",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_058272.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58272"
}
```



---

archive/issue_events_058273.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58273"
}
```



---

archive/issue_comments_410499.json:
```json
{
    "body": "<a id='comment:34'></a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22162#issuecomment-410499",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_058274.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58274"
}
```



---

archive/issue_events_058275.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58275"
}
```



---

archive/issue_events_058276.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58276"
}
```



---

archive/issue_events_058277.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58277"
}
```



---

archive/issue_events_058278.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58278"
}
```



---

archive/issue_events_058279.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22162",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22162#event-58279"
}
```
