# Issue 22872: Enhanced linbox interface

archive/issues_022635.json:
```json
{
    "body": "In `sage/libs/linbox/linbox.pxd` we currently have two classes that gives an interface for dense integer matrix (`Linbox_integer_dense`) and sparse matrix over Z/nZ (`Linbox_modn_sparse`). These interfaces are then used in different matrix implementations in `sage/matrix/`.\n\nThis task ticket stands for improvement of the LinBox interface\n\n- moving the implementation directly in `sage/matrix` without the intermediate Cython classes. In particular, avoid calling the linbox-sage interface (on LinBox side) but directly invoque LinBox C++ code (as Cython now allows it) (done in #22924 and #24544)\n- more documentation and testing\n- support for other matrix types (e.g. sparse integer matrix (done in #23214), interface with [m4ri](https://bitbucket.org/malb/m4ri) that Sage uses for matrix over GF(2))\n- expose more algorithms\n  - solving `A X = B` with `B` a matrix without repeated call\n    to LinBox column by column\n  - parallel features from LinBox\n  - more options for computing determinant (LinBox knows how to do this in more than one way)\n  - open-mp is explicitely disabled in `spkg-install` with a reference to [#17635 comment 67](http://trac.sagemath.org/ticket/17635#comment:67)\n  - fplll is explicitely disabled in `spkg-install` with a reference to #21221\n\nConcrete ticket list\n\n- #22924: implement a direct flint/LinBox interface and use it in `matrix_integer_dense.pyx`\n- #22966: warning while compiling `element_givaro.pyx`\n- #22970: use `fmpq_mat_t` for rational dense matrices\n- #22971: more linbox in rational dense matrices\n- #23158: LinBox patch for integer sparse linear solving\n- #24544: clean declarations + matrix modn\n- #23214: solve/det/rank/charpoly/minpoly for sparse integral matrices (see also #13915, #25257)\n- #26178: `unsigned int` and `int64_t` behave very differently!\n\nCC:  @ClementPernet @JohnCremona dlucas\n\nKeywords: linbox\n\nStatus: new\n\nIssue created by migration from https://trac.sagemath.org/ticket/22872\n\n",
    "created_at": "2017-04-26T06:12:36Z",
    "labels": [
        "component: interfaces"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.4",
    "title": "Enhanced linbox interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22872",
    "user": "https://github.com/videlec"
}
```
In `sage/libs/linbox/linbox.pxd` we currently have two classes that gives an interface for dense integer matrix (`Linbox_integer_dense`) and sparse matrix over Z/nZ (`Linbox_modn_sparse`). These interfaces are then used in different matrix implementations in `sage/matrix/`.

This task ticket stands for improvement of the LinBox interface

- moving the implementation directly in `sage/matrix` without the intermediate Cython classes. In particular, avoid calling the linbox-sage interface (on LinBox side) but directly invoque LinBox C++ code (as Cython now allows it) (done in #22924 and #24544)
- more documentation and testing
- support for other matrix types (e.g. sparse integer matrix (done in #23214), interface with [m4ri](https://bitbucket.org/malb/m4ri) that Sage uses for matrix over GF(2))
- expose more algorithms
  - solving `A X = B` with `B` a matrix without repeated call
    to LinBox column by column
  - parallel features from LinBox
  - more options for computing determinant (LinBox knows how to do this in more than one way)
  - open-mp is explicitely disabled in `spkg-install` with a reference to [#17635 comment 67](http://trac.sagemath.org/ticket/17635#comment:67)
  - fplll is explicitely disabled in `spkg-install` with a reference to #21221

Concrete ticket list

- #22924: implement a direct flint/LinBox interface and use it in `matrix_integer_dense.pyx`
- #22966: warning while compiling `element_givaro.pyx`
- #22970: use `fmpq_mat_t` for rational dense matrices
- #22971: more linbox in rational dense matrices
- #23158: LinBox patch for integer sparse linear solving
- #24544: clean declarations + matrix modn
- #23214: solve/det/rank/charpoly/minpoly for sparse integral matrices (see also #13915, #25257)
- #26178: `unsigned int` and `int64_t` behave very differently!

CC:  @ClementPernet @JohnCremona dlucas

Keywords: linbox

Status: new

Issue created by migration from https://trac.sagemath.org/ticket/22872





---

archive/issue_comments_315451.json:
```json
{
    "body": "<a id='comment:3'></a>I just noticed that there was a previous attempt to clean the interface in #21327 by C. Bouillaguet.",
    "created_at": "2017-05-03T06:41:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22872#issuecomment-315451",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>I just noticed that there was a previous attempt to clean the interface in #21327 by C. Bouillaguet.



---

archive/issue_events_059409.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-04-29T05:21:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22872",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22872#event-59409"
}
```



---

archive/issue_comments_315452.json:
```json
{
    "body": "Changing keywords from \"\" to \"linbox\".",
    "created_at": "2018-06-26T14:03:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22872#issuecomment-315452",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "" to "linbox".



---

archive/issue_events_059410.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-26T14:03:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22872",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22872#event-59410"
}
```



---

archive/issue_events_059411.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-06-26T14:03:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22872",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22872#event-59411"
}
```



---

archive/issue_comments_315453.json:
```json
{
    "body": "<a id='comment:21'></a>update milestone 8.3 -> 8.4",
    "created_at": "2018-08-03T19:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22872#issuecomment-315453",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'></a>update milestone 8.3 -> 8.4



---

archive/issue_events_059412.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22872",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22872#event-59412"
}
```



---

archive/issue_events_059413.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-08-03T19:20:18Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22872",
    "milestone": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22872#event-59413"
}
```
