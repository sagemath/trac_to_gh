# Issue 22349: Deprecate sorting of Graph vertices and edges by default

archive/issues_022112.json:
```json
{
    "assignees": [],
    "body": "Why does `Graph.vertices()` need to *sort* the list of vertices? If the user wants a sorted list, they can always call `sorted()` anyway. The same for `Graph.edges()`.\n\nSorting is broken badly now that #22029 is merged.\n\nCC:  @sagetrac-Stefan @jm58660 @jhpalmieri\n\nKeywords: **python3, richcmp**\n\nBranch/Commit: **[fe93716](https://github.com/sagemath/sagetrac-mirror/commit/fe93716223af144c0c07fad94eea920e10f139bb)**\n\nReviewer: **David Coudert, John Palmieri**\n\nAuthor: **John Palmieri, David Coudert**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22349_\n\n",
    "closed_at": "2022-08-04T22:47:08Z",
    "created_at": "2017-02-10T16:07:32Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Deprecate sorting of Graph vertices and edges by default",
    "type": "issue",
    "updated_at": "2022-08-04T22:47:08Z",
    "url": "https://github.com/sagemath/sage/issues/22349",
    "user": "https://github.com/jdemeyer"
}
```
Why does `Graph.vertices()` need to *sort* the list of vertices? If the user wants a sorted list, they can always call `sorted()` anyway. The same for `Graph.edges()`.

Sorting is broken badly now that #22029 is merged.

CC:  @sagetrac-Stefan @jm58660 @jhpalmieri

Keywords: **python3, richcmp**

Branch/Commit: **[fe93716](https://github.com/sagemath/sagetrac-mirror/commit/fe93716223af144c0c07fad94eea920e10f139bb)**

Reviewer: **David Coudert, John Palmieri**

Author: **John Palmieri, David Coudert**

_Issue created by migration from https://trac.sagemath.org/ticket/22349_





---

archive/issue_events_294648.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-10T16:07:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294648"
}
```



---

archive/issue_events_294649.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-10T16:07:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294649"
}
```



---

archive/issue_events_294650.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-10T16:07:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294650"
}
```



---

archive/issue_events_294651.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-10T16:07:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294651"
}
```



---

archive/issue_comments_332991.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Why does `Graph.vertices()` need to *sort* the list of vertices?\n+\n+Sorting is going to break badly in Python 3.\n``````\n",
    "created_at": "2017-02-10T16:07:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-332991",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Why does `Graph.vertices()` need to *sort* the list of vertices?
+
+Sorting is going to break badly in Python 3.
``````




---

archive/issue_comments_332992.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Why does `Graph.vertices()` need to *sort* the list of vertices?\n+Why does `Graph.vertices()` need to *sort* the list of vertices? If the user wants a sorted list, they can always call `sorted()` anyway.\n \n Sorting is going to break badly in Python 3.\n``````\n",
    "created_at": "2017-02-10T16:08:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-332992",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Why does `Graph.vertices()` need to *sort* the list of vertices?
+Why does `Graph.vertices()` need to *sort* the list of vertices? If the user wants a sorted list, they can always call `sorted()` anyway.
 
 Sorting is going to break badly in Python 3.
``````




---

archive/issue_events_294652.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-10T16:09:08Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "title_is": "Graph.vertices() should not be sorted",
    "title_was": "Graph.vertices() should not sort by default",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294652"
}
```



---

archive/issue_events_294653.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-10T16:23:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "title_is": "Deprecate sorting of Graph.vertices()",
    "title_was": "Graph.vertices() should not be sorted",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294653"
}
```



---

archive/issue_comments_332993.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Why does `Graph.vertices()` need to *sort* the list of vertices? If the user wants a sorted list, they can always call `sorted()` anyway.\n+Why does `Graph.vertices()` need to *sort* the list of vertices? If the user wants a sorted list, they can always call `sorted()` anyway. The same for `Graph.edges()`.\n \n Sorting is going to break badly in Python 3.\n``````\n",
    "created_at": "2017-02-10T16:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-332993",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Why does `Graph.vertices()` need to *sort* the list of vertices? If the user wants a sorted list, they can always call `sorted()` anyway.
+Why does `Graph.vertices()` need to *sort* the list of vertices? If the user wants a sorted list, they can always call `sorted()` anyway. The same for `Graph.edges()`.
 
 Sorting is going to break badly in Python 3.
``````




---

archive/issue_events_294654.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-10T16:37:39Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "title_is": "Deprecate sorting of Graph vertices and edges",
    "title_was": "Deprecate sorting of Graph.vertices()",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294654"
}
```



---

archive/issue_events_294655.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-10T16:40:39Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "title_is": "Deprecate sorting of Graph vertices and edges by default",
    "title_was": "Deprecate sorting of Graph vertices and edges",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294655"
}
```



---

archive/issue_comments_332994.json:
```json
{
    "body": "Branch: **[u/jdemeyer/graph_vertices___should_not_be_sorted](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/graph_vertices___should_not_be_sorted)**",
    "created_at": "2017-02-10T16:45:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-332994",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/graph_vertices___should_not_be_sorted](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/graph_vertices___should_not_be_sorted)**



---

archive/issue_comments_332995.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c3a584d5f578ab4ff71969b79904ed1220ca4a1\">1c3a584</a></td><td><code>Deprecate default sorting of Graph vertices and edges</code></td></tr></table>\n",
    "created_at": "2017-02-10T17:28:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-332995",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c3a584d5f578ab4ff71969b79904ed1220ca4a1">1c3a584</a></td><td><code>Deprecate default sorting of Graph vertices and edges</code></td></tr></table>




---

archive/issue_comments_332996.json:
```json
{
    "body": "Commit: **[1c3a584](https://github.com/sagemath/sagetrac-mirror/commit/1c3a584d5f578ab4ff71969b79904ed1220ca4a1)**",
    "created_at": "2017-02-10T17:28:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-332996",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[1c3a584](https://github.com/sagemath/sagetrac-mirror/commit/1c3a584d5f578ab4ff71969b79904ed1220ca4a1)**



---

archive/issue_comments_332997.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nWhat you propose to do is not an easy task. I suspect that many algorithms assume that the vertices are sorted. For sure, many algorithms assume that the ordering is always the same when calling `vertices()` and `vertex_iterator()`, so I hope that what you propose preserves this strong assumption.\n\nIs your long term plan to remove parameter `sort` from the methods or just to set its default value to false ?\nI don't know the potential problems of sorting with Python 3, so I'm not sure of the motivation.\n\nMany many tests are broken\n\n```\nsage -t src/sage/graphs/generic_graph.py  # 45 doctests failed\nsage -t src/sage/graphs/generators/smallgraphs.py  # 4 doctests failed\nsage -t src/sage/graphs/strongly_regular_db.pyx  # 1 doctest failed\nsage -t src/sage/graphs/graph.py  # 11 doctests failed\nsage -t src/sage/graphs/base/static_sparse_graph.pyx  # 1 doctest failed\nsage -t src/sage/graphs/generators/families.py  # 3 doctests failed\nsage -t src/sage/graphs/digraph.py  # 10 doctests failed\nsage -t src/sage/graphs/digraph_generators.py  # 3 doctests failed\nsage -t src/sage/graphs/base/graph_backends.pyx  # 2 doctests failed\nsage -t src/sage/graphs/generic_graph_pyx.pyx  # 3 doctests failed\nsage -t src/sage/graphs/comparability.pyx  # 1 doctest failed\nsage -t src/sage/graphs/bipartite_graph.py  # 3 doctests failed\nsage -t src/sage/graphs/base/c_graph.pyx  # 1 doctest failed\nsage -t src/sage/graphs/graph_decompositions/vertex_separation.pyx  # 4 doctests failed\nsage -t src/sage/graphs/schnyder.py  # 1 doctest failed\nsage -t src/sage/graphs/line_graph.py  # 3 doctests failed\nsage -t src/sage/graphs/isgci.py  # 1 doctest failed\nsage -t src/sage/graphs/graph_decompositions/graph_products.pyx  # 1 doctest failed\nsage -t src/sage/quivers/path_semigroup.py  # 3 doctests failed\nsage -t src/sage/groups/perm_gps/partn_ref/refinement_graphs.pyx  # 1 doctest failed\n```\n\nfor instance (random copy/paste)\n\n```\nFile \"src/sage/graphs/line_graph.py\", line 466, in sage.graphs.line_graph.root_graph\nFailed example:\n    root_graph(graphs.DiamondGraph())\nExpected:\n    (Graph on 4 vertices, {0: (0, 3), 1: (0, 1), 2: (0, 2), 3: (1, 2)})\nGot:\n    (Graph on 4 vertices, {0: (1, 2), 1: (0, 1), 2: (0, 2), 3: (0, 3)})\n**********************************************************************\nFile \"src/sage/graphs/base/graph_backends.pyx\", line 802, in sage.graphs.base.graph_backends.NetworkXGraphDeprecated.mutate\nFailed example:\n    G.edges(sort=False)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.base.graph_backends.NetworkXGraphDeprecated.mutate[5]>\", line 1, in <module>\n        G.edges(sort=False)\n    TypeError: edges() got an unexpected keyword argument 'sort'\n**********************************************************************\nFile \"src/sage/graphs/digraph.py\", line 3424, in sage.graphs.digraph.DiGraph.flow_polytope\nFailed example:\n    fl.vertices(sort=False)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.digraph.DiGraph.flow_polytope[19]>\", line 1, in <module>\n        fl.vertices(sort=False)\n    TypeError: __call__() got an unexpected keyword argument 'sort'\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 20558, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    d.automorphism_group(algorithm='sage')\nExpected:\n    Permutation Group with generators [('01','02')('10','20')('11','22')('12','21')]\nGot:\n    Permutation Group with generators [()]\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 20197, in sage.graphs.generic_graph.GenericGraph.degree_to_cell\nFailed example:\n    G.degree_to_cell('111', cell)\nExpected:\n    0\nGot:\n    1\n```",
    "created_at": "2017-02-11T10:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-332997",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:9" align="right">Comment 9</div>

What you propose to do is not an easy task. I suspect that many algorithms assume that the vertices are sorted. For sure, many algorithms assume that the ordering is always the same when calling `vertices()` and `vertex_iterator()`, so I hope that what you propose preserves this strong assumption.

Is your long term plan to remove parameter `sort` from the methods or just to set its default value to false ?
I don't know the potential problems of sorting with Python 3, so I'm not sure of the motivation.

Many many tests are broken

```
sage -t src/sage/graphs/generic_graph.py  # 45 doctests failed
sage -t src/sage/graphs/generators/smallgraphs.py  # 4 doctests failed
sage -t src/sage/graphs/strongly_regular_db.pyx  # 1 doctest failed
sage -t src/sage/graphs/graph.py  # 11 doctests failed
sage -t src/sage/graphs/base/static_sparse_graph.pyx  # 1 doctest failed
sage -t src/sage/graphs/generators/families.py  # 3 doctests failed
sage -t src/sage/graphs/digraph.py  # 10 doctests failed
sage -t src/sage/graphs/digraph_generators.py  # 3 doctests failed
sage -t src/sage/graphs/base/graph_backends.pyx  # 2 doctests failed
sage -t src/sage/graphs/generic_graph_pyx.pyx  # 3 doctests failed
sage -t src/sage/graphs/comparability.pyx  # 1 doctest failed
sage -t src/sage/graphs/bipartite_graph.py  # 3 doctests failed
sage -t src/sage/graphs/base/c_graph.pyx  # 1 doctest failed
sage -t src/sage/graphs/graph_decompositions/vertex_separation.pyx  # 4 doctests failed
sage -t src/sage/graphs/schnyder.py  # 1 doctest failed
sage -t src/sage/graphs/line_graph.py  # 3 doctests failed
sage -t src/sage/graphs/isgci.py  # 1 doctest failed
sage -t src/sage/graphs/graph_decompositions/graph_products.pyx  # 1 doctest failed
sage -t src/sage/quivers/path_semigroup.py  # 3 doctests failed
sage -t src/sage/groups/perm_gps/partn_ref/refinement_graphs.pyx  # 1 doctest failed
```

for instance (random copy/paste)

```
File "src/sage/graphs/line_graph.py", line 466, in sage.graphs.line_graph.root_graph
Failed example:
    root_graph(graphs.DiamondGraph())
Expected:
    (Graph on 4 vertices, {0: (0, 3), 1: (0, 1), 2: (0, 2), 3: (1, 2)})
Got:
    (Graph on 4 vertices, {0: (1, 2), 1: (0, 1), 2: (0, 2), 3: (0, 3)})
**********************************************************************
File "src/sage/graphs/base/graph_backends.pyx", line 802, in sage.graphs.base.graph_backends.NetworkXGraphDeprecated.mutate
Failed example:
    G.edges(sort=False)
Exception raised:
    Traceback (most recent call last):
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.base.graph_backends.NetworkXGraphDeprecated.mutate[5]>", line 1, in <module>
        G.edges(sort=False)
    TypeError: edges() got an unexpected keyword argument 'sort'
**********************************************************************
File "src/sage/graphs/digraph.py", line 3424, in sage.graphs.digraph.DiGraph.flow_polytope
Failed example:
    fl.vertices(sort=False)
Exception raised:
    Traceback (most recent call last):
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.digraph.DiGraph.flow_polytope[19]>", line 1, in <module>
        fl.vertices(sort=False)
    TypeError: __call__() got an unexpected keyword argument 'sort'
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 20558, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    d.automorphism_group(algorithm='sage')
Expected:
    Permutation Group with generators [('01','02')('10','20')('11','22')('12','21')]
Got:
    Permutation Group with generators [()]
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 20197, in sage.graphs.generic_graph.GenericGraph.degree_to_cell
Failed example:
    G.degree_to_cell('111', cell)
Expected:
    0
Got:
    1
```



---

archive/issue_comments_332998.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@dcoudert](#comment%3A9):\n> What you propose to do is not an easy task.\n\nI never claimed that it was easy. But it has to be done in order to support Python 3.\n\n> For sure, many algorithms assume that the ordering is always the same when calling `vertices()` and `vertex_iterator()`, so I hope that what you propose preserves this strong assumption.\n\nIt should remain the same, yes.\n\n> Is your long term plan to remove parameter `sort` from the methods or just to set its default value to false ?\n\nI don't care much. I guess once the default is `False`, there will be little reason left to keep the `sort` keyword.\n\n> I don't know the potential problems of sorting with Python 3, so I'm not sure of the motivation.\n\nThe problem is that you cannot sort arbitrary things in Python 3. For example:\n\n```\n>>> sorted([1, \"hello\"])\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\nTypeError: unorderable types: str() < int()\n```",
    "created_at": "2017-02-11T13:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-332998",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@dcoudert](#comment%3A9):
> What you propose to do is not an easy task.

I never claimed that it was easy. But it has to be done in order to support Python 3.

> For sure, many algorithms assume that the ordering is always the same when calling `vertices()` and `vertex_iterator()`, so I hope that what you propose preserves this strong assumption.

It should remain the same, yes.

> Is your long term plan to remove parameter `sort` from the methods or just to set its default value to false ?

I don't care much. I guess once the default is `False`, there will be little reason left to keep the `sort` keyword.

> I don't know the potential problems of sorting with Python 3, so I'm not sure of the motivation.

The problem is that you cannot sort arbitrary things in Python 3. For example:

```
>>> sorted([1, "hello"])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unorderable types: str() < int()
```



---

archive/issue_comments_332999.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nNow I understand the need for this big change.\n\nIs there a way to sort arbitrary things in Python 3 ? some trick ?",
    "created_at": "2017-02-11T15:10:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-332999",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:11" align="right">Comment 11</div>

Now I understand the need for this big change.

Is there a way to sort arbitrary things in Python 3 ? some trick ?



---

archive/issue_comments_333000.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@dcoudert](#comment%3A11):\n> Is there a way to sort arbitrary things in Python 3 ?\n\nOf course there is. The question is: what would you expect from such \"arbitrary\" sorting?\n\nAnd if it's arbitrary anyway: why would you want to \"sort\" in the first place?",
    "created_at": "2017-02-11T15:35:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333000",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@dcoudert](#comment%3A11):
> Is there a way to sort arbitrary things in Python 3 ?

Of course there is. The question is: what would you expect from such "arbitrary" sorting?

And if it's arbitrary anyway: why would you want to "sort" in the first place?



---

archive/issue_comments_333001.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nAs far as I understand, there are at least two different issues here:\n* some algorithms want a consistent and easy to test order on the vertices, typically (but probably not only) to loop over the unordered pairs of vertices normalized by putting the smalled vertex first;\n* in interactive use, when there is a natural order on the vertices (in practice, mostly when they are integers, strings, or possibly nested tuples of such things), *people* want to see the vertices, edges, etc. listed in an order that makes the output easy to read, and it would be a significant regression to take that away from them.\n\nAdditionally, it may well be the case that some algorithms also rely on vertices of a certain type (say tuples of integers) automatically coming out sorted in a particular order, I'm not sure.",
    "created_at": "2017-02-14T18:53:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333001",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:13" align="right">Comment 13</div>

As far as I understand, there are at least two different issues here:
* some algorithms want a consistent and easy to test order on the vertices, typically (but probably not only) to loop over the unordered pairs of vertices normalized by putting the smalled vertex first;
* in interactive use, when there is a natural order on the vertices (in practice, mostly when they are integers, strings, or possibly nested tuples of such things), *people* want to see the vertices, edges, etc. listed in an order that makes the output easy to read, and it would be a significant regression to take that away from them.

Additionally, it may well be the case that some algorithms also rely on vertices of a certain type (say tuples of integers) automatically coming out sorted in a particular order, I'm not sure.



---

archive/issue_comments_333002.json:
```json
{
    "body": "Dependencies: **#22383**",
    "created_at": "2017-02-15T08:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333002",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#22383**



---

archive/issue_comments_333003.json:
```json
{
    "body": "Changed commit from **[1c3a584](https://github.com/sagemath/sagetrac-mirror/commit/1c3a584d5f578ab4ff71969b79904ed1220ca4a1)** to **[aa0691f](https://github.com/sagemath/sagetrac-mirror/commit/aa0691f9fa7b03f9130b398923d92de3fb5fcf36)**",
    "created_at": "2017-02-15T08:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333003",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1c3a584](https://github.com/sagemath/sagetrac-mirror/commit/1c3a584d5f578ab4ff71969b79904ed1220ca4a1)** to **[aa0691f](https://github.com/sagemath/sagetrac-mirror/commit/aa0691f9fa7b03f9130b398923d92de3fb5fcf36)**



---

archive/issue_comments_333004.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa0691f9fa7b03f9130b398923d92de3fb5fcf36\">aa0691f</a></td><td><code>Deprecate default sorting of Graph vertices and edges</code></td></tr></table>\n",
    "created_at": "2017-02-15T08:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333004",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15" align="right">Comment 15</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa0691f9fa7b03f9130b398923d92de3fb5fcf36">aa0691f</a></td><td><code>Deprecate default sorting of Graph vertices and edges</code></td></tr></table>




---

archive/issue_comments_333005.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nReplying to [@dcoudert](#comment%3A11):\n> Now I understand the need for this big change.\n> \n> Is there a way to sort arbitrary things in Python 3 ? some trick ?\n\none way is\n\n>>> sorted( ..., key=str )\n\nYou could of course use another key function that uses some sorting heuristic (something like the key function used by https://pypi.python.org/pypi/natsort)\n\nDisplay functions in IPython have hooks for nice sorting (used for dicts and sets), so if graphs need to display their keys and edges in a nice way, that's probably the hook to go for.\n\nAlgorithms that need their edges sorted should either insist on sortable labels or sort by index tuples or something like that (something that is guaranteed to be sortable regardless of what the user decides to use as labels).",
    "created_at": "2017-11-06T11:06:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333005",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:17" align="right">Comment 17</div>

Replying to [@dcoudert](#comment%3A11):
> Now I understand the need for this big change.
> 
> Is there a way to sort arbitrary things in Python 3 ? some trick ?

one way is

>>> sorted( ..., key=str )

You could of course use another key function that uses some sorting heuristic (something like the key function used by https://pypi.python.org/pypi/natsort)

Display functions in IPython have hooks for nice sorting (used for dicts and sets), so if graphs need to display their keys and edges in a nice way, that's probably the hook to go for.

Algorithms that need their edges sorted should either insist on sortable labels or sort by index tuples or something like that (something that is guaranteed to be sortable regardless of what the user decides to use as labels).



---

archive/issue_comments_333006.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@mezzarobba](#comment%3A13):\n> * in interactive use, when there is a natural order on the vertices (in practice, mostly when they are integers, strings, or possibly nested tuples of such things), *people* want to see the vertices, edges, etc. listed in an order that makes the output easy to read, and it would be a significant regression to take that away from them.\n\nIn that case, the best solution is probably to use a custom class for this. It would behave exactly like a Python `list` (or `tuple`) in all possible ways, except that it would be sorted on display.",
    "created_at": "2017-11-06T12:02:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333006",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@mezzarobba](#comment%3A13):
> * in interactive use, when there is a natural order on the vertices (in practice, mostly when they are integers, strings, or possibly nested tuples of such things), *people* want to see the vertices, edges, etc. listed in an order that makes the output easy to read, and it would be a significant regression to take that away from them.

In that case, the best solution is probably to use a custom class for this. It would behave exactly like a Python `list` (or `tuple`) in all possible ways, except that it would be sorted on display.



---

archive/issue_comments_333007.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@nbruin](#comment%3A17):\n> Display functions in IPython have hooks for nice sorting (used for dicts and sets), so if graphs need to display their keys and edges in a nice way, that's probably the hook to go for.\n\nNils, I only just saw your comment now. But yes, this was exactly my point too.",
    "created_at": "2017-11-06T12:28:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333007",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@nbruin](#comment%3A17):
> Display functions in IPython have hooks for nice sorting (used for dicts and sets), so if graphs need to display their keys and edges in a nice way, that's probably the hook to go for.

Nils, I only just saw your comment now. But yes, this was exactly my point too.



---

archive/issue_comments_333008.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@nbruin](#comment%3A17):\n> Algorithms that need their edges sorted should either insist on sortable labels or sort by index tuples or something like that (something that is guaranteed to be sortable regardless of what the user decides to use as labels). \n\nThey could simply sort by `id()`, provided that the same label is not represented by several physically distinct objects that compare equal. Unfortunately, this probably does happen (see #22374).",
    "created_at": "2017-11-06T12:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333008",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@nbruin](#comment%3A17):
> Algorithms that need their edges sorted should either insist on sortable labels or sort by index tuples or something like that (something that is guaranteed to be sortable regardless of what the user decides to use as labels). 

They could simply sort by `id()`, provided that the same label is not represented by several physically distinct objects that compare equal. Unfortunately, this probably does happen (see #22374).



---

archive/issue_comments_333009.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nReplying to [@mezzarobba](#comment%3A20):\n> They could simply sort by `id()`\n\nIf you want to sort by `id()`, what is the purpose of sorting at all? I mean, it's not sorting, it's putting in a deterministic (but otherwise arbitrary) order. Assuming that methods like `vertices()` return the vertices in a deterministic order, I don't see the point.",
    "created_at": "2017-11-06T12:43:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333009",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">Comment 21</div>

Replying to [@mezzarobba](#comment%3A20):
> They could simply sort by `id()`

If you want to sort by `id()`, what is the purpose of sorting at all? I mean, it's not sorting, it's putting in a deterministic (but otherwise arbitrary) order. Assuming that methods like `vertices()` return the vertices in a deterministic order, I don't see the point.



---

archive/issue_comments_333010.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@jdemeyer](#comment%3A21):\n> Replying to [@mezzarobba](#comment%3A20):\n> > They could simply sort by `id()`\n\n> \n> If you want to sort by `id()`, what is the purpose of sorting at all? I mean, it's not sorting, it's putting in a deterministic (but otherwise arbitrary) order. Assuming that methods like `vertices()` return the vertices in a deterministic order, I don't see the point.\n\nAll I'm saying is that some algorithms do want to access the vertices in some arbitrary deterministic order, typically in order to iterate over the unordered pairs {v,v'}, and, as far as I remember, currently rely on the output of `vertices()` etc. being sorted to do that. If all the methods these algorithms use to access the vertices return them in the same deterministic order, then indeed, there is no need to do anything, otherwise, sorting by `id()` may be a better option than requiring the labels to be ordered.",
    "created_at": "2017-11-06T13:02:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333010",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@jdemeyer](#comment%3A21):
> Replying to [@mezzarobba](#comment%3A20):
> > They could simply sort by `id()`

> 
> If you want to sort by `id()`, what is the purpose of sorting at all? I mean, it's not sorting, it's putting in a deterministic (but otherwise arbitrary) order. Assuming that methods like `vertices()` return the vertices in a deterministic order, I don't see the point.

All I'm saying is that some algorithms do want to access the vertices in some arbitrary deterministic order, typically in order to iterate over the unordered pairs {v,v'}, and, as far as I remember, currently rely on the output of `vertices()` etc. being sorted to do that. If all the methods these algorithms use to access the vertices return them in the same deterministic order, then indeed, there is no need to do anything, otherwise, sorting by `id()` may be a better option than requiring the labels to be ordered.



---

archive/issue_events_294656.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-29T12:51:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294656"
}
```



---

archive/issue_events_294657.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-29T12:51:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294657"
}
```



---

archive/issue_comments_333011.json:
```json
{
    "body": "Changed keywords from none to **richcmp**",
    "created_at": "2018-03-29T12:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333011",
    "user": "https://github.com/jdemeyer"
}
```

Changed keywords from none to **richcmp**



---

archive/issue_comments_333012.json:
```json
{
    "body": "Changed keywords from **richcmp** to **python3, richcmp**",
    "created_at": "2018-07-11T15:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333012",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from **richcmp** to **python3, richcmp**



---

archive/issue_comments_333013.json:
```json
{
    "body": "Work Issues: **merge conflicts**",
    "created_at": "2018-07-12T12:37:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333013",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **merge conflicts**



---

archive/issue_comments_333014.json:
```json
{
    "body": "Changed work issues from **merge conflicts** to none",
    "created_at": "2018-07-12T14:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333014",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **merge conflicts** to none



---

archive/issue_comments_333015.json:
```json
{
    "body": "Changed dependencies from **#22383** to none",
    "created_at": "2018-08-30T14:57:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333015",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **#22383** to none



---

archive/issue_events_294658.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2018-08-30T15:51:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294658"
}
```



---

archive/issue_events_294659.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2018-08-30T15:51:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294659"
}
```



---

archive/issue_comments_333016.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nApart from the need for ensuring that the internal order of vertices/edges during iterations is always the same (many algorithms assume that we have such a fixed order, whatever it is) and doing our best to preserve a nice display for interactive use, I think we have another issue:\n- For an edge `(u, v, label)` in an undirected graph, we usually have `u <= v`. So somehow we have a sorting here and many algorithms assume that vertices are ordered (not all). If I understand well, it is a problem with Python3 if vertex labels are of different types. We must find a solution for that.\n- In many algorithms, we have tests like `if u < v`. Again a big problem.\nSo what can we do ?\n\nThe only good news here is that vertices must be immutable.",
    "created_at": "2018-08-31T16:35:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333016",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:31" align="right">Comment 31</div>

Apart from the need for ensuring that the internal order of vertices/edges during iterations is always the same (many algorithms assume that we have such a fixed order, whatever it is) and doing our best to preserve a nice display for interactive use, I think we have another issue:
- For an edge `(u, v, label)` in an undirected graph, we usually have `u <= v`. So somehow we have a sorting here and many algorithms assume that vertices are ordered (not all). If I understand well, it is a problem with Python3 if vertex labels are of different types. We must find a solution for that.
- In many algorithms, we have tests like `if u < v`. Again a big problem.
So what can we do ?

The only good news here is that vertices must be immutable.



---

archive/issue_comments_333017.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\n#26169 Trial for not sorting multiple edges",
    "created_at": "2018-09-01T09:30:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333017",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:32" align="right">Comment 32</div>

#26169 Trial for not sorting multiple edges



---

archive/issue_comments_333018.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nDo we already have a plan for this ticket? I know that there have many graph-related Python 3 tickets, but I'm a bit lost on the overall plan.",
    "created_at": "2019-01-07T08:46:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333018",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">Comment 33</div>

Do we already have a plan for this ticket? I know that there have many graph-related Python 3 tickets, but I'm a bit lost on the overall plan.



---

archive/issue_comments_333019.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nI am asking because there are now only a handful of doctest failures remaining in #22029 and they are almost all due to sorting in graphs.",
    "created_at": "2019-01-07T08:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333019",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:34" align="right">Comment 34</div>

I am asking because there are now only a handful of doctest failures remaining in #22029 and they are almost all due to sorting in graphs.



---

archive/issue_comments_333020.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nThere are 3 different points here: 1) sorting the list of vertices, 2) sorting the list of edges, and 3) sorting the vertices of an edge.\n\nFor 1), we made huge progresses in reducing the dependency of methods to `.vertices()`. I'm not sure how many methods still rely on it. Most of them now use the ordering given by  `list(G)` without making specific assumption on that order. We create a mapping when needed, and pass it to some methods. We can certainly completely avoid that dependency, but can we do that without deprecation ? \n\nFor 2), similarly, we have reduced the number of methods relying on `.edges()`, plus we can use `sort=False` parameter. We can try and see...\n\n3) is more tricky and I don't know how to do that yet.",
    "created_at": "2019-01-07T08:59:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333020",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:35" align="right">Comment 35</div>

There are 3 different points here: 1) sorting the list of vertices, 2) sorting the list of edges, and 3) sorting the vertices of an edge.

For 1), we made huge progresses in reducing the dependency of methods to `.vertices()`. I'm not sure how many methods still rely on it. Most of them now use the ordering given by  `list(G)` without making specific assumption on that order. We create a mapping when needed, and pass it to some methods. We can certainly completely avoid that dependency, but can we do that without deprecation ? 

For 2), similarly, we have reduced the number of methods relying on `.edges()`, plus we can use `sort=False` parameter. We can try and see...

3) is more tricky and I don't know how to do that yet.



---

archive/issue_comments_333021.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nFor 1) there is still an issue with `relabel()`: #27027",
    "created_at": "2019-01-07T09:23:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333021",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">Comment 36</div>

For 1) there is still an issue with `relabel()`: #27027



---

archive/issue_comments_333022.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nAnd one more with `graph_isom_equivalent_non_edge_labeled_graph()`: #27029",
    "created_at": "2019-01-07T15:55:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333022",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">Comment 37</div>

And one more with `graph_isom_equivalent_non_edge_labeled_graph()`: #27029



---

archive/issue_comments_333023.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n Why does `Graph.vertices()` need to *sort* the list of vertices? If the user wants a sorted list, they can always call `sorted()` anyway. The same for `Graph.edges()`.\n \n-Sorting is going to break badly in Python 3.\n+Sorting is broken badly now that #22029 is merged.\n``````\n",
    "created_at": "2019-02-22T21:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333023",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 Why does `Graph.vertices()` need to *sort* the list of vertices? If the user wants a sorted list, they can always call `sorted()` anyway. The same for `Graph.edges()`.
 
-Sorting is going to break badly in Python 3.
+Sorting is broken badly now that #22029 is merged.
``````




---

archive/issue_events_294660.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-22T21:09:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294660"
}
```



---

archive/issue_events_294661.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-22T21:09:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294661"
}
```



---

archive/issue_comments_333024.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nWe have now drastically reduced the dependency to `.vertices()` and `.edges()` in the graph module (except in doctests, but we can specify `sort=True` or just change the expected output). \nWe must now identify the remaining tasks to do and schedule the work. I propose to do that in #26640 to get a full picture.",
    "created_at": "2019-02-23T10:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333024",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:39" align="right">Comment 39</div>

We have now drastically reduced the dependency to `.vertices()` and `.edges()` in the graph module (except in doctests, but we can specify `sort=True` or just change the expected output). 
We must now identify the remaining tasks to do and schedule the work. I propose to do that in #26640 to get a full picture.



---

archive/issue_comments_333025.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nHere is a concrete proposal for this ticket:\n\n1. If no `sort` option is given (the default), give a deprecation and try to sort but fail gracefully if the input is not sortable.\n\n2. If a `sort` option is given, do as before.",
    "created_at": "2019-02-24T13:16:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333025",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">Comment 40</div>

Here is a concrete proposal for this ticket:

1. If no `sort` option is given (the default), give a deprecation and try to sort but fail gracefully if the input is not sortable.

2. If a `sort` option is given, do as before.



---

archive/issue_comments_333026.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nI also like the idea that somebody posted on sage-devel (I don't remember who) that `.vertices()` and `.edges()` should return a \"view\" which could have various operations on it.",
    "created_at": "2019-02-24T13:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333026",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:41" align="right">Comment 41</div>

I also like the idea that somebody posted on sage-devel (I don't remember who) that `.vertices()` and `.edges()` should return a "view" which could have various operations on it.



---

archive/issue_comments_333027.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nIt's Thierry ([this message](https://groups.google.com/d/msg/sage-devel/uEHBKekJ_Cw/peoyx4PaBQAJ)). I also like this idea. Should we do that here, before in another ticket, or later ?\n\n\nNetworkx now also use views [networkx.Graph.edges](https://networkx.github.io/documentation/latest/reference/classes/generated/networkx.Graph.edges.html#networkx.Graph.edges).",
    "created_at": "2019-02-24T13:54:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333027",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:42" align="right">Comment 42</div>

It's Thierry ([this message](https://groups.google.com/d/msg/sage-devel/uEHBKekJ_Cw/peoyx4PaBQAJ)). I also like this idea. Should we do that here, before in another ticket, or later ?


Networkx now also use views [networkx.Graph.edges](https://networkx.github.io/documentation/latest/reference/classes/generated/networkx.Graph.edges.html#networkx.Graph.edges).



---

archive/issue_comments_333028.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nA proposal for an `EdgeView` in #27408.",
    "created_at": "2019-03-03T21:21:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333028",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:43" align="right">Comment 43</div>

A proposal for an `EdgeView` in #27408.



---

archive/issue_comments_333029.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nTicket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333029",
    "user": "https://github.com/embray"
}
```

<div id="comment:44" align="right">Comment 44</div>

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_events_294662.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294662"
}
```



---

archive/issue_events_294663.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-03-25T10:56:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294663"
}
```



---

archive/issue_comments_333030.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nAs the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).",
    "created_at": "2019-06-14T14:54:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333030",
    "user": "https://github.com/embray"
}
```

<div id="comment:45" align="right">Comment 45</div>

As the Sage-8.8 release milestone is pending, we should delete the sage-8.8 milestone for tickets that are not actively being worked on or that still require significant work to move forward.  If you feel that this ticket should be included in the next Sage release at the soonest please set its milestone to the next release milestone (sage-8.9).



---

archive/issue_events_294664.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-06-14T14:54:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294664"
}
```



---

archive/issue_comments_333031.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nNow that we have EdgesView #27408 and Python3, we have few remaining methods methods effectively relying on the order of the vertices and/or edges. So we should restart working on this ticket for 9.2.",
    "created_at": "2020-04-18T10:16:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333031",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:46" align="right">Comment 46</div>

Now that we have EdgesView #27408 and Python3, we have few remaining methods methods effectively relying on the order of the vertices and/or edges. So we should restart working on this ticket for 9.2.



---

archive/issue_events_294665.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-04-18T10:16:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294665"
}
```



---

archive/issue_comments_333032.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nWith #30145, we propose to deprecate `edge_iterator`, thus generalizing the use of `.edges` method and so of `EdgesView`. After that, it should be easier to deprecate sorting edges by default.",
    "created_at": "2020-07-15T12:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333032",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:47" align="right">Comment 47</div>

With #30145, we propose to deprecate `edge_iterator`, thus generalizing the use of `.edges` method and so of `EdgesView`. After that, it should be easier to deprecate sorting edges by default.



---

archive/issue_events_294666.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294666"
}
```



---

archive/issue_events_294667.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294667"
}
```



---

archive/issue_comments_333033.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333033",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:49" align="right">Comment 49</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_294668.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294668"
}
```



---

archive/issue_events_294669.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294669"
}
```



---

archive/issue_events_294670.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294670"
}
```



---

archive/issue_events_294671.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294671"
}
```



---

archive/issue_events_294672.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294672"
}
```



---

archive/issue_events_294673.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294673"
}
```



---

archive/issue_comments_333034.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nActually, #27408 has silently (not mentioned in the ticket) introduced a deprecation warning for sorting edges by default, but it is used in method `.edges(...)` only when `sort is None` and the default value of `sort` is `True`. So I think no-one is aware of it.\n\nI'm not sure how to make this deprecation warning visible without breaking numerous doctests.",
    "created_at": "2022-03-10T15:55:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333034",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:52" align="right">Comment 52</div>

Actually, #27408 has silently (not mentioned in the ticket) introduced a deprecation warning for sorting edges by default, but it is used in method `.edges(...)` only when `sort is None` and the default value of `sort` is `True`. So I think no-one is aware of it.

I'm not sure how to make this deprecation warning visible without breaking numerous doctests.



---

archive/issue_events_294674.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:45:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294674"
}
```



---

archive/issue_events_294675.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:45:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294675"
}
```



---

archive/issue_comments_333035.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nReplying to [@dcoudert](#comment%3A52):\n> Actually, #27408 has silently (not mentioned in the ticket) introduced a deprecation warning for sorting edges by default, but it is used in method `.edges(...)` only when `sort is None` and the default value of `sort` is `True`. So I think no-one is aware of it.\n> \n> I'm not sure how to make this deprecation warning visible without breaking numerous doctests.\n\nI'd be interested in seeing this ticket resolved, perhaps you could ask about how to go about this deprecation on sage-devel? Or I am happy to follow this up if you'd prefer.",
    "created_at": "2022-06-28T12:51:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333035",
    "user": "https://github.com/alexjbest"
}
```

<div id="comment:54" align="right">Comment 54</div>

Replying to [@dcoudert](#comment%3A52):
> Actually, #27408 has silently (not mentioned in the ticket) introduced a deprecation warning for sorting edges by default, but it is used in method `.edges(...)` only when `sort is None` and the default value of `sort` is `True`. So I think no-one is aware of it.
> 
> I'm not sure how to make this deprecation warning visible without breaking numerous doctests.

I'd be interested in seeing this ticket resolved, perhaps you could ask about how to go about this deprecation on sage-devel? Or I am happy to follow this up if you'd prefer.



---

archive/issue_comments_333036.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nThe difficulty is that we still have some methods relying on `.vertices()`, and I don't know how to avoid that.\n\nFor instance in `graph.py`: `effective_resistance_matrix`, `common_neighbors_matrix`, `orientations` (but this one can be avoided easily), `chromatic_quasisymmetric_function`, `twograph`, `write_to_eps`. And there might be other modules using graphs and relying on the ordering of the vertices given by `.vertices()` (e.g., `combinat`, `geometry`, `groups`, `matroids`, `schemes`, `topology`, etc..\n\nSo the first step might be to identify methods/modules relying on `.vertices()` and try to modify them. Once done, we will be able to safely deprecate sorting by default.",
    "created_at": "2022-06-28T13:58:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333036",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:55" align="right">Comment 55</div>

The difficulty is that we still have some methods relying on `.vertices()`, and I don't know how to avoid that.

For instance in `graph.py`: `effective_resistance_matrix`, `common_neighbors_matrix`, `orientations` (but this one can be avoided easily), `chromatic_quasisymmetric_function`, `twograph`, `write_to_eps`. And there might be other modules using graphs and relying on the ordering of the vertices given by `.vertices()` (e.g., `combinat`, `geometry`, `groups`, `matroids`, `schemes`, `topology`, etc..

So the first step might be to identify methods/modules relying on `.vertices()` and try to modify them. Once done, we will be able to safely deprecate sorting by default.



---

archive/issue_comments_333037.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nThe `.vertices()` method is probably used lots of times, but one fix could be:\n\n- every time it's used, add the argument `sort=False` or `sort=True` as necessary,\n- and then change the default to `sort=False`.\n\nMaybe it's easier with edges: add the explicit argument everywhere and then change the default to `None`.\n\nOr is that too na\u00efve? I tried this change:\n\n```diff\ndiff --git a/src/sage/graphs/graph.py b/src/sage/graphs/graph.py\nindex 1579f23ad8..5dbb937b6b 100644\n--- a/src/sage/graphs/graph.py\n+++ b/src/sage/graphs/graph.py\n@@ -3480,7 +3480,7 @@ class Graph(GenericGraph):\n             name = 'An orientation of ' + name\n \n         if not self.size():\n-            D = DiGraph(data=[self.vertices(), []],\n+            D = DiGraph(data=[self.vertices(sort=False), []],\n                         format='vertices_and_edges',\n                         name=name,\n                         pos=self._pos,\n@@ -3494,7 +3494,7 @@ class Graph(GenericGraph):\n \n         E = [[(u,v,label), (v,u,label)] if u != v else [(u,v,label)]\n              for u,v,label in self.edge_iterator()]\n-        verts = self.vertices()\n+        verts = self.vertices(sort=False)\n         for edges in itertools.product(*E):\n             D = DiGraph(data=[verts, edges],\n                         format='vertices_and_edges',\n@@ -4009,7 +4009,7 @@ class Graph(GenericGraph):\n             R = t.parent()\n         M = QuasiSymmetricFunctions(R).M()\n         ret = M.zero()\n-        V = self.vertices()\n+        V = self.vertices(sort=False)\n \n         def asc(sigma):\n             stat = 0\n@@ -6185,7 +6185,7 @@ class Graph(GenericGraph):\n                 T.append([x, y, z])\n \n         T = TwoGraph(T)\n-        T.relabel({i: v for i,v in enumerate(self.vertices())})\n+        T.relabel({i: v for i,v in enumerate(self.vertices(sort=False))})\n \n         return T\n \n@@ -6221,7 +6221,7 @@ class Graph(GenericGraph):\n         if filename[-4:] != '.eps':\n             filename += '.eps'\n         f = open(filename, 'w')\n-        f.write( print_graph_eps(self.vertices(), self.edge_iterator(), pos) )\n+        f.write( print_graph_eps(self.vertices(sort=False), self.edge_iterator(), pos) )\n         f.close()\n \n     @doc_index(\"Algorithmically hard stuff\")\n@@ -7940,7 +7940,7 @@ class Graph(GenericGraph):\n             D = None\n         elif self.order() == 1:\n             D = create_prime_node()\n-            D.children.append(create_normal_node(self.vertices()[0]))\n+            D.children.append(create_normal_node(self.vertices(sort=False)[0]))\n         else:\n             D = habib_maurer_algorithm(self)\n \n@@ -9225,7 +9225,7 @@ class Graph(GenericGraph):\n         if not n:\n             raise ValueError('unable to compute effective resistance for an empty Graph object')\n         if vertices is None:\n-            vertices = self.vertices()\n+            vertices = self.vertices(sort=False)\n         self._scream_if_not_simple()\n         if not self.is_connected():\n             raise ValueError('the Graph is not a connected graph')\n@@ -9458,7 +9458,7 @@ class Graph(GenericGraph):\n         \"\"\"\n         self._scream_if_not_simple()\n         if vertices is None:\n-            vertices = self.vertices()\n+            vertices = self.vertices(sort=False)\n         set_immutable = kwds.pop('immutable', False)\n         A = self.adjacency_matrix(vertices=vertices, base_ring=base_ring, immutable=True, **kwds)\n         M = A**2\n```\nand all tests in the graphs directory still passed.",
    "created_at": "2022-06-28T22:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333037",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:56" align="right">Comment 56</div>

The `.vertices()` method is probably used lots of times, but one fix could be:

- every time it's used, add the argument `sort=False` or `sort=True` as necessary,
- and then change the default to `sort=False`.

Maybe it's easier with edges: add the explicit argument everywhere and then change the default to `None`.

Or is that too nave? I tried this change:

```diff
diff --git a/src/sage/graphs/graph.py b/src/sage/graphs/graph.py
index 1579f23ad8..5dbb937b6b 100644
--- a/src/sage/graphs/graph.py
+++ b/src/sage/graphs/graph.py
@@ -3480,7 +3480,7 @@ class Graph(GenericGraph):
             name = 'An orientation of ' + name
 
         if not self.size():
-            D = DiGraph(data=[self.vertices(), []],
+            D = DiGraph(data=[self.vertices(sort=False), []],
                         format='vertices_and_edges',
                         name=name,
                         pos=self._pos,
@@ -3494,7 +3494,7 @@ class Graph(GenericGraph):
 
         E = [[(u,v,label), (v,u,label)] if u != v else [(u,v,label)]
              for u,v,label in self.edge_iterator()]
-        verts = self.vertices()
+        verts = self.vertices(sort=False)
         for edges in itertools.product(*E):
             D = DiGraph(data=[verts, edges],
                         format='vertices_and_edges',
@@ -4009,7 +4009,7 @@ class Graph(GenericGraph):
             R = t.parent()
         M = QuasiSymmetricFunctions(R).M()
         ret = M.zero()
-        V = self.vertices()
+        V = self.vertices(sort=False)
 
         def asc(sigma):
             stat = 0
@@ -6185,7 +6185,7 @@ class Graph(GenericGraph):
                 T.append([x, y, z])
 
         T = TwoGraph(T)
-        T.relabel({i: v for i,v in enumerate(self.vertices())})
+        T.relabel({i: v for i,v in enumerate(self.vertices(sort=False))})
 
         return T
 
@@ -6221,7 +6221,7 @@ class Graph(GenericGraph):
         if filename[-4:] != '.eps':
             filename += '.eps'
         f = open(filename, 'w')
-        f.write( print_graph_eps(self.vertices(), self.edge_iterator(), pos) )
+        f.write( print_graph_eps(self.vertices(sort=False), self.edge_iterator(), pos) )
         f.close()
 
     @doc_index("Algorithmically hard stuff")
@@ -7940,7 +7940,7 @@ class Graph(GenericGraph):
             D = None
         elif self.order() == 1:
             D = create_prime_node()
-            D.children.append(create_normal_node(self.vertices()[0]))
+            D.children.append(create_normal_node(self.vertices(sort=False)[0]))
         else:
             D = habib_maurer_algorithm(self)
 
@@ -9225,7 +9225,7 @@ class Graph(GenericGraph):
         if not n:
             raise ValueError('unable to compute effective resistance for an empty Graph object')
         if vertices is None:
-            vertices = self.vertices()
+            vertices = self.vertices(sort=False)
         self._scream_if_not_simple()
         if not self.is_connected():
             raise ValueError('the Graph is not a connected graph')
@@ -9458,7 +9458,7 @@ class Graph(GenericGraph):
         """
         self._scream_if_not_simple()
         if vertices is None:
-            vertices = self.vertices()
+            vertices = self.vertices(sort=False)
         set_immutable = kwds.pop('immutable', False)
         A = self.adjacency_matrix(vertices=vertices, base_ring=base_ring, immutable=True, **kwds)
         M = A**2
```
and all tests in the graphs directory still passed.



---

archive/issue_comments_333038.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nWe cannot blindly use `.vertices(sort=False)`. It will clearly break badly some methods, for instance methods building adjacency or laplacian matrices, etc.\nWe already pave the way by reducing the number of situations in which we call `.vertices()`, but we still have work to do to reduce the dependency. We did the same for `.edges()`.\n\nThe safe way is to use only `.vertices(sort=True)`, and whenever possible, avoid calls to `.vertices()`. For instance, I see in `generic_graph.py` a call to `self.vertices(sort=False)[0]` while we have `self.order() == 1`. So we can avoid this call.\n\nThen, we can set the default to `None` with a deprecation warning that the default will be changed to `False`.",
    "created_at": "2022-06-29T06:15:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333038",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:57" align="right">Comment 57</div>

We cannot blindly use `.vertices(sort=False)`. It will clearly break badly some methods, for instance methods building adjacency or laplacian matrices, etc.
We already pave the way by reducing the number of situations in which we call `.vertices()`, but we still have work to do to reduce the dependency. We did the same for `.edges()`.

The safe way is to use only `.vertices(sort=True)`, and whenever possible, avoid calls to `.vertices()`. For instance, I see in `generic_graph.py` a call to `self.vertices(sort=False)[0]` while we have `self.order() == 1`. So we can avoid this call.

Then, we can set the default to `None` with a deprecation warning that the default will be changed to `False`.



---

archive/issue_comments_333039.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nReplying to [@dcoudert](#comment%3A57):\n> We cannot blindly use `.vertices(sort=False)`.\n\nThat's not what I suggested. Please reread the first bullet point.",
    "created_at": "2022-06-30T04:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333039",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:58" align="right">Comment 58</div>

Replying to [@dcoudert](#comment%3A57):
> We cannot blindly use `.vertices(sort=False)`.

That's not what I suggested. Please reread the first bullet point.



---

archive/issue_comments_333040.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\nRight, I missed some parts.\nI agree with your proposal, but we need an appropriate deprecation warning to inform users of the change. It's a big change.",
    "created_at": "2022-06-30T09:43:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333040",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:59" align="right">Comment 59</div>

Right, I missed some parts.
I agree with your proposal, but we need an appropriate deprecation warning to inform users of the change. It's a big change.



---

archive/issue_comments_333041.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nThe best I can think of right now is:\n\n- Make the default `sort=None` and raise a deprecation warning if this default gets used, thereby requiring an explicit argument everywhere in the Sage library.\n\n- So use `sort=False` or `sort=True` as appropriate in the library.\n\nThen later we can change the default to `sort=False`.",
    "created_at": "2022-07-15T21:19:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333041",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:60" align="right">Comment 60</div>

The best I can think of right now is:

- Make the default `sort=None` and raise a deprecation warning if this default gets used, thereby requiring an explicit argument everywhere in the Sage library.

- So use `sort=False` or `sort=True` as appropriate in the library.

Then later we can change the default to `sort=False`.



---

archive/issue_comments_333042.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/graph_vertices___should_not_be_sorted](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/graph_vertices___should_not_be_sorted)** to **[u/jhpalmieri/graph_vertices___should_not_be_sorted](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/graph_vertices___should_not_be_sorted)**",
    "created_at": "2022-07-16T01:50:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333042",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/jdemeyer/graph_vertices___should_not_be_sorted](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/graph_vertices___should_not_be_sorted)** to **[u/jhpalmieri/graph_vertices___should_not_be_sorted](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/graph_vertices___should_not_be_sorted)**



---

archive/issue_comments_333043.json:
```json
{
    "body": "Changed commit from **[aa0691f](https://github.com/sagemath/sagetrac-mirror/commit/aa0691f9fa7b03f9130b398923d92de3fb5fcf36)** to **[b6b6c34](https://github.com/sagemath/sagetrac-mirror/commit/b6b6c34d8647620f41b1b392c5755e4bcbfe4779)**",
    "created_at": "2022-07-16T01:51:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333043",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[aa0691f](https://github.com/sagemath/sagetrac-mirror/commit/aa0691f9fa7b03f9130b398923d92de3fb5fcf36)** to **[b6b6c34](https://github.com/sagemath/sagetrac-mirror/commit/b6b6c34d8647620f41b1b392c5755e4bcbfe4779)**



---

archive/issue_comments_333044.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">Comment 62</div>\n\nHere is a start. This does what I proposed in [comment:60](#comment%3A60), and all tests pass. I was not that careful in choosing `sort=True` or `sort=False`, and so I would not surprised if we could use `sort=False` in more places. Feel free to modify the branch.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27a64831bcd969632eca470bdb160e7fa87d335b\">27a6483</a></td><td><code>trac 22349: vertex sorting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6b6c34d8647620f41b1b392c5755e4bcbfe4779\">b6b6c34</a></td><td><code>trac 22349: edge sorting</code></td></tr></table>\n",
    "created_at": "2022-07-16T01:51:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333044",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:62" align="right">Comment 62</div>

Here is a start. This does what I proposed in [comment:60](#comment%3A60), and all tests pass. I was not that careful in choosing `sort=True` or `sort=False`, and so I would not surprised if we could use `sort=False` in more places. Feel free to modify the branch.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27a64831bcd969632eca470bdb160e7fa87d335b">27a6483</a></td><td><code>trac 22349: vertex sorting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6b6c34d8647620f41b1b392c5755e4bcbfe4779">b6b6c34</a></td><td><code>trac 22349: edge sorting</code></td></tr></table>




---

archive/issue_comments_333045.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">Comment 63</div>\n\nThe key changes are in `graphs/generic_graph.py`:\n\n```diff\n@@ -10972,15 +10974,20 @@ class GenericGraph(GenericGraph_pyx):\n         for u in self._backend.iterator_nbrs(vertex):\n             yield u\n \n-    def vertices(self, sort=True, key=None, degree=None, vertex_property=None):\n+    def vertices(self, sort=None, key=None, degree=None, vertex_property=None):\n         r\"\"\"\n         Return a list of the vertices.\n \n         INPUT:\n \n-        - ``sort`` -- boolean (default: ``True``); if ``True``, vertices are\n+        - ``sort`` -- boolean (default: ``None``); if ``True``, vertices are\n           sorted according to the default ordering\n \n+          As of :trac:`22349`, this argument must be explicitly\n+          specified (unless a ``key`` is given); otherwise a warning\n+          is printed and ``sort=True`` is used. The default will\n+          eventually be changed to ``False``.\n+\n         - ``key`` -- a function (default: ``None``); a function that takes a\n           vertex as its one argument and returns a value that can be used for\n           comparisons in the sorting algorithm (we must have ``sort=True``)\n```\nand\n\n```diff\n@@ -11065,9 +11072,23 @@ class GenericGraph(GenericGraph_pyx):\n             Traceback (most recent call last):\n             ...\n             ValueError: sort keyword is False, yet a key function is given\n+\n+        Deprecation warning for ``sort=None`` (:trac:`22349`)::\n+\n+            sage: G = graphs.HouseGraph()\n+            sage: G.vertices()\n+            doctest:...: DeprecationWarning: parameter 'sort' will be set to False by default in the future\n+            See http://trac.sagemath.org/22349 for details.\n+            [0, 1, 2, 3, 4]\n         \"\"\"\n+        if sort is None:\n+            if key is None:\n+                deprecation(22349, \"parameter 'sort' will be set to False by default in the future\")\n+            sort = True\n+\n         if (not sort) and key:\n             raise ValueError('sort keyword is False, yet a key function is given')\n+\n         if sort:\n             return sorted(self.vertex_iterator(degree=degree, vertex_property=vertex_property), key=key)\n         return list(self.vertex_iterator(degree=degree, vertex_property=vertex_property))\n```\nand similar for `edges` (although `edges` already printed a warning if `None` was used, but `None` was not the default, so it had to be called explicitly as `g.edges(sort=None)` to trigger the warning before).",
    "created_at": "2022-07-16T01:56:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333045",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:63" align="right">Comment 63</div>

The key changes are in `graphs/generic_graph.py`:

```diff
@@ -10972,15 +10974,20 @@ class GenericGraph(GenericGraph_pyx):
         for u in self._backend.iterator_nbrs(vertex):
             yield u
 
-    def vertices(self, sort=True, key=None, degree=None, vertex_property=None):
+    def vertices(self, sort=None, key=None, degree=None, vertex_property=None):
         r"""
         Return a list of the vertices.
 
         INPUT:
 
-        - ``sort`` -- boolean (default: ``True``); if ``True``, vertices are
+        - ``sort`` -- boolean (default: ``None``); if ``True``, vertices are
           sorted according to the default ordering
 
+          As of :trac:`22349`, this argument must be explicitly
+          specified (unless a ``key`` is given); otherwise a warning
+          is printed and ``sort=True`` is used. The default will
+          eventually be changed to ``False``.
+
         - ``key`` -- a function (default: ``None``); a function that takes a
           vertex as its one argument and returns a value that can be used for
           comparisons in the sorting algorithm (we must have ``sort=True``)
```
and

```diff
@@ -11065,9 +11072,23 @@ class GenericGraph(GenericGraph_pyx):
             Traceback (most recent call last):
             ...
             ValueError: sort keyword is False, yet a key function is given
+
+        Deprecation warning for ``sort=None`` (:trac:`22349`)::
+
+            sage: G = graphs.HouseGraph()
+            sage: G.vertices()
+            doctest:...: DeprecationWarning: parameter 'sort' will be set to False by default in the future
+            See http://trac.sagemath.org/22349 for details.
+            [0, 1, 2, 3, 4]
         """
+        if sort is None:
+            if key is None:
+                deprecation(22349, "parameter 'sort' will be set to False by default in the future")
+            sort = True
+
         if (not sort) and key:
             raise ValueError('sort keyword is False, yet a key function is given')
+
         if sort:
             return sorted(self.vertex_iterator(degree=degree, vertex_property=vertex_property), key=key)
         return list(self.vertex_iterator(degree=degree, vertex_property=vertex_property))
```
and similar for `edges` (although `edges` already printed a warning if `None` was used, but `None` was not the default, so it had to be called explicitly as `g.edges(sort=None)` to trigger the warning before).



---

archive/issue_comments_333046.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">Comment 64</div>\n\nI'm impressed !\n\nI'm currently doing some tests and will push later some corrections.",
    "created_at": "2022-07-16T18:12:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333046",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:64" align="right">Comment 64</div>

I'm impressed !

I'm currently doing some tests and will push later some corrections.



---

archive/issue_comments_333047.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">Comment 65</div>\n\nI did a few changes in graphs and many tests. I have not detected any problem yet, but others may raise some issues.\n\nThis ticket highlights many places were the usage of graphs must be improved. I did some (minor) corrections in `src/sage/schemes/curves/zariski_vankampen.py` as example, but more can be done in this file.\nTypically, it is better to use `for u in G:` than `for u in G.vertices(sort=False):`. The ordering of the vertices is the same, but we avoid building the list of vertices. Tests like `u in G.vertices(sort=False)` should be replaced by `u in G`. etc.\nIn future tickets, we should address (very bad) code like this in `src/sage/geometry/hyperplane_arrangement/library.py`\n\n```diff\n-        for e in G.edges():\n-            i = G.vertices().index(e[0])\n-            j = G.vertices().index(e[1])\n+        for e in G.edges(sort=True):\n+            i = G.vertices(sort=True).index(e[0])\n+            j = G.vertices(sort=True).index(e[1])\n```\nClearly, we need to define a mapping from vertices to index.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fee74b61393ff08220faccfb5bf29c62a07ecb64\">fee74b6</a></td><td><code>trac #22349: some corrections</code></td></tr></table>\n",
    "created_at": "2022-07-17T09:12:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333047",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:65" align="right">Comment 65</div>

I did a few changes in graphs and many tests. I have not detected any problem yet, but others may raise some issues.

This ticket highlights many places were the usage of graphs must be improved. I did some (minor) corrections in `src/sage/schemes/curves/zariski_vankampen.py` as example, but more can be done in this file.
Typically, it is better to use `for u in G:` than `for u in G.vertices(sort=False):`. The ordering of the vertices is the same, but we avoid building the list of vertices. Tests like `u in G.vertices(sort=False)` should be replaced by `u in G`. etc.
In future tickets, we should address (very bad) code like this in `src/sage/geometry/hyperplane_arrangement/library.py`

```diff
-        for e in G.edges():
-            i = G.vertices().index(e[0])
-            j = G.vertices().index(e[1])
+        for e in G.edges(sort=True):
+            i = G.vertices(sort=True).index(e[0])
+            j = G.vertices(sort=True).index(e[1])
```
Clearly, we need to define a mapping from vertices to index.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fee74b61393ff08220faccfb5bf29c62a07ecb64">fee74b6</a></td><td><code>trac #22349: some corrections</code></td></tr></table>




---

archive/issue_comments_333048.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/graph_vertices___should_not_be_sorted](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/graph_vertices___should_not_be_sorted)** to **[public/graphs/22349_deprecate_sorting_vertices_and_edges](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/22349_deprecate_sorting_vertices_and_edges)**",
    "created_at": "2022-07-17T09:12:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333048",
    "user": "https://github.com/dcoudert"
}
```

Changed branch from **[u/jhpalmieri/graph_vertices___should_not_be_sorted](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/graph_vertices___should_not_be_sorted)** to **[public/graphs/22349_deprecate_sorting_vertices_and_edges](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/22349_deprecate_sorting_vertices_and_edges)**



---

archive/issue_comments_333049.json:
```json
{
    "body": "Changed commit from **[b6b6c34](https://github.com/sagemath/sagetrac-mirror/commit/b6b6c34d8647620f41b1b392c5755e4bcbfe4779)** to **[fee74b6](https://github.com/sagemath/sagetrac-mirror/commit/fee74b61393ff08220faccfb5bf29c62a07ecb64)**",
    "created_at": "2022-07-17T09:12:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333049",
    "user": "https://github.com/dcoudert"
}
```

Changed commit from **[b6b6c34](https://github.com/sagemath/sagetrac-mirror/commit/b6b6c34d8647620f41b1b392c5755e4bcbfe4779)** to **[fee74b6](https://github.com/sagemath/sagetrac-mirror/commit/fee74b61393ff08220faccfb5bf29c62a07ecb64)**



---

archive/issue_events_294676.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2022-07-17T09:19:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294676"
}
```



---

archive/issue_comments_333050.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">Comment 67</div>\n\nGreat! I'm happy with your changes. We can try to get it merged soon, although with this many files affected, there might very well be merge conflicts.",
    "created_at": "2022-07-17T16:19:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333050",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:67" align="right">Comment 67</div>

Great! I'm happy with your changes. We can try to get it merged soon, although with this many files affected, there might very well be merge conflicts.



---

archive/issue_events_294677.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-07-17T16:19:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294677"
}
```



---

archive/issue_events_294678.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-07-17T16:19:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294678"
}
```



---

archive/issue_comments_333051.json:
```json
{
    "body": "Reviewer: **David Coudert, John Palmieri**",
    "created_at": "2022-07-17T16:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333051",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **David Coudert, John Palmieri**



---

archive/issue_comments_333052.json:
```json
{
    "body": "Author: **John Palmieri, David Coudert**",
    "created_at": "2022-07-17T16:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333052",
    "user": "https://github.com/jhpalmieri"
}
```

Author: **John Palmieri, David Coudert**



---

archive/issue_comments_333053.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">Comment 68</div>\n\nPositive review from me for your contributions.",
    "created_at": "2022-07-17T16:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333053",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:68" align="right">Comment 68</div>

Positive review from me for your contributions.



---

archive/issue_comments_333054.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">Comment 69</div>\n\nWe will certainly get merge conflicts (due to the many tickets improving the coding style for instance), but let's try.\n\nPositive review from me too.",
    "created_at": "2022-07-17T16:23:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333054",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:69" align="right">Comment 69</div>

We will certainly get merge conflicts (due to the many tickets improving the coding style for instance), but let's try.

Positive review from me too.



---

archive/issue_events_294679.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2022-07-17T16:23:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294679"
}
```



---

archive/issue_events_294680.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2022-07-17T16:23:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294680"
}
```



---

archive/issue_comments_333055.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">Comment 70</div>\n\nMerge failure on top of:\n\n83a3df1c99 Trac #34131: some doc polishing in symbolic\n\ndee5229b00 Trac #34130: some doc polishing in groups\n\nfd80fa111f Trac #34126: some doc polishing in categories\n\n718d356f1c Trac #34125: some doc polishing in modular\n\n49390d8bcf Trac #34124: some doc polishing in combinat\n\naf94c25b54 Trac #34096: Fix typo: enviroment -> environment\n\nd04c189c8e Trac #34050: add some space around == in paths and rational\n\n1634bb6946 Trac #34047: Typo in _repr_Expression in symbolic/expression.pyx\n\ndc8086fd57 Trac #34154: Fix repeated word typos\n\n17b1c177aa Trac #34148: fix and activate pycodestyle E306\n\n785bdbd0ec Trac #34136: modernize super() in rings (part one)\n\n9882001355 Trac #34129: Dummy packages should write proper log files\n\ndbc6b9e161 Trac #34109: pep8 for sagedoc.py\n\n5e6a3318c8 Trac #34103: randomize infinite recursion\n\n17ba76f00b Trac #34093: Wrong evaluation of elements of CBF[x] on polynomials from other rings\n\n4657052737 Trac #34122: Bug in is_planar() method for directed graphs\n\nc9cfb5395f Trac #34087: inverse reciprocal trig functions not (back)translated to/from Mathematica\n\n1d6d055563 Trac #34076: pycodestyle cleanup in src/sage/graphs/genus.pyx\n\n043d862b5d Trac #34071: pycodestyle cleanup in asteroidal_triples.pyx, chrompoly.pyx, cliquer.pyx, convexity_properties.pyx\n\nb9b25dc735 Trac #34070: pycodestyle cleanup in src/sage/graphs/centrality.pyx\n\n4ef2c6597d Trac #34069: pycodestyle cleanup in src/sage/graphs/comparability.pyx\n\n5b1146766b Trac #34066: Tachyon help message\n\n798adaa5a3 Trac #34065: pycodestyle cleanup in src/sage/graphs/bliss.pyx\n\nce62be23a2 Trac #34063: pycodestyle cleanup in src/sage/graphs/base/\n\na0eadb3e40 Trac #34059: Fix trivial case in conversion of list to number field element\n\nfea0ac50a6 Trac #34057: changes about avoiding double dieses\n\n9eefd5c27e Trac #34145: modernize super in geometry/\n\n01e117dfd8 Trac #34137: modernize super in categories/\n\n6c79334402 Trac #33819: build.yml: In workflow_dispatch, make container and base tag selectable; add doc\n\n6a64ab8d00 Trac #33760: do not update _pos, _pos3d, _embedding on vertex/edge deletions\n\ndbf091dbbb Trac #34139: fix the linter\n\n625ac58151 Updated [SageMath](../wiki/SageMath) version to 9.7.beta5\n\n\n\nmerge was not clean: conflicts in src/sage/groups/perm_gps/partn_ref/refinement_graphs.pyx",
    "created_at": "2022-07-18T19:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333055",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:70" align="right">Comment 70</div>

Merge failure on top of:

83a3df1c99 Trac #34131: some doc polishing in symbolic

dee5229b00 Trac #34130: some doc polishing in groups

fd80fa111f Trac #34126: some doc polishing in categories

718d356f1c Trac #34125: some doc polishing in modular

49390d8bcf Trac #34124: some doc polishing in combinat

af94c25b54 Trac #34096: Fix typo: enviroment -> environment

d04c189c8e Trac #34050: add some space around == in paths and rational

1634bb6946 Trac #34047: Typo in _repr_Expression in symbolic/expression.pyx

dc8086fd57 Trac #34154: Fix repeated word typos

17b1c177aa Trac #34148: fix and activate pycodestyle E306

785bdbd0ec Trac #34136: modernize super() in rings (part one)

9882001355 Trac #34129: Dummy packages should write proper log files

dbc6b9e161 Trac #34109: pep8 for sagedoc.py

5e6a3318c8 Trac #34103: randomize infinite recursion

17ba76f00b Trac #34093: Wrong evaluation of elements of CBF[x] on polynomials from other rings

4657052737 Trac #34122: Bug in is_planar() method for directed graphs

c9cfb5395f Trac #34087: inverse reciprocal trig functions not (back)translated to/from Mathematica

1d6d055563 Trac #34076: pycodestyle cleanup in src/sage/graphs/genus.pyx

043d862b5d Trac #34071: pycodestyle cleanup in asteroidal_triples.pyx, chrompoly.pyx, cliquer.pyx, convexity_properties.pyx

b9b25dc735 Trac #34070: pycodestyle cleanup in src/sage/graphs/centrality.pyx

4ef2c6597d Trac #34069: pycodestyle cleanup in src/sage/graphs/comparability.pyx

5b1146766b Trac #34066: Tachyon help message

798adaa5a3 Trac #34065: pycodestyle cleanup in src/sage/graphs/bliss.pyx

ce62be23a2 Trac #34063: pycodestyle cleanup in src/sage/graphs/base/

a0eadb3e40 Trac #34059: Fix trivial case in conversion of list to number field element

fea0ac50a6 Trac #34057: changes about avoiding double dieses

9eefd5c27e Trac #34145: modernize super in geometry/

01e117dfd8 Trac #34137: modernize super in categories/

6c79334402 Trac #33819: build.yml: In workflow_dispatch, make container and base tag selectable; add doc

6a64ab8d00 Trac #33760: do not update _pos, _pos3d, _embedding on vertex/edge deletions

dbf091dbbb Trac #34139: fix the linter

625ac58151 Updated [SageMath](../wiki/SageMath) version to 9.7.beta5



merge was not clean: conflicts in src/sage/groups/perm_gps/partn_ref/refinement_graphs.pyx



---

archive/issue_events_294681.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-18T19:48:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294681"
}
```



---

archive/issue_events_294682.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-18T19:48:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294682"
}
```



---

archive/issue_comments_333056.json:
```json
{
    "body": "Changed commit from **[fee74b6](https://github.com/sagemath/sagetrac-mirror/commit/fee74b61393ff08220faccfb5bf29c62a07ecb64)** to **[1e1ea24](https://github.com/sagemath/sagetrac-mirror/commit/1e1ea2425398d1481f8fb4954600e934f92daa0c)**",
    "created_at": "2022-07-18T20:19:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333056",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fee74b6](https://github.com/sagemath/sagetrac-mirror/commit/fee74b61393ff08220faccfb5bf29c62a07ecb64)** to **[1e1ea24](https://github.com/sagemath/sagetrac-mirror/commit/1e1ea2425398d1481f8fb4954600e934f92daa0c)**



---

archive/issue_comments_333057.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">Comment 71</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39d156b01f1a2eb376f8c94f6233e468553494f8\">39d156b</a></td><td><code>some doc polishing in groups</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40b5e2a6d862fa3ebe05771256e993244d5a631d\">40b5e2a</a></td><td><code>more fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68ea9dc14927384a3875bcce82ab8e74f89b20ed\">68ea9dc</a></td><td><code>Merge branch 'u/chapoton/34130' in 9.7.b5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ec4bdffadc846bdb01bd80734c704c1c81e7827\">1ec4bdf</a></td><td><code>trac 22349: vertex sorting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9ecbc5f85fad2c7e459a7631a4944d7c2d2ce07\">a9ecbc5</a></td><td><code>trac 22349: edge sorting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e1ea2425398d1481f8fb4954600e934f92daa0c\">1e1ea24</a></td><td><code>trac #22349: some corrections</code></td></tr></table>\n",
    "created_at": "2022-07-18T20:19:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333057",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:71" align="right">Comment 71</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39d156b01f1a2eb376f8c94f6233e468553494f8">39d156b</a></td><td><code>some doc polishing in groups</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40b5e2a6d862fa3ebe05771256e993244d5a631d">40b5e2a</a></td><td><code>more fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68ea9dc14927384a3875bcce82ab8e74f89b20ed">68ea9dc</a></td><td><code>Merge branch 'u/chapoton/34130' in 9.7.b5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ec4bdffadc846bdb01bd80734c704c1c81e7827">1ec4bdf</a></td><td><code>trac 22349: vertex sorting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9ecbc5f85fad2c7e459a7631a4944d7c2d2ce07">a9ecbc5</a></td><td><code>trac 22349: edge sorting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e1ea2425398d1481f8fb4954600e934f92daa0c">1e1ea24</a></td><td><code>trac #22349: some corrections</code></td></tr></table>




---

archive/issue_events_294683.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-07-18T20:19:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294683"
}
```



---

archive/issue_events_294684.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-07-18T20:19:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294684"
}
```



---

archive/issue_comments_333058.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">Comment 72</div>\n\nRebased over #34130.",
    "created_at": "2022-07-18T20:19:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333058",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:72" align="right">Comment 72</div>

Rebased over #34130.



---

archive/issue_comments_333059.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">Comment 73</div>\n\nMerge failure on top of:\n\n7f7149489c Updated [SageMath](../wiki/SageMath) version to 9.7.beta6\n\n\n\nmerge was not clean: conflicts in src/sage/combinat/yang_baxter_graph.py",
    "created_at": "2022-07-24T22:25:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333059",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:73" align="right">Comment 73</div>

Merge failure on top of:

7f7149489c Updated [SageMath](../wiki/SageMath) version to 9.7.beta6



merge was not clean: conflicts in src/sage/combinat/yang_baxter_graph.py



---

archive/issue_events_294685.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-24T22:25:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294685"
}
```



---

archive/issue_events_294686.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-24T22:25:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294686"
}
```



---

archive/issue_comments_333060.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">Comment 74</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4362cae77922139d9f1a7c97b7ae32469f60cedd\">4362cae</a></td><td><code>Merge branch 'develop' into t/22349/public/graphs/22349_deprecate_sorting_vertices_and_edges</code></td></tr></table>\n",
    "created_at": "2022-07-25T02:45:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333060",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:74" align="right">Comment 74</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4362cae77922139d9f1a7c97b7ae32469f60cedd">4362cae</a></td><td><code>Merge branch 'develop' into t/22349/public/graphs/22349_deprecate_sorting_vertices_and_edges</code></td></tr></table>




---

archive/issue_comments_333061.json:
```json
{
    "body": "Changed commit from **[1e1ea24](https://github.com/sagemath/sagetrac-mirror/commit/1e1ea2425398d1481f8fb4954600e934f92daa0c)** to **[4362cae](https://github.com/sagemath/sagetrac-mirror/commit/4362cae77922139d9f1a7c97b7ae32469f60cedd)**",
    "created_at": "2022-07-25T02:45:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333061",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1e1ea24](https://github.com/sagemath/sagetrac-mirror/commit/1e1ea2425398d1481f8fb4954600e934f92daa0c)** to **[4362cae](https://github.com/sagemath/sagetrac-mirror/commit/4362cae77922139d9f1a7c97b7ae32469f60cedd)**



---

archive/issue_events_294687.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-07-25T02:46:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294687"
}
```



---

archive/issue_events_294688.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-07-25T02:46:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294688"
}
```



---

archive/issue_comments_333062.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">Comment 75</div>\n\nMerged 9.7.beta6.",
    "created_at": "2022-07-25T02:46:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333062",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:75" align="right">Comment 75</div>

Merged 9.7.beta6.



---

archive/issue_comments_333063.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">Comment 76</div>\n\nLet's hope this one can be merged soon to avoid new conflicts.",
    "created_at": "2022-07-25T08:47:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333063",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:76" align="right">Comment 76</div>

Let's hope this one can be merged soon to avoid new conflicts.



---

archive/issue_events_294689.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-28T21:21:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294689"
}
```



---

archive/issue_events_294690.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-07-28T21:21:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294690"
}
```



---

archive/issue_comments_333064.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">Comment 77</div>\n\nsee patchbot",
    "created_at": "2022-07-28T21:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333064",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:77" align="right">Comment 77</div>

see patchbot



---

archive/issue_comments_333065.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">Comment 78</div>\n\nReplying to [@vbraun](#comment%3A77):\n> see patchbot\n\nWhich part? I believe the \"deprecation number\" warning is from this change:\n\n```diff\n@@ -12229,7 +12255,8 @@ class GenericGraph(GenericGraph_pyx):\n             [(0, 1, None), (0, 2, None), (1, 3, None), (2, 3, None), (2, 4, None), (3, 4, None)]\n         \"\"\"\n         if sort is None:\n-            deprecation(27408, \"parameter 'sort' will be set to False by default in the future\")\n+            if key is None:\n+                deprecation(27408, \"parameter 'sort' will be set to False by default in the future\")\n             sort = True\n \n         if vertices is not None and vertices in self:\n```\nand that seems appropriate: no reason to change the ticket number. (That's the only match for \"27408\" in the changes for this ticket.)\n\nThe `pyflakes` warnings are not related to this ticket: they are in files touched by this ticket but not where we've modified them. (In addition, I don't understand the warning about `simplicial_complex.py`)",
    "created_at": "2022-07-28T22:20:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333065",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:78" align="right">Comment 78</div>

Replying to [@vbraun](#comment%3A77):
> see patchbot

Which part? I believe the "deprecation number" warning is from this change:

```diff
@@ -12229,7 +12255,8 @@ class GenericGraph(GenericGraph_pyx):
             [(0, 1, None), (0, 2, None), (1, 3, None), (2, 3, None), (2, 4, None), (3, 4, None)]
         """
         if sort is None:
-            deprecation(27408, "parameter 'sort' will be set to False by default in the future")
+            if key is None:
+                deprecation(27408, "parameter 'sort' will be set to False by default in the future")
             sort = True
 
         if vertices is not None and vertices in self:
```
and that seems appropriate: no reason to change the ticket number. (That's the only match for "27408" in the changes for this ticket.)

The `pyflakes` warnings are not related to this ticket: they are in files touched by this ticket but not where we've modified them. (In addition, I don't understand the warning about `simplicial_complex.py`)



---

archive/issue_events_294691.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-07-28T22:20:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294691"
}
```



---

archive/issue_events_294692.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-07-28T22:20:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294692"
}
```



---

archive/issue_comments_333066.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">Comment 79</div>\n\nIt is more fundamental: there is a test failing for `src/sage/graphs/edge_connectivity.pyx`.",
    "created_at": "2022-07-29T02:16:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333066",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:79" align="right">Comment 79</div>

It is more fundamental: there is a test failing for `src/sage/graphs/edge_connectivity.pyx`.



---

archive/issue_events_294693.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-07-29T02:16:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294693"
}
```



---

archive/issue_events_294694.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-07-29T02:16:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294694"
}
```



---

archive/issue_comments_333067.json:
```json
{
    "body": "Changed commit from **[4362cae](https://github.com/sagemath/sagetrac-mirror/commit/4362cae77922139d9f1a7c97b7ae32469f60cedd)** to **[fe93716](https://github.com/sagemath/sagetrac-mirror/commit/fe93716223af144c0c07fad94eea920e10f139bb)**",
    "created_at": "2022-07-29T05:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333067",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4362cae](https://github.com/sagemath/sagetrac-mirror/commit/4362cae77922139d9f1a7c97b7ae32469f60cedd)** to **[fe93716](https://github.com/sagemath/sagetrac-mirror/commit/fe93716223af144c0c07fad94eea920e10f139bb)**



---

archive/issue_comments_333068.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">Comment 81</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe93716223af144c0c07fad94eea920e10f139bb\">fe93716</a></td><td><code>trac 22349: fix one more doctest</code></td></tr></table>\n",
    "created_at": "2022-07-29T05:37:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333068",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:81" align="right">Comment 81</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe93716223af144c0c07fad94eea920e10f139bb">fe93716</a></td><td><code>trac 22349: fix one more doctest</code></td></tr></table>




---

archive/issue_comments_333069.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">Comment 82</div>\n\nDoctest fixed.",
    "created_at": "2022-07-29T05:38:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333069",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:82" align="right">Comment 82</div>

Doctest fixed.



---

archive/issue_events_294695.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-07-29T05:38:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294695"
}
```



---

archive/issue_events_294696.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-07-29T05:38:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294696"
}
```



---

archive/issue_events_294697.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-08-04T22:47:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294697"
}
```



---

archive/issue_events_294698.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "2880f9c45e3cec4213f168ebf66f73b722b520d2",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-08-04T22:47:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22349#event-294698"
}
```



---

archive/issue_comments_333070.json:
```json
{
    "body": "Changed branch from **[public/graphs/22349_deprecate_sorting_vertices_and_edges](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/22349_deprecate_sorting_vertices_and_edges)** to **[fe93716](https://github.com/sagemath/sagetrac-mirror/commit/fe93716223af144c0c07fad94eea920e10f139bb)**",
    "created_at": "2022-08-04T22:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22349#issuecomment-333070",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/graphs/22349_deprecate_sorting_vertices_and_edges](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/22349_deprecate_sorting_vertices_and_edges)** to **[fe93716](https://github.com/sagemath/sagetrac-mirror/commit/fe93716223af144c0c07fad94eea920e10f139bb)**
