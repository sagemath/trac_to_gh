# Issue 22501: Make it easier to customize pexpect interfaces

archive/issues_022264.json:
```json
{
    "assignees": [],
    "body": "While working on #22452, I found a couple of issues that might be dealt with in a separate ticket.\n\n- The pexpect interfaces and the interface elements inherit from `Parent` resp. from `Element`. But they override `__repr__`, which is bad. So, I change `__repr__` into single underscore methods in all interfaces.\n\n- The default implementation of `_true_symbol` and some others rely on the assumption the `self.eval(...)` returns a string representation when applied to an integer or bool. But this assumption is violated for Polymake. However, `self.get(...)` *is* supposed to return a string representation for everything. I am stating these specifications in the doc and replace `eval` with `get` where needed.\n\n- For interface elements, I replace `self.parent()` by `self._check_valid()` in a couple of places, since that returns the parent after testing that it is still valid.\n\n- In the string representation of an interface element of a crashed interface, I show the crash message, so that it becomes a bit clearer what has happened.\n\nKeywords: **pexpect, days84**\n\nBranch/Commit: **[52226e2](https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5)**\n\nReviewer: **Jeroen Demeyer, Vincent Delecroix**\n\nAuthor: **Simon King**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22501_\n\n",
    "closed_at": "2017-03-27T20:42:09Z",
    "created_at": "2017-03-02T18:47:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make it easier to customize pexpect interfaces",
    "type": "issue",
    "updated_at": "2017-03-27T20:42:09Z",
    "url": "https://github.com/sagemath/sage/issues/22501",
    "user": "https://github.com/simon-king-jena"
}
```
While working on #22452, I found a couple of issues that might be dealt with in a separate ticket.

- The pexpect interfaces and the interface elements inherit from `Parent` resp. from `Element`. But they override `__repr__`, which is bad. So, I change `__repr__` into single underscore methods in all interfaces.

- The default implementation of `_true_symbol` and some others rely on the assumption the `self.eval(...)` returns a string representation when applied to an integer or bool. But this assumption is violated for Polymake. However, `self.get(...)` *is* supposed to return a string representation for everything. I am stating these specifications in the doc and replace `eval` with `get` where needed.

- For interface elements, I replace `self.parent()` by `self._check_valid()` in a couple of places, since that returns the parent after testing that it is still valid.

- In the string representation of an interface element of a crashed interface, I show the crash message, so that it becomes a bit clearer what has happened.

Keywords: **pexpect, days84**

Branch/Commit: **[52226e2](https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5)**

Reviewer: **Jeroen Demeyer, Vincent Delecroix**

Author: **Simon King**

_Issue created by migration from https://trac.sagemath.org/ticket/22501_





---

archive/issue_events_296516.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-02T18:47:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296516"
}
```



---

archive/issue_events_296517.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-02T18:47:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "component: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296517"
}
```



---

archive/issue_events_296518.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-02T18:47:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296518"
}
```



---

archive/issue_events_296519.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-02T18:47:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296519"
}
```



---

archive/issue_comments_335851.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nThere is one more thing. The methods `_left_list_delim`, `_right_func_delim` and similar are currently only used to make the string representation of an interface element a bit more similar to Python. However, it is conceivable that they could be used in a nice default implementation of `__getitem__` - but I am not sure if such a default implementation would really be of wide use.",
    "created_at": "2017-03-02T18:48:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335851",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:1" align="right">Comment 1</div>

There is one more thing. The methods `_left_list_delim`, `_right_func_delim` and similar are currently only used to make the string representation of an interface element a bit more similar to Python. However, it is conceivable that they could be used in a nice default implementation of `__getitem__` - but I am not sure if such a default implementation would really be of wide use.



---

archive/issue_comments_335852.json:
```json
{
    "body": "Changed keywords from **pexpect** to **pexpect, days84**",
    "created_at": "2017-03-02T18:50:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335852",
    "user": "https://github.com/simon-king-jena"
}
```

Changed keywords from **pexpect** to **pexpect, days84**



---

archive/issue_comments_335853.json:
```json
{
    "body": "Branch: **[u/SimonKing/make_it_easier_to_customize_pexpect_interfaces](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/make_it_easier_to_customize_pexpect_interfaces)**",
    "created_at": "2017-03-02T19:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335853",
    "user": "https://github.com/simon-king-jena"
}
```

Branch: **[u/SimonKing/make_it_easier_to_customize_pexpect_interfaces](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/make_it_easier_to_customize_pexpect_interfaces)**



---

archive/issue_comments_335854.json:
```json
{
    "body": "Commit: **[6580782](https://github.com/sagemath/sagetrac-mirror/commit/6580782c527c589bb1c37bc1102d18146a6d380e)**",
    "created_at": "2017-03-02T19:04:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335854",
    "user": "https://github.com/simon-king-jena"
}
```

Commit: **[6580782](https://github.com/sagemath/sagetrac-mirror/commit/6580782c527c589bb1c37bc1102d18146a6d380e)**



---

archive/issue_comments_335855.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nThe first commit implements and uses `_get_primitive`. Next, I'll add tests.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6580782c527c589bb1c37bc1102d18146a6d380e\">6580782</a></td><td><code>Add ._get_primitive to pexpect interfaces</code></td></tr></table>\n",
    "created_at": "2017-03-02T19:04:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335855",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">Comment 4</div>

The first commit implements and uses `_get_primitive`. Next, I'll add tests.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6580782c527c589bb1c37bc1102d18146a6d380e">6580782</a></td><td><code>Add ._get_primitive to pexpect interfaces</code></td></tr></table>




---

archive/issue_comments_335856.json:
```json
{
    "body": "Changed commit from **[6580782](https://github.com/sagemath/sagetrac-mirror/commit/6580782c527c589bb1c37bc1102d18146a6d380e)** to **[33b53f3](https://github.com/sagemath/sagetrac-mirror/commit/33b53f3e5314c37f5e4ce511dd8aac0c66c78116)**",
    "created_at": "2017-03-02T19:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335856",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6580782](https://github.com/sagemath/sagetrac-mirror/commit/6580782c527c589bb1c37bc1102d18146a6d380e)** to **[33b53f3](https://github.com/sagemath/sagetrac-mirror/commit/33b53f3e5314c37f5e4ce511dd8aac0c66c78116)**



---

archive/issue_comments_335857.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33b53f3e5314c37f5e4ce511dd8aac0c66c78116\">33b53f3</a></td><td><code>Add documentation to _get_primitive</code></td></tr></table>\n",
    "created_at": "2017-03-02T19:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335857",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33b53f3e5314c37f5e4ce511dd8aac0c66c78116">33b53f3</a></td><td><code>Add documentation to _get_primitive</code></td></tr></table>




---

archive/issue_comments_335858.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d78b239eb5244f9180e150aff84d254e85d6626c\">d78b239</a></td><td><code>'Implement string representation by single underscore methods': Apply this mantra to interfaces</code></td></tr></table>\n",
    "created_at": "2017-03-03T00:07:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335858",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6" align="right">Comment 6</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d78b239eb5244f9180e150aff84d254e85d6626c">d78b239</a></td><td><code>'Implement string representation by single underscore methods': Apply this mantra to interfaces</code></td></tr></table>




---

archive/issue_comments_335859.json:
```json
{
    "body": "Changed commit from **[33b53f3](https://github.com/sagemath/sagetrac-mirror/commit/33b53f3e5314c37f5e4ce511dd8aac0c66c78116)** to **[d78b239](https://github.com/sagemath/sagetrac-mirror/commit/d78b239eb5244f9180e150aff84d254e85d6626c)**",
    "created_at": "2017-03-03T00:07:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335859",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[33b53f3](https://github.com/sagemath/sagetrac-mirror/commit/33b53f3e5314c37f5e4ce511dd8aac0c66c78116)** to **[d78b239](https://github.com/sagemath/sagetrac-mirror/commit/d78b239eb5244f9180e150aff84d254e85d6626c)**



---

archive/issue_comments_335860.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI have now also sanitised string representation of pexpect elements. \"Sanitise\" means: There is a default `__repr__` method that is not supposed to be overridden, and if anything needs to be overridden then it is the single underscore `_repr_`. The change mainly consisted how invalid objects are printed.\n\nSince I am not particularly eager to remove the superfluous functions mentioned in the ticket description, I'll let this be \"needs review\" --- now I have the prerequisites for #22452.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d78b239eb5244f9180e150aff84d254e85d6626c\">d78b239</a></td><td><code>'Implement string representation by single underscore methods': Apply this mantra to interfaces</code></td></tr></table>\n",
    "created_at": "2017-03-03T00:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335860",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:7" align="right">Comment 7</div>

I have now also sanitised string representation of pexpect elements. "Sanitise" means: There is a default `__repr__` method that is not supposed to be overridden, and if anything needs to be overridden then it is the single underscore `_repr_`. The change mainly consisted how invalid objects are printed.

Since I am not particularly eager to remove the superfluous functions mentioned in the ticket description, I'll let this be "needs review" --- now I have the prerequisites for #22452.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d78b239eb5244f9180e150aff84d254e85d6626c">d78b239</a></td><td><code>'Implement string representation by single underscore methods': Apply this mantra to interfaces</code></td></tr></table>




---

archive/issue_events_296520.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-03T00:13:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296520"
}
```



---

archive/issue_events_296521.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-03T09:07:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296521"
}
```



---

archive/issue_events_296522.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-03T09:07:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296522"
}
```



---

archive/issue_comments_335861.json:
```json
{
    "body": "Author: **Simon King**",
    "created_at": "2017-03-03T09:07:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335861",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Simon King**



---

archive/issue_comments_335862.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nI don't think that you should remove doctests.\n\nIf you remove a method which is no longer needed, then move the doctests somewhere else (say, at the top of the module if you don't see a better place) instead of removing them.",
    "created_at": "2017-03-03T09:07:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335862",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">Comment 9</div>

I don't think that you should remove doctests.

If you remove a method which is no longer needed, then move the doctests somewhere else (say, at the top of the module if you don't see a better place) instead of removing them.



---

archive/issue_comments_335863.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nHere\n\n```\n        except ValueError:\n            return '(invalid {} object -- defined in terms of closed session)'.format(self.parent())\n```\nyou should use the exception message instead of hardcoding `\"defined in terms of closed session\"`. Maybe there are other reasons why a `ValueError` can be raised. And it might also make sense to replace `except ValueError` by `except Exception`.",
    "created_at": "2017-03-03T09:08:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335863",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">Comment 10</div>

Here

```
        except ValueError:
            return '(invalid {} object -- defined in terms of closed session)'.format(self.parent())
```
you should use the exception message instead of hardcoding `"defined in terms of closed session"`. Maybe there are other reasons why a `ValueError` can be raised. And it might also make sense to replace `except ValueError` by `except Exception`.



---

archive/issue_comments_335864.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nReplying to [@jdemeyer](#comment%3A9):\n> I don't think that you should remove doctests.\n> \n> If you remove a method which is no longer needed, then move the doctests somewhere else (say, at the top of the module if you don't see a better place) instead of removing them.\n\nOK, good point. Actually my plan was to do exactly as you said, but I simply forgot it.",
    "created_at": "2017-03-03T09:09:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335864",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:11" align="right">Comment 11</div>

Replying to [@jdemeyer](#comment%3A9):
> I don't think that you should remove doctests.
> 
> If you remove a method which is no longer needed, then move the doctests somewhere else (say, at the top of the module if you don't see a better place) instead of removing them.

OK, good point. Actually my plan was to do exactly as you said, but I simply forgot it.



---

archive/issue_comments_335865.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nConcerning `invalid None object`: in case that `parent` is `None`, could you use the `type` instead? Just because `None` is not a very interesting value.",
    "created_at": "2017-03-03T09:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335865",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">Comment 12</div>

Concerning `invalid None object`: in case that `parent` is `None`, could you use the `type` instead? Just because `None` is not a very interesting value.



---

archive/issue_comments_335866.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@jdemeyer](#comment%3A10):\n> Here\n> \n> ```\n>         except ValueError:\n>             return '(invalid {} object -- defined in terms of closed session)'.format(self.parent())\n> ```\n> you should use the exception message instead of hardcoding `\"defined in terms of closed session\"`. Maybe there are other reasons why a `ValueError` can be raised.\n\nNo. Here is the code of `_check_valid()`:\n\n```\n    def _check_valid(self):\n        \"\"\"\n        Check that this object is valid, i.e., the session in which this\n        object is defined is still running. This is relevant for\n        interpreters that can't be interrupted via ctrl-C, hence get\n        restarted.\n        \"\"\"\n        try:\n            P = self.parent()\n            if P is None:\n                raise ValueError(\"The %s session in which this object was defined is no longer running.\"%P.name())\n        except AttributeError:\n            raise ValueError(\"The session in which this object was defined is no longer running.\")\n        return P\n```\nSo, catching the ValueError is exactly the same as saying \"the session is no longer running or some noob overrode `Element.parent` by something that raises a ValueError and thus the whole interface is broken anyway.",
    "created_at": "2017-03-03T09:12:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335866",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@jdemeyer](#comment%3A10):
> Here
> 
> ```
>         except ValueError:
>             return '(invalid {} object -- defined in terms of closed session)'.format(self.parent())
> ```
> you should use the exception message instead of hardcoding `"defined in terms of closed session"`. Maybe there are other reasons why a `ValueError` can be raised.

No. Here is the code of `_check_valid()`:

```
    def _check_valid(self):
        """
        Check that this object is valid, i.e., the session in which this
        object is defined is still running. This is relevant for
        interpreters that can't be interrupted via ctrl-C, hence get
        restarted.
        """
        try:
            P = self.parent()
            if P is None:
                raise ValueError("The %s session in which this object was defined is no longer running."%P.name())
        except AttributeError:
            raise ValueError("The session in which this object was defined is no longer running.")
        return P
```
So, catching the ValueError is exactly the same as saying "the session is no longer running or some noob overrode `Element.parent` by something that raises a ValueError and thus the whole interface is broken anyway.



---

archive/issue_comments_335867.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nSince this whole ticket is about *generalizing* why would you assume that ` _check_valid` will never be generalized?",
    "created_at": "2017-03-03T09:14:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335867",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">Comment 14</div>

Since this whole ticket is about *generalizing* why would you assume that ` _check_valid` will never be generalized?



---

archive/issue_comments_335868.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a0bcca9b4ecd6d4f9d2f010c3a3f939200b9711\">9a0bcca</a></td><td><code>Change string representation of invalid interface elements whose parent is None</code></td></tr></table>\n",
    "created_at": "2017-03-03T09:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335868",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15" align="right">Comment 15</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a0bcca9b4ecd6d4f9d2f010c3a3f939200b9711">9a0bcca</a></td><td><code>Change string representation of invalid interface elements whose parent is None</code></td></tr></table>




---

archive/issue_comments_335869.json:
```json
{
    "body": "Changed commit from **[d78b239](https://github.com/sagemath/sagetrac-mirror/commit/d78b239eb5244f9180e150aff84d254e85d6626c)** to **[9a0bcca](https://github.com/sagemath/sagetrac-mirror/commit/9a0bcca9b4ecd6d4f9d2f010c3a3f939200b9711)**",
    "created_at": "2017-03-03T09:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335869",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d78b239](https://github.com/sagemath/sagetrac-mirror/commit/d78b239eb5244f9180e150aff84d254e85d6626c)** to **[9a0bcca](https://github.com/sagemath/sagetrac-mirror/commit/9a0bcca9b4ecd6d4f9d2f010c3a3f939200b9711)**



---

archive/issue_comments_335870.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nI don't like silly accessor methods like `_get_custom_name` (but that's just a personal opinion). What's wrong with the more explicit\n\n```\ngetattr(foo, \"__custom_name\", None)\n```\ninstead of\n\n```\nfoo._get_custom_name()\n```\n\nHowever, if you really insist on using `_get_custom_name`, you should at least allow for it to be overridden and it should be used everywhere to access `__custom_name`.",
    "created_at": "2017-03-03T09:19:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335870",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">Comment 16</div>

I don't like silly accessor methods like `_get_custom_name` (but that's just a personal opinion). What's wrong with the more explicit

```
getattr(foo, "__custom_name", None)
```
instead of

```
foo._get_custom_name()
```

However, if you really insist on using `_get_custom_name`, you should at least allow for it to be overridden and it should be used everywhere to access `__custom_name`.



---

archive/issue_comments_335871.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nI'm not convinced for the need of the method `_get_primitive()`. Why cannot you just override `eval()` to do the right thing instead of inventing an additional layer of indirection?",
    "created_at": "2017-03-03T09:27:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335871",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">Comment 17</div>

I'm not convinced for the need of the method `_get_primitive()`. Why cannot you just override `eval()` to do the right thing instead of inventing an additional layer of indirection?



---

archive/issue_comments_335872.json:
```json
{
    "body": "Changed commit from **[9a0bcca](https://github.com/sagemath/sagetrac-mirror/commit/9a0bcca9b4ecd6d4f9d2f010c3a3f939200b9711)** to **[6910107](https://github.com/sagemath/sagetrac-mirror/commit/6910107bb1020b3d9f0080683d19dbaed697f0de)**",
    "created_at": "2017-03-03T09:27:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335872",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9a0bcca](https://github.com/sagemath/sagetrac-mirror/commit/9a0bcca9b4ecd6d4f9d2f010c3a3f939200b9711)** to **[6910107](https://github.com/sagemath/sagetrac-mirror/commit/6910107bb1020b3d9f0080683d19dbaed697f0de)**



---

archive/issue_comments_335873.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6910107bb1020b3d9f0080683d19dbaed697f0de\">6910107</a></td><td><code>Keep the tests that have been removed in the previous commits</code></td></tr></table>\n",
    "created_at": "2017-03-03T09:27:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335873",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6910107bb1020b3d9f0080683d19dbaed697f0de">6910107</a></td><td><code>Keep the tests that have been removed in the previous commits</code></td></tr></table>




---

archive/issue_comments_335874.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@jdemeyer](#comment%3A14):\n> Since this whole ticket is about *generalizing* why would you assume that ` _check_valid` will never be generalized?\n\nIf the semantics of `_check_valid` changes then of course the person who changes it has to deal with the consequences.",
    "created_at": "2017-03-03T09:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335874",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@jdemeyer](#comment%3A14):
> Since this whole ticket is about *generalizing* why would you assume that ` _check_valid` will never be generalized?

If the semantics of `_check_valid` changes then of course the person who changes it has to deal with the consequences.



---

archive/issue_comments_335875.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@simon-king-jena](#comment%3A19):\n> If the semantics of `_check_valid` changes then of course the person who changes it has to deal with the consequences.\n\nOr you just make a minor change to the code here such that there won't be any bad consequences.",
    "created_at": "2017-03-03T09:32:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335875",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@simon-king-jena](#comment%3A19):
> If the semantics of `_check_valid` changes then of course the person who changes it has to deal with the consequences.

Or you just make a minor change to the code here such that there won't be any bad consequences.



---

archive/issue_comments_335876.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nReplying to [@jdemeyer](#comment%3A16):\n> I don't like silly accessor methods like `_get_custom_name` (but that's just a personal opinion). What's wrong with the more explicit\n> \n> ```\n> getattr(foo, \"__custom_name\", None)\n> ```\n> instead of\n> \n> ```\n> foo._get_custom_name()\n> ```\n\nName mangling. It simply didn't work (and was the reason why I added that method). One could of course change `__custom_name` into a less private attribute. But if we keep it private then there should be an accessor method.",
    "created_at": "2017-03-03T09:32:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335876",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:21" align="right">Comment 21</div>

Replying to [@jdemeyer](#comment%3A16):
> I don't like silly accessor methods like `_get_custom_name` (but that's just a personal opinion). What's wrong with the more explicit
> 
> ```
> getattr(foo, "__custom_name", None)
> ```
> instead of
> 
> ```
> foo._get_custom_name()
> ```

Name mangling. It simply didn't work (and was the reason why I added that method). One could of course change `__custom_name` into a less private attribute. But if we keep it private then there should be an accessor method.



---

archive/issue_comments_335877.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@jdemeyer](#comment%3A20):\n> Replying to [@simon-king-jena](#comment%3A19):\n> > If the semantics of `_check_valid` changes then of course the person who changes it has to deal with the consequences.\n\n> \n> Or you just make a minor change to the code here such that there won't be any bad consequences.\n\nI wish SageMath had followed that idea in the past. Otherwise my group cohomology package wouldn't have been broken so often...",
    "created_at": "2017-03-03T09:34:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335877",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@jdemeyer](#comment%3A20):
> Replying to [@simon-king-jena](#comment%3A19):
> > If the semantics of `_check_valid` changes then of course the person who changes it has to deal with the consequences.

> 
> Or you just make a minor change to the code here such that there won't be any bad consequences.

I wish SageMath had followed that idea in the past. Otherwise my group cohomology package wouldn't have been broken so often...



---

archive/issue_comments_335878.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nReplying to [@simon-king-jena](#comment%3A21):\n> Name mangling.\n\nThat prevents `foo.__custom_name` but `getattr(foo, \"__custom_name\")` should still work.",
    "created_at": "2017-03-03T09:35:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335878",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">Comment 23</div>

Replying to [@simon-king-jena](#comment%3A21):
> Name mangling.

That prevents `foo.__custom_name` but `getattr(foo, "__custom_name")` should still work.



---

archive/issue_comments_335879.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReplying to [@jdemeyer](#comment%3A17):\n> I'm not convinced for the need of the method `_get_primitive()`. Why cannot you just override `eval()` to do the right thing instead of inventing an additional layer of indirection?\n\nCurrently `eval` and `get` have a different semantics, which I tried to explain in the documentation that I added. The reason to introduce `_get_primitive` is performance: If doing `MyInterface.eval('1')` returns `''` then you need a print statement, such as `MyInterface.eval('print(1)')`. However, if you are in an interface such as Gap or Singular then the print statement is not needed, and of course it is a bit faster to not use the print statement.\n\nThus, for *efficiency*, the default is to not use the print statement, but for an interface that needs the print statement you are able to override the default.",
    "created_at": "2017-03-03T09:39:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335879",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:24" align="right">Comment 24</div>

Replying to [@jdemeyer](#comment%3A17):
> I'm not convinced for the need of the method `_get_primitive()`. Why cannot you just override `eval()` to do the right thing instead of inventing an additional layer of indirection?

Currently `eval` and `get` have a different semantics, which I tried to explain in the documentation that I added. The reason to introduce `_get_primitive` is performance: If doing `MyInterface.eval('1')` returns `''` then you need a print statement, such as `MyInterface.eval('print(1)')`. However, if you are in an interface such as Gap or Singular then the print statement is not needed, and of course it is a bit faster to not use the print statement.

Thus, for *efficiency*, the default is to not use the print statement, but for an interface that needs the print statement you are able to override the default.



---

archive/issue_comments_335880.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd97ff3d25ca2f6408d21e79ab9ef9d96373dffb\">cd97ff3</a></td><td><code>Parse error message of _check_valid() in order to cope with unpredictable future semantical changes</code></td></tr></table>\n",
    "created_at": "2017-03-03T09:50:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335880",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25" align="right">Comment 25</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd97ff3d25ca2f6408d21e79ab9ef9d96373dffb">cd97ff3</a></td><td><code>Parse error message of _check_valid() in order to cope with unpredictable future semantical changes</code></td></tr></table>




---

archive/issue_comments_335881.json:
```json
{
    "body": "Changed commit from **[6910107](https://github.com/sagemath/sagetrac-mirror/commit/6910107bb1020b3d9f0080683d19dbaed697f0de)** to **[cd97ff3](https://github.com/sagemath/sagetrac-mirror/commit/cd97ff3d25ca2f6408d21e79ab9ef9d96373dffb)**",
    "created_at": "2017-03-03T09:50:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335881",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6910107](https://github.com/sagemath/sagetrac-mirror/commit/6910107bb1020b3d9f0080683d19dbaed697f0de)** to **[cd97ff3](https://github.com/sagemath/sagetrac-mirror/commit/cd97ff3d25ca2f6408d21e79ab9ef9d96373dffb)**



---

archive/issue_comments_335882.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nReplying to [@jdemeyer](#comment%3A10):\n> Here\n> \n> ```\n>         except ValueError:\n>             return '(invalid {} object -- defined in terms of closed session)'.format(self.parent())\n> ```\n> you should use the exception message instead of hardcoding `\"defined in terms of closed session\"`.\n\nBy the way, how do I use the exception message? If I do\n\n```\n    except ValueError, msg:\n```\nthen `\"no longer\" in msg` doesn't work (ValueError has no `__contains__` method) and `\"no longer\" in msg.message` gives a DeprecationWarning.\n\nSo, am I really supposed to do `\"no longer\" in repr(msg)`? Or did you mean I should let the `__repr__` method return `'(invalid {} object - {})'.format(self.parent() or type(self), msg)`?\n\n> Maybe there are other reasons why a `ValueError` can be raised. And it might also make sense to replace `except ValueError` by `except Exception`.\n\nI was taught by several people to not catch a general `Exception` (in contrast to a more specific type of error) unless it is absolutely clear that I do not want that exception to be propagated. And that's not the case here. If a different error occurs then I don't want to hide it.",
    "created_at": "2017-03-03T09:57:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335882",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:26" align="right">Comment 26</div>

Replying to [@jdemeyer](#comment%3A10):
> Here
> 
> ```
>         except ValueError:
>             return '(invalid {} object -- defined in terms of closed session)'.format(self.parent())
> ```
> you should use the exception message instead of hardcoding `"defined in terms of closed session"`.

By the way, how do I use the exception message? If I do

```
    except ValueError, msg:
```
then `"no longer" in msg` doesn't work (ValueError has no `__contains__` method) and `"no longer" in msg.message` gives a DeprecationWarning.

So, am I really supposed to do `"no longer" in repr(msg)`? Or did you mean I should let the `__repr__` method return `'(invalid {} object - {})'.format(self.parent() or type(self), msg)`?

> Maybe there are other reasons why a `ValueError` can be raised. And it might also make sense to replace `except ValueError` by `except Exception`.

I was taught by several people to not catch a general `Exception` (in contrast to a more specific type of error) unless it is absolutely clear that I do not want that exception to be propagated. And that's not the case here. If a different error occurs then I don't want to hide it.



---

archive/issue_comments_335883.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdaeb2e08e4de89ca5d9f99e7c9486f78693c5e7\">fdaeb2e</a></td><td><code>Include error message of validity check into string representation of invalid interface elements</code></td></tr></table>\n",
    "created_at": "2017-03-03T10:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335883",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27" align="right">Comment 27</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdaeb2e08e4de89ca5d9f99e7c9486f78693c5e7">fdaeb2e</a></td><td><code>Include error message of validity check into string representation of invalid interface elements</code></td></tr></table>




---

archive/issue_comments_335884.json:
```json
{
    "body": "Changed commit from **[cd97ff3](https://github.com/sagemath/sagetrac-mirror/commit/cd97ff3d25ca2f6408d21e79ab9ef9d96373dffb)** to **[fdaeb2e](https://github.com/sagemath/sagetrac-mirror/commit/fdaeb2e08e4de89ca5d9f99e7c9486f78693c5e7)**",
    "created_at": "2017-03-03T10:11:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335884",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cd97ff3](https://github.com/sagemath/sagetrac-mirror/commit/cd97ff3d25ca2f6408d21e79ab9ef9d96373dffb)** to **[fdaeb2e](https://github.com/sagemath/sagetrac-mirror/commit/fdaeb2e08e4de89ca5d9f99e7c9486f78693c5e7)**



---

archive/issue_comments_335885.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nMeanwhile I think it is in fact a good idea to explicitly include the error message of the `ValueError` raised by `self._check_valid()` into the string representation of an invalid interface element `self`. But it really should be `ValueError`. There is no point in trying to guess future semantical changes to `_check_valid`. If someone lets it raise a different error than it is his/her job to take care of backward compatibility.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdaeb2e08e4de89ca5d9f99e7c9486f78693c5e7\">fdaeb2e</a></td><td><code>Include error message of validity check into string representation of invalid interface elements</code></td></tr></table>\n",
    "created_at": "2017-03-03T10:16:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335885",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:28" align="right">Comment 28</div>

Meanwhile I think it is in fact a good idea to explicitly include the error message of the `ValueError` raised by `self._check_valid()` into the string representation of an invalid interface element `self`. But it really should be `ValueError`. There is no point in trying to guess future semantical changes to `_check_valid`. If someone lets it raise a different error than it is his/her job to take care of backward compatibility.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdaeb2e08e4de89ca5d9f99e7c9486f78693c5e7">fdaeb2e</a></td><td><code>Include error message of validity check into string representation of invalid interface elements</code></td></tr></table>




---

archive/issue_events_296523.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-03T10:21:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296523"
}
```



---

archive/issue_events_296524.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-03T10:21:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296524"
}
```



---

archive/issue_comments_335886.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nI think I have answered the points that you raised. So, I'll change it back to \"needs review\".",
    "created_at": "2017-03-03T10:21:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335886",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:29" align="right">Comment 29</div>

I think I have answered the points that you raised. So, I'll change it back to "needs review".



---

archive/issue_events_296525.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-03T10:22:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296525"
}
```



---

archive/issue_events_296526.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-03T10:22:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296526"
}
```



---

archive/issue_comments_335887.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nWhat about [comment:16]",
    "created_at": "2017-03-03T10:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335887",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">Comment 30</div>

What about [comment:16]



---

archive/issue_comments_335888.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nReplying to [@simon-king-jena](#comment%3A24):\n> Currently `eval` and `get` have a different semantics, which I tried to explain in the documentation that I added. The reason to introduce `_get_primitive` is performance: If doing `MyInterface.eval('1')` returns `''` then you need a print statement, such as `MyInterface.eval('print(1)')`. However, if you are in an interface such as Gap or Singular then the print statement is not needed, and of course it is a bit faster to not use the print statement.\n\nI guess we are misunderstanding eachother. My point was: why not change `SimonKingsInterface.eval()` to add the `print` statement? Why does it need an *additional* method?",
    "created_at": "2017-03-03T10:24:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335888",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">Comment 31</div>

Replying to [@simon-king-jena](#comment%3A24):
> Currently `eval` and `get` have a different semantics, which I tried to explain in the documentation that I added. The reason to introduce `_get_primitive` is performance: If doing `MyInterface.eval('1')` returns `''` then you need a print statement, such as `MyInterface.eval('print(1)')`. However, if you are in an interface such as Gap or Singular then the print statement is not needed, and of course it is a bit faster to not use the print statement.

I guess we are misunderstanding eachother. My point was: why not change `SimonKingsInterface.eval()` to add the `print` statement? Why does it need an *additional* method?



---

archive/issue_comments_335889.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nReplying to [@simon-king-jena](#comment%3A26):\n> I was taught by several people to not catch a general `Exception` (in contrast to a more specific type of error) unless it is absolutely clear that I do not want that exception to be propagated.\n\nIn general, that's true. I'm just saying that it's debatable whether you do want the exception to be propagated. Anyway, changing this to `except Exception` was just a suggestion so it's perfectly OK to keep it as `except ValueError`.",
    "created_at": "2017-03-03T10:27:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335889",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">Comment 32</div>

Replying to [@simon-king-jena](#comment%3A26):
> I was taught by several people to not catch a general `Exception` (in contrast to a more specific type of error) unless it is absolutely clear that I do not want that exception to be propagated.

In general, that's true. I'm just saying that it's debatable whether you do want the exception to be propagated. Anyway, changing this to `except Exception` was just a suggestion so it's perfectly OK to keep it as `except ValueError`.



---

archive/issue_comments_335890.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nReplying to [@jdemeyer](#comment%3A30):\n> What about [comment:16]\n\nI already answered that. I was bitten by name mangling. While\n\n```\nsage: r = singular.ring(0,'(x,y)','dp')\nsage: M = singular.matrix(2,2,\"(25/47*x^2*y^4 + 63/127*x + 27)^3,y,0,1\")\nsage: M.rename('T')\nsage: M.__custom_name\n'T'\n```\ndoes work, `hasattr(self,'__custom_name')` returned `False` when I had it in the `_repr_` method.\n\nBut if you use `self.__custom_name` in the same module in which the private attribute is defined (namely `sage.structure.sage_object`) then there is no point to use the accessor method, as it is slower.\n\nJust to be on the safe side (maybe I had a typo such as `hasattr(self,'__custon_name')`?), I'll try to change it into using `self.__custom_name?` and tell you what happens.",
    "created_at": "2017-03-03T10:35:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335890",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:33" align="right">Comment 33</div>

Replying to [@jdemeyer](#comment%3A30):
> What about [comment:16]

I already answered that. I was bitten by name mangling. While

```
sage: r = singular.ring(0,'(x,y)','dp')
sage: M = singular.matrix(2,2,"(25/47*x^2*y^4 + 63/127*x + 27)^3,y,0,1")
sage: M.rename('T')
sage: M.__custom_name
'T'
```
does work, `hasattr(self,'__custom_name')` returned `False` when I had it in the `_repr_` method.

But if you use `self.__custom_name` in the same module in which the private attribute is defined (namely `sage.structure.sage_object`) then there is no point to use the accessor method, as it is slower.

Just to be on the safe side (maybe I had a typo such as `hasattr(self,'__custon_name')`?), I'll try to change it into using `self.__custom_name?` and tell you what happens.



---

archive/issue_comments_335891.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nReplying to [@jdemeyer](#comment%3A31):\n> I guess we are misunderstanding eachother. My point was: why not change `SimonKingsInterface.eval()` to add the `print` statement? Why does it need an *additional* method?\n\nIf you need the print statement then use the (already existing) method `.get()`, not `.eval()`. The same applies to Singular:\n\n```\nsage: r = singular.ring(0,'(x,y)','dp')\nsage: M = singular.matrix(2,2,\"(25/47*x^2*y^4 + 63/127*x + 27)^3,y,0,1\")\nsage: singular.eval(M._name)\n'sage8[1,1]=15625/103823*x^6*y^12+118125/280543*x^5*y^8+50625/2209*x^4*y^8+297675/758063*x^4*y^4+255150/5969*x^3*y^4+54675/47*x^2*y^4+250047/2048383*x^3+321489/16129*x^2+137781/127*x+19683\\nsage8[1,2]=y\\nsage8[2,1]=0\\nsage8[2,2]=1'\nsage: singular.get(M._name)\n'sage8[1,1],y,\\n0,         1 '\n```",
    "created_at": "2017-03-03T10:38:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335891",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:34" align="right">Comment 34</div>

Replying to [@jdemeyer](#comment%3A31):
> I guess we are misunderstanding eachother. My point was: why not change `SimonKingsInterface.eval()` to add the `print` statement? Why does it need an *additional* method?

If you need the print statement then use the (already existing) method `.get()`, not `.eval()`. The same applies to Singular:

```
sage: r = singular.ring(0,'(x,y)','dp')
sage: M = singular.matrix(2,2,"(25/47*x^2*y^4 + 63/127*x + 27)^3,y,0,1")
sage: singular.eval(M._name)
'sage8[1,1]=15625/103823*x^6*y^12+118125/280543*x^5*y^8+50625/2209*x^4*y^8+297675/758063*x^4*y^4+255150/5969*x^3*y^4+54675/47*x^2*y^4+250047/2048383*x^3+321489/16129*x^2+137781/127*x+19683\nsage8[1,2]=y\nsage8[2,1]=0\nsage8[2,2]=1'
sage: singular.get(M._name)
'sage8[1,1],y,\n0,         1 '
```



---

archive/issue_comments_335892.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nMaybe you missed [comment:23]. You can override the mangling with `getattr()`/`setattr()`/`hasattr()`.",
    "created_at": "2017-03-03T10:39:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335892",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:35" align="right">Comment 35</div>

Maybe you missed [comment:23]. You can override the mangling with `getattr()`/`setattr()`/`hasattr()`.



---

archive/issue_comments_335893.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nReplying to [@simon-king-jena](#comment%3A34):\n> If you need the print statement then use the (already existing) method `.get()`, not `.eval()`.\n\nI am getting more and more lost here...\n\nGiven what you just said, what's the difference between `get()` and `_get_primitive()`?",
    "created_at": "2017-03-03T10:40:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335893",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">Comment 36</div>

Replying to [@simon-king-jena](#comment%3A34):
> If you need the print statement then use the (already existing) method `.get()`, not `.eval()`.

I am getting more and more lost here...

Given what you just said, what's the difference between `get()` and `_get_primitive()`?



---

archive/issue_comments_335894.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nReplying to [@jdemeyer](#comment%3A35):\n> Maybe you missed [comment:23]. You can override the mangling with `getattr()`/`setattr()`/`hasattr()`.\n\nYes, I missed it. Thanks for pointing it out. Next commit will be removal of `_get_custom_name`.",
    "created_at": "2017-03-03T10:41:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335894",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:37" align="right">Comment 37</div>

Replying to [@jdemeyer](#comment%3A35):
> Maybe you missed [comment:23]. You can override the mangling with `getattr()`/`setattr()`/`hasattr()`.

Yes, I missed it. Thanks for pointing it out. Next commit will be removal of `_get_custom_name`.



---

archive/issue_comments_335895.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nReplying to [@jdemeyer](#comment%3A36):\n> Replying to [@simon-king-jena](#comment%3A34):\n> > If you need the print statement then use the (already existing) method `.get()`, not `.eval()`.\n\n> \n> I am getting more and more lost here...\n> \n> Given what you just said, what's the difference between `get()` and `_get_primitive()`?\n\nFor Singular and Gap, `_get_primitive()` does the same as `eval()`, which is fine because primitives (such as integers) in Gap or Singular do not need to be printed in order to get their string representations. So, blindly using `get()` has a small performance effect.\n\nHowever, note that this ticket is a dependency for #22452. And in Polymake, you need an explicit print statement even for primitives; thus, blindly using `eval()` wouldn't do the right thing.\n\nHence, it is needed to introduce a hook `_get_primitive` to customise it.",
    "created_at": "2017-03-03T10:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335895",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:38" align="right">Comment 38</div>

Replying to [@jdemeyer](#comment%3A36):
> Replying to [@simon-king-jena](#comment%3A34):
> > If you need the print statement then use the (already existing) method `.get()`, not `.eval()`.

> 
> I am getting more and more lost here...
> 
> Given what you just said, what's the difference between `get()` and `_get_primitive()`?

For Singular and Gap, `_get_primitive()` does the same as `eval()`, which is fine because primitives (such as integers) in Gap or Singular do not need to be printed in order to get their string representations. So, blindly using `get()` has a small performance effect.

However, note that this ticket is a dependency for #22452. And in Polymake, you need an explicit print statement even for primitives; thus, blindly using `eval()` wouldn't do the right thing.

Hence, it is needed to introduce a hook `_get_primitive` to customise it.



---

archive/issue_comments_335896.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nGiven the explanations that you just made that `_get_primitive()` is just a more efficient version of `get()`, I think that `_get_primitive()` should default to calling `get()` instead of `eval()`.",
    "created_at": "2017-03-03T10:56:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335896",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">Comment 39</div>

Given the explanations that you just made that `_get_primitive()` is just a more efficient version of `get()`, I think that `_get_primitive()` should default to calling `get()` instead of `eval()`.



---

archive/issue_comments_335897.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nReplying to [@jdemeyer](#comment%3A39):\n> Given the explanations that you just made that `_get_primitive()` is just a more efficient version of `get()`, I think that `_get_primitive()` should default to calling `get()` instead of `eval()`.\n\nThe default, I think, should cover the **most frequent** case. So far, Polymake is the only interface I am aware of that would need a print statement to show an integer. That's why I chose it to default to `eval()`, which works for...\n\n```\nsage: gp.eval('1')\n'1'\nsage: singular.eval('1')\n'1'\nsage: gap.eval('1')\n'1'\nsage: maxima.eval('1')\n'1'\n```\nwhereas you will have (with #22452)\n\n```\nsage: polymake.eval('1')\n''\n```",
    "created_at": "2017-03-03T11:02:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335897",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:40" align="right">Comment 40</div>

Replying to [@jdemeyer](#comment%3A39):
> Given the explanations that you just made that `_get_primitive()` is just a more efficient version of `get()`, I think that `_get_primitive()` should default to calling `get()` instead of `eval()`.

The default, I think, should cover the **most frequent** case. So far, Polymake is the only interface I am aware of that would need a print statement to show an integer. That's why I chose it to default to `eval()`, which works for...

```
sage: gp.eval('1')
'1'
sage: singular.eval('1')
'1'
sage: gap.eval('1')
'1'
sage: maxima.eval('1')
'1'
```
whereas you will have (with #22452)

```
sage: polymake.eval('1')
''
```



---

archive/issue_comments_335898.json:
```json
{
    "body": "Changed commit from **[fdaeb2e](https://github.com/sagemath/sagetrac-mirror/commit/fdaeb2e08e4de89ca5d9f99e7c9486f78693c5e7)** to **[cdb085b](https://github.com/sagemath/sagetrac-mirror/commit/cdb085bf1b55254cb078bec28f8cd7ed19bf41dd)**",
    "created_at": "2017-03-03T11:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335898",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fdaeb2e](https://github.com/sagemath/sagetrac-mirror/commit/fdaeb2e08e4de89ca5d9f99e7c9486f78693c5e7)** to **[cdb085b](https://github.com/sagemath/sagetrac-mirror/commit/cdb085bf1b55254cb078bec28f8cd7ed19bf41dd)**



---

archive/issue_comments_335899.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdb085bf1b55254cb078bec28f8cd7ed19bf41dd\">cdb085b</a></td><td><code>Revert introduction of _get_custom_name</code></td></tr></table>\n",
    "created_at": "2017-03-03T11:04:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335899",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41" align="right">Comment 41</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdb085bf1b55254cb078bec28f8cd7ed19bf41dd">cdb085b</a></td><td><code>Revert introduction of _get_custom_name</code></td></tr></table>




---

archive/issue_comments_335900.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nAfter reverting `_get_custom_name` in the latest commit, I think the only open question at the moment is what should be the default for `_get_primitive`, right?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdb085bf1b55254cb078bec28f8cd7ed19bf41dd\">cdb085b</a></td><td><code>Revert introduction of _get_custom_name</code></td></tr></table>\n",
    "created_at": "2017-03-03T11:06:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335900",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:42" align="right">Comment 42</div>

After reverting `_get_custom_name` in the latest commit, I think the only open question at the moment is what should be the default for `_get_primitive`, right?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdb085bf1b55254cb078bec28f8cd7ed19bf41dd">cdb085b</a></td><td><code>Revert introduction of _get_custom_name</code></td></tr></table>




---

archive/issue_comments_335901.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nReplying to [@simon-king-jena](#comment%3A40):\n> Replying to [@jdemeyer](#comment%3A39):\n> > Given the explanations that you just made that `_get_primitive()` is just a more efficient version of `get()`, I think that `_get_primitive()` should default to calling `get()` instead of `eval()`.\n\n> \n> The default, I think, should cover the **most frequent** case.\n\nNo, I think the default should cover the case which makes it least likely to make mistakes.\n\nI also think that many interfaces have custom `get()` methods but don't really need it. For example, GP has a custom `get()` method calling `print()` but I don't see how GP would treat variables differently from \"primitive\" objects.\n\nAlso, it is mentally a lot easier to understand if `_get_primitive()` would default to `get()`. Until all your extra explanations I found it hard to understand what `_get_primitive()` is about. If you say that `_get_primitive()` is just an optimization for `get()`, then it makes a lot of sense that `_get_primitive()` would default to `get()`.",
    "created_at": "2017-03-03T11:10:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335901",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">Comment 43</div>

Replying to [@simon-king-jena](#comment%3A40):
> Replying to [@jdemeyer](#comment%3A39):
> > Given the explanations that you just made that `_get_primitive()` is just a more efficient version of `get()`, I think that `_get_primitive()` should default to calling `get()` instead of `eval()`.

> 
> The default, I think, should cover the **most frequent** case.

No, I think the default should cover the case which makes it least likely to make mistakes.

I also think that many interfaces have custom `get()` methods but don't really need it. For example, GP has a custom `get()` method calling `print()` but I don't see how GP would treat variables differently from "primitive" objects.

Also, it is mentally a lot easier to understand if `_get_primitive()` would default to `get()`. Until all your extra explanations I found it hard to understand what `_get_primitive()` is about. If you say that `_get_primitive()` is just an optimization for `get()`, then it makes a lot of sense that `_get_primitive()` would default to `get()`.



---

archive/issue_comments_335902.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nReplying to [@simon-king-jena](#comment%3A42):\n> After reverting `_get_custom_name` in the latest commit, I think the only open question at the moment is what should be the default for `_get_primitive`, right?\n\nI guess so.\n\nDon't forget the doctests. Speaking of which, you should add a direct doctest for `_get_primitive()` too.",
    "created_at": "2017-03-03T11:14:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335902",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:44" align="right">Comment 44</div>

Replying to [@simon-king-jena](#comment%3A42):
> After reverting `_get_custom_name` in the latest commit, I think the only open question at the moment is what should be the default for `_get_primitive`, right?

I guess so.

Don't forget the doctests. Speaking of which, you should add a direct doctest for `_get_primitive()` too.



---

archive/issue_comments_335903.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nReplying to [@jdemeyer](#comment%3A44):\n> Replying to [@simon-king-jena](#comment%3A42):\n> > After reverting `_get_custom_name` in the latest commit, I think the only open question at the moment is what should be the default for `_get_primitive`, right?\n\n> \n> I guess so.\n> \n> Don't forget the doctests. Speaking of which, you should add a direct doctest for `_get_primitive()` too.\n\nO, right! I forgot to run `sage --coverage` yet.",
    "created_at": "2017-03-03T11:17:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335903",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:45" align="right">Comment 45</div>

Replying to [@jdemeyer](#comment%3A44):
> Replying to [@simon-king-jena](#comment%3A42):
> > After reverting `_get_custom_name` in the latest commit, I think the only open question at the moment is what should be the default for `_get_primitive`, right?

> 
> I guess so.
> 
> Don't forget the doctests. Speaking of which, you should add a direct doctest for `_get_primitive()` too.

O, right! I forgot to run `sage --coverage` yet.



---

archive/issue_comments_335904.json:
```json
{
    "body": "Changed commit from **[cdb085b](https://github.com/sagemath/sagetrac-mirror/commit/cdb085bf1b55254cb078bec28f8cd7ed19bf41dd)** to **[b5df135](https://github.com/sagemath/sagetrac-mirror/commit/b5df1359fb0ddaf26c35db9820d3bd7158d5046d)**",
    "created_at": "2017-03-03T11:30:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335904",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cdb085b](https://github.com/sagemath/sagetrac-mirror/commit/cdb085bf1b55254cb078bec28f8cd7ed19bf41dd)** to **[b5df135](https://github.com/sagemath/sagetrac-mirror/commit/b5df1359fb0ddaf26c35db9820d3bd7158d5046d)**



---

archive/issue_comments_335905.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5df1359fb0ddaf26c35db9820d3bd7158d5046d\">b5df135</a></td><td><code>Actually remove _get_custom_name, not only its applications</code></td></tr></table>\n",
    "created_at": "2017-03-03T11:30:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335905",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46" align="right">Comment 46</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5df1359fb0ddaf26c35db9820d3bd7158d5046d">b5df135</a></td><td><code>Actually remove _get_custom_name, not only its applications</code></td></tr></table>




---

archive/issue_comments_335906.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nReplying to [@jdemeyer](#comment%3A43):\n> I also think that many interfaces have custom `get()` methods but don't really need it. For example, GP has a custom `get()` method calling `print()` but I don't see how GP would treat variables differently from \"primitive\" objects.\n\nIt does treat them differently:\n\n```\nsage: M = random_matrix(ZZ,3,3)\nsage: m = gp(M); n = gp(15)\nsage: gp.get(m._name), gp.get(n._name)\n('[0, -1, 2; 2, -12, 0; -2, 1, 2]', '15')\nsage: gp.eval(m._name), gp.eval(n._name)\n('\\n[ 0  -1 2]\\n\\n[ 2 -12 0]\\n\\n[-2   1 2]\\n', '15')\n```\n\nApparently the creator of the interface thought that the latter result is nicer than the former.\n\n> Also, it is mentally a lot easier to understand if `_get_primitive()` would default to `get()`. Until all your extra explanations I found it hard to understand what `_get_primitive()` is about. If you say that `_get_primitive()` is just an optimization for `get()`, then it makes a lot of sense that `_get_primitive()` would default to `get()`.\n\n__First proposition:__ `_get_primitive_` should be used in the default comparison method.\n\n__Rationale:__ Using `eval()` in the default comparison means I'll have to override the comparison method in the Polymake interface (doable of course, but I'd like to avoid it). Using `get()` means to lose performance of comparison (thus, an important operation) in all other interfaces.\n\n__Second proposition:__ If `_get_primitive_` is used in comparison methods, it should default to `eval`.\n\n__Rationale:__ If instead it would default to `get`, I'd need to override the default in ALL existing interfaces, or I would have to live with a performance loss in comparison.\n\n__Counterargument:__ I do override `_get_primitive` in Polymake mainly in order to avoid overriding `__cmp__` (I also use it in helper methods, but they are cached and thus using `get()` is fine there). Hence, why do I introduce `_get_primitive` and override it in Polymake, rather than I change the helper methods to use `get()` and then override `__cmp__` in Polymake?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5df1359fb0ddaf26c35db9820d3bd7158d5046d\">b5df135</a></td><td><code>Actually remove _get_custom_name, not only its applications</code></td></tr></table>\n",
    "created_at": "2017-03-03T11:33:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335906",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:47" align="right">Comment 47</div>

Replying to [@jdemeyer](#comment%3A43):
> I also think that many interfaces have custom `get()` methods but don't really need it. For example, GP has a custom `get()` method calling `print()` but I don't see how GP would treat variables differently from "primitive" objects.

It does treat them differently:

```
sage: M = random_matrix(ZZ,3,3)
sage: m = gp(M); n = gp(15)
sage: gp.get(m._name), gp.get(n._name)
('[0, -1, 2; 2, -12, 0; -2, 1, 2]', '15')
sage: gp.eval(m._name), gp.eval(n._name)
('\n[ 0  -1 2]\n\n[ 2 -12 0]\n\n[-2   1 2]\n', '15')
```

Apparently the creator of the interface thought that the latter result is nicer than the former.

> Also, it is mentally a lot easier to understand if `_get_primitive()` would default to `get()`. Until all your extra explanations I found it hard to understand what `_get_primitive()` is about. If you say that `_get_primitive()` is just an optimization for `get()`, then it makes a lot of sense that `_get_primitive()` would default to `get()`.

__First proposition:__ `_get_primitive_` should be used in the default comparison method.

__Rationale:__ Using `eval()` in the default comparison means I'll have to override the comparison method in the Polymake interface (doable of course, but I'd like to avoid it). Using `get()` means to lose performance of comparison (thus, an important operation) in all other interfaces.

__Second proposition:__ If `_get_primitive_` is used in comparison methods, it should default to `eval`.

__Rationale:__ If instead it would default to `get`, I'd need to override the default in ALL existing interfaces, or I would have to live with a performance loss in comparison.

__Counterargument:__ I do override `_get_primitive` in Polymake mainly in order to avoid overriding `__cmp__` (I also use it in helper methods, but they are cached and thus using `get()` is fine there). Hence, why do I introduce `_get_primitive` and override it in Polymake, rather than I change the helper methods to use `get()` and then override `__cmp__` in Polymake?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5df1359fb0ddaf26c35db9820d3bd7158d5046d">b5df135</a></td><td><code>Actually remove _get_custom_name, not only its applications</code></td></tr></table>




---

archive/issue_comments_335907.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nReplying to [@simon-king-jena](#comment%3A47):\n> It does treat them differently:\n\nRight, thanks for actually checking my statements :-)\n\n> ```\n> sage: M = random_matrix(ZZ,3,3)\n> sage: m = gp(M); n = gp(15)\n> sage: gp.get(m._name), gp.get(n._name)\n> ('[0, -1, 2; 2, -12, 0; -2, 1, 2]', '15')\n> sage: gp.eval(m._name), gp.eval(n._name)\n> ('\\n[ 0  -1 2]\\n\\n[ 2 -12 0]\\n\\n[-2   1 2]\\n', '15')\n> ```\n> \n> Apparently the creator of the interface thought that the latter result is nicer than the former.\n\nYou mean that the former\n\n```\n[0, -1, 2; 2, -12, 0; -2, 1, 2]\n```\nis nicer than the latter\n\n```\n[ 0  -1 2]\n\n[ 2 -12 0]\n\n[-2   1 2]\n```\n\nI think it depends a lot on the application. If the output of `get()` is supposed to be machine-readable, then certainly the former is nicer.",
    "created_at": "2017-03-03T11:47:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335907",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:48" align="right">Comment 48</div>

Replying to [@simon-king-jena](#comment%3A47):
> It does treat them differently:

Right, thanks for actually checking my statements :-)

> ```
> sage: M = random_matrix(ZZ,3,3)
> sage: m = gp(M); n = gp(15)
> sage: gp.get(m._name), gp.get(n._name)
> ('[0, -1, 2; 2, -12, 0; -2, 1, 2]', '15')
> sage: gp.eval(m._name), gp.eval(n._name)
> ('\n[ 0  -1 2]\n\n[ 2 -12 0]\n\n[-2   1 2]\n', '15')
> ```
> 
> Apparently the creator of the interface thought that the latter result is nicer than the former.

You mean that the former

```
[0, -1, 2; 2, -12, 0; -2, 1, 2]
```
is nicer than the latter

```
[ 0  -1 2]

[ 2 -12 0]

[-2   1 2]
```

I think it depends a lot on the application. If the output of `get()` is supposed to be machine-readable, then certainly the former is nicer.



---

archive/issue_comments_335908.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nReplying to [@jdemeyer](#comment%3A48):\n> You mean that the former\n> ...\n> is nicer than the latter\n\nYes, copy-and-paste error (first, I had the code ordered differently).",
    "created_at": "2017-03-03T11:50:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335908",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:49" align="right">Comment 49</div>

Replying to [@jdemeyer](#comment%3A48):
> You mean that the former
> ...
> is nicer than the latter

Yes, copy-and-paste error (first, I had the code ordered differently).



---

archive/issue_comments_335909.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nReplying to [@jdemeyer](#comment%3A48):\n> I think it depends a lot on the application. If the output of `get()` is supposed to be machine-readable, then certainly the former is nicer.\n\nThis I cannot tell. I added some documentation based on the observation the `get` in all cases that I looked at involves printing, whereas `eval` in all instances that I looked at does not. So, if the purpose of `get()` is to get something machine-readable then it hasn't been documented.",
    "created_at": "2017-03-03T11:52:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335909",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:50" align="right">Comment 50</div>

Replying to [@jdemeyer](#comment%3A48):
> I think it depends a lot on the application. If the output of `get()` is supposed to be machine-readable, then certainly the former is nicer.

This I cannot tell. I added some documentation based on the observation the `get` in all cases that I looked at involves printing, whereas `eval` in all instances that I looked at does not. So, if the purpose of `get()` is to get something machine-readable then it hasn't been documented.



---

archive/issue_comments_335910.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nReplying to [@simon-king-jena](#comment%3A47):\n> __Counterargument:__ I do override `_get_primitive` in Polymake mainly in order to avoid overriding `__cmp__` (I also use it in helper methods, but they are cached and thus using `get()` is fine there). Hence, why do I introduce `_get_primitive` and override it in Polymake, rather than I change the helper methods to use `get()` and then override `__cmp__` in Polymake?\n\nI found my own counter-argument convincing. Thus, I'll remove `_get_primitive` in my next commit. But that has to wait -- I have to prepare the talk that I'm about to give at sage days 84...",
    "created_at": "2017-03-03T11:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335910",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:51" align="right">Comment 51</div>

Replying to [@simon-king-jena](#comment%3A47):
> __Counterargument:__ I do override `_get_primitive` in Polymake mainly in order to avoid overriding `__cmp__` (I also use it in helper methods, but they are cached and thus using `get()` is fine there). Hence, why do I introduce `_get_primitive` and override it in Polymake, rather than I change the helper methods to use `get()` and then override `__cmp__` in Polymake?

I found my own counter-argument convincing. Thus, I'll remove `_get_primitive` in my next commit. But that has to wait -- I have to prepare the talk that I'm about to give at sage days 84...



---

archive/issue_comments_335911.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nReplying to [@simon-king-jena](#comment%3A47):\n> Using `get()` means to lose performance of comparison (thus, an important operation) in all other interfaces.\n\nAre you sure that there is a real performance hit? Or is this just some hypothetical consideration?",
    "created_at": "2017-03-03T12:08:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335911",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:52" align="right">Comment 52</div>

Replying to [@simon-king-jena](#comment%3A47):
> Using `get()` means to lose performance of comparison (thus, an important operation) in all other interfaces.

Are you sure that there is a real performance hit? Or is this just some hypothetical consideration?



---

archive/issue_comments_335912.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nReplying to [@jdemeyer](#comment%3A52):\n> Replying to [@simon-king-jena](#comment%3A47):\n> > Using `get()` means to lose performance of comparison (thus, an important operation) in all other interfaces.\n\n> \n> Are you sure that there is a real performance hit? Or is this just some hypothetical consideration?\n\nIt is hypothetical. And as I said in my previous post I now plan to leave the default implementation of `__cmp__` as it is, do not introduce `_get_primitive`, and override `__cmp__` for the upcoming Polymake interface.",
    "created_at": "2017-03-03T12:20:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335912",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:53" align="right">Comment 53</div>

Replying to [@jdemeyer](#comment%3A52):
> Replying to [@simon-king-jena](#comment%3A47):
> > Using `get()` means to lose performance of comparison (thus, an important operation) in all other interfaces.

> 
> Are you sure that there is a real performance hit? Or is this just some hypothetical consideration?

It is hypothetical. And as I said in my previous post I now plan to leave the default implementation of `__cmp__` as it is, do not introduce `_get_primitive`, and override `__cmp__` for the upcoming Polymake interface.



---

archive/issue_comments_335913.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,7 +24,7 @@\n   `__Suggestion__`\n \n   Change `__repr__` into single underscore methods in all interfaces.\n-- The methods `_pre_interact` and `_post_interact` are defined in sage.interfaces.interface and overridden in sage.interfaces.gap, and there is also a method `call` defined in sage.interfaces.interface. However it seems that none of the three is used anywhere.\n+- The methods `_pre_interact` and `_post_interact` are defined in sage.interfaces.interface and are overridden in sage.interfaces.gap. There are also method `call` and `hasattr` defined in sage.interfaces.interface. However it seems that none of the four is used anywhere.\n \n   `__Suggestion__`\n \n``````\n",
    "created_at": "2017-03-03T16:46:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335913",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,7 +24,7 @@
   `__Suggestion__`
 
   Change `__repr__` into single underscore methods in all interfaces.
-- The methods `_pre_interact` and `_post_interact` are defined in sage.interfaces.interface and overridden in sage.interfaces.gap, and there is also a method `call` defined in sage.interfaces.interface. However it seems that none of the three is used anywhere.
+- The methods `_pre_interact` and `_post_interact` are defined in sage.interfaces.interface and are overridden in sage.interfaces.gap. There are also method `call` and `hasattr` defined in sage.interfaces.interface. However it seems that none of the four is used anywhere.
 
   `__Suggestion__`
 
``````




---

archive/issue_comments_335914.json:
```json
{
    "body": "Changed commit from **[b5df135](https://github.com/sagemath/sagetrac-mirror/commit/b5df1359fb0ddaf26c35db9820d3bd7158d5046d)** to **[6b53229](https://github.com/sagemath/sagetrac-mirror/commit/6b532293a5807e7ea82f62384cb47f89ea34f7e6)**",
    "created_at": "2017-03-03T16:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335914",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b5df135](https://github.com/sagemath/sagetrac-mirror/commit/b5df1359fb0ddaf26c35db9820d3bd7158d5046d)** to **[6b53229](https://github.com/sagemath/sagetrac-mirror/commit/6b532293a5807e7ea82f62384cb47f89ea34f7e6)**



---

archive/issue_comments_335915.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b532293a5807e7ea82f62384cb47f89ea34f7e6\">6b53229</a></td><td><code>Reverse addition of _get_primitive. Fix `__cmp__`, bool etc. and their documentation</code></td></tr></table>\n",
    "created_at": "2017-03-03T16:53:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335915",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55" align="right">Comment 55</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b532293a5807e7ea82f62384cb47f89ea34f7e6">6b53229</a></td><td><code>Reverse addition of _get_primitive. Fix `__cmp__`, bool etc. and their documentation</code></td></tr></table>




---

archive/issue_comments_335916.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nI think with the current commit I have addressed the objections that we discussed above. Note that I did not remove the seemingly unused methods mentioned in the ticket description. I hope that's fine.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b532293a5807e7ea82f62384cb47f89ea34f7e6\">6b53229</a></td><td><code>Reverse addition of _get_primitive. Fix `__cmp__`, bool etc. and their documentation</code></td></tr></table>\n",
    "created_at": "2017-03-03T16:54:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335916",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:56" align="right">Comment 56</div>

I think with the current commit I have addressed the objections that we discussed above. Note that I did not remove the seemingly unused methods mentioned in the ticket description. I hope that's fine.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b532293a5807e7ea82f62384cb47f89ea34f7e6">6b53229</a></td><td><code>Reverse addition of _get_primitive. Fix `__cmp__`, bool etc. and their documentation</code></td></tr></table>




---

archive/issue_events_296527.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-03T16:54:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296527"
}
```



---

archive/issue_events_296528.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-03T16:54:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296528"
}
```



---

archive/issue_comments_335917.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nWhat is the point of replacing `self.__custom_name` by `getattr(self, '__custom_name')`?",
    "created_at": "2017-03-05T14:48:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335917",
    "user": "https://github.com/videlec"
}
```

<div id="comment:57" align="right">Comment 57</div>

What is the point of replacing `self.__custom_name` by `getattr(self, '__custom_name')`?



---

archive/issue_comments_335918.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nReplying to [@videlec](#comment%3A57):\n> What is the point of replacing `self.__custom_name` by `getattr(self, '__custom_name')`?\n\nI tried `self.__custom_name` before changing to \"getattr\", and it didn't work.",
    "created_at": "2017-03-05T15:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335918",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:58" align="right">Comment 58</div>

Replying to [@videlec](#comment%3A57):
> What is the point of replacing `self.__custom_name` by `getattr(self, '__custom_name')`?

I tried `self.__custom_name` before changing to "getattr", and it didn't work.



---

archive/issue_comments_335919.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\nReplying to [@simon-king-jena](#comment%3A58):\n> Replying to [@videlec](#comment%3A57):\n> > What is the point of replacing `self.__custom_name` by `getattr(self, '__custom_name')`?\n\n> \n> I tried `self.__custom_name` before changing to \"getattr\", and it didn't work.\n\nIndeed. `__custom_name` wouldn't work to the Python's name mangling. So the old code could never have worked...",
    "created_at": "2017-03-06T14:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335919",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:59" align="right">Comment 59</div>

Replying to [@simon-king-jena](#comment%3A58):
> Replying to [@videlec](#comment%3A57):
> > What is the point of replacing `self.__custom_name` by `getattr(self, '__custom_name')`?

> 
> I tried `self.__custom_name` before changing to "getattr", and it didn't work.

Indeed. `__custom_name` wouldn't work to the Python's name mangling. So the old code could never have worked...



---

archive/issue_comments_335920.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nReplying to [@simon-king-jena](#comment%3A56):\n> I think with the current commit I have addressed the objections that we discussed above. Note that I did not remove the seemingly unused methods mentioned in the ticket description. I hope that's fine.\n\nI think you should update the ticket description. It's much easier to review a ticket like this when the purpose of the ticket is clear.",
    "created_at": "2017-03-06T14:35:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335920",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:60" align="right">Comment 60</div>

Replying to [@simon-king-jena](#comment%3A56):
> I think with the current commit I have addressed the objections that we discussed above. Note that I did not remove the seemingly unused methods mentioned in the ticket description. I hope that's fine.

I think you should update the ticket description. It's much easier to review a ticket like this when the purpose of the ticket is clear.



---

archive/issue_events_296529.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-06T14:35:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296529"
}
```



---

archive/issue_events_296530.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-06T14:35:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296530"
}
```



---

archive/issue_comments_335921.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">Comment 61</div>\n\nReplace\n\n```\nexcept ValueError, msg\n```\nby\n\n```\nexcept ValueError as msg\n```",
    "created_at": "2017-03-06T14:39:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335921",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:61" align="right">Comment 61</div>

Replace

```
except ValueError, msg
```
by

```
except ValueError as msg
```



---

archive/issue_comments_335922.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -28,5 +28,5 @@\n \n   `__Suggestion__`\n \n-  Remove them (without deprecation?).\n+  I think one could remove them (without deprecation), but I won't do it on this ticket.\n \n``````\n",
    "created_at": "2017-03-06T15:29:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335922",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -28,5 +28,5 @@
 
   `__Suggestion__`
 
-  Remove them (without deprecation?).
+  I think one could remove them (without deprecation), but I won't do it on this ticket.
 
``````




---

archive/issue_events_296531.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-06T15:29:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296531"
}
```



---

archive/issue_events_296532.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-06T15:29:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296532"
}
```



---

archive/issue_comments_335923.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">Comment 63</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87ad58632e42a3d0c75f7871391012fd8b328f35\">87ad586</a></td><td><code>Change syntax for catching 'ValueError as...'</code></td></tr></table>\n",
    "created_at": "2017-03-06T15:35:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335923",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:63" align="right">Comment 63</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87ad58632e42a3d0c75f7871391012fd8b328f35">87ad586</a></td><td><code>Change syntax for catching 'ValueError as...'</code></td></tr></table>




---

archive/issue_comments_335924.json:
```json
{
    "body": "Changed commit from **[6b53229](https://github.com/sagemath/sagetrac-mirror/commit/6b532293a5807e7ea82f62384cb47f89ea34f7e6)** to **[87ad586](https://github.com/sagemath/sagetrac-mirror/commit/87ad58632e42a3d0c75f7871391012fd8b328f35)**",
    "created_at": "2017-03-06T15:35:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335924",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6b53229](https://github.com/sagemath/sagetrac-mirror/commit/6b532293a5807e7ea82f62384cb47f89ea34f7e6)** to **[87ad586](https://github.com/sagemath/sagetrac-mirror/commit/87ad58632e42a3d0c75f7871391012fd8b328f35)**



---

archive/issue_comments_335925.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">Comment 64</div>\n\nReplying to [@jdemeyer](#comment%3A61):\n> Replace\n> \n> ```\n> except ValueError, msg\n> ```\n> by\n> \n> ```\n> except ValueError as msg\n> ```\n\nI did this in the current commit, and I changed the ticket description to say that I believe the mentioned functions \"could be removed, but not on this ticket\".\n\nSo, I guess that means \"needs review\" again.",
    "created_at": "2017-03-06T15:37:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335925",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:64" align="right">Comment 64</div>

Replying to [@jdemeyer](#comment%3A61):
> Replace
> 
> ```
> except ValueError, msg
> ```
> by
> 
> ```
> except ValueError as msg
> ```

I did this in the current commit, and I changed the ticket description to say that I believe the mentioned functions "could be removed, but not on this ticket".

So, I guess that means "needs review" again.



---

archive/issue_events_296533.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-06T15:54:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296533"
}
```



---

archive/issue_events_296534.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-06T15:54:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296534"
}
```



---

archive/issue_comments_335926.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">Comment 65</div>\n\nThe ticket description isn't up-to-date. For example, it still talks about `_get_primitive`.",
    "created_at": "2017-03-06T15:54:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335926",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:65" align="right">Comment 65</div>

The ticket description isn't up-to-date. For example, it still talks about `_get_primitive`.



---

archive/issue_comments_335927.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,11 +14,6 @@\n   ```\n   self._equality_symbol().format(var1, var2)\n   ```\n-- It is not always the case that `self.eval(var)` returns a non-empty string. However, in some places in `sage.interfaces`, it is expected that it returns a string representation, provided that `var` corresponds to an integer or a boolean. However, this assumption does NOT hold for Polymake!\n-\n-  `__Suggestion__`\n-\n-  Introduce a method `self._get_primitive` that defaults to `self.eval` but can be overridden for interfaces in which an explicit print statement is needed to get the string representation of an integer.\n - The pexpect interfaces and the interface elements inherit from `Parent` resp. from `Element`. But they override `__repr__`, which is bad.\n \n   `__Suggestion__`\n@@ -30,3 +25,9 @@\n \n   I think one could remove them (without deprecation), but I won't do it on this ticket.\n \n+\n+---\n+\n+At some point, I wondered whether it makes sense to introduce a special method that is guaranteed to print a string representation of \"small\" objects such as integers (this could be done with \"get()\"), but is in some interfaces a little faster than get() (such as \"eval()\").\n+\n+However, I decided against it, because it turns out that this method would only matter for the default `__cmp__` method, thus, one should simply override that when needed.\n``````\n",
    "created_at": "2017-03-06T16:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335927",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,11 +14,6 @@
   ```
   self._equality_symbol().format(var1, var2)
   ```
-- It is not always the case that `self.eval(var)` returns a non-empty string. However, in some places in `sage.interfaces`, it is expected that it returns a string representation, provided that `var` corresponds to an integer or a boolean. However, this assumption does NOT hold for Polymake!
-
-  `__Suggestion__`
-
-  Introduce a method `self._get_primitive` that defaults to `self.eval` but can be overridden for interfaces in which an explicit print statement is needed to get the string representation of an integer.
 - The pexpect interfaces and the interface elements inherit from `Parent` resp. from `Element`. But they override `__repr__`, which is bad.
 
   `__Suggestion__`
@@ -30,3 +25,9 @@
 
   I think one could remove them (without deprecation), but I won't do it on this ticket.
 
+
+---
+
+At some point, I wondered whether it makes sense to introduce a special method that is guaranteed to print a string representation of "small" objects such as integers (this could be done with "get()"), but is in some interfaces a little faster than get() (such as "eval()").
+
+However, I decided against it, because it turns out that this method would only matter for the default `__cmp__` method, thus, one should simply override that when needed.
``````




---

archive/issue_events_296535.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-06T16:07:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296535"
}
```



---

archive/issue_events_296536.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-06T16:07:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296536"
}
```



---

archive/issue_comments_335928.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,33 +1,8 @@\n While working on #22452, I found a couple of issues that might be dealt with in a separate ticket.\n \n-- Currently, it is assumed that equality test is done by evaluating the line\n-\n-  ```\n-  \"%s %s %s\"%(var1, self._equality_symbol(), var2)\n-  ```\n-  where `self` is a pexpect interface. However, there is software doing comparison by a prefix rather than an infix operator.\n-\n-  `__Suggestion__`\n-\n-  Let `_equality_symbol` be a format string, so that comparison will in future be done by evaluating\n-\n-  ```\n-  self._equality_symbol().format(var1, var2)\n-  ```\n - The pexpect interfaces and the interface elements inherit from `Parent` resp. from `Element`. But they override `__repr__`, which is bad.\n \n   `__Suggestion__`\n \n   Change `__repr__` into single underscore methods in all interfaces.\n-- The methods `_pre_interact` and `_post_interact` are defined in sage.interfaces.interface and are overridden in sage.interfaces.gap. There are also method `call` and `hasattr` defined in sage.interfaces.interface. However it seems that none of the four is used anywhere.\n \n-  `__Suggestion__`\n-\n-  I think one could remove them (without deprecation), but I won't do it on this ticket.\n-\n-\n----\n-\n-At some point, I wondered whether it makes sense to introduce a special method that is guaranteed to print a string representation of \"small\" objects such as integers (this could be done with \"get()\"), but is in some interfaces a little faster than get() (such as \"eval()\").\n-\n-However, I decided against it, because it turns out that this method would only matter for the default `__cmp__` method, thus, one should simply override that when needed.\n``````\n",
    "created_at": "2017-03-06T16:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335928",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,33 +1,8 @@
 While working on #22452, I found a couple of issues that might be dealt with in a separate ticket.
 
-- Currently, it is assumed that equality test is done by evaluating the line
-
-  ```
-  "%s %s %s"%(var1, self._equality_symbol(), var2)
-  ```
-  where `self` is a pexpect interface. However, there is software doing comparison by a prefix rather than an infix operator.
-
-  `__Suggestion__`
-
-  Let `_equality_symbol` be a format string, so that comparison will in future be done by evaluating
-
-  ```
-  self._equality_symbol().format(var1, var2)
-  ```
 - The pexpect interfaces and the interface elements inherit from `Parent` resp. from `Element`. But they override `__repr__`, which is bad.
 
   `__Suggestion__`
 
   Change `__repr__` into single underscore methods in all interfaces.
-- The methods `_pre_interact` and `_post_interact` are defined in sage.interfaces.interface and are overridden in sage.interfaces.gap. There are also method `call` and `hasattr` defined in sage.interfaces.interface. However it seems that none of the four is used anywhere.
 
-  `__Suggestion__`
-
-  I think one could remove them (without deprecation), but I won't do it on this ticket.
-
-
----
-
-At some point, I wondered whether it makes sense to introduce a special method that is guaranteed to print a string representation of "small" objects such as integers (this could be done with "get()"), but is in some interfaces a little faster than get() (such as "eval()").
-
-However, I decided against it, because it turns out that this method would only matter for the default `__cmp__` method, thus, one should simply override that when needed.
``````




---

archive/issue_comments_335929.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">Comment 68</div>\n\nI think the ticket description now clearly states what this ticket is doing.",
    "created_at": "2017-03-06T16:18:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335929",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:68" align="right">Comment 68</div>

I think the ticket description now clearly states what this ticket is doing.



---

archive/issue_comments_335930.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,9 @@\n While working on #22452, I found a couple of issues that might be dealt with in a separate ticket.\n \n-- The pexpect interfaces and the interface elements inherit from `Parent` resp. from `Element`. But they override `__repr__`, which is bad.\n+- The pexpect interfaces and the interface elements inherit from `Parent` resp. from `Element`. But they override `__repr__`, which is bad. So, I change `__repr__` into single underscore methods in all interfaces.\n \n-  `__Suggestion__`\n+- The default implementation of `_true_symbol` and some others rely on the assumption the `self.eval(...)` returns a string representation when applied to an integer or bool. But this assumption is violated for Polymake. However, `self.get(...)` *is* supposed to return a string representation for everything. I am stating these specifications in the doc and replace `eval` with `get` where needed.\n \n-  Change `__repr__` into single underscore methods in all interfaces.\n+- For interface elements, I replace `self.parent()` by `self._check_valid()` in a couple of places, since that returns the parent after testing that it is still valid.\n \n+- In the string representation of an interface element of a crashed interface, I show the crash message, so that it becomes a bit clearer what has happened.\n``````\n",
    "created_at": "2017-03-06T16:18:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335930",
    "user": "https://github.com/simon-king-jena"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,9 @@
 While working on #22452, I found a couple of issues that might be dealt with in a separate ticket.
 
-- The pexpect interfaces and the interface elements inherit from `Parent` resp. from `Element`. But they override `__repr__`, which is bad.
+- The pexpect interfaces and the interface elements inherit from `Parent` resp. from `Element`. But they override `__repr__`, which is bad. So, I change `__repr__` into single underscore methods in all interfaces.
 
-  `__Suggestion__`
+- The default implementation of `_true_symbol` and some others rely on the assumption the `self.eval(...)` returns a string representation when applied to an integer or bool. But this assumption is violated for Polymake. However, `self.get(...)` *is* supposed to return a string representation for everything. I am stating these specifications in the doc and replace `eval` with `get` where needed.
 
-  Change `__repr__` into single underscore methods in all interfaces.
+- For interface elements, I replace `self.parent()` by `self._check_valid()` in a couple of places, since that returns the parent after testing that it is still valid.
 
+- In the string representation of an interface element of a crashed interface, I show the crash message, so that it becomes a bit clearer what has happened.
``````




---

archive/issue_comments_335931.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">Comment 69</div>\n\nIs the fricas interface not touched because it is \"experimental\"?  I just checked that there is a `__repr__` method in the `FriCAS` class, with two underscores.  Should that be changed?",
    "created_at": "2017-03-14T09:39:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335931",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:69" align="right">Comment 69</div>

Is the fricas interface not touched because it is "experimental"?  I just checked that there is a `__repr__` method in the `FriCAS` class, with two underscores.  Should that be changed?



---

archive/issue_comments_335932.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">Comment 70</div>\n\nReplying to [@mantepse](#comment%3A69):\n> Is the fricas interface not touched because it is \"experimental\"? \n\nNo, I simply missed that one.\n\n> I just checked that there is a `__repr__` method in the `FriCAS` class, with two underscores.  Should that be changed?\n\nYes.",
    "created_at": "2017-03-14T10:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335932",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:70" align="right">Comment 70</div>

Replying to [@mantepse](#comment%3A69):
> Is the fricas interface not touched because it is "experimental"? 

No, I simply missed that one.

> I just checked that there is a `__repr__` method in the `FriCAS` class, with two underscores.  Should that be changed?

Yes.



---

archive/issue_comments_335933.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">Comment 71</div>\n\nOops! I just realise that there are many double underscore `__repr__` that I forgot to change.\n\nAnyway, the interfaces themselves inherit from parent, the objects represented in the interface inherit from element. And that means it should be single underscore, as a rule of thumb.",
    "created_at": "2017-03-14T10:22:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335933",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:71" align="right">Comment 71</div>

Oops! I just realise that there are many double underscore `__repr__` that I forgot to change.

Anyway, the interfaces themselves inherit from parent, the objects represented in the interface inherit from element. And that means it should be single underscore, as a rule of thumb.



---

archive/issue_events_296537.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-14T10:22:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296537"
}
```



---

archive/issue_events_296538.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-14T10:22:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296538"
}
```



---

archive/issue_comments_335934.json:
```json
{
    "body": "Work Issues: **remove *all* __repr__**",
    "created_at": "2017-03-14T10:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335934",
    "user": "https://github.com/simon-king-jena"
}
```

Work Issues: **remove *all* __repr__**



---

archive/issue_comments_335935.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">Comment 73</div>\n\nSince you're changing the branch anyway, could you please either remove the whitespace changes or move them to a separate commit? I found it quite annoying when reviewing to see that many whitespace changes.",
    "created_at": "2017-03-14T10:33:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335935",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:73" align="right">Comment 73</div>

Since you're changing the branch anyway, could you please either remove the whitespace changes or move them to a separate commit? I found it quite annoying when reviewing to see that many whitespace changes.



---

archive/issue_comments_335936.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">Comment 74</div>\n\nReplying to [@jdemeyer](#comment%3A73):\n> Since you're changing the branch anyway, could you please either remove the whitespace changes or move them to a separate commit? I found it quite annoying when reviewing to see that many whitespace changes.\n\nI didn't intend to do whitespace changes, however my editor (geany) is configured to change tabs into four blanks and to remove trailing whitespace when saving a file.\n\nHow should I proceed? Shall I rewrite history, force-push and then rebase #22452 on top of it? Or shall I add a commit that re-introduces the whitespace (probably not)?",
    "created_at": "2017-03-14T11:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335936",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:74" align="right">Comment 74</div>

Replying to [@jdemeyer](#comment%3A73):
> Since you're changing the branch anyway, could you please either remove the whitespace changes or move them to a separate commit? I found it quite annoying when reviewing to see that many whitespace changes.

I didn't intend to do whitespace changes, however my editor (geany) is configured to change tabs into four blanks and to remove trailing whitespace when saving a file.

How should I proceed? Shall I rewrite history, force-push and then rebase #22452 on top of it? Or shall I add a commit that re-introduces the whitespace (probably not)?



---

archive/issue_comments_335937.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">Comment 75</div>\n\nReplying to [@simon-king-jena](#comment%3A74):\n> Replying to [@jdemeyer](#comment%3A73):\n> > Since you're changing the branch anyway, could you please either remove the whitespace changes or move them to a separate commit? I found it quite annoying when reviewing to see that many whitespace changes.\n\n> \n> I didn't intend to do whitespace changes, however my editor (geany) is configured to change tabs into four blanks and to remove trailing whitespace when saving a file.\n\nSo the editor is the culprit?\n\n> How should I proceed? Shall I rewrite history, force-push and then rebase #22452 on top of it? Or shall I add a commit that re-introduces the whitespace (probably not)?\n\nForce push would even be more trouble now. But I agree that for diff readers, seeing all these tiny modifications is annoying. For the future I would suggest: just start with a first commit that deal with whitespaces and nothing else. Then add non trivial commits on top of that.",
    "created_at": "2017-03-14T12:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335937",
    "user": "https://github.com/videlec"
}
```

<div id="comment:75" align="right">Comment 75</div>

Replying to [@simon-king-jena](#comment%3A74):
> Replying to [@jdemeyer](#comment%3A73):
> > Since you're changing the branch anyway, could you please either remove the whitespace changes or move them to a separate commit? I found it quite annoying when reviewing to see that many whitespace changes.

> 
> I didn't intend to do whitespace changes, however my editor (geany) is configured to change tabs into four blanks and to remove trailing whitespace when saving a file.

So the editor is the culprit?

> How should I proceed? Shall I rewrite history, force-push and then rebase #22452 on top of it? Or shall I add a commit that re-introduces the whitespace (probably not)?

Force push would even be more trouble now. But I agree that for diff readers, seeing all these tiny modifications is annoying. For the future I would suggest: just start with a first commit that deal with whitespaces and nothing else. Then add non trivial commits on top of that.



---

archive/issue_comments_335938.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">Comment 76</div>\n\nReplying to [@videlec](#comment%3A75):\n> > I didn't intend to do whitespace changes, however my editor (geany) is configured to change tabs into four blanks and to remove trailing whitespace when saving a file.\n\n> \n> So the editor is the culprit?\n\nI said \"I didn't *intend* to...\". So, the fact that I have this option by default is a good when creating a new file, but bad when editing an existing file that doesn't conform to the standards that sage has regarding trailing whitespace.\n\n> Force push would even be more trouble now. But I agree that for diff readers, seeing all these tiny modifications is annoying. For the future I would suggest: just start with a first commit that deal with whitespaces and nothing else. Then add non trivial commits on top of that.\n\nI am not talking about future. What to do *now*?",
    "created_at": "2017-03-14T12:24:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335938",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:76" align="right">Comment 76</div>

Replying to [@videlec](#comment%3A75):
> > I didn't intend to do whitespace changes, however my editor (geany) is configured to change tabs into four blanks and to remove trailing whitespace when saving a file.

> 
> So the editor is the culprit?

I said "I didn't *intend* to...". So, the fact that I have this option by default is a good when creating a new file, but bad when editing an existing file that doesn't conform to the standards that sage has regarding trailing whitespace.

> Force push would even be more trouble now. But I agree that for diff readers, seeing all these tiny modifications is annoying. For the future I would suggest: just start with a first commit that deal with whitespaces and nothing else. Then add non trivial commits on top of that.

I am not talking about future. What to do *now*?



---

archive/issue_comments_335939.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">Comment 77</div>\n\nReplying to [@videlec](#comment%3A75):\n> Force push would even be more trouble now.\n\nWhy?\n\nYou should not force-push here and then base #22452. Instead, you should force-push #22452, checkout the commit corresponding to this ticket and force-push that.\n\nThat's very easy to do.",
    "created_at": "2017-03-14T12:27:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335939",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:77" align="right">Comment 77</div>

Replying to [@videlec](#comment%3A75):
> Force push would even be more trouble now.

Why?

You should not force-push here and then base #22452. Instead, you should force-push #22452, checkout the commit corresponding to this ticket and force-push that.

That's very easy to do.



---

archive/issue_comments_335940.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">Comment 78</div>\n\nReplying to [@jdemeyer](#comment%3A77):\n> Replying to [@videlec](#comment%3A75):\n> > Force push would even be more trouble now.\n\n> \n> Why?\n> \n> You should not force-push here and then base #22452. Instead, you should force-push #22452, checkout the commit corresponding to this ticket and force-push that.\n> \n> That's very easy to do.\n\nI don't understand that at all. This ticket is a dependency for #22452. Do you suggest to revert the dependencies?",
    "created_at": "2017-03-14T12:29:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335940",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:78" align="right">Comment 78</div>

Replying to [@jdemeyer](#comment%3A77):
> Replying to [@videlec](#comment%3A75):
> > Force push would even be more trouble now.

> 
> Why?
> 
> You should not force-push here and then base #22452. Instead, you should force-push #22452, checkout the commit corresponding to this ticket and force-push that.
> 
> That's very easy to do.

I don't understand that at all. This ticket is a dependency for #22452. Do you suggest to revert the dependencies?



---

archive/issue_comments_335941.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">Comment 79</div>\n\nReplying to [@simon-king-jena](#comment%3A78):\n> This ticket is a dependency for #22452. Do you suggest to revert the dependencies?\n\nNo. If I understand things correctly, #22452 contains the commit from this ticket (#22501). So you could rebase #22452 but keeping a separation between the commits which really belong to #22501 and the ones which really belong to #22452 (so not squashing everything together).\n\nThen you can force-push #22452. At this point, the branch from #22501 will no longer be a sub-branch of #22452. But that can be fixed by resetting the branch on #22501 to a commit which was pushed on #22452.\n\nI can easily do this myself if you want.",
    "created_at": "2017-03-14T12:49:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335941",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:79" align="right">Comment 79</div>

Replying to [@simon-king-jena](#comment%3A78):
> This ticket is a dependency for #22452. Do you suggest to revert the dependencies?

No. If I understand things correctly, #22452 contains the commit from this ticket (#22501). So you could rebase #22452 but keeping a separation between the commits which really belong to #22501 and the ones which really belong to #22452 (so not squashing everything together).

Then you can force-push #22452. At this point, the branch from #22501 will no longer be a sub-branch of #22452. But that can be fixed by resetting the branch on #22501 to a commit which was pushed on #22452.

I can easily do this myself if you want.



---

archive/issue_comments_335942.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">Comment 80</div>\n\nReplying to [@jdemeyer](#comment%3A79):\n> Replying to [@simon-king-jena](#comment%3A78):\n> > This ticket is a dependency for #22452. Do you suggest to revert the dependencies?\n\n> \n> No. If I understand things correctly, #22452 contains the commit from this ticket (#22501).\n\nYes, it does.\n\n> So you could rebase #22452 but keeping a separation between the commits which really belong to #22501 and the ones which really belong to #22452 (so not squashing everything together).\n\nThat's why I suggested to force a change here and then rebase the commits that really belong to #22452 on top of the new forced commit from here (#22501).\n\n> Then you can force-push #22452. At this point, the branch from #22501 will no longer be a sub-branch of #22452. But that can be fixed by resetting the branch on #22501 to a commit which was pushed on #22452.\n\nIt seems to me that the result is equivalent to what I suggest.\n\nSo, my plan now is:\n\n- Create a new single commit for this ticket (#22501) that removes trailing whitespace only in the lines that have also been edited for other reasons.\n- Force-push the new commit here.\n- Rebase the commits from #22452 that really belong to #22452 on top of the new commit. Push (of course using force) the result there.",
    "created_at": "2017-03-14T13:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335942",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:80" align="right">Comment 80</div>

Replying to [@jdemeyer](#comment%3A79):
> Replying to [@simon-king-jena](#comment%3A78):
> > This ticket is a dependency for #22452. Do you suggest to revert the dependencies?

> 
> No. If I understand things correctly, #22452 contains the commit from this ticket (#22501).

Yes, it does.

> So you could rebase #22452 but keeping a separation between the commits which really belong to #22501 and the ones which really belong to #22452 (so not squashing everything together).

That's why I suggested to force a change here and then rebase the commits that really belong to #22452 on top of the new forced commit from here (#22501).

> Then you can force-push #22452. At this point, the branch from #22501 will no longer be a sub-branch of #22452. But that can be fixed by resetting the branch on #22501 to a commit which was pushed on #22452.

It seems to me that the result is equivalent to what I suggest.

So, my plan now is:

- Create a new single commit for this ticket (#22501) that removes trailing whitespace only in the lines that have also been edited for other reasons.
- Force-push the new commit here.
- Rebase the commits from #22452 that really belong to #22452 on top of the new commit. Push (of course using force) the result there.



---

archive/issue_comments_335943.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">Comment 81</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5082c96e79a15b34779a0c9b0b43d652cdade31c\">5082c96</a></td><td><code>Use single underscore `_repr_` in interfaces, add more documentation concerning eval and get</code></td></tr></table>\n",
    "created_at": "2017-03-14T13:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335943",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:81" align="right">Comment 81</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5082c96e79a15b34779a0c9b0b43d652cdade31c">5082c96</a></td><td><code>Use single underscore `_repr_` in interfaces, add more documentation concerning eval and get</code></td></tr></table>




---

archive/issue_comments_335944.json:
```json
{
    "body": "Changed commit from **[87ad586](https://github.com/sagemath/sagetrac-mirror/commit/87ad58632e42a3d0c75f7871391012fd8b328f35)** to **[5082c96](https://github.com/sagemath/sagetrac-mirror/commit/5082c96e79a15b34779a0c9b0b43d652cdade31c)**",
    "created_at": "2017-03-14T13:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335944",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[87ad586](https://github.com/sagemath/sagetrac-mirror/commit/87ad58632e42a3d0c75f7871391012fd8b328f35)** to **[5082c96](https://github.com/sagemath/sagetrac-mirror/commit/5082c96e79a15b34779a0c9b0b43d652cdade31c)**



---

archive/issue_events_296539.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-14T14:11:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296539"
}
```



---

archive/issue_events_296540.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-14T14:11:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296540"
}
```



---

archive/issue_comments_335945.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">Comment 82</div>\n\nI guess both tickets are changed so that reviewing can be resumed (just make sure that you check out the new force-changed branches).",
    "created_at": "2017-03-14T14:11:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335945",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:82" align="right">Comment 82</div>

I guess both tickets are changed so that reviewing can be resumed (just make sure that you check out the new force-changed branches).



---

archive/issue_comments_335946.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">Comment 83</div>\n\nWhy `self._obj._check_valid()` is done in `_repr_`? Could it be moved to `__repr__`? That way we would have the clearer `M = self.parent()` in the multiple `_repr_` methods.",
    "created_at": "2017-03-15T09:59:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335946",
    "user": "https://github.com/videlec"
}
```

<div id="comment:83" align="right">Comment 83</div>

Why `self._obj._check_valid()` is done in `_repr_`? Could it be moved to `__repr__`? That way we would have the clearer `M = self.parent()` in the multiple `_repr_` methods.



---

archive/issue_comments_335947.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">Comment 84</div>\n\nReplying to [@videlec](#comment%3A83):\n> Why `self._obj._check_valid()` is done in `_repr_`? Could it be moved to `__repr__`? That way we would have the clearer `M = self.parent()` in the multiple `_repr_` methods.\n\nIn fact, `_check_valid` *is* done in the default (double underscore) `__repr__` - see `sage.interfaces.interface.InterfaceElement`. So, you are right, it should be safe to just do \"self.parent()\". Will change it in a minute.",
    "created_at": "2017-03-15T10:06:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335947",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:84" align="right">Comment 84</div>

Replying to [@videlec](#comment%3A83):
> Why `self._obj._check_valid()` is done in `_repr_`? Could it be moved to `__repr__`? That way we would have the clearer `M = self.parent()` in the multiple `_repr_` methods.

In fact, `_check_valid` *is* done in the default (double underscore) `__repr__` - see `sage.interfaces.interface.InterfaceElement`. So, you are right, it should be safe to just do "self.parent()". Will change it in a minute.



---

archive/issue_comments_335948.json:
```json
{
    "body": "Changed commit from **[5082c96](https://github.com/sagemath/sagetrac-mirror/commit/5082c96e79a15b34779a0c9b0b43d652cdade31c)** to **[52226e2](https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5)**",
    "created_at": "2017-03-15T10:10:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335948",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5082c96](https://github.com/sagemath/sagetrac-mirror/commit/5082c96e79a15b34779a0c9b0b43d652cdade31c)** to **[52226e2](https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5)**



---

archive/issue_comments_335949.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">Comment 85</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5\">52226e2</a></td><td><code>Do not _check_valid in `_repr_`, since it is done in __repr__</code></td></tr></table>\n",
    "created_at": "2017-03-15T10:10:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335949",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:85" align="right">Comment 85</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5">52226e2</a></td><td><code>Do not _check_valid in `_repr_`, since it is done in __repr__</code></td></tr></table>




---

archive/issue_comments_335950.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">Comment 86</div>\n\nDone.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5\">52226e2</a></td><td><code>Do not _check_valid in `_repr_`, since it is done in __repr__</code></td></tr></table>\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5\">52226e2</a></td><td><code>Do not _check_valid in `_repr_`, since it is done in __repr__</code></td></tr></table>\n",
    "created_at": "2017-03-15T10:10:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335950",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:86" align="right">Comment 86</div>

Done.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5">52226e2</a></td><td><code>Do not _check_valid in `_repr_`, since it is done in __repr__</code></td></tr></table>

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5">52226e2</a></td><td><code>Do not _check_valid in `_repr_`, since it is done in __repr__</code></td></tr></table>




---

archive/issue_comments_335951.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">Comment 87</div>\n\nPS: I will not put this additional commit into #22452, as it isn't relevant there, and I was told to avoid useless merges.",
    "created_at": "2017-03-15T10:12:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335951",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:87" align="right">Comment 87</div>

PS: I will not put this additional commit into #22452, as it isn't relevant there, and I was told to avoid useless merges.



---

archive/issue_comments_335952.json:
```json
{
    "body": "Changed work issues from **remove *all* __repr__** to none",
    "created_at": "2017-03-15T11:34:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335952",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **remove *all* __repr__** to none



---

archive/issue_comments_335953.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">Comment 89</div>\n\nOddly, the patchbot reports failures. But as much as I can see they are unrelated with this ticket.",
    "created_at": "2017-03-16T09:09:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335953",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:89" align="right">Comment 89</div>

Oddly, the patchbot reports failures. But as much as I can see they are unrelated with this ticket.



---

archive/issue_comments_335954.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer, Vincent Delecroix**",
    "created_at": "2017-03-16T09:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335954",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Jeroen Demeyer, Vincent Delecroix**



---

archive/issue_comments_335955.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">Comment 90</div>\n\nIndeed. It is weird.\n\nI am good with this ticket, if nobody have further comment I will set it to positive review.",
    "created_at": "2017-03-16T09:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335955",
    "user": "https://github.com/videlec"
}
```

<div id="comment:90" align="right">Comment 90</div>

Indeed. It is weird.

I am good with this ticket, if nobody have further comment I will set it to positive review.



---

archive/issue_comments_335956.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">Comment 91</div>\n\nI am currently recompiling, so I can run the tests of the fricas interface (which still has \"experimental\" status, unfortunately).",
    "created_at": "2017-03-16T10:03:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335956",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:91" align="right">Comment 91</div>

I am currently recompiling, so I can run the tests of the fricas interface (which still has "experimental" status, unfortunately).



---

archive/issue_comments_335957.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">Comment 92</div>\n\nOK, fricas tests are passing.",
    "created_at": "2017-03-16T13:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335957",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:92" align="right">Comment 92</div>

OK, fricas tests are passing.



---

archive/issue_comments_335958.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">Comment 93</div>\n\nLet it be!",
    "created_at": "2017-03-18T09:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335958",
    "user": "https://github.com/videlec"
}
```

<div id="comment:93" align="right">Comment 93</div>

Let it be!



---

archive/issue_events_296541.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-18T09:53:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296541"
}
```



---

archive/issue_events_296542.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-18T09:53:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296542"
}
```



---

archive/issue_comments_335959.json:
```json
{
    "body": "Changed branch from **[u/SimonKing/make_it_easier_to_customize_pexpect_interfaces](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/make_it_easier_to_customize_pexpect_interfaces)** to **[52226e2](https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5)**",
    "created_at": "2017-03-27T20:42:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22501#issuecomment-335959",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/SimonKing/make_it_easier_to_customize_pexpect_interfaces](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/make_it_easier_to_customize_pexpect_interfaces)** to **[52226e2](https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5)**



---

archive/issue_events_296543.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-27T20:42:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296543"
}
```



---

archive/issue_events_296544.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "87a04cd6cd4417b4e0eb6b1ed9ed65615563bcd6",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-03-27T20:42:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22501",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22501#event-296544"
}
```
