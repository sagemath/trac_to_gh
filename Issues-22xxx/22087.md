# Issue 22087: New function richcmp_item

archive/issues_021850.json:
```json
{
    "body": "**Background**:\n\nThe existing function `richcmp_not_equal` can be used to compare sequences (in the broad sense, this includes polynomials and vectors) item by item. Essentially, for a sequence `A` and `B` one does:\n\n```\nfor i in range(N):\n    if not A[i] == B[i]:\n        return richcmp_not_equal(A[i], B[i], op)\n```\nThis is precisely the pseudocode that Python uses when comparing tuples and lists.\n\nHowever, this usage of `richcmp_not_equal` makes too many assumptions. For example, it implicitly assumes that `x != y` is equivalent to `not x == y`.\n\n**Solution**:\n\nInstead, we propose a new function `richcmp_item` to solve the same problem in a different way. The new code becomes:\n\n```\nfor i in range(N):\n    res = richcmp_item(A[i], B[i], op)\n    if res is not NotImplemented:\n        return res\n```\n\nWe implement `richcmp_item` such that the semantics are compatible with set comparisons. For non-empty sets A and B, we define A op B (where \"op\" is a comparison operator) as a op b for all a in A and b in B. Comparisons for elements of `RIF` are a special case of this. Now, if LA and LB are lists of sets [A<sub>0</sub>, A<sub>1</sub>, ...] and [B<sub>0</sub>, B<sub>1</sub>, ...] we want:\n\nLA op LB <=> [a<sub>0</sub>, a<sub>1</sub>, ...] op [b<sub>0</sub>, b<sub>1</sub>, ...] for all a<sub>i</sub> in A<sub>i</sub> and b<sub>i</sub> in B<sub>i</sub>.\n\n**Use case**:\n\nThis way, we fix comparisons of polynomials to address [ticket:22076#comment:5]. Ideally, this new function `richcmp_item` would be used for all comparisons of sequences.\n\nCC:  @fchapoton @mezzarobba\n\nBranch/Commit: [bca2e329a878e099459517894fd854b60e131f9b](https://github.com/sagemath/sagetrac-mirror/commit/bca2e329a878e099459517894fd854b60e131f9b)\n\nReviewer: Marc Mezzarobba, Vincent Delecroix\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22087\n\n",
    "closed_at": "2018-01-18T18:09:34Z",
    "created_at": "2016-12-21T09:29:11Z",
    "labels": [
        "component: basic arithmetic"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "New function richcmp_item",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22087",
    "user": "https://github.com/jdemeyer"
}
```
**Background**:

The existing function `richcmp_not_equal` can be used to compare sequences (in the broad sense, this includes polynomials and vectors) item by item. Essentially, for a sequence `A` and `B` one does:

```
for i in range(N):
    if not A[i] == B[i]:
        return richcmp_not_equal(A[i], B[i], op)
```
This is precisely the pseudocode that Python uses when comparing tuples and lists.

However, this usage of `richcmp_not_equal` makes too many assumptions. For example, it implicitly assumes that `x != y` is equivalent to `not x == y`.

**Solution**:

Instead, we propose a new function `richcmp_item` to solve the same problem in a different way. The new code becomes:

```
for i in range(N):
    res = richcmp_item(A[i], B[i], op)
    if res is not NotImplemented:
        return res
```

We implement `richcmp_item` such that the semantics are compatible with set comparisons. For non-empty sets A and B, we define A op B (where "op" is a comparison operator) as a op b for all a in A and b in B. Comparisons for elements of `RIF` are a special case of this. Now, if LA and LB are lists of sets [A<sub>0</sub>, A<sub>1</sub>, ...] and [B<sub>0</sub>, B<sub>1</sub>, ...] we want:

LA op LB <=> [a<sub>0</sub>, a<sub>1</sub>, ...] op [b<sub>0</sub>, b<sub>1</sub>, ...] for all a<sub>i</sub> in A<sub>i</sub> and b<sub>i</sub> in B<sub>i</sub>.

**Use case**:

This way, we fix comparisons of polynomials to address [ticket:22076#comment:5]. Ideally, this new function `richcmp_item` would be used for all comparisons of sequences.

CC:  @fchapoton @mezzarobba

Branch/Commit: [bca2e329a878e099459517894fd854b60e131f9b](https://github.com/sagemath/sagetrac-mirror/commit/bca2e329a878e099459517894fd854b60e131f9b)

Reviewer: Marc Mezzarobba, Vincent Delecroix

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22087





---

archive/issue_comments_411522.json:
```json
{
    "body": "<a id='comment:2'></a>\nIt's hard to say what should be done instead. At least, the current code is consistent with what Python does when comparing tuples: comparisons between tuples `a` and `b` always start by comparing `a[0] == b[0]`.",
    "created_at": "2017-05-31T10:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411522",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
It's hard to say what should be done instead. At least, the current code is consistent with what Python does when comparing tuples: comparisons between tuples `a` and `b` always start by comparing `a[0] == b[0]`.



---

archive/issue_events_066090.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-31T11:12:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22087#event-66090"
}
```



---

archive/issue_comments_411523.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,19 @@\n-The usage of `richcmp_not_equal` makes too many assumptions. For example, it assumes that `x != y` is equivalent to `not x == y`. We should think of a better way to solve the problem that `richcmp_not_equal` solves.\n+The function `richcmp_not_equal` can be used to compare containers item by item. Essentially, for a container `a` and `b` one does:\n+\n+```\n+for i in range(N):\n+    if not a[i] == b[i]:\n+        return richcmp_not_equal(a[i], b[i], op)\n+```\n+This is precisely the pseudocode that Python uses when comparing tuples/lists.\n+\n+However, this usage of `richcmp_not_equal` makes too many assumptions. For example, it assumes that `x != y` is equivalent to `not x == y`.\n+\n+Instead, we propose a new function `richcmp_item` to solve the same problem in a different way. The new code becomes:\n+\n+```\n+for i in range(N):\n+    res = richcmp_item(a[i], b[i], op)\n+    if res is not NotImplemented:\n+        return res\n+```\n``````\n",
    "created_at": "2017-05-31T11:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411523",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,19 @@
-The usage of `richcmp_not_equal` makes too many assumptions. For example, it assumes that `x != y` is equivalent to `not x == y`. We should think of a better way to solve the problem that `richcmp_not_equal` solves.
+The function `richcmp_not_equal` can be used to compare containers item by item. Essentially, for a container `a` and `b` one does:
+
+```
+for i in range(N):
+    if not a[i] == b[i]:
+        return richcmp_not_equal(a[i], b[i], op)
+```
+This is precisely the pseudocode that Python uses when comparing tuples/lists.
+
+However, this usage of `richcmp_not_equal` makes too many assumptions. For example, it assumes that `x != y` is equivalent to `not x == y`.
+
+Instead, we propose a new function `richcmp_item` to solve the same problem in a different way. The new code becomes:
+
+```
+for i in range(N):
+    res = richcmp_item(a[i], b[i], op)
+    if res is not NotImplemented:
+        return res
+```
``````




---

archive/issue_comments_411524.json:
```json
{
    "body": "Author: Jeroen Demeyer",
    "created_at": "2017-05-31T11:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411524",
    "user": "https://github.com/jdemeyer"
}
```

Author: Jeroen Demeyer



---

archive/issue_comments_411525.json:
```json
{
    "body": "Dependencies: #23102",
    "created_at": "2017-05-31T11:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411525",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: #23102



---

archive/issue_events_066091.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "rename": {
        "from": "Rethink richcmp_not_equal",
        "to": "New function richcmp_item"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22087#event-66091"
}
```



---

archive/issue_comments_411526.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,3 +17,5 @@\n     if res is not NotImplemented:\n         return res\n ```\n+\n+And we use this to fix comparisons of polynomials to fix [ticket:22076#comment:5].\n``````\n",
    "created_at": "2017-05-31T11:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411526",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,3 +17,5 @@
     if res is not NotImplemented:
         return res
 ```
+
+And we use this to fix comparisons of polynomials to fix [ticket:22076#comment:5].
``````




---

archive/issue_comments_411527.json:
```json
{
    "body": "Branch: [u/jdemeyer/new_function_richcmp_item](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/new_function_richcmp_item)",
    "created_at": "2017-05-31T15:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411527",
    "user": "https://github.com/jdemeyer"
}
```

Branch: [u/jdemeyer/new_function_richcmp_item](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/new_function_richcmp_item)



---

archive/issue_comments_411528.json:
```json
{
    "body": "Commit: [cf6189a93a48553f968d3eaed1966835dd65530f](https://github.com/sagemath/sagetrac-mirror/commit/cf6189a93a48553f968d3eaed1966835dd65530f)",
    "created_at": "2017-06-01T09:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Commit: [cf6189a93a48553f968d3eaed1966835dd65530f](https://github.com/sagemath/sagetrac-mirror/commit/cf6189a93a48553f968d3eaed1966835dd65530f)



---

archive/issue_comments_411529.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[f7cda1c](https://github.com/sagemath/sagetrac-mirror/commit/f7cda1ca4afcb61b9fd1e70bc0de60127839fa33)|`New function richcmp_item`|\n|[cf6189a](https://github.com/sagemath/sagetrac-mirror/commit/cf6189a93a48553f968d3eaed1966835dd65530f)|`Implement comparison for polynomials using richcmp_item`|",
    "created_at": "2017-06-01T09:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411529",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[f7cda1c](https://github.com/sagemath/sagetrac-mirror/commit/f7cda1ca4afcb61b9fd1e70bc0de60127839fa33)|`New function richcmp_item`|
|[cf6189a](https://github.com/sagemath/sagetrac-mirror/commit/cf6189a93a48553f968d3eaed1966835dd65530f)|`Implement comparison for polynomials using richcmp_item`|



---

archive/issue_comments_411530.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-01T09:29:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411530",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_411531.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,9 +1,9 @@\n-The function `richcmp_not_equal` can be used to compare containers item by item. Essentially, for a container `a` and `b` one does:\n+The function `richcmp_not_equal` can be used to compare containers item by item. Essentially, for a sequence `A` and `B` one does:\n \n ```\n for i in range(N):\n-    if not a[i] == b[i]:\n-        return richcmp_not_equal(a[i], b[i], op)\n+    if not A[i] == B[i]:\n+        return richcmp_not_equal(A[i], B[i], op)\n ```\n This is precisely the pseudocode that Python uses when comparing tuples/lists.\n \n@@ -13,9 +13,9 @@\n \n ```\n for i in range(N):\n-    res = richcmp_item(a[i], b[i], op)\n+    res = richcmp_item(A[i], B[i], op)\n     if res is not NotImplemented:\n         return res\n ```\n \n-And we use this to fix comparisons of polynomials to fix [ticket:22076#comment:5].\n+We implement `richcmp_item` such that the semantics are compatible with interval comparisons. This way, we fix comparisons of polynomials to address [ticket:22076#comment:5].\n``````\n",
    "created_at": "2017-06-01T12:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411531",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,9 +1,9 @@
-The function `richcmp_not_equal` can be used to compare containers item by item. Essentially, for a container `a` and `b` one does:
+The function `richcmp_not_equal` can be used to compare containers item by item. Essentially, for a sequence `A` and `B` one does:
 
 ```
 for i in range(N):
-    if not a[i] == b[i]:
-        return richcmp_not_equal(a[i], b[i], op)
+    if not A[i] == B[i]:
+        return richcmp_not_equal(A[i], B[i], op)
 ```
 This is precisely the pseudocode that Python uses when comparing tuples/lists.
 
@@ -13,9 +13,9 @@
 
 ```
 for i in range(N):
-    res = richcmp_item(a[i], b[i], op)
+    res = richcmp_item(A[i], B[i], op)
     if res is not NotImplemented:
         return res
 ```
 
-And we use this to fix comparisons of polynomials to fix [ticket:22076#comment:5].
+We implement `richcmp_item` such that the semantics are compatible with interval comparisons. This way, we fix comparisons of polynomials to address [ticket:22076#comment:5].
``````




---

archive/issue_comments_411532.json:
```json
{
    "body": "<a id='comment:9'></a>\nMy brain hurts a bit, but this looks reasonable to me. `:-)` Please feel free to set the ticket to positive review on my behalf if all tests pass.\n\nYou may have meant to write `(x {op} y)` in:\n\n```\nreturn res # (x {op} > x) --> True\n```\nAlso, the comment:\n\n```\n....: return rich_to_bool(op, 0) # Lists are equal\n```\nmay be misleading, because the lists actually don't have to be equal when the operator is not `==`.",
    "created_at": "2017-06-02T13:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411532",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:9'></a>
My brain hurts a bit, but this looks reasonable to me. `:-)` Please feel free to set the ticket to positive review on my behalf if all tests pass.

You may have meant to write `(x {op} y)` in:

```
return res # (x {op} > x) --> True
```
Also, the comment:

```
....: return rich_to_bool(op, 0) # Lists are equal
```
may be misleading, because the lists actually don't have to be equal when the operator is not `==`.



---

archive/issue_comments_411533.json:
```json
{
    "body": "Reviewer: Marc Mezzarobba",
    "created_at": "2017-06-02T13:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411533",
    "user": "https://github.com/mezzarobba"
}
```

Reviewer: Marc Mezzarobba



---

archive/issue_comments_411534.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [mmezzarobba](#comment%3A9):\n> My brain hurts a bit, but this looks reasonable to me. `:-)`\n\n\nIt's understandable. It took me a while to come up with these semantics, but I think they are correct.\n\nI'll fix the minor issues that you mentioned.",
    "created_at": "2017-06-02T14:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411534",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
Replying to [mmezzarobba](#comment%3A9):
> My brain hurts a bit, but this looks reasonable to me. `:-)`


It's understandable. It took me a while to come up with these semantics, but I think they are correct.

I'll fix the minor issues that you mentioned.



---

archive/issue_comments_411535.json:
```json
{
    "body": "Changing commit from \"[cf6189a93a48553f968d3eaed1966835dd65530f](https://github.com/sagemath/sagetrac-mirror/commit/cf6189a93a48553f968d3eaed1966835dd65530f)\" to \"[880174c0280358e728fa09dae42bdfefce505e95](https://github.com/sagemath/sagetrac-mirror/commit/880174c0280358e728fa09dae42bdfefce505e95)\"",
    "created_at": "2017-06-02T14:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[cf6189a93a48553f968d3eaed1966835dd65530f](https://github.com/sagemath/sagetrac-mirror/commit/cf6189a93a48553f968d3eaed1966835dd65530f)" to "[880174c0280358e728fa09dae42bdfefce505e95](https://github.com/sagemath/sagetrac-mirror/commit/880174c0280358e728fa09dae42bdfefce505e95)"



---

archive/issue_comments_411536.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------|\n|[880174c](https://github.com/sagemath/sagetrac-mirror/commit/880174c0280358e728fa09dae42bdfefce505e95)|`Minor details`|",
    "created_at": "2017-06-02T14:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411536",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |               |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------|
|[880174c](https://github.com/sagemath/sagetrac-mirror/commit/880174c0280358e728fa09dae42bdfefce505e95)|`Minor details`|



---

archive/issue_comments_411537.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|\n|[49b6f76](https://github.com/sagemath/sagetrac-mirror/commit/49b6f76c43231e4bf600b187b32fed6b625c6adb)|`Support __richcmp__ in Python classes`|\n|[d343d9d](https://github.com/sagemath/sagetrac-mirror/commit/d343d9d1f1d5c9b7e35f518a1f85604082e51ca0)|`Implement RealSet comparisons using __richcmp__`|\n|[3aac3cc](https://github.com/sagemath/sagetrac-mirror/commit/3aac3ccf0141d51e4c97ea852942b8c2196b9a13)|`Typo`|\n|[86e9fcf](https://github.com/sagemath/sagetrac-mirror/commit/86e9fcf87e6d8fea38a73edc3ea6830f6fc17657)|`Install slot wrappers for rich comparison methods`|\n|[4d1021b](https://github.com/sagemath/sagetrac-mirror/commit/4d1021b1e2ccd1e811549aeb1e451b9a08cc6251)|`Further fixes and tests for richcmp_method`|\n|[b61eb4c](https://github.com/sagemath/sagetrac-mirror/commit/b61eb4cc3d78bb93fecb8afa0fa69e85f4ec7c5a)|`New function richcmp_item`|\n|[63971a9](https://github.com/sagemath/sagetrac-mirror/commit/63971a9e28b456cd3f141bb020f58bc3dd50a556)|`Implement comparison for polynomials using richcmp_item`|",
    "created_at": "2017-06-18T09:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411537",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------|
|[49b6f76](https://github.com/sagemath/sagetrac-mirror/commit/49b6f76c43231e4bf600b187b32fed6b625c6adb)|`Support __richcmp__ in Python classes`|
|[d343d9d](https://github.com/sagemath/sagetrac-mirror/commit/d343d9d1f1d5c9b7e35f518a1f85604082e51ca0)|`Implement RealSet comparisons using __richcmp__`|
|[3aac3cc](https://github.com/sagemath/sagetrac-mirror/commit/3aac3ccf0141d51e4c97ea852942b8c2196b9a13)|`Typo`|
|[86e9fcf](https://github.com/sagemath/sagetrac-mirror/commit/86e9fcf87e6d8fea38a73edc3ea6830f6fc17657)|`Install slot wrappers for rich comparison methods`|
|[4d1021b](https://github.com/sagemath/sagetrac-mirror/commit/4d1021b1e2ccd1e811549aeb1e451b9a08cc6251)|`Further fixes and tests for richcmp_method`|
|[b61eb4c](https://github.com/sagemath/sagetrac-mirror/commit/b61eb4cc3d78bb93fecb8afa0fa69e85f4ec7c5a)|`New function richcmp_item`|
|[63971a9](https://github.com/sagemath/sagetrac-mirror/commit/63971a9e28b456cd3f141bb020f58bc3dd50a556)|`Implement comparison for polynomials using richcmp_item`|



---

archive/issue_comments_411538.json:
```json
{
    "body": "Changing commit from \"[880174c0280358e728fa09dae42bdfefce505e95](https://github.com/sagemath/sagetrac-mirror/commit/880174c0280358e728fa09dae42bdfefce505e95)\" to \"[63971a9e28b456cd3f141bb020f58bc3dd50a556](https://github.com/sagemath/sagetrac-mirror/commit/63971a9e28b456cd3f141bb020f58bc3dd50a556)\"",
    "created_at": "2017-06-18T09:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411538",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[880174c0280358e728fa09dae42bdfefce505e95](https://github.com/sagemath/sagetrac-mirror/commit/880174c0280358e728fa09dae42bdfefce505e95)" to "[63971a9e28b456cd3f141bb020f58bc3dd50a556](https://github.com/sagemath/sagetrac-mirror/commit/63971a9e28b456cd3f141bb020f58bc3dd50a556)"



---

archive/issue_comments_411539.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[b290838](https://github.com/sagemath/sagetrac-mirror/commit/b290838fb797961e7c28e23625e92fbff313952a)|`New function richcmp_item`|\n|[9c8be9e](https://github.com/sagemath/sagetrac-mirror/commit/9c8be9efa99d5fddc7aa13fd9c53d9b37d1a4c8a)|`Implement comparison for polynomials using richcmp_item`|",
    "created_at": "2017-11-27T11:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411539",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[b290838](https://github.com/sagemath/sagetrac-mirror/commit/b290838fb797961e7c28e23625e92fbff313952a)|`New function richcmp_item`|
|[9c8be9e](https://github.com/sagemath/sagetrac-mirror/commit/9c8be9efa99d5fddc7aa13fd9c53d9b37d1a4c8a)|`Implement comparison for polynomials using richcmp_item`|



---

archive/issue_comments_411540.json:
```json
{
    "body": "Changing commit from \"[63971a9e28b456cd3f141bb020f58bc3dd50a556](https://github.com/sagemath/sagetrac-mirror/commit/63971a9e28b456cd3f141bb020f58bc3dd50a556)\" to \"[9c8be9efa99d5fddc7aa13fd9c53d9b37d1a4c8a](https://github.com/sagemath/sagetrac-mirror/commit/9c8be9efa99d5fddc7aa13fd9c53d9b37d1a4c8a)\"",
    "created_at": "2017-11-27T11:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411540",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[63971a9e28b456cd3f141bb020f58bc3dd50a556](https://github.com/sagemath/sagetrac-mirror/commit/63971a9e28b456cd3f141bb020f58bc3dd50a556)" to "[9c8be9efa99d5fddc7aa13fd9c53d9b37d1a4c8a](https://github.com/sagemath/sagetrac-mirror/commit/9c8be9efa99d5fddc7aa13fd9c53d9b37d1a4c8a)"



---

archive/issue_comments_411541.json:
```json
{
    "body": "Changing dependencies from \"#23102\" to \"\"",
    "created_at": "2017-11-27T11:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411541",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#23102" to ""



---

archive/issue_comments_411542.json:
```json
{
    "body": "<a id='comment:14'></a>\nRebased to 8.1.rc3",
    "created_at": "2017-11-27T11:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411542",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Rebased to 8.1.rc3



---

archive/issue_comments_411543.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-11-27T12:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411543",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_411544.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[09b858e](https://github.com/sagemath/sagetrac-mirror/commit/09b858e945bbdfe3a28cb7b5880b6b3caffc6e57)|`New function richcmp_item`|\n|[171d964](https://github.com/sagemath/sagetrac-mirror/commit/171d9646be648e6d76e1d059373fec30cc728626)|`Implement comparison for polynomials using richcmp_item`|",
    "created_at": "2017-11-27T14:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411544",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[09b858e](https://github.com/sagemath/sagetrac-mirror/commit/09b858e945bbdfe3a28cb7b5880b6b3caffc6e57)|`New function richcmp_item`|
|[171d964](https://github.com/sagemath/sagetrac-mirror/commit/171d9646be648e6d76e1d059373fec30cc728626)|`Implement comparison for polynomials using richcmp_item`|



---

archive/issue_comments_411545.json:
```json
{
    "body": "Changing commit from \"[9c8be9efa99d5fddc7aa13fd9c53d9b37d1a4c8a](https://github.com/sagemath/sagetrac-mirror/commit/9c8be9efa99d5fddc7aa13fd9c53d9b37d1a4c8a)\" to \"[171d9646be648e6d76e1d059373fec30cc728626](https://github.com/sagemath/sagetrac-mirror/commit/171d9646be648e6d76e1d059373fec30cc728626)\"",
    "created_at": "2017-11-27T14:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411545",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[9c8be9efa99d5fddc7aa13fd9c53d9b37d1a4c8a](https://github.com/sagemath/sagetrac-mirror/commit/9c8be9efa99d5fddc7aa13fd9c53d9b37d1a4c8a)" to "[171d9646be648e6d76e1d059373fec30cc728626](https://github.com/sagemath/sagetrac-mirror/commit/171d9646be648e6d76e1d059373fec30cc728626)"



---

archive/issue_comments_411546.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-11-27T14:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411546",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_411547.json:
```json
{
    "body": "<a id='comment:17'></a>\nI changed the implementation compared to 6 months ago by being closer to what Python does and being more efficient in the typical case that `(x <= y)` is equivalent to `(x < y or x == y)`.",
    "created_at": "2017-11-27T14:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411547",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
I changed the implementation compared to 6 months ago by being closer to what Python does and being more efficient in the typical case that `(x <= y)` is equivalent to `(x < y or x == y)`.



---

archive/issue_comments_411548.json:
```json
{
    "body": "<a id='comment:18'></a>\nI do have some small hope that these changes might be accepted by Python upstream to change the comparison of standard Python types like `list`.",
    "created_at": "2017-11-28T10:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411548",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
I do have some small hope that these changes might be accepted by Python upstream to change the comparison of standard Python types like `list`.



---

archive/issue_comments_411549.json:
```json
{
    "body": "Changing commit from \"[171d9646be648e6d76e1d059373fec30cc728626](https://github.com/sagemath/sagetrac-mirror/commit/171d9646be648e6d76e1d059373fec30cc728626)\" to \"[6f68f81967906fb530800ae8dd6c6b4b7d4a6f21](https://github.com/sagemath/sagetrac-mirror/commit/6f68f81967906fb530800ae8dd6c6b4b7d4a6f21)\"",
    "created_at": "2017-11-28T11:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[171d9646be648e6d76e1d059373fec30cc728626](https://github.com/sagemath/sagetrac-mirror/commit/171d9646be648e6d76e1d059373fec30cc728626)" to "[6f68f81967906fb530800ae8dd6c6b4b7d4a6f21](https://github.com/sagemath/sagetrac-mirror/commit/6f68f81967906fb530800ae8dd6c6b4b7d4a6f21)"



---

archive/issue_comments_411550.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[6f68f81](https://github.com/sagemath/sagetrac-mirror/commit/6f68f81967906fb530800ae8dd6c6b4b7d4a6f21)|`Implement comparison for polynomials using richcmp_item`|",
    "created_at": "2017-11-28T11:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411550",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[6f68f81](https://github.com/sagemath/sagetrac-mirror/commit/6f68f81967906fb530800ae8dd6c6b4b7d4a6f21)|`Implement comparison for polynomials using richcmp_item`|



---

archive/issue_comments_411551.json:
```json
{
    "body": "<a id='comment:20'></a>\nImproved doctests.",
    "created_at": "2017-11-28T11:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411551",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
Improved doctests.



---

archive/issue_comments_411552.json:
```json
{
    "body": "Changing commit from \"[6f68f81967906fb530800ae8dd6c6b4b7d4a6f21](https://github.com/sagemath/sagetrac-mirror/commit/6f68f81967906fb530800ae8dd6c6b4b7d4a6f21)\" to \"[e6a7b6e69ea7a5e5e65249a7d47232b3dd8a4f6c](https://github.com/sagemath/sagetrac-mirror/commit/e6a7b6e69ea7a5e5e65249a7d47232b3dd8a4f6c)\"",
    "created_at": "2017-11-28T11:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411552",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[6f68f81967906fb530800ae8dd6c6b4b7d4a6f21](https://github.com/sagemath/sagetrac-mirror/commit/6f68f81967906fb530800ae8dd6c6b4b7d4a6f21)" to "[e6a7b6e69ea7a5e5e65249a7d47232b3dd8a4f6c](https://github.com/sagemath/sagetrac-mirror/commit/e6a7b6e69ea7a5e5e65249a7d47232b3dd8a4f6c)"



---

archive/issue_comments_411553.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[3f04993](https://github.com/sagemath/sagetrac-mirror/commit/3f049938ef16bca3437278db9d17e499bd020c5d)|`New function richcmp_item`|\n|[e6a7b6e](https://github.com/sagemath/sagetrac-mirror/commit/e6a7b6e69ea7a5e5e65249a7d47232b3dd8a4f6c)|`Implement comparison for polynomials using richcmp_item`|",
    "created_at": "2017-11-28T11:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411553",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[3f04993](https://github.com/sagemath/sagetrac-mirror/commit/3f049938ef16bca3437278db9d17e499bd020c5d)|`New function richcmp_item`|
|[e6a7b6e](https://github.com/sagemath/sagetrac-mirror/commit/e6a7b6e69ea7a5e5e65249a7d47232b3dd8a4f6c)|`Implement comparison for polynomials using richcmp_item`|



---

archive/issue_comments_411554.json:
```json
{
    "body": "Changing commit from \"[e6a7b6e69ea7a5e5e65249a7d47232b3dd8a4f6c](https://github.com/sagemath/sagetrac-mirror/commit/e6a7b6e69ea7a5e5e65249a7d47232b3dd8a4f6c)\" to \"[d98d33778721322cd3643a25048b159a5105875c](https://github.com/sagemath/sagetrac-mirror/commit/d98d33778721322cd3643a25048b159a5105875c)\"",
    "created_at": "2017-11-28T13:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411554",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[e6a7b6e69ea7a5e5e65249a7d47232b3dd8a4f6c](https://github.com/sagemath/sagetrac-mirror/commit/e6a7b6e69ea7a5e5e65249a7d47232b3dd8a4f6c)" to "[d98d33778721322cd3643a25048b159a5105875c](https://github.com/sagemath/sagetrac-mirror/commit/d98d33778721322cd3643a25048b159a5105875c)"



---

archive/issue_comments_411555.json:
```json
{
    "body": "<a id='comment:22'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[a7e4200](https://github.com/sagemath/sagetrac-mirror/commit/a7e420018b442ca48da48d9999913391ffe2bba3)|`New function richcmp_item`|\n|[d98d337](https://github.com/sagemath/sagetrac-mirror/commit/d98d33778721322cd3643a25048b159a5105875c)|`Implement comparison for polynomials using richcmp_item`|",
    "created_at": "2017-11-28T13:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[a7e4200](https://github.com/sagemath/sagetrac-mirror/commit/a7e420018b442ca48da48d9999913391ffe2bba3)|`New function richcmp_item`|
|[d98d337](https://github.com/sagemath/sagetrac-mirror/commit/d98d33778721322cd3643a25048b159a5105875c)|`Implement comparison for polynomials using richcmp_item`|



---

archive/issue_comments_411556.json:
```json
{
    "body": "<a id='comment:23'></a>\nCould you please review this again? It is functionally almost identical to the previous version, I mainly reorganized the implementation.",
    "created_at": "2017-12-09T17:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411556",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
Could you please review this again? It is functionally almost identical to the previous version, I mainly reorganized the implementation.



---

archive/issue_comments_411557.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [jdemeyer](#comment%3A23):\n> Could you please review this again?\n\n\nYes, but probably not before some time.",
    "created_at": "2017-12-09T19:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411557",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:24'></a>
Replying to [jdemeyer](#comment%3A23):
> Could you please review this again?


Yes, but probably not before some time.



---

archive/issue_comments_411558.json:
```json
{
    "body": "<a id='comment:25'></a>\nPing?",
    "created_at": "2018-01-08T14:23:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411558",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>
Ping?



---

archive/issue_comments_411559.json:
```json
{
    "body": "<a id='comment:26'></a>\nThe ticket description is not reflecting what is in the branch.",
    "created_at": "2018-01-12T19:51:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411559",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'></a>
The ticket description is not reflecting what is in the branch.



---

archive/issue_comments_411560.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [vdelecroix](#comment%3A26):\n> The ticket description is not reflecting what is in the branch.\n\n\nI think it is, but I'll try to clarify.",
    "created_at": "2018-01-13T10:22:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411560",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>
Replying to [vdelecroix](#comment%3A26):
> The ticket description is not reflecting what is in the branch.


I think it is, but I'll try to clarify.



---

archive/issue_events_066092.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-13T10:24:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22087#event-66092"
}
```



---

archive/issue_events_066093.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-13T10:24:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22087#event-66093"
}
```



---

archive/issue_comments_411561.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n+**Background**:\n+\n The function `richcmp_not_equal` can be used to compare containers item by item. Essentially, for a sequence `A` and `B` one does:\n \n ```\n@@ -9,6 +11,8 @@\n \n However, this usage of `richcmp_not_equal` makes too many assumptions. For example, it assumes that `x != y` is equivalent to `not x == y`.\n \n+**Solution**:\n+\n Instead, we propose a new function `richcmp_item` to solve the same problem in a different way. The new code becomes:\n \n ```\n@@ -18,4 +22,8 @@\n         return res\n ```\n \n-We implement `richcmp_item` such that the semantics are compatible with interval comparisons. This way, we fix comparisons of polynomials to address [ticket:22076#comment:5].\n+We implement `richcmp_item` such that the semantics are compatible with interval comparisons.\n+\n+**Use case**:\n+\n+This way, we fix comparisons of polynomials to address [ticket:22076#comment:5]. Ideally, this new function `richcmp_item` would be used for all comparisons of sequences.\n``````\n",
    "created_at": "2018-01-13T10:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411561",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
+**Background**:
+
 The function `richcmp_not_equal` can be used to compare containers item by item. Essentially, for a sequence `A` and `B` one does:
 
 ```
@@ -9,6 +11,8 @@
 
 However, this usage of `richcmp_not_equal` makes too many assumptions. For example, it assumes that `x != y` is equivalent to `not x == y`.
 
+**Solution**:
+
 Instead, we propose a new function `richcmp_item` to solve the same problem in a different way. The new code becomes:
 
 ```
@@ -18,4 +22,8 @@
         return res
 ```
 
-We implement `richcmp_item` such that the semantics are compatible with interval comparisons. This way, we fix comparisons of polynomials to address [ticket:22076#comment:5].
+We implement `richcmp_item` such that the semantics are compatible with interval comparisons.
+
+**Use case**:
+
+This way, we fix comparisons of polynomials to address [ticket:22076#comment:5]. Ideally, this new function `richcmp_item` would be used for all comparisons of sequences.
``````




---

archive/issue_comments_411562.json:
```json
{
    "body": "<a id='comment:29'></a>\nWhat is the rationale for using `NotImplemented`? It could have been `None`. Or something on ints: `-1` (not decided yet), `0` (False) and `1` (True).",
    "created_at": "2018-01-13T10:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411562",
    "user": "https://github.com/videlec"
}
```

<a id='comment:29'></a>
What is the rationale for using `NotImplemented`? It could have been `None`. Or something on ints: `-1` (not decided yet), `0` (False) and `1` (True).



---

archive/issue_comments_411563.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [vdelecroix](#comment%3A29):\n> What is the rationale for using `NotImplemented`? It could have been `None`. Or something on ints: `-1` (not decided yet), `0` (False) and `1` (True).\n\n\nNo, it cannot because those are legitimate return values of rich comparisons. For example, I could write\n\n```\ndef __eq__(self, other):\n    return None\n```\nand then `a == b` could return `None`.\n\nBut this is not the case for `NotImplemented`: that is special-cased by Python so it is not possible that `a == b` returns `NotImplemented`.",
    "created_at": "2018-01-13T10:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411563",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
Replying to [vdelecroix](#comment%3A29):
> What is the rationale for using `NotImplemented`? It could have been `None`. Or something on ints: `-1` (not decided yet), `0` (False) and `1` (True).


No, it cannot because those are legitimate return values of rich comparisons. For example, I could write

```
def __eq__(self, other):
    return None
```
and then `a == b` could return `None`.

But this is not the case for `NotImplemented`: that is special-cased by Python so it is not possible that `a == b` returns `NotImplemented`.



---

archive/issue_comments_411564.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,15 +1,15 @@\n **Background**:\n \n-The function `richcmp_not_equal` can be used to compare containers item by item. Essentially, for a sequence `A` and `B` one does:\n+The existing function `richcmp_not_equal` can be used to compare sequences (in the broad sense, this includes polynomials and vectors) item by item. Essentially, for a sequence `A` and `B` one does:\n \n ```\n for i in range(N):\n     if not A[i] == B[i]:\n         return richcmp_not_equal(A[i], B[i], op)\n ```\n-This is precisely the pseudocode that Python uses when comparing tuples/lists.\n+This is precisely the pseudocode that Python uses when comparing tuples and lists.\n \n-However, this usage of `richcmp_not_equal` makes too many assumptions. For example, it assumes that `x != y` is equivalent to `not x == y`.\n+However, this usage of `richcmp_not_equal` makes too many assumptions. For example, it implicitly assumes that `x != y` is equivalent to `not x == y`.\n \n **Solution**:\n \n@@ -22,7 +22,9 @@\n         return res\n ```\n \n-We implement `richcmp_item` such that the semantics are compatible with interval comparisons.\n+We implement `richcmp_item` such that the semantics are compatible with set comparisons. For non-empty sets A and B, we define A op B (where \"op\" is a comparison operator) as a op b for all a in A and b in B. Comparisons for elements of `RIF` are a special case of this. Now, if LA and LB are lists of sets [A<sub>0</sub>, A<sub>1</sub>, ...] and [B<sub>0</sub>, B<sub>1</sub>, ...] we want:\n+\n+LA op LB <=> [a<sub>0</sub>, a<sub>1</sub>, ...] op [b<sub>0</sub>, b<sub>1</sub>, ...] for all a<sub>i</sub> in A<sub>i</sub> and b<sub>i</sub> in B<sub>i</sub>.\n \n **Use case**:\n \n``````\n",
    "created_at": "2018-01-13T10:38:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411564",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,15 +1,15 @@
 **Background**:
 
-The function `richcmp_not_equal` can be used to compare containers item by item. Essentially, for a sequence `A` and `B` one does:
+The existing function `richcmp_not_equal` can be used to compare sequences (in the broad sense, this includes polynomials and vectors) item by item. Essentially, for a sequence `A` and `B` one does:
 
 ```
 for i in range(N):
     if not A[i] == B[i]:
         return richcmp_not_equal(A[i], B[i], op)
 ```
-This is precisely the pseudocode that Python uses when comparing tuples/lists.
+This is precisely the pseudocode that Python uses when comparing tuples and lists.
 
-However, this usage of `richcmp_not_equal` makes too many assumptions. For example, it assumes that `x != y` is equivalent to `not x == y`.
+However, this usage of `richcmp_not_equal` makes too many assumptions. For example, it implicitly assumes that `x != y` is equivalent to `not x == y`.
 
 **Solution**:
 
@@ -22,7 +22,9 @@
         return res
 ```
 
-We implement `richcmp_item` such that the semantics are compatible with interval comparisons.
+We implement `richcmp_item` such that the semantics are compatible with set comparisons. For non-empty sets A and B, we define A op B (where "op" is a comparison operator) as a op b for all a in A and b in B. Comparisons for elements of `RIF` are a special case of this. Now, if LA and LB are lists of sets [A<sub>0</sub>, A<sub>1</sub>, ...] and [B<sub>0</sub>, B<sub>1</sub>, ...] we want:
+
+LA op LB <=> [a<sub>0</sub>, a<sub>1</sub>, ...] op [b<sub>0</sub>, b<sub>1</sub>, ...] for all a<sub>i</sub> in A<sub>i</sub> and b<sub>i</sub> in B<sub>i</sub>.
 
 **Use case**:
 
``````




---

archive/issue_comments_411565.json:
```json
{
    "body": "<a id='comment:32'></a>\nI wanted to say \"`NotImplemented` as return value of your `richcmp_item`\".",
    "created_at": "2018-01-13T10:39:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411565",
    "user": "https://github.com/videlec"
}
```

<a id='comment:32'></a>
I wanted to say "`NotImplemented` as return value of your `richcmp_item`".



---

archive/issue_comments_411566.json:
```json
{
    "body": "<a id='comment:33'></a>\nThere somehow to ways to write the same thing\n\n```\nif something:\n    return \"hey\"\nelse:\n    do something else\n```\nor\n\n```\nif something:\n    return \"hey\"\ndo something else\n```\nYou are mixing the two ways in your code which makes it harder to read.",
    "created_at": "2018-01-13T10:41:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411566",
    "user": "https://github.com/videlec"
}
```

<a id='comment:33'></a>
There somehow to ways to write the same thing

```
if something:
    return "hey"
else:
    do something else
```
or

```
if something:
    return "hey"
do something else
```
You are mixing the two ways in your code which makes it harder to read.



---

archive/issue_comments_411567.json:
```json
{
    "body": "<a id='comment:34'></a>\nWould be good to comment on `op & 1` and `op ^ 1` (in the code).",
    "created_at": "2018-01-13T10:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411567",
    "user": "https://github.com/videlec"
}
```

<a id='comment:34'></a>
Would be good to comment on `op & 1` and `op ^ 1` (in the code).



---

archive/issue_comments_411568.json:
```json
{
    "body": "Changing commit from \"[d98d33778721322cd3643a25048b159a5105875c](https://github.com/sagemath/sagetrac-mirror/commit/d98d33778721322cd3643a25048b159a5105875c)\" to \"[ad04bbeac97dc6bf2f4077e7abdc21670f3f2834](https://github.com/sagemath/sagetrac-mirror/commit/ad04bbeac97dc6bf2f4077e7abdc21670f3f2834)\"",
    "created_at": "2018-01-13T19:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411568",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[d98d33778721322cd3643a25048b159a5105875c](https://github.com/sagemath/sagetrac-mirror/commit/d98d33778721322cd3643a25048b159a5105875c)" to "[ad04bbeac97dc6bf2f4077e7abdc21670f3f2834](https://github.com/sagemath/sagetrac-mirror/commit/ad04bbeac97dc6bf2f4077e7abdc21670f3f2834)"



---

archive/issue_comments_411569.json:
```json
{
    "body": "<a id='comment:35'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[cee3cb8](https://github.com/sagemath/sagetrac-mirror/commit/cee3cb8a7090d9f145de65296849e4860746c28f)|`New function richcmp_item`|\n|[e7975db](https://github.com/sagemath/sagetrac-mirror/commit/e7975db3891d2429747ae14003bbb118c23de75a)|`Implement comparison for polynomials using richcmp_item`|\n|[ad04bbe](https://github.com/sagemath/sagetrac-mirror/commit/ad04bbeac97dc6bf2f4077e7abdc21670f3f2834)|`More documentation for richcmp_item`|",
    "created_at": "2018-01-13T19:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411569",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[cee3cb8](https://github.com/sagemath/sagetrac-mirror/commit/cee3cb8a7090d9f145de65296849e4860746c28f)|`New function richcmp_item`|
|[e7975db](https://github.com/sagemath/sagetrac-mirror/commit/e7975db3891d2429747ae14003bbb118c23de75a)|`Implement comparison for polynomials using richcmp_item`|
|[ad04bbe](https://github.com/sagemath/sagetrac-mirror/commit/ad04bbeac97dc6bf2f4077e7abdc21670f3f2834)|`More documentation for richcmp_item`|



---

archive/issue_comments_411570.json:
```json
{
    "body": "<a id='comment:36'></a>\nOK, I tried to improve the documentation.",
    "created_at": "2018-01-13T19:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411570",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'></a>
OK, I tried to improve the documentation.



---

archive/issue_comments_411571.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [vdelecroix](#comment%3A32):\n> I wanted to say \"`NotImplemented` as return value of your `richcmp_item`\".\n\n\nYes and I tried to explain that. The point is that `richcmp_item(x, y, op)` returns either\n\n1. `PyObject_RichCompare(x, y, op)`\n\n2. `NotImplemented`\n\nSince 1. can return anything *except* `NotImplemented`, the value in 2. must be `NotImplemented` if we want those cases to be disjoint.",
    "created_at": "2018-01-13T20:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411571",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>
Replying to [vdelecroix](#comment%3A32):
> I wanted to say "`NotImplemented` as return value of your `richcmp_item`".


Yes and I tried to explain that. The point is that `richcmp_item(x, y, op)` returns either

1. `PyObject_RichCompare(x, y, op)`

2. `NotImplemented`

Since 1. can return anything *except* `NotImplemented`, the value in 2. must be `NotImplemented` if we want those cases to be disjoint.



---

archive/issue_comments_411572.json:
```json
{
    "body": "Changing commit from \"[ad04bbeac97dc6bf2f4077e7abdc21670f3f2834](https://github.com/sagemath/sagetrac-mirror/commit/ad04bbeac97dc6bf2f4077e7abdc21670f3f2834)\" to \"[2a5e69ab5a7a5ccc1ca03b6799f0e2c266a7ca0a](https://github.com/sagemath/sagetrac-mirror/commit/2a5e69ab5a7a5ccc1ca03b6799f0e2c266a7ca0a)\"",
    "created_at": "2018-01-14T08:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411572",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[ad04bbeac97dc6bf2f4077e7abdc21670f3f2834](https://github.com/sagemath/sagetrac-mirror/commit/ad04bbeac97dc6bf2f4077e7abdc21670f3f2834)" to "[2a5e69ab5a7a5ccc1ca03b6799f0e2c266a7ca0a](https://github.com/sagemath/sagetrac-mirror/commit/2a5e69ab5a7a5ccc1ca03b6799f0e2c266a7ca0a)"



---

archive/issue_comments_411573.json:
```json
{
    "body": "<a id='comment:38'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[2a5e69a](https://github.com/sagemath/sagetrac-mirror/commit/2a5e69ab5a7a5ccc1ca03b6799f0e2c266a7ca0a)|`More documentation for richcmp_item`|",
    "created_at": "2018-01-14T08:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411573",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[2a5e69a](https://github.com/sagemath/sagetrac-mirror/commit/2a5e69ab5a7a5ccc1ca03b6799f0e2c266a7ca0a)|`More documentation for richcmp_item`|



---

archive/issue_comments_411574.json:
```json
{
    "body": "Changing commit from \"[2a5e69ab5a7a5ccc1ca03b6799f0e2c266a7ca0a](https://github.com/sagemath/sagetrac-mirror/commit/2a5e69ab5a7a5ccc1ca03b6799f0e2c266a7ca0a)\" to \"[bca2e329a878e099459517894fd854b60e131f9b](https://github.com/sagemath/sagetrac-mirror/commit/bca2e329a878e099459517894fd854b60e131f9b)\"",
    "created_at": "2018-01-14T14:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411574",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[2a5e69ab5a7a5ccc1ca03b6799f0e2c266a7ca0a](https://github.com/sagemath/sagetrac-mirror/commit/2a5e69ab5a7a5ccc1ca03b6799f0e2c266a7ca0a)" to "[bca2e329a878e099459517894fd854b60e131f9b](https://github.com/sagemath/sagetrac-mirror/commit/bca2e329a878e099459517894fd854b60e131f9b)"



---

archive/issue_comments_411575.json:
```json
{
    "body": "<a id='comment:39'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[bca2e32](https://github.com/sagemath/sagetrac-mirror/commit/bca2e329a878e099459517894fd854b60e131f9b)|`More documentation for richcmp_item`|",
    "created_at": "2018-01-14T14:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411575",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[bca2e32](https://github.com/sagemath/sagetrac-mirror/commit/bca2e329a878e099459517894fd854b60e131f9b)|`More documentation for richcmp_item`|



---

archive/issue_comments_411576.json:
```json
{
    "body": "<a id='comment:40'></a>\nOK, I added some further explanations in the docstring and code comments. This function is now about 300 lines in total, of which only 20 are code...",
    "created_at": "2018-01-14T14:10:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411576",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'></a>
OK, I added some further explanations in the docstring and code comments. This function is now about 300 lines in total, of which only 20 are code...



---

archive/issue_comments_411577.json:
```json
{
    "body": "Changing reviewer from \"Marc Mezzarobba\" to \"Marc Mezzarobba, Vincent Delecroix\"",
    "created_at": "2018-01-15T17:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411577",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "Marc Mezzarobba" to "Marc Mezzarobba, Vincent Delecroix"



---

archive/issue_comments_411578.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-01-15T17:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411578",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_411579.json:
```json
{
    "body": "<a id='comment:41'></a>\nSubtle code needs explanations :-)",
    "created_at": "2018-01-15T17:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411579",
    "user": "https://github.com/videlec"
}
```

<a id='comment:41'></a>
Subtle code needs explanations :-)



---

archive/issue_comments_411580.json:
```json
{
    "body": "<a id='comment:42'></a>\nReplying to [jdemeyer](#comment%3A25):\n> Ping?\n\n\nSorry, I was a bit too busy... And thanks a lot Vincent for taking over the review!",
    "created_at": "2018-01-15T19:01:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411580",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:42'></a>
Replying to [jdemeyer](#comment%3A25):
> Ping?


Sorry, I was a bit too busy... And thanks a lot Vincent for taking over the review!



---

archive/issue_comments_411581.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-01-18T18:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411581",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_066094.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-18T18:09:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22087#event-66094"
}
```



---

archive/issue_comments_411582.json:
```json
{
    "body": "Changing branch from \"[u/jdemeyer/new_function_richcmp_item](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/new_function_richcmp_item)\" to \"[bca2e329a878e099459517894fd854b60e131f9b](https://github.com/sagemath/sagetrac-mirror/commit/bca2e329a878e099459517894fd854b60e131f9b)\"",
    "created_at": "2018-01-18T18:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-411582",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "[u/jdemeyer/new_function_richcmp_item](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/new_function_richcmp_item)" to "[bca2e329a878e099459517894fd854b60e131f9b](https://github.com/sagemath/sagetrac-mirror/commit/bca2e329a878e099459517894fd854b60e131f9b)"
