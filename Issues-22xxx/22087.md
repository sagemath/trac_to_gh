# Issue 22087: New function richcmp_item

archive/issues_021850.json:
```json
{
    "body": "**Background**:\n\nThe existing function `richcmp_not_equal` can be used to compare sequences (in the broad sense, this includes polynomials and vectors) item by item. Essentially, for a sequence `A` and `B` one does:\n\n```\nfor i in range(N):\n    if not A[i] == B[i]:\n        return richcmp_not_equal(A[i], B[i], op)\n```\nThis is precisely the pseudocode that Python uses when comparing tuples and lists.\n\nHowever, this usage of `richcmp_not_equal` makes too many assumptions. For example, it implicitly assumes that `x != y` is equivalent to `not x == y`.\n\n**Solution**:\n\nInstead, we propose a new function `richcmp_item` to solve the same problem in a different way. The new code becomes:\n\n```\nfor i in range(N):\n    res = richcmp_item(A[i], B[i], op)\n    if res is not NotImplemented:\n        return res\n```\n\nWe implement `richcmp_item` such that the semantics are compatible with set comparisons. For non-empty sets A and B, we define A op B (where \"op\" is a comparison operator) as a op b for all a in A and b in B. Comparisons for elements of `RIF` are a special case of this. Now, if LA and LB are lists of sets [A<sub>0</sub>, A<sub>1</sub>, ...] and [B<sub>0</sub>, B<sub>1</sub>, ...] we want:\n\nLA op LB <=> [a<sub>0</sub>, a<sub>1</sub>, ...] op [b<sub>0</sub>, b<sub>1</sub>, ...] for all a<sub>i</sub> in A<sub>i</sub> and b<sub>i</sub> in B<sub>i</sub>.\n\n**Use case**:\n\nThis way, we fix comparisons of polynomials to address [ticket:22076#comment:5]. Ideally, this new function `richcmp_item` would be used for all comparisons of sequences.\n\nCC:  @fchapoton @mezzarobba\n\nReviewer: Marc Mezzarobba, Vincent Delecroix\n\nAuthor: Jeroen Demeyer\n\nBranch: bca2e329a878e099459517894fd854b60e131f9b\n\nCommit: bca2e329a878e099459517894fd854b60e131f9b\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22087\n\n",
    "closed_at": "2018-01-18T18:09:34Z",
    "created_at": "2016-12-21T09:29:11Z",
    "labels": [
        "component: basic arithmetic"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.2",
    "title": "New function richcmp_item",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22087",
    "user": "https://github.com/jdemeyer"
}
```
**Background**:

The existing function `richcmp_not_equal` can be used to compare sequences (in the broad sense, this includes polynomials and vectors) item by item. Essentially, for a sequence `A` and `B` one does:

```
for i in range(N):
    if not A[i] == B[i]:
        return richcmp_not_equal(A[i], B[i], op)
```
This is precisely the pseudocode that Python uses when comparing tuples and lists.

However, this usage of `richcmp_not_equal` makes too many assumptions. For example, it implicitly assumes that `x != y` is equivalent to `not x == y`.

**Solution**:

Instead, we propose a new function `richcmp_item` to solve the same problem in a different way. The new code becomes:

```
for i in range(N):
    res = richcmp_item(A[i], B[i], op)
    if res is not NotImplemented:
        return res
```

We implement `richcmp_item` such that the semantics are compatible with set comparisons. For non-empty sets A and B, we define A op B (where "op" is a comparison operator) as a op b for all a in A and b in B. Comparisons for elements of `RIF` are a special case of this. Now, if LA and LB are lists of sets [A<sub>0</sub>, A<sub>1</sub>, ...] and [B<sub>0</sub>, B<sub>1</sub>, ...] we want:

LA op LB <=> [a<sub>0</sub>, a<sub>1</sub>, ...] op [b<sub>0</sub>, b<sub>1</sub>, ...] for all a<sub>i</sub> in A<sub>i</sub> and b<sub>i</sub> in B<sub>i</sub>.

**Use case**:

This way, we fix comparisons of polynomials to address [ticket:22076#comment:5]. Ideally, this new function `richcmp_item` would be used for all comparisons of sequences.

CC:  @fchapoton @mezzarobba

Reviewer: Marc Mezzarobba, Vincent Delecroix

Author: Jeroen Demeyer

Branch: bca2e329a878e099459517894fd854b60e131f9b

Commit: bca2e329a878e099459517894fd854b60e131f9b

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22087





---

archive/issue_comments_303022.json:
```json
{
    "body": "<a id='comment:2'></a>It's hard to say what should be done instead. At least, the current code is consistent with what Python does when comparing tuples: comparisons between tuples `a` and `b` always start by comparing `a[0] == b[0]`.",
    "created_at": "2017-05-31T10:12:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303022",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>It's hard to say what should be done instead. At least, the current code is consistent with what Python does when comparing tuples: comparisons between tuples `a` and `b` always start by comparing `a[0] == b[0]`.



---

archive/issue_events_058104.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-31T11:12:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22087#event-58104"
}
```



---

archive/issue_comments_303023.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-06-01T09:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303023",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_303024.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-01T09:29:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303024",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_303025.json:
```json
{
    "body": "<a id='comment:9'></a>My brain hurts a bit, but this looks reasonable to me. `:-)` Please feel free to set the ticket to positive review on my behalf if all tests pass.\n\nYou may have meant to write `(x {op} y)` in:\n\n```\nreturn res # (x {op} > x) --> True\n```\nAlso, the comment:\n\n```\n....: return rich_to_bool(op, 0) # Lists are equal\n```\nmay be misleading, because the lists actually don't have to be equal when the operator is not `==`.",
    "created_at": "2017-06-02T13:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303025",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:9'></a>My brain hurts a bit, but this looks reasonable to me. `:-)` Please feel free to set the ticket to positive review on my behalf if all tests pass.

You may have meant to write `(x {op} y)` in:

```
return res # (x {op} > x) --> True
```
Also, the comment:

```
....: return rich_to_bool(op, 0) # Lists are equal
```
may be misleading, because the lists actually don't have to be equal when the operator is not `==`.



---

archive/issue_comments_303026.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 mmezzarobba]:\n> My brain hurts a bit, but this looks reasonable to me. `:-)`\n\n\nIt's understandable. It took me a while to come up with these semantics, but I think they are correct.\n\nI'll fix the minor issues that you mentioned.",
    "created_at": "2017-06-02T14:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303026",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>Replying to [comment:9 mmezzarobba]:
> My brain hurts a bit, but this looks reasonable to me. `:-)`


It's understandable. It took me a while to come up with these semantics, but I think they are correct.

I'll fix the minor issues that you mentioned.



---

archive/issue_comments_303027.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-06-02T14:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303027",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_303028.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-06-18T09:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303028",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_303029.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-11-27T11:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303029",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_303030.json:
```json
{
    "body": "<a id='comment:14'></a>Rebased to 8.1.rc3",
    "created_at": "2017-11-27T11:30:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303030",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>Rebased to 8.1.rc3



---

archive/issue_comments_303031.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-11-27T12:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303031",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_303032.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-11-27T14:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303032",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_303033.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-11-27T14:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303033",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_303034.json:
```json
{
    "body": "<a id='comment:17'></a>I changed the implementation compared to 6 months ago by being closer to what Python does and being more efficient in the typical case that `(x <= y)` is equivalent to `(x < y or x == y)`.",
    "created_at": "2017-11-27T14:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303034",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>I changed the implementation compared to 6 months ago by being closer to what Python does and being more efficient in the typical case that `(x <= y)` is equivalent to `(x < y or x == y)`.



---

archive/issue_comments_303035.json:
```json
{
    "body": "<a id='comment:18'></a>I do have some small hope that these changes might be accepted by Python upstream to change the comparison of standard Python types like `list`.",
    "created_at": "2017-11-28T10:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303035",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>I do have some small hope that these changes might be accepted by Python upstream to change the comparison of standard Python types like `list`.



---

archive/issue_comments_303036.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-11-28T11:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303036",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_303037.json:
```json
{
    "body": "<a id='comment:20'></a>Improved doctests.",
    "created_at": "2017-11-28T11:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303037",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>Improved doctests.



---

archive/issue_comments_303038.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-11-28T11:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303038",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_303039.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-11-28T13:11:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303039",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_303040.json:
```json
{
    "body": "<a id='comment:23'></a>Could you please review this again? It is functionally almost identical to the previous version, I mainly reorganized the implementation.",
    "created_at": "2017-12-09T17:06:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303040",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>Could you please review this again? It is functionally almost identical to the previous version, I mainly reorganized the implementation.



---

archive/issue_comments_303041.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:23 jdemeyer]:\n> Could you please review this again?\n\n\nYes, but probably not before some time.",
    "created_at": "2017-12-09T19:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303041",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:24'></a>Replying to [comment:23 jdemeyer]:
> Could you please review this again?


Yes, but probably not before some time.



---

archive/issue_comments_303042.json:
```json
{
    "body": "<a id='comment:25'></a>Ping?",
    "created_at": "2018-01-08T14:23:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303042",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'></a>Ping?



---

archive/issue_comments_303043.json:
```json
{
    "body": "<a id='comment:26'></a>The ticket description is not reflecting what is in the branch.",
    "created_at": "2018-01-12T19:51:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303043",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'></a>The ticket description is not reflecting what is in the branch.



---

archive/issue_comments_303044.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:26 vdelecroix]:\n> The ticket description is not reflecting what is in the branch.\n\n\nI think it is, but I'll try to clarify.",
    "created_at": "2018-01-13T10:22:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303044",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>Replying to [comment:26 vdelecroix]:
> The ticket description is not reflecting what is in the branch.


I think it is, but I'll try to clarify.



---

archive/issue_events_058105.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-13T10:24:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22087#event-58105"
}
```



---

archive/issue_events_058106.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-01-13T10:24:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22087#event-58106"
}
```



---

archive/issue_comments_303045.json:
```json
{
    "body": "<a id='comment:29'></a>What is the rationale for using `NotImplemented`? It could have been `None`. Or something on ints: `-1` (not decided yet), `0` (False) and `1` (True).",
    "created_at": "2018-01-13T10:34:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303045",
    "user": "https://github.com/videlec"
}
```

<a id='comment:29'></a>What is the rationale for using `NotImplemented`? It could have been `None`. Or something on ints: `-1` (not decided yet), `0` (False) and `1` (True).



---

archive/issue_comments_303046.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:29 vdelecroix]:\n> What is the rationale for using `NotImplemented`? It could have been `None`. Or something on ints: `-1` (not decided yet), `0` (False) and `1` (True).\n\n\nNo, it cannot because those are legitimate return values of rich comparisons. For example, I could write\n\n```\ndef __eq__(self, other):\n    return None\n```\nand then `a == b` could return `None`.\n\nBut this is not the case for `NotImplemented`: that is special-cased by Python so it is not possible that `a == b` returns `NotImplemented`.",
    "created_at": "2018-01-13T10:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303046",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>Replying to [comment:29 vdelecroix]:
> What is the rationale for using `NotImplemented`? It could have been `None`. Or something on ints: `-1` (not decided yet), `0` (False) and `1` (True).


No, it cannot because those are legitimate return values of rich comparisons. For example, I could write

```
def __eq__(self, other):
    return None
```
and then `a == b` could return `None`.

But this is not the case for `NotImplemented`: that is special-cased by Python so it is not possible that `a == b` returns `NotImplemented`.



---

archive/issue_comments_303047.json:
```json
{
    "body": "<a id='comment:32'></a>I wanted to say \"`NotImplemented` as return value of your `richcmp_item`\".",
    "created_at": "2018-01-13T10:39:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303047",
    "user": "https://github.com/videlec"
}
```

<a id='comment:32'></a>I wanted to say "`NotImplemented` as return value of your `richcmp_item`".



---

archive/issue_comments_303048.json:
```json
{
    "body": "<a id='comment:33'></a>There somehow to ways to write the same thing\n\n```\nif something:\n    return \"hey\"\nelse:\n    do something else\n```\nor\n\n```\nif something:\n    return \"hey\"\ndo something else\n```\nYou are mixing the two ways in your code which makes it harder to read.",
    "created_at": "2018-01-13T10:41:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303048",
    "user": "https://github.com/videlec"
}
```

<a id='comment:33'></a>There somehow to ways to write the same thing

```
if something:
    return "hey"
else:
    do something else
```
or

```
if something:
    return "hey"
do something else
```
You are mixing the two ways in your code which makes it harder to read.



---

archive/issue_comments_303049.json:
```json
{
    "body": "<a id='comment:34'></a>Would be good to comment on `op & 1` and `op ^ 1` (in the code).",
    "created_at": "2018-01-13T10:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303049",
    "user": "https://github.com/videlec"
}
```

<a id='comment:34'></a>Would be good to comment on `op & 1` and `op ^ 1` (in the code).



---

archive/issue_comments_303050.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-13T19:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303050",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_303051.json:
```json
{
    "body": "<a id='comment:36'></a>OK, I tried to improve the documentation.",
    "created_at": "2018-01-13T19:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303051",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'></a>OK, I tried to improve the documentation.



---

archive/issue_comments_303052.json:
```json
{
    "body": "<a id='comment:37'></a>Replying to [comment:32 vdelecroix]:\n> I wanted to say \"`NotImplemented` as return value of your `richcmp_item`\".\n\n\nYes and I tried to explain that. The point is that `richcmp_item(x, y, op)` returns either\n\n1. `PyObject_RichCompare(x, y, op)`\n\n2. `NotImplemented`\n\nSince 1. can return anything *except* `NotImplemented`, the value in 2. must be `NotImplemented` if we want those cases to be disjoint.",
    "created_at": "2018-01-13T20:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303052",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>Replying to [comment:32 vdelecroix]:
> I wanted to say "`NotImplemented` as return value of your `richcmp_item`".


Yes and I tried to explain that. The point is that `richcmp_item(x, y, op)` returns either

1. `PyObject_RichCompare(x, y, op)`

2. `NotImplemented`

Since 1. can return anything *except* `NotImplemented`, the value in 2. must be `NotImplemented` if we want those cases to be disjoint.



---

archive/issue_comments_303053.json:
```json
{
    "body": "<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-14T08:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303053",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_303054.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-01-14T14:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303054",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_303055.json:
```json
{
    "body": "<a id='comment:40'></a>OK, I added some further explanations in the docstring and code comments. This function is now about 300 lines in total, of which only 20 are code...",
    "created_at": "2018-01-14T14:10:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303055",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'></a>OK, I added some further explanations in the docstring and code comments. This function is now about 300 lines in total, of which only 20 are code...



---

archive/issue_comments_303056.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-01-15T17:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303056",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_303057.json:
```json
{
    "body": "<a id='comment:41'></a>Subtle code needs explanations :-)",
    "created_at": "2018-01-15T17:55:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303057",
    "user": "https://github.com/videlec"
}
```

<a id='comment:41'></a>Subtle code needs explanations :-)



---

archive/issue_comments_303058.json:
```json
{
    "body": "<a id='comment:42'></a>Replying to [comment:25 jdemeyer]:\n> Ping?\n\n\nSorry, I was a bit too busy... And thanks a lot Vincent for taking over the review!",
    "created_at": "2018-01-15T19:01:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303058",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:42'></a>Replying to [comment:25 jdemeyer]:
> Ping?


Sorry, I was a bit too busy... And thanks a lot Vincent for taking over the review!



---

archive/issue_comments_303059.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-01-18T18:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22087#issuecomment-303059",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_058107.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-01-18T18:09:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22087",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22087#event-58107"
}
```
