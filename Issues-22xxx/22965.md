# Issue 22965: Refactor axioms

archive/issues_022728.json:
```json
{
    "body": "CC:  @tscrim simonking @vbraun jpflori\n\nThis ticket brings:\n\n- a catalog of axioms `axioms.XXX` in the global namespace\n\n- axioms as objects rather than plain strings. This had been wished\n  for during the review #10963, and some of the code is reminiscent of\n  Volker's draft at #15501. The main advantage for now is to enable\n  the definition of axioms with custom printing, thus getting rid of the\n  crapy monolithic customization section.\n\n  The bijection axiom <-> \"axiom name\" remains mandatory to support\n  the syntax for implementing axioms in a category.\n\n- improved heuristic for printing categories with axioms. E.g.:\n  {{{\n  Category of finite enumerated fields  ->  Category of finite fields\n  Category of finite enumerated permutation groups  ->  Category of finite permutation groups\n  }}}\n\n  improved printing of `AssociativeXXX`:\n  {{{\n  Category of additive commutative additive magmas ->\n  Category of additive-commutative additive magmas\n  }}}\n  This was discussed and requested on sage-devel for better\n  readability when there are many axioms printed. E.g. in\n  {{{\n  sage: Semirings().super_categories()[0]\n  Category of associative additive-commutative additive-associative additive-unital distributive magmas and additive magmas\n  }}}\n\n  The above are the reasons why the commits touch many files)\n\n- some simplifications in the code (e.g. no more `_repr_object_names_static`)\n\nThe code is essentially backward compatible, at the price of having\n`axioms.Associative == \"Associative\"`, with compatible hash values.\nUsing axioms as strings is deprecated in code. In particular, the\nticket updates the Sage library in a few places to use the preferred\nidiom `P in C.Axiom` rather than `\"Axiom\" in P.category().axioms()`.\n\n\nRemaining questions:\n\n\n- Inside the code, do we want to call the catalog of axioms\n  `all_axioms` or `axioms`? The latter is more ambiguous,\n  but consistent with the name exported in global name space.\n\n- To fetch an existing axiom from a variable containing either the\n  axiom or its name, the current idiom is `all_axioms(name)`; that's\n  somewhat consistent with the `P(xx)` idiom to create elements of a\n  parent. Would we want some other idiom? `all_axioms[name]`?\n\n- Do we want to implement a `cmp` method for axioms?\n  - Comparing by string: this could avoid the repeated use of\n    `sorted(...,key=str)` in our documentation\n  - Comparing by index/definition time? This would be plausibly more\n    meaningful (axioms shown in some natural order). And simplify\n    a very tiny bit the one place where this sorting order is used in\n    the code.\n\n- Do we want to Cythonize axiom.py? Now? Later?\n\n- Do we want to import `all_axioms` from `category_with_axiom` rather than\n  `axiom`? This would avoid a double import in all the files specifying\n  `_base_category_and_axiom`\n\n- Do we want \"additive magmas\" to be renamed to \"additive-magmas\" for consistency?\n\n- Do we want to fix the inconsistency below by adding `additive-` in\n  the first output?\n\n  {{{\n  sage: CommutativeAdditiveGroups()\n  Category of commutative additive groups\n  sage: AdditiveMagmas().AdditiveCommutative()\n  Category of additive-commutative additive magmas\n  }}}\n\n- To recover the string associated to an axiom in the code, is it fine\n  to use `str(axiom)`, or do we want something more explicit and\n  possibly distinct from printing like `axiom.name()`?\n\n- Any better name for `axiom.index()`? It's only used internally,\n  and in a single place; we could also just use `axiom._index`.\n\n\nWork for followup tickets:\n\n- Improve the guessing to avoid having to specify\n  `_base_category_class_and_axiom` in\n  `FiniteDimensionalLieAlgebrasWithBasis` and friends.\n\n- Improve the pretty printing to get:\n  {{{\n  Category of associative additive-commutative additive-associative additive-unital distributive magmas and additive magmas\n  ->\n  Category of distributive semigroups and additive-commutative additive monoids\n  }}}\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/22965\n\n",
    "created_at": "2017-05-10T03:34:05Z",
    "labels": [
        "component: categories"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Refactor axioms",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22965",
    "user": "https://github.com/nthiery"
}
```
CC:  @tscrim simonking @vbraun jpflori

This ticket brings:

- a catalog of axioms `axioms.XXX` in the global namespace

- axioms as objects rather than plain strings. This had been wished
  for during the review #10963, and some of the code is reminiscent of
  Volker's draft at #15501. The main advantage for now is to enable
  the definition of axioms with custom printing, thus getting rid of the
  crapy monolithic customization section.

  The bijection axiom <-> "axiom name" remains mandatory to support
  the syntax for implementing axioms in a category.

- improved heuristic for printing categories with axioms. E.g.:
  {{{
  Category of finite enumerated fields  ->  Category of finite fields
  Category of finite enumerated permutation groups  ->  Category of finite permutation groups
  }}}

  improved printing of `AssociativeXXX`:
  {{{
  Category of additive commutative additive magmas ->
  Category of additive-commutative additive magmas
  }}}
  This was discussed and requested on sage-devel for better
  readability when there are many axioms printed. E.g. in
  {{{
  sage: Semirings().super_categories()[0]
  Category of associative additive-commutative additive-associative additive-unital distributive magmas and additive magmas
  }}}

  The above are the reasons why the commits touch many files)

- some simplifications in the code (e.g. no more `_repr_object_names_static`)

The code is essentially backward compatible, at the price of having
`axioms.Associative == "Associative"`, with compatible hash values.
Using axioms as strings is deprecated in code. In particular, the
ticket updates the Sage library in a few places to use the preferred
idiom `P in C.Axiom` rather than `"Axiom" in P.category().axioms()`.


Remaining questions:


- Inside the code, do we want to call the catalog of axioms
  `all_axioms` or `axioms`? The latter is more ambiguous,
  but consistent with the name exported in global name space.

- To fetch an existing axiom from a variable containing either the
  axiom or its name, the current idiom is `all_axioms(name)`; that's
  somewhat consistent with the `P(xx)` idiom to create elements of a
  parent. Would we want some other idiom? `all_axioms[name]`?

- Do we want to implement a `cmp` method for axioms?
  - Comparing by string: this could avoid the repeated use of
    `sorted(...,key=str)` in our documentation
  - Comparing by index/definition time? This would be plausibly more
    meaningful (axioms shown in some natural order). And simplify
    a very tiny bit the one place where this sorting order is used in
    the code.

- Do we want to Cythonize axiom.py? Now? Later?

- Do we want to import `all_axioms` from `category_with_axiom` rather than
  `axiom`? This would avoid a double import in all the files specifying
  `_base_category_and_axiom`

- Do we want "additive magmas" to be renamed to "additive-magmas" for consistency?

- Do we want to fix the inconsistency below by adding `additive-` in
  the first output?

  {{{
  sage: CommutativeAdditiveGroups()
  Category of commutative additive groups
  sage: AdditiveMagmas().AdditiveCommutative()
  Category of additive-commutative additive magmas
  }}}

- To recover the string associated to an axiom in the code, is it fine
  to use `str(axiom)`, or do we want something more explicit and
  possibly distinct from printing like `axiom.name()`?

- Any better name for `axiom.index()`? It's only used internally,
  and in a single place; we could also just use `axiom._index`.


Work for followup tickets:

- Improve the guessing to avoid having to specify
  `_base_category_class_and_axiom` in
  `FiniteDimensionalLieAlgebrasWithBasis` and friends.

- Improve the pretty printing to get:
  {{{
  Category of associative additive-commutative additive-associative additive-unital distributive magmas and additive magmas
  ->
  Category of distributive semigroups and additive-commutative additive monoids
  }}}


Issue created by migration from https://trac.sagemath.org/ticket/22965





---

archive/issue_comments_316987.json:
```json
{
    "body": "I know it's not ready for review, but something I've been bit by in the past is only defining an `__eq__`. Make sure you define a `__ne__` as `return not (self == other)`.\n\n---\nNew commits:",
    "created_at": "2017-05-10T21:38:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-316987",
    "user": "https://github.com/tscrim"
}
```

I know it's not ready for review, but something I've been bit by in the past is only defining an `__eq__`. Make sure you define a `__ne__` as `return not (self == other)`.

---
New commits:



---

archive/issue_comments_316988.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-10T22:03:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-316988",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_316989.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-10T22:06:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-316989",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_316990.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-10T22:10:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-316990",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_316991.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-10T22:12:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-316991",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_316992.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-10T22:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-316992",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_316993.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-10T22:45:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-316993",
    "user": "https://github.com/nthiery"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_316994.json:
```json
{
    "body": "If you're going to override \"__eq__\" and \"__hash__\" you should probably define the thing to be `CachedRepresentation`. Is there a good reason to be `CachedRepresentation`?\n\n(`CachedRepresentation` has a very nontrivial cost. You should only use it if you need its features)",
    "created_at": "2017-05-10T22:46:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-316994",
    "user": "https://github.com/nbruin"
}
```

If you're going to override "__eq__" and "__hash__" you should probably define the thing to be `CachedRepresentation`. Is there a good reason to be `CachedRepresentation`?

(`CachedRepresentation` has a very nontrivial cost. You should only use it if you need its features)



---

archive/issue_comments_316995.json:
```json
{
    "body": "Replying to [comment:12 nbruin]:\n> If you're going to override \"__eq__\" and \"__hash__\" you should probably define the thing to be `CachedRepresentation`. Is there a good reason to be `CachedRepresentation`?\n> \n> (`CachedRepresentation` has a very nontrivial cost. You should only use it if you need its features)\n\n\nThat's a good question. The `__eq__` and `__hash__` are really here just for backward compatibility (supporting the idiom `\"Foo\" in C.axioms()`). I used `UniqueRepresentation` because that's really what I mean :-) But you are right, it could be more proper to use `CachedRepresentation`.\n\nIn terms of speed, I believe the only important thing is fast equality and hash (which calls for Cythonizing them). Axioms will rarely be recreated.\n\nCheers,\n                                    Nicolas",
    "created_at": "2017-05-10T22:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-316995",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:12 nbruin]:
> If you're going to override "__eq__" and "__hash__" you should probably define the thing to be `CachedRepresentation`. Is there a good reason to be `CachedRepresentation`?
> 
> (`CachedRepresentation` has a very nontrivial cost. You should only use it if you need its features)


That's a good question. The `__eq__` and `__hash__` are really here just for backward compatibility (supporting the idiom `"Foo" in C.axioms()`). I used `UniqueRepresentation` because that's really what I mean :-) But you are right, it could be more proper to use `CachedRepresentation`.

In terms of speed, I believe the only important thing is fast equality and hash (which calls for Cythonizing them). Axioms will rarely be recreated.

Cheers,
                                    Nicolas



---

archive/issue_comments_316996.json:
```json
{
    "body": "Replying to [comment:4 tscrim]:\n> I know it's not ready for review, but something I've been bit by in the past is only defining an `__eq__`. Make sure you define a `__ne__` as `return not (self == other)`.\n\n\nYeah, I pondered about this. Accepting `\"Associative\" == axioms.Associative` is really just here as a workaround for backward compatibility; namely to support idiom `\"Associative\" in C.axioms()` that people apparently have been using. I wondered whether I really wanted to enable more than just the strict minimum.",
    "created_at": "2017-05-10T23:06:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-316996",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:4 tscrim]:
> I know it's not ready for review, but something I've been bit by in the past is only defining an `__eq__`. Make sure you define a `__ne__` as `return not (self == other)`.


Yeah, I pondered about this. Accepting `"Associative" == axioms.Associative` is really just here as a workaround for backward compatibility; namely to support idiom `"Associative" in C.axioms()` that people apparently have been using. I wondered whether I really wanted to enable more than just the strict minimum.



---

archive/issue_comments_316997.json:
```json
{
    "body": "If you want to keep the `__eq__`, then you really need to define a `__ne__` to keep things consistent in case someone wants to test inequality. A slightly contrived example, but say someone has a constructor that accepts an axiom as an arg and they want to do something special when the axiom is not `axioms.Commutative`.\n\nAlso, `__init__`, `__repr__`, and `index` of `Axiom` do not have doctests.",
    "created_at": "2017-05-10T23:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-316997",
    "user": "https://github.com/tscrim"
}
```

If you want to keep the `__eq__`, then you really need to define a `__ne__` to keep things consistent in case someone wants to test inequality. A slightly contrived example, but say someone has a constructor that accepts an axiom as an arg and they want to do something special when the axiom is not `axioms.Commutative`.

Also, `__init__`, `__repr__`, and `index` of `Axiom` do not have doctests.



---

archive/issue_comments_316998.json:
```json
{
    "body": "I'm not really commenting on whether you should define an `__eq__` or not.",
    "created_at": "2017-05-10T23:12:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-316998",
    "user": "https://github.com/tscrim"
}
```

I'm not really commenting on whether you should define an `__eq__` or not.



---

archive/issue_comments_316999.json:
```json
{
    "body": "Also, why does `Axiom` inherit from `SageObject`? What features are you using?",
    "created_at": "2017-05-10T23:13:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-316999",
    "user": "https://github.com/tscrim"
}
```

Also, why does `Axiom` inherit from `SageObject`? What features are you using?



---

archive/issue_comments_317000.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-10T23:17:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-317000",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317001.json:
```json
{
    "body": "Replying to [comment:19 tscrim]:\n> Also, why does `Axiom` inherit from `SageObject`? What features are you using?\n\n\nI believe none at this stage. I just put that by default, mostly for consistency with Category.",
    "created_at": "2017-05-11T02:36:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-317001",
    "user": "https://github.com/nthiery"
}
```

Replying to [comment:19 tscrim]:
> Also, why does `Axiom` inherit from `SageObject`? What features are you using?


I believe none at this stage. I just put that by default, mostly for consistency with Category.



---

archive/issue_comments_317002.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-11T02:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-317002",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317003.json:
```json
{
    "body": "Hi; any comment on the questions raised in the description?",
    "created_at": "2017-05-16T14:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-317003",
    "user": "https://github.com/nthiery"
}
```

Hi; any comment on the questions raised in the description?



---

archive/issue_comments_317004.json:
```json
{
    "body": "> - Inside the code, do we want to call the catalog of axioms\n>   `all_axioms` or `axioms`? The latter is more ambiguous,\n>   but consistent with the name exported in global name space.\n\n\nI say `axioms` both for consistency and naturality.\n\n> - To fetch an existing axiom from a variable containing either the\n>   axiom or its name, the current idiom is `all_axioms(name)`; that's\n>   somewhat consistent with the `P(xx)` idiom to create elements of a\n>   parent. Would we want some other idiom? `all_axioms[name]`?\n\n\nI would go for the latter since it is a container object and `all_axioms[name]` is how Python handles other container objects, e.g., `dict`.\n\n> - Do we want to implement a `cmp` method for axioms?\n\n\nNo, but rich comparisons are good.\n\n>   - Comparing by string: this could avoid the repeated use of\n>     `sorted(...,key=str)` in our documentation\n>   - Comparing by index/definition time? This would be plausibly more\n>     meaningful (axioms shown in some natural order). And simplify\n>     a very tiny bit the one place where this sorting order is used in\n>     the code.\n\n\nDefinitely Index/definition time as this will allow us to control the printing in a more straightforward way.\n\n> - Do we want to Cythonize axiom.py? Now? Later?\n\n\nI am inclined to say Cythonize it to keep the categories as fast as possible. I feel like even if highly optimized, this switch will slow down category creation because the string operations are lightweight and optimized at the machine level. However, I haven't done any timings.\n\nAlso, it would be good if you could get rid of the `SageObject` inheritance from `Axiom` so we could `cdef` it, and I don't see axioms fundamentally behaving like other instances of `SageObject`.\n\n> - Do we want to import `all_axioms` from `category_with_axiom` rather than\n>   `axiom`? This would avoid a double import in all the files specifying\n>   `_base_category_and_axiom`\n\n\n> - Do we want \"additive magmas\" to be renamed to \"additive-magmas\" for consistency?\n\n\nI don't think the hyphen there is completely grammatically correct, at least it is strange to me. So I'm -1.\n\n> - Do we want to fix the inconsistency below by adding `additive-` in\n>   the first output?\n> \n>   {{{\n>   sage: CommutativeAdditiveGroups()\n>   Category of commutative additive groups\n>   sage: AdditiveMagmas().AdditiveCommutative()\n>   Category of additive-commutative additive magmas\n>   }}}\n\n\nI would like the latter to be\n\n```\nCategory of commutative additive magmas\n```\nas this is more concise and easier to parse.\n\n> - To recover the string associated to an axiom in the code, is it fine\n>   to use `str(axiom)`, or do we want something more explicit and\n>   possibly distinct from printing like `axiom.name()`?\n\n\n`str(axiom)` is the most natural for me, but it doesn't hurt to have an alias `axiom.name()`.\n\n> - Any better name for `axiom.index()`? It's only used internally,\n>   and in a single place; we could also just use `axiom._index`.\n\n\nI would get rid of it all together and (mildly) break encapsulation here by using `axiom._index`. It is both faster, only done in one place, and is an implementation detail.",
    "created_at": "2017-05-16T22:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-317004",
    "user": "https://github.com/tscrim"
}
```

> - Inside the code, do we want to call the catalog of axioms
>   `all_axioms` or `axioms`? The latter is more ambiguous,
>   but consistent with the name exported in global name space.


I say `axioms` both for consistency and naturality.

> - To fetch an existing axiom from a variable containing either the
>   axiom or its name, the current idiom is `all_axioms(name)`; that's
>   somewhat consistent with the `P(xx)` idiom to create elements of a
>   parent. Would we want some other idiom? `all_axioms[name]`?


I would go for the latter since it is a container object and `all_axioms[name]` is how Python handles other container objects, e.g., `dict`.

> - Do we want to implement a `cmp` method for axioms?


No, but rich comparisons are good.

>   - Comparing by string: this could avoid the repeated use of
>     `sorted(...,key=str)` in our documentation
>   - Comparing by index/definition time? This would be plausibly more
>     meaningful (axioms shown in some natural order). And simplify
>     a very tiny bit the one place where this sorting order is used in
>     the code.


Definitely Index/definition time as this will allow us to control the printing in a more straightforward way.

> - Do we want to Cythonize axiom.py? Now? Later?


I am inclined to say Cythonize it to keep the categories as fast as possible. I feel like even if highly optimized, this switch will slow down category creation because the string operations are lightweight and optimized at the machine level. However, I haven't done any timings.

Also, it would be good if you could get rid of the `SageObject` inheritance from `Axiom` so we could `cdef` it, and I don't see axioms fundamentally behaving like other instances of `SageObject`.

> - Do we want to import `all_axioms` from `category_with_axiom` rather than
>   `axiom`? This would avoid a double import in all the files specifying
>   `_base_category_and_axiom`


> - Do we want "additive magmas" to be renamed to "additive-magmas" for consistency?


I don't think the hyphen there is completely grammatically correct, at least it is strange to me. So I'm -1.

> - Do we want to fix the inconsistency below by adding `additive-` in
>   the first output?
> 
>   {{{
>   sage: CommutativeAdditiveGroups()
>   Category of commutative additive groups
>   sage: AdditiveMagmas().AdditiveCommutative()
>   Category of additive-commutative additive magmas
>   }}}


I would like the latter to be

```
Category of commutative additive magmas
```
as this is more concise and easier to parse.

> - To recover the string associated to an axiom in the code, is it fine
>   to use `str(axiom)`, or do we want something more explicit and
>   possibly distinct from printing like `axiom.name()`?


`str(axiom)` is the most natural for me, but it doesn't hurt to have an alias `axiom.name()`.

> - Any better name for `axiom.index()`? It's only used internally,
>   and in a single place; we could also just use `axiom._index`.


I would get rid of it all together and (mildly) break encapsulation here by using `axiom._index`. It is both faster, only done in one place, and is an implementation detail.



---

archive/issue_comments_317005.json:
```json
{
    "body": "Looks like there are a lot of things in the comments to still be addressed and merge conflicts that need to be resolved.",
    "created_at": "2017-08-31T05:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-317005",
    "user": "https://github.com/koffie"
}
```

Looks like there are a lot of things in the comments to still be addressed and merge conflicts that need to be resolved.



---

archive/issue_comments_317006.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-08-31T05:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22965",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22965#issuecomment-317006",
    "user": "https://github.com/koffie"
}
```

Changing status from needs_review to needs_work.
