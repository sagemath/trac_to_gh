# Issue 22937: Implement a "distribute" method

archive/issues_022700.json:
```json
{
    "body": "Motivation : some \"obvious\" transformations, sometimes helpful in routine calculations, cannot be obtained via the current methods. Some (elementary,\ni. e. high-school- or undergrad-level) exemples : given the declarations :\n\n```\nvar(\"a,b\")\nvar(\"j,p\", domain=\"integer\")\nf,g,X=function(\"f,g,X\")\n```\n\nthe following equalities, true under no or mild conditions, cannot be deduced currently :\n\n```\nsum(X(j)+Y(j),j,1,p)==sum(X(j),j,1,p)+sum(Y(j),j,1,p) ## (1)\nprod(X(j)*Y(j),j,1,p)==prod(X(j),j,1,p)*prod(Y(j),j,1,p) ## (2)\nintegrate(f(x)+g(x),x,a,b)==integrate(f(x),x,a,b)+integrate(g(x),x,a,b) ## (3)\n```\n\nSimilarly, if A, B and C are matrices over a suitable ring and of\nsuitable dimensions, the following equalities cannot be\nstraightforwardly obtained.\n\n```\n(A+B).trace()==A.trace()+B.trace() ## (4)\n(A*B).det()==A.det()*B.det() ## (5)\n```\n\n(Curiously, `(f(x)+g(x)).diff(x)` *does* return\n`diff(f(x),x)+diff(g(x),x)` (and a way to return to the original\nexpression does not seem to exist currently)).\n\nThe ability to generate the right-hand form from the left-hand form of\nthese various examples is sometimes useful in (low-level)\nexamples. The examples (1) and/or (2) arise naturally when deriving the\nmaximum-likelihood estimators of the mean and variance of a given\ndistribution. The third one is often encountered in elementary calculus\nexercises.\n\nIn all cases, an operator is \"distributed\" over another one :\n(1) : symbolic_sum is distributed over addition.\n(2) : symbolic product is distributed over multiplication.\n(3) : integration is ditributed over addition.\n(4) : trace is distributed over (matrix) addition.\n(5) : determinant is distributed over (matrix) multiplication.\n\nImplementing (1) as an extension of the `expand()` method of\nExpression is tempting (see #22915). However, there are situations\nwhere this expansion is **not** useful. So, creating a method for such\nsituations seems useful.\n\nOne should note that such \"distributions\" are not systematically\nvalid : we have a collection of special cases rather than a general\nmechanism. So this method shoud either limit itself to a few\nrecognized cases or take keyword argument(s) specifying what should be\ndistributed over what.\n\nAnother design choice is to know if these distributions should be\nrecursive or run only on the top level of a given expression\n(possibly controlled by another keyword argument).\n\nThe present ticket aims at implementing this method for `sage.symbolic.expression.Expression`, at least in cases (1) to (3) (case (2) needs an implementation of the symbolic products, see #17505). Further suggestions for other classes are welcome...\n\nCC:  @rwst @tscrim\n\nUpstream: None of the above - read trac for reasoning.\n\nReviewer: Travis Scrimshaw\n\nAuthor: Emmanuel Charpentier, Ralf Stephan\n\nBranch: 7aee739cceff13c596c12e93130250f1ea1fae3f\n\nDependencies: #17505\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22937\n\n",
    "closed_at": "2017-05-14T08:19:59Z",
    "created_at": "2017-05-03T14:53:12Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Implement a \"distribute\" method",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22937",
    "user": "https://github.com/EmmanuelCharpentier"
}
```
Motivation : some "obvious" transformations, sometimes helpful in routine calculations, cannot be obtained via the current methods. Some (elementary,
i. e. high-school- or undergrad-level) exemples : given the declarations :

```
var("a,b")
var("j,p", domain="integer")
f,g,X=function("f,g,X")
```

the following equalities, true under no or mild conditions, cannot be deduced currently :

```
sum(X(j)+Y(j),j,1,p)==sum(X(j),j,1,p)+sum(Y(j),j,1,p) ## (1)
prod(X(j)*Y(j),j,1,p)==prod(X(j),j,1,p)*prod(Y(j),j,1,p) ## (2)
integrate(f(x)+g(x),x,a,b)==integrate(f(x),x,a,b)+integrate(g(x),x,a,b) ## (3)
```

Similarly, if A, B and C are matrices over a suitable ring and of
suitable dimensions, the following equalities cannot be
straightforwardly obtained.

```
(A+B).trace()==A.trace()+B.trace() ## (4)
(A*B).det()==A.det()*B.det() ## (5)
```

(Curiously, `(f(x)+g(x)).diff(x)` *does* return
`diff(f(x),x)+diff(g(x),x)` (and a way to return to the original
expression does not seem to exist currently)).

The ability to generate the right-hand form from the left-hand form of
these various examples is sometimes useful in (low-level)
examples. The examples (1) and/or (2) arise naturally when deriving the
maximum-likelihood estimators of the mean and variance of a given
distribution. The third one is often encountered in elementary calculus
exercises.

In all cases, an operator is "distributed" over another one :
(1) : symbolic_sum is distributed over addition.
(2) : symbolic product is distributed over multiplication.
(3) : integration is ditributed over addition.
(4) : trace is distributed over (matrix) addition.
(5) : determinant is distributed over (matrix) multiplication.

Implementing (1) as an extension of the `expand()` method of
Expression is tempting (see #22915). However, there are situations
where this expansion is **not** useful. So, creating a method for such
situations seems useful.

One should note that such "distributions" are not systematically
valid : we have a collection of special cases rather than a general
mechanism. So this method shoud either limit itself to a few
recognized cases or take keyword argument(s) specifying what should be
distributed over what.

Another design choice is to know if these distributions should be
recursive or run only on the top level of a given expression
(possibly controlled by another keyword argument).

The present ticket aims at implementing this method for `sage.symbolic.expression.Expression`, at least in cases (1) to (3) (case (2) needs an implementation of the symbolic products, see #17505). Further suggestions for other classes are welcome...

CC:  @rwst @tscrim

Upstream: None of the above - read trac for reasoning.

Reviewer: Travis Scrimshaw

Author: Emmanuel Charpentier, Ralf Stephan

Branch: 7aee739cceff13c596c12e93130250f1ea1fae3f

Dependencies: #17505

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22937





---

archive/issue_comments_428924.json:
```json
{
    "body": "<a id='comment:1'></a>\nDiscussion opened on[sage-devel](https://groups.google.com/forum/#!topic/sage-devel/9Dd3IiHvTYA)",
    "created_at": "2017-05-03T15:10:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428924",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:1'></a>
Discussion opened on[sage-devel](https://groups.google.com/forum/#!topic/sage-devel/9Dd3IiHvTYA)



---

archive/issue_comments_428925.json:
```json
{
    "body": "Changing branch from \"\" to \"u/charpent/distribute\"",
    "created_at": "2017-05-09T04:55:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428925",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing branch from "" to "u/charpent/distribute"



---

archive/issue_comments_428926.json:
```json
{
    "body": "<a id='comment:3'></a>\nFirst implementation :\n- Symbolic sum of a sum ==> sum of symbolic sums\n- Integral (definite or not) of a sum ==> sum of integrals.\n\nPasses `ptestlong` with the same errors as those reported for 8.0.beta4 and 8.0.beta5\n\n==>`neeeds_review`\n\n---\nNew commits:\n|                                                                                                                                          |                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[c3bcef0](https://git.sagemath.org/sage.git/commit?id=c3bcef0564e154e930191471334b7c43e5637bea)|`First implementation of distribute() : sums.`|",
    "created_at": "2017-05-09T05:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428926",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:3'></a>
First implementation :
- Symbolic sum of a sum ==> sum of symbolic sums
- Integral (definite or not) of a sum ==> sum of integrals.

Passes `ptestlong` with the same errors as those reported for 8.0.beta4 and 8.0.beta5

==>`neeeds_review`

---
New commits:
|                                                                                                                                          |                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[c3bcef0](https://git.sagemath.org/sage.git/commit?id=c3bcef0564e154e930191471334b7c43e5637bea)|`First implementation of distribute() : sums.`|



---

archive/issue_comments_428927.json:
```json
{
    "body": "Changing commit from \"\" to \"c3bcef0564e154e930191471334b7c43e5637bea\"",
    "created_at": "2017-05-09T05:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428927",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing commit from "" to "c3bcef0564e154e930191471334b7c43e5637bea"



---

archive/issue_comments_428928.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-09T05:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428928",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_428929.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-05-09T13:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428929",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_428930.json:
```json
{
    "body": "<a id='comment:4'></a>\nFurther verifications show that this does not work in all cases.\n\nBack to the old drawing board...",
    "created_at": "2017-05-09T13:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428930",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:4'></a>
Further verifications show that this does not work in all cases.

Back to the old drawing board...



---

archive/issue_comments_428931.json:
```json
{
    "body": "Changing commit from \"c3bcef0564e154e930191471334b7c43e5637bea\" to \"7f9666a22d0d290f4b3504bc1d4b61a4dcf7c455\"",
    "created_at": "2017-05-09T15:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428931",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c3bcef0564e154e930191471334b7c43e5637bea" to "7f9666a22d0d290f4b3504bc1d4b61a4dcf7c455"



---

archive/issue_comments_428932.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[7f9666a](https://git.sagemath.org/sage.git/commit/?id=7f9666a22d0d290f4b3504bc1d4b61a4dcf7c455)|`Fixed recursion when non-match at toplevel.`|",
    "created_at": "2017-05-09T15:11:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428932",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[7f9666a](https://git.sagemath.org/sage.git/commit/?id=7f9666a22d0d290f4b3504bc1d4b61a4dcf7c455)|`Fixed recursion when non-match at toplevel.`|



---

archive/issue_comments_428933.json:
```json
{
    "body": "<a id='comment:6'></a>\nPasses `ptestlong` with the same (unrelated) failures as before +one transient timeout :\n\n```\nsage -t --long src/sage/modular/modform/find_generators.py \n```\nwhich passes when run standalone.\n\n==>`needs_review` again.",
    "created_at": "2017-05-09T16:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428933",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:6'></a>
Passes `ptestlong` with the same (unrelated) failures as before +one transient timeout :

```
sage -t --long src/sage/modular/modform/find_generators.py 
```
which passes when run standalone.

==>`needs_review` again.



---

archive/issue_comments_428934.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-09T16:44:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428934",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_428935.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-05-11T13:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428935",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_428936.json:
```json
{
    "body": "Changing dependencies from \"\" to \"17505\"",
    "created_at": "2017-05-11T13:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428936",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing dependencies from "" to "17505"



---

archive/issue_comments_428937.json:
```json
{
    "body": "<a id='comment:7'></a>\nPlanning to implement the multiplicative case allowed by #17505.",
    "created_at": "2017-05-11T13:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428937",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:7'></a>
Planning to implement the multiplicative case allowed by #17505.



---

archive/issue_comments_428938.json:
```json
{
    "body": "<a id='comment:8'></a>\nMinor comment: Instead of using `map`, you can do, e.g.,\n\n```diff\nmap(lambda t:treat_term(op, t, la), aa)\ntreat_term(op, t, la) for t in aa\n```\n(with wrapping it as a list comprehension `[treat_term(op, t, la) for t in aa]` when you need a list).\n\nAddendum - I feel this is cleaner and IIRC, it is faster.",
    "created_at": "2017-05-11T13:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428938",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
Minor comment: Instead of using `map`, you can do, e.g.,

```diff
map(lambda t:treat_term(op, t, la), aa)
treat_term(op, t, la) for t in aa
```
(with wrapping it as a list comprehension `[treat_term(op, t, la) for t in aa]` when you need a list).

Addendum - I feel this is cleaner and IIRC, it is faster.



---

archive/issue_comments_428939.json:
```json
{
    "body": "Changing dependencies from \"17505\" to \"#17505\"",
    "created_at": "2017-05-11T13:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428939",
    "user": "https://github.com/tscrim"
}
```

Changing dependencies from "17505" to "#17505"



---

archive/issue_comments_428940.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [tscrim](#comment%3A8):\n> Minor comment: Instead of using `map`, you can do, e.g.,\n> \n> ```diff\n> map(lambda t:treat_term(op, t, la), aa)\n> treat_term(op, t, la) for t in aa\n> ```\n> (with wrapping it as a list comprehension `[treat_term(op, t, la) for t in aa]` when you need a list).\n\n\nIndeed (my Lisp roots (and my age...) are showing).\n\n> Addendum - I feel this is cleaner and IIRC, it is faster.\n\n\nI'll check that. But I'll submit first the \"map\" version (which works...), and re-submit the \"comprehension\" version afterwards if it makes a serious difference.\n\nBTW : other enhancements are possible. For example create a local (static) dictionary of distributable operators, whose values are functions processing the corresponding case of distribution (with possible generalizations/factorizations). I didn't feel the four special cases we treat in SR so fare were worth it, but if you have other ideas, you're welcome...\n\nCommit forthcoming. Review request after `ptestlong` (sually a couple of hours...).",
    "created_at": "2017-05-11T14:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428940",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:9'></a>
Replying to [tscrim](#comment%3A8):
> Minor comment: Instead of using `map`, you can do, e.g.,
> 
> ```diff
> map(lambda t:treat_term(op, t, la), aa)
> treat_term(op, t, la) for t in aa
> ```
> (with wrapping it as a list comprehension `[treat_term(op, t, la) for t in aa]` when you need a list).


Indeed (my Lisp roots (and my age...) are showing).

> Addendum - I feel this is cleaner and IIRC, it is faster.


I'll check that. But I'll submit first the "map" version (which works...), and re-submit the "comprehension" version afterwards if it makes a serious difference.

BTW : other enhancements are possible. For example create a local (static) dictionary of distributable operators, whose values are functions processing the corresponding case of distribution (with possible generalizations/factorizations). I didn't feel the four special cases we treat in SR so fare were worth it, but if you have other ideas, you're welcome...

Commit forthcoming. Review request after `ptestlong` (sually a couple of hours...).



---

archive/issue_comments_428941.json:
```json
{
    "body": "Changing commit from \"7f9666a22d0d290f4b3504bc1d4b61a4dcf7c455\" to \"c67f95735d1f816c0255dad81985a8c98aa49757\"",
    "created_at": "2017-05-11T14:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428941",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7f9666a22d0d290f4b3504bc1d4b61a4dcf7c455" to "c67f95735d1f816c0255dad81985a8c98aa49757"



---

archive/issue_comments_428942.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[647ff39](https://git.sagemath.org/sage.git/commit/?id=647ff396cc17c8acb59043dad905ab882834017b)|`17505: unevaluated symbolic product`|\n|[e4769b5](https://git.sagemath.org/sage.git/commit/?id=e4769b5524ae5629db4189d06684646b22781efb)|`17505: symbolic product`|\n|[58119b0](https://git.sagemath.org/sage.git/commit/?id=58119b0df21bcfbb89fc58e108493fde90ac733f)|`17505: fix doctests`|\n|[7a56004](https://git.sagemath.org/sage.git/commit/?id=7a56004ca73a73e04b0b6a7bdbe6b528c0358bb3)|`17505: address reviewer's suggestions`|\n|[a018030](https://git.sagemath.org/sage.git/commit/?id=a01803082bb76d1326b8dc21ab77858f2fe96d49)|`Merge branch 'u/rws/implement_symbolic_product' of trac.sagemath.org:sage into distribute`|\n|[c67f957](https://git.sagemath.org/sage.git/commit/?id=c67f95735d1f816c0255dad81985a8c98aa49757)|`Implement distribute() in the multiplicative case.`|",
    "created_at": "2017-05-11T14:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428942",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[647ff39](https://git.sagemath.org/sage.git/commit/?id=647ff396cc17c8acb59043dad905ab882834017b)|`17505: unevaluated symbolic product`|
|[e4769b5](https://git.sagemath.org/sage.git/commit/?id=e4769b5524ae5629db4189d06684646b22781efb)|`17505: symbolic product`|
|[58119b0](https://git.sagemath.org/sage.git/commit/?id=58119b0df21bcfbb89fc58e108493fde90ac733f)|`17505: fix doctests`|
|[7a56004](https://git.sagemath.org/sage.git/commit/?id=7a56004ca73a73e04b0b6a7bdbe6b528c0358bb3)|`17505: address reviewer's suggestions`|
|[a018030](https://git.sagemath.org/sage.git/commit/?id=a01803082bb76d1326b8dc21ab77858f2fe96d49)|`Merge branch 'u/rws/implement_symbolic_product' of trac.sagemath.org:sage into distribute`|
|[c67f957](https://git.sagemath.org/sage.git/commit/?id=c67f95735d1f816c0255dad81985a8c98aa49757)|`Implement distribute() in the multiplicative case.`|



---

archive/issue_comments_428943.json:
```json
{
    "body": "<a id='comment:11'></a>\nIt's about 3x slower to use `map`:\n\n```\nsage: %timeit [i for i in range(10000)]\n1000 loops, best of 3: 265 \u00b5s per loop\nsage: %timeit map(lambda i: i, range(10000))\n1000 loops, best of 3: 897 \u00b5s per loop\n```\nAlso in Python2, `map` returns a list, which takes extra time and memory to create. Whereas for the `sum`, you only need a generator object.\n\nI cannot comment so much about the operators as it is a little beyond my expertise.",
    "created_at": "2017-05-11T14:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428943",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
It's about 3x slower to use `map`:

```
sage: %timeit [i for i in range(10000)]
1000 loops, best of 3: 265 µs per loop
sage: %timeit map(lambda i: i, range(10000))
1000 loops, best of 3: 897 µs per loop
```
Also in Python2, `map` returns a list, which takes extra time and memory to create. Whereas for the `sum`, you only need a generator object.

I cannot comment so much about the operators as it is a little beyond my expertise.



---

archive/issue_comments_428944.json:
```json
{
    "body": "<a id='comment:12'></a>\nThis version passes `ptestlong` with the same three failure (deemed unrelated).\n\nI'll try Travis' version before marking the better version for review.\n\n---\nNew commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[647ff39](https://git.sagemath.org/sage.git/commit?id=647ff396cc17c8acb59043dad905ab882834017b)|`17505: unevaluated symbolic product`|\n|[e4769b5](https://git.sagemath.org/sage.git/commit?id=e4769b5524ae5629db4189d06684646b22781efb)|`17505: symbolic product`|\n|[58119b0](https://git.sagemath.org/sage.git/commit?id=58119b0df21bcfbb89fc58e108493fde90ac733f)|`17505: fix doctests`|\n|[7a56004](https://git.sagemath.org/sage.git/commit?id=7a56004ca73a73e04b0b6a7bdbe6b528c0358bb3)|`17505: address reviewer's suggestions`|\n|[a018030](https://git.sagemath.org/sage.git/commit?id=a01803082bb76d1326b8dc21ab77858f2fe96d49)|`Merge branch 'u/rws/implement_symbolic_product' of trac.sagemath.org:sage into distribute`|\n|[c67f957](https://git.sagemath.org/sage.git/commit?id=c67f95735d1f816c0255dad81985a8c98aa49757)|`Implement distribute() in the multiplicative case.`|",
    "created_at": "2017-05-11T15:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428944",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:12'></a>
This version passes `ptestlong` with the same three failure (deemed unrelated).

I'll try Travis' version before marking the better version for review.

---
New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[647ff39](https://git.sagemath.org/sage.git/commit?id=647ff396cc17c8acb59043dad905ab882834017b)|`17505: unevaluated symbolic product`|
|[e4769b5](https://git.sagemath.org/sage.git/commit?id=e4769b5524ae5629db4189d06684646b22781efb)|`17505: symbolic product`|
|[58119b0](https://git.sagemath.org/sage.git/commit?id=58119b0df21bcfbb89fc58e108493fde90ac733f)|`17505: fix doctests`|
|[7a56004](https://git.sagemath.org/sage.git/commit?id=7a56004ca73a73e04b0b6a7bdbe6b528c0358bb3)|`17505: address reviewer's suggestions`|
|[a018030](https://git.sagemath.org/sage.git/commit?id=a01803082bb76d1326b8dc21ab77858f2fe96d49)|`Merge branch 'u/rws/implement_symbolic_product' of trac.sagemath.org:sage into distribute`|
|[c67f957](https://git.sagemath.org/sage.git/commit?id=c67f95735d1f816c0255dad81985a8c98aa49757)|`Implement distribute() in the multiplicative case.`|



---

archive/issue_comments_428945.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[687cc8e](https://git.sagemath.org/sage.git/commit/?id=687cc8ea8b0a225d81309bcfffcb3aa948afd31b)|`Distribute : implement Travis Scrimshaw's suggestion for iterations.`|",
    "created_at": "2017-05-11T16:10:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428945",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[687cc8e](https://git.sagemath.org/sage.git/commit/?id=687cc8ea8b0a225d81309bcfffcb3aa948afd31b)|`Distribute : implement Travis Scrimshaw's suggestion for iterations.`|



---

archive/issue_comments_428946.json:
```json
{
    "body": "Changing commit from \"c67f95735d1f816c0255dad81985a8c98aa49757\" to \"687cc8ea8b0a225d81309bcfffcb3aa948afd31b\"",
    "created_at": "2017-05-11T16:10:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428946",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c67f95735d1f816c0255dad81985a8c98aa49757" to "687cc8ea8b0a225d81309bcfffcb3aa948afd31b"



---

archive/issue_comments_428947.json:
```json
{
    "body": "<a id='comment:14'></a>\nWith Travis' suggestion, passes `ptestlong` with the same result as before ==> `needs_review`\n\nDo you think that this enhancement should be passed to Maxima ? The algorithm seems simple to port in Maxima or Lisp.",
    "created_at": "2017-05-11T19:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428947",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:14'></a>
With Travis' suggestion, passes `ptestlong` with the same result as before ==> `needs_review`

Do you think that this enhancement should be passed to Maxima ? The algorithm seems simple to port in Maxima or Lisp.



---

archive/issue_comments_428948.json:
```json
{
    "body": "Changing author from \"\" to \"Emmanuel Charpentier, Ralf Stephan, Travis Scrimshaw\"",
    "created_at": "2017-05-11T19:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428948",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing author from "" to "Emmanuel Charpentier, Ralf Stephan, Travis Scrimshaw"



---

archive/issue_comments_428949.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"None of the above - read trac for reasoning.\"",
    "created_at": "2017-05-11T19:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428949",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing upstream from "N/A" to "None of the above - read trac for reasoning."



---

archive/issue_comments_428950.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-11T19:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428950",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_428951.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[d420ec4](https://git.sagemath.org/sage.git/commit/?id=d420ec4ab00a322f97bd05326741ec7de3e3d65a)|`17505: fix latex, cosmetics`|\n|[b784a2c](https://git.sagemath.org/sage.git/commit/?id=b784a2c01f9655f1c462257dca28e003600b1f65)|`Merge branch 'u/rws/implement_symbolic_product' of trac.sagemath.org:sage into distribute`|\n|[5779423](https://git.sagemath.org/sage.git/commit/?id=5779423aac340d1d7dc415da287b9af5e0e1f381)|`17505: fix doctests`|\n|[4b6e71b](https://git.sagemath.org/sage.git/commit/?id=4b6e71b471ac6747defcc0784208baea42f1da20)|`Merge branch 'u/rws/implement_symbolic_product' of trac.sagemath.org:sage into distribute`|",
    "created_at": "2017-05-12T14:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428951",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[d420ec4](https://git.sagemath.org/sage.git/commit/?id=d420ec4ab00a322f97bd05326741ec7de3e3d65a)|`17505: fix latex, cosmetics`|
|[b784a2c](https://git.sagemath.org/sage.git/commit/?id=b784a2c01f9655f1c462257dca28e003600b1f65)|`Merge branch 'u/rws/implement_symbolic_product' of trac.sagemath.org:sage into distribute`|
|[5779423](https://git.sagemath.org/sage.git/commit/?id=5779423aac340d1d7dc415da287b9af5e0e1f381)|`17505: fix doctests`|
|[4b6e71b](https://git.sagemath.org/sage.git/commit/?id=4b6e71b471ac6747defcc0784208baea42f1da20)|`Merge branch 'u/rws/implement_symbolic_product' of trac.sagemath.org:sage into distribute`|



---

archive/issue_comments_428952.json:
```json
{
    "body": "Changing commit from \"687cc8ea8b0a225d81309bcfffcb3aa948afd31b\" to \"4b6e71b471ac6747defcc0784208baea42f1da20\"",
    "created_at": "2017-05-12T14:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428952",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "687cc8ea8b0a225d81309bcfffcb3aa948afd31b" to "4b6e71b471ac6747defcc0784208baea42f1da20"



---

archive/issue_comments_428953.json:
```json
{
    "body": "<a id='comment:16'></a>\nMerged #17505 again. Should be reviewable.",
    "created_at": "2017-05-12T14:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428953",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:16'></a>
Merged #17505 again. Should be reviewable.



---

archive/issue_comments_428954.json:
```json
{
    "body": "<a id='comment:17'></a>\nIn general, it is always better to pass things to upstream. Although for now, we should do things on our side.\n\nSome other small comments:\n- There is a typo:\n  {{{\n_ Symbolic product of a product ==> product of symbolic products.\n  }}}\n- `self` is not considered as an input.\n- Small change to your `INPUT:`:\n  {{{\n        - ``recursive`` -- (default: ``True``) the distribution proceeds\n          along the subtrees of the expression\n  }}}",
    "created_at": "2017-05-12T14:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428954",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>
In general, it is always better to pass things to upstream. Although for now, we should do things on our side.

Some other small comments:
- There is a typo:
  {{{
_ Symbolic product of a product ==> product of symbolic products.
  }}}
- `self` is not considered as an input.
- Small change to your `INPUT:`:
  {{{
        - ``recursive`` -- (default: ``True``) the distribution proceeds
          along the subtrees of the expression
  }}}



---

archive/issue_comments_428955.json:
```json
{
    "body": "Changing author from \"Emmanuel Charpentier, Ralf Stephan, Travis Scrimshaw\" to \"Emmanuel Charpentier, Ralf Stephan\"",
    "created_at": "2017-05-12T14:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428955",
    "user": "https://github.com/tscrim"
}
```

Changing author from "Emmanuel Charpentier, Ralf Stephan, Travis Scrimshaw" to "Emmanuel Charpentier, Ralf Stephan"



---

archive/issue_comments_428956.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2017-05-12T14:19:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428956",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_428957.json:
```json
{
    "body": "Changing commit from \"4b6e71b471ac6747defcc0784208baea42f1da20\" to \"2412f7a387cf0dec3a764a52a8e644d545cef5f8\"",
    "created_at": "2017-05-12T14:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428957",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4b6e71b471ac6747defcc0784208baea42f1da20" to "2412f7a387cf0dec3a764a52a8e644d545cef5f8"



---

archive/issue_comments_428958.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[2412f7a](https://git.sagemath.org/sage.git/commit/?id=2412f7a387cf0dec3a764a52a8e644d545cef5f8)|`Distribute : cosmetics on documentation.`|",
    "created_at": "2017-05-12T14:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428958",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[2412f7a](https://git.sagemath.org/sage.git/commit/?id=2412f7a387cf0dec3a764a52a8e644d545cef5f8)|`Distribute : cosmetics on documentation.`|



---

archive/issue_comments_428959.json:
```json
{
    "body": "<a id='comment:20'></a>\nCosmetic (but important) changes to the documentation. Thank you, Travis.\n\n`sage -t --long src/sage/symbolic/expression.pyx` passes without failure. Would you mind reviewing it (I probably can't `ptestlong` right now...).",
    "created_at": "2017-05-12T14:41:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428959",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:20'></a>
Cosmetic (but important) changes to the documentation. Thank you, Travis.

`sage -t --long src/sage/symbolic/expression.pyx` passes without failure. Would you mind reviewing it (I probably can't `ptestlong` right now...).



---

archive/issue_comments_428960.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [tscrim](#comment%3A18):\n\nYou are still listed as an author in the docstring (credit where credit is due...).",
    "created_at": "2017-05-12T14:41:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428960",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:21'></a>
Replying to [tscrim](#comment%3A18):

You are still listed as an author in the docstring (credit where credit is due...).



---

archive/issue_comments_428961.json:
```json
{
    "body": "<a id='comment:22'></a>\nI shouldn't be because I just did some simple review changes (so please remove me). But thank you. :)\n\nEverything else looks good.",
    "created_at": "2017-05-12T14:46:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428961",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>
I shouldn't be because I just did some simple review changes (so please remove me). But thank you. :)

Everything else looks good.



---

archive/issue_comments_428962.json:
```json
{
    "body": "<a id='comment:23'></a>\nis the word \"indiced\" correct or it is \"indexed\"? (i'm not native english speaker though..)",
    "created_at": "2017-05-12T14:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428962",
    "user": "https://github.com/mforets"
}
```

<a id='comment:23'></a>
is the word "indiced" correct or it is "indexed"? (i'm not native english speaker though..)



---

archive/issue_comments_428963.json:
```json
{
    "body": "Changing commit from \"2412f7a387cf0dec3a764a52a8e644d545cef5f8\" to \"c28097a513f90c7d4e738d6f97c1036d897b4d62\"",
    "created_at": "2017-05-12T14:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428963",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2412f7a387cf0dec3a764a52a8e644d545cef5f8" to "c28097a513f90c7d4e738d6f97c1036d897b4d62"



---

archive/issue_comments_428964.json:
```json
{
    "body": "<a id='comment:24'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|\n|[c28097a](https://git.sagemath.org/sage.git/commit/?id=c28097a513f90c7d4e738d6f97c1036d897b4d62)|`Distribute : at his request, Travis Crimshaw removed from Author's list.`|",
    "created_at": "2017-05-12T14:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428964",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|
|[c28097a](https://git.sagemath.org/sage.git/commit/?id=c28097a513f90c7d4e738d6f97c1036d897b4d62)|`Distribute : at his request, Travis Crimshaw removed from Author's list.`|



---

archive/issue_comments_428965.json:
```json
{
    "body": "<a id='comment:25'></a>\n`indexed` is correct adjective.",
    "created_at": "2017-05-12T14:59:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428965",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'></a>
`indexed` is correct adjective.



---

archive/issue_comments_428966.json:
```json
{
    "body": "Changing commit from \"c28097a513f90c7d4e738d6f97c1036d897b4d62\" to \"7aee739cceff13c596c12e93130250f1ea1fae3f\"",
    "created_at": "2017-05-12T15:03:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428966",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c28097a513f90c7d4e738d6f97c1036d897b4d62" to "7aee739cceff13c596c12e93130250f1ea1fae3f"



---

archive/issue_comments_428967.json:
```json
{
    "body": "<a id='comment:26'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[7aee739](https://git.sagemath.org/sage.git/commit/?id=7aee739cceff13c596c12e93130250f1ea1fae3f)|`Distribute : one last typo (I hope...).`|",
    "created_at": "2017-05-12T15:03:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428967",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[7aee739](https://git.sagemath.org/sage.git/commit/?id=7aee739cceff13c596c12e93130250f1ea1fae3f)|`Distribute : one last typo (I hope...).`|



---

archive/issue_comments_428968.json:
```json
{
    "body": "<a id='comment:27'></a>\nRReplying to [tscrim](#comment%3A22):\n> I shouldn't be because I just did some simple review changes\n\n\nYour suggestion to do without map() was a good one (and teached me something I tend to oversee : Python is not Lisp...).\n\n> (so please remove me).\n\n\nIf you insist...\n\n> But thank you. :)\n> \n> Everything else looks good.\n\n\nSo this last update (including indiced --> indexed) should be reviewed...\n\n---\nNew commits:\n|                                                                                                                                          |                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[7aee739](https://git.sagemath.org/sage.git/commit?id=7aee739cceff13c596c12e93130250f1ea1fae3f)|`Distribute : one last typo (I hope...).`|",
    "created_at": "2017-05-12T15:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428968",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:27'></a>
RReplying to [tscrim](#comment%3A22):
> I shouldn't be because I just did some simple review changes


Your suggestion to do without map() was a good one (and teached me something I tend to oversee : Python is not Lisp...).

> (so please remove me).


If you insist...

> But thank you. :)
> 
> Everything else looks good.


So this last update (including indiced --> indexed) should be reviewed...

---
New commits:
|                                                                                                                                          |                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[7aee739](https://git.sagemath.org/sage.git/commit?id=7aee739cceff13c596c12e93130250f1ea1fae3f)|`Distribute : one last typo (I hope...).`|



---

archive/issue_comments_428969.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-12T15:11:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428969",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_428970.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [charpent](#comment%3A27):\n> RReplying to [tscrim](#comment%3A22):\n> > I shouldn't be because I just did some simple review changes\n\n> \n> Your suggestion to do without map() was a good one (and teached me something I tend to oversee : Python is not Lisp...).\n\n\nI am always learning things from my reviewers too.\n\n> > (so please remove me).\n\n> \n> If you insist...\n\n\nThank you. I didn't really author code other than give suggestions, so I don't think I should be listed as an author. :)\n\nYou will need to add a doctest in the dependency, but you don't have to merge it into this ticket explicitly (because it is a dependency and will be done by Volker in the develop branch).",
    "created_at": "2017-05-12T15:11:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428970",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>
Replying to [charpent](#comment%3A27):
> RReplying to [tscrim](#comment%3A22):
> > I shouldn't be because I just did some simple review changes

> 
> Your suggestion to do without map() was a good one (and teached me something I tend to oversee : Python is not Lisp...).


I am always learning things from my reviewers too.

> > (so please remove me).

> 
> If you insist...


Thank you. I didn't really author code other than give suggestions, so I don't think I should be listed as an author. :)

You will need to add a doctest in the dependency, but you don't have to merge it into this ticket explicitly (because it is a dependency and will be done by Volker in the develop branch).



---

archive/issue_comments_428971.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [tscrim](#comment%3A28):\n\n[ Snip ... ]\n\n> You will need to add a doctest in the dependency, but you don't have to merge it into this ticket explicitly (because it is a dependency and will be done by Volker in the develop branch).\n\n\nThis should wait Ralf's implementation of the externally-visible `product` method and function (currently, we have to either import an internal function or cast to Sage a Maxima contraption...) : that will be cleaner an probably more useful to users.",
    "created_at": "2017-05-12T15:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428971",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:29'></a>
Replying to [tscrim](#comment%3A28):

[ Snip ... ]

> You will need to add a doctest in the dependency, but you don't have to merge it into this ticket explicitly (because it is a dependency and will be done by Volker in the develop branch).


This should wait Ralf's implementation of the externally-visible `product` method and function (currently, we have to either import an internal function or cast to Sage a Maxima contraption...) : that will be cleaner an probably more useful to users.



---

archive/issue_comments_428972.json:
```json
{
    "body": "<a id='comment:30'></a>\nInteresting. Both branches apply but mine has a hunk that fuses two hunks into one; yours has the first of the two so my hunk cannot be applied. I'll upload a branch where the two are separated.",
    "created_at": "2017-05-13T13:05:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428972",
    "user": "https://github.com/rwst"
}
```

<a id='comment:30'></a>
Interesting. Both branches apply but mine has a hunk that fuses two hunks into one; yours has the first of the two so my hunk cannot be applied. I'll upload a branch where the two are separated.



---

archive/issue_comments_428973.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [rws](#comment%3A30):\n> Interesting. Both branches apply but mine has a hunk that fuses two hunks into one; yours has the first of the two so my hunk cannot be applied. I'll upload a branch where the two are separated.\n\n\nAh that should have gone to #22989.",
    "created_at": "2017-05-13T13:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428973",
    "user": "https://github.com/rwst"
}
```

<a id='comment:31'></a>
Replying to [rws](#comment%3A30):
> Interesting. Both branches apply but mine has a hunk that fuses two hunks into one; yours has the first of the two so my hunk cannot be applied. I'll upload a branch where the two are separated.


Ah that should have gone to #22989.



---

archive/issue_comments_428974.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [rws](#comment%3A31):\n> Replying to [rws](#comment%3A30):\n> > Interesting. Both branches apply but mine has a hunk that fuses two hunks into one; yours has the first of the two so my hunk cannot be applied. I'll upload a branch where the two are separated.\n  \n> \n> Ah that should have gone to #22989.\n\n\nGo ahead. Do you need me to do anything ?",
    "created_at": "2017-05-13T13:23:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428974",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:32'></a>
Replying to [rws](#comment%3A31):
> Replying to [rws](#comment%3A30):
> > Interesting. Both branches apply but mine has a hunk that fuses two hunks into one; yours has the first of the two so my hunk cannot be applied. I'll upload a branch where the two are separated.
  
> 
> Ah that should have gone to #22989.


Go ahead. Do you need me to do anything ?



---

archive/issue_comments_428975.json:
```json
{
    "body": "Changing branch from \"u/charpent/distribute\" to \"7aee739cceff13c596c12e93130250f1ea1fae3f\"",
    "created_at": "2017-05-14T08:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428975",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/charpent/distribute" to "7aee739cceff13c596c12e93130250f1ea1fae3f"



---

archive/issue_events_059487.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-14T08:19:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22937#event-59487"
}
```



---

archive/issue_comments_428976.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-14T08:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428976",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_428977.json:
```json
{
    "body": "Changing commit from \"7aee739cceff13c596c12e93130250f1ea1fae3f\" to \"\"",
    "created_at": "2017-05-19T11:39:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428977",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "7aee739cceff13c596c12e93130250f1ea1fae3f" to ""



---

archive/issue_comments_428978.json:
```json
{
    "body": "<a id='comment:34'></a>\n**WARNING**\n\nYou have used here \"apply()\" which is not python3-compatible. Please correct this ASAP in another ticket.\n\nReference: www.diveintopython3.net/porting-code-to-python-3-with-2to3.html\n\nThe Python 2 builtin apply() has been removed in Python 3",
    "created_at": "2017-05-19T11:39:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428978",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:34'></a>
**WARNING**

You have used here "apply()" which is not python3-compatible. Please correct this ASAP in another ticket.

Reference: www.diveintopython3.net/porting-code-to-python-3-with-2to3.html

The Python 2 builtin apply() has been removed in Python 3



---

archive/issue_comments_428979.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [chapoton](#comment%3A34):\n> **WARNING**\n> \n> You have used here \"apply()\" which is not python3-compatible. Please correct this ASAP in another ticket.\n\n\nWill do that, maybe over the coming week-end, but have to think about it I'm not much of a Python coder...).\n\n> Reference: www.diveintopython3.net/porting-code-to-python-3-with-2to3.html\n\n\nThanks for the suggestion.\n\n> The Python 2 builtin apply() has been removed in Python 3\n\n\nH... right.",
    "created_at": "2017-05-19T11:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428979",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:35'></a>
Replying to [chapoton](#comment%3A34):
> **WARNING**
> 
> You have used here "apply()" which is not python3-compatible. Please correct this ASAP in another ticket.


Will do that, maybe over the coming week-end, but have to think about it I'm not much of a Python coder...).

> Reference: www.diveintopython3.net/porting-code-to-python-3-with-2to3.html


Thanks for the suggestion.

> The Python 2 builtin apply() has been removed in Python 3


H... right.



---

archive/issue_comments_428980.json:
```json
{
    "body": "<a id='comment:36'></a>\nDo you want me to take care of that, and then be a reviewer ? Maybe this will be faster.",
    "created_at": "2017-05-19T12:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428980",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:36'></a>
Do you want me to take care of that, and then be a reviewer ? Maybe this will be faster.



---

archive/issue_comments_428981.json:
```json
{
    "body": "<a id='comment:37'></a>\nI created #23030",
    "created_at": "2017-05-19T12:10:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22937",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22937#issuecomment-428981",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:37'></a>
I created #23030
