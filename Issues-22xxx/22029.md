# Issue 22029: Element richcmp: never use id()

archive/issues_021792.json:
```json
{
    "assignees": [],
    "body": "As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),\n`coercion_model.richcmp()` should not fall back on comparing by type/id.\n\nThis branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n\nDependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, #27123, #27241\n\nDepends on #27241\n\nCC:  @fchapoton\n\nKeywords: **richcmp**\n\nBranch/Commit: **[`e311ab1`](https://github.com/sagemath/sagetrac-mirror/commit/e311ab134f9d0c16dbbb800d35ba2c4325b4beb2)**\n\nReviewer: **Julian R\u00fcth, Marc Mezzarobba**\n\nAuthor: **Marc Mezzarobba, Jeroen Demeyer**\n\nComponent: **coercion**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22029_\n\n",
    "closed_at": "2019-02-11T23:06:53Z",
    "created_at": "2016-12-06T13:31:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20coercion",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20python3"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Element richcmp: never use id()",
    "type": "issue",
    "updated_at": "2019-02-11T23:06:53Z",
    "url": "https://github.com/sagemath/sage/issues/22029",
    "user": "https://github.com/mezzarobba"
}
```
As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),
`coercion_model.richcmp()` should not fall back on comparing by type/id.

This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).

Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, #27123, #27241

Depends on #27241

CC:  @fchapoton

Keywords: **richcmp**

Branch/Commit: **[`e311ab1`](https://github.com/sagemath/sagetrac-mirror/commit/e311ab134f9d0c16dbbb800d35ba2c4325b4beb2)**

Reviewer: **Julian RÃ¼th, Marc Mezzarobba**

Author: **Marc Mezzarobba, Jeroen Demeyer**

Component: **coercion**

_Issue created by migration from https://trac.sagemath.org/ticket/22029_





---

archive/issue_events_305780.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-12-06T13:31:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305780"
}
```



---

archive/issue_events_305781.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-12-06T13:31:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20coercion",
    "label_color": "0000ff",
    "label_name": "c: coercion",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305781"
}
```



---

archive/issue_events_305782.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-12-06T13:31:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305782"
}
```



---

archive/issue_events_305783.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-12-06T13:31:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305783"
}
```



---

archive/issue_comments_324412.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nDo you plan to work on this? If yes, fill in your name as reviewer. If no, let me know.",
    "created_at": "2016-12-06T15:12:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324412",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:1" align="right">comment:1</div>

Do you plan to work on this? If yes, fill in your name as reviewer. If no, let me know.



---

archive/issue_comments_324413.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>`, `Element.__richcmp__()` should not fall back on comparing by type/id.\n+As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>`, `coercion_model.richcmp()` should not fall back on comparing by type/id.\n``````\n",
    "created_at": "2016-12-06T15:14:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324413",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>`, `Element.__richcmp__()` should not fall back on comparing by type/id.
+As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>`, `coercion_model.richcmp()` should not fall back on comparing by type/id.
``````




---

archive/issue_comments_324414.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>`, `coercion_model.richcmp()` should not fall back on comparing by type/id.\n+`coercion_model.richcmp()` should not fall back on comparing by type/id.\n``````\n",
    "created_at": "2016-12-06T15:16:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324414",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>`, `coercion_model.richcmp()` should not fall back on comparing by type/id.
+`coercion_model.richcmp()` should not fall back on comparing by type/id.
``````




---

archive/issue_comments_324415.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@jdemeyer](#comment:1):\n> Do you plan to work on this? If yes, fill in your name as reviewer.\n\nas author? owner?\n\n> If no, let me know.\n\nI've started doing experiments, but I'll most likely need help from people who understand the parts of Sage that rely on the current behavior. At the very least I'll try to push a first draft in the next few days.",
    "created_at": "2016-12-06T15:35:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324415",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@jdemeyer](#comment:1):
> Do you plan to work on this? If yes, fill in your name as reviewer.

as author? owner?

> If no, let me know.

I've started doing experiments, but I'll most likely need help from people who understand the parts of Sage that rely on the current behavior. At the very least I'll try to push a first draft in the next few days.



---

archive/issue_comments_324416.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nMy main concern right now is that `sage.graphs` heavily relies on sorting lists of vertices, while various other parts of Sage create graphs with vertices that mix Elements with other Python objects.\n\nAn option might be to try again with `key=id` when `sort()` fails, but (with no global understanding of the code, at least) there's a major risk of getting inconsistent orders with different subsets of vertices.\n\nAnother idea would be to do introduce utilities like\n\n```\n# universal_cmp.pyx\ncpdef lt(x, y):\n    try:\n        return x < y\n    except TypeError:\n        if type(x) is type(y):\n            return id(x) < id(y)\n        else:\n            return type(x) < type(y)\n...\n\ncdef class key(object):\n    def __init__(self):\n        self.value = value\n    def __lt__(self, other):\n        return lt(self.value, other.value)\n    ...\n```\nand then use `universal_cmp.lt()` and `sort(key=universal_cmp.key)`, but this won't work either when one of the types involved only has a partial order, since this order will not be consistent with `id`.\n\nYet another variant would be to pass a comparison function (or, equivalently but probably better in view of the transition to python3, a `key` as above) that wraps `cmp()` and catches `TypeError`s. Not really ideal either, but at least it wouldn't introduce any regression(?), so perhaps that would be enough for this ticket...\n\nAny advice?",
    "created_at": "2016-12-06T15:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324416",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:5" align="right">comment:5</div>

My main concern right now is that `sage.graphs` heavily relies on sorting lists of vertices, while various other parts of Sage create graphs with vertices that mix Elements with other Python objects.

An option might be to try again with `key=id` when `sort()` fails, but (with no global understanding of the code, at least) there's a major risk of getting inconsistent orders with different subsets of vertices.

Another idea would be to do introduce utilities like

```
# universal_cmp.pyx
cpdef lt(x, y):
    try:
        return x < y
    except TypeError:
        if type(x) is type(y):
            return id(x) < id(y)
        else:
            return type(x) < type(y)
...

cdef class key(object):
    def __init__(self):
        self.value = value
    def __lt__(self, other):
        return lt(self.value, other.value)
    ...
```
and then use `universal_cmp.lt()` and `sort(key=universal_cmp.key)`, but this won't work either when one of the types involved only has a partial order, since this order will not be consistent with `id`.

Yet another variant would be to pass a comparison function (or, equivalently but probably better in view of the transition to python3, a `key` as above) that wraps `cmp()` and catches `TypeError`s. Not really ideal either, but at least it wouldn't introduce any regression(?), so perhaps that would be enough for this ticket...

Any advice?



---

archive/issue_comments_324417.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@mezzarobba](#comment:4):\n> Replying to [@jdemeyer](#comment:1):\n> > Do you plan to work on this? If yes, fill in your name as reviewer.\n\n> \n> as author? owner?\n\nSorry, I meant as author.",
    "created_at": "2016-12-06T17:42:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324417",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@mezzarobba](#comment:4):
> Replying to [@jdemeyer](#comment:1):
> > Do you plan to work on this? If yes, fill in your name as reviewer.

> 
> as author? owner?

Sorry, I meant as author.



---

archive/issue_comments_324418.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nBy the way, why did you remove the reference to the sage-devel thread?",
    "created_at": "2016-12-06T17:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324418",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:7" align="right">comment:7</div>

By the way, why did you remove the reference to the sage-devel thread?



---

archive/issue_comments_324419.json:
```json
{
    "body": "Author: **Marc Mezzarobba**",
    "created_at": "2016-12-06T17:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324419",
    "user": "https://github.com/mezzarobba"
}
```

Author: **Marc Mezzarobba**



---

archive/issue_comments_324420.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@mezzarobba](#comment:7):\n> By the way, why did you remove the reference to the sage-devel thread?\n\nBecause I didn't understand how to interpret it. A hyperlink would be better.",
    "created_at": "2016-12-06T17:47:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324420",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@mezzarobba](#comment:7):
> By the way, why did you remove the reference to the sage-devel thread?

Because I didn't understand how to interpret it. A hyperlink would be better.



---

archive/issue_comments_324421.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@mezzarobba](#comment:5):\n> My main concern right now is that `sage.graphs` heavily relies on sorting lists of vertices\n\nWhy does it rely on sorting vertices?",
    "created_at": "2016-12-06T17:50:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324421",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@mezzarobba](#comment:5):
> My main concern right now is that `sage.graphs` heavily relies on sorting lists of vertices

Why does it rely on sorting vertices?



---

archive/issue_comments_324422.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@jdemeyer](#comment:8):\n> Replying to [@mezzarobba](#comment:7):\n> > By the way, why did you remove the reference to the sage-devel thread?\n\n> \n> Because I didn't understand how to interpret it. A hyperlink would be better.\n\nI personally prefer Message-Ids, as they don't depend on a particular archive...",
    "created_at": "2016-12-06T17:52:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324422",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@jdemeyer](#comment:8):
> Replying to [@mezzarobba](#comment:7):
> > By the way, why did you remove the reference to the sage-devel thread?

> 
> Because I didn't understand how to interpret it. A hyperlink would be better.

I personally prefer Message-Ids, as they don't depend on a particular archive...



---

archive/issue_comments_324423.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@jdemeyer](#comment:9):\n> Replying to [@mezzarobba](#comment:5):\n> > My main concern right now is that `sage.graphs` heavily relies on sorting lists of vertices\n\n> \n> Why does it rely on sorting vertices?\n\nIn `sparse_graph` and `generic_graph`, mostly. Some of the occurrences look like they are there for algorithmic purposes, others to make the output more readable, some both at the same time... I didn't look closely enough to say more.",
    "created_at": "2016-12-06T17:56:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324423",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@jdemeyer](#comment:9):
> Replying to [@mezzarobba](#comment:5):
> > My main concern right now is that `sage.graphs` heavily relies on sorting lists of vertices

> 
> Why does it rely on sorting vertices?

In `sparse_graph` and `generic_graph`, mostly. Some of the occurrences look like they are there for algorithmic purposes, others to make the output more readable, some both at the same time... I didn't look closely enough to say more.



---

archive/issue_comments_324424.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n+As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),\n `coercion_model.richcmp()` should not fall back on comparing by type/id.\n``````\n",
    "created_at": "2016-12-06T18:01:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324424",
    "user": "https://github.com/mezzarobba"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,2 @@
+As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),
 `coercion_model.richcmp()` should not fall back on comparing by type/id.
``````




---

archive/issue_comments_324425.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@mezzarobba](#comment:11):\n> In `sparse_graph` and `generic_graph`, mostly. Some of the occurrences look like they are there for algorithmic purposes, others to make the output more readable, some both at the same time... I didn't look closely enough to say more.\n\nIt's also important to note the difference between old-style `cmp()` and new-style rich comparisons. Ideally, this branch would only affect the latter.",
    "created_at": "2016-12-06T18:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324425",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@mezzarobba](#comment:11):
> In `sparse_graph` and `generic_graph`, mostly. Some of the occurrences look like they are there for algorithmic purposes, others to make the output more readable, some both at the same time... I didn't look closely enough to say more.

It's also important to note the difference between old-style `cmp()` and new-style rich comparisons. Ideally, this branch would only affect the latter.



---

archive/issue_comments_324426.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@jdemeyer](#comment:13):\n> It's also important to note the difference between old-style `cmp()` and new-style rich comparisons. Ideally, this branch would only affect the latter.\n\nI'm not sure I follow you: `cmp()` can end up calling `Element.__richcmp__()`, and that's perhaps the main reason why getting rid of the comparison by id there is not trivial.",
    "created_at": "2016-12-06T18:20:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324426",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@jdemeyer](#comment:13):
> It's also important to note the difference between old-style `cmp()` and new-style rich comparisons. Ideally, this branch would only affect the latter.

I'm not sure I follow you: `cmp()` can end up calling `Element.__richcmp__()`, and that's perhaps the main reason why getting rid of the comparison by id there is not trivial.



---

archive/issue_comments_324427.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@mezzarobba](#comment:5):\n> My main concern right now is that `sage.graphs` heavily relies on sorting lists of vertices, while various other parts of Sage create graphs with vertices that mix Elements with other Python objects.\n> \n> An option might be to try again with `key=id` when `sort()` fails, but (with no global understanding of the code, at least) there's a major risk of getting inconsistent orders with different subsets of vertices.\n\nIf you have no information on the objects you're sorting, I don't think there is anything that can save you. If your objects are guaranteed to be hashable you could try sorting on the hash, but that will leave your results undefined when hashes clash. In any case, if you rely on \"first try what the object implements and then use a fallback if that fails\", you're doomed.\n\nIn fact, if you allow your vertices to be labelled with arbitrary objects, you're already losing transitivity of equality in sage, via the standard\n\n```\nsage: a=GF(3)(1); b =31; c=GF(5)(1)\nsage: a==b,b==c,a==c\n(True, True, False)\n```\nIt seems that labels get mangled anyway, though, so I think them not being sorted properly is only a minor concern by comparison (sorry):\n\n```\nsage: a=GF(3)(1); b =31; c=GF(5)(1)\nsage: L=[[a,b,c],[a,c,b],[b,a,c],[b,c,a],[c,a,b],[c,b,a]]\nsage: for l in L:\n....:     G=Graph()\n....:     for i in l:\n....:         G.add_vertex(i)\n....:     print [parent(j) for j in G.vertices()]\n....:     \n[<type 'int'>, Integer Ring]\n[<type 'int'>, Integer Ring]\n[<type 'int'>, Integer Ring]\n[<type 'int'>, Integer Ring]\n[<type 'int'>, Integer Ring]\n[<type 'int'>, Integer Ring]\n```\nIt seems to me the only sane approaches are to not rely on sorting (in python it seems being hashable is more ubiquitous than being sortable, so fast lookup is likely better accomplished via hash functions), or to declare that the labels are sortable (making failure a user error).\n\nThis stuff causes real problems: since the old python interface for `__cmp__` methods required one to provide non-errors for \"<\" and \">\" testing if one wants to implement \"==\", sage is riddled with apparent implementations of orderings that are in actuality inconsistent. This has cause problems in at least one case, where labels in published tables of elliptic curves were based on non-sensical but assumed-consistent ordering of number field elements:\n\n[https://groups.google.com/forum/#!topic/sage-nt/aP5LP09sADY](https://groups.google.com/forum/#!topic/sage-nt/aP5LP09sADY)\n\nThis has convinced me that the only sane approach is to deprecate \"cmp\" style interfaces as quickly as possible and instead rely on \"richcmp\", with errors for ordering if not obviously correct.",
    "created_at": "2016-12-06T18:50:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324427",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@mezzarobba](#comment:5):
> My main concern right now is that `sage.graphs` heavily relies on sorting lists of vertices, while various other parts of Sage create graphs with vertices that mix Elements with other Python objects.
> 
> An option might be to try again with `key=id` when `sort()` fails, but (with no global understanding of the code, at least) there's a major risk of getting inconsistent orders with different subsets of vertices.

If you have no information on the objects you're sorting, I don't think there is anything that can save you. If your objects are guaranteed to be hashable you could try sorting on the hash, but that will leave your results undefined when hashes clash. In any case, if you rely on "first try what the object implements and then use a fallback if that fails", you're doomed.

In fact, if you allow your vertices to be labelled with arbitrary objects, you're already losing transitivity of equality in sage, via the standard

```
sage: a=GF(3)(1); b =31; c=GF(5)(1)
sage: a==b,b==c,a==c
(True, True, False)
```
It seems that labels get mangled anyway, though, so I think them not being sorted properly is only a minor concern by comparison (sorry):

```
sage: a=GF(3)(1); b =31; c=GF(5)(1)
sage: L=[[a,b,c],[a,c,b],[b,a,c],[b,c,a],[c,a,b],[c,b,a]]
sage: for l in L:
....:     G=Graph()
....:     for i in l:
....:         G.add_vertex(i)
....:     print [parent(j) for j in G.vertices()]
....:     
[<type 'int'>, Integer Ring]
[<type 'int'>, Integer Ring]
[<type 'int'>, Integer Ring]
[<type 'int'>, Integer Ring]
[<type 'int'>, Integer Ring]
[<type 'int'>, Integer Ring]
```
It seems to me the only sane approaches are to not rely on sorting (in python it seems being hashable is more ubiquitous than being sortable, so fast lookup is likely better accomplished via hash functions), or to declare that the labels are sortable (making failure a user error).

This stuff causes real problems: since the old python interface for `__cmp__` methods required one to provide non-errors for "<" and ">" testing if one wants to implement "==", sage is riddled with apparent implementations of orderings that are in actuality inconsistent. This has cause problems in at least one case, where labels in published tables of elliptic curves were based on non-sensical but assumed-consistent ordering of number field elements:

[https://groups.google.com/forum/#!topic/sage-nt/aP5LP09sADY](https://groups.google.com/forum/#!topic/sage-nt/aP5LP09sADY)

This has convinced me that the only sane approach is to deprecate "cmp" style interfaces as quickly as possible and instead rely on "richcmp", with errors for ordering if not obviously correct.



---

archive/issue_comments_324428.json:
```json
{
    "body": "Branch: **[public/ticket/22029-richcmp_fallback](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/22029-richcmp_fallback)**",
    "created_at": "2016-12-14T10:55:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324428",
    "user": "https://github.com/mezzarobba"
}
```

Branch: **[public/ticket/22029-richcmp_fallback](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/22029-richcmp_fallback)**



---

archive/issue_events_305784.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-12-14T10:55:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305784"
}
```



---

archive/issue_comments_324429.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHere is a first attempt. All (standard, long) tests should pass unless I made a last-minute mistake. See the commit messages for some comments. I'm not 100% happy with the changes, but I don't think I can do much better in a reasonable amount of time, feel free to commit improvements to the existing branch!\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d45cd537b2d98c9ddd1edf3e80fc53fff2e296d2\"><code>d45cd53</code></a></td><td><code>CGraphBackend: fix a segfault when given a non-existing vertex</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e0e1b2edff797a7b26ef93f728b67c9b92dce91\"><code>6e0e1b2</code></a></td><td><code>Fix use of comparison in simplicial_complex</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2925d0ff2404d1256c91d2e6e44b0af279b8ca56\"><code>2925d0f</code></a></td><td><code>Bug in Poset.is_slender(?)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b0bcc9f622f04c642940f43d055e9f9e79d3aaf\"><code>2b0bcc9</code></a></td><td><code>Some benign doctest failures related to #22029</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f364217afdb03eb6fba59052e9ea09b904fc3e1\"><code>5f36421</code></a></td><td><code>Ad-hoc comparison functions for graph vertices</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d728fa81a81d57b6524ee6e0c7871351cace42f\"><code>6d728fa</code></a></td><td><code>{c,sparse}_graph: systematically turn integer-like vertices into ints</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcda2c2cc006758f7b8a0d518323bba6e07fb7bc\"><code>fcda2c2</code></a></td><td><code>graph_plot: sort by id</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/127a11d6a23dc84832fa6f33787503eb2bdb288e\"><code>127a11d</code></a></td><td><code>remove or fix some meaningless doctests for cmp()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29fe1f80778d76080bdabaff71126410b479867d\"><code>29fe1f8</code></a></td><td><code>misc fixes after changes to coercion_model.richcmp</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/749dfbe13d7de1a0d520a9eddfd843b8354d8ad6\"><code>749dfbe</code></a></td><td><code>misc fixes after changes to coercion_model.richcmp</code></td></tr></table>\n",
    "created_at": "2016-12-14T10:55:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324429",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:16" align="right">comment:16</div>

Here is a first attempt. All (standard, long) tests should pass unless I made a last-minute mistake. See the commit messages for some comments. I'm not 100% happy with the changes, but I don't think I can do much better in a reasonable amount of time, feel free to commit improvements to the existing branch!

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d45cd537b2d98c9ddd1edf3e80fc53fff2e296d2"><code>d45cd53</code></a></td><td><code>CGraphBackend: fix a segfault when given a non-existing vertex</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e0e1b2edff797a7b26ef93f728b67c9b92dce91"><code>6e0e1b2</code></a></td><td><code>Fix use of comparison in simplicial_complex</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2925d0ff2404d1256c91d2e6e44b0af279b8ca56"><code>2925d0f</code></a></td><td><code>Bug in Poset.is_slender(?)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b0bcc9f622f04c642940f43d055e9f9e79d3aaf"><code>2b0bcc9</code></a></td><td><code>Some benign doctest failures related to #22029</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f364217afdb03eb6fba59052e9ea09b904fc3e1"><code>5f36421</code></a></td><td><code>Ad-hoc comparison functions for graph vertices</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d728fa81a81d57b6524ee6e0c7871351cace42f"><code>6d728fa</code></a></td><td><code>{c,sparse}_graph: systematically turn integer-like vertices into ints</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcda2c2cc006758f7b8a0d518323bba6e07fb7bc"><code>fcda2c2</code></a></td><td><code>graph_plot: sort by id</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/127a11d6a23dc84832fa6f33787503eb2bdb288e"><code>127a11d</code></a></td><td><code>remove or fix some meaningless doctests for cmp()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29fe1f80778d76080bdabaff71126410b479867d"><code>29fe1f8</code></a></td><td><code>misc fixes after changes to coercion_model.richcmp</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/749dfbe13d7de1a0d520a9eddfd843b8354d8ad6"><code>749dfbe</code></a></td><td><code>misc fixes after changes to coercion_model.richcmp</code></td></tr></table>




---

archive/issue_comments_324430.json:
```json
{
    "body": "Commit: **[`749dfbe`](https://github.com/sagemath/sagetrac-mirror/commit/749dfbe13d7de1a0d520a9eddfd843b8354d8ad6)**",
    "created_at": "2016-12-14T10:55:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324430",
    "user": "https://github.com/mezzarobba"
}
```

Commit: **[`749dfbe`](https://github.com/sagemath/sagetrac-mirror/commit/749dfbe13d7de1a0d520a9eddfd843b8354d8ad6)**



---

archive/issue_comments_324431.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI am a strong -1 on the removal of the `!=` tests and the changes of `foo != bar` to (the fugly) `not (foo == bar)`.\n\nThe failures you have in `rigged_configurations.py` is because you moved the definition of `case_S`. You have also made the cases in the code more difficult to follow. Please revert those changes.",
    "created_at": "2016-12-14T15:38:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324431",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

I am a strong -1 on the removal of the `!=` tests and the changes of `foo != bar` to (the fugly) `not (foo == bar)`.

The failures you have in `rigged_configurations.py` is because you moved the definition of `case_S`. You have also made the cases in the code more difficult to follow. Please revert those changes.



---

archive/issue_events_305785.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-12-14T15:38:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305785"
}
```



---

archive/issue_events_305786.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-12-14T15:38:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305786"
}
```



---

archive/issue_comments_324432.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThis is bad:\n\n```\n        # (Note that, when y is not a Sage Element, we may have ended up here\n        # from a call to cmp(). In this case, and in this case only, it may be\n        # better to emulate what Python does and compare by type/id. But we\n        # have no way(?) to distinguish this situation from the \"normal\" case\n        # of a comparison operator.)\n```",
    "created_at": "2016-12-14T15:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324432",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

This is bad:

```
        # (Note that, when y is not a Sage Element, we may have ended up here
        # from a call to cmp(). In this case, and in this case only, it may be
        # better to emulate what Python does and compare by type/id. But we
        # have no way(?) to distinguish this situation from the "normal" case
        # of a comparison operator.)
```



---

archive/issue_comments_324433.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@tscrim](#comment:17):\n> I am a strong -1 on the removal of the `!=` tests and the changes of `foo != bar` to (the fugly) `not (foo == bar)`.\n\nUgly, I agree, but safer in generic code (because of cases where equality is not decidable, like expressions, or where not enough information is available, like with intervals)... And code that might end up comparing objects of different type is generic code.\n\n> The failures you have in `rigged_configurations.py` is because you moved the definition of `case_S`. You have also made the cases in the code more difficult to follow. Please revert those changes.\n\nI might do it, but I'd like first to understand in detail the alternative you are suggesting, and to see some evidence of a consensus that it is a better option.\n\nIn any case, please feel free to commit improvements yourself, and I'll do my best to review them.",
    "created_at": "2016-12-14T17:05:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324433",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@tscrim](#comment:17):
> I am a strong -1 on the removal of the `!=` tests and the changes of `foo != bar` to (the fugly) `not (foo == bar)`.

Ugly, I agree, but safer in generic code (because of cases where equality is not decidable, like expressions, or where not enough information is available, like with intervals)... And code that might end up comparing objects of different type is generic code.

> The failures you have in `rigged_configurations.py` is because you moved the definition of `case_S`. You have also made the cases in the code more difficult to follow. Please revert those changes.

I might do it, but I'd like first to understand in detail the alternative you are suggesting, and to see some evidence of a consensus that it is a better option.

In any case, please feel free to commit improvements yourself, and I'll do my best to review them.



---

archive/issue_comments_324434.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@jdemeyer](#comment:18):\n> This is bad:\n> \n> ```\n>         # (Note that, when y is not a Sage Element, we may have ended up here\n>         # from a call to cmp(). In this case, and in this case only, it may be\n>         # better to emulate what Python does and compare by type/id. But we\n>         # have no way(?) to distinguish this situation from the \"normal\" case\n>         # of a comparison operator.)\n> ```\n\nWhat do you mean? If I understand right, this is an issue that will solve itself if sage ever switches to Python3...",
    "created_at": "2016-12-14T17:06:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324434",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@jdemeyer](#comment:18):
> This is bad:
> 
> ```
>         # (Note that, when y is not a Sage Element, we may have ended up here
>         # from a call to cmp(). In this case, and in this case only, it may be
>         # better to emulate what Python does and compare by type/id. But we
>         # have no way(?) to distinguish this situation from the "normal" case
>         # of a comparison operator.)
> ```

What do you mean? If I understand right, this is an issue that will solve itself if sage ever switches to Python3...



---

archive/issue_comments_324435.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@mezzarobba](#comment:20):\n> If I understand right, this is an issue that will solve itself if sage ever switches to Python3...\n\nGiven that we currently still have Python 2, that's irrelevant.",
    "created_at": "2016-12-15T08:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324435",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@mezzarobba](#comment:20):
> If I understand right, this is an issue that will solve itself if sage ever switches to Python3...

Given that we currently still have Python 2, that's irrelevant.



---

archive/issue_comments_324436.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@jdemeyer](#comment:21):\n> Replying to [@mezzarobba](#comment:20):\n> > If I understand right, this is an issue that will solve itself if sage ever switches to Python3...\n\n> \n> Given that we currently still have Python 2, that's irrelevant.\n\nSorry, I fear I still don't understand your comment. The problem with `cmp()` was the main thing I asked about in the sage-devel post that led to this ticket, and you basically replied that it was okay from your point of view to remove the fallback code from `richcmp`. Now it looks to me like you are saying the contrary.",
    "created_at": "2016-12-15T08:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324436",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@jdemeyer](#comment:21):
> Replying to [@mezzarobba](#comment:20):
> > If I understand right, this is an issue that will solve itself if sage ever switches to Python3...

> 
> Given that we currently still have Python 2, that's irrelevant.

Sorry, I fear I still don't understand your comment. The problem with `cmp()` was the main thing I asked about in the sage-devel post that led to this ticket, and you basically replied that it was okay from your point of view to remove the fallback code from `richcmp`. Now it looks to me like you are saying the contrary.



---

archive/issue_comments_324437.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb9beb5d953a78e7799b5b6f63fe31d21d4abb31\"><code>fb9beb5</code></a></td><td><code>misc fixes after changes to coercion_model.richcmp</code></td></tr></table>\n",
    "created_at": "2016-12-15T09:32:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324437",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb9beb5d953a78e7799b5b6f63fe31d21d4abb31"><code>fb9beb5</code></a></td><td><code>misc fixes after changes to coercion_model.richcmp</code></td></tr></table>




---

archive/issue_comments_324438.json:
```json
{
    "body": "Changed commit from **[`749dfbe`](https://github.com/sagemath/sagetrac-mirror/commit/749dfbe13d7de1a0d520a9eddfd843b8354d8ad6)** to **[`fb9beb5`](https://github.com/sagemath/sagetrac-mirror/commit/fb9beb5d953a78e7799b5b6f63fe31d21d4abb31)**",
    "created_at": "2016-12-15T09:32:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324438",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`749dfbe`](https://github.com/sagemath/sagetrac-mirror/commit/749dfbe13d7de1a0d520a9eddfd843b8354d8ad6)** to **[`fb9beb5`](https://github.com/sagemath/sagetrac-mirror/commit/fb9beb5d953a78e7799b5b6f63fe31d21d4abb31)**



---

archive/issue_comments_324439.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@tscrim](#comment:17):\n> The failures you have in `rigged_configurations.py` is because you moved the definition of `case_S`. You have also made the cases in the code more difficult to follow.\n\nFixed, sorry for the stupid mistake. That's all I did for now. It wouldn't be hard to revert the other changes related to `!=`, but I'm waiting for answers to the follow-up question I just asked on sage-devel.",
    "created_at": "2016-12-15T09:39:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324439",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@tscrim](#comment:17):
> The failures you have in `rigged_configurations.py` is because you moved the definition of `case_S`. You have also made the cases in the code more difficult to follow.

Fixed, sorry for the stupid mistake. That's all I did for now. It wouldn't be hard to revert the other changes related to `!=`, but I'm waiting for answers to the follow-up question I just asked on sage-devel.



---

archive/issue_comments_324440.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e696450f6e118da8add1d9c33d99797e9a5234d\"><code>6e69645</code></a></td><td><code>Elt richcmp: return NotImplemented for non-Elements...</code></td></tr></table>\n",
    "created_at": "2016-12-15T13:59:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324440",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e696450f6e118da8add1d9c33d99797e9a5234d"><code>6e69645</code></a></td><td><code>Elt richcmp: return NotImplemented for non-Elements...</code></td></tr></table>




---

archive/issue_comments_324441.json:
```json
{
    "body": "Changed commit from **[`fb9beb5`](https://github.com/sagemath/sagetrac-mirror/commit/fb9beb5d953a78e7799b5b6f63fe31d21d4abb31)** to **[`6e69645`](https://github.com/sagemath/sagetrac-mirror/commit/6e696450f6e118da8add1d9c33d99797e9a5234d)**",
    "created_at": "2016-12-15T13:59:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324441",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fb9beb5`](https://github.com/sagemath/sagetrac-mirror/commit/fb9beb5d953a78e7799b5b6f63fe31d21d4abb31)** to **[`6e69645`](https://github.com/sagemath/sagetrac-mirror/commit/6e696450f6e118da8add1d9c33d99797e9a5234d)**



---

archive/issue_comments_324442.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nAnother take, now returning `NotImplemented` more often. Due to Jeroen's doubts, I left out the idea of treating `SageObject`s in a special way. I do however handle types such as `int` and `float` like `Element`, since this is what the coercion framework usually does.\n\nThis should make it possible to revert some of my other changes. I haven't done it yet.",
    "created_at": "2016-12-15T14:04:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324442",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:26" align="right">comment:26</div>

Another take, now returning `NotImplemented` more often. Due to Jeroen's doubts, I left out the idea of treating `SageObject`s in a special way. I do however handle types such as `int` and `float` like `Element`, since this is what the coercion framework usually does.

This should make it possible to revert some of my other changes. I haven't done it yet.



---

archive/issue_comments_324443.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@mezzarobba](#comment:26):\n> I do however handle types such as `int` and `float` like `Element`\n> since this is what the coercion framework usually does.\n\nYes, the coercion framework *tries* to coerce those types to a Sage `Element`. However, it doesn't do anything special in the case that such a coercion fails. So I don't see why you should treat the failed-coercion-with-`int`-or-`float` case differently. Just return `NotImplemented` in that case.",
    "created_at": "2016-12-16T06:26:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324443",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@mezzarobba](#comment:26):
> I do however handle types such as `int` and `float` like `Element`
> since this is what the coercion framework usually does.

Yes, the coercion framework *tries* to coerce those types to a Sage `Element`. However, it doesn't do anything special in the case that such a coercion fails. So I don't see why you should treat the failed-coercion-with-`int`-or-`float` case differently. Just return `NotImplemented` in that case.



---

archive/issue_comments_324444.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@jdemeyer](#comment:27):\n> Yes, the coercion framework *tries* to coerce those types to a Sage `Element`. However, it doesn't do anything special in the case that such a coercion fails.\n\nBut the net effect is that arithmetic that mixes `Element`s and objects of these types will succeed or fail (with an error coming from the coercion framework) depending whether there is a common parent or not.\n\n> So I don't see why you should treat the failed-coercion-with-`int`-or-`float` case differently. Just return `NotImplemented` in that case.\n\nDo you really want things like\n\n```\nsage: GF(2)(1) > float(0.)\nTrue\nsage: RBF(0) < float(-1.)\nTrue\nsage: SymmetricGroup(2)(()) != int(1)\nTrue\n```\neven though it takes exactly one LOC to prevent them and analogous code with Sage `Element`s raises an error (so that, in particular, the behavior will be different for preparsed and pure Python code)?",
    "created_at": "2016-12-16T09:12:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324444",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@jdemeyer](#comment:27):
> Yes, the coercion framework *tries* to coerce those types to a Sage `Element`. However, it doesn't do anything special in the case that such a coercion fails.

But the net effect is that arithmetic that mixes `Element`s and objects of these types will succeed or fail (with an error coming from the coercion framework) depending whether there is a common parent or not.

> So I don't see why you should treat the failed-coercion-with-`int`-or-`float` case differently. Just return `NotImplemented` in that case.

Do you really want things like

```
sage: GF(2)(1) > float(0.)
True
sage: RBF(0) < float(-1.)
True
sage: SymmetricGroup(2)(()) != int(1)
True
```
even though it takes exactly one LOC to prevent them and analogous code with Sage `Element`s raises an error (so that, in particular, the behavior will be different for preparsed and pure Python code)?



---

archive/issue_comments_324445.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@mezzarobba](#comment:28):\n> Do you really want things like\n> \n> ```\n> sage: GF(2)(1) > float(0.)\n> True\n> sage: RBF(0) < float(-1.)\n> True\n> sage: SymmetricGroup(2)(()) != int(1)\n> True\n> ```\n\nIn Python 2? Yes, I want that.\n\nIn Python 3? No, I do not want that.",
    "created_at": "2016-12-16T09:33:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324445",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@mezzarobba](#comment:28):
> Do you really want things like
> 
> ```
> sage: GF(2)(1) > float(0.)
> True
> sage: RBF(0) < float(-1.)
> True
> sage: SymmetricGroup(2)(()) != int(1)
> True
> ```

In Python 2? Yes, I want that.

In Python 3? No, I do not want that.



---

archive/issue_comments_324446.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nIn other words: just follow the common Python convention which specifies that a rich comparison (not `__cmp__`) should return `NotImplemented` when it cannot decide a comparison.\n\nThe fact that we directly raise a `TypeError` for Sage Elements is merely a shortcut to get the correct behaviour and to get a nicer error message referring to the parents.",
    "created_at": "2016-12-16T09:35:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324446",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">comment:30</div>

In other words: just follow the common Python convention which specifies that a rich comparison (not `__cmp__`) should return `NotImplemented` when it cannot decide a comparison.

The fact that we directly raise a `TypeError` for Sage Elements is merely a shortcut to get the correct behaviour and to get a nicer error message referring to the parents.



---

archive/issue_comments_324447.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@jdemeyer](#comment:30):\n> In other words: just follow the common Python convention which specifies that a rich comparison (not `__cmp__`) should return `NotImplemented` when it cannot decide a comparison.\n\nI tend to see the situation we are talking about not as one where it can't decide, but as one where it can decide that the comparison doesn't make sense. And not to find \u201cjust follow the Python[2] convention\u201d such a strong argument when Sage already breaks it in much worse ways...",
    "created_at": "2016-12-16T09:44:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324447",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@jdemeyer](#comment:30):
> In other words: just follow the common Python convention which specifies that a rich comparison (not `__cmp__`) should return `NotImplemented` when it cannot decide a comparison.

I tend to see the situation we are talking about not as one where it can't decide, but as one where it can decide that the comparison doesn't make sense. And not to find âjust follow the Python[2] conventionâ such a strong argument when Sage already breaks it in much worse ways...



---

archive/issue_comments_324448.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@mezzarobba](#comment:31):\n> And not to find \u201cjust follow the Python[2] convention\u201d such a strong argument when Sage already breaks it in much worse ways...\n\nHow is it relevant whether or not Sage breaks certain Python conventions in much worse ways?\n\nIf Python specifies how to do arithmetic/comparisons, why not follow that?",
    "created_at": "2016-12-16T09:50:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324448",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@mezzarobba](#comment:31):
> And not to find âjust follow the Python[2] conventionâ such a strong argument when Sage already breaks it in much worse ways...

How is it relevant whether or not Sage breaks certain Python conventions in much worse ways?

If Python specifies how to do arithmetic/comparisons, why not follow that?



---

archive/issue_comments_324449.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@jdemeyer](#comment:32):\n> How is it relevant whether or not Sage breaks certain Python conventions in much worse ways?\n\nWhen you start deviating from the general conventions, \u201cyour\u201d objects already don't interact with the rest of the system as other developers will expect, and your job IMHO is to minimize the damage.\n\nNow, there is no doubt that you have orders of magnitude more experience of Sage development than I'll likely ever do, so I guess I'll follow your advice even without understanding it if that's really the only way. But I'd really prefer (in general: I'm bringing this up because it is not the first time I have trouble understanding your comments) if you could explain **why** you think a certain technical choice is better instead of just stating that it is.",
    "created_at": "2016-12-16T11:28:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324449",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@jdemeyer](#comment:32):
> How is it relevant whether or not Sage breaks certain Python conventions in much worse ways?

When you start deviating from the general conventions, âyourâ objects already don't interact with the rest of the system as other developers will expect, and your job IMHO is to minimize the damage.

Now, there is no doubt that you have orders of magnitude more experience of Sage development than I'll likely ever do, so I guess I'll follow your advice even without understanding it if that's really the only way. But I'd really prefer (in general: I'm bringing this up because it is not the first time I have trouble understanding your comments) if you could explain **why** you think a certain technical choice is better instead of just stating that it is.



---

archive/issue_comments_324450.json:
```json
{
    "body": "Changed commit from **[`6e69645`](https://github.com/sagemath/sagetrac-mirror/commit/6e696450f6e118da8add1d9c33d99797e9a5234d)** to **[`a5a1e2b`](https://github.com/sagemath/sagetrac-mirror/commit/a5a1e2b76332d136936c7cbe94cf42f93ec6203d)**",
    "created_at": "2016-12-16T11:47:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324450",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6e69645`](https://github.com/sagemath/sagetrac-mirror/commit/6e696450f6e118da8add1d9c33d99797e9a5234d)** to **[`a5a1e2b`](https://github.com/sagemath/sagetrac-mirror/commit/a5a1e2b76332d136936c7cbe94cf42f93ec6203d)**



---

archive/issue_comments_324451.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af1a94acf63678dfa1aed791acd4c75404919050\"><code>af1a94a</code></a></td><td><code>Fix use of comparison in simplicial_complex</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/744942c000e044a58bf86d0bb7de441dca39ddb8\"><code>744942c</code></a></td><td><code>Bug in Poset.is_slender(?)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea1910e2a8340179c6aaf8e671ba3c3e3d1860a6\"><code>ea1910e</code></a></td><td><code>Some benign doctest failures related to #22029</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c87d7e38f15c55a6dd6d8cd95fec74c8afdb1ee3\"><code>c87d7e3</code></a></td><td><code>Ad-hoc comparison functions for graph vertices</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/107ad68c5a5549e98d6e7b75dccef66ffafcf754\"><code>107ad68</code></a></td><td><code>{c,sparse}_graph: systematically turn integer-like vertices into ints</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd03cd8f8b6081b75b825bedb03fd435a4ff64af\"><code>fd03cd8</code></a></td><td><code>graph_plot: sort by id</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69cc07407b911ee942965b035b6ea307b7ca4fe8\"><code>69cc074</code></a></td><td><code>remove or fix some meaningless doctests for cmp()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b33f2eb0edb27e4ceb38067467b5539389fb4441\"><code>b33f2eb</code></a></td><td><code>Elt richcmp: return NotImplemented for non-Elements...</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87ca195bbec9a5b2d7e6aafc872f7cdd0867f7f8\"><code>87ca195</code></a></td><td><code>misc fixes after recent changes to coercion_model.richcmp()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5a1e2b76332d136936c7cbe94cf42f93ec6203d\"><code>a5a1e2b</code></a></td><td><code>Jeroen doesn't like this</code></td></tr></table>\n",
    "created_at": "2016-12-16T11:47:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324451",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af1a94acf63678dfa1aed791acd4c75404919050"><code>af1a94a</code></a></td><td><code>Fix use of comparison in simplicial_complex</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/744942c000e044a58bf86d0bb7de441dca39ddb8"><code>744942c</code></a></td><td><code>Bug in Poset.is_slender(?)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea1910e2a8340179c6aaf8e671ba3c3e3d1860a6"><code>ea1910e</code></a></td><td><code>Some benign doctest failures related to #22029</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c87d7e38f15c55a6dd6d8cd95fec74c8afdb1ee3"><code>c87d7e3</code></a></td><td><code>Ad-hoc comparison functions for graph vertices</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/107ad68c5a5549e98d6e7b75dccef66ffafcf754"><code>107ad68</code></a></td><td><code>{c,sparse}_graph: systematically turn integer-like vertices into ints</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd03cd8f8b6081b75b825bedb03fd435a4ff64af"><code>fd03cd8</code></a></td><td><code>graph_plot: sort by id</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69cc07407b911ee942965b035b6ea307b7ca4fe8"><code>69cc074</code></a></td><td><code>remove or fix some meaningless doctests for cmp()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b33f2eb0edb27e4ceb38067467b5539389fb4441"><code>b33f2eb</code></a></td><td><code>Elt richcmp: return NotImplemented for non-Elements...</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87ca195bbec9a5b2d7e6aafc872f7cdd0867f7f8"><code>87ca195</code></a></td><td><code>misc fixes after recent changes to coercion_model.richcmp()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5a1e2b76332d136936c7cbe94cf42f93ec6203d"><code>a5a1e2b</code></a></td><td><code>Jeroen doesn't like this</code></td></tr></table>




---

archive/issue_comments_324452.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nNew version of the complete patch series. Tested without the last commit, not fully with it.\n\nI probably won't have much time to work on this in the coming 6-8 weeks, please feel free to take over if you have improvements to make.",
    "created_at": "2016-12-16T11:51:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324452",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:35" align="right">comment:35</div>

New version of the complete patch series. Tested without the last commit, not fully with it.

I probably won't have much time to work on this in the coming 6-8 weeks, please feel free to take over if you have improvements to make.



---

archive/issue_events_305787.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-12-16T11:51:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305787"
}
```



---

archive/issue_events_305788.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-12-16T11:51:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305788"
}
```



---

archive/issue_comments_324453.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThe \u201cknown bug\u201d is now #22071.",
    "created_at": "2016-12-16T16:32:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324453",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:36" align="right">comment:36</div>

The âknown bugâ is now #22071.



---

archive/issue_comments_324454.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@tscrim](#comment:17):\n> I am a strong -1 on the removal of the `!=` tests and the changes of `foo != bar` to (the fugly) `not (foo == bar)`.\n\nDoes the new version (that returns `NotImplemented` in more cases, so ill-typed comparisons by `!=` will typically succeed when the other member is not an `Element`) address your concerns?",
    "created_at": "2016-12-16T16:40:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324454",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@tscrim](#comment:17):
> I am a strong -1 on the removal of the `!=` tests and the changes of `foo != bar` to (the fugly) `not (foo == bar)`.

Does the new version (that returns `NotImplemented` in more cases, so ill-typed comparisons by `!=` will typically succeed when the other member is not an `Element`) address your concerns?



---

archive/issue_events_305789.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-12-18T12:49:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305789"
}
```



---

archive/issue_events_305790.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-12-18T12:49:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305790"
}
```



---

archive/issue_comments_324455.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-12-18T13:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324455",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_324456.json:
```json
{
    "body": "Changed commit from **[`a5a1e2b`](https://github.com/sagemath/sagetrac-mirror/commit/a5a1e2b76332d136936c7cbe94cf42f93ec6203d)** to **[`87ca195`](https://github.com/sagemath/sagetrac-mirror/commit/87ca195bbec9a5b2d7e6aafc872f7cdd0867f7f8)**",
    "created_at": "2016-12-18T13:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324456",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a5a1e2b`](https://github.com/sagemath/sagetrac-mirror/commit/a5a1e2b76332d136936c7cbe94cf42f93ec6203d)** to **[`87ca195`](https://github.com/sagemath/sagetrac-mirror/commit/87ca195bbec9a5b2d7e6aafc872f7cdd0867f7f8)**



---

archive/issue_comments_324457.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@mezzarobba](#comment:35):\n> New version of the complete patch series. Tested without the last commit, not fully with it.\n\nTurns out there where [test failures](https://patchbot.sagemath.org/log/22029/debian/8.6/x86_64/3.16.0-4-amd64/multscher/2016-12-18%2006:58:35?short) with that commit. Since it is still not clear to me that it is really what we want, I undid it for now.",
    "created_at": "2016-12-18T13:09:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324457",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@mezzarobba](#comment:35):
> New version of the complete patch series. Tested without the last commit, not fully with it.

Turns out there where [test failures](https://patchbot.sagemath.org/log/22029/debian/8.6/x86_64/3.16.0-4-amd64/multscher/2016-12-18%2006:58:35?short) with that commit. Since it is still not clear to me that it is really what we want, I undid it for now.



---

archive/issue_events_305791.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-12-18T13:09:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305791"
}
```



---

archive/issue_events_305792.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-12-18T13:09:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305792"
}
```



---

archive/issue_comments_324458.json:
```json
{
    "body": "Changed keywords from none to **cmp**",
    "created_at": "2017-01-22T17:32:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324458",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from none to **cmp**



---

archive/issue_comments_324459.json:
```json
{
    "body": "Reviewer: **Julian R\u00fcth**",
    "created_at": "2017-01-24T21:31:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324459",
    "user": "https://github.com/saraedum"
}
```

Reviewer: **Julian RÃ¼th**



---

archive/issue_comments_324460.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nI also have trouble seeing why what jdemeyer proposes would be better. For me the proposed changes look fine.",
    "created_at": "2017-01-24T21:31:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324460",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:43" align="right">comment:43</div>

I also have trouble seeing why what jdemeyer proposes would be better. For me the proposed changes look fine.



---

archive/issue_comments_324461.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nIt is plausible that the ad-hoc comparison functions for graph vertices can be simplified (or even removed) thanks to the fact that the general comparison function now returns `NotImplemented` for non-`Elements`. I haven't had time to check yet.\n\nAlso, there are apparently test failures with sage-2.6...\n\nI'll try to work on these issues in 1-2 weeks unless someone beats me to it.",
    "created_at": "2017-01-25T08:41:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324461",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:44" align="right">comment:44</div>

It is plausible that the ad-hoc comparison functions for graph vertices can be simplified (or even removed) thanks to the fact that the general comparison function now returns `NotImplemented` for non-`Elements`. I haven't had time to check yet.

Also, there are apparently test failures with sage-2.6...

I'll try to work on these issues in 1-2 weeks unless someone beats me to it.



---

archive/issue_events_305793.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2017-01-25T08:41:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305793"
}
```



---

archive/issue_events_305794.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2017-01-25T08:41:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305794"
}
```



---

archive/issue_comments_324462.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea99124e08f6b438793a35cc99ad4a4f809764ba\"><code>ea99124</code></a></td><td><code>Merge branch 'public/ticket/22029-richcmp_fallback' in 7.6.b2</code></td></tr></table>\n",
    "created_at": "2017-02-01T20:39:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324462",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea99124e08f6b438793a35cc99ad4a4f809764ba"><code>ea99124</code></a></td><td><code>Merge branch 'public/ticket/22029-richcmp_fallback' in 7.6.b2</code></td></tr></table>




---

archive/issue_comments_324463.json:
```json
{
    "body": "Changed commit from **[`87ca195`](https://github.com/sagemath/sagetrac-mirror/commit/87ca195bbec9a5b2d7e6aafc872f7cdd0867f7f8)** to **[`ea99124`](https://github.com/sagemath/sagetrac-mirror/commit/ea99124e08f6b438793a35cc99ad4a4f809764ba)**",
    "created_at": "2017-02-01T20:39:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324463",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`87ca195`](https://github.com/sagemath/sagetrac-mirror/commit/87ca195bbec9a5b2d7e6aafc872f7cdd0867f7f8)** to **[`ea99124`](https://github.com/sagemath/sagetrac-mirror/commit/ea99124e08f6b438793a35cc99ad4a4f809764ba)**



---

archive/issue_comments_324464.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI just rebased on 7.6.b2 (easily fixed conflict with #22266)",
    "created_at": "2017-02-01T20:40:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324464",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:46" align="right">comment:46</div>

I just rebased on 7.6.b2 (easily fixed conflict with #22266)



---

archive/issue_comments_324465.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nLet me try to \"reboot\" this ticket with a different approach: when coercion fails, assume that elements are different (so `==` and `!=` would not give an error).",
    "created_at": "2017-02-10T13:56:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324465",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47" align="right">comment:47</div>

Let me try to "reboot" this ticket with a different approach: when coercion fails, assume that elements are different (so `==` and `!=` would not give an error).



---

archive/issue_events_305795.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-10T13:56:16Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "title_is": "Element comparisons: never use id()",
    "title_was": "A step toward safer comparisons",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305795"
}
```



---

archive/issue_events_305796.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-10T14:16:35Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "title_is": "Element richcmp: never use id()",
    "title_was": "Element comparisons: never use id()",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305796"
}
```



---

archive/issue_comments_324466.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),\n `coercion_model.richcmp()` should not fall back on comparing by type/id.\n+\n+See also #22344.\n``````\n",
    "created_at": "2017-02-10T14:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324466",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),
 `coercion_model.richcmp()` should not fall back on comparing by type/id.
+
+See also #22344.
``````




---

archive/issue_comments_324467.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nThe good pieces of the current branch should be split up into different tickets. It is doing way too much for one ticket.",
    "created_at": "2017-02-10T14:43:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324467",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:50" align="right">comment:50</div>

The good pieces of the current branch should be split up into different tickets. It is doing way too much for one ticket.



---

archive/issue_comments_324468.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nI might tackle `Parent` (#22344) first. It is a similar but hopefully easier ticket.",
    "created_at": "2017-02-10T14:45:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324468",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:51" align="right">comment:51</div>

I might tackle `Parent` (#22344) first. It is a similar but hopefully easier ticket.



---

archive/issue_comments_324469.json:
```json
{
    "body": "Dependencies: **#22342, #22344, #22346, #22347**",
    "created_at": "2017-02-10T14:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324469",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#22342, #22344, #22346, #22347**



---

archive/issue_comments_324470.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nI hope to have time tomorrow to clean up the branch a little. Then you can do whatever you want with it. But I still think that raising an error when coercion fails *and both objects to be compared are Elements* is a better tradeoff.",
    "created_at": "2017-02-10T14:55:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324470",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:53" align="right">comment:53</div>

I hope to have time tomorrow to clean up the branch a little. Then you can do whatever you want with it. But I still think that raising an error when coercion fails *and both objects to be compared are Elements* is a better tradeoff.



---

archive/issue_comments_324471.json:
```json
{
    "body": "Changed dependencies from **#22342, #22344, #22346, #22347** to none",
    "created_at": "2017-02-10T14:55:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324471",
    "user": "https://github.com/mezzarobba"
}
```

Changed dependencies from **#22342, #22344, #22346, #22347** to none



---

archive/issue_comments_324472.json:
```json
{
    "body": "Dependencies: **#22342, #22344, #22346, #22347**",
    "created_at": "2017-02-10T14:56:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324472",
    "user": "https://github.com/mezzarobba"
}
```

Dependencies: **#22342, #22344, #22346, #22347**



---

archive/issue_comments_324473.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [@mezzarobba](#comment:53):\n> I hope to have time tomorrow to clean up the branch a little. Then you can do whatever you want with it. But I still think that raising an error when coercion fails *and both objects to be compared are Elements* is a better tradeoff.\n\nI (also) think in that case we are safe to conclude that `==` and `!=` should be `False` and `True`, respectively. The coercion framework does not allow us to create a new coercion path after that point IIRC. For `<` and `>`, raising an error is consistent with Python (specifically a `TypeError`).",
    "created_at": "2017-02-10T15:13:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324473",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [@mezzarobba](#comment:53):
> I hope to have time tomorrow to clean up the branch a little. Then you can do whatever you want with it. But I still think that raising an error when coercion fails *and both objects to be compared are Elements* is a better tradeoff.

I (also) think in that case we are safe to conclude that `==` and `!=` should be `False` and `True`, respectively. The coercion framework does not allow us to create a new coercion path after that point IIRC. For `<` and `>`, raising an error is consistent with Python (specifically a `TypeError`).



---

archive/issue_comments_324474.json:
```json
{
    "body": "Changed dependencies from **#22342, #22344, #22346, #22347** to **#22342, #22344, #22346, #22347, #22348**",
    "created_at": "2017-02-10T15:31:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324474",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#22342, #22344, #22346, #22347** to **#22342, #22344, #22346, #22347, #22348**



---

archive/issue_comments_324475.json:
```json
{
    "body": "Changed dependencies from **#22342, #22344, #22346, #22347, #22348** to **#22342, #22344, #22346, #22347, #22348, #22349**",
    "created_at": "2017-02-10T16:09:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324475",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#22342, #22344, #22346, #22347, #22348** to **#22342, #22344, #22346, #22347, #22348, #22349**



---

archive/issue_comments_324476.json:
```json
{
    "body": "Changed dependencies from **#22342, #22344, #22346, #22347, #22348, #22349** to **#22342, #22344, #22346, #22347, #22349**",
    "created_at": "2017-02-10T16:09:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324476",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#22342, #22344, #22346, #22347, #22348, #22349** to **#22342, #22344, #22346, #22347, #22349**



---

archive/issue_comments_324477.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e58fc9637c9e96b8900bb52b4a72f827a7820e82\"><code>e58fc96</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2017-02-10T16:14:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324477",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e58fc9637c9e96b8900bb52b4a72f827a7820e82"><code>e58fc96</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_comments_324478.json:
```json
{
    "body": "Changed commit from **[`ea99124`](https://github.com/sagemath/sagetrac-mirror/commit/ea99124e08f6b438793a35cc99ad4a4f809764ba)** to **[`e58fc96`](https://github.com/sagemath/sagetrac-mirror/commit/e58fc9637c9e96b8900bb52b4a72f827a7820e82)**",
    "created_at": "2017-02-10T16:14:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324478",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ea99124`](https://github.com/sagemath/sagetrac-mirror/commit/ea99124e08f6b438793a35cc99ad4a4f809764ba)** to **[`e58fc96`](https://github.com/sagemath/sagetrac-mirror/commit/e58fc9637c9e96b8900bb52b4a72f827a7820e82)**



---

archive/issue_comments_324479.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@mezzarobba](#comment:53):\n> I hope to have time tomorrow to clean up the branch a little.\n\nIt's not really about cleaning the branch, it's about identifying pieces which make sense to be a new ticket.",
    "created_at": "2017-02-11T08:58:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324479",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@mezzarobba](#comment:53):
> I hope to have time tomorrow to clean up the branch a little.

It's not really about cleaning the branch, it's about identifying pieces which make sense to be a new ticket.



---

archive/issue_comments_324480.json:
```json
{
    "body": "Changed commit from **[`e58fc96`](https://github.com/sagemath/sagetrac-mirror/commit/e58fc9637c9e96b8900bb52b4a72f827a7820e82)** to none",
    "created_at": "2017-02-11T12:43:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324480",
    "user": "https://github.com/mezzarobba"
}
```

Changed commit from **[`e58fc96`](https://github.com/sagemath/sagetrac-mirror/commit/e58fc9637c9e96b8900bb52b4a72f827a7820e82)** to none



---

archive/issue_comments_324481.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nHere is a version that does not require #22349 (nor other intrusive changes to `graphs/`) nor #22346 and passes all (short) tests but one even if we make `a != b` fail when there is no coercion. Which is what the branch currently does, but that shouldn't be hard to change. (Jeroen, I didn't update the dependency list because I don't really known what you have in mind with this ticket; the true dependencies with the current branch are the one that are obvious from the commits.)\n\nPretty much everything is improvable, especially the \u201cmain\u201d commit, but I don't think I have left anything too dirty.\n\nThe one test that fails is:\n\n```\nFile \"src/sage/combinat/integer_vector_weighted.py\", line 272, in sage.combinat.integer_vector_weighted.WeightedIntegerVectors_all.__init__\nFailed example:\n    TestSuite(C).run()\nExpected nothing\nGot:\n    Failure in _test_elements_neq:\n    Traceback (most recent call last):\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py\", line 293, in run\n        test_method(tester = tester)\n      File \"/home/marc/co/sage/local/lib/python2.7/site-packages/sage/categories/sets_cat.py\", line 1330, in _test_elements_neq\n        tester.assertNotEqual(x == y, x != y,\n      File \"sage/structure/element.pyx\", line 1125, in sage.structure.element.Element.__richcmp__ (/home/marc/co/sage/src/build/cythonized/sage/structure/element.c:10379)\n        return coercion_model.richcmp(self, other, op)\n      File \"sage/structure/coerce.pyx\", line 1907, in sage.structure.coerce.CoercionModel_cache_maps.richcmp (/home/marc/co/sage/src/build/cythonized/sage/structure/coerce.c:20514)\n        raise bin_op_exception(_operator_to_string(op), x, y)\n    TypeError: unsupported operand parent(s) for !=: 'Integer vectors of 0 weighted by [2, 1, 3]' and 'Integer vectors of 1 weighted by [2, 1, 3]'\n    ------------------------------------------------------------\n    The following tests failed: _test_elements_neq\n```\n\nReplying to [@jdemeyer](#comment:60):\n> It's not really about cleaning the branch, it's about identifying pieces which make sense to be a new ticket.\n\nI'm not sure I understand the difference. Anyway, all commits except for the last two are intended to be independent. I didn't test them individually, though, and some probably shouldn't be merged separately without adding a test or two. Please feel free to move anything you want to separate tickets.",
    "created_at": "2017-02-11T12:43:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324481",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:61" align="right">comment:61</div>

Here is a version that does not require #22349 (nor other intrusive changes to `graphs/`) nor #22346 and passes all (short) tests but one even if we make `a != b` fail when there is no coercion. Which is what the branch currently does, but that shouldn't be hard to change. (Jeroen, I didn't update the dependency list because I don't really known what you have in mind with this ticket; the true dependencies with the current branch are the one that are obvious from the commits.)

Pretty much everything is improvable, especially the âmainâ commit, but I don't think I have left anything too dirty.

The one test that fails is:

```
File "src/sage/combinat/integer_vector_weighted.py", line 272, in sage.combinat.integer_vector_weighted.WeightedIntegerVectors_all.__init__
Failed example:
    TestSuite(C).run()
Expected nothing
Got:
    Failure in _test_elements_neq:
    Traceback (most recent call last):
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 293, in run
        test_method(tester = tester)
      File "/home/marc/co/sage/local/lib/python2.7/site-packages/sage/categories/sets_cat.py", line 1330, in _test_elements_neq
        tester.assertNotEqual(x == y, x != y,
      File "sage/structure/element.pyx", line 1125, in sage.structure.element.Element.__richcmp__ (/home/marc/co/sage/src/build/cythonized/sage/structure/element.c:10379)
        return coercion_model.richcmp(self, other, op)
      File "sage/structure/coerce.pyx", line 1907, in sage.structure.coerce.CoercionModel_cache_maps.richcmp (/home/marc/co/sage/src/build/cythonized/sage/structure/coerce.c:20514)
        raise bin_op_exception(_operator_to_string(op), x, y)
    TypeError: unsupported operand parent(s) for !=: 'Integer vectors of 0 weighted by [2, 1, 3]' and 'Integer vectors of 1 weighted by [2, 1, 3]'
    ------------------------------------------------------------
    The following tests failed: _test_elements_neq
```

Replying to [@jdemeyer](#comment:60):
> It's not really about cleaning the branch, it's about identifying pieces which make sense to be a new ticket.

I'm not sure I understand the difference. Anyway, all commits except for the last two are intended to be independent. I didn't test them individually, though, and some probably shouldn't be merged separately without adding a test or two. Please feel free to move anything you want to separate tickets.



---

archive/issue_comments_324482.json:
```json
{
    "body": "Changed branch from **[public/ticket/22029-richcmp_fallback](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/22029-richcmp_fallback)** to **[trac/u/mmezzarobba/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/trac/u/mmezzarobba/22029-richcmp)**",
    "created_at": "2017-02-11T12:43:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324482",
    "user": "https://github.com/mezzarobba"
}
```

Changed branch from **[public/ticket/22029-richcmp_fallback](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/22029-richcmp_fallback)** to **[trac/u/mmezzarobba/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/trac/u/mmezzarobba/22029-richcmp)**



---

archive/issue_comments_324483.json:
```json
{
    "body": "Changed branch from **[trac/u/mmezzarobba/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/trac/u/mmezzarobba/22029-richcmp)** to **[u/mmezzarobba/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/22029-richcmp)**",
    "created_at": "2017-02-12T07:17:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324483",
    "user": "https://github.com/mezzarobba"
}
```

Changed branch from **[trac/u/mmezzarobba/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/trac/u/mmezzarobba/22029-richcmp)** to **[u/mmezzarobba/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/22029-richcmp)**



---

archive/issue_comments_324484.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e779b2ccadcb08c1ceae4c59135cdd8f9f26c599\"><code>e779b2c</code></a></td><td><code>FGP_Element: cmp -> richcmp</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5fe7fe57e98ef210eed253736937c9d76535cf3\"><code>a5fe7fe</code></a></td><td><code>linear_expression: cmp -> richcmp</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bff3a1093acaf8b5fb1975bf3cec43d5bdc9d1bb\"><code>bff3a10</code></a></td><td><code>CGraphBackend: fix a segfault when given a non-existing vertex</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c6c86f6caa5c9455e100c0506fbba0357565a7a\"><code>3c6c86f</code></a></td><td><code>Fix use of comparison in simplicial_complex</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6662d83438b36ca9f49db7a5817bb45545a00d73\"><code>6662d83</code></a></td><td><code>Bug in Poset.is_slender(?)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83af7339bcb07e06327a0a3d5350bd4fdad041f7\"><code>83af733</code></a></td><td><code>{c,sparse}_graph: systematically turn integer-like vertices into ints</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/522536878fb810e2f229a53e89f5edc33f589111\"><code>5225368</code></a></td><td><code>graph_plot: sort by id</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/580e2fb49cad996f1c2d8aed29c7f9d6edeff571\"><code>580e2fb</code></a></td><td><code>remove or fix some meaningless doctests for cmp()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9136fa2c9814d38a5cc51546d7e8c701db7b2a9e\"><code>9136fa2</code></a></td><td><code>Don't rich-compare Elements by type/id</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3842d12db9c2ae70dfd38acbed0002a2f6cd0b71\"><code>3842d12</code></a></td><td><code>Additional changes to allow element != obj to raise an error</code></td></tr></table>\n",
    "created_at": "2017-02-12T07:17:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324484",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:62" align="right">comment:62</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e779b2ccadcb08c1ceae4c59135cdd8f9f26c599"><code>e779b2c</code></a></td><td><code>FGP_Element: cmp -> richcmp</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5fe7fe57e98ef210eed253736937c9d76535cf3"><code>a5fe7fe</code></a></td><td><code>linear_expression: cmp -> richcmp</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bff3a1093acaf8b5fb1975bf3cec43d5bdc9d1bb"><code>bff3a10</code></a></td><td><code>CGraphBackend: fix a segfault when given a non-existing vertex</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c6c86f6caa5c9455e100c0506fbba0357565a7a"><code>3c6c86f</code></a></td><td><code>Fix use of comparison in simplicial_complex</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6662d83438b36ca9f49db7a5817bb45545a00d73"><code>6662d83</code></a></td><td><code>Bug in Poset.is_slender(?)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83af7339bcb07e06327a0a3d5350bd4fdad041f7"><code>83af733</code></a></td><td><code>{c,sparse}_graph: systematically turn integer-like vertices into ints</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/522536878fb810e2f229a53e89f5edc33f589111"><code>5225368</code></a></td><td><code>graph_plot: sort by id</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/580e2fb49cad996f1c2d8aed29c7f9d6edeff571"><code>580e2fb</code></a></td><td><code>remove or fix some meaningless doctests for cmp()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9136fa2c9814d38a5cc51546d7e8c701db7b2a9e"><code>9136fa2</code></a></td><td><code>Don't rich-compare Elements by type/id</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3842d12db9c2ae70dfd38acbed0002a2f6cd0b71"><code>3842d12</code></a></td><td><code>Additional changes to allow element != obj to raise an error</code></td></tr></table>




---

archive/issue_comments_324485.json:
```json
{
    "body": "Commit: **[`3842d12`](https://github.com/sagemath/sagetrac-mirror/commit/3842d12db9c2ae70dfd38acbed0002a2f6cd0b71)**",
    "created_at": "2017-02-12T07:17:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324485",
    "user": "https://github.com/mezzarobba"
}
```

Commit: **[`3842d12`](https://github.com/sagemath/sagetrac-mirror/commit/3842d12db9c2ae70dfd38acbed0002a2f6cd0b71)**



---

archive/issue_comments_324486.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nApparently the failure in `integer_vector_weighted` is due to the fact that `DisjointUnionEnumeratedSets(facade=True)` are parents that can construct elements whose parents differ from the parent that constructed them:\n\n```\nsage: V = WeightedIntegerVectors([2,1,3])\nsage: V.an_element().parent() is V\nFalse\n```\nI don't know what to do to fix the issue. Should there be a coercion from `WeightedIntegerVectors(n, w)` to `WeightedIntegerVectors_all(w)`? (It may not be easy to set up one, since as far as I understand it is currently not possible to create elements with `elt.parent() == WeightedIntegerVectors_all(w)` using normal mechanisms, one would have to construct them manually.) Should `DisjointUnionEnumeratedSets` override the test suite? Should `WeightedIntegerVectors` use `facade=False`?...",
    "created_at": "2017-02-12T08:47:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324486",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:63" align="right">comment:63</div>

Apparently the failure in `integer_vector_weighted` is due to the fact that `DisjointUnionEnumeratedSets(facade=True)` are parents that can construct elements whose parents differ from the parent that constructed them:

```
sage: V = WeightedIntegerVectors([2,1,3])
sage: V.an_element().parent() is V
False
```
I don't know what to do to fix the issue. Should there be a coercion from `WeightedIntegerVectors(n, w)` to `WeightedIntegerVectors_all(w)`? (It may not be easy to set up one, since as far as I understand it is currently not possible to create elements with `elt.parent() == WeightedIntegerVectors_all(w)` using normal mechanisms, one would have to construct them manually.) Should `DisjointUnionEnumeratedSets` override the test suite? Should `WeightedIntegerVectors` use `facade=False`?...



---

archive/issue_comments_324487.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nFor example, the following patch seems to solve the issue, but it is a bit too complicated and fragile to my taste. Do you think it is worth spending time adding docstrings?\n\n{{{ #!diff\n--- a/src/sage/combinat/integer_vector_weighted.py\n+++ b/src/sage/combinat/integer_vector_weighted.py\n@@ -16,8 +16,11 @@ AUTHORS:\n #*****************************************************************************\n from `__future__` import print_function, absolute_import\n \n+from sage.structure.coerce_maps import CallableConvertMap\n from sage.structure.unique_representation import UniqueRepresentation\n from sage.structure.parent import Parent\n+from sage.categories.pushout import ConstructionFunctor, IdentityConstructionFunctor\n+from sage.categories.enumerated_sets import EnumeratedSets\n from sage.categories.finite_enumerated_sets import FiniteEnumeratedSets\n from sage.categories.infinite_enumerated_sets import InfiniteEnumeratedSets\n from sage.categories.sets_with_grading import SetsWithGrading\n@@ -28,6 +31,20 @@ from sage.combinat.integer_vector import IntegerVector\n from sage.combinat.words.word import Word\n from sage.combinat.permutation import Permutation\n \n+class WeightedIntegerVectorFunctor(ConstructionFunctor):\n+    rank = 11\n+    coercion_reversed = True\n+    def __init__(self, n):\n+        self.n = n\n+        ConstructionFunctor.__init__(self, EnumeratedSets(), EnumeratedSets())\n+    def _apply_functor(self, all_vectors):\n+        return WeightedIntegerVectors(self.n, all_vectors._weights)\n+    def __eq__(self, other):\n+        return (isinstance(other, WeightedIntegerVectorFunctor)\n+                and other.n == self.n)\n+    def merge(self, other):\n+        if isinstance(other, WeightedIntegerVectorFunctor):\n+            return IdentityConstructionFunctor()\n \n class WeightedIntegerVectors(Parent, UniqueRepresentation):\n     r\"\"\"\n@@ -111,9 +128,16 @@ class WeightedIntegerVectors(Parent, UniqueRepresentation):\n         self._n = n\n         self._weights = weight\n         Parent.__init__(self, category=FiniteEnumeratedSets())\n+        all_vectors = WeightedIntegerVectors_all(self._weights)\n+        emb = CallableConvertMap(self, all_vectors, IntegerVector)\n+        self._populate_coercion_lists_(embedding=emb)\n \n     Element = IntegerVector\n \n+    def construction(self):\n+        return (WeightedIntegerVectorFunctor(self._n),\n+                WeightedIntegerVectors_all(self._weights))\n+\n     def _element_constructor_(self, lst):\n         \"\"\"\n         Construct an element of ``self`` from ``lst``.\n}}}",
    "created_at": "2017-02-12T09:41:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324487",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:64" align="right">comment:64</div>

For example, the following patch seems to solve the issue, but it is a bit too complicated and fragile to my taste. Do you think it is worth spending time adding docstrings?

{{{ #!diff
--- a/src/sage/combinat/integer_vector_weighted.py
+++ b/src/sage/combinat/integer_vector_weighted.py
@@ -16,8 +16,11 @@ AUTHORS:
 #*****************************************************************************
 from `__future__` import print_function, absolute_import
 
+from sage.structure.coerce_maps import CallableConvertMap
 from sage.structure.unique_representation import UniqueRepresentation
 from sage.structure.parent import Parent
+from sage.categories.pushout import ConstructionFunctor, IdentityConstructionFunctor
+from sage.categories.enumerated_sets import EnumeratedSets
 from sage.categories.finite_enumerated_sets import FiniteEnumeratedSets
 from sage.categories.infinite_enumerated_sets import InfiniteEnumeratedSets
 from sage.categories.sets_with_grading import SetsWithGrading
@@ -28,6 +31,20 @@ from sage.combinat.integer_vector import IntegerVector
 from sage.combinat.words.word import Word
 from sage.combinat.permutation import Permutation
 
+class WeightedIntegerVectorFunctor(ConstructionFunctor):
+    rank = 11
+    coercion_reversed = True
+    def __init__(self, n):
+        self.n = n
+        ConstructionFunctor.__init__(self, EnumeratedSets(), EnumeratedSets())
+    def _apply_functor(self, all_vectors):
+        return WeightedIntegerVectors(self.n, all_vectors._weights)
+    def __eq__(self, other):
+        return (isinstance(other, WeightedIntegerVectorFunctor)
+                and other.n == self.n)
+    def merge(self, other):
+        if isinstance(other, WeightedIntegerVectorFunctor):
+            return IdentityConstructionFunctor()
 
 class WeightedIntegerVectors(Parent, UniqueRepresentation):
     r"""
@@ -111,9 +128,16 @@ class WeightedIntegerVectors(Parent, UniqueRepresentation):
         self._n = n
         self._weights = weight
         Parent.__init__(self, category=FiniteEnumeratedSets())
+        all_vectors = WeightedIntegerVectors_all(self._weights)
+        emb = CallableConvertMap(self, all_vectors, IntegerVector)
+        self._populate_coercion_lists_(embedding=emb)
 
     Element = IntegerVector
 
+    def construction(self):
+        return (WeightedIntegerVectorFunctor(self._n),
+                WeightedIntegerVectors_all(self._weights))
+
     def _element_constructor_(self, lst):
         """
         Construct an element of ``self`` from ``lst``.
}}}



---

archive/issue_comments_324488.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@mezzarobba](#comment:61):\n> Please feel free to move anything you want to separate tickets.\n\nOK, I just created #22367, #22368, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376. Please set the tickets that you want reviewed to needs_review.",
    "created_at": "2017-02-12T18:11:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324488",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@mezzarobba](#comment:61):
> Please feel free to move anything you want to separate tickets.

OK, I just created #22367, #22368, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376. Please set the tickets that you want reviewed to needs_review.



---

archive/issue_comments_324489.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nI would say this is a bigger underlying problem with `DisjointUnionEnumeratedSets`. This comes from its doc:\n\n```\nsage: class MyUnion(DisjointUnionEnumeratedSets):\n....:   def __init__(self):\n....:       DisjointUnionEnumeratedSets.__init__(self,\n....:            Family([1,2], Permutations))\nsage: pp = MyUnion()\nsage: pp.list()\n[[1], [1, 2], [2, 1]]\n```\nWe have\n\n```\nsage: pp.list()[0].parent()\nStandard permutations of 1\n```\nI suspect the biggest problem comes from the fact it does pass the facade option to the category framework. I think your solution is too specific and somewhat over-engineered. While I think there should be an easy mechanism for allowing coercions when we have a non-facade parent, that seems to be tangent to the problem at hand.\n\nThe fact that this is causing a problem with a `!=` test is worrisome to me too that there is something subtle not caught by your branch. In particular, you can have `!=` that results in an error, which I strongly believe should never happen.\n\nI also disagree with the change in `!=` test; we should at least make the `DummyParent` compare by id so the test remains valid.",
    "created_at": "2017-02-12T18:39:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324489",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:66" align="right">comment:66</div>

I would say this is a bigger underlying problem with `DisjointUnionEnumeratedSets`. This comes from its doc:

```
sage: class MyUnion(DisjointUnionEnumeratedSets):
....:   def __init__(self):
....:       DisjointUnionEnumeratedSets.__init__(self,
....:            Family([1,2], Permutations))
sage: pp = MyUnion()
sage: pp.list()
[[1], [1, 2], [2, 1]]
```
We have

```
sage: pp.list()[0].parent()
Standard permutations of 1
```
I suspect the biggest problem comes from the fact it does pass the facade option to the category framework. I think your solution is too specific and somewhat over-engineered. While I think there should be an easy mechanism for allowing coercions when we have a non-facade parent, that seems to be tangent to the problem at hand.

The fact that this is causing a problem with a `!=` test is worrisome to me too that there is something subtle not caught by your branch. In particular, you can have `!=` that results in an error, which I strongly believe should never happen.

I also disagree with the change in `!=` test; we should at least make the `DummyParent` compare by id so the test remains valid.



---

archive/issue_comments_324490.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nThanks for your commments.\n\nReplying to [@tscrim](#comment:66):\n> I suspect the biggest problem comes from the fact it does pass the facade option to the category framework. I think your solution is too specific and somewhat over-engineered.\n\nI agree `:-)`. But I don't know what else to do.\n\n> The fact that this is causing a problem with a `!=` test is worrisome to me too that there is something subtle not caught by your branch. In particular, you can have `!=` that results in an error, which I strongly believe should never happen.\n\nYes, I know we disagree about that. I kept this behavior for now to see how much trouble it would cause, but I can live with a variant that never fails...\n\n> I also disagree with the change in `!=` test; we should at least make the `DummyParent` compare by id so the test remains valid.\n\nI don't see which change you are talking about, sorry.",
    "created_at": "2017-02-12T20:16:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324490",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:67" align="right">comment:67</div>

Thanks for your commments.

Replying to [@tscrim](#comment:66):
> I suspect the biggest problem comes from the fact it does pass the facade option to the category framework. I think your solution is too specific and somewhat over-engineered.

I agree `:-)`. But I don't know what else to do.

> The fact that this is causing a problem with a `!=` test is worrisome to me too that there is something subtle not caught by your branch. In particular, you can have `!=` that results in an error, which I strongly believe should never happen.

Yes, I know we disagree about that. I kept this behavior for now to see how much trouble it would cause, but I can live with a variant that never fails...

> I also disagree with the change in `!=` test; we should at least make the `DummyParent` compare by id so the test remains valid.

I don't see which change you are talking about, sorry.



---

archive/issue_comments_324491.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [@jdemeyer](#comment:65):\n> Please set the tickets that you want reviewed to needs_review.\n\nDone, thanks.",
    "created_at": "2017-02-12T20:16:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324491",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [@jdemeyer](#comment:65):
> Please set the tickets that you want reviewed to needs_review.

Done, thanks.



---

archive/issue_comments_324492.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@tscrim](#comment:66):\n> I suspect the biggest problem comes from the fact it does pass the facade option to the category framework. I think your solution is too specific and somewhat over-engineered. While I think there should be an easy mechanism for allowing coercions when we have a non-facade parent, that seems to be tangent to the problem at hand.\n> \n> The fact that this is causing a problem with a `!=` test is worrisome to me too that there is something subtle not caught by your branch. In particular, you can have `!=` that results in an error, which I strongly believe should never happen.\n\nI forgot to ask: are weighted integer vectors intended to be comparable by `<` etc.? If not, i.e. if the only issue is comparison by `!=`, and if we agree that `!=` should never fail, then we can indeed ignore the problem for this ticket.",
    "created_at": "2017-02-12T20:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324492",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@tscrim](#comment:66):
> I suspect the biggest problem comes from the fact it does pass the facade option to the category framework. I think your solution is too specific and somewhat over-engineered. While I think there should be an easy mechanism for allowing coercions when we have a non-facade parent, that seems to be tangent to the problem at hand.
> 
> The fact that this is causing a problem with a `!=` test is worrisome to me too that there is something subtle not caught by your branch. In particular, you can have `!=` that results in an error, which I strongly believe should never happen.

I forgot to ask: are weighted integer vectors intended to be comparable by `<` etc.? If not, i.e. if the only issue is comparison by `!=`, and if we agree that `!=` should never fail, then we can indeed ignore the problem for this ticket.



---

archive/issue_comments_324493.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nReplying to [@mezzarobba](#comment:67):\n> Thanks for your commments.\n> \n> Replying to [@tscrim](#comment:66):\n> > I suspect the biggest problem comes from the fact it does pass the facade option to the category framework. I think your solution is too specific and somewhat over-engineered.\n\n> \n> I agree `:-)`. But I don't know what else to do.\n\nI have an idea. I should be able to fix it tomorrow (which I will do on a separate ticket).\n\n> > The fact that this is causing a problem with a `!=` test is worrisome to me too that there is something subtle not caught by your branch. In particular, you can have `!=` that results in an error, which I strongly believe should never happen.\n\n> \n> Yes, I know we disagree about that. I kept this behavior for now to see how much trouble it would cause, but I can live with a variant that never fails...\n\nOkay, I wasn't sure about on a quick skim-over what behavior you were trying to support.\n\n> > I also disagree with the change in `!=` test; we should at least make the `DummyParent` compare by id so the test remains valid.\n\n> \n> I don't see which change you are talking about, sorry.\n\n```diff\ndiff --git a/src/sage/structure/element_wrapper.pyx b/src/sage/structure/element_wrapper.pyx\nindex c24a33c..801f524 100644\n--- a/src/sage/structure/element_wrapper.pyx\n+++ b/src/sage/structure/element_wrapper.pyx\n@@ -327,7 +327,10 @@ cdef class ElementWrapper(Element):\n             sage: l11 != l12\n             True\n             sage: l11 != l21\n-            True\n+            Traceback (most recent call last):\n+            ...\n+            TypeError: unsupported operand parent(s) for !=: 'A parent' and\n+            'Another parent'\n \n         Testing less than::\n \n```\nI believe this fails because the `DummyParent` doesn't have comparisons.\n\nReplying to [@mezzarobba](#comment:69):\n> I forgot to ask: are weighted integer vectors intended to be comparable by < etc.? If not, i.e. if the only issue is comparison by !=, and if we agree that != should never fail, then we can indeed ignore the problem for this ticket. \n\nIt should be lex ordering, which should be inherited from `ClonableArray`.",
    "created_at": "2017-02-13T03:51:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324493",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:70" align="right">comment:70</div>

Replying to [@mezzarobba](#comment:67):
> Thanks for your commments.
> 
> Replying to [@tscrim](#comment:66):
> > I suspect the biggest problem comes from the fact it does pass the facade option to the category framework. I think your solution is too specific and somewhat over-engineered.

> 
> I agree `:-)`. But I don't know what else to do.

I have an idea. I should be able to fix it tomorrow (which I will do on a separate ticket).

> > The fact that this is causing a problem with a `!=` test is worrisome to me too that there is something subtle not caught by your branch. In particular, you can have `!=` that results in an error, which I strongly believe should never happen.

> 
> Yes, I know we disagree about that. I kept this behavior for now to see how much trouble it would cause, but I can live with a variant that never fails...

Okay, I wasn't sure about on a quick skim-over what behavior you were trying to support.

> > I also disagree with the change in `!=` test; we should at least make the `DummyParent` compare by id so the test remains valid.

> 
> I don't see which change you are talking about, sorry.

```diff
diff --git a/src/sage/structure/element_wrapper.pyx b/src/sage/structure/element_wrapper.pyx
index c24a33c..801f524 100644
--- a/src/sage/structure/element_wrapper.pyx
+++ b/src/sage/structure/element_wrapper.pyx
@@ -327,7 +327,10 @@ cdef class ElementWrapper(Element):
             sage: l11 != l12
             True
             sage: l11 != l21
-            True
+            Traceback (most recent call last):
+            ...
+            TypeError: unsupported operand parent(s) for !=: 'A parent' and
+            'Another parent'
 
         Testing less than::
 
```
I believe this fails because the `DummyParent` doesn't have comparisons.

Replying to [@mezzarobba](#comment:69):
> I forgot to ask: are weighted integer vectors intended to be comparable by < etc.? If not, i.e. if the only issue is comparison by !=, and if we agree that != should never fail, then we can indeed ignore the problem for this ticket. 

It should be lex ordering, which should be inherited from `ClonableArray`.



---

archive/issue_comments_324494.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [@mezzarobba](#comment:68):\n> Replying to [@jdemeyer](#comment:65):\n> > Please set the tickets that you want reviewed to needs_review.\n\n> \n> Done, thanks.\n\nCould you also remove those commits from the branch on this ticket?",
    "created_at": "2017-02-13T07:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324494",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [@mezzarobba](#comment:68):
> Replying to [@jdemeyer](#comment:65):
> > Please set the tickets that you want reviewed to needs_review.

> 
> Done, thanks.

Could you also remove those commits from the branch on this ticket?



---

archive/issue_comments_324495.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nThe fundamental difference between my branch and your branch is that my branch does *not* fall back to `__cmp__` if rich comparison fails. Given that `__cmp__` will go away anyway in Python 3, I strongly disagree with relying on `__cmp__` for rich comparisons. That will make it even harder to get rid of Python 2 `__cmp__` comparisons.",
    "created_at": "2017-02-13T09:18:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324495",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:72" align="right">comment:72</div>

The fundamental difference between my branch and your branch is that my branch does *not* fall back to `__cmp__` if rich comparison fails. Given that `__cmp__` will go away anyway in Python 3, I strongly disagree with relying on `__cmp__` for rich comparisons. That will make it even harder to get rid of Python 2 `__cmp__` comparisons.



---

archive/issue_comments_324496.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nNot sure what are real dependencies and what not, so I'm just listing all potentially relevant tickets in the ticket description.",
    "created_at": "2017-02-13T09:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324496",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:73" align="right">comment:73</div>

Not sure what are real dependencies and what not, so I'm just listing all potentially relevant tickets in the ticket description.



---

archive/issue_comments_324497.json:
```json
{
    "body": "Changed dependencies from **#22342, #22344, #22346, #22347, #22349** to none",
    "created_at": "2017-02-13T09:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324497",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#22342, #22344, #22346, #22347, #22349** to none



---

archive/issue_comments_324498.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),\n `coercion_model.richcmp()` should not fall back on comparing by type/id.\n \n-See also #22344.\n+See also #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376.\n``````\n",
    "created_at": "2017-02-13T09:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324498",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),
 `coercion_model.richcmp()` should not fall back on comparing by type/id.
 
-See also #22344.
+See also #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376.
``````




---

archive/issue_comments_324499.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nReplying to [@jdemeyer](#comment:72):\n> The fundamental difference between my branch and your branch is that my branch does *not* fall back to `__cmp__` if rich comparison fails. Given that `__cmp__` will go away anyway in Python 3, I strongly disagree with relying on `__cmp__` for rich comparisons. That will make it even harder to get rid of Python 2 `__cmp__` comparisons.\n\nI fear I don't understand what you mean. If you're talking about the fact that my version of richcmp can return `NotImplemented` in some cases, that's something I added following your suggestion on sage-devel...",
    "created_at": "2017-02-14T18:54:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324499",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:74" align="right">comment:74</div>

Replying to [@jdemeyer](#comment:72):
> The fundamental difference between my branch and your branch is that my branch does *not* fall back to `__cmp__` if rich comparison fails. Given that `__cmp__` will go away anyway in Python 3, I strongly disagree with relying on `__cmp__` for rich comparisons. That will make it even harder to get rid of Python 2 `__cmp__` comparisons.

I fear I don't understand what you mean. If you're talking about the fact that my version of richcmp can return `NotImplemented` in some cases, that's something I added following your suggestion on sage-devel...



---

archive/issue_comments_324500.json:
```json
{
    "body": "Changed commit from **[`3842d12`](https://github.com/sagemath/sagetrac-mirror/commit/3842d12db9c2ae70dfd38acbed0002a2f6cd0b71)** to **[`33e88b0`](https://github.com/sagemath/sagetrac-mirror/commit/33e88b0c7b9d4ce464fd55da6725751b478f7662)**",
    "created_at": "2017-02-14T19:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324500",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3842d12`](https://github.com/sagemath/sagetrac-mirror/commit/3842d12db9c2ae70dfd38acbed0002a2f6cd0b71)** to **[`33e88b0`](https://github.com/sagemath/sagetrac-mirror/commit/33e88b0c7b9d4ce464fd55da6725751b478f7662)**



---

archive/issue_comments_324501.json:
```json
{
    "body": "<div id=\"comment:75\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ac003d5eeeb95eca72b2b51ce9bf42d14ebc019\"><code>9ac003d</code></a></td><td><code>Fix use of comparison in simplicial_complex</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/47969450c6e7e449a126438d55fcdaf040a281ac\"><code>4796945</code></a></td><td><code>Bug in Poset.is_slender(?)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/983e6607b6dcdf7f719e79f5ce09f2875ba7c876\"><code>983e660</code></a></td><td><code>graph_plot: sort by id</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30d9fb0a71e3c7ad87ff2636ffd31c510b6e0133\"><code>30d9fb0</code></a></td><td><code>remove or fix some meaningless doctests for cmp()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d2d496b7adb3d650b3f881708961571e5a95f6a\"><code>6d2d496</code></a></td><td><code>#22376: additional change at Travis' request</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61feee1b49d9314f9548a54fe866ba98ba142f1a\"><code>61feee1</code></a></td><td><code>{c,sparse}_graph: systematically turn integer-like vertices into ints</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/918a0cb578308733c18d57aa4e14413c0ea6f008\"><code>918a0cb</code></a></td><td><code>linear_expression: cmp -> richcmp</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a240cc9f8affcbdcd9f0656fc5870e4f8806117\"><code>7a240cc</code></a></td><td><code>Merge dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8530b0502f0018876d981c7422271e896b21b9a2\"><code>8530b05</code></a></td><td><code>Don't rich-compare Elements by type/id</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33e88b0c7b9d4ce464fd55da6725751b478f7662\"><code>33e88b0</code></a></td><td><code>Additional changes to allow element != obj to raise an error</code></td></tr></table>\n",
    "created_at": "2017-02-14T19:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324501",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:75"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ac003d5eeeb95eca72b2b51ce9bf42d14ebc019"><code>9ac003d</code></a></td><td><code>Fix use of comparison in simplicial_complex</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/47969450c6e7e449a126438d55fcdaf040a281ac"><code>4796945</code></a></td><td><code>Bug in Poset.is_slender(?)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/983e6607b6dcdf7f719e79f5ce09f2875ba7c876"><code>983e660</code></a></td><td><code>graph_plot: sort by id</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30d9fb0a71e3c7ad87ff2636ffd31c510b6e0133"><code>30d9fb0</code></a></td><td><code>remove or fix some meaningless doctests for cmp()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d2d496b7adb3d650b3f881708961571e5a95f6a"><code>6d2d496</code></a></td><td><code>#22376: additional change at Travis' request</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61feee1b49d9314f9548a54fe866ba98ba142f1a"><code>61feee1</code></a></td><td><code>{c,sparse}_graph: systematically turn integer-like vertices into ints</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/918a0cb578308733c18d57aa4e14413c0ea6f008"><code>918a0cb</code></a></td><td><code>linear_expression: cmp -> richcmp</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a240cc9f8affcbdcd9f0656fc5870e4f8806117"><code>7a240cc</code></a></td><td><code>Merge dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8530b0502f0018876d981c7422271e896b21b9a2"><code>8530b05</code></a></td><td><code>Don't rich-compare Elements by type/id</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33e88b0c7b9d4ce464fd55da6725751b478f7662"><code>33e88b0</code></a></td><td><code>Additional changes to allow element != obj to raise an error</code></td></tr></table>




---

archive/issue_comments_324502.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nReplying to [@mezzarobba](#comment:74):\n> If you're talking about the fact that my version of richcmp can return `NotImplemented` in some cases\n\nYes, I am talking about that. When Python sees `NotImplemented`, it will call `__cmp__`.\n\n> that's something I added following your suggestion on sage-devel...\n\nWell, I don't remember what you refer to, but that was not such a good suggestion then...",
    "created_at": "2017-02-14T20:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324502",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:76" align="right">comment:76</div>

Replying to [@mezzarobba](#comment:74):
> If you're talking about the fact that my version of richcmp can return `NotImplemented` in some cases

Yes, I am talking about that. When Python sees `NotImplemented`, it will call `__cmp__`.

> that's something I added following your suggestion on sage-devel...

Well, I don't remember what you refer to, but that was not such a good suggestion then...



---

archive/issue_comments_324503.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nThe `DisjointUnionEnumeratedSets` issue is now #22382.",
    "created_at": "2017-02-14T23:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324503",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:77" align="right">comment:77</div>

The `DisjointUnionEnumeratedSets` issue is now #22382.



---

archive/issue_comments_324504.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),\n `coercion_model.richcmp()` should not fall back on comparing by type/id.\n \n-See also #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376.\n+See also #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382.\n``````\n",
    "created_at": "2017-02-14T23:11:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324504",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),
 `coercion_model.richcmp()` should not fall back on comparing by type/id.
 
-See also #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376.
+See also #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382.
``````




---

archive/issue_comments_324505.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [@jdemeyer](#comment:76):\n> > that's something I added following your suggestion on sage-devel...\n\n> \n> Well, I don't remember what you refer to, but that was not such a good suggestion then...\n\n`<585262E2.3060709@cage.ugent.be>` / https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ",
    "created_at": "2017-02-15T07:23:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324505",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [@jdemeyer](#comment:76):
> > that's something I added following your suggestion on sage-devel...

> 
> Well, I don't remember what you refer to, but that was not such a good suggestion then...

`<585262E2.3060709@cage.ugent.be>` / https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ



---

archive/issue_comments_324506.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),\n `coercion_model.richcmp()` should not fall back on comparing by type/id.\n \n-See also #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382.\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382.\n``````\n",
    "created_at": "2017-02-15T08:21:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324506",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),
 `coercion_model.richcmp()` should not fall back on comparing by type/id.
 
-See also #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382.
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382.
``````




---

archive/issue_comments_324507.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nReplying to [@mezzarobba](#comment:78):\n> `<585262E2.3060709@cage.ugent.be>` / https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ\n\nRight. What I said there makes sense in principle in a world where only Python 2 exists.\n\nI did not think of the Python 3 porting in that thread. Given that we are moving to Python 3, we might as well start implementing Python 3 semantics for comparisons, which means raising an error when a comparison makes no sense.",
    "created_at": "2017-02-15T08:27:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324507",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:80" align="right">comment:80</div>

Replying to [@mezzarobba](#comment:78):
> `<585262E2.3060709@cage.ugent.be>` / https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ

Right. What I said there makes sense in principle in a world where only Python 2 exists.

I did not think of the Python 3 porting in that thread. Given that we are moving to Python 3, we might as well start implementing Python 3 semantics for comparisons, which means raising an error when a comparison makes no sense.



---

archive/issue_comments_324508.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nTo add to my last comment: we certainly should not make changes which will make the Python 3 porting *even harder*. I am afraid that your branch does that, since you rely more on the implementation of old-style Python 2 comparisons.",
    "created_at": "2017-02-15T10:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324508",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:81" align="right">comment:81</div>

To add to my last comment: we certainly should not make changes which will make the Python 3 porting *even harder*. I am afraid that your branch does that, since you rely more on the implementation of old-style Python 2 comparisons.



---

archive/issue_comments_324509.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nReplying to [@jdemeyer](#comment:81):\n> I am afraid that your branch does that, since you rely more on the implementation of old-style Python 2 comparisons.\n\nPerhaps indeed, I'm not sure. Note that my version only returns `NotImplemented` when comparing an `Element` with something else. This by itself is correct (and perhaps desirable) in Python3 too, isn't it? The only thing that will change if what Python will do as a result.\n\nI have no clear opinion regarding whether it is better to return `NotImplemented` or to fail, and I trust you to know the details of Python3 comparison semantics better than me. The only thing I really care about is that nonsensical comparisons between Elements raise an exception.\n\nHowever, I expect that raising an exception will break more existing code. Based on what I recall of the first version of my branch, the typical situation where falling back to the default Python2 comparison can help is with graphs or other combinatorial objects with labels that want to compare Elements with strings or with tuples. So, more than making Python3 porting harder, I think my version delays some of the issues with existing code to the actual porting.\n\nI'm not going to try going back to a version that doesn't use `NotImplemented` in the next few days. But if you have one that works well, I could try to find time to review it some time next week.",
    "created_at": "2017-02-15T19:02:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324509",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:82" align="right">comment:82</div>

Replying to [@jdemeyer](#comment:81):
> I am afraid that your branch does that, since you rely more on the implementation of old-style Python 2 comparisons.

Perhaps indeed, I'm not sure. Note that my version only returns `NotImplemented` when comparing an `Element` with something else. This by itself is correct (and perhaps desirable) in Python3 too, isn't it? The only thing that will change if what Python will do as a result.

I have no clear opinion regarding whether it is better to return `NotImplemented` or to fail, and I trust you to know the details of Python3 comparison semantics better than me. The only thing I really care about is that nonsensical comparisons between Elements raise an exception.

However, I expect that raising an exception will break more existing code. Based on what I recall of the first version of my branch, the typical situation where falling back to the default Python2 comparison can help is with graphs or other combinatorial objects with labels that want to compare Elements with strings or with tuples. So, more than making Python3 porting harder, I think my version delays some of the issues with existing code to the actual porting.

I'm not going to try going back to a version that doesn't use `NotImplemented` in the next few days. But if you have one that works well, I could try to find time to review it some time next week.



---

archive/issue_comments_324510.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nReplying to [@mezzarobba](#comment:82):\n> Note that my version only returns `NotImplemented` when comparing an `Element` with something else. This by itself is correct (and perhaps desirable) in Python3 too, isn't it?\n\nYes, `return NotImplemented` is the right do to in Python 2. It is also the right thing to do in Python 3. So you would think that it's always right, but it's not.\n\nThe problem is that the implications of this `return NotImplemented` are very different in Python 2 and Python 3. Python 2 will happily compare the objects anyway while Python 3 will raise an exception.\n\nGiven that we are planning to port to Python 3, it makes sense to adopt the Python 3 conventions already using Python 2. That is: raise an error for undefined comparisons.",
    "created_at": "2017-02-15T21:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324510",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:83" align="right">comment:83</div>

Replying to [@mezzarobba](#comment:82):
> Note that my version only returns `NotImplemented` when comparing an `Element` with something else. This by itself is correct (and perhaps desirable) in Python3 too, isn't it?

Yes, `return NotImplemented` is the right do to in Python 2. It is also the right thing to do in Python 3. So you would think that it's always right, but it's not.

The problem is that the implications of this `return NotImplemented` are very different in Python 2 and Python 3. Python 2 will happily compare the objects anyway while Python 3 will raise an exception.

Given that we are planning to port to Python 3, it makes sense to adopt the Python 3 conventions already using Python 2. That is: raise an error for undefined comparisons.



---

archive/issue_comments_324511.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nReplying to [@mezzarobba](#comment:82):\n> The only thing I really care about is that nonsensical comparisons between Elements raise an exception.\n\nThen why don't you implement **exactly** that, without making changes to comparisons with non-Elements? That sounds like a good idea to me.",
    "created_at": "2017-02-15T21:52:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324511",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:84" align="right">comment:84</div>

Replying to [@mezzarobba](#comment:82):
> The only thing I really care about is that nonsensical comparisons between Elements raise an exception.

Then why don't you implement **exactly** that, without making changes to comparisons with non-Elements? That sounds like a good idea to me.



---

archive/issue_comments_324512.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nReplying to [@jdemeyer](#comment:84):\n> Then why don't you implement **exactly** that, without making changes to comparisons with non-Elements? That sounds like a good idea to me.\n\nBecause I don't think that's the best option, even if I care less about the other cases.",
    "created_at": "2017-02-15T21:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324512",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:85" align="right">comment:85</div>

Replying to [@jdemeyer](#comment:84):
> Then why don't you implement **exactly** that, without making changes to comparisons with non-Elements? That sounds like a good idea to me.

Because I don't think that's the best option, even if I care less about the other cases.



---

archive/issue_comments_324513.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),\n `coercion_model.richcmp()` should not fall back on comparing by type/id.\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382.\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968.\n``````\n",
    "created_at": "2018-03-15T07:00:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324513",
    "user": "https://github.com/mezzarobba"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),
 `coercion_model.richcmp()` should not fall back on comparing by type/id.
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382.
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968.
``````




---

archive/issue_comments_324514.json:
```json
{
    "body": "Changed keywords from **cmp** to **richcmp**",
    "created_at": "2018-03-29T12:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324514",
    "user": "https://github.com/jdemeyer"
}
```

Changed keywords from **cmp** to **richcmp**



---

archive/issue_comments_324515.json:
```json
{
    "body": "Work Issues: **merge conflicts**",
    "created_at": "2018-03-30T06:01:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324515",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **merge conflicts**



---

archive/issue_comments_324516.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nPlease don't do that, it gives the totally wrong impression that this ticket needs work because there are merge conflicts.",
    "created_at": "2018-03-30T10:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324516",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:89" align="right">comment:89</div>

Please don't do that, it gives the totally wrong impression that this ticket needs work because there are merge conflicts.



---

archive/issue_comments_324517.json:
```json
{
    "body": "Changed work issues from **merge conflicts** to none",
    "created_at": "2018-03-30T10:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324517",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **merge conflicts** to none



---

archive/issue_comments_324518.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nIt would be nice if you could just add to that list instead of just removing my items. Merge conflicts make it hard to see what the proposed changes are doing without being able to click on the branch link, so I think that's an issue that needs work.\n\nSo, what are the proposed changes about? Last time I had a look at them I was not unhappy about them but you seemed to disagree. It might not be perfect but don't the proposed changes improve the situation at least?",
    "created_at": "2018-03-30T13:05:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324518",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:90" align="right">comment:90</div>

It would be nice if you could just add to that list instead of just removing my items. Merge conflicts make it hard to see what the proposed changes are doing without being able to click on the branch link, so I think that's an issue that needs work.

So, what are the proposed changes about? Last time I had a look at them I was not unhappy about them but you seemed to disagree. It might not be perfect but don't the proposed changes improve the situation at least?



---

archive/issue_events_305797.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-03-30T13:05:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305797"
}
```



---

archive/issue_events_305798.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-03-30T13:05:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305798"
}
```



---

archive/issue_comments_324519.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nIt's too long ago. I don't remember.\n\nRegardless, I feel that we should first focus on the \"see also\" tickets. In particular, #22349 looks like a major problem.",
    "created_at": "2018-03-30T13:22:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324519",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:91" align="right">comment:91</div>

It's too long ago. I don't remember.

Regardless, I feel that we should first focus on the "see also" tickets. In particular, #22349 looks like a major problem.



---

archive/issue_comments_324520.json:
```json
{
    "body": "Work Issues: **merge conflicts & summarize what was controversial about this ticket**",
    "created_at": "2018-04-04T20:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324520",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **merge conflicts & summarize what was controversial about this ticket**



---

archive/issue_events_305799.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-07-11T15:22:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "0000b0",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305799"
}
```



---

archive/issue_comments_324521.json:
```json
{
    "body": "Changed branch from **[u/mmezzarobba/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/22029-richcmp)** to **[u/jdemeyer/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22029-richcmp)**",
    "created_at": "2018-12-19T15:12:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324521",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/mmezzarobba/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/22029-richcmp)** to **[u/jdemeyer/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22029-richcmp)**



---

archive/issue_comments_324522.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nI'm restoring my branch to see how much progress we made. Setting to needs_review only for patchbot testing, it's not actually ready.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e45cf27f5d21275c0fd69296a51e97ffdf543493\"><code>e45cf27</code></a></td><td><code>Add libffi package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ef8033a7aaa6bbbc240624b3a0cfa29a559ce2f\"><code>8ef8033</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2018-12-19T15:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324522",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:95" align="right">comment:95</div>

I'm restoring my branch to see how much progress we made. Setting to needs_review only for patchbot testing, it's not actually ready.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e45cf27f5d21275c0fd69296a51e97ffdf543493"><code>e45cf27</code></a></td><td><code>Add libffi package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ef8033a7aaa6bbbc240624b3a0cfa29a559ce2f"><code>8ef8033</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_events_305800.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-12-19T15:13:46Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "title_is": "[WIP] Element richcmp: never use id()",
    "title_was": "Element richcmp: never use id()",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305800"
}
```



---

archive/issue_comments_324523.json:
```json
{
    "body": "Changed commit from **[`33e88b0`](https://github.com/sagemath/sagetrac-mirror/commit/33e88b0c7b9d4ce464fd55da6725751b478f7662)** to **[`8ef8033`](https://github.com/sagemath/sagetrac-mirror/commit/8ef8033a7aaa6bbbc240624b3a0cfa29a559ce2f)**",
    "created_at": "2018-12-19T15:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324523",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`33e88b0`](https://github.com/sagemath/sagetrac-mirror/commit/33e88b0c7b9d4ce464fd55da6725751b478f7662)** to **[`8ef8033`](https://github.com/sagemath/sagetrac-mirror/commit/8ef8033a7aaa6bbbc240624b3a0cfa29a559ce2f)**



---

archive/issue_events_305801.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-12-19T15:13:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305801"
}
```



---

archive/issue_events_305802.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-12-19T15:13:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305802"
}
```



---

archive/issue_comments_324524.json:
```json
{
    "body": "Changed author from **Marc Mezzarobba** to **Marc Mezzarobba, Jeroen Demeyer**",
    "created_at": "2018-12-19T15:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324524",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Marc Mezzarobba** to **Marc Mezzarobba, Jeroen Demeyer**



---

archive/issue_comments_324525.json:
```json
{
    "body": "Changed commit from **[`8ef8033`](https://github.com/sagemath/sagetrac-mirror/commit/8ef8033a7aaa6bbbc240624b3a0cfa29a559ce2f)** to **[`414ca3a`](https://github.com/sagemath/sagetrac-mirror/commit/414ca3a344598e186ca67fbf9d8ee068dff3ce49)**",
    "created_at": "2018-12-19T15:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324525",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8ef8033`](https://github.com/sagemath/sagetrac-mirror/commit/8ef8033a7aaa6bbbc240624b3a0cfa29a559ce2f)** to **[`414ca3a`](https://github.com/sagemath/sagetrac-mirror/commit/414ca3a344598e186ca67fbf9d8ee068dff3ce49)**



---

archive/issue_comments_324526.json:
```json
{
    "body": "<div id=\"comment:96\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/414ca3a344598e186ca67fbf9d8ee068dff3ce49\"><code>414ca3a</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2018-12-19T15:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324526",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:96"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/414ca3a344598e186ca67fbf9d8ee068dff3ce49"><code>414ca3a</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_comments_324527.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nOops, that libffi commit shouldn't be there.",
    "created_at": "2018-12-19T15:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324527",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:97" align="right">comment:97</div>

Oops, that libffi commit shouldn't be there.



---

archive/issue_comments_324528.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),\n `coercion_model.richcmp()` should not fall back on comparing by type/id.\n \n+This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n+\n See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968.\n``````\n",
    "created_at": "2018-12-19T15:47:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324528",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
 As discussed in the sage-devel thread starting with `<o21nte$6jp$1@blaine.gmane.org>` (https://groups.google.com/d/msg/sage-devel/YVFdxPH6avk/4OZUmzLHBgAJ),
 `coercion_model.richcmp()` should not fall back on comparing by type/id.
 
+This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
+
 See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968.
``````




---

archive/issue_comments_324529.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nNot that many failed tests:\n\n```\n----------------------------------------------------------------------\nsage -t --long --warn-long 54.8 src/sage/schemes/elliptic_curves/height.py  # 1 doctest failed\nsage -t --long --warn-long 54.8 src/sage/graphs/generic_graph.py  # 9 doctests failed\nsage -t --long --warn-long 54.8 src/sage/symbolic/expression.pyx  # 2 doctests failed\nsage -t --long --warn-long 54.8 src/sage/homology/examples.py  # 1 doctest failed\nsage -t --long --warn-long 54.8 src/sage/combinat/tutorial.py  # 4 doctests failed\nsage -t --long --warn-long 54.8 src/sage/graphs/graph.py  # 2 doctests failed\nsage -t --long --warn-long 54.8 src/sage/homology/simplicial_complex.py  # 12 doctests failed\nsage -t --long --warn-long 54.8 src/sage/combinat/multiset_partition_into_sets_ordered.py  # 3 doctests failed\nsage -t --long --warn-long 54.8 src/sage/rings/valuation/valuation.py  # 6 doctests failed\nsage -t --long --warn-long 54.8 src/sage/combinat/finite_state_machine.py  # 4 doctests failed\nsage -t --long --warn-long 54.8 src/sage/graphs/digraph_generators.py  # 4 doctests failed\nsage -t --long --warn-long 54.8 src/sage/combinat/words/morphism.py  # 5 doctests failed\nsage -t --long --warn-long 54.8 src/sage/combinat/words/finite_word.py  # 3 doctests failed\nsage -t --long --warn-long 54.8 src/sage/combinat/words/word_generators.py  # 1 doctest failed\nsage -t --long --warn-long 54.8 src/sage/categories/algebra_functor.py  # 1 doctest failed\nsage -t --long --warn-long 54.8 src/sage/combinat/posets/lattices.py  # 5 doctests failed\nsage -t --long --warn-long 54.8 src/sage/structure/formal_sum.py  # 3 doctests failed\nsage -t --long --warn-long 54.8 src/sage/combinat/designs/incidence_structures.py  # 15 doctests failed\nsage -t --long --warn-long 54.8 src/sage/combinat/set_partition.py  # 3 doctests failed\nsage -t --long --warn-long 54.8 src/sage/misc/misc.py  # 3 doctests failed\nsage -t --long --warn-long 54.8 src/sage/structure/coerce.pyx  # 1 doctest failed\nsage -t --long --warn-long 54.8 src/sage/graphs/schnyder.py  # 4 doctests failed\n----------------------------------------------------------------------\n```\n\nPerhaps we should look at those failures and triage them into various tickets.",
    "created_at": "2018-12-21T12:06:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324529",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:99" align="right">comment:99</div>

Not that many failed tests:

```
----------------------------------------------------------------------
sage -t --long --warn-long 54.8 src/sage/schemes/elliptic_curves/height.py  # 1 doctest failed
sage -t --long --warn-long 54.8 src/sage/graphs/generic_graph.py  # 9 doctests failed
sage -t --long --warn-long 54.8 src/sage/symbolic/expression.pyx  # 2 doctests failed
sage -t --long --warn-long 54.8 src/sage/homology/examples.py  # 1 doctest failed
sage -t --long --warn-long 54.8 src/sage/combinat/tutorial.py  # 4 doctests failed
sage -t --long --warn-long 54.8 src/sage/graphs/graph.py  # 2 doctests failed
sage -t --long --warn-long 54.8 src/sage/homology/simplicial_complex.py  # 12 doctests failed
sage -t --long --warn-long 54.8 src/sage/combinat/multiset_partition_into_sets_ordered.py  # 3 doctests failed
sage -t --long --warn-long 54.8 src/sage/rings/valuation/valuation.py  # 6 doctests failed
sage -t --long --warn-long 54.8 src/sage/combinat/finite_state_machine.py  # 4 doctests failed
sage -t --long --warn-long 54.8 src/sage/graphs/digraph_generators.py  # 4 doctests failed
sage -t --long --warn-long 54.8 src/sage/combinat/words/morphism.py  # 5 doctests failed
sage -t --long --warn-long 54.8 src/sage/combinat/words/finite_word.py  # 3 doctests failed
sage -t --long --warn-long 54.8 src/sage/combinat/words/word_generators.py  # 1 doctest failed
sage -t --long --warn-long 54.8 src/sage/categories/algebra_functor.py  # 1 doctest failed
sage -t --long --warn-long 54.8 src/sage/combinat/posets/lattices.py  # 5 doctests failed
sage -t --long --warn-long 54.8 src/sage/structure/formal_sum.py  # 3 doctests failed
sage -t --long --warn-long 54.8 src/sage/combinat/designs/incidence_structures.py  # 15 doctests failed
sage -t --long --warn-long 54.8 src/sage/combinat/set_partition.py  # 3 doctests failed
sage -t --long --warn-long 54.8 src/sage/misc/misc.py  # 3 doctests failed
sage -t --long --warn-long 54.8 src/sage/structure/coerce.pyx  # 1 doctest failed
sage -t --long --warn-long 54.8 src/sage/graphs/schnyder.py  # 4 doctests failed
----------------------------------------------------------------------
```

Perhaps we should look at those failures and triage them into various tickets.



---

archive/issue_comments_324530.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968.\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931.\n``````\n",
    "created_at": "2018-12-21T12:52:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324530",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968.
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931.
``````




---

archive/issue_comments_324531.json:
```json
{
    "body": "Changed work issues from **merge conflicts & summarize what was controversial about this ticket** to **dependencies**",
    "created_at": "2018-12-21T13:14:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324531",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **merge conflicts & summarize what was controversial about this ticket** to **dependencies**



---

archive/issue_comments_324532.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931.\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2018-12-21T14:49:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324532",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931.
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324533.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2018-12-21T14:56:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324533",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324534.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2018-12-21T15:19:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324534",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324535.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2018-12-21T15:30:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324535",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324536.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2018-12-21T15:33:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324536",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324537.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2018-12-21T15:38:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324537",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324538.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2018-12-21T15:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324538",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324539.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI identified quite a few additional issues. I'm not saying that I found all issues (I skimmed semi-quickly over the patchbot report) but surely the majority.\n\nThe most serious one is still the graph sorting, which counts for a substantial amount of doctest failures.",
    "created_at": "2018-12-21T15:46:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324539",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

I identified quite a few additional issues. I'm not saying that I found all issues (I skimmed semi-quickly over the patchbot report) but surely the majority.

The most serious one is still the graph sorting, which counts for a substantial amount of doctest failures.



---

archive/issue_comments_324540.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2018-12-23T09:51:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324540",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22374, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324541.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2018-12-23T09:52:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324541",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22375, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324542.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c9276666961c336987e899b4ceebbe8f3b6a271\"><code>9c92766</code></a></td><td><code>Add comparisons and hash for CuspFamily</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bcc0a23bb4a32491f2145ff8412651a326b33a68\"><code>bcc0a23</code></a></td><td><code>Do not sort terms in FormalSum</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/154b61536b55faca6f507c688881570fdc5812f8\"><code>154b615</code></a></td><td><code>Sort key as sort_facets parameter of SimplicialComplex</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3930c20b0d41c87f5b7ebc5c1ffd07bfcbb18832\"><code>3930c20</code></a></td><td><code>Do not sort in Subsets_s</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7ece0605d390062cf625de4c54608cd05bfc8fa\"><code>d7ece06</code></a></td><td><code>Remove pointless comparison doctests in valuations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0ad378c279b0628b84941ac1444c16b198cd7f4\"><code>d0ad378</code></a></td><td><code>AbstractLanguage should work with uncomparable alphabet</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7dda4ac6209a3b86ee0d042c2aa358d53f1d9f29\"><code>7dda4ac</code></a></td><td><code>Use richcmp_item to compare Word_class</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a354dc129b0085acf88b4b1cbae1d5029218fa61\"><code>a354dc1</code></a></td><td><code>Do not sort points in IncidenceStructure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9e0fe6cac4520155816ebf500f6792f1f269483\"><code>a9e0fe6</code></a></td><td><code>Merge commit 'bcc0a23bb4a32491f2145ff8412651a326b33a68'; commit '154b61536b55faca6f507c688881570fdc5812f8'; commit '3930c20b0d41c87f5b7ebc5c1ffd07bfcbb18832'; commit 'd7ece0605d390062cf625de4c54608cd05bfc8fa'; commit 'd0ad378c279b0628b84941ac1444c16b198cd7f4'; commit '7dda4ac6209a3b86ee0d042c2aa358d53f1d9f29'; commit 'a354dc129b0085acf88b4b1cbae1d5029218fa61' into t/22029/22029-richcmp</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f680404ec637aa2ef550ec7d50f157d38431c46f\"><code>f680404</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2018-12-23T11:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324542",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c9276666961c336987e899b4ceebbe8f3b6a271"><code>9c92766</code></a></td><td><code>Add comparisons and hash for CuspFamily</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bcc0a23bb4a32491f2145ff8412651a326b33a68"><code>bcc0a23</code></a></td><td><code>Do not sort terms in FormalSum</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/154b61536b55faca6f507c688881570fdc5812f8"><code>154b615</code></a></td><td><code>Sort key as sort_facets parameter of SimplicialComplex</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3930c20b0d41c87f5b7ebc5c1ffd07bfcbb18832"><code>3930c20</code></a></td><td><code>Do not sort in Subsets_s</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7ece0605d390062cf625de4c54608cd05bfc8fa"><code>d7ece06</code></a></td><td><code>Remove pointless comparison doctests in valuations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0ad378c279b0628b84941ac1444c16b198cd7f4"><code>d0ad378</code></a></td><td><code>AbstractLanguage should work with uncomparable alphabet</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7dda4ac6209a3b86ee0d042c2aa358d53f1d9f29"><code>7dda4ac</code></a></td><td><code>Use richcmp_item to compare Word_class</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a354dc129b0085acf88b4b1cbae1d5029218fa61"><code>a354dc1</code></a></td><td><code>Do not sort points in IncidenceStructure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9e0fe6cac4520155816ebf500f6792f1f269483"><code>a9e0fe6</code></a></td><td><code>Merge commit 'bcc0a23bb4a32491f2145ff8412651a326b33a68'; commit '154b61536b55faca6f507c688881570fdc5812f8'; commit '3930c20b0d41c87f5b7ebc5c1ffd07bfcbb18832'; commit 'd7ece0605d390062cf625de4c54608cd05bfc8fa'; commit 'd0ad378c279b0628b84941ac1444c16b198cd7f4'; commit '7dda4ac6209a3b86ee0d042c2aa358d53f1d9f29'; commit 'a354dc129b0085acf88b4b1cbae1d5029218fa61' into t/22029/22029-richcmp</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f680404ec637aa2ef550ec7d50f157d38431c46f"><code>f680404</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_comments_324543.json:
```json
{
    "body": "Changed commit from **[`414ca3a`](https://github.com/sagemath/sagetrac-mirror/commit/414ca3a344598e186ca67fbf9d8ee068dff3ce49)** to **[`f680404`](https://github.com/sagemath/sagetrac-mirror/commit/f680404ec637aa2ef550ec7d50f157d38431c46f)**",
    "created_at": "2018-12-23T11:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324543",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`414ca3a`](https://github.com/sagemath/sagetrac-mirror/commit/414ca3a344598e186ca67fbf9d8ee068dff3ce49)** to **[`f680404`](https://github.com/sagemath/sagetrac-mirror/commit/f680404ec637aa2ef550ec7d50f157d38431c46f)**



---

archive/issue_comments_324544.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2018-12-23T14:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324544",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324545.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #26948, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2018-12-23T14:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324545",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #26948, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324546.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #26948, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2018-12-23T15:12:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324546",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #26948, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324547.json:
```json
{
    "body": "Changed commit from **[`f680404`](https://github.com/sagemath/sagetrac-mirror/commit/f680404ec637aa2ef550ec7d50f157d38431c46f)** to **[`2466c5f`](https://github.com/sagemath/sagetrac-mirror/commit/2466c5f087c0235081caf05e5660ba16258d5098)**",
    "created_at": "2018-12-29T12:20:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324547",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f680404`](https://github.com/sagemath/sagetrac-mirror/commit/f680404ec637aa2ef550ec7d50f157d38431c46f)** to **[`2466c5f`](https://github.com/sagemath/sagetrac-mirror/commit/2466c5f087c0235081caf05e5660ba16258d5098)**



---

archive/issue_comments_324548.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ba940565351fe562ceca861c3fe1a28ab1c6cba\"><code>5ba9405</code></a></td><td><code>Do not sort in Subsets_s</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e9b0abab9e300b566e0929eaa1ddef213927e6e\"><code>0e9b0ab</code></a></td><td><code>Do not sort points in IncidenceStructure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2466c5f087c0235081caf05e5660ba16258d5098\"><code>2466c5f</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2018-12-29T12:20:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324548",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ba940565351fe562ceca861c3fe1a28ab1c6cba"><code>5ba9405</code></a></td><td><code>Do not sort in Subsets_s</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e9b0abab9e300b566e0929eaa1ddef213927e6e"><code>0e9b0ab</code></a></td><td><code>Do not sort points in IncidenceStructure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2466c5f087c0235081caf05e5660ba16258d5098"><code>2466c5f</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_comments_324549.json:
```json
{
    "body": "Changed commit from **[`2466c5f`](https://github.com/sagemath/sagetrac-mirror/commit/2466c5f087c0235081caf05e5660ba16258d5098)** to **[`34a2af2`](https://github.com/sagemath/sagetrac-mirror/commit/34a2af2a32b48b9128b0641b53063d6c50da8134)**",
    "created_at": "2019-01-02T14:56:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324549",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2466c5f`](https://github.com/sagemath/sagetrac-mirror/commit/2466c5f087c0235081caf05e5660ba16258d5098)** to **[`34a2af2`](https://github.com/sagemath/sagetrac-mirror/commit/34a2af2a32b48b9128b0641b53063d6c50da8134)**



---

archive/issue_comments_324550.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/447fe9249d784ee20c0aaf37103db754d4c78479\"><code>447fe92</code></a></td><td><code>Do not sort points in IncidenceStructure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ccd5076cea180001b1eec19610a82ae44d2b7eb\"><code>5ccd507</code></a></td><td><code>Do not sort in Subsets_s</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34a2af2a32b48b9128b0641b53063d6c50da8134\"><code>34a2af2</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2019-01-02T14:56:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324550",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/447fe9249d784ee20c0aaf37103db754d4c78479"><code>447fe92</code></a></td><td><code>Do not sort points in IncidenceStructure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ccd5076cea180001b1eec19610a82ae44d2b7eb"><code>5ccd507</code></a></td><td><code>Do not sort in Subsets_s</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34a2af2a32b48b9128b0641b53063d6c50da8134"><code>34a2af2</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_comments_324551.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2019-01-02T18:42:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324551",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324552.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI looked at the patchbot failures again and I have now identified all issues.",
    "created_at": "2019-01-02T20:44:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324552",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

I looked at the patchbot failures again and I have now identified all issues.



---

archive/issue_comments_324553.json:
```json
{
    "body": "Changed commit from **[`34a2af2`](https://github.com/sagemath/sagetrac-mirror/commit/34a2af2a32b48b9128b0641b53063d6c50da8134)** to **[`f3aa735`](https://github.com/sagemath/sagetrac-mirror/commit/f3aa7351801094a60ee2dd32003cbcfcd25e4e63)**",
    "created_at": "2019-01-04T10:41:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324553",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`34a2af2`](https://github.com/sagemath/sagetrac-mirror/commit/34a2af2a32b48b9128b0641b53063d6c50da8134)** to **[`f3aa735`](https://github.com/sagemath/sagetrac-mirror/commit/f3aa7351801094a60ee2dd32003cbcfcd25e4e63)**



---

archive/issue_comments_324554.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30028e70e8007921414e6df08b307dc63830c3df\"><code>30028e7</code></a></td><td><code>Element richcmp: never use id()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea22e208a07e8349e1885e5f600f125bc9a11743\"><code>ea22e20</code></a></td><td><code>26936: fixing doctests with sortable alphabets</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0cc0a618c71e99a912063097aef96135b67ea37e\"><code>0cc0a61</code></a></td><td><code>26936: improved class documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db81e7dd2f141be4eed6cfcb87fc718ccae9e68c\"><code>db81e7d</code></a></td><td><code>26936: add example with non sortable alphabet</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3efa9b1ad4154e5f4516d437bfbc56ae47fa9d80\"><code>3efa9b1</code></a></td><td><code>_iterator_weight should not sort objects</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0f038f7de5c4d6d7fad779b94735501713b49ba\"><code>a0f038f</code></a></td><td><code>py3: some fix in set_partition (sortable elements only)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94bc96a01ab26655f1ffeb96da90e07a69da59c3\"><code>94bc96a</code></a></td><td><code>make clear that equality needs a totally ordered set</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c0cd90df5c839bb9edace8f2899166531bfac5b\"><code>4c0cd90</code></a></td><td><code>reword as requested</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/171f9885ff150378e69de4cdfeea2fb1d6b107ea\"><code>171f988</code></a></td><td><code>same for inequality</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3aa7351801094a60ee2dd32003cbcfcd25e4e63\"><code>f3aa735</code></a></td><td><code>Merge commit 'db81e7dd2f141be4eed6cfcb87fc718ccae9e68c'; commit '3efa9b1ad4154e5f4516d437bfbc56ae47fa9d80'; commit '171f9885ff150378e69de4cdfeea2fb1d6b107ea' into t/22029/22029-richcmp</code></td></tr></table>\n",
    "created_at": "2019-01-04T10:41:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324554",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30028e70e8007921414e6df08b307dc63830c3df"><code>30028e7</code></a></td><td><code>Element richcmp: never use id()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea22e208a07e8349e1885e5f600f125bc9a11743"><code>ea22e20</code></a></td><td><code>26936: fixing doctests with sortable alphabets</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0cc0a618c71e99a912063097aef96135b67ea37e"><code>0cc0a61</code></a></td><td><code>26936: improved class documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db81e7dd2f141be4eed6cfcb87fc718ccae9e68c"><code>db81e7d</code></a></td><td><code>26936: add example with non sortable alphabet</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3efa9b1ad4154e5f4516d437bfbc56ae47fa9d80"><code>3efa9b1</code></a></td><td><code>_iterator_weight should not sort objects</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0f038f7de5c4d6d7fad779b94735501713b49ba"><code>a0f038f</code></a></td><td><code>py3: some fix in set_partition (sortable elements only)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94bc96a01ab26655f1ffeb96da90e07a69da59c3"><code>94bc96a</code></a></td><td><code>make clear that equality needs a totally ordered set</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c0cd90df5c839bb9edace8f2899166531bfac5b"><code>4c0cd90</code></a></td><td><code>reword as requested</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/171f9885ff150378e69de4cdfeea2fb1d6b107ea"><code>171f988</code></a></td><td><code>same for inequality</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3aa7351801094a60ee2dd32003cbcfcd25e4e63"><code>f3aa735</code></a></td><td><code>Merge commit 'db81e7dd2f141be4eed6cfcb87fc718ccae9e68c'; commit '3efa9b1ad4154e5f4516d437bfbc56ae47fa9d80'; commit '171f9885ff150378e69de4cdfeea2fb1d6b107ea' into t/22029/22029-richcmp</code></td></tr></table>




---

archive/issue_comments_324555.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f54c5008dfcf5becd9de29b67f72daebe8fb95b5\"><code>f54c500</code></a></td><td><code>Merge commit 'db81e7dd2f141be4eed6cfcb87fc718ccae9e68c'; commit '3efa9b1ad4154e5f4516d437bfbc56ae47fa9d80'; commit '171f9885ff150378e69de4cdfeea2fb1d6b107ea' into t/22029/22029-richcmp</code></td></tr></table>\n",
    "created_at": "2019-01-04T10:49:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324555",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f54c5008dfcf5becd9de29b67f72daebe8fb95b5"><code>f54c500</code></a></td><td><code>Merge commit 'db81e7dd2f141be4eed6cfcb87fc718ccae9e68c'; commit '3efa9b1ad4154e5f4516d437bfbc56ae47fa9d80'; commit '171f9885ff150378e69de4cdfeea2fb1d6b107ea' into t/22029/22029-richcmp</code></td></tr></table>




---

archive/issue_comments_324556.json:
```json
{
    "body": "Changed commit from **[`f3aa735`](https://github.com/sagemath/sagetrac-mirror/commit/f3aa7351801094a60ee2dd32003cbcfcd25e4e63)** to **[`f54c500`](https://github.com/sagemath/sagetrac-mirror/commit/f54c5008dfcf5becd9de29b67f72daebe8fb95b5)**",
    "created_at": "2019-01-04T10:49:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324556",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f3aa735`](https://github.com/sagemath/sagetrac-mirror/commit/f3aa7351801094a60ee2dd32003cbcfcd25e4e63)** to **[`f54c500`](https://github.com/sagemath/sagetrac-mirror/commit/f54c5008dfcf5becd9de29b67f72daebe8fb95b5)**



---

archive/issue_comments_324557.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27026, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2019-01-07T08:54:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324557",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27026, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324558.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27026, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27010, #27026, #27027, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2019-01-07T09:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324558",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27026, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27010, #27026, #27027, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324559.json:
```json
{
    "body": "Changed commit from **[`f54c500`](https://github.com/sagemath/sagetrac-mirror/commit/f54c5008dfcf5becd9de29b67f72daebe8fb95b5)** to **[`66d2a8f`](https://github.com/sagemath/sagetrac-mirror/commit/66d2a8f776c811f02992a9bde3f41e85a3925e04)**",
    "created_at": "2019-01-07T14:23:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324559",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f54c500`](https://github.com/sagemath/sagetrac-mirror/commit/f54c5008dfcf5becd9de29b67f72daebe8fb95b5)** to **[`66d2a8f`](https://github.com/sagemath/sagetrac-mirror/commit/66d2a8f776c811f02992a9bde3f41e85a3925e04)**



---

archive/issue_comments_324560.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4f67ca8620ffff6cf761abd44fe287a88c5bf13\"><code>b4f67ca</code></a></td><td><code>Deprecate uniq()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b000b909e484fe4f3b9732671da2d86463e3402\"><code>6b000b9</code></a></td><td><code>Merge commit 'b4f67ca8620ffff6cf761abd44fe287a88c5bf13' into t/22029/22029-richcmp</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0240367bef781fc219655b3bacd60ffd291eb595\"><code>0240367</code></a></td><td><code>trac #27010: save some calls to .vertices()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a409b1929c9a049772cb725aa579a0344dae0b4\"><code>3a409b1</code></a></td><td><code>Minor doctest fixes for Trac #22029</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab00c175178632d7dd1835bc618fa08bf5253aa8\"><code>ab00c17</code></a></td><td><code>Avoid sorting vertices in relabel()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66d2a8f776c811f02992a9bde3f41e85a3925e04\"><code>66d2a8f</code></a></td><td><code>Merge commit '0240367bef781fc219655b3bacd60ffd291eb595'; commit '3a409b1929c9a049772cb725aa579a0344dae0b4'; commit 'ab00c175178632d7dd1835bc618fa08bf5253aa8' into t/22029/22029-richcmp</code></td></tr></table>\n",
    "created_at": "2019-01-07T14:23:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324560",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4f67ca8620ffff6cf761abd44fe287a88c5bf13"><code>b4f67ca</code></a></td><td><code>Deprecate uniq()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b000b909e484fe4f3b9732671da2d86463e3402"><code>6b000b9</code></a></td><td><code>Merge commit 'b4f67ca8620ffff6cf761abd44fe287a88c5bf13' into t/22029/22029-richcmp</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0240367bef781fc219655b3bacd60ffd291eb595"><code>0240367</code></a></td><td><code>trac #27010: save some calls to .vertices()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a409b1929c9a049772cb725aa579a0344dae0b4"><code>3a409b1</code></a></td><td><code>Minor doctest fixes for Trac #22029</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab00c175178632d7dd1835bc618fa08bf5253aa8"><code>ab00c17</code></a></td><td><code>Avoid sorting vertices in relabel()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66d2a8f776c811f02992a9bde3f41e85a3925e04"><code>66d2a8f</code></a></td><td><code>Merge commit '0240367bef781fc219655b3bacd60ffd291eb595'; commit '3a409b1929c9a049772cb725aa579a0344dae0b4'; commit 'ab00c175178632d7dd1835bc618fa08bf5253aa8' into t/22029/22029-richcmp</code></td></tr></table>




---

archive/issue_comments_324561.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27010, #27026, #27027, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2019-01-07T15:45:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324561",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27010, #27026, #27027, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324562.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f830eb94a953905c3b6e6540e46e2319fb8a3e41\"><code>f830eb9</code></a></td><td><code>trac #27009: avoid sorting in method treewidth</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31240a827f25f09d659bd14bb18654c7f16939ac\"><code>31240a8</code></a></td><td><code>Merge commit 'f830eb94a953905c3b6e6540e46e2319fb8a3e41' into t/22029/22029-richcmp</code></td></tr></table>\n",
    "created_at": "2019-01-07T15:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324562",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f830eb94a953905c3b6e6540e46e2319fb8a3e41"><code>f830eb9</code></a></td><td><code>trac #27009: avoid sorting in method treewidth</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31240a827f25f09d659bd14bb18654c7f16939ac"><code>31240a8</code></a></td><td><code>Merge commit 'f830eb94a953905c3b6e6540e46e2319fb8a3e41' into t/22029/22029-richcmp</code></td></tr></table>




---

archive/issue_comments_324563.json:
```json
{
    "body": "Changed commit from **[`66d2a8f`](https://github.com/sagemath/sagetrac-mirror/commit/66d2a8f776c811f02992a9bde3f41e85a3925e04)** to **[`31240a8`](https://github.com/sagemath/sagetrac-mirror/commit/31240a827f25f09d659bd14bb18654c7f16939ac)**",
    "created_at": "2019-01-07T15:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324563",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`66d2a8f`](https://github.com/sagemath/sagetrac-mirror/commit/66d2a8f776c811f02992a9bde3f41e85a3925e04)** to **[`31240a8`](https://github.com/sagemath/sagetrac-mirror/commit/31240a827f25f09d659bd14bb18654c7f16939ac)**



---

archive/issue_comments_324564.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n``````\n",
    "created_at": "2019-01-07T15:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324564",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, [Pynac #338](https://github.com/pynac/pynac/issues/338).
``````




---

archive/issue_comments_324565.json:
```json
{
    "body": "Changed commit from **[`31240a8`](https://github.com/sagemath/sagetrac-mirror/commit/31240a827f25f09d659bd14bb18654c7f16939ac)** to **[`d5d7d70`](https://github.com/sagemath/sagetrac-mirror/commit/d5d7d70ea906fb736538bd2dbc62ddf03a5911a0)**",
    "created_at": "2019-01-07T16:00:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324565",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`31240a8`](https://github.com/sagemath/sagetrac-mirror/commit/31240a827f25f09d659bd14bb18654c7f16939ac)** to **[`d5d7d70`](https://github.com/sagemath/sagetrac-mirror/commit/d5d7d70ea906fb736538bd2dbc62ddf03a5911a0)**



---

archive/issue_comments_324566.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/70e123b09b0516e08d8ba5364979384a003310cd\"><code>70e123b</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5d7d70ea906fb736538bd2dbc62ddf03a5911a0\"><code>d5d7d70</code></a></td><td><code>Merge branch 't/27029/avoid_calling_vertices___in_graph_isom_equivalent_non_edge_labeled_graph__' into t/22029/22029-richcmp</code></td></tr></table>\n",
    "created_at": "2019-01-07T16:00:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324566",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/70e123b09b0516e08d8ba5364979384a003310cd"><code>70e123b</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5d7d70ea906fb736538bd2dbc62ddf03a5911a0"><code>d5d7d70</code></a></td><td><code>Merge branch 't/27029/avoid_calling_vertices___in_graph_isom_equivalent_non_edge_labeled_graph__' into t/22029/22029-richcmp</code></td></tr></table>




---

archive/issue_comments_324567.json:
```json
{
    "body": "Changed commit from **[`d5d7d70`](https://github.com/sagemath/sagetrac-mirror/commit/d5d7d70ea906fb736538bd2dbc62ddf03a5911a0)** to **[`4c75779`](https://github.com/sagemath/sagetrac-mirror/commit/4c75779bdb1a75db1856fafb265523aae60569d4)**",
    "created_at": "2019-01-08T11:20:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324567",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d5d7d70`](https://github.com/sagemath/sagetrac-mirror/commit/d5d7d70ea906fb736538bd2dbc62ddf03a5911a0)** to **[`4c75779`](https://github.com/sagemath/sagetrac-mirror/commit/4c75779bdb1a75db1856fafb265523aae60569d4)**



---

archive/issue_comments_324568.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a88dc2c9cbd2b2754d7b49629e4eb2facd2f93ab\"><code>a88dc2c</code></a></td><td><code>Make relabel() of DynkinDiagram more compatible with GenericGraph</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ec5eb0d4dc1a04dd51e216949841933256f7174\"><code>5ec5eb0</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c75779bdb1a75db1856fafb265523aae60569d4\"><code>4c75779</code></a></td><td><code>Merge commit '5ec5eb0d4dc1a04dd51e216949841933256f7174' into t/22029/22029-richcmp</code></td></tr></table>\n",
    "created_at": "2019-01-08T11:20:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324568",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a88dc2c9cbd2b2754d7b49629e4eb2facd2f93ab"><code>a88dc2c</code></a></td><td><code>Make relabel() of DynkinDiagram more compatible with GenericGraph</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ec5eb0d4dc1a04dd51e216949841933256f7174"><code>5ec5eb0</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c75779bdb1a75db1856fafb265523aae60569d4"><code>4c75779</code></a></td><td><code>Merge commit '5ec5eb0d4dc1a04dd51e216949841933256f7174' into t/22029/22029-richcmp</code></td></tr></table>




---

archive/issue_comments_324569.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, [Pynac #338](https://github.com/pynac/pynac/issues/338).\n+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, [Pynac #339](https://github.com/pynac/pynac/issues/339).\n``````\n",
    "created_at": "2019-01-08T12:07:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324569",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, [Pynac #338](https://github.com/pynac/pynac/issues/338).
+See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, [Pynac #339](https://github.com/pynac/pynac/issues/339).
``````




---

archive/issue_comments_324570.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI consider this ticket to be essentially finished. We need to wait a bit until all dependencies have been merged and a new Pynac release has been made.",
    "created_at": "2019-01-08T15:49:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324570",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:1" align="right">comment:1</div>

I consider this ticket to be essentially finished. We need to wait a bit until all dependencies have been merged and a new Pynac release has been made.



---

archive/issue_comments_324571.json:
```json
{
    "body": "<div id=\"comment:132\" align=\"right\">comment:132</div>\n\nReplying to [@jdemeyer](#comment:131):\n> I consider this ticket to be essentially finished. We need to wait a bit until all dependencies have been merged and a new Pynac release has been made.\n\nThis is great! Thank you for working on it.",
    "created_at": "2019-01-08T16:00:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324571",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:132" align="right">comment:132</div>

Replying to [@jdemeyer](#comment:131):
> I consider this ticket to be essentially finished. We need to wait a bit until all dependencies have been merged and a new Pynac release has been made.

This is great! Thank you for working on it.



---

archive/issue_comments_324572.json:
```json
{
    "body": "Changed commit from **[`4c75779`](https://github.com/sagemath/sagetrac-mirror/commit/4c75779bdb1a75db1856fafb265523aae60569d4)** to **[`f3890d6`](https://github.com/sagemath/sagetrac-mirror/commit/f3890d675857384620b5a65e18ee0b280efef6bc)**",
    "created_at": "2019-01-23T21:27:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324572",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4c75779`](https://github.com/sagemath/sagetrac-mirror/commit/4c75779bdb1a75db1856fafb265523aae60569d4)** to **[`f3890d6`](https://github.com/sagemath/sagetrac-mirror/commit/f3890d675857384620b5a65e18ee0b280efef6bc)**



---

archive/issue_comments_324573.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7eaec9a42dbdc6839fca59d2f42c8e1f07e6c07\"><code>a7eaec9</code></a></td><td><code>Avoid sorting vertices in relabel()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ed35edb0cb65fa955b1e144a047a8f558375504\"><code>7ed35ed</code></a></td><td><code>Minor doctest fixes for Trac #22029</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3e4a163786c23aa830aed55d2f1e52f0264bf73\"><code>e3e4a16</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3890d675857384620b5a65e18ee0b280efef6bc\"><code>f3890d6</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2019-01-23T21:27:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324573",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7eaec9a42dbdc6839fca59d2f42c8e1f07e6c07"><code>a7eaec9</code></a></td><td><code>Avoid sorting vertices in relabel()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ed35edb0cb65fa955b1e144a047a8f558375504"><code>7ed35ed</code></a></td><td><code>Minor doctest fixes for Trac #22029</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3e4a163786c23aa830aed55d2f1e52f0264bf73"><code>e3e4a16</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3890d675857384620b5a65e18ee0b280efef6bc"><code>f3890d6</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_comments_324574.json:
```json
{
    "body": "Changed commit from **[`f3890d6`](https://github.com/sagemath/sagetrac-mirror/commit/f3890d675857384620b5a65e18ee0b280efef6bc)** to **[`b5f1fd6`](https://github.com/sagemath/sagetrac-mirror/commit/b5f1fd618b40c4f5f7bc9bbd56de77f344d7ec5b)**",
    "created_at": "2019-01-23T21:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324574",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f3890d6`](https://github.com/sagemath/sagetrac-mirror/commit/f3890d675857384620b5a65e18ee0b280efef6bc)** to **[`b5f1fd6`](https://github.com/sagemath/sagetrac-mirror/commit/b5f1fd618b40c4f5f7bc9bbd56de77f344d7ec5b)**



---

archive/issue_comments_324575.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5f1fd618b40c4f5f7bc9bbd56de77f344d7ec5b\"><code>b5f1fd6</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2019-01-23T21:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324575",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5f1fd618b40c4f5f7bc9bbd56de77f344d7ec5b"><code>b5f1fd6</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_comments_324576.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d55170af6f927bca2e8023a2d49c182fd2387c34\"><code>d55170a</code></a></td><td><code>Minor doctest fixes for Trac #22029</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de5539769fc1a6029089baa38cf691e6e58c18f0\"><code>de55397</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/815ceab37e0b72270040a790b1a79b43d7d5c455\"><code>815ceab</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2019-01-23T21:30:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324576",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d55170af6f927bca2e8023a2d49c182fd2387c34"><code>d55170a</code></a></td><td><code>Minor doctest fixes for Trac #22029</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de5539769fc1a6029089baa38cf691e6e58c18f0"><code>de55397</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/815ceab37e0b72270040a790b1a79b43d7d5c455"><code>815ceab</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_comments_324577.json:
```json
{
    "body": "Changed commit from **[`b5f1fd6`](https://github.com/sagemath/sagetrac-mirror/commit/b5f1fd618b40c4f5f7bc9bbd56de77f344d7ec5b)** to **[`815ceab`](https://github.com/sagemath/sagetrac-mirror/commit/815ceab37e0b72270040a790b1a79b43d7d5c455)**",
    "created_at": "2019-01-23T21:30:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324577",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b5f1fd6`](https://github.com/sagemath/sagetrac-mirror/commit/b5f1fd618b40c4f5f7bc9bbd56de77f344d7ec5b)** to **[`815ceab`](https://github.com/sagemath/sagetrac-mirror/commit/815ceab37e0b72270040a790b1a79b43d7d5c455)**



---

archive/issue_comments_324578.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b3f8d3e7dea6f02865a40c5d0d0e24c06967842\"><code>4b3f8d3</code></a></td><td><code>Make relabel() of DynkinDiagram more compatible with GenericGraph</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69978b6716ac8b78b591a5d948ea1a0d340c3941\"><code>69978b6</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e09ddd2dbfd91001567c43693a1e90a7ee6bbaed\"><code>e09ddd2</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2019-01-25T09:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324578",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b3f8d3e7dea6f02865a40c5d0d0e24c06967842"><code>4b3f8d3</code></a></td><td><code>Make relabel() of DynkinDiagram more compatible with GenericGraph</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69978b6716ac8b78b591a5d948ea1a0d340c3941"><code>69978b6</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e09ddd2dbfd91001567c43693a1e90a7ee6bbaed"><code>e09ddd2</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_comments_324579.json:
```json
{
    "body": "Changed commit from **[`815ceab`](https://github.com/sagemath/sagetrac-mirror/commit/815ceab37e0b72270040a790b1a79b43d7d5c455)** to **[`e09ddd2`](https://github.com/sagemath/sagetrac-mirror/commit/e09ddd2dbfd91001567c43693a1e90a7ee6bbaed)**",
    "created_at": "2019-01-25T09:26:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324579",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`815ceab`](https://github.com/sagemath/sagetrac-mirror/commit/815ceab37e0b72270040a790b1a79b43d7d5c455)** to **[`e09ddd2`](https://github.com/sagemath/sagetrac-mirror/commit/e09ddd2dbfd91001567c43693a1e90a7ee6bbaed)**



---

archive/issue_comments_324580.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, [Pynac #339](https://github.com/pynac/pynac/issues/339).\n+Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, [Pynac #339](https://github.com/pynac/pynac/issues/339).\n``````\n",
    "created_at": "2019-01-25T09:29:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324580",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-See also #22297, #22344, #22346, #22349, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, [Pynac #339](https://github.com/pynac/pynac/issues/339).
+Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, [Pynac #339](https://github.com/pynac/pynac/issues/339).
``````




---

archive/issue_comments_324581.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/103571f7804e9ae60923085a7bc19e40e6d017bb\"><code>103571f</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21987572be7170cc85cd4b701b08bf565fe27eb7\"><code>2198757</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2019-01-25T10:51:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324581",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/103571f7804e9ae60923085a7bc19e40e6d017bb"><code>103571f</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21987572be7170cc85cd4b701b08bf565fe27eb7"><code>2198757</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_comments_324582.json:
```json
{
    "body": "Changed commit from **[`e09ddd2`](https://github.com/sagemath/sagetrac-mirror/commit/e09ddd2dbfd91001567c43693a1e90a7ee6bbaed)** to **[`2198757`](https://github.com/sagemath/sagetrac-mirror/commit/21987572be7170cc85cd4b701b08bf565fe27eb7)**",
    "created_at": "2019-01-25T10:51:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324582",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e09ddd2`](https://github.com/sagemath/sagetrac-mirror/commit/e09ddd2dbfd91001567c43693a1e90a7ee6bbaed)** to **[`2198757`](https://github.com/sagemath/sagetrac-mirror/commit/21987572be7170cc85cd4b701b08bf565fe27eb7)**



---

archive/issue_comments_324583.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, [Pynac #339](https://github.com/pynac/pynac/issues/339).\n+Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, #27123, [Pynac #339](https://github.com/pynac/pynac/issues/339).\n``````\n",
    "created_at": "2019-01-25T14:56:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324583",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, [Pynac #339](https://github.com/pynac/pynac/issues/339).
+Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, #27123, [Pynac #339](https://github.com/pynac/pynac/issues/339).
``````




---

archive/issue_events_305803.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-25T14:56:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305803"
}
```



---

archive/issue_events_305804.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-25T14:56:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "milestone_number": null,
    "milestone_title": "sage-8.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305804"
}
```



---

archive/issue_comments_324584.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02ecd8eed7bc186f681b9887732e21023d398961\"><code>02ecd8e</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0832c075ffdca8ef8f88c009098cb96ee811b06\"><code>a0832c0</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2019-02-03T11:24:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324584",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02ecd8eed7bc186f681b9887732e21023d398961"><code>02ecd8e</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0832c075ffdca8ef8f88c009098cb96ee811b06"><code>a0832c0</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_comments_324585.json:
```json
{
    "body": "Changed commit from **[`2198757`](https://github.com/sagemath/sagetrac-mirror/commit/21987572be7170cc85cd4b701b08bf565fe27eb7)** to **[`a0832c0`](https://github.com/sagemath/sagetrac-mirror/commit/a0832c075ffdca8ef8f88c009098cb96ee811b06)**",
    "created_at": "2019-02-03T11:24:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324585",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2198757`](https://github.com/sagemath/sagetrac-mirror/commit/21987572be7170cc85cd4b701b08bf565fe27eb7)** to **[`a0832c0`](https://github.com/sagemath/sagetrac-mirror/commit/a0832c075ffdca8ef8f88c009098cb96ee811b06)**



---

archive/issue_comments_324586.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89e7ec23eb8dbbf5ee94a580dd8889c81baf9c7c\"><code>89e7ec2</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20b647725d977fa5be5bfe712b21987dfc8fcecc\"><code>20b6477</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2019-02-03T11:34:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324586",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89e7ec23eb8dbbf5ee94a580dd8889c81baf9c7c"><code>89e7ec2</code></a></td><td><code>Avoid calling vertices() in graph_isom_equivalent_non_edge_labeled_graph()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20b647725d977fa5be5bfe712b21987dfc8fcecc"><code>20b6477</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_comments_324587.json:
```json
{
    "body": "Changed commit from **[`a0832c0`](https://github.com/sagemath/sagetrac-mirror/commit/a0832c075ffdca8ef8f88c009098cb96ee811b06)** to **[`20b6477`](https://github.com/sagemath/sagetrac-mirror/commit/20b647725d977fa5be5bfe712b21987dfc8fcecc)**",
    "created_at": "2019-02-03T11:34:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324587",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a0832c0`](https://github.com/sagemath/sagetrac-mirror/commit/a0832c075ffdca8ef8f88c009098cb96ee811b06)** to **[`20b6477`](https://github.com/sagemath/sagetrac-mirror/commit/20b647725d977fa5be5bfe712b21987dfc8fcecc)**



---

archive/issue_comments_324588.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86bbcf5a0edc234197650f29c047a2ef696d8bc4\"><code>86bbcf5</code></a></td><td><code>Add Pynac unordered_map patch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef01c332d8a7dd4ddab0c796888d065c0abefb4f\"><code>ef01c33</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2019-02-05T08:14:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324588",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86bbcf5a0edc234197650f29c047a2ef696d8bc4"><code>86bbcf5</code></a></td><td><code>Add Pynac unordered_map patch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef01c332d8a7dd4ddab0c796888d065c0abefb4f"><code>ef01c33</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_comments_324589.json:
```json
{
    "body": "Changed commit from **[`20b6477`](https://github.com/sagemath/sagetrac-mirror/commit/20b647725d977fa5be5bfe712b21987dfc8fcecc)** to **[`ef01c33`](https://github.com/sagemath/sagetrac-mirror/commit/ef01c332d8a7dd4ddab0c796888d065c0abefb4f)**",
    "created_at": "2019-02-05T08:14:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324589",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`20b6477`](https://github.com/sagemath/sagetrac-mirror/commit/20b647725d977fa5be5bfe712b21987dfc8fcecc)** to **[`ef01c33`](https://github.com/sagemath/sagetrac-mirror/commit/ef01c332d8a7dd4ddab0c796888d065c0abefb4f)**



---

archive/issue_events_305805.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-02-05T08:15:17Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "title_is": "Element richcmp: never use id()",
    "title_was": "[WIP] Element richcmp: never use id()",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305805"
}
```



---

archive/issue_comments_324590.json:
```json
{
    "body": "Changed work issues from **dependencies** to none",
    "created_at": "2019-02-05T08:15:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324590",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **dependencies** to none



---

archive/issue_comments_324591.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, #27123, [Pynac #339](https://github.com/pynac/pynac/issues/339).\n+Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, #27123, #27221\n``````\n",
    "created_at": "2019-02-05T08:15:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324591",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, #27123, [Pynac #339](https://github.com/pynac/pynac/issues/339).
+Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, #27123, #27221
``````




---

archive/issue_comments_324592.json:
```json
{
    "body": "Dependencies: **#27221**",
    "created_at": "2019-02-05T08:15:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324592",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#27221**



---

archive/issue_comments_324593.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nGreen bot!",
    "created_at": "2019-02-09T08:05:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324593",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

Green bot!



---

archive/issue_comments_324594.json:
```json
{
    "body": "<div id=\"comment:145\" align=\"right\">comment:145</div>\n\nReplying to [@jdemeyer](#comment:144):\n> Green bot!\n\nGreat! Here is a version based on 8.7.beta3 with #27241.",
    "created_at": "2019-02-09T08:43:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324594",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:145" align="right">comment:145</div>

Replying to [@jdemeyer](#comment:144):
> Green bot!

Great! Here is a version based on 8.7.beta3 with #27241.



---

archive/issue_comments_324595.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n \n This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).\n \n-Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, #27123, #27221\n+Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, #27123, #27241\n``````\n",
    "created_at": "2019-02-09T08:43:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324595",
    "user": "https://github.com/mezzarobba"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 
 This branch implements comparisons for `Element` the same way as in Python 3: a `TypeError` is raised for uncomparable objects (instead of comparing by `id`).
 
-Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, #27123, #27221
+Dependencies: #22297, #22344, #22346, #22369, #22370, #22371, #22372, #22373, #22376, #22382, #24968, #26917, #26931, #26933, #26934, #26935, #26936, #26937, #26938, #26947, #27003, #27009, #27010, #27026, #27027, #27029, #27123, #27241
``````




---

archive/issue_comments_324596.json:
```json
{
    "body": "Changed dependencies from **#27221** to **#27241**",
    "created_at": "2019-02-09T08:43:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324596",
    "user": "https://github.com/mezzarobba"
}
```

Changed dependencies from **#27221** to **#27241**



---

archive/issue_comments_324597.json:
```json
{
    "body": "Changed commit from **[`ef01c33`](https://github.com/sagemath/sagetrac-mirror/commit/ef01c332d8a7dd4ddab0c796888d065c0abefb4f)** to **[`e311ab1`](https://github.com/sagemath/sagetrac-mirror/commit/e311ab134f9d0c16dbbb800d35ba2c4325b4beb2)**",
    "created_at": "2019-02-09T08:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324597",
    "user": "https://github.com/mezzarobba"
}
```

Changed commit from **[`ef01c33`](https://github.com/sagemath/sagetrac-mirror/commit/ef01c332d8a7dd4ddab0c796888d065c0abefb4f)** to **[`e311ab1`](https://github.com/sagemath/sagetrac-mirror/commit/e311ab134f9d0c16dbbb800d35ba2c4325b4beb2)**



---

archive/issue_comments_324598.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22029-richcmp)** to **[u/mmezzarobba/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/22029-richcmp)**",
    "created_at": "2019-02-09T08:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324598",
    "user": "https://github.com/mezzarobba"
}
```

Changed branch from **[u/jdemeyer/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22029-richcmp)** to **[u/mmezzarobba/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/22029-richcmp)**



---

archive/issue_comments_324599.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a6ceab9783f766273138e2e4361c63a9d7950eec\"><code>a6ceab9</code></a></td><td><code>pynac-0.7.24 pkg/chksum</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e311ab134f9d0c16dbbb800d35ba2c4325b4beb2\"><code>e311ab1</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>\n",
    "created_at": "2019-02-09T08:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324599",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:6"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a6ceab9783f766273138e2e4361c63a9d7950eec"><code>a6ceab9</code></a></td><td><code>pynac-0.7.24 pkg/chksum</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e311ab134f9d0c16dbbb800d35ba2c4325b4beb2"><code>e311ab1</code></a></td><td><code>Element richcmp: never use id()</code></td></tr></table>




---

archive/issue_comments_324600.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAs for the actual content: I'm happy with this version, and I'm ready to give it positive review once the patchbot comes back green with the new pynac release. I'm still not 100% convinced that the way you are handling non-Elements and coercion failures is optimal, but even if not, it shouldn't be too hard to change later if this turns out to be an issue.",
    "created_at": "2019-02-09T08:56:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324600",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:7" align="right">comment:7</div>

As for the actual content: I'm happy with this version, and I'm ready to give it positive review once the patchbot comes back green with the new pynac release. I'm still not 100% convinced that the way you are handling non-Elements and coercion failures is optimal, but even if not, it shouldn't be too hard to change later if this turns out to be an issue.



---

archive/issue_events_305806.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-02-09T10:31:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305806"
}
```



---

archive/issue_events_305807.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-02-09T10:31:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305807"
}
```



---

archive/issue_comments_324601.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe tests pass on my box.",
    "created_at": "2019-02-09T10:31:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324601",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:8" align="right">comment:8</div>

The tests pass on my box.



---

archive/issue_comments_324602.json:
```json
{
    "body": "Changed reviewer from **Julian R\u00fcth** to **Julian R\u00fcth, Marc Mezzarobba**",
    "created_at": "2019-02-09T10:31:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324602",
    "user": "https://github.com/mezzarobba"
}
```

Changed reviewer from **Julian RÃ¼th** to **Julian RÃ¼th, Marc Mezzarobba**



---

archive/issue_comments_324603.json:
```json
{
    "body": "<div id=\"comment:149\" align=\"right\">comment:149</div>\n\nReplying to [@mezzarobba](#comment:147):\n> I'm still not 100% convinced that the way you are handling non-Elements and coercion failures is optimal\n\nWhat do you mean exactly? I'm open to suggestions for improvement.\n\nWhat I want is that comparisons involving the coercion model behave just like comparisons in Python 3 should behave. This means: if the objects cannot be compared, raise an error instead of returning some arbitrary value.",
    "created_at": "2019-02-10T13:10:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324603",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:149" align="right">comment:149</div>

Replying to [@mezzarobba](#comment:147):
> I'm still not 100% convinced that the way you are handling non-Elements and coercion failures is optimal

What do you mean exactly? I'm open to suggestions for improvement.

What I want is that comparisons involving the coercion model behave just like comparisons in Python 3 should behave. This means: if the objects cannot be compared, raise an error instead of returning some arbitrary value.



---

archive/issue_comments_324604.json:
```json
{
    "body": "<div id=\"comment:150\" align=\"right\">comment:150</div>\n\nReplying to [@jdemeyer](#comment:149):\n> Replying to [@mezzarobba](#comment:147):\n> > I'm still not 100% convinced that the way you are handling non-Elements and coercion failures is optimal\n\n> \n> What do you mean exactly? I'm open to suggestions for improvement.\n\nWe had this discussion two years ago when I started this ticket, and frankly I don't remember all the details. But I think it revolved around the following points:\n\n* Regarding coercion failures, it *might* be better to raise an error (however inconvenient that would be!)\n  * instead of returning `False` when two `Element`s with no common parent are compared using\u00a0`==`,\n  * and, perhaps more importantly, instead of returning `True` when they are compared with `!=`\u2014the additional point to consider in this case being that returning `True` would be \u201cwrong\u201d if we haven't proved that the elements are different, while many boolean predicates in Sage return `False` when they can not decide.\n\n* Regarding non-`Element`s:\n  * The coercion framework treats some specific types essentially like `Element`. We need to be consistent with that, but still allow users to define new types that implement their own comparison logic with Sage elements.\n  * `richcmp()` currently does that by calling `tp_richcompare()` on the non-`Element`, instead of returning `NotImplemented`. I'm not 100% comfortable with this choice. I assume that the goal to get the same behavior under Python 2 and 3, but I'm a bit confused here, because (unless I misunderstood you) you argued against that choice two years ago.",
    "created_at": "2019-02-10T14:29:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324604",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:150" align="right">comment:150</div>

Replying to [@jdemeyer](#comment:149):
> Replying to [@mezzarobba](#comment:147):
> > I'm still not 100% convinced that the way you are handling non-Elements and coercion failures is optimal

> 
> What do you mean exactly? I'm open to suggestions for improvement.

We had this discussion two years ago when I started this ticket, and frankly I don't remember all the details. But I think it revolved around the following points:

* Regarding coercion failures, it *might* be better to raise an error (however inconvenient that would be!)
  * instead of returning `False` when two `Element`s with no common parent are compared usingÂ `==`,
  * and, perhaps more importantly, instead of returning `True` when they are compared with `!=`âthe additional point to consider in this case being that returning `True` would be âwrongâ if we haven't proved that the elements are different, while many boolean predicates in Sage return `False` when they can not decide.

* Regarding non-`Element`s:
  * The coercion framework treats some specific types essentially like `Element`. We need to be consistent with that, but still allow users to define new types that implement their own comparison logic with Sage elements.
  * `richcmp()` currently does that by calling `tp_richcompare()` on the non-`Element`, instead of returning `NotImplemented`. I'm not 100% comfortable with this choice. I assume that the goal to get the same behavior under Python 2 and 3, but I'm a bit confused here, because (unless I misunderstood you) you argued against that choice two years ago.



---

archive/issue_comments_324605.json:
```json
{
    "body": "<div id=\"comment:151\" align=\"right\">comment:151</div>\n\nReplying to [@mezzarobba](#comment:150):\n> * Regarding coercion failures, it *might* be better to raise an error (however inconvenient that would be!)\n>   * instead of returning `False` when two `Element`s with no common parent are compared using\u00a0`==`\n\nI would argue that, when there is no common parent, elements clearly cannot be equal. This is also consistent with Python 3 where uncomparable objects can still be compared by `==` and `!=`:\n\n```\nPython 3.6.3 (default, Mar 13 2018, 19:00:30) \n[GCC 6.4.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> 1 == \"x\"\nFalse\n```\n\n> * and, perhaps more importantly, instead of returning `True` when they are compared with `!=`\u2014the additional point to consider in this case being that returning `True` would be \u201cwrong\u201d if we haven't proved that the elements are different\n\nAgain, if those elements don't coerce to a common parent, they cannot be equal.\n\n> * Regarding non-`Element`s:\n>   * The coercion framework treats some specific types essentially like `Element`. We need to be consistent with that\n\nAs far as I know, we are consistent.\n\n> but still allow users to define new types that implement their own comparison logic with Sage elements.\n> * `richcmp()` currently does that by calling `tp_richcompare()` on the non-`Element`, instead of returning `NotImplemented`.\n\nExactly.\n\n> I'm not 100% comfortable with this choice. I assume that the goal to get the same behavior under Python 2 and 3\n\nExactly. Returning `NotImplemented` causes different behavior on Python 2 and Python 3.\n\n> I'm a bit confused here, because (unless I misunderstood you) you argued against that choice two years ago.\n\nI don't remember precisely. Anyway, I changed my mind and I'm convinced now that raising an error is the right thing to do.",
    "created_at": "2019-02-10T20:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324605",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:151" align="right">comment:151</div>

Replying to [@mezzarobba](#comment:150):
> * Regarding coercion failures, it *might* be better to raise an error (however inconvenient that would be!)
>   * instead of returning `False` when two `Element`s with no common parent are compared usingÂ `==`

I would argue that, when there is no common parent, elements clearly cannot be equal. This is also consistent with Python 3 where uncomparable objects can still be compared by `==` and `!=`:

```
Python 3.6.3 (default, Mar 13 2018, 19:00:30) 
[GCC 6.4.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> 1 == "x"
False
```

> * and, perhaps more importantly, instead of returning `True` when they are compared with `!=`âthe additional point to consider in this case being that returning `True` would be âwrongâ if we haven't proved that the elements are different

Again, if those elements don't coerce to a common parent, they cannot be equal.

> * Regarding non-`Element`s:
>   * The coercion framework treats some specific types essentially like `Element`. We need to be consistent with that

As far as I know, we are consistent.

> but still allow users to define new types that implement their own comparison logic with Sage elements.
> * `richcmp()` currently does that by calling `tp_richcompare()` on the non-`Element`, instead of returning `NotImplemented`.

Exactly.

> I'm not 100% comfortable with this choice. I assume that the goal to get the same behavior under Python 2 and 3

Exactly. Returning `NotImplemented` causes different behavior on Python 2 and Python 3.

> I'm a bit confused here, because (unless I misunderstood you) you argued against that choice two years ago.

I don't remember precisely. Anyway, I changed my mind and I'm convinced now that raising an error is the right thing to do.



---

archive/issue_events_305808.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-02-11T23:06:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305808"
}
```



---

archive/issue_events_305809.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ded99bfcda2dc15a1150baa1cb5f325158048e0c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-02-11T23:06:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22029#event-305809"
}
```



---

archive/issue_comments_324606.json:
```json
{
    "body": "Changed branch from **[u/mmezzarobba/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/22029-richcmp)** to **[`e311ab1`](https://github.com/sagemath/sagetrac-mirror/commit/e311ab134f9d0c16dbbb800d35ba2c4325b4beb2)**",
    "created_at": "2019-02-11T23:06:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22029",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22029#issuecomment-324606",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mmezzarobba/22029-richcmp](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/22029-richcmp)** to **[`e311ab1`](https://github.com/sagemath/sagetrac-mirror/commit/e311ab134f9d0c16dbbb800d35ba2c4325b4beb2)**
