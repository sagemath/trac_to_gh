# Issue 22225: LatticePoset: add quotient lattice

archive/issues_021988.json:
```json
{
    "body": "This patch will add a function to compute the quotient lattice.\n\nAlso contains a parameter name change for `sublattices_lattice()`.\n\n\nCC:  @mantepse\n\nBranch/Commit: eed7b7464b6d78badc5c73bf2676abeee401917d\n\nReviewer: Martin Rubey\n\nAuthor: Jori M\u00e4ntysalo, Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22225\n\n",
    "closed_at": "2017-02-14T18:58:55Z",
    "created_at": "2017-01-21T19:00:03Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "LatticePoset: add quotient lattice",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22225",
    "user": "https://github.com/jm58660"
}
```
This patch will add a function to compute the quotient lattice.

Also contains a parameter name change for `sublattices_lattice()`.


CC:  @mantepse

Branch/Commit: eed7b7464b6d78badc5c73bf2676abeee401917d

Reviewer: Martin Rubey

Author: Jori MÃ¤ntysalo, Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22225





---

archive/issue_comments_305265.json:
```json
{
    "body": "<a id='comment:2'></a>Martin, you reviewed #20058 and so may be interested in this too. The code should work, but I am currently compiling it on a slow machine.\n\nWhat you think about function name, parameter names and examples? I am not very satisfied, but don't know what would be better.\n\n---\nNew commits:",
    "created_at": "2017-01-21T19:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305265",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>Martin, you reviewed #20058 and so may be interested in this too. The code should work, but I am currently compiling it on a slow machine.

What you think about function name, parameter names and examples? I am not very satisfied, but don't know what would be better.

---
New commits:



---

archive/issue_comments_305266.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-22T06:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305266",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305267.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-01-22T07:41:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305267",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_305268.json:
```json
{
    "body": "<a id='comment:5'></a>* I think you should specify the possibilities for `element_constructor` in the docstring.\n\n* it might be nice to show an example using the `FiniteLatticePoset.congruence` method.\n\n* why aren't you satisfied with the names?",
    "created_at": "2017-01-22T08:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305268",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:5'></a>* I think you should specify the possibilities for `element_constructor` in the docstring.

* it might be nice to show an example using the `FiniteLatticePoset.congruence` method.

* why aren't you satisfied with the names?



---

archive/issue_comments_305269.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 mantepse]:\n> * I think you should specify the possibilities for `element_constructor` in the docstring.\n\n\nTrue. I'll do.\n\n> * it might be nice to show an example using the `FiniteLatticePoset.congruence` method.\n\n\n?? All examples are done with that. Actually this `quotient()` function makes no sense alone.\n\n> * why aren't you satisfied with the names?\n\n\nShould `element_constructor` be `element_labels`? Should I have `C` or `T` (from `\\Theta`) as first parameter? `'integer'` or `'integers'`? I feel that there is no natural and clear naming. Might be because I don't write in my native language.",
    "created_at": "2017-01-22T08:33:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305269",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:6'></a>Replying to [comment:5 mantepse]:
> * I think you should specify the possibilities for `element_constructor` in the docstring.


True. I'll do.

> * it might be nice to show an example using the `FiniteLatticePoset.congruence` method.


?? All examples are done with that. Actually this `quotient()` function makes no sense alone.

> * why aren't you satisfied with the names?


Should `element_constructor` be `element_labels`? Should I have `C` or `T` (from `\Theta`) as first parameter? `'integer'` or `'integers'`? I feel that there is no natural and clear naming. Might be because I don't write in my native language.



---

archive/issue_comments_305270.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 jmantysalo]:\n> Replying to [comment:5 mantepse]:\n\n\n> > * it might be nice to show an example using the `FiniteLatticePoset.congruence` method.\n \n> \n> ?? All examples are done with that. Actually this `quotient()` function makes no sense alone.\n\n\nI'm sorry, I must have been blind.  Please excuse me.",
    "created_at": "2017-01-22T09:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305270",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:7'></a>Replying to [comment:6 jmantysalo]:
> Replying to [comment:5 mantepse]:


> > * it might be nice to show an example using the `FiniteLatticePoset.congruence` method.
 
> 
> ?? All examples are done with that. Actually this `quotient()` function makes no sense alone.


I'm sorry, I must have been blind.  Please excuse me.



---

archive/issue_comments_305271.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-22T09:47:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305271",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305272.json:
```json
{
    "body": "<a id='comment:9'></a>Is it \"quotient by congruence\" or \"quotient of congruence\" or something else?",
    "created_at": "2017-01-22T09:55:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305272",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:9'></a>Is it "quotient by congruence" or "quotient of congruence" or something else?



---

archive/issue_comments_305273.json:
```json
{
    "body": "<a id='comment:10'></a>More comments for this one?",
    "created_at": "2017-01-29T14:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305273",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:10'></a>More comments for this one?



---

archive/issue_comments_305274.json:
```json
{
    "body": "<a id='comment:11'></a>I would change the docstring to\n\n```\n        Return the quotient lattice by ``congruence``.\n\n        Let `L` be a lattice and `\\Theta` be a congruence of `L` with\n        congurence classes `\\Theta_1, \\Theta_2, \\ldots`. The quotient\n        lattice `L/\\Theta` is the lattice with elements\n        `\\{\\Theta_1, \\Theta_2, \\ldots\\}` and meet and join given by the\n        original lattice. Explicitly, if `e_1 \\in \\Theta_1` and\n        `e_2 \\in \\Theta_2`, such that `e_1 \\vee e_2 \\in \\Theta_3` then\n        `\\Theta_1 \\vee \\Theta_2 = \\Theta_3` in `L/\\Theta` and similarly\n        for meets.\n\n        INPUT:\n\n        - ``congruence`` -- list of lists; a congruence\n\n        - ``element_constructor`` -- string; the elements of the resulting\n          lattice and can be one of the following:\n\n          * ``'tuple'`` - elements are tuples of elements of the original\n            lattice\n          * ``'lattice'`` - elements are sublattices of the original lattice\n          * ``'integer'`` - elements are labeled by integers\n\n        .. WARNING::\n\n            ``congruence`` is expected to be a valid congruence of the\n            lattice. This is *not* checked.\n```\nI would also change `element_constructor` to `element_labels` as the former suggests it allows a function valid input.",
    "created_at": "2017-01-29T14:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305274",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>I would change the docstring to

```
        Return the quotient lattice by ``congruence``.

        Let `L` be a lattice and `\Theta` be a congruence of `L` with
        congurence classes `\Theta_1, \Theta_2, \ldots`. The quotient
        lattice `L/\Theta` is the lattice with elements
        `\{\Theta_1, \Theta_2, \ldots\}` and meet and join given by the
        original lattice. Explicitly, if `e_1 \in \Theta_1` and
        `e_2 \in \Theta_2`, such that `e_1 \vee e_2 \in \Theta_3` then
        `\Theta_1 \vee \Theta_2 = \Theta_3` in `L/\Theta` and similarly
        for meets.

        INPUT:

        - ``congruence`` -- list of lists; a congruence

        - ``element_constructor`` -- string; the elements of the resulting
          lattice and can be one of the following:

          * ``'tuple'`` - elements are tuples of elements of the original
            lattice
          * ``'lattice'`` - elements are sublattices of the original lattice
          * ``'integer'`` - elements are labeled by integers

        .. WARNING::

            ``congruence`` is expected to be a valid congruence of the
            lattice. This is *not* checked.
```
I would also change `element_constructor` to `element_labels` as the former suggests it allows a function valid input.



---

archive/issue_comments_305275.json:
```json
{
    "body": "<a id='comment:12'></a>I would like to have as few `WARNING`s as possible. Can we avoid that by requiring the input to be of type SetPartition? And/or `rename()` the set partition given by `congruence()`? Then the user would really need to break things to get an error.\n\nOr do we break something if we just put extra value `._congruence_base_lattice` pointing to the lattice to a `SetPartition`-object? Of course that would cost some extra bytes for every congruence.",
    "created_at": "2017-01-30T06:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305275",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:12'></a>I would like to have as few `WARNING`s as possible. Can we avoid that by requiring the input to be of type SetPartition? And/or `rename()` the set partition given by `congruence()`? Then the user would really need to break things to get an error.

Or do we break something if we just put extra value `._congruence_base_lattice` pointing to the lattice to a `SetPartition`-object? Of course that would cost some extra bytes for every congruence.



---

archive/issue_comments_305276.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:12 jmantysalo]:\n> I would like to have as few `WARNING`s as possible.\n\n\nThen you need to check that your input is a valid congruence.\n\n> Can we avoid that by requiring the input to be of type SetPartition? And/or `rename()` the set partition given by `congruence()`? Then the user would really need to break things to get an error.\n\n\nI don't see anything in the code that assumes it is an instance of `SetPartition`. So I don't understand what you're trying to get at here. Although I suspect it is not the issue.\n\n> Or do we break something if we just put extra value `._congruence_base_lattice` pointing to the lattice to a `SetPartition`-object? Of course that would cost some extra bytes for every congruence.\n\n\nI'm not sure what you mean here.",
    "created_at": "2017-01-30T15:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305276",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>Replying to [comment:12 jmantysalo]:
> I would like to have as few `WARNING`s as possible.


Then you need to check that your input is a valid congruence.

> Can we avoid that by requiring the input to be of type SetPartition? And/or `rename()` the set partition given by `congruence()`? Then the user would really need to break things to get an error.


I don't see anything in the code that assumes it is an instance of `SetPartition`. So I don't understand what you're trying to get at here. Although I suspect it is not the issue.

> Or do we break something if we just put extra value `._congruence_base_lattice` pointing to the lattice to a `SetPartition`-object? Of course that would cost some extra bytes for every congruence.


I'm not sure what you mean here.



---

archive/issue_comments_305277.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-30T19:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305277",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305278.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:13 tscrim]:\n> I'm not sure what you mean here.\n\n\nI made a PoC, see the code.\n\nAs currently `LatticePoset` is never deallocated, it does not hurt more to have an extra pointer for it. But of course this will still eat some bytes.",
    "created_at": "2017-01-30T19:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305278",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:15'></a>Replying to [comment:13 tscrim]:
> I'm not sure what you mean here.


I made a PoC, see the code.

As currently `LatticePoset` is never deallocated, it does not hurt more to have an extra pointer for it. But of course this will still eat some bytes.



---

archive/issue_comments_305279.json:
```json
{
    "body": "<a id='comment:16'></a>That is going to fail in an extremely subtle way if the user passes in something constructed from `congruence` and then the \"same\" set partition constructed directly. It is also completely unnecessary by how you are handling the input.\n\nIf you want a check, then you need to check that it satisfies the properties of being a congruence (I would also then add an extra argument `check=True` to have the option of turning this off). Otherwise it needs to be a `.. WARNING::`.",
    "created_at": "2017-01-31T15:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305279",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>That is going to fail in an extremely subtle way if the user passes in something constructed from `congruence` and then the "same" set partition constructed directly. It is also completely unnecessary by how you are handling the input.

If you want a check, then you need to check that it satisfies the properties of being a congruence (I would also then add an extra argument `check=True` to have the option of turning this off). Otherwise it needs to be a `.. WARNING::`.



---

archive/issue_comments_305280.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 tscrim]:\n> That is going to fail in an extremely subtle way if the user passes in something constructed from `congruence` and then the \"same\" set partition constructed directly.\n\n\n?? With this PoC:\n\n```\nsage: L1 = Posets.BooleanLattice(3)\nsage: L2 = L1.relabel(lambda x: 7-x)\nsage: c = L1.congruence([[0, 1]])\nsage: L2.quotient(c)\n\n. . . ValueError: AAARghsss!\n```\n\nBut OK, I'll change the docstring.",
    "created_at": "2017-02-01T20:34:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305280",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:17'></a>Replying to [comment:16 tscrim]:
> That is going to fail in an extremely subtle way if the user passes in something constructed from `congruence` and then the "same" set partition constructed directly.


?? With this PoC:

```
sage: L1 = Posets.BooleanLattice(3)
sage: L2 = L1.relabel(lambda x: 7-x)
sage: c = L1.congruence([[0, 1]])
sage: L2.quotient(c)

. . . ValueError: AAARghsss!
```

But OK, I'll change the docstring.



---

archive/issue_comments_305281.json:
```json
{
    "body": "<a id='comment:18'></a>The problem is if they pass in the \"same\" set partition for the congruence but not created by `L1.congruence`:\n\n```\nsage: L1 = Posets.BooleanLattice(3)\nsage: c = L1.congruence([[0, 1]]); c\n{{0, 1}, {2, 3}, {4, 5}, {6, 7}}\nsage: L1.quotient(c)\nFinite lattice containing 4 elements\nsage: c2 = SetPartition([[0,1], [2,3], [4,5], [6,7]])\nsage: c == c2\nTrue\nsage: L1.quotient(c2)\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n...\nAttributeError: 'SetPartitions_all_with_category.element_class' object has no attribute '_congruence_base_lattice'\n```",
    "created_at": "2017-02-02T00:31:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305281",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>The problem is if they pass in the "same" set partition for the congruence but not created by `L1.congruence`:

```
sage: L1 = Posets.BooleanLattice(3)
sage: c = L1.congruence([[0, 1]]); c
{{0, 1}, {2, 3}, {4, 5}, {6, 7}}
sage: L1.quotient(c)
Finite lattice containing 4 elements
sage: c2 = SetPartition([[0,1], [2,3], [4,5], [6,7]])
sage: c == c2
True
sage: L1.quotient(c2)
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
...
AttributeError: 'SetPartitions_all_with_category.element_class' object has no attribute '_congruence_base_lattice'
```



---

archive/issue_comments_305282.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:18 tscrim]:\n> The problem is if they pass in the \"same\" set partition for the congruence but not created by `L1.congruence`:\n> \n> ```\n> sage: c == c2\n> True\n> ```\n\n\nOK, I understand. So to avoid warning we should have a specific class (inherited from `SetPartition`), but that's too much. If we only change `name` on result from `congruence` it would help too little.\n\nI'll do docstring modification.",
    "created_at": "2017-02-02T04:49:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305282",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:19'></a>Replying to [comment:18 tscrim]:
> The problem is if they pass in the "same" set partition for the congruence but not created by `L1.congruence`:
> 
> ```
> sage: c == c2
> True
> ```


OK, I understand. So to avoid warning we should have a specific class (inherited from `SetPartition`), but that's too much. If we only change `name` on result from `congruence` it would help too little.

I'll do docstring modification.



---

archive/issue_comments_305283.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-02-02T08:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305283",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_305284.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-02-02T08:50:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305284",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_305285.json:
```json
{
    "body": "<a id='comment:21'></a>Added Travis to author, as I took the docstring from him.\n\nReplying to [comment:11 tscrim]:\n\n> I would also change `element_constructor` to `element_labels` as the former suggests it allows a function valid input.\n\n\nHmm... `vertical_composition` has `labels`, `sublattices_lattice` has `element_constructor`. On posets `disjoint_union` etc. has `labels`. OTOH `with_bounds` have `labels` with different meaning. Only `antichains` and `chains` use `element_constructor`.\n\nBut yes, I think `labels` is best one. Martin, comments on this?",
    "created_at": "2017-02-02T08:50:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305285",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:21'></a>Added Travis to author, as I took the docstring from him.

Replying to [comment:11 tscrim]:

> I would also change `element_constructor` to `element_labels` as the former suggests it allows a function valid input.


Hmm... `vertical_composition` has `labels`, `sublattices_lattice` has `element_constructor`. On posets `disjoint_union` etc. has `labels`. OTOH `with_bounds` have `labels` with different meaning. Only `antichains` and `chains` use `element_constructor`.

But yes, I think `labels` is best one. Martin, comments on this?



---

archive/issue_comments_305286.json:
```json
{
    "body": "<a id='comment:22'></a>I second `labels`.",
    "created_at": "2017-02-02T15:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305286",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>I second `labels`.



---

archive/issue_comments_305287.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-03T07:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305287",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305288.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-02-03T07:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305288",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_305289.json:
```json
{
    "body": "<a id='comment:24'></a>Maybe we can go with this.",
    "created_at": "2017-02-03T07:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305289",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:24'></a>Maybe we can go with this.



---

archive/issue_comments_305290.json:
```json
{
    "body": "<a id='comment:25'></a>I have no time to check this properly, but I think `labels` is good - that's also what `GenericGraph.disjoint_union` uses.",
    "created_at": "2017-02-05T21:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305290",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:25'></a>I have no time to check this properly, but I think `labels` is good - that's also what `GenericGraph.disjoint_union` uses.



---

archive/issue_comments_305291.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-11T05:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305291",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305292.json:
```json
{
    "body": "<a id='comment:27'></a>There was a merge conflict because of added `import six`. Should work now.\n\nI think that we are now close to have all basic functionality relating to lattice congruences. Subdirect decomposition should be easy after this and some other tickets are closed.",
    "created_at": "2017-02-11T06:05:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305292",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:27'></a>There was a merge conflict because of added `import six`. Should work now.

I think that we are now close to have all basic functionality relating to lattice congruences. Subdirect decomposition should be easy after this and some other tickets are closed.



---

archive/issue_comments_305293.json:
```json
{
    "body": "<a id='comment:28'></a>I suspect the doctest in `src/sage/misc/rest_index_of_methods.py` will (still) fail. The number 55 just needs to be bumped slightly.",
    "created_at": "2017-02-11T15:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305293",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>I suspect the doctest in `src/sage/misc/rest_index_of_methods.py` will (still) fail. The number 55 just needs to be bumped slightly.



---

archive/issue_comments_305294.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-12T06:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305294",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305295.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:28 tscrim]:\n> I suspect the doctest in `src/sage/misc/rest_index_of_methods.py` will (still) fail. The number 55 just needs to be bumped slightly.\n\n\nOK, I increased it from 55 to 65.",
    "created_at": "2017-02-12T06:27:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305295",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:30'></a>Replying to [comment:28 tscrim]:
> I suspect the doctest in `src/sage/misc/rest_index_of_methods.py` will (still) fail. The number 55 just needs to be bumped slightly.


OK, I increased it from 55 to 65.



---

archive/issue_comments_305296.json:
```json
{
    "body": "<a id='comment:31'></a>A typo in the docstring: \"congurence\" should be \"congruence\".",
    "created_at": "2017-02-12T10:59:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305296",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:31'></a>A typo in the docstring: "congurence" should be "congruence".



---

archive/issue_comments_305297.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-12T11:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305297",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305298.json:
```json
{
    "body": "<a id='comment:33'></a>Replying to [comment:31 mantepse]:\n> A typo in the docstring: \"congurence\" should be \"congruence\".\n\n\nCorrected.",
    "created_at": "2017-02-12T11:56:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305298",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:33'></a>Replying to [comment:31 mantepse]:
> A typo in the docstring: "congurence" should be "congruence".


Corrected.



---

archive/issue_comments_305299.json:
```json
{
    "body": "<a id='comment:34'></a>Looks good.  Here is a test you might enjoy:\n\n```\nsage: n=6\nsage: d = {pi: pi.inverse().descents(from_zero=False) for pi in Permutations(n)}\nsage: C = [[pi for pi in d if d[pi]==des] for des in d.values()]\nsage: L = LatticePoset(Posets.SymmetricGroupWeakOrderPoset(n))\nsage: M = L.quotient(L.congruence(C))\nsage: M.is_isomorphic(Posets.BooleanLattice(n-1))\nTrue\n```\n\nUnfortunately, this won't work out of the box, because `Posets.SymmetricGroupWeakOrderPoset(n)` creates strange labels.  Also it should be possible to replace `L.congruence(C)` with just `SetPartition(C)`, but there is a bug (#22361).\n\nAnyway, I think this is great!",
    "created_at": "2017-02-12T14:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305299",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:34'></a>Looks good.  Here is a test you might enjoy:

```
sage: n=6
sage: d = {pi: pi.inverse().descents(from_zero=False) for pi in Permutations(n)}
sage: C = [[pi for pi in d if d[pi]==des] for des in d.values()]
sage: L = LatticePoset(Posets.SymmetricGroupWeakOrderPoset(n))
sage: M = L.quotient(L.congruence(C))
sage: M.is_isomorphic(Posets.BooleanLattice(n-1))
True
```

Unfortunately, this won't work out of the box, because `Posets.SymmetricGroupWeakOrderPoset(n)` creates strange labels.  Also it should be possible to replace `L.congruence(C)` with just `SetPartition(C)`, but there is a bug (#22361).

Anyway, I think this is great!



---

archive/issue_comments_305300.json:
```json
{
    "body": "<a id='comment:35'></a>(I cannot build the documentation here in reasonable time, because my computer is too small. Can I set it to positive review anyway?)",
    "created_at": "2017-02-12T14:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305300",
    "user": "https://github.com/mantepse"
}
```

<a id='comment:35'></a>(I cannot build the documentation here in reasonable time, because my computer is too small. Can I set it to positive review anyway?)



---

archive/issue_comments_305301.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:35 mantepse]:\n> (I cannot build the documentation here in reasonable time, because my computer is too small. Can I set it to positive review anyway?)\n\n\nIf you are unsure, you can check patchbot log, see docbuild-module. As the last version was OK, and I only changed one typo, I think you can set this to positive review.",
    "created_at": "2017-02-12T14:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305301",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:36'></a>Replying to [comment:35 mantepse]:
> (I cannot build the documentation here in reasonable time, because my computer is too small. Can I set it to positive review anyway?)


If you are unsure, you can check patchbot log, see docbuild-module. As the last version was OK, and I only changed one typo, I think you can set this to positive review.



---

archive/issue_comments_305302.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-12T14:37:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305302",
    "user": "https://github.com/mantepse"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_305303.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-02-14T18:58:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22225#issuecomment-305303",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_058402.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-14T18:58:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22225",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22225#event-58402"
}
```
