# Issue 22917: update zlib to 1.2.11

archive/issues_022680.json:
```json
{
    "body": "time to update and to fix weirdness in handling `CC=cc`, cf \n[this comment](https://trac.sagemath.org/ticket/12426#comment:239) on #12426.\n\ntarball [here](http://www.zlib.net/zlib-1.2.11.tar.gz)\n\nCC:  @kiwifb @embray\n\nBranch/Commit: b0bd679bac601a58a56ea781ae5f3ec61180d3a0\n\nReviewer: Fran\u00e7ois Bissey, Jean-Pierre Flori\n\nAuthor: Dima Pasechnik\n\nDependencies: #22582\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22917\n\n",
    "closed_at": "2017-05-19T22:10:26Z",
    "created_at": "2017-05-01T10:33:48Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "update zlib to 1.2.11",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22917",
    "user": "https://github.com/dimpase"
}
```
time to update and to fix weirdness in handling `CC=cc`, cf 
[this comment](https://trac.sagemath.org/ticket/12426#comment:239) on #12426.

tarball [here](http://www.zlib.net/zlib-1.2.11.tar.gz)

CC:  @kiwifb @embray

Branch/Commit: b0bd679bac601a58a56ea781ae5f3ec61180d3a0

Reviewer: Fran√ßois Bissey, Jean-Pierre Flori

Author: Dima Pasechnik

Dependencies: #22582

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22917





---

archive/issue_comments_428094.json:
```json
{
    "body": "<a id='comment:1'></a>\nLast 10 new commits:\n|                                                                                                                                          |                                                                         |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|\n|[10374c1](https://git.sagemath.org/sage.git/commit?id=10374c1dbbe02f00fa0682b59f5a23550b0c56ec)|`Merge tag '8.0.beta2' into t/22582/install_python_packages_into_2_and_3`|\n|[dc46ea2](https://git.sagemath.org/sage.git/commit?id=dc46ea2dfa97be79d7ef8ddbe9130d4c717acc3d)|`trac 22582: fix merge conflicts`|\n|[bc4c2f5](https://git.sagemath.org/sage.git/commit?id=bc4c2f5b99bfd780c8d95b67dcc2638563a40683)|`trac 22582: rename build/bin/sage-python to sage-python23`|\n|[0d30e20](https://git.sagemath.org/sage.git/commit?id=0d30e20416d5051fb31e3d4a032f5e28b09254ec)|`trac 22582: use sage-python23 to build the Sage library`|\n|[7e7b5bc](https://git.sagemath.org/sage.git/commit?id=7e7b5bc30ed53e44e9a4bc8640637531044d0caa)|`trac 22582: build and test packages using sage-python23 instead of python`|\n|[b954864](https://git.sagemath.org/sage.git/commit?id=b954864b3d80c62af47e2a16793f20e264e412c6)|`trac 22582: no need to make python2 a dependency for python3`|\n|[2dad104](https://git.sagemath.org/sage.git/commit?id=2dad104a528ce65c72a9736dbe04cc7bb2c86107)|`trac 22582: a little documentation`|\n|[5a645fd](https://git.sagemath.org/sage.git/commit?id=5a645fdaebc03543cb05f7fcf72ebe8b2abbd6a2)|`Merge branch 'public/22582' of trac.sagemath.org:sage into t/22582/public/22582`|\n|[2179ac8](https://git.sagemath.org/sage.git/commit?id=2179ac895c8d8aa9611837a0f5384199e526bd3a)|`Merge branch 8.0.beta3 into t/22582/public/22582`|\n|[f3295dc](https://git.sagemath.org/sage.git/commit?id=f3295dcfd12e2bc972202166a75de6621f9cc1b2)|`Merge branch 'public/22582' of trac.sagemath.org:sage into zlibupdate`|",
    "created_at": "2017-05-01T10:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428094",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>
Last 10 new commits:
|                                                                                                                                          |                                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------|
|[10374c1](https://git.sagemath.org/sage.git/commit?id=10374c1dbbe02f00fa0682b59f5a23550b0c56ec)|`Merge tag '8.0.beta2' into t/22582/install_python_packages_into_2_and_3`|
|[dc46ea2](https://git.sagemath.org/sage.git/commit?id=dc46ea2dfa97be79d7ef8ddbe9130d4c717acc3d)|`trac 22582: fix merge conflicts`|
|[bc4c2f5](https://git.sagemath.org/sage.git/commit?id=bc4c2f5b99bfd780c8d95b67dcc2638563a40683)|`trac 22582: rename build/bin/sage-python to sage-python23`|
|[0d30e20](https://git.sagemath.org/sage.git/commit?id=0d30e20416d5051fb31e3d4a032f5e28b09254ec)|`trac 22582: use sage-python23 to build the Sage library`|
|[7e7b5bc](https://git.sagemath.org/sage.git/commit?id=7e7b5bc30ed53e44e9a4bc8640637531044d0caa)|`trac 22582: build and test packages using sage-python23 instead of python`|
|[b954864](https://git.sagemath.org/sage.git/commit?id=b954864b3d80c62af47e2a16793f20e264e412c6)|`trac 22582: no need to make python2 a dependency for python3`|
|[2dad104](https://git.sagemath.org/sage.git/commit?id=2dad104a528ce65c72a9736dbe04cc7bb2c86107)|`trac 22582: a little documentation`|
|[5a645fd](https://git.sagemath.org/sage.git/commit?id=5a645fdaebc03543cb05f7fcf72ebe8b2abbd6a2)|`Merge branch 'public/22582' of trac.sagemath.org:sage into t/22582/public/22582`|
|[2179ac8](https://git.sagemath.org/sage.git/commit?id=2179ac895c8d8aa9611837a0f5384199e526bd3a)|`Merge branch 8.0.beta3 into t/22582/public/22582`|
|[f3295dc](https://git.sagemath.org/sage.git/commit?id=f3295dcfd12e2bc972202166a75de6621f9cc1b2)|`Merge branch 'public/22582' of trac.sagemath.org:sage into zlibupdate`|



---

archive/issue_comments_428095.json:
```json
{
    "body": "Changing branch from \"\" to \"u/dimpase/zlib112\"",
    "created_at": "2017-05-01T10:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428095",
    "user": "https://github.com/dimpase"
}
```

Changing branch from "" to "u/dimpase/zlib112"



---

archive/issue_comments_428096.json:
```json
{
    "body": "Changing commit from \"\" to \"f3295dcfd12e2bc972202166a75de6621f9cc1b2\"",
    "created_at": "2017-05-01T10:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428096",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "" to "f3295dcfd12e2bc972202166a75de6621f9cc1b2"



---

archive/issue_comments_428097.json:
```json
{
    "body": "Changing author from \"\" to \"Dima Pasechnik\"",
    "created_at": "2017-05-01T11:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428097",
    "user": "https://github.com/dimpase"
}
```

Changing author from "" to "Dima Pasechnik"



---

archive/issue_comments_428098.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-01T11:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428098",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_428099.json:
```json
{
    "body": "<a id='comment:2'></a>\nOK, this is the update. Note that it needed an update of the Cygwin patch, thus a review on Cygwin is most appreciated.",
    "created_at": "2017-05-01T11:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428099",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>
OK, this is the update. Note that it needed an update of the Cygwin patch, thus a review on Cygwin is most appreciated.



---

archive/issue_comments_428100.json:
```json
{
    "body": "<a id='comment:3'></a>\nI am OK with this if the cygwin patch is appropriate.",
    "created_at": "2017-05-01T21:16:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428100",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'></a>
I am OK with this if the cygwin patch is appropriate.



---

archive/issue_comments_428101.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe cygwin patch update looks ok form a functional point of view but looses a tiny piece of info stuffed into the patch.",
    "created_at": "2017-05-17T08:57:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428101",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:4'></a>
The cygwin patch update looks ok form a functional point of view but looses a tiny piece of info stuffed into the patch.



---

archive/issue_comments_428102.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-05-17T09:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428102",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_428103.json:
```json
{
    "body": "<a id='comment:5'></a>\nIn fact the patch should not be necessary anymore:\n* https://github.com/madler/zlib/issues/45\nPlease remove it.\n\nIt should still be nice to test it on Cygwin, `@`eric: can you do it?",
    "created_at": "2017-05-17T09:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428103",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:5'></a>
In fact the patch should not be necessary anymore:
* https://github.com/madler/zlib/issues/45
Please remove it.

It should still be nice to test it on Cygwin, `@`eric: can you do it?



---

archive/issue_comments_428104.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|\n|[55751d0](https://git.sagemath.org/sage.git/commit/?id=55751d002c450c168114785845079d8eca1d6edf)|`Merge branch 'u/dimpase/zlib112' of trac.sagemath.org:sage into zlupd`|\n|[c17bc1a](https://git.sagemath.org/sage.git/commit/?id=c17bc1a2be26a9641fde6837f148d9c6a9da7c80)|`obsoleted by github.com/madler/zlib/issues/45`|",
    "created_at": "2017-05-17T12:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428104",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------|
|[55751d0](https://git.sagemath.org/sage.git/commit/?id=55751d002c450c168114785845079d8eca1d6edf)|`Merge branch 'u/dimpase/zlib112' of trac.sagemath.org:sage into zlupd`|
|[c17bc1a](https://git.sagemath.org/sage.git/commit/?id=c17bc1a2be26a9641fde6837f148d9c6a9da7c80)|`obsoleted by github.com/madler/zlib/issues/45`|



---

archive/issue_comments_428105.json:
```json
{
    "body": "Changing commit from \"f3295dcfd12e2bc972202166a75de6621f9cc1b2\" to \"c17bc1a2be26a9641fde6837f148d9c6a9da7c80\"",
    "created_at": "2017-05-17T12:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428105",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f3295dcfd12e2bc972202166a75de6621f9cc1b2" to "c17bc1a2be26a9641fde6837f148d9c6a9da7c80"



---

archive/issue_comments_428106.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[b0bd679](https://git.sagemath.org/sage.git/commit/?id=b0bd679bac601a58a56ea781ae5f3ec61180d3a0)|`obsoleted by github.com/madler/zlib/issues/45`|",
    "created_at": "2017-05-17T12:32:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428106",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[b0bd679](https://git.sagemath.org/sage.git/commit/?id=b0bd679bac601a58a56ea781ae5f3ec61180d3a0)|`obsoleted by github.com/madler/zlib/issues/45`|



---

archive/issue_comments_428107.json:
```json
{
    "body": "Changing commit from \"c17bc1a2be26a9641fde6837f148d9c6a9da7c80\" to \"b0bd679bac601a58a56ea781ae5f3ec61180d3a0\"",
    "created_at": "2017-05-17T12:32:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428107",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c17bc1a2be26a9641fde6837f148d9c6a9da7c80" to "b0bd679bac601a58a56ea781ae5f3ec61180d3a0"



---

archive/issue_comments_428108.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-17T12:33:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428108",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_428109.json:
```json
{
    "body": "<a id='comment:8'></a>\nOK, done.",
    "created_at": "2017-05-17T12:33:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428109",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>
OK, done.



---

archive/issue_comments_428110.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-17T12:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428110",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_428111.json:
```json
{
    "body": "<a id='comment:9'></a>\nGood, let's merge it then.",
    "created_at": "2017-05-17T12:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428111",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:9'></a>
Good, let's merge it then.



---

archive/issue_comments_428112.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fran\u00e7ois Bissey, Jean-Pierre Flori\"",
    "created_at": "2017-05-17T12:43:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428112",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing reviewer from "" to "Fran√ßois Bissey, Jean-Pierre Flori"



---

archive/issue_comments_428113.json:
```json
{
    "body": "<a id='comment:10'></a>\nI haven't tested it yet, but I don't imagine it will be a problem.  It would be nicer though if we could use the system zlib.  I'm working up a proposal for how to enable that more generally...",
    "created_at": "2017-05-18T08:41:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428113",
    "user": "https://github.com/embray"
}
```

<a id='comment:10'></a>
I haven't tested it yet, but I don't imagine it will be a problem.  It would be nicer though if we could use the system zlib.  I'm working up a proposal for how to enable that more generally...



---

archive/issue_comments_428114.json:
```json
{
    "body": "<a id='comment:11'></a>\nSure but as you say, it's a wider and different issue.",
    "created_at": "2017-05-18T08:45:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428114",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:11'></a>
Sure but as you say, it's a wider and different issue.



---

archive/issue_comments_428115.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-19T22:10:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428115",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_059465.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-19T22:10:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22917#event-59465"
}
```



---

archive/issue_comments_428116.json:
```json
{
    "body": "Changing branch from \"u/dimpase/zlib112\" to \"b0bd679bac601a58a56ea781ae5f3ec61180d3a0\"",
    "created_at": "2017-05-19T22:10:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22917#issuecomment-428116",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/dimpase/zlib112" to "b0bd679bac601a58a56ea781ae5f3ec61180d3a0"
