# Issue 22711: fixing c++ issues in eclib

archive/issues_022474.json:
```json
{
    "assignees": [],
    "body": "`clang++` refuses to guess the correct `return` statement. Also, `delete[]` must not be mixed up with `delete`. This ticket fixes these issues, and allows #22679 to go forward.\n\nThe tarball at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2\n\nCC:  @kiwifb @JohnCremona @jdemeyer\n\nBranch/Commit: **[4d2f8db](https://github.com/sagemath/sagetrac-mirror/commit/4d2f8db1c7b47612f005ebc39a12471bb4ddfefa)**\n\nUpstream: **None of the above - read trac for reasoning.**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22711_\n\n",
    "closed_at": "2017-04-05T19:38:07Z",
    "created_at": "2017-03-29T22:25:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "fixing c++ issues in eclib",
    "type": "issue",
    "updated_at": "2017-04-05T19:38:07Z",
    "url": "https://github.com/sagemath/sage/issues/22711",
    "user": "https://github.com/dimpase"
}
```
`clang++` refuses to guess the correct `return` statement. Also, `delete[]` must not be mixed up with `delete`. This ticket fixes these issues, and allows #22679 to go forward.

The tarball at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2

CC:  @kiwifb @JohnCremona @jdemeyer

Branch/Commit: **[4d2f8db](https://github.com/sagemath/sagetrac-mirror/commit/4d2f8db1c7b47612f005ebc39a12471bb4ddfefa)**

Upstream: **None of the above - read trac for reasoning.**

Reviewer: **Jeroen Demeyer**

Author: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/22711_





---

archive/issue_events_288379.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-03-29T22:25:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288379"
}
```



---

archive/issue_events_288380.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-03-29T22:25:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288380"
}
```



---

archive/issue_events_288381.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-03-29T22:25:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288381"
}
```



---

archive/issue_events_288382.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-03-29T22:25:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288382"
}
```



---

archive/issue_comments_340455.json:
```json
{
    "body": "Changed branch from **[u/dimpase/cxx_eclib](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/cxx_eclib)** to **[u/dimpase/cxx_ecl](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/cxx_ecl)**",
    "created_at": "2017-03-29T22:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340455",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[u/dimpase/cxx_eclib](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/cxx_eclib)** to **[u/dimpase/cxx_ecl](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/cxx_ecl)**



---

archive/issue_comments_340456.json:
```json
{
    "body": "Commit: **[4c4cca8](https://github.com/sagemath/sagetrac-mirror/commit/4c4cca8d52584822af93c3acfa6bac342fe391c5)**",
    "created_at": "2017-03-29T22:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340456",
    "user": "https://github.com/dimpase"
}
```

Commit: **[4c4cca8](https://github.com/sagemath/sagetrac-mirror/commit/4c4cca8d52584822af93c3acfa6bac342fe391c5)**



---

archive/issue_comments_340457.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c4cca8d52584822af93c3acfa6bac342fe391c5\">4c4cca8</a></td><td><code>more C++ standard conformance</code></td></tr></table>\n",
    "created_at": "2017-03-29T22:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340457",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'>Comment 1:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c4cca8d52584822af93c3acfa6bac342fe391c5">4c4cca8</a></td><td><code>more C++ standard conformance</code></td></tr></table>




---

archive/issue_comments_340458.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nPlease have a look. This is a very straightfoward change, basically just following meaningful warnings emitted by clang++.",
    "created_at": "2017-03-29T22:46:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340458",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'>Comment 2:</a>
Please have a look. This is a very straightfoward change, basically just following meaningful warnings emitted by clang++.



---

archive/issue_comments_340459.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2017-03-29T22:46:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340459",
    "user": "https://github.com/dimpase"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_340460.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nJohn, it seems that a large part of it is already in your https://github.com/JohnCremona/eclib\n\nPerhaps you can just pick what's not yet there from the patch, and make a new release...",
    "created_at": "2017-03-29T22:54:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340460",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'>Comment 3:</a>
John, it seems that a large part of it is already in your https://github.com/JohnCremona/eclib

Perhaps you can just pick what's not yet there from the patch, and make a new release...



---

archive/issue_comments_340461.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nOK perhaps, but not until next week.  I am very receptive to pull requests into eclib.  I am strongly opposed to patching eclib for Sage independently of that.\n\nNote also that there has been a new release of eclib for several weeks waiting for a positive review --jdemeyer got close but then it got forgotten.\n\nPlease change the \"no feedback yet\" tag -- this is feedback.",
    "created_at": "2017-03-30T07:51:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340461",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:4'>Comment 4:</a>
OK perhaps, but not until next week.  I am very receptive to pull requests into eclib.  I am strongly opposed to patching eclib for Sage independently of that.

Note also that there has been a new release of eclib for several weeks waiting for a positive review --jdemeyer got close but then it got forgotten.

Please change the "no feedback yet" tag -- this is feedback.



---

archive/issue_comments_340462.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\n`eclib-20170122` is in Volker's tree. I believe it is positively reviewed and should be in the next beta. Do you mean a more recent one? I cannot see a more recent tag on github.",
    "created_at": "2017-03-30T07:56:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340462",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'>Comment 5:</a>
`eclib-20170122` is in Volker's tree. I believe it is positively reviewed and should be in the next beta. Do you mean a more recent one? I cannot see a more recent tag on github.



---

archive/issue_comments_340463.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@kiwifb](#comment%3A5):\n> `eclib-20170122` is in Volker's tree. I believe it is positively reviewed and should be in the next beta.\n\nI agree: #22164 has been closed. Just wait for the next beta.",
    "created_at": "2017-03-30T07:59:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340463",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@kiwifb](#comment%3A5):
> `eclib-20170122` is in Volker's tree. I believe it is positively reviewed and should be in the next beta.

I agree: #22164 has been closed. Just wait for the next beta.



---

archive/issue_comments_340464.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nThat's good, I missed that had happened 3 days ago.",
    "created_at": "2017-03-30T08:04:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340464",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:7'>Comment 7:</a>
That's good, I missed that had happened 3 days ago.



---

archive/issue_comments_340465.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nOK, let me see if this patch adds anything to what's already done on #22164.",
    "created_at": "2017-03-30T10:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340465",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'>Comment 8:</a>
OK, let me see if this patch adds anything to what's already done on #22164.



---

archive/issue_comments_340466.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nThe patch here catches one more missing `[]` in delete (thus a memory leak) in `libsrc/newforms.cc` (after line 1665), a missing `return bd;` just after line 109 in `libsrc/htconst.cc` (something which `clang++ 3.8` does not forgive you, resulting in lots of errors).\n\nSo these absolutely must be fixed.\n\nThere is also some more, regarding shifting negative values (undefined behavour in C++).\n\nFor the latter, I haven't done the complete job---it appears to be still working without it. Let's complete this fixing, cause it's just trouble in waiting to hit after a compiler update...\nOne should start off #22164, naturally.",
    "created_at": "2017-03-30T11:29:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340466",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'>Comment 9:</a>
The patch here catches one more missing `[]` in delete (thus a memory leak) in `libsrc/newforms.cc` (after line 1665), a missing `return bd;` just after line 109 in `libsrc/htconst.cc` (something which `clang++ 3.8` does not forgive you, resulting in lots of errors).

So these absolutely must be fixed.

There is also some more, regarding shifting negative values (undefined behavour in C++).

For the latter, I haven't done the complete job---it appears to be still working without it. Let's complete this fixing, cause it's just trouble in waiting to hit after a compiler update...
One should start off #22164, naturally.



---

archive/issue_comments_340467.json:
```json
{
    "body": "Dependencies: **#22164**",
    "created_at": "2017-03-30T11:29:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340467",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **#22164**



---

archive/issue_events_288383.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-03-30T11:29:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288383"
}
```



---

archive/issue_events_288384.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-03-30T11:29:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288384"
}
```



---

archive/issue_comments_340468.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nThank you very much for checking this.  COuld you possibly make a pull request into eclib for the critical changes?\n\nI just checked that the code in Sage (after #22164) exactly matches my own current branch (i.e. I have done no more work on eclib since then), and I agree with the two fixes you have identified.  It is not impossible that I could make a bugfix release soon with those two changes.\n\nCan you give one example of where the code shifts negative values?",
    "created_at": "2017-03-30T11:47:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340468",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:10'>Comment 10:</a>
Thank you very much for checking this.  COuld you possibly make a pull request into eclib for the critical changes?

I just checked that the code in Sage (after #22164) exactly matches my own current branch (i.e. I have done no more work on eclib since then), and I agree with the two fixes you have identified.  It is not impossible that I could make a bugfix release soon with those two changes.

Can you give one example of where the code shifts negative values?



---

archive/issue_comments_340469.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nI have a version 20170330 with the two fixes in and an increment to the library version.\n\nI can push that now to https://github.com/JohnCremona/eclib or add some more -- I have time to make these edits but not to go searching for things a compiler I don't have picks up.",
    "created_at": "2017-03-30T11:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340469",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:11'>Comment 11:</a>
I have a version 20170330 with the two fixes in and an increment to the library version.

I can push that now to https://github.com/JohnCremona/eclib or add some more -- I have time to make these edits but not to go searching for things a compiler I don't have picks up.



---

archive/issue_comments_340470.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@JohnCremona](#comment%3A10):\n> Thank you very much for checking this.  COuld you possibly make a pull request into eclib for the critical changes?\n\nWill do. For the master branch, right?\n\n> \n> I just checked that the code in Sage (after #22164) exactly matches my own current branch (i.e. I have done no more work on eclib since then), and I agree with the two fixes you have identified.  It is not impossible that I could make a bugfix release soon with those two changes.\n> \n> Can you give one example of where the code shifts negative values?\n\nin the diff fragment below `#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))`\nis such an example; putting extra pair of brackets as done in the diff fixes this.\n\n```\n--- a/libsrc/eclib/sieve_search.h\n+++ b/libsrc/eclib/sieve_search.h\n@@ -76,7 +76,7 @@ class point_counter : public point_processor {\n #define QS_LONG_SHIFT ((QS_LONG_LENGTH == 16) ? 4 : \\\n                     (QS_LONG_LENGTH == 32) ? 5 : \\\n \t\t    (QS_LONG_LENGTH == 64) ? 6 : 0)\n-#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))\n+#define QS_LONG_MASK (~(-(1L<<QS_LONG_SHIFT)))\n #define QS_HALF_MASK ((bit_array)(~((unsigned long)(-1L) / 3)))\n \n      //#define PERCENT 0.6\n```\nThis matches one from ratpoints I fixed some time ago. But there are more, hopefully equally unambiguous. \n\nIt's more problematic if you do `x<<y` for x a signed variable;\nI'd probably not want to touch these myself, as this would require either changing the type of x, or copying abs(x) to an unsigned thing, and putting the sign back then.",
    "created_at": "2017-03-30T12:02:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340470",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@JohnCremona](#comment%3A10):
> Thank you very much for checking this.  COuld you possibly make a pull request into eclib for the critical changes?

Will do. For the master branch, right?

> 
> I just checked that the code in Sage (after #22164) exactly matches my own current branch (i.e. I have done no more work on eclib since then), and I agree with the two fixes you have identified.  It is not impossible that I could make a bugfix release soon with those two changes.
> 
> Can you give one example of where the code shifts negative values?

in the diff fragment below `#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))`
is such an example; putting extra pair of brackets as done in the diff fixes this.

```
--- a/libsrc/eclib/sieve_search.h
+++ b/libsrc/eclib/sieve_search.h
@@ -76,7 +76,7 @@ class point_counter : public point_processor {
 #define QS_LONG_SHIFT ((QS_LONG_LENGTH == 16) ? 4 : \
                     (QS_LONG_LENGTH == 32) ? 5 : \
 		    (QS_LONG_LENGTH == 64) ? 6 : 0)
-#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))
+#define QS_LONG_MASK (~(-(1L<<QS_LONG_SHIFT)))
 #define QS_HALF_MASK ((bit_array)(~((unsigned long)(-1L) / 3)))
 
      //#define PERCENT 0.6
```
This matches one from ratpoints I fixed some time ago. But there are more, hopefully equally unambiguous. 

It's more problematic if you do `x<<y` for x a signed variable;
I'd probably not want to touch these myself, as this would require either changing the type of x, or copying abs(x) to an unsigned thing, and putting the sign back then.



---

archive/issue_comments_340471.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [@dimpase](#comment%3A12):\n> Replying to [@JohnCremona](#comment%3A10):\n> > Thank you very much for checking this.  COuld you possibly make a pull request into eclib for the critical changes?\n\n> \n> Will do. For the master branch, right?\n\nHold off since I have already fixed the two specific things you mentioned.\n\n> \n> > \n> > I just checked that the code in Sage (after #22164) exactly matches my own current branch (i.e. I have done no more work on eclib since then), and I agree with the two fixes you have identified.  It is not impossible that I could make a bugfix release soon with those two changes.\n> > \n> > Can you give one example of where the code shifts negative values?\n\n> in the diff fragment below `#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))`\n> is such an example; putting extra pair of brackets as done in the diff fixes this.\n> \n> ```\n> --- a/libsrc/eclib/sieve_search.h\n> +++ b/libsrc/eclib/sieve_search.h\n> @@ -76,7 +76,7 @@ class point_counter : public point_processor {\n>  #define QS_LONG_SHIFT ((QS_LONG_LENGTH == 16) ? 4 : \\\n>                      (QS_LONG_LENGTH == 32) ? 5 : \\\n>  \t\t    (QS_LONG_LENGTH == 64) ? 6 : 0)\n> -#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))\n> +#define QS_LONG_MASK (~(-(1L<<QS_LONG_SHIFT)))\n>  #define QS_HALF_MASK ((bit_array)(~((unsigned long)(-1L) / 3)))\n>  \n>       //#define PERCENT 0.6\n> ```\n> This matches one from ratpoints I fixed some time ago. But there are more, hopefully equally unambiguous. \n\nThat's unfortunate -- this code was adapted from a (now very old) version of ratpoints, and that sort of macro is not my style at all.\n\n> \n> It's more problematic if you do `x<<y` for x a signed variable;\n> I'd probably not want to touch these myself, as this would require either changing the type of x, or copying abs(x) to an unsigned thing, and putting the sign back then.\n\nI am not sure what to do next, so I will push the changes I already made to github.",
    "created_at": "2017-03-30T12:08:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340471",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [@dimpase](#comment%3A12):
> Replying to [@JohnCremona](#comment%3A10):
> > Thank you very much for checking this.  COuld you possibly make a pull request into eclib for the critical changes?

> 
> Will do. For the master branch, right?

Hold off since I have already fixed the two specific things you mentioned.

> 
> > 
> > I just checked that the code in Sage (after #22164) exactly matches my own current branch (i.e. I have done no more work on eclib since then), and I agree with the two fixes you have identified.  It is not impossible that I could make a bugfix release soon with those two changes.
> > 
> > Can you give one example of where the code shifts negative values?

> in the diff fragment below `#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))`
> is such an example; putting extra pair of brackets as done in the diff fixes this.
> 
> ```
> --- a/libsrc/eclib/sieve_search.h
> +++ b/libsrc/eclib/sieve_search.h
> @@ -76,7 +76,7 @@ class point_counter : public point_processor {
>  #define QS_LONG_SHIFT ((QS_LONG_LENGTH == 16) ? 4 : \
>                      (QS_LONG_LENGTH == 32) ? 5 : \
>  		    (QS_LONG_LENGTH == 64) ? 6 : 0)
> -#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))
> +#define QS_LONG_MASK (~(-(1L<<QS_LONG_SHIFT)))
>  #define QS_HALF_MASK ((bit_array)(~((unsigned long)(-1L) / 3)))
>  
>       //#define PERCENT 0.6
> ```
> This matches one from ratpoints I fixed some time ago. But there are more, hopefully equally unambiguous. 

That's unfortunate -- this code was adapted from a (now very old) version of ratpoints, and that sort of macro is not my style at all.

> 
> It's more problematic if you do `x<<y` for x a signed variable;
> I'd probably not want to touch these myself, as this would require either changing the type of x, or copying abs(x) to an unsigned thing, and putting the sign back then.

I am not sure what to do next, so I will push the changes I already made to github.



---

archive/issue_comments_340472.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nI also have a new eclib-20170330.tar.bz2 ready to post if we make no more code changes, or I can remake it if we do.",
    "created_at": "2017-03-30T12:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340472",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:14'>Comment 14:</a>
I also have a new eclib-20170330.tar.bz2 ready to post if we make no more code changes, or I can remake it if we do.



---

archive/issue_comments_340473.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nthe rapoints fix was done in the branch on #12473, including the macro fix I propose in the diff in the comment 12 on this (#22711) ticket, so I don't see why you won't include this in the tarball, too.",
    "created_at": "2017-03-30T12:21:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340473",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'>Comment 15:</a>
the rapoints fix was done in the branch on #12473, including the macro fix I propose in the diff in the comment 12 on this (#22711) ticket, so I don't see why you won't include this in the tarball, too.



---

archive/issue_comments_340474.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nReplying to [@dimpase](#comment%3A15):\n> the rapoints fix was done in the branch on #12473, including the macro fix I propose in the diff in the comment 12 on this (#22711) ticket, so I don't see why you won't include this in the tarball, too.\n\nOK I will do that.  Without a further increase in version number since I have not distributed that tarball yet.",
    "created_at": "2017-03-30T12:29:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340474",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:16'>Comment 16:</a>
Replying to [@dimpase](#comment%3A15):
> the rapoints fix was done in the branch on #12473, including the macro fix I propose in the diff in the comment 12 on this (#22711) ticket, so I don't see why you won't include this in the tarball, too.

OK I will do that.  Without a further increase in version number since I have not distributed that tarball yet.



---

archive/issue_comments_340475.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nDone.  The extra fix is now in the master at github and the new distribution file is at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2",
    "created_at": "2017-03-30T12:36:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340475",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:17'>Comment 17:</a>
Done.  The extra fix is now in the master at github and the new distribution file is at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2



---

archive/issue_comments_340476.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n `clang++` refuses to guess the correct `return` statement. Also, `delete[]` must not be mixed up with `delete`. This ticket fixes these issues, and allows #22679 to go forward.\n+\n+See new source at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2\n``````\n",
    "created_at": "2017-03-30T12:36:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340476",
    "user": "https://github.com/JohnCremona"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 `clang++` refuses to guess the correct `return` statement. Also, `delete[]` must not be mixed up with `delete`. This ticket fixes these issues, and allows #22679 to go forward.
+
+See new source at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2
``````




---

archive/issue_comments_340477.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n `clang++` refuses to guess the correct `return` statement. Also, `delete[]` must not be mixed up with `delete`. This ticket fixes these issues, and allows #22679 to go forward.\n \n See new source at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2\n+\n+This includes the code patches in the branch here which is no not needed.\n``````\n",
    "created_at": "2017-03-30T12:38:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340477",
    "user": "https://github.com/JohnCremona"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 `clang++` refuses to guess the correct `return` statement. Also, `delete[]` must not be mixed up with `delete`. This ticket fixes these issues, and allows #22679 to go forward.
 
 See new source at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2
+
+This includes the code patches in the branch here which is no not needed.
``````




---

archive/issue_comments_340478.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nin case, I can't access the new tarball:\n\n```\nForbidden\nYou don't have permission to access /staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2 on this server.\nApache/1.3.27 Server at homepages.warwick.ac.uk Port 80\n```",
    "created_at": "2017-03-30T12:41:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340478",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'>Comment 20:</a>
in case, I can't access the new tarball:

```
Forbidden
You don't have permission to access /staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2 on this server.
Apache/1.3.27 Server at homepages.warwick.ac.uk Port 80
```



---

archive/issue_comments_340479.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [@dimpase](#comment%3A20):\n> in case, I can't access the new tarball:\n> \n> ```\n> Forbidden\n> You don't have permission to access /staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2 on this server.\n> Apache/1.3.27 Server at homepages.warwick.ac.uk Port 80\n> ```\n\nSorry, fixed now.",
    "created_at": "2017-03-30T12:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340479",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [@dimpase](#comment%3A20):
> in case, I can't access the new tarball:
> 
> ```
> Forbidden
> You don't have permission to access /staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2 on this server.
> Apache/1.3.27 Server at homepages.warwick.ac.uk Port 80
> ```

Sorry, fixed now.



---

archive/issue_comments_340480.json:
```json
{
    "body": "Changed commit from **[4c4cca8](https://github.com/sagemath/sagetrac-mirror/commit/4c4cca8d52584822af93c3acfa6bac342fe391c5)** to **[9dd970f](https://github.com/sagemath/sagetrac-mirror/commit/9dd970f3abfad71363c3a4cd9fa2ac68e89fac92)**",
    "created_at": "2017-03-30T13:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340480",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[4c4cca8](https://github.com/sagemath/sagetrac-mirror/commit/4c4cca8d52584822af93c3acfa6bac342fe391c5)** to **[9dd970f](https://github.com/sagemath/sagetrac-mirror/commit/9dd970f3abfad71363c3a4cd9fa2ac68e89fac92)**



---

archive/issue_comments_340481.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9dd970f3abfad71363c3a4cd9fa2ac68e89fac92\">9dd970f</a></td><td><code>use the latest upstream tarball</code></td></tr></table>\n",
    "created_at": "2017-03-30T13:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340481",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'>Comment 22:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9dd970f3abfad71363c3a4cd9fa2ac68e89fac92">9dd970f</a></td><td><code>use the latest upstream tarball</code></td></tr></table>




---

archive/issue_comments_340482.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,3 @@\n `clang++` refuses to guess the correct `return` statement. Also, `delete[]` must not be mixed up with `delete`. This ticket fixes these issues, and allows #22679 to go forward.\n \n-See new source at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2\n-\n-This includes the code patches in the branch here which is no not needed.\n+The tarball at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2\n``````\n",
    "created_at": "2017-03-30T13:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340482",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,3 @@
 `clang++` refuses to guess the correct `return` statement. Also, `delete[]` must not be mixed up with `delete`. This ticket fixes these issues, and allows #22679 to go forward.
 
-See new source at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2
-
-This includes the code patches in the branch here which is no not needed.
+The tarball at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2
``````




---

archive/issue_comments_340483.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **None of the above - read trac for reasoning.**",
    "created_at": "2017-03-30T13:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340483",
    "user": "https://github.com/dimpase"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **None of the above - read trac for reasoning.**



---

archive/issue_events_288385.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-03-30T19:35:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288385"
}
```



---

archive/issue_comments_340484.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nThis branch should be based on #22164.",
    "created_at": "2017-03-30T20:04:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340484",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:25'>Comment 25:</a>
This branch should be based on #22164.



---

archive/issue_events_288386.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-30T20:04:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288386"
}
```



---

archive/issue_events_288387.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-30T20:04:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288387"
}
```



---

archive/issue_comments_340485.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2017-03-30T20:04:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340485",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_340486.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\n... and #22164 is now in 8.0.beta0.",
    "created_at": "2017-03-31T07:43:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340486",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:26'>Comment 26:</a>
... and #22164 is now in 8.0.beta0.



---

archive/issue_comments_340487.json:
```json
{
    "body": "Changed dependencies from **#22164** to none",
    "created_at": "2017-03-31T08:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340487",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#22164** to none



---

archive/issue_comments_340488.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nReplying to [@JohnCremona](#comment%3A26):\n> ... and #22164 is now in 8.0.beta0.\n\nRight. So it needs to be rebased on that.",
    "created_at": "2017-03-31T08:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340488",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'>Comment 27:</a>
Replying to [@JohnCremona](#comment%3A26):
> ... and #22164 is now in 8.0.beta0.

Right. So it needs to be rebased on that.



---

archive/issue_comments_340489.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nBut note that the original patch / branch posted here by dimpase is *no longer needed* since it consisted of patches to eclib which have been fixed upstream;  so all that is needed here is a trivial new branch to refer to the new eclib version.  I will do that now (where \"now\" = \"as soon as I have built 8.0.beta0\").",
    "created_at": "2017-03-31T08:45:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340489",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:28'>Comment 28:</a>
But note that the original patch / branch posted here by dimpase is *no longer needed* since it consisted of patches to eclib which have been fixed upstream;  so all that is needed here is a trivial new branch to refer to the new eclib version.  I will do that now (where "now" = "as soon as I have built 8.0.beta0").



---

archive/issue_comments_340490.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d2f8db1c7b47612f005ebc39a12471bb4ddfefa\">4d2f8db</a></td><td><code>rebased over the new \\beta</code></td></tr></table>\n",
    "created_at": "2017-03-31T10:09:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340490",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:29'>Comment 29:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d2f8db1c7b47612f005ebc39a12471bb4ddfefa">4d2f8db</a></td><td><code>rebased over the new \beta</code></td></tr></table>




---

archive/issue_comments_340491.json:
```json
{
    "body": "Changed commit from **[9dd970f](https://github.com/sagemath/sagetrac-mirror/commit/9dd970f3abfad71363c3a4cd9fa2ac68e89fac92)** to **[4d2f8db](https://github.com/sagemath/sagetrac-mirror/commit/4d2f8db1c7b47612f005ebc39a12471bb4ddfefa)**",
    "created_at": "2017-03-31T10:09:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340491",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9dd970f](https://github.com/sagemath/sagetrac-mirror/commit/9dd970f3abfad71363c3a4cd9fa2ac68e89fac92)** to **[4d2f8db](https://github.com/sagemath/sagetrac-mirror/commit/4d2f8db1c7b47612f005ebc39a12471bb4ddfefa)**



---

archive/issue_events_288388.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-03-31T10:10:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288388"
}
```



---

archive/issue_events_288389.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-03-31T10:10:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288389"
}
```



---

archive/issue_comments_340492.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nHere cometh the rebased branch.",
    "created_at": "2017-03-31T10:10:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340492",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:30'>Comment 30:</a>
Here cometh the rebased branch.



---

archive/issue_comments_340493.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nFantastic.   I will test your branch on my newly built 8.0beta0 and report back.  I hope it will not be seen as a conflict of interest for me to review this!",
    "created_at": "2017-03-31T10:41:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340493",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:31'>Comment 31:</a>
Fantastic.   I will test your branch on my newly built 8.0beta0 and report back.  I hope it will not be seen as a conflict of interest for me to review this!



---

archive/issue_comments_340494.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nReplying to [@JohnCremona](#comment%3A31):\n>  I hope it will not be seen as a conflict of interest for me to review this!\n\nYou know, the Permanent Committee of Sagemath Bugs might have an issue with this, and launch an inquiry...",
    "created_at": "2017-03-31T12:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340494",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'>Comment 32:</a>
Replying to [@JohnCremona](#comment%3A31):
>  I hope it will not be seen as a conflict of interest for me to review this!

You know, the Permanent Committee of Sagemath Bugs might have an issue with this, and launch an inquiry...



---

archive/issue_comments_340495.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nReplying to [@dimpase](#comment%3A32):\n> Replying to [@JohnCremona](#comment%3A31):\n> >  I hope it will not be seen as a conflict of interest for me to review this!\n\n> You know, the Permanent Committee of Sagemath Bugs might have an issue with this, and launch an inquiry... \n\nNow which country did you grow up in, I seem to have forgotten?\n\nRunning ptestlong gives only these:\n\n```\nsage -t --long --warn-long 111.3 src/sage/homology/simplicial_complex.py  # 1 doctest failed\nsage -t --long --warn-long 111.3 src/sage/calculus/interpolators.pyx  # Timed out (and interrupt failed)\nsage -t --long --warn-long 111.3 src/sage/calculus/riemann.pyx  # Timed out (and interrupt failed)\nsage -t --long --warn-long 111.3 src/sage/matrix/matrix_double_dense.pyx  # Timed out (and interrupt failed)\nsage -t --long --warn-long 111.3 src/sage/finance/time_series.pyx  # Timed out (and interrupt failed)\n```\nnone of w3hich are related to eclib -- and it's a beta release which I had not tested with the old eclib.",
    "created_at": "2017-03-31T12:15:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340495",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:33'>Comment 33:</a>
Replying to [@dimpase](#comment%3A32):
> Replying to [@JohnCremona](#comment%3A31):
> >  I hope it will not be seen as a conflict of interest for me to review this!

> You know, the Permanent Committee of Sagemath Bugs might have an issue with this, and launch an inquiry... 

Now which country did you grow up in, I seem to have forgotten?

Running ptestlong gives only these:

```
sage -t --long --warn-long 111.3 src/sage/homology/simplicial_complex.py  # 1 doctest failed
sage -t --long --warn-long 111.3 src/sage/calculus/interpolators.pyx  # Timed out (and interrupt failed)
sage -t --long --warn-long 111.3 src/sage/calculus/riemann.pyx  # Timed out (and interrupt failed)
sage -t --long --warn-long 111.3 src/sage/matrix/matrix_double_dense.pyx  # Timed out (and interrupt failed)
sage -t --long --warn-long 111.3 src/sage/finance/time_series.pyx  # Timed out (and interrupt failed)
```
none of w3hich are related to eclib -- and it's a beta release which I had not tested with the old eclib.



---

archive/issue_comments_340496.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nReplying to [@JohnCremona](#comment%3A33):\n> Replying to [@dimpase](#comment%3A32):\n> > Replying to [@JohnCremona](#comment%3A31):\n> > >  I hope it will not be seen as a conflict of interest for me to review this!\n\n> > You know, the Permanent Committee of Sagemath Bugs might have an issue with this, and launch an inquiry... \n\n> Now which country did you grow up in, I seem to have forgotten?\n\nLet me assure you that I grew up listening to BBC :-)",
    "created_at": "2017-03-31T12:23:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340496",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'>Comment 34:</a>
Replying to [@JohnCremona](#comment%3A33):
> Replying to [@dimpase](#comment%3A32):
> > Replying to [@JohnCremona](#comment%3A31):
> > >  I hope it will not be seen as a conflict of interest for me to review this!

> > You know, the Permanent Committee of Sagemath Bugs might have an issue with this, and launch an inquiry... 

> Now which country did you grow up in, I seem to have forgotten?

Let me assure you that I grew up listening to BBC :-)



---

archive/issue_events_288390.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-04-02T13:25:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288390"
}
```



---

archive/issue_events_288391.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-04-02T13:25:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288391"
}
```



---

archive/issue_events_288392.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-05T19:38:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288392"
}
```



---

archive/issue_events_288393.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5fb056a9782561d0f0980eeadca7cb89aa52b9d1",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-04-05T19:38:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22711#event-288393"
}
```



---

archive/issue_comments_340497.json:
```json
{
    "body": "Changed branch from **[u/dimpase/cxx_ecl](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/cxx_ecl)** to **[4d2f8db](https://github.com/sagemath/sagetrac-mirror/commit/4d2f8db1c7b47612f005ebc39a12471bb4ddfefa)**",
    "created_at": "2017-04-05T19:38:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22711#issuecomment-340497",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/cxx_ecl](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/cxx_ecl)** to **[4d2f8db](https://github.com/sagemath/sagetrac-mirror/commit/4d2f8db1c7b47612f005ebc39a12471bb4ddfefa)**
