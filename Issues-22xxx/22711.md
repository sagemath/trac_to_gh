# Issue 22711: fixing c++ issues in eclib

archive/issues_022474.json:
```json
{
    "body": "CC:  @kiwifb @JohnCremona @jdemeyer\n\n`clang++` refuses to guess the correct `return` statement. Also, `delete[]` must not be mixed up with `delete`. This ticket fixes these issues, and allows #22679 to go forward.\n\nThe tarball at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2\n\nIssue created by migration from https://trac.sagemath.org/ticket/22711\n\n",
    "closed_at": "2017-04-05T19:38:07Z",
    "created_at": "2017-03-29T22:25:58Z",
    "labels": [
        "component: packages: standard",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "fixing c++ issues in eclib",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22711",
    "user": "https://github.com/dimpase"
}
```
CC:  @kiwifb @JohnCremona @jdemeyer

`clang++` refuses to guess the correct `return` statement. Also, `delete[]` must not be mixed up with `delete`. This ticket fixes these issues, and allows #22679 to go forward.

The tarball at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2

Issue created by migration from https://trac.sagemath.org/ticket/22711





---

archive/issue_comments_312766.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-03-29T22:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312766",
    "user": "https://github.com/dimpase"
}
```

New commits:



---

archive/issue_comments_312767.json:
```json
{
    "body": "Please have a look. This is a very straightfoward change, basically just following meaningful warnings emitted by clang++.",
    "created_at": "2017-03-29T22:46:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312767",
    "user": "https://github.com/dimpase"
}
```

Please have a look. This is a very straightfoward change, basically just following meaningful warnings emitted by clang++.



---

archive/issue_comments_312768.json:
```json
{
    "body": "John, it seems that a large part of it is already in your https://github.com/JohnCremona/eclib\n\nPerhaps you can just pick what's not yet there from the patch, and make a new release...",
    "created_at": "2017-03-29T22:54:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312768",
    "user": "https://github.com/dimpase"
}
```

John, it seems that a large part of it is already in your https://github.com/JohnCremona/eclib

Perhaps you can just pick what's not yet there from the patch, and make a new release...



---

archive/issue_comments_312769.json:
```json
{
    "body": "OK perhaps, but not until next week.  I am very receptive to pull requests into eclib.  I am strongly opposed to patching eclib for Sage independently of that.\n\nNote also that there has been a new release of eclib for several weeks waiting for a positive review --jdemeyer got close but then it got forgotten.\n\nPlease change the \"no feedback yet\" tag -- this is feedback.",
    "created_at": "2017-03-30T07:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312769",
    "user": "https://github.com/JohnCremona"
}
```

OK perhaps, but not until next week.  I am very receptive to pull requests into eclib.  I am strongly opposed to patching eclib for Sage independently of that.

Note also that there has been a new release of eclib for several weeks waiting for a positive review --jdemeyer got close but then it got forgotten.

Please change the "no feedback yet" tag -- this is feedback.



---

archive/issue_comments_312770.json:
```json
{
    "body": "`eclib-20170122` is in Volker's tree. I believe it is positively reviewed and should be in the next beta. Do you mean a more recent one? I cannot see a more recent tag on github.",
    "created_at": "2017-03-30T07:56:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312770",
    "user": "https://github.com/kiwifb"
}
```

`eclib-20170122` is in Volker's tree. I believe it is positively reviewed and should be in the next beta. Do you mean a more recent one? I cannot see a more recent tag on github.



---

archive/issue_comments_312771.json:
```json
{
    "body": "Replying to [comment:5 fbissey]:\n> `eclib-20170122` is in Volker's tree. I believe it is positively reviewed and should be in the next beta.\n\n\nI agree: #22164 has been closed. Just wait for the next beta.",
    "created_at": "2017-03-30T07:59:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312771",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:5 fbissey]:
> `eclib-20170122` is in Volker's tree. I believe it is positively reviewed and should be in the next beta.


I agree: #22164 has been closed. Just wait for the next beta.



---

archive/issue_comments_312772.json:
```json
{
    "body": "That's good, I missed that had happened 3 days ago.",
    "created_at": "2017-03-30T08:04:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312772",
    "user": "https://github.com/JohnCremona"
}
```

That's good, I missed that had happened 3 days ago.



---

archive/issue_comments_312773.json:
```json
{
    "body": "OK, let me see if this patch adds anything to what's already done on #22164.",
    "created_at": "2017-03-30T10:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312773",
    "user": "https://github.com/dimpase"
}
```

OK, let me see if this patch adds anything to what's already done on #22164.



---

archive/issue_comments_312774.json:
```json
{
    "body": "The patch here catches one more missing `[]` in delete (thus a memory leak) in `libsrc/newforms.cc` (after line 1665), a missing `return bd;` just after line 109 in `libsrc/htconst.cc` (something which `clang++ 3.8` does not forgive you, resulting in lots of errors).\n\nSo these absolutely must be fixed.\n\nThere is also some more, regarding shifting negative values (undefined behavour in C++).\n\nFor the latter, I haven't done the complete job---it appears to be still working without it. Let's complete this fixing, cause it's just trouble in waiting to hit after a compiler update...\nOne should start off #22164, naturally.",
    "created_at": "2017-03-30T11:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312774",
    "user": "https://github.com/dimpase"
}
```

The patch here catches one more missing `[]` in delete (thus a memory leak) in `libsrc/newforms.cc` (after line 1665), a missing `return bd;` just after line 109 in `libsrc/htconst.cc` (something which `clang++ 3.8` does not forgive you, resulting in lots of errors).

So these absolutely must be fixed.

There is also some more, regarding shifting negative values (undefined behavour in C++).

For the latter, I haven't done the complete job---it appears to be still working without it. Let's complete this fixing, cause it's just trouble in waiting to hit after a compiler update...
One should start off #22164, naturally.



---

archive/issue_comments_312775.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2017-03-30T11:29:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312775",
    "user": "https://github.com/dimpase"
}
```

Changing priority from major to critical.



---

archive/issue_comments_312776.json:
```json
{
    "body": "Thank you very much for checking this.  COuld you possibly make a pull request into eclib for the critical changes?\n\nI just checked that the code in Sage (after #22164) exactly matches my own current branch (i.e. I have done no more work on eclib since then), and I agree with the two fixes you have identified.  It is not impossible that I could make a bugfix release soon with those two changes.\n\nCan you give one example of where the code shifts negative values?",
    "created_at": "2017-03-30T11:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312776",
    "user": "https://github.com/JohnCremona"
}
```

Thank you very much for checking this.  COuld you possibly make a pull request into eclib for the critical changes?

I just checked that the code in Sage (after #22164) exactly matches my own current branch (i.e. I have done no more work on eclib since then), and I agree with the two fixes you have identified.  It is not impossible that I could make a bugfix release soon with those two changes.

Can you give one example of where the code shifts negative values?



---

archive/issue_comments_312777.json:
```json
{
    "body": "I have a version 20170330 with the two fixes in and an increment to the library version.\n\nI can push that now to https://github.com/JohnCremona/eclib or add some more -- I have time to make these edits but not to go searching for things a compiler I don't have picks up.",
    "created_at": "2017-03-30T11:58:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312777",
    "user": "https://github.com/JohnCremona"
}
```

I have a version 20170330 with the two fixes in and an increment to the library version.

I can push that now to https://github.com/JohnCremona/eclib or add some more -- I have time to make these edits but not to go searching for things a compiler I don't have picks up.



---

archive/issue_comments_312778.json:
```json
{
    "body": "Replying to [comment:10 cremona]:\n> Thank you very much for checking this.  COuld you possibly make a pull request into eclib for the critical changes?\n\n\nWill do. For the master branch, right?\n\n> \n> I just checked that the code in Sage (after #22164) exactly matches my own current branch (i.e. I have done no more work on eclib since then), and I agree with the two fixes you have identified.  It is not impossible that I could make a bugfix release soon with those two changes.\n> \n> Can you give one example of where the code shifts negative values?\n\nin the diff fragment below `#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))`\nis such an example; putting extra pair of brackets as done in the diff fixes this.\n\n```\n--- a/libsrc/eclib/sieve_search.h\n+++ b/libsrc/eclib/sieve_search.h\n@@ -76,7 +76,7 @@ class point_counter : public point_processor {\n #define QS_LONG_SHIFT ((QS_LONG_LENGTH == 16) ? 4 : \\\n                     (QS_LONG_LENGTH == 32) ? 5 : \\\n \t\t    (QS_LONG_LENGTH == 64) ? 6 : 0)\n-#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))\n+#define QS_LONG_MASK (~(-(1L<<QS_LONG_SHIFT)))\n #define QS_HALF_MASK ((bit_array)(~((unsigned long)(-1L) / 3)))\n \n      //#define PERCENT 0.6\n```\nThis matches one from ratpoints I fixed some time ago. But there are more, hopefully equally unambiguous. \n\nIt's more problematic if you do `x<<y` for x a signed variable;\nI'd probably not want to touch these myself, as this would require either changing the type of x, or copying abs(x) to an unsigned thing, and putting the sign back then.",
    "created_at": "2017-03-30T12:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312778",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:10 cremona]:
> Thank you very much for checking this.  COuld you possibly make a pull request into eclib for the critical changes?


Will do. For the master branch, right?

> 
> I just checked that the code in Sage (after #22164) exactly matches my own current branch (i.e. I have done no more work on eclib since then), and I agree with the two fixes you have identified.  It is not impossible that I could make a bugfix release soon with those two changes.
> 
> Can you give one example of where the code shifts negative values?

in the diff fragment below `#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))`
is such an example; putting extra pair of brackets as done in the diff fixes this.

```
--- a/libsrc/eclib/sieve_search.h
+++ b/libsrc/eclib/sieve_search.h
@@ -76,7 +76,7 @@ class point_counter : public point_processor {
 #define QS_LONG_SHIFT ((QS_LONG_LENGTH == 16) ? 4 : \
                     (QS_LONG_LENGTH == 32) ? 5 : \
 		    (QS_LONG_LENGTH == 64) ? 6 : 0)
-#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))
+#define QS_LONG_MASK (~(-(1L<<QS_LONG_SHIFT)))
 #define QS_HALF_MASK ((bit_array)(~((unsigned long)(-1L) / 3)))
 
      //#define PERCENT 0.6
```
This matches one from ratpoints I fixed some time ago. But there are more, hopefully equally unambiguous. 

It's more problematic if you do `x<<y` for x a signed variable;
I'd probably not want to touch these myself, as this would require either changing the type of x, or copying abs(x) to an unsigned thing, and putting the sign back then.



---

archive/issue_comments_312779.json:
```json
{
    "body": "Replying to [comment:12 dimpase]:\n> Replying to [comment:10 cremona]:\n> > Thank you very much for checking this.  COuld you possibly make a pull request into eclib for the critical changes?\n\n> \n> Will do. For the master branch, right?\n\n\nHold off since I have already fixed the two specific things you mentioned.\n\n> \n> > \n> > I just checked that the code in Sage (after #22164) exactly matches my own current branch (i.e. I have done no more work on eclib since then), and I agree with the two fixes you have identified.  It is not impossible that I could make a bugfix release soon with those two changes.\n> > \n> > Can you give one example of where the code shifts negative values?\n\n> in the diff fragment below `#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))`\n> is such an example; putting extra pair of brackets as done in the diff fixes this.\n> \n> ```\n> --- a/libsrc/eclib/sieve_search.h\n> +++ b/libsrc/eclib/sieve_search.h\n> @@ -76,7 +76,7 @@ class point_counter : public point_processor {\n>  #define QS_LONG_SHIFT ((QS_LONG_LENGTH == 16) ? 4 : \\\n>                      (QS_LONG_LENGTH == 32) ? 5 : \\\n>  \t\t    (QS_LONG_LENGTH == 64) ? 6 : 0)\n> -#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))\n> +#define QS_LONG_MASK (~(-(1L<<QS_LONG_SHIFT)))\n>  #define QS_HALF_MASK ((bit_array)(~((unsigned long)(-1L) / 3)))\n>  \n>       //#define PERCENT 0.6\n> ```\n> This matches one from ratpoints I fixed some time ago. But there are more, hopefully equally unambiguous. \n\n\nThat's unfortunate -- this code was adapted from a (now very old) version of ratpoints, and that sort of macro is not my style at all.\n\n> \n> It's more problematic if you do `x<<y` for x a signed variable;\n> I'd probably not want to touch these myself, as this would require either changing the type of x, or copying abs(x) to an unsigned thing, and putting the sign back then.\n\n\nI am not sure what to do next, so I will push the changes I already made to github.",
    "created_at": "2017-03-30T12:08:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312779",
    "user": "https://github.com/JohnCremona"
}
```

Replying to [comment:12 dimpase]:
> Replying to [comment:10 cremona]:
> > Thank you very much for checking this.  COuld you possibly make a pull request into eclib for the critical changes?

> 
> Will do. For the master branch, right?


Hold off since I have already fixed the two specific things you mentioned.

> 
> > 
> > I just checked that the code in Sage (after #22164) exactly matches my own current branch (i.e. I have done no more work on eclib since then), and I agree with the two fixes you have identified.  It is not impossible that I could make a bugfix release soon with those two changes.
> > 
> > Can you give one example of where the code shifts negative values?

> in the diff fragment below `#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))`
> is such an example; putting extra pair of brackets as done in the diff fixes this.
> 
> ```
> --- a/libsrc/eclib/sieve_search.h
> +++ b/libsrc/eclib/sieve_search.h
> @@ -76,7 +76,7 @@ class point_counter : public point_processor {
>  #define QS_LONG_SHIFT ((QS_LONG_LENGTH == 16) ? 4 : \
>                      (QS_LONG_LENGTH == 32) ? 5 : \
>  		    (QS_LONG_LENGTH == 64) ? 6 : 0)
> -#define QS_LONG_MASK (~(-1L<<QS_LONG_SHIFT))
> +#define QS_LONG_MASK (~(-(1L<<QS_LONG_SHIFT)))
>  #define QS_HALF_MASK ((bit_array)(~((unsigned long)(-1L) / 3)))
>  
>       //#define PERCENT 0.6
> ```
> This matches one from ratpoints I fixed some time ago. But there are more, hopefully equally unambiguous. 


That's unfortunate -- this code was adapted from a (now very old) version of ratpoints, and that sort of macro is not my style at all.

> 
> It's more problematic if you do `x<<y` for x a signed variable;
> I'd probably not want to touch these myself, as this would require either changing the type of x, or copying abs(x) to an unsigned thing, and putting the sign back then.


I am not sure what to do next, so I will push the changes I already made to github.



---

archive/issue_comments_312780.json:
```json
{
    "body": "I also have a new eclib-20170330.tar.bz2 ready to post if we make no more code changes, or I can remake it if we do.",
    "created_at": "2017-03-30T12:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312780",
    "user": "https://github.com/JohnCremona"
}
```

I also have a new eclib-20170330.tar.bz2 ready to post if we make no more code changes, or I can remake it if we do.



---

archive/issue_comments_312781.json:
```json
{
    "body": "the rapoints fix was done in the branch on #12473, including the macro fix I propose in the diff in the comment 12 on this (#22711) ticket, so I don't see why you won't include this in the tarball, too.",
    "created_at": "2017-03-30T12:21:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312781",
    "user": "https://github.com/dimpase"
}
```

the rapoints fix was done in the branch on #12473, including the macro fix I propose in the diff in the comment 12 on this (#22711) ticket, so I don't see why you won't include this in the tarball, too.



---

archive/issue_comments_312782.json:
```json
{
    "body": "Replying to [comment:15 dimpase]:\n> the rapoints fix was done in the branch on #12473, including the macro fix I propose in the diff in the comment 12 on this (#22711) ticket, so I don't see why you won't include this in the tarball, too.\n\n\nOK I will do that.  Without a further increase in version number since I have not distributed that tarball yet.",
    "created_at": "2017-03-30T12:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312782",
    "user": "https://github.com/JohnCremona"
}
```

Replying to [comment:15 dimpase]:
> the rapoints fix was done in the branch on #12473, including the macro fix I propose in the diff in the comment 12 on this (#22711) ticket, so I don't see why you won't include this in the tarball, too.


OK I will do that.  Without a further increase in version number since I have not distributed that tarball yet.



---

archive/issue_comments_312783.json:
```json
{
    "body": "Done.  The extra fix is now in the master at github and the new distribution file is at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2",
    "created_at": "2017-03-30T12:36:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312783",
    "user": "https://github.com/JohnCremona"
}
```

Done.  The extra fix is now in the master at github and the new distribution file is at http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2



---

archive/issue_comments_312784.json:
```json
{
    "body": "in case, I can't access the new tarball:\n\n```\nForbidden\nYou don't have permission to access /staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2 on this server.\nApache/1.3.27 Server at homepages.warwick.ac.uk Port 80\n```",
    "created_at": "2017-03-30T12:41:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312784",
    "user": "https://github.com/dimpase"
}
```

in case, I can't access the new tarball:

```
Forbidden
You don't have permission to access /staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2 on this server.
Apache/1.3.27 Server at homepages.warwick.ac.uk Port 80
```



---

archive/issue_comments_312785.json:
```json
{
    "body": "Replying to [comment:20 dimpase]:\n> in case, I can't access the new tarball:\n> \n> ```\n> Forbidden\n> You don't have permission to access /staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2 on this server.\n> Apache/1.3.27 Server at homepages.warwick.ac.uk Port 80\n> ```\n\n\nSorry, fixed now.",
    "created_at": "2017-03-30T12:47:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312785",
    "user": "https://github.com/JohnCremona"
}
```

Replying to [comment:20 dimpase]:
> in case, I can't access the new tarball:
> 
> ```
> Forbidden
> You don't have permission to access /staff/J.E.Cremona/ftp/eclib-20170330.tar.bz2 on this server.
> Apache/1.3.27 Server at homepages.warwick.ac.uk Port 80
> ```


Sorry, fixed now.



---

archive/issue_comments_312786.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-30T13:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312786",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_312787.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-30T19:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312787",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_312788.json:
```json
{
    "body": "This branch should be based on #22164.",
    "created_at": "2017-03-30T20:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312788",
    "user": "https://github.com/jdemeyer"
}
```

This branch should be based on #22164.



---

archive/issue_comments_312789.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-03-30T20:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312789",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_312790.json:
```json
{
    "body": "... and #22164 is now in 8.0.beta0.",
    "created_at": "2017-03-31T07:43:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312790",
    "user": "https://github.com/JohnCremona"
}
```

... and #22164 is now in 8.0.beta0.



---

archive/issue_comments_312791.json:
```json
{
    "body": "Replying to [comment:26 cremona]:\n> ... and #22164 is now in 8.0.beta0.\n\n\nRight. So it needs to be rebased on that.",
    "created_at": "2017-03-31T08:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312791",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:26 cremona]:
> ... and #22164 is now in 8.0.beta0.


Right. So it needs to be rebased on that.



---

archive/issue_comments_312792.json:
```json
{
    "body": "But note that the original patch / branch posted here by dimpase is *no longer needed* since it consisted of patches to eclib which have been fixed upstream;  so all that is needed here is a trivial new branch to refer to the new eclib version.  I will do that now (where \"now\" = \"as soon as I have built 8.0.beta0\").",
    "created_at": "2017-03-31T08:45:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312792",
    "user": "https://github.com/JohnCremona"
}
```

But note that the original patch / branch posted here by dimpase is *no longer needed* since it consisted of patches to eclib which have been fixed upstream;  so all that is needed here is a trivial new branch to refer to the new eclib version.  I will do that now (where "now" = "as soon as I have built 8.0.beta0").



---

archive/issue_comments_312793.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-31T10:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312793",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_312794.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-03-31T10:10:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312794",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_312795.json:
```json
{
    "body": "Here cometh the rebased branch.",
    "created_at": "2017-03-31T10:10:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312795",
    "user": "https://github.com/dimpase"
}
```

Here cometh the rebased branch.



---

archive/issue_comments_312796.json:
```json
{
    "body": "Fantastic.   I will test your branch on my newly built 8.0beta0 and report back.  I hope it will not be seen as a conflict of interest for me to review this!",
    "created_at": "2017-03-31T10:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312796",
    "user": "https://github.com/JohnCremona"
}
```

Fantastic.   I will test your branch on my newly built 8.0beta0 and report back.  I hope it will not be seen as a conflict of interest for me to review this!



---

archive/issue_comments_312797.json:
```json
{
    "body": "Replying to [comment:31 cremona]:\n>  I hope it will not be seen as a conflict of interest for me to review this!\n\nYou know, the Permanent Committee of Sagemath Bugs might have an issue with this, and launch an inquiry...",
    "created_at": "2017-03-31T12:12:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312797",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:31 cremona]:
>  I hope it will not be seen as a conflict of interest for me to review this!

You know, the Permanent Committee of Sagemath Bugs might have an issue with this, and launch an inquiry...



---

archive/issue_comments_312798.json:
```json
{
    "body": "Replying to [comment:32 dimpase]:\n> Replying to [comment:31 cremona]:\n> >  I hope it will not be seen as a conflict of interest for me to review this!\n\n> You know, the Permanent Committee of Sagemath Bugs might have an issue with this, and launch an inquiry... \nNow which country did you grow up in, I seem to have forgotten?\n\nRunning ptestlong gives only these:\n\n```\nsage -t --long --warn-long 111.3 src/sage/homology/simplicial_complex.py  # 1 doctest failed\nsage -t --long --warn-long 111.3 src/sage/calculus/interpolators.pyx  # Timed out (and interrupt failed)\nsage -t --long --warn-long 111.3 src/sage/calculus/riemann.pyx  # Timed out (and interrupt failed)\nsage -t --long --warn-long 111.3 src/sage/matrix/matrix_double_dense.pyx  # Timed out (and interrupt failed)\nsage -t --long --warn-long 111.3 src/sage/finance/time_series.pyx  # Timed out (and interrupt failed)\n```\nnone of w3hich are related to eclib -- and it's a beta release which I had not tested with the old eclib.",
    "created_at": "2017-03-31T12:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312798",
    "user": "https://github.com/JohnCremona"
}
```

Replying to [comment:32 dimpase]:
> Replying to [comment:31 cremona]:
> >  I hope it will not be seen as a conflict of interest for me to review this!

> You know, the Permanent Committee of Sagemath Bugs might have an issue with this, and launch an inquiry... 
Now which country did you grow up in, I seem to have forgotten?

Running ptestlong gives only these:

```
sage -t --long --warn-long 111.3 src/sage/homology/simplicial_complex.py  # 1 doctest failed
sage -t --long --warn-long 111.3 src/sage/calculus/interpolators.pyx  # Timed out (and interrupt failed)
sage -t --long --warn-long 111.3 src/sage/calculus/riemann.pyx  # Timed out (and interrupt failed)
sage -t --long --warn-long 111.3 src/sage/matrix/matrix_double_dense.pyx  # Timed out (and interrupt failed)
sage -t --long --warn-long 111.3 src/sage/finance/time_series.pyx  # Timed out (and interrupt failed)
```
none of w3hich are related to eclib -- and it's a beta release which I had not tested with the old eclib.



---

archive/issue_comments_312799.json:
```json
{
    "body": "Replying to [comment:33 cremona]:\n> Replying to [comment:32 dimpase]:\n> > Replying to [comment:31 cremona]:\n> > >  I hope it will not be seen as a conflict of interest for me to review this!\n\n> > You know, the Permanent Committee of Sagemath Bugs might have an issue with this, and launch an inquiry... \n> Now which country did you grow up in, I seem to have forgotten?\n\n\nLet me assure you that I grew up listening to BBC :-)",
    "created_at": "2017-03-31T12:23:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312799",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:33 cremona]:
> Replying to [comment:32 dimpase]:
> > Replying to [comment:31 cremona]:
> > >  I hope it will not be seen as a conflict of interest for me to review this!

> > You know, the Permanent Committee of Sagemath Bugs might have an issue with this, and launch an inquiry... 
> Now which country did you grow up in, I seem to have forgotten?


Let me assure you that I grew up listening to BBC :-)



---

archive/issue_comments_312800.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-02T13:25:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312800",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_312801.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-05T19:38:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22711#issuecomment-312801",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_059175.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-05T19:38:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22711",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22711#event-59175"
}
```
