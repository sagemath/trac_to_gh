# Issue 22771: Numerical Precision for Heights in Number Fields

archive/issues_022534.json:
```json
{
    "body": "Use real interval field for floating point computations to compute relative heights in number fields without precision errors.\n\nCC:  @raghukul01 @bhutz\n\nKeywords: number fields, gsoc2018\n\nBranch/Commit: f88426be129022992e144d89dc25b12f96a2dfec\n\nReviewer: Ben Hutz\n\nAuthor: Raghukul Raman\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22771\n\n",
    "closed_at": "2018-06-21T17:26:25Z",
    "created_at": "2017-04-07T01:40:17Z",
    "labels": [
        "component: algebraic geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "Numerical Precision for Heights in Number Fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22771",
    "user": "https://trac.sagemath.org/admin/accounts/users/tjcombs"
}
```
Use real interval field for floating point computations to compute relative heights in number fields without precision errors.

CC:  @raghukul01 @bhutz

Keywords: number fields, gsoc2018

Branch/Commit: f88426be129022992e144d89dc25b12f96a2dfec

Reviewer: Ben Hutz

Author: Raghukul Raman

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22771





---

archive/issue_comments_427394.json:
```json
{
    "body": "Changing branch from \"\" to \"u/raghukul01/numerical_precision_for_heights_in_number_fields\"",
    "created_at": "2018-05-28T02:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427394",
    "user": "https://github.com/raghukul01"
}
```

Changing branch from "" to "u/raghukul01/numerical_precision_for_heights_in_number_fields"



---

archive/issue_comments_427395.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[53e69a2](https://github.com/sagemath/sagetrac-mirror/commit/53e69a2fccc068c0b626094509522a701747aa6f)|`Doyle-Krumm Algorithm 4 Implemented`|\n|[1e52f3d](https://github.com/sagemath/sagetrac-mirror/commit/1e52f3d6d42b189114b525ddcab3532d6439075a)|`Changes made in enum function`|",
    "created_at": "2018-05-28T03:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427395",
    "user": "https://github.com/raghukul01"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[53e69a2](https://github.com/sagemath/sagetrac-mirror/commit/53e69a2fccc068c0b626094509522a701747aa6f)|`Doyle-Krumm Algorithm 4 Implemented`|
|[1e52f3d](https://github.com/sagemath/sagetrac-mirror/commit/1e52f3d6d42b189114b525ddcab3532d6439075a)|`Changes made in enum function`|



---

archive/issue_comments_427396.json:
```json
{
    "body": "Changing author from \"\" to \"Raghukul Raman\"",
    "created_at": "2018-05-28T03:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427396",
    "user": "https://github.com/raghukul01"
}
```

Changing author from "" to "Raghukul Raman"



---

archive/issue_comments_427397.json:
```json
{
    "body": "Changing commit from \"\" to \"1e52f3d6d42b189114b525ddcab3532d6439075a\"",
    "created_at": "2018-05-28T03:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427397",
    "user": "https://github.com/raghukul01"
}
```

Changing commit from "" to "1e52f3d6d42b189114b525ddcab3532d6439075a"



---

archive/issue_comments_427398.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-05-28T03:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427398",
    "user": "https://github.com/raghukul01"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_427399.json:
```json
{
    "body": "Changing keywords from \"\" to \"number fields, gsoc2018\".",
    "created_at": "2018-05-28T03:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427399",
    "user": "https://github.com/raghukul01"
}
```

Changing keywords from "" to "number fields, gsoc2018".



---

archive/issue_comments_427400.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[ee98b33](https://github.com/sagemath/sagetrac-mirror/commit/ee98b3318d835a895bbff36359ab046e518d259c)|`Updated comments`|",
    "created_at": "2018-05-28T18:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427400",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[ee98b33](https://github.com/sagemath/sagetrac-mirror/commit/ee98b3318d835a895bbff36359ab046e518d259c)|`Updated comments`|



---

archive/issue_comments_427401.json:
```json
{
    "body": "Changing commit from \"1e52f3d6d42b189114b525ddcab3532d6439075a\" to \"ee98b3318d835a895bbff36359ab046e518d259c\"",
    "created_at": "2018-05-28T18:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427401",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1e52f3d6d42b189114b525ddcab3532d6439075a" to "ee98b3318d835a895bbff36359ab046e518d259c"



---

archive/issue_comments_427402.json:
```json
{
    "body": "<a id='comment:4'></a>\nHere are a few things I've noticed so far.\n\n- Need to have in the longer description that this is using the 'relative multiplicative height'\n\n- remove todo block  (QQ and r=0 are covered in other functions)\n\n- step 13: spelling: thier\n\n\n- why switching to iter instead of yield? What about the issues of this being possibly *many* points? Please respond.\n\n- LLL reduction still in docs for elements_of_bounded_height.\n\n\n- need spaces between inputs lines in elements_of_bounded_height\n\n- spaces after , in parameters\n\n- This fails:\n\n```\nR.<x>=QQ[]\nK.<a> = NumberField(x^3 - x^2 + 1)\nA.<x,y>=AffineSpace(K,2)\nlist(A.points_of_bounded_height(2))\n```\nthen so does subschemes\n\n```\nA.<x,y>=AffineSpace(K,2)\nC = A.subscheme([x-y])\nC.rational_points(2)\n```\n\n- reference should be updated with published version\n\n- add yourself and TJ Combs to author section at top of file",
    "created_at": "2018-05-29T21:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427402",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:4'></a>
Here are a few things I've noticed so far.

- Need to have in the longer description that this is using the 'relative multiplicative height'

- remove todo block  (QQ and r=0 are covered in other functions)

- step 13: spelling: thier


- why switching to iter instead of yield? What about the issues of this being possibly *many* points? Please respond.

- LLL reduction still in docs for elements_of_bounded_height.


- need spaces between inputs lines in elements_of_bounded_height

- spaces after , in parameters

- This fails:

```
R.<x>=QQ[]
K.<a> = NumberField(x^3 - x^2 + 1)
A.<x,y>=AffineSpace(K,2)
list(A.points_of_bounded_height(2))
```
then so does subschemes

```
A.<x,y>=AffineSpace(K,2)
C = A.subscheme([x-y])
C.rational_points(2)
```

- reference should be updated with published version

- add yourself and TJ Combs to author section at top of file



---

archive/issue_comments_427403.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Ben Hutz\"",
    "created_at": "2018-05-29T21:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427403",
    "user": "https://github.com/bhutz"
}
```

Changing reviewer from "" to "Ben Hutz"



---

archive/issue_comments_427404.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-29T21:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427404",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_427405.json:
```json
{
    "body": "Changing commit from \"ee98b3318d835a895bbff36359ab046e518d259c\" to \"f6433687380c987a3d906585cdb8fbd52515075b\"",
    "created_at": "2018-05-30T17:50:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ee98b3318d835a895bbff36359ab046e518d259c" to "f6433687380c987a3d906585cdb8fbd52515075b"



---

archive/issue_comments_427406.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[f643368](https://github.com/sagemath/sagetrac-mirror/commit/f6433687380c987a3d906585cdb8fbd52515075b)|`22771: Reformat code and replaced iter with yield`|",
    "created_at": "2018-05-30T17:50:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427406",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[f643368](https://github.com/sagemath/sagetrac-mirror/commit/f6433687380c987a3d906585cdb8fbd52515075b)|`22771: Reformat code and replaced iter with yield`|



---

archive/issue_comments_427407.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[5a25a24](https://github.com/sagemath/sagetrac-mirror/commit/5a25a24329df4c8b1aeaf971a3b2bd90ca7d23e3)|`22771: Fixed conversion of d_tilde to RR`|",
    "created_at": "2018-05-31T08:27:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427407",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[5a25a24](https://github.com/sagemath/sagetrac-mirror/commit/5a25a24329df4c8b1aeaf971a3b2bd90ca7d23e3)|`22771: Fixed conversion of d_tilde to RR`|



---

archive/issue_comments_427408.json:
```json
{
    "body": "Changing commit from \"f6433687380c987a3d906585cdb8fbd52515075b\" to \"5a25a24329df4c8b1aeaf971a3b2bd90ca7d23e3\"",
    "created_at": "2018-05-31T08:27:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427408",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f6433687380c987a3d906585cdb8fbd52515075b" to "5a25a24329df4c8b1aeaf971a3b2bd90ca7d23e3"



---

archive/issue_comments_427409.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-31T08:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427409",
    "user": "https://github.com/raghukul01"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_427410.json:
```json
{
    "body": "<a id='comment:8'></a>\nSorry, I just realized I never commented on this. The fix does work, but I would change one thing.\n\nd_tilde is used in a couple other places, so I would covert d_tilde to RR in the same place M is converted (after calculations with it are done)\n\nd_tilde = RR(d_tilde)",
    "created_at": "2018-06-04T14:40:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427410",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:8'></a>
Sorry, I just realized I never commented on this. The fix does work, but I would change one thing.

d_tilde is used in a couple other places, so I would covert d_tilde to RR in the same place M is converted (after calculations with it are done)

d_tilde = RR(d_tilde)



---

archive/issue_comments_427411.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-04T14:40:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427411",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_427412.json:
```json
{
    "body": "Changing commit from \"5a25a24329df4c8b1aeaf971a3b2bd90ca7d23e3\" to \"aa3ace513ae79b05ae2f07b248d9d649376f025e\"",
    "created_at": "2018-06-04T14:55:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427412",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5a25a24329df4c8b1aeaf971a3b2bd90ca7d23e3" to "aa3ace513ae79b05ae2f07b248d9d649376f025e"



---

archive/issue_comments_427413.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[aa3ace5](https://github.com/sagemath/sagetrac-mirror/commit/aa3ace513ae79b05ae2f07b248d9d649376f025e)|`converted d_tilde globally to RR`|",
    "created_at": "2018-06-04T14:55:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427413",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[aa3ace5](https://github.com/sagemath/sagetrac-mirror/commit/aa3ace513ae79b05ae2f07b248d9d649376f025e)|`converted d_tilde globally to RR`|



---

archive/issue_comments_427414.json:
```json
{
    "body": "<a id='comment:10'></a>\nSir,\nI have made the changes which you suggested, please review.\nI guess trac doesn't notify about commits pushed on the ticket, though I have added you to cc now.",
    "created_at": "2018-06-04T15:01:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427414",
    "user": "https://github.com/raghukul01"
}
```

<a id='comment:10'></a>
Sir,
I have made the changes which you suggested, please review.
I guess trac doesn't notify about commits pushed on the ticket, though I have added you to cc now.



---

archive/issue_comments_427415.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-04T15:01:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427415",
    "user": "https://github.com/raghukul01"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_427416.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-04T15:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427416",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_427417.json:
```json
{
    "body": "<a id='comment:11'></a>\nno, I did get notified and even pulled it down and tested, but apparently I never put in my comments.\n\nIn going back over my tests with the new branch, there is one addition thing that I had noticed that needs to be fixed. With affine schemes working it exposed the fact that the height is converted to an absolute height incorrectly. In affine_space.py it has\n\n```\nbound = bound**(1/self.base_ring().absolute_degree())\n```\nwhich should be\n\n```\nbound = bound**self.base_ring().absolute_degree()\n```\n\nYou may need to adjust an example. If not, you should definitely add one that ensures this bound is converted correctly.",
    "created_at": "2018-06-04T15:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427417",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:11'></a>
no, I did get notified and even pulled it down and tested, but apparently I never put in my comments.

In going back over my tests with the new branch, there is one addition thing that I had noticed that needs to be fixed. With affine schemes working it exposed the fact that the height is converted to an absolute height incorrectly. In affine_space.py it has

```
bound = bound**(1/self.base_ring().absolute_degree())
```
which should be

```
bound = bound**self.base_ring().absolute_degree()
```

You may need to adjust an example. If not, you should definitely add one that ensures this bound is converted correctly.



---

archive/issue_comments_427418.json:
```json
{
    "body": "Changing commit from \"aa3ace513ae79b05ae2f07b248d9d649376f025e\" to \"18cbd5ac3b98417cce273dfa12d47f71752c2c7b\"",
    "created_at": "2018-06-04T20:50:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427418",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "aa3ace513ae79b05ae2f07b248d9d649376f025e" to "18cbd5ac3b98417cce273dfa12d47f71752c2c7b"



---

archive/issue_comments_427419.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[ea7b41c](https://github.com/sagemath/sagetrac-mirror/commit/ea7b41c95f1bc2ae220dfe3a2ddf950c5e7009a5)|`Doyle-Krumm Algorithm 4 Implemented`|\n|[b04b18c](https://github.com/sagemath/sagetrac-mirror/commit/b04b18cb16fc1213db56d1791e6dd3d6188e2fd6)|`Changes made in enum function`|\n|[395e254](https://github.com/sagemath/sagetrac-mirror/commit/395e2548a86168afa96f20d9cc23dabb86717d7b)|`Updated comments`|\n|[4e80b44](https://github.com/sagemath/sagetrac-mirror/commit/4e80b4477484a20b24f5575c2a7e027dcf052529)|`22771: Reformat code and replaced iter with yield`|\n|[4266f89](https://github.com/sagemath/sagetrac-mirror/commit/4266f89aa7c494e0cc068b3d875301cf025310c9)|`22771: Fixed conversion of d_tilde to RR`|\n|[07f97a1](https://github.com/sagemath/sagetrac-mirror/commit/07f97a17995f5b2e1d7f8de7be20e0fd36090de5)|`converted d_tilde globally to RR`|\n|[18cbd5a](https://github.com/sagemath/sagetrac-mirror/commit/18cbd5ac3b98417cce273dfa12d47f71752c2c7b)|`22771: Fixed Caculation of relative height`|",
    "created_at": "2018-06-04T20:50:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427419",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[ea7b41c](https://github.com/sagemath/sagetrac-mirror/commit/ea7b41c95f1bc2ae220dfe3a2ddf950c5e7009a5)|`Doyle-Krumm Algorithm 4 Implemented`|
|[b04b18c](https://github.com/sagemath/sagetrac-mirror/commit/b04b18cb16fc1213db56d1791e6dd3d6188e2fd6)|`Changes made in enum function`|
|[395e254](https://github.com/sagemath/sagetrac-mirror/commit/395e2548a86168afa96f20d9cc23dabb86717d7b)|`Updated comments`|
|[4e80b44](https://github.com/sagemath/sagetrac-mirror/commit/4e80b4477484a20b24f5575c2a7e027dcf052529)|`22771: Reformat code and replaced iter with yield`|
|[4266f89](https://github.com/sagemath/sagetrac-mirror/commit/4266f89aa7c494e0cc068b3d875301cf025310c9)|`22771: Fixed conversion of d_tilde to RR`|
|[07f97a1](https://github.com/sagemath/sagetrac-mirror/commit/07f97a17995f5b2e1d7f8de7be20e0fd36090de5)|`converted d_tilde globally to RR`|
|[18cbd5a](https://github.com/sagemath/sagetrac-mirror/commit/18cbd5ac3b98417cce273dfa12d47f71752c2c7b)|`22771: Fixed Caculation of relative height`|



---

archive/issue_comments_427420.json:
```json
{
    "body": "<a id='comment:13'></a>\nI have changed the part which calculates relative height in affine_space.py, example 2 was taking a long time and the answer was also wrong. So I changed that (examples show previous calculation was wrong).",
    "created_at": "2018-06-04T21:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427420",
    "user": "https://github.com/raghukul01"
}
```

<a id='comment:13'></a>
I have changed the part which calculates relative height in affine_space.py, example 2 was taking a long time and the answer was also wrong. So I changed that (examples show previous calculation was wrong).



---

archive/issue_comments_427421.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-04T21:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427421",
    "user": "https://github.com/raghukul01"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_427422.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-06-04T21:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427422",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_427423.json:
```json
{
    "body": "<a id='comment:15'></a>\nDoctests fail. Run \"make ptestlong\"",
    "created_at": "2018-06-07T19:15:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427423",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>
Doctests fail. Run "make ptestlong"



---

archive/issue_comments_427424.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-06-07T19:15:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427424",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_427425.json:
```json
{
    "body": "<a id='comment:16'></a>\nI ran the regular test, but  neglected to reun the longtests\n\n```\nFile \"src/sage/rings/number_field/number_field.py\", line 9375, in sage.rings.number_field.number_field.NumberField_absolute.elements_of_bounded_height\nFailed example:\n    len(list(L)) # long time (2 s)\nExpected:\n    2163\nGot:\n    2171\n```\n\nyou should check if this is another case of alg 3 missing points. If so we can just correct the result value.",
    "created_at": "2018-06-07T19:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427425",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:16'></a>
I ran the regular test, but  neglected to reun the longtests

```
File "src/sage/rings/number_field/number_field.py", line 9375, in sage.rings.number_field.number_field.NumberField_absolute.elements_of_bounded_height
Failed example:
    len(list(L)) # long time (2 s)
Expected:
    2163
Got:
    2171
```

you should check if this is another case of alg 3 missing points. If so we can just correct the result value.



---

archive/issue_comments_427426.json:
```json
{
    "body": "Changing commit from \"18cbd5ac3b98417cce273dfa12d47f71752c2c7b\" to \"e6f53c889da3f7f4b12140a65ef7dba85029d568\"",
    "created_at": "2018-06-08T09:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427426",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "18cbd5ac3b98417cce273dfa12d47f71752c2c7b" to "e6f53c889da3f7f4b12140a65ef7dba85029d568"



---

archive/issue_comments_427427.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------|\n|[e6f53c8](https://github.com/sagemath/sagetrac-mirror/commit/e6f53c889da3f7f4b12140a65ef7dba85029d568)|`Corrected doctest`|",
    "created_at": "2018-06-08T09:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427427",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------|
|[e6f53c8](https://github.com/sagemath/sagetrac-mirror/commit/e6f53c889da3f7f4b12140a65ef7dba85029d568)|`Corrected doctest`|



---

archive/issue_comments_427428.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-08T09:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427428",
    "user": "https://github.com/raghukul01"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_427429.json:
```json
{
    "body": "<a id='comment:19'></a>\nYes it was a case of missing points, changing the height to 50.1 yeilds\n required output\n {{{\n sage: K.<a> = NumberField(x^4 - 5)\n sage: L = K.elements_of_bounded_height(50.1)\n sage: len(list(L)) # long time (2 s)\n 2171\n }}}",
    "created_at": "2018-06-08T09:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427429",
    "user": "https://github.com/raghukul01"
}
```

<a id='comment:19'></a>
Yes it was a case of missing points, changing the height to 50.1 yeilds
 required output
 {{{
 sage: K.<a> = NumberField(x^4 - 5)
 sage: L = K.elements_of_bounded_height(50.1)
 sage: len(list(L)) # long time (2 s)
 2171
 }}}



---

archive/issue_comments_427430.json:
```json
{
    "body": "<a id='comment:20'></a>\nChanging the height bound is not quite what I meant. It sounds like this is an instance of getting the points in L' which are supposed to be within tolerance of the height\n\nabs(H_k(x) - B) < tolerance\n\nIf you need to move the bound to 50.1, then these points are outside of the specified tolerance when bound=50. Since we have to do some conversion between relative and absolute heights. Perhaps the issue is that tolerance must also undergo a similar 'conversion'?",
    "created_at": "2018-06-08T10:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427430",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:20'></a>
Changing the height bound is not quite what I meant. It sounds like this is an instance of getting the points in L' which are supposed to be within tolerance of the height

abs(H_k(x) - B) < tolerance

If you need to move the bound to 50.1, then these points are outside of the specified tolerance when bound=50. Since we have to do some conversion between relative and absolute heights. Perhaps the issue is that tolerance must also undergo a similar 'conversion'?



---

archive/issue_comments_427431.json:
```json
{
    "body": "<a id='comment:21'></a>\nSorry, my comment was quite confusing,\n\nWhat I meant was if we change the bound to 50.1 or even to 50.02 (current default of tolerance is 0.01), and use algorithm-3 we get correct output (2171). If we use bound 50 in algorithm-4 we get 2171 as the output.\n\nSo it was a case of missing points.\n\nWhich conversion are you suggesting? we are dealing with relative heights here, right?",
    "created_at": "2018-06-08T10:45:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427431",
    "user": "https://github.com/raghukul01"
}
```

<a id='comment:21'></a>
Sorry, my comment was quite confusing,

What I meant was if we change the bound to 50.1 or even to 50.02 (current default of tolerance is 0.01), and use algorithm-3 we get correct output (2171). If we use bound 50 in algorithm-4 we get 2171 as the output.

So it was a case of missing points.

Which conversion are you suggesting? we are dealing with relative heights here, right?



---

archive/issue_comments_427432.json:
```json
{
    "body": "<a id='comment:22'></a>\nThe point I'm making is that we shouldn't be seeing if we can adjust the parameters to gt the 'right' answer, but rather see which is the right answer for the parameters in the doctest.\n\nThe difference are the eight points which all have height\n\n50.0163488242872\n\nso, if the tolerance is specified as 0.01 with a bound of 50, then these points should not be returned. In other words, that would be a failure in the tolerance.\n\nActually, it looks like the number_field.py function has default tolerance 0.2, which makes the new output correct, however, the other function (bdd_height) has default tolerance 0.01.  I would say maybe to make the default tolerance in all of these functions the same (perhaps the 0.01).",
    "created_at": "2018-06-08T13:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427432",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:22'></a>
The point I'm making is that we shouldn't be seeing if we can adjust the parameters to gt the 'right' answer, but rather see which is the right answer for the parameters in the doctest.

The difference are the eight points which all have height

50.0163488242872

so, if the tolerance is specified as 0.01 with a bound of 50, then these points should not be returned. In other words, that would be a failure in the tolerance.

Actually, it looks like the number_field.py function has default tolerance 0.2, which makes the new output correct, however, the other function (bdd_height) has default tolerance 0.01.  I would say maybe to make the default tolerance in all of these functions the same (perhaps the 0.01).



---

archive/issue_comments_427433.json:
```json
{
    "body": "<a id='comment:23'></a>\nYes sir, I got your point, but before changing there is one issue.\n\nWhat should be the ideal value of tolerance, in earlier testing 0.01 was good enough, but as in this example height can be very close to tolerance (0.01634..). My suggestion is still to use 0.01, what are your views on that?",
    "created_at": "2018-06-08T14:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427433",
    "user": "https://github.com/raghukul01"
}
```

<a id='comment:23'></a>
Yes sir, I got your point, but before changing there is one issue.

What should be the ideal value of tolerance, in earlier testing 0.01 was good enough, but as in this example height can be very close to tolerance (0.01634..). My suggestion is still to use 0.01, what are your views on that?



---

archive/issue_comments_427434.json:
```json
{
    "body": "<a id='comment:24'></a>\nI'm fine with 0.01. More important than the default value is that tolerance does what is claims it does (find all points within tolerance of the specified bound).",
    "created_at": "2018-06-08T14:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427434",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:24'></a>
I'm fine with 0.01. More important than the default value is that tolerance does what is claims it does (find all points within tolerance of the specified bound).



---

archive/issue_comments_427435.json:
```json
{
    "body": "Changing commit from \"e6f53c889da3f7f4b12140a65ef7dba85029d568\" to \"bef2fcd930739238131910170a820dad389b0480\"",
    "created_at": "2018-06-08T15:50:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e6f53c889da3f7f4b12140a65ef7dba85029d568" to "bef2fcd930739238131910170a820dad389b0480"



---

archive/issue_comments_427436.json:
```json
{
    "body": "<a id='comment:25'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[bef2fcd](https://github.com/sagemath/sagetrac-mirror/commit/bef2fcd930739238131910170a820dad389b0480)|`updated universal value of tolerance parameter`|",
    "created_at": "2018-06-08T15:50:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427436",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[bef2fcd](https://github.com/sagemath/sagetrac-mirror/commit/bef2fcd930739238131910170a820dad389b0480)|`updated universal value of tolerance parameter`|



---

archive/issue_comments_427437.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-08T23:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427437",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_427438.json:
```json
{
    "body": "<a id='comment:26'></a>\nI get doctest failures in affine_homset and affine_rational_points.\n\n\nAdditionally, in my testing tolerance is not behaving as described. In other words you can get points that do not satisfy |H(P) - B| < tol.  However, these points are always points that are above the specified height bound, so I do not think is concerning. However, the documentation should be updated accordingly.",
    "created_at": "2018-06-08T23:14:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427438",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:26'></a>
I get doctest failures in affine_homset and affine_rational_points.


Additionally, in my testing tolerance is not behaving as described. In other words you can get points that do not satisfy |H(P) - B| < tol.  However, these points are always points that are above the specified height bound, so I do not think is concerning. However, the documentation should be updated accordingly.



---

archive/issue_comments_427439.json:
```json
{
    "body": "<a id='comment:27'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[2383d52](https://github.com/sagemath/sagetrac-mirror/commit/2383d5220d39c95b527e7e612dbae102790cdd15)|`22771: Corrected doctest in affine_homset and affine_rational_points`|",
    "created_at": "2018-06-09T12:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427439",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[2383d52](https://github.com/sagemath/sagetrac-mirror/commit/2383d5220d39c95b527e7e612dbae102790cdd15)|`22771: Corrected doctest in affine_homset and affine_rational_points`|



---

archive/issue_comments_427440.json:
```json
{
    "body": "Changing commit from \"bef2fcd930739238131910170a820dad389b0480\" to \"2383d5220d39c95b527e7e612dbae102790cdd15\"",
    "created_at": "2018-06-09T12:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427440",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bef2fcd930739238131910170a820dad389b0480" to "2383d5220d39c95b527e7e612dbae102790cdd15"



---

archive/issue_comments_427441.json:
```json
{
    "body": "<a id='comment:28'></a>\nDoc test were failing due to incorrect calculation of relative height, which was corrected in earlier commit. I have changes the bound accordingly, keeping existing bound would have taken very long time for the tests.",
    "created_at": "2018-06-09T12:38:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427441",
    "user": "https://github.com/raghukul01"
}
```

<a id='comment:28'></a>
Doc test were failing due to incorrect calculation of relative height, which was corrected in earlier commit. I have changes the bound accordingly, keeping existing bound would have taken very long time for the tests.



---

archive/issue_comments_427442.json:
```json
{
    "body": "<a id='comment:29'></a>\nSir,\nFor the documentation update I am planning to modify the current warning of algorithm 3 result (`In the current implementation, the output of the [Doyle-Krumm] algorithm cannot be guaranteed to be correct due to the necessity of floating point computations. In some cases, the default 53-bit precision is considerably lower than would be required for the algorithm to generate correct output.`) to what you are suggesting that there might me some points for which `H(p) > B + tolerance`, does this seem right?\n\nBTW can you share those tests? \n\nthanks in advance!",
    "created_at": "2018-06-09T13:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427442",
    "user": "https://github.com/raghukul01"
}
```

<a id='comment:29'></a>
Sir,
For the documentation update I am planning to modify the current warning of algorithm 3 result (`In the current implementation, the output of the [Doyle-Krumm] algorithm cannot be guaranteed to be correct due to the necessity of floating point computations. In some cases, the default 53-bit precision is considerably lower than would be required for the algorithm to generate correct output.`) to what you are suggesting that there might me some points for which `H(p) > B + tolerance`, does this seem right?

BTW can you share those tests? 

thanks in advance!



---

archive/issue_comments_427443.json:
```json
{
    "body": "<a id='comment:30'></a>\nI'm not sure it requires a warning block as it does return all of the points up to the bound and decreasing the tolerance does get you exactly the points up to that bound. The part that I am finding inaccurate is the precise relationship between tolerance and those extra points. Clarifying that there are floating point issues and you may get extra points which can be 'corrected' by lowering the tolerance in enough.",
    "created_at": "2018-06-09T13:16:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427443",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:30'></a>
I'm not sure it requires a warning block as it does return all of the points up to the bound and decreasing the tolerance does get you exactly the points up to that bound. The part that I am finding inaccurate is the precise relationship between tolerance and those extra points. Clarifying that there are floating point issues and you may get extra points which can be 'corrected' by lowering the tolerance in enough.



---

archive/issue_comments_427444.json:
```json
{
    "body": "<a id='comment:31'></a>\nOkay so should this comment be made only in bdd_height? or every place where bdd_height is called indirectly?",
    "created_at": "2018-06-09T13:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427444",
    "user": "https://github.com/raghukul01"
}
```

<a id='comment:31'></a>
Okay so should this comment be made only in bdd_height? or every place where bdd_height is called indirectly?



---

archive/issue_comments_427445.json:
```json
{
    "body": "Changing commit from \"2383d5220d39c95b527e7e612dbae102790cdd15\" to \"ba1cd419af55a84713c38600e4c5a48cfea5505d\"",
    "created_at": "2018-06-09T13:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427445",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2383d5220d39c95b527e7e612dbae102790cdd15" to "ba1cd419af55a84713c38600e4c5a48cfea5505d"



---

archive/issue_comments_427446.json:
```json
{
    "body": "<a id='comment:32'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------|\n|[ba1cd41](https://github.com/sagemath/sagetrac-mirror/commit/ba1cd419af55a84713c38600e4c5a48cfea5505d)|`Docstring updated`|",
    "created_at": "2018-06-09T13:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427446",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------|
|[ba1cd41](https://github.com/sagemath/sagetrac-mirror/commit/ba1cd419af55a84713c38600e4c5a48cfea5505d)|`Docstring updated`|



---

archive/issue_comments_427447.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-09T13:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427447",
    "user": "https://github.com/raghukul01"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_427448.json:
```json
{
    "body": "<a id='comment:33'></a>\nupdated doctests and docstrings",
    "created_at": "2018-06-09T13:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427448",
    "user": "https://github.com/raghukul01"
}
```

<a id='comment:33'></a>
updated doctests and docstrings



---

archive/issue_comments_427449.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-10T18:10:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427449",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_427450.json:
```json
{
    "body": "<a id='comment:34'></a>\nI'm ok with the vague description of lowering tolerance, except that I would not just say extra, but rather points larger than the specified bound.\n\nHowever, there are still a number of documentation issues surrounding tolerance that I had missed earlier.\n\n- bdd_height still claims that all points satisfy |H(P) - B| < tol. Which is what I am finding to be not accurate.\n\n- elements_of_bounded_height still lists the old warning\n\n- there is no way to specify tolerance or precision in the places affine objects call enum_number_field\n\n- there is no way specify tolerance in the places projective objects call enum_number_field\n\n- The statements about what algorithm is used etc, should be also be in the indirect call places as well. (these are actually more likely to be used by the user).",
    "created_at": "2018-06-10T18:10:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427450",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:34'></a>
I'm ok with the vague description of lowering tolerance, except that I would not just say extra, but rather points larger than the specified bound.

However, there are still a number of documentation issues surrounding tolerance that I had missed earlier.

- bdd_height still claims that all points satisfy |H(P) - B| < tol. Which is what I am finding to be not accurate.

- elements_of_bounded_height still lists the old warning

- there is no way to specify tolerance or precision in the places affine objects call enum_number_field

- there is no way specify tolerance in the places projective objects call enum_number_field

- The statements about what algorithm is used etc, should be also be in the indirect call places as well. (these are actually more likely to be used by the user).



---

archive/issue_comments_427451.json:
```json
{
    "body": "<a id='comment:35'></a>\nbtw, this is a situation where I'd be tempted to switch the affine.rational_points/.points and projective.rational_points/.points functions to *kwds since which keywords are needed dependents on which situation/algorithm is being used.",
    "created_at": "2018-06-10T20:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427451",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:35'></a>
btw, this is a situation where I'd be tempted to switch the affine.rational_points/.points and projective.rational_points/.points functions to *kwds since which keywords are needed dependents on which situation/algorithm is being used.



---

archive/issue_comments_427452.json:
```json
{
    "body": "<a id='comment:36'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[23a8c2c](https://github.com/sagemath/sagetrac-mirror/commit/23a8c2c68f5431a2ff39fbd2086625b3d32e9d1d)|`Documentation updated`|",
    "created_at": "2018-06-11T17:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427452",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[23a8c2c](https://github.com/sagemath/sagetrac-mirror/commit/23a8c2c68f5431a2ff39fbd2086625b3d32e9d1d)|`Documentation updated`|



---

archive/issue_comments_427453.json:
```json
{
    "body": "Changing commit from \"ba1cd419af55a84713c38600e4c5a48cfea5505d\" to \"23a8c2c68f5431a2ff39fbd2086625b3d32e9d1d\"",
    "created_at": "2018-06-11T17:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427453",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ba1cd419af55a84713c38600e4c5a48cfea5505d" to "23a8c2c68f5431a2ff39fbd2086625b3d32e9d1d"



---

archive/issue_comments_427454.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-11T17:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427454",
    "user": "https://github.com/raghukul01"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_427455.json:
```json
{
    "body": "Changing branch from \"u/raghukul01/numerical_precision_for_heights_in_number_fields\" to \"u/bhutz/numerical_precision_for_heights_in_number_fields\"",
    "created_at": "2018-06-11T18:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427455",
    "user": "https://github.com/bhutz"
}
```

Changing branch from "u/raghukul01/numerical_precision_for_heights_in_number_fields" to "u/bhutz/numerical_precision_for_heights_in_number_fields"



---

archive/issue_comments_427456.json:
```json
{
    "body": "<a id='comment:39'></a>\nHere is a suggestion for updating the docs. Please look over for typos.\n\nAlso there are still a couple functionality things:\nkwds needed so tolerance, precision can be specified if needed\n\n- affine homeset needs *kwds \n\n- product projective needs *kwds\n\n- projective homset needs *kwds\n\nneed to remember to run doctests before pushing...\n\n```\nsage -t --warn-long 63.5 product_projective/homset.py  # 1 doctest failed\nsage -t --warn-long 63.5 product_projective/space.py  # 2 doctests failed\n```\n\n---\nNew commits:\n|                                                                                                                                          |                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[3bc7acd](https://github.com/sagemath/sagetrac-mirror/commit/3bc7acd8c857e7aad5200781bdc780a37cec052e)|`22771: docstring updates`|",
    "created_at": "2018-06-11T18:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427456",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:39'></a>
Here is a suggestion for updating the docs. Please look over for typos.

Also there are still a couple functionality things:
kwds needed so tolerance, precision can be specified if needed

- affine homeset needs *kwds 

- product projective needs *kwds

- projective homset needs *kwds

need to remember to run doctests before pushing...

```
sage -t --warn-long 63.5 product_projective/homset.py  # 1 doctest failed
sage -t --warn-long 63.5 product_projective/space.py  # 2 doctests failed
```

---
New commits:
|                                                                                                                                          |                          |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[3bc7acd](https://github.com/sagemath/sagetrac-mirror/commit/3bc7acd8c857e7aad5200781bdc780a37cec052e)|`22771: docstring updates`|



---

archive/issue_comments_427457.json:
```json
{
    "body": "Changing commit from \"23a8c2c68f5431a2ff39fbd2086625b3d32e9d1d\" to \"3bc7acd8c857e7aad5200781bdc780a37cec052e\"",
    "created_at": "2018-06-11T18:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427457",
    "user": "https://github.com/bhutz"
}
```

Changing commit from "23a8c2c68f5431a2ff39fbd2086625b3d32e9d1d" to "3bc7acd8c857e7aad5200781bdc780a37cec052e"



---

archive/issue_comments_427458.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-11T18:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427458",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_427459.json:
```json
{
    "body": "Changing branch from \"u/bhutz/numerical_precision_for_heights_in_number_fields\" to \"u/raghukul01/numerical_precision_for_heights_in_number_fields\"",
    "created_at": "2018-06-14T18:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427459",
    "user": "https://github.com/raghukul01"
}
```

Changing branch from "u/bhutz/numerical_precision_for_heights_in_number_fields" to "u/raghukul01/numerical_precision_for_heights_in_number_fields"



---

archive/issue_comments_427460.json:
```json
{
    "body": "<a id='comment:41'></a>\nNew commits:\n|                                                                                                                                          |                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[fbceb52](https://github.com/sagemath/sagetrac-mirror/commit/fbceb5290e98e656d50114fdfd81f10e29cdd6d7)|`added keywork in homsets and product_projective`|",
    "created_at": "2018-06-14T18:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427460",
    "user": "https://github.com/raghukul01"
}
```

<a id='comment:41'></a>
New commits:
|                                                                                                                                          |                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[fbceb52](https://github.com/sagemath/sagetrac-mirror/commit/fbceb5290e98e656d50114fdfd81f10e29cdd6d7)|`added keywork in homsets and product_projective`|



---

archive/issue_comments_427461.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-14T18:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427461",
    "user": "https://github.com/raghukul01"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_427462.json:
```json
{
    "body": "Changing commit from \"3bc7acd8c857e7aad5200781bdc780a37cec052e\" to \"fbceb5290e98e656d50114fdfd81f10e29cdd6d7\"",
    "created_at": "2018-06-14T18:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427462",
    "user": "https://github.com/raghukul01"
}
```

Changing commit from "3bc7acd8c857e7aad5200781bdc780a37cec052e" to "fbceb5290e98e656d50114fdfd81f10e29cdd6d7"



---

archive/issue_comments_427463.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-19T14:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427463",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_427464.json:
```json
{
    "body": "<a id='comment:42'></a>\nalgorithm 5 is spelled wrong evertywhere\n\nin affine homset: dimension zero line in docs. this doesn't work for rings, so you probably mean: whether the field is infinite or not.",
    "created_at": "2018-06-19T14:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427464",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:42'></a>
algorithm 5 is spelled wrong evertywhere

in affine homset: dimension zero line in docs. this doesn't work for rings, so you probably mean: whether the field is infinite or not.



---

archive/issue_comments_427465.json:
```json
{
    "body": "<a id='comment:43'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[82edb4a](https://github.com/sagemath/sagetrac-mirror/commit/82edb4aaa36b4d62cda4843d3bf8b619953fc863)|`22771: some changes`|",
    "created_at": "2018-06-19T23:32:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427465",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[82edb4a](https://github.com/sagemath/sagetrac-mirror/commit/82edb4aaa36b4d62cda4843d3bf8b619953fc863)|`22771: some changes`|



---

archive/issue_comments_427466.json:
```json
{
    "body": "Changing commit from \"fbceb5290e98e656d50114fdfd81f10e29cdd6d7\" to \"82edb4aaa36b4d62cda4843d3bf8b619953fc863\"",
    "created_at": "2018-06-19T23:32:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427466",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fbceb5290e98e656d50114fdfd81f10e29cdd6d7" to "82edb4aaa36b4d62cda4843d3bf8b619953fc863"



---

archive/issue_comments_427467.json:
```json
{
    "body": "<a id='comment:44'></a>\nadded suggested changes",
    "created_at": "2018-06-19T23:34:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427467",
    "user": "https://github.com/raghukul01"
}
```

<a id='comment:44'></a>
added suggested changes



---

archive/issue_comments_427468.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-19T23:34:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427468",
    "user": "https://github.com/raghukul01"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_067402.json:
```json
{
    "actor": "https://github.com/bhutz",
    "created_at": "2018-06-20T00:59:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22771#event-67402"
}
```



---

archive/issue_comments_427469.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-20T00:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427469",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_427470.json:
```json
{
    "body": "<a id='comment:45'></a>\nfrom ptestlong looks like the same set of failures from we got in #23627\n\n```\nsage -t --long --warn-long 66.7 src/sage/graphs/generators/smallgraphs.py  # 3 doctests failed\nsage -t --long --warn-long 66.7 src/sage/coding/linear_code.py  # 109 doctests failed\nsage -t --long --warn-long 66.7 src/sage/coding/codecan/autgroup_can_label.pyx  # 55 doctests failed\nsage -t --long --warn-long 66.7 src/sage/coding/codecan/codecan.pyx  # 41 doctests failed\nsage -t --long --warn-long 66.7 src/sage/coding/code_constructions.py  # 3 doctests failed\nsage -t --long --warn-long 66.7 src/doc/en/constructions/linear_codes.rst  # 13 doctests failed\nsage -t --long --warn-long 66.7 src/sage/coding/hamming_code.py  # 1 doctest failed\nsage -t --long --warn-long 66.7 src/sage/tests/books/judson-abstract-algebra/algcodes-sage.py  # 9 doctests failed\n```",
    "created_at": "2018-06-20T00:59:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427470",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:45'></a>
from ptestlong looks like the same set of failures from we got in #23627

```
sage -t --long --warn-long 66.7 src/sage/graphs/generators/smallgraphs.py  # 3 doctests failed
sage -t --long --warn-long 66.7 src/sage/coding/linear_code.py  # 109 doctests failed
sage -t --long --warn-long 66.7 src/sage/coding/codecan/autgroup_can_label.pyx  # 55 doctests failed
sage -t --long --warn-long 66.7 src/sage/coding/codecan/codecan.pyx  # 41 doctests failed
sage -t --long --warn-long 66.7 src/sage/coding/code_constructions.py  # 3 doctests failed
sage -t --long --warn-long 66.7 src/doc/en/constructions/linear_codes.rst  # 13 doctests failed
sage -t --long --warn-long 66.7 src/sage/coding/hamming_code.py  # 1 doctest failed
sage -t --long --warn-long 66.7 src/sage/tests/books/judson-abstract-algebra/algcodes-sage.py  # 9 doctests failed
```



---

archive/issue_comments_427471.json:
```json
{
    "body": "Changing commit from \"82edb4aaa36b4d62cda4843d3bf8b619953fc863\" to \"f88426be129022992e144d89dc25b12f96a2dfec\"",
    "created_at": "2018-06-20T10:58:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "82edb4aaa36b4d62cda4843d3bf8b619953fc863" to "f88426be129022992e144d89dc25b12f96a2dfec"



---

archive/issue_comments_427472.json:
```json
{
    "body": "<a id='comment:46'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------|\n|[f88426b](https://github.com/sagemath/sagetrac-mirror/commit/f88426be129022992e144d89dc25b12f96a2dfec)|`fixed doctest`|",
    "created_at": "2018-06-20T10:58:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427472",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |               |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------|
|[f88426b](https://github.com/sagemath/sagetrac-mirror/commit/f88426be129022992e144d89dc25b12f96a2dfec)|`fixed doctest`|



---

archive/issue_comments_427473.json:
```json
{
    "body": "<a id='comment:47'></a>\nCorrected the line in hamming_code.py",
    "created_at": "2018-06-20T10:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427473",
    "user": "https://github.com/raghukul01"
}
```

<a id='comment:47'></a>
Corrected the line in hamming_code.py



---

archive/issue_comments_427474.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-20T10:59:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427474",
    "user": "https://github.com/raghukul01"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_427475.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-06-20T16:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427475",
    "user": "https://github.com/bhutz"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_427476.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-06-21T17:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427476",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_067403.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-06-21T17:26:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22771#event-67403"
}
```



---

archive/issue_comments_427477.json:
```json
{
    "body": "Changing branch from \"u/raghukul01/numerical_precision_for_heights_in_number_fields\" to \"f88426be129022992e144d89dc25b12f96a2dfec\"",
    "created_at": "2018-06-21T17:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22771",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22771#issuecomment-427477",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/raghukul01/numerical_precision_for_heights_in_number_fields" to "f88426be129022992e144d89dc25b12f96a2dfec"
