# Issue 22552: 2 bugs creating a simple 2-point Polytope

archive/issues_022315.json:
```json
{
    "assignees": [],
    "body": "Sara Billey (of Univ of Washington) reported these.\n\n```\n~/Sara$ sage-develop\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 7.6.beta5, Release Date: 2017-02-26               \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nsage: P=Polyhedron(vertices =[(8.3319544851638732, 7.0567045956967727), (6.4876921900819049, 4.8435898415984129)])\nsage: P\nThe empty polyhedron in (Real Field with 57 bits of precision)^2\nsage: # WRONG!  It should not be empty.  Indeed, look:\nsage: P=Polyhedron(vertices =[(8.3319544851638732, 7.0567045956967727), (6.4876921900819049, 4.84358984159841)])\nsage: P\nA 1-dimensional polyhedron in RDF^2 defined as the convex hull of 2 vertices\nsage: # Also, here's a hub traceback for no reason (as a second but maybe related bug):\nsage: P=Polyhedron(vertices =[(8.3319544851638732, 7.0567045956967727), (6.4876921900819049, 4.8435898415984129)], base_ring=RealField(40))\nsage: P.plot()\n---------------------------------------------------------------------------\nKeyError                                  Traceback (most recent call last)\n<ipython-input-8-d297b4e23e6b> in <module>()\n----> 1 P.plot()\n \n/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in plot(self, point, line, polygon, wireframe, fill, projection_direction, **kwds)\n    694                 return polyhedron.projection()\n    695\n--> 696         projection = project(self)\n    697         try:\n    698             plot_method = projection.plot\n \n/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in project(polyhedron)\n    692                 return polyhedron.schlegel_projection()\n    693             else:\n--> 694                 return polyhedron.projection()\n    695\n    696         projection = project(self)\n \n/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in projection(self)\n   3759         \"\"\"\n   3760         from .plot import Projection\n-> 3761         self.projection = Projection(self)\n   3762         return self.projection\n   3763\n \n/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/plot.py in __init__(self, polyhedron, proj)\n    492\n    493         if polyhedron.ambient_dim() == 2:\n--> 494             self._init_from_2d(polyhedron)\n    495         elif polyhedron.ambient_dim() == 3:\n    496             self._init_from_3d(polyhedron)\n \n/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/plot.py in _init_from_2d(self, polyhedron)\n    748         self.dimension = 2\n    749         self._init_points(polyhedron)\n--> 750         self._init_lines_arrows(polyhedron)\n    751         self._init_area_2d(polyhedron)\n    752\n \n/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/plot.py in _init_lines_arrows(self, polyhedron)\n    812             if not obj[i].is_vertex(): continue\n    813             for j in range(len(obj)):\n--> 814                 if polyhedron.vertex_adjacency_matrix()[i,j] == 0: continue\n    815                 if i < j and obj[j].is_vertex():\n    816                     l = [obj[i].vector(), obj[j].vector()]\n \n/projects/sage/sage-dev/src/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/projects/sage/sage-dev/src/build/cythonized/sage/misc/cachefunc.c:13453)()\n   2399         if self.cache is None:\n   2400             f = self.f\n-> 2401             self.cache = f(self._instance)\n   2402         return self.cache\n   2403\n \n/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in vertex_adjacency_matrix(self)\n   1933             (0, 0, 1, 1, 0) A vertex at (3, 0)\n   1934         \"\"\"\n-> 1935         return self._vertex_adjacency_matrix()\n   1936\n   1937     adjacency_matrix = vertex_adjacency_matrix\n \n/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in _vertex_adjacency_matrix(self)\n    318             M[j, i] = 1\n    319\n--> 320         face_lattice = self.face_lattice()\n    321         for face in face_lattice:\n    322             Vrep = face.ambient_Vrepresentation()\n \n/projects/sage/sage-dev/src/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/projects/sage/sage-dev/src/build/cythonized/sage/misc/cachefunc.c:13453)()\n   2399         if self.cache is None:\n   2400             f = self.f\n-> 2401             self.cache = f(self._instance)\n   2402         return self.cache\n   2403\n \n/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in face_lattice(self)\n   3408         return Hasse_diagram_from_incidences\\\n   3409             (atoms_incidences, coatoms_incidences,\n-> 3410              face_constructor=face_constructor, required_atoms=atoms_vertices)\n   3411\n   3412     def faces(self, face_dimension):\n \n/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/hasse_diagram.pyc in Hasse_diagram_from_incidences(atom_to_coatoms, coatom_to_atoms, face_constructor, required_atoms, key, **kwds)\n    180     # Make sure that coatoms are in the end in proper order\n    181     tail = [faces[atoms, frozenset([coatom])]\n--> 182             for coatom, atoms in enumerate(coatom_to_atoms)]\n    183     tail.append(faces[A, frozenset()])\n    184     new_order = [n for n in new_order if n not in tail] + tail\n \nKeyError: (frozenset([]), frozenset([0]))\nsage: \n```\n\nSee public worksheet: https://cloud.sagemath.com/projects/53b9d6b6-ce2c-4007-843a-257cc01bf65b/files/Sara/Polygon%20Bug.sagews\n\nCC:  @jplab @mo271 @mkoeppe @videlec\n\nKeywords: **base ring, polyhedron, days88, IMA coding sprints**\n\nBranch/Commit: **[150c7df](https://github.com/sagemath/sagetrac-mirror/commit/150c7df7962e6ddb06583511e907c1cf6606b863)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Jean-Philippe Labb\u00e9**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22552_\n\n",
    "closed_at": "2017-09-10T11:56:33Z",
    "created_at": "2017-03-09T00:08:50Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "2 bugs creating a simple 2-point Polytope",
    "type": "issue",
    "updated_at": "2017-09-10T11:56:33Z",
    "url": "https://github.com/sagemath/sage/issues/22552",
    "user": "https://github.com/williamstein"
}
```
Sara Billey (of Univ of Washington) reported these.

```
~/Sara$ sage-develop
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 7.6.beta5, Release Date: 2017-02-26               │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
sage: P=Polyhedron(vertices =[(8.3319544851638732, 7.0567045956967727), (6.4876921900819049, 4.8435898415984129)])
sage: P
The empty polyhedron in (Real Field with 57 bits of precision)^2
sage: # WRONG!  It should not be empty.  Indeed, look:
sage: P=Polyhedron(vertices =[(8.3319544851638732, 7.0567045956967727), (6.4876921900819049, 4.84358984159841)])
sage: P
A 1-dimensional polyhedron in RDF^2 defined as the convex hull of 2 vertices
sage: # Also, here's a hub traceback for no reason (as a second but maybe related bug):
sage: P=Polyhedron(vertices =[(8.3319544851638732, 7.0567045956967727), (6.4876921900819049, 4.8435898415984129)], base_ring=RealField(40))
sage: P.plot()
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
<ipython-input-8-d297b4e23e6b> in <module>()
----> 1 P.plot()
 
/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in plot(self, point, line, polygon, wireframe, fill, projection_direction, **kwds)
    694                 return polyhedron.projection()
    695
--> 696         projection = project(self)
    697         try:
    698             plot_method = projection.plot
 
/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in project(polyhedron)
    692                 return polyhedron.schlegel_projection()
    693             else:
--> 694                 return polyhedron.projection()
    695
    696         projection = project(self)
 
/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in projection(self)
   3759         """
   3760         from .plot import Projection
-> 3761         self.projection = Projection(self)
   3762         return self.projection
   3763
 
/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/plot.py in __init__(self, polyhedron, proj)
    492
    493         if polyhedron.ambient_dim() == 2:
--> 494             self._init_from_2d(polyhedron)
    495         elif polyhedron.ambient_dim() == 3:
    496             self._init_from_3d(polyhedron)
 
/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/plot.py in _init_from_2d(self, polyhedron)
    748         self.dimension = 2
    749         self._init_points(polyhedron)
--> 750         self._init_lines_arrows(polyhedron)
    751         self._init_area_2d(polyhedron)
    752
 
/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/plot.py in _init_lines_arrows(self, polyhedron)
    812             if not obj[i].is_vertex(): continue
    813             for j in range(len(obj)):
--> 814                 if polyhedron.vertex_adjacency_matrix()[i,j] == 0: continue
    815                 if i < j and obj[j].is_vertex():
    816                     l = [obj[i].vector(), obj[j].vector()]
 
/projects/sage/sage-dev/src/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/projects/sage/sage-dev/src/build/cythonized/sage/misc/cachefunc.c:13453)()
   2399         if self.cache is None:
   2400             f = self.f
-> 2401             self.cache = f(self._instance)
   2402         return self.cache
   2403
 
/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in vertex_adjacency_matrix(self)
   1933             (0, 0, 1, 1, 0) A vertex at (3, 0)
   1934         """
-> 1935         return self._vertex_adjacency_matrix()
   1936
   1937     adjacency_matrix = vertex_adjacency_matrix
 
/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in _vertex_adjacency_matrix(self)
    318             M[j, i] = 1
    319
--> 320         face_lattice = self.face_lattice()
    321         for face in face_lattice:
    322             Vrep = face.ambient_Vrepresentation()
 
/projects/sage/sage-dev/src/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (/projects/sage/sage-dev/src/build/cythonized/sage/misc/cachefunc.c:13453)()
   2399         if self.cache is None:
   2400             f = self.f
-> 2401             self.cache = f(self._instance)
   2402         return self.cache
   2403
 
/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/polyhedron/base.pyc in face_lattice(self)
   3408         return Hasse_diagram_from_incidences\
   3409             (atoms_incidences, coatoms_incidences,
-> 3410              face_constructor=face_constructor, required_atoms=atoms_vertices)
   3411
   3412     def faces(self, face_dimension):
 
/projects/sage/sage-dev/local/lib/python2.7/site-packages/sage/geometry/hasse_diagram.pyc in Hasse_diagram_from_incidences(atom_to_coatoms, coatom_to_atoms, face_constructor, required_atoms, key, **kwds)
    180     # Make sure that coatoms are in the end in proper order
    181     tail = [faces[atoms, frozenset([coatom])]
--> 182             for coatom, atoms in enumerate(coatom_to_atoms)]
    183     tail.append(faces[A, frozenset()])
    184     new_order = [n for n in new_order if n not in tail] + tail
 
KeyError: (frozenset([]), frozenset([0]))
sage: 
```

See public worksheet: https://cloud.sagemath.com/projects/53b9d6b6-ce2c-4007-843a-257cc01bf65b/files/Sara/Polygon%20Bug.sagews

CC:  @jplab @mo271 @mkoeppe @videlec

Keywords: **base ring, polyhedron, days88, IMA coding sprints**

Branch/Commit: **[150c7df](https://github.com/sagemath/sagetrac-mirror/commit/150c7df7962e6ddb06583511e907c1cf6606b863)**

Reviewer: **Vincent Delecroix**

Author: **Jean-Philippe Labbé**

_Issue created by migration from https://trac.sagemath.org/ticket/22552_





---

archive/issue_events_297143.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2017-03-09T00:08:50Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297143"
}
```



---

archive/issue_events_297144.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2017-03-09T00:08:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "component: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297144"
}
```



---

archive/issue_events_297145.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2017-03-09T00:08:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297145"
}
```



---

archive/issue_events_297146.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2017-03-09T00:08:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297146"
}
```



---

archive/issue_comments_336693.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nIf I understood correctly, #18220 tries to fix this and other problems by disallowing inexact fields completely...",
    "created_at": "2017-03-09T04:08:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336693",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:1" align="right">Comment 1</div>

If I understood correctly, #18220 tries to fix this and other problems by disallowing inexact fields completely...



---

archive/issue_comments_336694.json:
```json
{
    "body": "Branch: **[u/jipilab/22552](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/22552)**",
    "created_at": "2017-03-17T09:36:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336694",
    "user": "https://github.com/jplab"
}
```

Branch: **[u/jipilab/22552](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/22552)**



---

archive/issue_events_297147.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2017-03-17T09:38:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297147"
}
```



---

archive/issue_comments_336695.json:
```json
{
    "body": "Author: **Jean-Philippe Labb\u00e9**",
    "created_at": "2017-03-17T09:38:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336695",
    "user": "https://github.com/jplab"
}
```

Author: **Jean-Philippe Labbé**



---

archive/issue_comments_336696.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nI added tests and some explanation in the documentation of the polyhedron constructor. This complements #18220 also inside the constructor class.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1873e3299399b7f11485a8b9d3c3a52cb71c520a\">1873e32</a></td><td><code>Added explanation on the base ring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a098bc11f9066736c002819b869fd28c1aea310c\">a098bc1</a></td><td><code>Added tests from the ticket</code></td></tr></table>\n",
    "created_at": "2017-03-17T09:38:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336696",
    "user": "https://github.com/jplab"
}
```

<div id="comment:4" align="right">Comment 4</div>

I added tests and some explanation in the documentation of the polyhedron constructor. This complements #18220 also inside the constructor class.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1873e3299399b7f11485a8b9d3c3a52cb71c520a">1873e32</a></td><td><code>Added explanation on the base ring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a098bc11f9066736c002819b869fd28c1aea310c">a098bc1</a></td><td><code>Added tests from the ticket</code></td></tr></table>




---

archive/issue_comments_336697.json:
```json
{
    "body": "Changed keywords from **** to **base ring, polyhedron**",
    "created_at": "2017-03-17T09:38:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336697",
    "user": "https://github.com/jplab"
}
```

Changed keywords from **** to **base ring, polyhedron**



---

archive/issue_comments_336698.json:
```json
{
    "body": "Commit: **[a098bc1](https://github.com/sagemath/sagetrac-mirror/commit/a098bc11f9066736c002819b869fd28c1aea310c)**",
    "created_at": "2017-03-17T09:38:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336698",
    "user": "https://github.com/jplab"
}
```

Commit: **[a098bc1](https://github.com/sagemath/sagetrac-mirror/commit/a098bc11f9066736c002819b869fd28c1aea310c)**



---

archive/issue_comments_336699.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ff050f294e1c9112fe5ff686df9f82cf267a61a\">0ff050f</a></td><td><code>pep8 cleaning</code></td></tr></table>\n",
    "created_at": "2017-03-17T09:40:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336699",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ff050f294e1c9112fe5ff686df9f82cf267a61a">0ff050f</a></td><td><code>pep8 cleaning</code></td></tr></table>




---

archive/issue_comments_336700.json:
```json
{
    "body": "Changed commit from **[a098bc1](https://github.com/sagemath/sagetrac-mirror/commit/a098bc11f9066736c002819b869fd28c1aea310c)** to **[0ff050f](https://github.com/sagemath/sagetrac-mirror/commit/0ff050f294e1c9112fe5ff686df9f82cf267a61a)**",
    "created_at": "2017-03-17T09:40:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336700",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a098bc1](https://github.com/sagemath/sagetrac-mirror/commit/a098bc11f9066736c002819b869fd28c1aea310c)** to **[0ff050f](https://github.com/sagemath/sagetrac-mirror/commit/0ff050f294e1c9112fe5ff686df9f82cf267a61a)**



---

archive/issue_comments_336701.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nDo you really want to keep this behavior?\n\n```\nIf the input consists of decimal numbers and the `base_ring` is not specified,\nthe base ring is set to be the `RealField` with the precision given by the\nminimal precision of the input. If it has 53 bits of precision, the constructor\nconverts automatically the base ring to `RDF`::\n```",
    "created_at": "2017-03-17T11:54:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336701",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">Comment 6</div>

Do you really want to keep this behavior?

```
If the input consists of decimal numbers and the `base_ring` is not specified,
the base ring is set to be the `RealField` with the precision given by the
minimal precision of the input. If it has 53 bits of precision, the constructor
converts automatically the base ring to `RDF`::
```



---

archive/issue_comments_336702.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nComputations over `RDF` and `RR` **are** different!",
    "created_at": "2017-03-17T11:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336702",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">Comment 7</div>

Computations over `RDF` and `RR` **are** different!



---

archive/issue_comments_336703.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nAn example\n\n```\nsage: float(\"2.0\") ** -2048r == 0.0r\nTrue\nsage: RR(2.) ** -2048r == RR.zero()\nFalse\n```",
    "created_at": "2017-03-17T11:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336703",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">Comment 8</div>

An example

```
sage: float("2.0") ** -2048r == 0.0r
True
sage: RR(2.) ** -2048r == RR.zero()
False
```



---

archive/issue_comments_336704.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nReplying to [@videlec](#comment%3A6):\n> Do you really want to keep this behavior?\n> \n> ```\n> If the input consists of decimal numbers and the `base_ring` is not specified,\n> the base ring is set to be the `RealField` with the precision given by the\n> minimal precision of the input. If it has 53 bits of precision, the constructor\n> converts automatically the base ring to `RDF`::\n> ```\n\nNo, not really...\n\nBut at least describing the current behavior may be useful to understand how the constructor works. Is that reasonable?\n\nOnce this behavior is changed, I'd just delete the paragraph.",
    "created_at": "2017-03-17T12:21:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336704",
    "user": "https://github.com/jplab"
}
```

<div id="comment:9" align="right">Comment 9</div>

Replying to [@videlec](#comment%3A6):
> Do you really want to keep this behavior?
> 
> ```
> If the input consists of decimal numbers and the `base_ring` is not specified,
> the base ring is set to be the `RealField` with the precision given by the
> minimal precision of the input. If it has 53 bits of precision, the constructor
> converts automatically the base ring to `RDF`::
> ```

No, not really...

But at least describing the current behavior may be useful to understand how the constructor works. Is that reasonable?

Once this behavior is changed, I'd just delete the paragraph.



---

archive/issue_comments_336705.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nThis ticket only looks at the bugs, now with #18220 merged, the behavior is changed and the \"bugs\" have now an explanation.\n\nWhat else should be done here?",
    "created_at": "2017-03-17T12:23:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336705",
    "user": "https://github.com/jplab"
}
```

<div id="comment:10" align="right">Comment 10</div>

This ticket only looks at the bugs, now with #18220 merged, the behavior is changed and the "bugs" have now an explanation.

What else should be done here?



---

archive/issue_comments_336706.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nShould the \"Do what I mean\" be changed completely?\n\nOr should the base_ring passed by the constructor to the parent *always* be `RDF` and not `RR`?",
    "created_at": "2017-03-17T12:25:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336706",
    "user": "https://github.com/jplab"
}
```

<div id="comment:11" align="right">Comment 11</div>

Should the "Do what I mean" be changed completely?

Or should the base_ring passed by the constructor to the parent *always* be `RDF` and not `RR`?



---

archive/issue_comments_336707.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@jplab](#comment%3A9):\n> Replying to [@videlec](#comment%3A6):\n> > Do you really want to keep this behavior?\n> > \n> > ```\n> > If the input consists of decimal numbers and the `base_ring` is not specified,\n> > the base ring is set to be the `RealField` with the precision given by the\n> > minimal precision of the input. If it has 53 bits of precision, the constructor\n> > converts automatically the base ring to `RDF`::\n> > ```\n\n> \n> No, not really...\n> \n> But at least describing the current behavior may be useful to understand how the constructor works. Is that reasonable?\n\nWhen documented, a bug becomes a feature! What about\n\n```\n.. WARNING::\n\n    When used with input in the realf field with 53 bits of mantissa precision\n    the input is converted without notice into the machine floating point numbers.\n    This behavior might cause some undesirable effects.\n```",
    "created_at": "2017-03-17T12:27:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336707",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@jplab](#comment%3A9):
> Replying to [@videlec](#comment%3A6):
> > Do you really want to keep this behavior?
> > 
> > ```
> > If the input consists of decimal numbers and the `base_ring` is not specified,
> > the base ring is set to be the `RealField` with the precision given by the
> > minimal precision of the input. If it has 53 bits of precision, the constructor
> > converts automatically the base ring to `RDF`::
> > ```

> 
> No, not really...
> 
> But at least describing the current behavior may be useful to understand how the constructor works. Is that reasonable?

When documented, a bug becomes a feature! What about

```
.. WARNING::

    When used with input in the realf field with 53 bits of mantissa precision
    the input is converted without notice into the machine floating point numbers.
    This behavior might cause some undesirable effects.
```



---

archive/issue_comments_336708.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nAn example of undesirable feature\n\n```\nsage: a = RR(2.0)**-2048\nsage: b = RR(3.0)**-2048\nsage: Polyhedron([[a],[b]])\nA 0-dimensional polyhedron in RDF^1 defined as the convex hull of 1 vertex\n```",
    "created_at": "2017-03-17T12:29:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336708",
    "user": "https://github.com/videlec"
}
```

<div id="comment:13" align="right">Comment 13</div>

An example of undesirable feature

```
sage: a = RR(2.0)**-2048
sage: b = RR(3.0)**-2048
sage: Polyhedron([[a],[b]])
A 0-dimensional polyhedron in RDF^1 defined as the convex hull of 1 vertex
```



---

archive/issue_comments_336709.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nOkay, yes, that sounds good!",
    "created_at": "2017-03-17T12:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336709",
    "user": "https://github.com/jplab"
}
```

<div id="comment:14" align="right">Comment 14</div>

Okay, yes, that sounds good!



---

archive/issue_comments_336710.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nShould I keep the 3 examples showing the difference also?",
    "created_at": "2017-03-17T13:02:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336710",
    "user": "https://github.com/jplab"
}
```

<div id="comment:15" align="right">Comment 15</div>

Should I keep the 3 examples showing the difference also?



---

archive/issue_comments_336711.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nFurther, the warning bugs me a bit...\n\nIt does not tell the complete truth about the behaviour: you only need 1 entry to have a 53 bit mentissa to get into floating points not necessary all of them... This is **even** worse I find! This is somehow the source of the weird behavior described in this ticket. The fact that one value had 53 bit of mentissa made it possible to create the object, and I would say lead to the belief that the polyhedron is *well defined*.\n\n```\n\nsage: c = 1.00000000000000\nsage: d = 1.000000000000001\nsage: Polyhedron([[c],[d]])\nA 0-dimensional polyhedron in RDF^1 defined as the convex hull of 1 vertex\n\n```",
    "created_at": "2017-03-17T13:15:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336711",
    "user": "https://github.com/jplab"
}
```

<div id="comment:16" align="right">Comment 16</div>

Further, the warning bugs me a bit...

It does not tell the complete truth about the behaviour: you only need 1 entry to have a 53 bit mentissa to get into floating points not necessary all of them... This is **even** worse I find! This is somehow the source of the weird behavior described in this ticket. The fact that one value had 53 bit of mentissa made it possible to create the object, and I would say lead to the belief that the polyhedron is *well defined*.

```

sage: c = 1.00000000000000
sage: d = 1.000000000000001
sage: Polyhedron([[c],[d]])
A 0-dimensional polyhedron in RDF^1 defined as the convex hull of 1 vertex

```



---

archive/issue_comments_336712.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nI know not everyone is a fan of issuing a warning, but IMHO, I would find it a useful hint to the user if:\n\n- it gave entries with more than 53 bits of mentissa\n- it also gave entries with exactly 53 bits of mentissa (not in `ZZ` or `QQ`)\n\nTo say:\n\nWarning: some entries had more precision than 53 bits and got converted to 53 bits of precision.\n\nThis would not be issued if no entries had more precision than 53 bits.",
    "created_at": "2017-03-17T13:22:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336712",
    "user": "https://github.com/jplab"
}
```

<div id="comment:17" align="right">Comment 17</div>

I know not everyone is a fan of issuing a warning, but IMHO, I would find it a useful hint to the user if:

- it gave entries with more than 53 bits of mentissa
- it also gave entries with exactly 53 bits of mentissa (not in `ZZ` or `QQ`)

To say:

Warning: some entries had more precision than 53 bits and got converted to 53 bits of precision.

This would not be issued if no entries had more precision than 53 bits.



---

archive/issue_events_297148.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2017-04-04T14:38:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297148"
}
```



---

archive/issue_events_297149.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2017-04-04T14:38:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297149"
}
```



---

archive/issue_comments_336713.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nWe should probably add a dependancy to #22605 because the latter touches the constructor and floats...",
    "created_at": "2017-05-04T10:51:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336713",
    "user": "https://github.com/jplab"
}
```

<div id="comment:19" align="right">Comment 19</div>

We should probably add a dependancy to #22605 because the latter touches the constructor and floats...



---

archive/issue_comments_336714.json:
```json
{
    "body": "Dependencies: **#22605**",
    "created_at": "2017-05-04T10:51:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336714",
    "user": "https://github.com/jplab"
}
```

Dependencies: **#22605**



---

archive/issue_comments_336715.json:
```json
{
    "body": "Changed dependencies from **#22605** to none",
    "created_at": "2017-08-19T15:47:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336715",
    "user": "https://github.com/videlec"
}
```

Changed dependencies from **#22605** to none



---

archive/issue_comments_336716.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nThis is indeed fixed in 8.1.beta2 in which #22605 is merged\n\n```\nsage: P=Polyhedron(vertices =[(8.3319544851638732, 7.0567045956967727), (6.4876921900819049, 4.8435898415984129)])\nTraceback (most recent call last):\n...\nValueError: no appropriate backend for computations with Real Field with 57 bits of precision\nsage: P=Polyhedron(vertices =[(8.3319544851638732, 7.0567045956967727), (6.4876921900819049, 4.84358984159841)])\nsage: P\nA 1-dimensional polyhedron in RDF^2 defined as the convex hull of 2 vertices\n```",
    "created_at": "2017-08-19T15:47:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336716",
    "user": "https://github.com/videlec"
}
```

<div id="comment:20" align="right">Comment 20</div>

This is indeed fixed in 8.1.beta2 in which #22605 is merged

```
sage: P=Polyhedron(vertices =[(8.3319544851638732, 7.0567045956967727), (6.4876921900819049, 4.8435898415984129)])
Traceback (most recent call last):
...
ValueError: no appropriate backend for computations with Real Field with 57 bits of precision
sage: P=Polyhedron(vertices =[(8.3319544851638732, 7.0567045956967727), (6.4876921900819049, 4.84358984159841)])
sage: P
A 1-dimensional polyhedron in RDF^2 defined as the convex hull of 2 vertices
```



---

archive/issue_events_297150.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-08-19T15:47:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297150"
}
```



---

archive/issue_events_297151.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-08-19T15:47:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297151"
}
```



---

archive/issue_comments_336717.json:
```json
{
    "body": "Changed commit from **[0ff050f](https://github.com/sagemath/sagetrac-mirror/commit/0ff050f294e1c9112fe5ff686df9f82cf267a61a)** to **[92b9dd0](https://github.com/sagemath/sagetrac-mirror/commit/92b9dd0682ca20c611ab659d0bae0b6fe21f54f1)**",
    "created_at": "2017-08-21T21:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336717",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0ff050f](https://github.com/sagemath/sagetrac-mirror/commit/0ff050f294e1c9112fe5ff686df9f82cf267a61a)** to **[92b9dd0](https://github.com/sagemath/sagetrac-mirror/commit/92b9dd0682ca20c611ab659d0bae0b6fe21f54f1)**



---

archive/issue_comments_336718.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92b9dd0682ca20c611ab659d0bae0b6fe21f54f1\">92b9dd0</a></td><td><code>Merge branch 'u/jipilab/22552' of git://trac.sagemath.org/sage into 22552</code></td></tr></table>\n",
    "created_at": "2017-08-21T21:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336718",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21" align="right">Comment 21</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92b9dd0682ca20c611ab659d0bae0b6fe21f54f1">92b9dd0</a></td><td><code>Merge branch 'u/jipilab/22552' of git://trac.sagemath.org/sage into 22552</code></td></tr></table>




---

archive/issue_comments_336719.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5ff31ec57b9afcc5a799c7ea9a1f3c0a0f0a85c\">c5ff31e</a></td><td><code>Fixed failing tests</code></td></tr></table>\n",
    "created_at": "2017-08-21T22:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336719",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22" align="right">Comment 22</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5ff31ec57b9afcc5a799c7ea9a1f3c0a0f0a85c">c5ff31e</a></td><td><code>Fixed failing tests</code></td></tr></table>




---

archive/issue_comments_336720.json:
```json
{
    "body": "Changed commit from **[92b9dd0](https://github.com/sagemath/sagetrac-mirror/commit/92b9dd0682ca20c611ab659d0bae0b6fe21f54f1)** to **[c5ff31e](https://github.com/sagemath/sagetrac-mirror/commit/c5ff31ec57b9afcc5a799c7ea9a1f3c0a0f0a85c)**",
    "created_at": "2017-08-21T22:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336720",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[92b9dd0](https://github.com/sagemath/sagetrac-mirror/commit/92b9dd0682ca20c611ab659d0bae0b6fe21f54f1)** to **[c5ff31e](https://github.com/sagemath/sagetrac-mirror/commit/c5ff31ec57b9afcc5a799c7ea9a1f3c0a0f0a85c)**



---

archive/issue_events_297152.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2017-08-21T22:08:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297152"
}
```



---

archive/issue_events_297153.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2017-08-21T22:08:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297153"
}
```



---

archive/issue_comments_336721.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nTests seem to pass on 8.1.beta2 but it would be nice to have feedback on the added documentation.",
    "created_at": "2017-08-21T22:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336721",
    "user": "https://github.com/jplab"
}
```

<div id="comment:23" align="right">Comment 23</div>

Tests seem to pass on 8.1.beta2 but it would be nice to have feedback on the added documentation.



---

archive/issue_comments_336722.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nYou should be more explicit about what is meant by precision\n\n```\nsage: (1.1).precision()\n53\nsage: (1.143234134123123).precision()\n54\nsage: (1.14323413412312123).precision()\n60\n```\nIt is **not** the number of digits but closer to `min(53, bits(x))`.",
    "created_at": "2017-08-22T08:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336722",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">Comment 24</div>

You should be more explicit about what is meant by precision

```
sage: (1.1).precision()
53
sage: (1.143234134123123).precision()
54
sage: (1.14323413412312123).precision()
60
```
It is **not** the number of digits but closer to `min(53, bits(x))`.



---

archive/issue_comments_336723.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nThis is not the syntax for test blocks\n\n```\n.. TESTS:\n```\nsee http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings",
    "created_at": "2017-08-22T08:45:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336723",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">Comment 25</div>

This is not the syntax for test blocks

```
.. TESTS:
```
see http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings



---

archive/issue_comments_336724.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nSince there is four examples in the examples, I don't see why the 'TESTS' section is relevant in your commit.",
    "created_at": "2017-08-22T08:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336724",
    "user": "https://github.com/videlec"
}
```

<div id="comment:26" align="right">Comment 26</div>

Since there is four examples in the examples, I don't see why the 'TESTS' section is relevant in your commit.



---

archive/issue_events_297154.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-08-22T08:48:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297154"
}
```



---

archive/issue_events_297155.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-08-22T08:48:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297155"
}
```



---

archive/issue_comments_336725.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2017-08-22T08:48:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336725",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_336726.json:
```json
{
    "body": "Changed keywords from **base ring, polyhedron** to **base ring, polyhedron, days88, IMA coding sprints**",
    "created_at": "2017-08-22T08:48:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336726",
    "user": "https://github.com/videlec"
}
```

Changed keywords from **base ring, polyhedron** to **base ring, polyhedron, days88, IMA coding sprints**



---

archive/issue_comments_336727.json:
```json
{
    "body": "Changed commit from **[c5ff31e](https://github.com/sagemath/sagetrac-mirror/commit/c5ff31ec57b9afcc5a799c7ea9a1f3c0a0f0a85c)** to **[50cb0c7](https://github.com/sagemath/sagetrac-mirror/commit/50cb0c75e937237d4889272dc2da84bce2108b26)**",
    "created_at": "2017-08-22T15:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336727",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c5ff31e](https://github.com/sagemath/sagetrac-mirror/commit/c5ff31ec57b9afcc5a799c7ea9a1f3c0a0f0a85c)** to **[50cb0c7](https://github.com/sagemath/sagetrac-mirror/commit/50cb0c75e937237d4889272dc2da84bce2108b26)**



---

archive/issue_comments_336728.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50cb0c75e937237d4889272dc2da84bce2108b26\">50cb0c7</a></td><td><code>Clarified precision and moved tests</code></td></tr></table>\n",
    "created_at": "2017-08-22T15:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336728",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28" align="right">Comment 28</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50cb0c75e937237d4889272dc2da84bce2108b26">50cb0c7</a></td><td><code>Clarified precision and moved tests</code></td></tr></table>




---

archive/issue_comments_336729.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nDear Vincent,\n\nI made some corrections addressing your comments. Have a look.",
    "created_at": "2017-08-22T15:13:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336729",
    "user": "https://github.com/jplab"
}
```

<div id="comment:29" align="right">Comment 29</div>

Dear Vincent,

I made some corrections addressing your comments. Have a look.



---

archive/issue_events_297156.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2017-08-22T15:14:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297156"
}
```



---

archive/issue_events_297157.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2017-08-22T15:14:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297157"
}
```



---

archive/issue_comments_336730.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nThis sentence is definitely too complicated\n\n```\nIf the input consists of decimal numbers and the `base_ring`\nis not specified, the base ring is set to be the `RealField`\nwith the precision given by the minimal bit precision of the\ninput and 53 (the precision of `RDF`). Then, if the obtained\nminimum was 53 bits of precision, the constructor converts\nautomatically the base ring to `RDF`. Otherwise, it returns an error\n```\nI would try to be more informative\n\n```\nBe careful when you construct polyhedra with floating point\nnumbers. The only available backend for such computation is\n`cdd` which uses machine floating point numbers which have\nhave limited precision (24 bits on 32 bits architecture and\n53 bits on 64 bits architecture). Sage behavior \n... etc ... \n```\n\nBTW, what is happening on 32 bits?",
    "created_at": "2017-08-22T15:27:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336730",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">Comment 31</div>

This sentence is definitely too complicated

```
If the input consists of decimal numbers and the `base_ring`
is not specified, the base ring is set to be the `RealField`
with the precision given by the minimal bit precision of the
input and 53 (the precision of `RDF`). Then, if the obtained
minimum was 53 bits of precision, the constructor converts
automatically the base ring to `RDF`. Otherwise, it returns an error
```
I would try to be more informative

```
Be careful when you construct polyhedra with floating point
numbers. The only available backend for such computation is
`cdd` which uses machine floating point numbers which have
have limited precision (24 bits on 32 bits architecture and
53 bits on 64 bits architecture). Sage behavior 
... etc ... 
```

BTW, what is happening on 32 bits?



---

archive/issue_comments_336731.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\n> BTW, what is happening on 32 bits?\n\nIt seems that binary64 format from\n\nhttps://en.wikipedia.org/wiki/IEEE_754\n\nhas 53 bits of precision no matter if it was compiled in 32 or 64 bits processors. I'm no expert here but it seems to be safe to say that a `Double` has 53 bits in 32 and 64 bits.",
    "created_at": "2017-08-22T19:09:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336731",
    "user": "https://github.com/jplab"
}
```

<div id="comment:32" align="right">Comment 32</div>

> BTW, what is happening on 32 bits?

It seems that binary64 format from

https://en.wikipedia.org/wiki/IEEE_754

has 53 bits of precision no matter if it was compiled in 32 or 64 bits processors. I'm no expert here but it seems to be safe to say that a `Double` has 53 bits in 32 and 64 bits.



---

archive/issue_comments_336732.json:
```json
{
    "body": "Changed commit from **[50cb0c7](https://github.com/sagemath/sagetrac-mirror/commit/50cb0c75e937237d4889272dc2da84bce2108b26)** to **[ee54e30](https://github.com/sagemath/sagetrac-mirror/commit/ee54e3008b6fa52797892527ed0f0775ee707e9e)**",
    "created_at": "2017-08-22T20:42:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336732",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[50cb0c7](https://github.com/sagemath/sagetrac-mirror/commit/50cb0c75e937237d4889272dc2da84bce2108b26)** to **[ee54e30](https://github.com/sagemath/sagetrac-mirror/commit/ee54e3008b6fa52797892527ed0f0775ee707e9e)**



---

archive/issue_comments_336733.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee54e3008b6fa52797892527ed0f0775ee707e9e\">ee54e30</a></td><td><code>Rephrased and made it into a warning</code></td></tr></table>\n",
    "created_at": "2017-08-22T20:42:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336733",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33" align="right">Comment 33</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee54e3008b6fa52797892527ed0f0775ee707e9e">ee54e30</a></td><td><code>Rephrased and made it into a warning</code></td></tr></table>




---

archive/issue_comments_336734.json:
```json
{
    "body": "Changed commit from **[ee54e30](https://github.com/sagemath/sagetrac-mirror/commit/ee54e3008b6fa52797892527ed0f0775ee707e9e)** to **[150c7df](https://github.com/sagemath/sagetrac-mirror/commit/150c7df7962e6ddb06583511e907c1cf6606b863)**",
    "created_at": "2017-08-22T22:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336734",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[ee54e30](https://github.com/sagemath/sagetrac-mirror/commit/ee54e3008b6fa52797892527ed0f0775ee707e9e)** to **[150c7df](https://github.com/sagemath/sagetrac-mirror/commit/150c7df7962e6ddb06583511e907c1cf6606b863)**



---

archive/issue_comments_336735.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nA (bad) undocumented feature\n\n```\nsage: Polyhedron(vertices =[(8.3319544851638732, 7.0567045956967727), (6.4876921900819049, 4.8435898415984129)], base_ring=RR)\nA 1-dimensional polyhedron in RDF^2 defined as the convex hull of 2 vertices\n```\n\nAs agreed with JP, I wrote a commit that makes the above an error.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/150c7df7962e6ddb06583511e907c1cf6606b863\">150c7df</a></td><td><code>22552: disallow base_ring=RealField(n)</code></td></tr></table>\n",
    "created_at": "2017-08-22T22:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336735",
    "user": "https://github.com/videlec"
}
```

<div id="comment:34" align="right">Comment 34</div>

A (bad) undocumented feature

```
sage: Polyhedron(vertices =[(8.3319544851638732, 7.0567045956967727), (6.4876921900819049, 4.8435898415984129)], base_ring=RR)
A 1-dimensional polyhedron in RDF^2 defined as the convex hull of 2 vertices
```

As agreed with JP, I wrote a commit that makes the above an error.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/150c7df7962e6ddb06583511e907c1cf6606b863">150c7df</a></td><td><code>22552: disallow base_ring=RealField(n)</code></td></tr></table>




---

archive/issue_comments_336736.json:
```json
{
    "body": "Changed branch from **[u/jipilab/22552](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/22552)** to **[u/vdelecroix/22552](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22552)**",
    "created_at": "2017-08-22T22:41:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336736",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/jipilab/22552](https://github.com/sagemath/sagetrac-mirror/tree/u/jipilab/22552)** to **[u/vdelecroix/22552](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22552)**



---

archive/issue_events_297158.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2017-08-23T20:52:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297158"
}
```



---

archive/issue_events_297159.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2017-08-23T20:52:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297159"
}
```



---

archive/issue_comments_336737.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nThe last changes look good to me. I give my green light on the last changes.",
    "created_at": "2017-08-23T20:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336737",
    "user": "https://github.com/jplab"
}
```

<div id="comment:35" align="right">Comment 35</div>

The last changes look good to me. I give my green light on the last changes.



---

archive/issue_events_297160.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-09-10T11:56:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297160"
}
```



---

archive/issue_events_297161.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "52425f5e7df62e31cfc42c7db0bcd44b1d8deed5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-09-10T11:56:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22552#event-297161"
}
```



---

archive/issue_comments_336738.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/22552](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22552)** to **[150c7df](https://github.com/sagemath/sagetrac-mirror/commit/150c7df7962e6ddb06583511e907c1cf6606b863)**",
    "created_at": "2017-09-10T11:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22552#issuecomment-336738",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vdelecroix/22552](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22552)** to **[150c7df](https://github.com/sagemath/sagetrac-mirror/commit/150c7df7962e6ddb06583511e907c1cf6606b863)**
