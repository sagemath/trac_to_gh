# Issue 22444: ipy install: Fix very incomplete logic in symlink()

archive/issues_022207.json:
```json
{
    "body": "Otherwise these doctests fail when running them post-install on Debian. But I figured fixing the logic was better than simply disabling the tests.\n\n\n**CC:**  @orlitzky\n\n**Branch:** [u/saraedum/22444](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/22444)\n\n**Commit:** [e06a77391e0b45cee149b8a10add28773e814bb0](https://github.com/sagemath/sagetrac-mirror/commit/e06a77391e0b45cee149b8a10add28773e814bb0)\n\n**Reviewer:** Vincent Delecroix\n\n**Author:** Ximin Luo, Julian R\u00fcth\n\nIssue created by migration from https://trac.sagemath.org/ticket/22444\n\n",
    "created_at": "2017-02-25T15:33:32Z",
    "labels": [
        "component: build",
        "minor",
        "bug",
        "needs review"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "title": "ipy install: Fix very incomplete logic in symlink()",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/22444",
    "user": "https://github.com/infinity0"
}
```
Otherwise these doctests fail when running them post-install on Debian. But I figured fixing the logic was better than simply disabling the tests.


**CC:**  @orlitzky

**Branch:** [u/saraedum/22444](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/22444)

**Commit:** [e06a77391e0b45cee149b8a10add28773e814bb0](https://github.com/sagemath/sagetrac-mirror/commit/e06a77391e0b45cee149b8a10add28773e814bb0)

**Reviewer:** Vincent Delecroix

**Author:** Ximin Luo, Julian Rüth

Issue created by migration from https://trac.sagemath.org/ticket/22444





---

archive/issue_comments_334657.json:
```json
{
    "body": "**Branch:** [u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)",
    "created_at": "2017-02-25T15:33:58Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334657",
    "user": "https://github.com/infinity0"
}
```

**Branch:** [u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)



---

archive/issue_comments_334658.json:
```json
{
    "body": "**Author:** Ximin Luo",
    "created_at": "2017-02-25T15:35:17Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334658",
    "user": "https://github.com/infinity0"
}
```

**Author:** Ximin Luo



---

archive/issue_events_200357.json:
```json
{
    "actor": "https://github.com/infinity0",
    "created_at": "2017-02-25T15:35:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "minor",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-200357"
}
```



---

archive/issue_events_200358.json:
```json
{
    "actor": "https://github.com/infinity0",
    "created_at": "2017-02-25T15:35:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "bug",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-200358"
}
```



---

archive/issue_events_200359.json:
```json
{
    "actor": "https://github.com/infinity0",
    "created_at": "2017-02-25T15:35:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "component: build",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-200359"
}
```



---

archive/issue_comments_334659.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n+Otherwise these doctests fail when running them post-install on Debian. But I figured fixing the logic was better than simply disabling the tests.\n \n``````\n",
    "created_at": "2017-02-25T15:35:17Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334659",
    "user": "https://github.com/infinity0"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,2 @@
+Otherwise these doctests fail when running them post-install on Debian. But I figured fixing the logic was better than simply disabling the tests.
 
``````




---

archive/issue_events_200360.json:
```json
{
    "actor": "https://github.com/infinity0",
    "created_at": "2017-02-25T15:35:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-200360"
}
```



---

archive/issue_comments_334660.json:
```json
{
    "body": "**Changing branch** from \"[u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)\" to \"\".",
    "created_at": "2017-02-25T15:35:17Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334660",
    "user": "https://github.com/infinity0"
}
```

**Changing branch** from "[u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)" to "".



---

archive/issue_comments_334661.json:
```json
{
    "body": "<a id='comment:3'></a>\nHi,\n\nThe branch in this one was unset!?",
    "created_at": "2017-02-25T17:21:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334661",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>
Hi,

The branch in this one was unset!?



---

archive/issue_comments_334662.json:
```json
{
    "body": "**Branch:** [u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)",
    "created_at": "2017-02-25T17:28:10Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334662",
    "user": "https://github.com/infinity0"
}
```

**Branch:** [u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)



---

archive/issue_comments_334663.json:
```json
{
    "body": "**Commit:** [de026596990d0fde8ab18cb3bf095488adad44b1](https://github.com/sagemath/sagetrac-mirror/commit/de026596990d0fde8ab18cb3bf095488adad44b1)",
    "created_at": "2017-02-25T17:28:10Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334663",
    "user": "https://github.com/infinity0"
}
```

**Commit:** [de026596990d0fde8ab18cb3bf095488adad44b1](https://github.com/sagemath/sagetrac-mirror/commit/de026596990d0fde8ab18cb3bf095488adad44b1)



---

archive/issue_comments_334664.json:
```json
{
    "body": "<a id='comment:4'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de026596990d0fde8ab18cb3bf095488adad44b1\">de02659</a></td><td><code>Fix very incomplete logic in symlink()</code></td></tr></table>\n",
    "created_at": "2017-02-25T17:28:10Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334664",
    "user": "https://github.com/infinity0"
}
```

<a id='comment:4'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de026596990d0fde8ab18cb3bf095488adad44b1">de02659</a></td><td><code>Fix very incomplete logic in symlink()</code></td></tr></table>




---

archive/issue_comments_334665.json:
```json
{
    "body": "<a id='comment:5'></a>\nPing?",
    "created_at": "2017-03-11T17:22:38Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334665",
    "user": "https://github.com/infinity0"
}
```

<a id='comment:5'></a>
Ping?



---

archive/issue_comments_334666.json:
```json
{
    "body": "<a id='comment:6'></a>\nIf you want to check whether two directories are equal, the simplest way is [os.path.samefile](https://docs.python.org/2/library/os.path.html#os.path.samefile) which is exactly meant for that.",
    "created_at": "2017-06-21T14:58:23Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334666",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
If you want to check whether two directories are equal, the simplest way is [os.path.samefile](https://docs.python.org/2/library/os.path.html#os.path.samefile) which is exactly meant for that.



---

archive/issue_events_200361.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-21T14:58:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-200361"
}
```



---

archive/issue_events_200362.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-21T14:58:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-200362"
}
```



---

archive/issue_comments_334667.json:
```json
{
    "body": "**Changing branch** from \"[u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)\" to \"[u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__)\".",
    "created_at": "2018-04-01T20:35:51Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334667",
    "user": "https://github.com/saraedum"
}
```

**Changing branch** from "[u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)" to "[u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__)".



---

archive/issue_events_200363.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-01T20:38:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-200363"
}
```



---

archive/issue_events_200364.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-01T20:38:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-200364"
}
```



---

archive/issue_comments_334668.json:
```json
{
    "body": "**Changing author** from \"Ximin Luo\" to \"Ximin Luo, Julian R\u00fcth\".",
    "created_at": "2018-04-01T20:38:13Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334668",
    "user": "https://github.com/saraedum"
}
```

**Changing author** from "Ximin Luo" to "Ximin Luo, Julian Rüth".



---

archive/issue_comments_334669.json:
```json
{
    "body": "**Changing commit** from \"[de026596990d0fde8ab18cb3bf095488adad44b1](https://github.com/sagemath/sagetrac-mirror/commit/de026596990d0fde8ab18cb3bf095488adad44b1)\" to \"[0ba2c834891900ec8a2270e072d6bce9f1cac363](https://github.com/sagemath/sagetrac-mirror/commit/0ba2c834891900ec8a2270e072d6bce9f1cac363)\".",
    "created_at": "2018-04-01T20:38:13Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334669",
    "user": "https://github.com/saraedum"
}
```

**Changing commit** from "[de026596990d0fde8ab18cb3bf095488adad44b1](https://github.com/sagemath/sagetrac-mirror/commit/de026596990d0fde8ab18cb3bf095488adad44b1)" to "[0ba2c834891900ec8a2270e072d6bce9f1cac363](https://github.com/sagemath/sagetrac-mirror/commit/0ba2c834891900ec8a2270e072d6bce9f1cac363)".



---

archive/issue_comments_334670.json:
```json
{
    "body": "<a id='comment:8'></a>\nI tried to use `samefile`. I couldn't run doctests locally cause my Sage is rebuilding. Let's see what the patchbot thinks about this.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ba2c834891900ec8a2270e072d6bce9f1cac363\">0ba2c83</a></td><td><code>Fix symlink test cases for distributions</code></td></tr></table>\n",
    "created_at": "2018-04-01T20:38:13Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334670",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:8'></a>
I tried to use `samefile`. I couldn't run doctests locally cause my Sage is rebuilding. Let's see what the patchbot thinks about this.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ba2c834891900ec8a2270e072d6bce9f1cac363">0ba2c83</a></td><td><code>Fix symlink test cases for distributions</code></td></tr></table>




---

archive/issue_comments_334671.json:
```json
{
    "body": "**Changing commit** from \"[0ba2c834891900ec8a2270e072d6bce9f1cac363](https://github.com/sagemath/sagetrac-mirror/commit/0ba2c834891900ec8a2270e072d6bce9f1cac363)\" to \"[7d4b2cba4725d72652d5ba98bc27c5fdc089fca4](https://github.com/sagemath/sagetrac-mirror/commit/7d4b2cba4725d72652d5ba98bc27c5fdc089fca4)\".",
    "created_at": "2018-04-21T20:21:39Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334671",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0ba2c834891900ec8a2270e072d6bce9f1cac363](https://github.com/sagemath/sagetrac-mirror/commit/0ba2c834891900ec8a2270e072d6bce9f1cac363)" to "[7d4b2cba4725d72652d5ba98bc27c5fdc089fca4](https://github.com/sagemath/sagetrac-mirror/commit/7d4b2cba4725d72652d5ba98bc27c5fdc089fca4)".



---

archive/issue_comments_334672.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbbb9fdd6b18332c716baf153843cd98d904c91c\">cbbb9fd</a></td><td><code>Use variable names as in os.symlink</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d4b2cba4725d72652d5ba98bc27c5fdc089fca4\">7d4b2cb</a></td><td><code>More detailed error handling for symlink</code></td></tr></table>\n",
    "created_at": "2018-04-21T20:21:39Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334672",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbbb9fdd6b18332c716baf153843cd98d904c91c">cbbb9fd</a></td><td><code>Use variable names as in os.symlink</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d4b2cba4725d72652d5ba98bc27c5fdc089fca4">7d4b2cb</a></td><td><code>More detailed error handling for symlink</code></td></tr></table>




---

archive/issue_comments_334673.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8db83ecdaab7e1ea06671e5c54adb63a2937ff36\">8db83ec</a></td><td><code>Merge remote-tracking branch 'trac/develop' into t/22444/ipy_install__fix_very_incomplete_logic_in_symlink__</code></td></tr></table>\n",
    "created_at": "2018-04-21T20:22:20Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334673",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8db83ecdaab7e1ea06671e5c54adb63a2937ff36">8db83ec</a></td><td><code>Merge remote-tracking branch 'trac/develop' into t/22444/ipy_install__fix_very_incomplete_logic_in_symlink__</code></td></tr></table>




---

archive/issue_comments_334674.json:
```json
{
    "body": "**Changing commit** from \"[7d4b2cba4725d72652d5ba98bc27c5fdc089fca4](https://github.com/sagemath/sagetrac-mirror/commit/7d4b2cba4725d72652d5ba98bc27c5fdc089fca4)\" to \"[8db83ecdaab7e1ea06671e5c54adb63a2937ff36](https://github.com/sagemath/sagetrac-mirror/commit/8db83ecdaab7e1ea06671e5c54adb63a2937ff36)\".",
    "created_at": "2018-04-21T20:22:20Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334674",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7d4b2cba4725d72652d5ba98bc27c5fdc089fca4](https://github.com/sagemath/sagetrac-mirror/commit/7d4b2cba4725d72652d5ba98bc27c5fdc089fca4)" to "[8db83ecdaab7e1ea06671e5c54adb63a2937ff36](https://github.com/sagemath/sagetrac-mirror/commit/8db83ecdaab7e1ea06671e5c54adb63a2937ff36)".



---

archive/issue_comments_334675.json:
```json
{
    "body": "**Changing commit** from \"[8db83ecdaab7e1ea06671e5c54adb63a2937ff36](https://github.com/sagemath/sagetrac-mirror/commit/8db83ecdaab7e1ea06671e5c54adb63a2937ff36)\" to \"[8d01e6d108e6b759a5bea841d072708f58db3183](https://github.com/sagemath/sagetrac-mirror/commit/8d01e6d108e6b759a5bea841d072708f58db3183)\".",
    "created_at": "2018-04-25T17:53:32Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334675",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8db83ecdaab7e1ea06671e5c54adb63a2937ff36](https://github.com/sagemath/sagetrac-mirror/commit/8db83ecdaab7e1ea06671e5c54adb63a2937ff36)" to "[8d01e6d108e6b759a5bea841d072708f58db3183](https://github.com/sagemath/sagetrac-mirror/commit/8d01e6d108e6b759a5bea841d072708f58db3183)".



---

archive/issue_comments_334676.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d01e6d108e6b759a5bea841d072708f58db3183\">8d01e6d</a></td><td><code>os.path.samefile() requires the files to exist</code></td></tr></table>\n",
    "created_at": "2018-04-25T17:53:32Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334676",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d01e6d108e6b759a5bea841d072708f58db3183">8d01e6d</a></td><td><code>os.path.samefile() requires the files to exist</code></td></tr></table>




---

archive/issue_comments_334677.json:
```json
{
    "body": "**Changing commit** from \"[8d01e6d108e6b759a5bea841d072708f58db3183](https://github.com/sagemath/sagetrac-mirror/commit/8d01e6d108e6b759a5bea841d072708f58db3183)\" to \"[09c560a5b0a7012407ffa661166875c054312c99](https://github.com/sagemath/sagetrac-mirror/commit/09c560a5b0a7012407ffa661166875c054312c99)\".",
    "created_at": "2018-04-29T17:39:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334677",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8d01e6d108e6b759a5bea841d072708f58db3183](https://github.com/sagemath/sagetrac-mirror/commit/8d01e6d108e6b759a5bea841d072708f58db3183)" to "[09c560a5b0a7012407ffa661166875c054312c99](https://github.com/sagemath/sagetrac-mirror/commit/09c560a5b0a7012407ffa661166875c054312c99)".



---

archive/issue_comments_334678.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09c560a5b0a7012407ffa661166875c054312c99\">09c560a</a></td><td><code>fix typo</code></td></tr></table>\n",
    "created_at": "2018-04-29T17:39:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334678",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09c560a5b0a7012407ffa661166875c054312c99">09c560a</a></td><td><code>fix typo</code></td></tr></table>




---

archive/issue_comments_334679.json:
```json
{
    "body": "<a id='comment:13'></a>\nIf `errno.EEXIST` can not happen, then it would better be deleted and handled by the `else`.\n\nI don't like the default\n\n```\n    else:\n        # Something that we did not expect happened.\n        # Let's hope for the best, and let symlink fail with an error\n        # that is easier to debug.\n        pass\n```\nShouldn't a `raise RuntimeError` be more appropriate?",
    "created_at": "2018-05-13T09:35:09Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334679",
    "user": "https://github.com/videlec"
}
```

<a id='comment:13'></a>
If `errno.EEXIST` can not happen, then it would better be deleted and handled by the `else`.

I don't like the default

```
    else:
        # Something that we did not expect happened.
        # Let's hope for the best, and let symlink fail with an error
        # that is easier to debug.
        pass
```
Shouldn't a `raise RuntimeError` be more appropriate?



---

archive/issue_events_200365.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-13T09:35:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-200365"
}
```



---

archive/issue_events_200366.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-13T09:35:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-200366"
}
```



---

archive/issue_comments_334680.json:
```json
{
    "body": "**Reviewer:** Vincent Delecroix",
    "created_at": "2018-05-13T09:35:09Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334680",
    "user": "https://github.com/videlec"
}
```

**Reviewer:** Vincent Delecroix



---

archive/issue_events_200367.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-13T09:35:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-200367"
}
```



---

archive/issue_events_200368.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-13T09:35:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-200368"
}
```



---

archive/issue_comments_334681.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [@videlec](#comment%3A13):\n> If `errno.EEXIST` can not happen, then it would better be deleted and handled by the `else`.\n\nI guess it's there for a reason. I do not want to break the installation on some obscure platform.\n\n> I don't like the default\n> \n> ```\n>     else:\n>         # Something that we did not expect happened.\n>         # Let's hope for the best, and let symlink fail with an error\n>         # that is easier to debug.\n>         pass\n> ```\n> Shouldn't a `raise RuntimeError` be more appropriate?\n\nWhy? If symlink works, then we don't care. If it fails, then it is going to produce a good error message on its own.",
    "created_at": "2018-05-14T12:48:08Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334681",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:14'></a>
Replying to [@videlec](#comment%3A13):
> If `errno.EEXIST` can not happen, then it would better be deleted and handled by the `else`.

I guess it's there for a reason. I do not want to break the installation on some obscure platform.

> I don't like the default
> 
> ```
>     else:
>         # Something that we did not expect happened.
>         # Let's hope for the best, and let symlink fail with an error
>         # that is easier to debug.
>         pass
> ```
> Shouldn't a `raise RuntimeError` be more appropriate?

Why? If symlink works, then we don't care. If it fails, then it is going to produce a good error message on its own.



---

archive/issue_events_200369.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-05-14T12:48:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-200369"
}
```



---

archive/issue_events_200370.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-05-14T12:48:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-200370"
}
```



---

archive/issue_comments_334682.json:
```json
{
    "body": "**Changing branch** from \"[u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__)\" to \"\".",
    "created_at": "2018-05-18T22:11:57Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334682",
    "user": "https://github.com/saraedum"
}
```

**Changing branch** from "[u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__)" to "".



---

archive/issue_comments_334683.json:
```json
{
    "body": "**Changing commit** from \"[09c560a5b0a7012407ffa661166875c054312c99](https://github.com/sagemath/sagetrac-mirror/commit/09c560a5b0a7012407ffa661166875c054312c99)\" to \"\".",
    "created_at": "2018-05-18T22:11:57Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334683",
    "user": "https://github.com/saraedum"
}
```

**Changing commit** from "[09c560a5b0a7012407ffa661166875c054312c99](https://github.com/sagemath/sagetrac-mirror/commit/09c560a5b0a7012407ffa661166875c054312c99)" to "".



---

archive/issue_comments_334684.json:
```json
{
    "body": "**Branch:** [u/saraedum/22444](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/22444)",
    "created_at": "2018-05-18T22:17:27Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334684",
    "user": "https://github.com/saraedum"
}
```

**Branch:** [u/saraedum/22444](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/22444)



---

archive/issue_comments_334685.json:
```json
{
    "body": "**Commit:** [5da8703e1df0403e3e5b4a0581b7ee57e2b4098c](https://github.com/sagemath/sagetrac-mirror/commit/5da8703e1df0403e3e5b4a0581b7ee57e2b4098c)",
    "created_at": "2018-06-21T10:01:48Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334685",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [5da8703e1df0403e3e5b4a0581b7ee57e2b4098c](https://github.com/sagemath/sagetrac-mirror/commit/5da8703e1df0403e3e5b4a0581b7ee57e2b4098c)



---

archive/issue_comments_334686.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5da8703e1df0403e3e5b4a0581b7ee57e2b4098c\">5da8703</a></td><td><code>Merge 22444 and trac/develop</code></td></tr></table>\n",
    "created_at": "2018-06-21T10:01:48Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334686",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5da8703e1df0403e3e5b4a0581b7ee57e2b4098c">5da8703</a></td><td><code>Merge 22444 and trac/develop</code></td></tr></table>




---

archive/issue_comments_334687.json:
```json
{
    "body": "<a id='comment:19'></a>\nvdelecroix, could I ask you to have another look here/comment on my replies to your remarks?",
    "created_at": "2018-06-21T10:03:22Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334687",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:19'></a>
vdelecroix, could I ask you to have another look here/comment on my replies to your remarks?



---

archive/issue_comments_334688.json:
```json
{
    "body": "**Changing commit** from \"[5da8703e1df0403e3e5b4a0581b7ee57e2b4098c](https://github.com/sagemath/sagetrac-mirror/commit/5da8703e1df0403e3e5b4a0581b7ee57e2b4098c)\" to \"[e06a77391e0b45cee149b8a10add28773e814bb0](https://github.com/sagemath/sagetrac-mirror/commit/e06a77391e0b45cee149b8a10add28773e814bb0)\".",
    "created_at": "2018-07-04T16:05:03Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334688",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5da8703e1df0403e3e5b4a0581b7ee57e2b4098c](https://github.com/sagemath/sagetrac-mirror/commit/5da8703e1df0403e3e5b4a0581b7ee57e2b4098c)" to "[e06a77391e0b45cee149b8a10add28773e814bb0](https://github.com/sagemath/sagetrac-mirror/commit/e06a77391e0b45cee149b8a10add28773e814bb0)".



---

archive/issue_comments_334689.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e06a77391e0b45cee149b8a10add28773e814bb0\">e06a773</a></td><td><code>Merge develop and 22444</code></td></tr></table>\n",
    "created_at": "2018-07-04T16:05:03Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334689",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e06a77391e0b45cee149b8a10add28773e814bb0">e06a773</a></td><td><code>Merge develop and 22444</code></td></tr></table>




---

archive/issue_comments_334690.json:
```json
{
    "body": "<a id='comment:21'></a>\nThere is one failing doctest that is totally unrelated, so this is ready for review.",
    "created_at": "2018-07-07T14:17:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334690",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:21'></a>
There is one failing doctest that is totally unrelated, so this is ready for review.



---

archive/issue_comments_334691.json:
```json
{
    "body": "<a id='comment:22'></a>\nThe Cygwin patchbot failed, but that's because it cannot build mpir for some reason. Nothing that happened in this ticket I think.",
    "created_at": "2018-07-28T12:30:37Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334691",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:22'></a>
The Cygwin patchbot failed, but that's because it cannot build mpir for some reason. Nothing that happened in this ticket I think.



---

archive/issue_comments_334692.json:
```json
{
    "body": "<a id='comment:23'></a>\nCould you remind me what this ticket is trying to fix?",
    "created_at": "2019-02-01T16:56:48Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334692",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
Could you remind me what this ticket is trying to fix?



---

archive/issue_comments_334693.json:
```json
{
    "body": "<a id='comment:24'></a>\nAlso: instead of parsing a bunch of `errno` values, I prefer to check behavior (i.e. does file X exist?).",
    "created_at": "2019-02-01T16:58:43Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334693",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>
Also: instead of parsing a bunch of `errno` values, I prefer to check behavior (i.e. does file X exist?).



---

archive/issue_comments_334694.json:
```json
{
    "body": "<a id='comment:25'></a>\nIs this still an issue? The patch still applies and mostly looks good to me, although I don't think we should `pass` on an unexpected `OSError`. I'd rather see the real problem than whatever additionally goes wrong when we try to `os.symlink()` it. Eventually, we will have collected the full range of possible `OSError` in the list with explanations for why we re-raise or ignore them.",
    "created_at": "2021-12-01T01:15:10Z",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-334694",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:25'></a>
Is this still an issue? The patch still applies and mostly looks good to me, although I don't think we should `pass` on an unexpected `OSError`. I'd rather see the real problem than whatever additionally goes wrong when we try to `os.symlink()` it. Eventually, we will have collected the full range of possible `OSError` in the list with explanations for why we re-raise or ignore them.
