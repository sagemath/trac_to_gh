# Issue 22444: ipy install: Fix very incomplete logic in symlink()

archive/issues_022207.json:
```json
{
    "assignees": [],
    "body": "Otherwise these doctests fail when running them post-install on Debian. But I figured fixing the logic was better than simply disabling the tests.\n\n\nCC:  @orlitzky\n\nBranch/Commit: **[u/saraedum/22444](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/22444) @ [`e06a773`](https://github.com/sagemath/sagetrac-mirror/commit/e06a77391e0b45cee149b8a10add28773e814bb0)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Ximin Luo, Julian R\u00fcth**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22444_\n\n",
    "created_at": "2017-02-25T15:33:32Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/needs%20review"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "ipy install: Fix very incomplete logic in symlink()",
    "type": "issue",
    "updated_at": "2022-12-29T01:41:45Z",
    "url": "https://github.com/sagemath/sage/issues/22444",
    "user": "https://github.com/infinity0"
}
```
Otherwise these doctests fail when running them post-install on Debian. But I figured fixing the logic was better than simply disabling the tests.


CC:  @orlitzky

Branch/Commit: **[u/saraedum/22444](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/22444) @ [`e06a773`](https://github.com/sagemath/sagetrac-mirror/commit/e06a77391e0b45cee149b8a10add28773e814bb0)**

Reviewer: **Vincent Delecroix**

Author: **Ximin Luo, Julian Rüth**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/22444_





---

archive/issue_events_310951.json:
```json
{
    "actor": "https://github.com/infinity0",
    "created_at": "2017-02-25T15:33:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310951"
}
```



---

archive/issue_events_310952.json:
```json
{
    "actor": "https://github.com/infinity0",
    "created_at": "2017-02-25T15:33:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310952"
}
```



---

archive/issue_comments_332078.json:
```json
{
    "body": "Branch: **[u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)**",
    "created_at": "2017-02-25T15:33:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332078",
    "user": "https://github.com/infinity0"
}
```

Branch: **[u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)**



---

archive/issue_events_310953.json:
```json
{
    "actor": "https://github.com/infinity0",
    "created_at": "2017-02-25T15:35:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310953"
}
```



---

archive/issue_comments_332079.json:
```json
{
    "body": "Changed branch from **[u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)** to none",
    "created_at": "2017-02-25T15:35:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332079",
    "user": "https://github.com/infinity0"
}
```

Changed branch from **[u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)** to none



---

archive/issue_events_310954.json:
```json
{
    "actor": "https://github.com/infinity0",
    "created_at": "2017-02-25T15:35:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310954"
}
```



---

archive/issue_events_310955.json:
```json
{
    "actor": "https://github.com/infinity0",
    "created_at": "2017-02-25T15:35:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310955"
}
```



---

archive/issue_events_310956.json:
```json
{
    "actor": "https://github.com/infinity0",
    "created_at": "2017-02-25T15:35:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310956"
}
```



---

archive/issue_events_310957.json:
```json
{
    "actor": "https://github.com/infinity0",
    "created_at": "2017-02-25T15:35:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310957"
}
```



---

archive/issue_comments_332080.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n+Otherwise these doctests fail when running them post-install on Debian. But I figured fixing the logic was better than simply disabling the tests.\n \n``````\n",
    "created_at": "2017-02-25T15:35:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332080",
    "user": "https://github.com/infinity0"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,2 @@
+Otherwise these doctests fail when running them post-install on Debian. But I figured fixing the logic was better than simply disabling the tests.
 
``````




---

archive/issue_comments_332081.json:
```json
{
    "body": "Author: **Ximin Luo**",
    "created_at": "2017-02-25T15:35:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332081",
    "user": "https://github.com/infinity0"
}
```

Author: **Ximin Luo**



---

archive/issue_comments_332082.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nHi,\n\nThe branch in this one was unset!?",
    "created_at": "2017-02-25T17:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332082",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

Hi,

The branch in this one was unset!?



---

archive/issue_comments_332083.json:
```json
{
    "body": "Commit: **[`de02659`](https://github.com/sagemath/sagetrac-mirror/commit/de026596990d0fde8ab18cb3bf095488adad44b1)**",
    "created_at": "2017-02-25T17:28:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332083",
    "user": "https://github.com/infinity0"
}
```

Commit: **[`de02659`](https://github.com/sagemath/sagetrac-mirror/commit/de026596990d0fde8ab18cb3bf095488adad44b1)**



---

archive/issue_comments_332084.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de026596990d0fde8ab18cb3bf095488adad44b1\"><code>de02659</code></a></td><td><code>Fix very incomplete logic in symlink()</code></td></tr></table>\n",
    "created_at": "2017-02-25T17:28:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332084",
    "user": "https://github.com/infinity0"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de026596990d0fde8ab18cb3bf095488adad44b1"><code>de02659</code></a></td><td><code>Fix very incomplete logic in symlink()</code></td></tr></table>




---

archive/issue_comments_332085.json:
```json
{
    "body": "Branch: **[u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)**",
    "created_at": "2017-02-25T17:28:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332085",
    "user": "https://github.com/infinity0"
}
```

Branch: **[u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)**



---

archive/issue_comments_332086.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nPing?",
    "created_at": "2017-03-11T17:22:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332086",
    "user": "https://github.com/infinity0"
}
```

<div id="comment:5" align="right">comment:5</div>

Ping?



---

archive/issue_comments_332087.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIf you want to check whether two directories are equal, the simplest way is [os.path.samefile](https://docs.python.org/2/library/os.path.html#os.path.samefile) which is exactly meant for that.",
    "created_at": "2017-06-21T14:58:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332087",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

If you want to check whether two directories are equal, the simplest way is [os.path.samefile](https://docs.python.org/2/library/os.path.html#os.path.samefile) which is exactly meant for that.



---

archive/issue_events_310958.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-21T14:58:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310958"
}
```



---

archive/issue_events_310959.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-21T14:58:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310959"
}
```



---

archive/issue_comments_332088.json:
```json
{
    "body": "Changed branch from **[u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)** to **[u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__)**",
    "created_at": "2018-04-01T20:35:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332088",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__)** to **[u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__)**



---

archive/issue_events_310960.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-01T20:38:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310960"
}
```



---

archive/issue_events_310961.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-01T20:38:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310961"
}
```



---

archive/issue_comments_332089.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI tried to use `samefile`. I couldn't run doctests locally cause my Sage is rebuilding. Let's see what the patchbot thinks about this.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ba2c834891900ec8a2270e072d6bce9f1cac363\"><code>0ba2c83</code></a></td><td><code>Fix symlink test cases for distributions</code></td></tr></table>\n",
    "created_at": "2018-04-01T20:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332089",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:8" align="right">comment:8</div>

I tried to use `samefile`. I couldn't run doctests locally cause my Sage is rebuilding. Let's see what the patchbot thinks about this.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ba2c834891900ec8a2270e072d6bce9f1cac363"><code>0ba2c83</code></a></td><td><code>Fix symlink test cases for distributions</code></td></tr></table>




---

archive/issue_comments_332090.json:
```json
{
    "body": "Changed author from **Ximin Luo** to **Ximin Luo, Julian R\u00fcth**",
    "created_at": "2018-04-01T20:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332090",
    "user": "https://github.com/saraedum"
}
```

Changed author from **Ximin Luo** to **Ximin Luo, Julian Rüth**



---

archive/issue_comments_332091.json:
```json
{
    "body": "Changed commit from **[`de02659`](https://github.com/sagemath/sagetrac-mirror/commit/de026596990d0fde8ab18cb3bf095488adad44b1)** to **[`0ba2c83`](https://github.com/sagemath/sagetrac-mirror/commit/0ba2c834891900ec8a2270e072d6bce9f1cac363)**",
    "created_at": "2018-04-01T20:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332091",
    "user": "https://github.com/saraedum"
}
```

Changed commit from **[`de02659`](https://github.com/sagemath/sagetrac-mirror/commit/de026596990d0fde8ab18cb3bf095488adad44b1)** to **[`0ba2c83`](https://github.com/sagemath/sagetrac-mirror/commit/0ba2c834891900ec8a2270e072d6bce9f1cac363)**



---

archive/issue_comments_332092.json:
```json
{
    "body": "Changed commit from **[`0ba2c83`](https://github.com/sagemath/sagetrac-mirror/commit/0ba2c834891900ec8a2270e072d6bce9f1cac363)** to **[`7d4b2cb`](https://github.com/sagemath/sagetrac-mirror/commit/7d4b2cba4725d72652d5ba98bc27c5fdc089fca4)**",
    "created_at": "2018-04-21T20:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332092",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0ba2c83`](https://github.com/sagemath/sagetrac-mirror/commit/0ba2c834891900ec8a2270e072d6bce9f1cac363)** to **[`7d4b2cb`](https://github.com/sagemath/sagetrac-mirror/commit/7d4b2cba4725d72652d5ba98bc27c5fdc089fca4)**



---

archive/issue_comments_332093.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbbb9fdd6b18332c716baf153843cd98d904c91c\"><code>cbbb9fd</code></a></td><td><code>Use variable names as in os.symlink</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d4b2cba4725d72652d5ba98bc27c5fdc089fca4\"><code>7d4b2cb</code></a></td><td><code>More detailed error handling for symlink</code></td></tr></table>\n",
    "created_at": "2018-04-21T20:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332093",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbbb9fdd6b18332c716baf153843cd98d904c91c"><code>cbbb9fd</code></a></td><td><code>Use variable names as in os.symlink</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d4b2cba4725d72652d5ba98bc27c5fdc089fca4"><code>7d4b2cb</code></a></td><td><code>More detailed error handling for symlink</code></td></tr></table>




---

archive/issue_comments_332094.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8db83ecdaab7e1ea06671e5c54adb63a2937ff36\"><code>8db83ec</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into t/22444/ipy_install__fix_very_incomplete_logic_in_symlink__</code></td></tr></table>\n",
    "created_at": "2018-04-21T20:22:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332094",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8db83ecdaab7e1ea06671e5c54adb63a2937ff36"><code>8db83ec</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into t/22444/ipy_install__fix_very_incomplete_logic_in_symlink__</code></td></tr></table>




---

archive/issue_comments_332095.json:
```json
{
    "body": "Changed commit from **[`7d4b2cb`](https://github.com/sagemath/sagetrac-mirror/commit/7d4b2cba4725d72652d5ba98bc27c5fdc089fca4)** to **[`8db83ec`](https://github.com/sagemath/sagetrac-mirror/commit/8db83ecdaab7e1ea06671e5c54adb63a2937ff36)**",
    "created_at": "2018-04-21T20:22:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332095",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7d4b2cb`](https://github.com/sagemath/sagetrac-mirror/commit/7d4b2cba4725d72652d5ba98bc27c5fdc089fca4)** to **[`8db83ec`](https://github.com/sagemath/sagetrac-mirror/commit/8db83ecdaab7e1ea06671e5c54adb63a2937ff36)**



---

archive/issue_comments_332096.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d01e6d108e6b759a5bea841d072708f58db3183\"><code>8d01e6d</code></a></td><td><code>os.path.samefile() requires the files to exist</code></td></tr></table>\n",
    "created_at": "2018-04-25T17:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332096",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d01e6d108e6b759a5bea841d072708f58db3183"><code>8d01e6d</code></a></td><td><code>os.path.samefile() requires the files to exist</code></td></tr></table>




---

archive/issue_comments_332097.json:
```json
{
    "body": "Changed commit from **[`8db83ec`](https://github.com/sagemath/sagetrac-mirror/commit/8db83ecdaab7e1ea06671e5c54adb63a2937ff36)** to **[`8d01e6d`](https://github.com/sagemath/sagetrac-mirror/commit/8d01e6d108e6b759a5bea841d072708f58db3183)**",
    "created_at": "2018-04-25T17:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332097",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8db83ec`](https://github.com/sagemath/sagetrac-mirror/commit/8db83ecdaab7e1ea06671e5c54adb63a2937ff36)** to **[`8d01e6d`](https://github.com/sagemath/sagetrac-mirror/commit/8d01e6d108e6b759a5bea841d072708f58db3183)**



---

archive/issue_comments_332098.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09c560a5b0a7012407ffa661166875c054312c99\"><code>09c560a</code></a></td><td><code>fix typo</code></td></tr></table>\n",
    "created_at": "2018-04-29T17:39:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332098",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09c560a5b0a7012407ffa661166875c054312c99"><code>09c560a</code></a></td><td><code>fix typo</code></td></tr></table>




---

archive/issue_comments_332099.json:
```json
{
    "body": "Changed commit from **[`8d01e6d`](https://github.com/sagemath/sagetrac-mirror/commit/8d01e6d108e6b759a5bea841d072708f58db3183)** to **[`09c560a`](https://github.com/sagemath/sagetrac-mirror/commit/09c560a5b0a7012407ffa661166875c054312c99)**",
    "created_at": "2018-04-29T17:39:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332099",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8d01e6d`](https://github.com/sagemath/sagetrac-mirror/commit/8d01e6d108e6b759a5bea841d072708f58db3183)** to **[`09c560a`](https://github.com/sagemath/sagetrac-mirror/commit/09c560a5b0a7012407ffa661166875c054312c99)**



---

archive/issue_events_310962.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-13T09:35:09Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310962"
}
```



---

archive/issue_events_310963.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-13T09:35:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310963"
}
```



---

archive/issue_comments_332100.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nIf `errno.EEXIST` can not happen, then it would better be deleted and handled by the `else`.\n\nI don't like the default\n\n```\n    else:\n        # Something that we did not expect happened.\n        # Let's hope for the best, and let symlink fail with an error\n        # that is easier to debug.\n        pass\n```\nShouldn't a `raise RuntimeError` be more appropriate?",
    "created_at": "2018-05-13T09:35:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332100",
    "user": "https://github.com/videlec"
}
```

<div id="comment:13" align="right">comment:13</div>

If `errno.EEXIST` can not happen, then it would better be deleted and handled by the `else`.

I don't like the default

```
    else:
        # Something that we did not expect happened.
        # Let's hope for the best, and let symlink fail with an error
        # that is easier to debug.
        pass
```
Shouldn't a `raise RuntimeError` be more appropriate?



---

archive/issue_events_310964.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-13T09:35:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310964"
}
```



---

archive/issue_events_310965.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-13T09:35:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310965"
}
```



---

archive/issue_comments_332101.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2018-05-13T09:35:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332101",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_332102.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@videlec](#comment%3A13):\n> If `errno.EEXIST` can not happen, then it would better be deleted and handled by the `else`.\n\nI guess it's there for a reason. I do not want to break the installation on some obscure platform.\n\n> I don't like the default\n> \n> ```\n>     else:\n>         # Something that we did not expect happened.\n>         # Let's hope for the best, and let symlink fail with an error\n>         # that is easier to debug.\n>         pass\n> ```\n> Shouldn't a `raise RuntimeError` be more appropriate?\n\nWhy? If symlink works, then we don't care. If it fails, then it is going to produce a good error message on its own.",
    "created_at": "2018-05-14T12:48:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332102",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@videlec](#comment%3A13):
> If `errno.EEXIST` can not happen, then it would better be deleted and handled by the `else`.

I guess it's there for a reason. I do not want to break the installation on some obscure platform.

> I don't like the default
> 
> ```
>     else:
>         # Something that we did not expect happened.
>         # Let's hope for the best, and let symlink fail with an error
>         # that is easier to debug.
>         pass
> ```
> Shouldn't a `raise RuntimeError` be more appropriate?

Why? If symlink works, then we don't care. If it fails, then it is going to produce a good error message on its own.



---

archive/issue_events_310966.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-05-14T12:48:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310966"
}
```



---

archive/issue_events_310967.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-05-14T12:48:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310967"
}
```



---

archive/issue_comments_332103.json:
```json
{
    "body": "Changed branch from **[u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__)** to none",
    "created_at": "2018-05-18T22:11:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332103",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__)** to none



---

archive/issue_comments_332104.json:
```json
{
    "body": "Changed commit from **[`09c560a`](https://github.com/sagemath/sagetrac-mirror/commit/09c560a5b0a7012407ffa661166875c054312c99)** to none",
    "created_at": "2018-05-18T22:11:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332104",
    "user": "https://github.com/saraedum"
}
```

Changed commit from **[`09c560a`](https://github.com/sagemath/sagetrac-mirror/commit/09c560a5b0a7012407ffa661166875c054312c99)** to none



---

archive/issue_comments_332105.json:
```json
{
    "body": "Branch: **[u/saraedum/22444](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/22444)**",
    "created_at": "2018-05-18T22:17:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332105",
    "user": "https://github.com/saraedum"
}
```

Branch: **[u/saraedum/22444](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/22444)**



---

archive/issue_comments_332106.json:
```json
{
    "body": "Commit: **[`5da8703`](https://github.com/sagemath/sagetrac-mirror/commit/5da8703e1df0403e3e5b4a0581b7ee57e2b4098c)**",
    "created_at": "2018-06-21T10:01:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332106",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`5da8703`](https://github.com/sagemath/sagetrac-mirror/commit/5da8703e1df0403e3e5b4a0581b7ee57e2b4098c)**



---

archive/issue_comments_332107.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5da8703e1df0403e3e5b4a0581b7ee57e2b4098c\"><code>5da8703</code></a></td><td><code>Merge 22444 and trac/develop</code></td></tr></table>\n",
    "created_at": "2018-06-21T10:01:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332107",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5da8703e1df0403e3e5b4a0581b7ee57e2b4098c"><code>5da8703</code></a></td><td><code>Merge 22444 and trac/develop</code></td></tr></table>




---

archive/issue_comments_332108.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nvdelecroix, could I ask you to have another look here/comment on my replies to your remarks?",
    "created_at": "2018-06-21T10:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332108",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:19" align="right">comment:19</div>

vdelecroix, could I ask you to have another look here/comment on my replies to your remarks?



---

archive/issue_comments_332109.json:
```json
{
    "body": "Changed commit from **[`5da8703`](https://github.com/sagemath/sagetrac-mirror/commit/5da8703e1df0403e3e5b4a0581b7ee57e2b4098c)** to **[`e06a773`](https://github.com/sagemath/sagetrac-mirror/commit/e06a77391e0b45cee149b8a10add28773e814bb0)**",
    "created_at": "2018-07-04T16:05:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332109",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5da8703`](https://github.com/sagemath/sagetrac-mirror/commit/5da8703e1df0403e3e5b4a0581b7ee57e2b4098c)** to **[`e06a773`](https://github.com/sagemath/sagetrac-mirror/commit/e06a77391e0b45cee149b8a10add28773e814bb0)**



---

archive/issue_comments_332110.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e06a77391e0b45cee149b8a10add28773e814bb0\"><code>e06a773</code></a></td><td><code>Merge develop and 22444</code></td></tr></table>\n",
    "created_at": "2018-07-04T16:05:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332110",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e06a77391e0b45cee149b8a10add28773e814bb0"><code>e06a773</code></a></td><td><code>Merge develop and 22444</code></td></tr></table>




---

archive/issue_comments_332111.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThere is one failing doctest that is totally unrelated, so this is ready for review.",
    "created_at": "2018-07-07T14:17:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332111",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:21" align="right">comment:21</div>

There is one failing doctest that is totally unrelated, so this is ready for review.



---

archive/issue_comments_332112.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThe Cygwin patchbot failed, but that's because it cannot build mpir for some reason. Nothing that happened in this ticket I think.",
    "created_at": "2018-07-28T12:30:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332112",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:22" align="right">comment:22</div>

The Cygwin patchbot failed, but that's because it cannot build mpir for some reason. Nothing that happened in this ticket I think.



---

archive/issue_comments_332113.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nCould you remind me what this ticket is trying to fix?",
    "created_at": "2019-02-01T16:56:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332113",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

Could you remind me what this ticket is trying to fix?



---

archive/issue_comments_332114.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAlso: instead of parsing a bunch of `errno` values, I prefer to check behavior (i.e. does file X exist?).",
    "created_at": "2019-02-01T16:58:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332114",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">comment:24</div>

Also: instead of parsing a bunch of `errno` values, I prefer to check behavior (i.e. does file X exist?).



---

archive/issue_comments_332115.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nIs this still an issue? The patch still applies and mostly looks good to me, although I don't think we should `pass` on an unexpected `OSError`. I'd rather see the real problem than whatever additionally goes wrong when we try to `os.symlink()` it. Eventually, we will have collected the full range of possible `OSError` in the list with explanations for why we re-raise or ignore them.",
    "created_at": "2021-12-01T01:15:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22444#issuecomment-332115",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:25" align="right">comment:25</div>

Is this still an issue? The patch still applies and mostly looks good to me, although I don't think we should `pass` on an unexpected `OSError`. I'd rather see the real problem than whatever additionally goes wrong when we try to `os.symlink()` it. Eventually, we will have collected the full range of possible `OSError` in the list with explanations for why we re-raise or ignore them.



---

archive/issue_events_310968.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:41:45Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22444",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22444#event-310968"
}
```
