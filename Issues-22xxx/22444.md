# Issue 22444: ipy install: Fix very incomplete logic in symlink()

archive/issues_022207.json:
```json
{
    "body": "Otherwise these doctests fail when running them post-install on Debian. But I figured fixing the logic was better than simply disabling the tests.\n\n\nCC:  @orlitzky\n\nReviewer: Vincent Delecroix\n\nAuthor: Ximin Luo, Julian R\u00fcth\n\nBranch: u/saraedum/22444\n\nStatus: needs_review\n\nCommit: e06a77391e0b45cee149b8a10add28773e814bb0\n\nIssue created by migration from https://trac.sagemath.org/ticket/22444\n\n",
    "created_at": "2017-02-25T15:33:32Z",
    "labels": [
        "component: build",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.3",
    "title": "ipy install: Fix very incomplete logic in symlink()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22444",
    "user": "https://github.com/infinity0"
}
```
Otherwise these doctests fail when running them post-install on Debian. But I figured fixing the logic was better than simply disabling the tests.


CC:  @orlitzky

Reviewer: Vincent Delecroix

Author: Ximin Luo, Julian Rüth

Branch: u/saraedum/22444

Status: needs_review

Commit: e06a77391e0b45cee149b8a10add28773e814bb0

Issue created by migration from https://trac.sagemath.org/ticket/22444





---

archive/issue_comments_411053.json:
```json
{
    "body": "Changing branch from \"\" to \"u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__\"",
    "created_at": "2017-02-25T15:33:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411053",
    "user": "https://github.com/infinity0"
}
```

Changing branch from "" to "u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__"



---

archive/issue_comments_411054.json:
```json
{
    "body": "Changing author from \"\" to \"Ximin Luo\"",
    "created_at": "2017-02-25T15:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411054",
    "user": "https://github.com/infinity0"
}
```

Changing author from "" to "Ximin Luo"



---

archive/issue_comments_411055.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n+Otherwise these doctests fail when running them post-install on Debian. But I figured fixing the logic was better than simply disabling the tests.\n \n``````\n",
    "created_at": "2017-02-25T15:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411055",
    "user": "https://github.com/infinity0"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,2 @@
+Otherwise these doctests fail when running them post-install on Debian. But I figured fixing the logic was better than simply disabling the tests.
 
``````




---

archive/issue_comments_411056.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-02-25T15:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411056",
    "user": "https://github.com/infinity0"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_411057.json:
```json
{
    "body": "Changing branch from \"u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__\" to \"\"",
    "created_at": "2017-02-25T15:35:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411057",
    "user": "https://github.com/infinity0"
}
```

Changing branch from "u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__" to ""



---

archive/issue_comments_411058.json:
```json
{
    "body": "<a id='comment:3'></a>\nHi,\n\nThe branch in this one was unset!?",
    "created_at": "2017-02-25T17:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411058",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>
Hi,

The branch in this one was unset!?



---

archive/issue_comments_411059.json:
```json
{
    "body": "Changing branch from \"\" to \"u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__\"",
    "created_at": "2017-02-25T17:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411059",
    "user": "https://github.com/infinity0"
}
```

Changing branch from "" to "u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__"



---

archive/issue_comments_411060.json:
```json
{
    "body": "Changing commit from \"\" to \"de026596990d0fde8ab18cb3bf095488adad44b1\"",
    "created_at": "2017-02-25T17:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411060",
    "user": "https://github.com/infinity0"
}
```

Changing commit from "" to "de026596990d0fde8ab18cb3bf095488adad44b1"



---

archive/issue_comments_411061.json:
```json
{
    "body": "<a id='comment:4'></a>\nNew commits:\n|                                                                                                                                          |                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[de02659](https://github.com/sagemath/sagetrac-mirror/commit/de026596990d0fde8ab18cb3bf095488adad44b1)|`Fix very incomplete logic in symlink()`|",
    "created_at": "2017-02-25T17:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411061",
    "user": "https://github.com/infinity0"
}
```

<a id='comment:4'></a>
New commits:
|                                                                                                                                          |                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[de02659](https://github.com/sagemath/sagetrac-mirror/commit/de026596990d0fde8ab18cb3bf095488adad44b1)|`Fix very incomplete logic in symlink()`|



---

archive/issue_comments_411062.json:
```json
{
    "body": "<a id='comment:5'></a>\nPing?",
    "created_at": "2017-03-11T17:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411062",
    "user": "https://github.com/infinity0"
}
```

<a id='comment:5'></a>
Ping?



---

archive/issue_comments_411063.json:
```json
{
    "body": "<a id='comment:6'></a>\nIf you want to check whether two directories are equal, the simplest way is [os.path.samefile](https://docs.python.org/2/library/os.path.html#os.path.samefile) which is exactly meant for that.",
    "created_at": "2017-06-21T14:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411063",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
If you want to check whether two directories are equal, the simplest way is [os.path.samefile](https://docs.python.org/2/library/os.path.html#os.path.samefile) which is exactly meant for that.



---

archive/issue_comments_411064.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-06-21T14:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411064",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_411065.json:
```json
{
    "body": "Changing branch from \"u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__\" to \"u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__\"",
    "created_at": "2018-04-01T20:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411065",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/infinity0/ipy_install__fix_very_incomplete_logic_in_symlink__" to "u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__"



---

archive/issue_comments_411066.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-01T20:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411066",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_411067.json:
```json
{
    "body": "Changing author from \"Ximin Luo\" to \"Ximin Luo, Julian R\u00fcth\"",
    "created_at": "2018-04-01T20:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411067",
    "user": "https://github.com/saraedum"
}
```

Changing author from "Ximin Luo" to "Ximin Luo, Julian Rüth"



---

archive/issue_comments_411068.json:
```json
{
    "body": "Changing commit from \"de026596990d0fde8ab18cb3bf095488adad44b1\" to \"0ba2c834891900ec8a2270e072d6bce9f1cac363\"",
    "created_at": "2018-04-01T20:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411068",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "de026596990d0fde8ab18cb3bf095488adad44b1" to "0ba2c834891900ec8a2270e072d6bce9f1cac363"



---

archive/issue_comments_411069.json:
```json
{
    "body": "<a id='comment:8'></a>\nI tried to use `samefile`. I couldn't run doctests locally cause my Sage is rebuilding. Let's see what the patchbot thinks about this.\n\n---\nNew commits:\n|                                                                                                                                          |                                          |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[0ba2c83](https://github.com/sagemath/sagetrac-mirror/commit/0ba2c834891900ec8a2270e072d6bce9f1cac363)|`Fix symlink test cases for distributions`|",
    "created_at": "2018-04-01T20:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411069",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:8'></a>
I tried to use `samefile`. I couldn't run doctests locally cause my Sage is rebuilding. Let's see what the patchbot thinks about this.

---
New commits:
|                                                                                                                                          |                                          |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[0ba2c83](https://github.com/sagemath/sagetrac-mirror/commit/0ba2c834891900ec8a2270e072d6bce9f1cac363)|`Fix symlink test cases for distributions`|



---

archive/issue_comments_411070.json:
```json
{
    "body": "Changing commit from \"0ba2c834891900ec8a2270e072d6bce9f1cac363\" to \"7d4b2cba4725d72652d5ba98bc27c5fdc089fca4\"",
    "created_at": "2018-04-21T20:21:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411070",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0ba2c834891900ec8a2270e072d6bce9f1cac363" to "7d4b2cba4725d72652d5ba98bc27c5fdc089fca4"



---

archive/issue_comments_411071.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[cbbb9fd](https://github.com/sagemath/sagetrac-mirror/commit/cbbb9fdd6b18332c716baf153843cd98d904c91c)|`Use variable names as in os.symlink`|\n|[7d4b2cb](https://github.com/sagemath/sagetrac-mirror/commit/7d4b2cba4725d72652d5ba98bc27c5fdc089fca4)|`More detailed error handling for symlink`|",
    "created_at": "2018-04-21T20:21:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411071",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[cbbb9fd](https://github.com/sagemath/sagetrac-mirror/commit/cbbb9fdd6b18332c716baf153843cd98d904c91c)|`Use variable names as in os.symlink`|
|[7d4b2cb](https://github.com/sagemath/sagetrac-mirror/commit/7d4b2cba4725d72652d5ba98bc27c5fdc089fca4)|`More detailed error handling for symlink`|



---

archive/issue_comments_411072.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------|\n|[8db83ec](https://github.com/sagemath/sagetrac-mirror/commit/8db83ecdaab7e1ea06671e5c54adb63a2937ff36)|`Merge remote-tracking branch 'trac/develop' into t/22444/ipy_install__fix_very_incomplete_logic_in_symlink__`|",
    "created_at": "2018-04-21T20:22:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411072",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------|
|[8db83ec](https://github.com/sagemath/sagetrac-mirror/commit/8db83ecdaab7e1ea06671e5c54adb63a2937ff36)|`Merge remote-tracking branch 'trac/develop' into t/22444/ipy_install__fix_very_incomplete_logic_in_symlink__`|



---

archive/issue_comments_411073.json:
```json
{
    "body": "Changing commit from \"7d4b2cba4725d72652d5ba98bc27c5fdc089fca4\" to \"8db83ecdaab7e1ea06671e5c54adb63a2937ff36\"",
    "created_at": "2018-04-21T20:22:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411073",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7d4b2cba4725d72652d5ba98bc27c5fdc089fca4" to "8db83ecdaab7e1ea06671e5c54adb63a2937ff36"



---

archive/issue_comments_411074.json:
```json
{
    "body": "Changing commit from \"8db83ecdaab7e1ea06671e5c54adb63a2937ff36\" to \"8d01e6d108e6b759a5bea841d072708f58db3183\"",
    "created_at": "2018-04-25T17:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411074",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8db83ecdaab7e1ea06671e5c54adb63a2937ff36" to "8d01e6d108e6b759a5bea841d072708f58db3183"



---

archive/issue_comments_411075.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[8d01e6d](https://github.com/sagemath/sagetrac-mirror/commit/8d01e6d108e6b759a5bea841d072708f58db3183)|`os.path.samefile() requires the files to exist`|",
    "created_at": "2018-04-25T17:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411075",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[8d01e6d](https://github.com/sagemath/sagetrac-mirror/commit/8d01e6d108e6b759a5bea841d072708f58db3183)|`os.path.samefile() requires the files to exist`|



---

archive/issue_comments_411076.json:
```json
{
    "body": "Changing commit from \"8d01e6d108e6b759a5bea841d072708f58db3183\" to \"09c560a5b0a7012407ffa661166875c054312c99\"",
    "created_at": "2018-04-29T17:39:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411076",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8d01e6d108e6b759a5bea841d072708f58db3183" to "09c560a5b0a7012407ffa661166875c054312c99"



---

archive/issue_comments_411077.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------|\n|[09c560a](https://github.com/sagemath/sagetrac-mirror/commit/09c560a5b0a7012407ffa661166875c054312c99)|`fix typo`|",
    "created_at": "2018-04-29T17:39:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411077",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |          |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------|
|[09c560a](https://github.com/sagemath/sagetrac-mirror/commit/09c560a5b0a7012407ffa661166875c054312c99)|`fix typo`|



---

archive/issue_comments_411078.json:
```json
{
    "body": "<a id='comment:13'></a>\nIf `errno.EEXIST` can not happen, then it would better be deleted and handled by the `else`.\n\nI don't like the default\n\n```\n    else:\n        # Something that we did not expect happened.\n        # Let's hope for the best, and let symlink fail with an error\n        # that is easier to debug.\n        pass\n```\nShouldn't a `raise RuntimeError` be more appropriate?",
    "created_at": "2018-05-13T09:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411078",
    "user": "https://github.com/videlec"
}
```

<a id='comment:13'></a>
If `errno.EEXIST` can not happen, then it would better be deleted and handled by the `else`.

I don't like the default

```
    else:
        # Something that we did not expect happened.
        # Let's hope for the best, and let symlink fail with an error
        # that is easier to debug.
        pass
```
Shouldn't a `raise RuntimeError` be more appropriate?



---

archive/issue_comments_411079.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2018-05-13T09:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411079",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_411080.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2018-05-13T09:35:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411080",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_events_074575.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2018-05-13T09:35:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "milestone": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22444#event-74575"
}
```



---

archive/issue_comments_411081.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [vdelecroix](#comment%3A13):\n> If `errno.EEXIST` can not happen, then it would better be deleted and handled by the `else`.\n\nI guess it's there for a reason. I do not want to break the installation on some obscure platform.\n\n> I don't like the default\n> \n> ```\n>     else:\n>         # Something that we did not expect happened.\n>         # Let's hope for the best, and let symlink fail with an error\n>         # that is easier to debug.\n>         pass\n> ```\n> Shouldn't a `raise RuntimeError` be more appropriate?\n\nWhy? If symlink works, then we don't care. If it fails, then it is going to produce a good error message on its own.",
    "created_at": "2018-05-14T12:48:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411081",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:14'></a>
Replying to [vdelecroix](#comment%3A13):
> If `errno.EEXIST` can not happen, then it would better be deleted and handled by the `else`.

I guess it's there for a reason. I do not want to break the installation on some obscure platform.

> I don't like the default
> 
> ```
>     else:
>         # Something that we did not expect happened.
>         # Let's hope for the best, and let symlink fail with an error
>         # that is easier to debug.
>         pass
> ```
> Shouldn't a `raise RuntimeError` be more appropriate?

Why? If symlink works, then we don't care. If it fails, then it is going to produce a good error message on its own.



---

archive/issue_comments_411082.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-05-14T12:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411082",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_411083.json:
```json
{
    "body": "Changing branch from \"u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__\" to \"\"",
    "created_at": "2018-05-18T22:11:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411083",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/saraedum/ipy_install__fix_very_incomplete_logic_in_symlink__" to ""



---

archive/issue_comments_411084.json:
```json
{
    "body": "Changing commit from \"09c560a5b0a7012407ffa661166875c054312c99\" to \"\"",
    "created_at": "2018-05-18T22:11:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411084",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "09c560a5b0a7012407ffa661166875c054312c99" to ""



---

archive/issue_comments_411085.json:
```json
{
    "body": "Changing branch from \"\" to \"u/saraedum/22444\"",
    "created_at": "2018-05-18T22:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411085",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "" to "u/saraedum/22444"



---

archive/issue_comments_411086.json:
```json
{
    "body": "Changing commit from \"\" to \"5da8703e1df0403e3e5b4a0581b7ee57e2b4098c\"",
    "created_at": "2018-06-21T10:01:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411086",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "5da8703e1df0403e3e5b4a0581b7ee57e2b4098c"



---

archive/issue_comments_411087.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[5da8703](https://github.com/sagemath/sagetrac-mirror/commit/5da8703e1df0403e3e5b4a0581b7ee57e2b4098c)|`Merge 22444 and trac/develop`|",
    "created_at": "2018-06-21T10:01:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411087",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[5da8703](https://github.com/sagemath/sagetrac-mirror/commit/5da8703e1df0403e3e5b4a0581b7ee57e2b4098c)|`Merge 22444 and trac/develop`|



---

archive/issue_comments_411088.json:
```json
{
    "body": "<a id='comment:19'></a>\nvdelecroix, could I ask you to have another look here/comment on my replies to your remarks?",
    "created_at": "2018-06-21T10:03:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411088",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:19'></a>
vdelecroix, could I ask you to have another look here/comment on my replies to your remarks?



---

archive/issue_comments_411089.json:
```json
{
    "body": "Changing commit from \"5da8703e1df0403e3e5b4a0581b7ee57e2b4098c\" to \"e06a77391e0b45cee149b8a10add28773e814bb0\"",
    "created_at": "2018-07-04T16:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411089",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5da8703e1df0403e3e5b4a0581b7ee57e2b4098c" to "e06a77391e0b45cee149b8a10add28773e814bb0"



---

archive/issue_comments_411090.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[e06a773](https://github.com/sagemath/sagetrac-mirror/commit/e06a77391e0b45cee149b8a10add28773e814bb0)|`Merge develop and 22444`|",
    "created_at": "2018-07-04T16:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411090",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[e06a773](https://github.com/sagemath/sagetrac-mirror/commit/e06a77391e0b45cee149b8a10add28773e814bb0)|`Merge develop and 22444`|



---

archive/issue_comments_411091.json:
```json
{
    "body": "<a id='comment:21'></a>\nThere is one failing doctest that is totally unrelated, so this is ready for review.",
    "created_at": "2018-07-07T14:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411091",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:21'></a>
There is one failing doctest that is totally unrelated, so this is ready for review.



---

archive/issue_comments_411092.json:
```json
{
    "body": "<a id='comment:22'></a>\nThe Cygwin patchbot failed, but that's because it cannot build mpir for some reason. Nothing that happened in this ticket I think.",
    "created_at": "2018-07-28T12:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411092",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:22'></a>
The Cygwin patchbot failed, but that's because it cannot build mpir for some reason. Nothing that happened in this ticket I think.



---

archive/issue_comments_411093.json:
```json
{
    "body": "<a id='comment:23'></a>\nCould you remind me what this ticket is trying to fix?",
    "created_at": "2019-02-01T16:56:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411093",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
Could you remind me what this ticket is trying to fix?



---

archive/issue_comments_411094.json:
```json
{
    "body": "<a id='comment:24'></a>\nAlso: instead of parsing a bunch of `errno` values, I prefer to check behavior (i.e. does file X exist?).",
    "created_at": "2019-02-01T16:58:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411094",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>
Also: instead of parsing a bunch of `errno` values, I prefer to check behavior (i.e. does file X exist?).



---

archive/issue_comments_411095.json:
```json
{
    "body": "<a id='comment:25'></a>\nIs this still an issue? The patch still applies and mostly looks good to me, although I don't think we should `pass` on an unexpected `OSError`. I'd rather see the real problem than whatever additionally goes wrong when we try to `os.symlink()` it. Eventually, we will have collected the full range of possible `OSError` in the list with explanations for why we re-raise or ignore them.",
    "created_at": "2021-12-01T01:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22444",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22444#issuecomment-411095",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:25'></a>
Is this still an issue? The patch still applies and mostly looks good to me, although I don't think we should `pass` on an unexpected `OSError`. I'd rather see the real problem than whatever additionally goes wrong when we try to `os.symlink()` it. Eventually, we will have collected the full range of possible `OSError` in the list with explanations for why we re-raise or ignore them.
