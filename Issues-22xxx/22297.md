# Issue 22297: py3 remove __cmp__ from Element

archive/issues_022060.json:
```json
{
    "body": "as another step to py3\n\n**CC:**  @tscrim @jdemeyer @a-andre @jhpalmieri\n\n**Branch/Commit:** [61241224f0b95c91e6000108669de70cb2e827c6](https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6)\n\n**Reviewer:** Jeroen Demeyer\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/22297\n\n",
    "closed_at": "2017-06-29T06:46:46Z",
    "created_at": "2017-02-03T09:51:05Z",
    "labels": [
        "component: python3",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "title": "py3 remove __cmp__ from Element",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/22297",
    "user": "https://github.com/fchapoton"
}
```
as another step to py3

**CC:**  @tscrim @jdemeyer @a-andre @jhpalmieri

**Branch/Commit:** [61241224f0b95c91e6000108669de70cb2e827c6](https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6)

**Reviewer:** Jeroen Demeyer

**Author:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/22297





---

archive/issue_comments_332055.json:
```json
{
    "body": "<a id='comment:1'></a>\nlet us wait for the bots\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ad0b9b5468636871ccb73366263a5caac008dcf\">5ad0b9b</a></td><td><code>py3: get rid of a spurious cmp() in element.pyx</code></td></tr></table>\n",
    "created_at": "2017-02-03T09:51:42Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332055",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
let us wait for the bots

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ad0b9b5468636871ccb73366263a5caac008dcf">5ad0b9b</a></td><td><code>py3: get rid of a spurious cmp() in element.pyx</code></td></tr></table>




---

archive/issue_events_199211.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-02-03T09:51:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199211"
}
```



---

archive/issue_comments_332056.json:
```json
{
    "body": "**Branch:** [u/chapoton/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22297)",
    "created_at": "2017-02-03T09:51:42Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332056",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/chapoton/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22297)



---

archive/issue_comments_332057.json:
```json
{
    "body": "**Commit:** [5ad0b9b5468636871ccb73366263a5caac008dcf](https://github.com/sagemath/sagetrac-mirror/commit/5ad0b9b5468636871ccb73366263a5caac008dcf)",
    "created_at": "2017-02-03T09:51:42Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332057",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [5ad0b9b5468636871ccb73366263a5caac008dcf](https://github.com/sagemath/sagetrac-mirror/commit/5ad0b9b5468636871ccb73366263a5caac008dcf)



---

archive/issue_comments_332058.json:
```json
{
    "body": "<a id='comment:2'></a>\nThis is obviously not correct: you cannot just remove that branch.",
    "created_at": "2017-02-03T11:10:52Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332058",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
This is obviously not correct: you cannot just remove that branch.



---

archive/issue_events_199212.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-03T11:10:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199212"
}
```



---

archive/issue_events_199213.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-03T11:10:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199213"
}
```



---

archive/issue_comments_332059.json:
```json
{
    "body": "<a id='comment:3'></a>\ncould you please explain why ? no doctest fail.",
    "created_at": "2017-02-03T12:28:39Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332059",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
could you please explain why ? no doctest fail.



---

archive/issue_comments_332060.json:
```json
{
    "body": "<a id='comment:4'></a>\nbot is green.",
    "created_at": "2017-02-04T07:50:54Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332060",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
bot is green.



---

archive/issue_comments_332061.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [@fchapoton](#comment%3A3):\n> could you please explain why ? no doctest fail.\n\nThat's not how it works.  *You* have to explain me why the change that you made makes sense. And \"no doctest fail\" is never a good explanation.\n\nI'm not even saying that the change is wrong, but it certainly needs to be justified.",
    "created_at": "2017-02-04T14:10:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332061",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
Replying to [@fchapoton](#comment%3A3):
> could you please explain why ? no doctest fail.

That's not how it works.  *You* have to explain me why the change that you made makes sense. And "no doctest fail" is never a good explanation.

I'm not even saying that the change is wrong, but it certainly needs to be justified.



---

archive/issue_comments_332062.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [@jdemeyer](#comment%3A5):\n> I'm not even saying that the change is wrong\n\nWell, ok, I *did* say that, but that might have been too harsh.",
    "created_at": "2017-02-04T14:16:12Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332062",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
Replying to [@jdemeyer](#comment%3A5):
> I'm not even saying that the change is wrong

Well, ok, I *did* say that, but that might have been too harsh.



---

archive/issue_comments_332063.json:
```json
{
    "body": "**Changing author** from \"Fr\u00e9d\u00e9ric Chapoton\" to \"Jeroen Demeyer\".",
    "created_at": "2017-02-04T16:07:40Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332063",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Frédéric Chapoton" to "Jeroen Demeyer".



---

archive/issue_events_199214.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-04T16:07:40Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "rename": {
        "from": "py3 remove cmp() in element.pyx",
        "to": "py3 remove __cmp__ from Element"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199214"
}
```



---

archive/issue_comments_332064.json:
```json
{
    "body": "<a id='comment:7'></a>\nIf you really want to forward to Python 3, why not remove `__cmp__` completely?",
    "created_at": "2017-02-04T16:07:40Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332064",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
If you really want to forward to Python 3, why not remove `__cmp__` completely?



---

archive/issue_comments_332065.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n as another step to py3\n-\n-here just remove an useless piece of code\n``````\n",
    "created_at": "2017-02-04T16:07:40Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332065",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1 @@
 as another step to py3
-
-here just remove an useless piece of code
``````




---

archive/issue_comments_332066.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22297)\" to \"[u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)\".",
    "created_at": "2017-02-04T16:14:14Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332066",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/chapoton/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22297)" to "[u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)".



---

archive/issue_comments_332067.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01458896eb6cb1d79573b58c0f5fc74a0e644d15\">0145889</a></td><td><code>Remove generic `__cmp__` from Element</code></td></tr></table>\n",
    "created_at": "2017-02-04T18:29:00Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332067",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01458896eb6cb1d79573b58c0f5fc74a0e644d15">0145889</a></td><td><code>Remove generic `__cmp__` from Element</code></td></tr></table>




---

archive/issue_comments_332068.json:
```json
{
    "body": "**Changing commit** from \"[5ad0b9b5468636871ccb73366263a5caac008dcf](https://github.com/sagemath/sagetrac-mirror/commit/5ad0b9b5468636871ccb73366263a5caac008dcf)\" to \"[01458896eb6cb1d79573b58c0f5fc74a0e644d15](https://github.com/sagemath/sagetrac-mirror/commit/01458896eb6cb1d79573b58c0f5fc74a0e644d15)\".",
    "created_at": "2017-02-04T18:29:00Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332068",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5ad0b9b5468636871ccb73366263a5caac008dcf](https://github.com/sagemath/sagetrac-mirror/commit/5ad0b9b5468636871ccb73366263a5caac008dcf)" to "[01458896eb6cb1d79573b58c0f5fc74a0e644d15](https://github.com/sagemath/sagetrac-mirror/commit/01458896eb6cb1d79573b58c0f5fc74a0e644d15)".



---

archive/issue_comments_332069.json:
```json
{
    "body": "<a id='comment:10'></a>\nThis doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.",
    "created_at": "2017-02-04T18:30:03Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332069",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.



---

archive/issue_comments_332070.json:
```json
{
    "body": "<a id='comment:11'></a>\nso, can I put back my branch and set it to needs review ?\n\nit seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)",
    "created_at": "2017-02-04T22:37:19Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332070",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>
so, can I put back my branch and set it to needs review ?

it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)



---

archive/issue_comments_332071.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [@fchapoton](#comment%3A11):\n> so, can I put back my branch and set it to needs review ?\n> it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)\n\nI looked at your branch and it is wrong because it happens *after* coercion. There is no guarantee that the result of coercion will be Sage elements.",
    "created_at": "2017-02-05T08:02:46Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332071",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
Replying to [@fchapoton](#comment%3A11):
> so, can I put back my branch and set it to needs review ?
> it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)

I looked at your branch and it is wrong because it happens *after* coercion. There is no guarantee that the result of coercion will be Sage elements.



---

archive/issue_comments_332072.json:
```json
{
    "body": "<a id='comment:13'></a>\nAnyway, I think it's a bad idea to try to remove those 3 lines. You should look at `__cmp__` as a whole and fix that. It makes little sense to do a micro-change like what you suggest.",
    "created_at": "2017-02-05T08:05:57Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332072",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Anyway, I think it's a bad idea to try to remove those 3 lines. You should look at `__cmp__` as a whole and fix that. It makes little sense to do a micro-change like what you suggest.



---

archive/issue_comments_332073.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [@jdemeyer](#comment%3A12):\n> Replying to [@fchapoton](#comment%3A11):\n> > so, can I put back my branch and set it to needs review ?\n> > it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)\n\n> \n> I looked at your branch and it is wrong because it happens *after* coercion. There is no guarantee that the result of coercion will be Sage elements.\n\noh ! really ? I thought that when things have a parent, they are elements. Would you\nhave an example where this is not the case ?\n\nOther possibilities that come to my mind : what would you think of replacing \"`cmp(left, right)`\" by \"`left.__cmp__(right)`\" (I have not yet tried if it works) ? or maybe by \"`raise TypeError('coercion should build members of Element class')`\" ?\n\nThis is one of the latest calls to cmp() in a cython file. I would really like to be able to cythonize all the pxy files with python3.",
    "created_at": "2017-02-05T12:45:40Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332073",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>
Replying to [@jdemeyer](#comment%3A12):
> Replying to [@fchapoton](#comment%3A11):
> > so, can I put back my branch and set it to needs review ?
> > it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)

> 
> I looked at your branch and it is wrong because it happens *after* coercion. There is no guarantee that the result of coercion will be Sage elements.

oh ! really ? I thought that when things have a parent, they are elements. Would you
have an example where this is not the case ?

Other possibilities that come to my mind : what would you think of replacing "`cmp(left, right)`" by "`left.__cmp__(right)`" (I have not yet tried if it works) ? or maybe by "`raise TypeError('coercion should build members of Element class')`" ?

This is one of the latest calls to cmp() in a cython file. I would really like to be able to cythonize all the pxy files with python3.



---

archive/issue_comments_332074.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [@jdemeyer](#comment%3A10):\n> This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.\n\nDo you remember how many failures there are, and where ? how many classes are concerned by this bad double semantic ? I would suspect that this happens at least in symbolic ring and real numbers. This may also be the cause of the problems in #22257.",
    "created_at": "2017-02-05T20:51:40Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332074",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:15'></a>
Replying to [@jdemeyer](#comment%3A10):
> This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.

Do you remember how many failures there are, and where ? how many classes are concerned by this bad double semantic ? I would suspect that this happens at least in symbolic ring and real numbers. This may also be the cause of the problems in #22257.



---

archive/issue_comments_332075.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [@fchapoton](#comment%3A14):\n> oh ! really ? I thought that when things have a parent, they are elements.\n\nOf course. That's trivially true, since a parent is a concept which was invented for the `Element`/`Parent` classes.\n\n> Would you have an example where this is not the case ?\n\nNot right away, but I know that it's possible.\n\n> Other possibilities that come to my mind : what would you think of replacing \"`cmp(left, right)`\" by \"`left.__cmp__(right)`\"\n\nI don't really like that, but this might be the least bad thing to do.\n\n> \"`raise TypeError('coercion should build members of Element class')`\" ?\n\nCertainly not this.",
    "created_at": "2017-02-06T08:35:13Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332075",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Replying to [@fchapoton](#comment%3A14):
> oh ! really ? I thought that when things have a parent, they are elements.

Of course. That's trivially true, since a parent is a concept which was invented for the `Element`/`Parent` classes.

> Would you have an example where this is not the case ?

Not right away, but I know that it's possible.

> Other possibilities that come to my mind : what would you think of replacing "`cmp(left, right)`" by "`left.__cmp__(right)`"

I don't really like that, but this might be the least bad thing to do.

> "`raise TypeError('coercion should build members of Element class')`" ?

Certainly not this.



---

archive/issue_comments_332076.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [@fchapoton](#comment%3A14):\n> oh ! really ? I thought that when things have a parent, they are elements. Would you\n> have an example where this is not the case ?\n\nOK, I have an example: the coercion of `RealField(54)(1)` and `float(1.0)` gives a `float`.\n\nThis *might* be considered a bug though...",
    "created_at": "2017-02-06T09:27:21Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332076",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
Replying to [@fchapoton](#comment%3A14):
> oh ! really ? I thought that when things have a parent, they are elements. Would you
> have an example where this is not the case ?

OK, I have an example: the coercion of `RealField(54)(1)` and `float(1.0)` gives a `float`.

This *might* be considered a bug though...



---

archive/issue_comments_332077.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd\">a2310fc</a></td><td><code>Replace parent_c -> parent</code></td></tr></table>\n",
    "created_at": "2017-02-07T08:34:20Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332077",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd">a2310fc</a></td><td><code>Replace parent_c -> parent</code></td></tr></table>




---

archive/issue_comments_332078.json:
```json
{
    "body": "**Changing commit** from \"[01458896eb6cb1d79573b58c0f5fc74a0e644d15](https://github.com/sagemath/sagetrac-mirror/commit/01458896eb6cb1d79573b58c0f5fc74a0e644d15)\" to \"[a2310fc7da8d2c4e59789f9840eaabe294cf59dd](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)\".",
    "created_at": "2017-02-07T08:34:20Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332078",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[01458896eb6cb1d79573b58c0f5fc74a0e644d15](https://github.com/sagemath/sagetrac-mirror/commit/01458896eb6cb1d79573b58c0f5fc74a0e644d15)" to "[a2310fc7da8d2c4e59789f9840eaabe294cf59dd](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)".



---

archive/issue_comments_332079.json:
```json
{
    "body": "<a id='comment:19'></a>\nOops, wrong ticket...",
    "created_at": "2017-02-07T08:35:58Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332079",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>
Oops, wrong ticket...



---

archive/issue_comments_332080.json:
```json
{
    "body": "**Changing commit** from \"[a2310fc7da8d2c4e59789f9840eaabe294cf59dd](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)\" to \"\".",
    "created_at": "2017-02-07T08:35:58Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332080",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[a2310fc7da8d2c4e59789f9840eaabe294cf59dd](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)" to "".



---

archive/issue_comments_332081.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)\" to \"\".",
    "created_at": "2017-02-07T08:35:58Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332081",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)" to "".



---

archive/issue_comments_332082.json:
```json
{
    "body": "**Changing author** from \"Jeroen Demeyer\" to \"\".",
    "created_at": "2017-02-07T08:36:16Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332082",
    "user": "https://github.com/jdemeyer"
}
```

**Changing author** from "Jeroen Demeyer" to "".



---

archive/issue_comments_332083.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [@fchapoton](#comment%3A15):\n> Replying to [@jdemeyer](#comment%3A10):\n> > This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.\n\n> \n> Do you remember how many failures there are, and where ?\n\nI didn't really keep track. Certainly intervals too.",
    "created_at": "2017-02-07T11:54:39Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332083",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>
Replying to [@fchapoton](#comment%3A15):
> Replying to [@jdemeyer](#comment%3A10):
> > This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.

> 
> Do you remember how many failures there are, and where ?

I didn't really keep track. Certainly intervals too.



---

archive/issue_comments_332084.json:
```json
{
    "body": "**Commit:** [a2310fc7da8d2c4e59789f9840eaabe294cf59dd](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)",
    "created_at": "2017-02-10T12:54:14Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332084",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [a2310fc7da8d2c4e59789f9840eaabe294cf59dd](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)



---

archive/issue_comments_332085.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)",
    "created_at": "2017-02-10T12:54:14Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332085",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)



---

archive/issue_comments_332086.json:
```json
{
    "body": "<a id='comment:22'></a>\nputting Jeroen's branch back, so that one can run a bot on it\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd\">a2310fc</a></td><td><code>Replace parent_c -> parent</code></td></tr></table>\n",
    "created_at": "2017-02-10T12:54:14Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332086",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:22'></a>
putting Jeroen's branch back, so that one can run a bot on it

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd">a2310fc</a></td><td><code>Replace parent_c -> parent</code></td></tr></table>




---

archive/issue_comments_332087.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)\" to \"[public/22297](https://github.com/sagemath/sagetrac-mirror/tree/public/22297)\".",
    "created_at": "2017-02-10T12:58:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332087",
    "user": "https://github.com/fchapoton"
}
```

**Changing branch** from "[u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)" to "[public/22297](https://github.com/sagemath/sagetrac-mirror/tree/public/22297)".



---

archive/issue_comments_332088.json:
```json
{
    "body": "<a id='comment:23'></a>\ntrying with another branch, that just remove blankly `__cmp__`\n\nthis is a test branch, so that one can run a patchbot on it\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ff1e7973267aa08986f0e645612f0bec17c74c3\">8ff1e79</a></td><td><code>test branch for removal of __cmp__</code></td></tr></table>\n",
    "created_at": "2017-02-10T12:58:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332088",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:23'></a>
trying with another branch, that just remove blankly `__cmp__`

this is a test branch, so that one can run a patchbot on it

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ff1e7973267aa08986f0e645612f0bec17c74c3">8ff1e79</a></td><td><code>test branch for removal of __cmp__</code></td></tr></table>




---

archive/issue_comments_332089.json:
```json
{
    "body": "**Changing commit** from \"[a2310fc7da8d2c4e59789f9840eaabe294cf59dd](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)\" to \"[8ff1e7973267aa08986f0e645612f0bec17c74c3](https://github.com/sagemath/sagetrac-mirror/commit/8ff1e7973267aa08986f0e645612f0bec17c74c3)\".",
    "created_at": "2017-02-10T12:58:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332089",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[a2310fc7da8d2c4e59789f9840eaabe294cf59dd](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)" to "[8ff1e7973267aa08986f0e645612f0bec17c74c3](https://github.com/sagemath/sagetrac-mirror/commit/8ff1e7973267aa08986f0e645612f0bec17c74c3)".



---

archive/issue_comments_332090.json:
```json
{
    "body": "<a id='comment:24'></a>\nsome preparation work done in #22446, #22447, #22448",
    "created_at": "2017-02-25T21:17:09Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332090",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:24'></a>
some preparation work done in #22446, #22447, #22448



---

archive/issue_comments_332091.json:
```json
{
    "body": "<a id='comment:25'></a>\nsome of the problems (including the ones in Coxeter groups and heegner.py) reduces to the following one:\n\n```\nsage: A1=QuadraticField(5)\nsage: A2=QuadraticField(5)\nsage: A1==A2\nFalse\n```\nor the existing doctest\n\n```\nQuadraticField(-11, 'a') is QuadraticField(-11, 'a')\n```\nIn turn, this seems to come from problems in RealLazyField.\n\n```\nfrom sage.rings.number_field.number_field import NumberFieldFactory\nnff = NumberFieldFactory(\"number_field_factory\")\nsage: R.<x> = QQ[]\na1=nff.create_object(None, (QQ, x^2 -2, ('a',), RLF(sqrt(2)), None, None, False, None), check=False)\na2=nff.create_object(None, (QQ, x^2 -2, ('a',), RLF(sqrt(2)), None, None, False, None), check=False)\na1 == a2\n```\nwhere the failure of equality comes from the RLF terms.",
    "created_at": "2017-03-31T11:58:59Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332091",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:25'></a>
some of the problems (including the ones in Coxeter groups and heegner.py) reduces to the following one:

```
sage: A1=QuadraticField(5)
sage: A2=QuadraticField(5)
sage: A1==A2
False
```
or the existing doctest

```
QuadraticField(-11, 'a') is QuadraticField(-11, 'a')
```
In turn, this seems to come from problems in RealLazyField.

```
from sage.rings.number_field.number_field import NumberFieldFactory
nff = NumberFieldFactory("number_field_factory")
sage: R.<x> = QQ[]
a1=nff.create_object(None, (QQ, x^2 -2, ('a',), RLF(sqrt(2)), None, None, False, None), check=False)
a2=nff.create_object(None, (QQ, x^2 -2, ('a',), RLF(sqrt(2)), None, None, False, None), check=False)
a1 == a2
```
where the failure of equality comes from the RLF terms.



---

archive/issue_comments_332092.json:
```json
{
    "body": "<a id='comment:26'></a>\nso we probably really should fix #22257 first",
    "created_at": "2017-03-31T19:37:28Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332092",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:26'></a>
so we probably really should fix #22257 first



---

archive/issue_events_199215.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-31T19:37:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199215"
}
```



---

archive/issue_events_199216.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-31T19:37:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199216"
}
```



---

archive/issue_comments_332093.json:
```json
{
    "body": "<a id='comment:27'></a>\nnow waiting at least for #22890, #22815 and #22907",
    "created_at": "2017-05-14T11:46:25Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332093",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:27'></a>
now waiting at least for #22890, #22815 and #22907



---

archive/issue_comments_332094.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe632c44f09d5df73438a66f9f501a2a0a0ca46e\">fe632c4</a></td><td><code>Merge branch 'public/22297' in 8.0.b7</code></td></tr></table>\n",
    "created_at": "2017-05-19T12:23:27Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332094",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe632c44f09d5df73438a66f9f501a2a0a0ca46e">fe632c4</a></td><td><code>Merge branch 'public/22297' in 8.0.b7</code></td></tr></table>




---

archive/issue_comments_332095.json:
```json
{
    "body": "**Changing commit** from \"[8ff1e7973267aa08986f0e645612f0bec17c74c3](https://github.com/sagemath/sagetrac-mirror/commit/8ff1e7973267aa08986f0e645612f0bec17c74c3)\" to \"[fe632c44f09d5df73438a66f9f501a2a0a0ca46e](https://github.com/sagemath/sagetrac-mirror/commit/fe632c44f09d5df73438a66f9f501a2a0a0ca46e)\".",
    "created_at": "2017-05-19T12:23:27Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332095",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8ff1e7973267aa08986f0e645612f0bec17c74c3](https://github.com/sagemath/sagetrac-mirror/commit/8ff1e7973267aa08986f0e645612f0bec17c74c3)" to "[fe632c44f09d5df73438a66f9f501a2a0a0ca46e](https://github.com/sagemath/sagetrac-mirror/commit/fe632c44f09d5df73438a66f9f501a2a0a0ca46e)".



---

archive/issue_comments_332096.json:
```json
{
    "body": "**Changing commit** from \"[fe632c44f09d5df73438a66f9f501a2a0a0ca46e](https://github.com/sagemath/sagetrac-mirror/commit/fe632c44f09d5df73438a66f9f501a2a0a0ca46e)\" to \"[d05cd3f214728effcbc0a7af73186b2401d14c83](https://github.com/sagemath/sagetrac-mirror/commit/d05cd3f214728effcbc0a7af73186b2401d14c83)\".",
    "created_at": "2017-05-19T14:50:28Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332096",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fe632c44f09d5df73438a66f9f501a2a0a0ca46e](https://github.com/sagemath/sagetrac-mirror/commit/fe632c44f09d5df73438a66f9f501a2a0a0ca46e)" to "[d05cd3f214728effcbc0a7af73186b2401d14c83](https://github.com/sagemath/sagetrac-mirror/commit/d05cd3f214728effcbc0a7af73186b2401d14c83)".



---

archive/issue_comments_332097.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d05cd3f214728effcbc0a7af73186b2401d14c83\">d05cd3f</a></td><td><code>just remove `__cmp__` completely in element.pyx</code></td></tr></table>\n",
    "created_at": "2017-05-19T14:50:28Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332097",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d05cd3f214728effcbc0a7af73186b2401d14c83">d05cd3f</a></td><td><code>just remove `__cmp__` completely in element.pyx</code></td></tr></table>




---

archive/issue_comments_332098.json:
```json
{
    "body": "**Changing commit** from \"[d05cd3f214728effcbc0a7af73186b2401d14c83](https://github.com/sagemath/sagetrac-mirror/commit/d05cd3f214728effcbc0a7af73186b2401d14c83)\" to \"[7a7afb83f71076133e83d960d8234c8f566680ca](https://github.com/sagemath/sagetrac-mirror/commit/7a7afb83f71076133e83d960d8234c8f566680ca)\".",
    "created_at": "2017-06-02T19:16:39Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332098",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d05cd3f214728effcbc0a7af73186b2401d14c83](https://github.com/sagemath/sagetrac-mirror/commit/d05cd3f214728effcbc0a7af73186b2401d14c83)" to "[7a7afb83f71076133e83d960d8234c8f566680ca](https://github.com/sagemath/sagetrac-mirror/commit/7a7afb83f71076133e83d960d8234c8f566680ca)".



---

archive/issue_comments_332099.json:
```json
{
    "body": "<a id='comment:30'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a7afb83f71076133e83d960d8234c8f566680ca\">7a7afb8</a></td><td><code>trying to remove `__cmp__` from element.pyx</code></td></tr></table>\n",
    "created_at": "2017-06-02T19:16:39Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332099",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a7afb83f71076133e83d960d8234c8f566680ca">7a7afb8</a></td><td><code>trying to remove `__cmp__` from element.pyx</code></td></tr></table>




---

archive/issue_comments_332100.json:
```json
{
    "body": "<a id='comment:31'></a>\nanother preparation step is #23133",
    "created_at": "2017-06-03T08:01:48Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332100",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:31'></a>
another preparation step is #23133



---

archive/issue_comments_332101.json:
```json
{
    "body": "<a id='comment:32'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6161114435c936a65bd7ce5b45b81627dff6fac\">b616111</a></td><td><code>Merge branch 'public/22297' in 8.0.b10</code></td></tr></table>\n",
    "created_at": "2017-06-12T08:48:51Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332101",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6161114435c936a65bd7ce5b45b81627dff6fac">b616111</a></td><td><code>Merge branch 'public/22297' in 8.0.b10</code></td></tr></table>




---

archive/issue_comments_332102.json:
```json
{
    "body": "**Changing commit** from \"[7a7afb83f71076133e83d960d8234c8f566680ca](https://github.com/sagemath/sagetrac-mirror/commit/7a7afb83f71076133e83d960d8234c8f566680ca)\" to \"[b6161114435c936a65bd7ce5b45b81627dff6fac](https://github.com/sagemath/sagetrac-mirror/commit/b6161114435c936a65bd7ce5b45b81627dff6fac)\".",
    "created_at": "2017-06-12T08:48:51Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332102",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7a7afb83f71076133e83d960d8234c8f566680ca](https://github.com/sagemath/sagetrac-mirror/commit/7a7afb83f71076133e83d960d8234c8f566680ca)" to "[b6161114435c936a65bd7ce5b45b81627dff6fac](https://github.com/sagemath/sagetrac-mirror/commit/b6161114435c936a65bd7ce5b45b81627dff6fac)".



---

archive/issue_comments_332103.json:
```json
{
    "body": "<a id='comment:33'></a>\nmaybe the last preparation step is #23273",
    "created_at": "2017-06-19T17:21:00Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332103",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:33'></a>
maybe the last preparation step is #23273



---

archive/issue_comments_332104.json:
```json
{
    "body": "<a id='comment:34'></a>\nthis should be ready, let us wait for a patchbot report",
    "created_at": "2017-06-23T06:10:43Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332104",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:34'></a>
this should be ready, let us wait for a patchbot report



---

archive/issue_events_199217.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-23T06:10:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199217"
}
```



---

archive/issue_events_199218.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-23T06:10:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199218"
}
```



---

archive/issue_comments_332105.json:
```json
{
    "body": "<a id='comment:35'></a>\nok, bot is essentially green. Please review.",
    "created_at": "2017-06-23T11:38:04Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332105",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:35'></a>
ok, bot is essentially green. Please review.



---

archive/issue_comments_332106.json:
```json
{
    "body": "**Author:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2017-06-23T11:50:27Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332106",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Frédéric Chapoton



---

archive/issue_comments_332107.json:
```json
{
    "body": "<a id='comment:36'></a>\nGreat news!\n\nOne detail: you should keep the doctest (changing `cmp` and `__cmp__` to rich comparisons accordingly). Perhaps move that doctest to `_richcmp_`.",
    "created_at": "2017-06-23T11:50:27Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332107",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'></a>
Great news!

One detail: you should keep the doctest (changing `cmp` and `__cmp__` to rich comparisons accordingly). Perhaps move that doctest to `_richcmp_`.



---

archive/issue_events_199219.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-23T11:50:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199219"
}
```



---

archive/issue_events_199220.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-23T11:50:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199220"
}
```



---

archive/issue_comments_332108.json:
```json
{
    "body": "<a id='comment:37'></a>\nAlso, only this\n\n```\n            left_cmp = left.__cmp__\n```\nshould be inside the `try` statement.",
    "created_at": "2017-06-23T11:51:34Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332108",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>
Also, only this

```
            left_cmp = left.__cmp__
```
should be inside the `try` statement.



---

archive/issue_comments_332109.json:
```json
{
    "body": "**Changing commit** from \"[b6161114435c936a65bd7ce5b45b81627dff6fac](https://github.com/sagemath/sagetrac-mirror/commit/b6161114435c936a65bd7ce5b45b81627dff6fac)\" to \"[87ade9d5f8b3bac02cf13fca33d418b8ca56457d](https://github.com/sagemath/sagetrac-mirror/commit/87ade9d5f8b3bac02cf13fca33d418b8ca56457d)\".",
    "created_at": "2017-06-23T12:28:04Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332109",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b6161114435c936a65bd7ce5b45b81627dff6fac](https://github.com/sagemath/sagetrac-mirror/commit/b6161114435c936a65bd7ce5b45b81627dff6fac)" to "[87ade9d5f8b3bac02cf13fca33d418b8ca56457d](https://github.com/sagemath/sagetrac-mirror/commit/87ade9d5f8b3bac02cf13fca33d418b8ca56457d)".



---

archive/issue_comments_332110.json:
```json
{
    "body": "<a id='comment:38'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43f21e118a409d00d9aac9bdd81acac7cfe5d98e\">43f21e1</a></td><td><code>Merge branch 'public/22297' in 8.0.b12</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87ade9d5f8b3bac02cf13fca33d418b8ca56457d\">87ade9d</a></td><td><code>trac 22297 keeping the former doctest inside _richcmp_</code></td></tr></table>\n",
    "created_at": "2017-06-23T12:28:04Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332110",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43f21e118a409d00d9aac9bdd81acac7cfe5d98e">43f21e1</a></td><td><code>Merge branch 'public/22297' in 8.0.b12</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87ade9d5f8b3bac02cf13fca33d418b8ca56457d">87ade9d</a></td><td><code>trac 22297 keeping the former doctest inside _richcmp_</code></td></tr></table>




---

archive/issue_comments_332111.json:
```json
{
    "body": "<a id='comment:39'></a>\nok for the doctest. I also did something for the try statement, but was not sure of what you meant.",
    "created_at": "2017-06-23T12:30:03Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332111",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:39'></a>
ok for the doctest. I also did something for the try statement, but was not sure of what you meant.



---

archive/issue_comments_332112.json:
```json
{
    "body": "<a id='comment:40'></a>\nI meant something like\n\n```\n        try:\n            left_cmp = left.__cmp__\n        except AttributeError:\n            pass\n        else:\n            if isinstance(left_cmp, MethodType):\n                return left_cmp(right)\n```\nbut I'm wondering if we still the check `if isinstance(left_cmp, MethodType):`. Maybe this would work too:\n\n```\n        try:\n            left_cmp = left.__cmp__\n        except AttributeError:\n            pass\n        else:\n            return left_cmp(right)\n```",
    "created_at": "2017-06-23T12:37:20Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332112",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'></a>
I meant something like

```
        try:
            left_cmp = left.__cmp__
        except AttributeError:
            pass
        else:
            if isinstance(left_cmp, MethodType):
                return left_cmp(right)
```
but I'm wondering if we still the check `if isinstance(left_cmp, MethodType):`. Maybe this would work too:

```
        try:
            left_cmp = left.__cmp__
        except AttributeError:
            pass
        else:
            return left_cmp(right)
```



---

archive/issue_comments_332113.json:
```json
{
    "body": "**Changing commit** from \"[87ade9d5f8b3bac02cf13fca33d418b8ca56457d](https://github.com/sagemath/sagetrac-mirror/commit/87ade9d5f8b3bac02cf13fca33d418b8ca56457d)\" to \"[0b3990339945037981e0975fcd61a9a28c1c3c8f](https://github.com/sagemath/sagetrac-mirror/commit/0b3990339945037981e0975fcd61a9a28c1c3c8f)\".",
    "created_at": "2017-06-23T12:40:00Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332113",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[87ade9d5f8b3bac02cf13fca33d418b8ca56457d](https://github.com/sagemath/sagetrac-mirror/commit/87ade9d5f8b3bac02cf13fca33d418b8ca56457d)" to "[0b3990339945037981e0975fcd61a9a28c1c3c8f](https://github.com/sagemath/sagetrac-mirror/commit/0b3990339945037981e0975fcd61a9a28c1c3c8f)".



---

archive/issue_comments_332114.json:
```json
{
    "body": "<a id='comment:41'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b3990339945037981e0975fcd61a9a28c1c3c8f\">0b39903</a></td><td><code>trac 22297 without isinstance check</code></td></tr></table>\n",
    "created_at": "2017-06-23T12:40:00Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332114",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b3990339945037981e0975fcd61a9a28c1c3c8f">0b39903</a></td><td><code>trac 22297 without isinstance check</code></td></tr></table>




---

archive/issue_comments_332115.json:
```json
{
    "body": "<a id='comment:42'></a>\noh, I see. I did not know this syntax.\n\nLet us try without the isinstance check then.",
    "created_at": "2017-06-23T12:41:04Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332115",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:42'></a>
oh, I see. I did not know this syntax.

Let us try without the isinstance check then.



---

archive/issue_events_199221.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-23T12:46:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199221"
}
```



---

archive/issue_events_199222.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-23T12:46:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199222"
}
```



---

archive/issue_comments_332116.json:
```json
{
    "body": "<a id='comment:44'></a>\nYou don't need `left_cmp = None`, just write `pass` in the `except` clause.",
    "created_at": "2017-06-23T13:16:17Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332116",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:44'></a>
You don't need `left_cmp = None`, just write `pass` in the `except` clause.



---

archive/issue_comments_332117.json:
```json
{
    "body": "**Changing commit** from \"[0b3990339945037981e0975fcd61a9a28c1c3c8f](https://github.com/sagemath/sagetrac-mirror/commit/0b3990339945037981e0975fcd61a9a28c1c3c8f)\" to \"[61241224f0b95c91e6000108669de70cb2e827c6](https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6)\".",
    "created_at": "2017-06-23T13:17:59Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332117",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0b3990339945037981e0975fcd61a9a28c1c3c8f](https://github.com/sagemath/sagetrac-mirror/commit/0b3990339945037981e0975fcd61a9a28c1c3c8f)" to "[61241224f0b95c91e6000108669de70cb2e827c6](https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6)".



---

archive/issue_comments_332118.json:
```json
{
    "body": "<a id='comment:45'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6\">6124122</a></td><td><code>trac 22297 detail</code></td></tr></table>\n",
    "created_at": "2017-06-23T13:17:59Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332118",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6">6124122</a></td><td><code>trac 22297 detail</code></td></tr></table>




---

archive/issue_comments_332119.json:
```json
{
    "body": "<a id='comment:46'></a>\ndone, sorry",
    "created_at": "2017-06-23T13:18:16Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332119",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:46'></a>
done, sorry



---

archive/issue_comments_332120.json:
```json
{
    "body": "<a id='comment:47'></a>\nbot is morally green\n\n**EDIT** now squarely green",
    "created_at": "2017-06-24T12:54:11Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332120",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:47'></a>
bot is morally green

**EDIT** now squarely green



---

archive/issue_events_199223.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-26T11:35:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199223"
}
```



---

archive/issue_events_199224.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-26T11:35:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199224"
}
```



---

archive/issue_comments_332121.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2017-06-26T11:35:21Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332121",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_events_199225.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-29T06:46:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199225"
}
```



---

archive/issue_events_199226.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f4b8a94fddee82049938e4c7a386c9bc1327f958",
    "created_at": "2017-06-29T06:46:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-199226"
}
```



---

archive/issue_comments_332122.json:
```json
{
    "body": "**Changing branch** from \"[public/22297](https://github.com/sagemath/sagetrac-mirror/tree/public/22297)\" to \"[61241224f0b95c91e6000108669de70cb2e827c6](https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6)\".",
    "created_at": "2017-06-29T06:46:46Z",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-332122",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/22297](https://github.com/sagemath/sagetrac-mirror/tree/public/22297)" to "[61241224f0b95c91e6000108669de70cb2e827c6](https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6)".
