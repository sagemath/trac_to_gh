# Issue 22297: py3 remove __cmp__ from Element

archive/issues_022060.json:
```json
{
    "assignees": [],
    "body": "as another step to py3\n\nCC:  @tscrim @jdemeyer @a-andre @jhpalmieri\n\nBranch/Commit: **[`6124122`](https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **python3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22297_\n\n",
    "closed_at": "2017-06-29T06:46:46Z",
    "created_at": "2017-02-03T09:51:05Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3 remove __cmp__ from Element",
    "type": "issue",
    "updated_at": "2017-06-29T06:46:46Z",
    "url": "https://github.com/sagemath/sage/issues/22297",
    "user": "https://github.com/fchapoton"
}
```
as another step to py3

CC:  @tscrim @jdemeyer @a-andre @jhpalmieri

Branch/Commit: **[`6124122`](https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6)**

Reviewer: **Jeroen Demeyer**

Author: **Frédéric Chapoton**

Component: **python3**

_Issue created by migration from https://trac.sagemath.org/ticket/22297_





---

archive/issue_events_311984.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-02-03T09:51:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311984"
}
```



---

archive/issue_events_311985.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-02-03T09:51:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "000080",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311985"
}
```



---

archive/issue_events_311986.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-02-03T09:51:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311986"
}
```



---

archive/issue_events_311987.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-02-03T09:51:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311987"
}
```



---

archive/issue_comments_329577.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nlet us wait for the bots\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ad0b9b5468636871ccb73366263a5caac008dcf\"><code>5ad0b9b</code></a></td><td><code>py3: get rid of a spurious cmp() in element.pyx</code></td></tr></table>\n",
    "created_at": "2017-02-03T09:51:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329577",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1" align="right">comment:1</div>

let us wait for the bots

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ad0b9b5468636871ccb73366263a5caac008dcf"><code>5ad0b9b</code></a></td><td><code>py3: get rid of a spurious cmp() in element.pyx</code></td></tr></table>




---

archive/issue_events_311988.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-02-03T09:51:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311988"
}
```



---

archive/issue_comments_329578.json:
```json
{
    "body": "Branch: **[u/chapoton/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22297)**",
    "created_at": "2017-02-03T09:51:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329578",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22297)**



---

archive/issue_comments_329579.json:
```json
{
    "body": "Commit: **[`5ad0b9b`](https://github.com/sagemath/sagetrac-mirror/commit/5ad0b9b5468636871ccb73366263a5caac008dcf)**",
    "created_at": "2017-02-03T09:51:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329579",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`5ad0b9b`](https://github.com/sagemath/sagetrac-mirror/commit/5ad0b9b5468636871ccb73366263a5caac008dcf)**



---

archive/issue_comments_329580.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThis is obviously not correct: you cannot just remove that branch.",
    "created_at": "2017-02-03T11:10:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329580",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:2" align="right">comment:2</div>

This is obviously not correct: you cannot just remove that branch.



---

archive/issue_events_311989.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-03T11:10:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311989"
}
```



---

archive/issue_events_311990.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-03T11:10:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311990"
}
```



---

archive/issue_comments_329581.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\ncould you please explain why ? no doctest fail.",
    "created_at": "2017-02-03T12:28:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329581",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">comment:3</div>

could you please explain why ? no doctest fail.



---

archive/issue_comments_329582.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nbot is green.",
    "created_at": "2017-02-04T07:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329582",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4" align="right">comment:4</div>

bot is green.



---

archive/issue_comments_329583.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@fchapoton](#comment:3):\n> could you please explain why ? no doctest fail.\n\nThat's not how it works.  *You* have to explain me why the change that you made makes sense. And \"no doctest fail\" is never a good explanation.\n\nI'm not even saying that the change is wrong, but it certainly needs to be justified.",
    "created_at": "2017-02-04T14:10:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329583",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@fchapoton](#comment:3):
> could you please explain why ? no doctest fail.

That's not how it works.  *You* have to explain me why the change that you made makes sense. And "no doctest fail" is never a good explanation.

I'm not even saying that the change is wrong, but it certainly needs to be justified.



---

archive/issue_comments_329584.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@jdemeyer](#comment:5):\n> I'm not even saying that the change is wrong\n\nWell, ok, I *did* say that, but that might have been too harsh.",
    "created_at": "2017-02-04T14:16:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329584",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@jdemeyer](#comment:5):
> I'm not even saying that the change is wrong

Well, ok, I *did* say that, but that might have been too harsh.



---

archive/issue_comments_329585.json:
```json
{
    "body": "Changed author from **Fr\u00e9d\u00e9ric Chapoton** to **Jeroen Demeyer**",
    "created_at": "2017-02-04T16:07:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329585",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Frédéric Chapoton** to **Jeroen Demeyer**



---

archive/issue_events_311991.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-04T16:07:40Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "title_is": "py3 remove __cmp__ from Element",
    "title_was": "py3 remove cmp() in element.pyx",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311991"
}
```



---

archive/issue_comments_329586.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIf you really want to forward to Python 3, why not remove `__cmp__` completely?",
    "created_at": "2017-02-04T16:07:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329586",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

If you really want to forward to Python 3, why not remove `__cmp__` completely?



---

archive/issue_comments_329587.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n as another step to py3\n-\n-here just remove an useless piece of code\n``````\n",
    "created_at": "2017-02-04T16:07:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329587",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1 @@
 as another step to py3
-
-here just remove an useless piece of code
``````




---

archive/issue_comments_329588.json:
```json
{
    "body": "Changed branch from **[u/chapoton/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22297)** to **[u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)**",
    "created_at": "2017-02-04T16:14:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329588",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/chapoton/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22297)** to **[u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)**



---

archive/issue_comments_329589.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01458896eb6cb1d79573b58c0f5fc74a0e644d15\"><code>0145889</code></a></td><td><code>Remove generic `__cmp__` from Element</code></td></tr></table>\n",
    "created_at": "2017-02-04T18:29:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329589",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01458896eb6cb1d79573b58c0f5fc74a0e644d15"><code>0145889</code></a></td><td><code>Remove generic `__cmp__` from Element</code></td></tr></table>




---

archive/issue_comments_329590.json:
```json
{
    "body": "Changed commit from **[`5ad0b9b`](https://github.com/sagemath/sagetrac-mirror/commit/5ad0b9b5468636871ccb73366263a5caac008dcf)** to **[`0145889`](https://github.com/sagemath/sagetrac-mirror/commit/01458896eb6cb1d79573b58c0f5fc74a0e644d15)**",
    "created_at": "2017-02-04T18:29:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329590",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5ad0b9b`](https://github.com/sagemath/sagetrac-mirror/commit/5ad0b9b5468636871ccb73366263a5caac008dcf)** to **[`0145889`](https://github.com/sagemath/sagetrac-mirror/commit/01458896eb6cb1d79573b58c0f5fc74a0e644d15)**



---

archive/issue_comments_329591.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThis doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.",
    "created_at": "2017-02-04T18:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329591",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.



---

archive/issue_comments_329592.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nso, can I put back my branch and set it to needs review ?\n\nit seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)",
    "created_at": "2017-02-04T22:37:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329592",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:11" align="right">comment:11</div>

so, can I put back my branch and set it to needs review ?

it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)



---

archive/issue_comments_329593.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@fchapoton](#comment:11):\n> so, can I put back my branch and set it to needs review ?\n> it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)\n\nI looked at your branch and it is wrong because it happens *after* coercion. There is no guarantee that the result of coercion will be Sage elements.",
    "created_at": "2017-02-05T08:02:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329593",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@fchapoton](#comment:11):
> so, can I put back my branch and set it to needs review ?
> it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)

I looked at your branch and it is wrong because it happens *after* coercion. There is no guarantee that the result of coercion will be Sage elements.



---

archive/issue_comments_329594.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nAnyway, I think it's a bad idea to try to remove those 3 lines. You should look at `__cmp__` as a whole and fix that. It makes little sense to do a micro-change like what you suggest.",
    "created_at": "2017-02-05T08:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329594",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Anyway, I think it's a bad idea to try to remove those 3 lines. You should look at `__cmp__` as a whole and fix that. It makes little sense to do a micro-change like what you suggest.



---

archive/issue_comments_329595.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@jdemeyer](#comment:12):\n> Replying to [@fchapoton](#comment:11):\n> > so, can I put back my branch and set it to needs review ?\n> > it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)\n\n> \n> I looked at your branch and it is wrong because it happens *after* coercion. There is no guarantee that the result of coercion will be Sage elements.\n\noh ! really ? I thought that when things have a parent, they are elements. Would you\nhave an example where this is not the case ?\n\nOther possibilities that come to my mind : what would you think of replacing \"`cmp(left, right)`\" by \"`left.__cmp__(right)`\" (I have not yet tried if it works) ? or maybe by \"`raise TypeError('coercion should build members of Element class')`\" ?\n\nThis is one of the latest calls to cmp() in a cython file. I would really like to be able to cythonize all the pxy files with python3.",
    "created_at": "2017-02-05T12:45:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329595",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@jdemeyer](#comment:12):
> Replying to [@fchapoton](#comment:11):
> > so, can I put back my branch and set it to needs review ?
> > it seems to me that what I remove can never happen (because this is a method of the element class, self is an Element)

> 
> I looked at your branch and it is wrong because it happens *after* coercion. There is no guarantee that the result of coercion will be Sage elements.

oh ! really ? I thought that when things have a parent, they are elements. Would you
have an example where this is not the case ?

Other possibilities that come to my mind : what would you think of replacing "`cmp(left, right)`" by "`left.__cmp__(right)`" (I have not yet tried if it works) ? or maybe by "`raise TypeError('coercion should build members of Element class')`" ?

This is one of the latest calls to cmp() in a cython file. I would really like to be able to cythonize all the pxy files with python3.



---

archive/issue_comments_329596.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@jdemeyer](#comment:10):\n> This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.\n\nDo you remember how many failures there are, and where ? how many classes are concerned by this bad double semantic ? I would suspect that this happens at least in symbolic ring and real numbers. This may also be the cause of the problems in #22257.",
    "created_at": "2017-02-05T20:51:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329596",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@jdemeyer](#comment:10):
> This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.

Do you remember how many failures there are, and where ? how many classes are concerned by this bad double semantic ? I would suspect that this happens at least in symbolic ring and real numbers. This may also be the cause of the problems in #22257.



---

archive/issue_comments_329597.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@fchapoton](#comment:14):\n> oh ! really ? I thought that when things have a parent, they are elements.\n\nOf course. That's trivially true, since a parent is a concept which was invented for the `Element`/`Parent` classes.\n\n> Would you have an example where this is not the case ?\n\nNot right away, but I know that it's possible.\n\n> Other possibilities that come to my mind : what would you think of replacing \"`cmp(left, right)`\" by \"`left.__cmp__(right)`\"\n\nI don't really like that, but this might be the least bad thing to do.\n\n> \"`raise TypeError('coercion should build members of Element class')`\" ?\n\nCertainly not this.",
    "created_at": "2017-02-06T08:35:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329597",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@fchapoton](#comment:14):
> oh ! really ? I thought that when things have a parent, they are elements.

Of course. That's trivially true, since a parent is a concept which was invented for the `Element`/`Parent` classes.

> Would you have an example where this is not the case ?

Not right away, but I know that it's possible.

> Other possibilities that come to my mind : what would you think of replacing "`cmp(left, right)`" by "`left.__cmp__(right)`"

I don't really like that, but this might be the least bad thing to do.

> "`raise TypeError('coercion should build members of Element class')`" ?

Certainly not this.



---

archive/issue_comments_329598.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@fchapoton](#comment:14):\n> oh ! really ? I thought that when things have a parent, they are elements. Would you\n> have an example where this is not the case ?\n\nOK, I have an example: the coercion of `RealField(54)(1)` and `float(1.0)` gives a `float`.\n\nThis *might* be considered a bug though...",
    "created_at": "2017-02-06T09:27:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329598",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@fchapoton](#comment:14):
> oh ! really ? I thought that when things have a parent, they are elements. Would you
> have an example where this is not the case ?

OK, I have an example: the coercion of `RealField(54)(1)` and `float(1.0)` gives a `float`.

This *might* be considered a bug though...



---

archive/issue_comments_329599.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd\"><code>a2310fc</code></a></td><td><code>Replace parent_c -> parent</code></td></tr></table>\n",
    "created_at": "2017-02-07T08:34:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329599",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd"><code>a2310fc</code></a></td><td><code>Replace parent_c -> parent</code></td></tr></table>




---

archive/issue_comments_329600.json:
```json
{
    "body": "Changed commit from **[`0145889`](https://github.com/sagemath/sagetrac-mirror/commit/01458896eb6cb1d79573b58c0f5fc74a0e644d15)** to **[`a2310fc`](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)**",
    "created_at": "2017-02-07T08:34:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329600",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0145889`](https://github.com/sagemath/sagetrac-mirror/commit/01458896eb6cb1d79573b58c0f5fc74a0e644d15)** to **[`a2310fc`](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)**



---

archive/issue_comments_329601.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nOops, wrong ticket...",
    "created_at": "2017-02-07T08:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329601",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

Oops, wrong ticket...



---

archive/issue_comments_329602.json:
```json
{
    "body": "Changed commit from **[`a2310fc`](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)** to none",
    "created_at": "2017-02-07T08:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329602",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`a2310fc`](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)** to none



---

archive/issue_comments_329603.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)** to none",
    "created_at": "2017-02-07T08:35:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329603",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)** to none



---

archive/issue_comments_329604.json:
```json
{
    "body": "Changed author from **Jeroen Demeyer** to none",
    "created_at": "2017-02-07T08:36:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329604",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Jeroen Demeyer** to none



---

archive/issue_comments_329605.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@fchapoton](#comment:15):\n> Replying to [@jdemeyer](#comment:10):\n> > This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.\n\n> \n> Do you remember how many failures there are, and where ?\n\nI didn't really keep track. Certainly intervals too.",
    "created_at": "2017-02-07T11:54:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329605",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@fchapoton](#comment:15):
> Replying to [@jdemeyer](#comment:10):
> > This doesn't really work because there are Element classes which have *different* semantics for `__cmp__` and `__richcmp__`. So it's not easy to do this.

> 
> Do you remember how many failures there are, and where ?

I didn't really keep track. Certainly intervals too.



---

archive/issue_comments_329606.json:
```json
{
    "body": "Commit: **[`a2310fc`](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)**",
    "created_at": "2017-02-10T12:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329606",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`a2310fc`](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)**



---

archive/issue_comments_329607.json:
```json
{
    "body": "Branch: **[u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)**",
    "created_at": "2017-02-10T12:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329607",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)**



---

archive/issue_comments_329608.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nputting Jeroen's branch back, so that one can run a bot on it\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd\"><code>a2310fc</code></a></td><td><code>Replace parent_c -> parent</code></td></tr></table>\n",
    "created_at": "2017-02-10T12:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329608",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:22" align="right">comment:22</div>

putting Jeroen's branch back, so that one can run a bot on it

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd"><code>a2310fc</code></a></td><td><code>Replace parent_c -> parent</code></td></tr></table>




---

archive/issue_comments_329609.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)** to **[public/22297](https://github.com/sagemath/sagetrac-mirror/tree/public/22297)**",
    "created_at": "2017-02-10T12:58:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329609",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/jdemeyer/22297](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22297)** to **[public/22297](https://github.com/sagemath/sagetrac-mirror/tree/public/22297)**



---

archive/issue_comments_329610.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\ntrying with another branch, that just remove blankly `__cmp__`\n\nthis is a test branch, so that one can run a patchbot on it\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ff1e7973267aa08986f0e645612f0bec17c74c3\"><code>8ff1e79</code></a></td><td><code>test branch for removal of __cmp__</code></td></tr></table>\n",
    "created_at": "2017-02-10T12:58:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329610",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">comment:23</div>

trying with another branch, that just remove blankly `__cmp__`

this is a test branch, so that one can run a patchbot on it

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ff1e7973267aa08986f0e645612f0bec17c74c3"><code>8ff1e79</code></a></td><td><code>test branch for removal of __cmp__</code></td></tr></table>




---

archive/issue_comments_329611.json:
```json
{
    "body": "Changed commit from **[`a2310fc`](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)** to **[`8ff1e79`](https://github.com/sagemath/sagetrac-mirror/commit/8ff1e7973267aa08986f0e645612f0bec17c74c3)**",
    "created_at": "2017-02-10T12:58:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329611",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`a2310fc`](https://github.com/sagemath/sagetrac-mirror/commit/a2310fc7da8d2c4e59789f9840eaabe294cf59dd)** to **[`8ff1e79`](https://github.com/sagemath/sagetrac-mirror/commit/8ff1e7973267aa08986f0e645612f0bec17c74c3)**



---

archive/issue_comments_329612.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nsome preparation work done in #22446, #22447, #22448",
    "created_at": "2017-02-25T21:17:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329612",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:24" align="right">comment:24</div>

some preparation work done in #22446, #22447, #22448



---

archive/issue_comments_329613.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nsome of the problems (including the ones in Coxeter groups and heegner.py) reduces to the following one:\n\n```\nsage: A1=QuadraticField(5)\nsage: A2=QuadraticField(5)\nsage: A1==A2\nFalse\n```\nor the existing doctest\n\n```\nQuadraticField(-11, 'a') is QuadraticField(-11, 'a')\n```\nIn turn, this seems to come from problems in RealLazyField.\n\n```\nfrom sage.rings.number_field.number_field import NumberFieldFactory\nnff = NumberFieldFactory(\"number_field_factory\")\nsage: R.<x> = QQ[]\na1=nff.create_object(None, (QQ, x^2 -2, ('a',), RLF(sqrt(2)), None, None, False, None), check=False)\na2=nff.create_object(None, (QQ, x^2 -2, ('a',), RLF(sqrt(2)), None, None, False, None), check=False)\na1 == a2\n```\nwhere the failure of equality comes from the RLF terms.",
    "created_at": "2017-03-31T11:58:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329613",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:25" align="right">comment:25</div>

some of the problems (including the ones in Coxeter groups and heegner.py) reduces to the following one:

```
sage: A1=QuadraticField(5)
sage: A2=QuadraticField(5)
sage: A1==A2
False
```
or the existing doctest

```
QuadraticField(-11, 'a') is QuadraticField(-11, 'a')
```
In turn, this seems to come from problems in RealLazyField.

```
from sage.rings.number_field.number_field import NumberFieldFactory
nff = NumberFieldFactory("number_field_factory")
sage: R.<x> = QQ[]
a1=nff.create_object(None, (QQ, x^2 -2, ('a',), RLF(sqrt(2)), None, None, False, None), check=False)
a2=nff.create_object(None, (QQ, x^2 -2, ('a',), RLF(sqrt(2)), None, None, False, None), check=False)
a1 == a2
```
where the failure of equality comes from the RLF terms.



---

archive/issue_comments_329614.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nso we probably really should fix #22257 first",
    "created_at": "2017-03-31T19:37:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329614",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:26" align="right">comment:26</div>

so we probably really should fix #22257 first



---

archive/issue_events_311992.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-31T19:37:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311992"
}
```



---

archive/issue_events_311993.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-31T19:37:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311993"
}
```



---

archive/issue_comments_329615.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nnow waiting at least for #22890, #22815 and #22907",
    "created_at": "2017-05-14T11:46:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329615",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:27" align="right">comment:27</div>

now waiting at least for #22890, #22815 and #22907



---

archive/issue_comments_329616.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe632c44f09d5df73438a66f9f501a2a0a0ca46e\"><code>fe632c4</code></a></td><td><code>Merge branch 'public/22297' in 8.0.b7</code></td></tr></table>\n",
    "created_at": "2017-05-19T12:23:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329616",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe632c44f09d5df73438a66f9f501a2a0a0ca46e"><code>fe632c4</code></a></td><td><code>Merge branch 'public/22297' in 8.0.b7</code></td></tr></table>




---

archive/issue_comments_329617.json:
```json
{
    "body": "Changed commit from **[`8ff1e79`](https://github.com/sagemath/sagetrac-mirror/commit/8ff1e7973267aa08986f0e645612f0bec17c74c3)** to **[`fe632c4`](https://github.com/sagemath/sagetrac-mirror/commit/fe632c44f09d5df73438a66f9f501a2a0a0ca46e)**",
    "created_at": "2017-05-19T12:23:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329617",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8ff1e79`](https://github.com/sagemath/sagetrac-mirror/commit/8ff1e7973267aa08986f0e645612f0bec17c74c3)** to **[`fe632c4`](https://github.com/sagemath/sagetrac-mirror/commit/fe632c44f09d5df73438a66f9f501a2a0a0ca46e)**



---

archive/issue_comments_329618.json:
```json
{
    "body": "Changed commit from **[`fe632c4`](https://github.com/sagemath/sagetrac-mirror/commit/fe632c44f09d5df73438a66f9f501a2a0a0ca46e)** to **[`d05cd3f`](https://github.com/sagemath/sagetrac-mirror/commit/d05cd3f214728effcbc0a7af73186b2401d14c83)**",
    "created_at": "2017-05-19T14:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329618",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fe632c4`](https://github.com/sagemath/sagetrac-mirror/commit/fe632c44f09d5df73438a66f9f501a2a0a0ca46e)** to **[`d05cd3f`](https://github.com/sagemath/sagetrac-mirror/commit/d05cd3f214728effcbc0a7af73186b2401d14c83)**



---

archive/issue_comments_329619.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d05cd3f214728effcbc0a7af73186b2401d14c83\"><code>d05cd3f</code></a></td><td><code>just remove `__cmp__` completely in element.pyx</code></td></tr></table>\n",
    "created_at": "2017-05-19T14:50:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329619",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d05cd3f214728effcbc0a7af73186b2401d14c83"><code>d05cd3f</code></a></td><td><code>just remove `__cmp__` completely in element.pyx</code></td></tr></table>




---

archive/issue_comments_329620.json:
```json
{
    "body": "Changed commit from **[`d05cd3f`](https://github.com/sagemath/sagetrac-mirror/commit/d05cd3f214728effcbc0a7af73186b2401d14c83)** to **[`7a7afb8`](https://github.com/sagemath/sagetrac-mirror/commit/7a7afb83f71076133e83d960d8234c8f566680ca)**",
    "created_at": "2017-06-02T19:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329620",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d05cd3f`](https://github.com/sagemath/sagetrac-mirror/commit/d05cd3f214728effcbc0a7af73186b2401d14c83)** to **[`7a7afb8`](https://github.com/sagemath/sagetrac-mirror/commit/7a7afb83f71076133e83d960d8234c8f566680ca)**



---

archive/issue_comments_329621.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a7afb83f71076133e83d960d8234c8f566680ca\"><code>7a7afb8</code></a></td><td><code>trying to remove `__cmp__` from element.pyx</code></td></tr></table>\n",
    "created_at": "2017-06-02T19:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329621",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a7afb83f71076133e83d960d8234c8f566680ca"><code>7a7afb8</code></a></td><td><code>trying to remove `__cmp__` from element.pyx</code></td></tr></table>




---

archive/issue_comments_329622.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nanother preparation step is #23133",
    "created_at": "2017-06-03T08:01:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329622",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:31" align="right">comment:31</div>

another preparation step is #23133



---

archive/issue_comments_329623.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6161114435c936a65bd7ce5b45b81627dff6fac\"><code>b616111</code></a></td><td><code>Merge branch 'public/22297' in 8.0.b10</code></td></tr></table>\n",
    "created_at": "2017-06-12T08:48:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329623",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6161114435c936a65bd7ce5b45b81627dff6fac"><code>b616111</code></a></td><td><code>Merge branch 'public/22297' in 8.0.b10</code></td></tr></table>




---

archive/issue_comments_329624.json:
```json
{
    "body": "Changed commit from **[`7a7afb8`](https://github.com/sagemath/sagetrac-mirror/commit/7a7afb83f71076133e83d960d8234c8f566680ca)** to **[`b616111`](https://github.com/sagemath/sagetrac-mirror/commit/b6161114435c936a65bd7ce5b45b81627dff6fac)**",
    "created_at": "2017-06-12T08:48:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329624",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7a7afb8`](https://github.com/sagemath/sagetrac-mirror/commit/7a7afb83f71076133e83d960d8234c8f566680ca)** to **[`b616111`](https://github.com/sagemath/sagetrac-mirror/commit/b6161114435c936a65bd7ce5b45b81627dff6fac)**



---

archive/issue_comments_329625.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nmaybe the last preparation step is #23273",
    "created_at": "2017-06-19T17:21:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329625",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:33" align="right">comment:33</div>

maybe the last preparation step is #23273



---

archive/issue_comments_329626.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nthis should be ready, let us wait for a patchbot report",
    "created_at": "2017-06-23T06:10:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329626",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:34" align="right">comment:34</div>

this should be ready, let us wait for a patchbot report



---

archive/issue_events_311994.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-23T06:10:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311994"
}
```



---

archive/issue_events_311995.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-23T06:10:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311995"
}
```



---

archive/issue_comments_329627.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nok, bot is essentially green. Please review.",
    "created_at": "2017-06-23T11:38:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329627",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:35" align="right">comment:35</div>

ok, bot is essentially green. Please review.



---

archive/issue_comments_329628.json:
```json
{
    "body": "Author: **Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2017-06-23T11:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329628",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Frédéric Chapoton**



---

archive/issue_comments_329629.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nGreat news!\n\nOne detail: you should keep the doctest (changing `cmp` and `__cmp__` to rich comparisons accordingly). Perhaps move that doctest to `_richcmp_`.",
    "created_at": "2017-06-23T11:50:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329629",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:36" align="right">comment:36</div>

Great news!

One detail: you should keep the doctest (changing `cmp` and `__cmp__` to rich comparisons accordingly). Perhaps move that doctest to `_richcmp_`.



---

archive/issue_events_311996.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-23T11:50:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311996"
}
```



---

archive/issue_events_311997.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-23T11:50:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311997"
}
```



---

archive/issue_comments_329630.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nAlso, only this\n\n```\n            left_cmp = left.__cmp__\n```\nshould be inside the `try` statement.",
    "created_at": "2017-06-23T11:51:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329630",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

Also, only this

```
            left_cmp = left.__cmp__
```
should be inside the `try` statement.



---

archive/issue_comments_329631.json:
```json
{
    "body": "Changed commit from **[`b616111`](https://github.com/sagemath/sagetrac-mirror/commit/b6161114435c936a65bd7ce5b45b81627dff6fac)** to **[`87ade9d`](https://github.com/sagemath/sagetrac-mirror/commit/87ade9d5f8b3bac02cf13fca33d418b8ca56457d)**",
    "created_at": "2017-06-23T12:28:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329631",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b616111`](https://github.com/sagemath/sagetrac-mirror/commit/b6161114435c936a65bd7ce5b45b81627dff6fac)** to **[`87ade9d`](https://github.com/sagemath/sagetrac-mirror/commit/87ade9d5f8b3bac02cf13fca33d418b8ca56457d)**



---

archive/issue_comments_329632.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43f21e118a409d00d9aac9bdd81acac7cfe5d98e\"><code>43f21e1</code></a></td><td><code>Merge branch 'public/22297' in 8.0.b12</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87ade9d5f8b3bac02cf13fca33d418b8ca56457d\"><code>87ade9d</code></a></td><td><code>trac 22297 keeping the former doctest inside _richcmp_</code></td></tr></table>\n",
    "created_at": "2017-06-23T12:28:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329632",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43f21e118a409d00d9aac9bdd81acac7cfe5d98e"><code>43f21e1</code></a></td><td><code>Merge branch 'public/22297' in 8.0.b12</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87ade9d5f8b3bac02cf13fca33d418b8ca56457d"><code>87ade9d</code></a></td><td><code>trac 22297 keeping the former doctest inside _richcmp_</code></td></tr></table>




---

archive/issue_comments_329633.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nok for the doctest. I also did something for the try statement, but was not sure of what you meant.",
    "created_at": "2017-06-23T12:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329633",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:39" align="right">comment:39</div>

ok for the doctest. I also did something for the try statement, but was not sure of what you meant.



---

archive/issue_comments_329634.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nI meant something like\n\n```\n        try:\n            left_cmp = left.__cmp__\n        except AttributeError:\n            pass\n        else:\n            if isinstance(left_cmp, MethodType):\n                return left_cmp(right)\n```\nbut I'm wondering if we still the check `if isinstance(left_cmp, MethodType):`. Maybe this would work too:\n\n```\n        try:\n            left_cmp = left.__cmp__\n        except AttributeError:\n            pass\n        else:\n            return left_cmp(right)\n```",
    "created_at": "2017-06-23T12:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329634",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">comment:40</div>

I meant something like

```
        try:
            left_cmp = left.__cmp__
        except AttributeError:
            pass
        else:
            if isinstance(left_cmp, MethodType):
                return left_cmp(right)
```
but I'm wondering if we still the check `if isinstance(left_cmp, MethodType):`. Maybe this would work too:

```
        try:
            left_cmp = left.__cmp__
        except AttributeError:
            pass
        else:
            return left_cmp(right)
```



---

archive/issue_comments_329635.json:
```json
{
    "body": "Changed commit from **[`87ade9d`](https://github.com/sagemath/sagetrac-mirror/commit/87ade9d5f8b3bac02cf13fca33d418b8ca56457d)** to **[`0b39903`](https://github.com/sagemath/sagetrac-mirror/commit/0b3990339945037981e0975fcd61a9a28c1c3c8f)**",
    "created_at": "2017-06-23T12:40:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329635",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`87ade9d`](https://github.com/sagemath/sagetrac-mirror/commit/87ade9d5f8b3bac02cf13fca33d418b8ca56457d)** to **[`0b39903`](https://github.com/sagemath/sagetrac-mirror/commit/0b3990339945037981e0975fcd61a9a28c1c3c8f)**



---

archive/issue_comments_329636.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b3990339945037981e0975fcd61a9a28c1c3c8f\"><code>0b39903</code></a></td><td><code>trac 22297 without isinstance check</code></td></tr></table>\n",
    "created_at": "2017-06-23T12:40:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329636",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b3990339945037981e0975fcd61a9a28c1c3c8f"><code>0b39903</code></a></td><td><code>trac 22297 without isinstance check</code></td></tr></table>




---

archive/issue_comments_329637.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\noh, I see. I did not know this syntax.\n\nLet us try without the isinstance check then.",
    "created_at": "2017-06-23T12:41:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329637",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:42" align="right">comment:42</div>

oh, I see. I did not know this syntax.

Let us try without the isinstance check then.



---

archive/issue_events_311998.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-23T12:46:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311998"
}
```



---

archive/issue_events_311999.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-23T12:46:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-311999"
}
```



---

archive/issue_comments_329638.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nYou don't need `left_cmp = None`, just write `pass` in the `except` clause.",
    "created_at": "2017-06-23T13:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329638",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:44" align="right">comment:44</div>

You don't need `left_cmp = None`, just write `pass` in the `except` clause.



---

archive/issue_comments_329639.json:
```json
{
    "body": "Changed commit from **[`0b39903`](https://github.com/sagemath/sagetrac-mirror/commit/0b3990339945037981e0975fcd61a9a28c1c3c8f)** to **[`6124122`](https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6)**",
    "created_at": "2017-06-23T13:17:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329639",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0b39903`](https://github.com/sagemath/sagetrac-mirror/commit/0b3990339945037981e0975fcd61a9a28c1c3c8f)** to **[`6124122`](https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6)**



---

archive/issue_comments_329640.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6\"><code>6124122</code></a></td><td><code>trac 22297 detail</code></td></tr></table>\n",
    "created_at": "2017-06-23T13:17:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329640",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6"><code>6124122</code></a></td><td><code>trac 22297 detail</code></td></tr></table>




---

archive/issue_comments_329641.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\ndone, sorry",
    "created_at": "2017-06-23T13:18:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329641",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:46" align="right">comment:46</div>

done, sorry



---

archive/issue_comments_329642.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nbot is morally green\n\n**EDIT** now squarely green",
    "created_at": "2017-06-24T12:54:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329642",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:47" align="right">comment:47</div>

bot is morally green

**EDIT** now squarely green



---

archive/issue_events_312000.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-26T11:35:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-312000"
}
```



---

archive/issue_events_312001.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-06-26T11:35:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-312001"
}
```



---

archive/issue_comments_329643.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2017-06-26T11:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329643",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_events_312002.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-29T06:46:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-312002"
}
```



---

archive/issue_events_312003.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f4b8a94fddee82049938e4c7a386c9bc1327f958",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-06-29T06:46:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22297#event-312003"
}
```



---

archive/issue_comments_329644.json:
```json
{
    "body": "Changed branch from **[public/22297](https://github.com/sagemath/sagetrac-mirror/tree/public/22297)** to **[`6124122`](https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6)**",
    "created_at": "2017-06-29T06:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22297",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22297#issuecomment-329644",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/22297](https://github.com/sagemath/sagetrac-mirror/tree/public/22297)** to **[`6124122`](https://github.com/sagemath/sagetrac-mirror/commit/61241224f0b95c91e6000108669de70cb2e827c6)**
