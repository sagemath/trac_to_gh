# Issue 22933: clean up deprecations in sandpile

archive/issues_022696.json:
```json
{
    "body": "Some deprecation in sandpile are in fact already removed, but still present in lazy imports. This breaks ups `vars()` and `locals()`.\n\nNamely, these are `grid_sandpile` and `complete_sandpile`.\n\nIn fact, we should clean up everything that was deprecated in #18618.\n\nHowever, we leave `sandlib` in the code, only remove it from the global namespace, as e.g. `sandlib('gor')` does not have an equivalent.\n\nAlso, it turns out that while calling `vars()` directly still fails, one now can at least do\n\n```\nv=vars()\nfor k in v.keys(): print v[k]\n```\n\n\n\n\nCC:  @jhpalmieri dperkinson\n\nBranch/Commit: 81e89598c69e6f3affe099e2958e8f9c47c9a398\n\nReviewer: John Palmieri\n\nAuthor: Dima Pasechnik\n\nDependencies: #22582\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22933\n\n",
    "closed_at": "2017-05-08T21:18:43Z",
    "created_at": "2017-05-02T20:25:51Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "clean up deprecations in sandpile",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22933",
    "user": "https://github.com/dimpase"
}
```
Some deprecation in sandpile are in fact already removed, but still present in lazy imports. This breaks ups `vars()` and `locals()`.

Namely, these are `grid_sandpile` and `complete_sandpile`.

In fact, we should clean up everything that was deprecated in #18618.

However, we leave `sandlib` in the code, only remove it from the global namespace, as e.g. `sandlib('gor')` does not have an equivalent.

Also, it turns out that while calling `vars()` directly still fails, one now can at least do

```
v=vars()
for k in v.keys(): print v[k]
```




CC:  @jhpalmieri dperkinson

Branch/Commit: 81e89598c69e6f3affe099e2958e8f9c47c9a398

Reviewer: John Palmieri

Author: Dima Pasechnik

Dependencies: #22582

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22933





---

archive/issue_comments_428861.json:
```json
{
    "body": "Changing branch from \"\" to \"u/dimpase/spfix\"",
    "created_at": "2017-05-02T21:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428861",
    "user": "https://github.com/dimpase"
}
```

Changing branch from "" to "u/dimpase/spfix"



---

archive/issue_comments_428862.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,5 +4,14 @@\n \n In fact, we should clean up everything that was deprecated in #18618.\n \n+However, we leave `sandlib` in the code, only remove it from the global namespace, as e.g. `sandlib('gor')` does not have an equivalent.\n+\n+Also, it turns out that while calling `vars()` directly still fails, one now can at least do\n+\n+```\n+v=vars()\n+for k in v.keys(): print v[k]\n+```\n \n \n+\n``````\n",
    "created_at": "2017-05-02T21:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428862",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,5 +4,14 @@
 
 In fact, we should clean up everything that was deprecated in #18618.
 
+However, we leave `sandlib` in the code, only remove it from the global namespace, as e.g. `sandlib('gor')` does not have an equivalent.
+
+Also, it turns out that while calling `vars()` directly still fails, one now can at least do
+
+```
+v=vars()
+for k in v.keys(): print v[k]
+```
 
 
+
``````




---

archive/issue_comments_428863.json:
```json
{
    "body": "Changing author from \"\" to \"Dima Pasechnik\"",
    "created_at": "2017-05-02T21:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428863",
    "user": "https://github.com/dimpase"
}
```

Changing author from "" to "Dima Pasechnik"



---

archive/issue_comments_428864.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[dc46ea2](https://git.sagemath.org/sage.git/commit/?id=dc46ea2dfa97be79d7ef8ddbe9130d4c717acc3d)|`trac 22582: fix merge conflicts`|\n|[bc4c2f5](https://git.sagemath.org/sage.git/commit/?id=bc4c2f5b99bfd780c8d95b67dcc2638563a40683)|`trac 22582: rename build/bin/sage-python to sage-python23`|\n|[0d30e20](https://git.sagemath.org/sage.git/commit/?id=0d30e20416d5051fb31e3d4a032f5e28b09254ec)|`trac 22582: use sage-python23 to build the Sage library`|\n|[7e7b5bc](https://git.sagemath.org/sage.git/commit/?id=7e7b5bc30ed53e44e9a4bc8640637531044d0caa)|`trac 22582: build and test packages using sage-python23 instead of python`|\n|[b954864](https://git.sagemath.org/sage.git/commit/?id=b954864b3d80c62af47e2a16793f20e264e412c6)|`trac 22582: no need to make python2 a dependency for python3`|\n|[2dad104](https://git.sagemath.org/sage.git/commit/?id=2dad104a528ce65c72a9736dbe04cc7bb2c86107)|`trac 22582: a little documentation`|\n|[5a645fd](https://git.sagemath.org/sage.git/commit/?id=5a645fdaebc03543cb05f7fcf72ebe8b2abbd6a2)|`Merge branch 'public/22582' of trac.sagemath.org:sage into t/22582/public/22582`|\n|[2179ac8](https://git.sagemath.org/sage.git/commit/?id=2179ac895c8d8aa9611837a0f5384199e526bd3a)|`Merge branch 8.0.beta3 into t/22582/public/22582`|\n|[6d54e12](https://git.sagemath.org/sage.git/commit/?id=6d54e120545d5c7521e86d2d0db5f092af5002be)|`Merge remote-tracking branch 'trac/public/22582' into spfix`|\n|[d4b7838](https://git.sagemath.org/sage.git/commit/?id=d4b7838d5c80190468797faabea032eb93f5690d)|`removed lazy_imports with deprecations`|",
    "created_at": "2017-05-02T21:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428864",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[dc46ea2](https://git.sagemath.org/sage.git/commit/?id=dc46ea2dfa97be79d7ef8ddbe9130d4c717acc3d)|`trac 22582: fix merge conflicts`|
|[bc4c2f5](https://git.sagemath.org/sage.git/commit/?id=bc4c2f5b99bfd780c8d95b67dcc2638563a40683)|`trac 22582: rename build/bin/sage-python to sage-python23`|
|[0d30e20](https://git.sagemath.org/sage.git/commit/?id=0d30e20416d5051fb31e3d4a032f5e28b09254ec)|`trac 22582: use sage-python23 to build the Sage library`|
|[7e7b5bc](https://git.sagemath.org/sage.git/commit/?id=7e7b5bc30ed53e44e9a4bc8640637531044d0caa)|`trac 22582: build and test packages using sage-python23 instead of python`|
|[b954864](https://git.sagemath.org/sage.git/commit/?id=b954864b3d80c62af47e2a16793f20e264e412c6)|`trac 22582: no need to make python2 a dependency for python3`|
|[2dad104](https://git.sagemath.org/sage.git/commit/?id=2dad104a528ce65c72a9736dbe04cc7bb2c86107)|`trac 22582: a little documentation`|
|[5a645fd](https://git.sagemath.org/sage.git/commit/?id=5a645fdaebc03543cb05f7fcf72ebe8b2abbd6a2)|`Merge branch 'public/22582' of trac.sagemath.org:sage into t/22582/public/22582`|
|[2179ac8](https://git.sagemath.org/sage.git/commit/?id=2179ac895c8d8aa9611837a0f5384199e526bd3a)|`Merge branch 8.0.beta3 into t/22582/public/22582`|
|[6d54e12](https://git.sagemath.org/sage.git/commit/?id=6d54e120545d5c7521e86d2d0db5f092af5002be)|`Merge remote-tracking branch 'trac/public/22582' into spfix`|
|[d4b7838](https://git.sagemath.org/sage.git/commit/?id=d4b7838d5c80190468797faabea032eb93f5690d)|`removed lazy_imports with deprecations`|



---

archive/issue_comments_428865.json:
```json
{
    "body": "Changing commit from \"\" to \"d4b7838d5c80190468797faabea032eb93f5690d\"",
    "created_at": "2017-05-02T21:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428865",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "d4b7838d5c80190468797faabea032eb93f5690d"



---

archive/issue_comments_428866.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-02T21:31:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428866",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_428867.json:
```json
{
    "body": "<a id='comment:4'></a>\nWhy is `random_digraph` no longer deprecated? (I know nothing about the sandpiles code, just wondering.)",
    "created_at": "2017-05-02T22:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428867",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
Why is `random_digraph` no longer deprecated? (I know nothing about the sandpiles code, just wondering.)



---

archive/issue_comments_428868.json:
```json
{
    "body": "<a id='comment:5'></a>\nThere are several other places where you are removing deprecation warnings without removing the (previously) deprecated functions.",
    "created_at": "2017-05-02T22:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428868",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>
There are several other places where you are removing deprecation warnings without removing the (previously) deprecated functions.



---

archive/issue_comments_428869.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [jhpalmieri](#comment%3A5):\n> There are several other places where you are removing deprecation warnings without removing the (previously) deprecated functions.\n\n\nDeprecated was placing them into the global namespace. These functions are still used internally in the module.",
    "created_at": "2017-05-02T22:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428869",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>
Replying to [jhpalmieri](#comment%3A5):
> There are several other places where you are removing deprecation warnings without removing the (previously) deprecated functions.


Deprecated was placing them into the global namespace. These functions are still used internally in the module.



---

archive/issue_comments_428870.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[f86a910](https://git.sagemath.org/sage.git/commit/?id=f86a9105329748f287ac5c888e05a74424dae1e9)|`removed previously deprecated firing_vector and random_digraph`|\n|[81e8959](https://git.sagemath.org/sage.git/commit/?id=81e89598c69e6f3affe099e2958e8f9c47c9a398)|`fix a typo in a message`|",
    "created_at": "2017-05-02T23:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428870",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[f86a910](https://git.sagemath.org/sage.git/commit/?id=f86a9105329748f287ac5c888e05a74424dae1e9)|`removed previously deprecated firing_vector and random_digraph`|
|[81e8959](https://git.sagemath.org/sage.git/commit/?id=81e89598c69e6f3affe099e2958e8f9c47c9a398)|`fix a typo in a message`|



---

archive/issue_comments_428871.json:
```json
{
    "body": "Changing commit from \"d4b7838d5c80190468797faabea032eb93f5690d\" to \"81e89598c69e6f3affe099e2958e8f9c47c9a398\"",
    "created_at": "2017-05-02T23:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428871",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d4b7838d5c80190468797faabea032eb93f5690d" to "81e89598c69e6f3affe099e2958e8f9c47c9a398"



---

archive/issue_comments_428872.json:
```json
{
    "body": "<a id='comment:8'></a>\nOK, I've removed two removable deprecated functions.",
    "created_at": "2017-05-02T23:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428872",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>
OK, I've removed two removable deprecated functions.



---

archive/issue_comments_428873.json:
```json
{
    "body": "<a id='comment:10'></a>\nThis is not an issue that we should deal with on this ticket, but according to the deprecation notices, someone should move the functionality from `sandlib` to the catalog of examples accessible using `sandpiles`.",
    "created_at": "2017-05-03T18:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428873",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>
This is not an issue that we should deal with on this ticket, but according to the deprecation notices, someone should move the functionality from `sandlib` to the catalog of examples accessible using `sandpiles`.



---

archive/issue_comments_428874.json:
```json
{
    "body": "Changing reviewer from \"\" to \"John Palmieri\"",
    "created_at": "2017-05-03T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428874",
    "user": "https://github.com/jhpalmieri"
}
```

Changing reviewer from "" to "John Palmieri"



---

archive/issue_comments_428875.json:
```json
{
    "body": "<a id='comment:11'></a>\nI'm happy with the changes here.",
    "created_at": "2017-05-03T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428875",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'></a>
I'm happy with the changes here.



---

archive/issue_comments_428876.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-03T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428876",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_428877.json:
```json
{
    "body": "Changing branch from \"u/dimpase/spfix\" to \"81e89598c69e6f3affe099e2958e8f9c47c9a398\"",
    "created_at": "2017-05-08T21:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428877",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/dimpase/spfix" to "81e89598c69e6f3affe099e2958e8f9c47c9a398"



---

archive/issue_events_059483.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-08T21:18:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22933#event-59483"
}
```



---

archive/issue_comments_428878.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-08T21:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-428878",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
