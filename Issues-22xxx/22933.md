# Issue 22933: clean up deprecations in sandpile

archive/issues_022696.json:
```json
{
    "body": "Some deprecation in sandpile are in fact already removed, but still present in lazy imports. This breaks ups `vars()` and `locals()`.\n\nNamely, these are `grid_sandpile` and `complete_sandpile`.\n\nIn fact, we should clean up everything that was deprecated in #18618.\n\nHowever, we leave `sandlib` in the code, only remove it from the global namespace, as e.g. `sandlib('gor')` does not have an equivalent.\n\nAlso, it turns out that while calling `vars()` directly still fails, one now can at least do\n\n```\nv=vars()\nfor k in v.keys(): print v[k]\n```\n\n\n\n\nCC:  @jhpalmieri dperkinson\n\nBranch/Commit: 81e89598c69e6f3affe099e2958e8f9c47c9a398\n\nReviewer: John Palmieri\n\nAuthor: Dima Pasechnik\n\nDependencies: #22582\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22933\n\n",
    "closed_at": "2017-05-08T21:18:43Z",
    "created_at": "2017-05-02T20:25:51Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "clean up deprecations in sandpile",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22933",
    "user": "https://github.com/dimpase"
}
```
Some deprecation in sandpile are in fact already removed, but still present in lazy imports. This breaks ups `vars()` and `locals()`.

Namely, these are `grid_sandpile` and `complete_sandpile`.

In fact, we should clean up everything that was deprecated in #18618.

However, we leave `sandlib` in the code, only remove it from the global namespace, as e.g. `sandlib('gor')` does not have an equivalent.

Also, it turns out that while calling `vars()` directly still fails, one now can at least do

```
v=vars()
for k in v.keys(): print v[k]
```




CC:  @jhpalmieri dperkinson

Branch/Commit: 81e89598c69e6f3affe099e2958e8f9c47c9a398

Reviewer: John Palmieri

Author: Dima Pasechnik

Dependencies: #22582

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22933





---

archive/issue_comments_337364.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,18 @@\n Namely, these are `grid_sandpile` and `complete_sandpile`.\n \n In fact, we should clean up everything that was deprecated in #18618.\n+\n+However, we leave `sandlib` in the code, only remove it from the global namespace, as e.g. `sandlib('gor')` does not have an equivalent.\n+\n+Also, it turns out that while calling `vars()` directly still fails, one now can at least do\n+\n+```\n+v=vars()\n+for k in v.keys(): print v[k]\n+```\n+\n+\n+\n \n Dependencies: #22582\n \n``````\n",
    "created_at": "2017-05-02T21:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-337364",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,18 @@
 Namely, these are `grid_sandpile` and `complete_sandpile`.
 
 In fact, we should clean up everything that was deprecated in #18618.
+
+However, we leave `sandlib` in the code, only remove it from the global namespace, as e.g. `sandlib('gor')` does not have an equivalent.
+
+Also, it turns out that while calling `vars()` directly still fails, one now can at least do
+
+```
+v=vars()
+for k in v.keys(): print v[k]
+```
+
+
+
 
 Dependencies: #22582
 
``````




---

archive/issue_comments_337365.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2017-05-02T21:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-337365",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_337366.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-02T21:31:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-337366",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_337367.json:
```json
{
    "body": "<a id='comment:4'></a>Why is `random_digraph` no longer deprecated? (I know nothing about the sandpiles code, just wondering.)",
    "created_at": "2017-05-02T22:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-337367",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>Why is `random_digraph` no longer deprecated? (I know nothing about the sandpiles code, just wondering.)



---

archive/issue_comments_337368.json:
```json
{
    "body": "<a id='comment:5'></a>There are several other places where you are removing deprecation warnings without removing the (previously) deprecated functions.",
    "created_at": "2017-05-02T22:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-337368",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>There are several other places where you are removing deprecation warnings without removing the (previously) deprecated functions.



---

archive/issue_comments_337369.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 jhpalmieri]:\n> There are several other places where you are removing deprecation warnings without removing the (previously) deprecated functions.\n\n\nDeprecated was placing them into the global namespace. These functions are still used internally in the module.",
    "created_at": "2017-05-02T22:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-337369",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>Replying to [comment:5 jhpalmieri]:
> There are several other places where you are removing deprecation warnings without removing the (previously) deprecated functions.


Deprecated was placing them into the global namespace. These functions are still used internally in the module.



---

archive/issue_comments_337370.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-05-02T23:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-337370",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_337371.json:
```json
{
    "body": "<a id='comment:8'></a>OK, I've removed two removable deprecated functions.",
    "created_at": "2017-05-02T23:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-337371",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>OK, I've removed two removable deprecated functions.



---

archive/issue_comments_337372.json:
```json
{
    "body": "<a id='comment:10'></a>This is not an issue that we should deal with on this ticket, but according to the deprecation notices, someone should move the functionality from `sandlib` to the catalog of examples accessible using `sandpiles`.",
    "created_at": "2017-05-03T18:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-337372",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>This is not an issue that we should deal with on this ticket, but according to the deprecation notices, someone should move the functionality from `sandlib` to the catalog of examples accessible using `sandpiles`.



---

archive/issue_comments_337373.json:
```json
{
    "body": "<a id='comment:11'></a>I'm happy with the changes here.",
    "created_at": "2017-05-03T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-337373",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'></a>I'm happy with the changes here.



---

archive/issue_comments_337374.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-03T19:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-337374",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_059483.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-08T21:18:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22933#event-59483"
}
```



---

archive/issue_comments_337375.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-08T21:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22933",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22933#issuecomment-337375",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
