# Issue 22522: generic latte_int interface to integrate

archive/issues_022285.json:
```json
{
    "body": "Provide a generic interface to integrate a polynomial over a polytope.\n\nSee also #18232.\n\nCC:  @videlec @mkoeppe @jplab\n\nKeywords: days84\n\nBranch/Commit: 6a474f92580914f1cf42595fd8ee7b882b244b5d\n\nReviewer: Matthias Koeppe\n\nAuthor: Marcelo Forets\n\nDependencies: #22497\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22522\n\n",
    "closed_at": "2017-03-27T20:42:02Z",
    "created_at": "2017-03-05T22:42:01Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "generic latte_int interface to integrate",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22522",
    "user": "https://github.com/mforets"
}
```
Provide a generic interface to integrate a polynomial over a polytope.

See also #18232.

CC:  @videlec @mkoeppe @jplab

Keywords: days84

Branch/Commit: 6a474f92580914f1cf42595fd8ee7b882b244b5d

Reviewer: Matthias Koeppe

Author: Marcelo Forets

Dependencies: #22497

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22522





---

archive/issue_comments_418429.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#22497\"",
    "created_at": "2017-03-05T22:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418429",
    "user": "https://github.com/mforets"
}
```

Changing dependencies from "" to "#22497"



---

archive/issue_comments_418430.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Provide a generic interface to integrate a polynomial over a polytope.\n+\n+See also #18232.\n``````\n",
    "created_at": "2017-03-06T00:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418430",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Provide a generic interface to integrate a polynomial over a polytope.
+
+See also #18232.
``````




---

archive/issue_comments_418431.json:
```json
{
    "body": "Changing keywords from \"\" to \"days84\".",
    "created_at": "2017-03-06T00:45:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418431",
    "user": "https://github.com/videlec"
}
```

Changing keywords from "" to "days84".



---

archive/issue_comments_418432.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mforets/22497\"",
    "created_at": "2017-03-06T15:41:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418432",
    "user": "https://github.com/mforets"
}
```

Changing branch from "" to "u/mforets/22497"



---

archive/issue_comments_418433.json:
```json
{
    "body": "Changing commit from \"\" to \"96e40991054c847b0d1fb97623aa36a61854411a\"",
    "created_at": "2017-03-06T15:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418433",
    "user": "https://github.com/mforets"
}
```

Changing commit from "" to "96e40991054c847b0d1fb97623aa36a61854411a"



---

archive/issue_comments_418434.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2017-03-06T15:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418434",
    "user": "https://github.com/mforets"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_418435.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-06T15:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418435",
    "user": "https://github.com/mforets"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_418436.json:
```json
{
    "body": "Changing commit from \"96e40991054c847b0d1fb97623aa36a61854411a\" to \"d3c95899bcff12e6a17dccd849a35d9274bb7bbd\"",
    "created_at": "2017-03-06T16:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418436",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "96e40991054c847b0d1fb97623aa36a61854411a" to "d3c95899bcff12e6a17dccd849a35d9274bb7bbd"



---

archive/issue_comments_418437.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-06T16:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418437",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418438.json:
```json
{
    "body": "<a id='comment:6'></a>Why your commit `d3c9589` is here!? Shouldn't it belong to another ticket?",
    "created_at": "2017-03-06T16:10:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418438",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>Why your commit `d3c9589` is here!? Shouldn't it belong to another ticket?



---

archive/issue_comments_418439.json:
```json
{
    "body": "Changing commit from \"d3c95899bcff12e6a17dccd849a35d9274bb7bbd\" to \"000bf8b56094cb83b11894e2c8195747e06c803f\"",
    "created_at": "2017-03-06T18:05:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418439",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d3c95899bcff12e6a17dccd849a35d9274bb7bbd" to "000bf8b56094cb83b11894e2c8195747e06c803f"



---

archive/issue_comments_418440.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-06T18:05:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418440",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418441.json:
```json
{
    "body": "Changing commit from \"000bf8b56094cb83b11894e2c8195747e06c803f\" to \"5aa669584a92f474fc1a797a3caad9c03c92d6cc\"",
    "created_at": "2017-03-07T00:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418441",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "000bf8b56094cb83b11894e2c8195747e06c803f" to "5aa669584a92f474fc1a797a3caad9c03c92d6cc"



---

archive/issue_comments_418442.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-07T00:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418442",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418443.json:
```json
{
    "body": "Changing commit from \"5aa669584a92f474fc1a797a3caad9c03c92d6cc\" to \"72d03a12c6fc8b02e67a97d61538ca47c3996c3e\"",
    "created_at": "2017-03-07T01:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418443",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5aa669584a92f474fc1a797a3caad9c03c92d6cc" to "72d03a12c6fc8b02e67a97d61538ca47c3996c3e"



---

archive/issue_comments_418444.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-07T01:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418444",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418445.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:6 vdelecroix]:\n> Why your commit `d3c9589` is here!? Shouldn't it belong to another ticket?\n\nThe branch is on top of the branch of #22497.",
    "created_at": "2017-03-07T15:48:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418445",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Replying to [comment:6 vdelecroix]:
> Why your commit `d3c9589` is here!? Shouldn't it belong to another ticket?

The branch is on top of the branch of #22497.



---

archive/issue_comments_418446.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Matthias Koeppe\"",
    "created_at": "2017-03-07T15:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418446",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Matthias Koeppe"



---

archive/issue_comments_418447.json:
```json
{
    "body": "<a id='comment:11'></a>Looks good to me.\n\nNow follow-up tickets with corresponding methods of `Polyhedron` would be good.",
    "created_at": "2017-03-07T15:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418447",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Looks good to me.

Now follow-up tickets with corresponding methods of `Polyhedron` would be good.



---

archive/issue_comments_418448.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-07T15:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418448",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_418449.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2017-03-07T19:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418449",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_418450.json:
```json
{
    "body": "Changing commit from \"72d03a12c6fc8b02e67a97d61538ca47c3996c3e\" to \"6a474f92580914f1cf42595fd8ee7b882b244b5d\"",
    "created_at": "2017-03-07T19:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418450",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "72d03a12c6fc8b02e67a97d61538ca47c3996c3e" to "6a474f92580914f1cf42595fd8ee7b882b244b5d"



---

archive/issue_comments_418451.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-03-07T19:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418451",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_418452.json:
```json
{
    "body": "<a id='comment:13'></a>What does \n\n```\n``[1,[2,2,2]]``\n```\ndo in the doctest?",
    "created_at": "2017-03-07T21:35:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418452",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>What does 

```
``[1,[2,2,2]]``
```
do in the doctest?



---

archive/issue_comments_418453.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-08T06:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418453",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418454.json:
```json
{
    "body": "Changing commit from \"6a474f92580914f1cf42595fd8ee7b882b244b5d\" to \"17911f7051d618046f8ed37681b6f4516ec751b3\"",
    "created_at": "2017-03-08T06:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418454",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6a474f92580914f1cf42595fd8ee7b882b244b5d" to "17911f7051d618046f8ed37681b6f4516ec751b3"



---

archive/issue_comments_418455.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:13 mkoeppe]:\n> What does \n> \n> ```\n> ``[1,[2,2,2]]``\n> ```\n> do in the doctest?\n\n\nIt's me struggling to get tests work in the particular case where a string is passed as argument  :( \n\nProbably some issue with string conversion. See this:\n\nIn the Sage REPL, the usual single quotes work, as in:\n\n```\nsage: P = polytopes.cuboctahedron()\nsage: P.integrate('[[3,[2,4,6]],[7,[0, 3, 5]]]')   \n629/47775\n```\n\n(ok I'm already using #20887 for P.integrate(..) but you get the point).\n\nHowever the doctests didn't pass if I used that, but they pass with the double quote in one test. In Python it seems to have a meaning:\n\n```\nsage: type(``x``)\n<type 'str'>\n```\n\nBut I'd like to understand what went wrong with just single quotes, of course.",
    "created_at": "2017-03-08T07:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418455",
    "user": "https://github.com/mforets"
}
```

<a id='comment:15'></a>Replying to [comment:13 mkoeppe]:
> What does 
> 
> ```
> ``[1,[2,2,2]]``
> ```
> do in the doctest?


It's me struggling to get tests work in the particular case where a string is passed as argument  :( 

Probably some issue with string conversion. See this:

In the Sage REPL, the usual single quotes work, as in:

```
sage: P = polytopes.cuboctahedron()
sage: P.integrate('[[3,[2,4,6]],[7,[0, 3, 5]]]')   
629/47775
```

(ok I'm already using #20887 for P.integrate(..) but you get the point).

However the doctests didn't pass if I used that, but they pass with the double quote in one test. In Python it seems to have a meaning:

```
sage: type(``x``)
<type 'str'>
```

But I'd like to understand what went wrong with just single quotes, of course.



---

archive/issue_comments_418456.json:
```json
{
    "body": "<a id='comment:16'></a>Learn about :: in the doc formatting. This will solve your problem.\nAlso build and verify the html doc.",
    "created_at": "2017-03-08T07:43:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418456",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>Learn about :: in the doc formatting. This will solve your problem.
Also build and verify the html doc.



---

archive/issue_comments_418457.json:
```json
{
    "body": "<a id='comment:17'></a>There are also a number of doc issues with `integrate` in `base.py`. The doc should start with\n\n```\n    def integrate(self, polynomial, **kwds):\n        r\"\"\"\n        Return the integral of a polynomial over a polytope.\n\n        INPUT:\n\n        - ``polynomial`` -- a multivariate polynomial or a valid LattE description string\n          for a polynomial\n\n        - ``**kwds`` -- additional keyword arguments that are passed to the engine\n\n        OUTPUT:\n\n        The integral of the polynomial over the polytope.\n\n        .. NOTE::\n\n            The polytope triangulation algorithm is used. This function depends on\n            LattE (i.e., the ``latte_int`` optional package).\n```\nThe code in the `EXAMPLES::` block also needs to be indented (as per comment:16).",
    "created_at": "2017-03-08T17:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418457",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>There are also a number of doc issues with `integrate` in `base.py`. The doc should start with

```
    def integrate(self, polynomial, **kwds):
        r"""
        Return the integral of a polynomial over a polytope.

        INPUT:

        - ``polynomial`` -- a multivariate polynomial or a valid LattE description string
          for a polynomial

        - ``**kwds`` -- additional keyword arguments that are passed to the engine

        OUTPUT:

        The integral of the polynomial over the polytope.

        .. NOTE::

            The polytope triangulation algorithm is used. This function depends on
            LattE (i.e., the ``latte_int`` optional package).
```
The code in the `EXAMPLES::` block also needs to be indented (as per comment:16).



---

archive/issue_comments_418458.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-09T17:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418458",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418459.json:
```json
{
    "body": "Changing commit from \"17911f7051d618046f8ed37681b6f4516ec751b3\" to \"507aea5adb6f05ddc95cfef7cd79d24d3041de10\"",
    "created_at": "2017-03-09T17:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418459",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "17911f7051d618046f8ed37681b6f4516ec751b3" to "507aea5adb6f05ddc95cfef7cd79d24d3041de10"



---

archive/issue_comments_418460.json:
```json
{
    "body": "<a id='comment:19'></a>done! and thanks both for the help. from my side this ticket and #20887 are ok.\n\nin the proposed solution, the new volume and integrate methods can also receive polyhedra in RDF, and each vertex is cast to QQ with an iterator over the vertices.",
    "created_at": "2017-03-09T17:46:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418460",
    "user": "https://github.com/mforets"
}
```

<a id='comment:19'></a>done! and thanks both for the help. from my side this ticket and #20887 are ok.

in the proposed solution, the new volume and integrate methods can also receive polyhedra in RDF, and each vertex is cast to QQ with an iterator over the vertices.



---

archive/issue_comments_418461.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 mforets]:\n> done! and thanks both for the help. from my side this ticket and #20887 are ok.\n\n\nNice work!\n\n> in the proposed solution, the new volume and integrate methods can also receive polyhedra in RDF, and each vertex is cast to QQ with an iterator over the vertices.\n\n\nIs the answer of `.integrate()` will be a RDF? Otherwise I think it is a bad idea.",
    "created_at": "2017-03-09T17:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418461",
    "user": "https://github.com/videlec"
}
```

<a id='comment:20'></a>Replying to [comment:19 mforets]:
> done! and thanks both for the help. from my side this ticket and #20887 are ok.


Nice work!

> in the proposed solution, the new volume and integrate methods can also receive polyhedra in RDF, and each vertex is cast to QQ with an iterator over the vertices.


Is the answer of `.integrate()` will be a RDF? Otherwise I think it is a bad idea.



---

archive/issue_comments_418462.json:
```json
{
    "body": "<a id='comment:21'></a>Replying to [comment:18 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                                                   |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n> |[91d885e](https://git.sagemath.org/sage.git/commit/?id=91d885edbccb92d581781c72f3c5eeb94417d0b8)|`Fix the docstrings, and enhance integrate method.`|\n> |[507aea5](https://git.sagemath.org/sage.git/commit/?id=507aea5adb6f05ddc95cfef7cd79d24d3041de10)|`Add the new volume engine Polyhedron.`|\n\n\nI don't understand why these commits are here... this ticket is about `generic latte_int interface to integrate`. If you change the purpose of the ticket you need to update the description.",
    "created_at": "2017-03-09T17:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418462",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'></a>Replying to [comment:18 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                                                   |
> |-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
> |[91d885e](https://git.sagemath.org/sage.git/commit/?id=91d885edbccb92d581781c72f3c5eeb94417d0b8)|`Fix the docstrings, and enhance integrate method.`|
> |[507aea5](https://git.sagemath.org/sage.git/commit/?id=507aea5adb6f05ddc95cfef7cd79d24d3041de10)|`Add the new volume engine Polyhedron.`|


I don't understand why these commits are here... this ticket is about `generic latte_int interface to integrate`. If you change the purpose of the ticket you need to update the description.



---

archive/issue_comments_418463.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-03-09T17:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418463",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_418464.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:20 vdelecroix]:\n> Replying to [comment:19 mforets]:\n> > done! and thanks both for the help. from my side this ticket and #20887 are ok.\n\n> \n> Nice work!\n> \n> > in the proposed solution, the new volume and integrate methods can also receive polyhedra in RDF, and each vertex is cast to QQ with an iterator over the vertices.\n\n> \n> Is the answer of `.integrate()` will be a RDF? Otherwise I think it is a bad idea.\n\n\nBut why? It will be a QQ.",
    "created_at": "2017-03-09T23:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418464",
    "user": "https://github.com/mforets"
}
```

<a id='comment:23'></a>Replying to [comment:20 vdelecroix]:
> Replying to [comment:19 mforets]:
> > done! and thanks both for the help. from my side this ticket and #20887 are ok.

> 
> Nice work!
> 
> > in the proposed solution, the new volume and integrate methods can also receive polyhedra in RDF, and each vertex is cast to QQ with an iterator over the vertices.

> 
> Is the answer of `.integrate()` will be a RDF? Otherwise I think it is a bad idea.


But why? It will be a QQ.



---

archive/issue_comments_418465.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:23 mforets]:\n> Replying to [comment:20 vdelecroix]:\n> > Replying to [comment:19 mforets]:\n> > > done! and thanks both for the help. from my side this ticket and #20887 are ok.\n\n> > \n> > Nice work!\n> > \n> > > in the proposed solution, the new volume and integrate methods can also receive polyhedra in RDF, and each vertex is cast to QQ with an iterator over the vertices.\n\n> > \n> > Is the answer of `.integrate()` will be a RDF? Otherwise I think it is a bad idea.\n\n> \n> But why? It will be a QQ.\n\n\nIt does not make any sense. If I have a Polyhedron defined over RDF (= non exact field) its volume can not defined as an element of QQ (= exact field).",
    "created_at": "2017-03-09T23:17:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418465",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'></a>Replying to [comment:23 mforets]:
> Replying to [comment:20 vdelecroix]:
> > Replying to [comment:19 mforets]:
> > > done! and thanks both for the help. from my side this ticket and #20887 are ok.

> > 
> > Nice work!
> > 
> > > in the proposed solution, the new volume and integrate methods can also receive polyhedra in RDF, and each vertex is cast to QQ with an iterator over the vertices.

> > 
> > Is the answer of `.integrate()` will be a RDF? Otherwise I think it is a bad idea.

> 
> But why? It will be a QQ.


It does not make any sense. If I have a Polyhedron defined over RDF (= non exact field) its volume can not defined as an element of QQ (= exact field).



---

archive/issue_comments_418466.json:
```json
{
    "body": "<a id='comment:25'></a>Hmm.. Matrices have a change_ring feature that comes very handy for conversion. Shall we add a similar one for Polyhedron? \n\nAnd following your recommendation, make integrate and volume via `latte` raise a value error when instantiated with, say, `P = 1.4142*polytopes.cube()`. \n\nWith the change ring, we could still integrate integrate a polynomial over P with the slightly more complicated `P.change_ring().integrate(x<sup>2*y</sup>2*z^2)`, instead of the ugly\n\n```\nsage: P_QQ = Polyhedron(vertices = [[QQ(vi) for vi in v] for v in P.vertices_generator()])\nsage: P_QQ.integrate(x^2*y^2*z^2)\n```\n\nIf there are alternative recommended options, I'd really like to learn; but I can post it as a ask.sagemath one if i'm off-topic :)",
    "created_at": "2017-03-10T07:41:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418466",
    "user": "https://github.com/mforets"
}
```

<a id='comment:25'></a>Hmm.. Matrices have a change_ring feature that comes very handy for conversion. Shall we add a similar one for Polyhedron? 

And following your recommendation, make integrate and volume via `latte` raise a value error when instantiated with, say, `P = 1.4142*polytopes.cube()`. 

With the change ring, we could still integrate integrate a polynomial over P with the slightly more complicated `P.change_ring().integrate(x<sup>2*y</sup>2*z^2)`, instead of the ugly

```
sage: P_QQ = Polyhedron(vertices = [[QQ(vi) for vi in v] for v in P.vertices_generator()])
sage: P_QQ.integrate(x^2*y^2*z^2)
```

If there are alternative recommended options, I'd really like to learn; but I can post it as a ask.sagemath one if i'm off-topic :)



---

archive/issue_comments_418467.json:
```json
{
    "body": "<a id='comment:26'></a>Integration over an RDF polyhedron via QQ polyhedron (latte) could make sense *as long as the method converts the answer back to RDF* to indicate that the answer is inexact.\n\nAs to `change_ring`, this could be useful. I had related discussions with JP.",
    "created_at": "2017-03-10T07:55:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418467",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>Integration over an RDF polyhedron via QQ polyhedron (latte) could make sense *as long as the method converts the answer back to RDF* to indicate that the answer is inexact.

As to `change_ring`, this could be useful. I had related discussions with JP.



---

archive/issue_comments_418468.json:
```json
{
    "body": "<a id='comment:27'></a>(In addition to `change_ring`, there could also be `change_backend`.)",
    "created_at": "2017-03-10T07:59:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418468",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>(In addition to `change_ring`, there could also be `change_backend`.)



---

archive/issue_comments_418469.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-10T08:52:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418469",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_418470.json:
```json
{
    "body": "Changing commit from \"507aea5adb6f05ddc95cfef7cd79d24d3041de10\" to \"a563192b0dcbce9ab4e1387a1f3435e5d179cbc9\"",
    "created_at": "2017-03-10T08:52:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "507aea5adb6f05ddc95cfef7cd79d24d3041de10" to "a563192b0dcbce9ab4e1387a1f3435e5d179cbc9"



---

archive/issue_comments_418471.json:
```json
{
    "body": "Changing branch from \"u/mforets/22497\" to \"u/mforets/22522\"",
    "created_at": "2017-03-10T09:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418471",
    "user": "https://github.com/mforets"
}
```

Changing branch from "u/mforets/22497" to "u/mforets/22522"



---

archive/issue_comments_418472.json:
```json
{
    "body": "Changing commit from \"a563192b0dcbce9ab4e1387a1f3435e5d179cbc9\" to \"6a474f92580914f1cf42595fd8ee7b882b244b5d\"",
    "created_at": "2017-03-10T09:00:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418472",
    "user": "https://github.com/mforets"
}
```

Changing commit from "a563192b0dcbce9ab4e1387a1f3435e5d179cbc9" to "6a474f92580914f1cf42595fd8ee7b882b244b5d"



---

archive/issue_comments_418473.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-03-10T09:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418473",
    "user": "https://github.com/mforets"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418474.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-03-10T09:14:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418474",
    "user": "https://github.com/mforets"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_418475.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-03-10T14:43:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418475",
    "user": "https://github.com/mforets"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418476.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-14T19:06:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418476",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_418477.json:
```json
{
    "body": "Changing branch from \"u/mforets/22522\" to \"6a474f92580914f1cf42595fd8ee7b882b244b5d\"",
    "created_at": "2017-03-27T20:42:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418477",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mforets/22522" to "6a474f92580914f1cf42595fd8ee7b882b244b5d"



---

archive/issue_events_058865.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-27T20:42:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22522#event-58865"
}
```



---

archive/issue_comments_418478.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-27T20:42:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22522#issuecomment-418478",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
