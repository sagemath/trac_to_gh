# Issue 22421: Pynac's to_gamma() is buggy

archive/issues_022184.json:
```json
{
    "body": "CC:  @rwst\n\nSee https://github.com/pynac/pynac/issues/231\n\nOn some systems (possibly depending on the linker), this doctest fails:\n\n```\nsage -t src/sage/symbolic/expression.pyx\n**********************************************************************\nFile \"src/sage/symbolic/expression.pyx\", line 9627, in sage.symbolic.expression.Expression.to_gamma\nFailed example:\n    binomial(m,n).to_gamma()\nExpected:\n    gamma(m + 1)/(gamma(m - n + 1)*gamma(n + 1))\nGot:\n    binomial(m, n)\n**********************************************************************\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/22421\n\n",
    "closed_at": "2017-03-01T18:51:17Z",
    "created_at": "2017-02-23T10:33:06Z",
    "labels": [
        "component: packages: standard",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Pynac's to_gamma() is buggy",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22421",
    "user": "https://github.com/jdemeyer"
}
```
CC:  @rwst

See https://github.com/pynac/pynac/issues/231

On some systems (possibly depending on the linker), this doctest fails:

```
sage -t src/sage/symbolic/expression.pyx
**********************************************************************
File "src/sage/symbolic/expression.pyx", line 9627, in sage.symbolic.expression.Expression.to_gamma
Failed example:
    binomial(m,n).to_gamma()
Expected:
    gamma(m + 1)/(gamma(m - n + 1)*gamma(n + 1))
Got:
    binomial(m, n)
**********************************************************************
```

Issue created by migration from https://trac.sagemath.org/ticket/22421





---

archive/issue_comments_307781.json:
```json
{
    "body": "Do you have an idea how much time you need to fix the problems with #22364? Given that #22364 needs work anyway, it makes sense to fix this ticket there (and close this as duplicate). On the other hand, if you don't manage to fix #22364 quickly, we should fix this ticket first because it gives doctest failures.",
    "created_at": "2017-02-23T16:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22421#issuecomment-307781",
    "user": "https://github.com/jdemeyer"
}
```

Do you have an idea how much time you need to fix the problems with #22364? Given that #22364 needs work anyway, it makes sense to fix this ticket there (and close this as duplicate). On the other hand, if you don't manage to fix #22364 quickly, we should fix this ticket first because it gives doctest failures.



---

archive/issue_comments_307782.json:
```json
{
    "body": "Replying to [comment:2 jdemeyer]:\n> Do you have an idea how much time you need to fix the problems with #22364? Given that #22364 needs work anyway, it makes sense to fix this ticket there (and close this as duplicate). On the other hand, if you don't manage to fix #22364 quickly, we should fix this ticket first because it gives doctest failures.\n\n\nNo idea about the time because the cause of that is not established with certainty. So, as fixing this the usual way would need a new release that includes #22364 it would be best to not do a release but commit a Pynac patch (containing https://github.com/pynac/pynac/commit/a4dce19f33fc52245f324cb535d24233988dcfa1.diff) with this branch.",
    "created_at": "2017-02-24T06:58:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22421#issuecomment-307782",
    "user": "https://github.com/rwst"
}
```

Replying to [comment:2 jdemeyer]:
> Do you have an idea how much time you need to fix the problems with #22364? Given that #22364 needs work anyway, it makes sense to fix this ticket there (and close this as duplicate). On the other hand, if you don't manage to fix #22364 quickly, we should fix this ticket first because it gives doctest failures.


No idea about the time because the cause of that is not established with certainty. So, as fixing this the usual way would need a new release that includes #22364 it would be best to not do a release but commit a Pynac patch (containing https://github.com/pynac/pynac/commit/a4dce19f33fc52245f324cb535d24233988dcfa1.diff) with this branch.



---

archive/issue_comments_307783.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-02-24T07:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22421#issuecomment-307783",
    "user": "https://github.com/rwst"
}
```

New commits:



---

archive/issue_comments_307784.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-02-24T07:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22421#issuecomment-307784",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_307785.json:
```json
{
    "body": "Patches are automatically applied now, you should not manually run `sage-apply-patches` (so you can remove the whole `patch()` function).",
    "created_at": "2017-02-24T09:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22421#issuecomment-307785",
    "user": "https://github.com/jdemeyer"
}
```

Patches are automatically applied now, you should not manually run `sage-apply-patches` (so you can remove the whole `patch()` function).



---

archive/issue_comments_307786.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-02-24T09:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22421#issuecomment-307786",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_307787.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-24T13:50:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22421#issuecomment-307787",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307788.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-02-24T13:50:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22421#issuecomment-307788",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_307789.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-25T07:58:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22421#issuecomment-307789",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_058676.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-01T18:51:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22421",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22421#event-58676"
}
```



---

archive/issue_comments_307790.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-01T18:51:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22421",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22421#issuecomment-307790",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
