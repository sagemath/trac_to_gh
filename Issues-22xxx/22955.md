# Issue 22955: Put MatrixSpace in the category of ModulesWithBasis

archive/issues_022718.json:
```json
{
    "body": "`MatrixSpace` has a basis, so we should put it into the category of `ModulesWithBasis`. We also use `dict` as `monomial_coefficients` with the extra keyword `copy` (default `True`) and change the `basis` to return a `Family`.\n\nIn order to introduce a deprecation and have a fixed list order, we need to pass the `keys` attribute to `FamilyWithHiddenIndices` and up to its base classes.\n\n**CC:**  @nthiery @fchapoton @kcrisman @darijgr\n\n**Branch/Commit:** [5d873942ab2538b8b9bb2e27a9125f67a2e87d60](https://github.com/sagemath/sagetrac-mirror/commit/5d873942ab2538b8b9bb2e27a9125f67a2e87d60)\n\n**Reviewer:** Nicolas M. Thi\u00e9ry, Travis Scrimshaw\n\n**Author:** Travis Scrimshaw, Nicolas M. Thi\u00e9ry\n\nIssue created by migration from https://trac.sagemath.org/ticket/22955\n\n",
    "closed_at": "2017-06-22T07:24:30Z",
    "created_at": "2017-05-06T18:04:44Z",
    "labels": [
        "component: linear algebra",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "title": "Put MatrixSpace in the category of ModulesWithBasis",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/22955",
    "user": "https://github.com/tscrim"
}
```
`MatrixSpace` has a basis, so we should put it into the category of `ModulesWithBasis`. We also use `dict` as `monomial_coefficients` with the extra keyword `copy` (default `True`) and change the `basis` to return a `Family`.

In order to introduce a deprecation and have a fixed list order, we need to pass the `keys` attribute to `FamilyWithHiddenIndices` and up to its base classes.

**CC:**  @nthiery @fchapoton @kcrisman @darijgr

**Branch/Commit:** [5d873942ab2538b8b9bb2e27a9125f67a2e87d60](https://github.com/sagemath/sagetrac-mirror/commit/5d873942ab2538b8b9bb2e27a9125f67a2e87d60)

**Reviewer:** Nicolas M. Thiéry, Travis Scrimshaw

**Author:** Travis Scrimshaw, Nicolas M. Thiéry

Issue created by migration from https://trac.sagemath.org/ticket/22955





---

archive/issue_events_204569.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-06T18:05:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204569"
}
```



---

archive/issue_comments_345368.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/559fb199cbf2b5afd829e83b75d354f44656a610\">559fb19</a></td><td><code>Adding MatrixSpace to the WithBasis category.</code></td></tr></table>\n",
    "created_at": "2017-05-06T18:05:49Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345368",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/559fb199cbf2b5afd829e83b75d354f44656a610">559fb19</a></td><td><code>Adding MatrixSpace to the WithBasis category.</code></td></tr></table>




---

archive/issue_comments_345369.json:
```json
{
    "body": "**Branch:** [public/linear_algebra/matrix_space_with_basis-22955](https://github.com/sagemath/sagetrac-mirror/tree/public/linear_algebra/matrix_space_with_basis-22955)",
    "created_at": "2017-05-06T18:05:49Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345369",
    "user": "https://github.com/tscrim"
}
```

**Branch:** [public/linear_algebra/matrix_space_with_basis-22955](https://github.com/sagemath/sagetrac-mirror/tree/public/linear_algebra/matrix_space_with_basis-22955)



---

archive/issue_comments_345370.json:
```json
{
    "body": "**Commit:** [559fb199cbf2b5afd829e83b75d354f44656a610](https://github.com/sagemath/sagetrac-mirror/commit/559fb199cbf2b5afd829e83b75d354f44656a610)",
    "created_at": "2017-05-06T18:05:49Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345370",
    "user": "https://github.com/tscrim"
}
```

**Commit:** [559fb199cbf2b5afd829e83b75d354f44656a610](https://github.com/sagemath/sagetrac-mirror/commit/559fb199cbf2b5afd829e83b75d354f44656a610)



---

archive/issue_comments_345371.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53fb4cac237498ea65990c39d137f444342b134e\">53fb4ca</a></td><td><code>Adding MatrixSpace to the WithBasis category.</code></td></tr></table>\n",
    "created_at": "2017-05-06T18:21:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345371",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53fb4cac237498ea65990c39d137f444342b134e">53fb4ca</a></td><td><code>Adding MatrixSpace to the WithBasis category.</code></td></tr></table>




---

archive/issue_comments_345372.json:
```json
{
    "body": "**Changing commit** from \"[559fb199cbf2b5afd829e83b75d354f44656a610](https://github.com/sagemath/sagetrac-mirror/commit/559fb199cbf2b5afd829e83b75d354f44656a610)\" to \"[53fb4cac237498ea65990c39d137f444342b134e](https://github.com/sagemath/sagetrac-mirror/commit/53fb4cac237498ea65990c39d137f444342b134e)\".",
    "created_at": "2017-05-06T18:21:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345372",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[559fb199cbf2b5afd829e83b75d354f44656a610](https://github.com/sagemath/sagetrac-mirror/commit/559fb199cbf2b5afd829e83b75d354f44656a610)" to "[53fb4cac237498ea65990c39d137f444342b134e](https://github.com/sagemath/sagetrac-mirror/commit/53fb4cac237498ea65990c39d137f444342b134e)".



---

archive/issue_comments_345373.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61d6b8ae931489e8c8c369fcc03d490c3252817a\">61d6b8a</a></td><td><code>Adding MatrixSpace to the WithBasis category.</code></td></tr></table>\n",
    "created_at": "2017-05-06T18:23:19Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345373",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61d6b8ae931489e8c8c369fcc03d490c3252817a">61d6b8a</a></td><td><code>Adding MatrixSpace to the WithBasis category.</code></td></tr></table>




---

archive/issue_comments_345374.json:
```json
{
    "body": "**Changing commit** from \"[53fb4cac237498ea65990c39d137f444342b134e](https://github.com/sagemath/sagetrac-mirror/commit/53fb4cac237498ea65990c39d137f444342b134e)\" to \"[61d6b8ae931489e8c8c369fcc03d490c3252817a](https://github.com/sagemath/sagetrac-mirror/commit/61d6b8ae931489e8c8c369fcc03d490c3252817a)\".",
    "created_at": "2017-05-06T18:23:19Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345374",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[53fb4cac237498ea65990c39d137f444342b134e](https://github.com/sagemath/sagetrac-mirror/commit/53fb4cac237498ea65990c39d137f444342b134e)" to "[61d6b8ae931489e8c8c369fcc03d490c3252817a](https://github.com/sagemath/sagetrac-mirror/commit/61d6b8ae931489e8c8c369fcc03d490c3252817a)".



---

archive/issue_comments_345375.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n `MatrixSpace` has a basis, so we should put it into the category of `ModulesWithBasis`. We also use `dict` as `monomial_coefficients` with the extra keyword `copy` (default `True`) and change the `basis` to return a `Family`.\n \n-**note** the change to `basis` is backwards incompatible.\n+In order to introduce a deprecation and have a fixed list order, we need to pass the `keys` attribute to `FamilyWithHiddenIndices` and up to its base classes.\n``````\n",
    "created_at": "2017-05-06T18:25:08Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345375",
    "user": "https://github.com/tscrim"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 `MatrixSpace` has a basis, so we should put it into the category of `ModulesWithBasis`. We also use `dict` as `monomial_coefficients` with the extra keyword `copy` (default `True`) and change the `basis` to return a `Family`.
 
-**note** the change to `basis` is backwards incompatible.
+In order to introduce a deprecation and have a fixed list order, we need to pass the `keys` attribute to `FamilyWithHiddenIndices` and up to its base classes.
``````




---

archive/issue_events_204570.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-06T18:28:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "component: categories",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204570"
}
```



---

archive/issue_events_204571.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-06T18:28:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "component: linear algebra",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204571"
}
```



---

archive/issue_comments_345376.json:
```json
{
    "body": "<a id='comment:6'></a>\nAltogether it looks good. And it's very nice to have `MatrixSpaces` get finally closer from proper ModulesWithBasis`. Thanks Travis!\n\nI still need to double check on the changes in `Family`. Maybe they are unavoidable with the current `FiniteFamily` API which makes it a pinch cumbursome to create a family from a set of indices and a function. For consistency it could be good to create the basis through `Family` and have the latter use `keys` to specify the indices as is already done when it creates a `FiniteFamily`. More later.\n\nOne additional question: rather than loading more categories upon startup, would we have a chance to avoid creating a matrix space upon Sage startup? That's what we would want in the long run.",
    "created_at": "2017-05-07T21:39:40Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345376",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:6'></a>
Altogether it looks good. And it's very nice to have `MatrixSpaces` get finally closer from proper ModulesWithBasis`. Thanks Travis!

I still need to double check on the changes in `Family`. Maybe they are unavoidable with the current `FiniteFamily` API which makes it a pinch cumbursome to create a family from a set of indices and a function. For consistency it could be good to create the basis through `Family` and have the latter use `keys` to specify the indices as is already done when it creates a `FiniteFamily`. More later.

One additional question: rather than loading more categories upon startup, would we have a chance to avoid creating a matrix space upon Sage startup? That's what we would want in the long run.



---

archive/issue_comments_345377.json:
```json
{
    "body": "<a id='comment:7'></a>\nPlausibly unrelated, but just in case, see #12099.",
    "created_at": "2017-05-08T01:48:37Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345377",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:7'></a>
Plausibly unrelated, but just in case, see #12099.



---

archive/issue_comments_345378.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [nthiery](#comment%3A6):\n> Altogether it looks good. And it's very nice to have `MatrixSpaces` get finally closer from proper ModulesWithBasis`. Thanks Travis!\n\n\nThis has been something I have wanted for a long time too with some use cases.\n\n> I still need to double check on the changes in `Family`. Maybe they are unavoidable with the current `FiniteFamily` API which makes it a pinch cumbursome to create a family from a set of indices and a function. For consistency it could be good to create the basis through `Family` and have the latter use `keys` to specify the indices as is already done when it creates a `FiniteFamily`. More later.\n\n\nReally the only reason I make these changes is so the print order is fixed. I feel this is a natural change. I don't think I am quite following what you are saying about the API.\n\n> One additional question: rather than loading more categories upon startup, would we have a chance to avoid creating a matrix space upon Sage startup? That's what we would want in the long run.\n\n\nI agree. Maybe I shouldn't be so lazy here... <.< >.>",
    "created_at": "2017-05-08T06:18:52Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345378",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
Replying to [nthiery](#comment%3A6):
> Altogether it looks good. And it's very nice to have `MatrixSpaces` get finally closer from proper ModulesWithBasis`. Thanks Travis!


This has been something I have wanted for a long time too with some use cases.

> I still need to double check on the changes in `Family`. Maybe they are unavoidable with the current `FiniteFamily` API which makes it a pinch cumbursome to create a family from a set of indices and a function. For consistency it could be good to create the basis through `Family` and have the latter use `keys` to specify the indices as is already done when it creates a `FiniteFamily`. More later.


Really the only reason I make these changes is so the print order is fixed. I feel this is a natural change. I don't think I am quite following what you are saying about the API.

> One additional question: rather than loading more categories upon startup, would we have a chance to avoid creating a matrix space upon Sage startup? That's what we would want in the long run.


I agree. Maybe I shouldn't be so lazy here... <.< >.>



---

archive/issue_comments_345379.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [tscrim](#comment%3A8):\n> Really the only reason I make these changes is so the print order is fixed.\n> I feel this is a natural change.\n\n\nAgreed.\n\n> I don't think I am quite following what you are saying about the API.\n\n\nI'll give it a shot in terms of code now.",
    "created_at": "2017-05-08T13:52:28Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345379",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:9'></a>
Replying to [tscrim](#comment%3A8):
> Really the only reason I make these changes is so the print order is fixed.
> I feel this is a natural change.


Agreed.

> I don't think I am quite following what you are saying about the API.


I'll give it a shot in terms of code now.



---

archive/issue_comments_345380.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [nthiery](#comment%3A9):\n> Replying to [tscrim](#comment%3A8):\n> > I don't think I am quite following what you are saying about the API.\n\n> \n> I'll give it a shot in terms of code now.\n\n\nGreat, thanks.",
    "created_at": "2017-05-08T13:53:40Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345380",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
Replying to [nthiery](#comment%3A9):
> Replying to [tscrim](#comment%3A8):
> > I don't think I am quite following what you are saying about the API.

> 
> I'll give it a shot in terms of code now.


Great, thanks.



---

archive/issue_comments_345381.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d02023034623ebdfca48d4ed52866b4b3d79817\">2d02023</a></td><td><code>22955: Added test for Family's preservation of key order when there are hidden keys.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea8e1fb327b29397d2ebfec0779262922d30b3bb\">ea8e1fb</a></td><td><code>22955: trivial spacing fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b7507e6716aab1da8bbbd42ca5e9649286dd38f\">0b7507e</a></td><td><code>22955: small improvements to the documentation and deprecation warning message</code></td></tr></table>\n",
    "created_at": "2017-05-08T14:33:20Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345381",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d02023034623ebdfca48d4ed52866b4b3d79817">2d02023</a></td><td><code>22955: Added test for Family's preservation of key order when there are hidden keys.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea8e1fb327b29397d2ebfec0779262922d30b3bb">ea8e1fb</a></td><td><code>22955: trivial spacing fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b7507e6716aab1da8bbbd42ca5e9649286dd38f">0b7507e</a></td><td><code>22955: small improvements to the documentation and deprecation warning message</code></td></tr></table>




---

archive/issue_comments_345382.json:
```json
{
    "body": "**Changing commit** from \"[61d6b8ae931489e8c8c369fcc03d490c3252817a](https://github.com/sagemath/sagetrac-mirror/commit/61d6b8ae931489e8c8c369fcc03d490c3252817a)\" to \"[0b7507e6716aab1da8bbbd42ca5e9649286dd38f](https://github.com/sagemath/sagetrac-mirror/commit/0b7507e6716aab1da8bbbd42ca5e9649286dd38f)\".",
    "created_at": "2017-05-08T14:33:20Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345382",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[61d6b8ae931489e8c8c369fcc03d490c3252817a](https://github.com/sagemath/sagetrac-mirror/commit/61d6b8ae931489e8c8c369fcc03d490c3252817a)" to "[0b7507e6716aab1da8bbbd42ca5e9649286dd38f](https://github.com/sagemath/sagetrac-mirror/commit/0b7507e6716aab1da8bbbd42ca5e9649286dd38f)".



---

archive/issue_comments_345383.json:
```json
{
    "body": "<a id='comment:12'></a>\nOk, after reading in detail the Family changes, that's actually how I would have done it myself; all good! I added a test. It would have been best done in a separate ticket, but let's move on.\n\nAbout the changes in `*tour_linalg`, we have a slight problem: the change in the example would require to update the comment just above which says that `basis` returns a list. No big deal in itself, but we need to change that in a bunch of languages; I could take care of the german, french, and english versions; maybe you can handle one or two more. We need people for the others. Dima for russian?\n\nAbout the change in the `french_book` directory: changes there require a discussion with the book authors, to make sure the book is kept in sync. I discussed with myself, so that's done :-)",
    "created_at": "2017-05-08T14:50:29Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345383",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:12'></a>
Ok, after reading in detail the Family changes, that's actually how I would have done it myself; all good! I added a test. It would have been best done in a separate ticket, but let's move on.

About the changes in `*tour_linalg`, we have a slight problem: the change in the example would require to update the comment just above which says that `basis` returns a list. No big deal in itself, but we need to change that in a bunch of languages; I could take care of the german, french, and english versions; maybe you can handle one or two more. We need people for the others. Dima for russian?

About the change in the `french_book` directory: changes there require a discussion with the book authors, to make sure the book is kept in sync. I discussed with myself, so that's done :-)



---

archive/issue_comments_345384.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [nthiery](#comment%3A12):\n> About the changes in `*tour_linalg`, we have a slight problem: the change in the example would require to update the comment just above which says that `basis` returns a list. No big deal in itself, but we need to change that in a bunch of languages; I could take care of the german, french, and english versions; maybe you can handle one or two more. We need people for the others. Dima for russian?\n\n\nI can do the Spanish and Japanese and probably the Portugese. We could also ask Darij for the Russian too.\n\n> About the change in the `french_book` directory: changes there require a discussion with the book authors, to make sure the book is kept in sync. I discussed with myself, so that's done :-)\n\n\n`<sup>_</sup>`",
    "created_at": "2017-05-08T15:35:31Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345384",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
Replying to [nthiery](#comment%3A12):
> About the changes in `*tour_linalg`, we have a slight problem: the change in the example would require to update the comment just above which says that `basis` returns a list. No big deal in itself, but we need to change that in a bunch of languages; I could take care of the german, french, and english versions; maybe you can handle one or two more. We need people for the others. Dima for russian?


I can do the Spanish and Japanese and probably the Portugese. We could also ask Darij for the Russian too.

> About the change in the `french_book` directory: changes there require a discussion with the book authors, to make sure the book is kept in sync. I discussed with myself, so that's done :-)


`<sup>_</sup>`



---

archive/issue_comments_345385.json:
```json
{
    "body": "<a id='comment:14'></a>\nIs the only change you plan to do `list` -> `family`?",
    "created_at": "2017-05-08T15:38:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345385",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
Is the only change you plan to do `list` -> `family`?



---

archive/issue_comments_345386.json:
```json
{
    "body": "<a id='comment:15'></a>\nLet me do the French and English now, to see how it feels under the fingers ...",
    "created_at": "2017-05-08T15:49:32Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345386",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:15'></a>
Let me do the French and English now, to see how it feels under the fingers ...



---

archive/issue_comments_345387.json:
```json
{
    "body": "**Changing commit** from \"[0b7507e6716aab1da8bbbd42ca5e9649286dd38f](https://github.com/sagemath/sagetrac-mirror/commit/0b7507e6716aab1da8bbbd42ca5e9649286dd38f)\" to \"[2d0439ac68c9e16d77b54496d69cd0a8f7d0793f](https://github.com/sagemath/sagetrac-mirror/commit/2d0439ac68c9e16d77b54496d69cd0a8f7d0793f)\".",
    "created_at": "2017-05-08T16:03:11Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345387",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0b7507e6716aab1da8bbbd42ca5e9649286dd38f](https://github.com/sagemath/sagetrac-mirror/commit/0b7507e6716aab1da8bbbd42ca5e9649286dd38f)" to "[2d0439ac68c9e16d77b54496d69cd0a8f7d0793f](https://github.com/sagemath/sagetrac-mirror/commit/2d0439ac68c9e16d77b54496d69cd0a8f7d0793f)".



---

archive/issue_comments_345388.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d0439ac68c9e16d77b54496d69cd0a8f7d0793f\">2d0439a</a></td><td><code>22955: comment update in the multilingual tutorial; some are crude google translations; please proofread!</code></td></tr></table>\n",
    "created_at": "2017-05-08T16:03:11Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345388",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d0439ac68c9e16d77b54496d69cd0a8f7d0793f">2d0439a</a></td><td><code>22955: comment update in the multilingual tutorial; some are crude google translations; please proofread!</code></td></tr></table>




---

archive/issue_comments_345389.json:
```json
{
    "body": "<a id='comment:17'></a>\nI ended up doing a first draft for all languages but Japanese. Some translations are plain google ... I double checked they seemed reasonable, and I imagine that, for very constrainted technical sentences like this, google should do a fair job. But please proofread!",
    "created_at": "2017-05-08T16:07:07Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345389",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:17'></a>
I ended up doing a first draft for all languages but Japanese. Some translations are plain google ... I double checked they seemed reasonable, and I imagine that, for very constrainted technical sentences like this, google should do a fair job. But please proofread!



---

archive/issue_comments_345390.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [tscrim](#comment%3A8):\n> I agree. Maybe I shouldn't be so lazy here... <.< >.>\n\n\n:-)\n\nPlease go ahead and explore. If it's not too hard, let's do it in this ticket. If not, oh well.",
    "created_at": "2017-05-08T16:08:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345390",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:18'></a>
Replying to [tscrim](#comment%3A8):
> I agree. Maybe I shouldn't be so lazy here... <.< >.>


:-)

Please go ahead and explore. If it's not too hard, let's do it in this ticket. If not, oh well.



---

archive/issue_comments_345391.json:
```json
{
    "body": "**Changing commit** from \"[2d0439ac68c9e16d77b54496d69cd0a8f7d0793f](https://github.com/sagemath/sagetrac-mirror/commit/2d0439ac68c9e16d77b54496d69cd0a8f7d0793f)\" to \"[1466c6980a32bf010a4680f2d99ee392d66330d7](https://github.com/sagemath/sagetrac-mirror/commit/1466c6980a32bf010a4680f2d99ee392d66330d7)\".",
    "created_at": "2017-05-08T17:01:41Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345391",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2d0439ac68c9e16d77b54496d69cd0a8f7d0793f](https://github.com/sagemath/sagetrac-mirror/commit/2d0439ac68c9e16d77b54496d69cd0a8f7d0793f)" to "[1466c6980a32bf010a4680f2d99ee392d66330d7](https://github.com/sagemath/sagetrac-mirror/commit/1466c6980a32bf010a4680f2d99ee392d66330d7)".



---

archive/issue_comments_345392.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06a878be82a49a86fbb224719b3385e192cbb0a5\">06a878b</a></td><td><code>Removing unused MS_16_4.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b99050eff4b4728527bb9e8f608ad3feda17723f\">b99050e</a></td><td><code>Small doc cleanup of quaternion_algebra_cython.pyx.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1466c6980a32bf010a4680f2d99ee392d66330d7\">1466c69</a></td><td><code>Setting back at_startup=True.</code></td></tr></table>\n",
    "created_at": "2017-05-08T17:01:41Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345392",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06a878be82a49a86fbb224719b3385e192cbb0a5">06a878b</a></td><td><code>Removing unused MS_16_4.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b99050eff4b4728527bb9e8f608ad3feda17723f">b99050e</a></td><td><code>Small doc cleanup of quaternion_algebra_cython.pyx.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1466c6980a32bf010a4680f2d99ee392d66330d7">1466c69</a></td><td><code>Setting back at_startup=True.</code></td></tr></table>




---

archive/issue_comments_345393.json:
```json
{
    "body": "<a id='comment:20'></a>\nSo the current issue is in the `modular/arithgroup` imports at startup as they create a number of matrices at the module level. So I could go through and lazily import all of that, but I am not sure I want to go through that on this ticket.\n\nThe Spanish and English translations look good. I'm doing the Japanese now.",
    "created_at": "2017-05-08T17:05:28Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345393",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>
So the current issue is in the `modular/arithgroup` imports at startup as they create a number of matrices at the module level. So I could go through and lazily import all of that, but I am not sure I want to go through that on this ticket.

The Spanish and English translations look good. I'm doing the Japanese now.



---

archive/issue_comments_345394.json:
```json
{
    "body": "**Changing commit** from \"[1466c6980a32bf010a4680f2d99ee392d66330d7](https://github.com/sagemath/sagetrac-mirror/commit/1466c6980a32bf010a4680f2d99ee392d66330d7)\" to \"[ddd2e9e4f6301ed73de27c06e67e8345bae12275](https://github.com/sagemath/sagetrac-mirror/commit/ddd2e9e4f6301ed73de27c06e67e8345bae12275)\".",
    "created_at": "2017-05-08T17:14:46Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345394",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1466c6980a32bf010a4680f2d99ee392d66330d7](https://github.com/sagemath/sagetrac-mirror/commit/1466c6980a32bf010a4680f2d99ee392d66330d7)" to "[ddd2e9e4f6301ed73de27c06e67e8345bae12275](https://github.com/sagemath/sagetrac-mirror/commit/ddd2e9e4f6301ed73de27c06e67e8345bae12275)".



---

archive/issue_comments_345395.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddd2e9e4f6301ed73de27c06e67e8345bae12275\">ddd2e9e</a></td><td><code>Change in Japanese tutorial.</code></td></tr></table>\n",
    "created_at": "2017-05-08T17:14:46Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345395",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddd2e9e4f6301ed73de27c06e67e8345bae12275">ddd2e9e</a></td><td><code>Change in Japanese tutorial.</code></td></tr></table>




---

archive/issue_comments_345396.json:
```json
{
    "body": "<a id='comment:22'></a>\nOkay, this should be the correct Japanese version.",
    "created_at": "2017-05-08T17:16:42Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345396",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>
Okay, this should be the correct Japanese version.



---

archive/issue_comments_345397.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [tscrim](#comment%3A20):\n> So the current issue is in the `modular/arithgroup` imports at startup as they create a number of matrices at the module level. So I could go through and lazily import all of that, but I am not sure I want to go through that on this ticket.\n\n\nAll right. We want to do this at some point, but that's going beyond the scope of this ticket. \nCould you just add, near the relevant atStartup=True, a reference to this ticket?\nThanks for investigating!",
    "created_at": "2017-05-08T18:58:56Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345397",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:23'></a>
Replying to [tscrim](#comment%3A20):
> So the current issue is in the `modular/arithgroup` imports at startup as they create a number of matrices at the module level. So I could go through and lazily import all of that, but I am not sure I want to go through that on this ticket.


All right. We want to do this at some point, but that's going beyond the scope of this ticket. 
Could you just add, near the relevant atStartup=True, a reference to this ticket?
Thanks for investigating!



---

archive/issue_comments_345398.json:
```json
{
    "body": "<a id='comment:24'></a>\nDo you have any chance to have someone cross check the russian / japanese? Otherwise, up to the above comment, and assuming all tests pass, I believe this is good to go.",
    "created_at": "2017-05-08T19:01:15Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345398",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:24'></a>
Do you have any chance to have someone cross check the russian / japanese? Otherwise, up to the above comment, and assuming all tests pass, I believe this is good to go.



---

archive/issue_comments_345399.json:
```json
{
    "body": "**Changing commit** from \"[ddd2e9e4f6301ed73de27c06e67e8345bae12275](https://github.com/sagemath/sagetrac-mirror/commit/ddd2e9e4f6301ed73de27c06e67e8345bae12275)\" to \"[b73a8eab7ed9c5fbe13b2edf43c96e426e1bea25](https://github.com/sagemath/sagetrac-mirror/commit/b73a8eab7ed9c5fbe13b2edf43c96e426e1bea25)\".",
    "created_at": "2017-05-08T21:19:36Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345399",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ddd2e9e4f6301ed73de27c06e67e8345bae12275](https://github.com/sagemath/sagetrac-mirror/commit/ddd2e9e4f6301ed73de27c06e67e8345bae12275)" to "[b73a8eab7ed9c5fbe13b2edf43c96e426e1bea25](https://github.com/sagemath/sagetrac-mirror/commit/b73a8eab7ed9c5fbe13b2edf43c96e426e1bea25)".



---

archive/issue_comments_345400.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b73a8eab7ed9c5fbe13b2edf43c96e426e1bea25\">b73a8ea</a></td><td><code>Added comment about at_startup.</code></td></tr></table>\n",
    "created_at": "2017-05-08T21:19:36Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345400",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b73a8eab7ed9c5fbe13b2edf43c96e426e1bea25">b73a8ea</a></td><td><code>Added comment about at_startup.</code></td></tr></table>




---

archive/issue_comments_345401.json:
```json
{
    "body": "<a id='comment:26'></a>\nI've added the comment. I don't have anyone offhand who I could ask about the Japanese. Darij, could you take a very quick look at the Russian?",
    "created_at": "2017-05-08T21:20:29Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345401",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:26'></a>
I've added the comment. I don't have anyone offhand who I could ask about the Japanese. Darij, could you take a very quick look at the Russian?



---

archive/issue_comments_345402.json:
```json
{
    "body": "<a id='comment:27'></a>\nThe change to rc/doc/ru/tutorial/tour_linalg.rst is perfectly fine.",
    "created_at": "2017-05-08T21:21:49Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345402",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:27'></a>
The change to rc/doc/ru/tutorial/tour_linalg.rst is perfectly fine.



---

archive/issue_comments_345403.json:
```json
{
    "body": "<a id='comment:28'></a>\nThank you for checking Darij!",
    "created_at": "2017-05-08T21:23:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345403",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:28'></a>
Thank you for checking Darij!



---

archive/issue_comments_345404.json:
```json
{
    "body": "**Changing commit** from \"[b73a8eab7ed9c5fbe13b2edf43c96e426e1bea25](https://github.com/sagemath/sagetrac-mirror/commit/b73a8eab7ed9c5fbe13b2edf43c96e426e1bea25)\" to \"[67caf377be37943ccbf7f42fc549de1132bec901](https://github.com/sagemath/sagetrac-mirror/commit/67caf377be37943ccbf7f42fc549de1132bec901)\".",
    "created_at": "2017-05-19T20:46:25Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345404",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b73a8eab7ed9c5fbe13b2edf43c96e426e1bea25](https://github.com/sagemath/sagetrac-mirror/commit/b73a8eab7ed9c5fbe13b2edf43c96e426e1bea25)" to "[67caf377be37943ccbf7f42fc549de1132bec901](https://github.com/sagemath/sagetrac-mirror/commit/67caf377be37943ccbf7f42fc549de1132bec901)".



---

archive/issue_comments_345405.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4e222e9cc2628a30af208e07c94c3be8b0787b9\">a4e222e</a></td><td><code>Merge branch 'public/linear_algebra/matrix_space_with_basis-22955' of git://trac.sagemath.org/sage into public/linear_algebra/matrix_space_with_basis-22955</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67caf377be37943ccbf7f42fc549de1132bec901\">67caf37</a></td><td><code>Fixing most of failing doctests.</code></td></tr></table>\n",
    "created_at": "2017-05-19T20:46:25Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4e222e9cc2628a30af208e07c94c3be8b0787b9">a4e222e</a></td><td><code>Merge branch 'public/linear_algebra/matrix_space_with_basis-22955' of git://trac.sagemath.org/sage into public/linear_algebra/matrix_space_with_basis-22955</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67caf377be37943ccbf7f42fc549de1132bec901">67caf37</a></td><td><code>Fixing most of failing doctests.</code></td></tr></table>




---

archive/issue_comments_345406.json:
```json
{
    "body": "<a id='comment:30'></a>\nIf you wait until July, then I can get someone to look at the Japanese when I am in Japan. Although I am fairly confident about the translation, and we can always make additional changes later.\n\nHowever, we currently have 1 failing doctest in `categories/covariant_functorial_construction.py` that I do not know if we need to simply change the output or change the test.\n\n```\nsage -t src/sage/categories/covariant_functorial_construction.py\n**********************************************************************\nFile \"src/sage/categories/covariant_functorial_construction.py\", line 262, in sage.categories.covariant_functorial_construction.FunctorialConstructionCategory._base_category_class\nFailed example:\n    F._foo\nExpected:\n    Traceback (most recent call last):\n    ...\n    ValueError: could not infer axiom for the nested class\n    <...AlgebrasWithBasis'> of <...GradedAlgebrasWithBasis'>\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/home/travis/sage-build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 509, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/travis/sage-build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 872, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.categories.covariant_functorial_construction.FunctorialConstructionCategory._base_category_class[4]>\", line 1, in <module>\n        F._foo\n      File \"sage/misc/classcall_metaclass.pyx\", line 409, in sage.misc.classcall_metaclass.ClasscallMetaclass.__get__ (/home/travis/sage-build/src/build/cythonized/sage/misc/classcall_metaclass.c:1537)\n        return cls.classget(cls, instance, owner)\n      File \"/home/travis/sage-build/local/lib/python2.7/site-packages/sage/categories/category_with_axiom.py\", line 2059, in __classget__\n        cls, cls._base_category_class_and_axiom[0], base_category_class)\n    AssertionError: base category class for <class 'sage.categories.algebras_with_basis.AlgebrasWithBasis'> mismatch; expected <class 'sage.categories.algebras.Algebras'>, got <class 'sage.categories.graded_algebras_with_basis.GradedAlgebrasWithBasis'>\n**********************************************************************\n```",
    "created_at": "2017-05-19T20:48:54Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345406",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:30'></a>
If you wait until July, then I can get someone to look at the Japanese when I am in Japan. Although I am fairly confident about the translation, and we can always make additional changes later.

However, we currently have 1 failing doctest in `categories/covariant_functorial_construction.py` that I do not know if we need to simply change the output or change the test.

```
sage -t src/sage/categories/covariant_functorial_construction.py
**********************************************************************
File "src/sage/categories/covariant_functorial_construction.py", line 262, in sage.categories.covariant_functorial_construction.FunctorialConstructionCategory._base_category_class
Failed example:
    F._foo
Expected:
    Traceback (most recent call last):
    ...
    ValueError: could not infer axiom for the nested class
    <...AlgebrasWithBasis'> of <...GradedAlgebrasWithBasis'>
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/home/travis/sage-build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 509, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/travis/sage-build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 872, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.categories.covariant_functorial_construction.FunctorialConstructionCategory._base_category_class[4]>", line 1, in <module>
        F._foo
      File "sage/misc/classcall_metaclass.pyx", line 409, in sage.misc.classcall_metaclass.ClasscallMetaclass.__get__ (/home/travis/sage-build/src/build/cythonized/sage/misc/classcall_metaclass.c:1537)
        return cls.classget(cls, instance, owner)
      File "/home/travis/sage-build/local/lib/python2.7/site-packages/sage/categories/category_with_axiom.py", line 2059, in __classget__
        cls, cls._base_category_class_and_axiom[0], base_category_class)
    AssertionError: base category class for <class 'sage.categories.algebras_with_basis.AlgebrasWithBasis'> mismatch; expected <class 'sage.categories.algebras.Algebras'>, got <class 'sage.categories.graded_algebras_with_basis.GradedAlgebrasWithBasis'>
**********************************************************************
```



---

archive/issue_events_204572.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-19T20:49:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204572"
}
```



---

archive/issue_events_204573.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-19T20:49:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204573"
}
```



---

archive/issue_events_204574.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-05T08:53:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204574"
}
```



---

archive/issue_events_204575.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-05T08:53:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204575"
}
```



---

archive/issue_comments_345407.json:
```json
{
    "body": "<a id='comment:32'></a>\nThat should have been needs_info for [comment:30](#comment%3A30).",
    "created_at": "2017-06-05T08:53:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345407",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:32'></a>
That should have been needs_info for [comment:30](#comment%3A30).



---

archive/issue_comments_345408.json:
```json
{
    "body": "<a id='comment:33'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24d9474a3e9b9500bd4856e05b9872afe6694820\">24d9474</a></td><td><code>Merge branch 'public/linear_algebra/matrix_space_with_basis-22955' of git://trac.sagemath.org/sage into public/linear_algebra/matrix_space_with_basis-22955</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ef34415e89ead1ebfc48b005bbec5f5cd325753\">0ef3441</a></td><td><code>Fixing last failing test. Adding doc comment about change.</code></td></tr></table>\n",
    "created_at": "2017-06-14T04:44:57Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345408",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24d9474a3e9b9500bd4856e05b9872afe6694820">24d9474</a></td><td><code>Merge branch 'public/linear_algebra/matrix_space_with_basis-22955' of git://trac.sagemath.org/sage into public/linear_algebra/matrix_space_with_basis-22955</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ef34415e89ead1ebfc48b005bbec5f5cd325753">0ef3441</a></td><td><code>Fixing last failing test. Adding doc comment about change.</code></td></tr></table>




---

archive/issue_comments_345409.json:
```json
{
    "body": "**Changing commit** from \"[67caf377be37943ccbf7f42fc549de1132bec901](https://github.com/sagemath/sagetrac-mirror/commit/67caf377be37943ccbf7f42fc549de1132bec901)\" to \"[0ef34415e89ead1ebfc48b005bbec5f5cd325753](https://github.com/sagemath/sagetrac-mirror/commit/0ef34415e89ead1ebfc48b005bbec5f5cd325753)\".",
    "created_at": "2017-06-14T04:44:57Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345409",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[67caf377be37943ccbf7f42fc549de1132bec901](https://github.com/sagemath/sagetrac-mirror/commit/67caf377be37943ccbf7f42fc549de1132bec901)" to "[0ef34415e89ead1ebfc48b005bbec5f5cd325753](https://github.com/sagemath/sagetrac-mirror/commit/0ef34415e89ead1ebfc48b005bbec5f5cd325753)".



---

archive/issue_events_204576.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-14T04:46:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204576"
}
```



---

archive/issue_events_204577.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-14T04:46:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204577"
}
```



---

archive/issue_comments_345410.json:
```json
{
    "body": "<a id='comment:34'></a>\nAfter a discussion with Nicolas, we concluded that we can simply change the doctest and we should put a note in about what will happen when `Algebras.WithBasis` is again lazy rather than resolved at startup. At this point, it just needs someone to flip the switch.",
    "created_at": "2017-06-14T04:46:56Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345410",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:34'></a>
After a discussion with Nicolas, we concluded that we can simply change the doctest and we should put a note in about what will happen when `Algebras.WithBasis` is again lazy rather than resolved at startup. At this point, it just needs someone to flip the switch.



---

archive/issue_comments_345411.json:
```json
{
    "body": "**Reviewer:** Nicolas M. Thi\u00e9ry, TravisScrimshaw",
    "created_at": "2017-06-14T04:46:56Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345411",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Nicolas M. Thiéry, TravisScrimshaw



---

archive/issue_comments_345412.json:
```json
{
    "body": "**Changing author** from \"Travis Scrimshaw\" to \"TravisScrimshaw, Nicolas M. Thi\u00e9ry\".",
    "created_at": "2017-06-14T04:46:56Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345412",
    "user": "https://github.com/tscrim"
}
```

**Changing author** from "Travis Scrimshaw" to "TravisScrimshaw, Nicolas M. Thiéry".



---

archive/issue_comments_345413.json:
```json
{
    "body": "**Changing commit** from \"[0ef34415e89ead1ebfc48b005bbec5f5cd325753](https://github.com/sagemath/sagetrac-mirror/commit/0ef34415e89ead1ebfc48b005bbec5f5cd325753)\" to \"[95a53a05a82303cc4849a82e2f648b820822a651](https://github.com/sagemath/sagetrac-mirror/commit/95a53a05a82303cc4849a82e2f648b820822a651)\".",
    "created_at": "2017-06-18T02:41:43Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345413",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0ef34415e89ead1ebfc48b005bbec5f5cd325753](https://github.com/sagemath/sagetrac-mirror/commit/0ef34415e89ead1ebfc48b005bbec5f5cd325753)" to "[95a53a05a82303cc4849a82e2f648b820822a651](https://github.com/sagemath/sagetrac-mirror/commit/95a53a05a82303cc4849a82e2f648b820822a651)".



---

archive/issue_comments_345414.json:
```json
{
    "body": "<a id='comment:35'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e819db38db42a9fadb0c4a9e8d2fe0646e0d2b4\">8e819db</a></td><td><code>Merge branch 'develop' into public/linear_algebra/matrix_space_with_basis-22955</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95a53a05a82303cc4849a82e2f648b820822a651\">95a53a0</a></td><td><code>Make MatrixSpace know it is finite dimensional.</code></td></tr></table>\n",
    "created_at": "2017-06-18T02:41:43Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345414",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e819db38db42a9fadb0c4a9e8d2fe0646e0d2b4">8e819db</a></td><td><code>Merge branch 'develop' into public/linear_algebra/matrix_space_with_basis-22955</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95a53a05a82303cc4849a82e2f648b820822a651">95a53a0</a></td><td><code>Make MatrixSpace know it is finite dimensional.</code></td></tr></table>




---

archive/issue_comments_345415.json:
```json
{
    "body": "<a id='comment:36'></a>\nOne more change: I made the matrix spaces know they were finite dimensional. This caused some problems with checking to see if certain inputs could be treated as vectors by seeing if they have a `_vector_` attribute. I took the approach that matrices were not to be considered as vectors in those cases.",
    "created_at": "2017-06-18T02:43:27Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345415",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:36'></a>
One more change: I made the matrix spaces know they were finite dimensional. This caused some problems with checking to see if certain inputs could be treated as vectors by seeing if they have a `_vector_` attribute. I took the approach that matrices were not to be considered as vectors in those cases.



---

archive/issue_events_204578.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-18T14:25:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204578"
}
```



---

archive/issue_events_204579.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-06-18T14:25:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204579"
}
```



---

archive/issue_comments_345416.json:
```json
{
    "body": "<a id='comment:37'></a>\nfailing doctests, see patchbot report",
    "created_at": "2017-06-18T14:25:41Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345416",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:37'></a>
failing doctests, see patchbot report



---

archive/issue_comments_345417.json:
```json
{
    "body": "**Changing commit** from \"[95a53a05a82303cc4849a82e2f648b820822a651](https://github.com/sagemath/sagetrac-mirror/commit/95a53a05a82303cc4849a82e2f648b820822a651)\" to \"[5d873942ab2538b8b9bb2e27a9125f67a2e87d60](https://github.com/sagemath/sagetrac-mirror/commit/5d873942ab2538b8b9bb2e27a9125f67a2e87d60)\".",
    "created_at": "2017-06-18T14:42:28Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345417",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[95a53a05a82303cc4849a82e2f648b820822a651](https://github.com/sagemath/sagetrac-mirror/commit/95a53a05a82303cc4849a82e2f648b820822a651)" to "[5d873942ab2538b8b9bb2e27a9125f67a2e87d60](https://github.com/sagemath/sagetrac-mirror/commit/5d873942ab2538b8b9bb2e27a9125f67a2e87d60)".



---

archive/issue_comments_345418.json:
```json
{
    "body": "<a id='comment:38'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d873942ab2538b8b9bb2e27a9125f67a2e87d60\">5d87394</a></td><td><code>Trivial doctest fixes.</code></td></tr></table>\n",
    "created_at": "2017-06-18T14:42:28Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345418",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d873942ab2538b8b9bb2e27a9125f67a2e87d60">5d87394</a></td><td><code>Trivial doctest fixes.</code></td></tr></table>




---

archive/issue_events_204580.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-18T14:45:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204580"
}
```



---

archive/issue_events_204581.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-06-18T14:45:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204581"
}
```



---

archive/issue_comments_345419.json:
```json
{
    "body": "<a id='comment:39'></a>\nTrivial fixes.",
    "created_at": "2017-06-18T14:45:17Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345419",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:39'></a>
Trivial fixes.



---

archive/issue_comments_345420.json:
```json
{
    "body": "**Changing author** from \"TravisScrimshaw, Nicolas M. Thi\u00e9ry\" to \"Travis Scrimshaw, Nicolas M. Thi\u00e9ry\".",
    "created_at": "2017-06-18T14:55:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345420",
    "user": "https://github.com/tscrim"
}
```

**Changing author** from "TravisScrimshaw, Nicolas M. Thiéry" to "Travis Scrimshaw, Nicolas M. Thiéry".



---

archive/issue_comments_345421.json:
```json
{
    "body": "**Changing reviewer** from \"Nicolas M. Thi\u00e9ry, TravisScrimshaw\" to \"Nicolas M. Thi\u00e9ry, Travis Scrimshaw\".",
    "created_at": "2017-06-18T14:55:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345421",
    "user": "https://github.com/tscrim"
}
```

**Changing reviewer** from "Nicolas M. Thiéry, TravisScrimshaw" to "Nicolas M. Thiéry, Travis Scrimshaw".



---

archive/issue_comments_345422.json:
```json
{
    "body": "<a id='comment:41'></a>\nThanks Travis!\n\nThe Runtime Type Checking to distinguish vectors from matrices is somewhat smelly but I don't see a better way. And it's very nice to finally have matrix spaces as finite dimensional modules. So let it be.\n\nI am assuming the patchbot will go green after your latest fixes. Therefore positive review!\n(could you just double check that the pdf doc compiles?)",
    "created_at": "2017-06-19T19:57:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345422",
    "user": "https://github.com/nthiery"
}
```

<a id='comment:41'></a>
Thanks Travis!

The Runtime Type Checking to distinguish vectors from matrices is somewhat smelly but I don't see a better way. And it's very nice to finally have matrix spaces as finite dimensional modules. So let it be.

I am assuming the patchbot will go green after your latest fixes. Therefore positive review!
(could you just double check that the pdf doc compiles?)



---

archive/issue_events_204582.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2017-06-19T19:58:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204582"
}
```



---

archive/issue_events_204583.json:
```json
{
    "actor": "https://github.com/nthiery",
    "created_at": "2017-06-19T19:58:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204583"
}
```



---

archive/issue_comments_345423.json:
```json
{
    "body": "<a id='comment:43'></a>\nReplying to [nthiery](#comment%3A41):\n> The Runtime Type Checking to distinguish vectors from matrices is somewhat smelly but I don't see a better way. And it's very nice to finally have matrix spaces as finite dimensional modules. So let it be.\n\n\nI agree. There might be some better ways by checking dimensions or number of entries. However, it wasn't clear what was the best way forward and this kept the old behavior. We can always change it on a followup.\n\n> I am assuming the patchbot will go green after your latest fixes. Therefore positive review!\n> (could you just double check that the pdf doc compiles?)\n\n\nPatchbot came back (essentially) green, and I didn't notice a problem with the pdf doc.",
    "created_at": "2017-06-20T01:08:30Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345423",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:43'></a>
Replying to [nthiery](#comment%3A41):
> The Runtime Type Checking to distinguish vectors from matrices is somewhat smelly but I don't see a better way. And it's very nice to finally have matrix spaces as finite dimensional modules. So let it be.


I agree. There might be some better ways by checking dimensions or number of entries. However, it wasn't clear what was the best way forward and this kept the old behavior. We can always change it on a followup.

> I am assuming the patchbot will go green after your latest fixes. Therefore positive review!
> (could you just double check that the pdf doc compiles?)


Patchbot came back (essentially) green, and I didn't notice a problem with the pdf doc.



---

archive/issue_events_204584.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-22T07:24:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204584"
}
```



---

archive/issue_events_204585.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "66d056569c0d458caac0fc830b9033a20f68000e",
    "created_at": "2017-06-22T07:24:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22955#event-204585"
}
```



---

archive/issue_comments_345424.json:
```json
{
    "body": "**Changing branch** from \"[public/linear_algebra/matrix_space_with_basis-22955](https://github.com/sagemath/sagetrac-mirror/tree/public/linear_algebra/matrix_space_with_basis-22955)\" to \"[5d873942ab2538b8b9bb2e27a9125f67a2e87d60](https://github.com/sagemath/sagetrac-mirror/commit/5d873942ab2538b8b9bb2e27a9125f67a2e87d60)\".",
    "created_at": "2017-06-22T07:24:30Z",
    "issue": "https://github.com/sagemath/sage/issues/22955",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22955#issuecomment-345424",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/linear_algebra/matrix_space_with_basis-22955](https://github.com/sagemath/sagetrac-mirror/tree/public/linear_algebra/matrix_space_with_basis-22955)" to "[5d873942ab2538b8b9bb2e27a9125f67a2e87d60](https://github.com/sagemath/sagetrac-mirror/commit/5d873942ab2538b8b9bb2e27a9125f67a2e87d60)".
