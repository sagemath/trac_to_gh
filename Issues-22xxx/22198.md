# Issue 22198: Make cypari2 Python2 / Python3 compatible

archive/issues_021961.json:
```json
{
    "assignees": [],
    "body": "Currently string handling in `cypari2` is done via `PyString_AsString` which does not exist in Python 3. We rely on Cython to make proper conversions to `bytes`.\n\nDepends on #22185\n\nCC:  @defeo @jdemeyer\n\nBranch/Commit: **[7096c82](https://github.com/sagemath/sagetrac-mirror/commit/7096c82b4ec94c5d148231b7df518ca5154aad2a)**\n\nReviewer: **Jeroen Demeyer, Vincent Delecroix**\n\nAuthor: **Vincent Delecroix, Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22198_\n\n",
    "closed_at": "2017-01-29T12:04:46Z",
    "created_at": "2017-01-17T18:09:13Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20c%20lib",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make cypari2 Python2 / Python3 compatible",
    "type": "issue",
    "updated_at": "2017-01-29T12:04:46Z",
    "url": "https://github.com/sagemath/sage/issues/22198",
    "user": "https://github.com/videlec"
}
```
Currently string handling in `cypari2` is done via `PyString_AsString` which does not exist in Python 3. We rely on Cython to make proper conversions to `bytes`.

Depends on #22185

CC:  @defeo @jdemeyer

Branch/Commit: **[7096c82](https://github.com/sagemath/sagetrac-mirror/commit/7096c82b4ec94c5d148231b7df518ca5154aad2a)**

Reviewer: **Jeroen Demeyer, Vincent Delecroix**

Author: **Vincent Delecroix, Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/22198_





---

archive/issue_events_292938.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-17T18:09:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292938"
}
```



---

archive/issue_events_292939.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-17T18:09:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20c%20lib",
    "label_color": "000080",
    "label_name": "component: c lib",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292939"
}
```



---

archive/issue_events_292940.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-17T18:09:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292940"
}
```



---

archive/issue_events_292941.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-17T18:09:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292941"
}
```



---

archive/issue_events_292942.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-17T23:52:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292942"
}
```



---

archive/issue_comments_330831.json:
```json
{
    "body": "Branch: **[u/vdelecroix/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22198)**",
    "created_at": "2017-01-17T23:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330831",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22198)**



---

archive/issue_comments_330832.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/183588ea9ef578966fa62bd1a47db3a81fdebc29\">183588e</a></td><td><code>21808: fix some more .python() .sage()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88288670d22328ea0ff386c826c65d729504cb58\">8828867</a></td><td><code>Python 3 compatibility in doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87b6ac3b975a5b5a51f29d3f2b552dac2ba54615\">87b6ac3</a></td><td><code>Merge branch 't/21807/21807' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee54f071a26c63821f475d2832c7bb1fbbdd7e95\">ee54f07</a></td><td><code>Python 3 compatibility in doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a35c89fe2e02d7bc31c531180c82918bebf7ee2\">7a35c89</a></td><td><code>Merge commit '6022cab1880d6f3820e0f028671ddd2983eae42b'; commit 'ee54f071a26c63821f475d2832c7bb1fbbdd7e95' into ticket/22183</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/235efd32d22100011b78e882ccb1bff284c702f5\">235efd3</a></td><td><code>Rename PariInstance -> Pari</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f04abaa16a6770e952f8f803623f65c4236df29\">6f04aba</a></td><td><code>Remove unused imports from sage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c258dcad4c117684ce00d9002eb23da79196f47e\">c258dca</a></td><td><code>Rename gen -> Gen</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c4433cf66fb6d9f5fcb5b4429d9f25978008f36\">0c4433c</a></td><td><code>Fix documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff6a3fd4bedecacb6f3061ccd51c1ee725b2a864\">ff6a3fd</a></td><td><code>22198: do not depend on PyString_AsString</code></td></tr></table>\n",
    "created_at": "2017-01-17T23:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330832",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'>Comment 1:</a>
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/183588ea9ef578966fa62bd1a47db3a81fdebc29">183588e</a></td><td><code>21808: fix some more .python() .sage()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88288670d22328ea0ff386c826c65d729504cb58">8828867</a></td><td><code>Python 3 compatibility in doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87b6ac3b975a5b5a51f29d3f2b552dac2ba54615">87b6ac3</a></td><td><code>Merge branch 't/21807/21807' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee54f071a26c63821f475d2832c7bb1fbbdd7e95">ee54f07</a></td><td><code>Python 3 compatibility in doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a35c89fe2e02d7bc31c531180c82918bebf7ee2">7a35c89</a></td><td><code>Merge commit '6022cab1880d6f3820e0f028671ddd2983eae42b'; commit 'ee54f071a26c63821f475d2832c7bb1fbbdd7e95' into ticket/22183</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/235efd32d22100011b78e882ccb1bff284c702f5">235efd3</a></td><td><code>Rename PariInstance -> Pari</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f04abaa16a6770e952f8f803623f65c4236df29">6f04aba</a></td><td><code>Remove unused imports from sage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c258dcad4c117684ce00d9002eb23da79196f47e">c258dca</a></td><td><code>Rename gen -> Gen</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c4433cf66fb6d9f5fcb5b4429d9f25978008f36">0c4433c</a></td><td><code>Fix documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff6a3fd4bedecacb6f3061ccd51c1ee725b2a864">ff6a3fd</a></td><td><code>22198: do not depend on PyString_AsString</code></td></tr></table>




---

archive/issue_comments_330833.json:
```json
{
    "body": "Commit: **[ff6a3fd](https://github.com/sagemath/sagetrac-mirror/commit/ff6a3fd4bedecacb6f3061ccd51c1ee725b2a864)**",
    "created_at": "2017-01-17T23:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330833",
    "user": "https://github.com/videlec"
}
```

Commit: **[ff6a3fd](https://github.com/sagemath/sagetrac-mirror/commit/ff6a3fd4bedecacb6f3061ccd51c1ee725b2a864)**



---

archive/issue_comments_330834.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nDid you actually check that Python 3 works with this patch?",
    "created_at": "2017-01-18T11:53:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330834",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'>Comment 2:</a>
Did you actually check that Python 3 works with this patch?



---

archive/issue_comments_330835.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nHow can I do that?!\n\nAt least it works in cypari2 with commit [88bf24e](https://github.com/defeo/cypari2/commit/88bf24e073c1cd76b1ca197cb6079895f47ac7c6).",
    "created_at": "2017-01-18T11:56:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330835",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'>Comment 3:</a>
How can I do that?!

At least it works in cypari2 with commit [88bf24e](https://github.com/defeo/cypari2/commit/88bf24e073c1cd76b1ca197cb6079895f47ac7c6).



---

archive/issue_comments_330836.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22198)** to **[u/jdemeyer/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22198)**",
    "created_at": "2017-01-18T16:30:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330836",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/vdelecroix/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22198)** to **[u/jdemeyer/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22198)**



---

archive/issue_comments_330837.json:
```json
{
    "body": "Changed commit from **[ff6a3fd](https://github.com/sagemath/sagetrac-mirror/commit/ff6a3fd4bedecacb6f3061ccd51c1ee725b2a864)** to **[683816d](https://github.com/sagemath/sagetrac-mirror/commit/683816d54d501f344124ae80f4a90170e517b186)**",
    "created_at": "2017-01-18T16:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330837",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[ff6a3fd](https://github.com/sagemath/sagetrac-mirror/commit/ff6a3fd4bedecacb6f3061ccd51c1ee725b2a864)** to **[683816d](https://github.com/sagemath/sagetrac-mirror/commit/683816d54d501f344124ae80f4a90170e517b186)**



---

archive/issue_comments_330838.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nThis is a much simpler version, relying on Cython to convert `str` -> `bytes`.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/683816d54d501f344124ae80f4a90170e517b186\">683816d</a></td><td><code>22198: do not depend on PyString_AsString</code></td></tr></table>\n",
    "created_at": "2017-01-18T16:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330838",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'>Comment 5:</a>
This is a much simpler version, relying on Cython to convert `str` -> `bytes`.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/683816d54d501f344124ae80f4a90170e517b186">683816d</a></td><td><code>22198: do not depend on PyString_AsString</code></td></tr></table>




---

archive/issue_comments_330839.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nNote: Cython converts Unicode strings to `bytes` by using `sys.getdefaultencoding()` which seems like a reasonable thing to do. In Python 2, this encoding is ASCII by default, in Python 3 it is UTF-8 by default.",
    "created_at": "2017-01-18T17:29:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330839",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'>Comment 6:</a>
Note: Cython converts Unicode strings to `bytes` by using `sys.getdefaultencoding()` which seems like a reasonable thing to do. In Python 2, this encoding is ASCII by default, in Python 3 it is UTF-8 by default.



---

archive/issue_events_292943.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-19T09:50:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292943"
}
```



---

archive/issue_events_292944.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-19T09:50:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292944"
}
```



---

archive/issue_comments_330840.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nFor me it compiles but does not work in Python 3\n\n```\n>>> import cypari2\n>>> pari = cypari2.Pari()\n>>> pari(\"zeta(2)\")\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"cypari2/pari_instance.pyx\", line 831, in cypari2.pari_instance.Pari.__call__ (cypari2/pari_instance.c:13408)\n  File \"cypari2/gen.pyx\", line 4534, in cypari2.gen.objtogen (cypari2/gen.c:128337)\nTypeError: expected bytes, str found\n```",
    "created_at": "2017-01-19T09:50:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330840",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'>Comment 7:</a>
For me it compiles but does not work in Python 3

```
>>> import cypari2
>>> pari = cypari2.Pari()
>>> pari("zeta(2)")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "cypari2/pari_instance.pyx", line 831, in cypari2.pari_instance.Pari.__call__ (cypari2/pari_instance.c:13408)
  File "cypari2/gen.pyx", line 4534, in cypari2.gen.objtogen (cypari2/gen.c:128337)
TypeError: expected bytes, str found
```



---

archive/issue_comments_330841.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nActually, in Cython for Python 3 given a string `s` the conversion\n\n```\n<bytes> s\n```\ndoes not do anything!! (tested with Cython version 0.25.2)",
    "created_at": "2017-01-19T10:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330841",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'>Comment 8:</a>
Actually, in Cython for Python 3 given a string `s` the conversion

```
<bytes> s
```
does not do anything!! (tested with Cython version 0.25.2)



---

archive/issue_comments_330842.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nIn your patch, `bytes` do not get catch in Python 3.",
    "created_at": "2017-01-19T12:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330842",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'>Comment 9:</a>
In your patch, `bytes` do not get catch in Python 3.



---

archive/issue_comments_330843.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\n`<bytes>s` is **not** a conversion, it's a cast! So yes, it doesn't \"do\" anything and that's a feature.",
    "created_at": "2017-01-19T13:01:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330843",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'>Comment 10:</a>
`<bytes>s` is **not** a conversion, it's a cast! So yes, it doesn't "do" anything and that's a feature.



---

archive/issue_comments_330844.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nWith your patch, unicode are also not treated correctly (see [comment:7]).",
    "created_at": "2017-01-19T14:45:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330844",
    "user": "https://github.com/videlec"
}
```

<a id='comment:11'>Comment 11:</a>
With your patch, unicode are also not treated correctly (see [comment:7]).



---

archive/issue_comments_330845.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nAnd conversion does fail\n\n```\nPython 3.5.2\n>>> bytes(\"hello\")\nTraceback (most recent call last):\n...\nTypeError: string argument without an encoding\n```\nI don't understand where the default encoding that you mentioned in [comment:6] is intended to happen.\n\nEDIT: this command fails in the same way in Cython",
    "created_at": "2017-01-19T15:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330845",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'>Comment 12:</a>
And conversion does fail

```
Python 3.5.2
>>> bytes("hello")
Traceback (most recent call last):
...
TypeError: string argument without an encoding
```
I don't understand where the default encoding that you mentioned in [comment:6] is intended to happen.

EDIT: this command fails in the same way in Cython



---

archive/issue_comments_330846.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nThe default encoding is something Cython-specific when passing `unicode` or `bytes` to C as a `char*`. It's not about converting within Python from `unicode` to `bytes`.",
    "created_at": "2017-01-19T16:40:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330846",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'>Comment 13:</a>
The default encoding is something Cython-specific when passing `unicode` or `bytes` to C as a `char*`. It's not about converting within Python from `unicode` to `bytes`.



---

archive/issue_comments_330847.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nReplying to [@jdemeyer](#comment%3A13):\n> The default encoding is something Cython-specific when passing `unicode` or `bytes` to C as a `char*`. It's not about converting within Python from `unicode` to `bytes`.\n\nI know and I already mentioned it in [comment:12]: the code behaves the same when compiled in Cython. You can check with\n\n```\nPython 3.5.2\n>>> import cython\n>>> cython.inline('bytes(\"hello\")')\nTraceback (most recent call last):\n...\nTypeError: string argument without an encoding\n```",
    "created_at": "2017-01-19T16:44:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330847",
    "user": "https://github.com/videlec"
}
```

<a id='comment:14'>Comment 14:</a>
Replying to [@jdemeyer](#comment%3A13):
> The default encoding is something Cython-specific when passing `unicode` or `bytes` to C as a `char*`. It's not about converting within Python from `unicode` to `bytes`.

I know and I already mentioned it in [comment:12]: the code behaves the same when compiled in Cython. You can check with

```
Python 3.5.2
>>> import cython
>>> cython.inline('bytes("hello")')
Traceback (most recent call last):
...
TypeError: string argument without an encoding
```



---

archive/issue_comments_330848.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nReplying to [@videlec](#comment%3A14):\n> I know and I already mentioned it in [comment:12]: the code behaves the same when compiled in Cython.\n\nYes, and I already mentioned that it's *not* about `bytes(foo)`, it's about passing `foo` as a `char*` to C.",
    "created_at": "2017-01-19T16:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330848",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'>Comment 15:</a>
Replying to [@videlec](#comment%3A14):
> I know and I already mentioned it in [comment:12]: the code behaves the same when compiled in Cython.

Yes, and I already mentioned that it's *not* about `bytes(foo)`, it's about passing `foo` as a `char*` to C.



---

archive/issue_events_292945.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-19T21:58:35Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "title_is": "Make cypari2 Python2 / Python3 compatible",
    "title_was": "make cypari2 Python2 / Python3 compatible",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292945"
}
```



---

archive/issue_comments_330849.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/819ed9ec1916e2a8f4104b2b937ffb42a76db350\">819ed9e</a></td><td><code>Trac #22198: do not depend on PyString_AsString</code></td></tr></table>\n",
    "created_at": "2017-01-19T22:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330849",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/819ed9ec1916e2a8f4104b2b937ffb42a76db350">819ed9e</a></td><td><code>Trac #22198: do not depend on PyString_AsString</code></td></tr></table>




---

archive/issue_comments_330850.json:
```json
{
    "body": "Changed commit from **[683816d](https://github.com/sagemath/sagetrac-mirror/commit/683816d54d501f344124ae80f4a90170e517b186)** to **[819ed9e](https://github.com/sagemath/sagetrac-mirror/commit/819ed9ec1916e2a8f4104b2b937ffb42a76db350)**",
    "created_at": "2017-01-19T22:49:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330850",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[683816d](https://github.com/sagemath/sagetrac-mirror/commit/683816d54d501f344124ae80f4a90170e517b186)** to **[819ed9e](https://github.com/sagemath/sagetrac-mirror/commit/819ed9ec1916e2a8f4104b2b937ffb42a76db350)**



---

archive/issue_events_292946.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-19T22:50:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292946"
}
```



---

archive/issue_events_292947.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-19T22:50:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292947"
}
```



---

archive/issue_comments_330851.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nDoes this work?",
    "created_at": "2017-01-19T22:50:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330851",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'>Comment 18:</a>
Does this work?



---

archive/issue_comments_330852.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nI don't think so: `bytes` and `basestring` are disjoint in Python 3. Let me try.",
    "created_at": "2017-01-20T09:52:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330852",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'>Comment 19:</a>
I don't think so: `bytes` and `basestring` are disjoint in Python 3. Let me try.



---

archive/issue_comments_330853.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nActually it fails at compilation\n\n```\nImportError: Building module cython_string failed: ['LookupError: unknown encoding: default\\n']\n```\nThe encoding used seems to be the encoding of the file, not of the system. Adding `# encoding: utf-8` at the top of the file make it works.",
    "created_at": "2017-01-20T10:06:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330853",
    "user": "https://github.com/videlec"
}
```

<a id='comment:20'>Comment 20:</a>
Actually it fails at compilation

```
ImportError: Building module cython_string failed: ['LookupError: unknown encoding: default\n']
```
The encoding used seems to be the encoding of the file, not of the system. Adding `# encoding: utf-8` at the top of the file make it works.



---

archive/issue_comments_330854.json:
```json
{
    "body": "Attachment: **[cython_string.pyx.gz](https://github.com/sagemath/sage/files/ticket22198/cython_string.pyx.gz)**",
    "created_at": "2017-01-20T10:07:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330854",
    "user": "https://github.com/videlec"
}
```

Attachment: **[cython_string.pyx.gz](https://github.com/sagemath/sage/files/ticket22198/cython_string.pyx.gz)**



---

archive/issue_comments_330855.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [@videlec](#comment%3A19):\n> I don't think so: `bytes` and `basestring` are disjoint in Python 3. Let me try.\n\nIndeed\n\n```\nPython 3.5.2\n>>> import cypari2\n>>> pari = cypari2.Pari()\n>>> pari(b\"zeta(2)\")\nTraceback (most recent call last):\n...\nPariError: syntax error, unexpected variable name, expecting $end\n```",
    "created_at": "2017-01-20T12:20:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330855",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [@videlec](#comment%3A19):
> I don't think so: `bytes` and `basestring` are disjoint in Python 3. Let me try.

Indeed

```
Python 3.5.2
>>> import cypari2
>>> pari = cypari2.Pari()
>>> pari(b"zeta(2)")
Traceback (most recent call last):
...
PariError: syntax error, unexpected variable name, expecting $end
```



---

archive/issue_comments_330856.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22198)** to **[u/vdelecroix/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22198)**",
    "created_at": "2017-01-20T12:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330856",
    "user": "https://github.com/videlec"
}
```

Changed branch from **[u/jdemeyer/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22198)** to **[u/vdelecroix/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22198)**



---

archive/issue_comments_330857.json:
```json
{
    "body": "Changed commit from **[819ed9e](https://github.com/sagemath/sagetrac-mirror/commit/819ed9ec1916e2a8f4104b2b937ffb42a76db350)** to **[ff6a3fd](https://github.com/sagemath/sagetrac-mirror/commit/ff6a3fd4bedecacb6f3061ccd51c1ee725b2a864)**",
    "created_at": "2017-01-20T12:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330857",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[819ed9e](https://github.com/sagemath/sagetrac-mirror/commit/819ed9ec1916e2a8f4104b2b937ffb42a76db350)** to **[ff6a3fd](https://github.com/sagemath/sagetrac-mirror/commit/ff6a3fd4bedecacb6f3061ccd51c1ee725b2a864)**



---

archive/issue_comments_330858.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff6a3fd4bedecacb6f3061ccd51c1ee725b2a864\">ff6a3fd</a></td><td><code>22198: do not depend on PyString_AsString</code></td></tr></table>\n",
    "created_at": "2017-01-20T12:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330858",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'>Comment 22:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff6a3fd4bedecacb6f3061ccd51c1ee725b2a864">ff6a3fd</a></td><td><code>22198: do not depend on PyString_AsString</code></td></tr></table>




---

archive/issue_comments_330859.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/819ed9ec1916e2a8f4104b2b937ffb42a76db350\">819ed9e</a></td><td><code>Trac #22198: do not depend on PyString_AsString</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c55c787706ed2205cb85a554b752ae829d710c5\">6c55c78</a></td><td><code>Trac #22198: fix bytes for Python3</code></td></tr></table>\n",
    "created_at": "2017-01-20T12:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330859",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:23'>Comment 23:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/819ed9ec1916e2a8f4104b2b937ffb42a76db350">819ed9e</a></td><td><code>Trac #22198: do not depend on PyString_AsString</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c55c787706ed2205cb85a554b752ae829d710c5">6c55c78</a></td><td><code>Trac #22198: fix bytes for Python3</code></td></tr></table>




---

archive/issue_comments_330860.json:
```json
{
    "body": "Changed commit from **[ff6a3fd](https://github.com/sagemath/sagetrac-mirror/commit/ff6a3fd4bedecacb6f3061ccd51c1ee725b2a864)** to **[6c55c78](https://github.com/sagemath/sagetrac-mirror/commit/6c55c787706ed2205cb85a554b752ae829d710c5)**",
    "created_at": "2017-01-20T12:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330860",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ff6a3fd](https://github.com/sagemath/sagetrac-mirror/commit/ff6a3fd4bedecacb6f3061ccd51c1ee725b2a864)** to **[6c55c78](https://github.com/sagemath/sagetrac-mirror/commit/6c55c787706ed2205cb85a554b752ae829d710c5)**



---

archive/issue_comments_330861.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nplease see my last commit 6c55c78 that does work in the standalone cypari.",
    "created_at": "2017-01-20T12:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330861",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'>Comment 24:</a>
please see my last commit 6c55c78 that does work in the standalone cypari.



---

archive/issue_events_292948.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-20T13:39:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292948"
}
```



---

archive/issue_events_292949.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-20T13:39:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292949"
}
```



---

archive/issue_comments_330862.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer, Vincent Delecroix**",
    "created_at": "2017-01-20T13:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330862",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Jeroen Demeyer, Vincent Delecroix**



---

archive/issue_comments_330863.json:
```json
{
    "body": "Changed author from **Vincent Delecroix** to **Vincent Delecroix, Jeroen Demeyer**",
    "created_at": "2017-01-20T13:39:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330863",
    "user": "https://github.com/videlec"
}
```

Changed author from **Vincent Delecroix** to **Vincent Delecroix, Jeroen Demeyer**



---

archive/issue_comments_330864.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22198)** to **[u/jdemeyer/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22198)**",
    "created_at": "2017-01-21T13:05:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330864",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/vdelecroix/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22198)** to **[u/jdemeyer/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22198)**



---

archive/issue_events_292950.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-21T13:19:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292950"
}
```



---

archive/issue_events_292951.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-21T13:19:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292951"
}
```



---

archive/issue_comments_330865.json:
```json
{
    "body": "Changed commit from **[6c55c78](https://github.com/sagemath/sagetrac-mirror/commit/6c55c787706ed2205cb85a554b752ae829d710c5)** to **[7096c82](https://github.com/sagemath/sagetrac-mirror/commit/7096c82b4ec94c5d148231b7df518ca5154aad2a)**",
    "created_at": "2017-01-21T13:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330865",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[6c55c78](https://github.com/sagemath/sagetrac-mirror/commit/6c55c787706ed2205cb85a554b752ae829d710c5)** to **[7096c82](https://github.com/sagemath/sagetrac-mirror/commit/7096c82b4ec94c5d148231b7df518ca5154aad2a)**



---

archive/issue_comments_330866.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nDoes this work too? It's a slightly more efficient version of your code.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7096c82b4ec94c5d148231b7df518ca5154aad2a\">7096c82</a></td><td><code>Trac #22198: fix bytes for Python3</code></td></tr></table>\n",
    "created_at": "2017-01-21T13:19:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330866",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'>Comment 27:</a>
Does this work too? It's a slightly more efficient version of your code.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7096c82b4ec94c5d148231b7df518ca5154aad2a">7096c82</a></td><td><code>Trac #22198: fix bytes for Python3</code></td></tr></table>




---

archive/issue_comments_330867.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nIt does.",
    "created_at": "2017-01-27T15:40:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330867",
    "user": "https://github.com/videlec"
}
```

<a id='comment:28'>Comment 28:</a>
It does.



---

archive/issue_comments_330868.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nPositive review then?",
    "created_at": "2017-01-27T15:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330868",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'>Comment 29:</a>
Positive review then?



---

archive/issue_events_292952.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-27T15:45:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292952"
}
```



---

archive/issue_events_292953.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-27T15:45:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292953"
}
```



---

archive/issue_comments_330869.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22198)** to **[7096c82](https://github.com/sagemath/sagetrac-mirror/commit/7096c82b4ec94c5d148231b7df518ca5154aad2a)**",
    "created_at": "2017-01-29T12:04:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22198#issuecomment-330869",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/22198](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22198)** to **[7096c82](https://github.com/sagemath/sagetrac-mirror/commit/7096c82b4ec94c5d148231b7df518ca5154aad2a)**



---

archive/issue_events_292954.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-29T12:04:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292954"
}
```



---

archive/issue_events_292955.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "fbe5bcc39f898461e51ca8ef41ab45f1aa74983e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-01-29T12:04:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22198",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22198#event-292955"
}
```
