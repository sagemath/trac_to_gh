# Issue 22959: Doctest fix for: series() yields wrong result depending on precision

archive/issues_022722.json:
```json
{
    "body": "In the current `8.0.beta5` I get the following:\n\n```\nsage: f = x/(1-x^2)\nsage: f.series(x==0, 10)\n1*x^2 + 1*x^4 + 1*x^6 + 1*x^8 + Order(x^10)\nsage: f.series(x==0, 11)\n1*x + 1*x^3 + 1*x^5 + 1*x^7 + 1*x^9 + Order(x^11)\n```\n\nThis seems to be a regression from somewhere between `sage-7.5` (where the result is still correct) and `sage-7.6`.\n\nCC:  @rwst\n\nBranch/Commit: b12106198107961e7a2370c34a2b0738471becc3\n\nReviewer: Benjamin Hackl\n\nAuthor: Ralf Stephan\n\nDependencies: #22969\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22959\n\n",
    "closed_at": "2017-05-27T23:42:26Z",
    "created_at": "2017-05-08T13:20:25Z",
    "labels": [
        "component: calculus",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Doctest fix for: series() yields wrong result depending on precision",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22959",
    "user": "https://github.com/behackl"
}
```
In the current `8.0.beta5` I get the following:

```
sage: f = x/(1-x^2)
sage: f.series(x==0, 10)
1*x^2 + 1*x^4 + 1*x^6 + 1*x^8 + Order(x^10)
sage: f.series(x==0, 11)
1*x + 1*x^3 + 1*x^5 + 1*x^7 + 1*x^9 + Order(x^11)
```

This seems to be a regression from somewhere between `sage-7.5` (where the result is still correct) and `sage-7.6`.

CC:  @rwst

Branch/Commit: b12106198107961e7a2370c34a2b0738471becc3

Reviewer: Benjamin Hackl

Author: Ralf Stephan

Dependencies: #22969

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22959





---

archive/issue_comments_429491.json:
```json
{
    "body": "<a id='comment:1'></a>As this means that `series` delivers a mathematically wrong result, I've set the priority to `blocker` (and this should *really* be fixed before `8.0`).",
    "created_at": "2017-05-08T13:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429491",
    "user": "https://github.com/behackl"
}
```

<a id='comment:1'></a>As this means that `series` delivers a mathematically wrong result, I've set the priority to `blocker` (and this should *really* be fixed before `8.0`).



---

archive/issue_comments_429492.json:
```json
{
    "body": "<a id='comment:2'></a>https://github.com/pynac/pynac/issues/246",
    "created_at": "2017-05-09T05:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429492",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>https://github.com/pynac/pynac/issues/246



---

archive/issue_comments_429493.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Reported upstream. Developers acknowledge bug.\"",
    "created_at": "2017-05-09T05:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429493",
    "user": "https://github.com/rwst"
}
```

Changing upstream from "N/A" to "Reported upstream. Developers acknowledge bug."



---

archive/issue_comments_429494.json:
```json
{
    "body": "Changing upstream from \"Reported upstream. Developers acknowledge bug.\" to \"Fixed upstream, in a later stable release.\"",
    "created_at": "2017-05-09T07:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429494",
    "user": "https://github.com/rwst"
}
```

Changing upstream from "Reported upstream. Developers acknowledge bug." to "Fixed upstream, in a later stable release."



---

archive/issue_comments_429495.json:
```json
{
    "body": "Changing dependencies from \"\" to \"pynac-0.7.7\"",
    "created_at": "2017-05-09T07:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429495",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "" to "pynac-0.7.7"



---

archive/issue_comments_429496.json:
```json
{
    "body": "<a id='comment:4'></a>Nice work!",
    "created_at": "2017-05-09T15:52:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429496",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:4'></a>Nice work!



---

archive/issue_comments_429497.json:
```json
{
    "body": "Changing branch from \"\" to \"u/rws/series___yields_wrong_result_depending_on_precision\"",
    "created_at": "2017-05-25T07:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429497",
    "user": "https://github.com/rwst"
}
```

Changing branch from "" to "u/rws/series___yields_wrong_result_depending_on_precision"



---

archive/issue_comments_429498.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-25T07:06:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429498",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_429499.json:
```json
{
    "body": "<a id='comment:6'></a>New commits:",
    "created_at": "2017-05-25T07:06:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429499",
    "user": "https://github.com/rwst"
}
```

<a id='comment:6'></a>New commits:



---

archive/issue_comments_429500.json:
```json
{
    "body": "Changing author from \"\" to \"Ralf Stephan\"",
    "created_at": "2017-05-25T07:06:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429500",
    "user": "https://github.com/rwst"
}
```

Changing author from "" to "Ralf Stephan"



---

archive/issue_comments_429501.json:
```json
{
    "body": "Changing upstream from \"Fixed upstream, in a later stable release.\" to \"N/A\"",
    "created_at": "2017-05-25T07:06:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429501",
    "user": "https://github.com/rwst"
}
```

Changing upstream from "Fixed upstream, in a later stable release." to "N/A"



---

archive/issue_comments_429502.json:
```json
{
    "body": "Changing dependencies from \"pynac-0.7.7\" to \"#22969\"",
    "created_at": "2017-05-25T07:06:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429502",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "pynac-0.7.7" to "#22969"



---

archive/issue_comments_429503.json:
```json
{
    "body": "Changing commit from \"\" to \"b12106198107961e7a2370c34a2b0738471becc3\"",
    "created_at": "2017-05-25T07:06:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429503",
    "user": "https://github.com/rwst"
}
```

Changing commit from "" to "b12106198107961e7a2370c34a2b0738471becc3"



---

archive/issue_comments_429504.json:
```json
{
    "body": "<a id='comment:7'></a>Thanks a lot for your work, Ralf! Patch LGTM, I'm happy to set this to `positive_review` as soon as the patchbot tested it.",
    "created_at": "2017-05-25T07:42:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429504",
    "user": "https://github.com/behackl"
}
```

<a id='comment:7'></a>Thanks a lot for your work, Ralf! Patch LGTM, I'm happy to set this to `positive_review` as soon as the patchbot tested it.



---

archive/issue_comments_429505.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Benjamin Hackl\"",
    "created_at": "2017-05-25T07:42:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429505",
    "user": "https://github.com/behackl"
}
```

Changing reviewer from "" to "Benjamin Hackl"



---

archive/issue_comments_429506.json:
```json
{
    "body": "<a id='comment:8'></a>For your information, the best way to have a patchbot run immediatly on your prefered ticket is to launch your own patchbot yourself on this ticket...",
    "created_at": "2017-05-25T09:07:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429506",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>For your information, the best way to have a patchbot run immediatly on your prefered ticket is to launch your own patchbot yourself on this ticket...



---

archive/issue_comments_429507.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [chapoton](#comment%3A8):\n> For your information, the best way to have a patchbot run immediatly on your prefered ticket is to launch your own patchbot yourself on this ticket...\n\n\nUsually I'd do that, thanks. :-)\n\nHowever, I'm at a conference and have a very unstable internet connection, so I don't want to build the latest beta on my laptop. And as of a rather unlucky coincidence, my VPN connection to our university servers does not work either, so I also can't start the patchbot we have there.",
    "created_at": "2017-05-25T09:23:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429507",
    "user": "https://github.com/behackl"
}
```

<a id='comment:9'></a>Replying to [chapoton](#comment%3A8):
> For your information, the best way to have a patchbot run immediatly on your prefered ticket is to launch your own patchbot yourself on this ticket...


Usually I'd do that, thanks. :-)

However, I'm at a conference and have a very unstable internet connection, so I don't want to build the latest beta on my laptop. And as of a rather unlucky coincidence, my VPN connection to our university servers does not work either, so I also can't start the patchbot we have there.



---

archive/issue_comments_429508.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-27T06:08:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429508",
    "user": "https://github.com/behackl"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_429509.json:
```json
{
    "body": "<a id='comment:10'></a>Running `make ptestlong` on my laptop lets the test run through, except for being stuck on the `has_mathematica()`-call in `src/sage/doctest/external.py`. I don't think that this problem is related to the changes on this ticket, so this is `positive_review` from me.",
    "created_at": "2017-05-27T06:08:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429509",
    "user": "https://github.com/behackl"
}
```

<a id='comment:10'></a>Running `make ptestlong` on my laptop lets the test run through, except for being stuck on the `has_mathematica()`-call in `src/sage/doctest/external.py`. I don't think that this problem is related to the changes on this ticket, so this is `positive_review` from me.



---

archive/issue_events_059515.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-27T23:42:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22959#event-59515"
}
```



---

archive/issue_comments_429510.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-27T23:42:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429510",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_429511.json:
```json
{
    "body": "Changing branch from \"u/rws/series___yields_wrong_result_depending_on_precision\" to \"b12106198107961e7a2370c34a2b0738471becc3\"",
    "created_at": "2017-05-27T23:42:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22959#issuecomment-429511",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/rws/series___yields_wrong_result_depending_on_precision" to "b12106198107961e7a2370c34a2b0738471becc3"
