# Issue 22452: Create a Polymake pexpect interface

archive/issues_022215.json:
```json
{
    "assignees": [],
    "body": "There is [PyPolymake](https://github.com/videlec/pypolymake), to be added at #21170. But I think it wouldn't hurt to additionally have a pexpect interface to Polymake. And the purpose of this ticket is to create one.\n\nDepends on #22501\n\nCC:  @videlec @jplab\n\nKeywords: **Polymake, days84**\n\nBranch: **[`52a77ee`](https://github.com/sagemath/sagetrac-mirror/commit/52a77ee1b1fd70e0d6371f2789c4b6bfffe511ec)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Simon King**\n\nComponent: **packages: optional**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22452_\n\n",
    "closed_at": "2017-03-30T22:34:48Z",
    "created_at": "2017-02-26T18:41:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Create a Polymake pexpect interface",
    "type": "issue",
    "updated_at": "2017-03-31T06:59:24Z",
    "url": "https://github.com/sagemath/sage/issues/22452",
    "user": "https://github.com/simon-king-jena"
}
```
There is [PyPolymake](https://github.com/videlec/pypolymake), to be added at #21170. But I think it wouldn't hurt to additionally have a pexpect interface to Polymake. And the purpose of this ticket is to create one.

Depends on #22501

CC:  @videlec @jplab

Keywords: **Polymake, days84**

Branch: **[`52a77ee`](https://github.com/sagemath/sagetrac-mirror/commit/52a77ee1b1fd70e0d6371f2789c4b6bfffe511ec)**

Reviewer: **Vincent Delecroix**

Author: **Simon King**

Component: **packages: optional**

_Issue created by migration from https://trac.sagemath.org/ticket/22452_





---

archive/issue_events_311066.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-02-26T18:41:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311066"
}
```



---

archive/issue_events_311067.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-02-26T18:41:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20optional",
    "label_color": "0000b0",
    "label_name": "c: packages: optional",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311067"
}
```



---

archive/issue_events_311068.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-02-26T18:41:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311068"
}
```



---

archive/issue_events_311069.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-02-26T18:41:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311069"
}
```



---

archive/issue_comments_332282.json:
```json
{
    "body": "Changed keywords from **Polymake, days85** to **Polymake, days84**",
    "created_at": "2017-02-28T06:57:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332282",
    "user": "https://github.com/simon-king-jena"
}
```

Changed keywords from **Polymake, days85** to **Polymake, days84**



---

archive/issue_comments_332283.json:
```json
{
    "body": "Branch: **[u/SimonKing/create_a_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/create_a_polymake_pexpect_interface)**",
    "created_at": "2017-03-04T10:15:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332283",
    "user": "https://github.com/simon-king-jena"
}
```

Branch: **[u/SimonKing/create_a_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/create_a_polymake_pexpect_interface)**



---

archive/issue_comments_332284.json:
```json
{
    "body": "Commit: **[`c3add96`](https://github.com/sagemath/sagetrac-mirror/commit/c3add962d2d518164765993b70e843d10f17a4da)**",
    "created_at": "2017-03-04T10:16:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332284",
    "user": "https://github.com/videlec"
}
```

Commit: **[`c3add96`](https://github.com/sagemath/sagetrac-mirror/commit/c3add962d2d518164765993b70e843d10f17a4da)**



---

archive/issue_comments_332285.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33b53f3e5314c37f5e4ce511dd8aac0c66c78116\"><code>33b53f3</code></a></td><td><code>Add documentation to _get_primitive</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d78b239eb5244f9180e150aff84d254e85d6626c\"><code>d78b239</code></a></td><td><code>'Implement string representation by single underscore methods': Apply this mantra to interfaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a0bcca9b4ecd6d4f9d2f010c3a3f939200b9711\"><code>9a0bcca</code></a></td><td><code>Change string representation of invalid interface elements whose parent is None</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6910107bb1020b3d9f0080683d19dbaed697f0de\"><code>6910107</code></a></td><td><code>Keep the tests that have been removed in the previous commits</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd97ff3d25ca2f6408d21e79ab9ef9d96373dffb\"><code>cd97ff3</code></a></td><td><code>Parse error message of _check_valid() in order to cope with unpredictable future semantical changes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdaeb2e08e4de89ca5d9f99e7c9486f78693c5e7\"><code>fdaeb2e</code></a></td><td><code>Include error message of validity check into string representation of invalid interface elements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cdb085bf1b55254cb078bec28f8cd7ed19bf41dd\"><code>cdb085b</code></a></td><td><code>Revert introduction of _get_custom_name</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5df1359fb0ddaf26c35db9820d3bd7158d5046d\"><code>b5df135</code></a></td><td><code>Actually remove _get_custom_name, not only its applications</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b532293a5807e7ea82f62384cb47f89ea34f7e6\"><code>6b53229</code></a></td><td><code>Reverse addition of _get_primitive. Fix `__cmp__`, bool etc. and their documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3add962d2d518164765993b70e843d10f17a4da\"><code>c3add96</code></a></td><td><code>Initial wrapper: providing help, tab completion, accessing members, calling functions, nice(r) string representation</code></td></tr></table>\n",
    "created_at": "2017-03-04T10:16:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332285",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">comment:3</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33b53f3e5314c37f5e4ce511dd8aac0c66c78116"><code>33b53f3</code></a></td><td><code>Add documentation to _get_primitive</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d78b239eb5244f9180e150aff84d254e85d6626c"><code>d78b239</code></a></td><td><code>'Implement string representation by single underscore methods': Apply this mantra to interfaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a0bcca9b4ecd6d4f9d2f010c3a3f939200b9711"><code>9a0bcca</code></a></td><td><code>Change string representation of invalid interface elements whose parent is None</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6910107bb1020b3d9f0080683d19dbaed697f0de"><code>6910107</code></a></td><td><code>Keep the tests that have been removed in the previous commits</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd97ff3d25ca2f6408d21e79ab9ef9d96373dffb"><code>cd97ff3</code></a></td><td><code>Parse error message of _check_valid() in order to cope with unpredictable future semantical changes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdaeb2e08e4de89ca5d9f99e7c9486f78693c5e7"><code>fdaeb2e</code></a></td><td><code>Include error message of validity check into string representation of invalid interface elements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cdb085bf1b55254cb078bec28f8cd7ed19bf41dd"><code>cdb085b</code></a></td><td><code>Revert introduction of _get_custom_name</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5df1359fb0ddaf26c35db9820d3bd7158d5046d"><code>b5df135</code></a></td><td><code>Actually remove _get_custom_name, not only its applications</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b532293a5807e7ea82f62384cb47f89ea34f7e6"><code>6b53229</code></a></td><td><code>Reverse addition of _get_primitive. Fix `__cmp__`, bool etc. and their documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3add962d2d518164765993b70e843d10f17a4da"><code>c3add96</code></a></td><td><code>Initial wrapper: providing help, tab completion, accessing members, calling functions, nice(r) string representation</code></td></tr></table>




---

archive/issue_comments_332286.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHere I am showcasing some things that work already:\n\n```\nsage: from sage.interfaces.polymake import polymake\nsage: polymake.help(\"objects/Cone/properties/Combinatorics/RAYS_IN_FACETS\")\nproperty RAYS_IN_FACETS : IncidenceMatrix<NonSymmetric>\n Ray-facet incidence matrix, with rows corresponding to facets and columns\n to rays. Rays and facets are numbered from 0 to N_RAYS-1 rsp.\n N_FACETS-1, according to their order in RAYS rsp. FACETS.\n\nsage: polymake.help('rand_sphere')\nfunctions/Producing a polytope from scratch/rand_sphere:\nrand_sphere(d, n; Options) -> Polytope\n\n Produce a d-dimensional polytope with n random vertices\n uniformly distributed on the unit sphere.\n\nArguments:\n  Int d the dimension\n  Int n the number of random vertices\n\nOptions:\n  seed => Int controls the outcome of the random number generator;\n    fixing a seed number guarantees the same outcome. \n\nReturns Polytope \n```\nSo, there is access to Polymake' help system.\n\n```\nsage: P = polymake.rand<tab key>\n                polymake.rand01                polymake.rand_knot              \n                polymake.rand_aof              polymake.rand_metric            \n                polymake.rand_box              polymake.rand_metric_int       >\n                polymake.rand_cyclic           polymake.rand_perm              \n                polymake.rand_inner_points     polymake.rand_seed \n```\nSo, tab completion of the interface itself works, it yields ALL function names, including those that are not part of the current Polymake application.\n\n```\nsage: P = polymake.rand_sphere(3,10,seed=5)\n```\nSo, calling a function with parameters works\n\n```\nsage: P\nRandom spherical polytope of dimension 3; seed=5\n```\nSo, string representation works, actually nicer than in Polymake (more examples below).\n\n```\nsage: P.known_properties()   # members computed so far\n['BOUNDED', 'CONE_AMBIENT_DIM', 'FEASIBLE', 'POINTS']\nsage: P.get_schedule('F_VECTOR')\n\nprecondition : BOUNDED ( lrs.convex_hull.count: N_FACETS : RAYS | INPUT_RAYS )\nlrs.convex_hull.count: N_FACETS : RAYS | INPUT_RAYS\nsensitivity check for VertexPerm\ncdd.convex_hull.canon: POINTED, RAYS, LINEALITY_SPACE : INPUT_RAYS\nCONE_DIM : RAYS | INPUT_RAYS\nN_RAYS : RAYS\nprecondition : POINTED ( LINEALITY_DIM, LINEALITY_SPACE : )\nLINEALITY_DIM, LINEALITY_SPACE :\nCOMBINATORIAL_DIM : CONE_DIM, LINEALITY_DIM\nprecondition : COMBINATORIAL_DIM ( F_VECTOR : N_FACETS, N_RAYS, COMBINATORIAL_DIM )\nF_VECTOR : N_FACETS, N_RAYS, COMBINATORIAL_DIM\n```\nSo, this shows how the f-vector would be computed for this polytope.\n\n```\nsage: V = P.VER<tab key>\n                P.VERTEX_BARYCENTER        P.VERTICES                 \n                P.VERTEX_LABELS            P.VERTICES_IN_FACETS       \n                P.VERTEX_NORMALS           P.VERTICES_IN_INEQUALITIES \n                P.VERTEX_SIZES             P.VERY_AMPLE               \n```\nSo, tab completion for Polymake elements works. It shows both members (including those that aren't computed yet) and functions (including those that won't be applicable to the object).\n\n```\nsage: set_verbose(3)\nsage: V = P.VERTICES\nsage: F = P.F_VECTOR\npolymake: used package lrs\n  Implementation of the reverse search algorithm of Avis and Fukuda.\n  Copyright by David Avis.\n  http://cgm.cs.mcgill.ca/~avis/lrs.html\n```\nSo, when verbosity is set to a positive value, comments printed by Polymake will be printed by Sage.\n\n```\nsage: F\n10 24 16\nsage: V\n\n1 -549467720344047/2251799813685248 -1666038093248221/2251799813685248 5646952731601237/9007199254740992\n1 396443771972991/562949953421312 -3761317241461329/36028797018963968 6325385137097525/9007199254740992\n1 8731416515056451/9007199254740992 8225904699783425/36028797018963968 6513541817898829/72057594037927936\n1 -6649740931032245/9007199254740992 -316039202166671/562949953421312 -6735311418008155/18014398509481984\n1 1027872253618593/1125899906842624 -4941443956760209/18014398509481984 -5443456128447233/18014398509481984\n1 3237778007687205/4503599627370496 -3127563668227821/4503599627370496 8478171037802839/288230376151711744\n1 4654944693569921/9007199254740992 -2595293938705027/4503599627370496 5702536786492105/9007199254740992\n1 -4153090305917205/4503599627370496 2814681273371419/18014398509481984 -3186909849764487/9007199254740992\n1 6185041161130579/9007199254740992 -2775723053730255/4503599627370496 -6944451127537363/18014398509481984\n1 -6106052881221159/18014398509481984 -2063008243044317/18014398509481984 -8410984913482021/9007199254740992\n```\nSo, string representation is (at least for the things that are currently wrapped) meaningful.\n\n```\nsage: F[2]\n16\nsage: V[3][3]\n-6735311418008155/18014398509481984\n```\nSo, attribute access works.\n\n```\nsage: V.foobar()\nTraceback (most recent call last)\n...\nTypeError: polymake:  ERROR: Undefined subroutine &Polymake::User::foobar called at input line 1.\nsage: polymake.eval('foobar(4)')\n^CInterrupting Polymake...\nTraceback (most recent call last)\n...\nKeyboardInterrupt: Ctrl-c pressed while running Polymake\nsage: polymake.eval('foobar(4);')\nTraceback (most recent call last)\n...\nPolymakeError: polymake:  ERROR: Undefined subroutine &Polymake::User::foobar called at input line 1.\n```\nSo, error handling is implemented.\n\nMeanwhile, more members are known:\n\n```\nsage: P.known_properties()\n\n['AFFINE_HULL',\n 'BOUNDED',\n 'COMBINATORIAL_DIM',\n 'CONE_AMBIENT_DIM',\n 'CONE_DIM',\n 'FAR_FACE',\n 'FEASIBLE',\n 'FULL_DIM',\n 'F_VECTOR',\n 'LINEALITY_DIM',\n 'LINEALITY_SPACE',\n 'N_FACETS',\n 'N_POINTS',\n 'N_VERTICES',\n 'POINTED',\n 'POINTS',\n 'VERTICES']\n```\n\nOf course, some things won't work yet. For example, I am not catching warnings yet.",
    "created_at": "2017-03-04T10:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332286",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:4" align="right">comment:4</div>

Here I am showcasing some things that work already:

```
sage: from sage.interfaces.polymake import polymake
sage: polymake.help("objects/Cone/properties/Combinatorics/RAYS_IN_FACETS")
property RAYS_IN_FACETS : IncidenceMatrix<NonSymmetric>
 Ray-facet incidence matrix, with rows corresponding to facets and columns
 to rays. Rays and facets are numbered from 0 to N_RAYS-1 rsp.
 N_FACETS-1, according to their order in RAYS rsp. FACETS.

sage: polymake.help('rand_sphere')
functions/Producing a polytope from scratch/rand_sphere:
rand_sphere(d, n; Options) -> Polytope

 Produce a d-dimensional polytope with n random vertices
 uniformly distributed on the unit sphere.

Arguments:
  Int d the dimension
  Int n the number of random vertices

Options:
  seed => Int controls the outcome of the random number generator;
    fixing a seed number guarantees the same outcome. 

Returns Polytope 
```
So, there is access to Polymake' help system.

```
sage: P = polymake.rand<tab key>
                polymake.rand01                polymake.rand_knot              
                polymake.rand_aof              polymake.rand_metric            
                polymake.rand_box              polymake.rand_metric_int       >
                polymake.rand_cyclic           polymake.rand_perm              
                polymake.rand_inner_points     polymake.rand_seed 
```
So, tab completion of the interface itself works, it yields ALL function names, including those that are not part of the current Polymake application.

```
sage: P = polymake.rand_sphere(3,10,seed=5)
```
So, calling a function with parameters works

```
sage: P
Random spherical polytope of dimension 3; seed=5
```
So, string representation works, actually nicer than in Polymake (more examples below).

```
sage: P.known_properties()   # members computed so far
['BOUNDED', 'CONE_AMBIENT_DIM', 'FEASIBLE', 'POINTS']
sage: P.get_schedule('F_VECTOR')

precondition : BOUNDED ( lrs.convex_hull.count: N_FACETS : RAYS | INPUT_RAYS )
lrs.convex_hull.count: N_FACETS : RAYS | INPUT_RAYS
sensitivity check for VertexPerm
cdd.convex_hull.canon: POINTED, RAYS, LINEALITY_SPACE : INPUT_RAYS
CONE_DIM : RAYS | INPUT_RAYS
N_RAYS : RAYS
precondition : POINTED ( LINEALITY_DIM, LINEALITY_SPACE : )
LINEALITY_DIM, LINEALITY_SPACE :
COMBINATORIAL_DIM : CONE_DIM, LINEALITY_DIM
precondition : COMBINATORIAL_DIM ( F_VECTOR : N_FACETS, N_RAYS, COMBINATORIAL_DIM )
F_VECTOR : N_FACETS, N_RAYS, COMBINATORIAL_DIM
```
So, this shows how the f-vector would be computed for this polytope.

```
sage: V = P.VER<tab key>
                P.VERTEX_BARYCENTER        P.VERTICES                 
                P.VERTEX_LABELS            P.VERTICES_IN_FACETS       
                P.VERTEX_NORMALS           P.VERTICES_IN_INEQUALITIES 
                P.VERTEX_SIZES             P.VERY_AMPLE               
```
So, tab completion for Polymake elements works. It shows both members (including those that aren't computed yet) and functions (including those that won't be applicable to the object).

```
sage: set_verbose(3)
sage: V = P.VERTICES
sage: F = P.F_VECTOR
polymake: used package lrs
  Implementation of the reverse search algorithm of Avis and Fukuda.
  Copyright by David Avis.
  http://cgm.cs.mcgill.ca/~avis/lrs.html
```
So, when verbosity is set to a positive value, comments printed by Polymake will be printed by Sage.

```
sage: F
10 24 16
sage: V

1 -549467720344047/2251799813685248 -1666038093248221/2251799813685248 5646952731601237/9007199254740992
1 396443771972991/562949953421312 -3761317241461329/36028797018963968 6325385137097525/9007199254740992
1 8731416515056451/9007199254740992 8225904699783425/36028797018963968 6513541817898829/72057594037927936
1 -6649740931032245/9007199254740992 -316039202166671/562949953421312 -6735311418008155/18014398509481984
1 1027872253618593/1125899906842624 -4941443956760209/18014398509481984 -5443456128447233/18014398509481984
1 3237778007687205/4503599627370496 -3127563668227821/4503599627370496 8478171037802839/288230376151711744
1 4654944693569921/9007199254740992 -2595293938705027/4503599627370496 5702536786492105/9007199254740992
1 -4153090305917205/4503599627370496 2814681273371419/18014398509481984 -3186909849764487/9007199254740992
1 6185041161130579/9007199254740992 -2775723053730255/4503599627370496 -6944451127537363/18014398509481984
1 -6106052881221159/18014398509481984 -2063008243044317/18014398509481984 -8410984913482021/9007199254740992
```
So, string representation is (at least for the things that are currently wrapped) meaningful.

```
sage: F[2]
16
sage: V[3][3]
-6735311418008155/18014398509481984
```
So, attribute access works.

```
sage: V.foobar()
Traceback (most recent call last)
...
TypeError: polymake:  ERROR: Undefined subroutine &Polymake::User::foobar called at input line 1.
sage: polymake.eval('foobar(4)')
^CInterrupting Polymake...
Traceback (most recent call last)
...
KeyboardInterrupt: Ctrl-c pressed while running Polymake
sage: polymake.eval('foobar(4);')
Traceback (most recent call last)
...
PolymakeError: polymake:  ERROR: Undefined subroutine &Polymake::User::foobar called at input line 1.
```
So, error handling is implemented.

Meanwhile, more members are known:

```
sage: P.known_properties()

['AFFINE_HULL',
 'BOUNDED',
 'COMBINATORIAL_DIM',
 'CONE_AMBIENT_DIM',
 'CONE_DIM',
 'FAR_FACE',
 'FEASIBLE',
 'FULL_DIM',
 'F_VECTOR',
 'LINEALITY_DIM',
 'LINEALITY_SPACE',
 'N_FACETS',
 'N_POINTS',
 'N_VERTICES',
 'POINTED',
 'POINTS',
 'VERTICES']
```

Of course, some things won't work yet. For example, I am not catching warnings yet.



---

archive/issue_comments_332287.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfae4863bf12ec555ce7976fc39ce42a16a12fcc\"><code>bfae486</code></a></td><td><code>Implement getting length of arrays and hashes</code></td></tr></table>\n",
    "created_at": "2017-03-04T11:00:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332287",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfae4863bf12ec555ce7976fc39ce42a16a12fcc"><code>bfae486</code></a></td><td><code>Implement getting length of arrays and hashes</code></td></tr></table>




---

archive/issue_comments_332288.json:
```json
{
    "body": "Changed commit from **[`c3add96`](https://github.com/sagemath/sagetrac-mirror/commit/c3add962d2d518164765993b70e843d10f17a4da)** to **[`bfae486`](https://github.com/sagemath/sagetrac-mirror/commit/bfae4863bf12ec555ce7976fc39ce42a16a12fcc)**",
    "created_at": "2017-03-04T11:00:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332288",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c3add96`](https://github.com/sagemath/sagetrac-mirror/commit/c3add962d2d518164765993b70e843d10f17a4da)** to **[`bfae486`](https://github.com/sagemath/sagetrac-mirror/commit/bfae4863bf12ec555ce7976fc39ce42a16a12fcc)**



---

archive/issue_comments_332289.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nExample for the next commit:\n\n```\nsage: from sage.interfaces.polymake import polymake\nsage: P = polymake.rand_sphere(3,10,seed=5)\nsage: len(P)   # A polytope is in fact internally represented by an array\n14\nsage: V = P.VERTICES\nsage: len(V)\n10\nsage: len(V[2])\n4\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfae4863bf12ec555ce7976fc39ce42a16a12fcc\"><code>bfae486</code></a></td><td><code>Implement getting length of arrays and hashes</code></td></tr></table>\n",
    "created_at": "2017-03-04T11:02:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332289",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:6" align="right">comment:6</div>

Example for the next commit:

```
sage: from sage.interfaces.polymake import polymake
sage: P = polymake.rand_sphere(3,10,seed=5)
sage: len(P)   # A polytope is in fact internally represented by an array
14
sage: V = P.VERTICES
sage: len(V)
10
sage: len(V[2])
4
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfae4863bf12ec555ce7976fc39ce42a16a12fcc"><code>bfae486</code></a></td><td><code>Implement getting length of arrays and hashes</code></td></tr></table>




---

archive/issue_comments_332290.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nNow I am totally puzzled. After doing some changes, many thinks didn't work. Thus, I reverted all changes. I even deleted my local git branch and downloaded the branch from here. But things still don't work (tab completion etc). Of course I did sage -br.\n\nDo you have any idea what could cause such persisting problems?",
    "created_at": "2017-03-04T15:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332290",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:8" align="right">comment:8</div>

Now I am totally puzzled. After doing some changes, many thinks didn't work. Thus, I reverted all changes. I even deleted my local git branch and downloaded the branch from here. But things still don't work (tab completion etc). Of course I did sage -br.

Do you have any idea what could cause such persisting problems?



---

archive/issue_comments_332291.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nIt seems that my Sage installation is totally broken. I did \"make start\" and it seems that it installs python3 without my asking for it.",
    "created_at": "2017-03-04T15:18:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332291",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:9" align="right">comment:9</div>

It seems that my Sage installation is totally broken. I did "make start" and it seems that it installs python3 without my asking for it.



---

archive/issue_comments_332292.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3e7d475d39678c941160bedf9033db6fd7e9c85\"><code>c3e7d47</code></a></td><td><code>Fix reading from file. Fix KeyboardInterrupt for Polymake</code></td></tr></table>\n",
    "created_at": "2017-03-04T16:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332292",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3e7d475d39678c941160bedf9033db6fd7e9c85"><code>c3e7d47</code></a></td><td><code>Fix reading from file. Fix KeyboardInterrupt for Polymake</code></td></tr></table>




---

archive/issue_comments_332293.json:
```json
{
    "body": "Changed commit from **[`bfae486`](https://github.com/sagemath/sagetrac-mirror/commit/bfae4863bf12ec555ce7976fc39ce42a16a12fcc)** to **[`c3e7d47`](https://github.com/sagemath/sagetrac-mirror/commit/c3e7d475d39678c941160bedf9033db6fd7e9c85)**",
    "created_at": "2017-03-04T16:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332293",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bfae486`](https://github.com/sagemath/sagetrac-mirror/commit/bfae4863bf12ec555ce7976fc39ce42a16a12fcc)** to **[`c3e7d47`](https://github.com/sagemath/sagetrac-mirror/commit/c3e7d475d39678c941160bedf9033db6fd7e9c85)**



---

archive/issue_comments_332294.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bd2ac5d3b5931acdfdec516e16a875356b7c646\"><code>2bd2ac5</code></a></td><td><code>add synchronisation code for Polymake interface</code></td></tr></table>\n",
    "created_at": "2017-03-04T17:22:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332294",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bd2ac5d3b5931acdfdec516e16a875356b7c646"><code>2bd2ac5</code></a></td><td><code>add synchronisation code for Polymake interface</code></td></tr></table>




---

archive/issue_comments_332295.json:
```json
{
    "body": "Changed commit from **[`c3e7d47`](https://github.com/sagemath/sagetrac-mirror/commit/c3e7d475d39678c941160bedf9033db6fd7e9c85)** to **[`2bd2ac5`](https://github.com/sagemath/sagetrac-mirror/commit/2bd2ac5d3b5931acdfdec516e16a875356b7c646)**",
    "created_at": "2017-03-04T17:22:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332295",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c3e7d47`](https://github.com/sagemath/sagetrac-mirror/commit/c3e7d475d39678c941160bedf9033db6fd7e9c85)** to **[`2bd2ac5`](https://github.com/sagemath/sagetrac-mirror/commit/2bd2ac5d3b5931acdfdec516e16a875356b7c646)**



---

archive/issue_comments_332296.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@simon-king-jena](#comment:9):\n> It seems that my Sage installation is totally broken. I did \"make start\" and it seems that it installs python3 without my asking for it.\n\nYes. That is normal. python2 and python3 do install by default now (since 2 or 3 beta already).",
    "created_at": "2017-03-04T17:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332296",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@simon-king-jena](#comment:9):
> It seems that my Sage installation is totally broken. I did "make start" and it seems that it installs python3 without my asking for it.

Yes. That is normal. python2 and python3 do install by default now (since 2 or 3 beta already).



---

archive/issue_comments_332297.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@videlec](#comment:12):\n> Replying to [@simon-king-jena](#comment:9):\n> > It seems that my Sage installation is totally broken. I did \"make start\" and it seems that it installs python3 without my asking for it.\n\n> \n> Yes. That is normal. python2 and python3 do install by default now (since 2 or 3 beta already).\n\nThanks, I didn't notice that before.\n\nI still don't know what went wrong, but it is now again working, including the synchronisation code that I posted in the previous commit.",
    "created_at": "2017-03-04T17:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332297",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@videlec](#comment:12):
> Replying to [@simon-king-jena](#comment:9):
> > It seems that my Sage installation is totally broken. I did "make start" and it seems that it installs python3 without my asking for it.

> 
> Yes. That is normal. python2 and python3 do install by default now (since 2 or 3 beta already).

Thanks, I didn't notice that before.

I still don't know what went wrong, but it is now again working, including the synchronisation code that I posted in the previous commit.



---

archive/issue_comments_332298.json:
```json
{
    "body": "Changed commit from **[`2bd2ac5`](https://github.com/sagemath/sagetrac-mirror/commit/2bd2ac5d3b5931acdfdec516e16a875356b7c646)** to **[`06e85fd`](https://github.com/sagemath/sagetrac-mirror/commit/06e85fd9d84b15f06c4aa2e14d4db84c009c0459)**",
    "created_at": "2017-03-05T17:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332298",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2bd2ac5`](https://github.com/sagemath/sagetrac-mirror/commit/2bd2ac5d3b5931acdfdec516e16a875356b7c646)** to **[`06e85fd`](https://github.com/sagemath/sagetrac-mirror/commit/06e85fd9d84b15f06c4aa2e14d4db84c009c0459)**



---

archive/issue_comments_332299.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06e85fd9d84b15f06c4aa2e14d4db84c009c0459\"><code>06e85fd</code></a></td><td><code>Keep polymake interface in sync. Take docstring from polymake. Fix calling of polymake functions</code></td></tr></table>\n",
    "created_at": "2017-03-05T17:10:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332299",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06e85fd9d84b15f06c4aa2e14d4db84c009c0459"><code>06e85fd</code></a></td><td><code>Keep polymake interface in sync. Take docstring from polymake. Fix calling of polymake functions</code></td></tr></table>




---

archive/issue_comments_332300.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nFinally I found a reasonable source explaining a part of perl that seems particularly relevant: http://perldoc.perl.org/perlref.html\n\nSo, I am now rewriting a couple of things in terms of what I learn about perl references.",
    "created_at": "2017-03-05T18:45:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332300",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:15" align="right">comment:15</div>

Finally I found a reasonable source explaining a part of perl that seems particularly relevant: http://perldoc.perl.org/perlref.html

So, I am now rewriting a couple of things in terms of what I learn about perl references.



---

archive/issue_comments_332301.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIt is of course conceivable that I am just lacking experience, but I find Perl sucks.\n\nIn order to write an interface, it is important to do things uniformly. Hence, all variables created by Sage in Polymake should be \"the same\". In the current branch, \"the same\" means that they are all references (which in Perl means they are SCALAR).\n\nSo, how to assign any object x in Polymake to a variable var?\n\nIf you define a SCALAR \"var\" and assign to \"x\", you of course do not get a reference to x but some scalar interpretation of whatever is in x. Thus, I need to create a reference to x. Sounds trivial (and perhaps it is). However, all what I found is that one needs to do `$var=\\@x`, `$var=\\%x` or `$var=\\*x` depending on whether x is an array, a hash or an io stream. OK, sounds easy. But so far I found no way to make Perl tell me what x really is.\n\nInstead, let var uniformly be an array whose single entry is x. Thus:\n\n```\npolytope > @P = [rand_sphere(4,33, seed=>5)];\n\npolytope > print @P[0];\n\npolymake:  ERROR: Scalar value @Polymake::User::P[0] better written as $Polymake::User::P[0] at input line 1.\n```\nWTF?? I should better replace something that I did *not* write??? From what I thought I have learnt about Perl syntax, `@P[0]` should give the first entry in the array P!",
    "created_at": "2017-03-06T10:36:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332301",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:16" align="right">comment:16</div>

It is of course conceivable that I am just lacking experience, but I find Perl sucks.

In order to write an interface, it is important to do things uniformly. Hence, all variables created by Sage in Polymake should be "the same". In the current branch, "the same" means that they are all references (which in Perl means they are SCALAR).

So, how to assign any object x in Polymake to a variable var?

If you define a SCALAR "var" and assign to "x", you of course do not get a reference to x but some scalar interpretation of whatever is in x. Thus, I need to create a reference to x. Sounds trivial (and perhaps it is). However, all what I found is that one needs to do `$var=\@x`, `$var=\%x` or `$var=\*x` depending on whether x is an array, a hash or an io stream. OK, sounds easy. But so far I found no way to make Perl tell me what x really is.

Instead, let var uniformly be an array whose single entry is x. Thus:

```
polytope > @P = [rand_sphere(4,33, seed=>5)];

polytope > print @P[0];

polymake:  ERROR: Scalar value @Polymake::User::P[0] better written as $Polymake::User::P[0] at input line 1.
```
WTF?? I should better replace something that I did *not* write??? From what I thought I have learnt about Perl syntax, `@P[0]` should give the first entry in the array P!



---

archive/issue_comments_332302.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAha, my mistake. Apparently it works slightly differently:\n\n```\npolytope > @P = (rand_sphere(4,33, seed=>5));\npolytope > print $P[0];\nPolymake::polytope::Polytope__Rational=ARRAY(0x80d0370)\npolytope > print $P[0][1];\nRandom spherical polytope of dimension 4; seed=5\n```\n\nSo, creating a new variable that points to the content of the old variable should work like this, and it does:\n\n```\npolytope > @Q = ($P[0]);\n\npolytope > print $Q[0];\nPolymake::polytope::Polytope__Rational=ARRAY(0x80d0370)\npolytope > print $Q[0][1];\nRandom spherical polytope of dimension 4; seed=5\n```\nAccess to members also works as expected:\n\n```\npolytope > @V = ($Q[0]->VERTICES);\n...\npolytope > print $V[0];\n...\n1 -2185542006599419/2251799813685248 -5220912692532935/36028797018963968 2637694986535851/72057594037927936 3401062251409073/18014398509481984\npolytope > @S = ($Q[0]->get_schedule(\"H_VECTOR\"));\npolymake: used package ppl\n  The Parma Polyhedra Library (PPL): A C++ library for convex polyhedra\n  and other numerical abstractions.\n  http://www.cs.unipr.it/ppl/\n\n\npolytope > print join(\", \", $S[0]->list);\nprecondition : N_RAYS | N_INPUT_RAYS ( ppl.convex_hull.primal: FACETS, LINEAR_SPAN : RAYS | INPUT_RAYS ), sensitivity check for FacetPerm, ppl.convex_hull.primal: FACETS, LINEAR_SPAN : RAYS | INPUT_RAYS, RAYS_IN_FACETS : RAYS, FACETS, GRAPH.ADJACENCY : RAYS_IN_FACETS, DUAL_GRAPH.ADJACENCY : RAYS_IN_FACETS, SIMPLICIAL : COMBINATORIAL_DIM, RAYS_IN_FACETS, N_EDGES : ADJACENCY ( applied to DUAL_GRAPH ), N_EDGES : ADJACENCY ( applied to GRAPH ), N_RAYS : RAYS, N_FACETS : FACETS, precondition : COMBINATORIAL_DIM ( F_VECTOR : N_FACETS, N_RAYS, GRAPH.N_EDGES, DUAL_GRAPH.N_EDGES, COMBINATORIAL_DIM ), F_VECTOR : N_FACETS, N_RAYS, GRAPH.N_EDGES, DUAL_GRAPH.N_EDGES, COMBINATORIAL_DIM, precondition : SIMPLICIAL ( H_VECTOR : F_VECTOR ), H_VECTOR : F_VECTOR\n```\n\nSo, I'll rewrite my branch accordingly.",
    "created_at": "2017-03-06T10:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332302",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:17" align="right">comment:17</div>

Aha, my mistake. Apparently it works slightly differently:

```
polytope > @P = (rand_sphere(4,33, seed=>5));
polytope > print $P[0];
Polymake::polytope::Polytope__Rational=ARRAY(0x80d0370)
polytope > print $P[0][1];
Random spherical polytope of dimension 4; seed=5
```

So, creating a new variable that points to the content of the old variable should work like this, and it does:

```
polytope > @Q = ($P[0]);

polytope > print $Q[0];
Polymake::polytope::Polytope__Rational=ARRAY(0x80d0370)
polytope > print $Q[0][1];
Random spherical polytope of dimension 4; seed=5
```
Access to members also works as expected:

```
polytope > @V = ($Q[0]->VERTICES);
...
polytope > print $V[0];
...
1 -2185542006599419/2251799813685248 -5220912692532935/36028797018963968 2637694986535851/72057594037927936 3401062251409073/18014398509481984
polytope > @S = ($Q[0]->get_schedule("H_VECTOR"));
polymake: used package ppl
  The Parma Polyhedra Library (PPL): A C++ library for convex polyhedra
  and other numerical abstractions.
  http://www.cs.unipr.it/ppl/


polytope > print join(", ", $S[0]->list);
precondition : N_RAYS | N_INPUT_RAYS ( ppl.convex_hull.primal: FACETS, LINEAR_SPAN : RAYS | INPUT_RAYS ), sensitivity check for FacetPerm, ppl.convex_hull.primal: FACETS, LINEAR_SPAN : RAYS | INPUT_RAYS, RAYS_IN_FACETS : RAYS, FACETS, GRAPH.ADJACENCY : RAYS_IN_FACETS, DUAL_GRAPH.ADJACENCY : RAYS_IN_FACETS, SIMPLICIAL : COMBINATORIAL_DIM, RAYS_IN_FACETS, N_EDGES : ADJACENCY ( applied to DUAL_GRAPH ), N_EDGES : ADJACENCY ( applied to GRAPH ), N_RAYS : RAYS, N_FACETS : FACETS, precondition : COMBINATORIAL_DIM ( F_VECTOR : N_FACETS, N_RAYS, GRAPH.N_EDGES, DUAL_GRAPH.N_EDGES, COMBINATORIAL_DIM ), F_VECTOR : N_FACETS, N_RAYS, GRAPH.N_EDGES, DUAL_GRAPH.N_EDGES, COMBINATORIAL_DIM, precondition : SIMPLICIAL ( H_VECTOR : F_VECTOR ), H_VECTOR : F_VECTOR
```

So, I'll rewrite my branch accordingly.



---

archive/issue_comments_332303.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nArgh. The same trick won't work when I want a list in a list:\n\n```\npolytope > print join(\", \", $L[0]);\nprecondition : N_RAYS | N_INPUT_RAYS ( ppl.convex_hull.primal: FACETS, LINEAR_SPAN : RAYS | INPUT_RAYS )\n```",
    "created_at": "2017-03-06T10:51:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332303",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:18" align="right">comment:18</div>

Argh. The same trick won't work when I want a list in a list:

```
polytope > print join(", ", $L[0]);
precondition : N_RAYS | N_INPUT_RAYS ( ppl.convex_hull.primal: FACETS, LINEAR_SPAN : RAYS | INPUT_RAYS )
```



---

archive/issue_comments_332304.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nNext thing to try: Use a reference to an array. According to http://perldoc.perl.org/5.20.0/perllol.html, I expect it to work as follows:\n\n```\npolytope > $P = [rand_sphere(4,33, seed=>5)];\npolytope > print $P->[0];\nPolymake::polytope::Polytope__Rational=ARRAY(0x7c9bae0)\npolytope > print $P->[0][1];\nRandom spherical polytope of dimension 4; seed=5\npolytope > $Q = [$P->[0]];\npolytope > print $Q->[0];\nPolymake::polytope::Polytope__Rational=ARRAY(0x7c9bae0)\npolytope > print $Q->[0][1];\nRandom spherical polytope of dimension 4; seed=5\npolytope > $V = [$Q->[0]->VERTICES];\npolytope > print $V->[0];\n...\npolytope > $S = [$Q->[0]->get_schedule(\"H_VECTOR\")];\npolytope > print join(\", \", $S->[0]->list);\nprecondition : N_RAYS | N_INPUT_RAYS ( ppl.convex_hull.primal: FACETS, LINEAR_SPAN : RAYS | INPUT_RAYS ), sensitivity check for FacetPerm, ppl.convex_hull.primal: FACETS, LINEAR_SPAN : RAYS | INPUT_RAYS, RAYS_IN_FACETS : RAYS, FACETS, GRAPH.ADJACENCY : RAYS_IN_FACETS, DUAL_GRAPH.ADJACENCY : RAYS_IN_FACETS, SIMPLICIAL : COMBINATORIAL_DIM, RAYS_IN_FACETS, N_EDGES : ADJACENCY ( applied to DUAL_GRAPH ), N_EDGES : ADJACENCY ( applied to GRAPH ), N_RAYS : RAYS, N_FACETS : FACETS, precondition : COMBINATORIAL_DIM ( F_VECTOR : N_FACETS, N_RAYS, GRAPH.N_EDGES, DUAL_GRAPH.N_EDGES, COMBINATORIAL_DIM ), F_VECTOR : N_FACETS, N_RAYS, GRAPH.N_EDGES, DUAL_GRAPH.N_EDGES, COMBINATORIAL_DIM, precondition : SIMPLICIAL ( H_VECTOR : F_VECTOR ), H_VECTOR : F_VECTOR\npolytope > $L = [$S->[0]->list];\npolytope > print join(\", \", $L->[0]);\nprecondition : N_RAYS | N_INPUT_RAYS ( ppl.convex_hull.primal: FACETS, LINEAR_SPAN : RAYS | INPUT_RAYS )\n```\n\nSo, for wrapping lists, it won't work either.",
    "created_at": "2017-03-06T10:59:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332304",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:19" align="right">comment:19</div>

Next thing to try: Use a reference to an array. According to http://perldoc.perl.org/5.20.0/perllol.html, I expect it to work as follows:

```
polytope > $P = [rand_sphere(4,33, seed=>5)];
polytope > print $P->[0];
Polymake::polytope::Polytope__Rational=ARRAY(0x7c9bae0)
polytope > print $P->[0][1];
Random spherical polytope of dimension 4; seed=5
polytope > $Q = [$P->[0]];
polytope > print $Q->[0];
Polymake::polytope::Polytope__Rational=ARRAY(0x7c9bae0)
polytope > print $Q->[0][1];
Random spherical polytope of dimension 4; seed=5
polytope > $V = [$Q->[0]->VERTICES];
polytope > print $V->[0];
...
polytope > $S = [$Q->[0]->get_schedule("H_VECTOR")];
polytope > print join(", ", $S->[0]->list);
precondition : N_RAYS | N_INPUT_RAYS ( ppl.convex_hull.primal: FACETS, LINEAR_SPAN : RAYS | INPUT_RAYS ), sensitivity check for FacetPerm, ppl.convex_hull.primal: FACETS, LINEAR_SPAN : RAYS | INPUT_RAYS, RAYS_IN_FACETS : RAYS, FACETS, GRAPH.ADJACENCY : RAYS_IN_FACETS, DUAL_GRAPH.ADJACENCY : RAYS_IN_FACETS, SIMPLICIAL : COMBINATORIAL_DIM, RAYS_IN_FACETS, N_EDGES : ADJACENCY ( applied to DUAL_GRAPH ), N_EDGES : ADJACENCY ( applied to GRAPH ), N_RAYS : RAYS, N_FACETS : FACETS, precondition : COMBINATORIAL_DIM ( F_VECTOR : N_FACETS, N_RAYS, GRAPH.N_EDGES, DUAL_GRAPH.N_EDGES, COMBINATORIAL_DIM ), F_VECTOR : N_FACETS, N_RAYS, GRAPH.N_EDGES, DUAL_GRAPH.N_EDGES, COMBINATORIAL_DIM, precondition : SIMPLICIAL ( H_VECTOR : F_VECTOR ), H_VECTOR : F_VECTOR
polytope > $L = [$S->[0]->list];
polytope > print join(", ", $L->[0]);
precondition : N_RAYS | N_INPUT_RAYS ( ppl.convex_hull.primal: FACETS, LINEAR_SPAN : RAYS | INPUT_RAYS )
```

So, for wrapping lists, it won't work either.



---

archive/issue_comments_332305.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nIt seems that the problem with nested arrays is known and is discussed [here](http://www.webreference.com/programming/perl/nested/index.html).",
    "created_at": "2017-03-06T11:08:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332305",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:20" align="right">comment:20</div>

It seems that the problem with nested arrays is known and is discussed [here](http://www.webreference.com/programming/perl/nested/index.html).



---

archive/issue_comments_332306.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nApparently there are no arrays of arrays in Perl. Instead, each item in an array has to be a scalar. Hence, an array of arrays would in fact be implemented as an array of *references* to arrays.\n\nAnd it seems that Perl would automagically create such references if you assign something to an entry of an existing array, according to the reference given in the previous post. So, I expect that things would finally work as follows:\n\n```\npolytope > $P = []; $P->[0] = rand_sphere(4,33,seed=>5);\npolytope > print $P->[0][1];\nRandom spherical polytope of dimension 4; seed=5\npolytope > $Q = []; $Q->[0] = $P->[0];\npolytope > print $Q->[0][1];\nRandom spherical polytope of dimension 4; seed=5\npolytope > $V = []; $V->[0] = $Q->[0]->VERTICES;\npolytope > print $V->[0];\n...  # output as expected\npolytope > $S = []; $S->[0] = $Q->[0]->get_schedule(\"H_VECTOR\");\npolytope > print join(\"\\n \", $S->[0]->list);\nprecondition : N_RAYS | N_INPUT_RAYS ( ppl.convex_hull.primal: FACETS, LINEAR_SPAN : RAYS | INPUT_RAYS )\n sensitivity check for FacetPerm\n...   # output as expected\npolytope > $L = []; $L->[0] = $S->[0]->list;\n\npolytope > print join(\"\\n \", $L->[0]);\n15\n```\nWTF??\n\nI suppose the problem here is that in the line `$L->[0] = $S->[0]->list;` perl puts a scalar value into the first entry of the list that L points to. In contrast to what I thought perl would do, it does not put a *reference* (which is a scalar) to `$S->[0]->list` into the first entry of L, but it puts there a scalar interpretation of the array `$S->[0]->list` --- which is the length of that array.\n\nCrap.",
    "created_at": "2017-03-06T11:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332306",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:21" align="right">comment:21</div>

Apparently there are no arrays of arrays in Perl. Instead, each item in an array has to be a scalar. Hence, an array of arrays would in fact be implemented as an array of *references* to arrays.

And it seems that Perl would automagically create such references if you assign something to an entry of an existing array, according to the reference given in the previous post. So, I expect that things would finally work as follows:

```
polytope > $P = []; $P->[0] = rand_sphere(4,33,seed=>5);
polytope > print $P->[0][1];
Random spherical polytope of dimension 4; seed=5
polytope > $Q = []; $Q->[0] = $P->[0];
polytope > print $Q->[0][1];
Random spherical polytope of dimension 4; seed=5
polytope > $V = []; $V->[0] = $Q->[0]->VERTICES;
polytope > print $V->[0];
...  # output as expected
polytope > $S = []; $S->[0] = $Q->[0]->get_schedule("H_VECTOR");
polytope > print join("\n ", $S->[0]->list);
precondition : N_RAYS | N_INPUT_RAYS ( ppl.convex_hull.primal: FACETS, LINEAR_SPAN : RAYS | INPUT_RAYS )
 sensitivity check for FacetPerm
...   # output as expected
polytope > $L = []; $L->[0] = $S->[0]->list;

polytope > print join("\n ", $L->[0]);
15
```
WTF??

I suppose the problem here is that in the line `$L->[0] = $S->[0]->list;` perl puts a scalar value into the first entry of the list that L points to. In contrast to what I thought perl would do, it does not put a *reference* (which is a scalar) to `$S->[0]->list` into the first entry of L, but it puts there a scalar interpretation of the array `$S->[0]->list` --- which is the length of that array.

Crap.



---

archive/issue_comments_332307.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nI will now try this model:\n\n- A variable created by Sage in the interface are arrays.\n- Such variable either corresponds to a genuine Perl array, or it is an array of length one whose single entry is a reference to some Polymake object.\n- I only need to distinguish one thing: If var is an array of length>0, then it is guaranteed to be a genuine Perl array, and we consistently use var as `@var`. Otherwise, we use it in the form `$var[0]`.\n- Since the length of the array is determined at the time of its creation, I can store an attribute in the Sage wrapper that tells what case we'll have to deal with.\n- As far as I can see, the only problem would be a genuine Perl array x of length 1, that we would mistakenly interpret as a Polymake object wrapped in x; this would only be problematic if the array x would later be modified.\n\nAnyway. I will next try to use this approach to assign `expr` in Polymake to a variable:\n- `@SAGE0 = (expr);`, and `\"SAGE0\"` is the autogenerated name of a Sage wrapper for expr.\n- Test the length of `@SAGE0`. If the length is 1, then the sage wrapper stores the information that to access the wrapped value it has to use `$SAGE0[0]`. Otherwise, it stores the information that to access the wrapped value it has to use `@SAGE0`.\n- Do not care about the case that `expr` is an array of length one.",
    "created_at": "2017-03-06T12:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332307",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:22" align="right">comment:22</div>

I will now try this model:

- A variable created by Sage in the interface are arrays.
- Such variable either corresponds to a genuine Perl array, or it is an array of length one whose single entry is a reference to some Polymake object.
- I only need to distinguish one thing: If var is an array of length>0, then it is guaranteed to be a genuine Perl array, and we consistently use var as `@var`. Otherwise, we use it in the form `$var[0]`.
- Since the length of the array is determined at the time of its creation, I can store an attribute in the Sage wrapper that tells what case we'll have to deal with.
- As far as I can see, the only problem would be a genuine Perl array x of length 1, that we would mistakenly interpret as a Polymake object wrapped in x; this would only be problematic if the array x would later be modified.

Anyway. I will next try to use this approach to assign `expr` in Polymake to a variable:
- `@SAGE0 = (expr);`, and `"SAGE0"` is the autogenerated name of a Sage wrapper for expr.
- Test the length of `@SAGE0`. If the length is 1, then the sage wrapper stores the information that to access the wrapped value it has to use `$SAGE0[0]`. Otherwise, it stores the information that to access the wrapped value it has to use `@SAGE0`.
- Do not care about the case that `expr` is an array of length one.



---

archive/issue_comments_332308.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e801cab743689e344ef468a09640f4e2f5e75525\"><code>e801cab</code></a></td><td><code>Change to a different approach to wrapping Perl variables</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87ad58632e42a3d0c75f7871391012fd8b328f35\"><code>87ad586</code></a></td><td><code>Change syntax for catching 'ValueError as...'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fec57d12b6cd60325332a8ee90f10e8180841c50\"><code>fec57d1</code></a></td><td><code>Merge branch 't/22501/make_it_easier_to_customize_pexpect_interfaces' into t/22452/create_a_polymake_pexpect_interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69e01f35fc42e27b2b6f3b01357c84ff3fb0a2ad\"><code>69e01f3</code></a></td><td><code>Small change to how certain element types are printed</code></td></tr></table>\n",
    "created_at": "2017-03-06T16:26:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332308",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e801cab743689e344ef468a09640f4e2f5e75525"><code>e801cab</code></a></td><td><code>Change to a different approach to wrapping Perl variables</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87ad58632e42a3d0c75f7871391012fd8b328f35"><code>87ad586</code></a></td><td><code>Change syntax for catching 'ValueError as...'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fec57d12b6cd60325332a8ee90f10e8180841c50"><code>fec57d1</code></a></td><td><code>Merge branch 't/22501/make_it_easier_to_customize_pexpect_interfaces' into t/22452/create_a_polymake_pexpect_interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69e01f35fc42e27b2b6f3b01357c84ff3fb0a2ad"><code>69e01f3</code></a></td><td><code>Small change to how certain element types are printed</code></td></tr></table>




---

archive/issue_comments_332309.json:
```json
{
    "body": "Changed commit from **[`06e85fd`](https://github.com/sagemath/sagetrac-mirror/commit/06e85fd9d84b15f06c4aa2e14d4db84c009c0459)** to **[`69e01f3`](https://github.com/sagemath/sagetrac-mirror/commit/69e01f35fc42e27b2b6f3b01357c84ff3fb0a2ad)**",
    "created_at": "2017-03-06T16:26:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332309",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`06e85fd`](https://github.com/sagemath/sagetrac-mirror/commit/06e85fd9d84b15f06c4aa2e14d4db84c009c0459)** to **[`69e01f3`](https://github.com/sagemath/sagetrac-mirror/commit/69e01f35fc42e27b2b6f3b01357c84ff3fb0a2ad)**



---

archive/issue_comments_332310.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI have implemented the approach explained in the previous comment.\n\nHere I show that I can basically recreate a rather non-trivial computation from [this polymake tutorial](https://polymake.org/doku.php/tutorial/lattice_polytopes_tutorial):\n\n```\nsage: from sage.interfaces.polymake import polymake\nsage: p = polymake.cube(3)\nsage: set_verbose(3)\nsage: p.N_LATTICE_POINTS\nused package latte\n  LattE (Lattice point Enumeration) is a computer software dedicated to the \n  problems of counting lattice points and integration inside convex polytopes.\n  Copyright by Matthias Koeppe, Jesus A. De Loera and others.\n  http://www.math.ucdavis.edu/~latte/\n27\nsage: p.HILBERT_BASIS_GENERATORS\nused package 4ti2\n  4ti2 -- A software package for algebraic, geometric and combinatorial problems on linear spaces.\n  Copyright by 4ti2 team.\n  http://www.4ti2.de/\n\n<1 0 -1 -1\n1 1 -1 -1\n1 -1 1 -1\n1 1 1 1\n1 -1 -1 -1\n1 0 0 -1\n1 1 0 -1\n1 -1 0 -1\n1 0 1 -1\n1 1 1 -1\n1 0 -1 0\n1 1 -1 0\n1 -1 1 0\n1 -1 -1 0\n1 0 0 0\n1 1 0 0\n1 -1 0 0\n1 0 1 0\n1 1 1 0\n1 0 -1 1\n1 1 -1 1\n1 -1 1 1\n1 -1 -1 1\n1 0 0 1\n1 1 0 1\n1 -1 0 1\n1 0 1 1\n>\n<>\n```\nI am not totally happy with the string representation of this, but I guess it is still nice enough. Note that a different package is used compared with what is stated in the tutorial. Probably this is because of a different polymake version:\n\n```\nsage: set_verbose(0)\nsage: polymake.version()\n'3.0'\n```\nwhereas the tutorial uses version 2.9.6.\n\nWith the pexpect interface, it is also possible to create a new instance of a Polymake class, but the typical name (\"`new`\") is not available, as a method with this name but with a different semantics exists in Sage's interface framework. So, I chose a different name:\n\n```\nsage: q = polymake.new_from_type(\"Polytope\", INEQUALITIES=[[5,-4,0,1],[-3,0,-4,1],[-2,1,0,0],[-4,4,4,-1],[0,0,1,0],[8,0,0,-1],[1,0,-1,0],[3,-1,0,0]])\nsage: q\nPolytope<Rational>[SAGE45]\n```\nAgain, the string representation could be subject of discussion. The current proposal is to take into account the type name and the name of the Sage variable representing the instance.\n\n```\nsage: set_verbose(3)\nsage: q.VERTICES\nused package ppl\n  The Parma Polyhedra Library (PPL): A C++ library for convex polyhedra\n  and other numerical abstractions.\n  http://www.cs.unipr.it/ppl/\n\n1 3 0 8\n1 2 1 8\n1 3 1 8\n1 2 0 3\n1 3 0 7\n1 3 1 7\n1 2 1 7\n1 2 0 4\nsage: q.NORMAL\n\nsage: q.HILBERT_BASIS_GENERATORS\n\n<1 3 0 8\n2 5 1 13\n1 2 1 8\n1 2 0 3\n1 3 0 7\n1 2 1 7\n1 3 1 7\n1 3 1 8\n1 2 0 4\n>\n<>\nsage: q.VERY_AMPLE\n1\n```\nI think the order of facets has changed between versions, since some of the following differs from what is in the tutorial:\n\n```\nsage: f = q.facet(2)\nsage: f.VERY_AMPLE\n1\nsage: f.VERTICES\n\n1 2 1 8\n1 2 0 3\n1 2 1 7\n1 2 0 4\nsage: q.FACETS\n\n5 -4 0 1\n-3 0 -4 1\n-2 1 0 0\n-4 4 4 -1\n0 0 1 0\n8 0 0 -1\n1 0 -1 0\n3 -1 0 0\n```\nHere I show that Polymake's warnings are taken care of (and so are errors):\n\n```\nsage: f.FACET_WIDTH\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py:464: RuntimeWarning: could not compute 'FACET_WIDTH' probably because of unsatisfied preconditions:\nprecondition : FULL_DIM ( FACET_WIDTHS : VERTICES , FACETS , CONE_AMBIENT_DIM )\n  warnings.warn(w, RuntimeWarning)\n\nsage: g = f.ambient_lattice_normalization()\nsage: q.FACET_WIDTH\n5\nsage: cr = p.vertex_lattice_normalization()\nsage: cr.VERTICES\n\n(4) (0 1)\n1 1 0 0\n1 0 1 0\n1 1 1 0\n1 0 0 1\n1 1 0 1\n1 0 1 1\n1 1 1 1\n```\nIn polymake, you sometimes need to load a different application in order to work. In terms of the pexpect interface, this is a non-trivial change, as the current prompt depends on the current application. Nonetheless, I made it work:\n\n```\nsage: polymake.application('fan')\nsage: f = p.normal_fan()\nsage: f.SMOOTH_FAN\n1\nsage: g = q.normal_fan()\nsage: g.RAYS\n\n-1 0 1/4\n0 -1 1/4\n1 0 0\n1 1 -1/4\n0 1 0\n0 0 -1\n0 -1 0\n-1 0 0\nsage: g.RAYS.primitive()\n\n-4 0 1\n0 -4 1\n1 0 0\n4 4 -1\n0 1 0\n0 0 -1\n0 -1 0\n-1 0 0\nsage: g.MAXIMAL_CONES\n\n{3 4 5 7}\n{2 3 5 6}\n{5 6 7}\n{0 1 2 4}\n{0 4 7}\n{0 1 6 7}\n{1 2 6}\n{2 3 4}\nsage: g.HASSE_DIAGRAM.FACES.rows_numbered()\n\n0:\n1:0\n2:1\n3:2\n4:3\n5:4\n6:5\n7:6\n8:7\n9:0 1\n10:0 4\n11:0 7\n12:1 2\n13:1 6\n14:2 3\n15:2 4\n16:2 6\n17:3 4\n18:3 5\n19:4 7\n20:5 6\n21:5 7\n22:6 7\n23:3 4 5 7\n24:2 3 5 6\n25:5 6 7\n26:0 1 2 4\n27:0 4 7\n28:0 1 6 7\n29:1 2 6\n30:2 3 4\n31:0 1 2 3 4 5 6 7\nsage: g.HASSE_DIAGRAM.nodes_of_dim(-2)\n{9 10 11 12 13 14 15 16 17 18 19 20 21 22}\n```\n\nVisualisation does not work. I don't know if that can be achieved with a pexpect interface.\n\n**__TODO_**\n\nAdd documentation. Apart from that, I currently see no obvious issue.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e801cab743689e344ef468a09640f4e2f5e75525\"><code>e801cab</code></a></td><td><code>Change to a different approach to wrapping Perl variables</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87ad58632e42a3d0c75f7871391012fd8b328f35\"><code>87ad586</code></a></td><td><code>Change syntax for catching 'ValueError as...'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fec57d12b6cd60325332a8ee90f10e8180841c50\"><code>fec57d1</code></a></td><td><code>Merge branch 't/22501/make_it_easier_to_customize_pexpect_interfaces' into t/22452/create_a_polymake_pexpect_interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69e01f35fc42e27b2b6f3b01357c84ff3fb0a2ad\"><code>69e01f3</code></a></td><td><code>Small change to how certain element types are printed</code></td></tr></table>\n",
    "created_at": "2017-03-06T16:42:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332310",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:24" align="right">comment:24</div>

I have implemented the approach explained in the previous comment.

Here I show that I can basically recreate a rather non-trivial computation from [this polymake tutorial](https://polymake.org/doku.php/tutorial/lattice_polytopes_tutorial):

```
sage: from sage.interfaces.polymake import polymake
sage: p = polymake.cube(3)
sage: set_verbose(3)
sage: p.N_LATTICE_POINTS
used package latte
  LattE (Lattice point Enumeration) is a computer software dedicated to the 
  problems of counting lattice points and integration inside convex polytopes.
  Copyright by Matthias Koeppe, Jesus A. De Loera and others.
  http://www.math.ucdavis.edu/~latte/
27
sage: p.HILBERT_BASIS_GENERATORS
used package 4ti2
  4ti2 -- A software package for algebraic, geometric and combinatorial problems on linear spaces.
  Copyright by 4ti2 team.
  http://www.4ti2.de/

<1 0 -1 -1
1 1 -1 -1
1 -1 1 -1
1 1 1 1
1 -1 -1 -1
1 0 0 -1
1 1 0 -1
1 -1 0 -1
1 0 1 -1
1 1 1 -1
1 0 -1 0
1 1 -1 0
1 -1 1 0
1 -1 -1 0
1 0 0 0
1 1 0 0
1 -1 0 0
1 0 1 0
1 1 1 0
1 0 -1 1
1 1 -1 1
1 -1 1 1
1 -1 -1 1
1 0 0 1
1 1 0 1
1 -1 0 1
1 0 1 1
>
<>
```
I am not totally happy with the string representation of this, but I guess it is still nice enough. Note that a different package is used compared with what is stated in the tutorial. Probably this is because of a different polymake version:

```
sage: set_verbose(0)
sage: polymake.version()
'3.0'
```
whereas the tutorial uses version 2.9.6.

With the pexpect interface, it is also possible to create a new instance of a Polymake class, but the typical name ("`new`") is not available, as a method with this name but with a different semantics exists in Sage's interface framework. So, I chose a different name:

```
sage: q = polymake.new_from_type("Polytope", INEQUALITIES=[[5,-4,0,1],[-3,0,-4,1],[-2,1,0,0],[-4,4,4,-1],[0,0,1,0],[8,0,0,-1],[1,0,-1,0],[3,-1,0,0]])
sage: q
Polytope<Rational>[SAGE45]
```
Again, the string representation could be subject of discussion. The current proposal is to take into account the type name and the name of the Sage variable representing the instance.

```
sage: set_verbose(3)
sage: q.VERTICES
used package ppl
  The Parma Polyhedra Library (PPL): A C++ library for convex polyhedra
  and other numerical abstractions.
  http://www.cs.unipr.it/ppl/

1 3 0 8
1 2 1 8
1 3 1 8
1 2 0 3
1 3 0 7
1 3 1 7
1 2 1 7
1 2 0 4
sage: q.NORMAL

sage: q.HILBERT_BASIS_GENERATORS

<1 3 0 8
2 5 1 13
1 2 1 8
1 2 0 3
1 3 0 7
1 2 1 7
1 3 1 7
1 3 1 8
1 2 0 4
>
<>
sage: q.VERY_AMPLE
1
```
I think the order of facets has changed between versions, since some of the following differs from what is in the tutorial:

```
sage: f = q.facet(2)
sage: f.VERY_AMPLE
1
sage: f.VERTICES

1 2 1 8
1 2 0 3
1 2 1 7
1 2 0 4
sage: q.FACETS

5 -4 0 1
-3 0 -4 1
-2 1 0 0
-4 4 4 -1
0 0 1 0
8 0 0 -1
1 0 -1 0
3 -1 0 0
```
Here I show that Polymake's warnings are taken care of (and so are errors):

```
sage: f.FACET_WIDTH
/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/interfaces/polymake.py:464: RuntimeWarning: could not compute 'FACET_WIDTH' probably because of unsatisfied preconditions:
precondition : FULL_DIM ( FACET_WIDTHS : VERTICES , FACETS , CONE_AMBIENT_DIM )
  warnings.warn(w, RuntimeWarning)

sage: g = f.ambient_lattice_normalization()
sage: q.FACET_WIDTH
5
sage: cr = p.vertex_lattice_normalization()
sage: cr.VERTICES

(4) (0 1)
1 1 0 0
1 0 1 0
1 1 1 0
1 0 0 1
1 1 0 1
1 0 1 1
1 1 1 1
```
In polymake, you sometimes need to load a different application in order to work. In terms of the pexpect interface, this is a non-trivial change, as the current prompt depends on the current application. Nonetheless, I made it work:

```
sage: polymake.application('fan')
sage: f = p.normal_fan()
sage: f.SMOOTH_FAN
1
sage: g = q.normal_fan()
sage: g.RAYS

-1 0 1/4
0 -1 1/4
1 0 0
1 1 -1/4
0 1 0
0 0 -1
0 -1 0
-1 0 0
sage: g.RAYS.primitive()

-4 0 1
0 -4 1
1 0 0
4 4 -1
0 1 0
0 0 -1
0 -1 0
-1 0 0
sage: g.MAXIMAL_CONES

{3 4 5 7}
{2 3 5 6}
{5 6 7}
{0 1 2 4}
{0 4 7}
{0 1 6 7}
{1 2 6}
{2 3 4}
sage: g.HASSE_DIAGRAM.FACES.rows_numbered()

0:
1:0
2:1
3:2
4:3
5:4
6:5
7:6
8:7
9:0 1
10:0 4
11:0 7
12:1 2
13:1 6
14:2 3
15:2 4
16:2 6
17:3 4
18:3 5
19:4 7
20:5 6
21:5 7
22:6 7
23:3 4 5 7
24:2 3 5 6
25:5 6 7
26:0 1 2 4
27:0 4 7
28:0 1 6 7
29:1 2 6
30:2 3 4
31:0 1 2 3 4 5 6 7
sage: g.HASSE_DIAGRAM.nodes_of_dim(-2)
{9 10 11 12 13 14 15 16 17 18 19 20 21 22}
```

Visualisation does not work. I don't know if that can be achieved with a pexpect interface.

**__TODO_**

Add documentation. Apart from that, I currently see no obvious issue.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e801cab743689e344ef468a09640f4e2f5e75525"><code>e801cab</code></a></td><td><code>Change to a different approach to wrapping Perl variables</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87ad58632e42a3d0c75f7871391012fd8b328f35"><code>87ad586</code></a></td><td><code>Change syntax for catching 'ValueError as...'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fec57d12b6cd60325332a8ee90f10e8180841c50"><code>fec57d1</code></a></td><td><code>Merge branch 't/22501/make_it_easier_to_customize_pexpect_interfaces' into t/22452/create_a_polymake_pexpect_interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69e01f35fc42e27b2b6f3b01357c84ff3fb0a2ad"><code>69e01f3</code></a></td><td><code>Small change to how certain element types are printed</code></td></tr></table>




---

archive/issue_comments_332311.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/054123b0e98db7040fa83682283130e4fff62dc9\"><code>054123b</code></a></td><td><code>Extending a method to use 'new' for Polymake classes</code></td></tr></table>\n",
    "created_at": "2017-03-07T08:50:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332311",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/054123b0e98db7040fa83682283130e4fff62dc9"><code>054123b</code></a></td><td><code>Extending a method to use 'new' for Polymake classes</code></td></tr></table>




---

archive/issue_comments_332312.json:
```json
{
    "body": "Changed commit from **[`69e01f3`](https://github.com/sagemath/sagetrac-mirror/commit/69e01f35fc42e27b2b6f3b01357c84ff3fb0a2ad)** to **[`054123b`](https://github.com/sagemath/sagetrac-mirror/commit/054123b0e98db7040fa83682283130e4fff62dc9)**",
    "created_at": "2017-03-07T08:50:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332312",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`69e01f3`](https://github.com/sagemath/sagetrac-mirror/commit/69e01f35fc42e27b2b6f3b01357c84ff3fb0a2ad)** to **[`054123b`](https://github.com/sagemath/sagetrac-mirror/commit/054123b0e98db7040fa83682283130e4fff62dc9)**



---

archive/issue_comments_332313.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI think I will change the strategy for wrapping yet again.\n\n__Basic problem to solve__\n\nIn Perl, the different basic types HASH, ARRAY, SCALAR, and IO require a different syntax in order to perform \"equivalent\" operations on them. Even to assign some data X to a variable, the required syntax depends on the type of X. So, if I don't know in advance the type of some data X then there's your problem.\n\nMy current approach is to store all data in an ARRAY: If the data X is in fact an ARRAY then the wrap is the same as X, as Perl doesn't know arrays of arrays; otherwise the wrap is a list of length one containing X. So, assigning data X to a wrapper variable W, I know how to do so independent of the type of X. For all subsequent operations on X, I can test the type of the first entry of W (if len(W)==1) respectively I know that X is the same as W, and then know what to do.\n\nCaveat: My current approach would fail if X happens to be an array of length 1.\n\nI think a cleaner solution would be this: Write a little Perl function `get_type_of`, such that `get_type_of(X)` returns the array `(\"ARRAY\", X)` resp. `(\"HASH\", X)` resp. `(\"SCALAR\", X)` depending on the type of X --- this could probably be done by some \"try - catch\" magic.\n\nNow, when wrapping a polymake object in the pexpect interface, the output of `get_type_of` would be used to determine whether we need to evaluate `$SAGE1 = X;` or `@SAGE1 = X;` or `%SAGE1 = X;` to create the wrapper. Of course, the type would be stored, so that in all later operations it is clear whether, for example, item access is done be `@SAGE1[14]` or `%SAGE1{14}`.\n\nBut this has to wait for later, as I should be busy with different things today.",
    "created_at": "2017-03-07T10:59:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332313",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:26" align="right">comment:26</div>

I think I will change the strategy for wrapping yet again.

__Basic problem to solve__

In Perl, the different basic types HASH, ARRAY, SCALAR, and IO require a different syntax in order to perform "equivalent" operations on them. Even to assign some data X to a variable, the required syntax depends on the type of X. So, if I don't know in advance the type of some data X then there's your problem.

My current approach is to store all data in an ARRAY: If the data X is in fact an ARRAY then the wrap is the same as X, as Perl doesn't know arrays of arrays; otherwise the wrap is a list of length one containing X. So, assigning data X to a wrapper variable W, I know how to do so independent of the type of X. For all subsequent operations on X, I can test the type of the first entry of W (if len(W)==1) respectively I know that X is the same as W, and then know what to do.

Caveat: My current approach would fail if X happens to be an array of length 1.

I think a cleaner solution would be this: Write a little Perl function `get_type_of`, such that `get_type_of(X)` returns the array `("ARRAY", X)` resp. `("HASH", X)` resp. `("SCALAR", X)` depending on the type of X --- this could probably be done by some "try - catch" magic.

Now, when wrapping a polymake object in the pexpect interface, the output of `get_type_of` would be used to determine whether we need to evaluate `$SAGE1 = X;` or `@SAGE1 = X;` or `%SAGE1 = X;` to create the wrapper. Of course, the type would be stored, so that in all later operations it is clear whether, for example, item access is done be `@SAGE1[14]` or `%SAGE1{14}`.

But this has to wait for later, as I should be busy with different things today.



---

archive/issue_comments_332314.json:
```json
{
    "body": "Changed commit from **[`054123b`](https://github.com/sagemath/sagetrac-mirror/commit/054123b0e98db7040fa83682283130e4fff62dc9)** to **[`15b6cc6`](https://github.com/sagemath/sagetrac-mirror/commit/15b6cc65c7415656df8881214ea6eb4720e6dc74)**",
    "created_at": "2017-03-07T12:11:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332314",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`054123b`](https://github.com/sagemath/sagetrac-mirror/commit/054123b0e98db7040fa83682283130e4fff62dc9)** to **[`15b6cc6`](https://github.com/sagemath/sagetrac-mirror/commit/15b6cc65c7415656df8881214ea6eb4720e6dc74)**



---

archive/issue_comments_332315.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15b6cc65c7415656df8881214ea6eb4720e6dc74\"><code>15b6cc6</code></a></td><td><code>Remove automated creation of a logfile</code></td></tr></table>\n",
    "created_at": "2017-03-07T12:11:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332315",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15b6cc65c7415656df8881214ea6eb4720e6dc74"><code>15b6cc6</code></a></td><td><code>Remove automated creation of a logfile</code></td></tr></table>




---

archive/issue_comments_332316.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9009929e066bf5c002836702ab968bbc098ba9d\"><code>b900992</code></a></td><td><code>fix a bug in getting docs from polymake</code></td></tr></table>\n",
    "created_at": "2017-03-07T12:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332316",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9009929e066bf5c002836702ab968bbc098ba9d"><code>b900992</code></a></td><td><code>fix a bug in getting docs from polymake</code></td></tr></table>




---

archive/issue_comments_332317.json:
```json
{
    "body": "Changed commit from **[`15b6cc6`](https://github.com/sagemath/sagetrac-mirror/commit/15b6cc65c7415656df8881214ea6eb4720e6dc74)** to **[`b900992`](https://github.com/sagemath/sagetrac-mirror/commit/b9009929e066bf5c002836702ab968bbc098ba9d)**",
    "created_at": "2017-03-07T12:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332317",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`15b6cc6`](https://github.com/sagemath/sagetrac-mirror/commit/15b6cc65c7415656df8881214ea6eb4720e6dc74)** to **[`b900992`](https://github.com/sagemath/sagetrac-mirror/commit/b9009929e066bf5c002836702ab968bbc098ba9d)**



---

archive/issue_comments_332318.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@simon-king-jena](#comment:26):\n> I think I will change the strategy for wrapping yet again.\n> ...\n> I think a cleaner solution would be this: Write a little Perl function `get_type_of`, such that `get_type_of(X)` returns the array `(\"ARRAY\", X)` resp. `(\"HASH\", X)` resp. `(\"SCALAR\", X)` depending on the type of X --- this could probably be done by some \"try - catch\" magic.\n\nI tried, and it seems it won't work. At least it won't work better than the current approach. So, I'll keep it.\n\nAndreas Paffenholz has just pointed out to me how to parse the output of `apropos \"\";` in order to not only get the functions of the current application, but also to get member and member function names, which is important for tab completion respectively for knowing what a Sage user means when she types `X.name_of_something`: An property of X? A polymake function that, when called, is applied to X **and** further given arguments? A member function of X that, when called, is evaluated **only** on the further given arguments?\n\nAlso I made some experiments with KeyboardInterrupt. Sometimes I found that it crashed the interface (i.e., `polymake._expect` became None), and so far I don't understand why this can happen, and why it doesn't *always* happen.",
    "created_at": "2017-03-08T13:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332318",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@simon-king-jena](#comment:26):
> I think I will change the strategy for wrapping yet again.
> ...
> I think a cleaner solution would be this: Write a little Perl function `get_type_of`, such that `get_type_of(X)` returns the array `("ARRAY", X)` resp. `("HASH", X)` resp. `("SCALAR", X)` depending on the type of X --- this could probably be done by some "try - catch" magic.

I tried, and it seems it won't work. At least it won't work better than the current approach. So, I'll keep it.

Andreas Paffenholz has just pointed out to me how to parse the output of `apropos "";` in order to not only get the functions of the current application, but also to get member and member function names, which is important for tab completion respectively for knowing what a Sage user means when she types `X.name_of_something`: An property of X? A polymake function that, when called, is applied to X **and** further given arguments? A member function of X that, when called, is evaluated **only** on the further given arguments?

Also I made some experiments with KeyboardInterrupt. Sometimes I found that it crashed the interface (i.e., `polymake._expect` became None), and so far I don't understand why this can happen, and why it doesn't *always* happen.



---

archive/issue_comments_332319.json:
```json
{
    "body": "Dependencies: **22501**",
    "created_at": "2017-03-08T18:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332319",
    "user": "https://github.com/simon-king-jena"
}
```

Dependencies: **22501**



---

archive/issue_comments_332320.json:
```json
{
    "body": "Changed dependencies from **22501** to **#22501**",
    "created_at": "2017-03-08T18:02:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332320",
    "user": "https://github.com/simon-king-jena"
}
```

Changed dependencies from **22501** to **#22501**



---

archive/issue_comments_332321.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nIn addition to the problem with keyboard interrupt, I got this problem (probably related):\n\n```\nsage: from sage.interfaces.polymake import polymake\nsage: p = polymake.rand_sphere(4,23, seed=5)\nsage: t = p.TRIANGULATION\nsage: t?\nTraceback (most recent call last):\n...\nRuntimeError: Polymake terminated unexpectedly while reading in a large line:\nunknown help topic 'Polymake::topaz::GeometricSimplicialComplex__Rational::__as__Polymake::polytope::Polytope::_prop_TRIANGULATION'\n```\n\nAndreas and Julian have told me a bit more about several kinds of type names, and it seems they would be useful both to access the documentation and to get a more accurate list of available properties and member functions.",
    "created_at": "2017-03-08T18:13:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332321",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:32" align="right">comment:32</div>

In addition to the problem with keyboard interrupt, I got this problem (probably related):

```
sage: from sage.interfaces.polymake import polymake
sage: p = polymake.rand_sphere(4,23, seed=5)
sage: t = p.TRIANGULATION
sage: t?
Traceback (most recent call last):
...
RuntimeError: Polymake terminated unexpectedly while reading in a large line:
unknown help topic 'Polymake::topaz::GeometricSimplicialComplex__Rational::__as__Polymake::polytope::Polytope::_prop_TRIANGULATION'
```

Andreas and Julian have told me a bit more about several kinds of type names, and it seems they would be useful both to access the documentation and to get a more accurate list of available properties and member functions.



---

archive/issue_comments_332322.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nA new complication arose: So far, the patterns I was looking for with pexpect have been `application_name > ` (normal prompt), `application_name (digits) > ` (that's the continuation prompt), `killed by signal`, `polymake: ERROR:`, and `polymake: WARNING`.\n\nBut I have just learned that when asking for `help \"Triangulation\"` there is yet another prompt to take care of:\n\n```\npolytope > help \"TRIANGULATION\";\nThere are 5 help topics matching 'TRIANGULATION':\n1: objects/Cone/properties/Triangulation and volume/TRIANGULATION\n2: objects/Polytope/properties/Triangulation and volume/TRIANGULATION\n3: objects/Visualization/Visual::PointConfiguration/methods/TRIANGULATION\n4: objects/Visualization/Visual::Polytope/methods/TRIANGULATION\n5: objects/PointConfiguration/properties/Triangulation and volume/TRIANGULATION\n-------------------\nPlease choose those interesting you via history navigation (ArrowUp/ArrowDown):\n\npolytope [1]> \n```\nI was told by the polymake developers at SageDays84 that the prompt with square brackets will only arise when requesting help.\n\nSo, what shall we do in such situation? Display the available information (using `_sage_doc_`) and leave it to the user to access the different help topics? Always choose the first available help option? Other ideas?",
    "created_at": "2017-03-08T19:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332322",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:33" align="right">comment:33</div>

A new complication arose: So far, the patterns I was looking for with pexpect have been `application_name > ` (normal prompt), `application_name (digits) > ` (that's the continuation prompt), `killed by signal`, `polymake: ERROR:`, and `polymake: WARNING`.

But I have just learned that when asking for `help "Triangulation"` there is yet another prompt to take care of:

```
polytope > help "TRIANGULATION";
There are 5 help topics matching 'TRIANGULATION':
1: objects/Cone/properties/Triangulation and volume/TRIANGULATION
2: objects/Polytope/properties/Triangulation and volume/TRIANGULATION
3: objects/Visualization/Visual::PointConfiguration/methods/TRIANGULATION
4: objects/Visualization/Visual::Polytope/methods/TRIANGULATION
5: objects/PointConfiguration/properties/Triangulation and volume/TRIANGULATION
-------------------
Please choose those interesting you via history navigation (ArrowUp/ArrowDown):

polytope [1]> 
```
I was told by the polymake developers at SageDays84 that the prompt with square brackets will only arise when requesting help.

So, what shall we do in such situation? Display the available information (using `_sage_doc_`) and leave it to the user to access the different help topics? Always choose the first available help option? Other ideas?



---

archive/issue_comments_332323.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI guess the easiest would be to generally look for the `application_name [digits] >` pattern and send a `chr(3)` when it occurs, as this should bring back the normal prompt. And then return the output on top of the pattern. So,that would be the solution \"leave it to the user to access the different help topics\". And `_sage_doc_` could in that case simply return the empty string (or maybe the string representation of the Polymake type).",
    "created_at": "2017-03-08T19:13:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332323",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:34" align="right">comment:34</div>

I guess the easiest would be to generally look for the `application_name [digits] >` pattern and send a `chr(3)` when it occurs, as this should bring back the normal prompt. And then return the output on top of the pattern. So,that would be the solution "leave it to the user to access the different help topics". And `_sage_doc_` could in that case simply return the empty string (or maybe the string representation of the Polymake type).



---

archive/issue_comments_332324.json:
```json
{
    "body": "Changed commit from **[`b900992`](https://github.com/sagemath/sagetrac-mirror/commit/b9009929e066bf5c002836702ab968bbc098ba9d)** to **[`3e5b32d`](https://github.com/sagemath/sagetrac-mirror/commit/3e5b32df91d72075ee5470c22282ca93c828abf9)**",
    "created_at": "2017-03-10T00:51:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332324",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b900992`](https://github.com/sagemath/sagetrac-mirror/commit/b9009929e066bf5c002836702ab968bbc098ba9d)** to **[`3e5b32d`](https://github.com/sagemath/sagetrac-mirror/commit/3e5b32df91d72075ee5470c22282ca93c828abf9)**



---

archive/issue_comments_332325.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9e2b6fb9eddaee5dfc2d4c85f8b689cb3f7e62b\"><code>d9e2b6f</code></a></td><td><code>Use a more recommended way to get a description of a big object in Polymake</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63418a6b26b40f562979ef601fd88b332ae32c55\"><code>63418a6</code></a></td><td><code>Fix that when requesting help, Polymake may request user interrupt.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54ea91c3740e78e615b0112ab3f7a99b6266892d\"><code>54ea91c</code></a></td><td><code>Merge branch 'develop' into t/22452/create_a_polymake_pexpect_interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e5b32df91d72075ee5470c22282ca93c828abf9\"><code>3e5b32d</code></a></td><td><code>Add some documentation for the Polymake interface</code></td></tr></table>\n",
    "created_at": "2017-03-10T00:51:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332325",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9e2b6fb9eddaee5dfc2d4c85f8b689cb3f7e62b"><code>d9e2b6f</code></a></td><td><code>Use a more recommended way to get a description of a big object in Polymake</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63418a6b26b40f562979ef601fd88b332ae32c55"><code>63418a6</code></a></td><td><code>Fix that when requesting help, Polymake may request user interrupt.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54ea91c3740e78e615b0112ab3f7a99b6266892d"><code>54ea91c</code></a></td><td><code>Merge branch 'develop' into t/22452/create_a_polymake_pexpect_interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e5b32df91d72075ee5470c22282ca93c828abf9"><code>3e5b32d</code></a></td><td><code>Add some documentation for the Polymake interface</code></td></tr></table>




---

archive/issue_comments_332326.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6784d6cd2ba194ee259f72e179e8287e0dddd5a5\"><code>6784d6c</code></a></td><td><code>Full doctest coverage for Polymake pexpect interface</code></td></tr></table>\n",
    "created_at": "2017-03-10T12:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332326",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6784d6cd2ba194ee259f72e179e8287e0dddd5a5"><code>6784d6c</code></a></td><td><code>Full doctest coverage for Polymake pexpect interface</code></td></tr></table>




---

archive/issue_comments_332327.json:
```json
{
    "body": "Changed commit from **[`3e5b32d`](https://github.com/sagemath/sagetrac-mirror/commit/3e5b32df91d72075ee5470c22282ca93c828abf9)** to **[`6784d6c`](https://github.com/sagemath/sagetrac-mirror/commit/6784d6cd2ba194ee259f72e179e8287e0dddd5a5)**",
    "created_at": "2017-03-10T12:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332327",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3e5b32d`](https://github.com/sagemath/sagetrac-mirror/commit/3e5b32df91d72075ee5470c22282ca93c828abf9)** to **[`6784d6c`](https://github.com/sagemath/sagetrac-mirror/commit/6784d6cd2ba194ee259f72e179e8287e0dddd5a5)**



---

archive/issue_comments_332328.json:
```json
{
    "body": "Changed commit from **[`6784d6c`](https://github.com/sagemath/sagetrac-mirror/commit/6784d6cd2ba194ee259f72e179e8287e0dddd5a5)** to **[`8485ec8`](https://github.com/sagemath/sagetrac-mirror/commit/8485ec834b7d3d03790c821ea06a4f4415ae56e4)**",
    "created_at": "2017-03-10T12:21:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332328",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6784d6c`](https://github.com/sagemath/sagetrac-mirror/commit/6784d6cd2ba194ee259f72e179e8287e0dddd5a5)** to **[`8485ec8`](https://github.com/sagemath/sagetrac-mirror/commit/8485ec834b7d3d03790c821ea06a4f4415ae56e4)**



---

archive/issue_comments_332329.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8485ec834b7d3d03790c821ea06a4f4415ae56e4\"><code>8485ec8</code></a></td><td><code>Be slightly clearer concerning a test being skipped</code></td></tr></table>\n",
    "created_at": "2017-03-10T12:21:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332329",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8485ec834b7d3d03790c821ea06a4f4415ae56e4"><code>8485ec8</code></a></td><td><code>Be slightly clearer concerning a test being skipped</code></td></tr></table>




---

archive/issue_events_311070.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-10T12:27:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311070"
}
```



---

archive/issue_comments_332330.json:
```json
{
    "body": "Author: **Simon King**",
    "created_at": "2017-03-10T12:27:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332330",
    "user": "https://github.com/simon-king-jena"
}
```

Author: **Simon King**



---

archive/issue_comments_332331.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThe last commits provide full doctest coverage and passes (on my machine) both without polymake (then running `sage -t`) and with polymake (then running `sage -t --optional=sage,polymake`).\n\n**__Caveats__**\n\n- I assume in the tests that the Polymake version is what is currently available by `sage -i polymake`: It is version 3.0. Hopefully that's fine.\n- The test for `_keyboard_interact` is quite flaky. Interactively, it sometimes results in a warning, sometimes in an AttributeError, sometimes it just works as stated. I have no clue concerning the reasons. Anyway, I marked it as \"not tested\".\n- In the test for `_sage_doc_`, I mention another thing I don't understand: When I do\n\n  ```\n  sage: p = polymake.rand_sphere(3,13, seed=12)\n  sage: p.get_schedule?\n  ```\n  one does not get the Polymake documentation of `get_schedule`, even though\n\n  ```\n  sage: print p.get_schedule._sage_doc_()\n  objects/Core::Object/methods/get_schedule:\n  get_schedule(request;  ... ) -> Core::RuleChain\n  \n   Compose an optimal chain of production rules providing all requested properties.\n   The returned RuleChain object can be applied to the original object as well as to any other object\n   with the same initial set of properties.  If no feasible rule chain exists, `undef' is returned.\n  \n   To watch the rule scheduler at work, e.g. to see announcements about tried preconditions,\n   you may temporarily increase the verbosity levels $Verbose::rules and $Verbose::scheduler.\n  \n  Arguments:\n    String request : name of a property with optional alternatives or a property path in dotted notation.\n      Several requests may be listed.\n  \n  Returns Core::RuleChain \n  ```\n  does the right thing. In contrast,\n\n  ```\n  sage: p.minkowski_sum_fukuda?\n  ```\n  just works. Strange.\n\nAnyway, I think it is good enough for being reviewed!\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8485ec834b7d3d03790c821ea06a4f4415ae56e4\"><code>8485ec8</code></a></td><td><code>Be slightly clearer concerning a test being skipped</code></td></tr></table>\n",
    "created_at": "2017-03-10T12:27:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332331",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:38" align="right">comment:38</div>

The last commits provide full doctest coverage and passes (on my machine) both without polymake (then running `sage -t`) and with polymake (then running `sage -t --optional=sage,polymake`).

**__Caveats__**

- I assume in the tests that the Polymake version is what is currently available by `sage -i polymake`: It is version 3.0. Hopefully that's fine.
- The test for `_keyboard_interact` is quite flaky. Interactively, it sometimes results in a warning, sometimes in an AttributeError, sometimes it just works as stated. I have no clue concerning the reasons. Anyway, I marked it as "not tested".
- In the test for `_sage_doc_`, I mention another thing I don't understand: When I do

  ```
  sage: p = polymake.rand_sphere(3,13, seed=12)
  sage: p.get_schedule?
  ```
  one does not get the Polymake documentation of `get_schedule`, even though

  ```
  sage: print p.get_schedule._sage_doc_()
  objects/Core::Object/methods/get_schedule:
  get_schedule(request;  ... ) -> Core::RuleChain
  
   Compose an optimal chain of production rules providing all requested properties.
   The returned RuleChain object can be applied to the original object as well as to any other object
   with the same initial set of properties.  If no feasible rule chain exists, `undef' is returned.
  
   To watch the rule scheduler at work, e.g. to see announcements about tried preconditions,
   you may temporarily increase the verbosity levels $Verbose::rules and $Verbose::scheduler.
  
  Arguments:
    String request : name of a property with optional alternatives or a property path in dotted notation.
      Several requests may be listed.
  
  Returns Core::RuleChain 
  ```
  does the right thing. In contrast,

  ```
  sage: p.minkowski_sum_fukuda?
  ```
  just works. Strange.

Anyway, I think it is good enough for being reviewed!

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8485ec834b7d3d03790c821ea06a4f4415ae56e4"><code>8485ec8</code></a></td><td><code>Be slightly clearer concerning a test being skipped</code></td></tr></table>




---

archive/issue_comments_332332.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI am going through the changes right now. I will check compatibility with the last beta of polymake as well and report.",
    "created_at": "2017-03-10T13:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332332",
    "user": "https://github.com/videlec"
}
```

<div id="comment:39" align="right">comment:39</div>

I am going through the changes right now. I will check compatibility with the last beta of polymake as well and report.



---

archive/issue_comments_332333.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2017-03-10T13:27:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332333",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_332334.json:
```json
{
    "body": "doctest failure with polymake beta",
    "created_at": "2017-03-10T16:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332334",
    "user": "https://github.com/videlec"
}
```

doctest failure with polymake beta



---

archive/issue_comments_332335.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nAttachment: **[22452-doctest.log](https://github.com/sagemath/sage/files/ticket22452/22452-doctest.log)**\n\nThank you for testing.\n\nThe failures, as much as I see, are all harmless in the sense that simply the string representation of an object was enriched or the documentation was changed or Polymake's strategy for computing a property has changed.\n\nWhat is the policy? Should the doctests for an optional package be written with respect to what you would get from the current version of the optional package, or should be \"future proof\" to all possible extent?",
    "created_at": "2017-03-10T16:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332335",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:40" align="right">comment:40</div>

Attachment: **[22452-doctest.log](https://github.com/sagemath/sage/files/ticket22452/22452-doctest.log)**

Thank you for testing.

The failures, as much as I see, are all harmless in the sense that simply the string representation of an object was enriched or the documentation was changed or Polymake's strategy for computing a property has changed.

What is the policy? Should the doctests for an optional package be written with respect to what you would get from the current version of the optional package, or should be "future proof" to all possible extent?



---

archive/issue_events_311071.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-10T17:17:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311071"
}
```



---

archive/issue_events_311072.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-10T17:17:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311072"
}
```



---

archive/issue_comments_332336.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nfirst pass\n\n- The program is `polymake` and not `Polymake`\n\n- need an entry in the reference manual `src/doc/en/reference/interfaces/index.rst`\n\n- your method `version` is somehow broken. You are using the program `polymake` and not\n  the command that was transmitted by the user. Andreas suggested\n\n```\npolytope > print $Polymake::Version;\n3.0.9\n```\n\n- you use twice `os.getenv('SAGE_POLYMAKE_COMMAND') or 'polymake'`. One possibility would\n  be to set a variable named `SAGE_POLYMAKE_COMMAND` at the module level once for all\n  and use it all along.\n\n- the install hints should give more details about polymake installation (e.g. the SPKG.txt\n  contains some subtle details)\n\n- in the doctest of `application` I would suggest to not quit and start but rather\n\n```\nEXAMPLES::\n\n    sage: polymake.application('polytope')\n    sage: 'tubing_of_graph' in dir(polymake)\n    False\n    sage: polymake.application('tropical')\n    sage: 'tubing_of_graph' in dir(polymake)\n    True\n    sage: polymake.application('polytope')\n    sage: 'tubing_of_graph' in dir(polymake)\n    False\n```\n\n- (just a remark) polymake namespaces are strange...\n\n```\nsage: apps = ['polytope', 'matroid', 'graph', 'group', 'topaz', 'tropical']\nsage: for app in apps:\n....:     polymake.application(app)\n....:     dirs[app] = dir(polymake)\nsage: for app1 in apps:\n....:     for app2 in apps:\n....:         if app1 != app2: print \"{:10} {:10} {}\".format(app1, app2, len(set(dirs[app1]).difference(dirs[app2])))\n....:         \npolytope   matroid    0\npolytope   graph      345\npolytope   group      338\npolytope   topaz      278\npolytope   tropical   0\nmatroid    polytope   61\nmatroid    graph      406\nmatroid    group      399\nmatroid    topaz      339\nmatroid    tropical   0\ngraph      polytope   0\ngraph      matroid    0\ngraph      group      34\ngraph      topaz      0\ngraph      tropical   0\ngroup      polytope   0\ngroup      matroid    0\ngroup      graph      41\ngroup      topaz      41\ngroup      tropical   0\ntopaz      polytope   0\ntopaz      matroid    0\ntopaz      graph      67\ntopaz      group      101\ntopaz      tropical   0\ntropical   polytope   192\ntropical   matroid    131\ntropical   graph      537\ntropical   group      530\ntropical   topaz      470\n```\n\n- in `application` you should check errors like\n\n```\nsage: polymake.application('killerapp')\nTraceback (most recent call last):\n...\nAssertionError: Unknown Polymake application 'killerapp'\n```\n  and BTW the above would better be a `ValueError`",
    "created_at": "2017-03-10T17:17:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332336",
    "user": "https://github.com/videlec"
}
```

<div id="comment:41" align="right">comment:41</div>

first pass

- The program is `polymake` and not `Polymake`

- need an entry in the reference manual `src/doc/en/reference/interfaces/index.rst`

- your method `version` is somehow broken. You are using the program `polymake` and not
  the command that was transmitted by the user. Andreas suggested

```
polytope > print $Polymake::Version;
3.0.9
```

- you use twice `os.getenv('SAGE_POLYMAKE_COMMAND') or 'polymake'`. One possibility would
  be to set a variable named `SAGE_POLYMAKE_COMMAND` at the module level once for all
  and use it all along.

- the install hints should give more details about polymake installation (e.g. the SPKG.txt
  contains some subtle details)

- in the doctest of `application` I would suggest to not quit and start but rather

```
EXAMPLES::

    sage: polymake.application('polytope')
    sage: 'tubing_of_graph' in dir(polymake)
    False
    sage: polymake.application('tropical')
    sage: 'tubing_of_graph' in dir(polymake)
    True
    sage: polymake.application('polytope')
    sage: 'tubing_of_graph' in dir(polymake)
    False
```

- (just a remark) polymake namespaces are strange...

```
sage: apps = ['polytope', 'matroid', 'graph', 'group', 'topaz', 'tropical']
sage: for app in apps:
....:     polymake.application(app)
....:     dirs[app] = dir(polymake)
sage: for app1 in apps:
....:     for app2 in apps:
....:         if app1 != app2: print "{:10} {:10} {}".format(app1, app2, len(set(dirs[app1]).difference(dirs[app2])))
....:         
polytope   matroid    0
polytope   graph      345
polytope   group      338
polytope   topaz      278
polytope   tropical   0
matroid    polytope   61
matroid    graph      406
matroid    group      399
matroid    topaz      339
matroid    tropical   0
graph      polytope   0
graph      matroid    0
graph      group      34
graph      topaz      0
graph      tropical   0
group      polytope   0
group      matroid    0
group      graph      41
group      topaz      41
group      tropical   0
topaz      polytope   0
topaz      matroid    0
topaz      graph      67
topaz      group      101
topaz      tropical   0
tropical   polytope   192
tropical   matroid    131
tropical   graph      537
tropical   group      530
tropical   topaz      470
```

- in `application` you should check errors like

```
sage: polymake.application('killerapp')
Traceback (most recent call last):
...
AssertionError: Unknown Polymake application 'killerapp'
```
  and BTW the above would better be a `ValueError`



---

archive/issue_comments_332337.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nYou would better not import `Polymake` (upper case) in the global namespace.",
    "created_at": "2017-03-10T17:25:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332337",
    "user": "https://github.com/videlec"
}
```

<div id="comment:42" align="right">comment:42</div>

You would better not import `Polymake` (upper case) in the global namespace.



---

archive/issue_comments_332338.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nYou could test something like this with respect to the version\n\n```\nsage: p = Polymake(command='/ThIs/iS/NoT/PoLyMaKe')\nsage: p.version()   # this should raise an error\n'3.0.6'\n```",
    "created_at": "2017-03-10T17:26:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332338",
    "user": "https://github.com/videlec"
}
```

<div id="comment:43" align="right">comment:43</div>

You could test something like this with respect to the version

```
sage: p = Polymake(command='/ThIs/iS/NoT/PoLyMaKe')
sage: p.version()   # this should raise an error
'3.0.6'
```



---

archive/issue_comments_332339.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nI found the method `console` confusing. It launches `polymake` but with a fresh session. I would expect to use the same console with the same variables already defined. Apparently it is a standard bad practice.",
    "created_at": "2017-03-10T17:42:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332339",
    "user": "https://github.com/videlec"
}
```

<div id="comment:44" align="right">comment:44</div>

I found the method `console` confusing. It launches `polymake` but with a fresh session. I would expect to use the same console with the same variables already defined. Apparently it is a standard bad practice.



---

archive/issue_comments_332340.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nIs this really what I need to use `polymake.get('$myvar[0]')`. Why not the cleaner `polymake.get('myvar')`?",
    "created_at": "2017-03-10T17:43:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332340",
    "user": "https://github.com/videlec"
}
```

<div id="comment:45" align="right">comment:45</div>

Is this really what I need to use `polymake.get('$myvar[0]')`. Why not the cleaner `polymake.get('myvar')`?



---

archive/issue_comments_332341.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\n- There is a `Math Processing Error` appearing in the HTML documentation of the methods `help` and `get_member`.\n\n- (bike shedding) The line\n\n```\nsage: p = polymake.rand_sphere(4,20, seed=5)\n```\n  should be\n\n```\nsage: p = polymake.rand_sphere(4, 20, seed=5)\n```",
    "created_at": "2017-03-10T17:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332341",
    "user": "https://github.com/videlec"
}
```

<div id="comment:46" align="right">comment:46</div>

- There is a `Math Processing Error` appearing in the HTML documentation of the methods `help` and `get_member`.

- (bike shedding) The line

```
sage: p = polymake.rand_sphere(4,20, seed=5)
```
  should be

```
sage: p = polymake.rand_sphere(4, 20, seed=5)
```



---

archive/issue_comments_332342.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@videlec](#comment:44):\n> Apparently it is a standard bad practice.\n\nIndeed. At least I do not follow another bad practice, which is to put all consoles into the global name space, even though there is the .console() method.\n\nBy the way, there is an .interact() method for the thing you want to do.",
    "created_at": "2017-03-10T18:15:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332342",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@videlec](#comment:44):
> Apparently it is a standard bad practice.

Indeed. At least I do not follow another bad practice, which is to put all consoles into the global name space, even though there is the .console() method.

By the way, there is an .interact() method for the thing you want to do.



---

archive/issue_comments_332343.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@videlec](#comment:41):\n> first pass\n> \n> - The program is `polymake` and not `Polymake`\n\nOK. I think one should keep the string representation of the interface instance upper case (which is consistent with everything but pari/gp).\n\n> - your method `version` is somehow broken. You are using the program `polymake` and not\n>   the command that was transmitted by the user. Andreas suggested\n> \n> ```\n> polytope > print $Polymake::Version;\n> 3.0.9\n> ```\n\nThanks, I wasn't aware of that constant.\n \n> - the install hints should give more details about polymake installation (e.g. the SPKG.txt\n>   contains some subtle details)\n\nOK, I'll add: \"(but read its SPKG.txt first!)\"\n \n> - in the doctest of `application` I would suggest to not quit and start but rather\n> \n> ```\n> EXAMPLES::\n> \n>     sage: polymake.application('polytope')\n>     sage: 'tubing_of_graph' in dir(polymake)\n>     False\n>     sage: polymake.application('tropical')\n>     sage: 'tubing_of_graph' in dir(polymake)\n>     True\n>     sage: polymake.application('polytope')\n>     sage: 'tubing_of_graph' in dir(polymake)\n>     False\n> ```\n\nGood idea! I asked Andreas about such examples, but he only came up with the thing that I used in the previous versions of the test.\n\n> - in `application` you should check errors like\n> \n> ```\n> sage: polymake.application('killerapp')\n> Traceback (most recent call last):\n> ...\n> AssertionError: Unknown Polymake application 'killerapp'\n> ```\n>   and BTW the above would better be a `ValueError`\n\nOK",
    "created_at": "2017-03-10T18:27:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332343",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@videlec](#comment:41):
> first pass
> 
> - The program is `polymake` and not `Polymake`

OK. I think one should keep the string representation of the interface instance upper case (which is consistent with everything but pari/gp).

> - your method `version` is somehow broken. You are using the program `polymake` and not
>   the command that was transmitted by the user. Andreas suggested
> 
> ```
> polytope > print $Polymake::Version;
> 3.0.9
> ```

Thanks, I wasn't aware of that constant.
 
> - the install hints should give more details about polymake installation (e.g. the SPKG.txt
>   contains some subtle details)

OK, I'll add: "(but read its SPKG.txt first!)"
 
> - in the doctest of `application` I would suggest to not quit and start but rather
> 
> ```
> EXAMPLES::
> 
>     sage: polymake.application('polytope')
>     sage: 'tubing_of_graph' in dir(polymake)
>     False
>     sage: polymake.application('tropical')
>     sage: 'tubing_of_graph' in dir(polymake)
>     True
>     sage: polymake.application('polytope')
>     sage: 'tubing_of_graph' in dir(polymake)
>     False
> ```

Good idea! I asked Andreas about such examples, but he only came up with the thing that I used in the previous versions of the test.

> - in `application` you should check errors like
> 
> ```
> sage: polymake.application('killerapp')
> Traceback (most recent call last):
> ...
> AssertionError: Unknown Polymake application 'killerapp'
> ```
>   and BTW the above would better be a `ValueError`

OK



---

archive/issue_comments_332344.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@videlec](#comment:45):\n> Is this really what I need to use `polymake.get('$myvar[0]')`. Why not the cleaner `polymake.get('myvar')`?\n\nNo. I tried to explain it in the NOTE on top of that test. But in the next commit that I am about to push, I'll try to be clearer in the NOTE.",
    "created_at": "2017-03-10T18:34:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332344",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@videlec](#comment:45):
> Is this really what I need to use `polymake.get('$myvar[0]')`. Why not the cleaner `polymake.get('myvar')`?

No. I tried to explain it in the NOTE on top of that test. But in the next commit that I am about to push, I'll try to be clearer in the NOTE.



---

archive/issue_comments_332345.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/afdbcdb19408f1837b78a2233c0989037633cee8\"><code>afdbcdb</code></a></td><td><code>Taking into account the reviewer's comments</code></td></tr></table>\n",
    "created_at": "2017-03-10T18:36:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332345",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/afdbcdb19408f1837b78a2233c0989037633cee8"><code>afdbcdb</code></a></td><td><code>Taking into account the reviewer's comments</code></td></tr></table>




---

archive/issue_comments_332346.json:
```json
{
    "body": "Changed commit from **[`8485ec8`](https://github.com/sagemath/sagetrac-mirror/commit/8485ec834b7d3d03790c821ea06a4f4415ae56e4)** to **[`afdbcdb`](https://github.com/sagemath/sagetrac-mirror/commit/afdbcdb19408f1837b78a2233c0989037633cee8)**",
    "created_at": "2017-03-10T18:36:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332346",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8485ec8`](https://github.com/sagemath/sagetrac-mirror/commit/8485ec834b7d3d03790c821ea06a4f4415ae56e4)** to **[`afdbcdb`](https://github.com/sagemath/sagetrac-mirror/commit/afdbcdb19408f1837b78a2233c0989037633cee8)**



---

archive/issue_comments_332347.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nDoes work with my version of polymake, and I hope it works with the next beta version as well.\n\nBack to \"needs review\" :)\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/afdbcdb19408f1837b78a2233c0989037633cee8\"><code>afdbcdb</code></a></td><td><code>Taking into account the reviewer's comments</code></td></tr></table>\n",
    "created_at": "2017-03-10T18:37:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332347",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:51" align="right">comment:51</div>

Does work with my version of polymake, and I hope it works with the next beta version as well.

Back to "needs review" :)

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/afdbcdb19408f1837b78a2233c0989037633cee8"><code>afdbcdb</code></a></td><td><code>Taking into account the reviewer's comments</code></td></tr></table>




---

archive/issue_events_311073.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-10T18:37:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311073"
}
```



---

archive/issue_events_311074.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-10T18:37:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311074"
}
```



---

archive/issue_comments_332348.json:
```json
{
    "body": "Attachment: **[doctest-22452-polymake3.0.6.log](https://github.com/sagemath/sage/files/ticket22452/doctest-22452-polymake3.0.6.log)**\n\ndoctest at commit afdbcdb for polymake 3.0.6",
    "created_at": "2017-03-10T18:46:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332348",
    "user": "https://github.com/videlec"
}
```

Attachment: **[doctest-22452-polymake3.0.6.log](https://github.com/sagemath/sage/files/ticket22452/doctest-22452-polymake3.0.6.log)**

doctest at commit afdbcdb for polymake 3.0.6



---

archive/issue_comments_332349.json:
```json
{
    "body": "Attachment: **[doctest-22452-polymake3.0.9.log](https://github.com/sagemath/sage/files/ticket22452/doctest-22452-polymake3.0.9.log)**\n\ndoctest at commit afdbcdb for polymake 3.0.9",
    "created_at": "2017-03-10T18:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332349",
    "user": "https://github.com/videlec"
}
```

Attachment: **[doctest-22452-polymake3.0.9.log](https://github.com/sagemath/sage/files/ticket22452/doctest-22452-polymake3.0.9.log)**

doctest at commit afdbcdb for polymake 3.0.9



---

archive/issue_comments_332350.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\n(note: The tests on beta 3.0.6 and 3.0.9 releases do not fail in the same way)",
    "created_at": "2017-03-10T18:48:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332350",
    "user": "https://github.com/videlec"
}
```

<div id="comment:52" align="right">comment:52</div>

(note: The tests on beta 3.0.6 and 3.0.9 releases do not fail in the same way)



---

archive/issue_comments_332351.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nThis is still wrong (see also point 4 in [comment:41](#comment:41))\n\n```\nsage: from sage.interfaces.polymake import Polymake\nsage: p = Polymake(command='haha')\nsage: p.console()\nWelcome to polymake version 3.0.6\n...\n```",
    "created_at": "2017-03-10T18:51:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332351",
    "user": "https://github.com/videlec"
}
```

<div id="comment:53" align="right">comment:53</div>

This is still wrong (see also point 4 in [comment:41](#comment:41))

```
sage: from sage.interfaces.polymake import Polymake
sage: p = Polymake(command='haha')
sage: p.console()
Welcome to polymake version 3.0.6
...
```



---

archive/issue_events_311075.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-10T18:51:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311075"
}
```



---

archive/issue_events_311076.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-10T18:51:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311076"
}
```



---

archive/issue_comments_332352.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [@videlec](#comment:53):\n> This is still wrong (see also point 4 in [comment:41](#comment:41))\n> \n> ```\n> sage: from sage.interfaces.polymake import Polymake\n> sage: p = Polymake(command='haha')\n> sage: p.console()\n> Welcome to polymake version 3.0.6\n> ...\n> ```\n\nI disagree.\n\n```\nsage: m = Magma(command=\"foobar\")\nsage: m.console()\n/home/king/Sage/git/sage/local/bin/sage-native-execute: 6: /home/king/Sage/git/sage/local/bin/sage-native-execute: magma: not found\n```\nSo, apparently at least one other interface is doing the same thing (it says \"magma: not found\" where you would expect \"foobar: not found\").",
    "created_at": "2017-03-10T18:59:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332352",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [@videlec](#comment:53):
> This is still wrong (see also point 4 in [comment:41](#comment:41))
> 
> ```
> sage: from sage.interfaces.polymake import Polymake
> sage: p = Polymake(command='haha')
> sage: p.console()
> Welcome to polymake version 3.0.6
> ...
> ```

I disagree.

```
sage: m = Magma(command="foobar")
sage: m.console()
/home/king/Sage/git/sage/local/bin/sage-native-execute: 6: /home/king/Sage/git/sage/local/bin/sage-native-execute: magma: not found
```
So, apparently at least one other interface is doing the same thing (it says "magma: not found" where you would expect "foobar: not found").



---

archive/issue_comments_332353.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nAndreas created functions that help to get lists of properties, functions and member functions, and also tab completion. These functions will be in future polymake versions.\n\nIt would of course be very good if we could backport it, so that it can be used now (without the need to wait for an upgrade of the optional polymake package in Sage).\n\nThe approach would be:\n- Put Andreas' functions in a script, located in sage/ext_code\n- When starting the polymake interface, check whether Andreas' functions are already defined (which means that the user has a new polymake version)\n- If they are not defined, read the script into polymake and thus have tab completion more easily.",
    "created_at": "2017-03-10T19:27:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332353",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:55" align="right">comment:55</div>

Andreas created functions that help to get lists of properties, functions and member functions, and also tab completion. These functions will be in future polymake versions.

It would of course be very good if we could backport it, so that it can be used now (without the need to wait for an upgrade of the optional polymake package in Sage).

The approach would be:
- Put Andreas' functions in a script, located in sage/ext_code
- When starting the polymake interface, check whether Andreas' functions are already defined (which means that the user has a new polymake version)
- If they are not defined, read the script into polymake and thus have tab completion more easily.



---

archive/issue_comments_332354.json:
```json
{
    "body": "<div id=\"comment:56\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bb46e099130253eddfb6472eb421a9180064296\"><code>4bb46e0</code></a></td><td><code>Let the .console() method raise a NotImplementedError with pointers to .interact() and polymake_console()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a1e5f50e82a132513758f011a609803e33ae83c\"><code>9a1e5f5</code></a></td><td><code>Remove test that accesses a member that soon will be removed from Polymake. Mark tests requesting documentation 'random'</code></td></tr></table>\n",
    "created_at": "2017-03-10T21:57:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332354",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bb46e099130253eddfb6472eb421a9180064296"><code>4bb46e0</code></a></td><td><code>Let the .console() method raise a NotImplementedError with pointers to .interact() and polymake_console()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a1e5f50e82a132513758f011a609803e33ae83c"><code>9a1e5f5</code></a></td><td><code>Remove test that accesses a member that soon will be removed from Polymake. Mark tests requesting documentation 'random'</code></td></tr></table>




---

archive/issue_comments_332355.json:
```json
{
    "body": "Changed commit from **[`afdbcdb`](https://github.com/sagemath/sagetrac-mirror/commit/afdbcdb19408f1837b78a2233c0989037633cee8)** to **[`9a1e5f5`](https://github.com/sagemath/sagetrac-mirror/commit/9a1e5f50e82a132513758f011a609803e33ae83c)**",
    "created_at": "2017-03-10T21:57:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332355",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`afdbcdb`](https://github.com/sagemath/sagetrac-mirror/commit/afdbcdb19408f1837b78a2233c0989037633cee8)** to **[`9a1e5f5`](https://github.com/sagemath/sagetrac-mirror/commit/9a1e5f50e82a132513758f011a609803e33ae83c)**



---

archive/issue_comments_332356.json:
```json
{
    "body": "Changed commit from **[`9a1e5f5`](https://github.com/sagemath/sagetrac-mirror/commit/9a1e5f50e82a132513758f011a609803e33ae83c)** to **[`7892e30`](https://github.com/sagemath/sagetrac-mirror/commit/7892e302c06bc518b4e858ac377dd76f1c5bdfe1)**",
    "created_at": "2017-03-10T22:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332356",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9a1e5f5`](https://github.com/sagemath/sagetrac-mirror/commit/9a1e5f50e82a132513758f011a609803e33ae83c)** to **[`7892e30`](https://github.com/sagemath/sagetrac-mirror/commit/7892e302c06bc518b4e858ac377dd76f1c5bdfe1)**



---

archive/issue_comments_332357.json:
```json
{
    "body": "<div id=\"comment:57\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7892e302c06bc518b4e858ac377dd76f1c5bdfe1\"><code>7892e30</code></a></td><td><code>Replace some tests by more realistic use cases of Polymake, and mark some others as 'random'</code></td></tr></table>\n",
    "created_at": "2017-03-10T22:21:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332357",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:57"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7892e302c06bc518b4e858ac377dd76f1c5bdfe1"><code>7892e30</code></a></td><td><code>Replace some tests by more realistic use cases of Polymake, and mark some others as 'random'</code></td></tr></table>




---

archive/issue_events_311077.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-10T22:28:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311077"
}
```



---

archive/issue_events_311078.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-10T22:28:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311078"
}
```



---

archive/issue_comments_332358.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nIn the last few commits, I did the following:\n\n- When showing in the tests how to request documentation, I give the whole output as provided by polymake (which should be instructive), but mark the corresponding test as random, as the polymake documentation is of course subject to change in future versions.\n- Similar, the member function `get_schedule` yields output that is subject to change. Moreover, `get_schedule` is not something that one normally uses in polymake. So, I was marking some of the corresponding tests \"random\", and replaced others (in particular those that are visible in the docs) by more realistic use cases (\"check whether some point is contained in a polytope\").\n- Remove a test in which a member of `GROUP` is requested that will soon be gone.\n\nFor me (polymake-3.0) tests pass (both `sage -t --optional=sage,polymake` and plain `sage -t`). And for you, Vincent?",
    "created_at": "2017-03-10T22:28:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332358",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:58" align="right">comment:58</div>

In the last few commits, I did the following:

- When showing in the tests how to request documentation, I give the whole output as provided by polymake (which should be instructive), but mark the corresponding test as random, as the polymake documentation is of course subject to change in future versions.
- Similar, the member function `get_schedule` yields output that is subject to change. Moreover, `get_schedule` is not something that one normally uses in polymake. So, I was marking some of the corresponding tests "random", and replaced others (in particular those that are visible in the docs) by more realistic use cases ("check whether some point is contained in a polytope").
- Remove a test in which a member of `GROUP` is requested that will soon be gone.

For me (polymake-3.0) tests pass (both `sage -t --optional=sage,polymake` and plain `sage -t`). And for you, Vincent?



---

archive/issue_comments_332359.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nAll tests pass on the two versions I have of polymake!",
    "created_at": "2017-03-11T09:17:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332359",
    "user": "https://github.com/videlec"
}
```

<div id="comment:59" align="right">comment:59</div>

All tests pass on the two versions I have of polymake!



---

archive/issue_comments_332360.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\n`Input` should be `INPUT`. This might be the cause of the weird display of the documentation of the method `Polymake.application`",
    "created_at": "2017-03-11T09:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332360",
    "user": "https://github.com/videlec"
}
```

<div id="comment:60" align="right">comment:60</div>

`Input` should be `INPUT`. This might be the cause of the weird display of the documentation of the method `Polymake.application`



---

archive/issue_events_311079.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-11T09:48:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311079"
}
```



---

archive/issue_events_311080.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-11T09:48:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311080"
}
```



---

archive/issue_comments_332361.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a18537b66b9ee27475c96268b0491fe89c8c3677\"><code>a18537b</code></a></td><td><code>Change Input to INPUT</code></td></tr></table>\n",
    "created_at": "2017-03-11T16:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332361",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a18537b66b9ee27475c96268b0491fe89c8c3677"><code>a18537b</code></a></td><td><code>Change Input to INPUT</code></td></tr></table>




---

archive/issue_comments_332362.json:
```json
{
    "body": "Changed commit from **[`7892e30`](https://github.com/sagemath/sagetrac-mirror/commit/7892e302c06bc518b4e858ac377dd76f1c5bdfe1)** to **[`a18537b`](https://github.com/sagemath/sagetrac-mirror/commit/a18537b66b9ee27475c96268b0491fe89c8c3677)**",
    "created_at": "2017-03-11T16:22:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332362",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7892e30`](https://github.com/sagemath/sagetrac-mirror/commit/7892e302c06bc518b4e858ac377dd76f1c5bdfe1)** to **[`a18537b`](https://github.com/sagemath/sagetrac-mirror/commit/a18537b66b9ee27475c96268b0491fe89c8c3677)**



---

archive/issue_comments_332363.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@videlec](#comment:60):\n> `Input` should be `INPUT`. This might be the cause of the weird display of the documentation of the method `Polymake.application`\n\nDone! And good that the tests even pass with the latest polymake-beta `:-)`",
    "created_at": "2017-03-11T16:24:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332363",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@videlec](#comment:60):
> `Input` should be `INPUT`. This might be the cause of the weird display of the documentation of the method `Polymake.application`

Done! And good that the tests even pass with the latest polymake-beta `:-)`



---

archive/issue_events_311081.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-11T16:24:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311081"
}
```



---

archive/issue_events_311082.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-11T16:24:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311082"
}
```



---

archive/issue_comments_332364.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\n- The link <code>:meth:\\`~sage.interfaces.Interface.interact\\`</code> in the method `console` is not working.\n\n- The display of the method `application` is still wrong. I think it is not safe to have a linebreak before `::`. Anyway, it would be good to have `EXAMPLES` since `TESTS` do not appear in the doc. Something like\n\n```\nsage: polymake.application(\"app1\").\nsage: polymake.a_function_in_app1()\nsage: polymake.application(\"app2\")\nsage: polymake.a_function_in_app2()\n```\n\n- Is `Evaluate of a command` proper english (in the doc of `_eval_line`)?\n\n- Links in hidden methods do not appear in the doc (like `_eval_line`). You can either make this method appear with some sphinx directive or remove the links.\n\n- `if not wait_for_prompt` is better than `if wait_for_prompt == False`. `elif restart_if_needed` better than `elif restart_if_needed==True`.\n\n- It is hard to see that all code paths are actually tested in `_eval_line`. Is it reasonable to have  8 small tests that actually do that?",
    "created_at": "2017-03-13T15:50:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332364",
    "user": "https://github.com/videlec"
}
```

<div id="comment:63" align="right">comment:63</div>

- The link <code>:meth:\`~sage.interfaces.Interface.interact\`</code> in the method `console` is not working.

- The display of the method `application` is still wrong. I think it is not safe to have a linebreak before `::`. Anyway, it would be good to have `EXAMPLES` since `TESTS` do not appear in the doc. Something like

```
sage: polymake.application("app1").
sage: polymake.a_function_in_app1()
sage: polymake.application("app2")
sage: polymake.a_function_in_app2()
```

- Is `Evaluate of a command` proper english (in the doc of `_eval_line`)?

- Links in hidden methods do not appear in the doc (like `_eval_line`). You can either make this method appear with some sphinx directive or remove the links.

- `if not wait_for_prompt` is better than `if wait_for_prompt == False`. `elif restart_if_needed` better than `elif restart_if_needed==True`.

- It is hard to see that all code paths are actually tested in `_eval_line`. Is it reasonable to have  8 small tests that actually do that?



---

archive/issue_events_311083.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-13T15:50:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311083"
}
```



---

archive/issue_events_311084.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-13T15:50:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311084"
}
```



---

archive/issue_comments_332365.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nThe patchbot complains about print statements in the doc tests. So, shall I replace all print statements by print *function*? Would that require `from `__future__` import`?\n\nReplying to [@videlec](#comment:63):\n> - The link <code>:meth:\\`~sage.interfaces.Interface.interact\\`</code> in the method `console` is not working.\n\nDo you see why it doesn't?\n\n> - The display of the method `application` is still wrong. I think it is not safe to have a linebreak before `::`.\n\nI thought that is what one ought to do if one doesn't like a colon to appear before a test. But I can change that.\n\n> Anyway, it would be good to have `EXAMPLES` since `TESTS` do not appear in the doc.\n\nThey don't? Ouch. I thought they used to appear in the past.\n\n> Something like\n> \n> ```\n> sage: polymake.application(\"app1\").\n> sage: polymake.a_function_in_app1()\n> sage: polymake.application(\"app2\")\n> sage: polymake.a_function_in_app2()\n> ```\n\nSure. In Olot, I presented an example from the polymake tutorial that I could use here.\n\n> - Is `Evaluate of a command` proper english (in the doc of `_eval_line`)?\n\nProbably not...\n\n> - Links in hidden methods do not appear in the doc (like `_eval_line`). You can either make this method appear with some sphinx directive or remove the links.\n\nOK.\n\n> - `if not wait_for_prompt` is better than `if wait_for_prompt == False`. `elif restart_if_needed` better than `elif restart_if_needed==True`.\n\nOK. Note that I copied that from some other module (sage.interfaces.interface or sage.interfaces.expect). But I can change it anyway.\n\n> - It is hard to see that all code paths are actually tested in `_eval_line`. Is it reasonable to have  8 small tests that actually do that?\n\nI think timeout and eof isn't tested, but everything else *is* tested. But not all options are tested in `_eval_line` (e.g., polymake waiting for user input is tested in `help()`). Anyway I agree it makes sense to test it directly in `_eval_line`.",
    "created_at": "2017-03-13T16:06:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332365",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:64" align="right">comment:64</div>

The patchbot complains about print statements in the doc tests. So, shall I replace all print statements by print *function*? Would that require `from `__future__` import`?

Replying to [@videlec](#comment:63):
> - The link <code>:meth:\`~sage.interfaces.Interface.interact\`</code> in the method `console` is not working.

Do you see why it doesn't?

> - The display of the method `application` is still wrong. I think it is not safe to have a linebreak before `::`.

I thought that is what one ought to do if one doesn't like a colon to appear before a test. But I can change that.

> Anyway, it would be good to have `EXAMPLES` since `TESTS` do not appear in the doc.

They don't? Ouch. I thought they used to appear in the past.

> Something like
> 
> ```
> sage: polymake.application("app1").
> sage: polymake.a_function_in_app1()
> sage: polymake.application("app2")
> sage: polymake.a_function_in_app2()
> ```

Sure. In Olot, I presented an example from the polymake tutorial that I could use here.

> - Is `Evaluate of a command` proper english (in the doc of `_eval_line`)?

Probably not...

> - Links in hidden methods do not appear in the doc (like `_eval_line`). You can either make this method appear with some sphinx directive or remove the links.

OK.

> - `if not wait_for_prompt` is better than `if wait_for_prompt == False`. `elif restart_if_needed` better than `elif restart_if_needed==True`.

OK. Note that I copied that from some other module (sage.interfaces.interface or sage.interfaces.expect). But I can change it anyway.

> - It is hard to see that all code paths are actually tested in `_eval_line`. Is it reasonable to have  8 small tests that actually do that?

I think timeout and eof isn't tested, but everything else *is* tested. But not all options are tested in `_eval_line` (e.g., polymake waiting for user input is tested in `help()`). Anyway I agree it makes sense to test it directly in `_eval_line`.



---

archive/issue_comments_332366.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@videlec](#comment:63):\n> - Links in hidden methods do not appear in the doc (like `_eval_line`). You can either make this method appear with some sphinx directive or remove the links.\n\nWhat would I need to do in order to make it visible in the docs? I think it SHOULD be visible.\n\nI'll also include a test showing how to use a timeout. In fact, I needed a fix in order to make it work.",
    "created_at": "2017-03-13T17:01:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332366",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@videlec](#comment:63):
> - Links in hidden methods do not appear in the doc (like `_eval_line`). You can either make this method appear with some sphinx directive or remove the links.

What would I need to do in order to make it visible in the docs? I think it SHOULD be visible.

I'll also include a test showing how to use a timeout. In fact, I needed a fix in order to make it work.



---

archive/issue_comments_332367.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nIt seems that if the same warning is raised twice, only the first is shown. Thus, if I want to add a test in `_eval_line` that does the same as the test in `help`, then the warning is not shown.\n\nHow to prevent this?",
    "created_at": "2017-03-13T17:23:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332367",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:66" align="right">comment:66</div>

It seems that if the same warning is raised twice, only the first is shown. Thus, if I want to add a test in `_eval_line` that does the same as the test in `help`, then the warning is not shown.

How to prevent this?



---

archive/issue_comments_332368.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nI found out about `.. automethod::`, and I think in the \"warning\" issue, it is fine to mark it as \"random\", since the output will change with future polymake versions anyway. The main point is that the interface doesn't freeze, although polymake expects user interaction.",
    "created_at": "2017-03-13T17:29:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332368",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:67" align="right">comment:67</div>

I found out about `.. automethod::`, and I think in the "warning" issue, it is fine to mark it as "random", since the output will change with future polymake versions anyway. The main point is that the interface doesn't freeze, although polymake expects user interaction.



---

archive/issue_comments_332369.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [@simon-king-jena](#comment:64):\n> The patchbot complains about print statements in the doc tests. So, shall I replace all print statements by print *function*? Would that require `from `__future__` import`?\n\nNo, it only works at module level. We are in a crazy transition period where we want to use doctests compatible with both Python2 and Python3. So always write `print(x)` and avoid `print(x,y)`.\n\n> Replying to [@videlec](#comment:63):\n> > - The link <code>:meth:\\`~sage.interfaces.Interface.interact\\`</code> in the method `console` is not working.\n\n>\n>  Do you see why it doesn't?\n\nThere is no such object `sage.interfaces.Interface.interact`.\n \n> > Anyway, it would be good to have `EXAMPLES` since `TESTS` do not appear in the doc.\n\n> \n> They don't? Ouch. I thought they used to appear in the past.\n\nIn the past yes ;-)",
    "created_at": "2017-03-13T18:04:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332369",
    "user": "https://github.com/videlec"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [@simon-king-jena](#comment:64):
> The patchbot complains about print statements in the doc tests. So, shall I replace all print statements by print *function*? Would that require `from `__future__` import`?

No, it only works at module level. We are in a crazy transition period where we want to use doctests compatible with both Python2 and Python3. So always write `print(x)` and avoid `print(x,y)`.

> Replying to [@videlec](#comment:63):
> > - The link <code>:meth:\`~sage.interfaces.Interface.interact\`</code> in the method `console` is not working.

>
>  Do you see why it doesn't?

There is no such object `sage.interfaces.Interface.interact`.
 
> > Anyway, it would be good to have `EXAMPLES` since `TESTS` do not appear in the doc.

> 
> They don't? Ouch. I thought they used to appear in the past.

In the past yes ;-)



---

archive/issue_comments_332370.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [@simon-king-jena](#comment:66):\n> It seems that if the same warning is raised twice, only the first is shown. Thus, if I want to add a test in `_eval_line` that does the same as the test in `help`, then the warning is not shown.\n> \n> How to prevent this?\n\nYou need to set the warnings to `\"always\"` instead of `\"once\"`\n\n    https://docs.python.org/2/library/warnings.html\n\nI am not sure it is safe to modify this configuration in doctests but it is worth giving a try.",
    "created_at": "2017-03-13T18:07:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332370",
    "user": "https://github.com/videlec"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [@simon-king-jena](#comment:66):
> It seems that if the same warning is raised twice, only the first is shown. Thus, if I want to add a test in `_eval_line` that does the same as the test in `help`, then the warning is not shown.
> 
> How to prevent this?

You need to set the warnings to `"always"` instead of `"once"`

    https://docs.python.org/2/library/warnings.html

I am not sure it is safe to modify this configuration in doctests but it is worth giving a try.



---

archive/issue_comments_332371.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nReplying to [@videlec](#comment:69):\n> Replying to [@simon-king-jena](#comment:66):\n> > It seems that if the same warning is raised twice, only the first is shown. Thus, if I want to add a test in `_eval_line` that does the same as the test in `help`, then the warning is not shown.\n> > \n> > How to prevent this?\n\n> \n> You need to set the warnings to `\"always\"` instead of `\"once\"`\n> \n>     https://docs.python.org/2/library/warnings.html\n> \n> I am not sure it is safe to modify this configuration in doctests but it is worth giving a try.\n\nSince the output *after* the warning is random anyway (as it will change with future versions of polymake), I guess it is safe to mark the test as random. We only want to see that the interface doesn't hang and doesn't raise an error.",
    "created_at": "2017-03-13T18:10:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332371",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:70" align="right">comment:70</div>

Replying to [@videlec](#comment:69):
> Replying to [@simon-king-jena](#comment:66):
> > It seems that if the same warning is raised twice, only the first is shown. Thus, if I want to add a test in `_eval_line` that does the same as the test in `help`, then the warning is not shown.
> > 
> > How to prevent this?

> 
> You need to set the warnings to `"always"` instead of `"once"`
> 
>     https://docs.python.org/2/library/warnings.html
> 
> I am not sure it is safe to modify this configuration in doctests but it is worth giving a try.

Since the output *after* the warning is random anyway (as it will change with future versions of polymake), I guess it is safe to mark the test as random. We only want to see that the interface doesn't hang and doesn't raise an error.



---

archive/issue_comments_332372.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [@videlec](#comment:68):\n> > Replying to [@videlec](#comment:63):\n> > > - The link <code>:meth:\\`~sage.interfaces.Interface.interact\\`</code> in the method `console` is not working.\n\n> >\n> >  Do you see why it doesn't?\n\n> \n> There is no such object `sage.interfaces.Interface.interact`.\n\nThat's a compelling reason!\n  \n> > > Anyway, it would be good to have `EXAMPLES` since `TESTS` do not appear in the doc.\n\n> > \n> > They don't? Ouch. I thought they used to appear in the past.\n\n> \n> In the past yes ;-)\n\nI changed some TESTS in EXAMPLES and I think in one case EXAMPLES to TEST. Commit coming soon...",
    "created_at": "2017-03-13T18:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332372",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [@videlec](#comment:68):
> > Replying to [@videlec](#comment:63):
> > > - The link <code>:meth:\`~sage.interfaces.Interface.interact\`</code> in the method `console` is not working.

> >
> >  Do you see why it doesn't?

> 
> There is no such object `sage.interfaces.Interface.interact`.

That's a compelling reason!
  
> > > Anyway, it would be good to have `EXAMPLES` since `TESTS` do not appear in the doc.

> > 
> > They don't? Ouch. I thought they used to appear in the past.

> 
> In the past yes ;-)

I changed some TESTS in EXAMPLES and I think in one case EXAMPLES to TEST. Commit coming soon...



---

archive/issue_comments_332373.json:
```json
{
    "body": "<div id=\"comment:72\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c884666040d011aee1741863929c4e3286093f3\"><code>2c88466</code></a></td><td><code>Fix a doc link. Fix dealing with timeouts. Demonstrate how to set timeouts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f718010e5af55cfdd71810cbc92374e6b5a14ef6\"><code>f718010</code></a></td><td><code>Add further tests, fix doc formatting</code></td></tr></table>\n",
    "created_at": "2017-03-13T18:25:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332373",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:72"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c884666040d011aee1741863929c4e3286093f3"><code>2c88466</code></a></td><td><code>Fix a doc link. Fix dealing with timeouts. Demonstrate how to set timeouts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f718010e5af55cfdd71810cbc92374e6b5a14ef6"><code>f718010</code></a></td><td><code>Add further tests, fix doc formatting</code></td></tr></table>




---

archive/issue_comments_332374.json:
```json
{
    "body": "Changed commit from **[`a18537b`](https://github.com/sagemath/sagetrac-mirror/commit/a18537b66b9ee27475c96268b0491fe89c8c3677)** to **[`f718010`](https://github.com/sagemath/sagetrac-mirror/commit/f718010e5af55cfdd71810cbc92374e6b5a14ef6)**",
    "created_at": "2017-03-13T18:25:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332374",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a18537b`](https://github.com/sagemath/sagetrac-mirror/commit/a18537b66b9ee27475c96268b0491fe89c8c3677)** to **[`f718010`](https://github.com/sagemath/sagetrac-mirror/commit/f718010e5af55cfdd71810cbc92374e6b5a14ef6)**



---

archive/issue_comments_332375.json:
```json
{
    "body": "<div id=\"comment:73\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e598ac2f533471cca6fce8728de8e2ea4d6a735\"><code>0e598ac</code></a></td><td><code>Make it clearer that 'set()' is an internal function. Make reaction on interrupt more stable</code></td></tr></table>\n",
    "created_at": "2017-03-13T19:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332375",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e598ac2f533471cca6fce8728de8e2ea4d6a735"><code>0e598ac</code></a></td><td><code>Make it clearer that 'set()' is an internal function. Make reaction on interrupt more stable</code></td></tr></table>




---

archive/issue_comments_332376.json:
```json
{
    "body": "Changed commit from **[`f718010`](https://github.com/sagemath/sagetrac-mirror/commit/f718010e5af55cfdd71810cbc92374e6b5a14ef6)** to **[`0e598ac`](https://github.com/sagemath/sagetrac-mirror/commit/0e598ac2f533471cca6fce8728de8e2ea4d6a735)**",
    "created_at": "2017-03-13T19:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332376",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f718010`](https://github.com/sagemath/sagetrac-mirror/commit/f718010e5af55cfdd71810cbc92374e6b5a14ef6)** to **[`0e598ac`](https://github.com/sagemath/sagetrac-mirror/commit/0e598ac2f533471cca6fce8728de8e2ea4d6a735)**



---

archive/issue_comments_332377.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nI added a test showing how to set a timeout (this required a fix).\n\nHowever, I am not totally happy. While the tests related with timeout and keyboard interrupt mostly (but not always) work, they quite often fail in the doctests. I have no idea why, but I think this can wait for a subsequent ticket, as I believe the interfaces generally works.\n\nFurther ideas for the future: Implement pickling.\n\nBut for now, I think it is \"needs review\". The docs seem better, and also I made it clearer what methods are internal and how the interface is supposed to be used.",
    "created_at": "2017-03-13T19:23:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332377",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:74" align="right">comment:74</div>

I added a test showing how to set a timeout (this required a fix).

However, I am not totally happy. While the tests related with timeout and keyboard interrupt mostly (but not always) work, they quite often fail in the doctests. I have no idea why, but I think this can wait for a subsequent ticket, as I believe the interfaces generally works.

Further ideas for the future: Implement pickling.

But for now, I think it is "needs review". The docs seem better, and also I made it clearer what methods are internal and how the interface is supposed to be used.



---

archive/issue_events_311085.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-13T19:23:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311085"
}
```



---

archive/issue_events_311086.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-13T19:23:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311086"
}
```



---

archive/issue_events_311087.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-13T19:39:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311087"
}
```



---

archive/issue_events_311088.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-13T19:39:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311088"
}
```



---

archive/issue_comments_332378.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\n\n```\n$ SAGE_POLYMAKE_COMMAND='NOOP' sage -t --long --optional=sage polymake.py \nRunning doctests with ID 2017-03-13-20-38-15-28caf477.\nGit branch: u/SimonKing/create_a_polymake_pexpect_interface\nUsing --optional=sage\nDoctesting 1 file.\nsage -t --long polymake.py\n**********************************************************************\nFile \"polymake.py\", line 648, in sage.interfaces.polymake.Polymake.set\nFailed example:\n    c == d\nException raised:\n    Traceback (most recent call last):\n    ...\n    NameError: name 'c' is not defined\n**********************************************************************\nFile \"polymake.py\", line 653, in sage.interfaces.polymake.Polymake.set\nFailed example:\n    c.VERTICES == d.VERTICES\nException raised:\n    Traceback (most recent call last):\n    ...\n    NameError: name 'c' is not defined\n**********************************************************************\nFile \"polymake.py\", line 684, in sage.interfaces.polymake.Polymake.get\nFailed example:\n    polymake('cube(3)')\nException raised:\n    Traceback (most recent call last):\n    ...\n    TypeError: unable to start polymake\n**********************************************************************\n2 items had failures:\n   1 of   2 in sage.interfaces.polymake.Polymake.get\n   2 of   3 in sage.interfaces.polymake.Polymake.set\n    [24 tests, 3 failures, 0.23 s]\n----------------------------------------------------------------------\nsage -t --long polymake.py  # 3 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 5.3 seconds\n    cpu time: 0.2 seconds\n    cumulative wall time: 0.2 seconds\n```",
    "created_at": "2017-03-13T19:39:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332378",
    "user": "https://github.com/videlec"
}
```

<div id="comment:75" align="right">comment:75</div>


```
$ SAGE_POLYMAKE_COMMAND='NOOP' sage -t --long --optional=sage polymake.py 
Running doctests with ID 2017-03-13-20-38-15-28caf477.
Git branch: u/SimonKing/create_a_polymake_pexpect_interface
Using --optional=sage
Doctesting 1 file.
sage -t --long polymake.py
**********************************************************************
File "polymake.py", line 648, in sage.interfaces.polymake.Polymake.set
Failed example:
    c == d
Exception raised:
    Traceback (most recent call last):
    ...
    NameError: name 'c' is not defined
**********************************************************************
File "polymake.py", line 653, in sage.interfaces.polymake.Polymake.set
Failed example:
    c.VERTICES == d.VERTICES
Exception raised:
    Traceback (most recent call last):
    ...
    NameError: name 'c' is not defined
**********************************************************************
File "polymake.py", line 684, in sage.interfaces.polymake.Polymake.get
Failed example:
    polymake('cube(3)')
Exception raised:
    Traceback (most recent call last):
    ...
    TypeError: unable to start polymake
**********************************************************************
2 items had failures:
   1 of   2 in sage.interfaces.polymake.Polymake.get
   2 of   3 in sage.interfaces.polymake.Polymake.set
    [24 tests, 3 failures, 0.23 s]
----------------------------------------------------------------------
sage -t --long polymake.py  # 3 doctests failed
----------------------------------------------------------------------
Total time for all tests: 5.3 seconds
    cpu time: 0.2 seconds
    cumulative wall time: 0.2 seconds
```



---

archive/issue_comments_332379.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nHowever, this is fine\n\n```\n$ sage -t --long --optional=sage,polymake polymake.py\nsage -t --long polymake.py\n    [218 tests, 20.41 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```",
    "created_at": "2017-03-13T19:41:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332379",
    "user": "https://github.com/videlec"
}
```

<div id="comment:76" align="right">comment:76</div>

However, this is fine

```
$ sage -t --long --optional=sage,polymake polymake.py
sage -t --long polymake.py
    [218 tests, 20.41 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```



---

archive/issue_comments_332380.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nThere are two `[Math Processing Error]` in the method `application`.",
    "created_at": "2017-03-13T19:45:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332380",
    "user": "https://github.com/videlec"
}
```

<div id="comment:77" align="right">comment:77</div>

There are two `[Math Processing Error]` in the method `application`.



---

archive/issue_comments_332381.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nThere is a warning block in the documentation. Did you mean `.. WARNING::`? (see dev. guide)",
    "created_at": "2017-03-13T19:47:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332381",
    "user": "https://github.com/videlec"
}
```

<div id="comment:78" align="right">comment:78</div>

There is a warning block in the documentation. Did you mean `.. WARNING::`? (see dev. guide)



---

archive/issue_comments_332382.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [@videlec](#comment:77):\n> There are two `[Math Processing Error]` in the method `application`.\n\nWhere do you see such errors? When I tried to search for it in the logs, I couldn't find them, and the documentation looks fine.",
    "created_at": "2017-03-14T00:46:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332382",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [@videlec](#comment:77):
> There are two `[Math Processing Error]` in the method `application`.

Where do you see such errors? When I tried to search for it in the logs, I couldn't find them, and the documentation looks fine.



---

archive/issue_comments_332383.json:
```json
{
    "body": "<div id=\"comment:80\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2fd6df9e6975bb2f4b8ccbd133da97ebd4f9954\"><code>b2fd6df</code></a></td><td><code>Mark three tests as optional and create a proper WARNING block.</code></td></tr></table>\n",
    "created_at": "2017-03-14T00:51:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332383",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:80"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2fd6df9e6975bb2f4b8ccbd133da97ebd4f9954"><code>b2fd6df</code></a></td><td><code>Mark three tests as optional and create a proper WARNING block.</code></td></tr></table>




---

archive/issue_comments_332384.json:
```json
{
    "body": "Changed commit from **[`0e598ac`](https://github.com/sagemath/sagetrac-mirror/commit/0e598ac2f533471cca6fce8728de8e2ea4d6a735)** to **[`b2fd6df`](https://github.com/sagemath/sagetrac-mirror/commit/b2fd6df9e6975bb2f4b8ccbd133da97ebd4f9954)**",
    "created_at": "2017-03-14T00:51:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332384",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0e598ac`](https://github.com/sagemath/sagetrac-mirror/commit/0e598ac2f533471cca6fce8728de8e2ea4d6a735)** to **[`b2fd6df`](https://github.com/sagemath/sagetrac-mirror/commit/b2fd6df9e6975bb2f4b8ccbd133da97ebd4f9954)**



---

archive/issue_comments_332385.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nThe failing doctests should be marked optional. I created a `.. WARNING::` block properly. And I need more information concerning the `[Math Processing Error]` you found.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2fd6df9e6975bb2f4b8ccbd133da97ebd4f9954\"><code>b2fd6df</code></a></td><td><code>Mark three tests as optional and create a proper WARNING block.</code></td></tr></table>\n",
    "created_at": "2017-03-14T00:53:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332385",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:81" align="right">comment:81</div>

The failing doctests should be marked optional. I created a `.. WARNING::` block properly. And I need more information concerning the `[Math Processing Error]` you found.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2fd6df9e6975bb2f4b8ccbd133da97ebd4f9954"><code>b2fd6df</code></a></td><td><code>Mark three tests as optional and create a proper WARNING block.</code></td></tr></table>




---

archive/issue_comments_332386.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nReplying to [@simon-king-jena](#comment:81):\n> And I need more information concerning the `[Math Processing Error]` you found.\n\nI think it is fine. My Mathjax installation was doing something bad.",
    "created_at": "2017-03-14T07:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332386",
    "user": "https://github.com/videlec"
}
```

<div id="comment:82" align="right">comment:82</div>

Replying to [@simon-king-jena](#comment:81):
> And I need more information concerning the `[Math Processing Error]` you found.

I think it is fine. My Mathjax installation was doing something bad.



---

archive/issue_comments_332387.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nGood to go! Thanks for your hard work.\n\nWe shoud think about moving `polymake` into optional. I will open a poll on `sage-devel`. The main advantage is that it will be tested by default on my patchbot.",
    "created_at": "2017-03-14T07:46:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332387",
    "user": "https://github.com/videlec"
}
```

<div id="comment:83" align="right">comment:83</div>

Good to go! Thanks for your hard work.

We shoud think about moving `polymake` into optional. I will open a poll on `sage-devel`. The main advantage is that it will be tested by default on my patchbot.



---

archive/issue_events_311089.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-14T07:46:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311089"
}
```



---

archive/issue_events_311090.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-14T07:46:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311090"
}
```



---

archive/issue_comments_332388.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nOups. Need to wait for #22501. What is the status there?",
    "created_at": "2017-03-14T07:47:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332388",
    "user": "https://github.com/videlec"
}
```

<div id="comment:84" align="right">comment:84</div>

Oups. Need to wait for #22501. What is the status there?



---

archive/issue_events_311091.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-14T07:47:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311091"
}
```



---

archive/issue_events_311092.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-14T07:47:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311092"
}
```



---

archive/issue_comments_332389.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nThanks a lot Simon! Thanks a lot Vincent! I look forward to test the interface! ...once my polymake compiles...",
    "created_at": "2017-03-14T08:35:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332389",
    "user": "https://github.com/jplab"
}
```

<div id="comment:85" align="right">comment:85</div>

Thanks a lot Simon! Thanks a lot Vincent! I look forward to test the interface! ...once my polymake compiles...



---

archive/issue_comments_332390.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nTrying to interactively rebase this on top of #22501, I get\n\n```\nking@king-ThinkPad-T430:~/Sage/git/sage$ git rebase -i t/22501/make_it_easier_to_customize_pexpect_interfaces_new \nThe previous cherry-pick is now empty, possibly due to conflict resolution.\nIf you wish to commit it anyway, use:\n\n    git commit --allow-empty\n\nOtherwise, please use 'git reset'\ninteractive rebase in progress; onto 5082c96\nLast commands done (7 commands done):\n   pick e801cab Change to a different approach to wrapping Perl variables\n   pick 87ad586 Change syntax for catching 'ValueError as...'\nNext commands to do (18 remaining commands):\n   pick 69e01f3 Small change to how certain element types are printed\n   pick 054123b Extending a method to use 'new' for Polymake classes\nYou are currently rebasing branch 't/22452/create_a_polymake_pexpect_interface' on '5082c96'.\n\nnothing to commit, working directory clean\nCould not apply 87ad58632e42a3d0c75f7871391012fd8b328f35... Change syntax for catching 'ValueError as...'\n```\nSo, several commits are now missing. Since `git mergetool` reports that nothing needs to be merged, I don't know what to do. Please help!",
    "created_at": "2017-03-14T14:02:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332390",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:86" align="right">comment:86</div>

Trying to interactively rebase this on top of #22501, I get

```
king@king-ThinkPad-T430:~/Sage/git/sage$ git rebase -i t/22501/make_it_easier_to_customize_pexpect_interfaces_new 
The previous cherry-pick is now empty, possibly due to conflict resolution.
If you wish to commit it anyway, use:

    git commit --allow-empty

Otherwise, please use 'git reset'
interactive rebase in progress; onto 5082c96
Last commands done (7 commands done):
   pick e801cab Change to a different approach to wrapping Perl variables
   pick 87ad586 Change syntax for catching 'ValueError as...'
Next commands to do (18 remaining commands):
   pick 69e01f3 Small change to how certain element types are printed
   pick 054123b Extending a method to use 'new' for Polymake classes
You are currently rebasing branch 't/22452/create_a_polymake_pexpect_interface' on '5082c96'.

nothing to commit, working directory clean
Could not apply 87ad58632e42a3d0c75f7871391012fd8b328f35... Change syntax for catching 'ValueError as...'
```
So, several commits are now missing. Since `git mergetool` reports that nothing needs to be merged, I don't know what to do. Please help!



---

archive/issue_comments_332391.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nTrac sucks! I keep getting logged out after being inactive for perhaps a minute.\n\nAnyway, I solved the problem. I just did as instructed (allowed an empty commit) and then continued rebasing. Eventually I repeated `git rebase -i` so that I could remove the empty commit. Pushing the result now!",
    "created_at": "2017-03-14T14:08:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332391",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:87" align="right">comment:87</div>

Trac sucks! I keep getting logged out after being inactive for perhaps a minute.

Anyway, I solved the problem. I just did as instructed (allowed an empty commit) and then continued rebasing. Eventually I repeated `git rebase -i` so that I could remove the empty commit. Pushing the result now!



---

archive/issue_comments_332392.json:
```json
{
    "body": "Changed commit from **[`b2fd6df`](https://github.com/sagemath/sagetrac-mirror/commit/b2fd6df9e6975bb2f4b8ccbd133da97ebd4f9954)** to **[`a8157a4`](https://github.com/sagemath/sagetrac-mirror/commit/a8157a44cc528bccd16056a0b9ec6f5401cdd1ad)**",
    "created_at": "2017-03-14T14:08:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332392",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b2fd6df`](https://github.com/sagemath/sagetrac-mirror/commit/b2fd6df9e6975bb2f4b8ccbd133da97ebd4f9954)** to **[`a8157a4`](https://github.com/sagemath/sagetrac-mirror/commit/a8157a44cc528bccd16056a0b9ec6f5401cdd1ad)**



---

archive/issue_comments_332393.json:
```json
{
    "body": "<div id=\"comment:88\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3466f9cc975f4db45a08135c98bed4d955ffa909\"><code>3466f9c</code></a></td><td><code>Be slightly clearer concerning a test being skipped</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b87433fd4b5fb83f76da3b1316072d154fd060b9\"><code>b87433f</code></a></td><td><code>Taking into account the reviewer's comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f23735f1f1bfaab30bfb03801967d6f1511bdef\"><code>8f23735</code></a></td><td><code>Let the .console() method raise a NotImplementedError with pointers to .interact() and polymake_console()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b89f2c1e1be1ac460c91c0871bf1ae347d5a2e9d\"><code>b89f2c1</code></a></td><td><code>Remove test that accesses a member that soon will be removed from Polymake. Mark tests requesting documentation 'random'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f90647d6f1b054043408425e8f83c081223b134b\"><code>f90647d</code></a></td><td><code>Replace some tests by more realistic use cases of Polymake, and mark some others as 'random'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bcbabe52d5adb5505aa1ae424b7b1d2dd14447e7\"><code>bcbabe5</code></a></td><td><code>Change Input to INPUT</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1238261eea6c246ff9a52735eba38d9f47bc6b42\"><code>1238261</code></a></td><td><code>Fix a doc link. Fix dealing with timeouts. Demonstrate how to set timeouts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94460aece2cd345c97da763d1b091a166580a756\"><code>94460ae</code></a></td><td><code>Add further tests, fix doc formatting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/643d6b46110c1ff3ef825ead61be0709360ee694\"><code>643d6b4</code></a></td><td><code>Make it clearer that 'set()' is an internal function. Make reaction on interrupt more stable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8157a44cc528bccd16056a0b9ec6f5401cdd1ad\"><code>a8157a4</code></a></td><td><code>Mark three tests as optional and create a proper WARNING block.</code></td></tr></table>\n",
    "created_at": "2017-03-14T14:08:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332393",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:88"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3466f9cc975f4db45a08135c98bed4d955ffa909"><code>3466f9c</code></a></td><td><code>Be slightly clearer concerning a test being skipped</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b87433fd4b5fb83f76da3b1316072d154fd060b9"><code>b87433f</code></a></td><td><code>Taking into account the reviewer's comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f23735f1f1bfaab30bfb03801967d6f1511bdef"><code>8f23735</code></a></td><td><code>Let the .console() method raise a NotImplementedError with pointers to .interact() and polymake_console()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b89f2c1e1be1ac460c91c0871bf1ae347d5a2e9d"><code>b89f2c1</code></a></td><td><code>Remove test that accesses a member that soon will be removed from Polymake. Mark tests requesting documentation 'random'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f90647d6f1b054043408425e8f83c081223b134b"><code>f90647d</code></a></td><td><code>Replace some tests by more realistic use cases of Polymake, and mark some others as 'random'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bcbabe52d5adb5505aa1ae424b7b1d2dd14447e7"><code>bcbabe5</code></a></td><td><code>Change Input to INPUT</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1238261eea6c246ff9a52735eba38d9f47bc6b42"><code>1238261</code></a></td><td><code>Fix a doc link. Fix dealing with timeouts. Demonstrate how to set timeouts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94460aece2cd345c97da763d1b091a166580a756"><code>94460ae</code></a></td><td><code>Add further tests, fix doc formatting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/643d6b46110c1ff3ef825ead61be0709360ee694"><code>643d6b4</code></a></td><td><code>Make it clearer that 'set()' is an internal function. Make reaction on interrupt more stable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8157a44cc528bccd16056a0b9ec6f5401cdd1ad"><code>a8157a4</code></a></td><td><code>Mark three tests as optional and create a proper WARNING block.</code></td></tr></table>




---

archive/issue_comments_332394.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nDone! So, now it can be reviewed, modulo #22501. If I recall correctly, it *is* possible to give a review to a ticket even though not all dependencies have received a review. Or has that changed?",
    "created_at": "2017-03-14T14:10:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332394",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:89" align="right">comment:89</div>

Done! So, now it can be reviewed, modulo #22501. If I recall correctly, it *is* possible to give a review to a ticket even though not all dependencies have received a review. Or has that changed?



---

archive/issue_events_311093.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-14T14:10:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311093"
}
```



---

archive/issue_events_311094.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-14T14:10:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311094"
}
```



---

archive/issue_comments_332395.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nReplying to [@simon-king-jena](#comment:89):\n> Done! So, now it can be reviewed, modulo #22501. If I recall correctly, it *is* possible to give a review to a ticket even though not all dependencies have received a review. Or has that changed?\n\nAt some point, Volker complained about a ticket being positively reviewed but not some of its dependencies... (do not remember the ticket number though)",
    "created_at": "2017-03-15T09:51:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332395",
    "user": "https://github.com/videlec"
}
```

<div id="comment:90" align="right">comment:90</div>

Replying to [@simon-king-jena](#comment:89):
> Done! So, now it can be reviewed, modulo #22501. If I recall correctly, it *is* possible to give a review to a ticket even though not all dependencies have received a review. Or has that changed?

At some point, Volker complained about a ticket being positively reviewed but not some of its dependencies... (do not remember the ticket number though)



---

archive/issue_comments_332396.json:
```json
{
    "body": "Work Issues: **use print function in doctests**",
    "created_at": "2017-03-16T09:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332396",
    "user": "https://github.com/simon-king-jena"
}
```

Work Issues: **use print function in doctests**



---

archive/issue_events_311095.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-16T09:10:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311095"
}
```



---

archive/issue_events_311096.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-16T09:10:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311096"
}
```



---

archive/issue_comments_332397.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nOops, I forgot to use print function instead of print statements in the doctests.",
    "created_at": "2017-03-16T09:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332397",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:91" align="right">comment:91</div>

Oops, I forgot to use print function instead of print statements in the doctests.



---

archive/issue_comments_332398.json:
```json
{
    "body": "<div id=\"comment:92\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5\"><code>52226e2</code></a></td><td><code>Do not _check_valid in `_repr_`, since it is done in __repr__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/726d3fdb52ae690e1afbce37f092d2201335cef4\"><code>726d3fd</code></a></td><td><code>Merge branch 't/22501/make_it_easier_to_customize_pexpect_interfaces_new' into t/22452/create_a_polymake_pexpect_interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/185430f80346564983f3aeee6a7ce5643c80d4d4\"><code>185430f</code></a></td><td><code>Use print function, not print statement, in doctests</code></td></tr></table>\n",
    "created_at": "2017-03-16T13:15:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332398",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:92"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5"><code>52226e2</code></a></td><td><code>Do not _check_valid in `_repr_`, since it is done in __repr__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/726d3fdb52ae690e1afbce37f092d2201335cef4"><code>726d3fd</code></a></td><td><code>Merge branch 't/22501/make_it_easier_to_customize_pexpect_interfaces_new' into t/22452/create_a_polymake_pexpect_interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/185430f80346564983f3aeee6a7ce5643c80d4d4"><code>185430f</code></a></td><td><code>Use print function, not print statement, in doctests</code></td></tr></table>




---

archive/issue_comments_332399.json:
```json
{
    "body": "Changed commit from **[`a8157a4`](https://github.com/sagemath/sagetrac-mirror/commit/a8157a44cc528bccd16056a0b9ec6f5401cdd1ad)** to **[`185430f`](https://github.com/sagemath/sagetrac-mirror/commit/185430f80346564983f3aeee6a7ce5643c80d4d4)**",
    "created_at": "2017-03-16T13:15:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332399",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a8157a4`](https://github.com/sagemath/sagetrac-mirror/commit/a8157a44cc528bccd16056a0b9ec6f5401cdd1ad)** to **[`185430f`](https://github.com/sagemath/sagetrac-mirror/commit/185430f80346564983f3aeee6a7ce5643c80d4d4)**



---

archive/issue_comments_332400.json:
```json
{
    "body": "Changed work issues from **use print function in doctests** to none",
    "created_at": "2017-03-16T13:20:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332400",
    "user": "https://github.com/simon-king-jena"
}
```

Changed work issues from **use print function in doctests** to none



---

archive/issue_comments_332401.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nThe doctests are now using print function, not print statements. And for completeness, I have merged with the current version of #22501. Needs review, again.",
    "created_at": "2017-03-16T13:20:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332401",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:93" align="right">comment:93</div>

The doctests are now using print function, not print statements. And for completeness, I have merged with the current version of #22501. Needs review, again.



---

archive/issue_events_311097.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-16T13:20:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311097"
}
```



---

archive/issue_events_311098.json:
```json
{
    "actor": "https://github.com/simon-king-jena",
    "created_at": "2017-03-16T13:20:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311098"
}
```



---

archive/issue_events_311099.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-18T10:01:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311099"
}
```



---

archive/issue_events_311100.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-18T10:01:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311100"
}
```



---

archive/issue_events_311101.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-28T22:21:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311101"
}
```



---

archive/issue_events_311102.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-28T22:21:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311102"
}
```



---

archive/issue_comments_332402.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\n\n```\nsage -t --long src/sage/tests/py3_syntax.py\n**********************************************************************\nFile \"src/sage/tests/py3_syntax.py\", line 17, in sage.tests.py3_syntax\nFailed example:\n    py3_syntax.run_tests('.py')   # long time\nExpected nothing\nGot:\n    Invalid Python 3 syntax found:\n      File \"src/sage/interfaces/polymake.py\", line 1503\n        except PolymakeError, msg:\n                            ^\n    SyntaxError: invalid syntax\n    <BLANKLINE>\n    <BLANKLINE>\n**********************************************************************\n```",
    "created_at": "2017-03-28T22:21:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332402",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:95" align="right">comment:95</div>


```
sage -t --long src/sage/tests/py3_syntax.py
**********************************************************************
File "src/sage/tests/py3_syntax.py", line 17, in sage.tests.py3_syntax
Failed example:
    py3_syntax.run_tests('.py')   # long time
Expected nothing
Got:
    Invalid Python 3 syntax found:
      File "src/sage/interfaces/polymake.py", line 1503
        except PolymakeError, msg:
                            ^
    SyntaxError: invalid syntax
    <BLANKLINE>
    <BLANKLINE>
**********************************************************************
```



---

archive/issue_events_311103.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-29T02:06:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311103"
}
```



---

archive/issue_events_311104.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-29T02:06:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311104"
}
```



---

archive/issue_comments_332403.json:
```json
{
    "body": "Changed branch from **[u/SimonKing/create_a_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/create_a_polymake_pexpect_interface)** to **[u/mkoeppe/create_a_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/create_a_polymake_pexpect_interface)**",
    "created_at": "2017-03-29T02:28:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332403",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/SimonKing/create_a_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/create_a_polymake_pexpect_interface)** to **[u/mkoeppe/create_a_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/create_a_polymake_pexpect_interface)**



---

archive/issue_comments_332404.json:
```json
{
    "body": "<div id=\"comment:98\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db26ccf049aaf7355e85e05e970cf87bda17c44a\"><code>db26ccf</code></a></td><td><code>Merge tag '7.6' into t/22452/create_a_polymake_pexpect_interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52a77ee1b1fd70e0d6371f2789c4b6bfffe511ec\"><code>52a77ee</code></a></td><td><code>PolymakeElement._member_list: Fix for python 3 syntax</code></td></tr></table>\n",
    "created_at": "2017-03-29T02:29:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332404",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:98"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db26ccf049aaf7355e85e05e970cf87bda17c44a"><code>db26ccf</code></a></td><td><code>Merge tag '7.6' into t/22452/create_a_polymake_pexpect_interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52a77ee1b1fd70e0d6371f2789c4b6bfffe511ec"><code>52a77ee</code></a></td><td><code>PolymakeElement._member_list: Fix for python 3 syntax</code></td></tr></table>




---

archive/issue_events_311105.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-29T02:29:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311105"
}
```



---

archive/issue_events_311106.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-29T02:29:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311106"
}
```



---

archive/issue_comments_332405.json:
```json
{
    "body": "Changed commit from **[`185430f`](https://github.com/sagemath/sagetrac-mirror/commit/185430f80346564983f3aeee6a7ce5643c80d4d4)** to **[`52a77ee`](https://github.com/sagemath/sagetrac-mirror/commit/52a77ee1b1fd70e0d6371f2789c4b6bfffe511ec)**",
    "created_at": "2017-03-29T02:29:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332405",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`185430f`](https://github.com/sagemath/sagetrac-mirror/commit/185430f80346564983f3aeee6a7ce5643c80d4d4)** to **[`52a77ee`](https://github.com/sagemath/sagetrac-mirror/commit/52a77ee1b1fd70e0d6371f2789c4b6bfffe511ec)**



---

archive/issue_events_311107.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-03-29T15:28:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311107"
}
```



---

archive/issue_events_311108.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-03-29T15:28:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311108"
}
```



---

archive/issue_comments_332406.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/create_a_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/create_a_polymake_pexpect_interface)** to **[`52a77ee`](https://github.com/sagemath/sagetrac-mirror/commit/52a77ee1b1fd70e0d6371f2789c4b6bfffe511ec)**",
    "created_at": "2017-03-30T22:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332406",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/create_a_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/create_a_polymake_pexpect_interface)** to **[`52a77ee`](https://github.com/sagemath/sagetrac-mirror/commit/52a77ee1b1fd70e0d6371f2789c4b6bfffe511ec)**



---

archive/issue_events_311109.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-30T22:34:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311109"
}
```



---

archive/issue_events_311110.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3dc585d65bb64bf92a780982a1af633e0a48bf35",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-03-30T22:34:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22452#event-311110"
}
```



---

archive/issue_comments_332407.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nGreat!!!!! Thanks so much for all this work!!! I will let polymake people know and start showing it around!\n\nAs a follow up, I guess it would make sense to make a thematic tutorial on the interface?!?! I can volunteer to do it since I was playing a lot with the doc lately. I will continue to bug you with questions when I have them!\n\nThanks a lot again!",
    "created_at": "2017-03-31T06:50:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332407",
    "user": "https://github.com/jplab"
}
```

<div id="comment:101" align="right">comment:101</div>

Great!!!!! Thanks so much for all this work!!! I will let polymake people know and start showing it around!

As a follow up, I guess it would make sense to make a thematic tutorial on the interface?!?! I can volunteer to do it since I was playing a lot with the doc lately. I will continue to bug you with questions when I have them!

Thanks a lot again!



---

archive/issue_comments_332408.json:
```json
{
    "body": "Changed commit from **[`52a77ee`](https://github.com/sagemath/sagetrac-mirror/commit/52a77ee1b1fd70e0d6371f2789c4b6bfffe511ec)** to none",
    "created_at": "2017-03-31T06:50:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332408",
    "user": "https://github.com/jplab"
}
```

Changed commit from **[`52a77ee`](https://github.com/sagemath/sagetrac-mirror/commit/52a77ee1b1fd70e0d6371f2789c4b6bfffe511ec)** to none



---

archive/issue_comments_332409.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nIndeed this is good news! I think it would be appropriate to show *one* example of a computation with polymake inside the thematic tutorial that you started at #22572. It can be a follow up ticket if you do not want to delay it.",
    "created_at": "2017-03-31T06:59:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22452#issuecomment-332409",
    "user": "https://github.com/videlec"
}
```

<div id="comment:102" align="right">comment:102</div>

Indeed this is good news! I think it would be appropriate to show *one* example of a computation with polymake inside the thematic tutorial that you started at #22572. It can be a follow up ticket if you do not want to delay it.
