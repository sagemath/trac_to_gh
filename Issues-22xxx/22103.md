# Issue 22103: Printing p-adic numbers

archive/issues_021866.json:
```json
{
    "body": "Currently, in the printing mode `digits`, the \"initial\" zeroes of a p-adic number are not displayed:\n\n```\nsage: R = Zp(5, print_mode='digits')\nsage: R(89)\n...324\n```\n\nIt is a bit annoying because the precision does not appear on the printing. Even worse, when \"initial\" zeroes are located after the decimal mark, there appears as question mark whereas they are not unknown:\n\n```\nsage: x = R(89)/5^5; x\n...?.??324\nsage: x.precision_absolute()\n15\n```\n\nI would suggest to change this behaviour and display all digits (including the initial zeroes) until the precision. Any thoughts?\n\n\nCC:  @roed314 @saraedum\n\nKeywords: padic printing, sd87\n\nBranch/Commit: ce5ed91e17e9427caaef6c9fe09c8142c35cf772\n\nReviewer: David Roe, Adele Bourgeois\n\nAuthor: Xavier Caruso\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22103\n\n",
    "closed_at": "2017-07-26T22:13:32Z",
    "created_at": "2016-12-27T23:04:06Z",
    "labels": [
        "component: padics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Printing p-adic numbers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22103",
    "user": "https://github.com/xcaruso"
}
```
Currently, in the printing mode `digits`, the "initial" zeroes of a p-adic number are not displayed:

```
sage: R = Zp(5, print_mode='digits')
sage: R(89)
...324
```

It is a bit annoying because the precision does not appear on the printing. Even worse, when "initial" zeroes are located after the decimal mark, there appears as question mark whereas they are not unknown:

```
sage: x = R(89)/5^5; x
...?.??324
sage: x.precision_absolute()
15
```

I would suggest to change this behaviour and display all digits (including the initial zeroes) until the precision. Any thoughts?


CC:  @roed314 @saraedum

Keywords: padic printing, sd87

Branch/Commit: ce5ed91e17e9427caaef6c9fe09c8142c35cf772

Reviewer: David Roe, Adele Bourgeois

Author: Xavier Caruso

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22103





---

archive/issue_comments_403735.json:
```json
{
    "body": "<a id='comment:1'></a>\nI'm happy to add zeros indicating the precision.\n\nThere's also a question of whether digits are should be printed in an opposite order, to align with the convention for real numbers where \"smaller\" digits appear further to the right.  I'm comfortable with the current ordering, but others have suggested a change over the years.",
    "created_at": "2016-12-27T23:11:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403735",
    "user": "https://github.com/roed314"
}
```

<a id='comment:1'></a>
I'm happy to add zeros indicating the precision.

There's also a question of whether digits are should be printed in an opposite order, to align with the convention for real numbers where "smaller" digits appear further to the right.  I'm comfortable with the current ordering, but others have suggested a change over the years.



---

archive/issue_comments_403736.json:
```json
{
    "body": "<a id='comment:2'></a>\nPersonally, I do prefer the current ordering.",
    "created_at": "2016-12-27T23:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403736",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:2'></a>
Personally, I do prefer the current ordering.



---

archive/issue_comments_403737.json:
```json
{
    "body": "<a id='comment:3'></a>\nbeware of current work going on in #22036 (python3 compatibility, needs review)",
    "created_at": "2016-12-29T15:51:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403737",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
beware of current work going on in #22036 (python3 compatibility, needs review)



---

archive/issue_comments_403738.json:
```json
{
    "body": "<a id='comment:4'></a>\nHere is a proposal.",
    "created_at": "2017-06-10T16:14:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403738",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:4'></a>
Here is a proposal.



---

archive/issue_comments_403739.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-10T16:14:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403739",
    "user": "https://github.com/xcaruso"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_403740.json:
```json
{
    "body": "Changing branch from \"\" to \"u/caruso/padic_printing\"",
    "created_at": "2017-06-10T16:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403740",
    "user": "https://github.com/xcaruso"
}
```

Changing branch from "" to "u/caruso/padic_printing"



---

archive/issue_comments_403741.json:
```json
{
    "body": "Changing commit from \"\" to \"a2907e8643fc3db2c7cc53c9b281068431ab48b4\"",
    "created_at": "2017-06-10T16:20:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403741",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "a2907e8643fc3db2c7cc53c9b281068431ab48b4"



---

archive/issue_comments_403742.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                       |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|\n|[a2907e8](https://github.com/sagemath/sagetrac-mirror/commit/a2907e8643fc3db2c7cc53c9b281068431ab48b4)|`Print significant 0's`|",
    "created_at": "2017-06-10T16:20:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403742",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                       |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------|
|[a2907e8](https://github.com/sagemath/sagetrac-mirror/commit/a2907e8643fc3db2c7cc53c9b281068431ab48b4)|`Print significant 0's`|



---

archive/issue_comments_403743.json:
```json
{
    "body": "<a id='comment:7'></a>\nI'm happy with the general principle.  A couple suggestions:\n\n* Why are there trailing zeros in the hunk `-874,8 +874,24 `@``@` cdef class pAdicPrinter_class(SageObject)`?\n* If they are supposed to be there, you should use `alphabet[0]` rather than `\"0\"`.\n* Can you add some doctests showing the improved behavior?",
    "created_at": "2017-06-10T16:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403743",
    "user": "https://github.com/roed314"
}
```

<a id='comment:7'></a>
I'm happy with the general principle.  A couple suggestions:

* Why are there trailing zeros in the hunk `-874,8 +874,24 `@``@` cdef class pAdicPrinter_class(SageObject)`?
* If they are supposed to be there, you should use `alphabet[0]` rather than `"0"`.
* Can you add some doctests showing the improved behavior?



---

archive/issue_comments_403744.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-06-10T16:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403744",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_403745.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Roe\"",
    "created_at": "2017-06-10T16:46:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403745",
    "user": "https://github.com/roed314"
}
```

Changing reviewer from "" to "David Roe"



---

archive/issue_comments_403746.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-10T18:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403746",
    "user": "https://github.com/xcaruso"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_403747.json:
```json
{
    "body": "<a id='comment:8'></a>\nThe trailing zero is indeed not necessary, just for convenience. I however agree for using `alphabet[0]` instead of `0`.\n\nI've added doctests.",
    "created_at": "2017-06-10T18:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403747",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:8'></a>
The trailing zero is indeed not necessary, just for convenience. I however agree for using `alphabet[0]` instead of `0`.

I've added doctests.



---

archive/issue_comments_403748.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[1ded8ba](https://github.com/sagemath/sagetrac-mirror/commit/1ded8ba5ec498b358ba89aa6ab6289a17a2d68f0)|`Small fixed + doctests`|",
    "created_at": "2017-06-10T18:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403748",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[1ded8ba](https://github.com/sagemath/sagetrac-mirror/commit/1ded8ba5ec498b358ba89aa6ab6289a17a2d68f0)|`Small fixed + doctests`|



---

archive/issue_comments_403749.json:
```json
{
    "body": "Changing commit from \"a2907e8643fc3db2c7cc53c9b281068431ab48b4\" to \"1ded8ba5ec498b358ba89aa6ab6289a17a2d68f0\"",
    "created_at": "2017-06-10T18:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403749",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a2907e8643fc3db2c7cc53c9b281068431ab48b4" to "1ded8ba5ec498b358ba89aa6ab6289a17a2d68f0"



---

archive/issue_comments_403750.json:
```json
{
    "body": "Changing commit from \"1ded8ba5ec498b358ba89aa6ab6289a17a2d68f0\" to \"ce5ed91e17e9427caaef6c9fe09c8142c35cf772\"",
    "created_at": "2017-06-14T05:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403750",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1ded8ba5ec498b358ba89aa6ab6289a17a2d68f0" to "ce5ed91e17e9427caaef6c9fe09c8142c35cf772"



---

archive/issue_comments_403751.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[ce5ed91](https://github.com/sagemath/sagetrac-mirror/commit/ce5ed91e17e9427caaef6c9fe09c8142c35cf772)|`Merge branch 'develop' into padic_printing`|",
    "created_at": "2017-06-14T05:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403751",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[ce5ed91](https://github.com/sagemath/sagetrac-mirror/commit/ce5ed91e17e9427caaef6c9fe09c8142c35cf772)|`Merge branch 'develop' into padic_printing`|



---

archive/issue_comments_403752.json:
```json
{
    "body": "<a id='comment:11'></a>\nThere's no problem merging this ticket with #20310.  I'm rebuilding and running tests, but am about to get on a flight.",
    "created_at": "2017-06-16T21:54:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403752",
    "user": "https://github.com/roed314"
}
```

<a id='comment:11'></a>
There's no problem merging this ticket with #20310.  I'm rebuilding and running tests, but am about to get on a flight.



---

archive/issue_comments_403753.json:
```json
{
    "body": "<a id='comment:12'></a>\nOkay, I had one test failure in `src/sage/rings/padics/padic_ZZ_pX_CR_element.pyx` after merging with #20310.  I'm not sure if the problem is from changes introduced there.\n\nWe can keep talking about this in a week and a half, or you and Julian can resolve it.",
    "created_at": "2017-06-17T07:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403753",
    "user": "https://github.com/roed314"
}
```

<a id='comment:12'></a>
Okay, I had one test failure in `src/sage/rings/padics/padic_ZZ_pX_CR_element.pyx` after merging with #20310.  I'm not sure if the problem is from changes introduced there.

We can keep talking about this in a week and a half, or you and Julian can resolve it.



---

archive/issue_comments_403754.json:
```json
{
    "body": "Changing keywords from \"padic printing\" to \"padic printing, sd87\".",
    "created_at": "2017-07-20T04:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403754",
    "user": "https://github.com/xcaruso"
}
```

Changing keywords from "padic printing" to "padic printing, sd87".



---

archive/issue_comments_403755.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-07-20T21:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403755",
    "user": "https://trac.sagemath.org/admin/accounts/users/abourgeois"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_403756.json:
```json
{
    "body": "Changing reviewer from \"David Roe\" to \"David Roe, Adele Bourgeois\"",
    "created_at": "2017-07-20T21:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403756",
    "user": "https://trac.sagemath.org/admin/accounts/users/abourgeois"
}
```

Changing reviewer from "David Roe" to "David Roe, Adele Bourgeois"



---

archive/issue_comments_403757.json:
```json
{
    "body": "<a id='comment:14'></a>\nAll doctests pass.",
    "created_at": "2017-07-20T21:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403757",
    "user": "https://trac.sagemath.org/admin/accounts/users/abourgeois"
}
```

<a id='comment:14'></a>
All doctests pass.



---

archive/issue_comments_403758.json:
```json
{
    "body": "<a id='comment:15'></a>\nauthor name..",
    "created_at": "2017-07-21T20:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403758",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'></a>
author name..



---

archive/issue_comments_403759.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-07-21T20:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403759",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_403760.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-07-21T20:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403760",
    "user": "https://github.com/xcaruso"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_403761.json:
```json
{
    "body": "Changing author from \"\" to \"Xavier Caruso\"",
    "created_at": "2017-07-21T20:42:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403761",
    "user": "https://github.com/xcaruso"
}
```

Changing author from "" to "Xavier Caruso"



---

archive/issue_events_073931.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-26T22:13:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22103#event-73931"
}
```



---

archive/issue_comments_403762.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-07-26T22:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403762",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_403763.json:
```json
{
    "body": "Changing branch from \"u/caruso/padic_printing\" to \"ce5ed91e17e9427caaef6c9fe09c8142c35cf772\"",
    "created_at": "2017-07-26T22:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22103",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22103#issuecomment-403763",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/caruso/padic_printing" to "ce5ed91e17e9427caaef6c9fe09c8142c35cf772"
