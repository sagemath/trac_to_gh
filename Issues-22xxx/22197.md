# Issue 22197: Sage library must be rebuilt after installing certain optional packages

archive/issues_021960.json:
```json
{
    "assignees": [],
    "body": "The optional package `libbraiding` should enable the module `sage.libs.braiding`. But it does not. To check it, install the package `libbraiding` and then try:\n\n```\nsage: from sage.libs.braiding import *\n---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n<ipython-input-1-d9209c49d9c3> in <module>()\n----> 1 from sage.libs.braiding import *\n\nImportError: No module named braiding\n```\n\nThe problem is that `./sage -i libbraiding` installs the `libbraiding` package but not the Sage library module. One needs to additionally run `make sagelib` (or `make build` or `make`).\n\nCC:  @vbraun @kcrisman @tscrim @dimpase @jhpalmieri\n\nReviewer: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22197_\n\n",
    "closed_at": "2020-04-18T12:58:54Z",
    "created_at": "2017-01-17T17:07:27Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20documentation",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Sage library must be rebuilt after installing certain optional packages",
    "type": "issue",
    "updated_at": "2020-04-18T12:58:54Z",
    "url": "https://github.com/sagemath/sage/issues/22197",
    "user": "https://github.com/miguelmarco"
}
```
The optional package `libbraiding` should enable the module `sage.libs.braiding`. But it does not. To check it, install the package `libbraiding` and then try:

```
sage: from sage.libs.braiding import *
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-1-d9209c49d9c3> in <module>()
----> 1 from sage.libs.braiding import *

ImportError: No module named braiding
```

The problem is that `./sage -i libbraiding` installs the `libbraiding` package but not the Sage library module. One needs to additionally run `make sagelib` (or `make build` or `make`).

CC:  @vbraun @kcrisman @tscrim @dimpase @jhpalmieri

Reviewer: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/22197_





---

archive/issue_events_292923.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2017-01-17T17:07:27Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292923"
}
```



---

archive/issue_events_292924.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2017-01-17T17:07:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebraic%20topology",
    "label_color": "0000ff",
    "label_name": "component: algebraic topology",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292924"
}
```



---

archive/issue_events_292925.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2017-01-17T17:07:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292925"
}
```



---

archive/issue_events_292926.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2017-01-17T17:07:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292926"
}
```



---

archive/issue_comments_330814.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nI think you need to run `sage -b` afterward installing it. Perhaps that is something we should add to the Sage install file?",
    "created_at": "2017-01-17T17:33:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330814",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'>Comment 1:</a>
I think you need to run `sage -b` afterward installing it. Perhaps that is something we should add to the Sage install file?



---

archive/issue_comments_330815.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n The optional package `libbraiding` should enable the module `sage.libs.braiding`. But it does not.\n \n-To check it, install the package `libbraiding and then try:\n+To check it, install the package `libbraiding` and then try:\n \n ```\n sage: from sage.libs.braiding import *\n``````\n",
    "created_at": "2017-01-17T17:33:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330815",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 The optional package `libbraiding` should enable the module `sage.libs.braiding`. But it does not.
 
-To check it, install the package `libbraiding and then try:
+To check it, install the package `libbraiding` and then try:
 
 ```
 sage: from sage.libs.braiding import *
``````




---

archive/issue_comments_330816.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nI think also noticed something similar for `meataxe`.",
    "created_at": "2017-01-17T17:33:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330816",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'>Comment 2:</a>
I think also noticed something similar for `meataxe`.



---

archive/issue_comments_330817.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nYou are absolutely right. Why exactly is that needed for this module but not for others like libhomfly?",
    "created_at": "2017-01-17T17:36:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330817",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:3'>Comment 3:</a>
You are absolutely right. Why exactly is that needed for this module but not for others like libhomfly?



---

archive/issue_comments_330818.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nPerhaps you just didn't notice it? If you installed both at the same time and then ran `sage -b`, it would fix the issue as well.\n\nI suspect it suffers from the same issue. I have `libhomfly` installed on my copies of Sage, so I can't test it.",
    "created_at": "2017-01-17T17:43:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330818",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'>Comment 4:</a>
Perhaps you just didn't notice it? If you installed both at the same time and then ran `sage -b`, it would fix the issue as well.

I suspect it suffers from the same issue. I have `libhomfly` installed on my copies of Sage, so I can't test it.



---

archive/issue_comments_330819.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nOk, I plan to propose both libhomfly and libbraiding to become standard packages once the one year period as optional is finished (May and June respectively). This problem should be solved automatically then.\n\nSo wontfix sounds like a reasonable resolution.",
    "created_at": "2017-02-04T12:57:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330819",
    "user": "https://github.com/miguelmarco"
}
```

<a id='comment:5'>Comment 5:</a>
Ok, I plan to propose both libhomfly and libbraiding to become standard packages once the one year period as optional is finished (May and June respectively). This problem should be solved automatically then.

So wontfix sounds like a reasonable resolution.



---

archive/issue_comments_330820.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@tscrim](#comment%3A1):\n> I think you need to run `sage -b` afterward installing it.\n\nAbsolutely.  Personally, I don't really consider this a bug. When you run `make libbraiding`, it installs the `libbraiding` package, which is different from the `sage.libs.braiding` Python module.",
    "created_at": "2017-02-04T13:14:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330820",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@tscrim](#comment%3A1):
> I think you need to run `sage -b` afterward installing it.

Absolutely.  Personally, I don't really consider this a bug. When you run `make libbraiding`, it installs the `libbraiding` package, which is different from the `sage.libs.braiding` Python module.



---

archive/issue_comments_330821.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nWe *could* change the meaning of `./sage -i PACKAGE` to mean \"install PACKAGE and then rebuild all of Sage\", but I wouldn't do that without asking sage-devel.",
    "created_at": "2017-02-04T13:17:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330821",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'>Comment 7:</a>
We *could* change the meaning of `./sage -i PACKAGE` to mean "install PACKAGE and then rebuild all of Sage", but I wouldn't do that without asking sage-devel.



---

archive/issue_events_292927.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-04T13:17:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20algebraic%20topology",
    "label_color": "0000ff",
    "label_name": "component: algebraic topology",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292927"
}
```



---

archive/issue_events_292928.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-04T13:17:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "component: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292928"
}
```



---

archive/issue_comments_330822.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nJust FYI, I just ran into the same issue here. Trying to install `libhomfly`, claims it's done, but doctest `./sage -t --optional=sage,libhomfly ./src/sage/knots/` just gives `ImportError: No module named homfly` errors. `./sage -b` fixed it.",
    "created_at": "2018-02-09T10:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330822",
    "user": "https://github.com/haraldschilly"
}
```

<a id='comment:8'>Comment 8:</a>
Just FYI, I just ran into the same issue here. Trying to install `libhomfly`, claims it's done, but doctest `./sage -t --optional=sage,libhomfly ./src/sage/knots/` just gives `ImportError: No module named homfly` errors. `./sage -b` fixed it.



---

archive/issue_events_292929.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-02-09T13:23:30Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "title_is": "Sage library must be rebuilt after installing certain optional packages",
    "title_was": "Libbraiding module not found",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292929"
}
```



---

archive/issue_comments_330823.json:
```json
{
    "body": "Changed author from **Miguel Marco** to none",
    "created_at": "2018-02-09T13:23:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330823",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Miguel Marco** to none



---

archive/issue_comments_330824.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,4 @@\n-The optional package `libbraiding` should enable the module `sage.libs.braiding`. But it does not.\n-\n-To check it, install the package `libbraiding` and then try:\n+The optional package `libbraiding` should enable the module `sage.libs.braiding`. But it does not. To check it, install the package `libbraiding` and then try:\n \n ```\n sage: from sage.libs.braiding import *\n@@ -10,7 +8,6 @@\n ----> 1 from sage.libs.braiding import *\n \n ImportError: No module named braiding\n-\n ```\n \n-I guess the culprit has to do with the `module_list.py` but have been unable to pin it.\n+The problem is that `./sage -i libbraiding` installs the `libbraiding` package but not the Sage library module. One needs to additionally run `make sagelib` (or `make build` or `make`).\n``````\n",
    "created_at": "2018-02-09T13:23:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330824",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,4 @@
-The optional package `libbraiding` should enable the module `sage.libs.braiding`. But it does not.
-
-To check it, install the package `libbraiding` and then try:
+The optional package `libbraiding` should enable the module `sage.libs.braiding`. But it does not. To check it, install the package `libbraiding` and then try:
 
 ```
 sage: from sage.libs.braiding import *
@@ -10,7 +8,6 @@
 ----> 1 from sage.libs.braiding import *
 
 ImportError: No module named braiding
-
 ```
 
-I guess the culprit has to do with the `module_list.py` but have been unable to pin it.
+The problem is that `./sage -i libbraiding` installs the `libbraiding` package but not the Sage library module. One needs to additionally run `make sagelib` (or `make build` or `make`).
``````




---

archive/issue_comments_330825.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nRemoving \"Miguel Marco\" as author since there is no branch.",
    "created_at": "2018-02-09T13:23:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330825",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'>Comment 9:</a>
Removing "Miguel Marco" as author since there is no branch.



---

archive/issue_comments_330826.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nI'm open for suggestions on how to fix this...",
    "created_at": "2018-02-09T13:24:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330826",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'>Comment 10:</a>
I'm open for suggestions on how to fix this...



---

archive/issue_comments_330827.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\n+1 to following up with `sage -b`; It just takes 2s on my machine if there are no changes. And if you want to live dangerously then there is always `sage -p`",
    "created_at": "2018-02-09T15:01:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330827",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'>Comment 11:</a>
+1 to following up with `sage -b`; It just takes 2s on my machine if there are no changes. And if you want to live dangerously then there is always `sage -p`



---

archive/issue_comments_330828.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@vbraun](#comment%3A11):\n> +1 to following up with `sage -b`\n\nBetter `make sagelib` because that does dependency checking. And you mean to do that after every `sage -i` call? I'm OK with that, I just wanted to verify.\n\nI do feel that this should be discussed on sage-devel first.",
    "created_at": "2018-02-09T15:08:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330828",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@vbraun](#comment%3A11):
> +1 to following up with `sage -b`

Better `make sagelib` because that does dependency checking. And you mean to do that after every `sage -i` call? I'm OK with that, I just wanted to verify.

I do feel that this should be discussed on sage-devel first.



---

archive/issue_events_292930.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-18T06:58:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292930"
}
```



---

archive/issue_events_292931.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-18T06:58:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292931"
}
```



---

archive/issue_events_292932.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-18T06:58:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292932"
}
```



---

archive/issue_events_292933.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-18T06:58:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292933"
}
```



---

archive/issue_comments_330829.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nThis is outdated; as of Sage 9.0, `sage -i` invokes `make all-build` afterwards.",
    "created_at": "2020-04-18T06:58:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330829",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'>Comment 13:</a>
This is outdated; as of Sage 9.0, `sage -i` invokes `make all-build` afterwards.



---

archive/issue_events_292934.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-18T11:08:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292934"
}
```



---

archive/issue_events_292935.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-04-18T11:08:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292935"
}
```



---

archive/issue_comments_330830.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2020-04-18T11:08:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22197#issuecomment-330830",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_events_292936.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-04-18T12:58:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292936"
}
```



---

archive/issue_events_292937.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-04-18T12:58:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22197",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22197#event-292937"
}
```
