# Issue 22733: Doctest: bug with first call to ex.series()

archive/issues_022496.json:
```json
{
    "body": "In a fresh Sage:\n\n```\nsage: var('a b c c0 c1 c2 c3 c4 c5 c6 d i j m n p r k u x y z')\n(a, b, c, c0, c1, c2, c3, c4, c5, c6, d, i, j, m, n, p, r, k, u, x, y, z)\nsage: a.series(x)\n1*x + Order(x^20)\nsage: b.series(x)\n(b)\n\nsage: var('z0 z')\n(z0, z)\nsage: z0.series(x)\n1*x + Order(x^20)\nsage: z.series(x)\n(z)\n\nsage: var('z0 z')\n(z0, z)\nsage: z.series(x)\n1*x + Order(x^20)\nsage: z0.series(x)\n(z0)\n```\nIt seems to always affect the first call to series.\n\nBranch/Commit: 92e6f44e34dfa5e3a8bd68fb90bda06787362bdb\n\nReviewer: Travis Scrimshaw\n\nAuthor: Ralf Stephan\n\nDependencies: #23134\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22733\n\n",
    "closed_at": "2017-06-22T07:24:40Z",
    "created_at": "2017-04-01T06:05:00Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Doctest: bug with first call to ex.series()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22733",
    "user": "https://github.com/rwst"
}
```
In a fresh Sage:

```
sage: var('a b c c0 c1 c2 c3 c4 c5 c6 d i j m n p r k u x y z')
(a, b, c, c0, c1, c2, c3, c4, c5, c6, d, i, j, m, n, p, r, k, u, x, y, z)
sage: a.series(x)
1*x + Order(x^20)
sage: b.series(x)
(b)

sage: var('z0 z')
(z0, z)
sage: z0.series(x)
1*x + Order(x^20)
sage: z.series(x)
(z)

sage: var('z0 z')
(z0, z)
sage: z.series(x)
1*x + Order(x^20)
sage: z0.series(x)
(z0)
```
It seems to always affect the first call to series.

Branch/Commit: 92e6f44e34dfa5e3a8bd68fb90bda06787362bdb

Reviewer: Travis Scrimshaw

Author: Ralf Stephan

Dependencies: #23134

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22733





---

archive/issue_comments_423863.json:
```json
{
    "body": "Changing dependencies from \"\" to \"pynac-0.7.8\"",
    "created_at": "2017-05-17T07:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423863",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "" to "pynac-0.7.8"



---

archive/issue_comments_423864.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Fixed upstream, in a later stable release.\"",
    "created_at": "2017-05-17T07:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423864",
    "user": "https://github.com/rwst"
}
```

Changing upstream from "N/A" to "Fixed upstream, in a later stable release."



---

archive/issue_comments_423865.json:
```json
{
    "body": "<a id='comment:2'></a>See also #23072",
    "created_at": "2017-05-25T08:39:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423865",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>See also #23072



---

archive/issue_comments_423866.json:
```json
{
    "body": "Changing dependencies from \"pynac-0.7.8\" to \"#23134\"",
    "created_at": "2017-06-03T08:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423866",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "pynac-0.7.8" to "#23134"



---

archive/issue_comments_423867.json:
```json
{
    "body": "Changing upstream from \"Fixed upstream, in a later stable release.\" to \"N/A\"",
    "created_at": "2017-06-03T08:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423867",
    "user": "https://github.com/rwst"
}
```

Changing upstream from "Fixed upstream, in a later stable release." to "N/A"



---

archive/issue_comments_423868.json:
```json
{
    "body": "<a id='comment:4'></a>Just add a doctest, and I will set a positive review.",
    "created_at": "2017-06-03T14:43:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423868",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>Just add a doctest, and I will set a positive review.



---

archive/issue_comments_423869.json:
```json
{
    "body": "Changing branch from \"\" to \"u/rws/bug_with_first_call_to_ex_series__\"",
    "created_at": "2017-06-04T06:45:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423869",
    "user": "https://github.com/rwst"
}
```

Changing branch from "" to "u/rws/bug_with_first_call_to_ex_series__"



---

archive/issue_comments_423870.json:
```json
{
    "body": "<a id='comment:6'></a>Note: The failure is dependent on memory content and changes with every change of the comment part of the code. So, while this is fixed and the test always passes the test might not fail in versions that have the bug reintroduced.\n\n---\nNew commits:",
    "created_at": "2017-06-04T06:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423870",
    "user": "https://github.com/rwst"
}
```

<a id='comment:6'></a>Note: The failure is dependent on memory content and changes with every change of the comment part of the code. So, while this is fixed and the test always passes the test might not fail in versions that have the bug reintroduced.

---
New commits:



---

archive/issue_comments_423871.json:
```json
{
    "body": "Changing commit from \"\" to \"92e6f44e34dfa5e3a8bd68fb90bda06787362bdb\"",
    "created_at": "2017-06-04T06:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423871",
    "user": "https://github.com/rwst"
}
```

Changing commit from "" to "92e6f44e34dfa5e3a8bd68fb90bda06787362bdb"



---

archive/issue_comments_423872.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-04T06:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423872",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_423873.json:
```json
{
    "body": "Changing author from \"\" to \"Ralf Stephan\"",
    "created_at": "2017-06-04T06:50:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423873",
    "user": "https://github.com/rwst"
}
```

Changing author from "" to "Ralf Stephan"



---

archive/issue_comments_423874.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2017-06-04T06:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423874",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_423875.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-04T06:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423875",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_423876.json:
```json
{
    "body": "<a id='comment:7'></a>It's hard to have tests that are guaranteed to fail if a bug was (re)introduced, so we will just have to do the best we can.",
    "created_at": "2017-06-04T06:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423876",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>It's hard to have tests that are guaranteed to fail if a bug was (re)introduced, so we will just have to do the best we can.



---

archive/issue_events_059215.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-22T07:24:40Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22733#event-59215"
}
```



---

archive/issue_comments_423877.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-06-22T07:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423877",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_423878.json:
```json
{
    "body": "Changing branch from \"u/rws/bug_with_first_call_to_ex_series__\" to \"92e6f44e34dfa5e3a8bd68fb90bda06787362bdb\"",
    "created_at": "2017-06-22T07:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22733",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22733#issuecomment-423878",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/rws/bug_with_first_call_to_ex_series__" to "92e6f44e34dfa5e3a8bd68fb90bda06787362bdb"
