# Issue 22340: Coefficient of an AsymptoticExpansion

archive/issues_022103.json:
```json
{
    "body": "The following would be convenient:\n\n```\nsage: R.<m, n> = AsymptoticRing(\"m^QQ*n^QQ\", ZZ)\nsage: ae = 1 + 42/n + 2/n/m + O(n^-2)\nsage: ae.monomial_coefficient(1/n)\n42\n```\nThe choice of the method name `monomial_coefficient` is motivated by the homonymous [method](http://doc.sagemath.org/html/en/reference/polynomial_rings/sage/rings/polynomial/multi_polynomial_element.html#sage.rings.polynomial.multi_polynomial_element.MPolynomial_polydict.monomial_coefficient) of multivariate polynomial rings.\n\nCC:  @dkrenn @behackl\n\nBranch/Commit: f04154b6f47d6510503e8fcc5af6e7b2bfd28269\n\nReviewer: Daniel Krenn\n\nAuthor: Clemens Heuberger\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22340\n\n",
    "closed_at": "2017-02-16T22:28:43Z",
    "created_at": "2017-02-10T10:56:58Z",
    "labels": [
        "component: asymptotic expansions"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Coefficient of an AsymptoticExpansion",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22340",
    "user": "https://github.com/cheuberg"
}
```
The following would be convenient:

```
sage: R.<m, n> = AsymptoticRing("m^QQ*n^QQ", ZZ)
sage: ae = 1 + 42/n + 2/n/m + O(n^-2)
sage: ae.monomial_coefficient(1/n)
42
```
The choice of the method name `monomial_coefficient` is motivated by the homonymous [method](http://doc.sagemath.org/html/en/reference/polynomial_rings/sage/rings/polynomial/multi_polynomial_element.html#sage.rings.polynomial.multi_polynomial_element.MPolynomial_polydict.monomial_coefficient) of multivariate polynomial rings.

CC:  @dkrenn @behackl

Branch/Commit: f04154b6f47d6510503e8fcc5af6e7b2bfd28269

Reviewer: Daniel Krenn

Author: Clemens Heuberger

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22340





---

archive/issue_comments_414201.json:
```json
{
    "body": "Changing branch from \"\" to \"u/cheuberg/coefficient-asymptotic-expansion\"",
    "created_at": "2017-02-10T11:24:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414201",
    "user": "https://github.com/cheuberg"
}
```

Changing branch from "" to "u/cheuberg/coefficient-asymptotic-expansion"



---

archive/issue_comments_414202.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-02-10T11:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414202",
    "user": "https://github.com/cheuberg"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_414203.json:
```json
{
    "body": "Changing author from \"\" to \"Clemens Heuberger\"",
    "created_at": "2017-02-10T11:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414203",
    "user": "https://github.com/cheuberg"
}
```

Changing author from "" to "Clemens Heuberger"



---

archive/issue_comments_414204.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2017-02-10T11:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414204",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_414205.json:
```json
{
    "body": "Changing commit from \"\" to \"6242878592c4c313a14d94e531684004f75c301e\"",
    "created_at": "2017-02-10T11:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414205",
    "user": "https://github.com/cheuberg"
}
```

Changing commit from "" to "6242878592c4c313a14d94e531684004f75c301e"



---

archive/issue_comments_414206.json:
```json
{
    "body": "<a id='comment:3'></a>Looks good; I only have very small things to discuss:\n\n1.\n\n```\n+        - ``monomial`` -- a monomial element which can be converted\n+          into the parent of this element.\n```\nWhat about rephrasing this to the following, so that the technical term \"parent\" is avoided\n\n```\na monomial element which can be converted into the asymptotic ring of this element\n```\n\n2. Remove period after \"element.\" above (convention in [SageMath](SageMath); not used in the asymptotic_ring file much...).\n\n3.\n\n```\n+            raise ValueError(\"non-exact monomial\")\n+            raise ValueError(\"not a monomial\")\n```\nWithin the asymptotic ring module usually error messages include the element (in the above, the monimial), i.e. \n\n```\nraise ValueError('non-exact monimal {}'.format(monomial))\nraise ValueError('{} not a monomial'.format(monomial))\n```\n(Maybe inserting \"is\" in the latter, but not sure.)",
    "created_at": "2017-02-10T17:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414206",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:3'></a>Looks good; I only have very small things to discuss:

1.

```
+        - ``monomial`` -- a monomial element which can be converted
+          into the parent of this element.
```
What about rephrasing this to the following, so that the technical term "parent" is avoided

```
a monomial element which can be converted into the asymptotic ring of this element
```

2. Remove period after "element." above (convention in [SageMath](SageMath); not used in the asymptotic_ring file much...).

3.

```
+            raise ValueError("non-exact monomial")
+            raise ValueError("not a monomial")
```
Within the asymptotic ring module usually error messages include the element (in the above, the monimial), i.e. 

```
raise ValueError('non-exact monimal {}'.format(monomial))
raise ValueError('{} not a monomial'.format(monomial))
```
(Maybe inserting "is" in the latter, but not sure.)



---

archive/issue_comments_414207.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Daniel Krenn\"",
    "created_at": "2017-02-10T17:55:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414207",
    "user": "https://github.com/dkrenn"
}
```

Changing reviewer from "" to "Daniel Krenn"



---

archive/issue_comments_414208.json:
```json
{
    "body": "<a id='comment:4'></a>4. The method in the multivariate polynomial ring returns `0` if the monomial is not in the polynomial. Here a `KeyError` will be raised. If there is no reason against `0`, I think the behavior should coincide.",
    "created_at": "2017-02-10T18:09:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414208",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:4'></a>4. The method in the multivariate polynomial ring returns `0` if the monomial is not in the polynomial. Here a `KeyError` will be raised. If there is no reason against `0`, I think the behavior should coincide.



---

archive/issue_comments_414209.json:
```json
{
    "body": "<a id='comment:5'></a>5. FYI, the following (undocumented) feature of a polynomial is present:\n\n```\nsage: P.<x,y> = ZZ[]\nsage: a=(1+2*x*y+3*x^2)\nsage: a[x*y]\n2\nsage: a[x^2]\n3\n```\nSo maybe `__getitem__` should have this behavior as well...",
    "created_at": "2017-02-10T18:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414209",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:5'></a>5. FYI, the following (undocumented) feature of a polynomial is present:

```
sage: P.<x,y> = ZZ[]
sage: a=(1+2*x*y+3*x^2)
sage: a[x*y]
2
sage: a[x^2]
3
```
So maybe `__getitem__` should have this behavior as well...



---

archive/issue_comments_414210.json:
```json
{
    "body": "Changing commit from \"6242878592c4c313a14d94e531684004f75c301e\" to \"f04154b6f47d6510503e8fcc5af6e7b2bfd28269\"",
    "created_at": "2017-02-11T15:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414210",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6242878592c4c313a14d94e531684004f75c301e" to "f04154b6f47d6510503e8fcc5af6e7b2bfd28269"



---

archive/issue_comments_414211.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-11T15:13:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414212.json:
```json
{
    "body": "<a id='comment:7'></a>1.-4. done\n5. I am not convinced: If this is not a documented and tested behaviour of polynomial rings, I am slightly hesitant to introduce this here. I am not against the concept, but IMHO it should be done in the polynomial ring first (and not on this ticket).",
    "created_at": "2017-02-11T15:16:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414212",
    "user": "https://github.com/cheuberg"
}
```

<a id='comment:7'></a>1.-4. done
5. I am not convinced: If this is not a documented and tested behaviour of polynomial rings, I am slightly hesitant to introduce this here. I am not against the concept, but IMHO it should be done in the polynomial ring first (and not on this ticket).



---

archive/issue_comments_414213.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [cheuberg](#comment%3A7):\n> 1.-4. done\n\n\nThank you.\n\n> 5. I am not convinced: If this is not a documented and tested behaviour of polynomial rings, I am slightly hesitant to introduce this here. I am not against the concept, but IMHO it should be done in the polynomial ring first (and not on this ticket).\n\n\nFine for me not to do this now.\n\nPatch LGTM; positive_review modulo non-finished patchbot",
    "created_at": "2017-02-11T15:48:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414213",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:8'></a>Replying to [cheuberg](#comment%3A7):
> 1.-4. done


Thank you.

> 5. I am not convinced: If this is not a documented and tested behaviour of polynomial rings, I am slightly hesitant to introduce this here. I am not against the concept, but IMHO it should be done in the polynomial ring first (and not on this ticket).


Fine for me not to do this now.

Patch LGTM; positive_review modulo non-finished patchbot



---

archive/issue_comments_414214.json:
```json
{
    "body": "<a id='comment:9'></a>Two patchbot tested this ticket now; each timed out on a single, but different doctest, and these tests are not related to this ticket. Thus I set it to positive review",
    "created_at": "2017-02-13T05:51:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414214",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:9'></a>Two patchbot tested this ticket now; each timed out on a single, but different doctest, and these tests are not related to this ticket. Thus I set it to positive review



---

archive/issue_comments_414215.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-13T05:51:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414215",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_414216.json:
```json
{
    "body": "Changing branch from \"u/cheuberg/coefficient-asymptotic-expansion\" to \"f04154b6f47d6510503e8fcc5af6e7b2bfd28269\"",
    "created_at": "2017-02-16T22:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414216",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/cheuberg/coefficient-asymptotic-expansion" to "f04154b6f47d6510503e8fcc5af6e7b2bfd28269"



---

archive/issue_events_058535.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-16T22:28:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22340#event-58535"
}
```



---

archive/issue_comments_414217.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-02-16T22:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22340#issuecomment-414217",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
