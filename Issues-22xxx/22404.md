# Issue 22404: Some improvements and cleanup to ETuple

archive/issues_022167.json:
```json
{
    "body": "We should have a fast method to check whether an `ETuple` is representing a constant rather than create the list of `nonzero_positions`. This also makes some more methods `cpdef` with explicit return types and some other little bits of cleanup.\n\nCC:  @jdemeyer @dkrenn\n\nKeywords: polynomial, ETuple\n\nBranch/Commit: 727f98e1521aacd02bf7d2595f4f0144c4200921\n\nReviewer: Daniel Krenn, Travis Scrimshaw\n\nAuthor: Travis Scrimshaw, Daniel Krenn\n\nDependencies: #22398\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22404\n\n",
    "closed_at": "2017-02-26T15:33:59Z",
    "created_at": "2017-02-21T15:49:42Z",
    "labels": [
        "component: commutative algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Some improvements and cleanup to ETuple",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22404",
    "user": "https://github.com/tscrim"
}
```
We should have a fast method to check whether an `ETuple` is representing a constant rather than create the list of `nonzero_positions`. This also makes some more methods `cpdef` with explicit return types and some other little bits of cleanup.

CC:  @jdemeyer @dkrenn

Keywords: polynomial, ETuple

Branch/Commit: 727f98e1521aacd02bf7d2595f4f0144c4200921

Reviewer: Daniel Krenn, Travis Scrimshaw

Author: Travis Scrimshaw, Daniel Krenn

Dependencies: #22398

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22404





---

archive/issue_comments_410015.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-02-21T15:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410015",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_410016.json:
```json
{
    "body": "Changing commit from \"\" to \"0063fa3cf577ea78d23a6ed90a8bb6a338e6d325\"",
    "created_at": "2017-02-21T15:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410016",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "" to "0063fa3cf577ea78d23a6ed90a8bb6a338e6d325"



---

archive/issue_comments_410017.json:
```json
{
    "body": "Changing branch from \"\" to \"public/polynomials/cleanup_ETuple-22404\"",
    "created_at": "2017-02-21T15:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410017",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "" to "public/polynomials/cleanup_ETuple-22404"



---

archive/issue_comments_410018.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[ba66e9c](https://github.com/sagemath/sagetrac-mirror/commit/ba66e9cb3f56007676686ae2e7024e52dc1e2d8b)|`fix for loop whose changing its keys inside`|\n|[500205f](https://github.com/sagemath/sagetrac-mirror/commit/500205f092692e0d9da392c1a3a0bc8de76cda9e)|`Added trac reference`|\n|[c930e8c](https://github.com/sagemath/sagetrac-mirror/commit/c930e8c451332b36a635742de0451c059dcef8ad)|`Trac #22398: minor rewrite to use tuple(...) instead of copy(...)`|\n|[a4e1504](https://github.com/sagemath/sagetrac-mirror/commit/a4e1504fdc12f0f52a0a37154e4353350b77547c)|`Trac #22398: make __init__ not modify its input`|\n|[1ca887a](https://github.com/sagemath/sagetrac-mirror/commit/1ca887a404feebeeaa44ba5807ffb710004978d3)|`Trac #22398: simplify factoring out _mon`|\n|[4a31db6](https://github.com/sagemath/sagetrac-mirror/commit/4a31db664c74f247e2e36a96b940c964c877a7df)|`Trac #22398: doctest non-modifying input`|\n|[1f2d7f4](https://github.com/sagemath/sagetrac-mirror/commit/1f2d7f442d649b13d44d013a37348fa194672641)|`Trac #22398: simplify id(...) = id(...) in doctest`|\n|[0063fa3](https://github.com/sagemath/sagetrac-mirror/commit/0063fa3cf577ea78d23a6ed90a8bb6a338e6d325)|`Improvements and some cleanup to ETuple.`|",
    "created_at": "2017-02-21T15:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410018",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[ba66e9c](https://github.com/sagemath/sagetrac-mirror/commit/ba66e9cb3f56007676686ae2e7024e52dc1e2d8b)|`fix for loop whose changing its keys inside`|
|[500205f](https://github.com/sagemath/sagetrac-mirror/commit/500205f092692e0d9da392c1a3a0bc8de76cda9e)|`Added trac reference`|
|[c930e8c](https://github.com/sagemath/sagetrac-mirror/commit/c930e8c451332b36a635742de0451c059dcef8ad)|`Trac #22398: minor rewrite to use tuple(...) instead of copy(...)`|
|[a4e1504](https://github.com/sagemath/sagetrac-mirror/commit/a4e1504fdc12f0f52a0a37154e4353350b77547c)|`Trac #22398: make __init__ not modify its input`|
|[1ca887a](https://github.com/sagemath/sagetrac-mirror/commit/1ca887a404feebeeaa44ba5807ffb710004978d3)|`Trac #22398: simplify factoring out _mon`|
|[4a31db6](https://github.com/sagemath/sagetrac-mirror/commit/4a31db664c74f247e2e36a96b940c964c877a7df)|`Trac #22398: doctest non-modifying input`|
|[1f2d7f4](https://github.com/sagemath/sagetrac-mirror/commit/1f2d7f442d649b13d44d013a37348fa194672641)|`Trac #22398: simplify id(...) = id(...) in doctest`|
|[0063fa3](https://github.com/sagemath/sagetrac-mirror/commit/0063fa3cf577ea78d23a6ed90a8bb6a338e6d325)|`Improvements and some cleanup to ETuple.`|



---

archive/issue_comments_410019.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------|\n|[35a0b9f](https://github.com/sagemath/sagetrac-mirror/commit/35a0b9fff8fd0ef1a9764fef47f6c6c6d7594a43)|`Trac #22404: add blanks after commas (except for tuples representing exponents) in polydict`|\n|[6b3d649](https://github.com/sagemath/sagetrac-mirror/commit/6b3d649d8916a428625199da0ff91f02d65b7b86)|`Merge branch 'public/polynomials/cleanup_ETuple-22404' of git://trac.sagemath.org/sage into t/22404`|",
    "created_at": "2017-02-21T16:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410019",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------|
|[35a0b9f](https://github.com/sagemath/sagetrac-mirror/commit/35a0b9fff8fd0ef1a9764fef47f6c6c6d7594a43)|`Trac #22404: add blanks after commas (except for tuples representing exponents) in polydict`|
|[6b3d649](https://github.com/sagemath/sagetrac-mirror/commit/6b3d649d8916a428625199da0ff91f02d65b7b86)|`Merge branch 'public/polynomials/cleanup_ETuple-22404' of git://trac.sagemath.org/sage into t/22404`|



---

archive/issue_comments_410020.json:
```json
{
    "body": "Changing commit from \"0063fa3cf577ea78d23a6ed90a8bb6a338e6d325\" to \"6b3d649d8916a428625199da0ff91f02d65b7b86\"",
    "created_at": "2017-02-21T16:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410020",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0063fa3cf577ea78d23a6ed90a8bb6a338e6d325" to "6b3d649d8916a428625199da0ff91f02d65b7b86"



---

archive/issue_comments_410021.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Daniel Krenn\"",
    "created_at": "2017-02-21T17:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410021",
    "user": "https://github.com/dkrenn"
}
```

Changing reviewer from "" to "Daniel Krenn"



---

archive/issue_comments_410022.json:
```json
{
    "body": "<a id='comment:3'></a>\nLGTM. I've added a commit where in polydict.pyx blanks are added after commas, except for tuples representing the exponents. Please cross-review.",
    "created_at": "2017-02-21T17:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410022",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:3'></a>
LGTM. I've added a commit where in polydict.pyx blanks are added after commas, except for tuples representing the exponents. Please cross-review.



---

archive/issue_comments_410023.json:
```json
{
    "body": "Changing author from \"Travis Scrimshaw\" to \"Travis Scrimshaw, Daniel Krenn\"",
    "created_at": "2017-02-21T17:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410023",
    "user": "https://github.com/dkrenn"
}
```

Changing author from "Travis Scrimshaw" to "Travis Scrimshaw, Daniel Krenn"



---

archive/issue_comments_410024.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-21T17:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410024",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_410025.json:
```json
{
    "body": "<a id='comment:4'></a>\nThank you!",
    "created_at": "2017-02-21T17:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410025",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
Thank you!



---

archive/issue_comments_410026.json:
```json
{
    "body": "Changing reviewer from \"Daniel Krenn\" to \"Daniel Krenn, Travis Scrimshaw\"",
    "created_at": "2017-02-21T17:29:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410026",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "Daniel Krenn" to "Daniel Krenn, Travis Scrimshaw"



---

archive/issue_comments_410027.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-02-23T13:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410027",
    "user": "https://github.com/dkrenn"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_410028.json:
```json
{
    "body": "<a id='comment:5'></a>\nPatchbot doctest fails.",
    "created_at": "2017-02-23T13:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410028",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:5'></a>
Patchbot doctest fails.



---

archive/issue_comments_410029.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[b56984c](https://github.com/sagemath/sagetrac-mirror/commit/b56984cba10abdcbfabda76ac98e1e9aee4d353a)|`Trac #22398: py3: fix <type 'tuple'>`|\n|[a5b3194](https://github.com/sagemath/sagetrac-mirror/commit/a5b31944a5608113d5def46f70e42418e6ba70b1)|`Merge branch 'public/ticket/22398' of git://trac.sagemath.org/sage into t/22404`|\n|[727f98e](https://github.com/sagemath/sagetrac-mirror/commit/727f98e1521aacd02bf7d2595f4f0144c4200921)|`Trac #22404: forgotten change in doctest`|",
    "created_at": "2017-02-23T13:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410029",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[b56984c](https://github.com/sagemath/sagetrac-mirror/commit/b56984cba10abdcbfabda76ac98e1e9aee4d353a)|`Trac #22398: py3: fix <type 'tuple'>`|
|[a5b3194](https://github.com/sagemath/sagetrac-mirror/commit/a5b31944a5608113d5def46f70e42418e6ba70b1)|`Merge branch 'public/ticket/22398' of git://trac.sagemath.org/sage into t/22404`|
|[727f98e](https://github.com/sagemath/sagetrac-mirror/commit/727f98e1521aacd02bf7d2595f4f0144c4200921)|`Trac #22404: forgotten change in doctest`|



---

archive/issue_comments_410030.json:
```json
{
    "body": "Changing commit from \"6b3d649d8916a428625199da0ff91f02d65b7b86\" to \"727f98e1521aacd02bf7d2595f4f0144c4200921\"",
    "created_at": "2017-02-23T13:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410030",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6b3d649d8916a428625199da0ff91f02d65b7b86" to "727f98e1521aacd02bf7d2595f4f0144c4200921"



---

archive/issue_comments_410031.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-02-23T13:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410031",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_410032.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-02-26T15:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410032",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_410033.json:
```json
{
    "body": "Changing branch from \"public/polynomials/cleanup_ETuple-22404\" to \"727f98e1521aacd02bf7d2595f4f0144c4200921\"",
    "created_at": "2017-02-26T15:33:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22404#issuecomment-410033",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/polynomials/cleanup_ETuple-22404" to "727f98e1521aacd02bf7d2595f4f0144c4200921"



---

archive/issue_events_074490.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-26T15:33:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22404",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22404#event-74490"
}
```
