# Issue 22841: Speed up hermite normal form and weak popov form for polynomial matrices

archive/issues_022604.json:
```json
{
    "assignees": [],
    "body": "This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices. \n\nDepends on #23050\n\nBranch/Commit: **[`dd0d065`](https://github.com/sagemath/sagetrac-mirror/commit/dd0d0654cc9a4781aba4643443074853c2f03bce)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Kwankyu Lee**\n\nComponent: **linear algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22841_\n\n",
    "closed_at": "2017-06-22T07:23:36Z",
    "created_at": "2017-04-20T13:45:43Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Speed up hermite normal form and weak popov form for polynomial matrices",
    "type": "issue",
    "updated_at": "2017-06-22T07:23:36Z",
    "url": "https://github.com/sagemath/sage/issues/22841",
    "user": "https://github.com/kwankyu"
}
```
This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices. 

Depends on #23050

Branch/Commit: **[`dd0d065`](https://github.com/sagemath/sagetrac-mirror/commit/dd0d0654cc9a4781aba4643443074853c2f03bce)**

Reviewer: **Vincent Delecroix**

Author: **Kwankyu Lee**

Component: **linear algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/22841_





---

archive/issue_events_315935.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-04-20T13:45:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315935"
}
```



---

archive/issue_events_315936.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-04-20T13:45:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315936"
}
```



---

archive/issue_events_315937.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-04-20T13:45:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315937"
}
```



---

archive/issue_events_315938.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-04-20T13:45:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315938"
}
```



---

archive/issue_comments_340549.json:
```json
{
    "body": "Commit: **[`43f328f`](https://github.com/sagemath/sagetrac-mirror/commit/43f328f449ba41b0cbc6ad90482d25afa002fbf8)**",
    "created_at": "2017-04-20T13:48:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340549",
    "user": "https://github.com/kwankyu"
}
```

Commit: **[`43f328f`](https://github.com/sagemath/sagetrac-mirror/commit/43f328f449ba41b0cbc6ad90482d25afa002fbf8)**



---

archive/issue_comments_340550.json:
```json
{
    "body": "Branch: **[u/klee/22841](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/22841)**",
    "created_at": "2017-04-20T13:48:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340550",
    "user": "https://github.com/kwankyu"
}
```

Branch: **[u/klee/22841](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/22841)**



---

archive/issue_comments_340551.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43f328f449ba41b0cbc6ad90482d25afa002fbf8\"><code>43f328f</code></a></td><td><code>Speed up hermite normal forms and weak popov form</code></td></tr></table>\n",
    "created_at": "2017-04-20T13:48:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340551",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43f328f449ba41b0cbc6ad90482d25afa002fbf8"><code>43f328f</code></a></td><td><code>Speed up hermite normal forms and weak popov form</code></td></tr></table>




---

archive/issue_comments_340552.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices.\n+This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices. A new reversed Hermite normal form method is added; This is useful for some applications.\n``````\n",
    "created_at": "2017-04-20T13:52:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340552",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices.
+This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices. A new reversed Hermite normal form method is added; This is useful for some applications.
``````




---

archive/issue_events_315939.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-04-20T13:52:10Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "title_is": "Speed up hermite normal form and weak popov form for polynomial matrices",
    "title_was": "Speed up hermite normal form and weak popov form",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315939"
}
```



---

archive/issue_events_315940.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-04-24T23:45:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315940"
}
```



---

archive/issue_comments_340553.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe code looks good.\n\n1) Why these new methods are cpdef? It will make any difference if you **repeatedly** call such method. Which I do not think is the case for most application.\n\n2) The logic of\n\n```\nshift = False\nif shifts:\n    shift = True\n```\nis quite confusing. You can use `if shifts` instead of `if shift` anywhere.\n\n3) Does `hermite_form_reversed` just the transposed of the hermite form of the transposed matrix or with respect to row/column ordering? If so, you can just remove the method (one can apply some permutations of entries first and then call the standard algorithm). If not, you should clarify the documentation.\n\n4) As far as I can see, most of the code in `_hermite_form_euclidean` is not polynomial specific but would work as soon as you have `xgcd`. The only missing piece is the normalization to monic polynomial. Am I right? In that case, it would be good to have this code available more generally.\n\n5) Instead of\n\n```\nif transformation:\n    U = A._hermite_form_euclidean(transformation=True)\n    if not include_zero_rows:\n        i = A.nrows() - 1\n        while i >= 0 and A.row(i) == 0:\n            i -= 1\n        A = A[:i+1]\n        U = U[:i+1]\n    return A, U\nelse:\n    A._hermite_form_euclidean(transformation=False)\n    if not include_zero_rows:\n        i = A.nrows() - 1\n        while i >= 0 and A.row(i) == 0:\n            i -= 1\n        A = A[:i+1]\n    return A\n```\nwhy not\n\n```\nU = A._hermite_form_euclidean(transformation=transformation)\nif not include_zero_rows:\n    i = A.nrows() - 1\n    while i >= 0 and A.row(i) == 0:\n        i -= 1\n    A = A[:i+1]\n    if transformation\n        U = U[:i+1]\n\nreturn (A, U) if transformation else A\n```\n\n7) You claim that there is a speed up. Could you provide some relevant timings?\n\n8) Please fill the \"Authors\" field of the ticket with your full name",
    "created_at": "2017-05-19T18:08:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340553",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

The code looks good.

1) Why these new methods are cpdef? It will make any difference if you **repeatedly** call such method. Which I do not think is the case for most application.

2) The logic of

```
shift = False
if shifts:
    shift = True
```
is quite confusing. You can use `if shifts` instead of `if shift` anywhere.

3) Does `hermite_form_reversed` just the transposed of the hermite form of the transposed matrix or with respect to row/column ordering? If so, you can just remove the method (one can apply some permutations of entries first and then call the standard algorithm). If not, you should clarify the documentation.

4) As far as I can see, most of the code in `_hermite_form_euclidean` is not polynomial specific but would work as soon as you have `xgcd`. The only missing piece is the normalization to monic polynomial. Am I right? In that case, it would be good to have this code available more generally.

5) Instead of

```
if transformation:
    U = A._hermite_form_euclidean(transformation=True)
    if not include_zero_rows:
        i = A.nrows() - 1
        while i >= 0 and A.row(i) == 0:
            i -= 1
        A = A[:i+1]
        U = U[:i+1]
    return A, U
else:
    A._hermite_form_euclidean(transformation=False)
    if not include_zero_rows:
        i = A.nrows() - 1
        while i >= 0 and A.row(i) == 0:
            i -= 1
        A = A[:i+1]
    return A
```
why not

```
U = A._hermite_form_euclidean(transformation=transformation)
if not include_zero_rows:
    i = A.nrows() - 1
    while i >= 0 and A.row(i) == 0:
        i -= 1
    A = A[:i+1]
    if transformation
        U = U[:i+1]

return (A, U) if transformation else A
```

7) You claim that there is a speed up. Could you provide some relevant timings?

8) Please fill the "Authors" field of the ticket with your full name



---

archive/issue_comments_340554.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2017-05-19T18:08:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340554",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_events_315941.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-05-19T18:08:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315941"
}
```



---

archive/issue_events_315942.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-05-19T18:08:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315942"
}
```



---

archive/issue_comments_340555.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n> 3) Does `hermite_form_reversed` just the transposed of the hermite form of the transposed matrix or with respect to row/column ordering? If so, you can just remove the method (one can apply some permutations of entries first and then call the standard algorithm). If not, you should clarify the documentation.\n\nThe output of `hermite_form_reversed` for matrix X is the row-and-column-reversed matrix of the hermite_form of the row-and-column-reversed matrix of X. So you are right that `hermite_form_reversed` can be implemented with the standard hermite form algorithm and some reversals of entries. \n\nThe issue is speed. I have an application for which reversed hermite forms are natural, and it is crucial to have this algorithm as fast as possible. I cannot lose any time in reversing entries. For me, I would rather keep `hermite_form_reversed` and make `hermite_form` do the reversals! But should I?\n\n(I will respond to your other comments later)",
    "created_at": "2017-05-19T22:39:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340555",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:5" align="right">comment:5</div>

> 3) Does `hermite_form_reversed` just the transposed of the hermite form of the transposed matrix or with respect to row/column ordering? If so, you can just remove the method (one can apply some permutations of entries first and then call the standard algorithm). If not, you should clarify the documentation.

The output of `hermite_form_reversed` for matrix X is the row-and-column-reversed matrix of the hermite_form of the row-and-column-reversed matrix of X. So you are right that `hermite_form_reversed` can be implemented with the standard hermite form algorithm and some reversals of entries. 

The issue is speed. I have an application for which reversed hermite forms are natural, and it is crucial to have this algorithm as fast as possible. I cannot lose any time in reversing entries. For me, I would rather keep `hermite_form_reversed` and make `hermite_form` do the reversals! But should I?

(I will respond to your other comments later)



---

archive/issue_comments_340556.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@kwankyu](#comment%3A5):\n> > 3) Does `hermite_form_reversed` just the transposed of the hermite form of the transposed matrix or with respect to row/column ordering? If so, you can just remove the method (one can apply some permutations of entries first and then call the standard algorithm). If not, you should clarify the documentation.\n\n> \n> The output of `hermite_form_reversed` for matrix X is the row-and-column-reversed matrix of the hermite_form of the row-and-column-reversed matrix of X. So you are right that `hermite_form_reversed` can be implemented with the standard hermite form algorithm and some reversals of entries. \n> \n> The issue is speed. I have an application for which reversed hermite forms are natural, and it is crucial to have this algorithm as fast as possible. I cannot lose any time in reversing entries. For me, I would rather keep `hermite_form_reversed` and make `hermite_form` do the reversals! But should I?\n\nReversing the entries will definitely not be time critical (zero copy, it is just swapping some pointers). The algorithm will spend much more time doing polynomial divisions. Am I correct that you call the row-and-column reversed matrix `(i,j) -> m[nrows - i - 1, ncols - j - 1]`?\n\nIf I had to choose I would implement only `hermite_form` and do in your algorithm\n\n```\nmy_matrix.reverse_rows_and_columns()\nhnf = my_matrix.hermite_form()\nmy_matrix.reverse_rows_and_columns()  # put back the matrix in the right order\n```\nIf you need help, I can implement this `reverse_rows_and_columns`.",
    "created_at": "2017-05-22T07:01:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340556",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@kwankyu](#comment%3A5):
> > 3) Does `hermite_form_reversed` just the transposed of the hermite form of the transposed matrix or with respect to row/column ordering? If so, you can just remove the method (one can apply some permutations of entries first and then call the standard algorithm). If not, you should clarify the documentation.

> 
> The output of `hermite_form_reversed` for matrix X is the row-and-column-reversed matrix of the hermite_form of the row-and-column-reversed matrix of X. So you are right that `hermite_form_reversed` can be implemented with the standard hermite form algorithm and some reversals of entries. 
> 
> The issue is speed. I have an application for which reversed hermite forms are natural, and it is crucial to have this algorithm as fast as possible. I cannot lose any time in reversing entries. For me, I would rather keep `hermite_form_reversed` and make `hermite_form` do the reversals! But should I?

Reversing the entries will definitely not be time critical (zero copy, it is just swapping some pointers). The algorithm will spend much more time doing polynomial divisions. Am I correct that you call the row-and-column reversed matrix `(i,j) -> m[nrows - i - 1, ncols - j - 1]`?

If I had to choose I would implement only `hermite_form` and do in your algorithm

```
my_matrix.reverse_rows_and_columns()
hnf = my_matrix.hermite_form()
my_matrix.reverse_rows_and_columns()  # put back the matrix in the right order
```
If you need help, I can implement this `reverse_rows_and_columns`.



---

archive/issue_comments_340557.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@videlec](#comment%3A6): \n> Reversing the entries will definitely not be time critical (zero copy, it is just swapping some pointers). The algorithm will spend much more time doing polynomial divisions. \n\nI know. I once experimented with that row-and-column reversing. At that time, I was obsessed with timings and could not afford even that small time losing in reversing. My application computes lots of reversed hermite form. Here it is\n\nhttps://trac.sagemath.org/ticket/22982\n\nif you are interested.\n\n> Am I correct that you call the row-and-column reversed matrix `(i,j) -> m[nrows - i - 1, ncols - j - 1]`?\n\nYes.\n\n> If I had to choose I would implement only `hermite_form` and do in your algorithm\n> \n> ```\n> my_matrix.reverse_rows_and_columns()\n> hnf = my_matrix.hermite_form()\n> my_matrix.reverse_rows_and_columns()  # put back the matrix in the right order\n> ```\n\nI understand your concern; it is a burden to keep two versions of essentially the same algorithm. Hmm. Now that I am out of that timing obsession, I will check again if I can live with only the standard hermite form. \n\n> If you need help, I can implement this `reverse_rows_and_columns`.\n\nCan you think of an implementation simpler or faster than this?\n\n```\ndef reverse_rows_and_columns(m):\n    return matrix([e for e in reversed(m.list())])\n```",
    "created_at": "2017-05-22T07:25:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340557",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@videlec](#comment%3A6): 
> Reversing the entries will definitely not be time critical (zero copy, it is just swapping some pointers). The algorithm will spend much more time doing polynomial divisions. 

I know. I once experimented with that row-and-column reversing. At that time, I was obsessed with timings and could not afford even that small time losing in reversing. My application computes lots of reversed hermite form. Here it is

https://trac.sagemath.org/ticket/22982

if you are interested.

> Am I correct that you call the row-and-column reversed matrix `(i,j) -> m[nrows - i - 1, ncols - j - 1]`?

Yes.

> If I had to choose I would implement only `hermite_form` and do in your algorithm
> 
> ```
> my_matrix.reverse_rows_and_columns()
> hnf = my_matrix.hermite_form()
> my_matrix.reverse_rows_and_columns()  # put back the matrix in the right order
> ```

I understand your concern; it is a burden to keep two versions of essentially the same algorithm. Hmm. Now that I am out of that timing obsession, I will check again if I can live with only the standard hermite form. 

> If you need help, I can implement this `reverse_rows_and_columns`.

Can you think of an implementation simpler or faster than this?

```
def reverse_rows_and_columns(m):
    return matrix([e for e in reversed(m.list())])
```



---

archive/issue_comments_340558.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@kwankyu](#comment%3A7):\n> Replying to [@videlec](#comment%3A6): \n> Can you think of an implementation simpler or faster than this?\n> \n> ```\n> def reverse_rows_and_columns(m):\n>     return matrix([e for e in reversed(m.list())])\n> ```\n\nOf course! This is damn slow (and makes a copy).",
    "created_at": "2017-05-22T07:29:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340558",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@kwankyu](#comment%3A7):
> Replying to [@videlec](#comment%3A6): 
> Can you think of an implementation simpler or faster than this?
> 
> ```
> def reverse_rows_and_columns(m):
>     return matrix([e for e in reversed(m.list())])
> ```

Of course! This is damn slow (and makes a copy).



---

archive/issue_comments_340559.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@videlec](#comment%3A8):\n> Replying to [@kwankyu](#comment%3A7):\n> > Replying to [@videlec](#comment%3A6): \n> > Can you think of an implementation simpler or faster than this?\n> > \n> > ```\n> > def reverse_rows_and_columns(m):\n> >     return matrix([e for e in reversed(m.list())])\n> > ```\n\n> \n> Of course! This is damn slow (and makes a copy).\n\nSee #23050.",
    "created_at": "2017-05-22T08:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340559",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@videlec](#comment%3A8):
> Replying to [@kwankyu](#comment%3A7):
> > Replying to [@videlec](#comment%3A6): 
> > Can you think of an implementation simpler or faster than this?
> > 
> > ```
> > def reverse_rows_and_columns(m):
> >     return matrix([e for e in reversed(m.list())])
> > ```

> 
> Of course! This is damn slow (and makes a copy).

See #23050.



---

archive/issue_comments_340560.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAnd for timings\n\n```\nsage: m = random_matrix(ZZ['x'], 10, 10)\nsage: %timeit m.reverse_rows_and_columns()\n10000000 loops, best of 3: 100 ns per loop\n\nsage: m = random_matrix(ZZ['x'], 100, 100)\nsage: %timeit m.reverse_rows_and_columns()\n100000 loops, best of 3: 3.76 \u00b5s per loop\n```",
    "created_at": "2017-05-22T08:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340560",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

And for timings

```
sage: m = random_matrix(ZZ['x'], 10, 10)
sage: %timeit m.reverse_rows_and_columns()
10000000 loops, best of 3: 100 ns per loop

sage: m = random_matrix(ZZ['x'], 100, 100)
sage: %timeit m.reverse_rows_and_columns()
100000 loops, best of 3: 3.76 µs per loop
```



---

archive/issue_comments_340561.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nYour version with the function is 2000x slower for 10x10 matrices!",
    "created_at": "2017-05-22T08:09:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340561",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">comment:11</div>

Your version with the function is 2000x slower for 10x10 matrices!



---

archive/issue_comments_340562.json:
```json
{
    "body": "Changed commit from **[`43f328f`](https://github.com/sagemath/sagetrac-mirror/commit/43f328f449ba41b0cbc6ad90482d25afa002fbf8)** to **[`b292fb2`](https://github.com/sagemath/sagetrac-mirror/commit/b292fb22228832be2ea608ab7937d453cda93e3e)**",
    "created_at": "2017-05-22T21:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340562",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`43f328f`](https://github.com/sagemath/sagetrac-mirror/commit/43f328f449ba41b0cbc6ad90482d25afa002fbf8)** to **[`b292fb2`](https://github.com/sagemath/sagetrac-mirror/commit/b292fb22228832be2ea608ab7937d453cda93e3e)**



---

archive/issue_comments_340563.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6d576440098234232903da4b6477a4d29740320\"><code>c6d5764</code></a></td><td><code>Merge branch 'develop'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbfaeaae1b7ca33276a4278ad4c58cd5e57d675a\"><code>dbfaeaa</code></a></td><td><code>23050: reverse_rows_and_columns</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/526e662f78a46ba5c66787ca5ff91531421ff090\"><code>526e662</code></a></td><td><code>Merge trac23050</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b292fb22228832be2ea608ab7937d453cda93e3e\"><code>b292fb2</code></a></td><td><code>Use reverse_rows_and_columns</code></td></tr></table>\n",
    "created_at": "2017-05-22T21:52:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340563",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6d576440098234232903da4b6477a4d29740320"><code>c6d5764</code></a></td><td><code>Merge branch 'develop'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbfaeaae1b7ca33276a4278ad4c58cd5e57d675a"><code>dbfaeaa</code></a></td><td><code>23050: reverse_rows_and_columns</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/526e662f78a46ba5c66787ca5ff91531421ff090"><code>526e662</code></a></td><td><code>Merge trac23050</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b292fb22228832be2ea608ab7937d453cda93e3e"><code>b292fb2</code></a></td><td><code>Use reverse_rows_and_columns</code></td></tr></table>




---

archive/issue_comments_340564.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nSome timings\n\nBefore the patch:\n\n```\nsage: P.<x> = GF(5)[]\nsage: m = matrix(P,5,[x^((i-j) % 5) + i for i in range(5) for j in range(5)])\nsage: timeit('m.weak_popov_form()')\n625 loops, best of 3: 54.4 \u00b5s per loop\nsage: timeit('m.hermite_form()')\n125 loops, best of 3: 2.49 ms per loop\n```\n\nAfter the patch:\n\n```\nsage: P.<x> = GF(5)[]\nsage: m = matrix(P,5,[x^((i-j) % 5) + i for i in range(5) for j in range(5)])\nsage: timeit('m.weak_popov_form()')\n625 loops, best of 3: 5.17 \u00b5s per loop\nsage: timeit('m.hermite_form()')\n625 loops, best of 3: 171 \u00b5s per loop\n```",
    "created_at": "2017-05-22T22:02:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340564",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:13" align="right">comment:13</div>

Some timings

Before the patch:

```
sage: P.<x> = GF(5)[]
sage: m = matrix(P,5,[x^((i-j) % 5) + i for i in range(5) for j in range(5)])
sage: timeit('m.weak_popov_form()')
625 loops, best of 3: 54.4 µs per loop
sage: timeit('m.hermite_form()')
125 loops, best of 3: 2.49 ms per loop
```

After the patch:

```
sage: P.<x> = GF(5)[]
sage: m = matrix(P,5,[x^((i-j) % 5) + i for i in range(5) for j in range(5)])
sage: timeit('m.weak_popov_form()')
625 loops, best of 3: 5.17 µs per loop
sage: timeit('m.hermite_form()')
625 loops, best of 3: 171 µs per loop
```



---

archive/issue_comments_340565.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nMore timings for a larger matrix:\n\nBefore the patch:\n\n```\nsage: P.<x> = GF(5)[]\nsage: m = matrix(P,50,[x^((i-j) % 20) + i for i in range(50) for j in range(50)])\nsage: timeit('m.hermite_form()')\n... (seemingly takes forever; interrupted)\nsage: timeit('m.weak_popov_form()')\n125 loops, best of 3: 2.61 ms per loop\n```\n\nAfter the patch:\n\n```\nsage: P.<x> = GF(5)[]\nsage: m = matrix(P,50,[x^((i-j) % 20) + i for i in range(50) for j in range(50)])\nsage: timeit('m.hermite_form()')\n5 loops, best of 3: 116 ms per loop\nsage: timeit('m.weak_popov_form()')\n625 loops, best of 3: 1.61 ms per loop\n```",
    "created_at": "2017-05-22T22:11:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340565",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:14" align="right">comment:14</div>

More timings for a larger matrix:

Before the patch:

```
sage: P.<x> = GF(5)[]
sage: m = matrix(P,50,[x^((i-j) % 20) + i for i in range(50) for j in range(50)])
sage: timeit('m.hermite_form()')
... (seemingly takes forever; interrupted)
sage: timeit('m.weak_popov_form()')
125 loops, best of 3: 2.61 ms per loop
```

After the patch:

```
sage: P.<x> = GF(5)[]
sage: m = matrix(P,50,[x^((i-j) % 20) + i for i in range(50) for j in range(50)])
sage: timeit('m.hermite_form()')
5 loops, best of 3: 116 ms per loop
sage: timeit('m.weak_popov_form()')
625 loops, best of 3: 1.61 ms per loop
```



---

archive/issue_comments_340566.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n> 1) Why these new methods are cpdef? \n\nNow they are `def` methods.\n\n> 2) You can use `if shifts` instead of `if shift` anywhere.\n\nThat will incur many useless conversions (from a list to a boolean). I kept `shift` but reshaped the code slightly to be less confusing, hopefully.\n \n> 4) As far as I can see, most of the code in `_hermite_form_euclidean` is not polynomial specific but would work as soon as you have `xgcd`. The only missing piece is the normalization to monic polynomial. Am I right? In that case, it would be good to have this code available more generally.\n\nTrue. But for that, the normalization part should be removed, and I am not interested in doing this work myself. I want to leave this work to a separate ticket and to others.\n> \n> 5) Instead of ...\n\nDone. Thanks.\n\n> 7) You claim that there is a speed up. Could you provide some relevant timings?\n\nDone.\n \n> 8) Please fill the \"Authors\" field of the ticket with your full name\n\nDone.",
    "created_at": "2017-05-22T22:26:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340566",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:15" align="right">comment:15</div>

> 1) Why these new methods are cpdef? 

Now they are `def` methods.

> 2) You can use `if shifts` instead of `if shift` anywhere.

That will incur many useless conversions (from a list to a boolean). I kept `shift` but reshaped the code slightly to be less confusing, hopefully.
 
> 4) As far as I can see, most of the code in `_hermite_form_euclidean` is not polynomial specific but would work as soon as you have `xgcd`. The only missing piece is the normalization to monic polynomial. Am I right? In that case, it would be good to have this code available more generally.

True. But for that, the normalization part should be removed, and I am not interested in doing this work myself. I want to leave this work to a separate ticket and to others.
> 
> 5) Instead of ...

Done. Thanks.

> 7) You claim that there is a speed up. Could you provide some relevant timings?

Done.
 
> 8) Please fill the "Authors" field of the ticket with your full name

Done.



---

archive/issue_comments_340567.json:
```json
{
    "body": "Author: **Kwankyu Lee**",
    "created_at": "2017-05-22T22:26:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340567",
    "user": "https://github.com/kwankyu"
}
```

Author: **Kwankyu Lee**



---

archive/issue_comments_340568.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices. A new reversed Hermite normal form method is added; This is useful for some applications.\n+\n+Dependency:  #23050 (merged to the patch)\n``````\n",
    "created_at": "2017-05-22T22:29:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340568",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices. A new reversed Hermite normal form method is added; This is useful for some applications.
+
+Dependency:  #23050 (merged to the patch)
``````




---

archive/issue_comments_340569.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nAFAIK, there is no penalty for making a method `cpdef`, but there could be a benefit for those times it does get called though a C codepath. IIRC, it also means it gets to call `cdef` functions as C functions without some extra. Vincent, is there a reason I don't know about for not making these `cpdef`? There also looks like there are some other variables that you could explicitly declare their types.\n\nThis is not true:\n\n```\nboolean (default: ``None``) A tuple or list of integers\n```\nAlso, the boolean check of, e.g., a list should be very quick and insignificant in terms of speed, but it can make the code easier to maintain in the long run.\n\nSomething I have found that I wish Python would do is return the object even when you do something that mutates it. This allows you to chain operations together in a more natural way, e.g.,\n\n```\nM._weak_popov_form().transpose()\n```",
    "created_at": "2017-05-23T04:20:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340569",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:17" align="right">comment:17</div>

AFAIK, there is no penalty for making a method `cpdef`, but there could be a benefit for those times it does get called though a C codepath. IIRC, it also means it gets to call `cdef` functions as C functions without some extra. Vincent, is there a reason I don't know about for not making these `cpdef`? There also looks like there are some other variables that you could explicitly declare their types.

This is not true:

```
boolean (default: ``None``) A tuple or list of integers
```
Also, the boolean check of, e.g., a list should be very quick and insignificant in terms of speed, but it can make the code easier to maintain in the long run.

Something I have found that I wish Python would do is return the object even when you do something that mutates it. This allows you to chain operations together in a more natural way, e.g.,

```
M._weak_popov_form().transpose()
```



---

archive/issue_comments_340570.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@tscrim](#comment%3A17):\n> AFAIK, there is no penalty for making a method `cpdef`, but there could be a benefit for those times it does get called though a C codepath. IIRC, it also means it gets to call `cdef` functions as C functions without some extra. Vincent, is there a reason I don't know about for not making these `cpdef`? \n\n-1 the time is not spent in the function call. It is an extra complication for no use. If the code can stay simpler keep it simpler.\n\n> There also looks like there are some other variables that you could explicitly declare their types.\n\n+1\n\n> Also, the boolean check of, e.g., a list should be very quick and insignificant in terms of speed, but it can make the code easier to maintain in the long run.\n\n+1. There is no such thing as a conversion. `if my_list` is as fast as it can be. Anyway, if you seriously care about speed, this is not the kind of things you want to optimize.",
    "created_at": "2017-05-23T06:41:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340570",
    "user": "https://github.com/videlec"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@tscrim](#comment%3A17):
> AFAIK, there is no penalty for making a method `cpdef`, but there could be a benefit for those times it does get called though a C codepath. IIRC, it also means it gets to call `cdef` functions as C functions without some extra. Vincent, is there a reason I don't know about for not making these `cpdef`? 

-1 the time is not spent in the function call. It is an extra complication for no use. If the code can stay simpler keep it simpler.

> There also looks like there are some other variables that you could explicitly declare their types.

+1

> Also, the boolean check of, e.g., a list should be very quick and insignificant in terms of speed, but it can make the code easier to maintain in the long run.

+1. There is no such thing as a conversion. `if my_list` is as fast as it can be. Anyway, if you seriously care about speed, this is not the kind of things you want to optimize.



---

archive/issue_comments_340571.json:
```json
{
    "body": "Changed commit from **[`b292fb2`](https://github.com/sagemath/sagetrac-mirror/commit/b292fb22228832be2ea608ab7937d453cda93e3e)** to **[`df8ce31`](https://github.com/sagemath/sagetrac-mirror/commit/df8ce31f3970e68b7f7b2510ef4882c361fe90db)**",
    "created_at": "2017-05-23T16:09:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340571",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b292fb2`](https://github.com/sagemath/sagetrac-mirror/commit/b292fb22228832be2ea608ab7937d453cda93e3e)** to **[`df8ce31`](https://github.com/sagemath/sagetrac-mirror/commit/df8ce31f3970e68b7f7b2510ef4882c361fe90db)**



---

archive/issue_comments_340572.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df8ce31f3970e68b7f7b2510ef4882c361fe90db\"><code>df8ce31</code></a></td><td><code>Fixes in docstrings and code</code></td></tr></table>\n",
    "created_at": "2017-05-23T16:09:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340572",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df8ce31f3970e68b7f7b2510ef4882c361fe90db"><code>df8ce31</code></a></td><td><code>Fixes in docstrings and code</code></td></tr></table>




---

archive/issue_events_315943.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-05-23T16:11:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315943"
}
```



---

archive/issue_events_315944.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-05-23T16:11:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315944"
}
```



---

archive/issue_comments_340573.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices. A new reversed Hermite normal form method is added; This is useful for some applications.\n \n-Dependency:  #23050 (merged to the patch)\n+Depends:  #23050 (merged to the patch)\n``````\n",
    "created_at": "2017-05-23T16:11:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340573",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices. A new reversed Hermite normal form method is added; This is useful for some applications.
 
-Dependency:  #23050 (merged to the patch)
+Depends:  #23050 (merged to the patch)
``````




---

archive/issue_comments_340574.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThere is a field \"Dependencies\" in the ticket for dependencies...",
    "created_at": "2017-05-23T16:12:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340574",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">comment:21</div>

There is a field "Dependencies" in the ticket for dependencies...



---

archive/issue_comments_340575.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices. A new reversed Hermite normal form method is added; This is useful for some applications.\n-\n-Depends:  #23050 (merged to the patch)\n``````\n",
    "created_at": "2017-05-23T16:12:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340575",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1 @@
 This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices. A new reversed Hermite normal form method is added; This is useful for some applications.
-
-Depends:  #23050 (merged to the patch)
``````




---

archive/issue_comments_340576.json:
```json
{
    "body": "Dependencies: **#23050**",
    "created_at": "2017-05-23T16:12:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340576",
    "user": "https://github.com/videlec"
}
```

Dependencies: **#23050**



---

archive/issue_comments_340577.json:
```json
{
    "body": "Changed commit from **[`df8ce31`](https://github.com/sagemath/sagetrac-mirror/commit/df8ce31f3970e68b7f7b2510ef4882c361fe90db)** to **[`0e57cc1`](https://github.com/sagemath/sagetrac-mirror/commit/0e57cc168cdbbb91b3deed3c9fc52a4ad267c747)**",
    "created_at": "2017-05-23T16:25:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340577",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`df8ce31`](https://github.com/sagemath/sagetrac-mirror/commit/df8ce31f3970e68b7f7b2510ef4882c361fe90db)** to **[`0e57cc1`](https://github.com/sagemath/sagetrac-mirror/commit/0e57cc168cdbbb91b3deed3c9fc52a4ad267c747)**



---

archive/issue_comments_340578.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e57cc168cdbbb91b3deed3c9fc52a4ad267c747\"><code>0e57cc1</code></a></td><td><code>Improve docstrings</code></td></tr></table>\n",
    "created_at": "2017-05-23T16:25:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340578",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e57cc168cdbbb91b3deed3c9fc52a4ad267c747"><code>0e57cc1</code></a></td><td><code>Improve docstrings</code></td></tr></table>




---

archive/issue_comments_340579.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@videlec](#comment%3A4):\n\n> 4) As far as I can see, most of the code in `_hermite_form_euclidean` is not polynomial specific but would work as soon as you have `xgcd`. The only missing piece is the normalization to monic polynomial. Am I right? In that case, it would be good to have this code available more generally.\n\nMy previous response to this comment was somewhat adequate. I now try to answer again.\n\nI didn't want to put the code into a more general place like `matrix2.pyx`, because that would incur some condition checking for every call of `hermite_form`.  It was just clean to put the code into the file dedicated for polynomial matrices. \n\nNow it occurs to me that putting just `_hermite_form_euclidean` to `matrix2.pyx` (but keeping `hermite_form` to the present place) may not hurt. The normalization code depending on `lc()` may be put into a `try` clause. Then  the `_hermite_form_euclidean` could be used to provide `hermite_form()` for matrices for other euclidean domains, in future.\n\nIf you agree, then I can do this part: putting `_hermite_form_euclidean` to `matrix2.pyx`. But I will leave it as a future task to to provide `hermite_form()` for matrices for other euclidean domains (though I cannot imagine what these would be in practice right now...).\n\nPerhaps this was in your mind when you wrote the comment :-)",
    "created_at": "2017-05-23T21:04:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340579",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@videlec](#comment%3A4):

> 4) As far as I can see, most of the code in `_hermite_form_euclidean` is not polynomial specific but would work as soon as you have `xgcd`. The only missing piece is the normalization to monic polynomial. Am I right? In that case, it would be good to have this code available more generally.

My previous response to this comment was somewhat adequate. I now try to answer again.

I didn't want to put the code into a more general place like `matrix2.pyx`, because that would incur some condition checking for every call of `hermite_form`.  It was just clean to put the code into the file dedicated for polynomial matrices. 

Now it occurs to me that putting just `_hermite_form_euclidean` to `matrix2.pyx` (but keeping `hermite_form` to the present place) may not hurt. The normalization code depending on `lc()` may be put into a `try` clause. Then  the `_hermite_form_euclidean` could be used to provide `hermite_form()` for matrices for other euclidean domains, in future.

If you agree, then I can do this part: putting `_hermite_form_euclidean` to `matrix2.pyx`. But I will leave it as a future task to to provide `hermite_form()` for matrices for other euclidean domains (though I cannot imagine what these would be in practice right now...).

Perhaps this was in your mind when you wrote the comment :-)



---

archive/issue_events_315945.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-05-24T10:25:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315945"
}
```



---

archive/issue_events_315946.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-05-24T10:25:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315946"
}
```



---

archive/issue_comments_340580.json:
```json
{
    "body": "Changed commit from **[`0e57cc1`](https://github.com/sagemath/sagetrac-mirror/commit/0e57cc168cdbbb91b3deed3c9fc52a4ad267c747)** to **[`1894770`](https://github.com/sagemath/sagetrac-mirror/commit/18947702b3e4a92a94016d16595a6d4ffc541485)**",
    "created_at": "2017-05-24T11:57:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340580",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0e57cc1`](https://github.com/sagemath/sagetrac-mirror/commit/0e57cc168cdbbb91b3deed3c9fc52a4ad267c747)** to **[`1894770`](https://github.com/sagemath/sagetrac-mirror/commit/18947702b3e4a92a94016d16595a6d4ffc541485)**



---

archive/issue_comments_340581.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad9a8c4dc3d28af515621abf7cec92b3fff52279\"><code>ad9a8c4</code></a></td><td><code>Fix a bug in include_zero_rows</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18947702b3e4a92a94016d16595a6d4ffc541485\"><code>1894770</code></a></td><td><code>Relocate _hermite_form_euclidean</code></td></tr></table>\n",
    "created_at": "2017-05-24T11:57:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340581",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad9a8c4dc3d28af515621abf7cec92b3fff52279"><code>ad9a8c4</code></a></td><td><code>Fix a bug in include_zero_rows</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18947702b3e4a92a94016d16595a6d4ffc541485"><code>1894770</code></a></td><td><code>Relocate _hermite_form_euclidean</code></td></tr></table>




---

archive/issue_comments_340582.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\n> I can do this part: putting `_hermite_form_euclidean` to `matrix2.pyx`. \n\nDone.",
    "created_at": "2017-05-24T12:00:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340582",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:26" align="right">comment:26</div>

> I can do this part: putting `_hermite_form_euclidean` to `matrix2.pyx`. 

Done.



---

archive/issue_events_315947.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-05-24T12:00:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315947"
}
```



---

archive/issue_events_315948.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-05-24T12:00:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315948"
}
```



---

archive/issue_comments_340583.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI don't mind that you move `_hermite_form_euclidean`. But if you do, it must be tested with other base rings than polynomials. My question was more of a prospective form (Hermite form is useful to study submodules and quotients of free modules).",
    "created_at": "2017-05-24T13:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340583",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">comment:28</div>

I don't mind that you move `_hermite_form_euclidean`. But if you do, it must be tested with other base rings than polynomials. My question was more of a prospective form (Hermite form is useful to study submodules and quotients of free modules).



---

archive/issue_comments_340584.json:
```json
{
    "body": "Changed commit from **[`1894770`](https://github.com/sagemath/sagetrac-mirror/commit/18947702b3e4a92a94016d16595a6d4ffc541485)** to **[`bf6b339`](https://github.com/sagemath/sagetrac-mirror/commit/bf6b339ed98c37f6c72a4dac7e737dc26fd7b735)**",
    "created_at": "2017-05-24T16:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340584",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1894770`](https://github.com/sagemath/sagetrac-mirror/commit/18947702b3e4a92a94016d16595a6d4ffc541485)** to **[`bf6b339`](https://github.com/sagemath/sagetrac-mirror/commit/bf6b339ed98c37f6c72a4dac7e737dc26fd7b735)**



---

archive/issue_comments_340585.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf6b339ed98c37f6c72a4dac7e737dc26fd7b735\"><code>bf6b339</code></a></td><td><code>Fix a bug; add an example for ZZ</code></td></tr></table>\n",
    "created_at": "2017-05-24T16:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340585",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf6b339ed98c37f6c72a4dac7e737dc26fd7b735"><code>bf6b339</code></a></td><td><code>Fix a bug; add an example for ZZ</code></td></tr></table>




---

archive/issue_comments_340586.json:
```json
{
    "body": "Changed commit from **[`bf6b339`](https://github.com/sagemath/sagetrac-mirror/commit/bf6b339ed98c37f6c72a4dac7e737dc26fd7b735)** to **[`464f6de`](https://github.com/sagemath/sagetrac-mirror/commit/464f6de96ebb39c48de7692fe99e51b9e102dd56)**",
    "created_at": "2017-05-26T17:42:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340586",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bf6b339`](https://github.com/sagemath/sagetrac-mirror/commit/bf6b339ed98c37f6c72a4dac7e737dc26fd7b735)** to **[`464f6de`](https://github.com/sagemath/sagetrac-mirror/commit/464f6de96ebb39c48de7692fe99e51b9e102dd56)**



---

archive/issue_comments_340587.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/464f6de96ebb39c48de7692fe99e51b9e102dd56\"><code>464f6de</code></a></td><td><code>Fix a docstring failure</code></td></tr></table>\n",
    "created_at": "2017-05-26T17:42:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340587",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/464f6de96ebb39c48de7692fe99e51b9e102dd56"><code>464f6de</code></a></td><td><code>Fix a docstring failure</code></td></tr></table>




---

archive/issue_comments_340588.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nIs there a need for both `hermite_form_reversed` and `_reversed_hermite_form_euclidean`?",
    "created_at": "2017-05-29T14:10:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340588",
    "user": "https://github.com/videlec"
}
```

<div id="comment:31" align="right">comment:31</div>

Is there a need for both `hermite_form_reversed` and `_reversed_hermite_form_euclidean`?



---

archive/issue_comments_340589.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nWould be more natural to replace\n\n```\nfor c in range(j,n):\n    temp = A.get_unsafe(k,c)\n    A.set_unsafe(k, c, p * A.get_unsafe(k,c) + q * A.get_unsafe(l,c))\n    A.set_unsafe(l, c, (-f) * temp + e * A.get_unsafe(l,c))\n```\nwith\n\n```\nfor c in range(j,n):\n    Akc = A.get_unsafe(k,c)\n    Alc = A.get_unsafe(l,c)\n    A.set_unsafe(k, c, p * Akc + q * Alc)\n    A.set_unsafe(l, c, -f * Akc + e * Alc)\n```",
    "created_at": "2017-05-29T14:16:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340589",
    "user": "https://github.com/videlec"
}
```

<div id="comment:32" align="right">comment:32</div>

Would be more natural to replace

```
for c in range(j,n):
    temp = A.get_unsafe(k,c)
    A.set_unsafe(k, c, p * A.get_unsafe(k,c) + q * A.get_unsafe(l,c))
    A.set_unsafe(l, c, (-f) * temp + e * A.get_unsafe(l,c))
```
with

```
for c in range(j,n):
    Akc = A.get_unsafe(k,c)
    Alc = A.get_unsafe(l,c)
    A.set_unsafe(k, c, p * Akc + q * Alc)
    A.set_unsafe(l, c, -f * Akc + e * Alc)
```



---

archive/issue_comments_340590.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@videlec](#comment%3A31):\n> Is there a need for both `hermite_form_reversed` and `_reversed_hermite_form_euclidean`?\n\nAs you see, `hermite_form_reversed` returns a new matrix from self while `_reversed_hermite_form_euclidean` transforms self in place. This is obvious. Did I understand your question correctly?",
    "created_at": "2017-05-29T15:52:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340590",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@videlec](#comment%3A31):
> Is there a need for both `hermite_form_reversed` and `_reversed_hermite_form_euclidean`?

As you see, `hermite_form_reversed` returns a new matrix from self while `_reversed_hermite_form_euclidean` transforms self in place. This is obvious. Did I understand your question correctly?



---

archive/issue_comments_340591.json:
```json
{
    "body": "Changed commit from **[`464f6de`](https://github.com/sagemath/sagetrac-mirror/commit/464f6de96ebb39c48de7692fe99e51b9e102dd56)** to **[`268f049`](https://github.com/sagemath/sagetrac-mirror/commit/268f0496526863744448efa06049a679d6653e6a)**",
    "created_at": "2017-05-29T16:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340591",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`464f6de`](https://github.com/sagemath/sagetrac-mirror/commit/464f6de96ebb39c48de7692fe99e51b9e102dd56)** to **[`268f049`](https://github.com/sagemath/sagetrac-mirror/commit/268f0496526863744448efa06049a679d6653e6a)**



---

archive/issue_comments_340592.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/734c862bc966e357e86f09eb6aeb5c8685ddc091\"><code>734c862</code></a></td><td><code>Merge branch 'develop' into hermite_trac22841</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/268f0496526863744448efa06049a679d6653e6a\"><code>268f049</code></a></td><td><code>Compute U also by low level operations</code></td></tr></table>\n",
    "created_at": "2017-05-29T16:29:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340592",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/734c862bc966e357e86f09eb6aeb5c8685ddc091"><code>734c862</code></a></td><td><code>Merge branch 'develop' into hermite_trac22841</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/268f0496526863744448efa06049a679d6653e6a"><code>268f049</code></a></td><td><code>Compute U also by low level operations</code></td></tr></table>




---

archive/issue_comments_340593.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nFurther gain by the last commit:\n\n```\nsage: P.<x> = GF(5)[]\nsage: m = matrix(5,[(x+i)^((i-j)%7) for i in range(5) for j in range(5)])\nsage: timeit('m.hermite_form_reversed(transformation=True)')\n625 loops, best of 3: 957 \u00b5s per loop\n```\n\nvs\n\n```\nsage: P.<x> = GF(5)[]\nsage: m = matrix(5,[(x+i)^((i-j)%7) for i in range(5) for j in range(5)])\nsage: timeit('m.hermite_form_reversed(transformation=True)')\n625 loops, best of 3: 431 \u00b5s per loop\n```",
    "created_at": "2017-05-29T16:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340593",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:35" align="right">comment:35</div>

Further gain by the last commit:

```
sage: P.<x> = GF(5)[]
sage: m = matrix(5,[(x+i)^((i-j)%7) for i in range(5) for j in range(5)])
sage: timeit('m.hermite_form_reversed(transformation=True)')
625 loops, best of 3: 957 µs per loop
```

vs

```
sage: P.<x> = GF(5)[]
sage: m = matrix(5,[(x+i)^((i-j)%7) for i in range(5) for j in range(5)])
sage: timeit('m.hermite_form_reversed(transformation=True)')
625 loops, best of 3: 431 µs per loop
```



---

archive/issue_comments_340594.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@videlec](#comment%3A31):\n> Is there a need for both `hermite_form_reversed` and `_reversed_hermite_form_euclidean`?\n\nAre you asking if I can get rid of both of those methods from the patch (and implement them in my own application for personal use)?",
    "created_at": "2017-05-30T16:07:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340594",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@videlec](#comment%3A31):
> Is there a need for both `hermite_form_reversed` and `_reversed_hermite_form_euclidean`?

Are you asking if I can get rid of both of those methods from the patch (and implement them in my own application for personal use)?



---

archive/issue_comments_340595.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4cd0abc75bc4f8e3ad21c7f9667f86ce1ce40a22\"><code>4cd0abc</code></a></td><td><code>Merge branch 'develop' into hermite_trac22841</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a96c3be03c0dc64510048858b9b6d4150eb10ac0\"><code>a96c3be</code></a></td><td><code>Remove reversed hermite form methods</code></td></tr></table>\n",
    "created_at": "2017-06-02T08:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340595",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4cd0abc75bc4f8e3ad21c7f9667f86ce1ce40a22"><code>4cd0abc</code></a></td><td><code>Merge branch 'develop' into hermite_trac22841</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a96c3be03c0dc64510048858b9b6d4150eb10ac0"><code>a96c3be</code></a></td><td><code>Remove reversed hermite form methods</code></td></tr></table>




---

archive/issue_comments_340596.json:
```json
{
    "body": "Changed commit from **[`268f049`](https://github.com/sagemath/sagetrac-mirror/commit/268f0496526863744448efa06049a679d6653e6a)** to **[`a96c3be`](https://github.com/sagemath/sagetrac-mirror/commit/a96c3be03c0dc64510048858b9b6d4150eb10ac0)**",
    "created_at": "2017-06-02T08:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340596",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`268f049`](https://github.com/sagemath/sagetrac-mirror/commit/268f0496526863744448efa06049a679d6653e6a)** to **[`a96c3be`](https://github.com/sagemath/sagetrac-mirror/commit/a96c3be03c0dc64510048858b9b6d4150eb10ac0)**



---

archive/issue_comments_340597.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices. A new reversed Hermite normal form method is added; This is useful for some applications.\n+This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices. \n``````\n",
    "created_at": "2017-06-02T08:49:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340597",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices. A new reversed Hermite normal form method is added; This is useful for some applications.
+This ticket provides faster Hermite normal form and weak Popov form computations for polynomial matrices. 
``````




---

archive/issue_comments_340598.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@kwankyu](#comment%3A36):\n> Replying to [@videlec](#comment%3A31):\n> > Is there a need for both `hermite_form_reversed` and `_reversed_hermite_form_euclidean`?\n\n> \n> Are you asking if I can get rid of both of those methods from the patch (and implement them in my own application for personal use)?\n\nPerhaps, the reversed hermite form methods have little use, except to me. I removed them.",
    "created_at": "2017-06-02T08:59:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340598",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@kwankyu](#comment%3A36):
> Replying to [@videlec](#comment%3A31):
> > Is there a need for both `hermite_form_reversed` and `_reversed_hermite_form_euclidean`?

> 
> Are you asking if I can get rid of both of those methods from the patch (and implement them in my own application for personal use)?

Perhaps, the reversed hermite form methods have little use, except to me. I removed them.



---

archive/issue_comments_340599.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nThe present `hermite_form` method returns an immutable matrix only when `include_zero_rows=False`, because of the side effect of taking `A[:i]`. This raises some questions:\n\n(1) Should `hermite_form` always return an immutable matrix?\n\n(2) `A[:i]` returns an immutable matrix even if A is not? Is this expected or a bug?\n\nIf the answer to (1) is true, then `reversed_hermite_form` cannot be obtained just by wrapping `hermite_form` with `reverse_rows_and_columns` because you cannot \"reverse\" an immutable matrix.",
    "created_at": "2017-06-02T11:59:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340599",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:40" align="right">comment:40</div>

The present `hermite_form` method returns an immutable matrix only when `include_zero_rows=False`, because of the side effect of taking `A[:i]`. This raises some questions:

(1) Should `hermite_form` always return an immutable matrix?

(2) `A[:i]` returns an immutable matrix even if A is not? Is this expected or a bug?

If the answer to (1) is true, then `reversed_hermite_form` cannot be obtained just by wrapping `hermite_form` with `reverse_rows_and_columns` because you cannot "reverse" an immutable matrix.



---

archive/issue_events_315949.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-06-02T11:59:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315949"
}
```



---

archive/issue_events_315950.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-06-02T11:59:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315950"
}
```



---

archive/issue_comments_340600.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThe best would be to follow the conventions of `echelon_form`\n\n```\nsage: m = matrix(QQ, 2, [1, 2, 3, 4])\nsage: h = m.echelon_form()\nsage: h.is_mutable()\nFalse\n```\nSo I would answer yes to (1).\n\nConcerning (2), you can always get a copy using `m.__copy__()`.",
    "created_at": "2017-06-02T14:12:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340600",
    "user": "https://github.com/videlec"
}
```

<div id="comment:42" align="right">comment:42</div>

The best would be to follow the conventions of `echelon_form`

```
sage: m = matrix(QQ, 2, [1, 2, 3, 4])
sage: h = m.echelon_form()
sage: h.is_mutable()
False
```
So I would answer yes to (1).

Concerning (2), you can always get a copy using `m.__copy__()`.



---

archive/issue_comments_340601.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1c82024707e742fdf82cded0e7b61c34fc4a6cb\"><code>f1c8202</code></a></td><td><code>Set hermite form immutable consistently</code></td></tr></table>\n",
    "created_at": "2017-06-02T14:31:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340601",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1c82024707e742fdf82cded0e7b61c34fc4a6cb"><code>f1c8202</code></a></td><td><code>Set hermite form immutable consistently</code></td></tr></table>




---

archive/issue_comments_340602.json:
```json
{
    "body": "Changed commit from **[`a96c3be`](https://github.com/sagemath/sagetrac-mirror/commit/a96c3be03c0dc64510048858b9b6d4150eb10ac0)** to **[`f1c8202`](https://github.com/sagemath/sagetrac-mirror/commit/f1c82024707e742fdf82cded0e7b61c34fc4a6cb)**",
    "created_at": "2017-06-02T14:31:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340602",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a96c3be`](https://github.com/sagemath/sagetrac-mirror/commit/a96c3be03c0dc64510048858b9b6d4150eb10ac0)** to **[`f1c8202`](https://github.com/sagemath/sagetrac-mirror/commit/f1c82024707e742fdf82cded0e7b61c34fc4a6cb)**



---

archive/issue_events_315951.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-06-02T14:33:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315951"
}
```



---

archive/issue_events_315952.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2017-06-02T14:33:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315952"
}
```



---

archive/issue_comments_340603.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI find weird to have this `lc` lying around in the generic implementation. A more appropriate way might be to have an optional `normalize` argument that would be a function\n\n```\ndef _hermite_form_euclidean(self, transformation=False, normalize=None):\n    ...\n    # possibly normlize the pivot\n    if normalize:\n        coeff = normalize(pivot)\n        for c in range(j,n):\n            A.set_unsafe(i, c, A.get_unsafe(i,c) * coeff)\n            if transformation:\n                for c in range(m):\n                    U.set_unsafe(i, c, U.get_unsafe(i,c) * coeff)\n```\nThen it could be used as\n\n```\nif transformation:\n    U = A._hermite_form_euclidean(transformation=True, normalize=lambda p: ~p.lc())\nelse:\n    A._hermite_form_euclidean(transformation=False, normalize=lambda p: ~p.lc())\n```\n\n(I am not really convinced by the name `normalize`)",
    "created_at": "2017-06-03T15:18:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340603",
    "user": "https://github.com/videlec"
}
```

<div id="comment:45" align="right">comment:45</div>

I find weird to have this `lc` lying around in the generic implementation. A more appropriate way might be to have an optional `normalize` argument that would be a function

```
def _hermite_form_euclidean(self, transformation=False, normalize=None):
    ...
    # possibly normlize the pivot
    if normalize:
        coeff = normalize(pivot)
        for c in range(j,n):
            A.set_unsafe(i, c, A.get_unsafe(i,c) * coeff)
            if transformation:
                for c in range(m):
                    U.set_unsafe(i, c, U.get_unsafe(i,c) * coeff)
```
Then it could be used as

```
if transformation:
    U = A._hermite_form_euclidean(transformation=True, normalize=lambda p: ~p.lc())
else:
    A._hermite_form_euclidean(transformation=False, normalize=lambda p: ~p.lc())
```

(I am not really convinced by the name `normalize`)



---

archive/issue_comments_340604.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nIn `_weak_popov_form` you might want to declare as `cdef list` both `to_row` and `conflicts`.",
    "created_at": "2017-06-03T15:19:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340604",
    "user": "https://github.com/videlec"
}
```

<div id="comment:46" align="right">comment:46</div>

In `_weak_popov_form` you might want to declare as `cdef list` both `to_row` and `conflicts`.



---

archive/issue_comments_340605.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c8408f98209debfbb6a337fa2b622fd7994e8f2\"><code>9c8408f</code></a></td><td><code>More static typing and setting immutable</code></td></tr></table>\n",
    "created_at": "2017-06-03T19:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340605",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c8408f98209debfbb6a337fa2b622fd7994e8f2"><code>9c8408f</code></a></td><td><code>More static typing and setting immutable</code></td></tr></table>




---

archive/issue_comments_340606.json:
```json
{
    "body": "Changed commit from **[`f1c8202`](https://github.com/sagemath/sagetrac-mirror/commit/f1c82024707e742fdf82cded0e7b61c34fc4a6cb)** to **[`9c8408f`](https://github.com/sagemath/sagetrac-mirror/commit/9c8408f98209debfbb6a337fa2b622fd7994e8f2)**",
    "created_at": "2017-06-03T19:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340606",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f1c8202`](https://github.com/sagemath/sagetrac-mirror/commit/f1c82024707e742fdf82cded0e7b61c34fc4a6cb)** to **[`9c8408f`](https://github.com/sagemath/sagetrac-mirror/commit/9c8408f98209debfbb6a337fa2b622fd7994e8f2)**



---

archive/issue_comments_340607.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@videlec](#comment%3A46):\n> In `_weak_popov_form` you might want to declare as `cdef list` both `to_row` and `conflicts`.\n\nDone. But I don't notice any difference in speed.",
    "created_at": "2017-06-03T19:40:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340607",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@videlec](#comment%3A46):
> In `_weak_popov_form` you might want to declare as `cdef list` both `to_row` and `conflicts`.

Done. But I don't notice any difference in speed.



---

archive/issue_comments_340608.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d7fd03b11b8ba38ed1348e673f44d38a8df7099\"><code>3d7fd03</code></a></td><td><code>Fix EXAMPLE to EXAMPLES</code></td></tr></table>\n",
    "created_at": "2017-06-06T08:15:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340608",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d7fd03b11b8ba38ed1348e673f44d38a8df7099"><code>3d7fd03</code></a></td><td><code>Fix EXAMPLE to EXAMPLES</code></td></tr></table>




---

archive/issue_comments_340609.json:
```json
{
    "body": "Changed commit from **[`9c8408f`](https://github.com/sagemath/sagetrac-mirror/commit/9c8408f98209debfbb6a337fa2b622fd7994e8f2)** to **[`3d7fd03`](https://github.com/sagemath/sagetrac-mirror/commit/3d7fd03b11b8ba38ed1348e673f44d38a8df7099)**",
    "created_at": "2017-06-06T08:15:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340609",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9c8408f`](https://github.com/sagemath/sagetrac-mirror/commit/9c8408f98209debfbb6a337fa2b622fd7994e8f2)** to **[`3d7fd03`](https://github.com/sagemath/sagetrac-mirror/commit/3d7fd03b11b8ba38ed1348e673f44d38a8df7099)**



---

archive/issue_comments_340610.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nVincent, it would be good that this is merged to Sage 8.0. Is there anything missing yet?",
    "created_at": "2017-06-09T07:36:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340610",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:50" align="right">comment:50</div>

Vincent, it would be good that this is merged to Sage 8.0. Is there anything missing yet?



---

archive/issue_comments_340611.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nYou did not answer to [comment:45](#comment%3A45).",
    "created_at": "2017-06-11T04:47:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340611",
    "user": "https://github.com/videlec"
}
```

<div id="comment:51" align="right">comment:51</div>

You did not answer to [comment:45](#comment%3A45).



---

archive/issue_comments_340612.json:
```json
{
    "body": "Changed commit from **[`3d7fd03`](https://github.com/sagemath/sagetrac-mirror/commit/3d7fd03b11b8ba38ed1348e673f44d38a8df7099)** to **[`ff0b73e`](https://github.com/sagemath/sagetrac-mirror/commit/ff0b73ef797672adb22ed8ae316e0e3b4f6d6c9e)**",
    "created_at": "2017-06-11T07:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340612",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3d7fd03`](https://github.com/sagemath/sagetrac-mirror/commit/3d7fd03b11b8ba38ed1348e673f44d38a8df7099)** to **[`ff0b73e`](https://github.com/sagemath/sagetrac-mirror/commit/ff0b73ef797672adb22ed8ae316e0e3b4f6d6c9e)**



---

archive/issue_comments_340613.json:
```json
{
    "body": "<div id=\"comment:52\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff0b73ef797672adb22ed8ae316e0e3b4f6d6c9e\"><code>ff0b73e</code></a></td><td><code>Improve normalization</code></td></tr></table>\n",
    "created_at": "2017-06-11T07:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340613",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff0b73ef797672adb22ed8ae316e0e3b4f6d6c9e"><code>ff0b73e</code></a></td><td><code>Improve normalization</code></td></tr></table>




---

archive/issue_comments_340614.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@videlec](#comment%3A45):\n> I find weird to have this `lc` lying around in the generic implementation. A more appropriate way might be to have an optional `normalize` argument that would be a function\n\nGood idea. I found one instance where `normalization` is used for a similar purpose. So I use that.",
    "created_at": "2017-06-11T07:39:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340614",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@videlec](#comment%3A45):
> I find weird to have this `lc` lying around in the generic implementation. A more appropriate way might be to have an optional `normalize` argument that would be a function

Good idea. I found one instance where `normalization` is used for a similar purpose. So I use that.



---

archive/issue_comments_340615.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nsmall typo: forgot a `a` in `# possibly normlize the pivot`\n\nA simplification: the following\n\n```\nif transformation:\n    U = A._hermite_form_euclidean(transformation=True, normalization=lambda p: ~p.lc())\nelse:\n    A._hermite_form_euclidean(transformation=False, normalization=lambda p: ~p.lc())\n```\ncould be replaced by\n\n```\nU = A._hermite_form_euclidean(transformation=transformation, normalization=lambda p: ~p.lc())\n```\n(in the second cas `U` will be set to `None` which is fine)",
    "created_at": "2017-06-12T07:33:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340615",
    "user": "https://github.com/videlec"
}
```

<div id="comment:54" align="right">comment:54</div>

small typo: forgot a `a` in `# possibly normlize the pivot`

A simplification: the following

```
if transformation:
    U = A._hermite_form_euclidean(transformation=True, normalization=lambda p: ~p.lc())
else:
    A._hermite_form_euclidean(transformation=False, normalization=lambda p: ~p.lc())
```
could be replaced by

```
U = A._hermite_form_euclidean(transformation=transformation, normalization=lambda p: ~p.lc())
```
(in the second cas `U` will be set to `None` which is fine)



---

archive/issue_comments_340616.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nCould you add an example in `_hermite_form_euclidean` where the argument `normalization` is actually used?",
    "created_at": "2017-06-12T07:34:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340616",
    "user": "https://github.com/videlec"
}
```

<div id="comment:55" align="right">comment:55</div>

Could you add an example in `_hermite_form_euclidean` where the argument `normalization` is actually used?



---

archive/issue_comments_340617.json:
```json
{
    "body": "Changed commit from **[`ff0b73e`](https://github.com/sagemath/sagetrac-mirror/commit/ff0b73ef797672adb22ed8ae316e0e3b4f6d6c9e)** to **[`dd0d065`](https://github.com/sagemath/sagetrac-mirror/commit/dd0d0654cc9a4781aba4643443074853c2f03bce)**",
    "created_at": "2017-06-12T09:42:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340617",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ff0b73e`](https://github.com/sagemath/sagetrac-mirror/commit/ff0b73ef797672adb22ed8ae316e0e3b4f6d6c9e)** to **[`dd0d065`](https://github.com/sagemath/sagetrac-mirror/commit/dd0d0654cc9a4781aba4643443074853c2f03bce)**



---

archive/issue_comments_340618.json:
```json
{
    "body": "<div id=\"comment:56\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d12fd77b2c41bce09852081c0a3155752954e51d\"><code>d12fd77</code></a></td><td><code>Merge branch 'develop' into hermite_trac22841</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd0d0654cc9a4781aba4643443074853c2f03bce\"><code>dd0d065</code></a></td><td><code>Add an example using normalization argument</code></td></tr></table>\n",
    "created_at": "2017-06-12T09:42:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340618",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d12fd77b2c41bce09852081c0a3155752954e51d"><code>d12fd77</code></a></td><td><code>Merge branch 'develop' into hermite_trac22841</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd0d0654cc9a4781aba4643443074853c2f03bce"><code>dd0d065</code></a></td><td><code>Add an example using normalization argument</code></td></tr></table>




---

archive/issue_comments_340619.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\n> A simplification: the following\n> \n> ```\n> if transformation:\n>     U = A._hermite_form_euclidean(transformation=True, normalization=lambda p: ~p.lc())\n> else:\n>     A._hermite_form_euclidean(transformation=False, normalization=lambda p: ~p.lc())\n> ```\n> could be replaced by\n> \n> ```\n> U = A._hermite_form_euclidean(transformation=transformation, normalization=lambda p: ~p.lc())\n> ```\n> (in the second cas `U` will be set to `None` which is fine)\n\nYes, it works. I didn't know this :-)",
    "created_at": "2017-06-12T09:46:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340619",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:57" align="right">comment:57</div>

> A simplification: the following
> 
> ```
> if transformation:
>     U = A._hermite_form_euclidean(transformation=True, normalization=lambda p: ~p.lc())
> else:
>     A._hermite_form_euclidean(transformation=False, normalization=lambda p: ~p.lc())
> ```
> could be replaced by
> 
> ```
> U = A._hermite_form_euclidean(transformation=transformation, normalization=lambda p: ~p.lc())
> ```
> (in the second cas `U` will be set to `None` which is fine)

Yes, it works. I didn't know this :-)



---

archive/issue_comments_340620.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nThe patchbot failures seem unrelated with this patch. I have nothing to do with that. Anything else to do?",
    "created_at": "2017-06-17T23:39:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340620",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:58" align="right">comment:58</div>

The patchbot failures seem unrelated with this patch. I have nothing to do with that. Anything else to do?



---

archive/issue_comments_340621.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nlooks good.",
    "created_at": "2017-06-18T20:37:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340621",
    "user": "https://github.com/videlec"
}
```

<div id="comment:59" align="right">comment:59</div>

looks good.



---

archive/issue_events_315953.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-06-18T20:37:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315953"
}
```



---

archive/issue_events_315954.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-06-18T20:37:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315954"
}
```



---

archive/issue_comments_340622.json:
```json
{
    "body": "Changed branch from **[u/klee/22841](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/22841)** to **[`dd0d065`](https://github.com/sagemath/sagetrac-mirror/commit/dd0d0654cc9a4781aba4643443074853c2f03bce)**",
    "created_at": "2017-06-22T07:23:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22841#issuecomment-340622",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/klee/22841](https://github.com/sagemath/sagetrac-mirror/tree/u/klee/22841)** to **[`dd0d065`](https://github.com/sagemath/sagetrac-mirror/commit/dd0d0654cc9a4781aba4643443074853c2f03bce)**



---

archive/issue_events_315955.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-22T07:23:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315955"
}
```



---

archive/issue_events_315956.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8ee20ec144a5cb1bcacfda20ea326627985743ee",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-06-22T07:23:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22841",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22841#event-315956"
}
```
