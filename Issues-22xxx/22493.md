# Issue 22493: upgrade to MPIR-3.0.0

archive/issues_022256.json:
```json
{
    "assignees": [],
    "body": "New upstream version\n\n    http://mpir.org/mpir-3.0.0.tar.bz2\n\nThis new version requires [yasm](http://yasm.tortall.net/) for assembler code.\n\nDepends on #22748\n\nCC:  @mkoeppe @jdemeyer @vbraun @kiwifb\n\nKeywords: **days84**\n\nBranch: **[01c9097](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)**\n\nReviewer: **Fran\u00e7ois Bissey, Dima Pasechnik**\n\nAuthor: **Vincent Delecroix, Jean-Pierre Flori**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22493_\n\n",
    "closed_at": "2017-05-26T21:28:05Z",
    "created_at": "2017-03-02T15:48:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "upgrade to MPIR-3.0.0",
    "type": "issue",
    "updated_at": "2017-06-27T13:26:16Z",
    "url": "https://github.com/sagemath/sage/issues/22493",
    "user": "https://github.com/videlec"
}
```
New upstream version

    http://mpir.org/mpir-3.0.0.tar.bz2

This new version requires [yasm](http://yasm.tortall.net/) for assembler code.

Depends on #22748

CC:  @mkoeppe @jdemeyer @vbraun @kiwifb

Keywords: **days84**

Branch: **[01c9097](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)**

Reviewer: **Fran√ßois Bissey, Dima Pasechnik**

Author: **Vincent Delecroix, Jean-Pierre Flori**

_Issue created by migration from https://trac.sagemath.org/ticket/22493_





---

archive/issue_events_296405.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-02T15:48:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296405"
}
```



---

archive/issue_events_296406.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-02T15:48:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296406"
}
```



---

archive/issue_events_296407.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-02T15:48:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296407"
}
```



---

archive/issue_events_296408.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-02T15:48:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296408"
}
```



---

archive/issue_comments_335633.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n New upstream version\n \n     http://mpir.org/mpir-3.0.0.tar.bz2\n+\n+This new version requires [yasm](http://yasm.tortall.net/) for assembler code.\n``````\n",
    "created_at": "2017-03-02T15:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335633",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 New upstream version
 
     http://mpir.org/mpir-3.0.0.tar.bz2
+
+This new version requires [yasm](http://yasm.tortall.net/) for assembler code.
``````




---

archive/issue_comments_335634.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739\">f68bc8e</a></td><td><code>upgrade mpir to 3-0-0</code></td></tr></table>\n",
    "created_at": "2017-03-02T15:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335634",
    "user": "https://github.com/videlec"
}
```

<a id='comment:2'>Comment 2:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739">f68bc8e</a></td><td><code>upgrade mpir to 3-0-0</code></td></tr></table>




---

archive/issue_comments_335635.json:
```json
{
    "body": "Branch: **[public/22493](https://github.com/sagemath/sagetrac-mirror/tree/public/22493)**",
    "created_at": "2017-03-02T15:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335635",
    "user": "https://github.com/videlec"
}
```

Branch: **[public/22493](https://github.com/sagemath/sagetrac-mirror/tree/public/22493)**



---

archive/issue_comments_335636.json:
```json
{
    "body": "Commit: **[f68bc8e](https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739)**",
    "created_at": "2017-03-02T15:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335636",
    "user": "https://github.com/videlec"
}
```

Commit: **[f68bc8e](https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739)**



---

archive/issue_comments_335637.json:
```json
{
    "body": "Changed keywords from **** to **days84**",
    "created_at": "2017-03-02T15:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335637",
    "user": "https://github.com/videlec"
}
```

Changed keywords from **** to **days84**



---

archive/issue_comments_335638.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nI suppose the documentation should mention dependence on yasm.\n(The version on the yasm's website appears to be 1.3, same as on a couple of Linux\nmachines I checked, so that's matter of doing `apt-get install yasm` or something like this. Although on `arando` buildbot it's 1.2, not 1.3, and so something would have to be done to such older systems).",
    "created_at": "2017-03-03T10:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335638",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'>Comment 4:</a>
I suppose the documentation should mention dependence on yasm.
(The version on the yasm's website appears to be 1.3, same as on a couple of Linux
machines I checked, so that's matter of doing `apt-get install yasm` or something like this. Although on `arando` buildbot it's 1.2, not 1.3, and so something would have to be done to such older systems).



---

archive/issue_comments_335639.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nReplying to [@dimpase](#comment%3A4):\n> I suppose the documentation should mention dependence on yasm.\n> (The version on the yasm's website appears to be 1.3, same as on a couple of Linux\n> machines I checked, so that's matter of doing `apt-get install yasm` or something like this. Although on `arando` buildbot it's 1.2, not 1.3, and so something would have to be done to such older systems).\n\nDima, do we need yasm 1.3 to compile MPIR 3.0.0? Building MPIR on arando would fail?",
    "created_at": "2017-03-03T11:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335639",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'>Comment 5:</a>
Replying to [@dimpase](#comment%3A4):
> I suppose the documentation should mention dependence on yasm.
> (The version on the yasm's website appears to be 1.3, same as on a couple of Linux
> machines I checked, so that's matter of doing `apt-get install yasm` or something like this. Although on `arando` buildbot it's 1.2, not 1.3, and so something would have to be done to such older systems).

Dima, do we need yasm 1.3 to compile MPIR 3.0.0? Building MPIR on arando would fail?



---

archive/issue_comments_335640.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nReplying to [@videlec](#comment%3A5):\n> do we need yasm 1.3 to compile MPIR 3.0.0? Building MPIR on arando would fail?\n\nBull writes in no uncertain terms that you need the latest version of yasm.\nAs 1.2 is almost 6 years old, I imagine that on new CPUs there could be problems, as the  code for the CPU won't compile.\n\narando has old CPU, more that 6 years old in fact, and I just checked that there MPIR compiles and passes all its checks (with system's gcc 6.2 and yasm 1.2).",
    "created_at": "2017-03-03T12:23:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335640",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'>Comment 6:</a>
Replying to [@videlec](#comment%3A5):
> do we need yasm 1.3 to compile MPIR 3.0.0? Building MPIR on arando would fail?

Bull writes in no uncertain terms that you need the latest version of yasm.
As 1.2 is almost 6 years old, I imagine that on new CPUs there could be problems, as the  code for the CPU won't compile.

arando has old CPU, more that 6 years old in fact, and I just checked that there MPIR compiles and passes all its checks (with system's gcc 6.2 and yasm 1.2).



---

archive/issue_comments_335641.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nWe decided to remove the inlcuded yasm form mpir sources.\nThat was the only sane thing to do... so Sage needs to ship it separately or we make it a build dependency.",
    "created_at": "2017-03-14T13:06:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335641",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:7'>Comment 7:</a>
We decided to remove the inlcuded yasm form mpir sources.
That was the only sane thing to do... so Sage needs to ship it separately or we make it a build dependency.



---

archive/issue_comments_335642.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\n`@`vincent: do you plan on modifying this ticket to include yasm?",
    "created_at": "2017-04-03T11:42:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335642",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:8'>Comment 8:</a>
`@`vincent: do you plan on modifying this ticket to include yasm?



---

archive/issue_comments_335643.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [jpflori](#comment%3A8):\n> `@`vincent: do you plan on modifying this ticket to include yasm?\n\nNope. Would better be a dependency ticket.",
    "created_at": "2017-04-03T11:44:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335643",
    "user": "https://github.com/videlec"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [jpflori](#comment%3A8):
> `@`vincent: do you plan on modifying this ticket to include yasm?

Nope. Would better be a dependency ticket.



---

archive/issue_comments_335644.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nSee #22748 for yasm",
    "created_at": "2017-04-03T11:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335644",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'>Comment 10:</a>
See #22748 for yasm



---

archive/issue_comments_335645.json:
```json
{
    "body": "Dependencies: **#22748**",
    "created_at": "2017-04-03T11:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335645",
    "user": "https://github.com/videlec"
}
```

Dependencies: **#22748**



---

archive/issue_comments_335646.json:
```json
{
    "body": "Changed commit from **[f68bc8e](https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739)** to **[16058ef](https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee)**",
    "created_at": "2017-04-25T16:47:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335646",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f68bc8e](https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739)** to **[16058ef](https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee)**



---

archive/issue_comments_335647.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d16afb5a818876936c1b22bc80edf4b0275088b\">8d16afb</a></td><td><code>Merge remote-tracking branch 'trac/develop' into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d723dcf5455ff95d40bfc24a11779efd69589aa\">4d723dc</a></td><td><code>Add yasm as a standard package.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f365fcfb9b89eeb43d0b0982d9c8ae48ba98f00\">0f365fc</a></td><td><code>Merge branch 'yasm130' into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee\">16058ef</a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr></table>\n",
    "created_at": "2017-04-25T16:47:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335647",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'>Comment 11:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d16afb5a818876936c1b22bc80edf4b0275088b">8d16afb</a></td><td><code>Merge remote-tracking branch 'trac/develop' into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d723dcf5455ff95d40bfc24a11779efd69589aa">4d723dc</a></td><td><code>Add yasm as a standard package.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f365fcfb9b89eeb43d0b0982d9c8ae48ba98f00">0f365fc</a></td><td><code>Merge branch 'yasm130' into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee">16058ef</a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr></table>




---

archive/issue_events_296409.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2017-04-25T16:48:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296409"
}
```



---

archive/issue_comments_335648.json:
```json
{
    "body": "Changed author from **Vincent Delecroix** to **Vincent Delecroix, Jean-Pierre Flori**",
    "created_at": "2017-04-25T16:48:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335648",
    "user": "https://github.com/sagetrac-jpflori"
}
```

Changed author from **Vincent Delecroix** to **Vincent Delecroix, Jean-Pierre Flori**



---

archive/issue_comments_335649.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d16afb5a818876936c1b22bc80edf4b0275088b\">8d16afb</a></td><td><code>Merge remote-tracking branch 'trac/develop' into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d723dcf5455ff95d40bfc24a11779efd69589aa\">4d723dc</a></td><td><code>Add yasm as a standard package.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f365fcfb9b89eeb43d0b0982d9c8ae48ba98f00\">0f365fc</a></td><td><code>Merge branch 'yasm130' into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee\">16058ef</a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr></table>\n",
    "created_at": "2017-04-25T16:48:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335649",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:12'>Comment 12:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d16afb5a818876936c1b22bc80edf4b0275088b">8d16afb</a></td><td><code>Merge remote-tracking branch 'trac/develop' into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d723dcf5455ff95d40bfc24a11779efd69589aa">4d723dc</a></td><td><code>Add yasm as a standard package.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f365fcfb9b89eeb43d0b0982d9c8ae48ba98f00">0f365fc</a></td><td><code>Merge branch 'yasm130' into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee">16058ef</a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr></table>




---

archive/issue_comments_335650.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nSeems to work fine for me.",
    "created_at": "2017-04-26T12:58:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335650",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:13'>Comment 13:</a>
Seems to work fine for me.



---

archive/issue_comments_335651.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nthis and #22748 seem to work on clang/FreeBSD.",
    "created_at": "2017-04-27T00:04:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335651",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'>Comment 14:</a>
this and #22748 seem to work on clang/FreeBSD.



---

archive/issue_comments_335652.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nGood to go in?",
    "created_at": "2017-04-28T07:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335652",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:15'>Comment 15:</a>
Good to go in?



---

archive/issue_comments_335653.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nYes.",
    "created_at": "2017-04-28T07:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335653",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:16'>Comment 16:</a>
Yes.



---

archive/issue_comments_335654.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3057c797a3230875c26cf2dc4117e61cdd07ecda\">3057c79</a></td><td><code>Add configure check for yasm</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6377eaeea02655d3238b1ab389fd236d9d42e988\">6377eae</a></td><td><code>upgrade mpir to 3-0-0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c39a193b70b7d0e32f690b307dcccf3c123374d1\">c39a193</a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr></table>\n",
    "created_at": "2017-04-28T12:17:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335654",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3057c797a3230875c26cf2dc4117e61cdd07ecda">3057c79</a></td><td><code>Add configure check for yasm</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6377eaeea02655d3238b1ab389fd236d9d42e988">6377eae</a></td><td><code>upgrade mpir to 3-0-0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c39a193b70b7d0e32f690b307dcccf3c123374d1">c39a193</a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr></table>




---

archive/issue_comments_335655.json:
```json
{
    "body": "Changed commit from **[16058ef](https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee)** to **[c39a193](https://github.com/sagemath/sagetrac-mirror/commit/c39a193b70b7d0e32f690b307dcccf3c123374d1)**",
    "created_at": "2017-04-28T12:17:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335655",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[16058ef](https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee)** to **[c39a193](https://github.com/sagemath/sagetrac-mirror/commit/c39a193b70b7d0e32f690b307dcccf3c123374d1)**



---

archive/issue_comments_335656.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nIs that a positive review?",
    "created_at": "2017-05-04T07:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335656",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'>Comment 18:</a>
Is that a positive review?



---

archive/issue_comments_335657.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nI would say so!",
    "created_at": "2017-05-04T08:53:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335657",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:19'>Comment 19:</a>
I would say so!



---

archive/issue_comments_335658.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2017-05-04T09:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335658",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **Fran√ßois Bissey**



---

archive/issue_comments_335659.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nAnd of we go....",
    "created_at": "2017-05-04T09:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335659",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:20'>Comment 20:</a>
And of we go....



---

archive/issue_events_296410.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-05-04T09:52:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296410"
}
```



---

archive/issue_events_296411.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-05-04T09:52:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296411"
}
```



---

archive/issue_comments_335660.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nOn Debian 7 64-bit: http://build.sagedev.org/#/builders/80/builds/1/steps/5/logs/stdio\n\n```\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c nextprime.c  -fPIC -DPIC -o .libs/nextprime.o\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c nextprime.c -o nextprime.o >/dev/null 2>&1\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c primesieve.c -o primesieve.o >/dev/null 2>&1\n[mpir-3.0.0] /bin/bash ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o version.lo version.c\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c  -fPIC -DPIC -o .libs/version.o\n[mpir-3.0.0] /bin/bash ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o tal-reent.lo tal-reent.c\n[mpir-3.0.0] make[6]: *** No rule to make target `mpn/addmul_1.lo', needed by `libmpir.la'.\n[mpir-3.0.0] make[6]: *** No rule to make target `mpn/mul_basecase.lo', needed by `libmpir.la'.\n[mpir-3.0.0] make[6]: *** No rule to make target `mpn/sqr_basecase.lo', needed by `libmpir.la'.\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c -o version.o >/dev/null 2>&1\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c  -fPIC -DPIC -o .libs/tal-reent.o\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c -o tal-reent.o >/dev/null 2>&1\n[mpir-3.0.0] /bin/bash ./libtool  --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o cxx/dummy.lo cxx/dummy.cc\n[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc  -fPIC -DPIC -o cxx/.libs/dummy.o\n[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc -o cxx/dummy.o >/dev/null 2>&1\n[mpir-3.0.0] make[6]: Target `all-am' not remade because of errors.\n[mpir-3.0.0] make[6]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'\n[mpir-3.0.0] make[5]: *** [all-recursive] Error 1\n[mpir-3.0.0] make[5]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'\n[mpir-3.0.0] make[4]: *** [all] Error 2\n[mpir-3.0.0] make[4]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'\n[mpir-3.0.0] Error building MPIR.\n```",
    "created_at": "2017-05-06T21:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335660",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'>Comment 21:</a>
On Debian 7 64-bit: http://build.sagedev.org/#/builders/80/builds/1/steps/5/logs/stdio

```
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c nextprime.c  -fPIC -DPIC -o .libs/nextprime.o
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c nextprime.c -o nextprime.o >/dev/null 2>&1
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c primesieve.c -o primesieve.o >/dev/null 2>&1
[mpir-3.0.0] /bin/bash ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o version.lo version.c
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c  -fPIC -DPIC -o .libs/version.o
[mpir-3.0.0] /bin/bash ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o tal-reent.lo tal-reent.c
[mpir-3.0.0] make[6]: *** No rule to make target `mpn/addmul_1.lo', needed by `libmpir.la'.
[mpir-3.0.0] make[6]: *** No rule to make target `mpn/mul_basecase.lo', needed by `libmpir.la'.
[mpir-3.0.0] make[6]: *** No rule to make target `mpn/sqr_basecase.lo', needed by `libmpir.la'.
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c -o version.o >/dev/null 2>&1
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c  -fPIC -DPIC -o .libs/tal-reent.o
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c -o tal-reent.o >/dev/null 2>&1
[mpir-3.0.0] /bin/bash ./libtool  --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o cxx/dummy.lo cxx/dummy.cc
[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc  -fPIC -DPIC -o cxx/.libs/dummy.o
[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc -o cxx/dummy.o >/dev/null 2>&1
[mpir-3.0.0] make[6]: Target `all-am' not remade because of errors.
[mpir-3.0.0] make[6]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'
[mpir-3.0.0] make[5]: *** [all-recursive] Error 1
[mpir-3.0.0] make[5]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'
[mpir-3.0.0] make[4]: *** [all] Error 2
[mpir-3.0.0] make[4]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'
[mpir-3.0.0] Error building MPIR.
```



---

archive/issue_events_296412.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-06T21:43:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296412"
}
```



---

archive/issue_events_296413.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-06T21:43:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296413"
}
```



---

archive/issue_comments_335661.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nHum\n\n```\n[mpir-3.0.0] libtool: compile:  ../mpn/m4-ccas --m4=m4 gcc -c -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -I.. -DOPERATION_addmul_1 -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -I. -I.. addmul_1.asm  -fPIC -DPIC -o .libs/addmul_1.o\n[mpir-3.0.0] m4  -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -DOPERATION_addmul_1 -DPIC addmul_1.asm >tmp-addmul_1.s\n[mpir-3.0.0]  gcc -c -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -I.. -DOPERATION_addmul_1 -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -I. -I.. tmp-addmul_1.s -fPIC -DPIC -o .libs/addmul_1.o\n[mpir-3.0.0] libtool: compile:  ../strip_fPIC.sh /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64 submul_1.as  -fPIC -DPIC -o .libs/submul_1.o\n[mpir-3.0.0] /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64 submul_1.as -D PIC -o .libs/submul_1.o\n[mpir-3.0.0] libtool: compile:  ../strip_fPIC.sh /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64 submul_1.as -o submul_1.o >/dev/null 2>&1\n[mpir-3.0.0] tmp-addmul_1.s: Assembler messages:\n[mpir-3.0.0] tmp-addmul_1.s:152: Error: no such instruction: `adox (%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:154: Error: no such instruction: `adox %rcx,%rax'\n[mpir-3.0.0] tmp-addmul_1.s:166: Error: no such instruction: `adox -8(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:167: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:171: Error: no such instruction: `adox (%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:174: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] tmp-addmul_1.s:176: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:177: Error: no such instruction: `adox 8(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:181: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] tmp-addmul_1.s:182: Error: no such instruction: `adox 16(%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:185: Error: no such instruction: `adox 24(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:186: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:189: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] tmp-addmul_1.s:190: Error: no such instruction: `adox 32(%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:193: Error: no such instruction: `adox 40(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:194: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:196: Error: no such instruction: `adox 48(%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:200: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] make[6]: *** [addmul_1.lo] Error 1\n```",
    "created_at": "2017-05-06T21:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335661",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:23'>Comment 23:</a>
Hum

```
[mpir-3.0.0] libtool: compile:  ../mpn/m4-ccas --m4=m4 gcc -c -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -I.. -DOPERATION_addmul_1 -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -I. -I.. addmul_1.asm  -fPIC -DPIC -o .libs/addmul_1.o
[mpir-3.0.0] m4  -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -DOPERATION_addmul_1 -DPIC addmul_1.asm >tmp-addmul_1.s
[mpir-3.0.0]  gcc -c -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -I.. -DOPERATION_addmul_1 -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -I. -I.. tmp-addmul_1.s -fPIC -DPIC -o .libs/addmul_1.o
[mpir-3.0.0] libtool: compile:  ../strip_fPIC.sh /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64 submul_1.as  -fPIC -DPIC -o .libs/submul_1.o
[mpir-3.0.0] /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64 submul_1.as -D PIC -o .libs/submul_1.o
[mpir-3.0.0] libtool: compile:  ../strip_fPIC.sh /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64 submul_1.as -o submul_1.o >/dev/null 2>&1
[mpir-3.0.0] tmp-addmul_1.s: Assembler messages:
[mpir-3.0.0] tmp-addmul_1.s:152: Error: no such instruction: `adox (%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:154: Error: no such instruction: `adox %rcx,%rax'
[mpir-3.0.0] tmp-addmul_1.s:166: Error: no such instruction: `adox -8(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:167: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:171: Error: no such instruction: `adox (%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:174: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] tmp-addmul_1.s:176: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:177: Error: no such instruction: `adox 8(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:181: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] tmp-addmul_1.s:182: Error: no such instruction: `adox 16(%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:185: Error: no such instruction: `adox 24(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:186: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:189: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] tmp-addmul_1.s:190: Error: no such instruction: `adox 32(%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:193: Error: no such instruction: `adox 40(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:194: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:196: Error: no such instruction: `adox 48(%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:200: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] make[6]: *** [addmul_1.lo] Error 1
```



---

archive/issue_comments_335662.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nhttp://stackoverflow.com/questions/29747508/what-is-the-difference-between-the-adc-and-adcx-instructions-on-ia32-ia64 \nI'd say we have a misdetection of the hardware or the assmebler used by gcc doesn't support those instructions.",
    "created_at": "2017-05-06T23:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335662",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:24'>Comment 24:</a>
http://stackoverflow.com/questions/29747508/what-is-the-difference-between-the-adc-and-adcx-instructions-on-ia32-ia64 
I'd say we have a misdetection of the hardware or the assmebler used by gcc doesn't support those instructions.



---

archive/issue_comments_335663.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nI'd say the assembler is yasm.",
    "created_at": "2017-05-10T13:26:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335663",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:25'>Comment 25:</a>
I'd say the assembler is yasm.



---

archive/issue_comments_335664.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nCan't seem to get any info from the (terrible) buildbot pages...\nSeems like a wrong arch choice by MPIR configure script.",
    "created_at": "2017-05-10T13:45:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335664",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:26'>Comment 26:</a>
Can't seem to get any info from the (terrible) buildbot pages...
Seems like a wrong arch choice by MPIR configure script.



---

archive/issue_events_296414.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2017-05-10T14:03:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296414"
}
```



---

archive/issue_events_296415.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2017-05-10T14:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296415"
}
```



---

archive/issue_comments_335665.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nThe error message is from as, not yasm:\n\n```\n$ strings local/bin/yasm  | grep such\n$ strings /usr/bin/as  | grep such\nno such architecture modifier: `%s'\nbroadcast is needed for operand of such type\nno such architecture: `%s'\nno such instruction: `%s'\n```\nUnless yasm calls as somewhere under the hood, though I don't think thats the case...",
    "created_at": "2017-05-14T08:43:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335665",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:28'>Comment 28:</a>
The error message is from as, not yasm:

```
$ strings local/bin/yasm  | grep such
$ strings /usr/bin/as  | grep such
no such architecture modifier: `%s'
broadcast is needed for operand of such type
no such architecture: `%s'
no such instruction: `%s'
```
Unless yasm calls as somewhere under the hood, though I don't think thats the case...



---

archive/issue_comments_335666.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nI.e. the error comes from \n\n```\ngcc -c -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -I.. -DOPERATION_addmul_1 -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -I. -I.. tmp-addmul_1.s -fPIC -DPIC -o .libs/addmul_1.o\n```\nwhich does not use yasm.",
    "created_at": "2017-05-14T08:46:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335666",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:29'>Comment 29:</a>
I.e. the error comes from 

```
gcc -c -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -I.. -DOPERATION_addmul_1 -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -I. -I.. tmp-addmul_1.s -fPIC -DPIC -o .libs/addmul_1.o
```
which does not use yasm.



---

archive/issue_comments_335667.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nOk, that's right.\nMPIR uses yasm or not based on the file extension.\n\nMaybe the error is just because as on debian 7 is just too old?",
    "created_at": "2017-05-14T19:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335667",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:30'>Comment 30:</a>
Ok, that's right.
MPIR uses yasm or not based on the file extension.

Maybe the error is just because as on debian 7 is just too old?



---

archive/issue_comments_335668.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nCannot reproduce this on an unstable debian with the exact same command lines.",
    "created_at": "2017-05-15T12:45:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335668",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:31'>Comment 31:</a>
Cannot reproduce this on an unstable debian with the exact same command lines.



---

archive/issue_comments_335669.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nI would say as is indeed too old.\nThe problematic file is:\n* https://github.com/wbhart/mpir/blob/master/mpn/x86_64/skylake/avx/addmul_1.asm\nusing adcx/adox instructions.\nThese were added in a post july 2012 as release:\n* https://sourceware.org/git/gitweb.cgi?p=binutils-gdb.git;a=commit;h=e2e1fcde622f2f6cedfd7fb6615aa6e136f21dec\nAnd debian wheezy ships binutils 2.22 which is pre-2012:\n* https://ftp.gnu.org/gnu/binutils/\n\nSo can we ignore this very outdated OS?\nIt's a Debian old stable, so quite very old...",
    "created_at": "2017-05-15T12:55:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335669",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:32'>Comment 32:</a>
I would say as is indeed too old.
The problematic file is:
* https://github.com/wbhart/mpir/blob/master/mpn/x86_64/skylake/avx/addmul_1.asm
using adcx/adox instructions.
These were added in a post july 2012 as release:
* https://sourceware.org/git/gitweb.cgi?p=binutils-gdb.git;a=commit;h=e2e1fcde622f2f6cedfd7fb6615aa6e136f21dec
And debian wheezy ships binutils 2.22 which is pre-2012:
* https://ftp.gnu.org/gnu/binutils/

So can we ignore this very outdated OS?
It's a Debian old stable, so quite very old...



---

archive/issue_comments_335670.json:
```json
{
    "body": "<a id='comment:33'>Comment 33:</a>\nOne could argue that wheezy has LTS till may 2018:\n* https://www.debian.org/releases/wheezy/",
    "created_at": "2017-05-15T12:58:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335670",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:33'>Comment 33:</a>
One could argue that wheezy has LTS till may 2018:
* https://www.debian.org/releases/wheezy/



---

archive/issue_comments_335671.json:
```json
{
    "body": "<a id='comment:34'>Comment 34:</a>\nHow would the version of binutils matter? Isn't the asm code meant to be compiled with an up to date yasm installed by Sage?",
    "created_at": "2017-05-15T13:23:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335671",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:34'>Comment 34:</a>
How would the version of binutils matter? Isn't the asm code meant to be compiled with an up to date yasm installed by Sage?



---

archive/issue_comments_335672.json:
```json
{
    "body": "<a id='comment:35'>Comment 35:</a>\nNope, some assembly files are compiled with yasm, others with as...",
    "created_at": "2017-05-15T13:25:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335672",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:35'>Comment 35:</a>
Nope, some assembly files are compiled with yasm, others with as...



---

archive/issue_comments_335673.json:
```json
{
    "body": "<a id='comment:36'>Comment 36:</a>\nReplying to [jpflori](#comment%3A35):\n> Nope, some assembly files are compiled with yasm, others with as...\n\nOK, so we either have to tell the users to upgrade binutils to something meaningful, or ship our own `gas`...",
    "created_at": "2017-05-15T13:28:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335673",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:36'>Comment 36:</a>
Replying to [jpflori](#comment%3A35):
> Nope, some assembly files are compiled with yasm, others with as...

OK, so we either have to tell the users to upgrade binutils to something meaningful, or ship our own `gas`...



---

archive/issue_comments_335674.json:
```json
{
    "body": "<a id='comment:37'>Comment 37:</a>\nNot so many users whould use a pre-2012 `gas`...\nWe can also forbid the use of assembly when `gas` is too old.\nThat's the best solution I have in mind to please the patchbot running Debian 7.",
    "created_at": "2017-05-15T13:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335674",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:37'>Comment 37:</a>
Not so many users whould use a pre-2012 `gas`...
We can also forbid the use of assembly when `gas` is too old.
That's the best solution I have in mind to please the patchbot running Debian 7.



---

archive/issue_comments_335675.json:
```json
{
    "body": "Changed commit from **[c39a193](https://github.com/sagemath/sagetrac-mirror/commit/c39a193b70b7d0e32f690b307dcccf3c123374d1)** to **[9573e15](https://github.com/sagemath/sagetrac-mirror/commit/9573e155b79a719db84d0ea2d2842abb7885d84e)**",
    "created_at": "2017-05-15T15:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335675",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c39a193](https://github.com/sagemath/sagetrac-mirror/commit/c39a193b70b7d0e32f690b307dcccf3c123374d1)** to **[9573e15](https://github.com/sagemath/sagetrac-mirror/commit/9573e155b79a719db84d0ea2d2842abb7885d84e)**



---

archive/issue_comments_335676.json:
```json
{
    "body": "<a id='comment:38'>Comment 38:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739\">f68bc8e</a></td><td><code>upgrade mpir to 3-0-0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d16afb5a818876936c1b22bc80edf4b0275088b\">8d16afb</a></td><td><code>Merge remote-tracking branch 'trac/develop' into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f365fcfb9b89eeb43d0b0982d9c8ae48ba98f00\">0f365fc</a></td><td><code>Merge branch 'yasm130' into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee\">16058ef</a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/357103ac48fc1e10d55e1fae2c5a07c43858a2de\">357103a</a></td><td><code>Merge branch 'public/22493' of git://trac.sagemath.org/sage into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ddc2f11aa9af630b0e5873bb93bceb3c0e571c2\">8ddc2f1</a></td><td><code>MPIR 3.0.0 does not build yasm anymore.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8205366bd4bfe78b25781533622d7633e8376454\">8205366</a></td><td><code>But MPIR always looks for it even on archs where it is not used.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9573e155b79a719db84d0ea2d2842abb7885d84e\">9573e15</a></td><td><code>Check GNU as version when building MPIR.</code></td></tr></table>\n",
    "created_at": "2017-05-15T15:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335676",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:38'>Comment 38:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739">f68bc8e</a></td><td><code>upgrade mpir to 3-0-0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d16afb5a818876936c1b22bc80edf4b0275088b">8d16afb</a></td><td><code>Merge remote-tracking branch 'trac/develop' into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f365fcfb9b89eeb43d0b0982d9c8ae48ba98f00">0f365fc</a></td><td><code>Merge branch 'yasm130' into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee">16058ef</a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/357103ac48fc1e10d55e1fae2c5a07c43858a2de">357103a</a></td><td><code>Merge branch 'public/22493' of git://trac.sagemath.org/sage into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ddc2f11aa9af630b0e5873bb93bceb3c0e571c2">8ddc2f1</a></td><td><code>MPIR 3.0.0 does not build yasm anymore.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8205366bd4bfe78b25781533622d7633e8376454">8205366</a></td><td><code>But MPIR always looks for it even on archs where it is not used.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9573e155b79a719db84d0ea2d2842abb7885d84e">9573e15</a></td><td><code>Check GNU as version when building MPIR.</code></td></tr></table>




---

archive/issue_events_296416.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2017-05-15T15:35:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296416"
}
```



---

archive/issue_events_296417.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2017-05-15T15:35:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296417"
}
```



---

archive/issue_comments_335677.json:
```json
{
    "body": "Changed commit from **[9573e15](https://github.com/sagemath/sagetrac-mirror/commit/9573e155b79a719db84d0ea2d2842abb7885d84e)** to **[cb8a3f7](https://github.com/sagemath/sagetrac-mirror/commit/cb8a3f7beeb1fd57d9a7ce3180bffad7f78867cf)**",
    "created_at": "2017-05-15T15:39:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335677",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9573e15](https://github.com/sagemath/sagetrac-mirror/commit/9573e155b79a719db84d0ea2d2842abb7885d84e)** to **[cb8a3f7](https://github.com/sagemath/sagetrac-mirror/commit/cb8a3f7beeb1fd57d9a7ce3180bffad7f78867cf)**



---

archive/issue_comments_335678.json:
```json
{
    "body": "<a id='comment:40'>Comment 40:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb8a3f7beeb1fd57d9a7ce3180bffad7f78867cf\">cb8a3f7</a></td><td><code>Echo comment when skipping yasm check.</code></td></tr></table>\n",
    "created_at": "2017-05-15T15:39:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335678",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:40'>Comment 40:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb8a3f7beeb1fd57d9a7ce3180bffad7f78867cf">cb8a3f7</a></td><td><code>Echo comment when skipping yasm check.</code></td></tr></table>




---

archive/issue_comments_335679.json:
```json
{
    "body": "Changed commit from **[cb8a3f7](https://github.com/sagemath/sagetrac-mirror/commit/cb8a3f7beeb1fd57d9a7ce3180bffad7f78867cf)** to **[aa0b222](https://github.com/sagemath/sagetrac-mirror/commit/aa0b222388e27db40c9da7e5a91da4f08401c854)**",
    "created_at": "2017-05-15T15:41:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335679",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cb8a3f7](https://github.com/sagemath/sagetrac-mirror/commit/cb8a3f7beeb1fd57d9a7ce3180bffad7f78867cf)** to **[aa0b222](https://github.com/sagemath/sagetrac-mirror/commit/aa0b222388e27db40c9da7e5a91da4f08401c854)**



---

archive/issue_comments_335680.json:
```json
{
    "body": "<a id='comment:41'>Comment 41:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa0b222388e27db40c9da7e5a91da4f08401c854\">aa0b222</a></td><td><code>This should work and be useful on non-linux systems.</code></td></tr></table>\n",
    "created_at": "2017-05-15T15:41:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335680",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:41'>Comment 41:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa0b222388e27db40c9da7e5a91da4f08401c854">aa0b222</a></td><td><code>This should work and be useful on non-linux systems.</code></td></tr></table>




---

archive/issue_comments_335681.json:
```json
{
    "body": "<a id='comment:42'>Comment 42:</a>\nIt would be nice to get this into Sage 8.0.",
    "created_at": "2017-05-16T08:48:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335681",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:42'>Comment 42:</a>
It would be nice to get this into Sage 8.0.



---

archive/issue_events_296418.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-05-16T09:11:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296418"
}
```



---

archive/issue_events_296419.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-05-16T09:11:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296419"
}
```



---

archive/issue_comments_335682.json:
```json
{
    "body": "<a id='comment:43'>Comment 43:</a>\nOK, sorry for the delay. It looks OK to me. It will work on all the systems we officially support.\n\nFor the records if you are in that kind of trivia `uname -m` is not portable (but is OK across the platform we support so no need to change). For bonus points, can you tell me what kind of system I am testing here\n\n```\n[xcat1-c][/]> uname -m\n00F6B2734C00\n```",
    "created_at": "2017-05-16T09:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335682",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:43'>Comment 43:</a>
OK, sorry for the delay. It looks OK to me. It will work on all the systems we officially support.

For the records if you are in that kind of trivia `uname -m` is not portable (but is OK across the platform we support so no need to change). For bonus points, can you tell me what kind of system I am testing here

```
[xcat1-c][/]> uname -m
00F6B2734C00
```



---

archive/issue_comments_335683.json:
```json
{
    "body": "<a id='comment:44'>Comment 44:</a>\n\n```\n-bash-4.3$ uname -m\n00F84C0C4C00\n```",
    "created_at": "2017-05-16T09:47:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335683",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:44'>Comment 44:</a>

```
-bash-4.3$ uname -m
00F84C0C4C00
```



---

archive/issue_comments_335684.json:
```json
{
    "body": "<a id='comment:45'>Comment 45:</a>\nShould have known you'd have access to one of those too.",
    "created_at": "2017-05-16T09:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335684",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:45'>Comment 45:</a>
Should have known you'd have access to one of those too.



---

archive/issue_comments_335685.json:
```json
{
    "body": "<a id='comment:46'>Comment 46:</a>\nOn FreeBSD with clang this does not work, as it misidentifies the compiler as gcc and then trips over itself. Does it work with clang on OSX?",
    "created_at": "2017-05-16T20:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335685",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:46'>Comment 46:</a>
On FreeBSD with clang this does not work, as it misidentifies the compiler as gcc and then trips over itself. Does it work with clang on OSX?



---

archive/issue_comments_335686.json:
```json
{
    "body": "<a id='comment:47'>Comment 47:</a>\nI haven't tried yet I must say. Can you post a log so I can see how it trips itself? It'll probably be quicker for me to try on linux+clang actually.",
    "created_at": "2017-05-16T21:09:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335686",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:47'>Comment 47:</a>
I haven't tried yet I must say. Can you post a log so I can see how it trips itself? It'll probably be quicker for me to try on linux+clang actually.



---

archive/issue_comments_335687.json:
```json
{
    "body": "<a id='comment:48'>Comment 48:</a>\nReplying to [@kiwifb](#comment%3A47):\n> I haven't tried yet I must say. Can you post a log so I can see how it trips itself? It'll probably be quicker for me to try on linux+clang actually.\n\nit actually works on FreeBSD/clang, sorry for noise. I used wrong C++ compiler, with `clang++-devel` it works like a charm.",
    "created_at": "2017-05-16T21:36:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335687",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'>Comment 48:</a>
Replying to [@kiwifb](#comment%3A47):
> I haven't tried yet I must say. Can you post a log so I can see how it trips itself? It'll probably be quicker for me to try on linux+clang actually.

it actually works on FreeBSD/clang, sorry for noise. I used wrong C++ compiler, with `clang++-devel` it works like a charm.



---

archive/issue_comments_335688.json:
```json
{
    "body": "<a id='comment:49'>Comment 49:</a>\nI just finished building `mpir` on linux+clang without a hitch either.",
    "created_at": "2017-05-16T21:37:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335688",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:49'>Comment 49:</a>
I just finished building `mpir` on linux+clang without a hitch either.



---

archive/issue_events_296420.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-17T19:38:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296420"
}
```



---

archive/issue_events_296421.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-17T19:38:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296421"
}
```



---

archive/issue_comments_335689.json:
```json
{
    "body": "<a id='comment:50'>Comment 50:</a>\nnow fails with\n\n```\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c  -fPIC -DPIC -o .libs/version.o\n[mpir-3.0.0] make[6]: *** No rule to make target `mpn/addmul_1.lo', needed by `libmpir.la'.\n[mpir-3.0.0] make[6]: *** No rule to make target `mpn/mul_basecase.lo', needed by `libmpir.la'.\n[mpir-3.0.0] make[6]: *** No rule to make target `mpn/sqr_basecase.lo', needed by `libmpir.la'.\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c  -fPIC -DPIC -o .libs/tal-reent.o\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c -o version.o >/dev/null 2>&1\n[mpir-3.0.0] /bin/bash ./libtool  --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o cxx/dummy.lo cxx/dummy.cc\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c -o tal-reent.o >/dev/null 2>&1\n[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc  -fPIC -DPIC -o cxx/.libs/dummy.o\n[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc -o cxx/dummy.o >/dev/null 2>&1\n[mpir-3.0.0] make[6]: Target `all-am' not remade because of errors.\n[mpir-3.0.0] make[6]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'\n[mpir-3.0.0] make[5]: *** [all-recursive] Error 1\n[mpir-3.0.0] make[5]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'\n[mpir-3.0.0] make[4]: *** [all] Error 2\n[mpir-3.0.0] make[4]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'\n[mpir-3.0.0] Error building MPIR.\n```\non Debian 7.\nhttp://build.sagedev.org/#/builders/80/builds/5/steps/5/logs/stdio",
    "created_at": "2017-05-17T19:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335689",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:50'>Comment 50:</a>
now fails with

```
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c  -fPIC -DPIC -o .libs/version.o
[mpir-3.0.0] make[6]: *** No rule to make target `mpn/addmul_1.lo', needed by `libmpir.la'.
[mpir-3.0.0] make[6]: *** No rule to make target `mpn/mul_basecase.lo', needed by `libmpir.la'.
[mpir-3.0.0] make[6]: *** No rule to make target `mpn/sqr_basecase.lo', needed by `libmpir.la'.
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c  -fPIC -DPIC -o .libs/tal-reent.o
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c -o version.o >/dev/null 2>&1
[mpir-3.0.0] /bin/bash ./libtool  --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o cxx/dummy.lo cxx/dummy.cc
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c -o tal-reent.o >/dev/null 2>&1
[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc  -fPIC -DPIC -o cxx/.libs/dummy.o
[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc -o cxx/dummy.o >/dev/null 2>&1
[mpir-3.0.0] make[6]: Target `all-am' not remade because of errors.
[mpir-3.0.0] make[6]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'
[mpir-3.0.0] make[5]: *** [all-recursive] Error 1
[mpir-3.0.0] make[5]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'
[mpir-3.0.0] make[4]: *** [all] Error 2
[mpir-3.0.0] make[4]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'
[mpir-3.0.0] Error building MPIR.
```
on Debian 7.
http://build.sagedev.org/#/builders/80/builds/5/steps/5/logs/stdio



---

archive/issue_comments_335690.json:
```json
{
    "body": "<a id='comment:51'>Comment 51:</a>\nDebian 7 again :/",
    "created_at": "2017-05-17T21:47:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335690",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:51'>Comment 51:</a>
Debian 7 again :/



---

archive/issue_comments_335691.json:
```json
{
    "body": "<a id='comment:52'>Comment 52:</a>\nLooks like the fix didn't work\n\n```\n[mpir-3.0.0] tmp-addmul_1.s: Assembler messages:\n[mpir-3.0.0] tmp-addmul_1.s:152: Error: no such instruction: `adox (%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:154: Error: no such instruction: `adox %rcx,%rax'\n[mpir-3.0.0] tmp-addmul_1.s:166: Error: no such instruction: `adox -8(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:167: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:171: Error: no such instruction: `adox (%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:174: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] tmp-addmul_1.s:176: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:177: Error: no such instruction: `adox 8(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:181: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] tmp-addmul_1.s:182: Error: no such instruction: `adox 16(%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:185: Error: no such instruction: `adox 24(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:186: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:189: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] tmp-addmul_1.s:190: Error: no such instruction: `adox 32(%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:193: Error: no such instruction: `adox 40(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:194: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:196: Error: no such instruction: `adox 48(%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:200: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] /bin/bash ../libtool --mode=compile --tag=CC ../strip_fPIC.sh /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64  -o lshift.lo `test -f 'lshift.as' || echo './'`lshift.as\n[mpir-3.0.0] make[6]: *** [addmul_1.lo] Error 1\n```\nback to the drawing board.",
    "created_at": "2017-05-17T21:51:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335691",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:52'>Comment 52:</a>
Looks like the fix didn't work

```
[mpir-3.0.0] tmp-addmul_1.s: Assembler messages:
[mpir-3.0.0] tmp-addmul_1.s:152: Error: no such instruction: `adox (%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:154: Error: no such instruction: `adox %rcx,%rax'
[mpir-3.0.0] tmp-addmul_1.s:166: Error: no such instruction: `adox -8(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:167: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:171: Error: no such instruction: `adox (%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:174: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] tmp-addmul_1.s:176: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:177: Error: no such instruction: `adox 8(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:181: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] tmp-addmul_1.s:182: Error: no such instruction: `adox 16(%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:185: Error: no such instruction: `adox 24(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:186: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:189: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] tmp-addmul_1.s:190: Error: no such instruction: `adox 32(%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:193: Error: no such instruction: `adox 40(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:194: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:196: Error: no such instruction: `adox 48(%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:200: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] /bin/bash ../libtool --mode=compile --tag=CC ../strip_fPIC.sh /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64  -o lshift.lo `test -f 'lshift.as' || echo './'`lshift.as
[mpir-3.0.0] make[6]: *** [addmul_1.lo] Error 1
```
back to the drawing board.



---

archive/issue_comments_335692.json:
```json
{
    "body": "<a id='comment:53'>Comment 53:</a>\nHum, I did not actually test on a debian 7 seven, I just looked at what GNU as version is provided there and thought I ound the issue.\nSo several possibilities:\n* I'm stupid,\n* the check for as version I implemented is wrong,\n* the issue is somewhere else.\n\nThe easiest way to solve this would be to get access to the machine...\nI downloaded a bunch of qemu debian 7 images but the pc I mostly work on does not have internet access and these images come wihtout gnu as :/",
    "created_at": "2017-05-17T21:55:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335692",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:53'>Comment 53:</a>
Hum, I did not actually test on a debian 7 seven, I just looked at what GNU as version is provided there and thought I ound the issue.
So several possibilities:
* I'm stupid,
* the check for as version I implemented is wrong,
* the issue is somewhere else.

The easiest way to solve this would be to get access to the machine...
I downloaded a bunch of qemu debian 7 images but the pc I mostly work on does not have internet access and these images come wihtout gnu as :/



---

archive/issue_comments_335693.json:
```json
{
    "body": "<a id='comment:54'>Comment 54:</a>\nI think the as version check is correct but `\"$CC\" = GCC` is always false unless you really go out of your way to rename gcc...",
    "created_at": "2017-05-17T22:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335693",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:54'>Comment 54:</a>
I think the as version check is correct but `"$CC" = GCC` is always false unless you really go out of your way to rename gcc...



---

archive/issue_comments_335694.json:
```json
{
    "body": "<a id='comment:55'>Comment 55:</a>\nPS:\n\n```\nbuildbot@sagebd07_64s02:~$ as --version | head -1 | awk 'NF>1{print $NF}'\n2.22\n```",
    "created_at": "2017-05-17T22:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335694",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:55'>Comment 55:</a>
PS:

```
buildbot@sagebd07_64s02:~$ as --version | head -1 | awk 'NF>1{print $NF}'
2.22
```



---

archive/issue_comments_335695.json:
```json
{
    "body": "<a id='comment:56'>Comment 56:</a>\nReplying to [@vbraun](#comment%3A54):\n> I think the as version check is correct but `\"$CC\" = GCC` is always false unless you really go out of your way to rename gcc...\n\nYou are probably right. It is not a correct way to ascertain that `CC` is `gcc`, you'd have to look at `$CC -v` or similar. Considering the only other possibility is `clang`  during toolchain building on OS X and that\n\n```\nMirage:~ fbissey$ as --version | head -1 | awk 'NF>1{print $NF}'\n(clang-802.0.42)\n```\nwon't be caught by your `case` statement, I think we can just scrap the `$CC=GCC` bit.",
    "created_at": "2017-05-17T22:35:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335695",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:56'>Comment 56:</a>
Replying to [@vbraun](#comment%3A54):
> I think the as version check is correct but `"$CC" = GCC` is always false unless you really go out of your way to rename gcc...

You are probably right. It is not a correct way to ascertain that `CC` is `gcc`, you'd have to look at `$CC -v` or similar. Considering the only other possibility is `clang`  during toolchain building on OS X and that

```
Mirage:~ fbissey$ as --version | head -1 | awk 'NF>1{print $NF}'
(clang-802.0.42)
```
won't be caught by your `case` statement, I think we can just scrap the `$CC=GCC` bit.



---

archive/issue_comments_335696.json:
```json
{
    "body": "<a id='comment:57'>Comment 57:</a>\nArgh, Now I see why I had started a bit of my answer differently. If you are worried about using clang on linux, which is in the future so far, we'll do it when it become possible. Using an output from configure preferably (I currently output a variable `IS_CLANG` in `sage-env-config` and that's much more reliable).",
    "created_at": "2017-05-17T22:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335696",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:57'>Comment 57:</a>
Argh, Now I see why I had started a bit of my answer differently. If you are worried about using clang on linux, which is in the future so far, we'll do it when it become possible. Using an output from configure preferably (I currently output a variable `IS_CLANG` in `sage-env-config` and that's much more reliable).



---

archive/issue_comments_335697.json:
```json
{
    "body": "<a id='comment:58'>Comment 58:</a>\nReplying to [jpflori](#comment%3A35):\n> Nope, some assembly files are compiled with yasm, others with as...\n\nAre we sure that this is an upstream *feature*? It seems strange to me...",
    "created_at": "2017-05-18T08:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335697",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:58'>Comment 58:</a>
Replying to [jpflori](#comment%3A35):
> Nope, some assembly files are compiled with yasm, others with as...

Are we sure that this is an upstream *feature*? It seems strange to me...



---

archive/issue_comments_335698.json:
```json
{
    "body": "<a id='comment:59'>Comment 59:</a>\nYes it is.\nOne of the former developer prefered ATT syntax over intel (or the other way around) and that was not very well supported by gas at that time, don't know the current situation.\nMoreover yasm provides better windows support with stack dark magic unwinding feature.\n\nFiles are treated by yasm or gas depending on their extension (as or asm).",
    "created_at": "2017-05-18T08:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335698",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:59'>Comment 59:</a>
Yes it is.
One of the former developer prefered ATT syntax over intel (or the other way around) and that was not very well supported by gas at that time, don't know the current situation.
Moreover yasm provides better windows support with stack dark magic unwinding feature.

Files are treated by yasm or gas depending on their extension (as or asm).



---

archive/issue_comments_335699.json:
```json
{
    "body": "<a id='comment:60'>Comment 60:</a>\nReplying to [@vbraun](#comment%3A54):\n> I think the as version check is correct but `\"$CC\" = GCC` is always false unless you really go out of your way to rename gcc...\n\nOops!",
    "created_at": "2017-05-18T08:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335699",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:60'>Comment 60:</a>
Replying to [@vbraun](#comment%3A54):
> I think the as version check is correct but `"$CC" = GCC` is always false unless you really go out of your way to rename gcc...

Oops!



---

archive/issue_comments_335700.json:
```json
{
    "body": "Changed commit from **[aa0b222](https://github.com/sagemath/sagetrac-mirror/commit/aa0b222388e27db40c9da7e5a91da4f08401c854)** to **[fea0bae](https://github.com/sagemath/sagetrac-mirror/commit/fea0baea54a96d7ae74193295f3fb8620cf0d83e)**",
    "created_at": "2017-05-18T08:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335700",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[aa0b222](https://github.com/sagemath/sagetrac-mirror/commit/aa0b222388e27db40c9da7e5a91da4f08401c854)** to **[fea0bae](https://github.com/sagemath/sagetrac-mirror/commit/fea0baea54a96d7ae74193295f3fb8620cf0d83e)**



---

archive/issue_comments_335701.json:
```json
{
    "body": "<a id='comment:61'>Comment 61:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7467913b56d7ac5deefb7bd3abc0b9ed62265b6d\">7467913</a></td><td><code>Upgrade to libpng-1.6.28</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61ff9185f4c44732e9a3063b812406e00dd02a6a\">61ff918</a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/upgrade_to_latest_libpng' into libpng1629</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa28f4cba1d7589b5b3bd970311981c5fb9bf04d\">aa28f4c</a></td><td><code>Bump to libpng 1.6.29.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be90134ceefadee47a54bb070afb386642e78cbc\">be90134</a></td><td><code>Merge remote-tracking branch 'trac/public/22493' into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fea0baea54a96d7ae74193295f3fb8620cf0d83e\">fea0bae</a></td><td><code>Remove useless gcc check when looking for old as.</code></td></tr></table>\n",
    "created_at": "2017-05-18T08:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335701",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:61'>Comment 61:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7467913b56d7ac5deefb7bd3abc0b9ed62265b6d">7467913</a></td><td><code>Upgrade to libpng-1.6.28</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61ff9185f4c44732e9a3063b812406e00dd02a6a">61ff918</a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/upgrade_to_latest_libpng' into libpng1629</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa28f4cba1d7589b5b3bd970311981c5fb9bf04d">aa28f4c</a></td><td><code>Bump to libpng 1.6.29.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be90134ceefadee47a54bb070afb386642e78cbc">be90134</a></td><td><code>Merge remote-tracking branch 'trac/public/22493' into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fea0baea54a96d7ae74193295f3fb8620cf0d83e">fea0bae</a></td><td><code>Remove useless gcc check when looking for old as.</code></td></tr></table>




---

archive/issue_comments_335702.json:
```json
{
    "body": "<a id='comment:62'>Comment 62:</a>\nArgh, I merged unrelated stuff.",
    "created_at": "2017-05-18T08:22:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335702",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:62'>Comment 62:</a>
Argh, I merged unrelated stuff.



---

archive/issue_comments_335703.json:
```json
{
    "body": "Changed commit from **[fea0bae](https://github.com/sagemath/sagetrac-mirror/commit/fea0baea54a96d7ae74193295f3fb8620cf0d83e)** to **[c9eaefc](https://github.com/sagemath/sagetrac-mirror/commit/c9eaefcc84a3f4473b30d93d697d684135d69d6c)**",
    "created_at": "2017-05-18T08:24:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335703",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fea0bae](https://github.com/sagemath/sagetrac-mirror/commit/fea0baea54a96d7ae74193295f3fb8620cf0d83e)** to **[c9eaefc](https://github.com/sagemath/sagetrac-mirror/commit/c9eaefcc84a3f4473b30d93d697d684135d69d6c)**



---

archive/issue_comments_335704.json:
```json
{
    "body": "<a id='comment:63'>Comment 63:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9eaefcc84a3f4473b30d93d697d684135d69d6c\">c9eaefc</a></td><td><code>Remove useless gcc check when looking for old as.</code></td></tr></table>\n",
    "created_at": "2017-05-18T08:24:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335704",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:63'>Comment 63:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9eaefcc84a3f4473b30d93d697d684135d69d6c">c9eaefc</a></td><td><code>Remove useless gcc check when looking for old as.</code></td></tr></table>




---

archive/issue_events_296422.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2017-05-18T08:25:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296422"
}
```



---

archive/issue_events_296423.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2017-05-18T08:25:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296423"
}
```



---

archive/issue_events_296424.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-05-18T08:51:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296424"
}
```



---

archive/issue_events_296425.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-05-18T08:51:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296425"
}
```



---

archive/issue_comments_335705.json:
```json
{
    "body": "<a id='comment:65'>Comment 65:</a>\nOnce again to the bots.",
    "created_at": "2017-05-18T08:51:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335705",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:65'>Comment 65:</a>
Once again to the bots.



---

archive/issue_events_296426.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-19T22:09:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296426"
}
```



---

archive/issue_events_296427.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-19T22:09:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296427"
}
```



---

archive/issue_comments_335706.json:
```json
{
    "body": "<a id='comment:66'>Comment 66:</a>\n\n```\n[mpir-3.0.0] ./spkg-install: line 168: as_version: command not found\n```\nIn bash you can't have a space before the equal sign in assignment...",
    "created_at": "2017-05-19T22:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335706",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:66'>Comment 66:</a>

```
[mpir-3.0.0] ./spkg-install: line 168: as_version: command not found
```
In bash you can't have a space before the equal sign in assignment...



---

archive/issue_comments_335707.json:
```json
{
    "body": "Changed commit from **[c9eaefc](https://github.com/sagemath/sagetrac-mirror/commit/c9eaefcc84a3f4473b30d93d697d684135d69d6c)** to **[01c9097](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)**",
    "created_at": "2017-05-22T11:48:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335707",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c9eaefc](https://github.com/sagemath/sagetrac-mirror/commit/c9eaefcc84a3f4473b30d93d697d684135d69d6c)** to **[01c9097](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)**



---

archive/issue_comments_335708.json:
```json
{
    "body": "<a id='comment:67'>Comment 67:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab\">01c9097</a></td><td><code>Remove broken spaces.</code></td></tr></table>\n",
    "created_at": "2017-05-22T11:48:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335708",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:67'>Comment 67:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab">01c9097</a></td><td><code>Remove broken spaces.</code></td></tr></table>




---

archive/issue_events_296428.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2017-05-22T11:49:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296428"
}
```



---

archive/issue_events_296429.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2017-05-22T11:49:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296429"
}
```



---

archive/issue_comments_335709.json:
```json
{
    "body": "<a id='comment:69'>Comment 69:</a>\n`@`francois: push the button again?",
    "created_at": "2017-05-24T13:40:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335709",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:69'>Comment 69:</a>
`@`francois: push the button again?



---

archive/issue_events_296430.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-05-24T13:43:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296430"
}
```



---

archive/issue_events_296431.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-05-24T13:43:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296431"
}
```



---

archive/issue_comments_335710.json:
```json
{
    "body": "Changed reviewer from **Fran\u00e7ois Bissey** to **Fran\u00e7ois Bissey, Dima Pasechnik**",
    "created_at": "2017-05-24T13:43:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335710",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Fran√ßois Bissey** to **Fran√ßois Bissey, Dima Pasechnik**



---

archive/issue_comments_335711.json:
```json
{
    "body": "Changed branch from **[public/22493](https://github.com/sagemath/sagetrac-mirror/tree/public/22493)** to **[01c9097](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)**",
    "created_at": "2017-05-26T21:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335711",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/22493](https://github.com/sagemath/sagetrac-mirror/tree/public/22493)** to **[01c9097](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)**



---

archive/issue_events_296432.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-26T21:28:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296432"
}
```



---

archive/issue_events_296433.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "646f124ccd1f8f62972dea19b9b6ab79d54c9f8d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-05-26T21:28:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-296433"
}
```



---

archive/issue_comments_335712.json:
```json
{
    "body": "Changed commit from **[01c9097](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)** to none",
    "created_at": "2017-06-10T12:18:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335712",
    "user": "https://github.com/mezzarobba"
}
```

Changed commit from **[01c9097](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)** to none



---

archive/issue_comments_335713.json:
```json
{
    "body": "<a id='comment:72'>Comment 72:</a>\n\n```\n+# Workaround old GNU as version by disabling assembly use.\n+if [ \"$UNAME\" = Linux ] && [ \"$CC\" = GCC ]; then\n+    as_version = `$AS --version | head -1 | awk 'NF>1{print $NF}'`\n+    case \"$as_version\" in\n+        1.*|2.1*|2.[0-2]*)\n                  ^^^^^^^\n+        echo \"Disable use of assembly because of GNU as < 2.23.\"\n+        export MPN_PATH=generic\n+        ;;\n+    esac\n+fi\n```\n\nShouldn't that be `2.2[0-2]*`? In other words, aren't you disabling assembly for everyone on Linux/gcc here?\n\nSage has become significantly slower on my system (judging from a few quick experiments, perhaps 10-15% slower on average, with integer operations 1.5\u00d7 to 2\u00d7 slower) somewhere between 7.6.rc2 and 8.0.beta9, and I'm wondering if this isn't the cause of the regression...",
    "created_at": "2017-06-10T12:18:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335713",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:72'>Comment 72:</a>

```
+# Workaround old GNU as version by disabling assembly use.
+if [ "$UNAME" = Linux ] && [ "$CC" = GCC ]; then
+    as_version = `$AS --version | head -1 | awk 'NF>1{print $NF}'`
+    case "$as_version" in
+        1.*|2.1*|2.[0-2]*)
                  ^^^^^^^
+        echo "Disable use of assembly because of GNU as < 2.23."
+        export MPN_PATH=generic
+        ;;
+    esac
+fi
```

Shouldn't that be `2.2[0-2]*`? In other words, aren't you disabling assembly for everyone on Linux/gcc here?

Sage has become significantly slower on my system (judging from a few quick experiments, perhaps 10-15% slower on average, with integer operations 1.5√ó to 2√ó slower) somewhere between 7.6.rc2 and 8.0.beta9, and I'm wondering if this isn't the cause of the regression...



---

archive/issue_comments_335714.json:
```json
{
    "body": "<a id='comment:73'>Comment 73:</a>\nReplying to [myself](#comment%3A72): Indeed, changing `2.[0-2]` to `2.2[0-2]` solves the issue. Follow-up at #23209.",
    "created_at": "2017-06-10T12:56:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335714",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:73'>Comment 73:</a>
Replying to [myself](#comment%3A72): Indeed, changing `2.[0-2]` to `2.2[0-2]` solves the issue. Follow-up at #23209.



---

archive/issue_comments_335715.json:
```json
{
    "body": "<a id='comment:74'>Comment 74:</a>\nThis ticket caused a significant performance regression: #23327",
    "created_at": "2017-06-27T10:39:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335715",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:74'>Comment 74:</a>
This ticket caused a significant performance regression: #23327



---

archive/issue_comments_335716.json:
```json
{
    "body": "<a id='comment:75'>Comment 75:</a>\nReplying to [@jdemeyer](#comment%3A74):\n> This ticket caused a significant performance regression: #23327\n\nThis is not fixed by #23146?",
    "created_at": "2017-06-27T13:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-335716",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:75'>Comment 75:</a>
Replying to [@jdemeyer](#comment%3A74):
> This ticket caused a significant performance regression: #23327

This is not fixed by #23146?
