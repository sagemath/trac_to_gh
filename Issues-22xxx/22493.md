# Issue 22493: upgrade to MPIR-3.0.0

archive/issues_022256.json:
```json
{
    "assignees": [],
    "body": "New upstream version\n\n    http://mpir.org/mpir-3.0.0.tar.bz2\n\nThis new version requires [yasm](http://yasm.tortall.net/) for assembler code.\n\nDepends on #22748\n\nCC:  @mkoeppe @jdemeyer @vbraun @kiwifb\n\nKeywords: **days84**\n\nBranch: **[`01c9097`](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)**\n\nReviewer: **Fran\u00e7ois Bissey, Dima Pasechnik**\n\nAuthor: **Vincent Delecroix, Jean-Pierre Flori**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22493_\n\n",
    "closed_at": "2017-05-26T21:28:05Z",
    "created_at": "2017-03-02T15:48:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "upgrade to MPIR-3.0.0",
    "type": "issue",
    "updated_at": "2017-06-27T13:26:16Z",
    "url": "https://github.com/sagemath/sage/issues/22493",
    "user": "https://github.com/videlec"
}
```
New upstream version

    http://mpir.org/mpir-3.0.0.tar.bz2

This new version requires [yasm](http://yasm.tortall.net/) for assembler code.

Depends on #22748

CC:  @mkoeppe @jdemeyer @vbraun @kiwifb

Keywords: **days84**

Branch: **[`01c9097`](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)**

Reviewer: **François Bissey, Dima Pasechnik**

Author: **Vincent Delecroix, Jean-Pierre Flori**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/22493_





---

archive/issue_events_311586.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-02T15:48:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311586"
}
```



---

archive/issue_events_311587.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-02T15:48:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311587"
}
```



---

archive/issue_events_311588.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-02T15:48:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311588"
}
```



---

archive/issue_events_311589.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-03-02T15:48:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311589"
}
```



---

archive/issue_comments_332937.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n New upstream version\n \n     http://mpir.org/mpir-3.0.0.tar.bz2\n+\n+This new version requires [yasm](http://yasm.tortall.net/) for assembler code.\n``````\n",
    "created_at": "2017-03-02T15:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332937",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 New upstream version
 
     http://mpir.org/mpir-3.0.0.tar.bz2
+
+This new version requires [yasm](http://yasm.tortall.net/) for assembler code.
``````




---

archive/issue_comments_332938.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739\"><code>f68bc8e</code></a></td><td><code>upgrade mpir to 3-0-0</code></td></tr></table>\n",
    "created_at": "2017-03-02T15:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332938",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739"><code>f68bc8e</code></a></td><td><code>upgrade mpir to 3-0-0</code></td></tr></table>




---

archive/issue_comments_332939.json:
```json
{
    "body": "Branch: **[public/22493](https://github.com/sagemath/sagetrac-mirror/tree/public/22493)**",
    "created_at": "2017-03-02T15:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332939",
    "user": "https://github.com/videlec"
}
```

Branch: **[public/22493](https://github.com/sagemath/sagetrac-mirror/tree/public/22493)**



---

archive/issue_comments_332940.json:
```json
{
    "body": "Commit: **[`f68bc8e`](https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739)**",
    "created_at": "2017-03-02T15:57:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332940",
    "user": "https://github.com/videlec"
}
```

Commit: **[`f68bc8e`](https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739)**



---

archive/issue_comments_332941.json:
```json
{
    "body": "Changed keywords from none to **days84**",
    "created_at": "2017-03-02T15:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332941",
    "user": "https://github.com/videlec"
}
```

Changed keywords from none to **days84**



---

archive/issue_comments_332942.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI suppose the documentation should mention dependence on yasm.\n(The version on the yasm's website appears to be 1.3, same as on a couple of Linux\nmachines I checked, so that's matter of doing `apt-get install yasm` or something like this. Although on `arando` buildbot it's 1.2, not 1.3, and so something would have to be done to such older systems).",
    "created_at": "2017-03-03T10:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332942",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:4" align="right">comment:4</div>

I suppose the documentation should mention dependence on yasm.
(The version on the yasm's website appears to be 1.3, same as on a couple of Linux
machines I checked, so that's matter of doing `apt-get install yasm` or something like this. Although on `arando` buildbot it's 1.2, not 1.3, and so something would have to be done to such older systems).



---

archive/issue_comments_332943.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@dimpase](#comment%3A4):\n> I suppose the documentation should mention dependence on yasm.\n> (The version on the yasm's website appears to be 1.3, same as on a couple of Linux\n> machines I checked, so that's matter of doing `apt-get install yasm` or something like this. Although on `arando` buildbot it's 1.2, not 1.3, and so something would have to be done to such older systems).\n\nDima, do we need yasm 1.3 to compile MPIR 3.0.0? Building MPIR on arando would fail?",
    "created_at": "2017-03-03T11:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332943",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@dimpase](#comment%3A4):
> I suppose the documentation should mention dependence on yasm.
> (The version on the yasm's website appears to be 1.3, same as on a couple of Linux
> machines I checked, so that's matter of doing `apt-get install yasm` or something like this. Although on `arando` buildbot it's 1.2, not 1.3, and so something would have to be done to such older systems).

Dima, do we need yasm 1.3 to compile MPIR 3.0.0? Building MPIR on arando would fail?



---

archive/issue_comments_332944.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@videlec](#comment%3A5):\n> do we need yasm 1.3 to compile MPIR 3.0.0? Building MPIR on arando would fail?\n\nBull writes in no uncertain terms that you need the latest version of yasm.\nAs 1.2 is almost 6 years old, I imagine that on new CPUs there could be problems, as the  code for the CPU won't compile.\n\narando has old CPU, more that 6 years old in fact, and I just checked that there MPIR compiles and passes all its checks (with system's gcc 6.2 and yasm 1.2).",
    "created_at": "2017-03-03T12:23:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332944",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@videlec](#comment%3A5):
> do we need yasm 1.3 to compile MPIR 3.0.0? Building MPIR on arando would fail?

Bull writes in no uncertain terms that you need the latest version of yasm.
As 1.2 is almost 6 years old, I imagine that on new CPUs there could be problems, as the  code for the CPU won't compile.

arando has old CPU, more that 6 years old in fact, and I just checked that there MPIR compiles and passes all its checks (with system's gcc 6.2 and yasm 1.2).



---

archive/issue_comments_332945.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nWe decided to remove the inlcuded yasm form mpir sources.\nThat was the only sane thing to do... so Sage needs to ship it separately or we make it a build dependency.",
    "created_at": "2017-03-14T13:06:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332945",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:7" align="right">comment:7</div>

We decided to remove the inlcuded yasm form mpir sources.
That was the only sane thing to do... so Sage needs to ship it separately or we make it a build dependency.



---

archive/issue_comments_332946.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\n`@`vincent: do you plan on modifying this ticket to include yasm?",
    "created_at": "2017-04-03T11:42:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332946",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:8" align="right">comment:8</div>

`@`vincent: do you plan on modifying this ticket to include yasm?



---

archive/issue_comments_332947.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@jpflori](#comment%3A8):\n> `@`vincent: do you plan on modifying this ticket to include yasm?\n\nNope. Would better be a dependency ticket.",
    "created_at": "2017-04-03T11:44:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332947",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@jpflori](#comment%3A8):
> `@`vincent: do you plan on modifying this ticket to include yasm?

Nope. Would better be a dependency ticket.



---

archive/issue_comments_332948.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nSee #22748 for yasm",
    "created_at": "2017-04-03T11:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332948",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

See #22748 for yasm



---

archive/issue_comments_332949.json:
```json
{
    "body": "Dependencies: **#22748**",
    "created_at": "2017-04-03T11:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332949",
    "user": "https://github.com/videlec"
}
```

Dependencies: **#22748**



---

archive/issue_comments_332950.json:
```json
{
    "body": "Changed commit from **[`f68bc8e`](https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739)** to **[`16058ef`](https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee)**",
    "created_at": "2017-04-25T16:47:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332950",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f68bc8e`](https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739)** to **[`16058ef`](https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee)**



---

archive/issue_comments_332951.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d16afb5a818876936c1b22bc80edf4b0275088b\"><code>8d16afb</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d723dcf5455ff95d40bfc24a11779efd69589aa\"><code>4d723dc</code></a></td><td><code>Add yasm as a standard package.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f365fcfb9b89eeb43d0b0982d9c8ae48ba98f00\"><code>0f365fc</code></a></td><td><code>Merge branch 'yasm130' into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee\"><code>16058ef</code></a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr></table>\n",
    "created_at": "2017-04-25T16:47:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332951",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d16afb5a818876936c1b22bc80edf4b0275088b"><code>8d16afb</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d723dcf5455ff95d40bfc24a11779efd69589aa"><code>4d723dc</code></a></td><td><code>Add yasm as a standard package.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f365fcfb9b89eeb43d0b0982d9c8ae48ba98f00"><code>0f365fc</code></a></td><td><code>Merge branch 'yasm130' into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee"><code>16058ef</code></a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr></table>




---

archive/issue_events_311590.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-04-25T16:48:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311590"
}
```



---

archive/issue_comments_332952.json:
```json
{
    "body": "Changed author from **Vincent Delecroix** to **Vincent Delecroix, Jean-Pierre Flori**",
    "created_at": "2017-04-25T16:48:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332952",
    "user": "https://github.com/jpflori"
}
```

Changed author from **Vincent Delecroix** to **Vincent Delecroix, Jean-Pierre Flori**



---

archive/issue_comments_332953.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d16afb5a818876936c1b22bc80edf4b0275088b\"><code>8d16afb</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d723dcf5455ff95d40bfc24a11779efd69589aa\"><code>4d723dc</code></a></td><td><code>Add yasm as a standard package.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f365fcfb9b89eeb43d0b0982d9c8ae48ba98f00\"><code>0f365fc</code></a></td><td><code>Merge branch 'yasm130' into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee\"><code>16058ef</code></a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr></table>\n",
    "created_at": "2017-04-25T16:48:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332953",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:12"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d16afb5a818876936c1b22bc80edf4b0275088b"><code>8d16afb</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d723dcf5455ff95d40bfc24a11779efd69589aa"><code>4d723dc</code></a></td><td><code>Add yasm as a standard package.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f365fcfb9b89eeb43d0b0982d9c8ae48ba98f00"><code>0f365fc</code></a></td><td><code>Merge branch 'yasm130' into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee"><code>16058ef</code></a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr></table>




---

archive/issue_comments_332954.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nSeems to work fine for me.",
    "created_at": "2017-04-26T12:58:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332954",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:13" align="right">comment:13</div>

Seems to work fine for me.



---

archive/issue_comments_332955.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nthis and #22748 seem to work on clang/FreeBSD.",
    "created_at": "2017-04-27T00:04:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332955",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">comment:14</div>

this and #22748 seem to work on clang/FreeBSD.



---

archive/issue_comments_332956.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nGood to go in?",
    "created_at": "2017-04-28T07:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332956",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:15" align="right">comment:15</div>

Good to go in?



---

archive/issue_comments_332957.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nYes.",
    "created_at": "2017-04-28T07:30:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332957",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">comment:16</div>

Yes.



---

archive/issue_comments_332958.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3057c797a3230875c26cf2dc4117e61cdd07ecda\"><code>3057c79</code></a></td><td><code>Add configure check for yasm</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6377eaeea02655d3238b1ab389fd236d9d42e988\"><code>6377eae</code></a></td><td><code>upgrade mpir to 3-0-0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c39a193b70b7d0e32f690b307dcccf3c123374d1\"><code>c39a193</code></a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr></table>\n",
    "created_at": "2017-04-28T12:17:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332958",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3057c797a3230875c26cf2dc4117e61cdd07ecda"><code>3057c79</code></a></td><td><code>Add configure check for yasm</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6377eaeea02655d3238b1ab389fd236d9d42e988"><code>6377eae</code></a></td><td><code>upgrade mpir to 3-0-0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c39a193b70b7d0e32f690b307dcccf3c123374d1"><code>c39a193</code></a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr></table>




---

archive/issue_comments_332959.json:
```json
{
    "body": "Changed commit from **[`16058ef`](https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee)** to **[`c39a193`](https://github.com/sagemath/sagetrac-mirror/commit/c39a193b70b7d0e32f690b307dcccf3c123374d1)**",
    "created_at": "2017-04-28T12:17:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332959",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`16058ef`](https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee)** to **[`c39a193`](https://github.com/sagemath/sagetrac-mirror/commit/c39a193b70b7d0e32f690b307dcccf3c123374d1)**



---

archive/issue_comments_332960.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nIs that a positive review?",
    "created_at": "2017-05-04T07:43:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332960",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">comment:18</div>

Is that a positive review?



---

archive/issue_comments_332961.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI would say so!",
    "created_at": "2017-05-04T08:53:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332961",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:19" align="right">comment:19</div>

I would say so!



---

archive/issue_comments_332962.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2017-05-04T09:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332962",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **François Bissey**



---

archive/issue_comments_332963.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAnd of we go....",
    "created_at": "2017-05-04T09:52:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332963",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:20" align="right">comment:20</div>

And of we go....



---

archive/issue_events_311591.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-05-04T09:52:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311591"
}
```



---

archive/issue_events_311592.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-05-04T09:52:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311592"
}
```



---

archive/issue_comments_332964.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nOn Debian 7 64-bit: http://build.sagedev.org/#/builders/80/builds/1/steps/5/logs/stdio\n\n```\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c nextprime.c  -fPIC -DPIC -o .libs/nextprime.o\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c nextprime.c -o nextprime.o >/dev/null 2>&1\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c primesieve.c -o primesieve.o >/dev/null 2>&1\n[mpir-3.0.0] /bin/bash ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o version.lo version.c\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c  -fPIC -DPIC -o .libs/version.o\n[mpir-3.0.0] /bin/bash ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o tal-reent.lo tal-reent.c\n[mpir-3.0.0] make[6]: *** No rule to make target `mpn/addmul_1.lo', needed by `libmpir.la'.\n[mpir-3.0.0] make[6]: *** No rule to make target `mpn/mul_basecase.lo', needed by `libmpir.la'.\n[mpir-3.0.0] make[6]: *** No rule to make target `mpn/sqr_basecase.lo', needed by `libmpir.la'.\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c -o version.o >/dev/null 2>&1\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c  -fPIC -DPIC -o .libs/tal-reent.o\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c -o tal-reent.o >/dev/null 2>&1\n[mpir-3.0.0] /bin/bash ./libtool  --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o cxx/dummy.lo cxx/dummy.cc\n[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc  -fPIC -DPIC -o cxx/.libs/dummy.o\n[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc -o cxx/dummy.o >/dev/null 2>&1\n[mpir-3.0.0] make[6]: Target `all-am' not remade because of errors.\n[mpir-3.0.0] make[6]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'\n[mpir-3.0.0] make[5]: *** [all-recursive] Error 1\n[mpir-3.0.0] make[5]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'\n[mpir-3.0.0] make[4]: *** [all] Error 2\n[mpir-3.0.0] make[4]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'\n[mpir-3.0.0] Error building MPIR.\n```",
    "created_at": "2017-05-06T21:43:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332964",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:21" align="right">comment:21</div>

On Debian 7 64-bit: http://build.sagedev.org/#/builders/80/builds/1/steps/5/logs/stdio

```
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c nextprime.c  -fPIC -DPIC -o .libs/nextprime.o
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c nextprime.c -o nextprime.o >/dev/null 2>&1
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c primesieve.c -o primesieve.o >/dev/null 2>&1
[mpir-3.0.0] /bin/bash ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o version.lo version.c
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c  -fPIC -DPIC -o .libs/version.o
[mpir-3.0.0] /bin/bash ./libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o tal-reent.lo tal-reent.c
[mpir-3.0.0] make[6]: *** No rule to make target `mpn/addmul_1.lo', needed by `libmpir.la'.
[mpir-3.0.0] make[6]: *** No rule to make target `mpn/mul_basecase.lo', needed by `libmpir.la'.
[mpir-3.0.0] make[6]: *** No rule to make target `mpn/sqr_basecase.lo', needed by `libmpir.la'.
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c -o version.o >/dev/null 2>&1
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c  -fPIC -DPIC -o .libs/tal-reent.o
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c -o tal-reent.o >/dev/null 2>&1
[mpir-3.0.0] /bin/bash ./libtool  --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o cxx/dummy.lo cxx/dummy.cc
[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc  -fPIC -DPIC -o cxx/.libs/dummy.o
[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc -o cxx/dummy.o >/dev/null 2>&1
[mpir-3.0.0] make[6]: Target `all-am' not remade because of errors.
[mpir-3.0.0] make[6]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'
[mpir-3.0.0] make[5]: *** [all-recursive] Error 1
[mpir-3.0.0] make[5]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'
[mpir-3.0.0] make[4]: *** [all] Error 2
[mpir-3.0.0] make[4]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'
[mpir-3.0.0] Error building MPIR.
```



---

archive/issue_events_311593.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-06T21:43:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311593"
}
```



---

archive/issue_events_311594.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-06T21:43:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311594"
}
```



---

archive/issue_comments_332965.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nHum\n\n```\n[mpir-3.0.0] libtool: compile:  ../mpn/m4-ccas --m4=m4 gcc -c -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -I.. -DOPERATION_addmul_1 -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -I. -I.. addmul_1.asm  -fPIC -DPIC -o .libs/addmul_1.o\n[mpir-3.0.0] m4  -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -DOPERATION_addmul_1 -DPIC addmul_1.asm >tmp-addmul_1.s\n[mpir-3.0.0]  gcc -c -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -I.. -DOPERATION_addmul_1 -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -I. -I.. tmp-addmul_1.s -fPIC -DPIC -o .libs/addmul_1.o\n[mpir-3.0.0] libtool: compile:  ../strip_fPIC.sh /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64 submul_1.as  -fPIC -DPIC -o .libs/submul_1.o\n[mpir-3.0.0] /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64 submul_1.as -D PIC -o .libs/submul_1.o\n[mpir-3.0.0] libtool: compile:  ../strip_fPIC.sh /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64 submul_1.as -o submul_1.o >/dev/null 2>&1\n[mpir-3.0.0] tmp-addmul_1.s: Assembler messages:\n[mpir-3.0.0] tmp-addmul_1.s:152: Error: no such instruction: `adox (%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:154: Error: no such instruction: `adox %rcx,%rax'\n[mpir-3.0.0] tmp-addmul_1.s:166: Error: no such instruction: `adox -8(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:167: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:171: Error: no such instruction: `adox (%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:174: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] tmp-addmul_1.s:176: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:177: Error: no such instruction: `adox 8(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:181: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] tmp-addmul_1.s:182: Error: no such instruction: `adox 16(%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:185: Error: no such instruction: `adox 24(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:186: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:189: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] tmp-addmul_1.s:190: Error: no such instruction: `adox 32(%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:193: Error: no such instruction: `adox 40(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:194: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:196: Error: no such instruction: `adox 48(%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:200: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] make[6]: *** [addmul_1.lo] Error 1\n```",
    "created_at": "2017-05-06T21:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332965",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:23" align="right">comment:23</div>

Hum

```
[mpir-3.0.0] libtool: compile:  ../mpn/m4-ccas --m4=m4 gcc -c -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -I.. -DOPERATION_addmul_1 -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -I. -I.. addmul_1.asm  -fPIC -DPIC -o .libs/addmul_1.o
[mpir-3.0.0] m4  -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -DOPERATION_addmul_1 -DPIC addmul_1.asm >tmp-addmul_1.s
[mpir-3.0.0]  gcc -c -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -I.. -DOPERATION_addmul_1 -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -I. -I.. tmp-addmul_1.s -fPIC -DPIC -o .libs/addmul_1.o
[mpir-3.0.0] libtool: compile:  ../strip_fPIC.sh /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64 submul_1.as  -fPIC -DPIC -o .libs/submul_1.o
[mpir-3.0.0] /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64 submul_1.as -D PIC -o .libs/submul_1.o
[mpir-3.0.0] libtool: compile:  ../strip_fPIC.sh /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64 submul_1.as -o submul_1.o >/dev/null 2>&1
[mpir-3.0.0] tmp-addmul_1.s: Assembler messages:
[mpir-3.0.0] tmp-addmul_1.s:152: Error: no such instruction: `adox (%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:154: Error: no such instruction: `adox %rcx,%rax'
[mpir-3.0.0] tmp-addmul_1.s:166: Error: no such instruction: `adox -8(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:167: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:171: Error: no such instruction: `adox (%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:174: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] tmp-addmul_1.s:176: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:177: Error: no such instruction: `adox 8(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:181: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] tmp-addmul_1.s:182: Error: no such instruction: `adox 16(%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:185: Error: no such instruction: `adox 24(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:186: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:189: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] tmp-addmul_1.s:190: Error: no such instruction: `adox 32(%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:193: Error: no such instruction: `adox 40(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:194: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:196: Error: no such instruction: `adox 48(%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:200: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] make[6]: *** [addmul_1.lo] Error 1
```



---

archive/issue_comments_332966.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nhttp://stackoverflow.com/questions/29747508/what-is-the-difference-between-the-adc-and-adcx-instructions-on-ia32-ia64 \nI'd say we have a misdetection of the hardware or the assmebler used by gcc doesn't support those instructions.",
    "created_at": "2017-05-06T23:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332966",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:24" align="right">comment:24</div>

http://stackoverflow.com/questions/29747508/what-is-the-difference-between-the-adc-and-adcx-instructions-on-ia32-ia64 
I'd say we have a misdetection of the hardware or the assmebler used by gcc doesn't support those instructions.



---

archive/issue_comments_332967.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI'd say the assembler is yasm.",
    "created_at": "2017-05-10T13:26:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332967",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:25" align="right">comment:25</div>

I'd say the assembler is yasm.



---

archive/issue_comments_332968.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nCan't seem to get any info from the (terrible) buildbot pages...\nSeems like a wrong arch choice by MPIR configure script.",
    "created_at": "2017-05-10T13:45:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332968",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:26" align="right">comment:26</div>

Can't seem to get any info from the (terrible) buildbot pages...
Seems like a wrong arch choice by MPIR configure script.



---

archive/issue_events_311595.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-10T14:03:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311595"
}
```



---

archive/issue_events_311596.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-10T14:03:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311596"
}
```



---

archive/issue_comments_332969.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThe error message is from as, not yasm:\n\n```\n$ strings local/bin/yasm  | grep such\n$ strings /usr/bin/as  | grep such\nno such architecture modifier: `%s'\nbroadcast is needed for operand of such type\nno such architecture: `%s'\nno such instruction: `%s'\n```\nUnless yasm calls as somewhere under the hood, though I don't think thats the case...",
    "created_at": "2017-05-14T08:43:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332969",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:28" align="right">comment:28</div>

The error message is from as, not yasm:

```
$ strings local/bin/yasm  | grep such
$ strings /usr/bin/as  | grep such
no such architecture modifier: `%s'
broadcast is needed for operand of such type
no such architecture: `%s'
no such instruction: `%s'
```
Unless yasm calls as somewhere under the hood, though I don't think thats the case...



---

archive/issue_comments_332970.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI.e. the error comes from \n\n```\ngcc -c -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -I.. -DOPERATION_addmul_1 -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -I. -I.. tmp-addmul_1.s -fPIC -DPIC -o .libs/addmul_1.o\n```\nwhich does not use yasm.",
    "created_at": "2017-05-14T08:46:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332970",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:29" align="right">comment:29</div>

I.e. the error comes from 

```
gcc -c -DHAVE_CONFIG_H -D__GMP_WITHIN_GMP -I.. -DOPERATION_addmul_1 -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -I. -I.. tmp-addmul_1.s -fPIC -DPIC -o .libs/addmul_1.o
```
which does not use yasm.



---

archive/issue_comments_332971.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nOk, that's right.\nMPIR uses yasm or not based on the file extension.\n\nMaybe the error is just because as on debian 7 is just too old?",
    "created_at": "2017-05-14T19:38:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332971",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:30" align="right">comment:30</div>

Ok, that's right.
MPIR uses yasm or not based on the file extension.

Maybe the error is just because as on debian 7 is just too old?



---

archive/issue_comments_332972.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nCannot reproduce this on an unstable debian with the exact same command lines.",
    "created_at": "2017-05-15T12:45:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332972",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:31" align="right">comment:31</div>

Cannot reproduce this on an unstable debian with the exact same command lines.



---

archive/issue_comments_332973.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nI would say as is indeed too old.\nThe problematic file is:\n* https://github.com/wbhart/mpir/blob/master/mpn/x86_64/skylake/avx/addmul_1.asm\nusing adcx/adox instructions.\nThese were added in a post july 2012 as release:\n* https://sourceware.org/git/gitweb.cgi?p=binutils-gdb.git;a=commit;h=e2e1fcde622f2f6cedfd7fb6615aa6e136f21dec\nAnd debian wheezy ships binutils 2.22 which is pre-2012:\n* https://ftp.gnu.org/gnu/binutils/\n\nSo can we ignore this very outdated OS?\nIt's a Debian old stable, so quite very old...",
    "created_at": "2017-05-15T12:55:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332973",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:32" align="right">comment:32</div>

I would say as is indeed too old.
The problematic file is:
* https://github.com/wbhart/mpir/blob/master/mpn/x86_64/skylake/avx/addmul_1.asm
using adcx/adox instructions.
These were added in a post july 2012 as release:
* https://sourceware.org/git/gitweb.cgi?p=binutils-gdb.git;a=commit;h=e2e1fcde622f2f6cedfd7fb6615aa6e136f21dec
And debian wheezy ships binutils 2.22 which is pre-2012:
* https://ftp.gnu.org/gnu/binutils/

So can we ignore this very outdated OS?
It's a Debian old stable, so quite very old...



---

archive/issue_comments_332974.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nOne could argue that wheezy has LTS till may 2018:\n* https://www.debian.org/releases/wheezy/",
    "created_at": "2017-05-15T12:58:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332974",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:33" align="right">comment:33</div>

One could argue that wheezy has LTS till may 2018:
* https://www.debian.org/releases/wheezy/



---

archive/issue_comments_332975.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nHow would the version of binutils matter? Isn't the asm code meant to be compiled with an up to date yasm installed by Sage?",
    "created_at": "2017-05-15T13:23:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332975",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:34" align="right">comment:34</div>

How would the version of binutils matter? Isn't the asm code meant to be compiled with an up to date yasm installed by Sage?



---

archive/issue_comments_332976.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nNope, some assembly files are compiled with yasm, others with as...",
    "created_at": "2017-05-15T13:25:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332976",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:35" align="right">comment:35</div>

Nope, some assembly files are compiled with yasm, others with as...



---

archive/issue_comments_332977.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@jpflori](#comment%3A35):\n> Nope, some assembly files are compiled with yasm, others with as...\n\nOK, so we either have to tell the users to upgrade binutils to something meaningful, or ship our own `gas`...",
    "created_at": "2017-05-15T13:28:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332977",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@jpflori](#comment%3A35):
> Nope, some assembly files are compiled with yasm, others with as...

OK, so we either have to tell the users to upgrade binutils to something meaningful, or ship our own `gas`...



---

archive/issue_comments_332978.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nNot so many users whould use a pre-2012 `gas`...\nWe can also forbid the use of assembly when `gas` is too old.\nThat's the best solution I have in mind to please the patchbot running Debian 7.",
    "created_at": "2017-05-15T13:34:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332978",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:37" align="right">comment:37</div>

Not so many users whould use a pre-2012 `gas`...
We can also forbid the use of assembly when `gas` is too old.
That's the best solution I have in mind to please the patchbot running Debian 7.



---

archive/issue_comments_332979.json:
```json
{
    "body": "Changed commit from **[`c39a193`](https://github.com/sagemath/sagetrac-mirror/commit/c39a193b70b7d0e32f690b307dcccf3c123374d1)** to **[`9573e15`](https://github.com/sagemath/sagetrac-mirror/commit/9573e155b79a719db84d0ea2d2842abb7885d84e)**",
    "created_at": "2017-05-15T15:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332979",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c39a193`](https://github.com/sagemath/sagetrac-mirror/commit/c39a193b70b7d0e32f690b307dcccf3c123374d1)** to **[`9573e15`](https://github.com/sagemath/sagetrac-mirror/commit/9573e155b79a719db84d0ea2d2842abb7885d84e)**



---

archive/issue_comments_332980.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739\"><code>f68bc8e</code></a></td><td><code>upgrade mpir to 3-0-0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d16afb5a818876936c1b22bc80edf4b0275088b\"><code>8d16afb</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f365fcfb9b89eeb43d0b0982d9c8ae48ba98f00\"><code>0f365fc</code></a></td><td><code>Merge branch 'yasm130' into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee\"><code>16058ef</code></a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/357103ac48fc1e10d55e1fae2c5a07c43858a2de\"><code>357103a</code></a></td><td><code>Merge branch 'public/22493' of git://trac.sagemath.org/sage into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ddc2f11aa9af630b0e5873bb93bceb3c0e571c2\"><code>8ddc2f1</code></a></td><td><code>MPIR 3.0.0 does not build yasm anymore.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8205366bd4bfe78b25781533622d7633e8376454\"><code>8205366</code></a></td><td><code>But MPIR always looks for it even on archs where it is not used.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9573e155b79a719db84d0ea2d2842abb7885d84e\"><code>9573e15</code></a></td><td><code>Check GNU as version when building MPIR.</code></td></tr></table>\n",
    "created_at": "2017-05-15T15:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332980",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f68bc8ea0bcfc6d9ed6c72bbeb94e08aff527739"><code>f68bc8e</code></a></td><td><code>upgrade mpir to 3-0-0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d16afb5a818876936c1b22bc80edf4b0275088b"><code>8d16afb</code></a></td><td><code>Merge remote-tracking branch 'trac/develop' into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f365fcfb9b89eeb43d0b0982d9c8ae48ba98f00"><code>0f365fc</code></a></td><td><code>Merge branch 'yasm130' into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16058efed507d1c8137c8500f87730b0c56d9fee"><code>16058ef</code></a></td><td><code>Add build time yasm dependency to mpir.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/357103ac48fc1e10d55e1fae2c5a07c43858a2de"><code>357103a</code></a></td><td><code>Merge branch 'public/22493' of git://trac.sagemath.org/sage into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ddc2f11aa9af630b0e5873bb93bceb3c0e571c2"><code>8ddc2f1</code></a></td><td><code>MPIR 3.0.0 does not build yasm anymore.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8205366bd4bfe78b25781533622d7633e8376454"><code>8205366</code></a></td><td><code>But MPIR always looks for it even on archs where it is not used.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9573e155b79a719db84d0ea2d2842abb7885d84e"><code>9573e15</code></a></td><td><code>Check GNU as version when building MPIR.</code></td></tr></table>




---

archive/issue_events_311597.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-15T15:35:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311597"
}
```



---

archive/issue_events_311598.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-15T15:35:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311598"
}
```



---

archive/issue_comments_332981.json:
```json
{
    "body": "Changed commit from **[`9573e15`](https://github.com/sagemath/sagetrac-mirror/commit/9573e155b79a719db84d0ea2d2842abb7885d84e)** to **[`cb8a3f7`](https://github.com/sagemath/sagetrac-mirror/commit/cb8a3f7beeb1fd57d9a7ce3180bffad7f78867cf)**",
    "created_at": "2017-05-15T15:39:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332981",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9573e15`](https://github.com/sagemath/sagetrac-mirror/commit/9573e155b79a719db84d0ea2d2842abb7885d84e)** to **[`cb8a3f7`](https://github.com/sagemath/sagetrac-mirror/commit/cb8a3f7beeb1fd57d9a7ce3180bffad7f78867cf)**



---

archive/issue_comments_332982.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb8a3f7beeb1fd57d9a7ce3180bffad7f78867cf\"><code>cb8a3f7</code></a></td><td><code>Echo comment when skipping yasm check.</code></td></tr></table>\n",
    "created_at": "2017-05-15T15:39:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332982",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb8a3f7beeb1fd57d9a7ce3180bffad7f78867cf"><code>cb8a3f7</code></a></td><td><code>Echo comment when skipping yasm check.</code></td></tr></table>




---

archive/issue_comments_332983.json:
```json
{
    "body": "Changed commit from **[`cb8a3f7`](https://github.com/sagemath/sagetrac-mirror/commit/cb8a3f7beeb1fd57d9a7ce3180bffad7f78867cf)** to **[`aa0b222`](https://github.com/sagemath/sagetrac-mirror/commit/aa0b222388e27db40c9da7e5a91da4f08401c854)**",
    "created_at": "2017-05-15T15:41:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332983",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cb8a3f7`](https://github.com/sagemath/sagetrac-mirror/commit/cb8a3f7beeb1fd57d9a7ce3180bffad7f78867cf)** to **[`aa0b222`](https://github.com/sagemath/sagetrac-mirror/commit/aa0b222388e27db40c9da7e5a91da4f08401c854)**



---

archive/issue_comments_332984.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa0b222388e27db40c9da7e5a91da4f08401c854\"><code>aa0b222</code></a></td><td><code>This should work and be useful on non-linux systems.</code></td></tr></table>\n",
    "created_at": "2017-05-15T15:41:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332984",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa0b222388e27db40c9da7e5a91da4f08401c854"><code>aa0b222</code></a></td><td><code>This should work and be useful on non-linux systems.</code></td></tr></table>




---

archive/issue_comments_332985.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nIt would be nice to get this into Sage 8.0.",
    "created_at": "2017-05-16T08:48:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332985",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:42" align="right">comment:42</div>

It would be nice to get this into Sage 8.0.



---

archive/issue_events_311599.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-05-16T09:11:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311599"
}
```



---

archive/issue_events_311600.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-05-16T09:11:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311600"
}
```



---

archive/issue_comments_332986.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nOK, sorry for the delay. It looks OK to me. It will work on all the systems we officially support.\n\nFor the records if you are in that kind of trivia `uname -m` is not portable (but is OK across the platform we support so no need to change). For bonus points, can you tell me what kind of system I am testing here\n\n```\n[xcat1-c][/]> uname -m\n00F6B2734C00\n```",
    "created_at": "2017-05-16T09:11:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332986",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:43" align="right">comment:43</div>

OK, sorry for the delay. It looks OK to me. It will work on all the systems we officially support.

For the records if you are in that kind of trivia `uname -m` is not portable (but is OK across the platform we support so no need to change). For bonus points, can you tell me what kind of system I am testing here

```
[xcat1-c][/]> uname -m
00F6B2734C00
```



---

archive/issue_comments_332987.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\n\n```\n-bash-4.3$ uname -m\n00F84C0C4C00\n```",
    "created_at": "2017-05-16T09:47:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332987",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:44" align="right">comment:44</div>


```
-bash-4.3$ uname -m
00F84C0C4C00
```



---

archive/issue_comments_332988.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nShould have known you'd have access to one of those too.",
    "created_at": "2017-05-16T09:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332988",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:45" align="right">comment:45</div>

Should have known you'd have access to one of those too.



---

archive/issue_comments_332989.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nOn FreeBSD with clang this does not work, as it misidentifies the compiler as gcc and then trips over itself. Does it work with clang on OSX?",
    "created_at": "2017-05-16T20:11:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332989",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:46" align="right">comment:46</div>

On FreeBSD with clang this does not work, as it misidentifies the compiler as gcc and then trips over itself. Does it work with clang on OSX?



---

archive/issue_comments_332990.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI haven't tried yet I must say. Can you post a log so I can see how it trips itself? It'll probably be quicker for me to try on linux+clang actually.",
    "created_at": "2017-05-16T21:09:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332990",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:47" align="right">comment:47</div>

I haven't tried yet I must say. Can you post a log so I can see how it trips itself? It'll probably be quicker for me to try on linux+clang actually.



---

archive/issue_comments_332991.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@kiwifb](#comment%3A47):\n> I haven't tried yet I must say. Can you post a log so I can see how it trips itself? It'll probably be quicker for me to try on linux+clang actually.\n\nit actually works on FreeBSD/clang, sorry for noise. I used wrong C++ compiler, with `clang++-devel` it works like a charm.",
    "created_at": "2017-05-16T21:36:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332991",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@kiwifb](#comment%3A47):
> I haven't tried yet I must say. Can you post a log so I can see how it trips itself? It'll probably be quicker for me to try on linux+clang actually.

it actually works on FreeBSD/clang, sorry for noise. I used wrong C++ compiler, with `clang++-devel` it works like a charm.



---

archive/issue_comments_332992.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nI just finished building `mpir` on linux+clang without a hitch either.",
    "created_at": "2017-05-16T21:37:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332992",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:49" align="right">comment:49</div>

I just finished building `mpir` on linux+clang without a hitch either.



---

archive/issue_events_311601.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-17T19:38:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311601"
}
```



---

archive/issue_events_311602.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-17T19:38:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311602"
}
```



---

archive/issue_comments_332993.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nnow fails with\n\n```\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c  -fPIC -DPIC -o .libs/version.o\n[mpir-3.0.0] make[6]: *** No rule to make target `mpn/addmul_1.lo', needed by `libmpir.la'.\n[mpir-3.0.0] make[6]: *** No rule to make target `mpn/mul_basecase.lo', needed by `libmpir.la'.\n[mpir-3.0.0] make[6]: *** No rule to make target `mpn/sqr_basecase.lo', needed by `libmpir.la'.\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c  -fPIC -DPIC -o .libs/tal-reent.o\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c -o version.o >/dev/null 2>&1\n[mpir-3.0.0] /bin/bash ./libtool  --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o cxx/dummy.lo cxx/dummy.cc\n[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c -o tal-reent.o >/dev/null 2>&1\n[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc  -fPIC -DPIC -o cxx/.libs/dummy.o\n[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc -o cxx/dummy.o >/dev/null 2>&1\n[mpir-3.0.0] make[6]: Target `all-am' not remade because of errors.\n[mpir-3.0.0] make[6]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'\n[mpir-3.0.0] make[5]: *** [all-recursive] Error 1\n[mpir-3.0.0] make[5]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'\n[mpir-3.0.0] make[4]: *** [all] Error 2\n[mpir-3.0.0] make[4]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'\n[mpir-3.0.0] Error building MPIR.\n```\non Debian 7.\nhttp://build.sagedev.org/#/builders/80/builds/5/steps/5/logs/stdio",
    "created_at": "2017-05-17T19:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332993",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:50" align="right">comment:50</div>

now fails with

```
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c  -fPIC -DPIC -o .libs/version.o
[mpir-3.0.0] make[6]: *** No rule to make target `mpn/addmul_1.lo', needed by `libmpir.la'.
[mpir-3.0.0] make[6]: *** No rule to make target `mpn/mul_basecase.lo', needed by `libmpir.la'.
[mpir-3.0.0] make[6]: *** No rule to make target `mpn/sqr_basecase.lo', needed by `libmpir.la'.
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c  -fPIC -DPIC -o .libs/tal-reent.o
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c version.c -o version.o >/dev/null 2>&1
[mpir-3.0.0] /bin/bash ./libtool  --tag=CXX   --mode=compile g++ -DHAVE_CONFIG_H -I.  -D__GMP_WITHIN_GMP   -m64 -O2 -march=corei7-avx -mtune=corei7-avx  -g  -c -o cxx/dummy.lo cxx/dummy.cc
[mpir-3.0.0] libtool: compile:  gcc -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c tal-reent.c -o tal-reent.o >/dev/null 2>&1
[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc  -fPIC -DPIC -o cxx/.libs/dummy.o
[mpir-3.0.0] libtool: compile:  g++ -DHAVE_CONFIG_H -I. -D__GMP_WITHIN_GMP -m64 -O2 -march=corei7-avx -mtune=corei7-avx -g -c cxx/dummy.cc -o cxx/dummy.o >/dev/null 2>&1
[mpir-3.0.0] make[6]: Target `all-am' not remade because of errors.
[mpir-3.0.0] make[6]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'
[mpir-3.0.0] make[5]: *** [all-recursive] Error 1
[mpir-3.0.0] make[5]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'
[mpir-3.0.0] make[4]: *** [all] Error 2
[mpir-3.0.0] make[4]: Leaving directory `/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/mpir-3.0.0/src'
[mpir-3.0.0] Error building MPIR.
```
on Debian 7.
http://build.sagedev.org/#/builders/80/builds/5/steps/5/logs/stdio



---

archive/issue_comments_332994.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nDebian 7 again :/",
    "created_at": "2017-05-17T21:47:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332994",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:51" align="right">comment:51</div>

Debian 7 again :/



---

archive/issue_comments_332995.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nLooks like the fix didn't work\n\n```\n[mpir-3.0.0] tmp-addmul_1.s: Assembler messages:\n[mpir-3.0.0] tmp-addmul_1.s:152: Error: no such instruction: `adox (%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:154: Error: no such instruction: `adox %rcx,%rax'\n[mpir-3.0.0] tmp-addmul_1.s:166: Error: no such instruction: `adox -8(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:167: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:171: Error: no such instruction: `adox (%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:174: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] tmp-addmul_1.s:176: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:177: Error: no such instruction: `adox 8(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:181: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] tmp-addmul_1.s:182: Error: no such instruction: `adox 16(%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:185: Error: no such instruction: `adox 24(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:186: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:189: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] tmp-addmul_1.s:190: Error: no such instruction: `adox 32(%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:193: Error: no such instruction: `adox 40(%rdi),%r10'\n[mpir-3.0.0] tmp-addmul_1.s:194: Error: no such instruction: `adcx %r8,%r9'\n[mpir-3.0.0] tmp-addmul_1.s:196: Error: no such instruction: `adox 48(%rdi),%r9'\n[mpir-3.0.0] tmp-addmul_1.s:200: Error: no such instruction: `adcx %rax,%r10'\n[mpir-3.0.0] /bin/bash ../libtool --mode=compile --tag=CC ../strip_fPIC.sh /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64  -o lshift.lo `test -f 'lshift.as' || echo './'`lshift.as\n[mpir-3.0.0] make[6]: *** [addmul_1.lo] Error 1\n```\nback to the drawing board.",
    "created_at": "2017-05-17T21:51:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332995",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:52" align="right">comment:52</div>

Looks like the fix didn't work

```
[mpir-3.0.0] tmp-addmul_1.s: Assembler messages:
[mpir-3.0.0] tmp-addmul_1.s:152: Error: no such instruction: `adox (%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:154: Error: no such instruction: `adox %rcx,%rax'
[mpir-3.0.0] tmp-addmul_1.s:166: Error: no such instruction: `adox -8(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:167: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:171: Error: no such instruction: `adox (%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:174: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] tmp-addmul_1.s:176: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:177: Error: no such instruction: `adox 8(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:181: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] tmp-addmul_1.s:182: Error: no such instruction: `adox 16(%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:185: Error: no such instruction: `adox 24(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:186: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:189: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] tmp-addmul_1.s:190: Error: no such instruction: `adox 32(%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:193: Error: no such instruction: `adox 40(%rdi),%r10'
[mpir-3.0.0] tmp-addmul_1.s:194: Error: no such instruction: `adcx %r8,%r9'
[mpir-3.0.0] tmp-addmul_1.s:196: Error: no such instruction: `adox 48(%rdi),%r9'
[mpir-3.0.0] tmp-addmul_1.s:200: Error: no such instruction: `adcx %rax,%r10'
[mpir-3.0.0] /bin/bash ../libtool --mode=compile --tag=CC ../strip_fPIC.sh /home/buildbot/slave/sage_git/build/local/bin/yasm -I .. -f elf64  -o lshift.lo `test -f 'lshift.as' || echo './'`lshift.as
[mpir-3.0.0] make[6]: *** [addmul_1.lo] Error 1
```
back to the drawing board.



---

archive/issue_comments_332996.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nHum, I did not actually test on a debian 7 seven, I just looked at what GNU as version is provided there and thought I ound the issue.\nSo several possibilities:\n* I'm stupid,\n* the check for as version I implemented is wrong,\n* the issue is somewhere else.\n\nThe easiest way to solve this would be to get access to the machine...\nI downloaded a bunch of qemu debian 7 images but the pc I mostly work on does not have internet access and these images come wihtout gnu as :/",
    "created_at": "2017-05-17T21:55:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332996",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:53" align="right">comment:53</div>

Hum, I did not actually test on a debian 7 seven, I just looked at what GNU as version is provided there and thought I ound the issue.
So several possibilities:
* I'm stupid,
* the check for as version I implemented is wrong,
* the issue is somewhere else.

The easiest way to solve this would be to get access to the machine...
I downloaded a bunch of qemu debian 7 images but the pc I mostly work on does not have internet access and these images come wihtout gnu as :/



---

archive/issue_comments_332997.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nI think the as version check is correct but `\"$CC\" = GCC` is always false unless you really go out of your way to rename gcc...",
    "created_at": "2017-05-17T22:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332997",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:54" align="right">comment:54</div>

I think the as version check is correct but `"$CC" = GCC` is always false unless you really go out of your way to rename gcc...



---

archive/issue_comments_332998.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nPS:\n\n```\nbuildbot@sagebd07_64s02:~$ as --version | head -1 | awk 'NF>1{print $NF}'\n2.22\n```",
    "created_at": "2017-05-17T22:22:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332998",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:55" align="right">comment:55</div>

PS:

```
buildbot@sagebd07_64s02:~$ as --version | head -1 | awk 'NF>1{print $NF}'
2.22
```



---

archive/issue_comments_332999.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@vbraun](#comment%3A54):\n> I think the as version check is correct but `\"$CC\" = GCC` is always false unless you really go out of your way to rename gcc...\n\nYou are probably right. It is not a correct way to ascertain that `CC` is `gcc`, you'd have to look at `$CC -v` or similar. Considering the only other possibility is `clang`  during toolchain building on OS X and that\n\n```\nMirage:~ fbissey$ as --version | head -1 | awk 'NF>1{print $NF}'\n(clang-802.0.42)\n```\nwon't be caught by your `case` statement, I think we can just scrap the `$CC=GCC` bit.",
    "created_at": "2017-05-17T22:35:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-332999",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@vbraun](#comment%3A54):
> I think the as version check is correct but `"$CC" = GCC` is always false unless you really go out of your way to rename gcc...

You are probably right. It is not a correct way to ascertain that `CC` is `gcc`, you'd have to look at `$CC -v` or similar. Considering the only other possibility is `clang`  during toolchain building on OS X and that

```
Mirage:~ fbissey$ as --version | head -1 | awk 'NF>1{print $NF}'
(clang-802.0.42)
```
won't be caught by your `case` statement, I think we can just scrap the `$CC=GCC` bit.



---

archive/issue_comments_333000.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nArgh, Now I see why I had started a bit of my answer differently. If you are worried about using clang on linux, which is in the future so far, we'll do it when it become possible. Using an output from configure preferably (I currently output a variable `IS_CLANG` in `sage-env-config` and that's much more reliable).",
    "created_at": "2017-05-17T22:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333000",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:57" align="right">comment:57</div>

Argh, Now I see why I had started a bit of my answer differently. If you are worried about using clang on linux, which is in the future so far, we'll do it when it become possible. Using an output from configure preferably (I currently output a variable `IS_CLANG` in `sage-env-config` and that's much more reliable).



---

archive/issue_comments_333001.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@jpflori](#comment%3A35):\n> Nope, some assembly files are compiled with yasm, others with as...\n\nAre we sure that this is an upstream *feature*? It seems strange to me...",
    "created_at": "2017-05-18T08:09:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333001",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@jpflori](#comment%3A35):
> Nope, some assembly files are compiled with yasm, others with as...

Are we sure that this is an upstream *feature*? It seems strange to me...



---

archive/issue_comments_333002.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nYes it is.\nOne of the former developer prefered ATT syntax over intel (or the other way around) and that was not very well supported by gas at that time, don't know the current situation.\nMoreover yasm provides better windows support with stack dark magic unwinding feature.\n\nFiles are treated by yasm or gas depending on their extension (as or asm).",
    "created_at": "2017-05-18T08:14:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333002",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:59" align="right">comment:59</div>

Yes it is.
One of the former developer prefered ATT syntax over intel (or the other way around) and that was not very well supported by gas at that time, don't know the current situation.
Moreover yasm provides better windows support with stack dark magic unwinding feature.

Files are treated by yasm or gas depending on their extension (as or asm).



---

archive/issue_comments_333003.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@vbraun](#comment%3A54):\n> I think the as version check is correct but `\"$CC\" = GCC` is always false unless you really go out of your way to rename gcc...\n\nOops!",
    "created_at": "2017-05-18T08:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333003",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@vbraun](#comment%3A54):
> I think the as version check is correct but `"$CC" = GCC` is always false unless you really go out of your way to rename gcc...

Oops!



---

archive/issue_comments_333004.json:
```json
{
    "body": "Changed commit from **[`aa0b222`](https://github.com/sagemath/sagetrac-mirror/commit/aa0b222388e27db40c9da7e5a91da4f08401c854)** to **[`fea0bae`](https://github.com/sagemath/sagetrac-mirror/commit/fea0baea54a96d7ae74193295f3fb8620cf0d83e)**",
    "created_at": "2017-05-18T08:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333004",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`aa0b222`](https://github.com/sagemath/sagetrac-mirror/commit/aa0b222388e27db40c9da7e5a91da4f08401c854)** to **[`fea0bae`](https://github.com/sagemath/sagetrac-mirror/commit/fea0baea54a96d7ae74193295f3fb8620cf0d83e)**



---

archive/issue_comments_333005.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7467913b56d7ac5deefb7bd3abc0b9ed62265b6d\"><code>7467913</code></a></td><td><code>Upgrade to libpng-1.6.28</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61ff9185f4c44732e9a3063b812406e00dd02a6a\"><code>61ff918</code></a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/upgrade_to_latest_libpng' into libpng1629</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa28f4cba1d7589b5b3bd970311981c5fb9bf04d\"><code>aa28f4c</code></a></td><td><code>Bump to libpng 1.6.29.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be90134ceefadee47a54bb070afb386642e78cbc\"><code>be90134</code></a></td><td><code>Merge remote-tracking branch 'trac/public/22493' into mpir300</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fea0baea54a96d7ae74193295f3fb8620cf0d83e\"><code>fea0bae</code></a></td><td><code>Remove useless gcc check when looking for old as.</code></td></tr></table>\n",
    "created_at": "2017-05-18T08:21:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333005",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7467913b56d7ac5deefb7bd3abc0b9ed62265b6d"><code>7467913</code></a></td><td><code>Upgrade to libpng-1.6.28</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61ff9185f4c44732e9a3063b812406e00dd02a6a"><code>61ff918</code></a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/upgrade_to_latest_libpng' into libpng1629</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa28f4cba1d7589b5b3bd970311981c5fb9bf04d"><code>aa28f4c</code></a></td><td><code>Bump to libpng 1.6.29.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be90134ceefadee47a54bb070afb386642e78cbc"><code>be90134</code></a></td><td><code>Merge remote-tracking branch 'trac/public/22493' into mpir300</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fea0baea54a96d7ae74193295f3fb8620cf0d83e"><code>fea0bae</code></a></td><td><code>Remove useless gcc check when looking for old as.</code></td></tr></table>




---

archive/issue_comments_333006.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nArgh, I merged unrelated stuff.",
    "created_at": "2017-05-18T08:22:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333006",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:62" align="right">comment:62</div>

Argh, I merged unrelated stuff.



---

archive/issue_comments_333007.json:
```json
{
    "body": "Changed commit from **[`fea0bae`](https://github.com/sagemath/sagetrac-mirror/commit/fea0baea54a96d7ae74193295f3fb8620cf0d83e)** to **[`c9eaefc`](https://github.com/sagemath/sagetrac-mirror/commit/c9eaefcc84a3f4473b30d93d697d684135d69d6c)**",
    "created_at": "2017-05-18T08:24:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333007",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fea0bae`](https://github.com/sagemath/sagetrac-mirror/commit/fea0baea54a96d7ae74193295f3fb8620cf0d83e)** to **[`c9eaefc`](https://github.com/sagemath/sagetrac-mirror/commit/c9eaefcc84a3f4473b30d93d697d684135d69d6c)**



---

archive/issue_comments_333008.json:
```json
{
    "body": "<div id=\"comment:63\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9eaefcc84a3f4473b30d93d697d684135d69d6c\"><code>c9eaefc</code></a></td><td><code>Remove useless gcc check when looking for old as.</code></td></tr></table>\n",
    "created_at": "2017-05-18T08:24:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333008",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:63"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9eaefcc84a3f4473b30d93d697d684135d69d6c"><code>c9eaefc</code></a></td><td><code>Remove useless gcc check when looking for old as.</code></td></tr></table>




---

archive/issue_events_311603.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-18T08:25:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311603"
}
```



---

archive/issue_events_311604.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-18T08:25:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311604"
}
```



---

archive/issue_events_311605.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-05-18T08:51:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311605"
}
```



---

archive/issue_events_311606.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-05-18T08:51:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311606"
}
```



---

archive/issue_comments_333009.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nOnce again to the bots.",
    "created_at": "2017-05-18T08:51:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333009",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:65" align="right">comment:65</div>

Once again to the bots.



---

archive/issue_events_311607.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-19T22:09:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311607"
}
```



---

archive/issue_events_311608.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-19T22:09:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311608"
}
```



---

archive/issue_comments_333010.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\n\n```\n[mpir-3.0.0] ./spkg-install: line 168: as_version: command not found\n```\nIn bash you can't have a space before the equal sign in assignment...",
    "created_at": "2017-05-19T22:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333010",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:66" align="right">comment:66</div>


```
[mpir-3.0.0] ./spkg-install: line 168: as_version: command not found
```
In bash you can't have a space before the equal sign in assignment...



---

archive/issue_comments_333011.json:
```json
{
    "body": "Changed commit from **[`c9eaefc`](https://github.com/sagemath/sagetrac-mirror/commit/c9eaefcc84a3f4473b30d93d697d684135d69d6c)** to **[`01c9097`](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)**",
    "created_at": "2017-05-22T11:48:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333011",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c9eaefc`](https://github.com/sagemath/sagetrac-mirror/commit/c9eaefcc84a3f4473b30d93d697d684135d69d6c)** to **[`01c9097`](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)**



---

archive/issue_comments_333012.json:
```json
{
    "body": "<div id=\"comment:67\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab\"><code>01c9097</code></a></td><td><code>Remove broken spaces.</code></td></tr></table>\n",
    "created_at": "2017-05-22T11:48:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333012",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:67"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab"><code>01c9097</code></a></td><td><code>Remove broken spaces.</code></td></tr></table>




---

archive/issue_events_311609.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-22T11:49:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311609"
}
```



---

archive/issue_events_311610.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2017-05-22T11:49:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311610"
}
```



---

archive/issue_comments_333013.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\n`@`francois: push the button again?",
    "created_at": "2017-05-24T13:40:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333013",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:69" align="right">comment:69</div>

`@`francois: push the button again?



---

archive/issue_events_311611.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-05-24T13:43:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311611"
}
```



---

archive/issue_events_311612.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-05-24T13:43:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311612"
}
```



---

archive/issue_comments_333014.json:
```json
{
    "body": "Changed reviewer from **Fran\u00e7ois Bissey** to **Fran\u00e7ois Bissey, Dima Pasechnik**",
    "created_at": "2017-05-24T13:43:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333014",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **François Bissey** to **François Bissey, Dima Pasechnik**



---

archive/issue_comments_333015.json:
```json
{
    "body": "Changed branch from **[public/22493](https://github.com/sagemath/sagetrac-mirror/tree/public/22493)** to **[`01c9097`](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)**",
    "created_at": "2017-05-26T21:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333015",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/22493](https://github.com/sagemath/sagetrac-mirror/tree/public/22493)** to **[`01c9097`](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)**



---

archive/issue_events_311613.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-26T21:28:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311613"
}
```



---

archive/issue_events_311614.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "646f124ccd1f8f62972dea19b9b6ab79d54c9f8d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-05-26T21:28:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22493#event-311614"
}
```



---

archive/issue_comments_333016.json:
```json
{
    "body": "Changed commit from **[`01c9097`](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)** to none",
    "created_at": "2017-06-10T12:18:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333016",
    "user": "https://github.com/mezzarobba"
}
```

Changed commit from **[`01c9097`](https://github.com/sagemath/sagetrac-mirror/commit/01c90970e9fe648a9374cd02be24c3d6d8da3dab)** to none



---

archive/issue_comments_333017.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\n\n```\n+# Workaround old GNU as version by disabling assembly use.\n+if [ \"$UNAME\" = Linux ] && [ \"$CC\" = GCC ]; then\n+    as_version = `$AS --version | head -1 | awk 'NF>1{print $NF}'`\n+    case \"$as_version\" in\n+        1.*|2.1*|2.[0-2]*)\n                  ^^^^^^^\n+        echo \"Disable use of assembly because of GNU as < 2.23.\"\n+        export MPN_PATH=generic\n+        ;;\n+    esac\n+fi\n```\n\nShouldn't that be `2.2[0-2]*`? In other words, aren't you disabling assembly for everyone on Linux/gcc here?\n\nSage has become significantly slower on my system (judging from a few quick experiments, perhaps 10-15% slower on average, with integer operations 1.5\u00d7 to 2\u00d7 slower) somewhere between 7.6.rc2 and 8.0.beta9, and I'm wondering if this isn't the cause of the regression...",
    "created_at": "2017-06-10T12:18:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333017",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:72" align="right">comment:72</div>


```
+# Workaround old GNU as version by disabling assembly use.
+if [ "$UNAME" = Linux ] && [ "$CC" = GCC ]; then
+    as_version = `$AS --version | head -1 | awk 'NF>1{print $NF}'`
+    case "$as_version" in
+        1.*|2.1*|2.[0-2]*)
                  ^^^^^^^
+        echo "Disable use of assembly because of GNU as < 2.23."
+        export MPN_PATH=generic
+        ;;
+    esac
+fi
```

Shouldn't that be `2.2[0-2]*`? In other words, aren't you disabling assembly for everyone on Linux/gcc here?

Sage has become significantly slower on my system (judging from a few quick experiments, perhaps 10-15% slower on average, with integer operations 1.5× to 2× slower) somewhere between 7.6.rc2 and 8.0.beta9, and I'm wondering if this isn't the cause of the regression...



---

archive/issue_comments_333018.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [myself](#comment%3A72): Indeed, changing `2.[0-2]` to `2.2[0-2]` solves the issue. Follow-up at #23209.",
    "created_at": "2017-06-10T12:56:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333018",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [myself](#comment%3A72): Indeed, changing `2.[0-2]` to `2.2[0-2]` solves the issue. Follow-up at #23209.



---

archive/issue_comments_333019.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nThis ticket caused a significant performance regression: #23327",
    "created_at": "2017-06-27T10:39:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333019",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:74" align="right">comment:74</div>

This ticket caused a significant performance regression: #23327



---

archive/issue_comments_333020.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [@jdemeyer](#comment%3A74):\n> This ticket caused a significant performance regression: #23327\n\nThis is not fixed by #23146?",
    "created_at": "2017-06-27T13:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22493",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22493#issuecomment-333020",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [@jdemeyer](#comment%3A74):
> This ticket caused a significant performance regression: #23327

This is not fixed by #23146?
