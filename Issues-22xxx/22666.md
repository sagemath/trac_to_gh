# Issue 22666: Fix python3 build on Cygwin

archive/issues_022429.json:
```json
{
    "body": "Since #22354, Python 3 is now installed unconditionally as a standard package.  That's fine, but the last Python 3 version known to work on Cygwin is Python 3.4 (though I have been working with Python upstream to fix that).\n\nIn the meantime, here is a patch set needed to get the Python 3 currently in Sage (3.5.1) to at least build, and nominally work.\n\nBranch/Commit: 5031e422023459fdbe3a48cb5159abc63ec57cf2\n\nReviewer: Travis Scrimshaw, Jeroen Demeyer\n\nAuthor: Erik Bray\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22666\n\n",
    "closed_at": "2017-04-23T12:58:00Z",
    "created_at": "2017-03-21T14:39:15Z",
    "labels": [
        "component: porting: cygwin",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Fix python3 build on Cygwin",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22666",
    "user": "https://github.com/embray"
}
```
Since #22354, Python 3 is now installed unconditionally as a standard package.  That's fine, but the last Python 3 version known to work on Cygwin is Python 3.4 (though I have been working with Python upstream to fix that).

In the meantime, here is a patch set needed to get the Python 3 currently in Sage (3.5.1) to at least build, and nominally work.

Branch/Commit: 5031e422023459fdbe3a48cb5159abc63ec57cf2

Reviewer: Travis Scrimshaw, Jeroen Demeyer

Author: Erik Bray

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22666





---

archive/issue_comments_422208.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-21T14:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422208",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_422209.json:
```json
{
    "body": "<a id='comment:2'></a>I can confirm that Python 3 builds for me with the patch (and does not without).",
    "created_at": "2017-03-22T21:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422209",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

<a id='comment:2'></a>I can confirm that Python 3 builds for me with the patch (and does not without).



---

archive/issue_comments_422210.json:
```json
{
    "body": "<a id='comment:3'></a>There may still be runtime issues that impact Sage, but I will address those as they come.  This at least addresses building without error.",
    "created_at": "2017-03-23T11:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422210",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'></a>There may still be runtime issues that impact Sage, but I will address those as they come.  This at least addresses building without error.



---

archive/issue_comments_422211.json:
```json
{
    "body": "<a id='comment:4'></a>What's the upstream status of these patches? I always like when patches have some kind of pointer to an upstream ticket or commit or whatever...\n\nFor this reason, I consider the renaming `ncurses-issue_14438.patch` -> `2.6.5-ncurses-abi6.patch` a regression.",
    "created_at": "2017-03-28T10:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422211",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>What's the upstream status of these patches? I always like when patches have some kind of pointer to an upstream ticket or commit or whatever...

For this reason, I consider the renaming `ncurses-issue_14438.patch` -> `2.6.5-ncurses-abi6.patch` a regression.



---

archive/issue_comments_422212.json:
```json
{
    "body": "<a id='comment:5'></a>It's just for consistency's sake with the rest of my patch set, who cares what the file is called?  I can put in a reference to the issue it addresses.",
    "created_at": "2017-03-28T14:55:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422212",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>It's just for consistency's sake with the rest of my patch set, who cares what the file is called?  I can put in a reference to the issue it addresses.



---

archive/issue_comments_422213.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [embray](#comment%3A5):\n> I can put in a reference to the issue it addresses.\n\n\nPlease do (to be clear: renaming the file is fine in that case).",
    "created_at": "2017-03-28T15:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422213",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>Replying to [embray](#comment%3A5):
> I can put in a reference to the issue it addresses.


Please do (to be clear: renaming the file is fine in that case).



---

archive/issue_comments_422214.json:
```json
{
    "body": "<a id='comment:7'></a>Yeah, no a problem.  I'm pretty sure all of these patches are upstream already, but there might be one or two that aren't for various reasons.  Need to double-check.",
    "created_at": "2017-03-28T15:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422214",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>Yeah, no a problem.  I'm pretty sure all of these patches are upstream already, but there might be one or two that aren't for various reasons.  Need to double-check.



---

archive/issue_comments_422215.json:
```json
{
    "body": "<a id='comment:8'></a>Did you double-check the patch status Erik? I'm ready to set a positive review unless Jeoren has any other comments (Python3 builds for me with this on Cygwin64).",
    "created_at": "2017-04-19T19:48:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422215",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Did you double-check the patch status Erik? I'm ready to set a positive review unless Jeoren has any other comments (Python3 builds for me with this on Cygwin64).



---

archive/issue_comments_422216.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2017-04-19T19:48:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422216",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_422217.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"None of the above - read trac for reasoning.\"",
    "created_at": "2017-04-19T19:48:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422217",
    "user": "https://github.com/tscrim"
}
```

Changing upstream from "N/A" to "None of the above - read trac for reasoning."



---

archive/issue_comments_422218.json:
```json
{
    "body": "Changing upstream from \"None of the above - read trac for reasoning.\" to \"N/A\"",
    "created_at": "2017-04-19T19:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422218",
    "user": "https://github.com/tscrim"
}
```

Changing upstream from "None of the above - read trac for reasoning." to "N/A"



---

archive/issue_comments_422219.json:
```json
{
    "body": "<a id='comment:11'></a>No, I'll work on that now...",
    "created_at": "2017-04-20T09:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422219",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>No, I'll work on that now...



---

archive/issue_comments_422220.json:
```json
{
    "body": "Changing commit from \"133ae6a2a5ba29c992d8af14905a7052474ca028\" to \"1618c0f0d26c989df228b28db45c714fbc281178\"",
    "created_at": "2017-04-20T13:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422220",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "133ae6a2a5ba29c992d8af14905a7052474ca028" to "1618c0f0d26c989df228b28db45c714fbc281178"



---

archive/issue_comments_422221.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-20T13:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422221",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422222.json:
```json
{
    "body": "<a id='comment:13'></a>I removed a handful of patches that didn't actually seem to be needed, and added better descriptions for the rest.  With this, Python 3 still builds, and at least nominally works.  I should stress that that is the only goal of this ticket.  Any other patches needed to Python 3 specifically for Sage features to work (if there are any at all) should be held off until those specific issues come up.",
    "created_at": "2017-04-20T13:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422222",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'></a>I removed a handful of patches that didn't actually seem to be needed, and added better descriptions for the rest.  With this, Python 3 still builds, and at least nominally works.  I should stress that that is the only goal of this ticket.  Any other patches needed to Python 3 specifically for Sage features to work (if there are any at all) should be held off until those specific issues come up.



---

archive/issue_comments_422223.json:
```json
{
    "body": "<a id='comment:14'></a>Jeroen, do you have any more comments? Otherwise, I will set a positive review.",
    "created_at": "2017-04-20T14:11:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422223",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>Jeroen, do you have any more comments? Otherwise, I will set a positive review.



---

archive/issue_comments_422224.json:
```json
{
    "body": "<a id='comment:15'></a>[comment:6]",
    "created_at": "2017-04-20T15:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422224",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>[comment:6]



---

archive/issue_comments_422225.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-04-20T15:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422225",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_422226.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2017-04-21T12:23:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422226",
    "user": "https://github.com/embray"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_422227.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-21T14:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422227",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_422228.json:
```json
{
    "body": "Changing commit from \"1618c0f0d26c989df228b28db45c714fbc281178\" to \"5031e422023459fdbe3a48cb5159abc63ec57cf2\"",
    "created_at": "2017-04-21T14:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422228",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1618c0f0d26c989df228b28db45c714fbc281178" to "5031e422023459fdbe3a48cb5159abc63ec57cf2"



---

archive/issue_comments_422229.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-04-21T14:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422229",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_422230.json:
```json
{
    "body": "<a id='comment:18'></a>Feel free to disagree, but this addresses Jeroen's only comment.",
    "created_at": "2017-04-21T14:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422230",
    "user": "https://github.com/embray"
}
```

<a id='comment:18'></a>Feel free to disagree, but this addresses Jeroen's only comment.



---

archive/issue_comments_422231.json:
```json
{
    "body": "Changing reviewer from \"Travis Scrimshaw\" to \"Travis Scrimshaw, Jeroen Demeyer\"",
    "created_at": "2017-04-21T14:32:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422231",
    "user": "https://github.com/embray"
}
```

Changing reviewer from "Travis Scrimshaw" to "Travis Scrimshaw, Jeroen Demeyer"



---

archive/issue_comments_422232.json:
```json
{
    "body": "<a id='comment:20'></a>Thanks!",
    "created_at": "2017-04-21T15:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422232",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>Thanks!



---

archive/issue_comments_422233.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-23T12:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422233",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_422234.json:
```json
{
    "body": "Changing branch from \"u/embray/cygwin/python3-build\" to \"5031e422023459fdbe3a48cb5159abc63ec57cf2\"",
    "created_at": "2017-04-23T12:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-422234",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/embray/cygwin/python3-build" to "5031e422023459fdbe3a48cb5159abc63ec57cf2"



---

archive/issue_events_059090.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-23T12:58:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22666#event-59090"
}
```
