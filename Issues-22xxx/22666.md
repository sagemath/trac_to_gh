# Issue 22666: Fix python3 build on Cygwin

archive/issues_022429.json:
```json
{
    "body": "Since #22354, Python 3 is now installed unconditionally as a standard package.  That's fine, but the last Python 3 version known to work on Cygwin is Python 3.4 (though I have been working with Python upstream to fix that).\n\nIn the meantime, here is a patch set needed to get the Python 3 currently in Sage (3.5.1) to at least build, and nominally work.\n\nBranch/Commit: 5031e422023459fdbe3a48cb5159abc63ec57cf2\n\nReviewer: Travis Scrimshaw, Jeroen Demeyer\n\nAuthor: Erik Bray\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22666\n\n",
    "closed_at": "2017-04-23T12:58:00Z",
    "created_at": "2017-03-21T14:39:15Z",
    "labels": [
        "component: porting: cygwin",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Fix python3 build on Cygwin",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22666",
    "user": "https://github.com/embray"
}
```
Since #22354, Python 3 is now installed unconditionally as a standard package.  That's fine, but the last Python 3 version known to work on Cygwin is Python 3.4 (though I have been working with Python upstream to fix that).

In the meantime, here is a patch set needed to get the Python 3 currently in Sage (3.5.1) to at least build, and nominally work.

Branch/Commit: 5031e422023459fdbe3a48cb5159abc63ec57cf2

Reviewer: Travis Scrimshaw, Jeroen Demeyer

Author: Erik Bray

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22666





---

archive/issue_comments_312090.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-21T14:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312090",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_312091.json:
```json
{
    "body": "<a id='comment:2'></a>I can confirm that Python 3 builds for me with the patch (and does not without).",
    "created_at": "2017-03-22T21:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312091",
    "user": "https://trac.sagemath.org/admin/accounts/users/gouezel"
}
```

<a id='comment:2'></a>I can confirm that Python 3 builds for me with the patch (and does not without).



---

archive/issue_comments_312092.json:
```json
{
    "body": "<a id='comment:3'></a>There may still be runtime issues that impact Sage, but I will address those as they come.  This at least addresses building without error.",
    "created_at": "2017-03-23T11:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312092",
    "user": "https://github.com/embray"
}
```

<a id='comment:3'></a>There may still be runtime issues that impact Sage, but I will address those as they come.  This at least addresses building without error.



---

archive/issue_comments_312093.json:
```json
{
    "body": "<a id='comment:4'></a>What's the upstream status of these patches? I always like when patches have some kind of pointer to an upstream ticket or commit or whatever...\n\nFor this reason, I consider the renaming `ncurses-issue_14438.patch` -> `2.6.5-ncurses-abi6.patch` a regression.",
    "created_at": "2017-03-28T10:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312093",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>What's the upstream status of these patches? I always like when patches have some kind of pointer to an upstream ticket or commit or whatever...

For this reason, I consider the renaming `ncurses-issue_14438.patch` -> `2.6.5-ncurses-abi6.patch` a regression.



---

archive/issue_comments_312094.json:
```json
{
    "body": "<a id='comment:5'></a>It's just for consistency's sake with the rest of my patch set, who cares what the file is called?  I can put in a reference to the issue it addresses.",
    "created_at": "2017-03-28T14:55:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312094",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>It's just for consistency's sake with the rest of my patch set, who cares what the file is called?  I can put in a reference to the issue it addresses.



---

archive/issue_comments_312095.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 embray]:\n> I can put in a reference to the issue it addresses.\n\n\nPlease do (to be clear: renaming the file is fine in that case).",
    "created_at": "2017-03-28T15:02:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312095",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>Replying to [comment:5 embray]:
> I can put in a reference to the issue it addresses.


Please do (to be clear: renaming the file is fine in that case).



---

archive/issue_comments_312096.json:
```json
{
    "body": "<a id='comment:7'></a>Yeah, no a problem.  I'm pretty sure all of these patches are upstream already, but there might be one or two that aren't for various reasons.  Need to double-check.",
    "created_at": "2017-03-28T15:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312096",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>Yeah, no a problem.  I'm pretty sure all of these patches are upstream already, but there might be one or two that aren't for various reasons.  Need to double-check.



---

archive/issue_comments_312097.json:
```json
{
    "body": "<a id='comment:8'></a>Did you double-check the patch status Erik? I'm ready to set a positive review unless Jeoren has any other comments (Python3 builds for me with this on Cygwin64).",
    "created_at": "2017-04-19T19:48:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312097",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>Did you double-check the patch status Erik? I'm ready to set a positive review unless Jeoren has any other comments (Python3 builds for me with this on Cygwin64).



---

archive/issue_comments_312098.json:
```json
{
    "body": "<a id='comment:11'></a>No, I'll work on that now...",
    "created_at": "2017-04-20T09:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312098",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>No, I'll work on that now...



---

archive/issue_comments_312099.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-20T13:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312099",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_312100.json:
```json
{
    "body": "<a id='comment:13'></a>I removed a handful of patches that didn't actually seem to be needed, and added better descriptions for the rest.  With this, Python 3 still builds, and at least nominally works.  I should stress that that is the only goal of this ticket.  Any other patches needed to Python 3 specifically for Sage features to work (if there are any at all) should be held off until those specific issues come up.",
    "created_at": "2017-04-20T13:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312100",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'></a>I removed a handful of patches that didn't actually seem to be needed, and added better descriptions for the rest.  With this, Python 3 still builds, and at least nominally works.  I should stress that that is the only goal of this ticket.  Any other patches needed to Python 3 specifically for Sage features to work (if there are any at all) should be held off until those specific issues come up.



---

archive/issue_comments_312101.json:
```json
{
    "body": "<a id='comment:14'></a>Jeroen, do you have any more comments? Otherwise, I will set a positive review.",
    "created_at": "2017-04-20T14:11:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312101",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>Jeroen, do you have any more comments? Otherwise, I will set a positive review.



---

archive/issue_comments_312102.json:
```json
{
    "body": "<a id='comment:15'></a>[comment:6]",
    "created_at": "2017-04-20T15:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312102",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>[comment:6]



---

archive/issue_comments_312103.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-04-20T15:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312103",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_312104.json:
```json
{
    "body": "Changing priority from major to blocker.",
    "created_at": "2017-04-21T12:23:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312104",
    "user": "https://github.com/embray"
}
```

Changing priority from major to blocker.



---

archive/issue_comments_312105.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-21T14:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312105",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_312106.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-04-21T14:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312106",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_312107.json:
```json
{
    "body": "<a id='comment:18'></a>Feel free to disagree, but this addresses Jeroen's only comment.",
    "created_at": "2017-04-21T14:32:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312107",
    "user": "https://github.com/embray"
}
```

<a id='comment:18'></a>Feel free to disagree, but this addresses Jeroen's only comment.



---

archive/issue_comments_312108.json:
```json
{
    "body": "<a id='comment:20'></a>Thanks!",
    "created_at": "2017-04-21T15:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312108",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>Thanks!



---

archive/issue_comments_312109.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-23T12:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22666#issuecomment-312109",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_059090.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-23T12:58:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22666",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22666#event-59090"
}
```
