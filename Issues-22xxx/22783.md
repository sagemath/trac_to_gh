# Issue 22783: add character functionality for libgap groups

archive/issues_022546.json:
```json
{
    "body": "The character functionality for permutation groups is implemented essentially as calls to GAP.  But since it is in implemeted in permutation group, groups like finitely generated matrix groups cannot use any of that functionality. Seems like this functionality should also live in the libgap_mixin interface so that any group gap can handle can have access to character functionality.\n\nReviewer: Travis Scrimshaw\n\nAuthor: Ben Hutz\n\nBranch: 81dcaba8f63d5ba43f52d80f20474d7859806ee2\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22783\n\n",
    "closed_at": "2017-04-14T19:56:12Z",
    "created_at": "2017-04-08T01:00:40Z",
    "labels": [
        "component: group theory",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "add character functionality for libgap groups",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22783",
    "user": "https://github.com/bhutz"
}
```
The character functionality for permutation groups is implemented essentially as calls to GAP.  But since it is in implemeted in permutation group, groups like finitely generated matrix groups cannot use any of that functionality. Seems like this functionality should also live in the libgap_mixin interface so that any group gap can handle can have access to character functionality.

Reviewer: Travis Scrimshaw

Author: Ben Hutz

Branch: 81dcaba8f63d5ba43f52d80f20474d7859806ee2

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22783





---

archive/issue_comments_334644.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-04-08T01:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334644",
    "user": "https://github.com/bhutz"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_334645.json:
```json
{
    "body": "<a id='comment:1'></a>Since this functionality just uses GAP calls, seems like it should be callable for groups which are accepted by GAP.\n\nAll these functions implemented for permutation groups, but those don't seem to inherit from the libgap library interface, so I've just added to that interface.\n\n---\nNew commits:",
    "created_at": "2017-04-08T01:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334645",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:1'></a>Since this functionality just uses GAP calls, seems like it should be callable for groups which are accepted by GAP.

All these functions implemented for permutation groups, but those don't seem to inherit from the libgap library interface, so I've just added to that interface.

---
New commits:



---

archive/issue_comments_334646.json:
```json
{
    "body": "<a id='comment:2'></a>The reason why I could see this was only for permutation groups is because these won't work for infinite groups:\n\n```\nsage: G = GL(2, ZZ)\nsage: G._gap_().NrConjugacyClasses()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n...\nValueError: libGAP: Error, no method found! Error, no 4th choice method found for `ConjugacyClasses' on 1 arguments\n```\nSo I think we should add a check if the group is infinite and raise a `NotImplementedError` if it is.\n\nNote that things like `conjugacy_classes` results in the same error, but I think that should have a similar check (or catch the exception and raise a `NotImplementedError` in its place).\n\nDo we also want to remove the corresponding methods from the permutation group? Is there a difference by using `ClassFunction_libgap` over `ClassFunction_gap`.\n\nTwo other little things, `Returns` -> `Return` and\n\n```\n- ``values`` -- a list of values of the character\n```\nwith the double dash after the name.",
    "created_at": "2017-04-08T03:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334646",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>The reason why I could see this was only for permutation groups is because these won't work for infinite groups:

```
sage: G = GL(2, ZZ)
sage: G._gap_().NrConjugacyClasses()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: libGAP: Error, no method found! Error, no 4th choice method found for `ConjugacyClasses' on 1 arguments
```
So I think we should add a check if the group is infinite and raise a `NotImplementedError` if it is.

Note that things like `conjugacy_classes` results in the same error, but I think that should have a similar check (or catch the exception and raise a `NotImplementedError` in its place).

Do we also want to remove the corresponding methods from the permutation group? Is there a difference by using `ClassFunction_libgap` over `ClassFunction_gap`.

Two other little things, `Returns` -> `Return` and

```
- ``values`` -- a list of values of the character
```
with the double dash after the name.



---

archive/issue_comments_334647.json:
```json
{
    "body": "<a id='comment:3'></a>A check for finite sounds good since the error from GAP isn't very informative.  I also noticed when doing this that the function\n\nin permgroup.py\n\n```\nconjugacy_class_reprensentatives()\n```\n\nin libgap_mixin\n\n```\nconugacy_classes_reprensentatives()\n```\n\nSo GL(2,GF(5)), both functions are available. Seems like we should be consistent with the names. Do I need to do a deprecation to change one of these, or can I just change it?\n\n\nThe class_function.py file says not to use ClassFunction_gap.\n\n\nSince permutations groups don't inherit from the libgap class, I can't remove them from permutation groups with changing inheritance structures.",
    "created_at": "2017-04-08T15:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334647",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:3'></a>A check for finite sounds good since the error from GAP isn't very informative.  I also noticed when doing this that the function

in permgroup.py

```
conjugacy_class_reprensentatives()
```

in libgap_mixin

```
conugacy_classes_reprensentatives()
```

So GL(2,GF(5)), both functions are available. Seems like we should be consistent with the names. Do I need to do a deprecation to change one of these, or can I just change it?


The class_function.py file says not to use ClassFunction_gap.


Since permutations groups don't inherit from the libgap class, I can't remove them from permutation groups with changing inheritance structures.



---

archive/issue_comments_334648.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 bhutz]:\n> in permgroup.py\n> \n> ```\n> conjugacy_class_reprensentatives()\n> ```\n> \n> in libgap_mixin\n> \n> ```\n> conugacy_classes_reprensentatives()\n> ```\n> \n> So GL(2,GF(5)), both functions are available. Seems like we should be consistent with the names. Do I need to do a deprecation to change one of these, or can I just change it?\n\n\nI only see `conjugacy_classes_reprensentatives()` for generic permutation groups (the note in the `AUTHORS` block is a typo). So there shouldn't be anything to change.\n\n> The class_function.py file says not to use ClassFunction_gap.\n\n\nAh, I see. So it is some old code in the generic case that needs to ported over to use libgap.\n\n> Since permutations groups don't inherit from the libgap class, I can't remove them from permutation groups with changing inheritance structures.\n\n\nAh, yes, and rightly so as a good part of the functionality is done purely on the Sage side.",
    "created_at": "2017-04-08T16:16:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334648",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>Replying to [comment:3 bhutz]:
> in permgroup.py
> 
> ```
> conjugacy_class_reprensentatives()
> ```
> 
> in libgap_mixin
> 
> ```
> conugacy_classes_reprensentatives()
> ```
> 
> So GL(2,GF(5)), both functions are available. Seems like we should be consistent with the names. Do I need to do a deprecation to change one of these, or can I just change it?


I only see `conjugacy_classes_reprensentatives()` for generic permutation groups (the note in the `AUTHORS` block is a typo). So there shouldn't be anything to change.

> The class_function.py file says not to use ClassFunction_gap.


Ah, I see. So it is some old code in the generic case that needs to ported over to use libgap.

> Since permutations groups don't inherit from the libgap class, I can't remove them from permutation groups with changing inheritance structures.


Ah, yes, and rightly so as a good part of the functionality is done purely on the Sage side.



---

archive/issue_comments_334649.json:
```json
{
    "body": "<a id='comment:5'></a>err..sorry I got the files backwards for the function names. Regardless, they are different in the two different files and I'd like to make them the same while I'm changing related functionality. So, does that necessitate a deprecation or can I just change it?",
    "created_at": "2017-04-08T21:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334649",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:5'></a>err..sorry I got the files backwards for the function names. Regardless, they are different in the two different files and I'd like to make them the same while I'm changing related functionality. So, does that necessitate a deprecation or can I just change it?



---

archive/issue_comments_334650.json:
```json
{
    "body": "<a id='comment:6'></a>It does require a deprecation because it is a part of the public interface. +1 for doing so (`deprecated_function_alias` is a good way to go).",
    "created_at": "2017-04-09T15:29:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334650",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>It does require a deprecation because it is a part of the public interface. +1 for doing so (`deprecated_function_alias` is a good way to go).



---

archive/issue_comments_334651.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-10T01:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334651",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334652.json:
```json
{
    "body": "<a id='comment:8'></a>finite check added as well as function rename and deprecation.",
    "created_at": "2017-04-10T01:57:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334652",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:8'></a>finite check added as well as function rename and deprecation.



---

archive/issue_comments_334653.json:
```json
{
    "body": "<a id='comment:9'></a>LGTM modulo one nitpick: error messages should start with a lower case letter.",
    "created_at": "2017-04-10T04:32:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334653",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>LGTM modulo one nitpick: error messages should start with a lower case letter.



---

archive/issue_comments_334654.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-04-10T11:49:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334654",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_334655.json:
```json
{
    "body": "<a id='comment:11'></a>oops. I knew that...\n\nFixed.",
    "created_at": "2017-04-10T11:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334655",
    "user": "https://github.com/bhutz"
}
```

<a id='comment:11'></a>oops. I knew that...

Fixed.



---

archive/issue_comments_334656.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-14T05:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334656",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_334657.json:
```json
{
    "body": "<a id='comment:12'></a>Thanks.",
    "created_at": "2017-04-14T05:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334657",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'></a>Thanks.



---

archive/issue_comments_334658.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-14T19:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334658",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_059281.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-14T19:56:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22783#event-59281"
}
```



---

archive/issue_comments_334659.json:
```json
{
    "body": "<a id='comment:15'></a>Fix the branch name after a mistake",
    "created_at": "2019-05-09T09:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22783",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22783#issuecomment-334659",
    "user": "https://github.com/vinklein"
}
```

<a id='comment:15'></a>Fix the branch name after a mistake
