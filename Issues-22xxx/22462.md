# Issue 22462: Use ContainChildren to implement p_iter_fork

archive/issues_022225.json:
```json
{
    "assignees": [],
    "body": "This is preparation for #15585.\n\nBranch/Commit: **[`75e41db`](https://github.com/sagemath/sagetrac-mirror/commit/75e41dbeeb01de939ac14699b18fef270e9edb67)**\n\nReviewer: **S\u00e9bastien Labb\u00e9**\n\nAuthor: **Jeroen Demeyer**\n\nComponent: **misc**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22462_\n\n",
    "closed_at": "2017-07-26T22:13:29Z",
    "created_at": "2017-02-27T16:07:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Use ContainChildren to implement p_iter_fork",
    "type": "issue",
    "updated_at": "2017-07-26T22:13:29Z",
    "url": "https://github.com/sagemath/sage/issues/22462",
    "user": "https://github.com/jdemeyer"
}
```
This is preparation for #15585.

Branch/Commit: **[`75e41db`](https://github.com/sagemath/sagetrac-mirror/commit/75e41dbeeb01de939ac14699b18fef270e9edb67)**

Reviewer: **Sébastien Labbé**

Author: **Jeroen Demeyer**

Component: **misc**

_Issue created by migration from https://trac.sagemath.org/ticket/22462_





---

archive/issue_events_315476.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-27T16:07:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315476"
}
```



---

archive/issue_events_315477.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-27T16:07:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315477"
}
```



---

archive/issue_events_315478.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-27T16:07:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315478"
}
```



---

archive/issue_comments_332560.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-This might fix #15585.\n+This might fix #15585. But given that #15585 is non-deterministic, that is hard to know for sure.\n``````\n",
    "created_at": "2017-02-27T16:08:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332560",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-This might fix #15585.
+This might fix #15585. But given that #15585 is non-deterministic, that is hard to know for sure.
``````




---

archive/issue_comments_332561.json:
```json
{
    "body": "Branch: **[u/jdemeyer/use_containchildren_to_implement_p_iter_fork](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/use_containchildren_to_implement_p_iter_fork)**",
    "created_at": "2017-02-28T09:28:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332561",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/use_containchildren_to_implement_p_iter_fork](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/use_containchildren_to_implement_p_iter_fork)**



---

archive/issue_comments_332562.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62f870a79690c7a3ed57e7ebc3cf1e83774d355a\"><code>62f870a</code></a></td><td><code>Use ContainChildren to implement p_iter_fork</code></td></tr></table>\n",
    "created_at": "2017-02-28T09:32:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332562",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62f870a79690c7a3ed57e7ebc3cf1e83774d355a"><code>62f870a</code></a></td><td><code>Use ContainChildren to implement p_iter_fork</code></td></tr></table>




---

archive/issue_comments_332563.json:
```json
{
    "body": "Commit: **[`62f870a`](https://github.com/sagemath/sagetrac-mirror/commit/62f870a79690c7a3ed57e7ebc3cf1e83774d355a)**",
    "created_at": "2017-02-28T09:32:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332563",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[`62f870a`](https://github.com/sagemath/sagetrac-mirror/commit/62f870a79690c7a3ed57e7ebc3cf1e83774d355a)**



---

archive/issue_events_315479.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-28T09:32:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315479"
}
```



---

archive/issue_comments_332564.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n This might fix #15585. But given that #15585 is non-deterministic, that is hard to know for sure.\n+\n+This ticket also does some clean-up of `p_iter_fork`.\n``````\n",
    "created_at": "2017-02-28T09:34:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332564",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 This might fix #15585. But given that #15585 is non-deterministic, that is hard to know for sure.
+
+This ticket also does some clean-up of `p_iter_fork`.
``````




---

archive/issue_events_315480.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-04T01:04:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315480"
}
```



---

archive/issue_events_315481.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-04T01:04:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315481"
}
```



---

archive/issue_comments_332565.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nWith the patch, on top of 8.0.rc0, `make start` works. But `./sage` yields:\n\n```\n$ sage\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 8.0.rc0, Release Date: 2017-06-29                 \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n\n**********************************************************************\n\nOops, Sage crashed. We do our best to make it stable, but...\n```\n\nThe last part of the crash report is:\n\n```\n/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py in <module>()\n      3 \"\"\"\n      4 \n      5 #*****************************************************************************\n      6 #       Copyright (C) 2010 William Stein <wstein@gmail.com>\n      7 #\n      8 # This program is free software: you can redistribute it and/or modify\n      9 # it under the terms of the GNU General Public License as published by\n     10 # the Free Software Foundation, either version 2 of the License, or\n     11 # (at your option) any later version.\n     12 #                  http://www.gnu.org/licenses/\n     13 #*****************************************************************************\n     14 \n     15 from __future__ import absolute_import, print_function\n     16 \n     17 from cysignals.alarm import AlarmInterrupt, alarm, cancel_alarm\n---> 18 from .safefork import ContainChildren\n        global safefork = undefined\n        global ContainChildren = undefined\n     19 from sage.misc.misc import walltime\n     20 \n     21 \n     22 class WorkerData(object):\n     23     \"\"\"\n     24     Simple class which stores data about a running ``p_iter_fork``\n     25     worker.\n     26 \n     27     This just stores three attributes:\n     28 \n     29     - ``input``: the input value used by this worker\n     30 \n     31     - ``starttime``: the walltime when this worker started\n     32 \n     33     - ``failure``: an optional message indicating the kind of failure\n\nImportError: cannot import name ContainChildren\n\n***************************************************************************\n\nHistory of session input:\n*** Last line of input (may not be in above history):\n```",
    "created_at": "2017-07-04T01:04:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332565",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:5" align="right">comment:5</div>

With the patch, on top of 8.0.rc0, `make start` works. But `./sage` yields:

```
$ sage
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 8.0.rc0, Release Date: 2017-06-29                 │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛

**********************************************************************

Oops, Sage crashed. We do our best to make it stable, but...
```

The last part of the crash report is:

```
/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py in <module>()
      3 """
      4 
      5 #*****************************************************************************
      6 #       Copyright (C) 2010 William Stein <wstein@gmail.com>
      7 #
      8 # This program is free software: you can redistribute it and/or modify
      9 # it under the terms of the GNU General Public License as published by
     10 # the Free Software Foundation, either version 2 of the License, or
     11 # (at your option) any later version.
     12 #                  http://www.gnu.org/licenses/
     13 #*****************************************************************************
     14 
     15 from __future__ import absolute_import, print_function
     16 
     17 from cysignals.alarm import AlarmInterrupt, alarm, cancel_alarm
---> 18 from .safefork import ContainChildren
        global safefork = undefined
        global ContainChildren = undefined
     19 from sage.misc.misc import walltime
     20 
     21 
     22 class WorkerData(object):
     23     """
     24     Simple class which stores data about a running ``p_iter_fork``
     25     worker.
     26 
     27     This just stores three attributes:
     28 
     29     - ``input``: the input value used by this worker
     30 
     31     - ``starttime``: the walltime when this worker started
     32 
     33     - ``failure``: an optional message indicating the kind of failure

ImportError: cannot import name ContainChildren

***************************************************************************

History of session input:
*** Last line of input (may not be in above history):
```



---

archive/issue_comments_332566.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nLooking at the log\n\n```\ncommit 03c5e01\nAuthor: Erik M. Bray <erik.bray@lri.fr>\nDate:   Thu Nov 24 12:45:07 2016 +0000\n\n    Move the terminate and ContainChildren context managers into a new sage.interfaces.process module\n\n```\nwhich was done in #21206.",
    "created_at": "2017-07-04T01:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332566",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:6" align="right">comment:6</div>

Looking at the log

```
commit 03c5e01
Author: Erik M. Bray <erik.bray@lri.fr>
Date:   Thu Nov 24 12:45:07 2016 +0000

    Move the terminate and ContainChildren context managers into a new sage.interfaces.process module

```
which was done in #21206.



---

archive/issue_comments_332567.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f7ff57275df3c8188c5186846f9a25c90105e5e\"><code>8f7ff57</code></a></td><td><code>Use ContainChildren to implement p_iter_fork</code></td></tr></table>\n",
    "created_at": "2017-07-04T08:58:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332567",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f7ff57275df3c8188c5186846f9a25c90105e5e"><code>8f7ff57</code></a></td><td><code>Use ContainChildren to implement p_iter_fork</code></td></tr></table>




---

archive/issue_comments_332568.json:
```json
{
    "body": "Changed commit from **[`62f870a`](https://github.com/sagemath/sagetrac-mirror/commit/62f870a79690c7a3ed57e7ebc3cf1e83774d355a)** to **[`8f7ff57`](https://github.com/sagemath/sagetrac-mirror/commit/8f7ff57275df3c8188c5186846f9a25c90105e5e)**",
    "created_at": "2017-07-04T08:58:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332568",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`62f870a`](https://github.com/sagemath/sagetrac-mirror/commit/62f870a79690c7a3ed57e7ebc3cf1e83774d355a)** to **[`8f7ff57`](https://github.com/sagemath/sagetrac-mirror/commit/8f7ff57275df3c8188c5186846f9a25c90105e5e)**



---

archive/issue_events_315482.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-04T09:10:36Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315482"
}
```



---

archive/issue_events_315483.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-04T09:10:36Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315483"
}
```



---

archive/issue_events_315484.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-04T09:10:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315484"
}
```



---

archive/issue_events_315485.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-04T09:10:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315485"
}
```



---

archive/issue_comments_332569.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nRebased to 8.0.rc0",
    "created_at": "2017-07-04T09:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332569",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

Rebased to 8.0.rc0



---

archive/issue_comments_332570.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nOn Ubuntu 16.04, with this branch on top of 8.0.rc0, and using `--optional=ccache,cmake,cryptominisat,mpir,python2,sage`, I get after `MAKE='make -j8' make ptestlong`:\n\n```\n----------------------------------------------------------------------\nsage -t --long --warn-long 60.8 src/sage/homology/simplicial_complex.py  # 1 doctest failed\nsage -t --long --warn-long 60.8 src/sage/sat/boolean_polynomials.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\nwhich means this ticket does not create new doctest problem (I get the same two errors on 8.0.rc0) but also means that it does not solve #15585.",
    "created_at": "2017-07-04T15:23:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332570",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:9" align="right">comment:9</div>

On Ubuntu 16.04, with this branch on top of 8.0.rc0, and using `--optional=ccache,cmake,cryptominisat,mpir,python2,sage`, I get after `MAKE='make -j8' make ptestlong`:

```
----------------------------------------------------------------------
sage -t --long --warn-long 60.8 src/sage/homology/simplicial_complex.py  # 1 doctest failed
sage -t --long --warn-long 60.8 src/sage/sat/boolean_polynomials.py  # 1 doctest failed
----------------------------------------------------------------------
```

which means this ticket does not create new doctest problem (I get the same two errors on 8.0.rc0) but also means that it does not solve #15585.



---

archive/issue_comments_332571.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@seblabbe](#comment:9):\n> \n> ```\n> ----------------------------------------------------------------------\n> sage -t --long --warn-long 60.8 src/sage/homology/simplicial_complex.py  # 1 doctest failed\n> sage -t --long --warn-long 60.8 src/sage/sat/boolean_polynomials.py  # 1 doctest failed\n> ----------------------------------------------------------------------\n> ```\n\nDo you have the actual test failure?\n\n> which means this ticket does not create new doctest problem (I get the same two errors on 8.0.rc0) but also means that it does not solve #15585.\n\nEven then, I still think that this ticket is a good idea.",
    "created_at": "2017-07-05T10:37:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332571",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@seblabbe](#comment:9):
> 
> ```
> ----------------------------------------------------------------------
> sage -t --long --warn-long 60.8 src/sage/homology/simplicial_complex.py  # 1 doctest failed
> sage -t --long --warn-long 60.8 src/sage/sat/boolean_polynomials.py  # 1 doctest failed
> ----------------------------------------------------------------------
> ```

Do you have the actual test failure?

> which means this ticket does not create new doctest problem (I get the same two errors on 8.0.rc0) but also means that it does not solve #15585.

Even then, I still think that this ticket is a good idea.



---

archive/issue_comments_332572.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@jdemeyer](#comment:10):\n> Replying to [@seblabbe](#comment:9):\n> > \n> > ```\n> > ----------------------------------------------------------------------\n> > sage -t --long --warn-long 60.8 src/sage/homology/simplicial_complex.py  # 1 doctest failed\n> > sage -t --long --warn-long 60.8 src/sage/sat/boolean_polynomials.py  # 1 doctest failed\n> > ----------------------------------------------------------------------\n> > ```\n\n> \n> Do you have the actual test failure?\n\nYes:\n\n```\nsage -t --long --warn-long 60.8 src/sage/homology/simplicial_complex.py\n**********************************************************************\nFile \"src/sage/homology/simplicial_complex.py\", line 2854, in sage.homology.simplicial_complex.SimplicialComplex.is_cohen_macaulay\nFailed example:\n    X.is_cohen_macaulay(ZZ)\nExpected:\n    False\nGot:\n    [Errno 2] No such file or directory: '/home/slabbe/.sage/temp/miami/8475/dir_aMATb0/8618.out'\n    False\n**********************************************************************\n1 item had failures:\n   1 of   8 in sage.homology.simplicial_complex.SimplicialComplex.is_cohen_macaulay\n    [598 tests, 1 failure, 4.88 s]\n\nsage -t --long --warn-long 60.8 src/sage/sat/boolean_polynomials.py\n**********************************************************************\nFile \"src/sage/sat/boolean_polynomials.py\", line 89, in sage.sat.boolean_polynomials.solve\nFailed example:\n    s = solve_sat(F, s_verbosity=1, c_max_vars_sparse=4, c_cutting_number=8) # optional - cryptominisat\nExpected:\n    c --> ...\n    ...\nGot:\n    c [consolidate] T: 0.00\n    c Found matrixes: 0 T: 0.00 T-out: N\n**********************************************************************\n1 item had failures:\n   1 of  22 in sage.sat.boolean_polynomials.solve\n    [27 tests, 1 failure, 0.76 s]\n```\n\n> Even then, I still think that this ticket is a good idea.\n\nCan you update the description of the ticket accordingly?",
    "created_at": "2017-07-05T19:03:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332572",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@jdemeyer](#comment:10):
> Replying to [@seblabbe](#comment:9):
> > 
> > ```
> > ----------------------------------------------------------------------
> > sage -t --long --warn-long 60.8 src/sage/homology/simplicial_complex.py  # 1 doctest failed
> > sage -t --long --warn-long 60.8 src/sage/sat/boolean_polynomials.py  # 1 doctest failed
> > ----------------------------------------------------------------------
> > ```

> 
> Do you have the actual test failure?

Yes:

```
sage -t --long --warn-long 60.8 src/sage/homology/simplicial_complex.py
**********************************************************************
File "src/sage/homology/simplicial_complex.py", line 2854, in sage.homology.simplicial_complex.SimplicialComplex.is_cohen_macaulay
Failed example:
    X.is_cohen_macaulay(ZZ)
Expected:
    False
Got:
    [Errno 2] No such file or directory: '/home/slabbe/.sage/temp/miami/8475/dir_aMATb0/8618.out'
    False
**********************************************************************
1 item had failures:
   1 of   8 in sage.homology.simplicial_complex.SimplicialComplex.is_cohen_macaulay
    [598 tests, 1 failure, 4.88 s]

sage -t --long --warn-long 60.8 src/sage/sat/boolean_polynomials.py
**********************************************************************
File "src/sage/sat/boolean_polynomials.py", line 89, in sage.sat.boolean_polynomials.solve
Failed example:
    s = solve_sat(F, s_verbosity=1, c_max_vars_sparse=4, c_cutting_number=8) # optional - cryptominisat
Expected:
    c --> ...
    ...
Got:
    c [consolidate] T: 0.00
    c Found matrixes: 0 T: 0.00 T-out: N
**********************************************************************
1 item had failures:
   1 of  22 in sage.sat.boolean_polynomials.solve
    [27 tests, 1 failure, 0.76 s]
```

> Even then, I still think that this ticket is a good idea.

Can you update the description of the ticket accordingly?



---

archive/issue_comments_332573.json:
```json
{
    "body": "Reviewer: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2017-07-05T19:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332573",
    "user": "https://github.com/seblabbe"
}
```

Reviewer: **Sébastien Labbé**



---

archive/issue_events_315486.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-05T19:07:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315486"
}
```



---

archive/issue_events_315487.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-05T19:07:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315487"
}
```



---

archive/issue_comments_332574.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI get `All tests passed` with `make testlong` run serially.",
    "created_at": "2017-07-05T19:07:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332574",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:12" align="right">comment:12</div>

I get `All tests passed` with `make testlong` run serially.



---

archive/issue_events_315488.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-05T19:08:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315488"
}
```



---

archive/issue_events_315489.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-05T19:08:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315489"
}
```



---

archive/issue_comments_332575.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOups!\n\n```\n$ sage -coverage src/sage/parallel/use_fork.py\n------------------------------------------------------------------------\nSCORE src/sage/parallel/use_fork.py: 75.0% (3 of 4)\n\nMissing documentation:\n     * line 35: def __init__(self, input, starttime=None, failure=\"\")\n\nPossibly wrong (function name doesn't occur in doctests):\n     * line 232: def _subprocess(self, f, dir, x)\n------------------------------------------------------------------------\n```",
    "created_at": "2017-07-05T19:08:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332575",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:13" align="right">comment:13</div>

Oups!

```
$ sage -coverage src/sage/parallel/use_fork.py
------------------------------------------------------------------------
SCORE src/sage/parallel/use_fork.py: 75.0% (3 of 4)

Missing documentation:
     * line 35: def __init__(self, input, starttime=None, failure="")

Possibly wrong (function name doesn't occur in doctests):
     * line 232: def _subprocess(self, f, dir, x)
------------------------------------------------------------------------
```



---

archive/issue_comments_332576.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@seblabbe](#comment:11):\n> \n> ```\n> sage -t --long --warn-long 60.8 src/sage/homology/simplicial_complex.py\n> **********************************************************************\n> File \"src/sage/homology/simplicial_complex.py\", line 2854, in sage.homology.simplicial_complex.SimplicialComplex.is_cohen_macaulay\n> Failed example:\n>     X.is_cohen_macaulay(ZZ)\n> Expected:\n>     False\n> Got:\n>     [Errno 2] No such file or directory: '/home/slabbe/.sage/temp/miami/8475/dir_aMATb0/8618.out'\n>     False\n> **********************************************************************\n> ```\n\nCould you please double-check that this is really the test result with this branch applied? I ask because it looks like an exception is being printed. As far as I can see, if `verbose = False` (which is the case here), that only happens with the old code.",
    "created_at": "2017-07-06T08:18:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332576",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@seblabbe](#comment:11):
> 
> ```
> sage -t --long --warn-long 60.8 src/sage/homology/simplicial_complex.py
> **********************************************************************
> File "src/sage/homology/simplicial_complex.py", line 2854, in sage.homology.simplicial_complex.SimplicialComplex.is_cohen_macaulay
> Failed example:
>     X.is_cohen_macaulay(ZZ)
> Expected:
>     False
> Got:
>     [Errno 2] No such file or directory: '/home/slabbe/.sage/temp/miami/8475/dir_aMATb0/8618.out'
>     False
> **********************************************************************
> ```

Could you please double-check that this is really the test result with this branch applied? I ask because it looks like an exception is being printed. As far as I can see, if `verbose = False` (which is the case here), that only happens with the old code.



---

archive/issue_comments_332577.json:
```json
{
    "body": "Changed commit from **[`8f7ff57`](https://github.com/sagemath/sagetrac-mirror/commit/8f7ff57275df3c8188c5186846f9a25c90105e5e)** to **[`a4dddcc`](https://github.com/sagemath/sagetrac-mirror/commit/a4dddccdf11f9028cace629290b8264bca01b22e)**",
    "created_at": "2017-07-06T08:51:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332577",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8f7ff57`](https://github.com/sagemath/sagetrac-mirror/commit/8f7ff57275df3c8188c5186846f9a25c90105e5e)** to **[`a4dddcc`](https://github.com/sagemath/sagetrac-mirror/commit/a4dddccdf11f9028cace629290b8264bca01b22e)**



---

archive/issue_comments_332578.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4dddccdf11f9028cace629290b8264bca01b22e\"><code>a4dddcc</code></a></td><td><code>Further fixes to use_fork</code></td></tr></table>\n",
    "created_at": "2017-07-06T08:51:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332578",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4dddccdf11f9028cace629290b8264bca01b22e"><code>a4dddcc</code></a></td><td><code>Further fixes to use_fork</code></td></tr></table>




---

archive/issue_events_315490.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-06T09:04:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315490"
}
```



---

archive/issue_events_315491.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-06T09:04:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315491"
}
```



---

archive/issue_comments_332579.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nAs I mentioned, I suspect that maybe you didn't test the right branch. Please test again.",
    "created_at": "2017-07-06T09:04:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332579",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

As I mentioned, I suspect that maybe you didn't test the right branch. Please test again.



---

archive/issue_comments_332580.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@jdemeyer](#comment:16):\n> As I mentioned, I suspect that maybe you didn't test the right branch. Please test again.\n\nNo problem, I just launched the make ptestlong.",
    "created_at": "2017-07-06T10:27:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332580",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@jdemeyer](#comment:16):
> As I mentioned, I suspect that maybe you didn't test the right branch. Please test again.

No problem, I just launched the make ptestlong.



---

archive/issue_comments_332581.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nAfter merging the new branch on 8.0.rc0 again, `MAKE='make -j8' make pteslong` finishes with:\n\n```\n----------------------------------------------------------------------\nsage -t --long --warn-long 30.2 src/sage/homology/simplicial_complex.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\nThe failure has changed:\n\n```\nsage -t --long --warn-long 30.2 src/sage/homology/simplicial_complex.py\n**********************************************************************\nFile \"src/sage/homology/simplicial_complex.py\", line 2854, in sage.homology.simplicial_complex.SimplicialComplex.is_cohen_macaulay\nFailed example:\n    X.is_cohen_macaulay(ZZ)\nExpected:\n    False\nGot:\n    Exception raised by child process with pid=27028:\n    Traceback (most recent call last):\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py\", line 165, in __call__\n        self._subprocess(f, dir, *v0)\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py\", line 294, in _subprocess\n        save(value, sobj, compress=False)\n      File \"sage/structure/sage_object.pyx\", line 1164, in sage.structure.sage_object.save (build/cythonized/sage/structure/sage_object.c:13871)\n        open(process(filename), 'wb').write(s)\n    IOError: [Errno 2] No such file or directory: '/home/slabbe/.sage/temp/miami/26912/dir_4FVAPf/27028.sobj'\n    Exception raised by child process with pid=27026:\n    Traceback (most recent call last):\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py\", line 165, in __call__\n        self._subprocess(f, dir, *v0)\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py\", line 294, in _subprocess\n        save(value, sobj, compress=False)\n      File \"sage/structure/sage_object.pyx\", line 1164, in sage.structure.sage_object.save (build/cythonized/sage/structure/sage_object.c:13871)\n        open(process(filename), 'wb').write(s)\n    IOError: [Errno 2] No such file or directory: '/home/slabbe/.sage/temp/miami/26912/dir_4FVAPf/27026.sobj'\n    Exception raised by child process with pid=27029:\n    Traceback (most recent call last):\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py\", line 165, in __call__\n        self._subprocess(f, dir, *v0)\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py\", line 294, in _subprocess\n        save(value, sobj, compress=False)\n      File \"sage/structure/sage_object.pyx\", line 1164, in sage.structure.sage_object.save (build/cythonized/sage/structure/sage_object.c:13871)\n        open(process(filename), 'wb').write(s)\n    IOError: [Errno 2] No such file or directory: '/home/slabbe/.sage/temp/miami/26912/dir_4FVAPf/27029.sobj'\n    Exception raised by child process with pid=27027:\n    Traceback (most recent call last):\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py\", line 165, in __call__\n        self._subprocess(f, dir, *v0)\n      File \"/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py\", line 294, in _subprocess\n        save(value, sobj, compress=False)\n      File \"sage/structure/sage_object.pyx\", line 1164, in sage.structure.sage_object.save (build/cythonized/sage/structure/sage_object.c:13871)\n        open(process(filename), 'wb').write(s)\n    IOError: [Errno 2] No such file or directory: '/home/slabbe/.sage/temp/miami/26912/dir_4FVAPf/27027.sobj'\n    False\n**********************************************************************\n1 item had failures:\n   1 of   8 in sage.homology.simplicial_complex.SimplicialComplex.is_cohen_macaulay\n    [598 tests, 1 failure, 5.19 s]\n\n```",
    "created_at": "2017-07-06T11:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332581",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:18" align="right">comment:18</div>

After merging the new branch on 8.0.rc0 again, `MAKE='make -j8' make pteslong` finishes with:

```
----------------------------------------------------------------------
sage -t --long --warn-long 30.2 src/sage/homology/simplicial_complex.py  # 1 doctest failed
----------------------------------------------------------------------
```

The failure has changed:

```
sage -t --long --warn-long 30.2 src/sage/homology/simplicial_complex.py
**********************************************************************
File "src/sage/homology/simplicial_complex.py", line 2854, in sage.homology.simplicial_complex.SimplicialComplex.is_cohen_macaulay
Failed example:
    X.is_cohen_macaulay(ZZ)
Expected:
    False
Got:
    Exception raised by child process with pid=27028:
    Traceback (most recent call last):
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py", line 165, in __call__
        self._subprocess(f, dir, *v0)
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py", line 294, in _subprocess
        save(value, sobj, compress=False)
      File "sage/structure/sage_object.pyx", line 1164, in sage.structure.sage_object.save (build/cythonized/sage/structure/sage_object.c:13871)
        open(process(filename), 'wb').write(s)
    IOError: [Errno 2] No such file or directory: '/home/slabbe/.sage/temp/miami/26912/dir_4FVAPf/27028.sobj'
    Exception raised by child process with pid=27026:
    Traceback (most recent call last):
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py", line 165, in __call__
        self._subprocess(f, dir, *v0)
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py", line 294, in _subprocess
        save(value, sobj, compress=False)
      File "sage/structure/sage_object.pyx", line 1164, in sage.structure.sage_object.save (build/cythonized/sage/structure/sage_object.c:13871)
        open(process(filename), 'wb').write(s)
    IOError: [Errno 2] No such file or directory: '/home/slabbe/.sage/temp/miami/26912/dir_4FVAPf/27026.sobj'
    Exception raised by child process with pid=27029:
    Traceback (most recent call last):
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py", line 165, in __call__
        self._subprocess(f, dir, *v0)
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py", line 294, in _subprocess
        save(value, sobj, compress=False)
      File "sage/structure/sage_object.pyx", line 1164, in sage.structure.sage_object.save (build/cythonized/sage/structure/sage_object.c:13871)
        open(process(filename), 'wb').write(s)
    IOError: [Errno 2] No such file or directory: '/home/slabbe/.sage/temp/miami/26912/dir_4FVAPf/27029.sobj'
    Exception raised by child process with pid=27027:
    Traceback (most recent call last):
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py", line 165, in __call__
        self._subprocess(f, dir, *v0)
      File "/home/slabbe/GitBox/sage/local/lib/python2.7/site-packages/sage/parallel/use_fork.py", line 294, in _subprocess
        save(value, sobj, compress=False)
      File "sage/structure/sage_object.pyx", line 1164, in sage.structure.sage_object.save (build/cythonized/sage/structure/sage_object.c:13871)
        open(process(filename), 'wb').write(s)
    IOError: [Errno 2] No such file or directory: '/home/slabbe/.sage/temp/miami/26912/dir_4FVAPf/27027.sobj'
    False
**********************************************************************
1 item had failures:
   1 of   8 in sage.homology.simplicial_complex.SimplicialComplex.is_cohen_macaulay
    [598 tests, 1 failure, 5.19 s]

```



---

archive/issue_events_315492.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-06T15:26:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315492"
}
```



---

archive/issue_events_315493.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-06T15:26:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315493"
}
```



---

archive/issue_comments_332582.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nExcellent!",
    "created_at": "2017-07-06T15:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332582",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

Excellent!



---

archive/issue_comments_332583.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nWell, it's not excellent that the failure is still there but it's good to see a traceback instead of just the error message being printed.",
    "created_at": "2017-07-06T15:29:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332583",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

Well, it's not excellent that the failure is still there but it's good to see a traceback instead of just the error message being printed.



---

archive/issue_comments_332584.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nAnd thanks to the traceback, the failure becomes obvious: the working directory of the workers is removed before the workers are killed. So a worker can try to write its result in the working directory after it has been deleted. I will deal with that in #15535.",
    "created_at": "2017-07-06T15:34:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332584",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

And thanks to the traceback, the failure becomes obvious: the working directory of the workers is removed before the workers are killed. So a worker can try to write its result in the working directory after it has been deleted. I will deal with that in #15535.



---

archive/issue_comments_332585.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n-This might fix #15585. But given that #15585 is non-deterministic, that is hard to know for sure.\n-\n-This ticket also does some clean-up of `p_iter_fork`.\n+This is preparation for #15585.\n``````\n",
    "created_at": "2017-07-06T15:34:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332585",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1 @@
-This might fix #15585. But given that #15585 is non-deterministic, that is hard to know for sure.
-
-This ticket also does some clean-up of `p_iter_fork`.
+This is preparation for #15585.
``````




---

archive/issue_events_315494.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-06T15:34:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315494"
}
```



---

archive/issue_events_315495.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-06T15:34:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315495"
}
```



---

archive/issue_events_315496.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-06T16:32:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315496"
}
```



---

archive/issue_events_315497.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2017-07-06T16:32:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315497"
}
```



---

archive/issue_comments_332586.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThe init method has still no doc neither doctests.",
    "created_at": "2017-07-06T16:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332586",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:22" align="right">comment:22</div>

The init method has still no doc neither doctests.



---

archive/issue_events_315498.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-06T20:44:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315498"
}
```



---

archive/issue_events_315499.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-06T20:44:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315499"
}
```



---

archive/issue_comments_332587.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe `__init__` method is too trivial... there is no meaningful doc to add which is not already in the class doc.",
    "created_at": "2017-07-06T20:44:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332587",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

The `__init__` method is too trivial... there is no meaningful doc to add which is not already in the class doc.



---

archive/issue_comments_332588.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI am sorry but I prefer to make it 100% coverage to avoid the noise of seeing 75% forever for that file on every run of sage -coverage. So I added a commit. If you agree with my commit, I let you change the status to positive review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75e41dbeeb01de939ac14699b18fef270e9edb67\"><code>75e41db</code></a></td><td><code>adding docstring to WorkerData.__init__</code></td></tr></table>\n",
    "created_at": "2017-07-11T12:24:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332588",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:24" align="right">comment:24</div>

I am sorry but I prefer to make it 100% coverage to avoid the noise of seeing 75% forever for that file on every run of sage -coverage. So I added a commit. If you agree with my commit, I let you change the status to positive review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75e41dbeeb01de939ac14699b18fef270e9edb67"><code>75e41db</code></a></td><td><code>adding docstring to WorkerData.__init__</code></td></tr></table>




---

archive/issue_comments_332589.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/use_containchildren_to_implement_p_iter_fork](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/use_containchildren_to_implement_p_iter_fork)** to **[u/slabbe/22462](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/22462)**",
    "created_at": "2017-07-11T12:24:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332589",
    "user": "https://github.com/seblabbe"
}
```

Changed branch from **[u/jdemeyer/use_containchildren_to_implement_p_iter_fork](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/use_containchildren_to_implement_p_iter_fork)** to **[u/slabbe/22462](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/22462)**



---

archive/issue_comments_332590.json:
```json
{
    "body": "Changed commit from **[`a4dddcc`](https://github.com/sagemath/sagetrac-mirror/commit/a4dddccdf11f9028cace629290b8264bca01b22e)** to **[`75e41db`](https://github.com/sagemath/sagetrac-mirror/commit/75e41dbeeb01de939ac14699b18fef270e9edb67)**",
    "created_at": "2017-07-11T12:24:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332590",
    "user": "https://github.com/seblabbe"
}
```

Changed commit from **[`a4dddcc`](https://github.com/sagemath/sagetrac-mirror/commit/a4dddccdf11f9028cace629290b8264bca01b22e)** to **[`75e41db`](https://github.com/sagemath/sagetrac-mirror/commit/75e41dbeeb01de939ac14699b18fef270e9edb67)**



---

archive/issue_comments_332591.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@seblabbe](#comment:24):\n> If you agree with my commit, I let you change the status to positive review.\n\nI do not agree.\n\nDespite that, I'm still setting it to positive_review in order to move forward.",
    "created_at": "2017-07-12T12:45:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332591",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@seblabbe](#comment:24):
> If you agree with my commit, I let you change the status to positive review.

I do not agree.

Despite that, I'm still setting it to positive_review in order to move forward.



---

archive/issue_events_315500.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-12T12:45:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315500"
}
```



---

archive/issue_events_315501.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-07-12T12:45:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315501"
}
```



---

archive/issue_comments_332592.json:
```json
{
    "body": "Changed branch from **[u/slabbe/22462](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/22462)** to **[`75e41db`](https://github.com/sagemath/sagetrac-mirror/commit/75e41dbeeb01de939ac14699b18fef270e9edb67)**",
    "created_at": "2017-07-26T22:13:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22462#issuecomment-332592",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/slabbe/22462](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/22462)** to **[`75e41db`](https://github.com/sagemath/sagetrac-mirror/commit/75e41dbeeb01de939ac14699b18fef270e9edb67)**



---

archive/issue_events_315502.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-07-26T22:13:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315502"
}
```



---

archive/issue_events_315503.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7b82f7fc2084fb673638efbc53603642a124f496",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-07-26T22:13:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22462",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22462#event-315503"
}
```
