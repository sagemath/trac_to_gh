# Issue 22260: mpir fails to build with sed 4.3+

archive/issues_022023.json:
```json
{
    "assignees": [],
    "body": "See for example: https://groups.google.com/forum/#!topic/sage-devel/sqXwBseqiRA\n \n\nThis is fixed upstream by https://github.com/wbhart/mpir/pull/185\n\nCC:  @gagern\n\nBranch/Commit: **[`475eb39`](https://github.com/sagemath/sagetrac-mirror/commit/475eb3976395484ae3037e650f9c55efedc2d78f)**\n\nUpstream: **Fixed upstream, but not in a stable release.**\n\nReviewer: **Martin von Gagern**\n\nAuthor: **Fran\u00e7ois Bissey**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22260_\n\n",
    "closed_at": "2017-01-29T12:04:50Z",
    "created_at": "2017-01-25T18:42:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "mpir fails to build with sed 4.3+",
    "type": "issue",
    "updated_at": "2017-01-29T12:04:50Z",
    "url": "https://github.com/sagemath/sage/issues/22260",
    "user": "https://github.com/kiwifb"
}
```
See for example: https://groups.google.com/forum/#!topic/sage-devel/sqXwBseqiRA
 

This is fixed upstream by https://github.com/wbhart/mpir/pull/185

CC:  @gagern

Branch/Commit: **[`475eb39`](https://github.com/sagemath/sagetrac-mirror/commit/475eb3976395484ae3037e650f9c55efedc2d78f)**

Upstream: **Fixed upstream, but not in a stable release.**

Reviewer: **Martin von Gagern**

Author: **François Bissey**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/22260_





---

archive/issue_events_311568.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-01-25T18:42:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22260#event-311568"
}
```



---

archive/issue_events_311569.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-01-25T18:42:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22260#event-311569"
}
```



---

archive/issue_events_311570.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-01-25T18:42:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22260#event-311570"
}
```



---

archive/issue_events_311571.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-01-25T18:42:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22260#event-311571"
}
```



---

archive/issue_events_311572.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2017-01-26T04:37:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22260#event-311572"
}
```



---

archive/issue_comments_329091.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nWould you mind reviewing this Martin?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/475eb3976395484ae3037e650f9c55efedc2d78f\">475eb39</a></td><td><code>Import upstream PR 185 to deal with newer sed</code></td></tr></table>\n",
    "created_at": "2017-01-26T04:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22260#issuecomment-329091",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:1" align="right">comment:1</div>

Would you mind reviewing this Martin?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/475eb3976395484ae3037e650f9c55efedc2d78f">475eb39</a></td><td><code>Import upstream PR 185 to deal with newer sed</code></td></tr></table>




---

archive/issue_comments_329092.json:
```json
{
    "body": "Branch: **[u/fbissey/mpir-sed](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/mpir-sed)**",
    "created_at": "2017-01-26T04:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22260#issuecomment-329092",
    "user": "https://github.com/kiwifb"
}
```

Branch: **[u/fbissey/mpir-sed](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/mpir-sed)**



---

archive/issue_comments_329093.json:
```json
{
    "body": "Commit: **[`475eb39`](https://github.com/sagemath/sagetrac-mirror/commit/475eb3976395484ae3037e650f9c55efedc2d78f)**",
    "created_at": "2017-01-26T04:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22260#issuecomment-329093",
    "user": "https://github.com/kiwifb"
}
```

Commit: **[`475eb39`](https://github.com/sagemath/sagetrac-mirror/commit/475eb3976395484ae3037e650f9c55efedc2d78f)**



---

archive/issue_comments_329094.json:
```json
{
    "body": "Author: **Fran\u00e7ois Bissey**",
    "created_at": "2017-01-26T04:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22260#issuecomment-329094",
    "user": "https://github.com/kiwifb"
}
```

Author: **François Bissey**



---

archive/issue_comments_329095.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI'll give this a try later on, yes. I wonder whether we need to change the version number, as this only affects the build-time behavior. I'd conjecture that if the build succeeded at all, then the output should be identical with or without this patch. Not sure though.",
    "created_at": "2017-01-26T06:31:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22260#issuecomment-329095",
    "user": "https://github.com/gagern"
}
```

<div id="comment:2" align="right">comment:2</div>

I'll give this a try later on, yes. I wonder whether we need to change the version number, as this only affects the build-time behavior. I'd conjecture that if the build succeeded at all, then the output should be identical with or without this patch. Not sure though.



---

archive/issue_comments_329096.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nPackage build successfully on a system where it failed before.\nChanges to files look clean.\nVersion bump *might* be unneccessary but certainly won't hurt.\nThanks a lot!",
    "created_at": "2017-01-26T08:53:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22260#issuecomment-329096",
    "user": "https://github.com/gagern"
}
```

<div id="comment:3" align="right">comment:3</div>

Package build successfully on a system where it failed before.
Changes to files look clean.
Version bump *might* be unneccessary but certainly won't hurt.
Thanks a lot!



---

archive/issue_comments_329097.json:
```json
{
    "body": "Reviewer: **Martin von Gagern**",
    "created_at": "2017-01-26T08:53:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22260#issuecomment-329097",
    "user": "https://github.com/gagern"
}
```

Reviewer: **Martin von Gagern**



---

archive/issue_events_311573.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2017-01-26T08:53:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22260#event-311573"
}
```



---

archive/issue_events_311574.json:
```json
{
    "actor": "https://github.com/gagern",
    "created_at": "2017-01-26T08:53:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22260#event-311574"
}
```



---

archive/issue_comments_329098.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@gagern](#comment:3):\n> Package build successfully on a system where it failed before.\n> Changes to files look clean.\n> Version bump *might* be unneccessary but certainly won't hurt.\n> Thanks a lot!\n\nI had the conversation about the version bump before with Jeroen Demeyer. While I agree in practice  - like in gentoo - the bump is unnecessary, the argument is that it will allow the build to tested in depth by the patchbot and anyone getting the next version of sage with it in.",
    "created_at": "2017-01-26T19:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22260#issuecomment-329098",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@gagern](#comment:3):
> Package build successfully on a system where it failed before.
> Changes to files look clean.
> Version bump *might* be unneccessary but certainly won't hurt.
> Thanks a lot!

I had the conversation about the version bump before with Jeroen Demeyer. While I agree in practice  - like in gentoo - the bump is unnecessary, the argument is that it will allow the build to tested in depth by the patchbot and anyone getting the next version of sage with it in.



---

archive/issue_comments_329099.json:
```json
{
    "body": "Changed branch from **[u/fbissey/mpir-sed](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/mpir-sed)** to **[`475eb39`](https://github.com/sagemath/sagetrac-mirror/commit/475eb3976395484ae3037e650f9c55efedc2d78f)**",
    "created_at": "2017-01-29T12:04:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22260#issuecomment-329099",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/fbissey/mpir-sed](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/mpir-sed)** to **[`475eb39`](https://github.com/sagemath/sagetrac-mirror/commit/475eb3976395484ae3037e650f9c55efedc2d78f)**



---

archive/issue_events_311575.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-29T12:04:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22260#event-311575"
}
```



---

archive/issue_events_311576.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5ea3fad3a8786858d38e6d3b5cdb0ac387146e4e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-01-29T12:04:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22260",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22260#event-311576"
}
```
