# Issue 22322: allow sympy algorithm in solve

archive/issues_022085.json:
```json
{
    "body": "What it says.  See e.g. [this post](https://ask.sagemath.org/question/36469/understanding-solve/) for why.\n\nDepends on #23990\n\nDepends on #24104\n\nDepends on #24062\n\n**CC:**  @rwst @mforets tmonteil @EmmanuelCharpentier\n\n**Branch/Commit:** [8e1e240bb9b8d735251847e67deec1fdb32eccba](https://github.com/sagemath/sagetrac-mirror/commit/8e1e240bb9b8d735251847e67deec1fdb32eccba)\n\n**Reviewer:** Emmanuel Charpentier\n\n**Author:** Ralf Stephan\n\nIssue created by migration from https://trac.sagemath.org/ticket/22322\n\n",
    "closed_at": "2017-12-13T17:38:46Z",
    "created_at": "2017-02-07T16:30:12Z",
    "labels": [
        "component: symbolics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "title": "allow sympy algorithm in solve",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/22322",
    "user": "https://github.com/kcrisman"
}
```
What it says.  See e.g. [this post](https://ask.sagemath.org/question/36469/understanding-solve/) for why.

Depends on #23990

Depends on #24104

Depends on #24062

**CC:**  @rwst @mforets tmonteil @EmmanuelCharpentier

**Branch/Commit:** [8e1e240bb9b8d735251847e67deec1fdb32eccba](https://github.com/sagemath/sagetrac-mirror/commit/8e1e240bb9b8d735251847e67deec1fdb32eccba)

**Reviewer:** Emmanuel Charpentier

**Author:** Ralf Stephan

Issue created by migration from https://trac.sagemath.org/ticket/22322





---

archive/issue_comments_332428.json:
```json
{
    "body": "<a id='comment:1'></a>\nAFAIK, also useful for equations where the unkown appears as an exponent, cf. [solve(4.94 * 1.062^x == 15, x)](https://ask.sagemath.org/question/37640/solving-returns-x/)",
    "created_at": "2017-05-20T09:51:55Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332428",
    "user": "https://github.com/mforets"
}
```

<a id='comment:1'></a>
AFAIK, also useful for equations where the unkown appears as an exponent, cf. [solve(4.94 * 1.062^x == 15, x)](https://ask.sagemath.org/question/37640/solving-returns-x/)



---

archive/issue_comments_332429.json:
```json
{
    "body": "<a id='comment:3'></a>\n`solve` (from `expression.pyx`) passes a relational expression to Maxima's solve, but this doesn't seem to be available in sympy:\n\n```\nsage: (x==1)._maxima_()\n_SAGE_VAR_x=1\nsage: (x==1)._sympy_()\nTraceback (most recent call last)\n...\nNotImplementedError: relation\n```\n\ndo you have some idea on how to tackle this? otherwise, what about passing `ex.lhs()-ex.rhs()` to sympy's solve.",
    "created_at": "2017-06-04T13:05:51Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332429",
    "user": "https://github.com/mforets"
}
```

<a id='comment:3'></a>
`solve` (from `expression.pyx`) passes a relational expression to Maxima's solve, but this doesn't seem to be available in sympy:

```
sage: (x==1)._maxima_()
_SAGE_VAR_x=1
sage: (x==1)._sympy_()
Traceback (most recent call last)
...
NotImplementedError: relation
```

do you have some idea on how to tackle this? otherwise, what about passing `ex.lhs()-ex.rhs()` to sympy's solve.



---

archive/issue_comments_332430.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [mforets](#comment%3A3):\n> `solve` (from `expression.pyx`) passes a relational expression to Maxima's solve, but this doesn't seem to be available in sympy:\n> ...\n> do you have some idea on how to tackle this? otherwise, what about passing `ex.lhs()-ex.rhs()` to sympy's solve.\n\n\nYes, that would be it for the equalities. For inequalities `SympyConverter.relation()` is needed (atm the superclass's `relation` is called).",
    "created_at": "2017-06-05T05:36:19Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332430",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'></a>
Replying to [mforets](#comment%3A3):
> `solve` (from `expression.pyx`) passes a relational expression to Maxima's solve, but this doesn't seem to be available in sympy:
> ...
> do you have some idea on how to tackle this? otherwise, what about passing `ex.lhs()-ex.rhs()` to sympy's solve.


Yes, that would be it for the equalities. For inequalities `SympyConverter.relation()` is needed (atm the superclass's `relation` is called).



---

archive/issue_comments_332431.json:
```json
{
    "body": "<a id='comment:5'></a>\nCorrection, doing `ex.lhs()-ex.rhs()` is not needed if the `SympyConverter` is fixed.",
    "created_at": "2017-06-05T05:38:23Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332431",
    "user": "https://github.com/rwst"
}
```

<a id='comment:5'></a>
Correction, doing `ex.lhs()-ex.rhs()` is not needed if the `SympyConverter` is fixed.



---

archive/issue_comments_332432.json:
```json
{
    "body": "**Dependencies:** #23990",
    "created_at": "2017-10-08T14:21:18Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332432",
    "user": "https://github.com/rwst"
}
```

**Dependencies:** #23990



---

archive/issue_comments_332433.json:
```json
{
    "body": "<a id='comment:8'></a>\nHmmm...\n\n```\nsage: var(\"a,b\")\n(a, b)\nsage: sympy.sympify(a==b)._sage_()\na == b\nsage: sympy.sympify(a==b).sage()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-14-25de6a4c8f0a> in <module>()\n----> 1 sympy.sympify(a==b).sage()\n\nAttributeError: 'Equality' object has no attribute 'sage'\n```\n\nIs that the expected behaviour ? Or do you plan to enhance the `.sage()` method for various objects ?\n\nIt is not obvious to me why (e. g.) mathematica objets can (sometimes...) be converted back to sage via the `.sage()` (exposed) method, whereas Sympy objects have to use the `._sage_()` (unexposed method.",
    "created_at": "2017-10-10T11:17:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332433",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:8'></a>
Hmmm...

```
sage: var("a,b")
(a, b)
sage: sympy.sympify(a==b)._sage_()
a == b
sage: sympy.sympify(a==b).sage()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-14-25de6a4c8f0a> in <module>()
----> 1 sympy.sympify(a==b).sage()

AttributeError: 'Equality' object has no attribute 'sage'
```

Is that the expected behaviour ? Or do you plan to enhance the `.sage()` method for various objects ?

It is not obvious to me why (e. g.) mathematica objets can (sometimes...) be converted back to sage via the `.sage()` (exposed) method, whereas Sympy objects have to use the `._sage_()` (unexposed method.



---

archive/issue_events_199408.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-10-10T11:17:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199408"
}
```



---

archive/issue_comments_332434.json:
```json
{
    "body": "<a id='comment:9'></a>\nAs I explained in #23990 that is the SymPy convention.",
    "created_at": "2017-10-10T13:28:33Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332434",
    "user": "https://github.com/rwst"
}
```

<a id='comment:9'></a>
As I explained in #23990 that is the SymPy convention.



---

archive/issue_comments_332435.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [rws](#comment%3A9):\n> As I explained in #23990 that is the SymPy convention.\n\n\nWups, ~~bad~~ wrong ticket. I *thought* that my comment was cancelled ; it was not.\n\nApologies...",
    "created_at": "2017-10-10T13:56:52Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332435",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:10'></a>
Replying to [rws](#comment%3A9):
> As I explained in #23990 that is the SymPy convention.


Wups, ~~bad~~ wrong ticket. I *thought* that my comment was cancelled ; it was not.

Apologies...



---

archive/issue_comments_332436.json:
```json
{
    "body": "**Changing dependencies** from \"#23990\" to \"#23990, #24078\".",
    "created_at": "2017-10-20T13:06:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332436",
    "user": "https://github.com/rwst"
}
```

**Changing dependencies** from "#23990" to "#23990, #24078".



---

archive/issue_events_199409.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-20T13:06:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199409"
}
```



---

archive/issue_events_199410.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-20T13:06:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199410"
}
```



---

archive/issue_comments_332437.json:
```json
{
    "body": "<a id='comment:11'></a>\nNow that (with #23990) relations are translated from/to SymPy there are still things needed. For example we need to translate any assumptions on variables (and maybe anon. functions?) that were made using `assume` and `var('x', domain=...)`. This is not only relevant for this ticket, any SymPy operation may access the SymPy knowledge base any time. So I think this should be handled the same way as with Maxima, i.e. at the time the `assume`/`var` calls are made. This is #24078.",
    "created_at": "2017-10-20T13:06:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332437",
    "user": "https://github.com/rwst"
}
```

<a id='comment:11'></a>
Now that (with #23990) relations are translated from/to SymPy there are still things needed. For example we need to translate any assumptions on variables (and maybe anon. functions?) that were made using `assume` and `var('x', domain=...)`. This is not only relevant for this ticket, any SymPy operation may access the SymPy knowledge base any time. So I think this should be handled the same way as with Maxima, i.e. at the time the `assume`/`var` calls are made. This is #24078.



---

archive/issue_comments_332438.json:
```json
{
    "body": "<a id='comment:12'></a>\nNote that SymPy's solve does not respect the global assumptions database:\n\n```\nIn [12]: global_assumptions\nOut[12]: AssumptionsContext([Q.is_true(x > 2), Q.positive(x)])\n\nIn [13]: solve(x<3)\nOut[13]: -\u221e < x \u2227 x < 3\n\nIn [15]: solve((x>2,x<3))\nOut[15]: 2 < x \u2227 x < 3\n```\nSo the dependency is irrelevant (at the moment).",
    "created_at": "2017-10-20T13:33:10Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332438",
    "user": "https://github.com/rwst"
}
```

<a id='comment:12'></a>
Note that SymPy's solve does not respect the global assumptions database:

```
In [12]: global_assumptions
Out[12]: AssumptionsContext([Q.is_true(x > 2), Q.positive(x)])

In [13]: solve(x<3)
Out[13]: -∞ < x ∧ x < 3

In [15]: solve((x>2,x<3))
Out[15]: 2 < x ∧ x < 3
```
So the dependency is irrelevant (at the moment).



---

archive/issue_comments_332439.json:
```json
{
    "body": "**Changing dependencies** from \"#23990, #24078\" to \"#23990\".",
    "created_at": "2017-10-20T13:33:10Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332439",
    "user": "https://github.com/rwst"
}
```

**Changing dependencies** from "#23990, #24078" to "#23990".



---

archive/issue_comments_332440.json:
```json
{
    "body": "<a id='comment:13'></a>\nOur solve doesn't either, so it all is localized in the solve arguments:\n\n```\nsage: assume(x>2)\nsage: solve(x<3,x)\n[[x < 3]]\nsage: solve((x>2,x<3),x)\n[[2 < x, x < 3]]\n```",
    "created_at": "2017-10-20T13:51:35Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332440",
    "user": "https://github.com/rwst"
}
```

<a id='comment:13'></a>
Our solve doesn't either, so it all is localized in the solve arguments:

```
sage: assume(x>2)
sage: solve(x<3,x)
[[x < 3]]
sage: solve((x>2,x<3),x)
[[2 < x, x < 3]]
```



---

archive/issue_comments_332441.json:
```json
{
    "body": "<a id='comment:14'></a>\nOur solve's output is quite opaque IMHO:\n\n```\nsage: solve((x^2<1),x)\n[[x > -1, x < 1]]\nsage: solve((x^2>1),x)\n[[x < -1], [x > 1]]\n```\nFrom a glance, which is AND, which is OR? So I would like to use `And(...)` and `Or(...)` as in SymPy but:\n\n```\nsage: Or = function('Or')\nsage: ex = Or(x<0, x>1)\nsage: ex\nOr(x < 0, x > 1)\nsage: ex.args()\n(x,)\nsage: ex.operands()\n[x < 0, x > 1]\n\nsage: ex[0]\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-8-c8fc37b12ad9> in <module>()\n----> 1 ex[Integer(0)]\n\nTypeError: 'sage.symbolic.expression.Expression' object does not support indexing\n```\nSo people would need to know that `operands()` gets the solutions. Or we support indexing as alias to `operands()`.",
    "created_at": "2017-10-20T14:47:22Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332441",
    "user": "https://github.com/rwst"
}
```

<a id='comment:14'></a>
Our solve's output is quite opaque IMHO:

```
sage: solve((x^2<1),x)
[[x > -1, x < 1]]
sage: solve((x^2>1),x)
[[x < -1], [x > 1]]
```
From a glance, which is AND, which is OR? So I would like to use `And(...)` and `Or(...)` as in SymPy but:

```
sage: Or = function('Or')
sage: ex = Or(x<0, x>1)
sage: ex
Or(x < 0, x > 1)
sage: ex.args()
(x,)
sage: ex.operands()
[x < 0, x > 1]

sage: ex[0]
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-8-c8fc37b12ad9> in <module>()
----> 1 ex[Integer(0)]

TypeError: 'sage.symbolic.expression.Expression' object does not support indexing
```
So people would need to know that `operands()` gets the solutions. Or we support indexing as alias to `operands()`.



---

archive/issue_comments_332442.json:
```json
{
    "body": "**Changing dependencies** from \"#23990\" to \"#23990, #24080\".",
    "created_at": "2017-10-20T15:26:56Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332442",
    "user": "https://github.com/rwst"
}
```

**Changing dependencies** from "#23990" to "#23990, #24080".



---

archive/issue_comments_332443.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [rws](#comment%3A14):\n> So people would need to know that `operands()` gets the solutions. Or we support indexing as alias to `operands()`.\n\n\nSupporting expression indexing seems tricky. Also this is an interface change. Better move it to a future ticket.",
    "created_at": "2017-10-24T14:35:11Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332443",
    "user": "https://github.com/rwst"
}
```

<a id='comment:16'></a>
Replying to [rws](#comment%3A14):
> So people would need to know that `operands()` gets the solutions. Or we support indexing as alias to `operands()`.


Supporting expression indexing seems tricky. Also this is an interface change. Better move it to a future ticket.



---

archive/issue_comments_332444.json:
```json
{
    "body": "**Changing dependencies** from \"#23990, #24080\" to \"#23990\".",
    "created_at": "2017-10-24T14:35:11Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332444",
    "user": "https://github.com/rwst"
}
```

**Changing dependencies** from "#23990, #24080" to "#23990".



---

archive/issue_comments_332445.json:
```json
{
    "body": "<a id='comment:17'></a>\nI cannot believe devs maintained two different versions of `solve` in `symbolic/expression.pyx` and `symbolic/relation.py`. `expression.pyx` should only be an interface to a function elsewhere, preferably in `solve.py`.",
    "created_at": "2017-10-25T07:48:43Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332445",
    "user": "https://github.com/rwst"
}
```

<a id='comment:17'></a>
I cannot believe devs maintained two different versions of `solve` in `symbolic/expression.pyx` and `symbolic/relation.py`. `expression.pyx` should only be an interface to a function elsewhere, preferably in `solve.py`.



---

archive/issue_comments_332446.json:
```json
{
    "body": "<a id='comment:18'></a>\n>  Note that SymPy's solve does not respect the global assumptions database: \n\n\nshall we consider interfacing with SymPy's [solveset](http://docs.sympy.org/latest/modules/solvers/solveset.html)? it is said to supersede [solve](http://docs.sympy.org/latest/modules/solvers/solvers.html) sooner or later.\n\ni find that the interface `(equation, variable, domain)` is very clear. isn't it preferable than relying on global assumptions? (or to fallback into the global assumptions if the domain is not provided.)",
    "created_at": "2017-10-25T09:49:49Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332446",
    "user": "https://github.com/mforets"
}
```

<a id='comment:18'></a>
>  Note that SymPy's solve does not respect the global assumptions database: 


shall we consider interfacing with SymPy's [solveset](http://docs.sympy.org/latest/modules/solvers/solveset.html)? it is said to supersede [solve](http://docs.sympy.org/latest/modules/solvers/solvers.html) sooner or later.

i find that the interface `(equation, variable, domain)` is very clear. isn't it preferable than relying on global assumptions? (or to fallback into the global assumptions if the domain is not provided.)



---

archive/issue_comments_332447.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [mforets](#comment%3A18):\n> >  Note that SymPy's solve does not respect the global assumptions database: \n\n> \n> shall we consider interfacing with SymPy's [solveset](http://docs.sympy.org/latest/modules/solvers/solveset.html)? it is said to supersede [solve](http://docs.sympy.org/latest/modules/solvers/solvers.html) sooner or later.\n\n\nFly in the ointment : `solve` can solve **systems** of equations, whereas `solveset` (which is, indeed, cleaner on more than one aspect), solves only equations.\n\nIn order to solve system, we would have to map `solveset` to all the equations in the system (each for one variable (which one ?)), and return the intersection of the results, which is currently problematic.\n\n\n> i find that the interface `(equation, variable, domain)` is very clear. isn't it preferable than relying on global assumptions? (or to fallback into the global assumptions if the domain is not provided.)\n\n\nThe domain is only a part of the possible assumptions : e. g., maxima often asks if some expression is positive, if such variable is integer, etc... We need to maintain a \"knowledge base\" about outr variables as least as rich as our current (= Maxima's) facts base.\n\nA few remarks :\n\n1) I note that Sympy's knowledge base is richer than ours, BTW.\n\n2) We might use profitably something analogous to Mathematica's `Assuming` statement, which does something (roughly )equivalent to :\n\n```\ndef assuming(condset, statement):\n    try:\n        OldAssumptions=assumptions()\n        Assumptions=OldAssumptions.copy()\n        Assumptions.extend(condset)\n        forget(assumptions())\n        assume(Assumptions)\n        result=<do statement, somehow>\n    finally:\n        forget(assumptions())\n        assume(OldAssumptions)\n```\nThe wasp in the ointment is of course that `statement` is evaluated before being passed to Assuming : Python has no macroes...\n\nI *think* that `assuming` could be implemented somehow as a decorator, but I'm still to understand *that*.",
    "created_at": "2017-10-25T10:32:08Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332447",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:19'></a>
Replying to [mforets](#comment%3A18):
> >  Note that SymPy's solve does not respect the global assumptions database: 

> 
> shall we consider interfacing with SymPy's [solveset](http://docs.sympy.org/latest/modules/solvers/solveset.html)? it is said to supersede [solve](http://docs.sympy.org/latest/modules/solvers/solvers.html) sooner or later.


Fly in the ointment : `solve` can solve **systems** of equations, whereas `solveset` (which is, indeed, cleaner on more than one aspect), solves only equations.

In order to solve system, we would have to map `solveset` to all the equations in the system (each for one variable (which one ?)), and return the intersection of the results, which is currently problematic.


> i find that the interface `(equation, variable, domain)` is very clear. isn't it preferable than relying on global assumptions? (or to fallback into the global assumptions if the domain is not provided.)


The domain is only a part of the possible assumptions : e. g., maxima often asks if some expression is positive, if such variable is integer, etc... We need to maintain a "knowledge base" about outr variables as least as rich as our current (= Maxima's) facts base.

A few remarks :

1) I note that Sympy's knowledge base is richer than ours, BTW.

2) We might use profitably something analogous to Mathematica's `Assuming` statement, which does something (roughly )equivalent to :

```
def assuming(condset, statement):
    try:
        OldAssumptions=assumptions()
        Assumptions=OldAssumptions.copy()
        Assumptions.extend(condset)
        forget(assumptions())
        assume(Assumptions)
        result=<do statement, somehow>
    finally:
        forget(assumptions())
        assume(OldAssumptions)
```
The wasp in the ointment is of course that `statement` is evaluated before being passed to Assuming : Python has no macroes...

I *think* that `assuming` could be implemented somehow as a decorator, but I'm still to understand *that*.



---

archive/issue_comments_332448.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [mforets](#comment%3A18):\n> i find that the interface `(equation, variable, domain)` is very clear. isn't it preferable than relying on global assumptions?\n\n\nI have abandoned the idea of respecting assumptions after I saw that SymPy doesn't either. We don't have to reproduce Maxima results so we're good.\n\n> solve can solve systems of equations, whereas solveset (which is, indeed, cleaner on more than one aspect), solves only equations.\n\n\nIf they replace it will be unified. And I think Sage's `ex.solve()` and `solve(ex)` should be unified too, if for no other reason than for better maintenance. \n\n> In order to solve system, we would have to map solveset to all the equations in the system (each for one variable (which one ?)), and return the intersection of the results, which is currently problematic.\n\n\nIt's always problematic because you need to decide ordering of expressions without variables, and that can take time because of the possible need to increase precision. The question is, should we support SymPy's solve or immediately use solveset exclusively?\n\n> We might use profitably something analogous to Mathematica's Assuming\n\n\nPlease review #10035.\n\n> We need to maintain a \"knowledge base\" about outr variables as least as rich as our current (= Maxima's) facts base.\n\n\nIsn't that the same as a local context?",
    "created_at": "2017-10-25T13:01:54Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332448",
    "user": "https://github.com/rwst"
}
```

<a id='comment:20'></a>
Replying to [mforets](#comment%3A18):
> i find that the interface `(equation, variable, domain)` is very clear. isn't it preferable than relying on global assumptions?


I have abandoned the idea of respecting assumptions after I saw that SymPy doesn't either. We don't have to reproduce Maxima results so we're good.

> solve can solve systems of equations, whereas solveset (which is, indeed, cleaner on more than one aspect), solves only equations.


If they replace it will be unified. And I think Sage's `ex.solve()` and `solve(ex)` should be unified too, if for no other reason than for better maintenance. 

> In order to solve system, we would have to map solveset to all the equations in the system (each for one variable (which one ?)), and return the intersection of the results, which is currently problematic.


It's always problematic because you need to decide ordering of expressions without variables, and that can take time because of the possible need to increase precision. The question is, should we support SymPy's solve or immediately use solveset exclusively?

> We might use profitably something analogous to Mathematica's Assuming


Please review #10035.

> We need to maintain a "knowledge base" about outr variables as least as rich as our current (= Maxima's) facts base.


Isn't that the same as a local context?



---

archive/issue_comments_332449.json:
```json
{
    "body": "**Changing dependencies** from \"#23990\" to \"#23990, #24104\".",
    "created_at": "2017-10-25T13:32:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332449",
    "user": "https://github.com/rwst"
}
```

**Changing dependencies** from "#23990" to "#23990, #24104".



---

archive/issue_comments_332450.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [rws](#comment%3A20):\n> Replying to [mforets](#comment%3A18):\n\nAnd me, it seems...\n> > i find that the interface `(equation, variable, domain)` is very clear. isn't it preferable than relying on global assumptions?\n\n> \n> I have abandoned the idea of respecting assumptions after I saw that SymPy doesn't either. We don't have to reproduce Maxima results so we're good.\n\nThat's pushing the can down the road : in order to get the solutions, we're bound to solve a system comprising the solutions obtained without the assumptions and the assumptions themselves, which might be unsolvable (e. g. cubic equation with a solution in *casus irreducibilis* + constraints showing that the roots are real)...\n> \n> > solve can solve systems of equations, whereas solveset (which is, indeed, cleaner on more than one aspect), solves only equations.\n\n> \n> If they replace it will be unified. And I think Sage's `ex.solve()` and `solve(ex)` should be unified too, if for no other reason than for better maintenance. \nIndeed. If...\n> \n> > In order to solve system, we would have to map solveset to all the equations in the system (each for one variable (which one ?)), and return the intersection of the results, which is currently problematic.\n\n> \n> It's always problematic because you need to decide ordering of expressions without variables, and that can take time because of the possible need to increase precision. The question is, should we support SymPy's solve or immediately use solveset exclusively?\n\nIMHO, both. But that might be a lot of work.. Depends on your prognosis on the time necessary for the Sympy team to coax `solveset` in solving systems...\n> \n> > We might use profitably something analogous to Mathematica's Assuming\n\n> \n> Please review #10035.\n\nDone (positively). But that is a possible solution only for function calls supporting `hold`. `solve` isn't one of them.\n> > We need to maintain a \"knowledge base\" about outr variables as least as rich as our current (= Maxima's) facts base.\n\n> \n> Isn't that the same as a local context?\n\nI do not understand that (yet). Care to amplify ?\n\nAnd, BTW, thank you for the huge work you are doing on Sympy, which might turn out very important for Sage.",
    "created_at": "2017-10-25T20:06:07Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332450",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:22'></a>
Replying to [rws](#comment%3A20):
> Replying to [mforets](#comment%3A18):

And me, it seems...
> > i find that the interface `(equation, variable, domain)` is very clear. isn't it preferable than relying on global assumptions?

> 
> I have abandoned the idea of respecting assumptions after I saw that SymPy doesn't either. We don't have to reproduce Maxima results so we're good.

That's pushing the can down the road : in order to get the solutions, we're bound to solve a system comprising the solutions obtained without the assumptions and the assumptions themselves, which might be unsolvable (e. g. cubic equation with a solution in *casus irreducibilis* + constraints showing that the roots are real)...
> 
> > solve can solve systems of equations, whereas solveset (which is, indeed, cleaner on more than one aspect), solves only equations.

> 
> If they replace it will be unified. And I think Sage's `ex.solve()` and `solve(ex)` should be unified too, if for no other reason than for better maintenance. 
Indeed. If...
> 
> > In order to solve system, we would have to map solveset to all the equations in the system (each for one variable (which one ?)), and return the intersection of the results, which is currently problematic.

> 
> It's always problematic because you need to decide ordering of expressions without variables, and that can take time because of the possible need to increase precision. The question is, should we support SymPy's solve or immediately use solveset exclusively?

IMHO, both. But that might be a lot of work.. Depends on your prognosis on the time necessary for the Sympy team to coax `solveset` in solving systems...
> 
> > We might use profitably something analogous to Mathematica's Assuming

> 
> Please review #10035.

Done (positively). But that is a possible solution only for function calls supporting `hold`. `solve` isn't one of them.
> > We need to maintain a "knowledge base" about outr variables as least as rich as our current (= Maxima's) facts base.

> 
> Isn't that the same as a local context?

I do not understand that (yet). Care to amplify ?

And, BTW, thank you for the huge work you are doing on Sympy, which might turn out very important for Sage.



---

archive/issue_comments_332451.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [charpent](#comment%3A22):\n> > Replying to [mforets](#comment%3A18):\n> > Please review #10035.\n\n> Done (positively). But that is a possible solution only for function calls supporting `hold`. `solve` isn't one of them.\n\nIt motivates me to create a context infrastructure where you can say:\n\n```\nsage: mycontext = context(x>0, hold)\nsage: with mycontext:\nsage:     solve(...)\n```\nor\n\n```\nsage: mycontext.start()\nsage: ...\nsage: solve(...)\nsage: mycontext.stop()\n```\n\n> > > We need to maintain a \"knowledge base\" about outr variables as least as rich as our current (= Maxima's) facts base.\n\n> > \n> > Isn't that the same as a local context?\n\n> I do not understand that (yet). Care to amplify ?\n\nI gave the first answer in order to give an idea.\n\n> And, BTW, thank you for the huge work you are doing on Sympy, which might turn out very important for Sage.\n\n\nI remember reading in devel that previous developers hoped so too, also because at that time development on Pynac stopped and practically no one worked on symbolics in Sage. While that's no longer the case, solvers and integration need much help from SymPy, Fricas, and Giac.",
    "created_at": "2017-10-26T06:42:25Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332451",
    "user": "https://github.com/rwst"
}
```

<a id='comment:23'></a>
Replying to [charpent](#comment%3A22):
> > Replying to [mforets](#comment%3A18):
> > Please review #10035.

> Done (positively). But that is a possible solution only for function calls supporting `hold`. `solve` isn't one of them.

It motivates me to create a context infrastructure where you can say:

```
sage: mycontext = context(x>0, hold)
sage: with mycontext:
sage:     solve(...)
```
or

```
sage: mycontext.start()
sage: ...
sage: solve(...)
sage: mycontext.stop()
```

> > > We need to maintain a "knowledge base" about outr variables as least as rich as our current (= Maxima's) facts base.

> > 
> > Isn't that the same as a local context?

> I do not understand that (yet). Care to amplify ?

I gave the first answer in order to give an idea.

> And, BTW, thank you for the huge work you are doing on Sympy, which might turn out very important for Sage.


I remember reading in devel that previous developers hoped so too, also because at that time development on Pynac stopped and practically no one worked on symbolics in Sage. While that's no longer the case, solvers and integration need much help from SymPy, Fricas, and Giac.



---

archive/issue_comments_332452.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [charpent](#comment%3A19):\n> In order to solve system, we would have to map `solveset` to all the equations in the system (each for one variable (which one ?)), and return the intersection of the results, which is currently problematic.\n\n\nMaybe we should not worry about doing intersections, convert to `RealSet`, intersect, convert back. `RealSet` uses `RealInterval` for comparison and I guess the problems have been thought about by its developers. But what to convert the `RealSet` to in the end? For starters the output of `solve` at the moment, i.e., lists of lists. The conversion `RealSet`-->lists might be of broader interest.",
    "created_at": "2017-10-26T13:41:53Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332452",
    "user": "https://github.com/rwst"
}
```

<a id='comment:24'></a>
Replying to [charpent](#comment%3A19):
> In order to solve system, we would have to map `solveset` to all the equations in the system (each for one variable (which one ?)), and return the intersection of the results, which is currently problematic.


Maybe we should not worry about doing intersections, convert to `RealSet`, intersect, convert back. `RealSet` uses `RealInterval` for comparison and I guess the problems have been thought about by its developers. But what to convert the `RealSet` to in the end? For starters the output of `solve` at the moment, i.e., lists of lists. The conversion `RealSet`-->lists might be of broader interest.



---

archive/issue_comments_332453.json:
```json
{
    "body": "<a id='comment:25'></a>\nCaveat of using `RealSet`:\n\n```\nsage: pi.n(30) in RealSet.point(pi)\nFalse\nsage: pi.n(50) in RealSet.point(pi)\nTrue\n```",
    "created_at": "2017-10-26T13:56:20Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332453",
    "user": "https://github.com/rwst"
}
```

<a id='comment:25'></a>
Caveat of using `RealSet`:

```
sage: pi.n(30) in RealSet.point(pi)
False
sage: pi.n(50) in RealSet.point(pi)
True
```



---

archive/issue_comments_332454.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [mforets](#comment%3A18):\n> i find that the interface `(equation, variable, domain)` is very clear. isn't it preferable than relying on global assumptions? (or to fallback into the global assumptions if the domain is not provided.)\n\n\nIt is. Propagating the `solveset` interface to our solve would mean at least supporting the option `domain='real'` with complex the default.",
    "created_at": "2017-10-26T14:40:38Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332454",
    "user": "https://github.com/rwst"
}
```

<a id='comment:26'></a>
Replying to [mforets](#comment%3A18):
> i find that the interface `(equation, variable, domain)` is very clear. isn't it preferable than relying on global assumptions? (or to fallback into the global assumptions if the domain is not provided.)


It is. Propagating the `solveset` interface to our solve would mean at least supporting the option `domain='real'` with complex the default.



---

archive/issue_comments_332455.json:
```json
{
    "body": "**Changing dependencies** from \"#23990, #24104\" to \"#23990, #24104, #24062\".",
    "created_at": "2017-10-26T15:13:12Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332455",
    "user": "https://github.com/rwst"
}
```

**Changing dependencies** from "#23990, #24104" to "#23990, #24104, #24062".



---

archive/issue_comments_332456.json:
```json
{
    "body": "<a id='comment:28'></a>\nSymPy seems to make a clear distinction between the operators in `x>0` and `Gt(x,0)`. I think it's wrong that `(x>0)._sympy_()` returns `x>0`.",
    "created_at": "2017-10-27T13:52:33Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332456",
    "user": "https://github.com/rwst"
}
```

<a id='comment:28'></a>
SymPy seems to make a clear distinction between the operators in `x>0` and `Gt(x,0)`. I think it's wrong that `(x>0)._sympy_()` returns `x>0`.



---

archive/issue_comments_332457.json:
```json
{
    "body": "<a id='comment:29'></a>\nAh no, I'm wrong. We do the right translation.",
    "created_at": "2017-10-27T13:55:52Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332457",
    "user": "https://github.com/rwst"
}
```

<a id='comment:29'></a>
Ah no, I'm wrong. We do the right translation.



---

archive/issue_comments_332458.json:
```json
{
    "body": "**Branch:** [u/rws/22322](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/22322)",
    "created_at": "2017-10-27T14:45:40Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332458",
    "user": "https://github.com/rwst"
}
```

**Branch:** [u/rws/22322](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/22322)



---

archive/issue_comments_332459.json:
```json
{
    "body": "<a id='comment:31'></a>\nThis branch works quite well and can be used and reviewed. It lacks doctests and documentation, which I'll add next. But please experiment with it. We use `solveset` with single-expression univariate tasks, `solve` for the rest. The output is unified to Sage's list \"format\".\n\n---\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7899ea992d19f75e38e7db5526bb5c311d09d79a\">7899ea9</a></td><td><code>20204: convert SymPy abstract functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b261ec3e671179d04d1922d15d9116e4f6e1d47f\">b261ec3</a></td><td><code>23923: fix doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5010acf00b2811420ba1a725deb2351f77eb0c01\">5010acf</a></td><td><code>Merge branch 'u/rws/23923' of git://trac.sagemath.org/sage into t/20204/20204</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14b1c523c468bfb304191edfe6e85a5c94e916f5\">14b1c52</a></td><td><code>20204: more doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c4119a3feda956846bd1fa78256830aef4739f8\">9c4119a</a></td><td><code>16801: Conversion of psi(x,y) to/from SymPy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5c60e3418468f8b5325f06997646fb4f9bf6ced\">d5c60e3</a></td><td><code>24062: pkg version/chksum</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cbc23e8c18d4d93a19c225bf79cc85e3f37fd01\">1cbc23e</a></td><td><code>24062: remove obsolote patches; adapt remaining</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94f359f5a48696e2b98c346e3f120e9481d89a7c\">94f359f</a></td><td><code>24062: doctest fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf5c81a21f403d11a68c8c2827e771d3ed433df5\">cf5c81a</a></td><td><code>Merge branch 'u/rws/24062' of git://trac.sagemath.org/sage into t22322</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3073840e81e526524eea0ce89cb28bc83723c7d5\">3073840</a></td><td><code>22322: sympy algorithm in solve</code></td></tr></table>\n",
    "created_at": "2017-10-27T14:50:57Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332459",
    "user": "https://github.com/rwst"
}
```

<a id='comment:31'></a>
This branch works quite well and can be used and reviewed. It lacks doctests and documentation, which I'll add next. But please experiment with it. We use `solveset` with single-expression univariate tasks, `solve` for the rest. The output is unified to Sage's list "format".

---
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7899ea992d19f75e38e7db5526bb5c311d09d79a">7899ea9</a></td><td><code>20204: convert SymPy abstract functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b261ec3e671179d04d1922d15d9116e4f6e1d47f">b261ec3</a></td><td><code>23923: fix doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5010acf00b2811420ba1a725deb2351f77eb0c01">5010acf</a></td><td><code>Merge branch 'u/rws/23923' of git://trac.sagemath.org/sage into t/20204/20204</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14b1c523c468bfb304191edfe6e85a5c94e916f5">14b1c52</a></td><td><code>20204: more doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c4119a3feda956846bd1fa78256830aef4739f8">9c4119a</a></td><td><code>16801: Conversion of psi(x,y) to/from SymPy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5c60e3418468f8b5325f06997646fb4f9bf6ced">d5c60e3</a></td><td><code>24062: pkg version/chksum</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cbc23e8c18d4d93a19c225bf79cc85e3f37fd01">1cbc23e</a></td><td><code>24062: remove obsolote patches; adapt remaining</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94f359f5a48696e2b98c346e3f120e9481d89a7c">94f359f</a></td><td><code>24062: doctest fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf5c81a21f403d11a68c8c2827e771d3ed433df5">cf5c81a</a></td><td><code>Merge branch 'u/rws/24062' of git://trac.sagemath.org/sage into t22322</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3073840e81e526524eea0ce89cb28bc83723c7d5">3073840</a></td><td><code>22322: sympy algorithm in solve</code></td></tr></table>




---

archive/issue_comments_332460.json:
```json
{
    "body": "**Commit:** [3073840e81e526524eea0ce89cb28bc83723c7d5](https://github.com/sagemath/sagetrac-mirror/commit/3073840e81e526524eea0ce89cb28bc83723c7d5)",
    "created_at": "2017-10-27T14:50:57Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332460",
    "user": "https://github.com/rwst"
}
```

**Commit:** [3073840e81e526524eea0ce89cb28bc83723c7d5](https://github.com/sagemath/sagetrac-mirror/commit/3073840e81e526524eea0ce89cb28bc83723c7d5)



---

archive/issue_comments_332461.json:
```json
{
    "body": "**Author:** Ralf Stephan",
    "created_at": "2017-10-27T14:50:57Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332461",
    "user": "https://github.com/rwst"
}
```

**Author:** Ralf Stephan



---

archive/issue_comments_332462.json:
```json
{
    "body": "<a id='comment:32'></a>\nAnd `domain='real'` is recognized too.",
    "created_at": "2017-10-27T14:52:10Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332462",
    "user": "https://github.com/rwst"
}
```

<a id='comment:32'></a>
And `domain='real'` is recognized too.



---

archive/issue_comments_332463.json:
```json
{
    "body": "<a id='comment:33'></a>\nAh, multivariate doesn't work at the moment.",
    "created_at": "2017-10-27T15:36:34Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332463",
    "user": "https://github.com/rwst"
}
```

<a id='comment:33'></a>
Ah, multivariate doesn't work at the moment.



---

archive/issue_comments_332464.json:
```json
{
    "body": "**Changing commit** from \"[3073840e81e526524eea0ce89cb28bc83723c7d5](https://github.com/sagemath/sagetrac-mirror/commit/3073840e81e526524eea0ce89cb28bc83723c7d5)\" to \"[eac5f8bf8a12da0373bed819bcd060673a2f7aa4](https://github.com/sagemath/sagetrac-mirror/commit/eac5f8bf8a12da0373bed819bcd060673a2f7aa4)\".",
    "created_at": "2017-10-28T06:07:03Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332464",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3073840e81e526524eea0ce89cb28bc83723c7d5](https://github.com/sagemath/sagetrac-mirror/commit/3073840e81e526524eea0ce89cb28bc83723c7d5)" to "[eac5f8bf8a12da0373bed819bcd060673a2f7aa4](https://github.com/sagemath/sagetrac-mirror/commit/eac5f8bf8a12da0373bed819bcd060673a2f7aa4)".



---

archive/issue_comments_332465.json:
```json
{
    "body": "<a id='comment:34'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eac5f8bf8a12da0373bed819bcd060673a2f7aa4\">eac5f8b</a></td><td><code>22322: fixes</code></td></tr></table>\n",
    "created_at": "2017-10-28T06:07:03Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332465",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eac5f8bf8a12da0373bed819bcd060673a2f7aa4">eac5f8b</a></td><td><code>22322: fixes</code></td></tr></table>




---

archive/issue_comments_332466.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [rws](#comment%3A23):\n\n[Snip ... ]\n\n> It motivates me to create a context infrastructure where you can say:\n> \n> ```\n> sage: mycontext = context(x>0, hold)\n> sage: with mycontext:\n> sage:     solve(...)\n> ```\n> or\n> \n> ```\n> sage: mycontext.start()\n> sage: ...\n> sage: solve(...)\n> sage: mycontext.stop()\n> ```\n\n\nMaybe #24119 might be relevant ? It doesn't medles with evaluation (or not) of the body of the `with`, it just brackets this body with temporary updates to the facts database. Not the problem you are trying to solve, but might be handy...\n\n[ Re-snip ... ]\n\n> I remember reading in devel that previous developers hoped so too, also because at that time development on Pynac stopped and practically no one worked on symbolics in Sage. While that's no longer the case, solvers and integration need much help from SymPy, Fricas, and Giac.\n\n\nIn my (limited) experience, the ability od Sage to call \"at will\"  SymPy, fricas, giac (and even maple and  mathematica, but shhh...) is *extremely* useful for practical work. Add `Sage\\TeX` to the mixture (the notebook is nice for prottyping, but I'm sold on \"literate programming\" for any serious publication work...), and you get a tool whose usefulness surpasses those of any of its components.\n\nIMHO, Sage needs a lot of development in the \"engineering/scientific/undergrad maths\" department, which is not, to say the least, the core interest of its core developers. I see the work in this direction as an *investment* : if we make a tool useful to those non-professional-mathematician users,I would be quite surprised that none of them would dive in Sage development in these departments, thus relieving the algebraists, geometers and number theorist who *are* the core  developers of Sage of the infrastructure and maintenance work.",
    "created_at": "2017-10-28T22:11:33Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332466",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:35'></a>
Replying to [rws](#comment%3A23):

[Snip ... ]

> It motivates me to create a context infrastructure where you can say:
> 
> ```
> sage: mycontext = context(x>0, hold)
> sage: with mycontext:
> sage:     solve(...)
> ```
> or
> 
> ```
> sage: mycontext.start()
> sage: ...
> sage: solve(...)
> sage: mycontext.stop()
> ```


Maybe #24119 might be relevant ? It doesn't medles with evaluation (or not) of the body of the `with`, it just brackets this body with temporary updates to the facts database. Not the problem you are trying to solve, but might be handy...

[ Re-snip ... ]

> I remember reading in devel that previous developers hoped so too, also because at that time development on Pynac stopped and practically no one worked on symbolics in Sage. While that's no longer the case, solvers and integration need much help from SymPy, Fricas, and Giac.


In my (limited) experience, the ability od Sage to call "at will"  SymPy, fricas, giac (and even maple and  mathematica, but shhh...) is *extremely* useful for practical work. Add `Sage\TeX` to the mixture (the notebook is nice for prottyping, but I'm sold on "literate programming" for any serious publication work...), and you get a tool whose usefulness surpasses those of any of its components.

IMHO, Sage needs a lot of development in the "engineering/scientific/undergrad maths" department, which is not, to say the least, the core interest of its core developers. I see the work in this direction as an *investment* : if we make a tool useful to those non-professional-mathematician users,I would be quite surprised that none of them would dive in Sage development in these departments, thus relieving the algebraists, geometers and number theorist who *are* the core  developers of Sage of the infrastructure and maintenance work.



---

archive/issue_comments_332467.json:
```json
{
    "body": "<a id='comment:36'></a>\nStefan,\n\nI'm a bit lost about your various tickets. I suggest that you make a meta-ticket (say, \"Work in progress on SymPy\") in which you merge the various pieces you want tested (with their dependencies) : that would ease the retrieval. Reverting no-longer-useful parts should be also possible.",
    "created_at": "2017-10-28T22:15:47Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332467",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:36'></a>
Stefan,

I'm a bit lost about your various tickets. I suggest that you make a meta-ticket (say, "Work in progress on SymPy") in which you merge the various pieces you want tested (with their dependencies) : that would ease the retrieval. Reverting no-longer-useful parts should be also possible.



---

archive/issue_comments_332468.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [charpent](#comment%3A36):\n> Stefan,\n> \n> I'm a bit lost about your various tickets. I suggest that you make a meta-ticket (say, \"Work in progress on SymPy\") in which you merge the various pieces you want tested (with their dependencies) : that would ease the retrieval.\n\n\nWhy? Just check out the branch. It contains everything.\n\n> Reverting no-longer-useful parts should be also possible.\n\n\nCan you explain what you are trying to do? We don't need to use the ticket for this, that's also what zulip.sagemath.org is for, just message me please.",
    "created_at": "2017-10-29T14:50:48Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332468",
    "user": "https://github.com/rwst"
}
```

<a id='comment:37'></a>
Replying to [charpent](#comment%3A36):
> Stefan,
> 
> I'm a bit lost about your various tickets. I suggest that you make a meta-ticket (say, "Work in progress on SymPy") in which you merge the various pieces you want tested (with their dependencies) : that would ease the retrieval.


Why? Just check out the branch. It contains everything.

> Reverting no-longer-useful parts should be also possible.


Can you explain what you are trying to do? We don't need to use the ticket for this, that's also what zulip.sagemath.org is for, just message me please.



---

archive/issue_comments_332469.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [rws](#comment%3A37):\n[ Snip ... ]\n> Why? Just check out the branch. It contains everything.\n\nAha ! I didn't understand that you had merged the necessary tickets.\n\nAnyway : on top of 8.1.beta9 + #23980+2#4026+#24119, passes ptestlong with no errors whatsoever.\n\nIt needs doc, however. And some options do not seem to work on multivariate systems :\n\n```\nsage: solve(x^3+1==0,x,domain=\"real\") ## domain=\"real\" does not work in Maxima's solver...\n[x == 1/2*I*sqrt(3)*(-1)^(1/3) - 1/2*(-1)^(1/3), x == -1/2*I*sqrt(3)*(-1)^(1/3) - 1/2*(-1)^(1/3), x == (-1)^(1/3)]\nsage: solve(x^3+1==0,x,algorithm=\"sympy\",domain=\"real\") # ...but works with Sympys's solver ...\n[x == -1]\nsage: solve([x^2+y^2 == 1, y^2 == x^3 + x + 1], [x, y],algorithm=\"sympy\",domain=\n....: \"real\") ### ... but not for systems.\n\n[{y: -1, x: 0},\n {y: 1, x: 0},\n {y: -sqrt(-1/2*I*sqrt(3) + 3/2), x: -1/2*I*sqrt(3) - 1/2},\n {y: sqrt(-1/2*I*sqrt(3) + 3/2), x: -1/2*I*sqrt(3) - 1/2},\n {y: -sqrt(1/2*I*sqrt(3) + 3/2), x: 1/2*I*sqrt(3) - 1/2},\n {y: sqrt(1/2*I*sqrt(3) + 3/2), x: 1/2*I*sqrt(3) - 1/2}]\n```\n\nNotwithstandig that, `positive_review`.",
    "created_at": "2017-10-30T21:19:14Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332469",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:38'></a>
Replying to [rws](#comment%3A37):
[ Snip ... ]
> Why? Just check out the branch. It contains everything.

Aha ! I didn't understand that you had merged the necessary tickets.

Anyway : on top of 8.1.beta9 + #23980+2#4026+#24119, passes ptestlong with no errors whatsoever.

It needs doc, however. And some options do not seem to work on multivariate systems :

```
sage: solve(x^3+1==0,x,domain="real") ## domain="real" does not work in Maxima's solver...
[x == 1/2*I*sqrt(3)*(-1)^(1/3) - 1/2*(-1)^(1/3), x == -1/2*I*sqrt(3)*(-1)^(1/3) - 1/2*(-1)^(1/3), x == (-1)^(1/3)]
sage: solve(x^3+1==0,x,algorithm="sympy",domain="real") # ...but works with Sympys's solver ...
[x == -1]
sage: solve([x^2+y^2 == 1, y^2 == x^3 + x + 1], [x, y],algorithm="sympy",domain=
....: "real") ### ... but not for systems.

[{y: -1, x: 0},
 {y: 1, x: 0},
 {y: -sqrt(-1/2*I*sqrt(3) + 3/2), x: -1/2*I*sqrt(3) - 1/2},
 {y: sqrt(-1/2*I*sqrt(3) + 3/2), x: -1/2*I*sqrt(3) - 1/2},
 {y: -sqrt(1/2*I*sqrt(3) + 3/2), x: 1/2*I*sqrt(3) - 1/2},
 {y: sqrt(1/2*I*sqrt(3) + 3/2), x: 1/2*I*sqrt(3) - 1/2}]
```

Notwithstandig that, `positive_review`.



---

archive/issue_events_199411.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-10-30T21:19:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199411"
}
```



---

archive/issue_events_199412.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-10-30T21:19:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199412"
}
```



---

archive/issue_comments_332470.json:
```json
{
    "body": "<a id='comment:39'></a>\nJust a thought : I see that the patchbots fail to build the package, for lack of source tarball. It could be useful to add a pointer to it in the ticket description (ISTR that thos worked for #24026...).",
    "created_at": "2017-10-30T21:24:51Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332470",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:39'></a>
Just a thought : I see that the patchbots fail to build the package, for lack of source tarball. It could be useful to add a pointer to it in the ticket description (ISTR that thos worked for #24026...).



---

archive/issue_comments_332471.json:
```json
{
    "body": "<a id='comment:40'></a>\nThanks. I have to do more Work, at least the merge of #24104 changes and necessary documentation. The tarball will be no longer necessary with the next release because the SymPy upgrade is in there.",
    "created_at": "2017-10-31T04:21:02Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332471",
    "user": "https://github.com/rwst"
}
```

<a id='comment:40'></a>
Thanks. I have to do more Work, at least the merge of #24104 changes and necessary documentation. The tarball will be no longer necessary with the next release because the SymPy upgrade is in there.



---

archive/issue_events_199413.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-31T04:21:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199413"
}
```



---

archive/issue_events_199414.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-31T04:21:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199414"
}
```



---

archive/issue_comments_332472.json:
```json
{
    "body": "<a id='comment:41'></a>\nWe'll need to work on #22024 next because `solve(x^5 + 3*x^3 + 7, x, algorithm='sympy')` will fail. But not for this ticket.",
    "created_at": "2017-10-31T16:00:22Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332472",
    "user": "https://github.com/rwst"
}
```

<a id='comment:41'></a>
We'll need to work on #22024 next because `solve(x^5 + 3*x^3 + 7, x, algorithm='sympy')` will fail. But not for this ticket.



---

archive/issue_comments_332473.json:
```json
{
    "body": "**Changing branch** from \"[u/rws/22322](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/22322)\" to \"[u/rws/22322-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/22322-1)\".",
    "created_at": "2017-10-31T17:27:02Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332473",
    "user": "https://github.com/rwst"
}
```

**Changing branch** from "[u/rws/22322](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/22322)" to "[u/rws/22322-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/22322-1)".



---

archive/issue_comments_332474.json:
```json
{
    "body": "**Changing commit** from \"[eac5f8bf8a12da0373bed819bcd060673a2f7aa4](https://github.com/sagemath/sagetrac-mirror/commit/eac5f8bf8a12da0373bed819bcd060673a2f7aa4)\" to \"[963cc0e6cb2ea5441422f73beb961b882dfec420](https://github.com/sagemath/sagetrac-mirror/commit/963cc0e6cb2ea5441422f73beb961b882dfec420)\".",
    "created_at": "2017-10-31T17:31:02Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332474",
    "user": "https://github.com/rwst"
}
```

**Changing commit** from "[eac5f8bf8a12da0373bed819bcd060673a2f7aa4](https://github.com/sagemath/sagetrac-mirror/commit/eac5f8bf8a12da0373bed819bcd060673a2f7aa4)" to "[963cc0e6cb2ea5441422f73beb961b882dfec420](https://github.com/sagemath/sagetrac-mirror/commit/963cc0e6cb2ea5441422f73beb961b882dfec420)".



---

archive/issue_comments_332475.json:
```json
{
    "body": "<a id='comment:43'></a>\nThis is a new branch because of differences in the dependencies. I also added the missing translation of `LambertW`. Another problem is that SymPy's `solveset` is not always better than its `solve` esp. with nonlinear equations, compare e.g. `x+2**x==0`. This needs more work later.\n\nPlease review, these should be the last big changes.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/269c2de8d1e5396da594b8f1679ff71603f40765\">269c2de</a></td><td><code>Merge branch 'develop' into 22322-1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86e9c201a75408816f76bde25208d46f9d73e692\">86e9c20</a></td><td><code>24104: move doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91cb91f846ebfbea538fbaacad7780c1867d19f9\">91cb91f</a></td><td><code>24104: solve no longer calls itself</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f6e8265f9ebc448d4aa4004ef0c6b504560b6ff\">0f6e826</a></td><td><code>Move the single expression solver into stand-alone function for granularity plus some mild cleanup.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4048e2553f264d37fc65de4e1b6dad6f4e24b1e7\">4048e25</a></td><td><code>Merge branch 'public/symbolcs/merge_solves-24104' of git://trac.sagemath.org/sage into 22322-1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/963cc0e6cb2ea5441422f73beb961b882dfec420\">963cc0e</a></td><td><code>22322: allow sympy algorithm in solve</code></td></tr></table>\n",
    "created_at": "2017-10-31T17:31:02Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332475",
    "user": "https://github.com/rwst"
}
```

<a id='comment:43'></a>
This is a new branch because of differences in the dependencies. I also added the missing translation of `LambertW`. Another problem is that SymPy's `solveset` is not always better than its `solve` esp. with nonlinear equations, compare e.g. `x+2**x==0`. This needs more work later.

Please review, these should be the last big changes.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/269c2de8d1e5396da594b8f1679ff71603f40765">269c2de</a></td><td><code>Merge branch 'develop' into 22322-1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86e9c201a75408816f76bde25208d46f9d73e692">86e9c20</a></td><td><code>24104: move doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91cb91f846ebfbea538fbaacad7780c1867d19f9">91cb91f</a></td><td><code>24104: solve no longer calls itself</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f6e8265f9ebc448d4aa4004ef0c6b504560b6ff">0f6e826</a></td><td><code>Move the single expression solver into stand-alone function for granularity plus some mild cleanup.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4048e2553f264d37fc65de4e1b6dad6f4e24b1e7">4048e25</a></td><td><code>Merge branch 'public/symbolcs/merge_solves-24104' of git://trac.sagemath.org/sage into 22322-1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/963cc0e6cb2ea5441422f73beb961b882dfec420">963cc0e</a></td><td><code>22322: allow sympy algorithm in solve</code></td></tr></table>




---

archive/issue_events_199415.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-31T17:31:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199415"
}
```



---

archive/issue_events_199416.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-10-31T17:31:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199416"
}
```



---

archive/issue_events_199417.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-11-01T05:37:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199417"
}
```



---

archive/issue_events_199418.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-11-01T05:37:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199418"
}
```



---

archive/issue_comments_332476.json:
```json
{
    "body": "<a id='comment:44'></a>\nOn top of 8.1.beta9 + #23980+2#4026+#24119, passes ptestlong with no errors whatsoever.",
    "created_at": "2017-11-01T05:37:07Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332476",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:44'></a>
On top of 8.1.beta9 + #23980+2#4026+#24119, passes ptestlong with no errors whatsoever.



---

archive/issue_comments_332477.json:
```json
{
    "body": "<a id='comment:45'></a>\nReviewer name.",
    "created_at": "2017-11-01T06:07:21Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332477",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:45'></a>
Reviewer name.



---

archive/issue_events_199419.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-11-02T14:50:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199419"
}
```



---

archive/issue_events_199420.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-11-02T14:50:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199420"
}
```



---

archive/issue_comments_332478.json:
```json
{
    "body": "**Reviewer:** Emmanuel Charpentier",
    "created_at": "2017-11-02T14:54:38Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332478",
    "user": "https://github.com/rwst"
}
```

**Reviewer:** Emmanuel Charpentier



---

archive/issue_comments_332479.json:
```json
{
    "body": "<a id='comment:47'></a>\n@EmmanuelCharpentier I hope you don't mind me adding your name.",
    "created_at": "2017-11-02T14:54:38Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332479",
    "user": "https://github.com/rwst"
}
```

<a id='comment:47'></a>
@EmmanuelCharpentier I hope you don't mind me adding your name.



---

archive/issue_events_199421.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-11-02T14:54:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199421"
}
```



---

archive/issue_events_199422.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-11-02T14:54:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199422"
}
```



---

archive/issue_comments_332480.json:
```json
{
    "body": "<a id='comment:49'></a>\nOn OSX:\n\n```\n**********************************************************************\nFile \"src/sage/symbolic/relation.py\", line 894, in sage.symbolic.relation.solve\nFailed example:\n    solve([x^2 - y^2/exp(x), y-1], x, y, algorithm='sympy')\nExpected:\n    [{y: 1, x: 2*lambert_w(1/2)}]\nGot:\n    [{x: 2*lambert_w(1/2), y: 1}]\n**********************************************************************\nFile \"src/sage/symbolic/relation.py\", line 902, in sage.symbolic.relation.solve\nFailed example:\n    solve([x + y + z + t, -z - t], x, y, z, t, algorithm='sympy')\nExpected:\n    [{z: -t, x: -y}]\nGot:\n    [{x: -y, z: -t}]\n**********************************************************************\nFile \"src/sage/symbolic/relation.py\", line 904, in sage.symbolic.relation.solve\nFailed example:\n    solve([x^2+y+z, y+x^2+z, x+y+z^2], x, y,z, algorithm='sympy')\nExpected:\n    [{y: -(z + 1)*z, x: z}, {y: -z^2 + z - 1, x: -z + 1}]\nGot:\n    [{x: z, y: -(z + 1)*z}, {x: -z + 1, y: -z^2 + z - 1}]\n**********************************************************************\n1 item had failures:\n   3 of 112 in sage.symbolic.relation.solve\n    [377 tests, 3 failures, 185.81 s]\n----------------------------------------------------------------------\nsage -t --long src/sage/symbolic/relation.py  # 3 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2017-12-10T09:26:22Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332480",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:49'></a>
On OSX:

```
**********************************************************************
File "src/sage/symbolic/relation.py", line 894, in sage.symbolic.relation.solve
Failed example:
    solve([x^2 - y^2/exp(x), y-1], x, y, algorithm='sympy')
Expected:
    [{y: 1, x: 2*lambert_w(1/2)}]
Got:
    [{x: 2*lambert_w(1/2), y: 1}]
**********************************************************************
File "src/sage/symbolic/relation.py", line 902, in sage.symbolic.relation.solve
Failed example:
    solve([x + y + z + t, -z - t], x, y, z, t, algorithm='sympy')
Expected:
    [{z: -t, x: -y}]
Got:
    [{x: -y, z: -t}]
**********************************************************************
File "src/sage/symbolic/relation.py", line 904, in sage.symbolic.relation.solve
Failed example:
    solve([x^2+y+z, y+x^2+z, x+y+z^2], x, y,z, algorithm='sympy')
Expected:
    [{y: -(z + 1)*z, x: z}, {y: -z^2 + z - 1, x: -z + 1}]
Got:
    [{x: z, y: -(z + 1)*z}, {x: -z + 1, y: -z^2 + z - 1}]
**********************************************************************
1 item had failures:
   3 of 112 in sage.symbolic.relation.solve
    [377 tests, 3 failures, 185.81 s]
----------------------------------------------------------------------
sage -t --long src/sage/symbolic/relation.py  # 3 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_events_199423.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-10T09:26:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199423"
}
```



---

archive/issue_events_199424.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-10T09:26:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199424"
}
```



---

archive/issue_comments_332481.json:
```json
{
    "body": "**Changing commit** from \"[963cc0e6cb2ea5441422f73beb961b882dfec420](https://github.com/sagemath/sagetrac-mirror/commit/963cc0e6cb2ea5441422f73beb961b882dfec420)\" to \"[8e1e240bb9b8d735251847e67deec1fdb32eccba](https://github.com/sagemath/sagetrac-mirror/commit/8e1e240bb9b8d735251847e67deec1fdb32eccba)\".",
    "created_at": "2017-12-10T14:05:49Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332481",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[963cc0e6cb2ea5441422f73beb961b882dfec420](https://github.com/sagemath/sagetrac-mirror/commit/963cc0e6cb2ea5441422f73beb961b882dfec420)" to "[8e1e240bb9b8d735251847e67deec1fdb32eccba](https://github.com/sagemath/sagetrac-mirror/commit/8e1e240bb9b8d735251847e67deec1fdb32eccba)".



---

archive/issue_comments_332482.json:
```json
{
    "body": "<a id='comment:50'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e1e240bb9b8d735251847e67deec1fdb32eccba\">8e1e240</a></td><td><code>22322: dict order-independent doctests</code></td></tr></table>\n",
    "created_at": "2017-12-10T14:05:49Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332482",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e1e240bb9b8d735251847e67deec1fdb32eccba">8e1e240</a></td><td><code>22322: dict order-independent doctests</code></td></tr></table>




---

archive/issue_events_199425.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-12-10T14:06:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199425"
}
```



---

archive/issue_events_199426.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2017-12-10T14:06:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199426"
}
```



---

archive/issue_comments_332483.json:
```json
{
    "body": "**Changing branch** from \"[u/rws/22322-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/22322-1)\" to \"[8e1e240bb9b8d735251847e67deec1fdb32eccba](https://github.com/sagemath/sagetrac-mirror/commit/8e1e240bb9b8d735251847e67deec1fdb32eccba)\".",
    "created_at": "2017-12-13T17:38:46Z",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22322#issuecomment-332483",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/rws/22322-1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/22322-1)" to "[8e1e240bb9b8d735251847e67deec1fdb32eccba](https://github.com/sagemath/sagetrac-mirror/commit/8e1e240bb9b8d735251847e67deec1fdb32eccba)".



---

archive/issue_events_199427.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-12-13T17:38:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199427"
}
```



---

archive/issue_events_199428.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3a516c1f09cfc5ef12a96a934e24c8da8fdb2e1c",
    "created_at": "2017-12-13T17:38:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22322",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22322#event-199428"
}
```
