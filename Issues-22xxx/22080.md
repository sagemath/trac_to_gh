# Issue 22080: Refactoring of sage_setup.docbuild

archive/issues_021843.json:
```json
{
    "assignees": [],
    "body": "I found it possibly desirable to split up the `sage_setup.docbuild.__init__` module a bit, as it was getting a bit long and difficult to reason about.  As to exactly what was moved where, this is highly subjective and open to debate.  But I do think that overall this makes the code easier to understand.\n\nI had a couple additional motivations for this:\n\nIt is with an eye toward #6389.  I think organizing the code more clearly will make it easier to implement this--in fact I don't think there's a lot left to do except to replace every reference to `SAGE_DOC_SRC` with a reference to a source directory option.  #21732 may play a role here as well.\n\nSpeaking of #21732, I have some ideas for how to use this to further reduce runtime dependency on sage_setup.\n\nCC:  @jhpalmieri\n\nKeywords: **docbuild**\n\nBranch/Commit: **[u/jdemeyer/docbuild/refactor](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/docbuild/refactor) @ [652c41e](https://github.com/sagemath/sagetrac-mirror/commit/652c41e26b268bbe7860184e3129b9836da734b6)**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22080_\n\n",
    "closed_at": "2022-08-02T06:31:03Z",
    "created_at": "2016-12-20T14:33:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20documentation",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Refactoring of sage_setup.docbuild",
    "type": "issue",
    "updated_at": "2022-08-02T06:31:03Z",
    "url": "https://github.com/sagemath/sage/issues/22080",
    "user": "https://github.com/embray"
}
```
I found it possibly desirable to split up the `sage_setup.docbuild.__init__` module a bit, as it was getting a bit long and difficult to reason about.  As to exactly what was moved where, this is highly subjective and open to debate.  But I do think that overall this makes the code easier to understand.

I had a couple additional motivations for this:

It is with an eye toward #6389.  I think organizing the code more clearly will make it easier to implement this--in fact I don't think there's a lot left to do except to replace every reference to `SAGE_DOC_SRC` with a reference to a source directory option.  #21732 may play a role here as well.

Speaking of #21732, I have some ideas for how to use this to further reduce runtime dependency on sage_setup.

CC:  @jhpalmieri

Keywords: **docbuild**

Branch/Commit: **[u/jdemeyer/docbuild/refactor](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/docbuild/refactor) @ [652c41e](https://github.com/sagemath/sagetrac-mirror/commit/652c41e26b268bbe7860184e3129b9836da734b6)**

_Issue created by migration from https://trac.sagemath.org/ticket/22080_





---

archive/issue_events_291268.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-12-20T14:33:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291268"
}
```



---

archive/issue_events_291269.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-12-20T14:33:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20documentation",
    "label_color": "0075ca",
    "label_name": "component: documentation",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291269"
}
```



---

archive/issue_events_291270.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-12-20T14:33:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291270"
}
```



---

archive/issue_events_291271.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-12-20T14:33:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291271"
}
```



---

archive/issue_events_291272.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-12-20T14:33:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291272"
}
```



---

archive/issue_comments_328255.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nThere are a few more changes I need to add after actually testing this for use with #21732",
    "created_at": "2016-12-20T14:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328255",
    "user": "https://github.com/embray"
}
```

<div id="comment:2" align="right">Comment 2</div>

There are a few more changes I need to add after actually testing this for use with #21732



---

archive/issue_events_291273.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-12-20T14:49:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291273"
}
```



---

archive/issue_events_291274.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-12-20T14:49:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291274"
}
```



---

archive/issue_comments_328256.json:
```json
{
    "body": "Changed commit from **[00e221f](https://github.com/sagemath/sagetrac-mirror/commit/00e221f31ffa0e0aabce74b43e0b7908bf7c804d)** to **[0bf054a](https://github.com/sagemath/sagetrac-mirror/commit/0bf054ae9f14d727d3e4e961efbb8c4d223aa0e3)**",
    "created_at": "2016-12-21T15:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328256",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[00e221f](https://github.com/sagemath/sagetrac-mirror/commit/00e221f31ffa0e0aabce74b43e0b7908bf7c804d)** to **[0bf054a](https://github.com/sagemath/sagetrac-mirror/commit/0bf054ae9f14d727d3e4e961efbb8c4d223aa0e3)**



---

archive/issue_comments_328257.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0887bf09f9136193966b0c980f38db451419c234\">0887bf0</a></td><td><code>Slight fixes to some of the tests to reflect the last changes.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51daae0f857e876f5ec39202fe28c29dc1420103\">51daae0</a></td><td><code>Allow default_lang to be passed to get_documents, through to AllBuilder.get_all_documents</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bf054ae9f14d727d3e4e961efbb8c4d223aa0e3\">0bf054a</a></td><td><code>This module should still work if sage hasn't been built yet and can't import complicated submodules</code></td></tr></table>\n",
    "created_at": "2016-12-21T15:15:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328257",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0887bf09f9136193966b0c980f38db451419c234">0887bf0</a></td><td><code>Slight fixes to some of the tests to reflect the last changes.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51daae0f857e876f5ec39202fe28c29dc1420103">51daae0</a></td><td><code>Allow default_lang to be passed to get_documents, through to AllBuilder.get_all_documents</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bf054ae9f14d727d3e4e961efbb8c4d223aa0e3">0bf054a</a></td><td><code>This module should still work if sage hasn't been built yet and can't import complicated submodules</code></td></tr></table>




---

archive/issue_events_291275.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-12-21T15:15:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291275"
}
```



---

archive/issue_events_291276.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-12-21T15:15:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291276"
}
```



---

archive/issue_comments_328258.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nAccording to the patchbot, the documentation doesn't actually build with this patch.",
    "created_at": "2017-01-04T12:27:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328258",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">Comment 5</div>

According to the patchbot, the documentation doesn't actually build with this patch.



---

archive/issue_events_291277.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-04T12:27:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291277"
}
```



---

archive/issue_events_291278.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-04T12:27:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291278"
}
```



---

archive/issue_comments_328259.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nQuestion: is this patch supposed to make any functional changes or is it really just a reorganisation?",
    "created_at": "2017-01-04T12:30:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328259",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:6" align="right">Comment 6</div>

Question: is this patch supposed to make any functional changes or is it really just a reorganisation?



---

archive/issue_comments_328260.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nHmm, the error I see in the buildbot is:\n\n```\ncd ../.. && sage-logger -p './sage --docbuild --no-pdf-links all html ' logs/dochtml.log\n[dochtml] \n[dochtml] Building reference manual, first pass.\n[dochtml] \n[dochtml] Error building the documentation.\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/home/vdelecro/sage_patchbot/local/lib/python/runpy.py\", line 174, in _run_module_as_main\n[dochtml]     \"__main__\", fname, loader, pkg_name)\n[dochtml]   File \"/home/vdelecro/sage_patchbot/local/lib/python/runpy.py\", line 72, in _run_code\n[dochtml]     exec code in run_globals\n[dochtml]   File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/main.py\", line 274, in main\n[dochtml]     builder()\n[dochtml]   File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/builders/__init__.py\", line 115, in _wrapper\n[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n[dochtml]   File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/builders/reference.py\", line 105, in _wrapper\n[dochtml]     build_many(self._build_ref_doc, L)\n[dochtml]   File \"/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/builders/__init__.py\", line 182, in build_many\n[dochtml]     ret = x.get(99999)\n[dochtml]   File \"/home/vdelecro/sage_patchbot/local/lib/python/multiprocessing/pool.py\", line 567, in get\n[dochtml]     raise self._value\n[dochtml] PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed\nMakefile:1121: recipe for target 'doc-html' failed\nmake[1]: *** [doc-html] Error 1\n```\n\nI don't remember ever getting anything like that in testing, but I'll have to try it again.  It's possible I made some other minor changes after testing and then forgot to re-test.  I don't remember.\n\nAnyways, to answer your question yes this is just a reorganization and does not (modulo bugs) make any changes in functionality.",
    "created_at": "2017-01-04T13:43:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328260",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">Comment 7</div>

Hmm, the error I see in the buildbot is:

```
cd ../.. && sage-logger -p './sage --docbuild --no-pdf-links all html ' logs/dochtml.log
[dochtml] 
[dochtml] Building reference manual, first pass.
[dochtml] 
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/home/vdelecro/sage_patchbot/local/lib/python/runpy.py", line 174, in _run_module_as_main
[dochtml]     "__main__", fname, loader, pkg_name)
[dochtml]   File "/home/vdelecro/sage_patchbot/local/lib/python/runpy.py", line 72, in _run_code
[dochtml]     exec code in run_globals
[dochtml]   File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/main.py", line 274, in main
[dochtml]     builder()
[dochtml]   File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/builders/__init__.py", line 115, in _wrapper
[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
[dochtml]   File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/builders/reference.py", line 105, in _wrapper
[dochtml]     build_many(self._build_ref_doc, L)
[dochtml]   File "/home/vdelecro/sage_patchbot/local/lib/python2.7/site-packages/sage_setup/docbuild/builders/__init__.py", line 182, in build_many
[dochtml]     ret = x.get(99999)
[dochtml]   File "/home/vdelecro/sage_patchbot/local/lib/python/multiprocessing/pool.py", line 567, in get
[dochtml]     raise self._value
[dochtml] PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed
Makefile:1121: recipe for target 'doc-html' failed
make[1]: *** [doc-html] Error 1
```

I don't remember ever getting anything like that in testing, but I'll have to try it again.  It's possible I made some other minor changes after testing and then forgot to re-test.  I don't remember.

Anyways, to answer your question yes this is just a reorganization and does not (modulo bugs) make any changes in functionality.



---

archive/issue_comments_328261.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@embray](#comment%3A7):\n> `[dochtml] PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed`\n\nThis is almost certainly due to docbuilding in parallel. Remember that single-process and multi-process docbuilding now take a different code path.",
    "created_at": "2017-01-05T13:37:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328261",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@embray](#comment%3A7):
> `[dochtml] PicklingError: Can't pickle <type 'function'>: attribute lookup __builtin__.function failed`

This is almost certainly due to docbuilding in parallel. Remember that single-process and multi-process docbuilding now take a different code path.



---

archive/issue_comments_328262.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nRight, that could be why I did't get it.  Though I thought docbuilding was in parallel by default.  I was testing this on Linux too.  Oh well, no matter.  It's a simple fix.",
    "created_at": "2017-01-06T12:47:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328262",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">Comment 9</div>

Right, that could be why I did't get it.  Though I thought docbuilding was in parallel by default.  I was testing this on Linux too.  Oh well, no matter.  It's a simple fix.



---

archive/issue_comments_328263.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@embray](#comment%3A9):\n> Though I thought docbuilding was in parallel by default.\n\nNo, it's serial by default. But the patchbots all build in parallel.",
    "created_at": "2017-01-06T13:23:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328263",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@embray](#comment%3A9):
> Though I thought docbuilding was in parallel by default.

No, it's serial by default. But the patchbots all build in parallel.



---

archive/issue_comments_328264.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nAh, okay. That explains it then.",
    "created_at": "2017-01-06T13:32:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328264",
    "user": "https://github.com/embray"
}
```

<div id="comment:11" align="right">Comment 11</div>

Ah, okay. That explains it then.



---

archive/issue_events_291279.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-05-19T09:53:27Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291279"
}
```



---

archive/issue_comments_328265.json:
```json
{
    "body": "Changed commit from **[0bf054a](https://github.com/sagemath/sagetrac-mirror/commit/0bf054ae9f14d727d3e4e961efbb8c4d223aa0e3)** to **[dfeaa78](https://github.com/sagemath/sagetrac-mirror/commit/dfeaa78686c0c1476b7a7eafce4333c5ec02cee2)**",
    "created_at": "2017-05-19T10:35:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328265",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0bf054a](https://github.com/sagemath/sagetrac-mirror/commit/0bf054ae9f14d727d3e4e961efbb8c4d223aa0e3)** to **[dfeaa78](https://github.com/sagemath/sagetrac-mirror/commit/dfeaa78686c0c1476b7a7eafce4333c5ec02cee2)**



---

archive/issue_comments_328266.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/974e238b3e22a0edd6d40e3f8f2e56fa8636467e\">974e238</a></td><td><code>Initial refactoring of sage_setup.docbuild.__init__ into a number of</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92fc2356361d6f31ae81083aa5eee67e89d2464c\">92fc235</a></td><td><code>Ensure that AllBuilder.get_all_documents() handles 'reference' correctly when default_lang is 'en'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ff16e82dbd653ca5ea7e0c2142f83d59752a32b\">2ff16e8</a></td><td><code>Three more changes I had in mind, that were tricky to disentangle:</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9755910ba197185437254ccb1bab2b4beddfc08\">d975591</a></td><td><code>Use importlib.import_module instead of `__import__` in a couple places</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e87372eb1d6090914510a8543b43096c864756b\">6e87372</a></td><td><code>Implement a minor TODO item: although maybe unnecessary here it's lways good practice to restore globals in sys after we mess with them.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/701526bdd38e0522f3ac69affde51e2f3d972997\">701526b</a></td><td><code>Slight fixes to some of the tests to reflect the last changes.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5dab10a5ffe78f3687ea69f47dfb436d56d4c719\">5dab10a</a></td><td><code>Allow default_lang to be passed to get_documents, through to AllBuilder.get_all_documents</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b532cfba2aba4ceeb9229fbaa570b02cb90c6f8\">1b532cf</a></td><td><code>This module should still work if sage hasn't been built yet and can't import complicated submodules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a88454d22186c7908308e75003c055592282e6a\">1a88454</a></td><td><code>Static methods not (easily) pickleable for use with multiprocessing; should be module-level functions.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dfeaa78686c0c1476b7a7eafce4333c5ec02cee2\">dfeaa78</a></td><td><code>Restore this import which is (unfortunately) necessary for imports from sage to not break.</code></td></tr></table>\n",
    "created_at": "2017-05-19T10:35:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328266",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13" align="right">Comment 13</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/974e238b3e22a0edd6d40e3f8f2e56fa8636467e">974e238</a></td><td><code>Initial refactoring of sage_setup.docbuild.__init__ into a number of</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92fc2356361d6f31ae81083aa5eee67e89d2464c">92fc235</a></td><td><code>Ensure that AllBuilder.get_all_documents() handles 'reference' correctly when default_lang is 'en'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ff16e82dbd653ca5ea7e0c2142f83d59752a32b">2ff16e8</a></td><td><code>Three more changes I had in mind, that were tricky to disentangle:</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9755910ba197185437254ccb1bab2b4beddfc08">d975591</a></td><td><code>Use importlib.import_module instead of `__import__` in a couple places</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e87372eb1d6090914510a8543b43096c864756b">6e87372</a></td><td><code>Implement a minor TODO item: although maybe unnecessary here it's lways good practice to restore globals in sys after we mess with them.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/701526bdd38e0522f3ac69affde51e2f3d972997">701526b</a></td><td><code>Slight fixes to some of the tests to reflect the last changes.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5dab10a5ffe78f3687ea69f47dfb436d56d4c719">5dab10a</a></td><td><code>Allow default_lang to be passed to get_documents, through to AllBuilder.get_all_documents</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b532cfba2aba4ceeb9229fbaa570b02cb90c6f8">1b532cf</a></td><td><code>This module should still work if sage hasn't been built yet and can't import complicated submodules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a88454d22186c7908308e75003c055592282e6a">1a88454</a></td><td><code>Static methods not (easily) pickleable for use with multiprocessing; should be module-level functions.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dfeaa78686c0c1476b7a7eafce4333c5ec02cee2">dfeaa78</a></td><td><code>Restore this import which is (unfortunately) necessary for imports from sage to not break.</code></td></tr></table>




---

archive/issue_comments_328267.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nRebased (incorporating updates to `sage_setup.docbuild` since the last version of this), and fixed the remaining issues as far as I can tell.",
    "created_at": "2017-05-19T10:35:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328267",
    "user": "https://github.com/embray"
}
```

<div id="comment:14" align="right">Comment 14</div>

Rebased (incorporating updates to `sage_setup.docbuild` since the last version of this), and fixed the remaining issues as far as I can tell.



---

archive/issue_events_291280.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-05-19T10:35:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291280"
}
```



---

archive/issue_events_291281.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-05-19T10:35:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291281"
}
```



---

archive/issue_comments_328268.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\n1. Why this?\n\n```\ntry:\n    from sage.interfaces.gap import set_gap_memory_pool_size\n    set_gap_memory_pool_size(80 * 1024 * 1024)\nexcept ImportError:\n    pass\n```\nIf you really want this to work without Sage, I would prefer to see\n\n```\ntry:\n    import sage\nexcept ImportError:\n    pass\nelse:\n    from sage.interfaces.gap import set_gap_memory_pool_size\n    set_gap_memory_pool_size(80 * 1024 * 1024)\n```\n\n2. All functions in `src/sage_setup/docbuild/__init__.py` lack doctests. I know that the original functions didn't have doctests either, but since you changed the implementation, I think it's valid to ask for doctests. For `get_builder()`, it would be very good to have examples for various cases: just from reading the docstring, it's not totally clear what it does.\n\n3. In `get_builder`, can you use the `traceback` module to format the exceptions?",
    "created_at": "2017-05-22T09:23:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328268",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">Comment 16</div>

1. Why this?

```
try:
    from sage.interfaces.gap import set_gap_memory_pool_size
    set_gap_memory_pool_size(80 * 1024 * 1024)
except ImportError:
    pass
```
If you really want this to work without Sage, I would prefer to see

```
try:
    import sage
except ImportError:
    pass
else:
    from sage.interfaces.gap import set_gap_memory_pool_size
    set_gap_memory_pool_size(80 * 1024 * 1024)
```

2. All functions in `src/sage_setup/docbuild/__init__.py` lack doctests. I know that the original functions didn't have doctests either, but since you changed the implementation, I think it's valid to ask for doctests. For `get_builder()`, it would be very good to have examples for various cases: just from reading the docstring, it's not totally clear what it does.

3. In `get_builder`, can you use the `traceback` module to format the exceptions?



---

archive/issue_comments_328269.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nFor 1), it's possible `import sage` works, but it's not fully built or fully working.  The point is that this code has to be there when using Sage *for some reason* that I don't know, but this module should work fine without Sage as well.",
    "created_at": "2017-05-22T09:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328269",
    "user": "https://github.com/embray"
}
```

<div id="comment:17" align="right">Comment 17</div>

For 1), it's possible `import sage` works, but it's not fully built or fully working.  The point is that this code has to be there when using Sage *for some reason* that I don't know, but this module should work fine without Sage as well.



---

archive/issue_comments_328270.json:
```json
{
    "body": "Changed branch from **[u/embray/docbuild/refactor](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/docbuild/refactor)** to **[u/jdemeyer/docbuild/refactor](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/docbuild/refactor)**",
    "created_at": "2017-05-22T10:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328270",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/embray/docbuild/refactor](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/docbuild/refactor)** to **[u/jdemeyer/docbuild/refactor](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/docbuild/refactor)**



---

archive/issue_comments_328271.json:
```json
{
    "body": "Changed commit from **[dfeaa78](https://github.com/sagemath/sagetrac-mirror/commit/dfeaa78686c0c1476b7a7eafce4333c5ec02cee2)** to **[652c41e](https://github.com/sagemath/sagetrac-mirror/commit/652c41e26b268bbe7860184e3129b9836da734b6)**",
    "created_at": "2017-05-22T10:05:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328271",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[dfeaa78](https://github.com/sagemath/sagetrac-mirror/commit/dfeaa78686c0c1476b7a7eafce4333c5ec02cee2)** to **[652c41e](https://github.com/sagemath/sagetrac-mirror/commit/652c41e26b268bbe7860184e3129b9836da734b6)**



---

archive/issue_comments_328272.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nFor easier reviewing, I squashed this branch and made it into 2 commits: one which literally just moves code around and one which makes further changes.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d95a52bf4ade210ff9aa5d3739887dce9e286250\">d95a52b</a></td><td><code>Split up docbuilding code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/652c41e26b268bbe7860184e3129b9836da734b6\">652c41e</a></td><td><code>Refactor sage_setup.docbuild</code></td></tr></table>\n",
    "created_at": "2017-05-22T10:05:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328272",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">Comment 19</div>

For easier reviewing, I squashed this branch and made it into 2 commits: one which literally just moves code around and one which makes further changes.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d95a52bf4ade210ff9aa5d3739887dce9e286250">d95a52b</a></td><td><code>Split up docbuilding code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/652c41e26b268bbe7860184e3129b9836da734b6">652c41e</a></td><td><code>Refactor sage_setup.docbuild</code></td></tr></table>




---

archive/issue_comments_328273.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@embray](#comment%3A17):\n> For 1), it's possible `import sage` works, but it's not fully built or fully working.\n\nIf that's the case, that's a bug and we want to know about it. Hiding a bug inside an `except` statement is not good style.\n\nDo you plan to use the docbuilder outside of Sage? If not, there is no reason for the `try`/`except`.",
    "created_at": "2017-05-22T10:13:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328273",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@embray](#comment%3A17):
> For 1), it's possible `import sage` works, but it's not fully built or fully working.

If that's the case, that's a bug and we want to know about it. Hiding a bug inside an `except` statement is not good style.

Do you plan to use the docbuilder outside of Sage? If not, there is no reason for the `try`/`except`.



---

archive/issue_comments_328274.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\n`pyflakes` complains about a few things:\n\n```\ndocbuild/main.py:267: local variable 'C' is assigned to but never used\ndocbuild/builders/docbuilder.py:111: undefined name 'logger'\ndocbuild/builders/reference.py:625: undefined name 'SAGE_SRC'\ndocbuild/builders/singlefile.py:5: 're' imported but unused\n```\nThe undefined names are surely bugs.",
    "created_at": "2017-05-22T10:18:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328274",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">Comment 21</div>

`pyflakes` complains about a few things:

```
docbuild/main.py:267: local variable 'C' is assigned to but never used
docbuild/builders/docbuilder.py:111: undefined name 'logger'
docbuild/builders/reference.py:625: undefined name 'SAGE_SRC'
docbuild/builders/singlefile.py:5: 're' imported but unused
```
The undefined names are surely bugs.



---

archive/issue_comments_328275.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nLet me say that I honestly want to move forward with this ticket. It would a pity to have this ticket stalled again. So even if I disagree with a minor thing, I might accept it anyway.",
    "created_at": "2017-05-22T10:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328275",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">Comment 22</div>

Let me say that I honestly want to move forward with this ticket. It would a pity to have this ticket stalled again. So even if I disagree with a minor thing, I might accept it anyway.



---

archive/issue_comments_328276.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nReplying to [@jdemeyer](#comment%3A20):\n> Replying to [@embray](#comment%3A17):\n> > For 1), it's possible `import sage` works, but it's not fully built or fully working.\n\n> \n> If that's the case, that's a bug and we want to know about it. Hiding a bug inside an `except` statement is not good style.\n\nThat depends.  It's not necessarily hiding a \"bug\" in this case.  That said, I don't remember the exact reason it was needed so changing this *might* be fine.  I just don't see why it matters.\n\n> Do you plan to use the docbuilder outside of Sage? If not, there is no reason for the `try`/`except`.\n\nYes, that's part of the point of this refactoring, as well as #21732.  I don't *personally* plan to use it, but it should be made more independent of Sage.",
    "created_at": "2017-05-22T12:07:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328276",
    "user": "https://github.com/embray"
}
```

<div id="comment:23" align="right">Comment 23</div>

Replying to [@jdemeyer](#comment%3A20):
> Replying to [@embray](#comment%3A17):
> > For 1), it's possible `import sage` works, but it's not fully built or fully working.

> 
> If that's the case, that's a bug and we want to know about it. Hiding a bug inside an `except` statement is not good style.

That depends.  It's not necessarily hiding a "bug" in this case.  That said, I don't remember the exact reason it was needed so changing this *might* be fine.  I just don't see why it matters.

> Do you plan to use the docbuilder outside of Sage? If not, there is no reason for the `try`/`except`.

Yes, that's part of the point of this refactoring, as well as #21732.  I don't *personally* plan to use it, but it should be made more independent of Sage.



---

archive/issue_comments_328277.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReplying to [@jdemeyer](#comment%3A22):\n> Let me say that I honestly want to move forward with this ticket. It would a pity to have this ticket stalled again. So even if I disagree with a minor thing, I might accept it anyway.\n\nThat's fine, and I agree with your other comments.  I'm not sure what you want me to do now that you've switched it to your branch though.",
    "created_at": "2017-05-22T12:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328277",
    "user": "https://github.com/embray"
}
```

<div id="comment:24" align="right">Comment 24</div>

Replying to [@jdemeyer](#comment%3A22):
> Let me say that I honestly want to move forward with this ticket. It would a pity to have this ticket stalled again. So even if I disagree with a minor thing, I might accept it anyway.

That's fine, and I agree with your other comments.  I'm not sure what you want me to do now that you've switched it to your branch though.



---

archive/issue_comments_328278.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nReplying to [@embray](#comment%3A24):\n> That's fine, and I agree with your other comments.  I'm not sure what you want me to do now that you've switched it to your branch though.\n\nPreferably, you continue your work on top of my branch.",
    "created_at": "2017-05-23T07:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328278",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">Comment 25</div>

Replying to [@embray](#comment%3A24):
> That's fine, and I agree with your other comments.  I'm not sure what you want me to do now that you've switched it to your branch though.

Preferably, you continue your work on top of my branch.



---

archive/issue_events_291282.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-27T10:39:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291282"
}
```



---

archive/issue_events_291283.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-27T10:39:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291283"
}
```



---

archive/issue_events_291284.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-05-27T10:39:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291284"
}
```



---

archive/issue_events_291285.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-09T19:56:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291285"
}
```



---

archive/issue_events_291286.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-09T19:56:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291286"
}
```



---

archive/issue_events_291287.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-09T19:56:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291287"
}
```



---

archive/issue_comments_328279.json:
```json
{
    "body": "Changed author from **Erik Bray** to none",
    "created_at": "2022-07-09T19:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328279",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Erik Bray** to none



---

archive/issue_comments_328280.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\noutdated, should close",
    "created_at": "2022-07-09T19:56:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328280",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">Comment 27</div>

outdated, should close



---

archive/issue_events_291288.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-09T19:56:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291288"
}
```



---

archive/issue_events_291289.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-07-09T19:56:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291289"
}
```



---

archive/issue_comments_328281.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nSure.",
    "created_at": "2022-07-09T22:59:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22080#issuecomment-328281",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:28" align="right">Comment 28</div>

Sure.



---

archive/issue_events_291290.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-07-09T22:59:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291290"
}
```



---

archive/issue_events_291291.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-07-09T22:59:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291291"
}
```



---

archive/issue_events_291292.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-02T06:31:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291292"
}
```



---

archive/issue_events_291293.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-02T06:31:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22080",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22080#event-291293"
}
```
