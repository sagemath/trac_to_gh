# Issue 22658: Support interface coercion polymake(X) for Polyhedron

archive/issues_022421.json:
```json
{
    "body": "Following up on the Polymake pexpect interface (#22452), we make it easy to make a polymake object corresponding to a given `Polyhedron`.\n\nWe use the standard interface coercion protocol by defining `SageObject._polymake_` and a default method `SageObject._polymake_init_`, which is overridden for `Polyhedron_base` and for several rings.\n\nBasic example (see `Polyhedron_base._polymake_init_` for more):\n\n```\n            sage: P = polytopes.cube()\n            sage: PP = polymake(P)         # optional - polymake\n            sage: PP.N_VERTICES            # optional - polymake\n            8\n```\n\nExample of an algebraic polyhedron:\n\n```\n            sage: P = polytopes.dodecahedron(); P\n            A 3-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5)^3 defined as the convex hull of 20 vertices\n            sage: print(\"There may be a recompilation warning\"); PP = polymake(P); PP\n            There may be a recompilation warning...\n            Polytope<QuadraticExtension<Rational>>[...]\n            sage: sorted(PP.VERTICES[:])[0]\n            1 1-1r5 4-2r5 0\n```\n\nThe branch is on top of #22452; and it also contains a quick fix for the polymake interface regarding the way that files are used to send long commands.\n\n\nDepends on #22452\n\n**CC:**  @simon-king-jena @jplab @videlec @tscrim @yuan-zhou @dimpase\n\n**Keywords:** days84\n\n**Branch/Commit:** [d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c](https://github.com/sagemath/sagetrac-mirror/commit/d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c)\n\n**Reviewer:** Jean-Philippe Labb\u00e9, Travis Scrimshaw\n\n**Author:** Matthias Koeppe, Simon King\n\nIssue created by migration from https://trac.sagemath.org/ticket/22658\n\n",
    "closed_at": "2017-04-03T20:59:24Z",
    "created_at": "2017-03-20T23:37:44Z",
    "labels": [
        "component: geometry",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "title": "Support interface coercion polymake(X) for Polyhedron",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/22658",
    "user": "https://github.com/mkoeppe"
}
```
Following up on the Polymake pexpect interface (#22452), we make it easy to make a polymake object corresponding to a given `Polyhedron`.

We use the standard interface coercion protocol by defining `SageObject._polymake_` and a default method `SageObject._polymake_init_`, which is overridden for `Polyhedron_base` and for several rings.

Basic example (see `Polyhedron_base._polymake_init_` for more):

```
            sage: P = polytopes.cube()
            sage: PP = polymake(P)         # optional - polymake
            sage: PP.N_VERTICES            # optional - polymake
            8
```

Example of an algebraic polyhedron:

```
            sage: P = polytopes.dodecahedron(); P
            A 3-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5)^3 defined as the convex hull of 20 vertices
            sage: print("There may be a recompilation warning"); PP = polymake(P); PP
            There may be a recompilation warning...
            Polytope<QuadraticExtension<Rational>>[...]
            sage: sorted(PP.VERTICES[:])[0]
            1 1-1r5 4-2r5 0
```

The branch is on top of #22452; and it also contains a quick fix for the polymake interface regarding the way that files are used to send long commands.


Depends on #22452

**CC:**  @simon-king-jena @jplab @videlec @tscrim @yuan-zhou @dimpase

**Keywords:** days84

**Branch/Commit:** [d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c](https://github.com/sagemath/sagetrac-mirror/commit/d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c)

**Reviewer:** Jean-Philippe Labb√©, Travis Scrimshaw

**Author:** Matthias Koeppe, Simon King

Issue created by migration from https://trac.sagemath.org/ticket/22658





---

archive/issue_comments_339221.json:
```json
{
    "body": "<a id='comment:1'></a>\nI immediately ran into a problem:\n\n```\nsage: polymake.new_object(\"Polytope\", FACETS=[[12, -2, -3, -5, -8, -13, -21, -34, -55],\n....:  [0, 1, 0, 0, 0, 0, 0, 0, 0],\n....:  [0, 0, 0, 0, 0, 0, 0, 0, 1],\n....:  [0, 0, 0, 0, 0, 0, 0, 1, 0],\n....:  [0, 0, 0, 0, 0, 0, 1, 0, 0],\n....:  [0, 0, 0, 0, 0, 1, 0, 0, 0],\n....:  [0, 0, 0, 0, 1, 0, 0, 0, 0],\n....:  [0, 0, 0, 1, 0, 0, 0, 0, 0],\n....:  [0, 0, 1, 0, 0, 0, 0, 0, 0]])\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-1-a71d30984154> in <module>()\n      7  [Integer(0), Integer(0), Integer(0), Integer(0), Integer(1), Integer(0), Integer(0), Integer(0), Integer(0)],\n      8  [Integer(0), Integer(0), Integer(0), Integer(1), Integer(0), Integer(0), Integer(0), Integer(0), Integer(0)],\n----> 9  [Integer(0), Integer(0), Integer(1), Integer(0), Integer(0), Integer(0), Integer(0), Integer(0), Integer(0)]])\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in new_object(self, name, *args, **kwds)\n   1201         except KeyError:\n   1202             f = self.__new[name] = self._function_class()(self, \"new %s\"%name)\n-> 1203         return f(*args, **kwds)\n   1204 \n   1205 polymake = Polymake()\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __call__(self, *args, **kwds)\n    627 \n    628     def __call__(self, *args, **kwds):\n--> 629         return self._parent.function_call(self._name, list(args), kwds)\n    630 \n    631     def _sage_doc_(self):\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in function_call(self, function, args, kwds)\n    269 \n    270         \"\"\"\n--> 271         args, kwds = self._convert_args_kwds(args, kwds)\n    272         self._check_valid_function_name(function)\n    273         s = self._function_call_string(function,\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/interface.pyc in _convert_args_kwds(self, args, kwds)\n    512         for key, value in iteritems(kwds):\n    513             if not isinstance(value, InterfaceElement) or value.parent() is not self:\n--> 514                 kwds[key] = self(value)\n    515 \n    516         return args, kwds\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __call__(self, x, name)\n    270                 return cls(self, str(x), name=name)\n    271             except TypeError:\n--> 272                 raise TypeError(msg)\n    273 \n    274     def _coerce_from_special_method(self, x):\n\nTypeError: Polymake terminated unexpectedly while reading in a large line:\nreference to an undeclared variable @SAGE21 at /Users/mkoeppe/.sage/temp/campus-005-030.ucdavis.edu/69025/interface/tmp69091 line 1.\n```\n\nWhen I enter the same a second time, I get this interesting \"recompilation failure\"...\n\n```\nsage: polymake.new_object(\"Polytope\", FACETS=[[12, -2, -3, -5, -8, -13, -21, -34, -55],\n....:  [0, 1, 0, 0, 0, 0, 0, 0, 0],\n....:  [0, 0, 0, 0, 0, 0, 0, 0, 1],\n....:  [0, 0, 0, 0, 0, 0, 0, 1, 0],\n....:  [0, 0, 0, 0, 0, 0, 1, 0, 0],\n....:  [0, 0, 0, 0, 0, 1, 0, 0, 0],\n....:  [0, 0, 0, 0, 1, 0, 0, 0, 0],\n....:  [0, 0, 0, 1, 0, 0, 0, 0, 0],\n....:  [0, 0, 1, 0, 0, 0, 0, 0, 0]])\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.py:1019: RuntimeWarning: Recompiling application common in extension /Users/mkoeppe/.polymake/wrappers.0, please be patient...\n  warnings.warn(w, RuntimeWarning)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-2-a71d30984154> in <module>()\n      7  [Integer(0), Integer(0), Integer(0), Integer(0), Integer(1), Integer(0), Integer(0), Integer(0), Integer(0)],\n      8  [Integer(0), Integer(0), Integer(0), Integer(1), Integer(0), Integer(0), Integer(0), Integer(0), Integer(0)],\n----> 9  [Integer(0), Integer(0), Integer(1), Integer(0), Integer(0), Integer(0), Integer(0), Integer(0), Integer(0)]])\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in new_object(self, name, *args, **kwds)\n   1201         except KeyError:\n   1202             f = self.__new[name] = self._function_class()(self, \"new %s\"%name)\n-> 1203         return f(*args, **kwds)\n   1204 \n   1205 polymake = Polymake()\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __call__(self, *args, **kwds)\n    627 \n    628     def __call__(self, *args, **kwds):\n--> 629         return self._parent.function_call(self._name, list(args), kwds)\n    630 \n    631     def _sage_doc_(self):\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in function_call(self, function, args, kwds)\n    274                                        [s.name() for s in args],\n    275                                        ['%s=>%s'%(key,value.name()) for key, value in kwds.items()])\n--> 276         return self(s)\n    277 \n    278     def _function_call_string(self, function, args, kwds):\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __call__(self, x, name)\n    257 \n    258         if isinstance(x, six.string_types):\n--> 259             return cls(self, x, name=name)\n    260         try:\n    261             return self._coerce_from_special_method(x)\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/expect.pyc in __init__(self, parent, value, is_name, name)\n   1386             except (RuntimeError, ValueError) as x:\n   1387                 self._session_number = -1\n-> 1388                 raise_(TypeError, x, sys.exc_info()[2])\n   1389             except BaseException:\n   1390                 self._session_number = -1\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/expect.pyc in __init__(self, parent, value, is_name, name)\n   1381         else:\n   1382             try:\n-> 1383                 self._name = parent._create(value, name=name)\n   1384             # Convert ValueError and RuntimeError to TypeError for\n   1385             # coercion to work properly.\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in _create(self, value, name)\n    603         \"\"\"\n    604         name = self._next_var_name() if name is None else name\n--> 605         self.set(name, value)\n    606         # If value is a list, then @name is now equal to that list.\n    607         # Otherwise, value is obtained by $name[0]. So, we modify\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in set(self, var, value)\n    668             value = value.strip().rstrip(';').strip()\n    669         cmd = '@%s%s(%s);'%(var,self._assign_symbol(), value)\n--> 670         self.eval(cmd)\n    671 \n    672     def get(self, cmd):\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/expect.pyc in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)\n   1298                 elif split_lines:\n   1299                     return '\\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)\n-> 1300                                         for L in code.split('\\n') if L != ''])\n   1301                 else:\n   1302                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)\n\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed, **kwds)\n   1019             warnings.warn(w, RuntimeWarning)\n   1020         for e in p_errors:\n-> 1021             raise PolymakeError(e)\n   1022         return out\n   1023 \n\nTypeError: Shared module compilation failed; see the error log below\n\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc: In instantiation of 'static sv* polymake::common::{anonymous}::Wrapper4perl_new_X<T0, T1>::call(sv**, char*) [with T0 = pm::Matrix<pm::Rational>; T1 = int]':\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/perl/wrappers.h:253:21:   required from 'static void pm::perl::WrapperBase<Wrapper>::register_it(const char (&)[namelen], const char (&)[filelen], int, _app_list) [with long unsigned int namelen = 6ul; long unsigned int filelen = 72ul; _app_list = int; Wrapper = polymake::common::{anonymous}::Wrapper4perl_new_X<pm::Matrix<pm::Rational>, int>]'\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:10:182:   required from 'polymake::common::{anonymous}::Wrapper4perl_new_X<T0, T1>::Wrapper4perl_new_X(const char (&)[fl], int, first_arg_type) [with long unsigned int fl = 72ul; first_arg_type = int; T0 = pm::Matrix<pm::Rational>; T1 = int]'\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:15:90:   required from here\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: error: no matching function for call to 'pm::Matrix<pm::Rational>::Matrix(pm::perl::access<int, int>::return_type)'\nIn file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,\n                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:166:4: note: candidate: template<class Container> pm::Matrix<E>::Matrix(void*, int, int, const Container&, typename pm::construct_cascaded_iterator<typename Container::const_iterator, E, pm::dense>::enabled, typename pm::enable_if<void**, (pm::construct_cascaded_iterator<typename Container::const_iterator, E, pm::dense>::depth == 2)>::type)\n    Matrix(void *place, int r, int c, const Container& src,\n    ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:166:4: note:   template argument deduction/substitution failed:\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   cannot convert 'arg0.pm::perl::Value::get<int>()' (type 'pm::perl::access<int, int>::return_type {aka int}') to type 'void*'\nIn file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,\n                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:161:4: note: candidate: template<class Iterator> pm::Matrix<E>::Matrix(void*, int, int, Iterator, typename pm::construct_cascaded_iterator<Iterator, E, pm::dense>::enabled)\n    Matrix(void *place, int r, int c, Iterator src,\n    ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:161:4: note:   template argument deduction/substitution failed:\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   cannot convert 'arg0.pm::perl::Value::get<int>()' (type 'pm::perl::access<int, int>::return_type {aka int}') to type 'void*'\nIn file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,\n                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:158:4: note: candidate: pm::Matrix<E>::Matrix(void*, int, int) [with E = pm::Rational]\n    Matrix(void *place, int r, int c) : base(place,r,c) {}\n    ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:158:4: note:   candidate expects 3 arguments, 1 provided\nIn file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,\n                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:151:13: note: candidate: template<class Container> pm::Matrix<E>::Matrix(const Container&, typename pm::construct_cascaded_iterator<typename Container::const_iterator, E, pm::dense>::enabled, typename pm::enable_if<void**, (pm::construct_cascaded_iterator<typename Container::const_iterator, E, pm::dense>::depth == 2)>::type)\n    explicit Matrix(const Container& src,\n             ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:151:13: note:   template argument deduction/substitution failed:\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h: In substitution of 'template<class Container> pm::Matrix<E>::Matrix(const Container&, typename pm::construct_cascaded_iterator<typename Container::const_iterator, E, pm::dense>::enabled, typename pm::enable_if<void**, (pm::construct_cascaded_iterator<typename Container::const_iterator, E, pm::dense>::depth == 2)>::type) [with Container = int]':\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67:   required from 'static sv* polymake::common::{anonymous}::Wrapper4perl_new_X<T0, T1>::call(sv**, char*) [with T0 = pm::Matrix<pm::Rational>; T1 = int]'\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/perl/wrappers.h:253:21:   required from 'static void pm::perl::WrapperBase<Wrapper>::register_it(const char (&)[namelen], const char (&)[filelen], int, _app_list) [with long unsigned int namelen = 6ul; long unsigned int filelen = 72ul; _app_list = int; Wrapper = polymake::common::{anonymous}::Wrapper4perl_new_X<pm::Matrix<pm::Rational>, int>]'\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:10:182:   required from 'polymake::common::{anonymous}::Wrapper4perl_new_X<T0, T1>::Wrapper4perl_new_X(const char (&)[fl], int, first_arg_type) [with long unsigned int fl = 72ul; first_arg_type = int; T0 = pm::Matrix<pm::Rational>; T1 = int]'\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:15:90:   required from here\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:153:127: error: 'int' is not a class, struct, or union type\n                    typename enable_if<void**, construct_cascaded_iterator<typename Container::const_iterator, E, dense>::depth==2>::type=0)\n                                                                                                                               ^\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc: In instantiation of 'static sv* polymake::common::{anonymous}::Wrapper4perl_new_X<T0, T1>::call(sv**, char*) [with T0 = pm::Matrix<pm::Rational>; T1 = int]':\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/perl/wrappers.h:253:21:   required from 'static void pm::perl::WrapperBase<Wrapper>::register_it(const char (&)[namelen], const char (&)[filelen], int, _app_list) [with long unsigned int namelen = 6ul; long unsigned int filelen = 72ul; _app_list = int; Wrapper = polymake::common::{anonymous}::Wrapper4perl_new_X<pm::Matrix<pm::Rational>, int>]'\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:10:182:   required from 'polymake::common::{anonymous}::Wrapper4perl_new_X<T0, T1>::Wrapper4perl_new_X(const char (&)[fl], int, first_arg_type) [with long unsigned int fl = 72ul; first_arg_type = int; T0 = pm::Matrix<pm::Rational>; T1 = int]'\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:15:90:   required from here\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:146:13: note: candidate: template<class Matrix2, class E2> pm::Matrix<E>::Matrix(const pm::GenericMatrix<Matrix2, E2>&, typename pm::enable_if<void**, pm::explicitly_convertible_to<E2, E>::value>::type)\n    explicit Matrix(const GenericMatrix<Matrix2, E2>& m,\n             ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:146:13: note:   template argument deduction/substitution failed:\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   mismatched types 'const pm::GenericMatrix<Matrix, E>' and 'pm::perl::access<int, int>::return_type {aka int}'\nIn file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,\n                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:141:13: note: candidate: template<class Matrix2, class E2> pm::Matrix<E>::Matrix(const pm::GenericMatrix<Matrix2, E2>&, typename pm::enable_if<void**, pm::convertible_to<E2, E>::value>::type)\n    explicit Matrix(const GenericMatrix<Matrix2, E2>& m,\n             ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:141:13: note:   template argument deduction/substitution failed:\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   mismatched types 'const pm::GenericMatrix<Matrix, E>' and 'pm::perl::access<int, int>::return_type {aka int}'\nIn file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,\n                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:136:4: note: candidate: template<class Matrix2> pm::Matrix<E>::Matrix(const pm::GenericMatrix<Matrix2, E>&)\n    Matrix(const GenericMatrix<Matrix2, E>& m)\n    ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:136:4: note:   template argument deduction/substitution failed:\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   mismatched types 'const pm::GenericMatrix<Matrix2, pm::Rational>' and 'pm::perl::access<int, int>::return_type {aka int}'\nIn file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,\n                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:132:4: note: candidate: pm::Matrix<E>::Matrix(const pm::GenericMatrix<pm::Matrix<E> >&) [with E = pm::Rational; typename pm::Matrix<E>::element_type = pm::Rational]\n    Matrix(const GenericMatrix<Matrix>& m) : base(m.top()) {}\n    ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:132:4: note:   no known conversion for argument 1 from 'pm::perl::access<int, int>::return_type {aka int}' to 'const pm::GenericMatrix<pm::Matrix<pm::Rational>, pm::Rational>&'\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:123:4: note: candidate: template<class Iterator> pm::Matrix<E>::Matrix(int, int, Iterator, typename pm::construct_cascaded_iterator<Iterator, E, pm::dense>::enabled)\n    Matrix(int r, int c, Iterator src,\n    ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:123:4: note:   template argument deduction/substitution failed:\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   candidate expects 4 arguments, 1 provided\nIn file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,\n                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:115:13: note: candidate: template<class E2, long unsigned int r, long unsigned int c> pm::Matrix<E>::Matrix(const E2 (&)[r][c], typename pm::enable_if<void**, pm::explicitly_convertible_to<E2, E>::value>::type)\n    explicit Matrix(const E2 (&a)[r][c],\n             ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:115:13: note:   template argument deduction/substitution failed:\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   mismatched types 'const E2 [r][c]' and 'pm::perl::access<int, int>::return_type {aka int}'\nIn file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,\n                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:110:13: note: candidate: template<class E2, long unsigned int r, long unsigned int c> pm::Matrix<E>::Matrix(const E2 (&)[r][c], typename pm::enable_if<void**, pm::convertible_to<E2, E>::value>::type)\n    explicit Matrix(const E2 (&a)[r][c],\n             ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:110:13: note:   template argument deduction/substitution failed:\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   mismatched types 'const E2 [r][c]' and 'pm::perl::access<int, int>::return_type {aka int}'\nIn file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,\n                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:105:4: note: candidate: template<class E2> pm::Matrix<E>::Matrix(int, int, const E2&, typename pm::enable_if<void**, pm::explicitly_convertible_to<E2, E>::value>::type)\n    Matrix(int r, int c, const E2& init,\n    ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:105:4: note:   template argument deduction/substitution failed:\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   candidate expects 4 arguments, 1 provided\nIn file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,\n                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:100:4: note: candidate: template<class E2> pm::Matrix<E>::Matrix(int, int, const E2&, typename pm::enable_if<void**, pm::convertible_to<E2, E>::value>::type)\n    Matrix(int r, int c, const E2& init,\n    ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:100:4: note:   template argument deduction/substitution failed:\n/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   candidate expects 4 arguments, 1 provided\nIn file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,\n                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:97:4: note: candidate: pm::Matrix<E>::Matrix(int, int) [with E = pm::Rational]\n    Matrix(int r, int c) : base(r,c) {}\n    ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:97:4: note:   candidate expects 2 arguments, 1 provided\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:94:4: note: candidate: pm::Matrix<E>::Matrix() [with E = pm::Rational]\n    Matrix() {}\n    ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:94:4: note:   candidate expects 0 arguments, 1 provided\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:77:7: note: candidate: pm::Matrix<pm::Rational>::Matrix(const pm::Matrix<pm::Rational>&)\n class Matrix :\n       ^\n/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:77:7: note:   no known conversion for argument 1 from 'pm::perl::access<int, int>::return_type {aka int}' to 'const pm::Matrix<pm::Rational>&'\nmake: *** [/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.o] Error 1\n```",
    "created_at": "2017-03-21T00:15:19Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339221",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
I immediately ran into a problem:

```
sage: polymake.new_object("Polytope", FACETS=[[12, -2, -3, -5, -8, -13, -21, -34, -55],
....:  [0, 1, 0, 0, 0, 0, 0, 0, 0],
....:  [0, 0, 0, 0, 0, 0, 0, 0, 1],
....:  [0, 0, 0, 0, 0, 0, 0, 1, 0],
....:  [0, 0, 0, 0, 0, 0, 1, 0, 0],
....:  [0, 0, 0, 0, 0, 1, 0, 0, 0],
....:  [0, 0, 0, 0, 1, 0, 0, 0, 0],
....:  [0, 0, 0, 1, 0, 0, 0, 0, 0],
....:  [0, 0, 1, 0, 0, 0, 0, 0, 0]])
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-1-a71d30984154> in <module>()
      7  [Integer(0), Integer(0), Integer(0), Integer(0), Integer(1), Integer(0), Integer(0), Integer(0), Integer(0)],
      8  [Integer(0), Integer(0), Integer(0), Integer(1), Integer(0), Integer(0), Integer(0), Integer(0), Integer(0)],
----> 9  [Integer(0), Integer(0), Integer(1), Integer(0), Integer(0), Integer(0), Integer(0), Integer(0), Integer(0)]])

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in new_object(self, name, *args, **kwds)
   1201         except KeyError:
   1202             f = self.__new[name] = self._function_class()(self, "new %s"%name)
-> 1203         return f(*args, **kwds)
   1204 
   1205 polymake = Polymake()

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __call__(self, *args, **kwds)
    627 
    628     def __call__(self, *args, **kwds):
--> 629         return self._parent.function_call(self._name, list(args), kwds)
    630 
    631     def _sage_doc_(self):

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in function_call(self, function, args, kwds)
    269 
    270         """
--> 271         args, kwds = self._convert_args_kwds(args, kwds)
    272         self._check_valid_function_name(function)
    273         s = self._function_call_string(function,

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/interface.pyc in _convert_args_kwds(self, args, kwds)
    512         for key, value in iteritems(kwds):
    513             if not isinstance(value, InterfaceElement) or value.parent() is not self:
--> 514                 kwds[key] = self(value)
    515 
    516         return args, kwds

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __call__(self, x, name)
    270                 return cls(self, str(x), name=name)
    271             except TypeError:
--> 272                 raise TypeError(msg)
    273 
    274     def _coerce_from_special_method(self, x):

TypeError: Polymake terminated unexpectedly while reading in a large line:
reference to an undeclared variable @SAGE21 at /Users/mkoeppe/.sage/temp/campus-005-030.ucdavis.edu/69025/interface/tmp69091 line 1.
```

When I enter the same a second time, I get this interesting "recompilation failure"...

```
sage: polymake.new_object("Polytope", FACETS=[[12, -2, -3, -5, -8, -13, -21, -34, -55],
....:  [0, 1, 0, 0, 0, 0, 0, 0, 0],
....:  [0, 0, 0, 0, 0, 0, 0, 0, 1],
....:  [0, 0, 0, 0, 0, 0, 0, 1, 0],
....:  [0, 0, 0, 0, 0, 0, 1, 0, 0],
....:  [0, 0, 0, 0, 0, 1, 0, 0, 0],
....:  [0, 0, 0, 0, 1, 0, 0, 0, 0],
....:  [0, 0, 0, 1, 0, 0, 0, 0, 0],
....:  [0, 0, 1, 0, 0, 0, 0, 0, 0]])
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.py:1019: RuntimeWarning: Recompiling application common in extension /Users/mkoeppe/.polymake/wrappers.0, please be patient...
  warnings.warn(w, RuntimeWarning)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-2-a71d30984154> in <module>()
      7  [Integer(0), Integer(0), Integer(0), Integer(0), Integer(1), Integer(0), Integer(0), Integer(0), Integer(0)],
      8  [Integer(0), Integer(0), Integer(0), Integer(1), Integer(0), Integer(0), Integer(0), Integer(0), Integer(0)],
----> 9  [Integer(0), Integer(0), Integer(1), Integer(0), Integer(0), Integer(0), Integer(0), Integer(0), Integer(0)]])

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in new_object(self, name, *args, **kwds)
   1201         except KeyError:
   1202             f = self.__new[name] = self._function_class()(self, "new %s"%name)
-> 1203         return f(*args, **kwds)
   1204 
   1205 polymake = Polymake()

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __call__(self, *args, **kwds)
    627 
    628     def __call__(self, *args, **kwds):
--> 629         return self._parent.function_call(self._name, list(args), kwds)
    630 
    631     def _sage_doc_(self):

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in function_call(self, function, args, kwds)
    274                                        [s.name() for s in args],
    275                                        ['%s=>%s'%(key,value.name()) for key, value in kwds.items()])
--> 276         return self(s)
    277 
    278     def _function_call_string(self, function, args, kwds):

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __call__(self, x, name)
    257 
    258         if isinstance(x, six.string_types):
--> 259             return cls(self, x, name=name)
    260         try:
    261             return self._coerce_from_special_method(x)

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/expect.pyc in __init__(self, parent, value, is_name, name)
   1386             except (RuntimeError, ValueError) as x:
   1387                 self._session_number = -1
-> 1388                 raise_(TypeError, x, sys.exc_info()[2])
   1389             except BaseException:
   1390                 self._session_number = -1

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/expect.pyc in __init__(self, parent, value, is_name, name)
   1381         else:
   1382             try:
-> 1383                 self._name = parent._create(value, name=name)
   1384             # Convert ValueError and RuntimeError to TypeError for
   1385             # coercion to work properly.

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in _create(self, value, name)
    603         """
    604         name = self._next_var_name() if name is None else name
--> 605         self.set(name, value)
    606         # If value is a list, then @name is now equal to that list.
    607         # Otherwise, value is obtained by $name[0]. So, we modify

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in set(self, var, value)
    668             value = value.strip().rstrip(';').strip()
    669         cmd = '@%s%s(%s);'%(var,self._assign_symbol(), value)
--> 670         self.eval(cmd)
    671 
    672     def get(self, cmd):

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/expect.pyc in eval(self, code, strip, synchronize, locals, allow_use_file, split_lines, **kwds)
   1298                 elif split_lines:
   1299                     return '\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)
-> 1300                                         for L in code.split('\n') if L != ''])
   1301                 else:
   1302                     return self._eval_line(code, allow_use_file=allow_use_file, **kwds)

/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/lib/python2.7/site-packages/sage/interfaces/polymake.pyc in _eval_line(self, line, allow_use_file, wait_for_prompt, restart_if_needed, **kwds)
   1019             warnings.warn(w, RuntimeWarning)
   1020         for e in p_errors:
-> 1021             raise PolymakeError(e)
   1022         return out
   1023 

TypeError: Shared module compilation failed; see the error log below

/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc: In instantiation of 'static sv* polymake::common::{anonymous}::Wrapper4perl_new_X<T0, T1>::call(sv**, char*) [with T0 = pm::Matrix<pm::Rational>; T1 = int]':
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/perl/wrappers.h:253:21:   required from 'static void pm::perl::WrapperBase<Wrapper>::register_it(const char (&)[namelen], const char (&)[filelen], int, _app_list) [with long unsigned int namelen = 6ul; long unsigned int filelen = 72ul; _app_list = int; Wrapper = polymake::common::{anonymous}::Wrapper4perl_new_X<pm::Matrix<pm::Rational>, int>]'
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:10:182:   required from 'polymake::common::{anonymous}::Wrapper4perl_new_X<T0, T1>::Wrapper4perl_new_X(const char (&)[fl], int, first_arg_type) [with long unsigned int fl = 72ul; first_arg_type = int; T0 = pm::Matrix<pm::Rational>; T1 = int]'
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:15:90:   required from here
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: error: no matching function for call to 'pm::Matrix<pm::Rational>::Matrix(pm::perl::access<int, int>::return_type)'
In file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,
                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:166:4: note: candidate: template<class Container> pm::Matrix<E>::Matrix(void*, int, int, const Container&, typename pm::construct_cascaded_iterator<typename Container::const_iterator, E, pm::dense>::enabled, typename pm::enable_if<void**, (pm::construct_cascaded_iterator<typename Container::const_iterator, E, pm::dense>::depth == 2)>::type)
    Matrix(void *place, int r, int c, const Container& src,
    ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:166:4: note:   template argument deduction/substitution failed:
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   cannot convert 'arg0.pm::perl::Value::get<int>()' (type 'pm::perl::access<int, int>::return_type {aka int}') to type 'void*'
In file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,
                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:161:4: note: candidate: template<class Iterator> pm::Matrix<E>::Matrix(void*, int, int, Iterator, typename pm::construct_cascaded_iterator<Iterator, E, pm::dense>::enabled)
    Matrix(void *place, int r, int c, Iterator src,
    ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:161:4: note:   template argument deduction/substitution failed:
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   cannot convert 'arg0.pm::perl::Value::get<int>()' (type 'pm::perl::access<int, int>::return_type {aka int}') to type 'void*'
In file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,
                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:158:4: note: candidate: pm::Matrix<E>::Matrix(void*, int, int) [with E = pm::Rational]
    Matrix(void *place, int r, int c) : base(place,r,c) {}
    ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:158:4: note:   candidate expects 3 arguments, 1 provided
In file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,
                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:151:13: note: candidate: template<class Container> pm::Matrix<E>::Matrix(const Container&, typename pm::construct_cascaded_iterator<typename Container::const_iterator, E, pm::dense>::enabled, typename pm::enable_if<void**, (pm::construct_cascaded_iterator<typename Container::const_iterator, E, pm::dense>::depth == 2)>::type)
    explicit Matrix(const Container& src,
             ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:151:13: note:   template argument deduction/substitution failed:
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h: In substitution of 'template<class Container> pm::Matrix<E>::Matrix(const Container&, typename pm::construct_cascaded_iterator<typename Container::const_iterator, E, pm::dense>::enabled, typename pm::enable_if<void**, (pm::construct_cascaded_iterator<typename Container::const_iterator, E, pm::dense>::depth == 2)>::type) [with Container = int]':
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67:   required from 'static sv* polymake::common::{anonymous}::Wrapper4perl_new_X<T0, T1>::call(sv**, char*) [with T0 = pm::Matrix<pm::Rational>; T1 = int]'
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/perl/wrappers.h:253:21:   required from 'static void pm::perl::WrapperBase<Wrapper>::register_it(const char (&)[namelen], const char (&)[filelen], int, _app_list) [with long unsigned int namelen = 6ul; long unsigned int filelen = 72ul; _app_list = int; Wrapper = polymake::common::{anonymous}::Wrapper4perl_new_X<pm::Matrix<pm::Rational>, int>]'
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:10:182:   required from 'polymake::common::{anonymous}::Wrapper4perl_new_X<T0, T1>::Wrapper4perl_new_X(const char (&)[fl], int, first_arg_type) [with long unsigned int fl = 72ul; first_arg_type = int; T0 = pm::Matrix<pm::Rational>; T1 = int]'
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:15:90:   required from here
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:153:127: error: 'int' is not a class, struct, or union type
                    typename enable_if<void**, construct_cascaded_iterator<typename Container::const_iterator, E, dense>::depth==2>::type=0)
                                                                                                                               ^
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc: In instantiation of 'static sv* polymake::common::{anonymous}::Wrapper4perl_new_X<T0, T1>::call(sv**, char*) [with T0 = pm::Matrix<pm::Rational>; T1 = int]':
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/perl/wrappers.h:253:21:   required from 'static void pm::perl::WrapperBase<Wrapper>::register_it(const char (&)[namelen], const char (&)[filelen], int, _app_list) [with long unsigned int namelen = 6ul; long unsigned int filelen = 72ul; _app_list = int; Wrapper = polymake::common::{anonymous}::Wrapper4perl_new_X<pm::Matrix<pm::Rational>, int>]'
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:10:182:   required from 'polymake::common::{anonymous}::Wrapper4perl_new_X<T0, T1>::Wrapper4perl_new_X(const char (&)[fl], int, first_arg_type) [with long unsigned int fl = 72ul; first_arg_type = int; T0 = pm::Matrix<pm::Rational>; T1 = int]'
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:15:90:   required from here
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:146:13: note: candidate: template<class Matrix2, class E2> pm::Matrix<E>::Matrix(const pm::GenericMatrix<Matrix2, E2>&, typename pm::enable_if<void**, pm::explicitly_convertible_to<E2, E>::value>::type)
    explicit Matrix(const GenericMatrix<Matrix2, E2>& m,
             ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:146:13: note:   template argument deduction/substitution failed:
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   mismatched types 'const pm::GenericMatrix<Matrix, E>' and 'pm::perl::access<int, int>::return_type {aka int}'
In file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,
                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:141:13: note: candidate: template<class Matrix2, class E2> pm::Matrix<E>::Matrix(const pm::GenericMatrix<Matrix2, E2>&, typename pm::enable_if<void**, pm::convertible_to<E2, E>::value>::type)
    explicit Matrix(const GenericMatrix<Matrix2, E2>& m,
             ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:141:13: note:   template argument deduction/substitution failed:
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   mismatched types 'const pm::GenericMatrix<Matrix, E>' and 'pm::perl::access<int, int>::return_type {aka int}'
In file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,
                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:136:4: note: candidate: template<class Matrix2> pm::Matrix<E>::Matrix(const pm::GenericMatrix<Matrix2, E>&)
    Matrix(const GenericMatrix<Matrix2, E>& m)
    ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:136:4: note:   template argument deduction/substitution failed:
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   mismatched types 'const pm::GenericMatrix<Matrix2, pm::Rational>' and 'pm::perl::access<int, int>::return_type {aka int}'
In file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,
                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:132:4: note: candidate: pm::Matrix<E>::Matrix(const pm::GenericMatrix<pm::Matrix<E> >&) [with E = pm::Rational; typename pm::Matrix<E>::element_type = pm::Rational]
    Matrix(const GenericMatrix<Matrix>& m) : base(m.top()) {}
    ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:132:4: note:   no known conversion for argument 1 from 'pm::perl::access<int, int>::return_type {aka int}' to 'const pm::GenericMatrix<pm::Matrix<pm::Rational>, pm::Rational>&'
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:123:4: note: candidate: template<class Iterator> pm::Matrix<E>::Matrix(int, int, Iterator, typename pm::construct_cascaded_iterator<Iterator, E, pm::dense>::enabled)
    Matrix(int r, int c, Iterator src,
    ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:123:4: note:   template argument deduction/substitution failed:
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   candidate expects 4 arguments, 1 provided
In file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,
                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:115:13: note: candidate: template<class E2, long unsigned int r, long unsigned int c> pm::Matrix<E>::Matrix(const E2 (&)[r][c], typename pm::enable_if<void**, pm::explicitly_convertible_to<E2, E>::value>::type)
    explicit Matrix(const E2 (&a)[r][c],
             ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:115:13: note:   template argument deduction/substitution failed:
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   mismatched types 'const E2 [r][c]' and 'pm::perl::access<int, int>::return_type {aka int}'
In file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,
                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:110:13: note: candidate: template<class E2, long unsigned int r, long unsigned int c> pm::Matrix<E>::Matrix(const E2 (&)[r][c], typename pm::enable_if<void**, pm::convertible_to<E2, E>::value>::type)
    explicit Matrix(const E2 (&a)[r][c],
             ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:110:13: note:   template argument deduction/substitution failed:
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   mismatched types 'const E2 [r][c]' and 'pm::perl::access<int, int>::return_type {aka int}'
In file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,
                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:105:4: note: candidate: template<class E2> pm::Matrix<E>::Matrix(int, int, const E2&, typename pm::enable_if<void**, pm::explicitly_convertible_to<E2, E>::value>::type)
    Matrix(int r, int c, const E2& init,
    ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:105:4: note:   template argument deduction/substitution failed:
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   candidate expects 4 arguments, 1 provided
In file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,
                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:100:4: note: candidate: template<class E2> pm::Matrix<E>::Matrix(int, int, const E2&, typename pm::enable_if<void**, pm::convertible_to<E2, E>::value>::type)
    Matrix(int r, int c, const E2& init,
    ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:100:4: note:   template argument deduction/substitution failed:
/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:12:67: note:   candidate expects 4 arguments, 1 provided
In file included from /Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/Matrix.h:20:0,
                 from /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.cc:5:
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:97:4: note: candidate: pm::Matrix<E>::Matrix(int, int) [with E = pm::Rational]
    Matrix(int r, int c) : base(r,c) {}
    ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:97:4: note:   candidate expects 2 arguments, 1 provided
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:94:4: note: candidate: pm::Matrix<E>::Matrix() [with E = pm::Rational]
    Matrix() {}
    ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:94:4: note:   candidate expects 0 arguments, 1 provided
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:77:7: note: candidate: pm::Matrix<pm::Rational>::Matrix(const pm::Matrix<pm::Rational>&)
 class Matrix :
       ^
/Users/mkoeppe/s/sage/sage-rebasing/another-local-sans-autotools/include/polymake/next/Matrix.h:77:7: note:   no known conversion for argument 1 from 'pm::perl::access<int, int>::return_type {aka int}' to 'const pm::Matrix<pm::Rational>&'
make: *** [/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gn/T//poly69091Taaaa0001.o] Error 1
```



---

archive/issue_comments_339222.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe problem arises when converting the list of lists of integers:\n\n```\nsage: polymake([[12, -2, -3, -5, -8, -13, -21, -34, -55],\n....:  [0, 1, 0, 0, 0, 0, 0, 0, 0],\n....:  [0, 0, 0, 0, 0, 0, 0, 0, 1],\n....:  [0, 0, 0, 0, 0, 0, 0, 1, 0],\n....:  [0, 0, 0, 0, 0, 0, 1, 0, 0],\n....:  [0, 0, 0, 0, 0, 1, 0, 0, 0],\n....:  [0, 0, 0, 0, 1, 0, 0, 0, 0],\n....:  [0, 0, 0, 1, 0, 0, 0, 0, 0],\n....:  [0, 0, 1, 0, 0, 0, 0, 0, 0]])\nTraceback (most recent call last):\n...\nTypeError: Polymake terminated unexpectedly while reading in a large line:\nreference to an undeclared variable @SAGE9 at /home/king/.sage/temp/king-ThinkPad-T430/4038/interface/tmp4212 line 1.\n```",
    "created_at": "2017-03-23T11:23:00Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339222",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:3'></a>
The problem arises when converting the list of lists of integers:

```
sage: polymake([[12, -2, -3, -5, -8, -13, -21, -34, -55],
....:  [0, 1, 0, 0, 0, 0, 0, 0, 0],
....:  [0, 0, 0, 0, 0, 0, 0, 0, 1],
....:  [0, 0, 0, 0, 0, 0, 0, 1, 0],
....:  [0, 0, 0, 0, 0, 0, 1, 0, 0],
....:  [0, 0, 0, 0, 0, 1, 0, 0, 0],
....:  [0, 0, 0, 0, 1, 0, 0, 0, 0],
....:  [0, 0, 0, 1, 0, 0, 0, 0, 0],
....:  [0, 0, 1, 0, 0, 0, 0, 0, 0]])
Traceback (most recent call last):
...
TypeError: Polymake terminated unexpectedly while reading in a large line:
reference to an undeclared variable @SAGE9 at /home/king/.sage/temp/king-ThinkPad-T430/4038/interface/tmp4212 line 1.
```



---

archive/issue_comments_339223.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe interesting thing is that in the file there is no reference to a variable. Instead, a variable (with a different name) is defined in the file.",
    "created_at": "2017-03-23T11:27:07Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339223",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:4'></a>
The interesting thing is that in the file there is no reference to a variable. Instead, a variable (with a different name) is defined in the file.



---

archive/issue_comments_339224.json:
```json
{
    "body": "<a id='comment:5'></a>\nIs that a bug in polymake, perhaps? The content of the file is\n\n```\n@SAGE47=([[12, -2, -3, -5, -8, -13, -21, -34, -55], [0, 1, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 1], [0, 0, 0, 0, 0, 0, 0, 1, 0], [0, 0, 0, 0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 0, 1, 0, 0, 0], [0, 0, 0, 0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0, 0, 0, 0]]);\n```\nWhen I feed this directly into polymake, all is fine. But when I read it as a script, I get\n\n```\npolytope > script \"/home/king/.sage/temp/king-ThinkPad-T430/4038/interface/tmp4212\";\n\npolymake:  ERROR: reference to an undeclared variable @SAGE47 at /home/king/.sage/temp/king-ThinkPad-T430/4038/interface/tmp4212 line 1.\n```\n\nQuestion to polymake experts: Is polymake interpreting a script differently from a user interaction?",
    "created_at": "2017-03-23T11:30:41Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339224",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:5'></a>
Is that a bug in polymake, perhaps? The content of the file is

```
@SAGE47=([[12, -2, -3, -5, -8, -13, -21, -34, -55], [0, 1, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 1], [0, 0, 0, 0, 0, 0, 0, 1, 0], [0, 0, 0, 0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 0, 1, 0, 0, 0], [0, 0, 0, 0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0, 0, 0, 0]]);
```
When I feed this directly into polymake, all is fine. But when I read it as a script, I get

```
polytope > script "/home/king/.sage/temp/king-ThinkPad-T430/4038/interface/tmp4212";

polymake:  ERROR: reference to an undeclared variable @SAGE47 at /home/king/.sage/temp/king-ThinkPad-T430/4038/interface/tmp4212 line 1.
```

Question to polymake experts: Is polymake interpreting a script differently from a user interaction?



---

archive/issue_comments_339225.json:
```json
{
    "body": "<a id='comment:6'></a>\nI posted the question in the polymake forum",
    "created_at": "2017-03-23T11:50:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339225",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:6'></a>
I posted the question in the polymake forum



---

archive/issue_comments_339226.json:
```json
{
    "body": "<a id='comment:7'></a>\nApparently it is safer to use `declare `@`SAGE47=...;`. I wonder why so far it has worked without \"declare\", but I was told that when reading a script, variables need to be declared explicitly, either by `my` or by `declare`, depending on whether they are only declared in the script or shall still be available later.\n\nThat said, after changing the `set()` method, I get a different error:\n\n```\npolymake.new_object(\"Polytope\", FACETS=[[12, -2, -3, -5, -8, -13, -21, -34, -55],\n....:  [0, 1, 0, 0, 0, 0, 0, 0, 0],\n....:  [0, 0, 0, 0, 0, 0, 0, 0, 1],\n....:  [0, 0, 0, 0, 0, 0, 0, 1, 0],\n....:  [0, 0, 0, 0, 0, 0, 1, 0, 0],\n....:  [0, 0, 0, 0, 0, 1, 0, 0, 0],\n....:  [0, 0, 0, 0, 1, 0, 0, 0, 0],\n....:  [0, 0, 0, 1, 0, 0, 0, 0, 0],\n....:  [0, 0, 1, 0, 0, 0, 0, 0, 0]])\nTraceback (most recent call last):\n...\nTypeError: multiple declaration of a variable at input line 1.\n```\nAlso, the following is not what I was hoping for:\n\n```\nsage: polymake([[12, -2, -3, -5, -8, -13, -21, -34, -55],\n....:  [0, 1, 0, 0, 0, 0, 0, 0, 0],\n....:  [0, 0, 0, 0, 0, 0, 0, 0, 1],\n....:  [0, 0, 0, 0, 0, 0, 0, 1, 0],\n....:  [0, 0, 0, 0, 0, 0, 1, 0, 0],\n....:  [0, 0, 0, 0, 0, 1, 0, 0, 0],\n....:  [0, 0, 0, 0, 1, 0, 0, 0, 0],\n....:  [0, 0, 0, 1, 0, 0, 0, 0, 0],\n....:  [0, 0, 1, 0, 0, 0, 0, 0, 0]])\n0\n```",
    "created_at": "2017-03-23T12:34:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339226",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:7'></a>
Apparently it is safer to use `declare `@`SAGE47=...;`. I wonder why so far it has worked without "declare", but I was told that when reading a script, variables need to be declared explicitly, either by `my` or by `declare`, depending on whether they are only declared in the script or shall still be available later.

That said, after changing the `set()` method, I get a different error:

```
polymake.new_object("Polytope", FACETS=[[12, -2, -3, -5, -8, -13, -21, -34, -55],
....:  [0, 1, 0, 0, 0, 0, 0, 0, 0],
....:  [0, 0, 0, 0, 0, 0, 0, 0, 1],
....:  [0, 0, 0, 0, 0, 0, 0, 1, 0],
....:  [0, 0, 0, 0, 0, 0, 1, 0, 0],
....:  [0, 0, 0, 0, 0, 1, 0, 0, 0],
....:  [0, 0, 0, 0, 1, 0, 0, 0, 0],
....:  [0, 0, 0, 1, 0, 0, 0, 0, 0],
....:  [0, 0, 1, 0, 0, 0, 0, 0, 0]])
Traceback (most recent call last):
...
TypeError: multiple declaration of a variable at input line 1.
```
Also, the following is not what I was hoping for:

```
sage: polymake([[12, -2, -3, -5, -8, -13, -21, -34, -55],
....:  [0, 1, 0, 0, 0, 0, 0, 0, 0],
....:  [0, 0, 0, 0, 0, 0, 0, 0, 1],
....:  [0, 0, 0, 0, 0, 0, 0, 1, 0],
....:  [0, 0, 0, 0, 0, 0, 1, 0, 0],
....:  [0, 0, 0, 0, 0, 1, 0, 0, 0],
....:  [0, 0, 0, 0, 1, 0, 0, 0, 0],
....:  [0, 0, 0, 1, 0, 0, 0, 0, 0],
....:  [0, 0, 1, 0, 0, 0, 0, 0, 0]])
0
```



---

archive/issue_comments_339227.json:
```json
{
    "body": "<a id='comment:8'></a>\nProbably the reason for the new error is that on the command line, a variable can be declared only once. But certainly Perl/polymake allows to explicitly un-declare a variable. So, as soon I have found out how to un-declare, I can fix that.",
    "created_at": "2017-03-23T12:41:51Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339227",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:8'></a>
Probably the reason for the new error is that on the command line, a variable can be declared only once. But certainly Perl/polymake allows to explicitly un-declare a variable. So, as soon I have found out how to un-declare, I can fix that.



---

archive/issue_comments_339228.json:
```json
{
    "body": "<a id='comment:9'></a>\nIt REALLY SUCKS that trac keeps logging me out automatically after short time!\n\nWhat I wanted to say: At [polymake forum](https://forum.polymake.org/viewtopic.php?p=1963#p1963) I was told that scripts somehow are cached - which basically means that the use of scripts in order to send commands to polymake is leaking memory.\n\nSo, perhaps better disallow using files. When I do it, the definition of the polytope initially seems to work:\n\n```\nsage: P = polymake.new_object(\"Polytope\", FACETS=[[12, -2, -3, -5, -8, -13, -21, -34, -55],\n....:  [0, 1, 0, 0, 0, 0, 0, 0, 0],\n....:  [0, 0, 0, 0, 0, 0, 0, 0, 1],\n....:  [0, 0, 0, 0, 0, 0, 0, 1, 0],\n....:  [0, 0, 0, 0, 0, 0, 1, 0, 0],\n....:  [0, 0, 0, 0, 0, 1, 0, 0, 0],\n....:  [0, 0, 0, 0, 1, 0, 0, 0, 0],\n....:  [0, 0, 0, 1, 0, 0, 0, 0, 0],\n....:  [0, 0, 1, 0, 0, 0, 0, 0, 0]])\nsage: P\nPolytope<Rational>[SAGE185]\nsage: P.N_FACETS\n9\n```\nbut alas, something goes foobar:\n\n```\nsage: P.VERTICES\nTraceback (most recent call last):\n...\nAttributeError:\n```\nwhereas in a polymake session I get\n\n```\npolytope > $P = new Polytope(FACETS=>[[12, -2, -3, -5, -8, -13, -21, -34, -55], [0, 1, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 1], [0, 0, 0, 0, 0, 0, 0, 1, 0], [0, 0, 0, 0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 0, 1, 0, 0, 0], [0, 0, 0, 0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0, 0, 0, 0]]);\n\npolytope > print $P->VERTICES;\npolymake: used package ppl\n  The Parma Polyhedra Library (PPL): A C++ library for convex polyhedra\n  and other numerical abstractions.\n  http://www.cs.unipr.it/ppl/\n\n1 6 0 0 0 0 0 0 0\n1 0 4 0 0 0 0 0 0\n1 0 0 0 0 0 0 0 0\n1 0 0 12/5 0 0 0 0 0\n1 0 0 0 0 0 0 0 12/55\n1 0 0 0 0 0 0 6/17 0\n1 0 0 0 0 0 4/7 0 0\n1 0 0 0 0 12/13 0 0 0\n1 0 0 0 3/2 0 0 0 0\n```",
    "created_at": "2017-03-23T15:46:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339228",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:9'></a>
It REALLY SUCKS that trac keeps logging me out automatically after short time!

What I wanted to say: At [polymake forum](https://forum.polymake.org/viewtopic.php?p=1963#p1963) I was told that scripts somehow are cached - which basically means that the use of scripts in order to send commands to polymake is leaking memory.

So, perhaps better disallow using files. When I do it, the definition of the polytope initially seems to work:

```
sage: P = polymake.new_object("Polytope", FACETS=[[12, -2, -3, -5, -8, -13, -21, -34, -55],
....:  [0, 1, 0, 0, 0, 0, 0, 0, 0],
....:  [0, 0, 0, 0, 0, 0, 0, 0, 1],
....:  [0, 0, 0, 0, 0, 0, 0, 1, 0],
....:  [0, 0, 0, 0, 0, 0, 1, 0, 0],
....:  [0, 0, 0, 0, 0, 1, 0, 0, 0],
....:  [0, 0, 0, 0, 1, 0, 0, 0, 0],
....:  [0, 0, 0, 1, 0, 0, 0, 0, 0],
....:  [0, 0, 1, 0, 0, 0, 0, 0, 0]])
sage: P
Polytope<Rational>[SAGE185]
sage: P.N_FACETS
9
```
but alas, something goes foobar:

```
sage: P.VERTICES
Traceback (most recent call last):
...
AttributeError:
```
whereas in a polymake session I get

```
polytope > $P = new Polytope(FACETS=>[[12, -2, -3, -5, -8, -13, -21, -34, -55], [0, 1, 0, 0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0, 0, 0, 1], [0, 0, 0, 0, 0, 0, 0, 1, 0], [0, 0, 0, 0, 0, 0, 1, 0, 0], [0, 0, 0, 0, 0, 1, 0, 0, 0], [0, 0, 0, 0, 1, 0, 0, 0, 0], [0, 0, 0, 1, 0, 0, 0, 0, 0], [0, 0, 1, 0, 0, 0, 0, 0, 0]]);

polytope > print $P->VERTICES;
polymake: used package ppl
  The Parma Polyhedra Library (PPL): A C++ library for convex polyhedra
  and other numerical abstractions.
  http://www.cs.unipr.it/ppl/

1 6 0 0 0 0 0 0 0
1 0 4 0 0 0 0 0 0
1 0 0 0 0 0 0 0 0
1 0 0 12/5 0 0 0 0 0
1 0 0 0 0 0 0 0 12/55
1 0 0 0 0 0 0 6/17 0
1 0 0 0 0 0 4/7 0 0
1 0 0 0 0 12/13 0 0 0
1 0 0 0 3/2 0 0 0 0
```



---

archive/issue_comments_339229.json:
```json
{
    "body": "<a id='comment:10'></a>\nThe interface seems to be out of sync in the example above:\n\n```\nsage: P = polymake.new_object(\"Polytope\", FACETS=[[12, -2, -3, -5, -8, -13, -21, -34, -55],\n....:  [0, 1, 0, 0, 0, 0, 0, 0, 0],\n....:  [0, 0, 0, 0, 0, 0, 0, 0, 1],\n....:  [0, 0, 0, 0, 0, 0, 0, 1, 0],\n....:  [0, 0, 0, 0, 0, 0, 1, 0, 0],\n....:  [0, 0, 0, 0, 0, 1, 0, 0, 0],\n....:  [0, 0, 0, 0, 1, 0, 0, 0, 0],\n....:  [0, 0, 0, 1, 0, 0, 0, 0, 0],\n....:  [0, 0, 1, 0, 0, 0, 0, 0, 0]])\nsage: P._name\n'$SAGE91[0]'\nsage: polymake.eval(\"print $SAGE91[0]->VERTICES;\")\n''\nsage: polymake.eval(\"print $SAGE91[0]->VERTICES;\")\n'1 6 0 0 0 0 0 0 0\\n1 0 4 0 0 0 0 0 0\\n1 0 0 0 0 0 0 0 0\\n1 0 0 12/5 0 0 0 0 0\\n1 0 0 0 0 0 0 0 12/55\\n1 0 0 0 0 0 0 6/17 0\\n1 0 0 0 0 0 4/7 0 0\\n1 0 0 0 0 12/13 0 0 0\\n1 0 0 0 3/2 0 0 0 0\\n'\nsage: P.VERTICES\n\n1 6 0 0 0 0 0 0 0\n1 0 4 0 0 0 0 0 0\n1 0 0 0 0 0 0 0 0\n1 0 0 12/5 0 0 0 0 0\n1 0 0 0 0 0 0 0 12/55\n1 0 0 0 0 0 0 6/17 0\n1 0 0 0 0 0 4/7 0 0\n1 0 0 0 0 12/13 0 0 0\n1 0 0 0 3/2 0 0 0 0\n```\nOr perhaps there is a different reason:\n\n```\nsage: polymake.eval(\"print $SAGE91[0]->F_VECTOR;\")\n'9 36 84 126 126 84 36 9'\nsage: P.F_VECTOR\nTraceback (most recent call last):\n...\nAttributeError: \n```\n\nSo, sometimes the attribute error is stable, sometimes it vanishes.",
    "created_at": "2017-03-23T15:52:06Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339229",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:10'></a>
The interface seems to be out of sync in the example above:

```
sage: P = polymake.new_object("Polytope", FACETS=[[12, -2, -3, -5, -8, -13, -21, -34, -55],
....:  [0, 1, 0, 0, 0, 0, 0, 0, 0],
....:  [0, 0, 0, 0, 0, 0, 0, 0, 1],
....:  [0, 0, 0, 0, 0, 0, 0, 1, 0],
....:  [0, 0, 0, 0, 0, 0, 1, 0, 0],
....:  [0, 0, 0, 0, 0, 1, 0, 0, 0],
....:  [0, 0, 0, 0, 1, 0, 0, 0, 0],
....:  [0, 0, 0, 1, 0, 0, 0, 0, 0],
....:  [0, 0, 1, 0, 0, 0, 0, 0, 0]])
sage: P._name
'$SAGE91[0]'
sage: polymake.eval("print $SAGE91[0]->VERTICES;")
''
sage: polymake.eval("print $SAGE91[0]->VERTICES;")
'1 6 0 0 0 0 0 0 0\n1 0 4 0 0 0 0 0 0\n1 0 0 0 0 0 0 0 0\n1 0 0 12/5 0 0 0 0 0\n1 0 0 0 0 0 0 0 12/55\n1 0 0 0 0 0 0 6/17 0\n1 0 0 0 0 0 4/7 0 0\n1 0 0 0 0 12/13 0 0 0\n1 0 0 0 3/2 0 0 0 0\n'
sage: P.VERTICES

1 6 0 0 0 0 0 0 0
1 0 4 0 0 0 0 0 0
1 0 0 0 0 0 0 0 0
1 0 0 12/5 0 0 0 0 0
1 0 0 0 0 0 0 0 12/55
1 0 0 0 0 0 0 6/17 0
1 0 0 0 0 0 4/7 0 0
1 0 0 0 0 12/13 0 0 0
1 0 0 0 3/2 0 0 0 0
```
Or perhaps there is a different reason:

```
sage: polymake.eval("print $SAGE91[0]->F_VECTOR;")
'9 36 84 126 126 84 36 9'
sage: P.F_VECTOR
Traceback (most recent call last):
...
AttributeError: 
```

So, sometimes the attribute error is stable, sometimes it vanishes.



---

archive/issue_comments_339230.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [SimonKing](#comment%3A9):\n> It REALLY SUCKS that trac keeps logging me out automatically after short time!\n\n\nMaybe because your IP address changes automatically?",
    "created_at": "2017-03-23T15:55:09Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339230",
    "user": "https://github.com/jplab"
}
```

<a id='comment:11'></a>
Replying to [SimonKing](#comment%3A9):
> It REALLY SUCKS that trac keeps logging me out automatically after short time!


Maybe because your IP address changes automatically?



---

archive/issue_comments_339231.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [jipilab](#comment%3A11):\n> Replying to [SimonKing](#comment%3A9):\n> > It REALLY SUCKS that trac keeps logging me out automatically after short time!\n\n> \n> Maybe because your IP address changes automatically?\n\n\nYou mean my IP address could change while being connected to eduroam, or also while being connected to ethernet?",
    "created_at": "2017-03-23T16:37:09Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339231",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:12'></a>
Replying to [jipilab](#comment%3A11):
> Replying to [SimonKing](#comment%3A9):
> > It REALLY SUCKS that trac keeps logging me out automatically after short time!

> 
> Maybe because your IP address changes automatically?


You mean my IP address could change while being connected to eduroam, or also while being connected to ethernet?



---

archive/issue_comments_339232.json:
```json
{
    "body": "**Branch:** [u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface)",
    "created_at": "2017-03-23T16:48:22Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339232",
    "user": "https://github.com/simon-king-jena"
}
```

**Branch:** [u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface)



---

archive/issue_comments_339233.json:
```json
{
    "body": "<a id='comment:14'></a>\nBy the way, would it make it easier for you to stay synced if there was no terminal echo? \nThen consider adding `stty -echo; ` just before the \"env\".  We did this in #20173 to work around a problem in the Mathematica pexpect interface.\n\n---\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f90647d6f1b054043408425e8f83c081223b134b\">f90647d</a></td><td><code>Replace some tests by more realistic use cases of Polymake, and mark some others as 'random'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bcbabe52d5adb5505aa1ae424b7b1d2dd14447e7\">bcbabe5</a></td><td><code>Change Input to INPUT</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1238261eea6c246ff9a52735eba38d9f47bc6b42\">1238261</a></td><td><code>Fix a doc link. Fix dealing with timeouts. Demonstrate how to set timeouts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94460aece2cd345c97da763d1b091a166580a756\">94460ae</a></td><td><code>Add further tests, fix doc formatting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/643d6b46110c1ff3ef825ead61be0709360ee694\">643d6b4</a></td><td><code>Make it clearer that 'set()' is an internal function. Make reaction on interrupt more stable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8157a44cc528bccd16056a0b9ec6f5401cdd1ad\">a8157a4</a></td><td><code>Mark three tests as optional and create a proper WARNING block.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5\">52226e2</a></td><td><code>Do not _check_valid in `_repr_`, since it is done in __repr__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/726d3fdb52ae690e1afbce37f092d2201335cef4\">726d3fd</a></td><td><code>Merge branch 't/22501/make_it_easier_to_customize_pexpect_interfaces_new' into t/22452/create_a_polymake_pexpect_interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/185430f80346564983f3aeee6a7ce5643c80d4d4\">185430f</a></td><td><code>Use print function, not print statement, in doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c63f8da05b2caba5cdf7ff17c632146fc64ee18\">2c63f8d</a></td><td><code>Do not use file to send commands to polymake</code></td></tr></table>\n",
    "created_at": "2017-03-23T16:48:40Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339233",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
By the way, would it make it easier for you to stay synced if there was no terminal echo? 
Then consider adding `stty -echo; ` just before the "env".  We did this in #20173 to work around a problem in the Mathematica pexpect interface.

---
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f90647d6f1b054043408425e8f83c081223b134b">f90647d</a></td><td><code>Replace some tests by more realistic use cases of Polymake, and mark some others as 'random'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bcbabe52d5adb5505aa1ae424b7b1d2dd14447e7">bcbabe5</a></td><td><code>Change Input to INPUT</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1238261eea6c246ff9a52735eba38d9f47bc6b42">1238261</a></td><td><code>Fix a doc link. Fix dealing with timeouts. Demonstrate how to set timeouts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94460aece2cd345c97da763d1b091a166580a756">94460ae</a></td><td><code>Add further tests, fix doc formatting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/643d6b46110c1ff3ef825ead61be0709360ee694">643d6b4</a></td><td><code>Make it clearer that 'set()' is an internal function. Make reaction on interrupt more stable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8157a44cc528bccd16056a0b9ec6f5401cdd1ad">a8157a4</a></td><td><code>Mark three tests as optional and create a proper WARNING block.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52226e2908447b8d26a2578b1f8fb6751f34c5a5">52226e2</a></td><td><code>Do not _check_valid in `_repr_`, since it is done in __repr__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/726d3fdb52ae690e1afbce37f092d2201335cef4">726d3fd</a></td><td><code>Merge branch 't/22501/make_it_easier_to_customize_pexpect_interfaces_new' into t/22452/create_a_polymake_pexpect_interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/185430f80346564983f3aeee6a7ce5643c80d4d4">185430f</a></td><td><code>Use print function, not print statement, in doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c63f8da05b2caba5cdf7ff17c632146fc64ee18">2c63f8d</a></td><td><code>Do not use file to send commands to polymake</code></td></tr></table>




---

archive/issue_comments_339234.json:
```json
{
    "body": "**Commit:** [2c63f8da05b2caba5cdf7ff17c632146fc64ee18](https://github.com/sagemath/sagetrac-mirror/commit/2c63f8da05b2caba5cdf7ff17c632146fc64ee18)",
    "created_at": "2017-03-23T16:48:40Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339234",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [2c63f8da05b2caba5cdf7ff17c632146fc64ee18](https://github.com/sagemath/sagetrac-mirror/commit/2c63f8da05b2caba5cdf7ff17c632146fc64ee18)



---

archive/issue_comments_339235.json:
```json
{
    "body": "**Changing branch** from \"[u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface)\" to \"\".",
    "created_at": "2017-03-23T16:48:54Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339235",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing branch** from "[u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface)" to "".



---

archive/issue_comments_339236.json:
```json
{
    "body": "**Changing commit** from \"[2c63f8da05b2caba5cdf7ff17c632146fc64ee18](https://github.com/sagemath/sagetrac-mirror/commit/2c63f8da05b2caba5cdf7ff17c632146fc64ee18)\" to \"\".",
    "created_at": "2017-03-23T16:48:54Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339236",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing commit** from "[2c63f8da05b2caba5cdf7ff17c632146fc64ee18](https://github.com/sagemath/sagetrac-mirror/commit/2c63f8da05b2caba5cdf7ff17c632146fc64ee18)" to "".



---

archive/issue_comments_339237.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [SimonKing](#comment%3A10):\n> The interface seems to be out of sync in the example above:\n\n\nBut it does work if I simply disallow the use of files and do not change the declaration of variables. So, I provided a quick fix plus doctest.",
    "created_at": "2017-03-23T16:48:54Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339237",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:15'></a>
Replying to [SimonKing](#comment%3A10):
> The interface seems to be out of sync in the example above:


But it does work if I simply disallow the use of files and do not change the declaration of variables. So, I provided a quick fix plus doctest.



---

archive/issue_comments_339238.json:
```json
{
    "body": "**Author:** Simon King",
    "created_at": "2017-03-23T16:50:04Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339238",
    "user": "https://github.com/simon-king-jena"
}
```

**Author:** Simon King



---

archive/issue_comments_339239.json:
```json
{
    "body": "**Dependencies:** #22452",
    "created_at": "2017-03-23T16:50:04Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339239",
    "user": "https://github.com/simon-king-jena"
}
```

**Dependencies:** #22452



---

archive/issue_comments_339240.json:
```json
{
    "body": "<a id='comment:17'></a>\n> You mean my IP address could change while being connected to eduroam, or also while being connected to ethernet?\n\nYes, actually, the same just happened to me now to come and write this comment and I'm using eduroam (without a lan connection at the same time) ...and this never happened to me in Olot for example. \n\nIt is explains anything at all...",
    "created_at": "2017-03-23T16:51:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339240",
    "user": "https://github.com/jplab"
}
```

<a id='comment:17'></a>
> You mean my IP address could change while being connected to eduroam, or also while being connected to ethernet?

Yes, actually, the same just happened to me now to come and write this comment and I'm using eduroam (without a lan connection at the same time) ...and this never happened to me in Olot for example. 

It is explains anything at all...



---

archive/issue_comments_339241.json:
```json
{
    "body": "**Changing author** from \"Simon King\" to \"\".",
    "created_at": "2017-03-23T16:51:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339241",
    "user": "https://github.com/jplab"
}
```

**Changing author** from "Simon King" to "".



---

archive/issue_comments_339242.json:
```json
{
    "body": "**Changing dependencies** from \"#22452\" to \"\".",
    "created_at": "2017-03-23T16:51:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339242",
    "user": "https://github.com/jplab"
}
```

**Changing dependencies** from "#22452" to "".



---

archive/issue_comments_339243.json:
```json
{
    "body": "**Branch:** [u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface)",
    "created_at": "2017-03-23T16:51:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339243",
    "user": "https://github.com/jplab"
}
```

**Branch:** [u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface)



---

archive/issue_comments_339244.json:
```json
{
    "body": "**Commit:** [2c63f8da05b2caba5cdf7ff17c632146fc64ee18](https://github.com/sagemath/sagetrac-mirror/commit/2c63f8da05b2caba5cdf7ff17c632146fc64ee18)",
    "created_at": "2017-03-23T16:51:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339244",
    "user": "https://github.com/jplab"
}
```

**Commit:** [2c63f8da05b2caba5cdf7ff17c632146fc64ee18](https://github.com/sagemath/sagetrac-mirror/commit/2c63f8da05b2caba5cdf7ff17c632146fc64ee18)



---

archive/issue_comments_339245.json:
```json
{
    "body": "**Author:** Simon King",
    "created_at": "2017-03-23T16:52:21Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339245",
    "user": "https://github.com/jplab"
}
```

**Author:** Simon King



---

archive/issue_comments_339246.json:
```json
{
    "body": "**Dependencies:** #22452",
    "created_at": "2017-03-23T16:52:21Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339246",
    "user": "https://github.com/jplab"
}
```

**Dependencies:** #22452



---

archive/issue_comments_339247.json:
```json
{
    "body": "**Changing dependencies** from \"#22452\" to \"\".",
    "created_at": "2017-03-23T16:52:36Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339247",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing dependencies** from "#22452" to "".



---

archive/issue_comments_339248.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [jipilab](#comment%3A17):\n> > You mean my IP address could change while being connected to eduroam, or also while being connected to ethernet?\n\n> Yes, actually, the same just happened to me now to come and write this comment and I'm using eduroam (without a lan connection at the same time) ...and this never happened to me in Olot for example. \n> \n> It is explains anything at all...\n\n\nIt also sucks that some changes that I just did have automatically been deleted by the simple fact that you posted something.",
    "created_at": "2017-03-23T16:52:36Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339248",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:19'></a>
Replying to [jipilab](#comment%3A17):
> > You mean my IP address could change while being connected to eduroam, or also while being connected to ethernet?

> Yes, actually, the same just happened to me now to come and write this comment and I'm using eduroam (without a lan connection at the same time) ...and this never happened to me in Olot for example. 
> 
> It is explains anything at all...


It also sucks that some changes that I just did have automatically been deleted by the simple fact that you posted something.



---

archive/issue_comments_339249.json:
```json
{
    "body": "**Changing author** from \"Simon King\" to \"\".",
    "created_at": "2017-03-23T16:52:36Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339249",
    "user": "https://github.com/simon-king-jena"
}
```

**Changing author** from "Simon King" to "".



---

archive/issue_comments_339250.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [mkoeppe](#comment%3A14):\n> By the way, would it make it easier for you to stay synced if there was no terminal echo? \n> Then consider adding `stty -echo; ` just before the \"env\".  We did this in #20173 to work around a problem in the Mathematica pexpect interface.\n\n\nI will try. At least it would slightly reduce traffic in the interface.",
    "created_at": "2017-03-23T16:53:36Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339250",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:20'></a>
Replying to [mkoeppe](#comment%3A14):
> By the way, would it make it easier for you to stay synced if there was no terminal echo? 
> Then consider adding `stty -echo; ` just before the "env".  We did this in #20173 to work around a problem in the Mathematica pexpect interface.


I will try. At least it would slightly reduce traffic in the interface.



---

archive/issue_comments_339251.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [SimonKing](#comment%3A19):\n> Replying to [jipilab](#comment%3A17):\n> > > You mean my IP address could change while being connected to eduroam, or also while being connected to ethernet?\n\n> > Yes, actually, the same just happened to me now to come and write this comment and I'm using eduroam (without a lan connection at the same time) ...and this never happened to me in Olot for example. \n> > \n> > It is explains anything at all...\n\n> \n> It also sucks that some changes that I just did have automatically been deleted by the simple fact that you posted something.\n\n\nYes, I'm sorry for that... Trac does suck for that as well(!)",
    "created_at": "2017-03-23T16:54:03Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339251",
    "user": "https://github.com/jplab"
}
```

<a id='comment:21'></a>
Replying to [SimonKing](#comment%3A19):
> Replying to [jipilab](#comment%3A17):
> > > You mean my IP address could change while being connected to eduroam, or also while being connected to ethernet?

> > Yes, actually, the same just happened to me now to come and write this comment and I'm using eduroam (without a lan connection at the same time) ...and this never happened to me in Olot for example. 
> > 
> > It is explains anything at all...

> 
> It also sucks that some changes that I just did have automatically been deleted by the simple fact that you posted something.


Yes, I'm sorry for that... Trac does suck for that as well(!)



---

archive/issue_comments_339252.json:
```json
{
    "body": "<a id='comment:22'></a>\nOne needs to be careful to click \"revert\" when there's a red conflict marker.",
    "created_at": "2017-03-23T16:54:21Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339252",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>
One needs to be careful to click "revert" when there's a red conflict marker.



---

archive/issue_comments_339253.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [jipilab](#comment%3A17):\n> > You mean my IP address could change while being connected to eduroam, or also while being connected to ethernet?\n\n> Yes, actually, the same just happened to me now to come and write this comment and I'm using eduroam (without a lan connection at the same time) ...and this never happened to me in Olot for example. \n\nIIRC, it happened in Olot to me all the time.\n\nI tried to change things so that there is no terminal echo, but then I immediately get an error as soon as I do anything with polymake (and yes, I did set `terminal_echo=False` in the initialisation of the pexpect interface).",
    "created_at": "2017-03-23T17:03:31Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339253",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:23'></a>
Replying to [jipilab](#comment%3A17):
> > You mean my IP address could change while being connected to eduroam, or also while being connected to ethernet?

> Yes, actually, the same just happened to me now to come and write this comment and I'm using eduroam (without a lan connection at the same time) ...and this never happened to me in Olot for example. 

IIRC, it happened in Olot to me all the time.

I tried to change things so that there is no terminal echo, but then I immediately get an error as soon as I do anything with polymake (and yes, I did set `terminal_echo=False` in the initialisation of the pexpect interface).



---

archive/issue_comments_339254.json:
```json
{
    "body": "<a id='comment:24'></a>\nThe way that some interfaces are written seems to assume that there is echo, and important lines are discarded as echo.\nI don't remember the details",
    "created_at": "2017-03-23T17:09:22Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339254",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
The way that some interfaces are written seems to assume that there is echo, and important lines are discarded as echo.
I don't remember the details



---

archive/issue_comments_339255.json:
```json
{
    "body": "<a id='comment:25'></a>\nThanks for the patch, this is progress.",
    "created_at": "2017-03-23T20:22:35Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339255",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
Thanks for the patch, this is progress.



---

archive/issue_comments_339256.json:
```json
{
    "body": "**Changing branch** from \"[u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface)\" to \"[u/mkoeppe/polyhedron_methods_using_the_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/polyhedron_methods_using_the_polymake_pexpect_interface)\".",
    "created_at": "2017-03-23T20:37:52Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339256",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/SimonKing/polyhedron_methods_using_the_polymake_pexpect_interface)" to "[u/mkoeppe/polyhedron_methods_using_the_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/polyhedron_methods_using_the_polymake_pexpect_interface)".



---

archive/issue_comments_339257.json:
```json
{
    "body": "<a id='comment:27'></a>\nSo here's a `Polyhedron._polymake_` method. \n\nI guess the next step would be to provide a `_sage_` method for `PolymakeElement` which can convert Perl arrays(?) to Sage lists (ideally, based on calls to `__len__` and `__getitem__`, not parsing!). \n\nThe inherited method already knows how to convert numbers:\n\n```\nsage: P = polytopes.cube()\nsage: PP = P._polymake_()\nsage: PP.N_VERTICES\n8\nsage: _._sage_()\n8\nsage: type(_)\n<type 'sage.rings.integer.Integer'>\n```\nSimon, is this something that you're planning to work on?\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecd99ea780ef26e49c716cc977bb637cba640eda\">ecd99ea</a></td><td><code>Polyhedron_base._polymake_: New</code></td></tr></table>\n",
    "created_at": "2017-03-23T20:45:47Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339257",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
So here's a `Polyhedron._polymake_` method. 

I guess the next step would be to provide a `_sage_` method for `PolymakeElement` which can convert Perl arrays(?) to Sage lists (ideally, based on calls to `__len__` and `__getitem__`, not parsing!). 

The inherited method already knows how to convert numbers:

```
sage: P = polytopes.cube()
sage: PP = P._polymake_()
sage: PP.N_VERTICES
8
sage: _._sage_()
8
sage: type(_)
<type 'sage.rings.integer.Integer'>
```
Simon, is this something that you're planning to work on?

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecd99ea780ef26e49c716cc977bb637cba640eda">ecd99ea</a></td><td><code>Polyhedron_base._polymake_: New</code></td></tr></table>




---

archive/issue_comments_339258.json:
```json
{
    "body": "**Changing commit** from \"[2c63f8da05b2caba5cdf7ff17c632146fc64ee18](https://github.com/sagemath/sagetrac-mirror/commit/2c63f8da05b2caba5cdf7ff17c632146fc64ee18)\" to \"[ecd99ea780ef26e49c716cc977bb637cba640eda](https://github.com/sagemath/sagetrac-mirror/commit/ecd99ea780ef26e49c716cc977bb637cba640eda)\".",
    "created_at": "2017-03-23T20:45:47Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339258",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[2c63f8da05b2caba5cdf7ff17c632146fc64ee18](https://github.com/sagemath/sagetrac-mirror/commit/2c63f8da05b2caba5cdf7ff17c632146fc64ee18)" to "[ecd99ea780ef26e49c716cc977bb637cba640eda](https://github.com/sagemath/sagetrac-mirror/commit/ecd99ea780ef26e49c716cc977bb637cba640eda)".



---

archive/issue_comments_339259.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [mkoeppe](#comment%3A27):\n> Simon, is this something that you're planning to work on?\n\n\nCurrently Sage has a relatively low priority, as I have to set up a written exam on differential equations, to grade two 40 student's written exams, to edit a book chapter and to prepare three lectures courses that will start in 10 days.",
    "created_at": "2017-03-23T22:32:26Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339259",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:28'></a>
Replying to [mkoeppe](#comment%3A27):
> Simon, is this something that you're planning to work on?


Currently Sage has a relatively low priority, as I have to set up a written exam on differential equations, to grade two 40 student's written exams, to edit a book chapter and to prepare three lectures courses that will start in 10 days.



---

archive/issue_comments_339260.json:
```json
{
    "body": "<a id='comment:29'></a>\nIt may be reasonable/faster/more stable to not rely on automatic conversion of lists of lists of integers to Polymake, but to do the conversion explicitly, in the `_polymake_` method.",
    "created_at": "2017-03-23T22:37:06Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339260",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:29'></a>
It may be reasonable/faster/more stable to not rely on automatic conversion of lists of lists of integers to Polymake, but to do the conversion explicitly, in the `_polymake_` method.



---

archive/issue_comments_339261.json:
```json
{
    "body": "**Changing commit** from \"[ecd99ea780ef26e49c716cc977bb637cba640eda](https://github.com/sagemath/sagetrac-mirror/commit/ecd99ea780ef26e49c716cc977bb637cba640eda)\" to \"[7d1187c084d0179d0e09e29ecab7aa78ae536bbe](https://github.com/sagemath/sagetrac-mirror/commit/7d1187c084d0179d0e09e29ecab7aa78ae536bbe)\".",
    "created_at": "2017-03-24T03:11:17Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339261",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ecd99ea780ef26e49c716cc977bb637cba640eda](https://github.com/sagemath/sagetrac-mirror/commit/ecd99ea780ef26e49c716cc977bb637cba640eda)" to "[7d1187c084d0179d0e09e29ecab7aa78ae536bbe](https://github.com/sagemath/sagetrac-mirror/commit/7d1187c084d0179d0e09e29ecab7aa78ae536bbe)".



---

archive/issue_comments_339262.json:
```json
{
    "body": "<a id='comment:30'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d1187c084d0179d0e09e29ecab7aa78ae536bbe\">7d1187c</a></td><td><code>PolymakeElement.__getitem__: Support slices</code></td></tr></table>\n",
    "created_at": "2017-03-24T03:11:17Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339262",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d1187c084d0179d0e09e29ecab7aa78ae536bbe">7d1187c</a></td><td><code>PolymakeElement.__getitem__: Support slices</code></td></tr></table>




---

archive/issue_comments_339263.json:
```json
{
    "body": "<a id='comment:31'></a>\nI think the `_polymake_` method doesn't work how it is supposed to.\n\nHave a look at `sage.structure.sage_object`: There, all conversion methods `_foobar_` are defined, and are customised with a `_foobar_init_`.\n\nSo, I guess one should implement `_polymake_` for `SageObject`, and also a default version of `_polymake_init_` (which defaults to the string representation and thus works out of the box for numbers and strings), similar to the other conversion methods. And then, you can override `_polymake_init_` (but not `_polymake_`!) for `Polyhedron_base`, returning a string rather than a polymake element.",
    "created_at": "2017-03-24T14:16:44Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339263",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:31'></a>
I think the `_polymake_` method doesn't work how it is supposed to.

Have a look at `sage.structure.sage_object`: There, all conversion methods `_foobar_` are defined, and are customised with a `_foobar_init_`.

So, I guess one should implement `_polymake_` for `SageObject`, and also a default version of `_polymake_init_` (which defaults to the string representation and thus works out of the box for numbers and strings), similar to the other conversion methods. And then, you can override `_polymake_init_` (but not `_polymake_`!) for `Polyhedron_base`, returning a string rather than a polymake element.



---

archive/issue_comments_339264.json:
```json
{
    "body": "<a id='comment:32'></a>\nA question about workflow: My commits so far didn't concern polyhedron methods --- they are just fixes to the polymake interface (namely: \"communicate with polymake without files\"). I have further ideas (namely: \"do communicate with polymake with files, but this time declare the variables properly\"), and you as well (\"avoid terminal echo\"). Should we really do these fixes here, or open another ticket, which would be another dependency?",
    "created_at": "2017-03-24T14:22:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339264",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:32'></a>
A question about workflow: My commits so far didn't concern polyhedron methods --- they are just fixes to the polymake interface (namely: "communicate with polymake without files"). I have further ideas (namely: "do communicate with polymake with files, but this time declare the variables properly"), and you as well ("avoid terminal echo"). Should we really do these fixes here, or open another ticket, which would be another dependency?



---

archive/issue_comments_339265.json:
```json
{
    "body": "<a id='comment:33'></a>\nPS: The following should work, but doesn't, with the current approach.\n\n```\nsage: P = polytopes.cube()\nsage: polymake(P)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-2-d5e7b6594a93> in <module>()\n----> 1 polymake(P)\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __call__(self, x, name)\n    259             return cls(self, x, name=name)\n    260         try:\n--> 261             return self._coerce_from_special_method(x)\n    262         except TypeError:\n    263             raise\n\n/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.pyc in _coerce_from_special_method(self, x)\n    285             s = '_gp_'\n    286         try:\n--> 287             return (x.__getattribute__(s))(self)\n    288         except AttributeError:\n    289             return self(x._interface_init_())\n\nTypeError: __call__() takes exactly 0 positional arguments (1 given)\n```\nSo, better implement `_polymake_` analogously to `_singular_`, `_gap_`, ... for `SageObject`.\n\nEDIT: `_coerce_from_special_method_` results in a call to `_name_of_the_interface_()`.",
    "created_at": "2017-03-24T14:33:18Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339265",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:33'></a>
PS: The following should work, but doesn't, with the current approach.

```
sage: P = polytopes.cube()
sage: polymake(P)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-2-d5e7b6594a93> in <module>()
----> 1 polymake(P)

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.pyc in __call__(self, x, name)
    259             return cls(self, x, name=name)
    260         try:
--> 261             return self._coerce_from_special_method(x)
    262         except TypeError:
    263             raise

/home/king/Sage/git/sage/local/lib/python2.7/site-packages/sage/interfaces/interface.pyc in _coerce_from_special_method(self, x)
    285             s = '_gp_'
    286         try:
--> 287             return (x.__getattribute__(s))(self)
    288         except AttributeError:
    289             return self(x._interface_init_())

TypeError: __call__() takes exactly 0 positional arguments (1 given)
```
So, better implement `_polymake_` analogously to `_singular_`, `_gap_`, ... for `SageObject`.

EDIT: `_coerce_from_special_method_` results in a call to `_name_of_the_interface_()`.



---

archive/issue_comments_339266.json:
```json
{
    "body": "<a id='comment:34'></a>\nPPS: Is it really the case that we only want to define a polyhedron using FACETS and AFFINE_HULL? Why not via VERTICES?",
    "created_at": "2017-03-24T14:36:05Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339266",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:34'></a>
PPS: Is it really the case that we only want to define a polyhedron using FACETS and AFFINE_HULL? Why not via VERTICES?



---

archive/issue_comments_339267.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [SimonKing](#comment%3A34):\n> PPS: Is it really the case that we only want to define a polyhedron using FACETS and AFFINE_HULL? Why not via VERTICES?\n\n\nWe probably want to pass both the H- and V-description to polymake because both are computed already.\nHowever, for unbounded, nonpointed polyhedra, I think it's more complicated to get it right, because what a Sage `Polyhedron` calls \"vertices\" are not vertices. So plenty of tests are needed to get it right.",
    "created_at": "2017-03-24T15:30:00Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339267",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>
Replying to [SimonKing](#comment%3A34):
> PPS: Is it really the case that we only want to define a polyhedron using FACETS and AFFINE_HULL? Why not via VERTICES?


We probably want to pass both the H- and V-description to polymake because both are computed already.
However, for unbounded, nonpointed polyhedra, I think it's more complicated to get it right, because what a Sage `Polyhedron` calls "vertices" are not vertices. So plenty of tests are needed to get it right.



---

archive/issue_comments_339268.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [SimonKing](#comment%3A32):\n> A question about workflow: My commits so far didn't concern polyhedron methods --- they are just fixes to the polymake interface (namely: \"communicate with polymake without files\"). I have further ideas (namely: \"do communicate with polymake with files, but this time declare the variables properly\"), and you as well (\"avoid terminal echo\"). Should we really do these fixes here, or open another ticket, which would be another dependency?\n\n\nA separate ticket would be fine. In fact, since there is very little code on Polyhedron methods as of now, it's perhaps easiest to just rename this ticket and make a fresh ticket for the Polyhedron methods.",
    "created_at": "2017-03-24T15:31:44Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339268",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>
Replying to [SimonKing](#comment%3A32):
> A question about workflow: My commits so far didn't concern polyhedron methods --- they are just fixes to the polymake interface (namely: "communicate with polymake without files"). I have further ideas (namely: "do communicate with polymake with files, but this time declare the variables properly"), and you as well ("avoid terminal echo"). Should we really do these fixes here, or open another ticket, which would be another dependency?


A separate ticket would be fine. In fact, since there is very little code on Polyhedron methods as of now, it's perhaps easiest to just rename this ticket and make a fresh ticket for the Polyhedron methods.



---

archive/issue_comments_339269.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [SimonKing](#comment%3A31):\n> I think the `_polymake_` method doesn't work how it is supposed to.\n> \n> Have a look at `sage.structure.sage_object`: There, all conversion methods `_foobar_` are defined, and are customised with a `_foobar_init_`.\n> \n> So, I guess one should implement `_polymake_` for `SageObject`, and also a default version of `_polymake_init_` (which defaults to the string representation and thus works out of the box for numbers and strings), similar to the other conversion methods. And then, you can override `_polymake_init_` (but not `_polymake_`!) for `Polyhedron_base`, returning a string rather than a polymake element.\n\n\nThanks a lot! I'll look into it.\n\nIt seems to me that I do want a `Polyhedron` method that does what my `_polymake_` method did. What should I call it?",
    "created_at": "2017-03-24T15:32:55Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339269",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:37'></a>
Replying to [SimonKing](#comment%3A31):
> I think the `_polymake_` method doesn't work how it is supposed to.
> 
> Have a look at `sage.structure.sage_object`: There, all conversion methods `_foobar_` are defined, and are customised with a `_foobar_init_`.
> 
> So, I guess one should implement `_polymake_` for `SageObject`, and also a default version of `_polymake_init_` (which defaults to the string representation and thus works out of the box for numbers and strings), similar to the other conversion methods. And then, you can override `_polymake_init_` (but not `_polymake_`!) for `Polyhedron_base`, returning a string rather than a polymake element.


Thanks a lot! I'll look into it.

It seems to me that I do want a `Polyhedron` method that does what my `_polymake_` method did. What should I call it?



---

archive/issue_comments_339270.json:
```json
{
    "body": "<a id='comment:38'></a>\n> We probably want to pass both the H- and V-description to polymake because both are computed already.\n> However, for unbounded, nonpointed polyhedra, I think it's more complicated to get it right, because what a Sage `Polyhedron` calls \"vertices\" are not vertices. So plenty of tests are needed to get it right.\n\n\nI am not 100% sure, but I guess this only happens when the polyhedron has a lineality space (if it is not pointed but does not contain a line, then I guess vertices are still the correct vertices), for which sometimes the choice is not directly predictable (one should open the hood and checkout how it is done...)\n\nI just put examples here for later test cases.\n\nExamples:\n\n```\nsage: Q = Polyhedron(lines = [[-1, 1]], vertices = [[1, 1]])\nsage: Q.vertices()\n(A vertex at (2, 0),)\n\nsage: R = Polyhedron(rays = [[0, 1, 0], [1, 0, 0]], vertices = [[0, 1, 0], [1, 0\n....: , 0]], lines = [[0, 0, 1]])\nsage: R.vertices()\n(A vertex at (0, 1, 0), A vertex at (1, 0, 0))\n```",
    "created_at": "2017-03-24T15:56:18Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339270",
    "user": "https://github.com/jplab"
}
```

<a id='comment:38'></a>
> We probably want to pass both the H- and V-description to polymake because both are computed already.
> However, for unbounded, nonpointed polyhedra, I think it's more complicated to get it right, because what a Sage `Polyhedron` calls "vertices" are not vertices. So plenty of tests are needed to get it right.


I am not 100% sure, but I guess this only happens when the polyhedron has a lineality space (if it is not pointed but does not contain a line, then I guess vertices are still the correct vertices), for which sometimes the choice is not directly predictable (one should open the hood and checkout how it is done...)

I just put examples here for later test cases.

Examples:

```
sage: Q = Polyhedron(lines = [[-1, 1]], vertices = [[1, 1]])
sage: Q.vertices()
(A vertex at (2, 0),)

sage: R = Polyhedron(rays = [[0, 1, 0], [1, 0, 0]], vertices = [[0, 1, 0], [1, 0
....: , 0]], lines = [[0, 0, 1]])
sage: R.vertices()
(A vertex at (0, 1, 0), A vertex at (1, 0, 0))
```



---

archive/issue_comments_339271.json:
```json
{
    "body": "<a id='comment:39'></a>\nReplying to [mkoeppe](#comment%3A35):\n> Replying to [SimonKing](#comment%3A34):\n> > PPS: Is it really the case that we only want to define a polyhedron using FACETS and AFFINE_HULL? Why not via VERTICES?\n\n> \n> We probably want to pass both the H- and V-description to polymake because both are computed already.\n> However, for unbounded, nonpointed polyhedra, I think it's more complicated to get it right, because what a Sage `Polyhedron` calls \"vertices\" are not vertices. So plenty of tests are needed to get it right.\n\n\nBut certainly there are cases where a Sage polyhedron does know its vertices, and thus they could be provided to the polymake constructor. I am not saying that this should *always* be done.",
    "created_at": "2017-03-24T16:35:03Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339271",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:39'></a>
Replying to [mkoeppe](#comment%3A35):
> Replying to [SimonKing](#comment%3A34):
> > PPS: Is it really the case that we only want to define a polyhedron using FACETS and AFFINE_HULL? Why not via VERTICES?

> 
> We probably want to pass both the H- and V-description to polymake because both are computed already.
> However, for unbounded, nonpointed polyhedra, I think it's more complicated to get it right, because what a Sage `Polyhedron` calls "vertices" are not vertices. So plenty of tests are needed to get it right.


But certainly there are cases where a Sage polyhedron does know its vertices, and thus they could be provided to the polymake constructor. I am not saying that this should *always* be done.



---

archive/issue_comments_339272.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [mkoeppe](#comment%3A37):\n> It seems to me that I do want a `Polyhedron` method that does what my `_polymake_` method did. What should I call it?\n\n\nI don't understand that. Why do you want `P.Polyhedron()`, if `polymake(P)` works? Moreover, it isn't clear from the name that `P.Polyhedron()` returns anything that is related with polymake.",
    "created_at": "2017-03-24T16:37:10Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339272",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:40'></a>
Replying to [mkoeppe](#comment%3A37):
> It seems to me that I do want a `Polyhedron` method that does what my `_polymake_` method did. What should I call it?


I don't understand that. Why do you want `P.Polyhedron()`, if `polymake(P)` works? Moreover, it isn't clear from the name that `P.Polyhedron()` returns anything that is related with polymake.



---

archive/issue_comments_339273.json:
```json
{
    "body": "<a id='comment:41'></a>\nWhat I meant is a method of the `Polyhedron` classes.",
    "created_at": "2017-03-24T17:45:25Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339273",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>
What I meant is a method of the `Polyhedron` classes.



---

archive/issue_comments_339274.json:
```json
{
    "body": "<a id='comment:42'></a>\nReplying to [jipilab](#comment%3A38):\n> > We probably want to pass both the H- and V-description to polymake because both are computed already.\n> > However, for unbounded, nonpointed polyhedra, I think it's more complicated to get it right, because what a Sage `Polyhedron` calls \"vertices\" are not vertices. So plenty of tests are needed to get it right.\n\n> \n> I am not 100% sure, but I guess this only happens when the polyhedron has a lineality space \n\n\nYes, exactly. We may be used to different terminologies, but in my book, pointed = trivial lineality space = minimal faces are vertices.",
    "created_at": "2017-03-24T17:48:02Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339274",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:42'></a>
Replying to [jipilab](#comment%3A38):
> > We probably want to pass both the H- and V-description to polymake because both are computed already.
> > However, for unbounded, nonpointed polyhedra, I think it's more complicated to get it right, because what a Sage `Polyhedron` calls "vertices" are not vertices. So plenty of tests are needed to get it right.

> 
> I am not 100% sure, but I guess this only happens when the polyhedron has a lineality space 


Yes, exactly. We may be used to different terminologies, but in my book, pointed = trivial lineality space = minimal faces are vertices.



---

archive/issue_comments_339275.json:
```json
{
    "body": "<a id='comment:43'></a>\nReplying to [mkoeppe](#comment%3A41):\n> What I meant is a method of the `Polyhedron` classes.\n\n\nI still don't see why there should be such method, if `polymake(P)` works. The implementation via `_polymake_init_` would be for `Polyhedron_base`, I suppose.",
    "created_at": "2017-03-24T17:49:38Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339275",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:43'></a>
Replying to [mkoeppe](#comment%3A41):
> What I meant is a method of the `Polyhedron` classes.


I still don't see why there should be such method, if `polymake(P)` works. The implementation via `_polymake_init_` would be for `Polyhedron_base`, I suppose.



---

archive/issue_comments_339276.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [SimonKing](#comment%3A43):\n> I still don't see why there should be such method, if `polymake(P)` works. The implementation via `_polymake_init_` would be for `Polyhedron_base`, I suppose.\n\n\nOK, I'll try to get `polymake(P)` working. Thanks for the discussion!",
    "created_at": "2017-03-24T17:51:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339276",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>
Replying to [SimonKing](#comment%3A43):
> I still don't see why there should be such method, if `polymake(P)` works. The implementation via `_polymake_init_` would be for `Polyhedron_base`, I suppose.


OK, I'll try to get `polymake(P)` working. Thanks for the discussion!



---

archive/issue_comments_339277.json:
```json
{
    "body": "<a id='comment:45'></a>\n> Yes, exactly. We may be used to different terminologies, but in my book, pointed = trivial lineality space = minimal faces are vertices.\n\n\nOkay! Yes, sounds good! I guess we are now on the same page ... of the same book.",
    "created_at": "2017-03-24T18:01:41Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339277",
    "user": "https://github.com/jplab"
}
```

<a id='comment:45'></a>
> Yes, exactly. We may be used to different terminologies, but in my book, pointed = trivial lineality space = minimal faces are vertices.


Okay! Yes, sounds good! I guess we are now on the same page ... of the same book.



---

archive/issue_comments_339278.json:
```json
{
    "body": "<a id='comment:46'></a>\nAnother observation about the interface:\n\n```\nsage: polymake.show_preferences()\n1\n```\nThis should instead print something (like it does in polymake:)\n\n```\npolytope > show_preferences;\n\"default\" (#)\n\"tikz.lattice\" (#)\n\"*.convex_hull ppl, cdd, lrs, beneath_beyond\" (#)\n\"projection.integer_points\"\n\nPreferences marked with (#) are in effect by default, as specified in the rule files\n```",
    "created_at": "2017-03-26T03:12:52Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339278",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>
Another observation about the interface:

```
sage: polymake.show_preferences()
1
```
This should instead print something (like it does in polymake:)

```
polytope > show_preferences;
"default" (#)
"tikz.lattice" (#)
"*.convex_hull ppl, cdd, lrs, beneath_beyond" (#)
"projection.integer_points"

Preferences marked with (#) are in effect by default, as specified in the rule files
```



---

archive/issue_comments_339279.json:
```json
{
    "body": "**Changing commit** from \"[7d1187c084d0179d0e09e29ecab7aa78ae536bbe](https://github.com/sagemath/sagetrac-mirror/commit/7d1187c084d0179d0e09e29ecab7aa78ae536bbe)\" to \"[65988239e463e512f11d759eb8c01f8c71d812f7](https://github.com/sagemath/sagetrac-mirror/commit/65988239e463e512f11d759eb8c01f8c71d812f7)\".",
    "created_at": "2017-03-26T06:19:05Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339279",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7d1187c084d0179d0e09e29ecab7aa78ae536bbe](https://github.com/sagemath/sagetrac-mirror/commit/7d1187c084d0179d0e09e29ecab7aa78ae536bbe)" to "[65988239e463e512f11d759eb8c01f8c71d812f7](https://github.com/sagemath/sagetrac-mirror/commit/65988239e463e512f11d759eb8c01f8c71d812f7)".



---

archive/issue_comments_339280.json:
```json
{
    "body": "<a id='comment:47'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65151e76c6e589e94643d917d8d2bbb81ebff947\">65151e7</a></td><td><code>SageObject: Add `_polymake_`, `_polymake_init_` methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7588b6299efaf301062afdd3f7f5c26f09f0a439\">7588b62</a></td><td><code>Polyhedron_base: Provide `_polymake_init_` instead of @cached_method _polymake_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07270d402a77a187944f8b37f7764ca36d01d0af\">07270d4</a></td><td><code>Polyhedron_base._polymake_init_: Pass both representations to polymake, add tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5fadbcd12949881c85a5fdd03cb499c56b22caa0\">5fadbcd</a></td><td><code>Add `_polymake_init_` for some rings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d3cef22d65ac32abe7a5c52361260614a3eb3e1\">3d3cef2</a></td><td><code>Polymake: fix typo in docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65988239e463e512f11d759eb8c01f8c71d812f7\">6598823</a></td><td><code>Polyhedron_base._polymake_init_: Support polyhedra over quadratic extensions</code></td></tr></table>\n",
    "created_at": "2017-03-26T06:19:05Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339280",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65151e76c6e589e94643d917d8d2bbb81ebff947">65151e7</a></td><td><code>SageObject: Add `_polymake_`, `_polymake_init_` methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7588b6299efaf301062afdd3f7f5c26f09f0a439">7588b62</a></td><td><code>Polyhedron_base: Provide `_polymake_init_` instead of @cached_method _polymake_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07270d402a77a187944f8b37f7764ca36d01d0af">07270d4</a></td><td><code>Polyhedron_base._polymake_init_: Pass both representations to polymake, add tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5fadbcd12949881c85a5fdd03cb499c56b22caa0">5fadbcd</a></td><td><code>Add `_polymake_init_` for some rings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d3cef22d65ac32abe7a5c52361260614a3eb3e1">3d3cef2</a></td><td><code>Polymake: fix typo in docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65988239e463e512f11d759eb8c01f8c71d812f7">6598823</a></td><td><code>Polyhedron_base._polymake_init_: Support polyhedra over quadratic extensions</code></td></tr></table>




---

archive/issue_comments_339281.json:
```json
{
    "body": "**Changing commit** from \"[65988239e463e512f11d759eb8c01f8c71d812f7](https://github.com/sagemath/sagetrac-mirror/commit/65988239e463e512f11d759eb8c01f8c71d812f7)\" to \"[ef23af4ada9587307f001690662e3c4d715fb6e6](https://github.com/sagemath/sagetrac-mirror/commit/ef23af4ada9587307f001690662e3c4d715fb6e6)\".",
    "created_at": "2017-03-26T06:30:02Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339281",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[65988239e463e512f11d759eb8c01f8c71d812f7](https://github.com/sagemath/sagetrac-mirror/commit/65988239e463e512f11d759eb8c01f8c71d812f7)" to "[ef23af4ada9587307f001690662e3c4d715fb6e6](https://github.com/sagemath/sagetrac-mirror/commit/ef23af4ada9587307f001690662e3c4d715fb6e6)".



---

archive/issue_comments_339282.json:
```json
{
    "body": "<a id='comment:48'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef23af4ada9587307f001690662e3c4d715fb6e6\">ef23af4</a></td><td><code>Polyhedron_base._polymake_init_: Add test for RDF polyhedra</code></td></tr></table>\n",
    "created_at": "2017-03-26T06:30:02Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339282",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef23af4ada9587307f001690662e3c4d715fb6e6">ef23af4</a></td><td><code>Polyhedron_base._polymake_init_: Add test for RDF polyhedra</code></td></tr></table>




---

archive/issue_comments_339283.json:
```json
{
    "body": "<a id='comment:49'></a>\nReplying to [SimonKing](#comment%3A31):\n> So, I guess one should implement `_polymake_` for `SageObject`, and also a default version of `_polymake_init_` (which defaults to the string representation and thus works out of the box for numbers and strings), similar to the other conversion methods. And then, you can override `_polymake_init_` (but not `_polymake_`!) for `Polyhedron_base`, returning a string rather than a polymake element.\n\n\nI have now reworked this along these lines. The default `_polymake_init` (in `SageObject`) works for some basic things such as integers and rationals. \n\nI provide a specialized `_polymake_init_` for some rings (the parents). For example, `polymake(QQ)` gives the polymake type name`\"Rational\"`.\n\nNote, in `Polyhedron.base._polymake_init_`, I am still using `polymake.new_object` rather than putting together a complicated string. This seems to work fine, and seems more natural.\n\n`polymake(P)` now works when `P` is  a `Polyhedron` over the rationals, over `RDF`, or over a quadratic extension of the rationals.",
    "created_at": "2017-03-26T06:32:14Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339283",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>
Replying to [SimonKing](#comment%3A31):
> So, I guess one should implement `_polymake_` for `SageObject`, and also a default version of `_polymake_init_` (which defaults to the string representation and thus works out of the box for numbers and strings), similar to the other conversion methods. And then, you can override `_polymake_init_` (but not `_polymake_`!) for `Polyhedron_base`, returning a string rather than a polymake element.


I have now reworked this along these lines. The default `_polymake_init` (in `SageObject`) works for some basic things such as integers and rationals. 

I provide a specialized `_polymake_init_` for some rings (the parents). For example, `polymake(QQ)` gives the polymake type name`"Rational"`.

Note, in `Polyhedron.base._polymake_init_`, I am still using `polymake.new_object` rather than putting together a complicated string. This seems to work fine, and seems more natural.

`polymake(P)` now works when `P` is  a `Polyhedron` over the rationals, over `RDF`, or over a quadratic extension of the rationals.



---

archive/issue_comments_339284.json:
```json
{
    "body": "<a id='comment:50'></a>\nReplying to [jipilab](#comment%3A45):\n> \n> > Yes, exactly. We may be used to different terminologies, but in my book, pointed = trivial lineality space = minimal faces are vertices.\n\n> \n> Okay! Yes, sounds good! I guess we are now on the same page ... of the same book.\n\n\nTurns out that polymake does a similar thing as Sage does, so it's less tricky than I thought it would be. I'm now passing both the H- and the V-rep to polymake. I've added tests for the various cases.",
    "created_at": "2017-03-26T06:33:58Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339284",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:50'></a>
Replying to [jipilab](#comment%3A45):
> 
> > Yes, exactly. We may be used to different terminologies, but in my book, pointed = trivial lineality space = minimal faces are vertices.

> 
> Okay! Yes, sounds good! I guess we are now on the same page ... of the same book.


Turns out that polymake does a similar thing as Sage does, so it's less tricky than I thought it would be. I'm now passing both the H- and the V-rep to polymake. I've added tests for the various cases.



---

archive/issue_events_202194.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-26T06:45:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22658#event-202194"
}
```



---

archive/issue_comments_339285.json:
```json
{
    "body": "**Author:** Matthias Koeppe, Simon King",
    "created_at": "2017-03-26T06:45:54Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339285",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe, Simon King



---

archive/issue_comments_339286.json:
```json
{
    "body": "**Dependencies:** #22452",
    "created_at": "2017-03-26T06:45:54Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339286",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #22452



---

archive/issue_comments_339287.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1,27 @@\n-Following up on the Polymake pexpect interface (#22452), we should make it easy to make a polymake object corresponding to a given `Polyhedron`.\n+Following up on the Polymake pexpect interface (#22452), we make it easy to make a polymake object corresponding to a given `Polyhedron`.\n \n+We use the standard interface coercion protocol by defining `SageObject._polymake_` and a default method `SageObject._polymake_init_`, which is overridden for `Polyhedron_base` and for several rings.\n+\n+Basic example (see `Polyhedron_base._polymake_` for more):\n+\n+```\n+            sage: P = polytopes.cube()\n+            sage: PP = polymake(P)         # optional - polymake\n+            sage: PP.N_VERTICES            # optional - polymake\n+            8\n+```\n+\n+Example of an algebraic polyhedron:\n+\n+```\n+            sage: P = polytopes.dodecahedron(); P\n+            A 3-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5)^3 defined as the convex hull of 20 vertices\n+            sage: print(\"There may be a recompilation warning\"); PP = polymake(P); PP\n+            There may be a recompilation warning...\n+            Polytope<QuadraticExtension<Rational>>[...]\n+            sage: sorted(PP.VERTICES[:])[0]\n+            1 1-1r5 4-2r5 0\n+```\n+\n+The branch is on top of #22452; and it also contains a quick fix for the polymake interface, \"Do not use file to send commands to polymake\", by Simon.\n+\n``````\n",
    "created_at": "2017-03-26T06:45:54Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339287",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1,27 @@
-Following up on the Polymake pexpect interface (#22452), we should make it easy to make a polymake object corresponding to a given `Polyhedron`.
+Following up on the Polymake pexpect interface (#22452), we make it easy to make a polymake object corresponding to a given `Polyhedron`.
 
+We use the standard interface coercion protocol by defining `SageObject._polymake_` and a default method `SageObject._polymake_init_`, which is overridden for `Polyhedron_base` and for several rings.
+
+Basic example (see `Polyhedron_base._polymake_` for more):
+
+```
+            sage: P = polytopes.cube()
+            sage: PP = polymake(P)         # optional - polymake
+            sage: PP.N_VERTICES            # optional - polymake
+            8
+```
+
+Example of an algebraic polyhedron:
+
+```
+            sage: P = polytopes.dodecahedron(); P
+            A 3-dimensional polyhedron in (Number Field in sqrt5 with defining polynomial x^2 - 5)^3 defined as the convex hull of 20 vertices
+            sage: print("There may be a recompilation warning"); PP = polymake(P); PP
+            There may be a recompilation warning...
+            Polytope<QuadraticExtension<Rational>>[...]
+            sage: sorted(PP.VERTICES[:])[0]
+            1 1-1r5 4-2r5 0
+```
+
+The branch is on top of #22452; and it also contains a quick fix for the polymake interface, "Do not use file to send commands to polymake", by Simon.
+
``````




---

archive/issue_events_202195.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-26T06:45:54Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "rename": {
        "from": "Polyhedron methods using the polymake pexpect interface",
        "to": "Support interface coercion polymake(X) for Polyhedron"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22658#event-202195"
}
```



---

archive/issue_comments_339288.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n We use the standard interface coercion protocol by defining `SageObject._polymake_` and a default method `SageObject._polymake_init_`, which is overridden for `Polyhedron_base` and for several rings.\n \n-Basic example (see `Polyhedron_base._polymake_` for more):\n+Basic example (see `Polyhedron_base._polymake_init_` for more):\n \n ```\n             sage: P = polytopes.cube()\n``````\n",
    "created_at": "2017-03-26T06:47:39Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339288",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 We use the standard interface coercion protocol by defining `SageObject._polymake_` and a default method `SageObject._polymake_init_`, which is overridden for `Polyhedron_base` and for several rings.
 
-Basic example (see `Polyhedron_base._polymake_` for more):
+Basic example (see `Polyhedron_base._polymake_init_` for more):
 
 ```
             sage: P = polytopes.cube()
``````




---

archive/issue_comments_339289.json:
```json
{
    "body": "<a id='comment:53'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/205879fb118e1c7c3fd954e42022b7fe0c6af119\">205879f</a></td><td><code>Matrix, MatrixSpace: Add coercion to polymake interface</code></td></tr></table>\n",
    "created_at": "2017-03-26T18:23:55Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339289",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/205879fb118e1c7c3fd954e42022b7fe0c6af119">205879f</a></td><td><code>Matrix, MatrixSpace: Add coercion to polymake interface</code></td></tr></table>




---

archive/issue_comments_339290.json:
```json
{
    "body": "**Changing commit** from \"[ef23af4ada9587307f001690662e3c4d715fb6e6](https://github.com/sagemath/sagetrac-mirror/commit/ef23af4ada9587307f001690662e3c4d715fb6e6)\" to \"[205879fb118e1c7c3fd954e42022b7fe0c6af119](https://github.com/sagemath/sagetrac-mirror/commit/205879fb118e1c7c3fd954e42022b7fe0c6af119)\".",
    "created_at": "2017-03-26T18:23:55Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339290",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ef23af4ada9587307f001690662e3c4d715fb6e6](https://github.com/sagemath/sagetrac-mirror/commit/ef23af4ada9587307f001690662e3c4d715fb6e6)" to "[205879fb118e1c7c3fd954e42022b7fe0c6af119](https://github.com/sagemath/sagetrac-mirror/commit/205879fb118e1c7c3fd954e42022b7fe0c6af119)".



---

archive/issue_comments_339291.json:
```json
{
    "body": "**Changing commit** from \"[205879fb118e1c7c3fd954e42022b7fe0c6af119](https://github.com/sagemath/sagetrac-mirror/commit/205879fb118e1c7c3fd954e42022b7fe0c6af119)\" to \"[e49765eaa94319320c1a40e820d45010b32ea94d](https://github.com/sagemath/sagetrac-mirror/commit/e49765eaa94319320c1a40e820d45010b32ea94d)\".",
    "created_at": "2017-03-26T20:28:48Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339291",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[205879fb118e1c7c3fd954e42022b7fe0c6af119](https://github.com/sagemath/sagetrac-mirror/commit/205879fb118e1c7c3fd954e42022b7fe0c6af119)" to "[e49765eaa94319320c1a40e820d45010b32ea94d](https://github.com/sagemath/sagetrac-mirror/commit/e49765eaa94319320c1a40e820d45010b32ea94d)".



---

archive/issue_comments_339292.json:
```json
{
    "body": "<a id='comment:57'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e49765eaa94319320c1a40e820d45010b32ea94d\">e49765e</a></td><td><code>Polymake: Fix tests whose error messages changed because we do not use files</code></td></tr></table>\n",
    "created_at": "2017-03-26T20:28:48Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339292",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e49765eaa94319320c1a40e820d45010b32ea94d">e49765e</a></td><td><code>Polymake: Fix tests whose error messages changed because we do not use files</code></td></tr></table>




---

archive/issue_comments_339293.json:
```json
{
    "body": "<a id='comment:58'></a>\nReplying to [SimonKing](#comment%3A32):\n>  I have further ideas (namely: \"do communicate with polymake with files, but this time declare the variables properly\")\n\n\nYes, this is needed; I just got bitten by the 4096-characters-per-line limitation...",
    "created_at": "2017-03-28T02:12:37Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339293",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:58'></a>
Replying to [SimonKing](#comment%3A32):
>  I have further ideas (namely: "do communicate with polymake with files, but this time declare the variables properly")


Yes, this is needed; I just got bitten by the 4096-characters-per-line limitation...



---

archive/issue_comments_339294.json:
```json
{
    "body": "**Changing commit** from \"[e49765eaa94319320c1a40e820d45010b32ea94d](https://github.com/sagemath/sagetrac-mirror/commit/e49765eaa94319320c1a40e820d45010b32ea94d)\" to \"[5c5948c802d498a2313dac022e7bea175cb0ec5c](https://github.com/sagemath/sagetrac-mirror/commit/5c5948c802d498a2313dac022e7bea175cb0ec5c)\".",
    "created_at": "2017-03-28T05:27:25Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339294",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e49765eaa94319320c1a40e820d45010b32ea94d](https://github.com/sagemath/sagetrac-mirror/commit/e49765eaa94319320c1a40e820d45010b32ea94d)" to "[5c5948c802d498a2313dac022e7bea175cb0ec5c](https://github.com/sagemath/sagetrac-mirror/commit/5c5948c802d498a2313dac022e7bea175cb0ec5c)".



---

archive/issue_comments_339295.json:
```json
{
    "body": "<a id='comment:59'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c5948c802d498a2313dac022e7bea175cb0ec5c\">5c5948c</a></td><td><code>Polymake: Use files again, using 'eval read_file' instead of 'script'</code></td></tr></table>\n",
    "created_at": "2017-03-28T05:27:25Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339295",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c5948c802d498a2313dac022e7bea175cb0ec5c">5c5948c</a></td><td><code>Polymake: Use files again, using 'eval read_file' instead of 'script'</code></td></tr></table>




---

archive/issue_comments_339296.json:
```json
{
    "body": "<a id='comment:60'></a>\nIt seems I found a simple solution for communicating with files.",
    "created_at": "2017-03-28T05:28:39Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339296",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:60'></a>
It seems I found a simple solution for communicating with files.



---

archive/issue_comments_339297.json:
```json
{
    "body": "<a id='comment:61'></a>\nDo you want it to be 100 characters (IIRC that is what the 100 specifies), or do you want to go higher so files are written less frequently, like 1024 or 2048?",
    "created_at": "2017-03-28T05:32:34Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339297",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:61'></a>
Do you want it to be 100 characters (IIRC that is what the 100 specifies), or do you want to go higher so files are written less frequently, like 1024 or 2048?



---

archive/issue_comments_339298.json:
```json
{
    "body": "<a id='comment:62'></a>\n1024 works for me, larger values don't. I'll make a change and add tests.",
    "created_at": "2017-03-28T06:06:07Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339298",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:62'></a>
1024 works for me, larger values don't. I'll make a change and add tests.



---

archive/issue_comments_339299.json:
```json
{
    "body": "**Changing commit** from \"[5c5948c802d498a2313dac022e7bea175cb0ec5c](https://github.com/sagemath/sagetrac-mirror/commit/5c5948c802d498a2313dac022e7bea175cb0ec5c)\" to \"[5b6a921419f3d4efd20d7d57b79675e861cca9fc](https://github.com/sagemath/sagetrac-mirror/commit/5b6a921419f3d4efd20d7d57b79675e861cca9fc)\".",
    "created_at": "2017-03-28T06:07:23Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339299",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5c5948c802d498a2313dac022e7bea175cb0ec5c](https://github.com/sagemath/sagetrac-mirror/commit/5c5948c802d498a2313dac022e7bea175cb0ec5c)" to "[5b6a921419f3d4efd20d7d57b79675e861cca9fc](https://github.com/sagemath/sagetrac-mirror/commit/5b6a921419f3d4efd20d7d57b79675e861cca9fc)".



---

archive/issue_comments_339300.json:
```json
{
    "body": "<a id='comment:63'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b6a921419f3d4efd20d7d57b79675e861cca9fc\">5b6a921</a></td><td><code>Polymake: Change file cut off to 1024 and add tests</code></td></tr></table>\n",
    "created_at": "2017-03-28T06:07:23Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339300",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b6a921419f3d4efd20d7d57b79675e861cca9fc">5b6a921</a></td><td><code>Polymake: Change file cut off to 1024 and add tests</code></td></tr></table>




---

archive/issue_comments_339301.json:
```json
{
    "body": "<a id='comment:64'></a>\nReplying to [mkoeppe](#comment%3A60):\n> It seems I found a simple solution for communicating with files. \n\n\nSigh. Why didn't the polymake developers point me to that solution when I asked in the polymake forum? I explicitly asked for a way to read commands from a file and mentioned that the only solution I found was `script`, but I made it clear that I do certainly not *insist* on using `script`. Their answer was to not point out alternatives, but to explain oddities that come with `script`, such as different conventions on declaring variables, and caching.\n\nDo I see correctly that `eval read_file` will not cache what it read? That would be another advantage over `script` and would have been yet another reason for the polymake forum to mention that solution.\n\nIn singular.py, there is\n\n```\neval_using_file_cutoff=100 if os.uname()[0]==\"SunOS\" else 1000\n```\nand in gap it is unconditionally 100. So, perhaps 1024 won't work on some systems?",
    "created_at": "2017-03-28T08:48:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339301",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:64'></a>
Replying to [mkoeppe](#comment%3A60):
> It seems I found a simple solution for communicating with files. 


Sigh. Why didn't the polymake developers point me to that solution when I asked in the polymake forum? I explicitly asked for a way to read commands from a file and mentioned that the only solution I found was `script`, but I made it clear that I do certainly not *insist* on using `script`. Their answer was to not point out alternatives, but to explain oddities that come with `script`, such as different conventions on declaring variables, and caching.

Do I see correctly that `eval read_file` will not cache what it read? That would be another advantage over `script` and would have been yet another reason for the polymake forum to mention that solution.

In singular.py, there is

```
eval_using_file_cutoff=100 if os.uname()[0]=="SunOS" else 1000
```
and in gap it is unconditionally 100. So, perhaps 1024 won't work on some systems?



---

archive/issue_comments_339302.json:
```json
{
    "body": "<a id='comment:65'></a>\nReplying to [SimonKing](#comment%3A64):\n> Do I see correctly that `eval read_file` will not cache what it read? \n\n\nNo caching. It's just Perl. `eval` executes a given string of code.\n\n> In singular.py, there is\n> \n> ```\n> eval_using_file_cutoff=100 if os.uname()[0]==\"SunOS\" else 1000\n> ```\n> and in gap it is unconditionally 100. So, perhaps 1024 won't work on some systems?\n\n\nI'm not very surprised to see code like this for Solaris based on past experience with its pty driver, but I don't think anyone has built Sage on Solaris in a long time, so we can't know. I would be hesitant to add special-casing code like this based on guessing.",
    "created_at": "2017-03-28T16:56:26Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339302",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'></a>
Replying to [SimonKing](#comment%3A64):
> Do I see correctly that `eval read_file` will not cache what it read? 


No caching. It's just Perl. `eval` executes a given string of code.

> In singular.py, there is
> 
> ```
> eval_using_file_cutoff=100 if os.uname()[0]=="SunOS" else 1000
> ```
> and in gap it is unconditionally 100. So, perhaps 1024 won't work on some systems?


I'm not very surprised to see code like this for Solaris based on past experience with its pty driver, but I don't think anyone has built Sage on Solaris in a long time, so we can't know. I would be hesitant to add special-casing code like this based on guessing.



---

archive/issue_comments_339303.json:
```json
{
    "body": "<a id='comment:66'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f10637ee3bcf88f6f8d6cda44881183a8fecf926\">f10637e</a></td><td><code>Polyhedron_base: Fix doctests to avoid vector comparisons, prep for polymake 3.1</code></td></tr></table>\n",
    "created_at": "2017-03-28T19:00:12Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339303",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f10637ee3bcf88f6f8d6cda44881183a8fecf926">f10637e</a></td><td><code>Polyhedron_base: Fix doctests to avoid vector comparisons, prep for polymake 3.1</code></td></tr></table>




---

archive/issue_comments_339304.json:
```json
{
    "body": "**Changing commit** from \"[5b6a921419f3d4efd20d7d57b79675e861cca9fc](https://github.com/sagemath/sagetrac-mirror/commit/5b6a921419f3d4efd20d7d57b79675e861cca9fc)\" to \"[f10637ee3bcf88f6f8d6cda44881183a8fecf926](https://github.com/sagemath/sagetrac-mirror/commit/f10637ee3bcf88f6f8d6cda44881183a8fecf926)\".",
    "created_at": "2017-03-28T19:00:12Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339304",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5b6a921419f3d4efd20d7d57b79675e861cca9fc](https://github.com/sagemath/sagetrac-mirror/commit/5b6a921419f3d4efd20d7d57b79675e861cca9fc)" to "[f10637ee3bcf88f6f8d6cda44881183a8fecf926](https://github.com/sagemath/sagetrac-mirror/commit/f10637ee3bcf88f6f8d6cda44881183a8fecf926)".



---

archive/issue_comments_339305.json:
```json
{
    "body": "<a id='comment:67'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8812e9c0b5b19506fcdaeac92834938e30301707\">8812e9c</a></td><td><code>Merge tag '7.6' into t/22658/polyhedron_methods_using_the_polymake_pexpect_interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b47f6f926b549cdf167530cdb2f25e742a8d70a9\">b47f6f9</a></td><td><code>Polyhedron_base._polymake_init_: Add work around for empty polytopes with Polymake 3.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b49a54dc04adec084b7f77f1c70328e608eb967\">3b49a54</a></td><td><code>Polymake: Fix another test whose error message depends on whether we use files</code></td></tr></table>\n",
    "created_at": "2017-03-29T02:45:42Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339305",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:67'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8812e9c0b5b19506fcdaeac92834938e30301707">8812e9c</a></td><td><code>Merge tag '7.6' into t/22658/polyhedron_methods_using_the_polymake_pexpect_interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b47f6f926b549cdf167530cdb2f25e742a8d70a9">b47f6f9</a></td><td><code>Polyhedron_base._polymake_init_: Add work around for empty polytopes with Polymake 3.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b49a54dc04adec084b7f77f1c70328e608eb967">3b49a54</a></td><td><code>Polymake: Fix another test whose error message depends on whether we use files</code></td></tr></table>




---

archive/issue_comments_339306.json:
```json
{
    "body": "**Changing commit** from \"[f10637ee3bcf88f6f8d6cda44881183a8fecf926](https://github.com/sagemath/sagetrac-mirror/commit/f10637ee3bcf88f6f8d6cda44881183a8fecf926)\" to \"[3b49a54dc04adec084b7f77f1c70328e608eb967](https://github.com/sagemath/sagetrac-mirror/commit/3b49a54dc04adec084b7f77f1c70328e608eb967)\".",
    "created_at": "2017-03-29T02:45:42Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339306",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f10637ee3bcf88f6f8d6cda44881183a8fecf926](https://github.com/sagemath/sagetrac-mirror/commit/f10637ee3bcf88f6f8d6cda44881183a8fecf926)" to "[3b49a54dc04adec084b7f77f1c70328e608eb967](https://github.com/sagemath/sagetrac-mirror/commit/3b49a54dc04adec084b7f77f1c70328e608eb967)".



---

archive/issue_comments_339307.json:
```json
{
    "body": "<a id='comment:68'></a>\nI wouldn't even worry about Solaris. If someone does want this, then they should be able to provide a fix.",
    "created_at": "2017-03-29T03:36:56Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339307",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:68'></a>
I wouldn't even worry about Solaris. If someone does want this, then they should be able to provide a fix.



---

archive/issue_comments_339308.json:
```json
{
    "body": "<a id='comment:69'></a>\nAlso, in the interfaces, there are other similar large values, e.g.:\n\n```\nsrc/sage/interfaces/gap3.py:             eval_using_file_cutoff=100,\nsrc/sage/interfaces/scilab.py:                        eval_using_file_cutoff=100)\nsrc/sage/interfaces/r.py:                  eval_using_file_cutoff=1024)\nsrc/sage/interfaces/octave.py:                        eval_using_file_cutoff=100)\nsrc/sage/interfaces/gap3.py:             eval_using_file_cutoff=100,\nsrc/sage/interfaces/scilab.py:                        eval_using_file_cutoff=100)\nsrc/sage/interfaces/r.py:                  eval_using_file_cutoff=1024)\nsrc/sage/interfaces/octave.py:                        eval_using_file_cutoff=100)\nsrc/sage/interfaces/kash.py:                        eval_using_file_cutoff=100,\nsrc/sage/interfaces/mathematica.py:                        eval_using_file_cutoff=50)\nsrc/sage/interfaces/lie.py:                        eval_using_file_cutoff=1024)\nsrc/sage/interfaces/macaulay2.py:                        eval_using_file_cutoff=500)\nsrc/sage/interfaces/gp.py:                        eval_using_file_cutoff=1024)\nsrc/sage/interfaces/maxima.py:        eval_using_file_cutoff = 256\n```",
    "created_at": "2017-03-29T15:27:20Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339308",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:69'></a>
Also, in the interfaces, there are other similar large values, e.g.:

```
src/sage/interfaces/gap3.py:             eval_using_file_cutoff=100,
src/sage/interfaces/scilab.py:                        eval_using_file_cutoff=100)
src/sage/interfaces/r.py:                  eval_using_file_cutoff=1024)
src/sage/interfaces/octave.py:                        eval_using_file_cutoff=100)
src/sage/interfaces/gap3.py:             eval_using_file_cutoff=100,
src/sage/interfaces/scilab.py:                        eval_using_file_cutoff=100)
src/sage/interfaces/r.py:                  eval_using_file_cutoff=1024)
src/sage/interfaces/octave.py:                        eval_using_file_cutoff=100)
src/sage/interfaces/kash.py:                        eval_using_file_cutoff=100,
src/sage/interfaces/mathematica.py:                        eval_using_file_cutoff=50)
src/sage/interfaces/lie.py:                        eval_using_file_cutoff=1024)
src/sage/interfaces/macaulay2.py:                        eval_using_file_cutoff=500)
src/sage/interfaces/gp.py:                        eval_using_file_cutoff=1024)
src/sage/interfaces/maxima.py:        eval_using_file_cutoff = 256
```



---

archive/issue_comments_339309.json:
```json
{
    "body": "<a id='comment:70'></a>\nYes, no point worrying about these numbers. I guess some are based on historical testing, others based on cut and paste. \n\nIn any case, the current value in the polymake interface works both on Mac OS X and Linux; and there are tests for it.",
    "created_at": "2017-03-30T01:58:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339309",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:70'></a>
Yes, no point worrying about these numbers. I guess some are based on historical testing, others based on cut and paste. 

In any case, the current value in the polymake interface works both on Mac OS X and Linux; and there are tests for it.



---

archive/issue_comments_339310.json:
```json
{
    "body": "<a id='comment:71'></a>\nSo what else needs to be done for reviewing this ticket? Is anyone currently actively finishing the review for this ticket?",
    "created_at": "2017-03-30T04:58:06Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339310",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:71'></a>
So what else needs to be done for reviewing this ticket? Is anyone currently actively finishing the review for this ticket?



---

archive/issue_comments_339311.json:
```json
{
    "body": "<a id='comment:72'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07a17571db553f2aa91f87184fd96492317a4d93\">07a1757</a></td><td><code>Polyhedron_base._polymake_init_: Fix comment</code></td></tr></table>\n",
    "created_at": "2017-03-30T05:33:30Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339311",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:72'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07a17571db553f2aa91f87184fd96492317a4d93">07a1757</a></td><td><code>Polyhedron_base._polymake_init_: Fix comment</code></td></tr></table>




---

archive/issue_comments_339312.json:
```json
{
    "body": "**Changing commit** from \"[3b49a54dc04adec084b7f77f1c70328e608eb967](https://github.com/sagemath/sagetrac-mirror/commit/3b49a54dc04adec084b7f77f1c70328e608eb967)\" to \"[07a17571db553f2aa91f87184fd96492317a4d93](https://github.com/sagemath/sagetrac-mirror/commit/07a17571db553f2aa91f87184fd96492317a4d93)\".",
    "created_at": "2017-03-30T05:33:30Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339312",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3b49a54dc04adec084b7f77f1c70328e608eb967](https://github.com/sagemath/sagetrac-mirror/commit/3b49a54dc04adec084b7f77f1c70328e608eb967)" to "[07a17571db553f2aa91f87184fd96492317a4d93](https://github.com/sagemath/sagetrac-mirror/commit/07a17571db553f2aa91f87184fd96492317a4d93)".



---

archive/issue_comments_339313.json:
```json
{
    "body": "<a id='comment:73'></a>\nTravis, I'm not aware of anyone else reviewing this ticket.\nIf you'd like to take a closer look at how I use `_polymake_` and `_polymake_init_` in this ticket, that could be helpful. I've in part followed Simon's advice regarding these methods and in part copied what other methods of the same classes did, but it's first time I've written interface coercion methods.",
    "created_at": "2017-03-30T05:39:53Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339313",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:73'></a>
Travis, I'm not aware of anyone else reviewing this ticket.
If you'd like to take a closer look at how I use `_polymake_` and `_polymake_init_` in this ticket, that could be helpful. I've in part followed Simon's advice regarding these methods and in part copied what other methods of the same classes did, but it's first time I've written interface coercion methods.



---

archive/issue_comments_339314.json:
```json
{
    "body": "<a id='comment:74'></a>\nLGTM as far as I can tell. However, there are 2 minor issues from the patchbot:\n\n- you didn't mark some tests as `# optional` in `src/sage/geometry/polyhedron/base.py`,\n- you have trivial doctest failures in `src/doc/en/thematic_tutorials/coercion_and_categories.rst`.",
    "created_at": "2017-03-30T15:40:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339314",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:74'></a>
LGTM as far as I can tell. However, there are 2 minor issues from the patchbot:

- you didn't mark some tests as `# optional` in `src/sage/geometry/polyhedron/base.py`,
- you have trivial doctest failures in `src/doc/en/thematic_tutorials/coercion_and_categories.rst`.



---

archive/issue_comments_339315.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -23,5 +23,5 @@\n             1 1-1r5 4-2r5 0\n ```\n \n-The branch is on top of #22452; and it also contains a quick fix for the polymake interface, \"Do not use file to send commands to polymake\", by Simon.\n+The branch is on top of #22452; and it also contains a quick fix for the polymake interface regarding the way that files are used to send long commands.\n \n``````\n",
    "created_at": "2017-03-30T17:18:27Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339315",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -23,5 +23,5 @@
             1 1-1r5 4-2r5 0
 ```
 
-The branch is on top of #22452; and it also contains a quick fix for the polymake interface, "Do not use file to send commands to polymake", by Simon.
+The branch is on top of #22452; and it also contains a quick fix for the polymake interface regarding the way that files are used to send long commands.
 
``````




---

archive/issue_comments_339316.json:
```json
{
    "body": "**Changing commit** from \"[07a17571db553f2aa91f87184fd96492317a4d93](https://github.com/sagemath/sagetrac-mirror/commit/07a17571db553f2aa91f87184fd96492317a4d93)\" to \"[19d05f1b1053dac87c1a21c98a4f3844e0e6a7e3](https://github.com/sagemath/sagetrac-mirror/commit/19d05f1b1053dac87c1a21c98a4f3844e0e6a7e3)\".",
    "created_at": "2017-03-30T17:27:45Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339316",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[07a17571db553f2aa91f87184fd96492317a4d93](https://github.com/sagemath/sagetrac-mirror/commit/07a17571db553f2aa91f87184fd96492317a4d93)" to "[19d05f1b1053dac87c1a21c98a4f3844e0e6a7e3](https://github.com/sagemath/sagetrac-mirror/commit/19d05f1b1053dac87c1a21c98a4f3844e0e6a7e3)".



---

archive/issue_comments_339317.json:
```json
{
    "body": "<a id='comment:76'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/09942e7983510e41912f04fe14cdeb52a1f0c5a9\">09942e7</a></td><td><code>coercion tutorial: Update introspection results</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19d05f1b1053dac87c1a21c98a4f3844e0e6a7e3\">19d05f1</a></td><td><code>Add more 'optional - polymake</code></td></tr></table>\n",
    "created_at": "2017-03-30T17:27:45Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339317",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:76'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/09942e7983510e41912f04fe14cdeb52a1f0c5a9">09942e7</a></td><td><code>coercion tutorial: Update introspection results</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19d05f1b1053dac87c1a21c98a4f3844e0e6a7e3">19d05f1</a></td><td><code>Add more 'optional - polymake</code></td></tr></table>




---

archive/issue_comments_339318.json:
```json
{
    "body": "**Reviewer:** Jean-Philippe Labb\u00e9, Travis Scrimshaw",
    "created_at": "2017-03-30T17:35:16Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339318",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Jean-Philippe Labb√©, Travis Scrimshaw



---

archive/issue_comments_339319.json:
```json
{
    "body": "<a id='comment:77'></a>\nI think this one is unnecessary:\n\n```\nsage: P = polytopes.dodecahedron(exact=False); P # optional - polymake\n```\nOnce that is reverted, then you can set a positive review on my behalf.",
    "created_at": "2017-03-30T17:35:16Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339319",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:77'></a>
I think this one is unnecessary:

```
sage: P = polytopes.dodecahedron(exact=False); P # optional - polymake
```
Once that is reverted, then you can set a positive review on my behalf.



---

archive/issue_comments_339320.json:
```json
{
    "body": "<a id='comment:78'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd583e2934e499211c8c8a6addf7dddeb36314cb\">cd583e2</a></td><td><code>Remove one unneccessary 'optional - polymake</code></td></tr></table>\n",
    "created_at": "2017-03-30T17:39:11Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339320",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:78'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd583e2934e499211c8c8a6addf7dddeb36314cb">cd583e2</a></td><td><code>Remove one unneccessary 'optional - polymake</code></td></tr></table>




---

archive/issue_comments_339321.json:
```json
{
    "body": "**Changing commit** from \"[19d05f1b1053dac87c1a21c98a4f3844e0e6a7e3](https://github.com/sagemath/sagetrac-mirror/commit/19d05f1b1053dac87c1a21c98a4f3844e0e6a7e3)\" to \"[cd583e2934e499211c8c8a6addf7dddeb36314cb](https://github.com/sagemath/sagetrac-mirror/commit/cd583e2934e499211c8c8a6addf7dddeb36314cb)\".",
    "created_at": "2017-03-30T17:39:11Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339321",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[19d05f1b1053dac87c1a21c98a4f3844e0e6a7e3](https://github.com/sagemath/sagetrac-mirror/commit/19d05f1b1053dac87c1a21c98a4f3844e0e6a7e3)" to "[cd583e2934e499211c8c8a6addf7dddeb36314cb](https://github.com/sagemath/sagetrac-mirror/commit/cd583e2934e499211c8c8a6addf7dddeb36314cb)".



---

archive/issue_comments_339322.json:
```json
{
    "body": "<a id='comment:79'></a>\nThank you!",
    "created_at": "2017-03-30T17:39:48Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339322",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:79'></a>
Thank you!



---

archive/issue_events_202196.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-30T17:39:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22658#event-202196"
}
```



---

archive/issue_events_202197.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-30T17:39:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22658#event-202197"
}
```



---

archive/issue_events_202198.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-01T11:00:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22658#event-202198"
}
```



---

archive/issue_events_202199.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-01T11:00:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22658#event-202199"
}
```



---

archive/issue_comments_339323.json:
```json
{
    "body": "<a id='comment:80'></a>\n\n```\nsage -t --long src/sage/interfaces/polymake.py\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 397, in sage.interfaces.polymake.Polymake._read_in_file_command\nFailed example:\n    L = polymake([42] * 400)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.Polymake._read_in_file_command[1]>\", line 1, in <module>\n        L = polymake([Integer(42)] * Integer(400))\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 273, in __call__\n        raise TypeError(msg)\n    TypeError: unable to start polymake\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 398, in sage.interfaces.polymake.Polymake._read_in_file_command\nFailed example:\n    len(L)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.Polymake._read_in_file_command[2]>\", line 1, in <module>\n        len(L)\n    NameError: name 'L' is not defined\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 403, in sage.interfaces.polymake.Polymake._read_in_file_command\nFailed example:\n    L = polymake([42] * 84)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.Polymake._read_in_file_command[3]>\", line 1, in <module>\n        L = polymake([Integer(42)] * Integer(84))\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py\", line 273, in __call__\n        raise TypeError(msg)\n    TypeError: unable to start polymake\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 404, in sage.interfaces.polymake.Polymake._read_in_file_command\nFailed example:\n    len(L)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.Polymake._read_in_file_command[4]>\", line 1, in <module>\n        len(L)\n    NameError: name 'L' is not defined\n**********************************************************************\n1 item had failures:\n   4 of   6 in sage.interfaces.polymake.Polymake._read_in_file_command\n    [25 tests, 4 failures, 0.24 s]\n```",
    "created_at": "2017-04-01T11:00:52Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339323",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:80'></a>

```
sage -t --long src/sage/interfaces/polymake.py
**********************************************************************
File "src/sage/interfaces/polymake.py", line 397, in sage.interfaces.polymake.Polymake._read_in_file_command
Failed example:
    L = polymake([42] * 400)
Exception raised:
    Traceback (most recent call last):
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.Polymake._read_in_file_command[1]>", line 1, in <module>
        L = polymake([Integer(42)] * Integer(400))
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 273, in __call__
        raise TypeError(msg)
    TypeError: unable to start polymake
**********************************************************************
File "src/sage/interfaces/polymake.py", line 398, in sage.interfaces.polymake.Polymake._read_in_file_command
Failed example:
    len(L)
Exception raised:
    Traceback (most recent call last):
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.Polymake._read_in_file_command[2]>", line 1, in <module>
        len(L)
    NameError: name 'L' is not defined
**********************************************************************
File "src/sage/interfaces/polymake.py", line 403, in sage.interfaces.polymake.Polymake._read_in_file_command
Failed example:
    L = polymake([42] * 84)
Exception raised:
    Traceback (most recent call last):
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.Polymake._read_in_file_command[3]>", line 1, in <module>
        L = polymake([Integer(42)] * Integer(84))
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/interfaces/interface.py", line 273, in __call__
        raise TypeError(msg)
    TypeError: unable to start polymake
**********************************************************************
File "src/sage/interfaces/polymake.py", line 404, in sage.interfaces.polymake.Polymake._read_in_file_command
Failed example:
    len(L)
Exception raised:
    Traceback (most recent call last):
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.Polymake._read_in_file_command[4]>", line 1, in <module>
        len(L)
    NameError: name 'L' is not defined
**********************************************************************
1 item had failures:
   4 of   6 in sage.interfaces.polymake.Polymake._read_in_file_command
    [25 tests, 4 failures, 0.24 s]
```



---

archive/issue_comments_339324.json:
```json
{
    "body": "<a id='comment:81'></a>\nLooks like they just need `# optional - polymake`.",
    "created_at": "2017-04-01T13:32:38Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339324",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:81'></a>
Looks like they just need `# optional - polymake`.



---

archive/issue_comments_339325.json:
```json
{
    "body": "<a id='comment:82'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bcc04c590a7583fb7d8d0a859fd443fa02c4d8c\">7bcc04c</a></td><td><code>Merge tag '8.0.beta0' into t/22658/polyhedron_methods_using_the_polymake_pexpect_interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c\">d7d4234</a></td><td><code>Add '# optional - polymake'</code></td></tr></table>\n",
    "created_at": "2017-04-01T14:28:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339325",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:82'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bcc04c590a7583fb7d8d0a859fd443fa02c4d8c">7bcc04c</a></td><td><code>Merge tag '8.0.beta0' into t/22658/polyhedron_methods_using_the_polymake_pexpect_interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c">d7d4234</a></td><td><code>Add '# optional - polymake'</code></td></tr></table>




---

archive/issue_comments_339326.json:
```json
{
    "body": "**Changing commit** from \"[cd583e2934e499211c8c8a6addf7dddeb36314cb](https://github.com/sagemath/sagetrac-mirror/commit/cd583e2934e499211c8c8a6addf7dddeb36314cb)\" to \"[d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c](https://github.com/sagemath/sagetrac-mirror/commit/d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c)\".",
    "created_at": "2017-04-01T14:28:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339326",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cd583e2934e499211c8c8a6addf7dddeb36314cb](https://github.com/sagemath/sagetrac-mirror/commit/cd583e2934e499211c8c8a6addf7dddeb36314cb)" to "[d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c](https://github.com/sagemath/sagetrac-mirror/commit/d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c)".



---

archive/issue_events_202200.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-04-01T14:28:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22658#event-202200"
}
```



---

archive/issue_events_202201.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-04-01T14:28:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22658#event-202201"
}
```



---

archive/issue_events_202202.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-04-01T14:38:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22658#event-202202"
}
```



---

archive/issue_events_202203.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-04-01T14:38:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22658#event-202203"
}
```



---

archive/issue_comments_339327.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/polyhedron_methods_using_the_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/polyhedron_methods_using_the_polymake_pexpect_interface)\" to \"[d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c](https://github.com/sagemath/sagetrac-mirror/commit/d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c)\".",
    "created_at": "2017-04-03T20:59:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22658#issuecomment-339327",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/polyhedron_methods_using_the_polymake_pexpect_interface](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/polyhedron_methods_using_the_polymake_pexpect_interface)" to "[d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c](https://github.com/sagemath/sagetrac-mirror/commit/d7d4234f660f8b154a1d3b28cc9a8d0883f9a38c)".



---

archive/issue_events_202204.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-03T20:59:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22658#event-202204"
}
```



---

archive/issue_events_202205.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-03T20:59:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22658",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22658#event-202205"
}
```
