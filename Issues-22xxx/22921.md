# Issue 22921: Implementation of shifted tableaux

archive/issues_022684.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-kbparamonov"
    ],
    "body": "<div id=\"comment:0\"></div>\n\nThis ticket implements a new class for shifted primed tableaux, and an A-type crystal for those objects.\n\n\nCC:  @tscrim @sagetrac-kbparamonov @sagetrac-hawkes @anneschilling @mantepse @AndrewAtLarge\n\nComponent: **combinatorics**\n\nKeywords: **shifted primed tableaux, crystals**\n\nAuthor: **Kirill Paramonov**\n\nBranch/Commit: **[`bf7e707`](https://github.com/sagemath/sagetrac-mirror/commit/bf7e707c6764952aeca7f2b81331cb6b6eed1738)**\n\nReviewer: **Anne Schilling, Travis Scrimshaw, Martin Rubey**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22921_\n\n",
    "closed_at": "2018-02-03T17:50:13Z",
    "created_at": "2017-05-01T19:38:43Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implementation of shifted tableaux",
    "type": "issue",
    "updated_at": "2018-02-03T17:50:13Z",
    "url": "https://github.com/sagemath/sage/issues/22921",
    "user": "https://github.com/anneschilling"
}
```
<div id="comment:0"></div>

This ticket implements a new class for shifted primed tableaux, and an A-type crystal for those objects.


CC:  @tscrim @sagetrac-kbparamonov @sagetrac-hawkes @anneschilling @mantepse @AndrewAtLarge

Component: **combinatorics**

Keywords: **shifted primed tableaux, crystals**

Author: **Kirill Paramonov**

Branch/Commit: **[`bf7e707`](https://github.com/sagemath/sagetrac-mirror/commit/bf7e707c6764952aeca7f2b81331cb6b6eed1738)**

Reviewer: **Anne Schilling, Travis Scrimshaw, Martin Rubey**

_Issue created by migration from https://trac.sagemath.org/ticket/22921_





---

archive/issue_events_316854.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2017-05-01T19:38:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316854"
}
```



---

archive/issue_events_316855.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2017-05-01T19:38:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316855"
}
```



---

archive/issue_events_316856.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2017-05-01T19:38:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316856"
}
```



---

archive/issue_events_316857.json:
```json
{
    "actor": "https://github.com/anneschilling",
    "created_at": "2017-05-01T19:38:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316857"
}
```



---

archive/issue_comments_341781.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nSee #20041.",
    "created_at": "2017-05-01T20:26:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341781",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:1" align="right">comment:1</div>

See #20041.



---

archive/issue_comments_341782.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-This ticket implements a new class for shifted tableaux and algorithm related to these.\n+This ticket implements a new class for unimodal tableaux, signed primed tableaux, and related insertion algorithms such as Kraskiewicz insertion and mixed Haiman insertion.\n+\n+This ticket is related to, but different from #20041 and will build on top of it.\n``````\n",
    "created_at": "2017-05-02T00:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341782",
    "user": "https://github.com/anneschilling"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-This ticket implements a new class for shifted tableaux and algorithm related to these.
+This ticket implements a new class for unimodal tableaux, signed primed tableaux, and related insertion algorithms such as Kraskiewicz insertion and mixed Haiman insertion.
+
+This ticket is related to, but different from #20041 and will build on top of it.
``````




---

archive/issue_events_316858.json:
```json
{
    "actor": "https://github.com/sagetrac-kbparamonov",
    "created_at": "2017-05-04T18:55:50Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "subject": "https://github.com/sagetrac-kbparamonov",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316858"
}
```



---

archive/issue_comments_341783.json:
```json
{
    "body": "Branch: **[public/combinat/primed_tableaux_22921](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/primed_tableaux_22921)**",
    "created_at": "2017-05-20T17:25:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341783",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

Branch: **[public/combinat/primed_tableaux_22921](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/primed_tableaux_22921)**



---

archive/issue_comments_341784.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30437170dcb4ca118a55c9ad8f236d7f3d7227fe\"><code>3043717</code></a></td><td><code>File shifted_tableaux.py added in combinat.</code></td></tr></table>\n",
    "created_at": "2017-05-20T18:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341784",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30437170dcb4ca118a55c9ad8f236d7f3d7227fe"><code>3043717</code></a></td><td><code>File shifted_tableaux.py added in combinat.</code></td></tr></table>




---

archive/issue_comments_341785.json:
```json
{
    "body": "Commit: **[`3043717`](https://github.com/sagemath/sagetrac-mirror/commit/30437170dcb4ca118a55c9ad8f236d7f3d7227fe)**",
    "created_at": "2017-05-20T18:12:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341785",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`3043717`](https://github.com/sagemath/sagetrac-mirror/commit/30437170dcb4ca118a55c9ad8f236d7f3d7227fe)**



---

archive/issue_comments_341786.json:
```json
{
    "body": "Changed commit from **[`3043717`](https://github.com/sagemath/sagetrac-mirror/commit/30437170dcb4ca118a55c9ad8f236d7f3d7227fe)** to **[`f6aa0ef`](https://github.com/sagemath/sagetrac-mirror/commit/f6aa0ef473eef8401abcdb13c0876e1c73122c23)**",
    "created_at": "2017-05-28T00:51:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341786",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3043717`](https://github.com/sagemath/sagetrac-mirror/commit/30437170dcb4ca118a55c9ad8f236d7f3d7227fe)** to **[`f6aa0ef`](https://github.com/sagemath/sagetrac-mirror/commit/f6aa0ef473eef8401abcdb13c0876e1c73122c23)**



---

archive/issue_comments_341787.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6aa0ef473eef8401abcdb13c0876e1c73122c23\"><code>f6aa0ef</code></a></td><td><code>New functions and comments</code></td></tr></table>\n",
    "created_at": "2017-05-28T00:51:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341787",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6aa0ef473eef8401abcdb13c0876e1c73122c23"><code>f6aa0ef</code></a></td><td><code>New functions and comments</code></td></tr></table>




---

archive/issue_comments_341788.json:
```json
{
    "body": "Changed commit from **[`f6aa0ef`](https://github.com/sagemath/sagetrac-mirror/commit/f6aa0ef473eef8401abcdb13c0876e1c73122c23)** to **[`d00e09b`](https://github.com/sagemath/sagetrac-mirror/commit/d00e09bd336c663facf0185813d6be64df10b3a9)**",
    "created_at": "2017-05-28T02:39:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341788",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f6aa0ef`](https://github.com/sagemath/sagetrac-mirror/commit/f6aa0ef473eef8401abcdb13c0876e1c73122c23)** to **[`d00e09b`](https://github.com/sagemath/sagetrac-mirror/commit/d00e09bd336c663facf0185813d6be64df10b3a9)**



---

archive/issue_comments_341789.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d00e09bd336c663facf0185813d6be64df10b3a9\"><code>d00e09b</code></a></td><td><code>Added proper links</code></td></tr></table>\n",
    "created_at": "2017-05-28T02:39:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341789",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d00e09bd336c663facf0185813d6be64df10b3a9"><code>d00e09b</code></a></td><td><code>Added proper links</code></td></tr></table>




---

archive/issue_comments_341790.json:
```json
{
    "body": "Changed commit from **[`d00e09b`](https://github.com/sagemath/sagetrac-mirror/commit/d00e09bd336c663facf0185813d6be64df10b3a9)** to **[`13b6c8a`](https://github.com/sagemath/sagetrac-mirror/commit/13b6c8a3dc35efc14a77d4c73ecf4a8bb538c665)**",
    "created_at": "2017-06-05T03:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341790",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d00e09b`](https://github.com/sagemath/sagetrac-mirror/commit/d00e09bd336c663facf0185813d6be64df10b3a9)** to **[`13b6c8a`](https://github.com/sagemath/sagetrac-mirror/commit/13b6c8a3dc35efc14a77d4c73ecf4a8bb538c665)**



---

archive/issue_comments_341791.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13b6c8a3dc35efc14a77d4c73ecf4a8bb538c665\"><code>13b6c8a</code></a></td><td><code>added crystal structure</code></td></tr></table>\n",
    "created_at": "2017-06-05T03:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341791",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13b6c8a3dc35efc14a77d4c73ecf4a8bb538c665"><code>13b6c8a</code></a></td><td><code>added crystal structure</code></td></tr></table>




---

archive/issue_comments_341792.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nLooking at the code, I do not think it is necessary to implement a new class for StrictPartitions. You can access those using the already existing Partitions code:\n\n```\nsage: Partitions(7, max_slope=-1).list()\n[[7], [6, 1], [5, 2], [4, 3], [4, 2, 1]]\n```\nPlease also make sure that you stick to the Sage coding conventions described here\n\u200bhttp://doc.sagemath.org/html/en/developer/coding_basics.html",
    "created_at": "2017-06-10T00:55:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341792",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:11" align="right">comment:11</div>

Looking at the code, I do not think it is necessary to implement a new class for StrictPartitions. You can access those using the already existing Partitions code:

```
sage: Partitions(7, max_slope=-1).list()
[[7], [6, 1], [5, 2], [4, 3], [4, 2, 1]]
```
Please also make sure that you stick to the Sage coding conventions described here
​http://doc.sagemath.org/html/en/developer/coding_basics.html



---

archive/issue_comments_341793.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI still get many doctest failures (here are two, but there are many more):\n\n```\nsage -t tableau_shifted_primed.py\n**********************************************************************\nFile \"tableau_shifted_primed.py\", line 43, in sage.combinat.tableau_shifted_primed.ShiftedPrimedTableau\nFailed example:\n    T([[1,\"2'\",\"3'\",3],[2,\"3'\"]])[1]\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 509, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 872, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.tableau_shifted_primed.ShiftedPrimedTableau[1]>\", line 1, in <module>\n        T([[Integer(1),\"2'\",\"3'\",Integer(3)],[Integer(2),\"3'\"]])[Integer(1)]\n      File \"sage/structure/parent.pyx\", line 941, in sage.structure.parent.Parent.__call__ (/Applications/sage/src/build/cythonized/sage/structure/parent.c:9839)\n        return mor._call_(x)\n      File \"sage/structure/coerce_maps.pyx\", line 110, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (/Applications/sage/src/build/cythonized/sage/structure/coerce_maps.c:4895)\n        raise\n      File \"sage/structure/coerce_maps.pyx\", line 105, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (/Applications/sage/src/build/cythonized/sage/structure/coerce_maps.c:4762)\n        return C._element_constructor(x)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/tableau_shifted_primed.py\", line 904, in _element_constructor_\n        raise ValueError(\"{} is not an element of {}\".format(t, self))\n    ValueError: [[1, \"2'\", \"3'\", 3], [2, \"3'\"]] is not an element of Shifted Primed tableaux of shape [4, 2]\n**********************************************************************\nFile \"tableau_shifted_primed.py\", line 45, in sage.combinat.tableau_shifted_primed.ShiftedPrimedTableau\nFailed example:\n    t = ShiftedPrimedTableau([[1,\"2p\",2.5,3],[0,2,2.5]])\nException raised:\n    Traceback (most recent call last):\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 509, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 872, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.tableau_shifted_primed.ShiftedPrimedTableau[2]>\", line 1, in <module>\n        t = ShiftedPrimedTableau([[Integer(1),\"2p\",RealNumber('2.5'),Integer(3)],[Integer(0),Integer(2),RealNumber('2.5')]])\n      File \"sage/misc/lazy_import.pyx\", line 389, in sage.misc.lazy_import.LazyImport.__call__ (/Applications/sage/src/build/cythonized/sage/misc/lazy_import.c:4016)\n        return self._get_object()(*args, **kwds)\n      File \"sage/misc/classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/Applications/sage/src/build/cythonized/sage/misc/classcall_metaclass.c:1415)\n        return cls.classcall(cls, *args, **kwds)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/tableau_shifted_primed.py\", line 86, in __classcall_private__\n        return ShiftedPrimedTableaux(shape = shape, weight = weight)(T)\n      File \"sage/structure/parent.pyx\", line 941, in sage.structure.parent.Parent.__call__ (/Applications/sage/src/build/cythonized/sage/structure/parent.c:9839)\n        return mor._call_(x)\n      File \"sage/structure/coerce_maps.pyx\", line 110, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (/Applications/sage/src/build/cythonized/sage/structure/coerce_maps.c:4895)\n        raise\n      File \"sage/structure/coerce_maps.pyx\", line 105, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (/Applications/sage/src/build/cythonized/sage/structure/coerce_maps.c:4762)\n        return C._element_constructor(x)\n      File \"/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/tableau_shifted_primed.py\", line 1004, in _element_constructor_\n        raise ValueError(\"{} is not an element of {}\".format(t, self))\n    ValueError: [[1, '2p', 2.50000000000000, 3], [0, 2, 2.50000000000000]] is not an element of Shifted Primed Tableaux of weight (1, 4, 1) and shape [4, 2]\n```",
    "created_at": "2017-06-13T03:44:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341793",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:12" align="right">comment:12</div>

I still get many doctest failures (here are two, but there are many more):

```
sage -t tableau_shifted_primed.py
**********************************************************************
File "tableau_shifted_primed.py", line 43, in sage.combinat.tableau_shifted_primed.ShiftedPrimedTableau
Failed example:
    T([[1,"2'","3'",3],[2,"3'"]])[1]
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 509, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 872, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.tableau_shifted_primed.ShiftedPrimedTableau[1]>", line 1, in <module>
        T([[Integer(1),"2'","3'",Integer(3)],[Integer(2),"3'"]])[Integer(1)]
      File "sage/structure/parent.pyx", line 941, in sage.structure.parent.Parent.__call__ (/Applications/sage/src/build/cythonized/sage/structure/parent.c:9839)
        return mor._call_(x)
      File "sage/structure/coerce_maps.pyx", line 110, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (/Applications/sage/src/build/cythonized/sage/structure/coerce_maps.c:4895)
        raise
      File "sage/structure/coerce_maps.pyx", line 105, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (/Applications/sage/src/build/cythonized/sage/structure/coerce_maps.c:4762)
        return C._element_constructor(x)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/tableau_shifted_primed.py", line 904, in _element_constructor_
        raise ValueError("{} is not an element of {}".format(t, self))
    ValueError: [[1, "2'", "3'", 3], [2, "3'"]] is not an element of Shifted Primed tableaux of shape [4, 2]
**********************************************************************
File "tableau_shifted_primed.py", line 45, in sage.combinat.tableau_shifted_primed.ShiftedPrimedTableau
Failed example:
    t = ShiftedPrimedTableau([[1,"2p",2.5,3],[0,2,2.5]])
Exception raised:
    Traceback (most recent call last):
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 509, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 872, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.tableau_shifted_primed.ShiftedPrimedTableau[2]>", line 1, in <module>
        t = ShiftedPrimedTableau([[Integer(1),"2p",RealNumber('2.5'),Integer(3)],[Integer(0),Integer(2),RealNumber('2.5')]])
      File "sage/misc/lazy_import.pyx", line 389, in sage.misc.lazy_import.LazyImport.__call__ (/Applications/sage/src/build/cythonized/sage/misc/lazy_import.c:4016)
        return self._get_object()(*args, **kwds)
      File "sage/misc/classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/Applications/sage/src/build/cythonized/sage/misc/classcall_metaclass.c:1415)
        return cls.classcall(cls, *args, **kwds)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/tableau_shifted_primed.py", line 86, in __classcall_private__
        return ShiftedPrimedTableaux(shape = shape, weight = weight)(T)
      File "sage/structure/parent.pyx", line 941, in sage.structure.parent.Parent.__call__ (/Applications/sage/src/build/cythonized/sage/structure/parent.c:9839)
        return mor._call_(x)
      File "sage/structure/coerce_maps.pyx", line 110, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (/Applications/sage/src/build/cythonized/sage/structure/coerce_maps.c:4895)
        raise
      File "sage/structure/coerce_maps.pyx", line 105, in sage.structure.coerce_maps.DefaultConvertMap_unique._call_ (/Applications/sage/src/build/cythonized/sage/structure/coerce_maps.c:4762)
        return C._element_constructor(x)
      File "/Applications/sage/local/lib/python2.7/site-packages/sage/combinat/tableau_shifted_primed.py", line 1004, in _element_constructor_
        raise ValueError("{} is not an element of {}".format(t, self))
    ValueError: [[1, '2p', 2.50000000000000, 3], [0, 2, 2.50000000000000]] is not an element of Shifted Primed Tableaux of weight (1, 4, 1) and shape [4, 2]
```



---

archive/issue_comments_341794.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nHere are some more trivial comments:\n\n- you need a blank line before and after EXAMPLES::\n\n- Returnes -> Return (several times)\n\n- you need a blank line after the one-line description of a given method\n\n- you need a 4-space indent of the code for each EXAMPLES::\n  This indent is sometimes missing.\n\n- EXAMPE: -> EXAMPLES::\n\n- There is still some documentation missing for some of the methods",
    "created_at": "2017-06-13T03:46:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341794",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:13" align="right">comment:13</div>

Here are some more trivial comments:

- you need a blank line before and after EXAMPLES::

- Returnes -> Return (several times)

- you need a blank line after the one-line description of a given method

- you need a 4-space indent of the code for each EXAMPLES::
  This indent is sometimes missing.

- EXAMPE: -> EXAMPLES::

- There is still some documentation missing for some of the methods



---

archive/issue_comments_341795.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5dee1d6915e838b7c87e34d77e5dd417670157e1\"><code>5dee1d6</code></a></td><td><code>Fixed functions</code></td></tr></table>\n",
    "created_at": "2017-06-20T00:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341795",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5dee1d6915e838b7c87e34d77e5dd417670157e1"><code>5dee1d6</code></a></td><td><code>Fixed functions</code></td></tr></table>




---

archive/issue_comments_341796.json:
```json
{
    "body": "Changed commit from **[`13b6c8a`](https://github.com/sagemath/sagetrac-mirror/commit/13b6c8a3dc35efc14a77d4c73ecf4a8bb538c665)** to **[`5dee1d6`](https://github.com/sagemath/sagetrac-mirror/commit/5dee1d6915e838b7c87e34d77e5dd417670157e1)**",
    "created_at": "2017-06-20T00:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341796",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`13b6c8a`](https://github.com/sagemath/sagetrac-mirror/commit/13b6c8a3dc35efc14a77d4c73ecf4a8bb538c665)** to **[`5dee1d6`](https://github.com/sagemath/sagetrac-mirror/commit/5dee1d6915e838b7c87e34d77e5dd417670157e1)**



---

archive/issue_comments_341797.json:
```json
{
    "body": "Changed commit from **[`5dee1d6`](https://github.com/sagemath/sagetrac-mirror/commit/5dee1d6915e838b7c87e34d77e5dd417670157e1)** to **[`d582dcd`](https://github.com/sagemath/sagetrac-mirror/commit/d582dcd0cd10cd32847bcf6df6fe1a7478b0c7be)**",
    "created_at": "2017-06-24T06:21:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341797",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5dee1d6`](https://github.com/sagemath/sagetrac-mirror/commit/5dee1d6915e838b7c87e34d77e5dd417670157e1)** to **[`d582dcd`](https://github.com/sagemath/sagetrac-mirror/commit/d582dcd0cd10cd32847bcf6df6fe1a7478b0c7be)**



---

archive/issue_comments_341798.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d582dcd0cd10cd32847bcf6df6fe1a7478b0c7be\"><code>d582dcd</code></a></td><td><code>Added documentation, cleaned up the code</code></td></tr></table>\n",
    "created_at": "2017-06-24T06:21:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341798",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d582dcd0cd10cd32847bcf6df6fe1a7478b0c7be"><code>d582dcd</code></a></td><td><code>Added documentation, cleaned up the code</code></td></tr></table>




---

archive/issue_comments_341799.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bc82dcf2b4659def502f089910b3ea09a234b0e\"><code>5bc82dc</code></a></td><td><code>Fixed doctests</code></td></tr></table>\n",
    "created_at": "2017-06-24T07:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341799",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bc82dcf2b4659def502f089910b3ea09a234b0e"><code>5bc82dc</code></a></td><td><code>Fixed doctests</code></td></tr></table>




---

archive/issue_comments_341800.json:
```json
{
    "body": "Changed commit from **[`d582dcd`](https://github.com/sagemath/sagetrac-mirror/commit/d582dcd0cd10cd32847bcf6df6fe1a7478b0c7be)** to **[`5bc82dc`](https://github.com/sagemath/sagetrac-mirror/commit/5bc82dcf2b4659def502f089910b3ea09a234b0e)**",
    "created_at": "2017-06-24T07:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341800",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d582dcd`](https://github.com/sagemath/sagetrac-mirror/commit/d582dcd0cd10cd32847bcf6df6fe1a7478b0c7be)** to **[`5bc82dc`](https://github.com/sagemath/sagetrac-mirror/commit/5bc82dcf2b4659def502f089910b3ea09a234b0e)**



---

archive/issue_comments_341801.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nIn #23319 I have just implemented a growth diagram version of the insertion algorithm...",
    "created_at": "2017-06-25T13:39:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341801",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:17" align="right">comment:17</div>

In #23319 I have just implemented a growth diagram version of the insertion algorithm...



---

archive/issue_comments_341802.json:
```json
{
    "body": "Reviewer: **aschilling, tscrim**",
    "created_at": "2017-08-09T21:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341802",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

Reviewer: **aschilling, tscrim**



---

archive/issue_events_316859.json:
```json
{
    "actor": "https://github.com/sagetrac-kbparamonov",
    "created_at": "2017-08-09T21:19:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316859"
}
```



---

archive/issue_comments_341803.json:
```json
{
    "body": "Changed commit from **[`5bc82dc`](https://github.com/sagemath/sagetrac-mirror/commit/5bc82dcf2b4659def502f089910b3ea09a234b0e)** to **[`84093c4`](https://github.com/sagemath/sagetrac-mirror/commit/84093c4bc19d2aa7e353dfa2b2436a5bf56b96b8)**",
    "created_at": "2017-09-19T21:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341803",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5bc82dc`](https://github.com/sagemath/sagetrac-mirror/commit/5bc82dcf2b4659def502f089910b3ea09a234b0e)** to **[`84093c4`](https://github.com/sagemath/sagetrac-mirror/commit/84093c4bc19d2aa7e353dfa2b2436a5bf56b96b8)**



---

archive/issue_comments_341804.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84093c4bc19d2aa7e353dfa2b2436a5bf56b96b8\"><code>84093c4</code></a></td><td><code>fix minor formatting issues</code></td></tr></table>\n",
    "created_at": "2017-09-19T21:41:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341804",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84093c4bc19d2aa7e353dfa2b2436a5bf56b96b8"><code>84093c4</code></a></td><td><code>fix minor formatting issues</code></td></tr></table>




---

archive/issue_comments_341805.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nIt would be nice to get this in, so we can have the following from #23896\n\n```\nsage: G = GrowthDiagramShiftedShapes([5, 10, 8, 7, 4, 1, 2, 9, 3, 6])\nsage: G.P_symbol().pp()\n 1   2   3   6   9\n     4   5   7\n         8   10\n\nsage: G.Q_symbol().pp()\n1   2   4'  5'  6'\n    3   7'  8\n        9   10\n```",
    "created_at": "2017-09-19T21:52:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341805",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:20" align="right">comment:20</div>

It would be nice to get this in, so we can have the following from #23896

```
sage: G = GrowthDiagramShiftedShapes([5, 10, 8, 7, 4, 1, 2, 9, 3, 6])
sage: G.P_symbol().pp()
 1   2   3   6   9
     4   5   7
         8   10

sage: G.Q_symbol().pp()
1   2   4'  5'  6'
    3   7'  8
        9   10
```



---

archive/issue_comments_341806.json:
```json
{
    "body": "Changed commit from **[`84093c4`](https://github.com/sagemath/sagetrac-mirror/commit/84093c4bc19d2aa7e353dfa2b2436a5bf56b96b8)** to **[`724d7b6`](https://github.com/sagemath/sagetrac-mirror/commit/724d7b64830f3c5ba6143bdbadae40060ca1f91d)**",
    "created_at": "2017-09-19T22:17:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341806",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`84093c4`](https://github.com/sagemath/sagetrac-mirror/commit/84093c4bc19d2aa7e353dfa2b2436a5bf56b96b8)** to **[`724d7b6`](https://github.com/sagemath/sagetrac-mirror/commit/724d7b64830f3c5ba6143bdbadae40060ca1f91d)**



---

archive/issue_comments_341807.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8853225fbc39b7e42587a2aa497737c92b83b598\"><code>8853225</code></a></td><td><code>fix a bug and add more (failing) tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/995d6d63b641bbd2dba30b392c944a40f406e997\"><code>995d6d6</code></a></td><td><code>fix final fehler, produce P_symbol as StrongTableau</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ddf8827bab487a0cd03e1d03c0a82c621bf1d94\"><code>1ddf882</code></a></td><td><code>add rank function</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/500e234c1dd8a736966b2f74fa1bf55951231789\"><code>500e234</code></a></td><td><code>docfixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/70276380b3e1692532eb7427737bcc84d4d65390\"><code>7027638</code></a></td><td><code>doc fixes (in particular use the global reference file) and simplify defaults</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1db01517ca7fa25e448ea1f10109b455cec1098\"><code>a1db015</code></a></td><td><code>make r a class attribute and implement test for Domino as an example</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ca9e7afc9d64751bea2547e25c6cb91c23dbe3a\"><code>1ca9e7a</code></a></td><td><code>Merge branch 'develop' into t/23319/growth_diagram_improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b2a647ddef2c37478268c8fad88875799c060bc\"><code>6b2a647</code></a></td><td><code>add documentation and doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/592854323ace53e6a78aa151bfbe7f34d88848ba\"><code>5928543</code></a></td><td><code>Merge branch 'u/mantepse/growth_diagram_improvements' of git://trac.sagemath.org/sage into t/22921/public/combinat/primed_tableaux_22921</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/724d7b64830f3c5ba6143bdbadae40060ca1f91d\"><code>724d7b6</code></a></td><td><code>more trivial fixes</code></td></tr></table>\n",
    "created_at": "2017-09-19T22:17:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341807",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8853225fbc39b7e42587a2aa497737c92b83b598"><code>8853225</code></a></td><td><code>fix a bug and add more (failing) tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/995d6d63b641bbd2dba30b392c944a40f406e997"><code>995d6d6</code></a></td><td><code>fix final fehler, produce P_symbol as StrongTableau</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ddf8827bab487a0cd03e1d03c0a82c621bf1d94"><code>1ddf882</code></a></td><td><code>add rank function</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/500e234c1dd8a736966b2f74fa1bf55951231789"><code>500e234</code></a></td><td><code>docfixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/70276380b3e1692532eb7427737bcc84d4d65390"><code>7027638</code></a></td><td><code>doc fixes (in particular use the global reference file) and simplify defaults</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1db01517ca7fa25e448ea1f10109b455cec1098"><code>a1db015</code></a></td><td><code>make r a class attribute and implement test for Domino as an example</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ca9e7afc9d64751bea2547e25c6cb91c23dbe3a"><code>1ca9e7a</code></a></td><td><code>Merge branch 'develop' into t/23319/growth_diagram_improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b2a647ddef2c37478268c8fad88875799c060bc"><code>6b2a647</code></a></td><td><code>add documentation and doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/592854323ace53e6a78aa151bfbe7f34d88848ba"><code>5928543</code></a></td><td><code>Merge branch 'u/mantepse/growth_diagram_improvements' of git://trac.sagemath.org/sage into t/22921/public/combinat/primed_tableaux_22921</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/724d7b64830f3c5ba6143bdbadae40060ca1f91d"><code>724d7b6</code></a></td><td><code>more trivial fixes</code></td></tr></table>




---

archive/issue_comments_341808.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nOh dear, help needed.  All the commits after \n> \u200b84093c4\tfix minor formatting issues\n\nshould go away!",
    "created_at": "2017-09-19T22:31:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341808",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:22" align="right">comment:22</div>

Oh dear, help needed.  All the commits after 
> ​84093c4	fix minor formatting issues

should go away!



---

archive/issue_comments_341809.json:
```json
{
    "body": "Changed commit from **[`724d7b6`](https://github.com/sagemath/sagetrac-mirror/commit/724d7b64830f3c5ba6143bdbadae40060ca1f91d)** to **[`84093c4`](https://github.com/sagemath/sagetrac-mirror/commit/84093c4bc19d2aa7e353dfa2b2436a5bf56b96b8)**",
    "created_at": "2017-09-20T05:36:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341809",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`724d7b6`](https://github.com/sagemath/sagetrac-mirror/commit/724d7b64830f3c5ba6143bdbadae40060ca1f91d)** to **[`84093c4`](https://github.com/sagemath/sagetrac-mirror/commit/84093c4bc19d2aa7e353dfa2b2436a5bf56b96b8)**



---

archive/issue_comments_341810.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-09-20T05:36:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341810",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_341811.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff08b90e26c4f28070189ea194aed518908f3103\"><code>ff08b90</code></a></td><td><code>more trivial fixes</code></td></tr></table>\n",
    "created_at": "2017-09-20T05:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341811",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff08b90e26c4f28070189ea194aed518908f3103"><code>ff08b90</code></a></td><td><code>more trivial fixes</code></td></tr></table>




---

archive/issue_comments_341812.json:
```json
{
    "body": "Changed commit from **[`84093c4`](https://github.com/sagemath/sagetrac-mirror/commit/84093c4bc19d2aa7e353dfa2b2436a5bf56b96b8)** to **[`ff08b90`](https://github.com/sagemath/sagetrac-mirror/commit/ff08b90e26c4f28070189ea194aed518908f3103)**",
    "created_at": "2017-09-20T05:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341812",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`84093c4`](https://github.com/sagemath/sagetrac-mirror/commit/84093c4bc19d2aa7e353dfa2b2436a5bf56b96b8)** to **[`ff08b90`](https://github.com/sagemath/sagetrac-mirror/commit/ff08b90e26c4f28070189ea194aed518908f3103)**



---

archive/issue_comments_341813.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI just realised that we should have a skew version, too.",
    "created_at": "2017-09-24T23:26:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341813",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:25" align="right">comment:25</div>

I just realised that we should have a skew version, too.



---

archive/issue_comments_341814.json:
```json
{
    "body": "Changed commit from **[`ff08b90`](https://github.com/sagemath/sagetrac-mirror/commit/ff08b90e26c4f28070189ea194aed518908f3103)** to **[`3c84bbd`](https://github.com/sagemath/sagetrac-mirror/commit/3c84bbd502038a6973b7f7d3d67c1c6b76732d0e)**",
    "created_at": "2017-10-02T19:45:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341814",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ff08b90`](https://github.com/sagemath/sagetrac-mirror/commit/ff08b90e26c4f28070189ea194aed518908f3103)** to **[`3c84bbd`](https://github.com/sagemath/sagetrac-mirror/commit/3c84bbd502038a6973b7f7d3d67c1c6b76732d0e)**



---

archive/issue_comments_341815.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c84bbd502038a6973b7f7d3d67c1c6b76732d0e\"><code>3c84bbd</code></a></td><td><code>New Sage version</code></td></tr></table>\n",
    "created_at": "2017-10-02T19:45:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341815",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c84bbd502038a6973b7f7d3d67c1c6b76732d0e"><code>3c84bbd</code></a></td><td><code>New Sage version</code></td></tr></table>




---

archive/issue_comments_341816.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThanks for the minor fixes! Let me know if you have further feedback.\nI'd rather do a semistandard version of Haiman insertion here, after the base class is implemented. \n\nReplying to [@mantepse](#comment%3A20):\n> It would be nice to get this in, so we can have the following from #23896\n> \n> ```\n> sage: G = GrowthDiagramShiftedShapes([5, 10, 8, 7, 4, 1, 2, 9, 3, 6])\n> sage: G.P_symbol().pp()\n>  1   2   3   6   9\n>      4   5   7\n>          8   10\n> \n> sage: G.Q_symbol().pp()\n> 1   2   4'  5'  6'\n>     3   7'  8\n>         9   10\n> ```",
    "created_at": "2017-10-02T19:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341816",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:27" align="right">comment:27</div>

Thanks for the minor fixes! Let me know if you have further feedback.
I'd rather do a semistandard version of Haiman insertion here, after the base class is implemented. 

Replying to [@mantepse](#comment%3A20):
> It would be nice to get this in, so we can have the following from #23896
> 
> ```
> sage: G = GrowthDiagramShiftedShapes([5, 10, 8, 7, 4, 1, 2, 9, 3, 6])
> sage: G.P_symbol().pp()
>  1   2   3   6   9
>      4   5   7
>          8   10
> 
> sage: G.Q_symbol().pp()
> 1   2   4'  5'  6'
>     3   7'  8
>         9   10
> ```



---

archive/issue_comments_341817.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@sagetrac-kbparamonov](#comment%3A27):\n> Thanks for the minor fixes! Let me know if you have further feedback.\n\nWell, the most important thing for me would be support for the skew version, and support for `_ascii_art_`.  (In principle I think that there should be generic support for all sorts of fillings of shapes, but that's certainly not in the scope of this ticket.)\n\nImportant question: why do you use `ClonableArray` instead of `ClonableList`, as `Tableau` does?\n\n> I'd rather do a semistandard version of Haiman insertion here, after the base class is implemented. \n\nAs you like - maybe you could also do the skew version?  You can use the growth diagram version for cross-checking the standard case - the ticket is already closed, so it will be in 8.1.beta7.  The syntax has changed slightly, it is now\n\n```\nGrowthDiagram.rules.ShiftedShapes()([5,10,8,7,4,1,2,9,3,6])\n```\n\nI am too lazy to implement the semistandard version of the local rules, and I think they should be done generically anyway, via standardization and destandardization of the growth diagram.",
    "created_at": "2017-10-02T20:53:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341817",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@sagetrac-kbparamonov](#comment%3A27):
> Thanks for the minor fixes! Let me know if you have further feedback.

Well, the most important thing for me would be support for the skew version, and support for `_ascii_art_`.  (In principle I think that there should be generic support for all sorts of fillings of shapes, but that's certainly not in the scope of this ticket.)

Important question: why do you use `ClonableArray` instead of `ClonableList`, as `Tableau` does?

> I'd rather do a semistandard version of Haiman insertion here, after the base class is implemented. 

As you like - maybe you could also do the skew version?  You can use the growth diagram version for cross-checking the standard case - the ticket is already closed, so it will be in 8.1.beta7.  The syntax has changed slightly, it is now

```
GrowthDiagram.rules.ShiftedShapes()([5,10,8,7,4,1,2,9,3,6])
```

I am too lazy to implement the semistandard version of the local rules, and I think they should be done generically anyway, via standardization and destandardization of the growth diagram.



---

archive/issue_comments_341818.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@mantepse](#comment%3A29):\n\n> Well, the most important thing for me would be support for the skew version, and support for `_ascii_art_`.  (In principle I think that there should be generic support for all sorts of fillings of shapes, but that's certainly not in the scope of this ticket.)\n\nGot it\n\n> Important question: why do you use `ClonableArray` instead of `ClonableList`, as `Tableau` does?\n\nGood point, `ClonableList` is more consistent.",
    "created_at": "2017-10-02T21:05:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341818",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@mantepse](#comment%3A29):

> Well, the most important thing for me would be support for the skew version, and support for `_ascii_art_`.  (In principle I think that there should be generic support for all sorts of fillings of shapes, but that's certainly not in the scope of this ticket.)

Got it

> Important question: why do you use `ClonableArray` instead of `ClonableList`, as `Tableau` does?

Good point, `ClonableList` is more consistent.



---

archive/issue_comments_341819.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef251e17f4b118b02d5d0acf5e8b489309e50b01\"><code>ef251e1</code></a></td><td><code>improved style and doctests</code></td></tr></table>\n",
    "created_at": "2017-10-03T01:33:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341819",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef251e17f4b118b02d5d0acf5e8b489309e50b01"><code>ef251e1</code></a></td><td><code>improved style and doctests</code></td></tr></table>




---

archive/issue_comments_341820.json:
```json
{
    "body": "Changed commit from **[`3c84bbd`](https://github.com/sagemath/sagetrac-mirror/commit/3c84bbd502038a6973b7f7d3d67c1c6b76732d0e)** to **[`ef251e1`](https://github.com/sagemath/sagetrac-mirror/commit/ef251e17f4b118b02d5d0acf5e8b489309e50b01)**",
    "created_at": "2017-10-03T01:33:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341820",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3c84bbd`](https://github.com/sagemath/sagetrac-mirror/commit/3c84bbd502038a6973b7f7d3d67c1c6b76732d0e)** to **[`ef251e1`](https://github.com/sagemath/sagetrac-mirror/commit/ef251e17f4b118b02d5d0acf5e8b489309e50b01)**



---

archive/issue_comments_341821.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\n`Tableau` probably should be using `ClonableArray` instead of `ClonableList` because it (should have) a fixed size. From the doc of `structure/list_clone.pyx`:\n\n```\n- :class:`ClonableArray` for arrays (lists of fixed length) of objects;\n- :class:`ClonableList` for (resizable) lists of objects;\n```",
    "created_at": "2017-10-03T15:55:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341821",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:32" align="right">comment:32</div>

`Tableau` probably should be using `ClonableArray` instead of `ClonableList` because it (should have) a fixed size. From the doc of `structure/list_clone.pyx`:

```
- :class:`ClonableArray` for arrays (lists of fixed length) of objects;
- :class:`ClonableList` for (resizable) lists of objects;
```



---

archive/issue_comments_341822.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@tscrim](#comment%3A32):\n> `Tableau` probably should be using `ClonableArray` instead of `ClonableList` because it (should have) a fixed size.\n\nOK, I misunderstood: apparently, *size* is the number of rows.  So, a tableau really should be a `ClonableArray` of lists, right?  Or should it be a `ClonableArray` of `ClonableArray`s?",
    "created_at": "2017-10-03T17:12:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341822",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@tscrim](#comment%3A32):
> `Tableau` probably should be using `ClonableArray` instead of `ClonableList` because it (should have) a fixed size.

OK, I misunderstood: apparently, *size* is the number of rows.  So, a tableau really should be a `ClonableArray` of lists, right?  Or should it be a `ClonableArray` of `ClonableArray`s?



---

archive/issue_comments_341823.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\n`ClonableArray` of tuples is best so the rows cannot be modified via `T[0]` (a la #15862).",
    "created_at": "2017-10-03T17:51:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341823",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:34" align="right">comment:34</div>

`ClonableArray` of tuples is best so the rows cannot be modified via `T[0]` (a la #15862).



---

archive/issue_comments_341824.json:
```json
{
    "body": "Changed commit from **[`ef251e1`](https://github.com/sagemath/sagetrac-mirror/commit/ef251e17f4b118b02d5d0acf5e8b489309e50b01)** to **[`20aefa8`](https://github.com/sagemath/sagetrac-mirror/commit/20aefa8cc222c75a176a819ff1f1a8640f4768fa)**",
    "created_at": "2017-10-04T01:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341824",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ef251e1`](https://github.com/sagemath/sagetrac-mirror/commit/ef251e17f4b118b02d5d0acf5e8b489309e50b01)** to **[`20aefa8`](https://github.com/sagemath/sagetrac-mirror/commit/20aefa8cc222c75a176a819ff1f1a8640f4768fa)**



---

archive/issue_comments_341825.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20aefa8cc222c75a176a819ff1f1a8640f4768fa\"><code>20aefa8</code></a></td><td><code>Added Ascii and unicode</code></td></tr></table>\n",
    "created_at": "2017-10-04T01:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341825",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20aefa8cc222c75a176a819ff1f1a8640f4768fa"><code>20aefa8</code></a></td><td><code>Added Ascii and unicode</code></td></tr></table>




---

archive/issue_comments_341826.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nGreat!  One further comment (apart from the skew thing): it might be nice to have, similar to what's provided by `SkewTableau`, an argument `chain` that takes a sequence of shapes and creates a shifted (skew) tableau.  This is already implemented in #23896 (methods `P_symbol` and `Q_symbol`) for the standard case, but should be straightforward also for the (skew) semistandard case.  You can simply take the code from there, I would then replace those with a call to `ShiftedPrimedTableau(chain=Q_chain)`.\n\nI admit that I'm not completely sure about how to do it right: in the shifted case, a chain is a sequence of strict partitions, alternating with a colour:\n\n* colour 1 (black) - add a box on the diagonal\n* colour 2 (blue) - add an ordinary box\n* colour 3 (red) - add a primed box\n\nOf course, black is redundant, so maybe you just want to have two colours...",
    "created_at": "2017-10-04T05:29:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341826",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:36" align="right">comment:36</div>

Great!  One further comment (apart from the skew thing): it might be nice to have, similar to what's provided by `SkewTableau`, an argument `chain` that takes a sequence of shapes and creates a shifted (skew) tableau.  This is already implemented in #23896 (methods `P_symbol` and `Q_symbol`) for the standard case, but should be straightforward also for the (skew) semistandard case.  You can simply take the code from there, I would then replace those with a call to `ShiftedPrimedTableau(chain=Q_chain)`.

I admit that I'm not completely sure about how to do it right: in the shifted case, a chain is a sequence of strict partitions, alternating with a colour:

* colour 1 (black) - add a box on the diagonal
* colour 2 (blue) - add an ordinary box
* colour 3 (red) - add a primed box

Of course, black is redundant, so maybe you just want to have two colours...



---

archive/issue_comments_341827.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nHi Kirill,\n\nNot all methods seems to have documentation, see\n\n```\nsage -coverage tableau_shifted_primed.py \n------------------------------------------------------------------------\nSCORE tableau_shifted_primed.py: 86.8% (46 of 53)\n\nMissing documentation:\n     * line 1630: def __classcall_private__(cls, *args, **kwargs)\n     * line 1660: def __init__(self, shape=[4, 2], n=2)\n     * line 1669: def _repr_(self)\n     * line 1678: def add_strip(sub_tab, full_tab, length)\n     * line 1736: def preprocessing(T)\n\nMissing doctests:\n     * line 1243: def __init__(self, shape, max_elt)\n     * line 1510: def __init__(self, weight, shape)\n------------------------------------------------------------------------\n```",
    "created_at": "2017-10-06T16:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341827",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:37" align="right">comment:37</div>

Hi Kirill,

Not all methods seems to have documentation, see

```
sage -coverage tableau_shifted_primed.py 
------------------------------------------------------------------------
SCORE tableau_shifted_primed.py: 86.8% (46 of 53)

Missing documentation:
     * line 1630: def __classcall_private__(cls, *args, **kwargs)
     * line 1660: def __init__(self, shape=[4, 2], n=2)
     * line 1669: def _repr_(self)
     * line 1678: def add_strip(sub_tab, full_tab, length)
     * line 1736: def preprocessing(T)

Missing doctests:
     * line 1243: def __init__(self, shape, max_elt)
     * line 1510: def __init__(self, weight, shape)
------------------------------------------------------------------------
```



---

archive/issue_comments_341828.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nHow do you actually make the crystal of shifted primed tableaux? There is no documentation given for this. Also, you want to include the crystal in the catalogue of crystals, so that it will be accessible as `crystals.shifted_primed_tableaux(shape)`. Currently, this does not seem to be implemented.",
    "created_at": "2017-10-06T17:02:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341828",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:38" align="right">comment:38</div>

How do you actually make the crystal of shifted primed tableaux? There is no documentation given for this. Also, you want to include the crystal in the catalogue of crystals, so that it will be accessible as `crystals.shifted_primed_tableaux(shape)`. Currently, this does not seem to be implemented.



---

archive/issue_events_316860.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-10-06T18:25:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316860"
}
```



---

archive/issue_events_316861.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2017-10-06T18:25:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316861"
}
```



---

archive/issue_comments_341829.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf9567d6df5adeddc1218e9c5a513e0f1681281e\"><code>bf9567d</code></a></td><td><code>Added crystal documentation, put in the crystal catalog</code></td></tr></table>\n",
    "created_at": "2017-10-06T21:50:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341829",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf9567d6df5adeddc1218e9c5a513e0f1681281e"><code>bf9567d</code></a></td><td><code>Added crystal documentation, put in the crystal catalog</code></td></tr></table>




---

archive/issue_comments_341830.json:
```json
{
    "body": "Changed commit from **[`20aefa8`](https://github.com/sagemath/sagetrac-mirror/commit/20aefa8cc222c75a176a819ff1f1a8640f4768fa)** to **[`bf9567d`](https://github.com/sagemath/sagetrac-mirror/commit/bf9567d6df5adeddc1218e9c5a513e0f1681281e)**",
    "created_at": "2017-10-06T21:50:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341830",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`20aefa8`](https://github.com/sagemath/sagetrac-mirror/commit/20aefa8cc222c75a176a819ff1f1a8640f4768fa)** to **[`bf9567d`](https://github.com/sagemath/sagetrac-mirror/commit/bf9567d6df5adeddc1218e9c5a513e0f1681281e)**



---

archive/issue_comments_341831.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nIs there a good reason to have `shape=(4,2)` and `n=2` as defaults?",
    "created_at": "2017-10-06T21:57:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341831",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:41" align="right">comment:41</div>

Is there a good reason to have `shape=(4,2)` and `n=2` as defaults?



---

archive/issue_comments_341832.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@mantepse](#comment%3A41):\n> Is there a good reason to have `shape=(4,2)` and `n=2` as defaults? \n\nNo, those should be removed! Examples should be given with these values, but there should not be defaults!",
    "created_at": "2017-10-06T22:04:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341832",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@mantepse](#comment%3A41):
> Is there a good reason to have `shape=(4,2)` and `n=2` as defaults? 

No, those should be removed! Examples should be given with these values, but there should not be defaults!



---

archive/issue_comments_341833.json:
```json
{
    "body": "Changed commit from **[`bf9567d`](https://github.com/sagemath/sagetrac-mirror/commit/bf9567d6df5adeddc1218e9c5a513e0f1681281e)** to **[`9fa9406`](https://github.com/sagemath/sagetrac-mirror/commit/9fa940624649de1c9bdcefc3f6e279be037cca29)**",
    "created_at": "2017-10-06T22:18:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341833",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bf9567d`](https://github.com/sagemath/sagetrac-mirror/commit/bf9567d6df5adeddc1218e9c5a513e0f1681281e)** to **[`9fa9406`](https://github.com/sagemath/sagetrac-mirror/commit/9fa940624649de1c9bdcefc3f6e279be037cca29)**



---

archive/issue_comments_341834.json:
```json
{
    "body": "<div id=\"comment:43\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9fa940624649de1c9bdcefc3f6e279be037cca29\"><code>9fa9406</code></a></td><td><code>No default value for the shape of the crystal</code></td></tr></table>\n",
    "created_at": "2017-10-06T22:18:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341834",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9fa940624649de1c9bdcefc3f6e279be037cca29"><code>9fa9406</code></a></td><td><code>No default value for the shape of the crystal</code></td></tr></table>




---

archive/issue_comments_341835.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\n* There are leftover default values in line 1740.\n\n* I think `list_highest_weight` is redundant.  What I'm not sure about: shouldn't some of the methods, in particular `list_decreasing_weight`, be methods of the crystal class?\n\n```\nsage: %timeit crystals.ShiftedPrimedTableaux(shape=[4,3,2,1]).highest_weight_vectors()\n1 loop, best of 3: 24.9 s per loop\nsage: %timeit ShiftedPrimedTableaux(shape=[4,3,2,1]).list_highest_weight()\n1 loop, best of 3: 24.3 s per loop\n```\n\n* The documentation in line 1648 is not clear to me, isn't it just constructed applying the lowering operators (you could link to those using `:meth:...`) to the highest weights?\n\n* I think that `to_matrix` should be a private method - suppose that the internal representation changes, then it possibly doesn't make much sense anymore.\n\n* I'm a bit unsure about `reading_word_with_positions`, possibly that should be private, too.\n\n* any chance for the skew version?",
    "created_at": "2017-10-07T07:18:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341835",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:44" align="right">comment:44</div>

* There are leftover default values in line 1740.

* I think `list_highest_weight` is redundant.  What I'm not sure about: shouldn't some of the methods, in particular `list_decreasing_weight`, be methods of the crystal class?

```
sage: %timeit crystals.ShiftedPrimedTableaux(shape=[4,3,2,1]).highest_weight_vectors()
1 loop, best of 3: 24.9 s per loop
sage: %timeit ShiftedPrimedTableaux(shape=[4,3,2,1]).list_highest_weight()
1 loop, best of 3: 24.3 s per loop
```

* The documentation in line 1648 is not clear to me, isn't it just constructed applying the lowering operators (you could link to those using `:meth:...`) to the highest weights?

* I think that `to_matrix` should be a private method - suppose that the internal representation changes, then it possibly doesn't make much sense anymore.

* I'm a bit unsure about `reading_word_with_positions`, possibly that should be private, too.

* any chance for the skew version?



---

archive/issue_comments_341836.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@mantepse](#comment%3A44):\n> * There are leftover default values in line 1740.\n\nThose are for factory class `ShiftedPrimedTableauxCrystal`, which is not supposed to be called directly, so default values are only for internal use. I'll change it to raise error if arguments are not passed.\n\n> * I think `list_highest_weight` is redundant.  What I'm not sure about: shouldn't some of the methods, in particular `list_decreasing_weight`, be methods of the crystal class?\n> \n> ```\n> sage: %timeit crystals.ShiftedPrimedTableaux(shape=[4,3,2,1]).highest_weight_vectors()\n> 1 loop, best of 3: 24.9 s per loop\n> sage: %timeit ShiftedPrimedTableaux(shape=[4,3,2,1]).list_highest_weight()\n> 1 loop, best of 3: 24.3 s per loop\n> ```\n\n`list_highest_weight` is interesting in terms of the paper we've been working on, the length of that list would be related to a certain Schur decomposition.\n\n> * The documentation in line 1648 is not clear to me, isn't it just constructed applying the lowering operators (you could link to those using `:meth:...`) to the highest weights?\n\nI'll include better explanation.\n\n> * I think that `to_matrix` should be a private method - suppose that the internal representation changes, then it possibly doesn't make much sense anymore.\n\nAgree.\n\n> * I'm a bit unsure about `reading_word_with_positions`, possibly that should be private, too.\n\nAgree.\n\n> * any chance for the skew version?\n\nI'll be modifying the functions for the skew version. Expect it next week.",
    "created_at": "2017-10-07T18:27:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341836",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@mantepse](#comment%3A44):
> * There are leftover default values in line 1740.

Those are for factory class `ShiftedPrimedTableauxCrystal`, which is not supposed to be called directly, so default values are only for internal use. I'll change it to raise error if arguments are not passed.

> * I think `list_highest_weight` is redundant.  What I'm not sure about: shouldn't some of the methods, in particular `list_decreasing_weight`, be methods of the crystal class?
> 
> ```
> sage: %timeit crystals.ShiftedPrimedTableaux(shape=[4,3,2,1]).highest_weight_vectors()
> 1 loop, best of 3: 24.9 s per loop
> sage: %timeit ShiftedPrimedTableaux(shape=[4,3,2,1]).list_highest_weight()
> 1 loop, best of 3: 24.3 s per loop
> ```

`list_highest_weight` is interesting in terms of the paper we've been working on, the length of that list would be related to a certain Schur decomposition.

> * The documentation in line 1648 is not clear to me, isn't it just constructed applying the lowering operators (you could link to those using `:meth:...`) to the highest weights?

I'll include better explanation.

> * I think that `to_matrix` should be a private method - suppose that the internal representation changes, then it possibly doesn't make much sense anymore.

Agree.

> * I'm a bit unsure about `reading_word_with_positions`, possibly that should be private, too.

Agree.

> * any chance for the skew version?

I'll be modifying the functions for the skew version. Expect it next week.



---

archive/issue_comments_341837.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nPlease clarify: isn't `list_highest_weight` the same as `crystals.ShiftedPrimedTableaux(shape=[4,3,2,1]).highest_weight_vectors()`?",
    "created_at": "2017-10-07T18:51:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341837",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:46" align="right">comment:46</div>

Please clarify: isn't `list_highest_weight` the same as `crystals.ShiftedPrimedTableaux(shape=[4,3,2,1]).highest_weight_vectors()`?



---

archive/issue_comments_341838.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@mantepse](#comment%3A44):\n\n> * any chance for the skew version?\n\nThe skew version should be in a new ticket. Let us first get the crystal into Sage. Then you can add code to deal with the skew cases.",
    "created_at": "2017-10-07T19:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341838",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@mantepse](#comment%3A44):

> * any chance for the skew version?

The skew version should be in a new ticket. Let us first get the crystal into Sage. Then you can add code to deal with the skew cases.



---

archive/issue_comments_341839.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nOK, sounds reasonable!",
    "created_at": "2017-10-07T19:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341839",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:48" align="right">comment:48</div>

OK, sounds reasonable!



---

archive/issue_comments_341840.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cc0e9b0183adb4f74661c847325f2c309e7a79c\"><code>2cc0e9b</code></a></td><td><code>Fixed minor issues</code></td></tr></table>\n",
    "created_at": "2017-10-07T21:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341840",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cc0e9b0183adb4f74661c847325f2c309e7a79c"><code>2cc0e9b</code></a></td><td><code>Fixed minor issues</code></td></tr></table>




---

archive/issue_comments_341841.json:
```json
{
    "body": "Changed commit from **[`9fa9406`](https://github.com/sagemath/sagetrac-mirror/commit/9fa940624649de1c9bdcefc3f6e279be037cca29)** to **[`2cc0e9b`](https://github.com/sagemath/sagetrac-mirror/commit/2cc0e9b0183adb4f74661c847325f2c309e7a79c)**",
    "created_at": "2017-10-07T21:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341841",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9fa9406`](https://github.com/sagemath/sagetrac-mirror/commit/9fa940624649de1c9bdcefc3f6e279be037cca29)** to **[`2cc0e9b`](https://github.com/sagemath/sagetrac-mirror/commit/2cc0e9b0183adb4f74661c847325f2c309e7a79c)**



---

archive/issue_comments_341842.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nHi Kirill,\n\nYou changed the name of the crystal class as we discussed, but you did not change the tests. Now there are a lot of failing tests!",
    "created_at": "2017-10-07T22:05:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341842",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:50" align="right">comment:50</div>

Hi Kirill,

You changed the name of the crystal class as we discussed, but you did not change the tests. Now there are a lot of failing tests!



---

archive/issue_comments_341843.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nThere are still missing doctests:\n\n```\nMissing doctests:\n     * line 1172: def __init__(self, shape, max_elt)\n     * line 1439: def __init__(self, weight, shape)\n     * line 1710: def add_strip(sub_tab, full_tab, length)\n```",
    "created_at": "2017-10-07T22:06:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341843",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:51" align="right">comment:51</div>

There are still missing doctests:

```
Missing doctests:
     * line 1172: def __init__(self, shape, max_elt)
     * line 1439: def __init__(self, weight, shape)
     * line 1710: def add_strip(sub_tab, full_tab, length)
```



---

archive/issue_comments_341844.json:
```json
{
    "body": "<div id=\"comment:52\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9a52ca23dec0bc018c8d7d264d2fa263b3e17e1\"><code>a9a52ca</code></a></td><td><code>Fixed doctests</code></td></tr></table>\n",
    "created_at": "2017-10-09T17:36:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341844",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:52"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9a52ca23dec0bc018c8d7d264d2fa263b3e17e1"><code>a9a52ca</code></a></td><td><code>Fixed doctests</code></td></tr></table>




---

archive/issue_comments_341845.json:
```json
{
    "body": "Changed commit from **[`2cc0e9b`](https://github.com/sagemath/sagetrac-mirror/commit/2cc0e9b0183adb4f74661c847325f2c309e7a79c)** to **[`a9a52ca`](https://github.com/sagemath/sagetrac-mirror/commit/a9a52ca23dec0bc018c8d7d264d2fa263b3e17e1)**",
    "created_at": "2017-10-09T17:36:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341845",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2cc0e9b`](https://github.com/sagemath/sagetrac-mirror/commit/2cc0e9b0183adb4f74661c847325f2c309e7a79c)** to **[`a9a52ca`](https://github.com/sagemath/sagetrac-mirror/commit/a9a52ca23dec0bc018c8d7d264d2fa263b3e17e1)**



---

archive/issue_comments_341846.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6e95408910a26d45f6370edfbbb300a9ee3bd2b\"><code>f6e9540</code></a></td><td><code>Fixed documentation</code></td></tr></table>\n",
    "created_at": "2017-10-09T18:00:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341846",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6e95408910a26d45f6370edfbbb300a9ee3bd2b"><code>f6e9540</code></a></td><td><code>Fixed documentation</code></td></tr></table>




---

archive/issue_comments_341847.json:
```json
{
    "body": "Changed commit from **[`a9a52ca`](https://github.com/sagemath/sagetrac-mirror/commit/a9a52ca23dec0bc018c8d7d264d2fa263b3e17e1)** to **[`f6e9540`](https://github.com/sagemath/sagetrac-mirror/commit/f6e95408910a26d45f6370edfbbb300a9ee3bd2b)**",
    "created_at": "2017-10-09T18:00:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341847",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a9a52ca`](https://github.com/sagemath/sagetrac-mirror/commit/a9a52ca23dec0bc018c8d7d264d2fa263b3e17e1)** to **[`f6e9540`](https://github.com/sagemath/sagetrac-mirror/commit/f6e95408910a26d45f6370edfbbb300a9ee3bd2b)**



---

archive/issue_comments_341848.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nHi Kirill,\n\nI still get a lot of doctest failures when running the tests on 'tableau_shifted_primed.py'\n\n```\nsage -t tableau_shifted_primed.py  # 171 doctests failed\n```\nCan you please fix them?\n\nThanks,\n\nAnne",
    "created_at": "2017-10-16T03:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341848",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:54" align="right">comment:54</div>

Hi Kirill,

I still get a lot of doctest failures when running the tests on 'tableau_shifted_primed.py'

```
sage -t tableau_shifted_primed.py  # 171 doctests failed
```
Can you please fix them?

Thanks,

Anne



---

archive/issue_comments_341849.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nHi Anne,\n\nI don't know why that happened, it passed all the tests for me.\n\nReplying to [@anneschilling](#comment%3A54):\n> Hi Kirill,\n> \n> I still get a lot of doctest failures when running the tests on 'tableau_shifted_primed.py'\n> \n> ```\n> sage -t tableau_shifted_primed.py  # 171 doctests failed\n> ```\n> Can you please fix them?\n> \n> Thanks,\n> \n> Anne",
    "created_at": "2017-10-16T03:21:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341849",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:55" align="right">comment:55</div>

Hi Anne,

I don't know why that happened, it passed all the tests for me.

Replying to [@anneschilling](#comment%3A54):
> Hi Kirill,
> 
> I still get a lot of doctest failures when running the tests on 'tableau_shifted_primed.py'
> 
> ```
> sage -t tableau_shifted_primed.py  # 171 doctests failed
> ```
> Can you please fix them?
> 
> Thanks,
> 
> Anne



---

archive/issue_comments_341850.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nI get the following \n\n```\nsage: B = crystals.ShiftedPrimedTableaux([3,2],2)\nsage: TestSuite(B).run(verbose=True)\nrunning ._test_an_element() . . . pass\nrunning ._test_cardinality() . . . pass\nrunning ._test_category() . . . pass\nrunning ._test_elements() . . .\n  Running the test suite of self.an_element()\n  running ._test_category() . . . pass\n  running ._test_eq() . . . pass\n  running ._test_new() . . . pass\n  running ._test_not_implemented_methods() . . . pass\n  running ._test_pickling() . . . pass\n  pass\nrunning ._test_elements_eq_reflexive() . . . pass\nrunning ._test_elements_eq_symmetric() . . . pass\nrunning ._test_elements_eq_transitive() . . . pass\nrunning ._test_elements_neq() . . . pass\nrunning ._test_enumerated_set_contains() . . . pass\nrunning ._test_enumerated_set_iter_cardinality() . . . pass\nrunning ._test_enumerated_set_iter_list() . . . pass\nrunning ._test_eq() . . . pass\nrunning ._test_fast_iter() . . . pass\nrunning ._test_new() . . . pass\nrunning ._test_not_implemented_methods() . . . pass\nrunning ._test_pickling() . . . pass\nrunning ._test_some_elements() . . . pass\nrunning ._test_stembridge_local_axioms() . . . fail\nTraceback (most recent call last):\n  File \"/Applications/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py\", line 294, in run\n    test_method(tester = tester)\n  File \"/Applications/sage/local/lib/python2.7/site-packages/sage/categories/regular_crystals.py\", line 313, in _test_stembridge_local_axioms\n    goodness = x._test_stembridge_local_axioms(index_set, verbose)\n  File \"sage/structure/element.pyx\", line 484, in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4368)\n    return self.getattr_from_category(name)\n  File \"sage/structure/element.pyx\", line 497, in sage.structure.element.Element.getattr_from_category (build/cythonized/sage/structure/element.c:4477)\n    return getattr_from_other_class(self, cls, name)\n  File \"sage/cpython/getattr.pyx\", line 249, in sage.cpython.getattr.getattr_from_other_class (build/cythonized/sage/cpython/getattr.c:1830)\n    raise dummy_attribute_error\nAttributeError: 'ShiftedPrimedTableaux_all_with_category.element_class' object has no attribute '_test_stembridge_local_axioms'\n------------------------------------------------------------\nThe following tests failed: _test_stembridge_local_axioms\n```",
    "created_at": "2017-10-16T04:54:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341850",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:56" align="right">comment:56</div>

I get the following 

```
sage: B = crystals.ShiftedPrimedTableaux([3,2],2)
sage: TestSuite(B).run(verbose=True)
running ._test_an_element() . . . pass
running ._test_cardinality() . . . pass
running ._test_category() . . . pass
running ._test_elements() . . .
  Running the test suite of self.an_element()
  running ._test_category() . . . pass
  running ._test_eq() . . . pass
  running ._test_new() . . . pass
  running ._test_not_implemented_methods() . . . pass
  running ._test_pickling() . . . pass
  pass
running ._test_elements_eq_reflexive() . . . pass
running ._test_elements_eq_symmetric() . . . pass
running ._test_elements_eq_transitive() . . . pass
running ._test_elements_neq() . . . pass
running ._test_enumerated_set_contains() . . . pass
running ._test_enumerated_set_iter_cardinality() . . . pass
running ._test_enumerated_set_iter_list() . . . pass
running ._test_eq() . . . pass
running ._test_fast_iter() . . . pass
running ._test_new() . . . pass
running ._test_not_implemented_methods() . . . pass
running ._test_pickling() . . . pass
running ._test_some_elements() . . . pass
running ._test_stembridge_local_axioms() . . . fail
Traceback (most recent call last):
  File "/Applications/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 294, in run
    test_method(tester = tester)
  File "/Applications/sage/local/lib/python2.7/site-packages/sage/categories/regular_crystals.py", line 313, in _test_stembridge_local_axioms
    goodness = x._test_stembridge_local_axioms(index_set, verbose)
  File "sage/structure/element.pyx", line 484, in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4368)
    return self.getattr_from_category(name)
  File "sage/structure/element.pyx", line 497, in sage.structure.element.Element.getattr_from_category (build/cythonized/sage/structure/element.c:4477)
    return getattr_from_other_class(self, cls, name)
  File "sage/cpython/getattr.pyx", line 249, in sage.cpython.getattr.getattr_from_other_class (build/cythonized/sage/cpython/getattr.c:1830)
    raise dummy_attribute_error
AttributeError: 'ShiftedPrimedTableaux_all_with_category.element_class' object has no attribute '_test_stembridge_local_axioms'
------------------------------------------------------------
The following tests failed: _test_stembridge_local_axioms
```



---

archive/issue_comments_341851.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nIt looks like the tableau class doesn't inherit method `_test_stembridge_local_axioms`.\nDo you know why this happens?\n\nReplying to [@anneschilling](#comment%3A56):\n> I get the following \n> \n> ```\n> sage: B = crystals.ShiftedPrimedTableaux([3,2],2)\n> sage: TestSuite(B).run(verbose=True)\n> running ._test_an_element() . . . pass\n> running ._test_cardinality() . . . pass\n> running ._test_category() . . . pass\n> running ._test_elements() . . .\n>   Running the test suite of self.an_element()\n>   running ._test_category() . . . pass\n>   running ._test_eq() . . . pass\n>   running ._test_new() . . . pass\n>   running ._test_not_implemented_methods() . . . pass\n>   running ._test_pickling() . . . pass\n>   pass\n> running ._test_elements_eq_reflexive() . . . pass\n> running ._test_elements_eq_symmetric() . . . pass\n> running ._test_elements_eq_transitive() . . . pass\n> running ._test_elements_neq() . . . pass\n> running ._test_enumerated_set_contains() . . . pass\n> running ._test_enumerated_set_iter_cardinality() . . . pass\n> running ._test_enumerated_set_iter_list() . . . pass\n> running ._test_eq() . . . pass\n> running ._test_fast_iter() . . . pass\n> running ._test_new() . . . pass\n> running ._test_not_implemented_methods() . . . pass\n> running ._test_pickling() . . . pass\n> running ._test_some_elements() . . . pass\n> running ._test_stembridge_local_axioms() . . . fail\n> Traceback (most recent call last):\n>   File \"/Applications/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py\", line 294, in run\n>     test_method(tester = tester)\n>   File \"/Applications/sage/local/lib/python2.7/site-packages/sage/categories/regular_crystals.py\", line 313, in _test_stembridge_local_axioms\n>     goodness = x._test_stembridge_local_axioms(index_set, verbose)\n>   File \"sage/structure/element.pyx\", line 484, in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4368)\n>     return self.getattr_from_category(name)\n>   File \"sage/structure/element.pyx\", line 497, in sage.structure.element.Element.getattr_from_category (build/cythonized/sage/structure/element.c:4477)\n>     return getattr_from_other_class(self, cls, name)\n>   File \"sage/cpython/getattr.pyx\", line 249, in sage.cpython.getattr.getattr_from_other_class (build/cythonized/sage/cpython/getattr.c:1830)\n>     raise dummy_attribute_error\n> AttributeError: 'ShiftedPrimedTableaux_all_with_category.element_class' object has no attribute '_test_stembridge_local_axioms'\n> ------------------------------------------------------------\n> The following tests failed: _test_stembridge_local_axioms\n> ```",
    "created_at": "2017-10-16T16:53:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341851",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:57" align="right">comment:57</div>

It looks like the tableau class doesn't inherit method `_test_stembridge_local_axioms`.
Do you know why this happens?

Replying to [@anneschilling](#comment%3A56):
> I get the following 
> 
> ```
> sage: B = crystals.ShiftedPrimedTableaux([3,2],2)
> sage: TestSuite(B).run(verbose=True)
> running ._test_an_element() . . . pass
> running ._test_cardinality() . . . pass
> running ._test_category() . . . pass
> running ._test_elements() . . .
>   Running the test suite of self.an_element()
>   running ._test_category() . . . pass
>   running ._test_eq() . . . pass
>   running ._test_new() . . . pass
>   running ._test_not_implemented_methods() . . . pass
>   running ._test_pickling() . . . pass
>   pass
> running ._test_elements_eq_reflexive() . . . pass
> running ._test_elements_eq_symmetric() . . . pass
> running ._test_elements_eq_transitive() . . . pass
> running ._test_elements_neq() . . . pass
> running ._test_enumerated_set_contains() . . . pass
> running ._test_enumerated_set_iter_cardinality() . . . pass
> running ._test_enumerated_set_iter_list() . . . pass
> running ._test_eq() . . . pass
> running ._test_fast_iter() . . . pass
> running ._test_new() . . . pass
> running ._test_not_implemented_methods() . . . pass
> running ._test_pickling() . . . pass
> running ._test_some_elements() . . . pass
> running ._test_stembridge_local_axioms() . . . fail
> Traceback (most recent call last):
>   File "/Applications/sage/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 294, in run
>     test_method(tester = tester)
>   File "/Applications/sage/local/lib/python2.7/site-packages/sage/categories/regular_crystals.py", line 313, in _test_stembridge_local_axioms
>     goodness = x._test_stembridge_local_axioms(index_set, verbose)
>   File "sage/structure/element.pyx", line 484, in sage.structure.element.Element.__getattr__ (build/cythonized/sage/structure/element.c:4368)
>     return self.getattr_from_category(name)
>   File "sage/structure/element.pyx", line 497, in sage.structure.element.Element.getattr_from_category (build/cythonized/sage/structure/element.c:4477)
>     return getattr_from_other_class(self, cls, name)
>   File "sage/cpython/getattr.pyx", line 249, in sage.cpython.getattr.getattr_from_other_class (build/cythonized/sage/cpython/getattr.c:1830)
>     raise dummy_attribute_error
> AttributeError: 'ShiftedPrimedTableaux_all_with_category.element_class' object has no attribute '_test_stembridge_local_axioms'
> ------------------------------------------------------------
> The following tests failed: _test_stembridge_local_axioms
> ```



---

archive/issue_comments_341852.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@sagetrac-kbparamonov](#comment%3A57):\n> It looks like the tableau class doesn't inherit method `_test_stembridge_local_axioms`.\n> Do you know why this happens?\n\nHere is the problem:\n\n```\nsage: SPTC = crystals.ShiftedPrimedTableaux([4,2], 2)\nsage: SPTC.an_element()\n[(1.0, 1.0, 1.0, 1.0), (2.0, 2.0)]\nsage: type(_)\n<class 'sage.combinat.tableau_shifted_primed.ShiftedPrimedTableaux_all_with_category.element_class'>\nsage: type(SPTC)\n<class 'sage.combinat.tableau_shifted_primed.SPTCrystal_with_category'>\nsage: SPTC.element_class\n<class 'sage.combinat.tableau_shifted_primed.SPTCrystal_with_category.element_class'>\n```\nThe elements of `SPTC` are not subclasses of `SPTC.element_class`. Hence, they belong to the wrong category.\n\n```\nsage: SPTC.an_element().category()\nCategory of elements of Shifted Primed Tableaux\n```\n\nI also do not see why you have `ShiftedPrimedTableauxCrystal` and the subclass `SPTCrystal`. It seems like the SPT crystals really should be the same as the SPT with a fixed shape and max element, but I've only quickly looked at it.\n\nI am pushing a few simple tweaks. We can work on this more tomorrow.",
    "created_at": "2017-10-18T04:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341852",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@sagetrac-kbparamonov](#comment%3A57):
> It looks like the tableau class doesn't inherit method `_test_stembridge_local_axioms`.
> Do you know why this happens?

Here is the problem:

```
sage: SPTC = crystals.ShiftedPrimedTableaux([4,2], 2)
sage: SPTC.an_element()
[(1.0, 1.0, 1.0, 1.0), (2.0, 2.0)]
sage: type(_)
<class 'sage.combinat.tableau_shifted_primed.ShiftedPrimedTableaux_all_with_category.element_class'>
sage: type(SPTC)
<class 'sage.combinat.tableau_shifted_primed.SPTCrystal_with_category'>
sage: SPTC.element_class
<class 'sage.combinat.tableau_shifted_primed.SPTCrystal_with_category.element_class'>
```
The elements of `SPTC` are not subclasses of `SPTC.element_class`. Hence, they belong to the wrong category.

```
sage: SPTC.an_element().category()
Category of elements of Shifted Primed Tableaux
```

I also do not see why you have `ShiftedPrimedTableauxCrystal` and the subclass `SPTCrystal`. It seems like the SPT crystals really should be the same as the SPT with a fixed shape and max element, but I've only quickly looked at it.

I am pushing a few simple tweaks. We can work on this more tomorrow.



---

archive/issue_comments_341853.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8942346f80dac6e8496933d68f7453062933b5af\"><code>8942346</code></a></td><td><code>Merge branch 'public/combinat/primed_tableaux_22921' of git://trac.sagemath.org/sage into public/combinat/primed_tableaux_22921</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/841c08d8edaf4ddcebedccf9081e05355db06f5d\"><code>841c08d</code></a></td><td><code>Some simple doc formatting things.</code></td></tr></table>\n",
    "created_at": "2017-10-18T04:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341853",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8942346f80dac6e8496933d68f7453062933b5af"><code>8942346</code></a></td><td><code>Merge branch 'public/combinat/primed_tableaux_22921' of git://trac.sagemath.org/sage into public/combinat/primed_tableaux_22921</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/841c08d8edaf4ddcebedccf9081e05355db06f5d"><code>841c08d</code></a></td><td><code>Some simple doc formatting things.</code></td></tr></table>




---

archive/issue_comments_341854.json:
```json
{
    "body": "Changed commit from **[`f6e9540`](https://github.com/sagemath/sagetrac-mirror/commit/f6e95408910a26d45f6370edfbbb300a9ee3bd2b)** to **[`841c08d`](https://github.com/sagemath/sagetrac-mirror/commit/841c08d8edaf4ddcebedccf9081e05355db06f5d)**",
    "created_at": "2017-10-18T04:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341854",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f6e9540`](https://github.com/sagemath/sagetrac-mirror/commit/f6e95408910a26d45f6370edfbbb300a9ee3bd2b)** to **[`841c08d`](https://github.com/sagemath/sagetrac-mirror/commit/841c08d8edaf4ddcebedccf9081e05355db06f5d)**



---

archive/issue_comments_341855.json:
```json
{
    "body": "Changed commit from **[`841c08d`](https://github.com/sagemath/sagetrac-mirror/commit/841c08d8edaf4ddcebedccf9081e05355db06f5d)** to **[`8d6bbfe`](https://github.com/sagemath/sagetrac-mirror/commit/8d6bbfef2cbf3865c72e630ee1eb0ddcb0bed639)**",
    "created_at": "2017-10-18T18:40:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341855",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`841c08d`](https://github.com/sagemath/sagetrac-mirror/commit/841c08d8edaf4ddcebedccf9081e05355db06f5d)** to **[`8d6bbfe`](https://github.com/sagemath/sagetrac-mirror/commit/8d6bbfef2cbf3865c72e630ee1eb0ddcb0bed639)**



---

archive/issue_comments_341856.json:
```json
{
    "body": "<div id=\"comment:60\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3fe8dcc0cbbcf8cfd9a029def18be37e18375d13\"><code>3fe8dcc</code></a></td><td><code>Initial skew implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b6fb54a72be70c61f6baca28dab70d6607841a3\"><code>3b6fb54</code></a></td><td><code>Skew</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4b7371acd0483303db093dca6af0eb126cc8085\"><code>f4b7371</code></a></td><td><code>More skew</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d556df0e7341c81c9d59db356c53d272cdc2b49\"><code>5d556df</code></a></td><td><code>Skewed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86ca57b716f3c67b9e74416d7a028db8e463cc25\"><code>86ca57b</code></a></td><td><code>Skewed version</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d6bbfef2cbf3865c72e630ee1eb0ddcb0bed639\"><code>8d6bbfe</code></a></td><td><code>Skewed version</code></td></tr></table>\n",
    "created_at": "2017-10-18T18:40:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341856",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:60"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3fe8dcc0cbbcf8cfd9a029def18be37e18375d13"><code>3fe8dcc</code></a></td><td><code>Initial skew implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b6fb54a72be70c61f6baca28dab70d6607841a3"><code>3b6fb54</code></a></td><td><code>Skew</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4b7371acd0483303db093dca6af0eb126cc8085"><code>f4b7371</code></a></td><td><code>More skew</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d556df0e7341c81c9d59db356c53d272cdc2b49"><code>5d556df</code></a></td><td><code>Skewed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86ca57b716f3c67b9e74416d7a028db8e463cc25"><code>86ca57b</code></a></td><td><code>Skewed version</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d6bbfef2cbf3865c72e630ee1eb0ddcb0bed639"><code>8d6bbfe</code></a></td><td><code>Skewed version</code></td></tr></table>




---

archive/issue_comments_341857.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0efbae46f953d923d9c18e30e47615b3ad4b2665\"><code>0efbae4</code></a></td><td><code>Some cleanup and simplification of the class structure.</code></td></tr></table>\n",
    "created_at": "2017-10-18T21:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341857",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0efbae46f953d923d9c18e30e47615b3ad4b2665"><code>0efbae4</code></a></td><td><code>Some cleanup and simplification of the class structure.</code></td></tr></table>




---

archive/issue_comments_341858.json:
```json
{
    "body": "Changed commit from **[`8d6bbfe`](https://github.com/sagemath/sagetrac-mirror/commit/8d6bbfef2cbf3865c72e630ee1eb0ddcb0bed639)** to **[`0efbae4`](https://github.com/sagemath/sagetrac-mirror/commit/0efbae46f953d923d9c18e30e47615b3ad4b2665)**",
    "created_at": "2017-10-18T21:27:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341858",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8d6bbfe`](https://github.com/sagemath/sagetrac-mirror/commit/8d6bbfef2cbf3865c72e630ee1eb0ddcb0bed639)** to **[`0efbae4`](https://github.com/sagemath/sagetrac-mirror/commit/0efbae46f953d923d9c18e30e47615b3ad4b2665)**



---

archive/issue_comments_341859.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nCan you please add a reference to the literature to the documentation for shifted primed tableaux? I'm actually really curious to see a reference, independent of the code, because in my work \"shifted shaded tableaux\" come up and I wonder if they are the same objects. From a cursory look at the documentation they seem quite close.",
    "created_at": "2017-10-22T19:05:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341859",
    "user": "https://github.com/AndrewAtLarge"
}
```

<div id="comment:62" align="right">comment:62</div>

Can you please add a reference to the literature to the documentation for shifted primed tableaux? I'm actually really curious to see a reference, independent of the code, because in my work "shifted shaded tableaux" come up and I wonder if they are the same objects. From a cursory look at the documentation they seem quite close.



---

archive/issue_comments_341860.json:
```json
{
    "body": "Changed reviewer from **aschilling, tscrim** to **aschilling, tscrim, andrew.mathas**",
    "created_at": "2017-10-22T19:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341860",
    "user": "https://github.com/AndrewAtLarge"
}
```

Changed reviewer from **aschilling, tscrim** to **aschilling, tscrim, andrew.mathas**



---

archive/issue_comments_341861.json:
```json
{
    "body": "Changed reviewer from **aschilling, tscrim, andrew.mathas** to **aschilling, tscrim**",
    "created_at": "2017-10-22T19:05:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341861",
    "user": "https://github.com/AndrewAtLarge"
}
```

Changed reviewer from **aschilling, tscrim, andrew.mathas** to **aschilling, tscrim**



---

archive/issue_comments_341862.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nGraham, Kirill, or Anne can probably answer better than I can, but a good starting point would be their paper:\n\n```\n.. [HPS2017] Graham Hawkes, Kirill Paramonov, and Anne Schilling.\n             *Crystal analysis of type* `C` *Stanley symmetric functions*.\n             Preprint, :arxiv:`1704.00889`.\n```",
    "created_at": "2017-10-23T03:52:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341862",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:65" align="right">comment:65</div>

Graham, Kirill, or Anne can probably answer better than I can, but a good starting point would be their paper:

```
.. [HPS2017] Graham Hawkes, Kirill Paramonov, and Anne Schilling.
             *Crystal analysis of type* `C` *Stanley symmetric functions*.
             Preprint, :arxiv:`1704.00889`.
```



---

archive/issue_comments_341863.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nI believe those tableaux were first introduced by Haiman here: http://www.sciencedirect.com/science/article/pii/0097316589900150\nand recently were developed by Serrano here: https://arxiv.org/abs/0811.2057\n\nReplying to [@AndrewAtLarge](#comment%3A62):\n> Can you please add a reference to the literature to the documentation for shifted primed tableaux? I'm actually really curious to see a reference, independent of the code, because in my work \"shifted shaded tableaux\" come up and I wonder if they are the same objects. From a cursory look at the documentation they seem quite close.",
    "created_at": "2017-10-23T06:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341863",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:66" align="right">comment:66</div>

I believe those tableaux were first introduced by Haiman here: http://www.sciencedirect.com/science/article/pii/0097316589900150
and recently were developed by Serrano here: https://arxiv.org/abs/0811.2057

Replying to [@AndrewAtLarge](#comment%3A62):
> Can you please add a reference to the literature to the documentation for shifted primed tableaux? I'm actually really curious to see a reference, independent of the code, because in my work "shifted shaded tableaux" come up and I wonder if they are the same objects. From a cursory look at the documentation they seem quite close.



---

archive/issue_comments_341864.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@sagetrac-kbparamonov](#comment%3A66):\n> I believe those tableaux were first introduced by Haiman here: http://www.sciencedirect.com/science/article/pii/0097316589900150\n> and recently were developed by Serrano here: https://arxiv.org/abs/0811.2057\n\nKirill, could you please add those references to the code? Also, did you fix the Stembridge axiom issues?",
    "created_at": "2017-10-23T16:32:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341864",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@sagetrac-kbparamonov](#comment%3A66):
> I believe those tableaux were first introduced by Haiman here: http://www.sciencedirect.com/science/article/pii/0097316589900150
> and recently were developed by Serrano here: https://arxiv.org/abs/0811.2057

Kirill, could you please add those references to the code? Also, did you fix the Stembridge axiom issues?



---

archive/issue_comments_341865.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nSounds good. Travis fixed the Stembridge axioms issues last week.\n\nReplying to [@anneschilling](#comment%3A67):\n> Replying to [@sagetrac-kbparamonov](#comment%3A66):\n> > I believe those tableaux were first introduced by Haiman here: http://www.sciencedirect.com/science/article/pii/0097316589900150\n> > and recently were developed by Serrano here: https://arxiv.org/abs/0811.2057\n> \n> \n> Kirill, could you please add those references to the code? Also, did you fix the Stembridge axiom issues?",
    "created_at": "2017-10-23T16:40:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341865",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:68" align="right">comment:68</div>

Sounds good. Travis fixed the Stembridge axioms issues last week.

Replying to [@anneschilling](#comment%3A67):
> Replying to [@sagetrac-kbparamonov](#comment%3A66):
> > I believe those tableaux were first introduced by Haiman here: http://www.sciencedirect.com/science/article/pii/0097316589900150
> > and recently were developed by Serrano here: https://arxiv.org/abs/0811.2057
> 
> 
> Kirill, could you please add those references to the code? Also, did you fix the Stembridge axiom issues?



---

archive/issue_comments_341866.json:
```json
{
    "body": "Changed commit from **[`0efbae4`](https://github.com/sagemath/sagetrac-mirror/commit/0efbae46f953d923d9c18e30e47615b3ad4b2665)** to **[`b8b49c4`](https://github.com/sagemath/sagetrac-mirror/commit/b8b49c4a04529794cc4402e5cc2a4160d1131b3d)**",
    "created_at": "2017-12-28T01:43:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341866",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0efbae4`](https://github.com/sagemath/sagetrac-mirror/commit/0efbae46f953d923d9c18e30e47615b3ad4b2665)** to **[`b8b49c4`](https://github.com/sagemath/sagetrac-mirror/commit/b8b49c4a04529794cc4402e5cc2a4160d1131b3d)**



---

archive/issue_comments_341867.json:
```json
{
    "body": "<div id=\"comment:69\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/086b424d274aede008ab5e204cae0271467c7797\"><code>086b424</code></a></td><td><code>Merge branch 'develop' into public/combinat/primed_tableaux_22921</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4932e354ad48db06efc572418334a240ade7d6d6\"><code>4932e35</code></a></td><td><code>Merge branch 'develop' into public/combinat/primed_tableaux_22921</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8b49c4a04529794cc4402e5cc2a4160d1131b3d\"><code>b8b49c4</code></a></td><td><code>fixed some typos in 22921</code></td></tr></table>\n",
    "created_at": "2017-12-28T01:43:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341867",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:69"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/086b424d274aede008ab5e204cae0271467c7797"><code>086b424</code></a></td><td><code>Merge branch 'develop' into public/combinat/primed_tableaux_22921</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4932e354ad48db06efc572418334a240ade7d6d6"><code>4932e35</code></a></td><td><code>Merge branch 'develop' into public/combinat/primed_tableaux_22921</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8b49c4a04529794cc4402e5cc2a4160d1131b3d"><code>b8b49c4</code></a></td><td><code>fixed some typos in 22921</code></td></tr></table>




---

archive/issue_comments_341868.json:
```json
{
    "body": "Changed reviewer from **aschilling, tscrim** to **Anne Schilling, Travis Scrimshaw**",
    "created_at": "2017-12-28T01:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341868",
    "user": "https://github.com/anneschilling"
}
```

Changed reviewer from **aschilling, tscrim** to **Anne Schilling, Travis Scrimshaw**



---

archive/issue_comments_341869.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nHi Kirill,\n\nOk, let us try to get this ticket into Sage! I have tested the code extensively and the crystals seem to be correct. I rebased the code on the latest development version and also fixed some small typos. \n\nThere are still some small issues with the coverage:\n\n```\nsage -coverage tableau_shifted_primed.py \n------------------------------------------------------------------------\nSCORE tableau_shifted_primed.py: 95.9% (47 of 49)\n\nMissing documentation:\n     * line 1305: def __classcall_private__(cls, shape, max_elt=None, skew=None)\n\nMissing doctests:\n     * line 1416: def module_generators(self)\n\nPossibly wrong (function name doesn't occur in doctests):\n     * line 1755: def add_strip(sub_tab, full_tab, length)\n------------------------------------------------------------------------\n```\nCould you please fix those?\n\nAlso, the ticket description mentions that this code is based on #20041. Can this be removed now? It also mentions various insertion algorithms, but I think they are not implemented in this ticket. Could you please update the description?\n\nThank you!\n\nAnne",
    "created_at": "2017-12-28T01:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341869",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:70" align="right">comment:70</div>

Hi Kirill,

Ok, let us try to get this ticket into Sage! I have tested the code extensively and the crystals seem to be correct. I rebased the code on the latest development version and also fixed some small typos. 

There are still some small issues with the coverage:

```
sage -coverage tableau_shifted_primed.py 
------------------------------------------------------------------------
SCORE tableau_shifted_primed.py: 95.9% (47 of 49)

Missing documentation:
     * line 1305: def __classcall_private__(cls, shape, max_elt=None, skew=None)

Missing doctests:
     * line 1416: def module_generators(self)

Possibly wrong (function name doesn't occur in doctests):
     * line 1755: def add_strip(sub_tab, full_tab, length)
------------------------------------------------------------------------
```
Could you please fix those?

Also, the ticket description mentions that this code is based on #20041. Can this be removed now? It also mentions various insertion algorithms, but I think they are not implemented in this ticket. Could you please update the description?

Thank you!

Anne



---

archive/issue_comments_341870.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nThat would be great!\n\nTHe insertion algorithms are available via #23896, which could be reviewed as soon as this is done! (Hint :-)",
    "created_at": "2017-12-28T08:27:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341870",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:71" align="right">comment:71</div>

That would be great!

THe insertion algorithms are available via #23896, which could be reviewed as soon as this is done! (Hint :-)



---

archive/issue_comments_341871.json:
```json
{
    "body": "Changed commit from **[`b8b49c4`](https://github.com/sagemath/sagetrac-mirror/commit/b8b49c4a04529794cc4402e5cc2a4160d1131b3d)** to **[`64cb74d`](https://github.com/sagemath/sagetrac-mirror/commit/64cb74d9fb91952dfa504193376ca8c8be9e2718)**",
    "created_at": "2017-12-29T18:16:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341871",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b8b49c4`](https://github.com/sagemath/sagetrac-mirror/commit/b8b49c4a04529794cc4402e5cc2a4160d1131b3d)** to **[`64cb74d`](https://github.com/sagemath/sagetrac-mirror/commit/64cb74d9fb91952dfa504193376ca8c8be9e2718)**



---

archive/issue_comments_341872.json:
```json
{
    "body": "<div id=\"comment:72\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64cb74d9fb91952dfa504193376ca8c8be9e2718\"><code>64cb74d</code></a></td><td><code>Fixed numpy issues and missing docs.</code></td></tr></table>\n",
    "created_at": "2017-12-29T18:16:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341872",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:72"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64cb74d9fb91952dfa504193376ca8c8be9e2718"><code>64cb74d</code></a></td><td><code>Fixed numpy issues and missing docs.</code></td></tr></table>




---

archive/issue_comments_341873.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,2 @@\n-This ticket implements a new class for unimodal tableaux, signed primed tableaux, and related insertion algorithms such as Kraskiewicz insertion and mixed Haiman insertion.\n+This ticket implements a new class for shifted primed tableaux, and an A-type crystal for those objects.\n \n-This ticket is related to, but different from #20041 and will build on top of it.\n``````\n",
    "created_at": "2017-12-29T18:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341873",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,2 @@
-This ticket implements a new class for unimodal tableaux, signed primed tableaux, and related insertion algorithms such as Kraskiewicz insertion and mixed Haiman insertion.
+This ticket implements a new class for shifted primed tableaux, and an A-type crystal for those objects.
 
-This ticket is related to, but different from #20041 and will build on top of it.
``````




---

archive/issue_comments_341874.json:
```json
{
    "body": "Changed keywords from **shifted tableaux, insertion algorithms** to **shifted primed tableaux, crystals**",
    "created_at": "2017-12-29T18:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341874",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

Changed keywords from **shifted tableaux, insertion algorithms** to **shifted primed tableaux, crystals**



---

archive/issue_events_316862.json:
```json
{
    "actor": "https://github.com/sagetrac-kbparamonov",
    "created_at": "2017-12-29T18:20:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316862"
}
```



---

archive/issue_events_316863.json:
```json
{
    "actor": "https://github.com/sagetrac-kbparamonov",
    "created_at": "2017-12-29T18:20:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316863"
}
```



---

archive/issue_comments_341875.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nHi Anne,\n\nI've removed the use of numpy in the code, could you check if everything still works?\nOther issues have been fixed.\n\nReplying to [@anneschilling](#comment%3A70):\n> Hi Kirill,\n> \n> Ok, let us try to get this ticket into Sage! I have tested the code extensively and the crystals seem to be correct. I rebased the code on the latest development version and also fixed some small typos. \n> \n> There are still some small issues with the coverage:\n> \n> ```\n> sage -coverage tableau_shifted_primed.py \n> ------------------------------------------------------------------------\n> SCORE tableau_shifted_primed.py: 95.9% (47 of 49)\n> \n> Missing documentation:\n>      * line 1305: def __classcall_private__(cls, shape, max_elt=None, skew=None)\n> \n> Missing doctests:\n>      * line 1416: def module_generators(self)\n> \n> Possibly wrong (function name doesn't occur in doctests):\n>      * line 1755: def add_strip(sub_tab, full_tab, length)\n> ------------------------------------------------------------------------\n> ```\n> Could you please fix those?\n> \n> Also, the ticket description mentions that this code is based on #20041. Can this be removed now? It also mentions various insertion algorithms, but I think they are not implemented in this ticket. Could you please update the description?\n> \n> Thank you!\n> \n> Anne",
    "created_at": "2017-12-29T18:25:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341875",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:74" align="right">comment:74</div>

Hi Anne,

I've removed the use of numpy in the code, could you check if everything still works?
Other issues have been fixed.

Replying to [@anneschilling](#comment%3A70):
> Hi Kirill,
> 
> Ok, let us try to get this ticket into Sage! I have tested the code extensively and the crystals seem to be correct. I rebased the code on the latest development version and also fixed some small typos. 
> 
> There are still some small issues with the coverage:
> 
> ```
> sage -coverage tableau_shifted_primed.py 
> ------------------------------------------------------------------------
> SCORE tableau_shifted_primed.py: 95.9% (47 of 49)
> 
> Missing documentation:
>      * line 1305: def __classcall_private__(cls, shape, max_elt=None, skew=None)
> 
> Missing doctests:
>      * line 1416: def module_generators(self)
> 
> Possibly wrong (function name doesn't occur in doctests):
>      * line 1755: def add_strip(sub_tab, full_tab, length)
> ------------------------------------------------------------------------
> ```
> Could you please fix those?
> 
> Also, the ticket description mentions that this code is based on #20041. Can this be removed now? It also mentions various insertion algorithms, but I think they are not implemented in this ticket. Could you please update the description?
> 
> Thank you!
> 
> Anne



---

archive/issue_comments_341876.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nHi Kirill,\n\nThanks for the fixes. There seems to be some problem with the documentation:\n\n```\n[dochtml] [combinat ] /Applications/sage/local/lib/python2.7/site-packages/sage/combinat/tableau_shifted_primed.py:docstring of sage.combinat.tableau_shifted_primed.ShiftedPrimedTableaux_shape:9: WARNING: citation not found: HPS17\n```\n\nAnne",
    "created_at": "2017-12-30T06:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341876",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:75" align="right">comment:75</div>

Hi Kirill,

Thanks for the fixes. There seems to be some problem with the documentation:

```
[dochtml] [combinat ] /Applications/sage/local/lib/python2.7/site-packages/sage/combinat/tableau_shifted_primed.py:docstring of sage.combinat.tableau_shifted_primed.ShiftedPrimedTableaux_shape:9: WARNING: citation not found: HPS17
```

Anne



---

archive/issue_comments_341877.json:
```json
{
    "body": "Changed commit from **[`64cb74d`](https://github.com/sagemath/sagetrac-mirror/commit/64cb74d9fb91952dfa504193376ca8c8be9e2718)** to **[`b1d7d2e`](https://github.com/sagemath/sagetrac-mirror/commit/b1d7d2e55e04a298a3a611c041dfa6bfa74adf2c)**",
    "created_at": "2018-01-01T09:37:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341877",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`64cb74d`](https://github.com/sagemath/sagetrac-mirror/commit/64cb74d9fb91952dfa504193376ca8c8be9e2718)** to **[`b1d7d2e`](https://github.com/sagemath/sagetrac-mirror/commit/b1d7d2e55e04a298a3a611c041dfa6bfa74adf2c)**



---

archive/issue_comments_341878.json:
```json
{
    "body": "<div id=\"comment:76\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1d7d2e55e04a298a3a611c041dfa6bfa74adf2c\"><code>b1d7d2e</code></a></td><td><code>Fixed reference to the paper</code></td></tr></table>\n",
    "created_at": "2018-01-01T09:37:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341878",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:76"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1d7d2e55e04a298a3a611c041dfa6bfa74adf2c"><code>b1d7d2e</code></a></td><td><code>Fixed reference to the paper</code></td></tr></table>




---

archive/issue_comments_341879.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nAlright, should be fixed.\n\nReplying to [@sagetrac-git](#comment%3A76):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1d7d2e55e04a298a3a611c041dfa6bfa74adf2c\"><code>b1d7d2e</code></a></td><td><code>Fixed reference to the paper</code></td></tr></table>\n",
    "created_at": "2018-01-01T09:37:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341879",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:77" align="right">comment:77</div>

Alright, should be fixed.

Replying to [@sagetrac-git](#comment%3A76):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1d7d2e55e04a298a3a611c041dfa6bfa74adf2c"><code>b1d7d2e</code></a></td><td><code>Fixed reference to the paper</code></td></tr></table>




---

archive/issue_comments_341880.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nI think that `shape` should return a skew partition, when necessary, and a partition otherwise.  Currently it returns lists.  For example:\n\n```\n        if self._skew is None:\n            return Partition([len(_) for _ in self])\n        return SkewPartition(([len(self[i])+self._skew[i]\n                               for i in range(len(self._skew))] +\n                              [len(self[i])\n                               for i in range(len(self._skew), len(self))],\n                              self._skew))\n\n```\n(doctests would have to be adapted)",
    "created_at": "2018-01-01T16:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341880",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:78" align="right">comment:78</div>

I think that `shape` should return a skew partition, when necessary, and a partition otherwise.  Currently it returns lists.  For example:

```
        if self._skew is None:
            return Partition([len(_) for _ in self])
        return SkewPartition(([len(self[i])+self._skew[i]
                               for i in range(len(self._skew))] +
                              [len(self[i])
                               for i in range(len(self._skew), len(self))],
                              self._skew))

```
(doctests would have to be adapted)



---

archive/issue_comments_341881.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nI am not sure whether implementing `__call__` for shifted tableaux is a good idea.  In any case, it is not quite clear to me what it does:\n\n```\nsage: s = ShiftedPrimedTableau([[\"2p\",3,4],[2]],skew=[2,1])\nsage: s.pp()\n .  .  2' 3  4 \n    .  2 \nsage: s(0,0)\n3.0\nsage: s(0,1)\n4.0\nsage: s(0,2)\n1.5\nsage: s(0,3)\n3.0\nsage: s(0,4)\n4.0\nsage: s(0,5)\nIndexError: invalid cell\nsage: s(1,0)\n2.0\nsage: s(1,1)\n2.0\nsage: s(1,2)\nIndexError: invalid cell\nsage: s(2,0)\nIndexError: invalid cell\n```",
    "created_at": "2018-01-01T18:24:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341881",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:79" align="right">comment:79</div>

I am not sure whether implementing `__call__` for shifted tableaux is a good idea.  In any case, it is not quite clear to me what it does:

```
sage: s = ShiftedPrimedTableau([["2p",3,4],[2]],skew=[2,1])
sage: s.pp()
 .  .  2' 3  4 
    .  2 
sage: s(0,0)
3.0
sage: s(0,1)
4.0
sage: s(0,2)
1.5
sage: s(0,3)
3.0
sage: s(0,4)
4.0
sage: s(0,5)
IndexError: invalid cell
sage: s(1,0)
2.0
sage: s(1,1)
2.0
sage: s(1,2)
IndexError: invalid cell
sage: s(2,0)
IndexError: invalid cell
```



---

archive/issue_comments_341882.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nReplying to [@mantepse](#comment%3A78):\n> I think that `shape` should return a skew partition, when necessary, and a partition otherwise.  Currently it returns lists.  For example:\n> \n> ```\n>         if self._skew is None:\n>             return Partition([len(_) for _ in self])\n>         return SkewPartition(([len(self[i])+self._skew[i]\n>                                for i in range(len(self._skew))] +\n>                               [len(self[i])\n>                                for i in range(len(self._skew), len(self))],\n>                               self._skew))\n> \n> ```\n> (doctests would have to be adapted)\n\nHi Kirill,\n\nThank you for your changes. I agree with Martin that the shape should be in `Partitions` or `SkewPartitions`. In fact, the same is true for the weight of a crystal element (cf. with the weight of a tableaux crystal element):\n\n```\nsage: B = crystals.ShiftedPrimedTableaux([4,3,1], 5)\nsage: b = B.an_element()\nsage: type(b.weight())\n<type 'tuple'>\nsage: B = crystals.Tableaux(['A',2],shape=[2,1])\nsage: b = B.an_element()\nsage: type(b.weight())\n<class 'sage.combinat.root_system.type_A.AmbientSpace_with_category.element_class'>\n```\n\nAnne",
    "created_at": "2018-01-01T23:10:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341882",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:80" align="right">comment:80</div>

Replying to [@mantepse](#comment%3A78):
> I think that `shape` should return a skew partition, when necessary, and a partition otherwise.  Currently it returns lists.  For example:
> 
> ```
>         if self._skew is None:
>             return Partition([len(_) for _ in self])
>         return SkewPartition(([len(self[i])+self._skew[i]
>                                for i in range(len(self._skew))] +
>                               [len(self[i])
>                                for i in range(len(self._skew), len(self))],
>                               self._skew))
> 
> ```
> (doctests would have to be adapted)

Hi Kirill,

Thank you for your changes. I agree with Martin that the shape should be in `Partitions` or `SkewPartitions`. In fact, the same is true for the weight of a crystal element (cf. with the weight of a tableaux crystal element):

```
sage: B = crystals.ShiftedPrimedTableaux([4,3,1], 5)
sage: b = B.an_element()
sage: type(b.weight())
<type 'tuple'>
sage: B = crystals.Tableaux(['A',2],shape=[2,1])
sage: b = B.an_element()
sage: type(b.weight())
<class 'sage.combinat.root_system.type_A.AmbientSpace_with_category.element_class'>
```

Anne



---

archive/issue_comments_341883.json:
```json
{
    "body": "Changed commit from **[`b1d7d2e`](https://github.com/sagemath/sagetrac-mirror/commit/b1d7d2e55e04a298a3a611c041dfa6bfa74adf2c)** to **[`8aaf077`](https://github.com/sagemath/sagetrac-mirror/commit/8aaf077b7c3fd4183a9c2b41f6e46ef83cd4a93d)**",
    "created_at": "2018-01-02T01:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341883",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b1d7d2e`](https://github.com/sagemath/sagetrac-mirror/commit/b1d7d2e55e04a298a3a611c041dfa6bfa74adf2c)** to **[`8aaf077`](https://github.com/sagemath/sagetrac-mirror/commit/8aaf077b7c3fd4183a9c2b41f6e46ef83cd4a93d)**



---

archive/issue_comments_341884.json:
```json
{
    "body": "<div id=\"comment:81\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c02b807b935ae18c1b132e4895cc2650668802a8\"><code>c02b807</code></a></td><td><code>Merge branch 'develop' into public/combinat/primed_tableaux_22921</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8aaf077b7c3fd4183a9c2b41f6e46ef83cd4a93d\"><code>8aaf077</code></a></td><td><code>Fix some documentation</code></td></tr></table>\n",
    "created_at": "2018-01-02T01:29:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341884",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:81"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c02b807b935ae18c1b132e4895cc2650668802a8"><code>c02b807</code></a></td><td><code>Merge branch 'develop' into public/combinat/primed_tableaux_22921</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8aaf077b7c3fd4183a9c2b41f6e46ef83cd4a93d"><code>8aaf077</code></a></td><td><code>Fix some documentation</code></td></tr></table>




---

archive/issue_comments_341885.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nHi Kirill,\n\nI merged in the latest development branch and also fixed some documentation. Please use this version when you fix the shape and weight to be of the correct type.\n\nThank you,\n\nAnne",
    "created_at": "2018-01-02T01:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341885",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:82" align="right">comment:82</div>

Hi Kirill,

I merged in the latest development branch and also fixed some documentation. Please use this version when you fix the shape and weight to be of the correct type.

Thank you,

Anne



---

archive/issue_comments_341886.json:
```json
{
    "body": "<div id=\"comment:83\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/df0f1192d57d634290cad6612257bbed2e6a84ba\"><code>df0f119</code></a></td><td><code>Removed call, changed shape type</code></td></tr></table>\n",
    "created_at": "2018-01-02T07:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341886",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:83"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/df0f1192d57d634290cad6612257bbed2e6a84ba"><code>df0f119</code></a></td><td><code>Removed call, changed shape type</code></td></tr></table>




---

archive/issue_comments_341887.json:
```json
{
    "body": "Changed commit from **[`8aaf077`](https://github.com/sagemath/sagetrac-mirror/commit/8aaf077b7c3fd4183a9c2b41f6e46ef83cd4a93d)** to **[`df0f119`](https://github.com/sagemath/sagetrac-mirror/commit/df0f1192d57d634290cad6612257bbed2e6a84ba)**",
    "created_at": "2018-01-02T07:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341887",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8aaf077`](https://github.com/sagemath/sagetrac-mirror/commit/8aaf077b7c3fd4183a9c2b41f6e46ef83cd4a93d)** to **[`df0f119`](https://github.com/sagemath/sagetrac-mirror/commit/df0f1192d57d634290cad6612257bbed2e6a84ba)**



---

archive/issue_comments_341888.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nGood point, thank you!\n\nReplying to [@mantepse](#comment%3A78):\n> I think that `shape` should return a skew partition, when necessary, and a partition otherwise.  Currently it returns lists.  For example:\n> \n> ```\n>         if self._skew is None:\n>             return Partition([len(_) for _ in self])\n>         return SkewPartition(([len(self[i])+self._skew[i]\n>                                for i in range(len(self._skew))] +\n>                               [len(self[i])\n>                                for i in range(len(self._skew), len(self))],\n>                               self._skew))\n> \n> ```\n> (doctests would have to be adapted)",
    "created_at": "2018-01-02T07:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341888",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:84" align="right">comment:84</div>

Good point, thank you!

Replying to [@mantepse](#comment%3A78):
> I think that `shape` should return a skew partition, when necessary, and a partition otherwise.  Currently it returns lists.  For example:
> 
> ```
>         if self._skew is None:
>             return Partition([len(_) for _ in self])
>         return SkewPartition(([len(self[i])+self._skew[i]
>                                for i in range(len(self._skew))] +
>                               [len(self[i])
>                                for i in range(len(self._skew), len(self))],
>                               self._skew))
> 
> ```
> (doctests would have to be adapted)



---

archive/issue_comments_341889.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nThat makes sense.\nHow do I change type of the weight of crystal elements?\n\nReplying to [@anneschilling](#comment%3A80):\n> Replying to [@mantepse](#comment%3A78):\n> > I think that `shape` should return a skew partition, when necessary, and a partition otherwise.  Currently it returns lists.  For example:\n> > \n> > ```\n> >         if self._skew is None:\n> >             return Partition([len(_) for _ in self])\n> >         return SkewPartition(([len(self[i])+self._skew[i]\n> >                                for i in range(len(self._skew))] +\n> >                               [len(self[i])\n> >                                for i in range(len(self._skew), len(self))],\n> >                               self._skew))\n> > \n> > ```\n> > (doctests would have to be adapted)\n> \n> \n> Hi Kirill,\n> \n> Thank you for your changes. I agree with Martin that the shape should be in `Partitions` or `SkewPartitions`. In fact, the same is true for the weight of a crystal element (cf. with the weight of a tableaux crystal element):\n> \n> ```\n> sage: B = crystals.ShiftedPrimedTableaux([4,3,1], 5)\n> sage: b = B.an_element()\n> sage: type(b.weight())\n> <type 'tuple'>\n> sage: B = crystals.Tableaux(['A',2],shape=[2,1])\n> sage: b = B.an_element()\n> sage: type(b.weight())\n> <class 'sage.combinat.root_system.type_A.AmbientSpace_with_category.element_class'>\n> ```\n> \n> Anne",
    "created_at": "2018-01-02T07:55:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341889",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:85" align="right">comment:85</div>

That makes sense.
How do I change type of the weight of crystal elements?

Replying to [@anneschilling](#comment%3A80):
> Replying to [@mantepse](#comment%3A78):
> > I think that `shape` should return a skew partition, when necessary, and a partition otherwise.  Currently it returns lists.  For example:
> > 
> > ```
> >         if self._skew is None:
> >             return Partition([len(_) for _ in self])
> >         return SkewPartition(([len(self[i])+self._skew[i]
> >                                for i in range(len(self._skew))] +
> >                               [len(self[i])
> >                                for i in range(len(self._skew), len(self))],
> >                               self._skew))
> > 
> > ```
> > (doctests would have to be adapted)
> 
> 
> Hi Kirill,
> 
> Thank you for your changes. I agree with Martin that the shape should be in `Partitions` or `SkewPartitions`. In fact, the same is true for the weight of a crystal element (cf. with the weight of a tableaux crystal element):
> 
> ```
> sage: B = crystals.ShiftedPrimedTableaux([4,3,1], 5)
> sage: b = B.an_element()
> sage: type(b.weight())
> <type 'tuple'>
> sage: B = crystals.Tableaux(['A',2],shape=[2,1])
> sage: b = B.an_element()
> sage: type(b.weight())
> <class 'sage.combinat.root_system.type_A.AmbientSpace_with_category.element_class'>
> ```
> 
> Anne



---

archive/issue_comments_341890.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nReplying to [@sagetrac-kbparamonov](#comment%3A85):\n> That makes sense.\n> How do I change type of the weight of crystal elements?\n\nYou can do\n\n```\nsage: B = crystals.ShiftedPrimedTableaux([4,3,1], 5)\nsage: b = B.an_element()\nsage: b\n[(1.0, 1.0, 1.0, 1.0), (2.0, 2.0, 2.0), (3.0,)]\nsage: B.weight_lattice_realization()(b.weight())\n(4, 3, 1, 0, 0)\n```",
    "created_at": "2018-01-02T22:24:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341890",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:86" align="right">comment:86</div>

Replying to [@sagetrac-kbparamonov](#comment%3A85):
> That makes sense.
> How do I change type of the weight of crystal elements?

You can do

```
sage: B = crystals.ShiftedPrimedTableaux([4,3,1], 5)
sage: b = B.an_element()
sage: b
[(1.0, 1.0, 1.0, 1.0), (2.0, 2.0, 2.0), (3.0,)]
sage: B.weight_lattice_realization()(b.weight())
(4, 3, 1, 0, 0)
```



---

archive/issue_comments_341891.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nI'm still not sure how to implement this.\n\nReplying to [@anneschilling](#comment%3A86):\n> Replying to [@sagetrac-kbparamonov](#comment%3A85):\n> > That makes sense.\n> > How do I change type of the weight of crystal elements?\n> \n> \n> You can do\n> \n> ```\n> sage: B = crystals.ShiftedPrimedTableaux([4,3,1], 5)\n> sage: b = B.an_element()\n> sage: b\n> [(1.0, 1.0, 1.0, 1.0), (2.0, 2.0, 2.0), (3.0,)]\n> sage: B.weight_lattice_realization()(b.weight())\n> (4, 3, 1, 0, 0)\n> ```",
    "created_at": "2018-01-04T22:15:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341891",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:87" align="right">comment:87</div>

I'm still not sure how to implement this.

Replying to [@anneschilling](#comment%3A86):
> Replying to [@sagetrac-kbparamonov](#comment%3A85):
> > That makes sense.
> > How do I change type of the weight of crystal elements?
> 
> 
> You can do
> 
> ```
> sage: B = crystals.ShiftedPrimedTableaux([4,3,1], 5)
> sage: b = B.an_element()
> sage: b
> [(1.0, 1.0, 1.0, 1.0), (2.0, 2.0, 2.0), (3.0,)]
> sage: B.weight_lattice_realization()(b.weight())
> (4, 3, 1, 0, 0)
> ```



---

archive/issue_comments_341892.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\n\n```\n        weight = tuple([flat.count(i+1) for i in range(max_ind)])\n        if self._skew is None:\n            P = ShiftedPrimedTableaux(self.shape(), max_element=max_ind)\n            return P.weight_lattice_realization()(weight)\n        return weight\n```\n\n(needs more doctesting)",
    "created_at": "2018-01-05T05:09:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341892",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:88" align="right">comment:88</div>


```
        weight = tuple([flat.count(i+1) for i in range(max_ind)])
        if self._skew is None:
            P = ShiftedPrimedTableaux(self.shape(), max_element=max_ind)
            return P.weight_lattice_realization()(weight)
        return weight
```

(needs more doctesting)



---

archive/issue_comments_341893.json:
```json
{
    "body": "Changed commit from **[`df0f119`](https://github.com/sagemath/sagetrac-mirror/commit/df0f1192d57d634290cad6612257bbed2e6a84ba)** to **[`8850224`](https://github.com/sagemath/sagetrac-mirror/commit/8850224e15f67795770e75a9762a9c129991ffbf)**",
    "created_at": "2018-01-05T22:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341893",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`df0f119`](https://github.com/sagemath/sagetrac-mirror/commit/df0f1192d57d634290cad6612257bbed2e6a84ba)** to **[`8850224`](https://github.com/sagemath/sagetrac-mirror/commit/8850224e15f67795770e75a9762a9c129991ffbf)**



---

archive/issue_comments_341894.json:
```json
{
    "body": "<div id=\"comment:89\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8850224e15f67795770e75a9762a9c129991ffbf\"><code>8850224</code></a></td><td><code>Fixed weight type for crystals, minor skew tableaux fixes.</code></td></tr></table>\n",
    "created_at": "2018-01-05T22:48:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341894",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:89"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8850224e15f67795770e75a9762a9c129991ffbf"><code>8850224</code></a></td><td><code>Fixed weight type for crystals, minor skew tableaux fixes.</code></td></tr></table>




---

archive/issue_comments_341895.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nThanks for help!\n\nReplying to [@mantepse](#comment%3A88):\n> \n> ```\n>         weight = tuple([flat.count(i+1) for i in range(max_ind)])\n>         if self._skew is None:\n>             P = ShiftedPrimedTableaux(self.shape(), max_element=max_ind)\n>             return P.weight_lattice_realization()(weight)\n>         return weight\n> ```\n> \n> (needs more doctesting)",
    "created_at": "2018-01-05T22:49:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341895",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:90" align="right">comment:90</div>

Thanks for help!

Replying to [@mantepse](#comment%3A88):
> 
> ```
>         weight = tuple([flat.count(i+1) for i in range(max_ind)])
>         if self._skew is None:
>             P = ShiftedPrimedTableaux(self.shape(), max_element=max_ind)
>             return P.weight_lattice_realization()(weight)
>         return weight
> ```
> 
> (needs more doctesting)



---

archive/issue_comments_341896.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nAre you sure that you want to test only the following?\n\n```\nif isinstance(self.parent(), ShiftedPrimedTableaux_shape):\n```\nI don't know - should `weight` only return an element of the `AmbientSpace` when the tableau is initialised with a specific shape?",
    "created_at": "2018-01-05T23:26:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341896",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:91" align="right">comment:91</div>

Are you sure that you want to test only the following?

```
if isinstance(self.parent(), ShiftedPrimedTableaux_shape):
```
I don't know - should `weight` only return an element of the `AmbientSpace` when the tableau is initialised with a specific shape?



---

archive/issue_comments_341897.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nFinally, I am not yet convinced that `list_highest_weight` and possibly also `list_decreasing_weight` should be there, see [comment:44](#comment%3A44) above.",
    "created_at": "2018-01-05T23:31:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341897",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:92" align="right">comment:92</div>

Finally, I am not yet convinced that `list_highest_weight` and possibly also `list_decreasing_weight` should be there, see [comment:44](#comment%3A44) above.



---

archive/issue_comments_341898.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nI need\n\n```\n    return self.parent().weight_lattice_realization()(weight)\n```\nfor the fixed-shape tableaux to get the crystal right, which doesn't work for other parents.\nI didn't add that for other parents because we need to change the weight type only for crystal elements.\nIt's not hard to fix this though.\n\nReplying to [@mantepse](#comment%3A91):\n> Are you sure that you want to test only the following?\n> \n> ```\n> if isinstance(self.parent(), ShiftedPrimedTableaux_shape):\n> ```\n> I don't know - should `weight` only return an element of the `AmbientSpace` when the tableau is initialised with a specific shape?\n>\n>",
    "created_at": "2018-01-05T23:38:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341898",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:93" align="right">comment:93</div>

I need

```
    return self.parent().weight_lattice_realization()(weight)
```
for the fixed-shape tableaux to get the crystal right, which doesn't work for other parents.
I didn't add that for other parents because we need to change the weight type only for crystal elements.
It's not hard to fix this though.

Replying to [@mantepse](#comment%3A91):
> Are you sure that you want to test only the following?
> 
> ```
> if isinstance(self.parent(), ShiftedPrimedTableaux_shape):
> ```
> I don't know - should `weight` only return an element of the `AmbientSpace` when the tableau is initialised with a specific shape?
>
>



---

archive/issue_comments_341899.json:
```json
{
    "body": "<div id=\"comment:94\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1da4b48716cc80492cce88ddfa5739d8fe0ff34c\"><code>1da4b48</code></a></td><td><code>Removed list_highest_weight</code></td></tr></table>\n",
    "created_at": "2018-01-05T23:49:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341899",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:94"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1da4b48716cc80492cce88ddfa5739d8fe0ff34c"><code>1da4b48</code></a></td><td><code>Removed list_highest_weight</code></td></tr></table>




---

archive/issue_comments_341900.json:
```json
{
    "body": "Changed commit from **[`8850224`](https://github.com/sagemath/sagetrac-mirror/commit/8850224e15f67795770e75a9762a9c129991ffbf)** to **[`1da4b48`](https://github.com/sagemath/sagetrac-mirror/commit/1da4b48716cc80492cce88ddfa5739d8fe0ff34c)**",
    "created_at": "2018-01-05T23:49:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341900",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8850224`](https://github.com/sagemath/sagetrac-mirror/commit/8850224e15f67795770e75a9762a9c129991ffbf)** to **[`1da4b48`](https://github.com/sagemath/sagetrac-mirror/commit/1da4b48716cc80492cce88ddfa5739d8fe0ff34c)**



---

archive/issue_comments_341901.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nI think `list_decreasing_weight` is useful to get module generators for the crystal.\n\nReplying to [@mantepse](#comment%3A92):\n> Finally, I am not yet convinced that `list_highest_weight` and possibly also `list_decreasing_weight` should be there, see [comment:44](#comment%3A44) above.  \n>\n>",
    "created_at": "2018-01-05T23:50:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341901",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:95" align="right">comment:95</div>

I think `list_decreasing_weight` is useful to get module generators for the crystal.

Replying to [@mantepse](#comment%3A92):
> Finally, I am not yet convinced that `list_highest_weight` and possibly also `list_decreasing_weight` should be there, see [comment:44](#comment%3A44) above.  
>
>



---

archive/issue_comments_341902.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nReplying to [@sagetrac-kbparamonov](#comment%3A95):\n> I think `list_decreasing_weight` is useful to get module generators for the crystal.\n> \n> Replying to [@mantepse](#comment%3A92):\n> > Finally, I am not yet convinced that `list_highest_weight` and possibly also `list_decreasing_weight` should be there, see [comment:44](#comment%3A44) above.  \n> > \n\nYou could just move that code into `module_generators` as `list_decreasing_weight` is not used elsewhere.",
    "created_at": "2018-01-06T00:10:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341902",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:96" align="right">comment:96</div>

Replying to [@sagetrac-kbparamonov](#comment%3A95):
> I think `list_decreasing_weight` is useful to get module generators for the crystal.
> 
> Replying to [@mantepse](#comment%3A92):
> > Finally, I am not yet convinced that `list_highest_weight` and possibly also `list_decreasing_weight` should be there, see [comment:44](#comment%3A44) above.  
> > 

You could just move that code into `module_generators` as `list_decreasing_weight` is not used elsewhere.



---

archive/issue_comments_341903.json:
```json
{
    "body": "Changed commit from **[`1da4b48`](https://github.com/sagemath/sagetrac-mirror/commit/1da4b48716cc80492cce88ddfa5739d8fe0ff34c)** to **[`1a03e0b`](https://github.com/sagemath/sagetrac-mirror/commit/1a03e0b7947ad9ed06a1e21b81cd5660880972ff)**",
    "created_at": "2018-01-06T01:10:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341903",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1da4b48`](https://github.com/sagemath/sagetrac-mirror/commit/1da4b48716cc80492cce88ddfa5739d8fe0ff34c)** to **[`1a03e0b`](https://github.com/sagemath/sagetrac-mirror/commit/1a03e0b7947ad9ed06a1e21b81cd5660880972ff)**



---

archive/issue_comments_341904.json:
```json
{
    "body": "<div id=\"comment:97\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a03e0b7947ad9ed06a1e21b81cd5660880972ff\"><code>1a03e0b</code></a></td><td><code>Removed list_decreasing_weight</code></td></tr></table>\n",
    "created_at": "2018-01-06T01:10:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341904",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:97"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a03e0b7947ad9ed06a1e21b81cd5660880972ff"><code>1a03e0b</code></a></td><td><code>Removed list_decreasing_weight</code></td></tr></table>




---

archive/issue_comments_341905.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nI'm afraid I have some more requests, please excuse me.\n\n* for all other varieties of tableaux (eg. `CompositionTableaux`, `SemiStandardTableaux`) the maximal entry is \n\n```\n    - ``size`` -- the size of the composition tableaux\n    - ``shape`` -- the shape of the composition tableaux\n    - ``max_entry`` -- the maximum entry for the composition tableaux\n```\n    so I propose to rename both the parameter and the method from `max_element` to `max_entry`. Also, the alias `max_elt` should be removed.\n\n* the alias `_is_a` should be removed\n\n* this is more a question: should the method `is_highest_weight` really be included?  It would be the only instance of a separately defined `is_highest_weight`, all other crystals use the definition in `categories/crystals.py`.\n\n* currently, modules concerning tableaux follow the naming scheme `adjective_tableau.py`:\n\n```\ncomposition_tableau.py\nk_tableau.py\nlr_tableau.py\nribbon_shaped_tableau.py\nribbon_tableau.py\nskew_tableau.py\n```\n    so I propose to rename the module to `shifted_primed_tableau.py`.\n\n* The docstring of `weight` should be\n\n```\n        Return the weight of ``self``.\n```\n\n* The docstring of `pp` should be\n\n```\n        Pretty print ``self``.\n```\n\n* the doctest of `add_strip` (should this have a leading underscore?) should have an `# indirect doctest` flag:\n\n```\n\n    TESTS::\n\n        sage: list(ShiftedPrimedTableaux([3,1],(2,2)))                # indirect doctest\n        [[(1.0, 1.0, 2.0), (2.0,)], [(1.0, 1.0, 1.5), (2.0,)]]\n\n```\n\nAfter this, and if Anne and Travis agree, I'd say the ticked is done!  Many many thanks!  I will then update #23896 so we have the insertion algorithms, too.",
    "created_at": "2018-01-06T08:55:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341905",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:98" align="right">comment:98</div>

I'm afraid I have some more requests, please excuse me.

* for all other varieties of tableaux (eg. `CompositionTableaux`, `SemiStandardTableaux`) the maximal entry is 

```
    - ``size`` -- the size of the composition tableaux
    - ``shape`` -- the shape of the composition tableaux
    - ``max_entry`` -- the maximum entry for the composition tableaux
```
    so I propose to rename both the parameter and the method from `max_element` to `max_entry`. Also, the alias `max_elt` should be removed.

* the alias `_is_a` should be removed

* this is more a question: should the method `is_highest_weight` really be included?  It would be the only instance of a separately defined `is_highest_weight`, all other crystals use the definition in `categories/crystals.py`.

* currently, modules concerning tableaux follow the naming scheme `adjective_tableau.py`:

```
composition_tableau.py
k_tableau.py
lr_tableau.py
ribbon_shaped_tableau.py
ribbon_tableau.py
skew_tableau.py
```
    so I propose to rename the module to `shifted_primed_tableau.py`.

* The docstring of `weight` should be

```
        Return the weight of ``self``.
```

* The docstring of `pp` should be

```
        Pretty print ``self``.
```

* the doctest of `add_strip` (should this have a leading underscore?) should have an `# indirect doctest` flag:

```

    TESTS::

        sage: list(ShiftedPrimedTableaux([3,1],(2,2)))                # indirect doctest
        [[(1.0, 1.0, 2.0), (2.0,)], [(1.0, 1.0, 1.5), (2.0,)]]

```

After this, and if Anne and Travis agree, I'd say the ticked is done!  Many many thanks!  I will then update #23896 so we have the insertion algorithms, too.



---

archive/issue_comments_341906.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nI agree with Martin's comments! `is_highest_weight` should only be implemented if the explicit implementation is faster than the default one.",
    "created_at": "2018-01-06T16:55:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341906",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:99" align="right">comment:99</div>

I agree with Martin's comments! `is_highest_weight` should only be implemented if the explicit implementation is faster than the default one.



---

archive/issue_comments_341907.json:
```json
{
    "body": "Changed reviewer from **Anne Schilling, Travis Scrimshaw** to **Anne Schilling, Travis Scrimshaw, Martin Rubey**",
    "created_at": "2018-01-06T16:56:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341907",
    "user": "https://github.com/anneschilling"
}
```

Changed reviewer from **Anne Schilling, Travis Scrimshaw** to **Anne Schilling, Travis Scrimshaw, Martin Rubey**



---

archive/issue_comments_341908.json:
```json
{
    "body": "Changed commit from **[`1a03e0b`](https://github.com/sagemath/sagetrac-mirror/commit/1a03e0b7947ad9ed06a1e21b81cd5660880972ff)** to **[`9e2a43d`](https://github.com/sagemath/sagetrac-mirror/commit/9e2a43d054b4d9fab9f5ee33e51433223f7c0d99)**",
    "created_at": "2018-01-06T18:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341908",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1a03e0b`](https://github.com/sagemath/sagetrac-mirror/commit/1a03e0b7947ad9ed06a1e21b81cd5660880972ff)** to **[`9e2a43d`](https://github.com/sagemath/sagetrac-mirror/commit/9e2a43d054b4d9fab9f5ee33e51433223f7c0d99)**



---

archive/issue_comments_341909.json:
```json
{
    "body": "<div id=\"comment:101\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eab9d4f6b3011898d8ce515f696cef7ff082e0b4\"><code>eab9d4f</code></a></td><td><code>Minor fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e2a43d054b4d9fab9f5ee33e51433223f7c0d99\"><code>9e2a43d</code></a></td><td><code>Minor fixes</code></td></tr></table>\n",
    "created_at": "2018-01-06T18:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341909",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:101"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eab9d4f6b3011898d8ce515f696cef7ff082e0b4"><code>eab9d4f</code></a></td><td><code>Minor fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e2a43d054b4d9fab9f5ee33e51433223f7c0d99"><code>9e2a43d</code></a></td><td><code>Minor fixes</code></td></tr></table>




---

archive/issue_comments_341910.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nThank you for your suggestions! \nI agree with everything, except for `is_highest_weight` comment: my implementation checks whether the reading word is Yamanouchi, which is a bit fast than checking each operator `e(i)` directly.\n\nReplying to [@mantepse](#comment%3A98):\n> I'm afraid I have some more requests, please excuse me.\n> \n> * for all other varieties of tableaux (eg. `CompositionTableaux`, `SemiStandardTableaux`) the maximal entry is \n> \n> ```\n>     - ``size`` -- the size of the composition tableaux\n>     - ``shape`` -- the shape of the composition tableaux\n>     - ``max_entry`` -- the maximum entry for the composition tableaux\n> ```\n>     so I propose to rename both the parameter and the method from `max_element` to `max_entry`. Also, the alias `max_elt` should be removed.\n> \n> * the alias `_is_a` should be removed\n> \n> * this is more a question: should the method `is_highest_weight` really be included?  It would be the only instance of a separately defined `is_highest_weight`, all other crystals use the definition in `categories/crystals.py`.\n> \n> * currently, modules concerning tableaux follow the naming scheme `adjective_tableau.py`:\n> \n> ```\n> composition_tableau.py\n> k_tableau.py\n> lr_tableau.py\n> ribbon_shaped_tableau.py\n> ribbon_tableau.py\n> skew_tableau.py\n> ```\n>     so I propose to rename the module to `shifted_primed_tableau.py`.\n> \n> * The docstring of `weight` should be\n> \n> ```\n>         Return the weight of ``self``.\n> ```\n> \n> * The docstring of `pp` should be\n> \n> ```\n>         Pretty print ``self``.\n> ```\n> \n> * the doctest of `add_strip` (should this have a leading underscore?) should have an `# indirect doctest` flag:\n> \n> ```\n> \n>     TESTS::\n> \n>         sage: list(ShiftedPrimedTableaux([3,1],(2,2)))                # indirect doctest\n>         [[(1.0, 1.0, 2.0), (2.0,)], [(1.0, 1.0, 1.5), (2.0,)]]\n> \n> ```\n> \n> After this, and if Anne and Travis agree, I'd say the ticked is done!  Many many thanks!  I will then update #23896 so we have the insertion algorithms, too.",
    "created_at": "2018-01-06T18:10:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341910",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:102" align="right">comment:102</div>

Thank you for your suggestions! 
I agree with everything, except for `is_highest_weight` comment: my implementation checks whether the reading word is Yamanouchi, which is a bit fast than checking each operator `e(i)` directly.

Replying to [@mantepse](#comment%3A98):
> I'm afraid I have some more requests, please excuse me.
> 
> * for all other varieties of tableaux (eg. `CompositionTableaux`, `SemiStandardTableaux`) the maximal entry is 
> 
> ```
>     - ``size`` -- the size of the composition tableaux
>     - ``shape`` -- the shape of the composition tableaux
>     - ``max_entry`` -- the maximum entry for the composition tableaux
> ```
>     so I propose to rename both the parameter and the method from `max_element` to `max_entry`. Also, the alias `max_elt` should be removed.
> 
> * the alias `_is_a` should be removed
> 
> * this is more a question: should the method `is_highest_weight` really be included?  It would be the only instance of a separately defined `is_highest_weight`, all other crystals use the definition in `categories/crystals.py`.
> 
> * currently, modules concerning tableaux follow the naming scheme `adjective_tableau.py`:
> 
> ```
> composition_tableau.py
> k_tableau.py
> lr_tableau.py
> ribbon_shaped_tableau.py
> ribbon_tableau.py
> skew_tableau.py
> ```
>     so I propose to rename the module to `shifted_primed_tableau.py`.
> 
> * The docstring of `weight` should be
> 
> ```
>         Return the weight of ``self``.
> ```
> 
> * The docstring of `pp` should be
> 
> ```
>         Pretty print ``self``.
> ```
> 
> * the doctest of `add_strip` (should this have a leading underscore?) should have an `# indirect doctest` flag:
> 
> ```
> 
>     TESTS::
> 
>         sage: list(ShiftedPrimedTableaux([3,1],(2,2)))                # indirect doctest
>         [[(1.0, 1.0, 2.0), (2.0,)], [(1.0, 1.0, 1.5), (2.0,)]]
> 
> ```
> 
> After this, and if Anne and Travis agree, I'd say the ticked is done!  Many many thanks!  I will then update #23896 so we have the insertion algorithms, too.



---

archive/issue_comments_341911.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nReplying to [@sagetrac-kbparamonov](#comment%3A102):\n> Thank you for your suggestions! \n> I agree with everything, except for `is_highest_weight` comment: my implementation checks whether the reading word is Yamanouchi, which is a bit fast than checking each operator `e(i)` directly.\n\nPlease post your timings. Also, to be consistent with the crystal implementation of `is_highest_weight`, it must support an optional `index_set` argument.",
    "created_at": "2018-01-06T18:27:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341911",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:103" align="right">comment:103</div>

Replying to [@sagetrac-kbparamonov](#comment%3A102):
> Thank you for your suggestions! 
> I agree with everything, except for `is_highest_weight` comment: my implementation checks whether the reading word is Yamanouchi, which is a bit fast than checking each operator `e(i)` directly.

Please post your timings. Also, to be consistent with the crystal implementation of `is_highest_weight`, it must support an optional `index_set` argument.



---

archive/issue_comments_341912.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\nI actually do get better performance.  Kirill's version:\n\n```\nsage: %timeit [a for a in ShiftedPrimedTableaux(shape=[5,3,2], max_entry=4) if a.is_highest_weight()]\n1 loop, best of 3: 5.12 s per loop\nsage: L = [a for a in ShiftedPrimedTableaux(shape=[5,3,2], max_entry=4)]\nsage: len(L)\n960\nsage: %timeit [a for a in L if a.is_highest_weight()]\n10 loops, best of 3: 187 ms per loop\n```\nGeneric version:\n\n```\nsage: %timeit [a for a in ShiftedPrimedTableaux(shape=[5,3,2], max_entry=4) if a.is_highest_weight()]\n1 loop, best of 3: 5.66 s per loop\nsage: L = [a for a in ShiftedPrimedTableaux(shape=[5,3,2], max_entry=4)]\nsage: len(L)\n960\nsage: %timeit [a for a in L if a.is_highest_weight()]\n1 loop, best of 3: 825 ms per loop\n```",
    "created_at": "2018-01-06T19:01:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341912",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:104" align="right">comment:104</div>

I actually do get better performance.  Kirill's version:

```
sage: %timeit [a for a in ShiftedPrimedTableaux(shape=[5,3,2], max_entry=4) if a.is_highest_weight()]
1 loop, best of 3: 5.12 s per loop
sage: L = [a for a in ShiftedPrimedTableaux(shape=[5,3,2], max_entry=4)]
sage: len(L)
960
sage: %timeit [a for a in L if a.is_highest_weight()]
10 loops, best of 3: 187 ms per loop
```
Generic version:

```
sage: %timeit [a for a in ShiftedPrimedTableaux(shape=[5,3,2], max_entry=4) if a.is_highest_weight()]
1 loop, best of 3: 5.66 s per loop
sage: L = [a for a in ShiftedPrimedTableaux(shape=[5,3,2], max_entry=4)]
sage: len(L)
960
sage: %timeit [a for a in L if a.is_highest_weight()]
1 loop, best of 3: 825 ms per loop
```



---

archive/issue_comments_341913.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nKirill, I think you forgot to rename the file in the documentation links:\n\n```\n[dochtml] OSError: [combinat ] WARNING: /Applications/sage/src/doc/en/reference/combinat/sage/combinat/tableau_shifted_primed.rst:11: (WARNING/2) autodoc: failed to import module u'sage.combinat.tableau_shifted_primed'; the following exception was raised:\n```",
    "created_at": "2018-01-06T22:21:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341913",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:105" align="right">comment:105</div>

Kirill, I think you forgot to rename the file in the documentation links:

```
[dochtml] OSError: [combinat ] WARNING: /Applications/sage/src/doc/en/reference/combinat/sage/combinat/tableau_shifted_primed.rst:11: (WARNING/2) autodoc: failed to import module u'sage.combinat.tableau_shifted_primed'; the following exception was raised:
```



---

archive/issue_comments_341914.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nWhat file is responsible for generating the documentation? \n\nReplying to [@anneschilling](#comment%3A105):\n> Kirill, I think you forgot to rename the file in the documentation links:\n> \n> ```\n> [dochtml] OSError: [combinat ] WARNING: /Applications/sage/src/doc/en/reference/combinat/sage/combinat/tableau_shifted_primed.rst:11: (WARNING/2) autodoc: failed to import module u'sage.combinat.tableau_shifted_primed'; the following exception was raised:\n> ```",
    "created_at": "2018-01-06T22:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341914",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:106" align="right">comment:106</div>

What file is responsible for generating the documentation? 

Replying to [@anneschilling](#comment%3A105):
> Kirill, I think you forgot to rename the file in the documentation links:
> 
> ```
> [dochtml] OSError: [combinat ] WARNING: /Applications/sage/src/doc/en/reference/combinat/sage/combinat/tableau_shifted_primed.rst:11: (WARNING/2) autodoc: failed to import module u'sage.combinat.tableau_shifted_primed'; the following exception was raised:
> ```



---

archive/issue_comments_341915.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nReplying to [@sagetrac-kbparamonov](#comment%3A106):\n> What file is responsible for generating the documentation? \n\n`src/doc/en/reference/combinat/module_list.rst`\n\nAddendum: you also need to change `src/sage/combinat/catalog_partitions.py`.",
    "created_at": "2018-01-06T23:06:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341915",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:107" align="right">comment:107</div>

Replying to [@sagetrac-kbparamonov](#comment%3A106):
> What file is responsible for generating the documentation? 

`src/doc/en/reference/combinat/module_list.rst`

Addendum: you also need to change `src/sage/combinat/catalog_partitions.py`.



---

archive/issue_comments_341916.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\nI know its somewhat far into this, but I don't like using floating points for the half integers. They are inexact and have a bad representation (e.g., when you raise an error on an invalid object). I think you should have a class that represents the letters in your alphabet. You will have the logic more localized and can better handle input and gives you better control over your letter's behavior. It's more work, but I think it will result in cleaner and easier to maintain code. Internally, you can do half integers (which I would also represent with elements in `QQ`).\n\nHere are some additional comments:\n\n- Revert the changes in `combinat/partition.py` as they are not substantive and could create unnecessary merge conflicts.\n- Your `ShiftedPrimedTableau.__init__` should have a `check` argument that passes it off to `ClonableArray.__init__`.\n- It is good practice to not use `_` as an iterating variable, e.g., `t = [tuple(_) for _ in t]` (normally it is done this way when it is a dummy variable).\n- You need to also implement a `__ne__`:\n\n  ```\n  sage: t = ShiftedPrimedTableau([[1,\"2p\"]])\n  sage: t != ShiftedPrimedTableaux([2])([1,1.5])\n  True\n  ```\n- I think the checking that the shape is a partition should not be done within `check` but in `_element_constructor_`.\n- For the `_repr_`, you should link to the global options of `Tableaux` and mimic that.\n- The fact that you use `max_entry`, which is rounded up, leads to an extra space in the repr for a max entry of `9'`.\n- Is the `_to_matrix()` suppose to only handle non-skew shapes? In particular, I am worried about the `m = self.shape()[0]`.\n- You should put latex format docstring, such as <code>\\`i\\`</code> in `weight`.\n- Your indentation of numbered lists is 1 too many (it should be at the same level as the rest of the documentation).\n- In `f` and `e`, `self` should never be `None`.\n- Instead of `self.parent()(T)`, you should use `type(self)(self.parent(), T)`.\n- (As previously mentioned) `is_highest_weight` needs to take an `index_set` argument.\n- Classes do not have an `OUTPUT`. Also, I prefer to have `INPUT` after the descriptive text of a class (and methods) doc.\n- Anytime you have latex in a doc, you should make the string a raw string by doing `r\"\"\"`.\n- `None of the Shifted Primed Tableaux classes can be iterated over.` is not true.\n- Capitalization of `Shifted Primed Tableaux` should follow usual English capitalization (it is not a proper noun) in the documentation (not for the `_repr_`).\n- `ShiftedPrimedTableaux` is not a factory class, so the `__classcall_private__` is wrong. For that doc, I would just say \"Normalize and process input to return the correct parent and ensure a unique representation.\"\n- Be explicit about your arguments in `__classcall_private__` instead of having to do extra processing.\n- Do not be afraid to break the 80 char/line in code. For example, I would not do a line break here:\n\n  ```\n                        raise ValueError(\n                            'invalid argument for weight or shape')\n  ```\n- The `ShiftedPrimedTableaux.__contains__` looks effectively like the default one from `Parent`, so I think it could be removed.\n- Similarly for `ShiftedPrimedTableaux_all._element_constructor_`, which looses a more specific error message by the extra handling.\n- I do not understand what you mean by `nonincreasing weight`.\n- Actually, now that I've gotten through more of the code, I think you should implement your check by checking `T in self.parent()` and implementing all the actual checks in the `__contains__`.\n- For the crystals, you can use the iterator from the category.\n- Infinite sets are not a reason you cannot iterate.\n- For the `__contains__` and `_element_constructor_`, use `super` calls.\n- For the `__iter__`, it is not standard practice to return a generator object.\n- You do not need to repeatedly do `Element = ShiftedPrimedTableau`.\n- You should have a subclass of `ShiftedPrimedTableau` specifically for the case when it is a crystal.\n- You have a blank `yield` in `ShiftedPrimedTableaux_weight_shape.__iter__`, and `yield` is not a function.\n- In here `Partition(sorted(list(self._weight), key=int, reverse=True))):`, I don't understand why you need the `key=int` or why you need or should sort `self._weight`.",
    "created_at": "2018-01-07T00:30:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341916",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:108" align="right">comment:108</div>

I know its somewhat far into this, but I don't like using floating points for the half integers. They are inexact and have a bad representation (e.g., when you raise an error on an invalid object). I think you should have a class that represents the letters in your alphabet. You will have the logic more localized and can better handle input and gives you better control over your letter's behavior. It's more work, but I think it will result in cleaner and easier to maintain code. Internally, you can do half integers (which I would also represent with elements in `QQ`).

Here are some additional comments:

- Revert the changes in `combinat/partition.py` as they are not substantive and could create unnecessary merge conflicts.
- Your `ShiftedPrimedTableau.__init__` should have a `check` argument that passes it off to `ClonableArray.__init__`.
- It is good practice to not use `_` as an iterating variable, e.g., `t = [tuple(_) for _ in t]` (normally it is done this way when it is a dummy variable).
- You need to also implement a `__ne__`:

  ```
  sage: t = ShiftedPrimedTableau([[1,"2p"]])
  sage: t != ShiftedPrimedTableaux([2])([1,1.5])
  True
  ```
- I think the checking that the shape is a partition should not be done within `check` but in `_element_constructor_`.
- For the `_repr_`, you should link to the global options of `Tableaux` and mimic that.
- The fact that you use `max_entry`, which is rounded up, leads to an extra space in the repr for a max entry of `9'`.
- Is the `_to_matrix()` suppose to only handle non-skew shapes? In particular, I am worried about the `m = self.shape()[0]`.
- You should put latex format docstring, such as <code>\`i\`</code> in `weight`.
- Your indentation of numbered lists is 1 too many (it should be at the same level as the rest of the documentation).
- In `f` and `e`, `self` should never be `None`.
- Instead of `self.parent()(T)`, you should use `type(self)(self.parent(), T)`.
- (As previously mentioned) `is_highest_weight` needs to take an `index_set` argument.
- Classes do not have an `OUTPUT`. Also, I prefer to have `INPUT` after the descriptive text of a class (and methods) doc.
- Anytime you have latex in a doc, you should make the string a raw string by doing `r"""`.
- `None of the Shifted Primed Tableaux classes can be iterated over.` is not true.
- Capitalization of `Shifted Primed Tableaux` should follow usual English capitalization (it is not a proper noun) in the documentation (not for the `_repr_`).
- `ShiftedPrimedTableaux` is not a factory class, so the `__classcall_private__` is wrong. For that doc, I would just say "Normalize and process input to return the correct parent and ensure a unique representation."
- Be explicit about your arguments in `__classcall_private__` instead of having to do extra processing.
- Do not be afraid to break the 80 char/line in code. For example, I would not do a line break here:

  ```
                        raise ValueError(
                            'invalid argument for weight or shape')
  ```
- The `ShiftedPrimedTableaux.__contains__` looks effectively like the default one from `Parent`, so I think it could be removed.
- Similarly for `ShiftedPrimedTableaux_all._element_constructor_`, which looses a more specific error message by the extra handling.
- I do not understand what you mean by `nonincreasing weight`.
- Actually, now that I've gotten through more of the code, I think you should implement your check by checking `T in self.parent()` and implementing all the actual checks in the `__contains__`.
- For the crystals, you can use the iterator from the category.
- Infinite sets are not a reason you cannot iterate.
- For the `__contains__` and `_element_constructor_`, use `super` calls.
- For the `__iter__`, it is not standard practice to return a generator object.
- You do not need to repeatedly do `Element = ShiftedPrimedTableau`.
- You should have a subclass of `ShiftedPrimedTableau` specifically for the case when it is a crystal.
- You have a blank `yield` in `ShiftedPrimedTableaux_weight_shape.__iter__`, and `yield` is not a function.
- In here `Partition(sorted(list(self._weight), key=int, reverse=True))):`, I don't understand why you need the `key=int` or why you need or should sort `self._weight`.



---

archive/issue_comments_341917.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nAlright, I'll be working on your comments.\n\nReplying to [@tscrim](#comment%3A108):\n> I know its somewhat far into this, but I don't like using floating points for the half integers. They are inexact and have a bad representation (e.g., when you raise an error on an invalid object). I think you should have a class that represents the letters in your alphabet. You will have the logic more localized and can better handle input and gives you better control over your letter's behavior. It's more work, but I think it will result in cleaner and easier to maintain code. Internally, you can do half integers (which I would also represent with elements in `QQ`).\n> \n> Here are some additional comments:\n> \n> - Revert the changes in `combinat/partition.py` as they are not substantive and could create unnecessary merge conflicts.\n> - Your `ShiftedPrimedTableau.__init__` should have a `check` argument that passes it off to `ClonableArray.__init__`.\n> - It is good practice to not use `_` as an iterating variable, e.g., `t = [tuple(_) for _ in t]` (normally it is done this way when it is a dummy variable).\n> - You need to also implement a `__ne__`:\n> \n>   ```\n>   sage: t = ShiftedPrimedTableau([[1,\"2p\"]])\n>   sage: t != ShiftedPrimedTableaux([2])([1,1.5])\n>   True\n>   ```\n> - I think the checking that the shape is a partition should not be done within `check` but in `_element_constructor_`.\n> - For the `_repr_`, you should link to the global options of `Tableaux` and mimic that.\n> - The fact that you use `max_entry`, which is rounded up, leads to an extra space in the repr for a max entry of `9'`.\n> - Is the `_to_matrix()` suppose to only handle non-skew shapes? In particular, I am worried about the `m = self.shape()[0]`.\n> - You should put latex format docstring, such as <code>\\`i\\`</code> in `weight`.\n> - Your indentation of numbered lists is 1 too many (it should be at the same level as the rest of the documentation).\n> - In `f` and `e`, `self` should never be `None`.\n> - Instead of `self.parent()(T)`, you should use `type(self)(self.parent(), T)`.\n> - (As previously mentioned) `is_highest_weight` needs to take an `index_set` argument.\n> - Classes do not have an `OUTPUT`. Also, I prefer to have `INPUT` after the descriptive text of a class (and methods) doc.\n> - Anytime you have latex in a doc, you should make the string a raw string by doing `r\"\"\"`.\n> - `None of the Shifted Primed Tableaux classes can be iterated over.` is not true.\n> - Capitalization of `Shifted Primed Tableaux` should follow usual English capitalization (it is not a proper noun) in the documentation (not for the `_repr_`).\n> - `ShiftedPrimedTableaux` is not a factory class, so the `__classcall_private__` is wrong. For that doc, I would just say \"Normalize and process input to return the correct parent and ensure a unique representation.\"\n> - Be explicit about your arguments in `__classcall_private__` instead of having to do extra processing.\n> - Do not be afraid to break the 80 char/line in code. For example, I would not do a line break here:\n> \n>   ```\n>                         raise ValueError(\n>                             'invalid argument for weight or shape')\n>   ```\n> - The `ShiftedPrimedTableaux.__contains__` looks effectively like the default one from `Parent`, so I think it could be removed.\n> - Similarly for `ShiftedPrimedTableaux_all._element_constructor_`, which looses a more specific error message by the extra handling.\n> - I do not understand what you mean by `nonincreasing weight`.\n> - Actually, now that I've gotten through more of the code, I think you should implement your check by checking `T in self.parent()` and implementing all the actual checks in the `__contains__`.\n> - For the crystals, you can use the iterator from the category.\n> - Infinite sets are not a reason you cannot iterate.\n> - For the `__contains__` and `_element_constructor_`, use `super` calls.\n> - For the `__iter__`, it is not standard practice to return a generator object.\n> - You do not need to repeatedly do `Element = ShiftedPrimedTableau`.\n> - You should have a subclass of `ShiftedPrimedTableau` specifically for the case when it is a crystal.\n> - You have a blank `yield` in `ShiftedPrimedTableaux_weight_shape.__iter__`, and `yield` is not a function.\n> - In here `Partition(sorted(list(self._weight), key=int, reverse=True))):`, I don't understand why you need the `key=int` or why you need or should sort `self._weight`.",
    "created_at": "2018-01-08T20:48:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341917",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:109" align="right">comment:109</div>

Alright, I'll be working on your comments.

Replying to [@tscrim](#comment%3A108):
> I know its somewhat far into this, but I don't like using floating points for the half integers. They are inexact and have a bad representation (e.g., when you raise an error on an invalid object). I think you should have a class that represents the letters in your alphabet. You will have the logic more localized and can better handle input and gives you better control over your letter's behavior. It's more work, but I think it will result in cleaner and easier to maintain code. Internally, you can do half integers (which I would also represent with elements in `QQ`).
> 
> Here are some additional comments:
> 
> - Revert the changes in `combinat/partition.py` as they are not substantive and could create unnecessary merge conflicts.
> - Your `ShiftedPrimedTableau.__init__` should have a `check` argument that passes it off to `ClonableArray.__init__`.
> - It is good practice to not use `_` as an iterating variable, e.g., `t = [tuple(_) for _ in t]` (normally it is done this way when it is a dummy variable).
> - You need to also implement a `__ne__`:
> 
>   ```
>   sage: t = ShiftedPrimedTableau([[1,"2p"]])
>   sage: t != ShiftedPrimedTableaux([2])([1,1.5])
>   True
>   ```
> - I think the checking that the shape is a partition should not be done within `check` but in `_element_constructor_`.
> - For the `_repr_`, you should link to the global options of `Tableaux` and mimic that.
> - The fact that you use `max_entry`, which is rounded up, leads to an extra space in the repr for a max entry of `9'`.
> - Is the `_to_matrix()` suppose to only handle non-skew shapes? In particular, I am worried about the `m = self.shape()[0]`.
> - You should put latex format docstring, such as <code>\`i\`</code> in `weight`.
> - Your indentation of numbered lists is 1 too many (it should be at the same level as the rest of the documentation).
> - In `f` and `e`, `self` should never be `None`.
> - Instead of `self.parent()(T)`, you should use `type(self)(self.parent(), T)`.
> - (As previously mentioned) `is_highest_weight` needs to take an `index_set` argument.
> - Classes do not have an `OUTPUT`. Also, I prefer to have `INPUT` after the descriptive text of a class (and methods) doc.
> - Anytime you have latex in a doc, you should make the string a raw string by doing `r"""`.
> - `None of the Shifted Primed Tableaux classes can be iterated over.` is not true.
> - Capitalization of `Shifted Primed Tableaux` should follow usual English capitalization (it is not a proper noun) in the documentation (not for the `_repr_`).
> - `ShiftedPrimedTableaux` is not a factory class, so the `__classcall_private__` is wrong. For that doc, I would just say "Normalize and process input to return the correct parent and ensure a unique representation."
> - Be explicit about your arguments in `__classcall_private__` instead of having to do extra processing.
> - Do not be afraid to break the 80 char/line in code. For example, I would not do a line break here:
> 
>   ```
>                         raise ValueError(
>                             'invalid argument for weight or shape')
>   ```
> - The `ShiftedPrimedTableaux.__contains__` looks effectively like the default one from `Parent`, so I think it could be removed.
> - Similarly for `ShiftedPrimedTableaux_all._element_constructor_`, which looses a more specific error message by the extra handling.
> - I do not understand what you mean by `nonincreasing weight`.
> - Actually, now that I've gotten through more of the code, I think you should implement your check by checking `T in self.parent()` and implementing all the actual checks in the `__contains__`.
> - For the crystals, you can use the iterator from the category.
> - Infinite sets are not a reason you cannot iterate.
> - For the `__contains__` and `_element_constructor_`, use `super` calls.
> - For the `__iter__`, it is not standard practice to return a generator object.
> - You do not need to repeatedly do `Element = ShiftedPrimedTableau`.
> - You should have a subclass of `ShiftedPrimedTableau` specifically for the case when it is a crystal.
> - You have a blank `yield` in `ShiftedPrimedTableaux_weight_shape.__iter__`, and `yield` is not a function.
> - In here `Partition(sorted(list(self._weight), key=int, reverse=True))):`, I don't understand why you need the `key=int` or why you need or should sort `self._weight`.



---

archive/issue_comments_341918.json:
```json
{
    "body": "Changed commit from **[`9e2a43d`](https://github.com/sagemath/sagetrac-mirror/commit/9e2a43d054b4d9fab9f5ee33e51433223f7c0d99)** to **[`de04f86`](https://github.com/sagemath/sagetrac-mirror/commit/de04f86ca1fcbe96a14d6b3fc802a9f86d29d197)**",
    "created_at": "2018-01-16T23:26:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341918",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9e2a43d`](https://github.com/sagemath/sagetrac-mirror/commit/9e2a43d054b4d9fab9f5ee33e51433223f7c0d99)** to **[`de04f86`](https://github.com/sagemath/sagetrac-mirror/commit/de04f86ca1fcbe96a14d6b3fc802a9f86d29d197)**



---

archive/issue_comments_341919.json:
```json
{
    "body": "<div id=\"comment:110\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/560deb4c7f727446eac7192180188d2adc411015\"><code>560deb4</code></a></td><td><code>Corrected the name to properly generate docs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28561f117e7982506af5bb812c90a6d437e669a8\"><code>28561f1</code></a></td><td><code>Revert changes to partition.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f041576f199f6d6c5933730d463fa666d7dbab31\"><code>f041576</code></a></td><td><code>Various fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de04f86ca1fcbe96a14d6b3fc802a9f86d29d197\"><code>de04f86</code></a></td><td><code>Added iter</code></td></tr></table>\n",
    "created_at": "2018-01-16T23:26:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341919",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:110"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/560deb4c7f727446eac7192180188d2adc411015"><code>560deb4</code></a></td><td><code>Corrected the name to properly generate docs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28561f117e7982506af5bb812c90a6d437e669a8"><code>28561f1</code></a></td><td><code>Revert changes to partition.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f041576f199f6d6c5933730d463fa666d7dbab31"><code>f041576</code></a></td><td><code>Various fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de04f86ca1fcbe96a14d6b3fc802a9f86d29d197"><code>de04f86</code></a></td><td><code>Added iter</code></td></tr></table>




---

archive/issue_comments_341920.json:
```json
{
    "body": "<div id=\"comment:111\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea347f74dd96d9955622a930f9658560e0ead65d\"><code>ea347f7</code></a></td><td><code>Added class of entries</code></td></tr></table>\n",
    "created_at": "2018-01-18T01:06:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341920",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:111"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea347f74dd96d9955622a930f9658560e0ead65d"><code>ea347f7</code></a></td><td><code>Added class of entries</code></td></tr></table>




---

archive/issue_comments_341921.json:
```json
{
    "body": "Changed commit from **[`de04f86`](https://github.com/sagemath/sagetrac-mirror/commit/de04f86ca1fcbe96a14d6b3fc802a9f86d29d197)** to **[`ea347f7`](https://github.com/sagemath/sagetrac-mirror/commit/ea347f74dd96d9955622a930f9658560e0ead65d)**",
    "created_at": "2018-01-18T01:06:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341921",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`de04f86`](https://github.com/sagemath/sagetrac-mirror/commit/de04f86ca1fcbe96a14d6b3fc802a9f86d29d197)** to **[`ea347f7`](https://github.com/sagemath/sagetrac-mirror/commit/ea347f74dd96d9955622a930f9658560e0ead65d)**



---

archive/issue_comments_341922.json:
```json
{
    "body": "<div id=\"comment:112\" align=\"right\">comment:112</div>\n\nAlright, I've addressed Travis' comments. The code is ready for another review.\n\nReplying to [@sagetrac-git](#comment%3A111):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea347f74dd96d9955622a930f9658560e0ead65d\"><code>ea347f7</code></a></td><td><code>Added class of entries</code></td></tr></table>\n",
    "created_at": "2018-01-18T01:08:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341922",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:112" align="right">comment:112</div>

Alright, I've addressed Travis' comments. The code is ready for another review.

Replying to [@sagetrac-git](#comment%3A111):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea347f74dd96d9955622a930f9658560e0ead65d"><code>ea347f7</code></a></td><td><code>Added class of entries</code></td></tr></table>




---

archive/issue_comments_341923.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nThe documentation does not compile:\n\n```\n[dochtml] OSError: [combinat ] /Applications/sage/local/lib/python2.7/site-packages/sage/combinat/shifted_primed_tableau.py:docstring of sage.combinat.shifted_primed_tableau.CrystalElementShiftedPrimedTableau.reading_word:10: WARNING: Unexpected indentation.\n[dochtml] \nmake[2]: *** [doc-html] Error 1\n```",
    "created_at": "2018-01-20T16:56:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341923",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:113" align="right">comment:113</div>

The documentation does not compile:

```
[dochtml] OSError: [combinat ] /Applications/sage/local/lib/python2.7/site-packages/sage/combinat/shifted_primed_tableau.py:docstring of sage.combinat.shifted_primed_tableau.CrystalElementShiftedPrimedTableau.reading_word:10: WARNING: Unexpected indentation.
[dochtml] 
make[2]: *** [doc-html] Error 1
```



---

archive/issue_comments_341924.json:
```json
{
    "body": "Changed commit from **[`ea347f7`](https://github.com/sagemath/sagetrac-mirror/commit/ea347f74dd96d9955622a930f9658560e0ead65d)** to **[`464c2a9`](https://github.com/sagemath/sagetrac-mirror/commit/464c2a913f0c6cc1f2451f5324fd69a4b129a857)**",
    "created_at": "2018-01-20T18:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341924",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ea347f7`](https://github.com/sagemath/sagetrac-mirror/commit/ea347f74dd96d9955622a930f9658560e0ead65d)** to **[`464c2a9`](https://github.com/sagemath/sagetrac-mirror/commit/464c2a913f0c6cc1f2451f5324fd69a4b129a857)**



---

archive/issue_comments_341925.json:
```json
{
    "body": "<div id=\"comment:114\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/464c2a913f0c6cc1f2451f5324fd69a4b129a857\"><code>464c2a9</code></a></td><td><code>Fixed indentation</code></td></tr></table>\n",
    "created_at": "2018-01-20T18:00:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341925",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:114"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/464c2a913f0c6cc1f2451f5324fd69a4b129a857"><code>464c2a9</code></a></td><td><code>Fixed indentation</code></td></tr></table>




---

archive/issue_comments_341926.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nThe weight of a skew shifted tableau currently fails:\n\n```\nsage: s = ShiftedPrimedTableau([(1, 3.5), (2.5,), (6,)], skew=[2,1])\nsage: s.weight()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n<ipython-input-194-c0897c3f66a5> in <module>()\n----> 1 s.weight()\n\n/home/martin/sage-develop/src/sage/combinat/shifted_primed_tableau.py in weight(self)\n    697            (1, 4, 1)\n    698 \n--> 699            sage: s = ShiftedPrimedTableau([(1, 3.5), (2.5,), (6,)], skew=[2,1])\n    700            sage: s.weight()\n    701         \"\"\"\n\nAttributeError: 'NoneType' object has no attribute 'unprime'\n```\nA fix would be\n\n```\n    def weight(self):\n        r\"\"\"\n        Return the weight of ``self``.\n\n        The weight of a shifted primed tableau is defined to be the vector\n        with `i`-th component equal to the number of entries i and i' in the\n        tableau.\n\n        EXAMPLES::\n\n           sage: t = ShiftedPrimedTableau([[1,'2p',2,2],[2,'3p']])\n           sage: t.weight()\n           (1, 4, 1)\n\n           sage: s = ShiftedPrimedTableau([(1, 3.5), (2.5,), (6,)], skew=[2,1])\n           sage: s.weight()\n           (1, 0, 1, 1, 0, 1)\n        \"\"\"\n        flat = [entry.unprime() for row in self for entry in row if entry is not None]\n        if flat == []:\n            max_ind = 0\n        else:\n            max_ind = max(flat)\n        weight = tuple([flat.count(i+1) for i in range(max_ind)])\n        return weight\n```\n\nIt might be good to test a skew tableau in all methods.",
    "created_at": "2018-01-21T13:44:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341926",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:115" align="right">comment:115</div>

The weight of a skew shifted tableau currently fails:

```
sage: s = ShiftedPrimedTableau([(1, 3.5), (2.5,), (6,)], skew=[2,1])
sage: s.weight()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-194-c0897c3f66a5> in <module>()
----> 1 s.weight()

/home/martin/sage-develop/src/sage/combinat/shifted_primed_tableau.py in weight(self)
    697            (1, 4, 1)
    698 
--> 699            sage: s = ShiftedPrimedTableau([(1, 3.5), (2.5,), (6,)], skew=[2,1])
    700            sage: s.weight()
    701         """

AttributeError: 'NoneType' object has no attribute 'unprime'
```
A fix would be

```
    def weight(self):
        r"""
        Return the weight of ``self``.

        The weight of a shifted primed tableau is defined to be the vector
        with `i`-th component equal to the number of entries i and i' in the
        tableau.

        EXAMPLES::

           sage: t = ShiftedPrimedTableau([[1,'2p',2,2],[2,'3p']])
           sage: t.weight()
           (1, 4, 1)

           sage: s = ShiftedPrimedTableau([(1, 3.5), (2.5,), (6,)], skew=[2,1])
           sage: s.weight()
           (1, 0, 1, 1, 0, 1)
        """
        flat = [entry.unprime() for row in self for entry in row if entry is not None]
        if flat == []:
            max_ind = 0
        else:
            max_ind = max(flat)
        weight = tuple([flat.count(i+1) for i in range(max_ind)])
        return weight
```

It might be good to test a skew tableau in all methods.



---

archive/issue_comments_341927.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nI am not completely sure, but it might be that there is also a speed regression:\n\n```\nmartin@Martin-Laptop:~/sage-develop$ sage -t src/sage/combinat/shifted_primed_tableau.py \ntoo many failed tests, not using stored timings\nRunning doctests with ID 2018-01-21-14-48-10-0647444a.\nGit branch: HEAD\nUsing --optional=atlas,database_gap,dot2tex,fricas,gap_packages,mpir,ore_algebra,python2,sage\nDoctesting 1 file.\nsage -t src/sage/combinat/shifted_primed_tableau.py\n    [218 tests, 48.25 s]\n```\n\nI think it was much faster before, but I did not take notes :-(",
    "created_at": "2018-01-21T13:51:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341927",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:116" align="right">comment:116</div>

I am not completely sure, but it might be that there is also a speed regression:

```
martin@Martin-Laptop:~/sage-develop$ sage -t src/sage/combinat/shifted_primed_tableau.py 
too many failed tests, not using stored timings
Running doctests with ID 2018-01-21-14-48-10-0647444a.
Git branch: HEAD
Using --optional=atlas,database_gap,dot2tex,fricas,gap_packages,mpir,ore_algebra,python2,sage
Doctesting 1 file.
sage -t src/sage/combinat/shifted_primed_tableau.py
    [218 tests, 48.25 s]
```

I think it was much faster before, but I did not take notes :-(



---

archive/issue_comments_341928.json:
```json
{
    "body": "<div id=\"comment:117\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6428f276ba874e86931357ebde1d1f813764d8ac\"><code>6428f27</code></a></td><td><code>Fixed weight for skew tableaux</code></td></tr></table>\n",
    "created_at": "2018-01-21T17:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341928",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:117"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6428f276ba874e86931357ebde1d1f813764d8ac"><code>6428f27</code></a></td><td><code>Fixed weight for skew tableaux</code></td></tr></table>




---

archive/issue_comments_341929.json:
```json
{
    "body": "Changed commit from **[`464c2a9`](https://github.com/sagemath/sagetrac-mirror/commit/464c2a913f0c6cc1f2451f5324fd69a4b129a857)** to **[`6428f27`](https://github.com/sagemath/sagetrac-mirror/commit/6428f276ba874e86931357ebde1d1f813764d8ac)**",
    "created_at": "2018-01-21T17:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341929",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`464c2a9`](https://github.com/sagemath/sagetrac-mirror/commit/464c2a913f0c6cc1f2451f5324fd69a4b129a857)** to **[`6428f27`](https://github.com/sagemath/sagetrac-mirror/commit/6428f276ba874e86931357ebde1d1f813764d8ac)**



---

archive/issue_comments_341930.json:
```json
{
    "body": "<div id=\"comment:118\" align=\"right\">comment:118</div>\n\nThanks for comments, Martin! I had a speedup on my computer actually.\n\n```\nsage -t shifted_primed_tableau.py\n    [199 tests, 11.27 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 11.4 seconds\n    cpu time: 11.0 seconds\n    cumulative wall time: 11.3 seconds\n```\n\n\nReplying to [@mantepse](#comment%3A116):\n> I am not completely sure, but it might be that there is also a speed regression:\n> \n> ```\n> martin@Martin-Laptop:~/sage-develop$ sage -t src/sage/combinat/shifted_primed_tableau.py \n> too many failed tests, not using stored timings\n> Running doctests with ID 2018-01-21-14-48-10-0647444a.\n> Git branch: HEAD\n> Using --optional=atlas,database_gap,dot2tex,fricas,gap_packages,mpir,ore_algebra,python2,sage\n> Doctesting 1 file.\n> sage -t src/sage/combinat/shifted_primed_tableau.py\n>     [218 tests, 48.25 s]\n> ```\n> \n> I think it was much faster before, but I did not take notes :-(",
    "created_at": "2018-01-21T17:31:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341930",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:118" align="right">comment:118</div>

Thanks for comments, Martin! I had a speedup on my computer actually.

```
sage -t shifted_primed_tableau.py
    [199 tests, 11.27 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 11.4 seconds
    cpu time: 11.0 seconds
    cumulative wall time: 11.3 seconds
```


Replying to [@mantepse](#comment%3A116):
> I am not completely sure, but it might be that there is also a speed regression:
> 
> ```
> martin@Martin-Laptop:~/sage-develop$ sage -t src/sage/combinat/shifted_primed_tableau.py 
> too many failed tests, not using stored timings
> Running doctests with ID 2018-01-21-14-48-10-0647444a.
> Git branch: HEAD
> Using --optional=atlas,database_gap,dot2tex,fricas,gap_packages,mpir,ore_algebra,python2,sage
> Doctesting 1 file.
> sage -t src/sage/combinat/shifted_primed_tableau.py
>     [218 tests, 48.25 s]
> ```
> 
> I think it was much faster before, but I did not take notes :-(



---

archive/issue_comments_341931.json:
```json
{
    "body": "<div id=\"comment:119\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f73b362bcc7ec335dc92c690def9abc2837a3e9\"><code>7f73b36</code></a></td><td><code>Minor documentation fix</code></td></tr></table>\n",
    "created_at": "2018-01-21T17:46:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341931",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:119"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f73b362bcc7ec335dc92c690def9abc2837a3e9"><code>7f73b36</code></a></td><td><code>Minor documentation fix</code></td></tr></table>




---

archive/issue_comments_341932.json:
```json
{
    "body": "Changed commit from **[`6428f27`](https://github.com/sagemath/sagetrac-mirror/commit/6428f276ba874e86931357ebde1d1f813764d8ac)** to **[`7f73b36`](https://github.com/sagemath/sagetrac-mirror/commit/7f73b362bcc7ec335dc92c690def9abc2837a3e9)**",
    "created_at": "2018-01-21T17:46:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341932",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6428f27`](https://github.com/sagemath/sagetrac-mirror/commit/6428f276ba874e86931357ebde1d1f813764d8ac)** to **[`7f73b36`](https://github.com/sagemath/sagetrac-mirror/commit/7f73b362bcc7ec335dc92c690def9abc2837a3e9)**



---

archive/issue_comments_341933.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nFor me the tests on `shifted_primed_tableau` also only take about 9 seconds. There are still a couple of methods without proper tests:\n\n```\nsage -coverage shifted_primed_tableau.py \n------------------------------------------------------------------------\nSCORE shifted_primed_tableau.py: 93.2% (55 of 59)\n\nMissing doctests:\n     * line 140: def _preprocess_(T, skew=None)\n     * line 1128: def __init__(self, skew=None)\n     * line 1134: def _element_constructor_(self, T)\n     * line 1153: def _contains_tableau_(self, T)\n\nPossibly wrong (function name doesn't occur in doctests):\n     * line 241: def _repr_list(self)\n------------------------------------------------------------------------\n```\nAfter that I am happy to set a positive review unless other issues arise!",
    "created_at": "2018-01-21T18:00:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341933",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:120" align="right">comment:120</div>

For me the tests on `shifted_primed_tableau` also only take about 9 seconds. There are still a couple of methods without proper tests:

```
sage -coverage shifted_primed_tableau.py 
------------------------------------------------------------------------
SCORE shifted_primed_tableau.py: 93.2% (55 of 59)

Missing doctests:
     * line 140: def _preprocess_(T, skew=None)
     * line 1128: def __init__(self, skew=None)
     * line 1134: def _element_constructor_(self, T)
     * line 1153: def _contains_tableau_(self, T)

Possibly wrong (function name doesn't occur in doctests):
     * line 241: def _repr_list(self)
------------------------------------------------------------------------
```
After that I am happy to set a positive review unless other issues arise!



---

archive/issue_comments_341934.json:
```json
{
    "body": "<div id=\"comment:121\" align=\"right\">comment:121</div>\n\nI checked, on my office computer tests also take only about 8 seconds.  On my laptop, there is precisely one test which takes more than one second:\n\n```\nTrying (line 1502):    TestSuite(ShiftedPrimedTableaux([4,2,1], max_entry=4)).run()\nExpecting nothing\nok [44.84 s]\n```",
    "created_at": "2018-01-21T18:20:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341934",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:121" align="right">comment:121</div>

I checked, on my office computer tests also take only about 8 seconds.  On my laptop, there is precisely one test which takes more than one second:

```
Trying (line 1502):    TestSuite(ShiftedPrimedTableaux([4,2,1], max_entry=4)).run()
Expecting nothing
ok [44.84 s]
```



---

archive/issue_comments_341935.json:
```json
{
    "body": "<div id=\"comment:122\" align=\"right\">comment:122</div>\n\nThe following change makes quite a difference.  After the change, most of the time is spent in `QQ(entry)`.\n\n```\ndiff --git a/src/sage/combinat/shifted_primed_tableau.py b/src/sage/combinat/shifted_primed_tableau.py\nindex 266e556..8057497 100644\n--- a/src/sage/combinat/shifted_primed_tableau.py\n+++ b/src/sage/combinat/shifted_primed_tableau.py\n@@ -884,15 +884,14 @@ class ShiftedPrimedTableauEntry(Rational):\n             sage: ShiftedPrimedTableau([[1,1.5]])[0][1]\n             2'\n         \"\"\"\n+        half = Integer(1)/Integer(2)\n         if isinstance(entry, str):\n             if (entry[-1] == \"'\" or entry[-1] == \"p\") and entry[:-1].isdigit() is True:\n                 # Check if an element has \"'\" or \"p\" at the end\n-                entry = QQ(entry[:-1]) - .5\n+                entry = QQ(entry[:-1]) - half\n         try:\n-            if (QQ(entry)+.5 in ZZ) or (QQ(entry) in ZZ):\n-                # Check if an element is a half-integer\n-                entry = QQ(entry)\n-            else:\n+            entry = QQ(entry)\n+            if (entry not in ZZ) and ((entry + half) not in ZZ):\n                 raise ValueError(\"all numbers must be half-integers\")\n         except (TypeError, ValueError):\n             raise ValueError(\"primed elements have wrong format\")\n```",
    "created_at": "2018-01-21T19:01:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341935",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:122" align="right">comment:122</div>

The following change makes quite a difference.  After the change, most of the time is spent in `QQ(entry)`.

```
diff --git a/src/sage/combinat/shifted_primed_tableau.py b/src/sage/combinat/shifted_primed_tableau.py
index 266e556..8057497 100644
--- a/src/sage/combinat/shifted_primed_tableau.py
+++ b/src/sage/combinat/shifted_primed_tableau.py
@@ -884,15 +884,14 @@ class ShiftedPrimedTableauEntry(Rational):
             sage: ShiftedPrimedTableau([[1,1.5]])[0][1]
             2'
         """
+        half = Integer(1)/Integer(2)
         if isinstance(entry, str):
             if (entry[-1] == "'" or entry[-1] == "p") and entry[:-1].isdigit() is True:
                 # Check if an element has "'" or "p" at the end
-                entry = QQ(entry[:-1]) - .5
+                entry = QQ(entry[:-1]) - half
         try:
-            if (QQ(entry)+.5 in ZZ) or (QQ(entry) in ZZ):
-                # Check if an element is a half-integer
-                entry = QQ(entry)
-            else:
+            entry = QQ(entry)
+            if (entry not in ZZ) and ((entry + half) not in ZZ):
                 raise ValueError("all numbers must be half-integers")
         except (TypeError, ValueError):
             raise ValueError("primed elements have wrong format")
```



---

archive/issue_comments_341936.json:
```json
{
    "body": "<div id=\"comment:123\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e312dfe11f392ccd5c67675a7ee31481aa8e888d\"><code>e312dfe</code></a></td><td><code>More doctests</code></td></tr></table>\n",
    "created_at": "2018-01-21T19:42:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341936",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:123"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e312dfe11f392ccd5c67675a7ee31481aa8e888d"><code>e312dfe</code></a></td><td><code>More doctests</code></td></tr></table>




---

archive/issue_comments_341937.json:
```json
{
    "body": "Changed commit from **[`7f73b36`](https://github.com/sagemath/sagetrac-mirror/commit/7f73b362bcc7ec335dc92c690def9abc2837a3e9)** to **[`e312dfe`](https://github.com/sagemath/sagetrac-mirror/commit/e312dfe11f392ccd5c67675a7ee31481aa8e888d)**",
    "created_at": "2018-01-21T19:42:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341937",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7f73b36`](https://github.com/sagemath/sagetrac-mirror/commit/7f73b362bcc7ec335dc92c690def9abc2837a3e9)** to **[`e312dfe`](https://github.com/sagemath/sagetrac-mirror/commit/e312dfe11f392ccd5c67675a7ee31481aa8e888d)**



---

archive/issue_comments_341938.json:
```json
{
    "body": "<div id=\"comment:124\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89a9fce92e10534dce169f8bf7b60d0e2b1f89ec\"><code>89a9fce</code></a></td><td><code>Speedup init for entry class</code></td></tr></table>\n",
    "created_at": "2018-01-21T19:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341938",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:124"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89a9fce92e10534dce169f8bf7b60d0e2b1f89ec"><code>89a9fce</code></a></td><td><code>Speedup init for entry class</code></td></tr></table>




---

archive/issue_comments_341939.json:
```json
{
    "body": "Changed commit from **[`e312dfe`](https://github.com/sagemath/sagetrac-mirror/commit/e312dfe11f392ccd5c67675a7ee31481aa8e888d)** to **[`89a9fce`](https://github.com/sagemath/sagetrac-mirror/commit/89a9fce92e10534dce169f8bf7b60d0e2b1f89ec)**",
    "created_at": "2018-01-21T19:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341939",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e312dfe`](https://github.com/sagemath/sagetrac-mirror/commit/e312dfe11f392ccd5c67675a7ee31481aa8e888d)** to **[`89a9fce`](https://github.com/sagemath/sagetrac-mirror/commit/89a9fce92e10534dce169f8bf7b60d0e2b1f89ec)**



---

archive/issue_comments_341940.json:
```json
{
    "body": "<div id=\"comment:125\" align=\"right\">comment:125</div>\n\nTry it now, it should work faster.\n\nReplying to [@mantepse](#comment%3A122):\n> The following change makes quite a difference.  After the change, most of the time is spent in `QQ(entry)`.\n> \n> ```\n> diff --git a/src/sage/combinat/shifted_primed_tableau.py b/src/sage/combinat/shifted_primed_tableau.py\n> index 266e556..8057497 100644\n> --- a/src/sage/combinat/shifted_primed_tableau.py\n> +++ b/src/sage/combinat/shifted_primed_tableau.py\n> @@ -884,15 +884,14 @@ class ShiftedPrimedTableauEntry(Rational):\n>              sage: ShiftedPrimedTableau([[1,1.5]])[0][1]\n>              2'\n>          \"\"\"\n> +        half = Integer(1)/Integer(2)\n>          if isinstance(entry, str):\n>              if (entry[-1] == \"'\" or entry[-1] == \"p\") and entry[:-1].isdigit() is True:\n>                  # Check if an element has \"'\" or \"p\" at the end\n> -                entry = QQ(entry[:-1]) - .5\n> +                entry = QQ(entry[:-1]) - half\n>          try:\n> -            if (QQ(entry)+.5 in ZZ) or (QQ(entry) in ZZ):\n> -                # Check if an element is a half-integer\n> -                entry = QQ(entry)\n> -            else:\n> +            entry = QQ(entry)\n> +            if (entry not in ZZ) and ((entry + half) not in ZZ):\n>                  raise ValueError(\"all numbers must be half-integers\")\n>          except (TypeError, ValueError):\n>              raise ValueError(\"primed elements have wrong format\")\n> ```",
    "created_at": "2018-01-21T20:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341940",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:125" align="right">comment:125</div>

Try it now, it should work faster.

Replying to [@mantepse](#comment%3A122):
> The following change makes quite a difference.  After the change, most of the time is spent in `QQ(entry)`.
> 
> ```
> diff --git a/src/sage/combinat/shifted_primed_tableau.py b/src/sage/combinat/shifted_primed_tableau.py
> index 266e556..8057497 100644
> --- a/src/sage/combinat/shifted_primed_tableau.py
> +++ b/src/sage/combinat/shifted_primed_tableau.py
> @@ -884,15 +884,14 @@ class ShiftedPrimedTableauEntry(Rational):
>              sage: ShiftedPrimedTableau([[1,1.5]])[0][1]
>              2'
>          """
> +        half = Integer(1)/Integer(2)
>          if isinstance(entry, str):
>              if (entry[-1] == "'" or entry[-1] == "p") and entry[:-1].isdigit() is True:
>                  # Check if an element has "'" or "p" at the end
> -                entry = QQ(entry[:-1]) - .5
> +                entry = QQ(entry[:-1]) - half
>          try:
> -            if (QQ(entry)+.5 in ZZ) or (QQ(entry) in ZZ):
> -                # Check if an element is a half-integer
> -                entry = QQ(entry)
> -            else:
> +            entry = QQ(entry)
> +            if (entry not in ZZ) and ((entry + half) not in ZZ):
>                  raise ValueError("all numbers must be half-integers")
>          except (TypeError, ValueError):
>              raise ValueError("primed elements have wrong format")
> ```



---

archive/issue_comments_341941.json:
```json
{
    "body": "<div id=\"comment:126\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f21e876ad790c8d8ae7c1ed9d7dbbf16be5951a2\"><code>f21e876</code></a></td><td><code>More speedup init for entry class</code></td></tr></table>\n",
    "created_at": "2018-01-21T20:05:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341941",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:126"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f21e876ad790c8d8ae7c1ed9d7dbbf16be5951a2"><code>f21e876</code></a></td><td><code>More speedup init for entry class</code></td></tr></table>




---

archive/issue_comments_341942.json:
```json
{
    "body": "Changed commit from **[`89a9fce`](https://github.com/sagemath/sagetrac-mirror/commit/89a9fce92e10534dce169f8bf7b60d0e2b1f89ec)** to **[`f21e876`](https://github.com/sagemath/sagetrac-mirror/commit/f21e876ad790c8d8ae7c1ed9d7dbbf16be5951a2)**",
    "created_at": "2018-01-21T20:05:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341942",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`89a9fce`](https://github.com/sagemath/sagetrac-mirror/commit/89a9fce92e10534dce169f8bf7b60d0e2b1f89ec)** to **[`f21e876`](https://github.com/sagemath/sagetrac-mirror/commit/f21e876ad790c8d8ae7c1ed9d7dbbf16be5951a2)**



---

archive/issue_comments_341943.json:
```json
{
    "body": "<div id=\"comment:127\" align=\"right\">comment:127</div>\n\nIndeed, it is faster now.  However, I now realise that I do not understand the logic of `ShiftedPrimedTableauEntry.__init__`:\n\n* removing the call to `float` in `ShiftedPrimedTableauEntry.__add__` makes `__init__` break - why?\n\n* the check for half-integer could also be done using `entry.denominator() in (1, 2)`.",
    "created_at": "2018-01-21T21:43:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341943",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:127" align="right">comment:127</div>

Indeed, it is faster now.  However, I now realise that I do not understand the logic of `ShiftedPrimedTableauEntry.__init__`:

* removing the call to `float` in `ShiftedPrimedTableauEntry.__add__` makes `__init__` break - why?

* the check for half-integer could also be done using `entry.denominator() in (1, 2)`.



---

archive/issue_comments_341944.json:
```json
{
    "body": "<div id=\"comment:128\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/582099c36863459524e292afab9d33c271b941c9\"><code>582099c</code></a></td><td><code>Fixed addition on primed entries, speedup of crystal operators</code></td></tr></table>\n",
    "created_at": "2018-01-21T23:04:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341944",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:128"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/582099c36863459524e292afab9d33c271b941c9"><code>582099c</code></a></td><td><code>Fixed addition on primed entries, speedup of crystal operators</code></td></tr></table>




---

archive/issue_comments_341945.json:
```json
{
    "body": "Changed commit from **[`f21e876`](https://github.com/sagemath/sagetrac-mirror/commit/f21e876ad790c8d8ae7c1ed9d7dbbf16be5951a2)** to **[`582099c`](https://github.com/sagemath/sagetrac-mirror/commit/582099c36863459524e292afab9d33c271b941c9)**",
    "created_at": "2018-01-21T23:04:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341945",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f21e876`](https://github.com/sagemath/sagetrac-mirror/commit/f21e876ad790c8d8ae7c1ed9d7dbbf16be5951a2)** to **[`582099c`](https://github.com/sagemath/sagetrac-mirror/commit/582099c36863459524e292afab9d33c271b941c9)**



---

archive/issue_comments_341946.json:
```json
{
    "body": "Changed commit from **[`582099c`](https://github.com/sagemath/sagetrac-mirror/commit/582099c36863459524e292afab9d33c271b941c9)** to **[`ed56f4b`](https://github.com/sagemath/sagetrac-mirror/commit/ed56f4b50be919d5be7c89a8a0238560861f3f01)**",
    "created_at": "2018-01-21T23:08:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341946",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`582099c`](https://github.com/sagemath/sagetrac-mirror/commit/582099c36863459524e292afab9d33c271b941c9)** to **[`ed56f4b`](https://github.com/sagemath/sagetrac-mirror/commit/ed56f4b50be919d5be7c89a8a0238560861f3f01)**



---

archive/issue_comments_341947.json:
```json
{
    "body": "<div id=\"comment:129\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed56f4b50be919d5be7c89a8a0238560861f3f01\"><code>ed56f4b</code></a></td><td><code>Minor fix for checking half-integer</code></td></tr></table>\n",
    "created_at": "2018-01-21T23:08:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341947",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:129"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed56f4b50be919d5be7c89a8a0238560861f3f01"><code>ed56f4b</code></a></td><td><code>Minor fix for checking half-integer</code></td></tr></table>




---

archive/issue_comments_341948.json:
```json
{
    "body": "Changed commit from **[`ed56f4b`](https://github.com/sagemath/sagetrac-mirror/commit/ed56f4b50be919d5be7c89a8a0238560861f3f01)** to **[`fe58704`](https://github.com/sagemath/sagetrac-mirror/commit/fe58704b1a69db9856d397cec4a4a726fbda74c1)**",
    "created_at": "2018-01-21T23:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341948",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ed56f4b`](https://github.com/sagemath/sagetrac-mirror/commit/ed56f4b50be919d5be7c89a8a0238560861f3f01)** to **[`fe58704`](https://github.com/sagemath/sagetrac-mirror/commit/fe58704b1a69db9856d397cec4a4a726fbda74c1)**



---

archive/issue_comments_341949.json:
```json
{
    "body": "<div id=\"comment:130\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe58704b1a69db9856d397cec4a4a726fbda74c1\"><code>fe58704</code></a></td><td><code>Minor fix</code></td></tr></table>\n",
    "created_at": "2018-01-21T23:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341949",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:130"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe58704b1a69db9856d397cec4a4a726fbda74c1"><code>fe58704</code></a></td><td><code>Minor fix</code></td></tr></table>




---

archive/issue_comments_341950.json:
```json
{
    "body": "<div id=\"comment:131\" align=\"right\">comment:131</div>\n\nAlright, I've reworked the add function, it was too janky.\n\nReplying to [@mantepse](#comment%3A127):\n> Indeed, it is faster now.  However, I now realise that I do not understand the logic of `ShiftedPrimedTableauEntry.__init__`:\n> \n> * removing the call to `float` in `ShiftedPrimedTableauEntry.__add__` makes `__init__` break - why?\n> \n> * the check for half-integer could also be done using `entry.denominator() in (1, 2)`.",
    "created_at": "2018-01-21T23:13:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341950",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:131" align="right">comment:131</div>

Alright, I've reworked the add function, it was too janky.

Replying to [@mantepse](#comment%3A127):
> Indeed, it is faster now.  However, I now realise that I do not understand the logic of `ShiftedPrimedTableauEntry.__init__`:
> 
> * removing the call to `float` in `ShiftedPrimedTableauEntry.__add__` makes `__init__` break - why?
> 
> * the check for half-integer could also be done using `entry.denominator() in (1, 2)`.



---

archive/issue_comments_341951.json:
```json
{
    "body": "<div id=\"comment:132\" align=\"right\">comment:132</div>\n\nIt is **much** faster now, and easier to understand!\n\nVery tiny thing: I would suggest to rename\n\n```\n    def unprime(self):\n```\nto\n\n```\n    def unprimed(self):\n```\nbecause it doesn't modify self (of course).\n\nTravis, could you please do the final check?",
    "created_at": "2018-01-22T07:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341951",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:132" align="right">comment:132</div>

It is **much** faster now, and easier to understand!

Very tiny thing: I would suggest to rename

```
    def unprime(self):
```
to

```
    def unprimed(self):
```
because it doesn't modify self (of course).

Travis, could you please do the final check?



---

archive/issue_comments_341952.json:
```json
{
    "body": "<div id=\"comment:133\" align=\"right\">comment:133</div>\n\nSorry, I haven't had time the past few days and most likely will not for the next few (but I will try). However, on a quick look, I do not like the tableau entries inheriting from `Rational` because they do not behave like rationals: they do not have a parent object, they do not have \"actual\" arithmetic, and they are not rational numbers in the usual sense. In a way, you override the methods precisely why you are inheriting from `Rational`. I think you would be better wrapping a `Rational`, but I would like to Cythonize it (which I can do once I have a few minutes).",
    "created_at": "2018-01-24T05:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341952",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:133" align="right">comment:133</div>

Sorry, I haven't had time the past few days and most likely will not for the next few (but I will try). However, on a quick look, I do not like the tableau entries inheriting from `Rational` because they do not behave like rationals: they do not have a parent object, they do not have "actual" arithmetic, and they are not rational numbers in the usual sense. In a way, you override the methods precisely why you are inheriting from `Rational`. I think you would be better wrapping a `Rational`, but I would like to Cythonize it (which I can do once I have a few minutes).



---

archive/issue_comments_341953.json:
```json
{
    "body": "<div id=\"comment:134\" align=\"right\">comment:134</div>\n\nTravis, isn't that an implementation detail, mostly private?  A lot of time already went into this ticket, I would think it might be better to go in for now...\n\nAnyway I also thought a wrapper would be more logical.  To be precise, it should be a poset, but that's probably overkill.\n\nEDIT: corrected version.\n\n```\nclass PrimedEntry(SageObject):\n    \"\"\"\n    The class of entries in shifted primed tableaux.\n    \"\"\"\n    def __init__(self, entry=None, double=None):\n        \"\"\"\n        Normalize the entry.\n\n        TEST::\n\n            sage: ShiftedPrimedTableau([[1,\"2p\"]])[0][1]\n            2'\n            sage: ShiftedPrimedTableau([[1,\"2'\"]])[0][1]\n            2'\n            sage: ShiftedPrimedTableau([[1,1.5]])[0][1]\n            2'\n        \"\"\"\n        # store primed numbers as odd, unprimed numbers as even integers\n        if isinstance(entry, self.__class__):\n            self._entry = entry._entry\n            return\n\n        if double is not None:\n            self._entry = Integer(double)\n            return\n\n        if isinstance(entry, str):\n            if (entry[-1] == \"'\" or entry[-1] == \"p\") and entry[:-1].isdigit() is True:\n                # Check if an element has \"'\" or \"p\" at the end\n                self._entry = 2*Integer(entry[:-1]) - 1\n                return\n\n        try:\n            entry = Rational(entry)\n        except (TypeError, ValueError):\n            raise ValueError(\"primed elements have wrong format\")\n        if entry.denominator() not in (1, 2):\n            # Check if an element is a half-integer\n            raise ValueError(\"all numbers must be half-integers\")\n        self._entry = Integer(2*entry)\n\n    def __hash__(self):\n        return self._entry\n\n    def __repr__(self):\n        \"\"\"\n        Represent ``self`` as primed or unprimed integer.\n\n        TEST::\n\n            sage: ShiftedPrimedTableau([[1,\"2p\"]])[0][1]\n            2'\n        \"\"\"\n        if is_even(self._entry):\n            return str(self._entry//2)\n        else:\n            return str((self._entry+1)//2) + \"'\"\n\n    def integer(self):\n        return self._entry//2\n\n    def __eq__(self, other):\n        return self._entry == PrimedEntry(other)._entry\n\n    def __ne__(self, other):\n        return self._entry != PrimedEntry(other)._entry\n\n    def __lt__(self, other):\n        return self._entry < PrimedEntry(other)._entry\n\n    def __le__(self, other):\n        return self._entry <= PrimedEntry(other)._entry\n\n    def __gt__(self, other):\n        return self._entry > PrimedEntry(other)._entry\n\n    def __ge__(self, other):\n        return self._entry >= PrimedEntry(other)._entry\n\n    def is_unprimed(self):\n        \"\"\"\n        Checks if ``self`` is an unprimed element.\n\n        TEST::\n\n            sage: a = ShiftedPrimedTableau([[1,\"2p\"]])[0][1]\n            sage: a.is_unprimed()\n            False\n        \"\"\"\n        return is_even(self._entry)\n\n    def is_primed(self):\n        \"\"\"\n        Checks if ``self`` is a primed element.\n\n        TEST::\n\n            sage: a = ShiftedPrimedTableau([[1,\"2p\"]])[0][1]\n            sage: a.is_primed()\n            True\n        \"\"\"\n        return is_odd(self._entry)\n\n    def unprimed(self):\n        \"\"\"\n        Unprime ``self`` if it is a primed element.\n\n        TEST::\n\n            sage: a = ShiftedPrimedTableau([[1,\"2p\"]])[0][1]\n            sage: a.unprimed()\n            2\n        \"\"\"\n        if is_even(self._entry):\n            return self\n        else:\n            return PrimedEntry(double=self._entry + 1)\n\n    def primed(self):\n        \"\"\"\n        Prime ``self`` if it is an unprimed element.\n\n        TEST::\n\n            sage: a = ShiftedPrimedTableau([[1,\"2p\"]])[0][0]\n            sage: a.primed()\n            1'\n        \"\"\"\n\n        if is_even(self._entry):\n            return PrimedEntry(double=self._entry - 1)\n        else:\n            return self\n\n    def increase_half(self):\n        return PrimedEntry(double=self._entry + 1)\n\n    def decrease_half(self):\n        return PrimedEntry(double=self._entry - 1)\n\n    def increase_one(self):\n        return PrimedEntry(double=self._entry + 2)\n\n    def decrease_one(self):\n        return PrimedEntry(double=self._entry - 2)\n```",
    "created_at": "2018-01-24T06:44:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341953",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:134" align="right">comment:134</div>

Travis, isn't that an implementation detail, mostly private?  A lot of time already went into this ticket, I would think it might be better to go in for now...

Anyway I also thought a wrapper would be more logical.  To be precise, it should be a poset, but that's probably overkill.

EDIT: corrected version.

```
class PrimedEntry(SageObject):
    """
    The class of entries in shifted primed tableaux.
    """
    def __init__(self, entry=None, double=None):
        """
        Normalize the entry.

        TEST::

            sage: ShiftedPrimedTableau([[1,"2p"]])[0][1]
            2'
            sage: ShiftedPrimedTableau([[1,"2'"]])[0][1]
            2'
            sage: ShiftedPrimedTableau([[1,1.5]])[0][1]
            2'
        """
        # store primed numbers as odd, unprimed numbers as even integers
        if isinstance(entry, self.__class__):
            self._entry = entry._entry
            return

        if double is not None:
            self._entry = Integer(double)
            return

        if isinstance(entry, str):
            if (entry[-1] == "'" or entry[-1] == "p") and entry[:-1].isdigit() is True:
                # Check if an element has "'" or "p" at the end
                self._entry = 2*Integer(entry[:-1]) - 1
                return

        try:
            entry = Rational(entry)
        except (TypeError, ValueError):
            raise ValueError("primed elements have wrong format")
        if entry.denominator() not in (1, 2):
            # Check if an element is a half-integer
            raise ValueError("all numbers must be half-integers")
        self._entry = Integer(2*entry)

    def __hash__(self):
        return self._entry

    def __repr__(self):
        """
        Represent ``self`` as primed or unprimed integer.

        TEST::

            sage: ShiftedPrimedTableau([[1,"2p"]])[0][1]
            2'
        """
        if is_even(self._entry):
            return str(self._entry//2)
        else:
            return str((self._entry+1)//2) + "'"

    def integer(self):
        return self._entry//2

    def __eq__(self, other):
        return self._entry == PrimedEntry(other)._entry

    def __ne__(self, other):
        return self._entry != PrimedEntry(other)._entry

    def __lt__(self, other):
        return self._entry < PrimedEntry(other)._entry

    def __le__(self, other):
        return self._entry <= PrimedEntry(other)._entry

    def __gt__(self, other):
        return self._entry > PrimedEntry(other)._entry

    def __ge__(self, other):
        return self._entry >= PrimedEntry(other)._entry

    def is_unprimed(self):
        """
        Checks if ``self`` is an unprimed element.

        TEST::

            sage: a = ShiftedPrimedTableau([[1,"2p"]])[0][1]
            sage: a.is_unprimed()
            False
        """
        return is_even(self._entry)

    def is_primed(self):
        """
        Checks if ``self`` is a primed element.

        TEST::

            sage: a = ShiftedPrimedTableau([[1,"2p"]])[0][1]
            sage: a.is_primed()
            True
        """
        return is_odd(self._entry)

    def unprimed(self):
        """
        Unprime ``self`` if it is a primed element.

        TEST::

            sage: a = ShiftedPrimedTableau([[1,"2p"]])[0][1]
            sage: a.unprimed()
            2
        """
        if is_even(self._entry):
            return self
        else:
            return PrimedEntry(double=self._entry + 1)

    def primed(self):
        """
        Prime ``self`` if it is an unprimed element.

        TEST::

            sage: a = ShiftedPrimedTableau([[1,"2p"]])[0][0]
            sage: a.primed()
            1'
        """

        if is_even(self._entry):
            return PrimedEntry(double=self._entry - 1)
        else:
            return self

    def increase_half(self):
        return PrimedEntry(double=self._entry + 1)

    def decrease_half(self):
        return PrimedEntry(double=self._entry - 1)

    def increase_one(self):
        return PrimedEntry(double=self._entry + 2)

    def decrease_one(self):
        return PrimedEntry(double=self._entry - 2)
```



---

archive/issue_comments_341954.json:
```json
{
    "body": "<div id=\"comment:135\" align=\"right\">comment:135</div>\n\nAttachment: **[shifted_primed_tableau.py.gz](https://github.com/sagemath/sage/files/ticket22921/shifted_primed_tableau.py.gz)**\n\nI spent some time abstracting `PrimedEntry`, but the performance is not really good.  Moreover, this raises the question whether the elements of the reading word should be integers or `PrimedEntry`s.\n\nI attached the file in case it is of any interest.",
    "created_at": "2018-01-24T21:17:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341954",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:135" align="right">comment:135</div>

Attachment: **[shifted_primed_tableau.py.gz](https://github.com/sagemath/sage/files/ticket22921/shifted_primed_tableau.py.gz)**

I spent some time abstracting `PrimedEntry`, but the performance is not really good.  Moreover, this raises the question whether the elements of the reading word should be integers or `PrimedEntry`s.

I attached the file in case it is of any interest.



---

archive/issue_comments_341955.json:
```json
{
    "body": "<div id=\"comment:136\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72d67d79064f7653729e712ef20f25abb6c8a22b\"><code>72d67d7</code></a></td><td><code>Changed Entry class</code></td></tr></table>\n",
    "created_at": "2018-01-24T23:48:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341955",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:136"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72d67d79064f7653729e712ef20f25abb6c8a22b"><code>72d67d7</code></a></td><td><code>Changed Entry class</code></td></tr></table>




---

archive/issue_comments_341956.json:
```json
{
    "body": "Changed commit from **[`fe58704`](https://github.com/sagemath/sagetrac-mirror/commit/fe58704b1a69db9856d397cec4a4a726fbda74c1)** to **[`72d67d7`](https://github.com/sagemath/sagetrac-mirror/commit/72d67d79064f7653729e712ef20f25abb6c8a22b)**",
    "created_at": "2018-01-24T23:48:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341956",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fe58704`](https://github.com/sagemath/sagetrac-mirror/commit/fe58704b1a69db9856d397cec4a4a726fbda74c1)** to **[`72d67d7`](https://github.com/sagemath/sagetrac-mirror/commit/72d67d79064f7653729e712ef20f25abb6c8a22b)**



---

archive/issue_comments_341957.json:
```json
{
    "body": "<div id=\"comment:137\" align=\"right\">comment:137</div>\n\nThank you for helping me with this.\n\nReplying to [@mantepse](#comment%3A134):\n> Travis, isn't that an implementation detail, mostly private?  A lot of time already went into this ticket, I would think it might be better to go in for now...\n> \n> Anyway I also thought a wrapper would be more logical.  To be precise, it should be a poset, but that's probably overkill.\n> \n> EDIT: corrected version.\n> \n> ```\n> class PrimedEntry(SageObject):\n>     \"\"\"\n>     The class of entries in shifted primed tableaux.\n>     \"\"\"\n>     def __init__(self, entry=None, double=None):\n>         \"\"\"\n>         Normalize the entry.\n> \n>         TEST::\n> \n>             sage: ShiftedPrimedTableau([[1,\"2p\"]])[0][1]\n>             2'\n>             sage: ShiftedPrimedTableau([[1,\"2'\"]])[0][1]\n>             2'\n>             sage: ShiftedPrimedTableau([[1,1.5]])[0][1]\n>             2'\n>         \"\"\"\n>         # store primed numbers as odd, unprimed numbers as even integers\n>         if isinstance(entry, self.__class__):\n>             self._entry = entry._entry\n>             return\n> \n>         if double is not None:\n>             self._entry = Integer(double)\n>             return\n> \n>         if isinstance(entry, str):\n>             if (entry[-1] == \"'\" or entry[-1] == \"p\") and entry[:-1].isdigit() is True:\n>                 # Check if an element has \"'\" or \"p\" at the end\n>                 self._entry = 2*Integer(entry[:-1]) - 1\n>                 return\n> \n>         try:\n>             entry = Rational(entry)\n>         except (TypeError, ValueError):\n>             raise ValueError(\"primed elements have wrong format\")\n>         if entry.denominator() not in (1, 2):\n>             # Check if an element is a half-integer\n>             raise ValueError(\"all numbers must be half-integers\")\n>         self._entry = Integer(2*entry)\n> \n>     def __hash__(self):\n>         return self._entry\n> \n>     def __repr__(self):\n>         \"\"\"\n>         Represent ``self`` as primed or unprimed integer.\n> \n>         TEST::\n> \n>             sage: ShiftedPrimedTableau([[1,\"2p\"]])[0][1]\n>             2'\n>         \"\"\"\n>         if is_even(self._entry):\n>             return str(self._entry//2)\n>         else:\n>             return str((self._entry+1)//2) + \"'\"\n> \n>     def integer(self):\n>         return self._entry//2\n> \n>     def __eq__(self, other):\n>         return self._entry == PrimedEntry(other)._entry\n> \n>     def __ne__(self, other):\n>         return self._entry != PrimedEntry(other)._entry\n> \n>     def __lt__(self, other):\n>         return self._entry < PrimedEntry(other)._entry\n> \n>     def __le__(self, other):\n>         return self._entry <= PrimedEntry(other)._entry\n> \n>     def __gt__(self, other):\n>         return self._entry > PrimedEntry(other)._entry\n> \n>     def __ge__(self, other):\n>         return self._entry >= PrimedEntry(other)._entry\n> \n>     def is_unprimed(self):\n>         \"\"\"\n>         Checks if ``self`` is an unprimed element.\n> \n>         TEST::\n> \n>             sage: a = ShiftedPrimedTableau([[1,\"2p\"]])[0][1]\n>             sage: a.is_unprimed()\n>             False\n>         \"\"\"\n>         return is_even(self._entry)\n> \n>     def is_primed(self):\n>         \"\"\"\n>         Checks if ``self`` is a primed element.\n> \n>         TEST::\n> \n>             sage: a = ShiftedPrimedTableau([[1,\"2p\"]])[0][1]\n>             sage: a.is_primed()\n>             True\n>         \"\"\"\n>         return is_odd(self._entry)\n> \n>     def unprimed(self):\n>         \"\"\"\n>         Unprime ``self`` if it is a primed element.\n> \n>         TEST::\n> \n>             sage: a = ShiftedPrimedTableau([[1,\"2p\"]])[0][1]\n>             sage: a.unprimed()\n>             2\n>         \"\"\"\n>         if is_even(self._entry):\n>             return self\n>         else:\n>             return PrimedEntry(double=self._entry + 1)\n> \n>     def primed(self):\n>         \"\"\"\n>         Prime ``self`` if it is an unprimed element.\n> \n>         TEST::\n> \n>             sage: a = ShiftedPrimedTableau([[1,\"2p\"]])[0][0]\n>             sage: a.primed()\n>             1'\n>         \"\"\"\n> \n>         if is_even(self._entry):\n>             return PrimedEntry(double=self._entry - 1)\n>         else:\n>             return self\n> \n>     def increase_half(self):\n>         return PrimedEntry(double=self._entry + 1)\n> \n>     def decrease_half(self):\n>         return PrimedEntry(double=self._entry - 1)\n> \n>     def increase_one(self):\n>         return PrimedEntry(double=self._entry + 2)\n> \n>     def decrease_one(self):\n>         return PrimedEntry(double=self._entry - 2)\n> ```",
    "created_at": "2018-01-24T23:49:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341957",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:137" align="right">comment:137</div>

Thank you for helping me with this.

Replying to [@mantepse](#comment%3A134):
> Travis, isn't that an implementation detail, mostly private?  A lot of time already went into this ticket, I would think it might be better to go in for now...
> 
> Anyway I also thought a wrapper would be more logical.  To be precise, it should be a poset, but that's probably overkill.
> 
> EDIT: corrected version.
> 
> ```
> class PrimedEntry(SageObject):
>     """
>     The class of entries in shifted primed tableaux.
>     """
>     def __init__(self, entry=None, double=None):
>         """
>         Normalize the entry.
> 
>         TEST::
> 
>             sage: ShiftedPrimedTableau([[1,"2p"]])[0][1]
>             2'
>             sage: ShiftedPrimedTableau([[1,"2'"]])[0][1]
>             2'
>             sage: ShiftedPrimedTableau([[1,1.5]])[0][1]
>             2'
>         """
>         # store primed numbers as odd, unprimed numbers as even integers
>         if isinstance(entry, self.__class__):
>             self._entry = entry._entry
>             return
> 
>         if double is not None:
>             self._entry = Integer(double)
>             return
> 
>         if isinstance(entry, str):
>             if (entry[-1] == "'" or entry[-1] == "p") and entry[:-1].isdigit() is True:
>                 # Check if an element has "'" or "p" at the end
>                 self._entry = 2*Integer(entry[:-1]) - 1
>                 return
> 
>         try:
>             entry = Rational(entry)
>         except (TypeError, ValueError):
>             raise ValueError("primed elements have wrong format")
>         if entry.denominator() not in (1, 2):
>             # Check if an element is a half-integer
>             raise ValueError("all numbers must be half-integers")
>         self._entry = Integer(2*entry)
> 
>     def __hash__(self):
>         return self._entry
> 
>     def __repr__(self):
>         """
>         Represent ``self`` as primed or unprimed integer.
> 
>         TEST::
> 
>             sage: ShiftedPrimedTableau([[1,"2p"]])[0][1]
>             2'
>         """
>         if is_even(self._entry):
>             return str(self._entry//2)
>         else:
>             return str((self._entry+1)//2) + "'"
> 
>     def integer(self):
>         return self._entry//2
> 
>     def __eq__(self, other):
>         return self._entry == PrimedEntry(other)._entry
> 
>     def __ne__(self, other):
>         return self._entry != PrimedEntry(other)._entry
> 
>     def __lt__(self, other):
>         return self._entry < PrimedEntry(other)._entry
> 
>     def __le__(self, other):
>         return self._entry <= PrimedEntry(other)._entry
> 
>     def __gt__(self, other):
>         return self._entry > PrimedEntry(other)._entry
> 
>     def __ge__(self, other):
>         return self._entry >= PrimedEntry(other)._entry
> 
>     def is_unprimed(self):
>         """
>         Checks if ``self`` is an unprimed element.
> 
>         TEST::
> 
>             sage: a = ShiftedPrimedTableau([[1,"2p"]])[0][1]
>             sage: a.is_unprimed()
>             False
>         """
>         return is_even(self._entry)
> 
>     def is_primed(self):
>         """
>         Checks if ``self`` is a primed element.
> 
>         TEST::
> 
>             sage: a = ShiftedPrimedTableau([[1,"2p"]])[0][1]
>             sage: a.is_primed()
>             True
>         """
>         return is_odd(self._entry)
> 
>     def unprimed(self):
>         """
>         Unprime ``self`` if it is a primed element.
> 
>         TEST::
> 
>             sage: a = ShiftedPrimedTableau([[1,"2p"]])[0][1]
>             sage: a.unprimed()
>             2
>         """
>         if is_even(self._entry):
>             return self
>         else:
>             return PrimedEntry(double=self._entry + 1)
> 
>     def primed(self):
>         """
>         Prime ``self`` if it is an unprimed element.
> 
>         TEST::
> 
>             sage: a = ShiftedPrimedTableau([[1,"2p"]])[0][0]
>             sage: a.primed()
>             1'
>         """
> 
>         if is_even(self._entry):
>             return PrimedEntry(double=self._entry - 1)
>         else:
>             return self
> 
>     def increase_half(self):
>         return PrimedEntry(double=self._entry + 1)
> 
>     def decrease_half(self):
>         return PrimedEntry(double=self._entry - 1)
> 
>     def increase_one(self):
>         return PrimedEntry(double=self._entry + 2)
> 
>     def decrease_one(self):
>         return PrimedEntry(double=self._entry - 2)
> ```



---

archive/issue_comments_341958.json:
```json
{
    "body": "<div id=\"comment:138\" align=\"right\">comment:138</div>\n\nKirill, here are some more trivialities.  The first one cuts away a few seconds on my laptop.\n\nTravis, is it good enough now?\n\n```\ndiff --git a/src/sage/combinat/shifted_primed_tableau.py b/src/sage/combinat/shifted_primed_tableau.py\nindex a80a6acaae..be701a06bb 100644\n--- a/src/sage/combinat/shifted_primed_tableau.py\n+++ b/src/sage/combinat/shifted_primed_tableau.py\n@@ -599,7 +599,7 @@ class CrystalElementShiftedPrimedTableau(ShiftedPrimedTableau):\n             sage: mat\n             [[1, 2', 2, 2], [None, 2, 3', None], [None, None, 3, None]]\n         \"\"\"\n-        m = self.shape()[0]\n+        m = len(self[0])\n         return [[None]*i + list(row) + [None]*(m-i-len(row))\n                 for i, row in enumerate(self)]\n \n@@ -809,7 +809,7 @@ class CrystalElementShiftedPrimedTableau(ShiftedPrimedTableau):\n         element_to_change = None\n         count = 0\n \n-        for element in read_word[::-1]:\n+        for element in reversed(read_word):\n             if element[1] == ind:\n                 count += 1\n             elif count == 0:\n@@ -882,7 +882,7 @@ class CrystalElementShiftedPrimedTableau(ShiftedPrimedTableau):\n         count = {i: 0 for i in range(max_entry+1)}\n         if index_set is None:\n             index_set = self.parent().index_set()\n-        for l in read_w[::-1]:\n+        for l in reversed(read_w):\n             count[l] += 1\n             if (l-1 in index_set) and (l > 1) and (count[l] > count[l-1]):\n                 return False\n@@ -2041,7 +2041,7 @@ def _add_strip(sub_tab, full_tab, length):\n             if len(sub_tab) < len(full_tab) and len(sub_tab) != 0:\n                 plat_list.append(min(sub_tab[-1] + primed_strip[-2] - 1,\n                                      full_tab[len(sub_tab)]))\n-            for row in range(1, len(sub_tab))[::-1]:\n+            for row in reversed(range(1, len(sub_tab))):\n                 plat_list.append(\n                     min(sub_tab[row-1]+primed_strip[row-1]-1, full_tab[row])\n                     - sub_tab[row] - primed_strip[row])\n```",
    "created_at": "2018-01-25T07:25:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341958",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:138" align="right">comment:138</div>

Kirill, here are some more trivialities.  The first one cuts away a few seconds on my laptop.

Travis, is it good enough now?

```
diff --git a/src/sage/combinat/shifted_primed_tableau.py b/src/sage/combinat/shifted_primed_tableau.py
index a80a6acaae..be701a06bb 100644
--- a/src/sage/combinat/shifted_primed_tableau.py
+++ b/src/sage/combinat/shifted_primed_tableau.py
@@ -599,7 +599,7 @@ class CrystalElementShiftedPrimedTableau(ShiftedPrimedTableau):
             sage: mat
             [[1, 2', 2, 2], [None, 2, 3', None], [None, None, 3, None]]
         """
-        m = self.shape()[0]
+        m = len(self[0])
         return [[None]*i + list(row) + [None]*(m-i-len(row))
                 for i, row in enumerate(self)]
 
@@ -809,7 +809,7 @@ class CrystalElementShiftedPrimedTableau(ShiftedPrimedTableau):
         element_to_change = None
         count = 0
 
-        for element in read_word[::-1]:
+        for element in reversed(read_word):
             if element[1] == ind:
                 count += 1
             elif count == 0:
@@ -882,7 +882,7 @@ class CrystalElementShiftedPrimedTableau(ShiftedPrimedTableau):
         count = {i: 0 for i in range(max_entry+1)}
         if index_set is None:
             index_set = self.parent().index_set()
-        for l in read_w[::-1]:
+        for l in reversed(read_w):
             count[l] += 1
             if (l-1 in index_set) and (l > 1) and (count[l] > count[l-1]):
                 return False
@@ -2041,7 +2041,7 @@ def _add_strip(sub_tab, full_tab, length):
             if len(sub_tab) < len(full_tab) and len(sub_tab) != 0:
                 plat_list.append(min(sub_tab[-1] + primed_strip[-2] - 1,
                                      full_tab[len(sub_tab)]))
-            for row in range(1, len(sub_tab))[::-1]:
+            for row in reversed(range(1, len(sub_tab))):
                 plat_list.append(
                     min(sub_tab[row-1]+primed_strip[row-1]-1, full_tab[row])
                     - sub_tab[row] - primed_strip[row])
```



---

archive/issue_comments_341959.json:
```json
{
    "body": "Changed commit from **[`72d67d7`](https://github.com/sagemath/sagetrac-mirror/commit/72d67d79064f7653729e712ef20f25abb6c8a22b)** to **[`7ac6cfb`](https://github.com/sagemath/sagetrac-mirror/commit/7ac6cfb7ce78610bd2fe4f05051b8e3f87e971e1)**",
    "created_at": "2018-01-25T18:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341959",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`72d67d7`](https://github.com/sagemath/sagetrac-mirror/commit/72d67d79064f7653729e712ef20f25abb6c8a22b)** to **[`7ac6cfb`](https://github.com/sagemath/sagetrac-mirror/commit/7ac6cfb7ce78610bd2fe4f05051b8e3f87e971e1)**



---

archive/issue_comments_341960.json:
```json
{
    "body": "<div id=\"comment:139\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ac6cfb7ce78610bd2fe4f05051b8e3f87e971e1\"><code>7ac6cfb</code></a></td><td><code>Minor fixes</code></td></tr></table>\n",
    "created_at": "2018-01-25T18:15:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341960",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:139"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ac6cfb7ce78610bd2fe4f05051b8e3f87e971e1"><code>7ac6cfb</code></a></td><td><code>Minor fixes</code></td></tr></table>




---

archive/issue_comments_341961.json:
```json
{
    "body": "<div id=\"comment:140\" align=\"right\">comment:140</div>\n\nI've been making my way through the current code. I think it has significantly improved by having the letter class in readability. Martin and Kirill, thank you for making the changes to the `PrimeEntry` class.\n\nAs part of my review, I have made some changes on my forthcoming push. A good majority of them are trivial changes in formatting and some tricks and micro-optimizations I've learned. Here are some of my more significant changes.\n\n- I scrubbed all (unnecessary) calls to `float` and `int`.\n- I used the fast partition iterator in one place.\n- I removed some (now incorrect) documentation. (I generally do not like implementation details of top-level classes exposed to the user when they do not really \"see\" those details.)\n- I fixed a bug with weight 0 tableaux.\n- I removed the redundant `_element_constructor_`s that just made a super call and raised the same error as what the super does. I moved the doctests.\n- Made `_reading_word_with_positions` an iterator as the list output was never used.\n- I removed the iterator for the crystals because the one from the crystals category is >10x faster:\n\n  ```\n  sage: SPT = ShiftedPrimedTableaux([3,2], max_entry=3)\n  sage: %timeit for x in SPT._old_iter(): pass\n  The slowest run took 9.45 times longer than the fastest. This could mean that an intermediate result is being cached.\n  100 loops, best of 3: 19.2 ms per loop\n  sage: %timeit for x in SPT: pass\n  The slowest run took 5.46 times longer than the fastest. This could mean that an intermediate result is being cached.\n  1000 loops, best of 3: 1.48 ms per loop\n  ```\n\nHowever, there are some other things that do need some additional work, but then I think that is the last of it.\n\n- `_contains_tableau_` and `_preprocess_` are not special Sage methods, and should not end with a trailing underscore. You also should directly test them as it helps isolate bugs when one gets introduced.\n- For the `PrimedEntry` class, you should import the class and directly construct the elements instead of indirectly via the tableau. Also, you might want to consider expanding the doc a little more (but not necessary).\n- I noticed that `PrimedEntry` can sometimes be passed a `None`, which I do not think should happen. IMO, this is a bug that is hacked around (before, it was handled by `Rational(None)` being `1` through what is essentially a shortcoming of how `Parent.__call__` works). However, it is a technical debt we can take on for now.\n- This is essentially a bug:\n\n  ```\n  sage: SPT = ShiftedPrimedTableaux(skew=[1])\n  sage: SPT.category()\n  Category of infinite enumerated sets\n  ```\n  because you cannot iterate over this object (currently). In a related issue, I added a test `TestSuite(SPT).run()` and marked as a known bug. I think you should have the correct categories in this case.",
    "created_at": "2018-01-29T18:50:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341961",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:140" align="right">comment:140</div>

I've been making my way through the current code. I think it has significantly improved by having the letter class in readability. Martin and Kirill, thank you for making the changes to the `PrimeEntry` class.

As part of my review, I have made some changes on my forthcoming push. A good majority of them are trivial changes in formatting and some tricks and micro-optimizations I've learned. Here are some of my more significant changes.

- I scrubbed all (unnecessary) calls to `float` and `int`.
- I used the fast partition iterator in one place.
- I removed some (now incorrect) documentation. (I generally do not like implementation details of top-level classes exposed to the user when they do not really "see" those details.)
- I fixed a bug with weight 0 tableaux.
- I removed the redundant `_element_constructor_`s that just made a super call and raised the same error as what the super does. I moved the doctests.
- Made `_reading_word_with_positions` an iterator as the list output was never used.
- I removed the iterator for the crystals because the one from the crystals category is >10x faster:

  ```
  sage: SPT = ShiftedPrimedTableaux([3,2], max_entry=3)
  sage: %timeit for x in SPT._old_iter(): pass
  The slowest run took 9.45 times longer than the fastest. This could mean that an intermediate result is being cached.
  100 loops, best of 3: 19.2 ms per loop
  sage: %timeit for x in SPT: pass
  The slowest run took 5.46 times longer than the fastest. This could mean that an intermediate result is being cached.
  1000 loops, best of 3: 1.48 ms per loop
  ```

However, there are some other things that do need some additional work, but then I think that is the last of it.

- `_contains_tableau_` and `_preprocess_` are not special Sage methods, and should not end with a trailing underscore. You also should directly test them as it helps isolate bugs when one gets introduced.
- For the `PrimedEntry` class, you should import the class and directly construct the elements instead of indirectly via the tableau. Also, you might want to consider expanding the doc a little more (but not necessary).
- I noticed that `PrimedEntry` can sometimes be passed a `None`, which I do not think should happen. IMO, this is a bug that is hacked around (before, it was handled by `Rational(None)` being `1` through what is essentially a shortcoming of how `Parent.__call__` works). However, it is a technical debt we can take on for now.
- This is essentially a bug:

  ```
  sage: SPT = ShiftedPrimedTableaux(skew=[1])
  sage: SPT.category()
  Category of infinite enumerated sets
  ```
  because you cannot iterate over this object (currently). In a related issue, I added a test `TestSuite(SPT).run()` and marked as a known bug. I think you should have the correct categories in this case.



---

archive/issue_events_316864.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-01-29T18:50:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316864"
}
```



---

archive/issue_events_316865.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-01-29T18:50:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316865"
}
```



---

archive/issue_comments_341962.json:
```json
{
    "body": "Changed commit from **[`7ac6cfb`](https://github.com/sagemath/sagetrac-mirror/commit/7ac6cfb7ce78610bd2fe4f05051b8e3f87e971e1)** to **[`d82d038`](https://github.com/sagemath/sagetrac-mirror/commit/d82d038c42d4e785c6c90ebfeb1b382565a7000f)**",
    "created_at": "2018-01-29T18:51:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341962",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7ac6cfb`](https://github.com/sagemath/sagetrac-mirror/commit/7ac6cfb7ce78610bd2fe4f05051b8e3f87e971e1)** to **[`d82d038`](https://github.com/sagemath/sagetrac-mirror/commit/d82d038c42d4e785c6c90ebfeb1b382565a7000f)**



---

archive/issue_comments_341963.json:
```json
{
    "body": "<div id=\"comment:141\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ab5d8181265c37b661ae8ac86e6c7d607b0e657\"><code>6ab5d81</code></a></td><td><code>Merge branch 'public/combinat/primed_tableaux_22921' of git://trac.sagemath.org/sage into public/combinat/primed_tableaux_22921</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24e4a3441d597545c153b01d00f315f7c052b7a9\"><code>24e4a34</code></a></td><td><code>Merge branch 'public/combinat/primed_tableaux_22921' of git://trac.sagemath.org/sage into public/combinat/primed_tableaux_22921</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6eabcf445af462b6fffeedf8f8ce8393cb25defe\"><code>6eabcf4</code></a></td><td><code>Whitespace, trivial doc fixes, some optimizations, and removing floats.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ca063484badf58b31e081cca575ad1a21a8dab2\"><code>9ca0634</code></a></td><td><code>Fixing bug with 0 weight tableaux.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40433dd77e2732e8869d6582d7031ae368598afc\"><code>40433dd</code></a></td><td><code>A little more cleanup.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3466f5c61edb21921a4a476e20c69b6410c4e9a4\"><code>3466f5c</code></a></td><td><code>Removing redundant _element_constructor_'s.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c155c0e93c4dd1817245509be45695a2f426f7d\"><code>8c155c0</code></a></td><td><code>Some further simplifications and tweaks.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b60c7fcc5a8d450328a421e7e52a4b2705683a4f\"><code>b60c7fc</code></a></td><td><code>Convert _reading_word_with_positions to an iterator.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d82d038c42d4e785c6c90ebfeb1b382565a7000f\"><code>d82d038</code></a></td><td><code>Use the iterator from the crystals from the category (over 10x faster).</code></td></tr></table>\n",
    "created_at": "2018-01-29T18:51:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341963",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:141"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ab5d8181265c37b661ae8ac86e6c7d607b0e657"><code>6ab5d81</code></a></td><td><code>Merge branch 'public/combinat/primed_tableaux_22921' of git://trac.sagemath.org/sage into public/combinat/primed_tableaux_22921</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24e4a3441d597545c153b01d00f315f7c052b7a9"><code>24e4a34</code></a></td><td><code>Merge branch 'public/combinat/primed_tableaux_22921' of git://trac.sagemath.org/sage into public/combinat/primed_tableaux_22921</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6eabcf445af462b6fffeedf8f8ce8393cb25defe"><code>6eabcf4</code></a></td><td><code>Whitespace, trivial doc fixes, some optimizations, and removing floats.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ca063484badf58b31e081cca575ad1a21a8dab2"><code>9ca0634</code></a></td><td><code>Fixing bug with 0 weight tableaux.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40433dd77e2732e8869d6582d7031ae368598afc"><code>40433dd</code></a></td><td><code>A little more cleanup.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3466f5c61edb21921a4a476e20c69b6410c4e9a4"><code>3466f5c</code></a></td><td><code>Removing redundant _element_constructor_'s.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c155c0e93c4dd1817245509be45695a2f426f7d"><code>8c155c0</code></a></td><td><code>Some further simplifications and tweaks.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b60c7fcc5a8d450328a421e7e52a4b2705683a4f"><code>b60c7fc</code></a></td><td><code>Convert _reading_word_with_positions to an iterator.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d82d038c42d4e785c6c90ebfeb1b382565a7000f"><code>d82d038</code></a></td><td><code>Use the iterator from the crystals from the category (over 10x faster).</code></td></tr></table>




---

archive/issue_comments_341964.json:
```json
{
    "body": "<div id=\"comment:142\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2af9f709afacd0d2abad80b2722eacf1f90d5d76\"><code>2af9f70</code></a></td><td><code>Minor fixes</code></td></tr></table>\n",
    "created_at": "2018-01-30T20:58:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341964",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:142"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2af9f709afacd0d2abad80b2722eacf1f90d5d76"><code>2af9f70</code></a></td><td><code>Minor fixes</code></td></tr></table>




---

archive/issue_comments_341965.json:
```json
{
    "body": "Changed commit from **[`d82d038`](https://github.com/sagemath/sagetrac-mirror/commit/d82d038c42d4e785c6c90ebfeb1b382565a7000f)** to **[`2af9f70`](https://github.com/sagemath/sagetrac-mirror/commit/2af9f709afacd0d2abad80b2722eacf1f90d5d76)**",
    "created_at": "2018-01-30T20:58:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341965",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d82d038`](https://github.com/sagemath/sagetrac-mirror/commit/d82d038c42d4e785c6c90ebfeb1b382565a7000f)** to **[`2af9f70`](https://github.com/sagemath/sagetrac-mirror/commit/2af9f709afacd0d2abad80b2722eacf1f90d5d76)**



---

archive/issue_comments_341966.json:
```json
{
    "body": "<div id=\"comment:143\" align=\"right\">comment:143</div>\n\nAlright, I've addressed your comments.\n\nReplying to [@tscrim](#comment%3A140):\n> I've been making my way through the current code. I think it has significantly improved by having the letter class in readability. Martin and Kirill, thank you for making the changes to the `PrimeEntry` class.\n> \n> As part of my review, I have made some changes on my forthcoming push. A good majority of them are trivial changes in formatting and some tricks and micro-optimizations I've learned. Here are some of my more significant changes.\n> \n> - I scrubbed all (unnecessary) calls to `float` and `int`.\n> - I used the fast partition iterator in one place.\n> - I removed some (now incorrect) documentation. (I generally do not like implementation details of top-level classes exposed to the user when they do not really \"see\" those details.)\n> - I fixed a bug with weight 0 tableaux.\n> - I removed the redundant `_element_constructor_`s that just made a super call and raised the same error as what the super does. I moved the doctests.\n> - Made `_reading_word_with_positions` an iterator as the list output was never used.\n> - I removed the iterator for the crystals because the one from the crystals category is >10x faster:\n> \n>   ```\n>   sage: SPT = ShiftedPrimedTableaux([3,2], max_entry=3)\n>   sage: %timeit for x in SPT._old_iter(): pass\n>   The slowest run took 9.45 times longer than the fastest. This could mean that an intermediate result is being cached.\n>   100 loops, best of 3: 19.2 ms per loop\n>   sage: %timeit for x in SPT: pass\n>   The slowest run took 5.46 times longer than the fastest. This could mean that an intermediate result is being cached.\n>   1000 loops, best of 3: 1.48 ms per loop\n>   ```\n> \n> However, there are some other things that do need some additional work, but then I think that is the last of it.\n> \n> - `_contains_tableau_` and `_preprocess_` are not special Sage methods, and should not end with a trailing underscore. You also should directly test them as it helps isolate bugs when one gets introduced.\n> - For the `PrimedEntry` class, you should import the class and directly construct the elements instead of indirectly via the tableau. Also, you might want to consider expanding the doc a little more (but not necessary).\n> - I noticed that `PrimedEntry` can sometimes be passed a `None`, which I do not think should happen. IMO, this is a bug that is hacked around (before, it was handled by `Rational(None)` being `1` through what is essentially a shortcoming of how `Parent.__call__` works). However, it is a technical debt we can take on for now.\n> - This is essentially a bug:\n> \n>   ```\n>   sage: SPT = ShiftedPrimedTableaux(skew=[1])\n>   sage: SPT.category()\n>   Category of infinite enumerated sets\n>   ```\n>   because you cannot iterate over this object (currently). In a related issue, I added a test `TestSuite(SPT).run()` and marked as a known bug. I think you should have the correct categories in this case.",
    "created_at": "2018-01-30T21:01:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341966",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:143" align="right">comment:143</div>

Alright, I've addressed your comments.

Replying to [@tscrim](#comment%3A140):
> I've been making my way through the current code. I think it has significantly improved by having the letter class in readability. Martin and Kirill, thank you for making the changes to the `PrimeEntry` class.
> 
> As part of my review, I have made some changes on my forthcoming push. A good majority of them are trivial changes in formatting and some tricks and micro-optimizations I've learned. Here are some of my more significant changes.
> 
> - I scrubbed all (unnecessary) calls to `float` and `int`.
> - I used the fast partition iterator in one place.
> - I removed some (now incorrect) documentation. (I generally do not like implementation details of top-level classes exposed to the user when they do not really "see" those details.)
> - I fixed a bug with weight 0 tableaux.
> - I removed the redundant `_element_constructor_`s that just made a super call and raised the same error as what the super does. I moved the doctests.
> - Made `_reading_word_with_positions` an iterator as the list output was never used.
> - I removed the iterator for the crystals because the one from the crystals category is >10x faster:
> 
>   ```
>   sage: SPT = ShiftedPrimedTableaux([3,2], max_entry=3)
>   sage: %timeit for x in SPT._old_iter(): pass
>   The slowest run took 9.45 times longer than the fastest. This could mean that an intermediate result is being cached.
>   100 loops, best of 3: 19.2 ms per loop
>   sage: %timeit for x in SPT: pass
>   The slowest run took 5.46 times longer than the fastest. This could mean that an intermediate result is being cached.
>   1000 loops, best of 3: 1.48 ms per loop
>   ```
> 
> However, there are some other things that do need some additional work, but then I think that is the last of it.
> 
> - `_contains_tableau_` and `_preprocess_` are not special Sage methods, and should not end with a trailing underscore. You also should directly test them as it helps isolate bugs when one gets introduced.
> - For the `PrimedEntry` class, you should import the class and directly construct the elements instead of indirectly via the tableau. Also, you might want to consider expanding the doc a little more (but not necessary).
> - I noticed that `PrimedEntry` can sometimes be passed a `None`, which I do not think should happen. IMO, this is a bug that is hacked around (before, it was handled by `Rational(None)` being `1` through what is essentially a shortcoming of how `Parent.__call__` works). However, it is a technical debt we can take on for now.
> - This is essentially a bug:
> 
>   ```
>   sage: SPT = ShiftedPrimedTableaux(skew=[1])
>   sage: SPT.category()
>   Category of infinite enumerated sets
>   ```
>   because you cannot iterate over this object (currently). In a related issue, I added a test `TestSuite(SPT).run()` and marked as a known bug. I think you should have the correct categories in this case.



---

archive/issue_comments_341967.json:
```json
{
    "body": "<div id=\"comment:144\" align=\"right\">comment:144</div>\n\nReplying to [@sagetrac-kbparamonov](#comment%3A143):\n> Alright, I've addressed your comments.\n\n> Replying to [@tscrim](#comment%3A140):\n> > - `_contains_tableau_` and `_preprocess_` are not special Sage methods, and should not end with a trailing underscore. You also should directly test them as it helps isolate bugs when one gets introduced.\n\nThe latter part has not been adequately addressed. In particular, you should have the *direct* tests for each method testing the key points (ideally every code path).\n\n> > - I noticed that `PrimedEntry` can sometimes be passed a `None`, which I do not think should happen. IMO, this is a bug that is hacked around (before, it was handled by `Rational(None)` being `1` through what is essentially a shortcoming of how `Parent.__call__` works). However, it is a technical debt we can take on for now.\n\nYou should add a test showing that `PrimedEntry(None)` now raises an error.\n\nI'm also not convinced of having the `try-except` blocks in the comparisons of `PrimedEntry`. I think because of how low-level `PrimedEntry` is, you don't need the extra minor speed hit except for  `__eq__` and `__ne__` (I agree with them raising an error, but the new error message is not really useful IMO).\n\n---\n\nSorry, one additional little thing: `PrimedEntry.integer`, `PrimedEntry.decrease_*`, and `PrimedEntry.increase_*` should have at least a one line docstring explaining what they do.",
    "created_at": "2018-01-30T22:35:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341967",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:144" align="right">comment:144</div>

Replying to [@sagetrac-kbparamonov](#comment%3A143):
> Alright, I've addressed your comments.

> Replying to [@tscrim](#comment%3A140):
> > - `_contains_tableau_` and `_preprocess_` are not special Sage methods, and should not end with a trailing underscore. You also should directly test them as it helps isolate bugs when one gets introduced.

The latter part has not been adequately addressed. In particular, you should have the *direct* tests for each method testing the key points (ideally every code path).

> > - I noticed that `PrimedEntry` can sometimes be passed a `None`, which I do not think should happen. IMO, this is a bug that is hacked around (before, it was handled by `Rational(None)` being `1` through what is essentially a shortcoming of how `Parent.__call__` works). However, it is a technical debt we can take on for now.

You should add a test showing that `PrimedEntry(None)` now raises an error.

I'm also not convinced of having the `try-except` blocks in the comparisons of `PrimedEntry`. I think because of how low-level `PrimedEntry` is, you don't need the extra minor speed hit except for  `__eq__` and `__ne__` (I agree with them raising an error, but the new error message is not really useful IMO).

---

Sorry, one additional little thing: `PrimedEntry.integer`, `PrimedEntry.decrease_*`, and `PrimedEntry.increase_*` should have at least a one line docstring explaining what they do.



---

archive/issue_comments_341968.json:
```json
{
    "body": "Changed commit from **[`2af9f70`](https://github.com/sagemath/sagetrac-mirror/commit/2af9f709afacd0d2abad80b2722eacf1f90d5d76)** to **[`6cc7824`](https://github.com/sagemath/sagetrac-mirror/commit/6cc7824743549205e46d358cf5b1045ed38eae79)**",
    "created_at": "2018-01-30T23:33:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341968",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2af9f70`](https://github.com/sagemath/sagetrac-mirror/commit/2af9f709afacd0d2abad80b2722eacf1f90d5d76)** to **[`6cc7824`](https://github.com/sagemath/sagetrac-mirror/commit/6cc7824743549205e46d358cf5b1045ed38eae79)**



---

archive/issue_comments_341969.json:
```json
{
    "body": "<div id=\"comment:145\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6cc7824743549205e46d358cf5b1045ed38eae79\"><code>6cc7824</code></a></td><td><code>Minor changes in PrimedEntry docs</code></td></tr></table>\n",
    "created_at": "2018-01-30T23:33:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341969",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:145"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6cc7824743549205e46d358cf5b1045ed38eae79"><code>6cc7824</code></a></td><td><code>Minor changes in PrimedEntry docs</code></td></tr></table>




---

archive/issue_comments_341970.json:
```json
{
    "body": "<div id=\"comment:146\" align=\"right\">comment:146</div>\n\nIs this what you had in mind?\n\nReplying to [@tscrim](#comment%3A144):\n> Replying to [@sagetrac-kbparamonov](#comment%3A143):\n> > Alright, I've addressed your comments.\n> \n> \n> > Replying to [@tscrim](#comment%3A140):\n> > > - `_contains_tableau_` and `_preprocess_` are not special Sage methods, and should not end with a trailing underscore. You also should directly test them as it helps isolate bugs when one gets introduced.\n> \n> \n> The latter part has not been adequately addressed. In particular, you should have the *direct* tests for each method testing the key points (ideally every code path).\n> \n> > > - I noticed that `PrimedEntry` can sometimes be passed a `None`, which I do not think should happen. IMO, this is a bug that is hacked around (before, it was handled by `Rational(None)` being `1` through what is essentially a shortcoming of how `Parent.__call__` works). However, it is a technical debt we can take on for now.\n> \n> \n> You should add a test showing that `PrimedEntry(None)` now raises an error.\n> \n> I'm also not convinced of having the `try-except` blocks in the comparisons of `PrimedEntry`. I think because of how low-level `PrimedEntry` is, you don't need the extra minor speed hit except for  `__eq__` and `__ne__` (I agree with them raising an error, but the new error message is not really useful IMO).\n> \n> \n> ---\n> \n> Sorry, one additional little thing: `PrimedEntry.integer`, `PrimedEntry.decrease_*`, and `PrimedEntry.increase_*` should have at least a one line docstring explaining what they do.",
    "created_at": "2018-01-30T23:35:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341970",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:146" align="right">comment:146</div>

Is this what you had in mind?

Replying to [@tscrim](#comment%3A144):
> Replying to [@sagetrac-kbparamonov](#comment%3A143):
> > Alright, I've addressed your comments.
> 
> 
> > Replying to [@tscrim](#comment%3A140):
> > > - `_contains_tableau_` and `_preprocess_` are not special Sage methods, and should not end with a trailing underscore. You also should directly test them as it helps isolate bugs when one gets introduced.
> 
> 
> The latter part has not been adequately addressed. In particular, you should have the *direct* tests for each method testing the key points (ideally every code path).
> 
> > > - I noticed that `PrimedEntry` can sometimes be passed a `None`, which I do not think should happen. IMO, this is a bug that is hacked around (before, it was handled by `Rational(None)` being `1` through what is essentially a shortcoming of how `Parent.__call__` works). However, it is a technical debt we can take on for now.
> 
> 
> You should add a test showing that `PrimedEntry(None)` now raises an error.
> 
> I'm also not convinced of having the `try-except` blocks in the comparisons of `PrimedEntry`. I think because of how low-level `PrimedEntry` is, you don't need the extra minor speed hit except for  `__eq__` and `__ne__` (I agree with them raising an error, but the new error message is not really useful IMO).
> 
> 
> ---
> 
> Sorry, one additional little thing: `PrimedEntry.integer`, `PrimedEntry.decrease_*`, and `PrimedEntry.increase_*` should have at least a one line docstring explaining what they do.



---

archive/issue_comments_341971.json:
```json
{
    "body": "<div id=\"comment:147\" align=\"right\">comment:147</div>\n\nYes, although there are two `_contains_tableau` that are still not directly doctested. Also, the `__ge__` test is actually testing `__le__`.",
    "created_at": "2018-01-31T01:36:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341971",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:147" align="right">comment:147</div>

Yes, although there are two `_contains_tableau` that are still not directly doctested. Also, the `__ge__` test is actually testing `__le__`.



---

archive/issue_comments_341972.json:
```json
{
    "body": "Changed commit from **[`6cc7824`](https://github.com/sagemath/sagetrac-mirror/commit/6cc7824743549205e46d358cf5b1045ed38eae79)** to **[`85353ab`](https://github.com/sagemath/sagetrac-mirror/commit/85353ab927b2b9b01b91aa4a26d5b16936360b9e)**",
    "created_at": "2018-01-31T01:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341972",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6cc7824`](https://github.com/sagemath/sagetrac-mirror/commit/6cc7824743549205e46d358cf5b1045ed38eae79)** to **[`85353ab`](https://github.com/sagemath/sagetrac-mirror/commit/85353ab927b2b9b01b91aa4a26d5b16936360b9e)**



---

archive/issue_comments_341973.json:
```json
{
    "body": "<div id=\"comment:148\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85353ab927b2b9b01b91aa4a26d5b16936360b9e\"><code>85353ab</code></a></td><td><code>More minor fixes</code></td></tr></table>\n",
    "created_at": "2018-01-31T01:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341973",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:148"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85353ab927b2b9b01b91aa4a26d5b16936360b9e"><code>85353ab</code></a></td><td><code>More minor fixes</code></td></tr></table>




---

archive/issue_comments_341974.json:
```json
{
    "body": "<div id=\"comment:149\" align=\"right\">comment:149</div>\n\nThank you. I am happy and given Martin's comments, I am setting this to a positive review.",
    "created_at": "2018-01-31T02:11:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341974",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:149" align="right">comment:149</div>

Thank you. I am happy and given Martin's comments, I am setting this to a positive review.



---

archive/issue_events_316866.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-01-31T02:11:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316866"
}
```



---

archive/issue_events_316867.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-01-31T02:11:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316867"
}
```



---

archive/issue_comments_341975.json:
```json
{
    "body": "<div id=\"comment:150\" align=\"right\">comment:150</div>\n\nThank you for reviewing it!\n\nReplying to [@tscrim](#comment%3A149):\n> Thank you. I am happy and given Martin's comments, I am setting this to a positive review.",
    "created_at": "2018-01-31T06:36:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341975",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:150" align="right">comment:150</div>

Thank you for reviewing it!

Replying to [@tscrim](#comment%3A149):
> Thank you. I am happy and given Martin's comments, I am setting this to a positive review.



---

archive/issue_comments_341976.json:
```json
{
    "body": "<div id=\"comment:151\" align=\"right\">comment:151</div>\n\nWonderful! #23896 is then also ready for review!  (For some reason, the automerging failed, but I could checkout the ticket without trouble.)",
    "created_at": "2018-01-31T08:56:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341976",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:151" align="right">comment:151</div>

Wonderful! #23896 is then also ready for review!  (For some reason, the automerging failed, but I could checkout the ticket without trouble.)



---

archive/issue_comments_341977.json:
```json
{
    "body": "<div id=\"comment:152\" align=\"right\">comment:152</div>\n\nThe patchbot is reporting a failure I overlooked because the doctest is marked \"long time\":\n\n```\nsage: SPT = ShiftedPrimedTableaux()\nsage: TestSuite(SPT).run()\n  Failure in _test_eq:\n  Traceback (most recent call last):\n    File \"/home/martin/sage-develop/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py\", line 294, in run                                   \n      test_method(tester = tester)\n    File \"sage/structure/element.pyx\", line 745, in sage.structure.element.Element._test_eq (build/cythonized/sage/structure/element.c:6812)          \n      tester.assertFalse(self == None,\n    File \"/home/martin/sage-develop/local/lib/python2.7/unittest/case.py\", line 416, in assertFalse                                                   \n      raise self.failureException(msg)\n  AssertionError: broken equality: [] == None                                                                                                         \n  ------------------------------------------------------------\n  The following tests failed: _test_eq\nFailure in _test_elements\nThe following tests failed: _test_elements\n```\nApparently, it fails because of the following, but I'm not sure:\n\n```\nsage: SPT = ShiftedPrimedTableaux()\nsage: SPT.an_element()\n[]\nsage: SPT.an_element() == None\nTrue\n# which is, because\nsage: ShiftedPrimedTableau(None)\n[]\n```",
    "created_at": "2018-02-01T04:13:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341977",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:152" align="right">comment:152</div>

The patchbot is reporting a failure I overlooked because the doctest is marked "long time":

```
sage: SPT = ShiftedPrimedTableaux()
sage: TestSuite(SPT).run()
  Failure in _test_eq:
  Traceback (most recent call last):
    File "/home/martin/sage-develop/local/lib/python2.7/site-packages/sage/misc/sage_unittest.py", line 294, in run                                   
      test_method(tester = tester)
    File "sage/structure/element.pyx", line 745, in sage.structure.element.Element._test_eq (build/cythonized/sage/structure/element.c:6812)          
      tester.assertFalse(self == None,
    File "/home/martin/sage-develop/local/lib/python2.7/unittest/case.py", line 416, in assertFalse                                                   
      raise self.failureException(msg)
  AssertionError: broken equality: [] == None                                                                                                         
  ------------------------------------------------------------
  The following tests failed: _test_eq
Failure in _test_elements
The following tests failed: _test_elements
```
Apparently, it fails because of the following, but I'm not sure:

```
sage: SPT = ShiftedPrimedTableaux()
sage: SPT.an_element()
[]
sage: SPT.an_element() == None
True
# which is, because
sage: ShiftedPrimedTableau(None)
[]
```



---

archive/issue_events_316868.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2018-02-01T04:13:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316868"
}
```



---

archive/issue_events_316869.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2018-02-01T04:13:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316869"
}
```



---

archive/issue_comments_341978.json:
```json
{
    "body": "<div id=\"comment:153\" align=\"right\">comment:153</div>\n\nThat might be my fault and something I introduced trying to keep the code clean. I am about ready to board a flight to Australia, so I cannot look at it for ~19 hours.",
    "created_at": "2018-02-01T04:18:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341978",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:153" align="right">comment:153</div>

That might be my fault and something I introduced trying to keep the code clean. I am about ready to board a flight to Australia, so I cannot look at it for ~19 hours.



---

archive/issue_comments_341979.json:
```json
{
    "body": "<div id=\"comment:154\" align=\"right\">comment:154</div>\n\nQuick reply:\n\n```\n    def __classcall_private__(cls, T, skew=None):\n...\n      if isinstance(T, ShiftedPrimedTableau) and T._skew == skew:\n            return T\n      if not T or T == [[]]:\n            return ShiftedPrimedTableaux(skew=skew)([])\n```\nshould be \n\n```\n      if T == [] or T == [[]]:\n            return ShiftedPrimedTableaux(skew=skew)([])\n\n```\n\nBut the bigger question is: why is `not T` preferred over `T == []` by some people.\n\nThe former is impossible to grep for, but still widely used.",
    "created_at": "2018-02-01T04:28:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341979",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:154" align="right">comment:154</div>

Quick reply:

```
    def __classcall_private__(cls, T, skew=None):
...
      if isinstance(T, ShiftedPrimedTableau) and T._skew == skew:
            return T
      if not T or T == [[]]:
            return ShiftedPrimedTableaux(skew=skew)([])
```
should be 

```
      if T == [] or T == [[]]:
            return ShiftedPrimedTableaux(skew=skew)([])

```

But the bigger question is: why is `not T` preferred over `T == []` by some people.

The former is impossible to grep for, but still widely used.



---

archive/issue_comments_341980.json:
```json
{
    "body": "<div id=\"comment:155\" align=\"right\">comment:155</div>\n\nPlease remind me: should the input checking be done in `__classcall_private__` and via `contains`?\n\nFor example, I think we should not allow\n\n```\nsage: ShiftedPrimedTableau([[None, None, \"1p\",None, 2]])\n[(None, None, None, 1', 2)]                                                                                                                           \n```\nOn the other hand:\n\n```\nsage: ShiftedPrimedTableau([tuple([])])\n```\nshould work, shouldn't it?",
    "created_at": "2018-02-01T05:06:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341980",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:155" align="right">comment:155</div>

Please remind me: should the input checking be done in `__classcall_private__` and via `contains`?

For example, I think we should not allow

```
sage: ShiftedPrimedTableau([[None, None, "1p",None, 2]])
[(None, None, None, 1', 2)]                                                                                                                           
```
On the other hand:

```
sage: ShiftedPrimedTableau([tuple([])])
```
should work, shouldn't it?



---

archive/issue_comments_341981.json:
```json
{
    "body": "<div id=\"comment:156\" align=\"right\">comment:156</div>\n\nAnother corner case:\n\n```\nsage: ShiftedPrimedTableau([[None]]).pp()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-2-d20e95e0a9ff> in <module>()\n----> 1 ShiftedPrimedTableau([[None]]).pp()\n\n/home/martin/sage-develop/local/lib/python2.7/site-packages/sage/combinat/shifted_primed_tableau.pyc in pp(self)\n    494                 .  2'                                                                                                                         \n    495         \"\"\"                                                                                                                                   \n--> 496         print(self._repr_diagram())\n    497\n    498     def _latex_(self):\n\n/home/martin/sage-develop/local/lib/python2.7/site-packages/sage/combinat/shifted_primed_tableau.pyc in _repr_diagram(self)\n    324                 .  2'                                                                                                                         \n    325         \"\"\"                                                                                                                                   \n--> 326         max_len = len(str(self.max_entry()))+2\n    327         return \"\\n\".join([\" \"*max_len*i + \"\".join(val)                                                                                        \n    328                           for i, val in enumerate(self._repr_tab())])\n\n/home/martin/sage-develop/local/lib/python2.7/site-packages/sage/combinat/shifted_primed_tableau.pyc in max_entry(self)\n    528             return 0\n    529\n--> 530         return max(entry.unprimed() for row in self\n    531                    for entry in row if entry is not None)\n    532\n\nValueError: max() arg is an empty sequence\nsage: ShiftedPrimedTableau([[None]])\n[(None,)]\n```",
    "created_at": "2018-02-01T07:45:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341981",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:156" align="right">comment:156</div>

Another corner case:

```
sage: ShiftedPrimedTableau([[None]]).pp()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-2-d20e95e0a9ff> in <module>()
----> 1 ShiftedPrimedTableau([[None]]).pp()

/home/martin/sage-develop/local/lib/python2.7/site-packages/sage/combinat/shifted_primed_tableau.pyc in pp(self)
    494                 .  2'                                                                                                                         
    495         """                                                                                                                                   
--> 496         print(self._repr_diagram())
    497
    498     def _latex_(self):

/home/martin/sage-develop/local/lib/python2.7/site-packages/sage/combinat/shifted_primed_tableau.pyc in _repr_diagram(self)
    324                 .  2'                                                                                                                         
    325         """                                                                                                                                   
--> 326         max_len = len(str(self.max_entry()))+2
    327         return "\n".join([" "*max_len*i + "".join(val)                                                                                        
    328                           for i, val in enumerate(self._repr_tab())])

/home/martin/sage-develop/local/lib/python2.7/site-packages/sage/combinat/shifted_primed_tableau.pyc in max_entry(self)
    528             return 0
    529
--> 530         return max(entry.unprimed() for row in self
    531                    for entry in row if entry is not None)
    532

ValueError: max() arg is an empty sequence
sage: ShiftedPrimedTableau([[None]])
[(None,)]
```



---

archive/issue_comments_341982.json:
```json
{
    "body": "<div id=\"comment:157\" align=\"right\">comment:157</div>\n\nHere is a proposal:\n\n```\ndiff --git a/src/sage/combinat/shifted_primed_tableau.py b/src/sage/combinat/shifted_primed_tableau.py\nindex 5fd0c09..be6f46d 100644\n--- a/src/sage/combinat/shifted_primed_tableau.py\n+++ b/src/sage/combinat/shifted_primed_tableau.py\n@@ -108,21 +108,11 @@ class ShiftedPrimedTableau(ClonableArray):\n         \"\"\"\n         if isinstance(T, ShiftedPrimedTableau) and T._skew == skew:\n             return T\n-        if not T or T == [[]]:\n-            return ShiftedPrimedTableaux(skew=skew)([])\n-        try:\n-            entry = T[0][0]\n-        except TypeError:\n-            raise ValueError(\"input tableau must be a list of lists\")\n-\n-        if entry is None:\n-            skew_ = [row.count(None) for row in T if row[0] is None]\n-            if skew is not None:\n-                if skew != skew_:\n-                    raise ValueError(\"skew shape does not agree with None entries\")\n-            else:\n-                skew = skew_\n-\n+        skew_ = Partition([row.count(None) for row in T])\n+        if skew_:\n+            if skew and Partition(skew) != skew_:\n+                raise ValueError(\"skew shape does not agree with None entries\")\n+            skew = skew_\n         return ShiftedPrimedTableaux(skew=skew)(T)\n \n     def __init__(self, parent, T, skew=None, check=True, preprocessed=False):\n@@ -163,26 +153,56 @@ class ShiftedPrimedTableau(ClonableArray):\n         \"\"\"\n         Preprocessing list ``T`` to initialize the tableau.\n \n+        The output is a list of rows as tuples, with explicit\n+        ``None``'s to indicate the skew shape, and entries being\n+        ``PrimedEntry``s.\n+\n+        Trailing empty rows are removed.\n+\n         TESTS::\n \n-            sage: ShiftedPrimedTableau._preprocess([[\"2'\", \"3p\", 3.5]],\n-            ....: skew=[1])\n+            sage: ShiftedPrimedTableau._preprocess([[\"2'\", \"3p\", 3.5]], skew=[1])\n             [(None, 2', 3', 4')]\n+\n+            sage: ShiftedPrimedTableau._preprocess([[None, \"2'\", \"3p\", 3.5]])\n+            [(None, 2', 3', 4')]\n+\n+            sage: ShiftedPrimedTableau._preprocess([[None]])\n+            [(None,)]\n+\n+            sage: ShiftedPrimedTableau._preprocess([], skew=[2,1])\n+            [(None, None), (None,)]\n+\n+            sage: ShiftedPrimedTableau._preprocess([], skew=[])\n+            []\n         \"\"\"\n         if isinstance(T, ShiftedPrimedTableau):\n             return T\n \n-        # Preprocessing list t for primes and other symbols\n-        T = [[PrimedEntry(entry) for entry in row if entry is not None]\n-             for row in T]\n-\n-        if skew is not None:\n-            T = ([(None,)*skew[i] + tuple(T[i])\n-                  for i in range(len(skew))]\n-                 + [tuple(T[i]) for i in range(len(skew), len(T))])\n-        else:\n-            T = [tuple(row) for row in T]\n-        return T\n+        skew_ = Partition([row.count(None) for row in T])\n+        if skew_: # None's are explicit\n+            if skew:\n+                if Partition(skew) != skew_:\n+                    raise ValueError(\"skew shape does not agree with None entries\")\n+            T.extend([[]]*(len(skew_)-len(T))) # Warning: these are identical lists\n+            for i, s in enumerate(skew_):\n+                T[i] = (None,)*s + tuple(PrimedEntry(e) for e in T[i][s:])\n+            i += 1\n+            T[i:] = [tuple(PrimedEntry(e) for e in row) for row in T[i:]]\n+        else: # there are no None's\n+            if skew:\n+                T.extend([[]]*(len(skew)-len(T))) # Warning: these are identical lists\n+                for i, s in enumerate(skew):\n+                    T[i] = (None,)*s + tuple(PrimedEntry(e) for e in T[i])\n+                i += 1\n+                T[i:] = [tuple(PrimedEntry(e) for e in row) for row in T[i:]]\n+            else:\n+                T = [tuple(PrimedEntry(e) for e in row) for row in T]\n+        # remove empty trailing rows\n+        for i, row in enumerate(reversed(T)):\n+            if row:\n+                return T[:-i or None]\n+        return []\n \n     def check(self):\n         \"\"\"\n@@ -354,6 +374,12 @@ class ShiftedPrimedTableau(ClonableArray):\n             sage: ascii_art(ShiftedPrimedTableau([]))\n             ++\n             ++\n+\n+            sage: ascii_art(ShiftedPrimedTableau([], skew=[1]))\n+            +---+\n+            | . |\n+            +---+\n+\n         \"\"\"\n         from sage.typeset.ascii_art import AsciiArt\n         return AsciiArt(self._ascii_art_table(unicode=False).splitlines())\n@@ -383,6 +409,10 @@ class ShiftedPrimedTableau(ClonableArray):\n             sage: unicode_art(ShiftedPrimedTableau([]))\n             \u250c\u2510\n             \u2514\u2518\n+            sage: unicode_art(ShiftedPrimedTableau([], skew=[1]))\n+            \u250c\u2500\u2500\u2500\u2510\n+            \u2502 . \u2502\n+            \u2514\u2500\u2500\u2500\u2518\n         \"\"\"\n         from sage.typeset.unicode_art import UnicodeArt\n         return UnicodeArt(self._ascii_art_table(unicode=True).splitlines())\n@@ -492,6 +522,14 @@ class ShiftedPrimedTableau(ClonableArray):\n             sage: s.pp()\n              .  .  2' 2  3\n                 .  2'\n+\n+        TESTS::\n+\n+            sage: ShiftedPrimedTableau([],skew=[1]).pp()\n+            .\n+\n+            sage: ShiftedPrimedTableau([]).pp()\n+            <BLANKLINE>\n         \"\"\"\n         print(self._repr_diagram())\n \n@@ -523,12 +561,19 @@ class ShiftedPrimedTableau(ClonableArray):\n             sage: Tab = ShiftedPrimedTableau([(1,1,'2p','3p'),(2,2)])\n             sage: Tab.max_entry()\n             3\n-        \"\"\"\n-        if not self:\n-            return 0\n \n-        return max(entry.unprimed() for row in self\n-                   for entry in row if entry is not None)\n+        TESTS::\n+\n+            sage: Tab = ShiftedPrimedTableau([], skew=[2,1])\n+            sage: Tab.max_entry()\n+            0\n+\n+            sage: Tab = ShiftedPrimedTableau([[\"1p\"]], skew=[2,1])\n+            sage: Tab.max_entry()\n+            1\n+        \"\"\"\n+        return max([entry.unprimed() for row in self\n+                    for entry in row if entry is not None] + [0])\n \n     def shape(self):\n         r\"\"\"\n@@ -2019,4 +2064,3 @@ def _add_strip(sub_tab, full_tab, length):\n                                                    k=len(plat_list),\n                                                    outer=plat_list):\n                 yield list(primed_strip) + list(non_primed_strip)\n-\n```",
    "created_at": "2018-02-01T08:16:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341982",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:157" align="right">comment:157</div>

Here is a proposal:

```
diff --git a/src/sage/combinat/shifted_primed_tableau.py b/src/sage/combinat/shifted_primed_tableau.py
index 5fd0c09..be6f46d 100644
--- a/src/sage/combinat/shifted_primed_tableau.py
+++ b/src/sage/combinat/shifted_primed_tableau.py
@@ -108,21 +108,11 @@ class ShiftedPrimedTableau(ClonableArray):
         """
         if isinstance(T, ShiftedPrimedTableau) and T._skew == skew:
             return T
-        if not T or T == [[]]:
-            return ShiftedPrimedTableaux(skew=skew)([])
-        try:
-            entry = T[0][0]
-        except TypeError:
-            raise ValueError("input tableau must be a list of lists")
-
-        if entry is None:
-            skew_ = [row.count(None) for row in T if row[0] is None]
-            if skew is not None:
-                if skew != skew_:
-                    raise ValueError("skew shape does not agree with None entries")
-            else:
-                skew = skew_
-
+        skew_ = Partition([row.count(None) for row in T])
+        if skew_:
+            if skew and Partition(skew) != skew_:
+                raise ValueError("skew shape does not agree with None entries")
+            skew = skew_
         return ShiftedPrimedTableaux(skew=skew)(T)
 
     def __init__(self, parent, T, skew=None, check=True, preprocessed=False):
@@ -163,26 +153,56 @@ class ShiftedPrimedTableau(ClonableArray):
         """
         Preprocessing list ``T`` to initialize the tableau.
 
+        The output is a list of rows as tuples, with explicit
+        ``None``'s to indicate the skew shape, and entries being
+        ``PrimedEntry``s.
+
+        Trailing empty rows are removed.
+
         TESTS::
 
-            sage: ShiftedPrimedTableau._preprocess([["2'", "3p", 3.5]],
-            ....: skew=[1])
+            sage: ShiftedPrimedTableau._preprocess([["2'", "3p", 3.5]], skew=[1])
             [(None, 2', 3', 4')]
+
+            sage: ShiftedPrimedTableau._preprocess([[None, "2'", "3p", 3.5]])
+            [(None, 2', 3', 4')]
+
+            sage: ShiftedPrimedTableau._preprocess([[None]])
+            [(None,)]
+
+            sage: ShiftedPrimedTableau._preprocess([], skew=[2,1])
+            [(None, None), (None,)]
+
+            sage: ShiftedPrimedTableau._preprocess([], skew=[])
+            []
         """
         if isinstance(T, ShiftedPrimedTableau):
             return T
 
-        # Preprocessing list t for primes and other symbols
-        T = [[PrimedEntry(entry) for entry in row if entry is not None]
-             for row in T]
-
-        if skew is not None:
-            T = ([(None,)*skew[i] + tuple(T[i])
-                  for i in range(len(skew))]
-                 + [tuple(T[i]) for i in range(len(skew), len(T))])
-        else:
-            T = [tuple(row) for row in T]
-        return T
+        skew_ = Partition([row.count(None) for row in T])
+        if skew_: # None's are explicit
+            if skew:
+                if Partition(skew) != skew_:
+                    raise ValueError("skew shape does not agree with None entries")
+            T.extend([[]]*(len(skew_)-len(T))) # Warning: these are identical lists
+            for i, s in enumerate(skew_):
+                T[i] = (None,)*s + tuple(PrimedEntry(e) for e in T[i][s:])
+            i += 1
+            T[i:] = [tuple(PrimedEntry(e) for e in row) for row in T[i:]]
+        else: # there are no None's
+            if skew:
+                T.extend([[]]*(len(skew)-len(T))) # Warning: these are identical lists
+                for i, s in enumerate(skew):
+                    T[i] = (None,)*s + tuple(PrimedEntry(e) for e in T[i])
+                i += 1
+                T[i:] = [tuple(PrimedEntry(e) for e in row) for row in T[i:]]
+            else:
+                T = [tuple(PrimedEntry(e) for e in row) for row in T]
+        # remove empty trailing rows
+        for i, row in enumerate(reversed(T)):
+            if row:
+                return T[:-i or None]
+        return []
 
     def check(self):
         """
@@ -354,6 +374,12 @@ class ShiftedPrimedTableau(ClonableArray):
             sage: ascii_art(ShiftedPrimedTableau([]))
             ++
             ++
+
+            sage: ascii_art(ShiftedPrimedTableau([], skew=[1]))
+            +---+
+            | . |
+            +---+
+
         """
         from sage.typeset.ascii_art import AsciiArt
         return AsciiArt(self._ascii_art_table(unicode=False).splitlines())
@@ -383,6 +409,10 @@ class ShiftedPrimedTableau(ClonableArray):
             sage: unicode_art(ShiftedPrimedTableau([]))
             ┌┐
             └┘
+            sage: unicode_art(ShiftedPrimedTableau([], skew=[1]))
+            ┌───┐
+            │ . │
+            └───┘
         """
         from sage.typeset.unicode_art import UnicodeArt
         return UnicodeArt(self._ascii_art_table(unicode=True).splitlines())
@@ -492,6 +522,14 @@ class ShiftedPrimedTableau(ClonableArray):
             sage: s.pp()
              .  .  2' 2  3
                 .  2'
+
+        TESTS::
+
+            sage: ShiftedPrimedTableau([],skew=[1]).pp()
+            .
+
+            sage: ShiftedPrimedTableau([]).pp()
+            <BLANKLINE>
         """
         print(self._repr_diagram())
 
@@ -523,12 +561,19 @@ class ShiftedPrimedTableau(ClonableArray):
             sage: Tab = ShiftedPrimedTableau([(1,1,'2p','3p'),(2,2)])
             sage: Tab.max_entry()
             3
-        """
-        if not self:
-            return 0
 
-        return max(entry.unprimed() for row in self
-                   for entry in row if entry is not None)
+        TESTS::
+
+            sage: Tab = ShiftedPrimedTableau([], skew=[2,1])
+            sage: Tab.max_entry()
+            0
+
+            sage: Tab = ShiftedPrimedTableau([["1p"]], skew=[2,1])
+            sage: Tab.max_entry()
+            1
+        """
+        return max([entry.unprimed() for row in self
+                    for entry in row if entry is not None] + [0])
 
     def shape(self):
         r"""
@@ -2019,4 +2064,3 @@ def _add_strip(sub_tab, full_tab, length):
                                                    k=len(plat_list),
                                                    outer=plat_list):
                 yield list(primed_strip) + list(non_primed_strip)
-
```



---

archive/issue_comments_341983.json:
```json
{
    "body": "<div id=\"comment:158\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e10754d0b36d1262300b1ac618da5e7f48e28bc7\"><code>e10754d</code></a></td><td><code>Corner cases</code></td></tr></table>\n",
    "created_at": "2018-02-01T19:16:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341983",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:158"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e10754d0b36d1262300b1ac618da5e7f48e28bc7"><code>e10754d</code></a></td><td><code>Corner cases</code></td></tr></table>




---

archive/issue_comments_341984.json:
```json
{
    "body": "Changed commit from **[`85353ab`](https://github.com/sagemath/sagetrac-mirror/commit/85353ab927b2b9b01b91aa4a26d5b16936360b9e)** to **[`e10754d`](https://github.com/sagemath/sagetrac-mirror/commit/e10754d0b36d1262300b1ac618da5e7f48e28bc7)**",
    "created_at": "2018-02-01T19:16:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341984",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`85353ab`](https://github.com/sagemath/sagetrac-mirror/commit/85353ab927b2b9b01b91aa4a26d5b16936360b9e)** to **[`e10754d`](https://github.com/sagemath/sagetrac-mirror/commit/e10754d0b36d1262300b1ac618da5e7f48e28bc7)**



---

archive/issue_comments_341985.json:
```json
{
    "body": "<div id=\"comment:159\" align=\"right\">comment:159</div>\n\nI agree with the arguments here, though `ShiftedPrimedTableau(None)` should not work in my opinion.\nI fixed the `_preprocess` to deal with empty input tableaux.\n\nReplying to [@mantepse](#comment%3A157):\n> Here is a proposal:\n> \n> ```\n> +            sage: ShiftedPrimedTableau._preprocess([[None, \"2'\", \"3p\", 3.5]])\n> +            [(None, 2', 3', 4')]\n> +\n> +            sage: ShiftedPrimedTableau._preprocess([[None]])\n> +            [(None,)]\n> ```\n>\n>}}}\n\nI don't agree with this test. Since `_preprocess` is a private function, we can assume all `None`'s in the tableau that get to this point are garbage, and the skew information is passed by `skew` argument.",
    "created_at": "2018-02-01T19:25:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341985",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:159" align="right">comment:159</div>

I agree with the arguments here, though `ShiftedPrimedTableau(None)` should not work in my opinion.
I fixed the `_preprocess` to deal with empty input tableaux.

Replying to [@mantepse](#comment%3A157):
> Here is a proposal:
> 
> ```
> +            sage: ShiftedPrimedTableau._preprocess([[None, "2'", "3p", 3.5]])
> +            [(None, 2', 3', 4')]
> +
> +            sage: ShiftedPrimedTableau._preprocess([[None]])
> +            [(None,)]
> ```
>
>}}}

I don't agree with this test. Since `_preprocess` is a private function, we can assume all `None`'s in the tableau that get to this point are garbage, and the skew information is passed by `skew` argument.



---

archive/issue_comments_341986.json:
```json
{
    "body": "<div id=\"comment:160\" align=\"right\">comment:160</div>\n\nI don't mind - I was only guessing what the responsibilities of `_preprocess` are.  It would be good if you'd clarify by saying what the expected input is.\n\nHowever, I think that treating `[]` and `[[]]` specially, as follows:\n\n```\n        if T == [] or T == [[]]:\n             return ShiftedPrimedTableaux(skew=skew)([])\n```\nis a **very** bad idea.  For example, it is now unclear whether passing tuples or other iterables would also work - I think they should.",
    "created_at": "2018-02-01T19:46:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341986",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:160" align="right">comment:160</div>

I don't mind - I was only guessing what the responsibilities of `_preprocess` are.  It would be good if you'd clarify by saying what the expected input is.

However, I think that treating `[]` and `[[]]` specially, as follows:

```
        if T == [] or T == [[]]:
             return ShiftedPrimedTableaux(skew=skew)([])
```
is a **very** bad idea.  For example, it is now unclear whether passing tuples or other iterables would also work - I think they should.



---

archive/issue_comments_341987.json:
```json
{
    "body": "Changed commit from **[`e10754d`](https://github.com/sagemath/sagetrac-mirror/commit/e10754d0b36d1262300b1ac618da5e7f48e28bc7)** to **[`a4d6731`](https://github.com/sagemath/sagetrac-mirror/commit/a4d6731c28f45d32464363925fae1152b9ec5233)**",
    "created_at": "2018-02-01T20:04:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341987",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e10754d`](https://github.com/sagemath/sagetrac-mirror/commit/e10754d0b36d1262300b1ac618da5e7f48e28bc7)** to **[`a4d6731`](https://github.com/sagemath/sagetrac-mirror/commit/a4d6731c28f45d32464363925fae1152b9ec5233)**



---

archive/issue_comments_341988.json:
```json
{
    "body": "<div id=\"comment:161\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4d6731c28f45d32464363925fae1152b9ec5233\"><code>a4d6731</code></a></td><td><code>more input processing</code></td></tr></table>\n",
    "created_at": "2018-02-01T20:04:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341988",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:161"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4d6731c28f45d32464363925fae1152b9ec5233"><code>a4d6731</code></a></td><td><code>more input processing</code></td></tr></table>




---

archive/issue_comments_341989.json:
```json
{
    "body": "<div id=\"comment:162\" align=\"right\">comment:162</div>\n\nFair enough. Let me know if this works.\n\nReplying to [@mantepse](#comment%3A160):\n> I don't mind - I was only guessing what the responsibilities of `_preprocess` are.  It would be good if you'd clarify by saying what the expected input is.\n> \n> However, I think that treating `[]` and `[[]]` specially, as follows:\n> \n> ```\n>         if T == [] or T == [[]]:\n>              return ShiftedPrimedTableaux(skew=skew)([])\n> ```\n> is a **very** bad idea.  For example, it is now unclear whether passing tuples or other iterables would also work - I think they should.",
    "created_at": "2018-02-01T20:04:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341989",
    "user": "https://github.com/sagetrac-kbparamonov"
}
```

<div id="comment:162" align="right">comment:162</div>

Fair enough. Let me know if this works.

Replying to [@mantepse](#comment%3A160):
> I don't mind - I was only guessing what the responsibilities of `_preprocess` are.  It would be good if you'd clarify by saying what the expected input is.
> 
> However, I think that treating `[]` and `[[]]` specially, as follows:
> 
> ```
>         if T == [] or T == [[]]:
>              return ShiftedPrimedTableaux(skew=skew)([])
> ```
> is a **very** bad idea.  For example, it is now unclear whether passing tuples or other iterables would also work - I think they should.



---

archive/issue_comments_341990.json:
```json
{
    "body": "<div id=\"comment:163\" align=\"right\">comment:163</div>\n\nSorry, I don't understand.  In my proposal, I simply omitted this special case and it worked.  Why do you want to treat it specially?",
    "created_at": "2018-02-01T20:09:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341990",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:163" align="right">comment:163</div>

Sorry, I don't understand.  In my proposal, I simply omitted this special case and it worked.  Why do you want to treat it specially?



---

archive/issue_comments_341991.json:
```json
{
    "body": "<div id=\"comment:164\" align=\"right\">comment:164</div>\n\nReplying to [@mantepse](#comment%3A154):\n> But the bigger question is: why is `not T` preferred over `T == []` by some people.\n\nBecause it is both faster and covers a much broader range of inputs uniformly, such as tuples. Although in this case it is a bit too permissive. It probably is better to restrict to lists and tuples. Either that or have an explicit cast to a list/tuple.\n\n> The former is impossible to grep for, but still widely used.\n\nIf you are greping for it, then you are looking at something far too localized or disregarding the traceback information.",
    "created_at": "2018-02-01T21:15:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341991",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:164" align="right">comment:164</div>

Replying to [@mantepse](#comment%3A154):
> But the bigger question is: why is `not T` preferred over `T == []` by some people.

Because it is both faster and covers a much broader range of inputs uniformly, such as tuples. Although in this case it is a bit too permissive. It probably is better to restrict to lists and tuples. Either that or have an explicit cast to a list/tuple.

> The former is impossible to grep for, but still widely used.

If you are greping for it, then you are looking at something far too localized or disregarding the traceback information.



---

archive/issue_comments_341992.json:
```json
{
    "body": "Changed commit from **[`a4d6731`](https://github.com/sagemath/sagetrac-mirror/commit/a4d6731c28f45d32464363925fae1152b9ec5233)** to **[`bf7e707`](https://github.com/sagemath/sagetrac-mirror/commit/bf7e707c6764952aeca7f2b81331cb6b6eed1738)**",
    "created_at": "2018-02-01T21:43:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341992",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a4d6731`](https://github.com/sagemath/sagetrac-mirror/commit/a4d6731c28f45d32464363925fae1152b9ec5233)** to **[`bf7e707`](https://github.com/sagemath/sagetrac-mirror/commit/bf7e707c6764952aeca7f2b81331cb6b6eed1738)**



---

archive/issue_comments_341993.json:
```json
{
    "body": "<div id=\"comment:165\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf7e707c6764952aeca7f2b81331cb6b6eed1738\"><code>bf7e707</code></a></td><td><code>preprocessing for corner cases</code></td></tr></table>\n",
    "created_at": "2018-02-01T21:43:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341993",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:165"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf7e707c6764952aeca7f2b81331cb6b6eed1738"><code>bf7e707</code></a></td><td><code>preprocessing for corner cases</code></td></tr></table>




---

archive/issue_comments_341994.json:
```json
{
    "body": "<div id=\"comment:166\" align=\"right\">comment:166</div>\n\nWorks for me!  Thanks!",
    "created_at": "2018-02-01T21:54:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341994",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:166" align="right">comment:166</div>

Works for me!  Thanks!



---

archive/issue_events_316870.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2018-02-01T22:46:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316870"
}
```



---

archive/issue_events_316871.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2018-02-01T22:46:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316871"
}
```



---

archive/issue_comments_341995.json:
```json
{
    "body": "<div id=\"comment:168\" align=\"right\">comment:168</div>\n\nSince there is a test for these corner cases via the `_element_constructor_` and the patchbot are green, back to positive review.",
    "created_at": "2018-02-02T10:53:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341995",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:168" align="right">comment:168</div>

Since there is a test for these corner cases via the `_element_constructor_` and the patchbot are green, back to positive review.



---

archive/issue_events_316872.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-02-02T10:53:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316872"
}
```



---

archive/issue_events_316873.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2018-02-02T10:53:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316873"
}
```



---

archive/issue_comments_341996.json:
```json
{
    "body": "Changed branch from **[public/combinat/primed_tableaux_22921](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/primed_tableaux_22921)** to **[`bf7e707`](https://github.com/sagemath/sagetrac-mirror/commit/bf7e707c6764952aeca7f2b81331cb6b6eed1738)**",
    "created_at": "2018-02-03T17:50:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22921#issuecomment-341996",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/combinat/primed_tableaux_22921](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/primed_tableaux_22921)** to **[`bf7e707`](https://github.com/sagemath/sagetrac-mirror/commit/bf7e707c6764952aeca7f2b81331cb6b6eed1738)**



---

archive/issue_events_316874.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-02-03T17:50:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316874"
}
```



---

archive/issue_events_316875.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "295b129a3507e7565d3c22004fc0efc275996168",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-02-03T17:50:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22921",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22921#event-316875"
}
```
