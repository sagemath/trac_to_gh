# Issue 22813: Pass number of variables to var

archive/issues_022576.json:
```json
{
    "assignees": [],
    "body": "Extend the functionality of `var` by allowing to specify the number of variables:\n \n\n```\nsage:\u00a0var('x',\u00a04)\n(x0,\u00a0x1,\u00a0x2,\u00a0x3)\n```\n\nThis ticket is a follow-up of #22809. It is related to #11576.\n\nCC:  @nbruin @kcrisman @tscrim\n\nKeywords: **symbolic, vector**\n\nReviewer: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22813_\n\n",
    "closed_at": "2021-06-24T20:15:37Z",
    "created_at": "2017-04-14T22:15:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Pass number of variables to var",
    "type": "issue",
    "updated_at": "2021-06-24T20:15:37Z",
    "url": "https://github.com/sagemath/sage/issues/22813",
    "user": "https://github.com/mforets"
}
```
Extend the functionality of `var` by allowing to specify the number of variables:
 

```
sage: var('x', 4)
(x0, x1, x2, x3)
```

This ticket is a follow-up of #22809. It is related to #11576.

CC:  @nbruin @kcrisman @tscrim

Keywords: **symbolic, vector**

Reviewer: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/22813_





---

archive/issue_events_300436.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-04-14T22:15:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300436"
}
```



---

archive/issue_events_300437.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-04-14T22:15:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "component: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300437"
}
```



---

archive/issue_events_300438.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-04-14T22:15:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300438"
}
```



---

archive/issue_events_300439.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-04-14T22:15:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300439"
}
```



---

archive/issue_comments_342671.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\n> Replying to nbruin : var(*args) already means the same thing as for a in args: var(a), so the signature is not available for different interpretation.\n\nif we parse the arg by the length we get the desired behavior:\n\n```\n    if len(args)==1:\n        name = args[0]\n    elif len(args)==2:\n        name = args[0]\n        num_vars = args[1]\n        if num_vars > 1:\n            name = [name + str(i) for i in range(num_vars)]\n    else:\n        name = args\n```\n\ndoes it have some other undesired effects? \n\nwith the current set of tests in `var.pyx`, it seems to pass.",
    "created_at": "2017-04-14T22:21:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342671",
    "user": "https://github.com/mforets"
}
```

<a id='comment:1'>Comment 1:</a>
> Replying to nbruin : var(*args) already means the same thing as for a in args: var(a), so the signature is not available for different interpretation.

if we parse the arg by the length we get the desired behavior:

```
    if len(args)==1:
        name = args[0]
    elif len(args)==2:
        name = args[0]
        num_vars = args[1]
        if num_vars > 1:
            name = [name + str(i) for i in range(num_vars)]
    else:
        name = args
```

does it have some other undesired effects? 

with the current set of tests in `var.pyx`, it seems to pass.



---

archive/issue_comments_342672.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nProblem: `var(\"x\",\"y\")`, as long as `\"y\">1`(which is true at the moment). Problem in python: duck typing. The second argument could be \"stringy\" or \"integery\" or both. In the \"both\" case, there's no way to choose.",
    "created_at": "2017-04-14T22:33:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342672",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:2'>Comment 2:</a>
Problem: `var("x","y")`, as long as `"y">1`(which is true at the moment). Problem in python: duck typing. The second argument could be "stringy" or "integery" or both. In the "both" case, there's no way to choose.



---

archive/issue_comments_342673.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nIIRC `'y' > 1` will fail in Python3. However, you could do `isinstance(args[1], str)` to get around the ducktyping. It's not like any of this code needs to be super fast/lightweight.",
    "created_at": "2017-04-14T23:51:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342673",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'>Comment 3:</a>
IIRC `'y' > 1` will fail in Python3. However, you could do `isinstance(args[1], str)` to get around the ducktyping. It's not like any of this code needs to be super fast/lightweight.



---

archive/issue_comments_342674.json:
```json
{
    "body": "Branch: **[u/mforets/pass_number_of_variables_to_var](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/pass_number_of_variables_to_var)**",
    "created_at": "2017-04-15T07:35:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342674",
    "user": "https://github.com/mforets"
}
```

Branch: **[u/mforets/pass_number_of_variables_to_var](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/pass_number_of_variables_to_var)**



---

archive/issue_comments_342675.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nAdded the numeric 2nd argument, following @tscrim's recommendation.\n\nLet me suggest to add functionality for handling more than one variable. Note that the behavior below is a replica of SymPy's symbols constructor, check `from sympy import symbols`.\n\n\n```\nIt is possible to handle several variables if we pass a list of names as first argument::\n\n    sage: var(['x', 'y'], 2)\n    ((x0, x1), (y0, y1))\n```\n\nand\n\n```\nThe input variable name(s) is taken as initial subindex::\n\nsage: var(['x1', 'y2'], 2)\n((x1, x2), (y2, y3))\n```\n\nWhat are your thoughts?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b41d282d313c24972c66f002571347803f52809c\">b41d282</a></td><td><code>add optional number of vars</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34441b77670a1f81e57c030a2fa246b95ecbb8ae\">34441b7</a></td><td><code>add example to ticket's use case</code></td></tr></table>\n",
    "created_at": "2017-04-15T07:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342675",
    "user": "https://github.com/mforets"
}
```

<a id='comment:5'>Comment 5:</a>
Added the numeric 2nd argument, following @tscrim's recommendation.

Let me suggest to add functionality for handling more than one variable. Note that the behavior below is a replica of SymPy's symbols constructor, check `from sympy import symbols`.


```
It is possible to handle several variables if we pass a list of names as first argument::

    sage: var(['x', 'y'], 2)
    ((x0, x1), (y0, y1))
```

and

```
The input variable name(s) is taken as initial subindex::

sage: var(['x1', 'y2'], 2)
((x1, x2), (y2, y3))
```

What are your thoughts?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b41d282d313c24972c66f002571347803f52809c">b41d282</a></td><td><code>add optional number of vars</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34441b77670a1f81e57c030a2fa246b95ecbb8ae">34441b7</a></td><td><code>add example to ticket's use case</code></td></tr></table>




---

archive/issue_comments_342676.json:
```json
{
    "body": "Commit: **[34441b7](https://github.com/sagemath/sagetrac-mirror/commit/34441b77670a1f81e57c030a2fa246b95ecbb8ae)**",
    "created_at": "2017-04-15T07:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342676",
    "user": "https://github.com/mforets"
}
```

Commit: **[34441b7](https://github.com/sagemath/sagetrac-mirror/commit/34441b77670a1f81e57c030a2fa246b95ecbb8ae)**



---

archive/issue_comments_342677.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nThere is, of course, the danger that this could overwrite someone's already-defined variables - say, if\n\n```\nx3=end_of_computation_of_last_twin_prime_pair # Fields Medal in hand!\nvar('x',5) # oops\n```\nthough of course that can happen anyway, this is just more silent about it.  Perhaps a check to see whether any of the variables about to be produced is already defined?  Though we don't currently do that and the same danger exists... this is just more implicit, which isn't very Pythonic.\n\nNone of this should be construed as not supporting the goal of this ticket, I'm just raising questions.",
    "created_at": "2017-04-15T12:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342677",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:6'>Comment 6:</a>
There is, of course, the danger that this could overwrite someone's already-defined variables - say, if

```
x3=end_of_computation_of_last_twin_prime_pair # Fields Medal in hand!
var('x',5) # oops
```
though of course that can happen anyway, this is just more silent about it.  Perhaps a check to see whether any of the variables about to be produced is already defined?  Though we don't currently do that and the same danger exists... this is just more implicit, which isn't very Pythonic.

None of this should be construed as not supporting the goal of this ticket, I'm just raising questions.



---

archive/issue_comments_342678.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nI would expect `var('y1', 2)` to give me `y10, y11`, so having that be the initial value would be very surprising. So -1 on parsing out the number of the variable to be the start index.",
    "created_at": "2017-04-15T15:58:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342678",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'>Comment 7:</a>
I would expect `var('y1', 2)` to give me `y10, y11`, so having that be the initial value would be very surprising. So -1 on parsing out the number of the variable to be the start index.



---

archive/issue_comments_342679.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nfair enough about naming conventions or handy constructions. as far as i'm concerned, this ticket is ready for peer-review!",
    "created_at": "2017-04-15T19:16:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342679",
    "user": "https://github.com/mforets"
}
```

<a id='comment:8'>Comment 8:</a>
fair enough about naming conventions or handy constructions. as far as i'm concerned, this ticket is ready for peer-review!



---

archive/issue_events_300440.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-04-15T19:16:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300440"
}
```



---

archive/issue_comments_342680.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nReplying to [@kcrisman](#comment%3A6):\n> There is, of course, the danger that this could overwrite someone's already-defined variables\n\nI think that's one of the reasons why this doesn't belong in the top-level `var`. I could see why people would want to have a shorthand for\n\n```\nlambda x,n: tuple(SR.symbol(\"%s%s\"%(x,i)) for in range(n))\n```\nor perhaps even\n\n```\nlambda x,n,m: tuple(tuple(SR.symbol(\"%s%s_%s\"%(x,i,j)) for j in range(m)) for i in range(n))\n```\nbut you'd probably want to bind the result to a single symbol, say `X`, so that you can spell variables programmatically via `X[i]` or `X[i][j]`.\nThis is also the approach taken in\n\n```\nsage: R.<X>=InfinitePolynomialRing(QQ)\n```\nwhere you need to use `X[0],X[1]` etc.\n\nIn other words, generating indexed symbolic variables is probably not suitable for injection at all.",
    "created_at": "2017-04-15T21:21:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342680",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:9'>Comment 9:</a>
Replying to [@kcrisman](#comment%3A6):
> There is, of course, the danger that this could overwrite someone's already-defined variables

I think that's one of the reasons why this doesn't belong in the top-level `var`. I could see why people would want to have a shorthand for

```
lambda x,n: tuple(SR.symbol("%s%s"%(x,i)) for in range(n))
```
or perhaps even

```
lambda x,n,m: tuple(tuple(SR.symbol("%s%s_%s"%(x,i,j)) for j in range(m)) for i in range(n))
```
but you'd probably want to bind the result to a single symbol, say `X`, so that you can spell variables programmatically via `X[i]` or `X[i][j]`.
This is also the approach taken in

```
sage: R.<X>=InfinitePolynomialRing(QQ)
```
where you need to use `X[0],X[1]` etc.

In other words, generating indexed symbolic variables is probably not suitable for injection at all.



---

archive/issue_comments_342681.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [@nbruin](#comment%3A9):\n> Replying to [@kcrisman](#comment%3A6):\n> > There is, of course, the danger that this could overwrite someone's already-defined variables\n\n> \n> I think that's one of the reasons why this doesn't belong in the top-level `var`. I could see why people would want to have a shorthand for\n> \n> ```\n> lambda x,n: tuple(SR.symbol(\"%s%s\"%(x,i)) for in range(n))\n> ```\n> or perhaps even\n> \n> ```\n> lambda x,n,m: tuple(tuple(SR.symbol(\"%s%s_%s\"%(x,i,j)) for j in range(m)) for i in range(n))\n> ```\n> but you'd probably want to bind the result to a single symbol, say `X`, so that you can spell variables programmatically via `X[i]` or `X[i][j]`.\n> This is also the approach taken in\n> \n> ```\n> sage: R.<X>=InfinitePolynomialRing(QQ)\n> ```\n> where you need to use `X[0],X[1]` etc.\n> \n> In other words, generating indexed symbolic variables is probably not suitable for injection at all.\n\nOK, it makes sense. Moreover it also answers my previous question if there is a technical reason why `var` wasn't defined to work with vectors/matrices already in Sage (.. I was comparing to Matlab's `sym('x', m, n)` command, but that one only returns the object, it does no injection).\n\nI guess this is wontfix?",
    "created_at": "2017-04-17T05:55:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342681",
    "user": "https://github.com/mforets"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [@nbruin](#comment%3A9):
> Replying to [@kcrisman](#comment%3A6):
> > There is, of course, the danger that this could overwrite someone's already-defined variables

> 
> I think that's one of the reasons why this doesn't belong in the top-level `var`. I could see why people would want to have a shorthand for
> 
> ```
> lambda x,n: tuple(SR.symbol("%s%s"%(x,i)) for in range(n))
> ```
> or perhaps even
> 
> ```
> lambda x,n,m: tuple(tuple(SR.symbol("%s%s_%s"%(x,i,j)) for j in range(m)) for i in range(n))
> ```
> but you'd probably want to bind the result to a single symbol, say `X`, so that you can spell variables programmatically via `X[i]` or `X[i][j]`.
> This is also the approach taken in
> 
> ```
> sage: R.<X>=InfinitePolynomialRing(QQ)
> ```
> where you need to use `X[0],X[1]` etc.
> 
> In other words, generating indexed symbolic variables is probably not suitable for injection at all.

OK, it makes sense. Moreover it also answers my previous question if there is a technical reason why `var` wasn't defined to work with vectors/matrices already in Sage (.. I was comparing to Matlab's `sym('x', m, n)` command, but that one only returns the object, it does no injection).

I guess this is wontfix?



---

archive/issue_comments_342682.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nPerhaps what we want is the output of `var('x', 3)` to inject the tuple `x` of variables `(x0, x1, x2)`. This would be in line with polynomial rings and what we do with other calls to `var`.",
    "created_at": "2017-04-17T14:55:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342682",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'>Comment 11:</a>
Perhaps what we want is the output of `var('x', 3)` to inject the tuple `x` of variables `(x0, x1, x2)`. This would be in line with polynomial rings and what we do with other calls to `var`.



---

archive/issue_comments_342683.json:
```json
{
    "body": "Changed commit from **[34441b7](https://github.com/sagemath/sagetrac-mirror/commit/34441b77670a1f81e57c030a2fa246b95ecbb8ae)** to **[3d52b59](https://github.com/sagemath/sagetrac-mirror/commit/3d52b597053ce271b8956b84112391694c511d33)**",
    "created_at": "2017-04-21T09:59:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342683",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[34441b7](https://github.com/sagemath/sagetrac-mirror/commit/34441b77670a1f81e57c030a2fa246b95ecbb8ae)** to **[3d52b59](https://github.com/sagemath/sagetrac-mirror/commit/3d52b597053ce271b8956b84112391694c511d33)**



---

archive/issue_comments_342684.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d52b597053ce271b8956b84112391694c511d33\">3d52b59</a></td><td><code>prevent injecting components of x, return tuple instead</code></td></tr></table>\n",
    "created_at": "2017-04-21T09:59:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342684",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d52b597053ce271b8956b84112391694c511d33">3d52b59</a></td><td><code>prevent injecting components of x, return tuple instead</code></td></tr></table>




---

archive/issue_comments_342685.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [@tscrim](#comment%3A11):\n> Perhaps what we want is the output of `var('x', 3)` to inject the tuple `x` of variables `(x0, x1, x2)`. This would be in line with polynomial rings and what we do with other calls to `var`.\n\nGood, i've uploaded an attempt to implement it. Feedback welcome. The behavior is now:\n\n```\nsage:\u00a0x\u00a0=\u00a0var('x',\u00a03)\nsage:\u00a0x\n(x0,\u00a0x1,\u00a0x2)\nsage:\u00a0x1\n---------------------------------------------------------------------------\nNameError\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0Traceback\u00a0(most\u00a0recent\u00a0call\u00a0last)\n<ipython-input-21-e8a5da2185eb>\u00a0in\u00a0<module>()\n---->\u00a01\u00a0x1\n\u00a0\nNameError:\u00a0name\u00a0'x1'\u00a0is\u00a0not\u00a0defined\n``` \n\nBTW this is related to #11576, a summary follows. There are pointers to use cases where this notation is useful. There are also many technical hints explaining that one would prefer to exploit Ginac's indexed expressions. There are patches, the last one with a doctests failure reported in sage 5.10. \n\nAs far as i can see, a random user would still need, currently, the convoluted `a = var(','.join('a%s'%i for i in range(4))); a`, hence comparable to `a = var('a', 4)` in terms of performance (?).",
    "created_at": "2017-04-21T10:15:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342685",
    "user": "https://github.com/mforets"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [@tscrim](#comment%3A11):
> Perhaps what we want is the output of `var('x', 3)` to inject the tuple `x` of variables `(x0, x1, x2)`. This would be in line with polynomial rings and what we do with other calls to `var`.

Good, i've uploaded an attempt to implement it. Feedback welcome. The behavior is now:

```
sage: x = var('x', 3)
sage: x
(x0, x1, x2)
sage: x1
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-21-e8a5da2185eb> in <module>()
----> 1 x1
 
NameError: name 'x1' is not defined
``` 

BTW this is related to #11576, a summary follows. There are pointers to use cases where this notation is useful. There are also many technical hints explaining that one would prefer to exploit Ginac's indexed expressions. There are patches, the last one with a doctests failure reported in sage 5.10. 

As far as i can see, a random user would still need, currently, the convoluted `a = var(','.join('a%s'%i for i in range(4))); a`, hence comparable to `a = var('a', 4)` in terms of performance (?).



---

archive/issue_comments_342686.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nInstead of checking for a string and assuming it's a number otherwise, I'd rather do it the other way around: check for a number with `operator.index()`. If that fails, assume it's a string.\n\nI also dislike the `if num_vars > 1`: why special-case `num_vars == 0` and `num_vars == 1`? There should also be a check for negative numbers like `var(x, -23)`.",
    "created_at": "2017-04-21T12:05:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342686",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'>Comment 14:</a>
Instead of checking for a string and assuming it's a number otherwise, I'd rather do it the other way around: check for a number with `operator.index()`. If that fails, assume it's a string.

I also dislike the `if num_vars > 1`: why special-case `num_vars == 0` and `num_vars == 1`? There should also be a check for negative numbers like `var(x, -23)`.



---

archive/issue_comments_342687.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nHi,\n\nReplying to [@jdemeyer](#comment%3A14):\n> Instead of checking for a string and assuming it's a number otherwise, I'd rather do it the other way around: check for a number with `operator.index()`. If that fails, assume it's a string.\n> \n\ndo you mean `if hasattr(args[1], '__index__')`? \n\n> I also dislike the `if num_vars > 1`: why special-case `num_vars == 0` and `num_vars == 1`? There should also be a check for negative numbers like `var(x, -23)`.\n\nthis was intended for the case `var('x', 1)`, which should return i suppose `x0`. in this situation, passing a list is wrong because the command `SR.var(['x0'])` is not ok (gives `TypeError: unhashable type: 'list'`). so i didn't know if there is a way to bypass this issue without making the 2 cases.\n\nwith those changes, the `if` becomes:\n\n```\n    got_number = False\n    if len(args)==1:\n        name = args[0]\n    elif len(args)==2:\n        if hasattr(args[1], '__index__'):\n            got_number = True\n            num_vars = args[1]\n            if num_vars == 1:\n                name = (args[0] + '0')\n            elif num_vars > 1:\n                name = [args[0] + str(i) for i in range(num_vars)]\n            else:\n                raise ValueError(\"The number number of variables should be at least 1\")\n        else:\n            name = args\n    else:\n        name = args\n```",
    "created_at": "2017-04-21T16:23:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342687",
    "user": "https://github.com/mforets"
}
```

<a id='comment:15'>Comment 15:</a>
Hi,

Replying to [@jdemeyer](#comment%3A14):
> Instead of checking for a string and assuming it's a number otherwise, I'd rather do it the other way around: check for a number with `operator.index()`. If that fails, assume it's a string.
> 

do you mean `if hasattr(args[1], '__index__')`? 

> I also dislike the `if num_vars > 1`: why special-case `num_vars == 0` and `num_vars == 1`? There should also be a check for negative numbers like `var(x, -23)`.

this was intended for the case `var('x', 1)`, which should return i suppose `x0`. in this situation, passing a list is wrong because the command `SR.var(['x0'])` is not ok (gives `TypeError: unhashable type: 'list'`). so i didn't know if there is a way to bypass this issue without making the 2 cases.

with those changes, the `if` becomes:

```
    got_number = False
    if len(args)==1:
        name = args[0]
    elif len(args)==2:
        if hasattr(args[1], '__index__'):
            got_number = True
            num_vars = args[1]
            if num_vars == 1:
                name = (args[0] + '0')
            elif num_vars > 1:
                name = [args[0] + str(i) for i in range(num_vars)]
            else:
                raise ValueError("The number number of variables should be at least 1")
        else:
            name = args
    else:
        name = args
```



---

archive/issue_comments_342688.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nReplying to [@mforets](#comment%3A15):\n> do you mean `if hasattr(args[1], '__index__')`? \n\nI'm pretty sure he rather meant\n\n```\ntry:\n  num_vars = operator.index(args[1])\n  ...\nexcept TypeError:\n  name = args\n```",
    "created_at": "2017-04-21T16:47:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342688",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:16'>Comment 16:</a>
Replying to [@mforets](#comment%3A15):
> do you mean `if hasattr(args[1], '__index__')`? 

I'm pretty sure he rather meant

```
try:
  num_vars = operator.index(args[1])
  ...
except TypeError:
  name = args
```



---

archive/issue_comments_342689.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/521230176b40e38fd1f638da4e4a206edcd03d75\">5212301</a></td><td><code>use operator, fix injection</code></td></tr></table>\n",
    "created_at": "2017-04-21T19:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342689",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'>Comment 17:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/521230176b40e38fd1f638da4e4a206edcd03d75">5212301</a></td><td><code>use operator, fix injection</code></td></tr></table>




---

archive/issue_comments_342690.json:
```json
{
    "body": "Changed commit from **[3d52b59](https://github.com/sagemath/sagetrac-mirror/commit/3d52b597053ce271b8956b84112391694c511d33)** to **[5212301](https://github.com/sagemath/sagetrac-mirror/commit/521230176b40e38fd1f638da4e4a206edcd03d75)**",
    "created_at": "2017-04-21T19:19:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342690",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3d52b59](https://github.com/sagemath/sagetrac-mirror/commit/3d52b597053ce271b8956b84112391694c511d33)** to **[5212301](https://github.com/sagemath/sagetrac-mirror/commit/521230176b40e38fd1f638da4e4a206edcd03d75)**



---

archive/issue_comments_342691.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nReplying to [@nbruin](#comment%3A16):\n> Replying to [@mforets](#comment%3A15):\n> > do you mean `if hasattr(args[1], '__index__')`? \n\n> I'm pretty sure he rather meant\n> \n> ```\n> try:\n>   num_vars = operator.index(args[1])\n>   ...\n> except TypeError:\n>   name = args\n> ```\n\nok. for the `import operator` statement, in other files this is done at the script level (here, `var.pyx`), while at others it is at the function level (here, `def var`). assuming that the condition is that to be on top it should be used by more than 1 function, i've put it inside `def var`.\n\nupdated version with:\n\n- case of 1 variable : \n\n```\nsage: polygens(QQ, 'x', 1)    # returns a tuple\n(x,)\nsage: var('x', 1)    # returns a tuple, too\n(x0,)\nsage: var('x')    # usual, does not return a tuple\nx\n```\n\n- check tuple is injected properly :\n\n```\nsage: var('z', 2)\n(z0, z1)\nsage: z\n(z0, z1)\n```\n\ncritics/corrections welcome",
    "created_at": "2017-04-21T19:21:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342691",
    "user": "https://github.com/mforets"
}
```

<a id='comment:18'>Comment 18:</a>
Replying to [@nbruin](#comment%3A16):
> Replying to [@mforets](#comment%3A15):
> > do you mean `if hasattr(args[1], '__index__')`? 

> I'm pretty sure he rather meant
> 
> ```
> try:
>   num_vars = operator.index(args[1])
>   ...
> except TypeError:
>   name = args
> ```

ok. for the `import operator` statement, in other files this is done at the script level (here, `var.pyx`), while at others it is at the function level (here, `def var`). assuming that the condition is that to be on top it should be used by more than 1 function, i've put it inside `def var`.

updated version with:

- case of 1 variable : 

```
sage: polygens(QQ, 'x', 1)    # returns a tuple
(x,)
sage: var('x', 1)    # returns a tuple, too
(x0,)
sage: var('x')    # usual, does not return a tuple
x
```

- check tuple is injected properly :

```
sage: var('z', 2)
(z0, z1)
sage: z
(z0, z1)
```

critics/corrections welcome



---

archive/issue_comments_342692.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nStyle in python prefers imports on top (see PEP-8). There are reasons to deviate, and reasons not to. The answer at\n[stackoverflow](http://stackoverflow.com/questions/128478/should-python-import-statements-always-be-at-the-top-of-a-module) seems pretty comprehensive and sensible.\n\nMost imports in functions in sage are to avoid expensive imports on startup and to avoid some circular import problems with `from ... import ...` statements. I don't think that applies here, so the import should go on top.",
    "created_at": "2017-04-21T19:49:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342692",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:19'>Comment 19:</a>
Style in python prefers imports on top (see PEP-8). There are reasons to deviate, and reasons not to. The answer at
[stackoverflow](http://stackoverflow.com/questions/128478/should-python-import-statements-always-be-at-the-top-of-a-module) seems pretty comprehensive and sensible.

Most imports in functions in sage are to avoid expensive imports on startup and to avoid some circular import problems with `from ... import ...` statements. I don't think that applies here, so the import should go on top.



---

archive/issue_comments_342693.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nI'm -1 on this injection and the place where this change happens. First the place:\n\n`SR.var` is the main routine, which works side-effect free. Any API changes should be done there (and I think `SR.var('x',3)` would not get too much in the way). The top-level `var` only differs from `SR.var` in order to support binding injection.\n\nNext the kind of injection.\n\nWith `var('z',2)` the return value is `(z0,z1)`, while the binding is to the name indicated by the string `z`. I think in most cases people who use this would want to do `z=SR.var('z',2)`, which expresses the result perfectly and also reflects how a significant number of examples in our documentation use `var` (as in `x=var('x')`). However, it is not obvious to me that people would automatically expect `var('z',2)` to have that effect. I expect that half of them would expect `z0,z1` to be bound, because that is what `var('z0,z1')` does and it has the same return value.\nThat's confusing.\n\nHence: generating variable sequences is fine, but the \"right\" injection behaviour here is even less clear than in a simple `var`. Starting afresh, I would not expect `var` to have its injection behaviour at all. Some magic command like `%var x` or a preprocessor construct is a much more natural syntax vehicle for it. In this case, I don't see one obvious way of extending `var`'s injection behaviour in a natural way, so I think this shouldn't be done at all.\n\nFirst put it in SR.var and see what usage arises. Perhaps practical experience shows how (if at all) injection should work.",
    "created_at": "2017-04-21T20:05:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342693",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:20'>Comment 20:</a>
I'm -1 on this injection and the place where this change happens. First the place:

`SR.var` is the main routine, which works side-effect free. Any API changes should be done there (and I think `SR.var('x',3)` would not get too much in the way). The top-level `var` only differs from `SR.var` in order to support binding injection.

Next the kind of injection.

With `var('z',2)` the return value is `(z0,z1)`, while the binding is to the name indicated by the string `z`. I think in most cases people who use this would want to do `z=SR.var('z',2)`, which expresses the result perfectly and also reflects how a significant number of examples in our documentation use `var` (as in `x=var('x')`). However, it is not obvious to me that people would automatically expect `var('z',2)` to have that effect. I expect that half of them would expect `z0,z1` to be bound, because that is what `var('z0,z1')` does and it has the same return value.
That's confusing.

Hence: generating variable sequences is fine, but the "right" injection behaviour here is even less clear than in a simple `var`. Starting afresh, I would not expect `var` to have its injection behaviour at all. Some magic command like `%var x` or a preprocessor construct is a much more natural syntax vehicle for it. In this case, I don't see one obvious way of extending `var`'s injection behaviour in a natural way, so I think this shouldn't be done at all.

First put it in SR.var and see what usage arises. Perhaps practical experience shows how (if at all) injection should work.



---

archive/issue_comments_342694.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nReplying to [@nbruin](#comment%3A20):\n> First put it in SR.var and see what usage arises. Perhaps practical experience shows how (if at all) injection should work.\n\nok! i'm ready to write the code for SR.var (new ticket). do you mind creating it? (i don't know if doing that right now is ok or on the contrary it is too soon to take that decision..)\n\nfor the full discussion, true, now i see that you want to avoid `var('z', 2)` and `var('z0, z1')` behaving differently.",
    "created_at": "2017-04-23T09:23:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342694",
    "user": "https://github.com/mforets"
}
```

<a id='comment:21'>Comment 21:</a>
Replying to [@nbruin](#comment%3A20):
> First put it in SR.var and see what usage arises. Perhaps practical experience shows how (if at all) injection should work.

ok! i'm ready to write the code for SR.var (new ticket). do you mind creating it? (i don't know if doing that right now is ok or on the contrary it is too soon to take that decision..)

for the full discussion, true, now i see that you want to avoid `var('z', 2)` and `var('z0, z1')` behaving differently.



---

archive/issue_comments_342695.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nReplying to [@nbruin](#comment%3A20):\n> First put it in SR.var and see what usage arises. Perhaps practical experience shows how (if at all) injection should work.\n\nThanks. This is #22909.",
    "created_at": "2017-04-30T10:39:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342695",
    "user": "https://github.com/mforets"
}
```

<a id='comment:22'>Comment 22:</a>
Replying to [@nbruin](#comment%3A20):
> First put it in SR.var and see what usage arises. Perhaps practical experience shows how (if at all) injection should work.

Thanks. This is #22909.



---

archive/issue_comments_342696.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nIs this is **invalid/wontfix**? Who does that? Thanks.",
    "created_at": "2017-05-25T11:22:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342696",
    "user": "https://github.com/mforets"
}
```

<a id='comment:23'>Comment 23:</a>
Is this is **invalid/wontfix**? Who does that? Thanks.



---

archive/issue_events_300441.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-05-25T11:22:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300441"
}
```



---

archive/issue_events_300442.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-05-25T11:22:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300442"
}
```



---

archive/issue_comments_342697.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nYou would set the milestone to invald/wontfix, but I am not sure that is what we want to do at this point. #22909 is a different issue and having this would be useful. I think there is still some discussion to be had as I feel the injection issue is no worse than the current situation. I think we should come to a bit more of a consensus before rendering this ticket invalid.",
    "created_at": "2017-05-25T21:15:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342697",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'>Comment 24:</a>
You would set the milestone to invald/wontfix, but I am not sure that is what we want to do at this point. #22909 is a different issue and having this would be useful. I think there is still some discussion to be had as I feel the injection issue is no worse than the current situation. I think we should come to a bit more of a consensus before rendering this ticket invalid.



---

archive/issue_comments_342698.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nReplying to [@tscrim](#comment%3A24):\n> You would set the milestone to invald/wontfix, but I am not sure that is what we want to do at this point. #22909 is a different issue and having this would be useful. I think there is still some discussion to be had as I feel the injection issue is no worse than the current situation. I think we should come to a bit more of a consensus before rendering this ticket invalid.\n\nThat's fine. If a new discussion takes place, it would be nice if it kicks off with a summary of the several threads on this topic that exist in sage-devel, sage-support and ask.sage (plus those in a couple of old tickets). I don't plan to do this, at least not at the moment.",
    "created_at": "2017-05-27T13:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342698",
    "user": "https://github.com/mforets"
}
```

<a id='comment:25'>Comment 25:</a>
Replying to [@tscrim](#comment%3A24):
> You would set the milestone to invald/wontfix, but I am not sure that is what we want to do at this point. #22909 is a different issue and having this would be useful. I think there is still some discussion to be had as I feel the injection issue is no worse than the current situation. I think we should come to a bit more of a consensus before rendering this ticket invalid.

That's fine. If a new discussion takes place, it would be nice if it kicks off with a summary of the several threads on this topic that exist in sage-devel, sage-support and ask.sage (plus those in a couple of old tickets). I don't plan to do this, at least not at the moment.



---

archive/issue_events_300443.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2021-03-13T14:08:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300443"
}
```



---

archive/issue_events_300444.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2021-03-13T14:08:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300444"
}
```



---

archive/issue_comments_342699.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nThis is fixed by #22909 (albeit requesting using the `n=` keyword...).\n\n==> marking as duplicate and requesting review in order to solve...",
    "created_at": "2021-03-13T14:08:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342699",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:26'>Comment 26:</a>
This is fixed by #22909 (albeit requesting using the `n=` keyword...).

==> marking as duplicate and requesting review in order to solve...



---

archive/issue_events_300445.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2021-03-13T14:08:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300445"
}
```



---

archive/issue_events_300446.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2021-03-13T14:08:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300446"
}
```



---

archive/issue_events_300447.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2021-03-13T14:08:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300447"
}
```



---

archive/issue_comments_342700.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nAs you can see from the discussion, at least Travis thought this wasn't 100% resolved, since this ticket is now about injection into the global namespace of the `SR.var` from #22909.\n\nOf course, we could also close this as undesirable or something not to work on now but rather if it comes up again.  Marcelo and Nils seemed to agree with me that maybe that wasn't bad.  See if Travis responds (he's usually pretty aware of relevant ticket changes he's cc:ed on) otherwise I this we can indeed close this, though as wontfix rather than a dup.",
    "created_at": "2021-03-13T22:14:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342700",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:27'>Comment 27:</a>
As you can see from the discussion, at least Travis thought this wasn't 100% resolved, since this ticket is now about injection into the global namespace of the `SR.var` from #22909.

Of course, we could also close this as undesirable or something not to work on now but rather if it comes up again.  Marcelo and Nils seemed to agree with me that maybe that wasn't bad.  See if Travis responds (he's usually pretty aware of relevant ticket changes he's cc:ed on) otherwise I this we can indeed close this, though as wontfix rather than a dup.



---

archive/issue_events_300448.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2021-03-13T22:14:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300448"
}
```



---

archive/issue_comments_342701.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nReplying to [@kcrisman](#comment%3A27):\n> As you can see from the discussion, at least Travis thought this wasn't 100% resolved, since this ticket is now about injection into the global namespace of the `SR.var` from #22909.\n\nThe current behavior seems OK :\n\n```\nsage: var(\"z\", n=2)\n(z0, z1)\nsage: z0\nz0\nsage: z\n---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)\n<ipython-input-10-3a710d2a84f8> in <module>\n----> 1 z\n\nNameError: name 'z' is not defined\n```\n\nUsers can always do `z=var(\"z\", n=2` if needed, but might prefer `Z=var(\"z\", n=2` or {{{, if only for pedagogical reasons.\n\nFurthermore, we have so far just a trick to define a bunch of symbolic variables easily, but no mathematical properties associated with this bunch.\n\nWe could want to do something like `z=vector(var(\"z\", n=2))`, but is this really what we mean ? It seems to me that this *restricts* the possible (or at least the easy) use cases of these indexed variables, since it implies that those symbolic variables have common properties (e. g. their possible values have the same parent...).\n\nSuch an addition would be extremely tempting, however, if we could create \"symbolic variables of a fixed type\", which do not exist currently in Sage (e. g. there is no way to create a polynomial with, say, rational coefficients designated by names rather than values...).\n \n> Of course, we could also close this as undesirable or something not to work on now but rather if it comes up again.  Marcelo and Nils seemed to agree with me that maybe that wasn't bad.  See if Travis responds (he's usually pretty aware of relevant ticket changes he's cc:ed on) otherwise I this we can indeed close this, though as wontfix rather than a dup.\n\nAs far as I know, this the same closure `(\"duplicate/invalid/wontfix\")`...",
    "created_at": "2021-03-13T23:38:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342701",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:28'>Comment 28:</a>
Replying to [@kcrisman](#comment%3A27):
> As you can see from the discussion, at least Travis thought this wasn't 100% resolved, since this ticket is now about injection into the global namespace of the `SR.var` from #22909.

The current behavior seems OK :

```
sage: var("z", n=2)
(z0, z1)
sage: z0
z0
sage: z
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-10-3a710d2a84f8> in <module>
----> 1 z

NameError: name 'z' is not defined
```

Users can always do `z=var("z", n=2` if needed, but might prefer `Z=var("z", n=2` or {{{, if only for pedagogical reasons.

Furthermore, we have so far just a trick to define a bunch of symbolic variables easily, but no mathematical properties associated with this bunch.

We could want to do something like `z=vector(var("z", n=2))`, but is this really what we mean ? It seems to me that this *restricts* the possible (or at least the easy) use cases of these indexed variables, since it implies that those symbolic variables have common properties (e. g. their possible values have the same parent...).

Such an addition would be extremely tempting, however, if we could create "symbolic variables of a fixed type", which do not exist currently in Sage (e. g. there is no way to create a polynomial with, say, rational coefficients designated by names rather than values...).
 
> Of course, we could also close this as undesirable or something not to work on now but rather if it comes up again.  Marcelo and Nils seemed to agree with me that maybe that wasn't bad.  See if Travis responds (he's usually pretty aware of relevant ticket changes he's cc:ed on) otherwise I this we can indeed close this, though as wontfix rather than a dup.

As far as I know, this the same closure `("duplicate/invalid/wontfix")`...



---

archive/issue_comments_342702.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nI wouldn't say the current behaviour is \"OK\", but it's a fact that we already have that:\n\n```\nsage: var(\"z\",n=2)\nsage: z0,z1\n```\nso it's already injecting the (individual) variables. As I explained above, I expect that this is one of 3 outcomes:\n- `var(\"z\",n=2)` should bind the names of the symbols it creates, or\n- `var(\"z\",n=2)` should bind `z` to a tuple so that `z[0]` and `z[1]` are the desired symbols, or\n- `var(\"z\",n=2)` shouldn't bind anything because we don't know what to bind: the names `z0,z1` aren't explicitly mentioned, so those should be out-of-bounds, and `z` isn't really created as a symbol itself.\nPersonally I think: `var(...)` shouldn't support `n=...` at all because it's unclear what it should do. People should be steered to `SR.var` which forces people to perform the desired binding behaviour. That ship has sailed, though. And if people get confused by `var` then we can just say:  use `SR.var` instead.\n\nso +1 on closing as duplicate/wontfix",
    "created_at": "2021-03-14T21:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342702",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:29'>Comment 29:</a>
I wouldn't say the current behaviour is "OK", but it's a fact that we already have that:

```
sage: var("z",n=2)
sage: z0,z1
```
so it's already injecting the (individual) variables. As I explained above, I expect that this is one of 3 outcomes:
- `var("z",n=2)` should bind the names of the symbols it creates, or
- `var("z",n=2)` should bind `z` to a tuple so that `z[0]` and `z[1]` are the desired symbols, or
- `var("z",n=2)` shouldn't bind anything because we don't know what to bind: the names `z0,z1` aren't explicitly mentioned, so those should be out-of-bounds, and `z` isn't really created as a symbol itself.
Personally I think: `var(...)` shouldn't support `n=...` at all because it's unclear what it should do. People should be steered to `SR.var` which forces people to perform the desired binding behaviour. That ship has sailed, though. And if people get confused by `var` then we can just say:  use `SR.var` instead.

so +1 on closing as duplicate/wontfix



---

archive/issue_comments_342703.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nI agree with Nils that the behavior needs to be better specified, which means there needs to be better documentation. So I am okay with closing this as duplicate, but we might want to consider update the documentation of `var()` to make it clear what the behavior is. We can argue later about what the behavior should be.\n\nWhich, getting towards that later argument, I see Nils point about binding. I typically want the tuple and utilize that because I will later on iterate over the variables. So I might lean towards that behavior rather than injecting the individual variables. However, I can see a lot of cases where I would instead just use the individual variables, which I feel would be more in line with a less programming-friendly user. There is some advantage to the current behavior that you can have the best of both worlds with `z = var('z', n=5)`.",
    "created_at": "2021-03-15T01:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342703",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:30'>Comment 30:</a>
I agree with Nils that the behavior needs to be better specified, which means there needs to be better documentation. So I am okay with closing this as duplicate, but we might want to consider update the documentation of `var()` to make it clear what the behavior is. We can argue later about what the behavior should be.

Which, getting towards that later argument, I see Nils point about binding. I typically want the tuple and utilize that because I will later on iterate over the variables. So I might lean towards that behavior rather than injecting the individual variables. However, I can see a lot of cases where I would instead just use the individual variables, which I feel would be more in line with a less programming-friendly user. There is some advantage to the current behavior that you can have the best of both worlds with `z = var('z', n=5)`.



---

archive/issue_comments_342704.json:
```json
{
    "body": "<a id='comment:31'>Comment 31:</a>\nOkay.  Then let's close this one, and Travis can you open a new ticket that describes exactly what you are thinking of?  I don't have a horse in this race other than making sure everything is meta-documented on Trac :-)",
    "created_at": "2021-03-15T17:37:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342704",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:31'>Comment 31:</a>
Okay.  Then let's close this one, and Travis can you open a new ticket that describes exactly what you are thinking of?  I don't have a horse in this race other than making sure everything is meta-documented on Trac :-)



---

archive/issue_comments_342705.json:
```json
{
    "body": "<a id='comment:32'>Comment 32:</a>\nWe can just refer to this ticket for now until we have a more concrete proposal. I am also stretched a little too thin right now to put much effort into this.",
    "created_at": "2021-03-22T04:59:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342705",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:32'>Comment 32:</a>
We can just refer to this ticket for now until we have a more concrete proposal. I am also stretched a little too thin right now to put much effort into this.



---

archive/issue_comments_342706.json:
```json
{
    "body": "Changed commit from **[5212301](https://github.com/sagemath/sagetrac-mirror/commit/521230176b40e38fd1f638da4e4a206edcd03d75)** to none",
    "created_at": "2021-03-22T04:59:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342706",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[5212301](https://github.com/sagemath/sagetrac-mirror/commit/521230176b40e38fd1f638da4e4a206edcd03d75)** to none



---

archive/issue_comments_342707.json:
```json
{
    "body": "Changed branch from **[u/mforets/pass_number_of_variables_to_var](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/pass_number_of_variables_to_var)** to none",
    "created_at": "2021-03-22T04:59:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342707",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/mforets/pass_number_of_variables_to_var](https://github.com/sagemath/sagetrac-mirror/tree/u/mforets/pass_number_of_variables_to_var)** to none



---

archive/issue_comments_342708.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2021-03-22T04:59:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22813#issuecomment-342708",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_300449.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-03-22T04:59:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300449"
}
```



---

archive/issue_events_300450.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-03-22T04:59:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300450"
}
```



---

archive/issue_events_300451.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-03-22T04:59:46Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300451"
}
```



---

archive/issue_events_300452.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-24T20:15:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300452"
}
```



---

archive/issue_events_300453.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-24T20:15:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22813",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22813#event-300453"
}
```
