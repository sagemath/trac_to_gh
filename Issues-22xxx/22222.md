# Issue 22222: Remove _pari_instance global

archive/issues_021985.json:
```json
{
    "body": "The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.\n\nSince many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen list_of_Gens_to_Gen(list s)` for fast conversion of a Python list of `Gen`s to a `Gen`. This function is in turn called from `objtogen`.\n\n**CC:**  @defeo @videlec\n\n**Branch/Commit:** [98869b4f83de894281bf164016d7ef9a2f4b3227](https://github.com/sagemath/sagetrac-mirror/commit/98869b4f83de894281bf164016d7ef9a2f4b3227)\n\n**Reviewer:** Luca De Feo\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/22222\n\n",
    "closed_at": "2017-02-04T19:25:48Z",
    "created_at": "2017-01-21T11:42:44Z",
    "labels": [
        "component: interfaces",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Remove _pari_instance global",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22222",
    "user": "https://github.com/jdemeyer"
}
```
The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.

Since many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen list_of_Gens_to_Gen(list s)` for fast conversion of a Python list of `Gen`s to a `Gen`. This function is in turn called from `objtogen`.

**CC:**  @defeo @videlec

**Branch/Commit:** [98869b4f83de894281bf164016d7ef9a2f4b3227](https://github.com/sagemath/sagetrac-mirror/commit/98869b4f83de894281bf164016d7ef9a2f4b3227)

**Reviewer:** Luca De Feo

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/22222





---

archive/issue_comments_332602.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.\n``````\n",
    "created_at": "2017-01-23T09:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332602",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.
``````




---

archive/issue_comments_332603.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2017-01-23T09:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332603",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_events_202436.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-23T09:47:02Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "rename": {
        "from": "Remove pari_instance global in gen.pyx",
        "to": "Remove _pari_instance global"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22222#event-202436"
}
```



---

archive/issue_comments_332604.json:
```json
{
    "body": "**Dependencies:** #22185",
    "created_at": "2017-01-23T10:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332604",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #22185



---

archive/issue_comments_332605.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.\n+\n+Since many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen listtogen(list s)` for fast conversion of a Python list to a `Gen`. This function is in turn called from `objtogen`.\n``````\n",
    "created_at": "2017-01-23T10:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332605",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.
+
+Since many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen listtogen(list s)` for fast conversion of a Python list to a `Gen`. This function is in turn called from `objtogen`.
``````




---

archive/issue_comments_332606.json:
```json
{
    "body": "**Changing dependencies** from \"#22185\" to \"#22185, #22210\".",
    "created_at": "2017-01-23T10:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332606",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#22185" to "#22185, #22210".



---

archive/issue_comments_332607.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.\n \n-Since many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen listtogen(list s)` for fast conversion of a Python list to a `Gen`. This function is in turn called from `objtogen`.\n+Since many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen list_of_Gens_to_Gen(list s)` for fast conversion of a Python list of `Gen`s to a `Gen`. This function is in turn called from `objtogen`.\n``````\n",
    "created_at": "2017-01-23T14:59:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332607",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.
 
-Since many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen listtogen(list s)` for fast conversion of a Python list to a `Gen`. This function is in turn called from `objtogen`.
+Since many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen list_of_Gens_to_Gen(list s)` for fast conversion of a Python list of `Gen`s to a `Gen`. This function is in turn called from `objtogen`.
``````




---

archive/issue_comments_332608.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/ticket/22222](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/22222)",
    "created_at": "2017-01-23T16:07:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332608",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/ticket/22222](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/22222)



---

archive/issue_events_202437.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-23T16:14:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22222#event-202437"
}
```



---

archive/issue_comments_332609.json:
```json
{
    "body": "**Commit:** [2d82cf9d7b9693d0c6125e6ce61502a40a641431](https://github.com/sagemath/sagetrac-mirror/commit/2d82cf9d7b9693d0c6125e6ce61502a40a641431)",
    "created_at": "2017-01-23T16:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332609",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [2d82cf9d7b9693d0c6125e6ce61502a40a641431](https://github.com/sagemath/sagetrac-mirror/commit/2d82cf9d7b9693d0c6125e6ce61502a40a641431)



---

archive/issue_comments_332610.json:
```json
{
    "body": "<a id='comment:7'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de81adca03644f3bbe534a802453fda0f475b8ef\">de81adc</a></td><td><code>Trac 22210: remove obsolete special case in PARI gen.eval()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a35c89fe2e02d7bc31c531180c82918bebf7ee2\">7a35c89</a></td><td><code>Merge commit '6022cab1880d6f3820e0f028671ddd2983eae42b'; commit 'ee54f071a26c63821f475d2832c7bb1fbbdd7e95' into ticket/22183</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/235efd32d22100011b78e882ccb1bff284c702f5\">235efd3</a></td><td><code>Rename PariInstance -> Pari</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f04abaa16a6770e952f8f803623f65c4236df29\">6f04aba</a></td><td><code>Remove unused imports from sage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c258dcad4c117684ce00d9002eb23da79196f47e\">c258dca</a></td><td><code>Rename gen -> Gen</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c4433cf66fb6d9f5fcb5b4429d9f25978008f36\">0c4433c</a></td><td><code>Fix documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbaf3b238bfd084bcd36a98f1a393296bb4a0777\">dbaf3b2</a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/ticket/22185' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d82cf9d7b9693d0c6125e6ce61502a40a641431\">2d82cf9</a></td><td><code>Remove _pari_instance global</code></td></tr></table>\n",
    "created_at": "2017-01-23T16:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332610",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de81adca03644f3bbe534a802453fda0f475b8ef">de81adc</a></td><td><code>Trac 22210: remove obsolete special case in PARI gen.eval()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a35c89fe2e02d7bc31c531180c82918bebf7ee2">7a35c89</a></td><td><code>Merge commit '6022cab1880d6f3820e0f028671ddd2983eae42b'; commit 'ee54f071a26c63821f475d2832c7bb1fbbdd7e95' into ticket/22183</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/235efd32d22100011b78e882ccb1bff284c702f5">235efd3</a></td><td><code>Rename PariInstance -> Pari</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f04abaa16a6770e952f8f803623f65c4236df29">6f04aba</a></td><td><code>Remove unused imports from sage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c258dcad4c117684ce00d9002eb23da79196f47e">c258dca</a></td><td><code>Rename gen -> Gen</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c4433cf66fb6d9f5fcb5b4429d9f25978008f36">0c4433c</a></td><td><code>Fix documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbaf3b238bfd084bcd36a98f1a393296bb4a0777">dbaf3b2</a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/ticket/22185' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d82cf9d7b9693d0c6125e6ce61502a40a641431">2d82cf9</a></td><td><code>Remove _pari_instance global</code></td></tr></table>




---

archive/issue_events_202438.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-26T07:03:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22222#event-202438"
}
```



---

archive/issue_events_202439.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-26T07:03:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22222#event-202439"
}
```



---

archive/issue_comments_332611.json:
```json
{
    "body": "**Changing dependencies** from \"#22185, #22210\" to \"\".",
    "created_at": "2017-02-02T11:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332611",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#22185, #22210" to "".



---

archive/issue_comments_332612.json:
```json
{
    "body": "**Changing commit** from \"[2d82cf9d7b9693d0c6125e6ce61502a40a641431](https://github.com/sagemath/sagetrac-mirror/commit/2d82cf9d7b9693d0c6125e6ce61502a40a641431)\" to \"[98869b4f83de894281bf164016d7ef9a2f4b3227](https://github.com/sagemath/sagetrac-mirror/commit/98869b4f83de894281bf164016d7ef9a2f4b3227)\".",
    "created_at": "2017-02-02T16:26:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332612",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2d82cf9d7b9693d0c6125e6ce61502a40a641431](https://github.com/sagemath/sagetrac-mirror/commit/2d82cf9d7b9693d0c6125e6ce61502a40a641431)" to "[98869b4f83de894281bf164016d7ef9a2f4b3227](https://github.com/sagemath/sagetrac-mirror/commit/98869b4f83de894281bf164016d7ef9a2f4b3227)".



---

archive/issue_comments_332613.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98869b4f83de894281bf164016d7ef9a2f4b3227\">98869b4</a></td><td><code>Remove _pari_instance global</code></td></tr></table>\n",
    "created_at": "2017-02-02T16:26:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332613",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98869b4f83de894281bf164016d7ef9a2f4b3227">98869b4</a></td><td><code>Remove _pari_instance global</code></td></tr></table>




---

archive/issue_events_202440.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-02T16:27:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22222#event-202440"
}
```



---

archive/issue_events_202441.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-02T16:27:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22222#event-202441"
}
```



---

archive/issue_comments_332614.json:
```json
{
    "body": "**Reviewer:** Luca De Feo",
    "created_at": "2017-02-03T15:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332614",
    "user": "https://github.com/defeo"
}
```

**Reviewer:** Luca De Feo



---

archive/issue_events_202442.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-02-03T15:29:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22222#event-202442"
}
```



---

archive/issue_events_202443.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-02-03T15:29:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22222#event-202443"
}
```



---

archive/issue_comments_332615.json:
```json
{
    "body": "<a id='comment:12'></a>\nGood for me. I cannot reproduce the doctest timeout reported by patchbot.\n\nWondering about `bernfrac`, `bernreal`, and `fibonacci`. What is this `L` type in `pari.desc`?",
    "created_at": "2017-02-03T15:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332615",
    "user": "https://github.com/defeo"
}
```

<a id='comment:12'></a>
Good for me. I cannot reproduce the doctest timeout reported by patchbot.

Wondering about `bernfrac`, `bernreal`, and `fibonacci`. What is this `L` type in `pari.desc`?



---

archive/issue_comments_332616.json:
```json
{
    "body": "<a id='comment:13'></a>\n`L` = C `long`",
    "created_at": "2017-02-03T16:27:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332616",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
`L` = C `long`



---

archive/issue_events_202444.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-04T19:25:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22222#event-202444"
}
```



---

archive/issue_events_202445.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-04T19:25:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22222#event-202445"
}
```



---

archive/issue_comments_332617.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/ticket/22222](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/22222)\" to \"[98869b4f83de894281bf164016d7ef9a2f4b3227](https://github.com/sagemath/sagetrac-mirror/commit/98869b4f83de894281bf164016d7ef9a2f4b3227)\".",
    "created_at": "2017-02-04T19:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-332617",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/ticket/22222](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/ticket/22222)" to "[98869b4f83de894281bf164016d7ef9a2f4b3227](https://github.com/sagemath/sagetrac-mirror/commit/98869b4f83de894281bf164016d7ef9a2f4b3227)".
