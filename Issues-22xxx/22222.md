# Issue 22222: Remove _pari_instance global

archive/issues_021985.json:
```json
{
    "body": "The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.\n\nSince many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen list_of_Gens_to_Gen(list s)` for fast conversion of a Python list of `Gen`s to a `Gen`. This function is in turn called from `objtogen`.\n\nCC:  @defeo @videlec\n\nBranch/Commit: 98869b4f83de894281bf164016d7ef9a2f4b3227\n\nReviewer: Luca De Feo\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22222\n\n",
    "closed_at": "2017-02-04T19:25:48Z",
    "created_at": "2017-01-21T11:42:44Z",
    "labels": [
        "component: interfaces"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Remove _pari_instance global",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22222",
    "user": "https://github.com/jdemeyer"
}
```
The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.

Since many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen list_of_Gens_to_Gen(list s)` for fast conversion of a Python list of `Gen`s to a `Gen`. This function is in turn called from `objtogen`.

CC:  @defeo @videlec

Branch/Commit: 98869b4f83de894281bf164016d7ef9a2f4b3227

Reviewer: Luca De Feo

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22222





---

archive/issue_comments_412022.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.\n``````\n",
    "created_at": "2017-01-23T09:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412022",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.
``````




---

archive/issue_comments_412023.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2017-01-23T09:47:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412023",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_412024.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#22185\"",
    "created_at": "2017-01-23T10:18:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412024",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#22185"



---

archive/issue_comments_412025.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.\n+\n+Since many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen listtogen(list s)` for fast conversion of a Python list to a `Gen`. This function is in turn called from `objtogen`.\n``````\n",
    "created_at": "2017-01-23T10:27:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412025",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.
+
+Since many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen listtogen(list s)` for fast conversion of a Python list to a `Gen`. This function is in turn called from `objtogen`.
``````




---

archive/issue_comments_412026.json:
```json
{
    "body": "Changing dependencies from \"#22185\" to \"#22185, #22210\"",
    "created_at": "2017-01-23T10:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412026",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#22185" to "#22185, #22210"



---

archive/issue_comments_412027.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.\n \n-Since many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen listtogen(list s)` for fast conversion of a Python list to a `Gen`. This function is in turn called from `objtogen`.\n+Since many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen list_of_Gens_to_Gen(list s)` for fast conversion of a Python list of `Gen`s to a `Gen`. This function is in turn called from `objtogen`.\n``````\n",
    "created_at": "2017-01-23T14:59:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412027",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 The `_pari_instance` global in `src/sage/libs/cypari2/pari_instance.pxd` was introduced as temporary workaround. Ideally, it should not be needed.
 
-Since many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen listtogen(list s)` for fast conversion of a Python list to a `Gen`. This function is in turn called from `objtogen`.
+Since many of the uses of `pari_instance` involve lists, I decided to create a new function `cdef Gen list_of_Gens_to_Gen(list s)` for fast conversion of a Python list of `Gen`s to a `Gen`. This function is in turn called from `objtogen`.
``````




---

archive/issue_comments_412028.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/ticket/22222\"",
    "created_at": "2017-01-23T16:07:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412028",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/ticket/22222"



---

archive/issue_comments_412029.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-01-23T16:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412029",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_412030.json:
```json
{
    "body": "Changing commit from \"\" to \"2d82cf9d7b9693d0c6125e6ce61502a40a641431\"",
    "created_at": "2017-01-23T16:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412030",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "2d82cf9d7b9693d0c6125e6ce61502a40a641431"



---

archive/issue_comments_412031.json:
```json
{
    "body": "<a id='comment:7'></a>\nNew commits:\n|                                                                                                                                          |                                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|\n|[de81adc](https://git.sagemath.org/sage.git/commit?id=de81adca03644f3bbe534a802453fda0f475b8ef)|`Trac 22210: remove obsolete special case in PARI gen.eval()`|\n|[7a35c89](https://git.sagemath.org/sage.git/commit?id=7a35c89fe2e02d7bc31c531180c82918bebf7ee2)|`Merge commit '6022cab1880d6f3820e0f028671ddd2983eae42b'; commit 'ee54f071a26c63821f475d2832c7bb1fbbdd7e95' into ticket/22183`|\n|[235efd3](https://git.sagemath.org/sage.git/commit?id=235efd32d22100011b78e882ccb1bff284c702f5)|`Rename PariInstance -> Pari`|\n|[6f04aba](https://git.sagemath.org/sage.git/commit?id=6f04abaa16a6770e952f8f803623f65c4236df29)|`Remove unused imports from sage`|\n|[c258dca](https://git.sagemath.org/sage.git/commit?id=c258dcad4c117684ce00d9002eb23da79196f47e)|`Rename gen -> Gen`|\n|[0c4433c](https://git.sagemath.org/sage.git/commit?id=0c4433cf66fb6d9f5fcb5b4429d9f25978008f36)|`Fix documentation`|\n|[dbaf3b2](https://git.sagemath.org/sage.git/commit?id=dbaf3b238bfd084bcd36a98f1a393296bb4a0777)|`Merge remote-tracking branch 'trac/u/jdemeyer/ticket/22185' into HEAD`|\n|[2d82cf9](https://git.sagemath.org/sage.git/commit?id=2d82cf9d7b9693d0c6125e6ce61502a40a641431)|`Remove _pari_instance global`|",
    "created_at": "2017-01-23T16:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412031",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
New commits:
|                                                                                                                                          |                                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
|[de81adc](https://git.sagemath.org/sage.git/commit?id=de81adca03644f3bbe534a802453fda0f475b8ef)|`Trac 22210: remove obsolete special case in PARI gen.eval()`|
|[7a35c89](https://git.sagemath.org/sage.git/commit?id=7a35c89fe2e02d7bc31c531180c82918bebf7ee2)|`Merge commit '6022cab1880d6f3820e0f028671ddd2983eae42b'; commit 'ee54f071a26c63821f475d2832c7bb1fbbdd7e95' into ticket/22183`|
|[235efd3](https://git.sagemath.org/sage.git/commit?id=235efd32d22100011b78e882ccb1bff284c702f5)|`Rename PariInstance -> Pari`|
|[6f04aba](https://git.sagemath.org/sage.git/commit?id=6f04abaa16a6770e952f8f803623f65c4236df29)|`Remove unused imports from sage`|
|[c258dca](https://git.sagemath.org/sage.git/commit?id=c258dcad4c117684ce00d9002eb23da79196f47e)|`Rename gen -> Gen`|
|[0c4433c](https://git.sagemath.org/sage.git/commit?id=0c4433cf66fb6d9f5fcb5b4429d9f25978008f36)|`Fix documentation`|
|[dbaf3b2](https://git.sagemath.org/sage.git/commit?id=dbaf3b238bfd084bcd36a98f1a393296bb4a0777)|`Merge remote-tracking branch 'trac/u/jdemeyer/ticket/22185' into HEAD`|
|[2d82cf9](https://git.sagemath.org/sage.git/commit?id=2d82cf9d7b9693d0c6125e6ce61502a40a641431)|`Remove _pari_instance global`|



---

archive/issue_comments_412032.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-01-26T07:03:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412032",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_412033.json:
```json
{
    "body": "Changing dependencies from \"#22185, #22210\" to \"\"",
    "created_at": "2017-02-02T11:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412033",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "#22185, #22210" to ""



---

archive/issue_comments_412034.json:
```json
{
    "body": "Changing commit from \"2d82cf9d7b9693d0c6125e6ce61502a40a641431\" to \"98869b4f83de894281bf164016d7ef9a2f4b3227\"",
    "created_at": "2017-02-02T16:26:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412034",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2d82cf9d7b9693d0c6125e6ce61502a40a641431" to "98869b4f83de894281bf164016d7ef9a2f4b3227"



---

archive/issue_comments_412035.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[98869b4](https://git.sagemath.org/sage.git/commit/?id=98869b4f83de894281bf164016d7ef9a2f4b3227)|`Remove _pari_instance global`|",
    "created_at": "2017-02-02T16:26:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412035",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[98869b4](https://git.sagemath.org/sage.git/commit/?id=98869b4f83de894281bf164016d7ef9a2f4b3227)|`Remove _pari_instance global`|



---

archive/issue_comments_412036.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-02-02T16:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412036",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_412037.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Luca De Feo\"",
    "created_at": "2017-02-03T15:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412037",
    "user": "https://github.com/defeo"
}
```

Changing reviewer from "" to "Luca De Feo"



---

archive/issue_comments_412038.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-03T15:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412038",
    "user": "https://github.com/defeo"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_412039.json:
```json
{
    "body": "<a id='comment:12'></a>\nGood for me. I cannot reproduce the doctest timeout reported by patchbot.\n\nWondering about `bernfrac`, `bernreal`, and `fibonacci`. What is this `L` type in `pari.desc`?",
    "created_at": "2017-02-03T15:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412039",
    "user": "https://github.com/defeo"
}
```

<a id='comment:12'></a>
Good for me. I cannot reproduce the doctest timeout reported by patchbot.

Wondering about `bernfrac`, `bernreal`, and `fibonacci`. What is this `L` type in `pari.desc`?



---

archive/issue_comments_412040.json:
```json
{
    "body": "<a id='comment:13'></a>\n`L` = C `long`",
    "created_at": "2017-02-03T16:27:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412040",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
`L` = C `long`



---

archive/issue_comments_412041.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-02-04T19:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412041",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_058399.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-04T19:25:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22222#event-58399"
}
```



---

archive/issue_comments_412042.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/ticket/22222\" to \"98869b4f83de894281bf164016d7ef9a2f4b3227\"",
    "created_at": "2017-02-04T19:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22222",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22222#issuecomment-412042",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/ticket/22222" to "98869b4f83de894281bf164016d7ef9a2f4b3227"
