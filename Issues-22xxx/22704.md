# Issue 22704: Create a variant of the polymake interface using polymake's callable library (polymake::Main) via JuPyMake

archive/issues_022467.json:
```json
{
    "assignees": [],
    "body": "Following up on #22452 (Create a Polymake pexpect interface):\n\nAs suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake). \n\nRecent polymake versions have developed this further and now provide a class `polymake::Main` with convenient access to the polymake interpreter. We use the (partial) Python bindings for this, https://github.com/polymake/JuPyMake which are used for Polymake's jupyter.\n\nUpstream package:\n\n```\n  wget -P upstream https://files.pythonhosted.org/packages/32/dd/0a48546daa2461e57207d31eeb64a3ad77fd9fb339d90e1e067ea25991a5/JuPyMake-0.9.tar.gz\n```\n\nWe do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). \n\nRemaining issue: #27807\n\nSee also: #22710: Meta-ticket: polymake\n\n\nDepends on #24905\n\nCC:  @simon-king-jena @jplab @sophiasage @LaisRast @kliem @sebasguts @videlec @tscrim\n\nKeywords: **days84**\n\nBranch: **[`8d9e2c2`](https://github.com/sagemath/sagetrac-mirror/commit/8d9e2c26686c4bbb0fac7d9b30fd60a11ef37446)**\n\nUpstream: **Reported upstream. No feedback yet.**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **interfaces**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22704_\n\n",
    "closed_at": "2019-05-14T12:37:24Z",
    "created_at": "2017-03-28T23:10:45Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Create a variant of the polymake interface using polymake's callable library (polymake::Main) via JuPyMake",
    "type": "issue",
    "updated_at": "2019-07-29T23:13:05Z",
    "url": "https://github.com/sagemath/sage/issues/22704",
    "user": "https://github.com/mkoeppe"
}
```
Following up on #22452 (Create a Polymake pexpect interface):

As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake). 

Recent polymake versions have developed this further and now provide a class `polymake::Main` with convenient access to the polymake interpreter. We use the (partial) Python bindings for this, https://github.com/polymake/JuPyMake which are used for Polymake's jupyter.

Upstream package:

```
  wget -P upstream https://files.pythonhosted.org/packages/32/dd/0a48546daa2461e57207d31eeb64a3ad77fd9fb339d90e1e067ea25991a5/JuPyMake-0.9.tar.gz
```

We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). 

Remaining issue: #27807

See also: #22710: Meta-ticket: polymake


Depends on #24905

CC:  @simon-king-jena @jplab @sophiasage @LaisRast @kliem @sebasguts @videlec @tscrim

Keywords: **days84**

Branch: **[`8d9e2c2`](https://github.com/sagemath/sagetrac-mirror/commit/8d9e2c26686c4bbb0fac7d9b30fd60a11ef37446)**

Upstream: **Reported upstream. No feedback yet.**

Reviewer: **Dima Pasechnik**

Author: **Matthias Koeppe**

Component: **interfaces**

_Issue created by migration from https://trac.sagemath.org/ticket/22704_





---

archive/issue_events_318502.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-28T23:10:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318502"
}
```



---

archive/issue_events_318503.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-28T23:10:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "c: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318503"
}
```



---

archive/issue_events_318504.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-28T23:10:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318504"
}
```



---

archive/issue_events_318505.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-28T23:10:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318505"
}
```



---

archive/issue_comments_337585.json:
```json
{
    "body": "Dependencies: **#22452**",
    "created_at": "2017-03-30T20:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337585",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#22452**



---

archive/issue_comments_337586.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,8 @@\n+Following up on #22452 (Create a Polymake pexpect interface):\n+\n As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake).\n \n We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). \n+\n+See also: #22710: Meta-ticket: polymake\n+\n``````\n",
    "created_at": "2017-03-30T20:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337586",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,8 @@
+Following up on #22452 (Create a Polymake pexpect interface):
+
 As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake).
 
 We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). 
+
+See also: #22710: Meta-ticket: polymake
+
``````




---

archive/issue_comments_337587.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n Following up on #22452 (Create a Polymake pexpect interface):\n \n As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake).\n+\n+https://github.com/sebasguts/JuPyMake - has Python bindings for something like this, it seems.\n \n We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). \n \n``````\n",
    "created_at": "2018-09-21T01:19:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337587",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,8 @@
 Following up on #22452 (Create a Polymake pexpect interface):
 
 As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake).
+
+https://github.com/sebasguts/JuPyMake - has Python bindings for something like this, it seems.
 
 We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). 
 
``````




---

archive/issue_events_318506.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2018-09-21T01:19:44Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "title_is": "Create a variant of the polymake pexpect interface using polymake's simulate_shell_input / JuPyMake",
    "title_was": "Create a variant of the polymake pexpect interface using polymake's simulate_shell_input",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318506"
}
```



---

archive/issue_events_318507.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2018-09-21T01:19:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318507"
}
```



---

archive/issue_events_318508.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2018-09-21T01:19:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318508"
}
```



---

archive/issue_comments_337588.json:
```json
{
    "body": "Changed dependencies from **#22452** to **#22452, #26333**",
    "created_at": "2018-09-21T20:23:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337588",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#22452** to **#22452, #26333**



---

archive/issue_comments_337589.json:
```json
{
    "body": "Branch: **[public/22704](https://github.com/sagemath/sagetrac-mirror/tree/public/22704)**",
    "created_at": "2019-04-27T09:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337589",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[public/22704](https://github.com/sagemath/sagetrac-mirror/tree/public/22704)**



---

archive/issue_comments_337590.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nHere's a first version. \n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/701801382131c69f4aaec1c49f55728bcc212730\"><code>7018013</code></a></td><td><code>polymake doctest: Mark a doctest random that depends on installed packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78c10fb0570c96ca66b5849b3a650597877026eb\"><code>78c10fb</code></a></td><td><code>Polymake._tab_completion: Fix for new apropos format in Polymake 3.4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1699019b20312d3e0b23e2701f97d3f884408086\"><code>1699019</code></a></td><td><code>Doctest fix for polymake 3.4: false/true instead of 0/1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f59590929488f95ffea9f5ea3cb14f80a38f55c4\"><code>f595909</code></a></td><td><code>Doctest fix for polymake 3.4: Use different function from the tropical application</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/76701f68a0acf87bb7b5392d86f6d1a5e75fdb24\"><code>76701f6</code></a></td><td><code>Doctest fix for polymake 3.4: Differences in available properties</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83b51dee7773527ff8536ec887a8eba846877eff\"><code>83b51de</code></a></td><td><code>Polymake 3.4: Fix for typeof small objects</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8510124d3559850a6592601828e01a039ff16453\"><code>8510124</code></a></td><td><code>Polymake: Remove copy/paste error handling for code that cannot raise</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c6ae95bd902ba1be8ed5fdfa3d489b934e5343d\"><code>3c6ae95</code></a></td><td><code>polymake: Make normaliz a dependency</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6eeaa1ef687358f1407bc4aa7fce61dcba95318\"><code>b6eeaa1</code></a></td><td><code>polymake: Add a patch to polymake's libnormaliz configure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f855b0298f80080013d7c9b1a9f58b98876d1c8\"><code>2f855b0</code></a></td><td><code>Refactor interface Polymake through PolymakeAbstract, add PolymakeJuPyMake</code></td></tr></table>\n",
    "created_at": "2019-04-27T09:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337590",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Here's a first version. 

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/701801382131c69f4aaec1c49f55728bcc212730"><code>7018013</code></a></td><td><code>polymake doctest: Mark a doctest random that depends on installed packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78c10fb0570c96ca66b5849b3a650597877026eb"><code>78c10fb</code></a></td><td><code>Polymake._tab_completion: Fix for new apropos format in Polymake 3.4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1699019b20312d3e0b23e2701f97d3f884408086"><code>1699019</code></a></td><td><code>Doctest fix for polymake 3.4: false/true instead of 0/1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f59590929488f95ffea9f5ea3cb14f80a38f55c4"><code>f595909</code></a></td><td><code>Doctest fix for polymake 3.4: Use different function from the tropical application</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/76701f68a0acf87bb7b5392d86f6d1a5e75fdb24"><code>76701f6</code></a></td><td><code>Doctest fix for polymake 3.4: Differences in available properties</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83b51dee7773527ff8536ec887a8eba846877eff"><code>83b51de</code></a></td><td><code>Polymake 3.4: Fix for typeof small objects</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8510124d3559850a6592601828e01a039ff16453"><code>8510124</code></a></td><td><code>Polymake: Remove copy/paste error handling for code that cannot raise</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c6ae95bd902ba1be8ed5fdfa3d489b934e5343d"><code>3c6ae95</code></a></td><td><code>polymake: Make normaliz a dependency</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6eeaa1ef687358f1407bc4aa7fce61dcba95318"><code>b6eeaa1</code></a></td><td><code>polymake: Add a patch to polymake's libnormaliz configure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f855b0298f80080013d7c9b1a9f58b98876d1c8"><code>2f855b0</code></a></td><td><code>Refactor interface Polymake through PolymakeAbstract, add PolymakeJuPyMake</code></td></tr></table>




---

archive/issue_comments_337591.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,12 @@\n Following up on #22452 (Create a Polymake pexpect interface):\n \n-As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake).\n+As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake). We use the Python bindings for this, https://github.com/sebasguts/JuPyMake which are used for Polymake's jupyter.\n \n-https://github.com/sebasguts/JuPyMake - has Python bindings for something like this, it seems.\n+Prerequisite:\n+\n+```\n+sage -pip install JuPyMake\n+```\n \n We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). \n \n``````\n",
    "created_at": "2019-04-27T09:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337591",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,12 @@
 Following up on #22452 (Create a Polymake pexpect interface):
 
-As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake).
+As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake). We use the Python bindings for this, https://github.com/sebasguts/JuPyMake which are used for Polymake's jupyter.
 
-https://github.com/sebasguts/JuPyMake - has Python bindings for something like this, it seems.
+Prerequisite:
+
+```
+sage -pip install JuPyMake
+```
 
 We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). 
 
``````




---

archive/issue_comments_337592.json:
```json
{
    "body": "Commit: **[`2f855b0`](https://github.com/sagemath/sagetrac-mirror/commit/2f855b0298f80080013d7c9b1a9f58b98876d1c8)**",
    "created_at": "2019-04-27T09:37:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337592",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`2f855b0`](https://github.com/sagemath/sagetrac-mirror/commit/2f855b0298f80080013d7c9b1a9f58b98876d1c8)**



---

archive/issue_comments_337593.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78b5036ac44d171568aa15774190ed3e20cb7c17\"><code>78b5036</code></a></td><td><code>More doctests etc.</code></td></tr></table>\n",
    "created_at": "2019-04-27T11:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337593",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78b5036ac44d171568aa15774190ed3e20cb7c17"><code>78b5036</code></a></td><td><code>More doctests etc.</code></td></tr></table>




---

archive/issue_comments_337594.json:
```json
{
    "body": "Changed commit from **[`2f855b0`](https://github.com/sagemath/sagetrac-mirror/commit/2f855b0298f80080013d7c9b1a9f58b98876d1c8)** to **[`78b5036`](https://github.com/sagemath/sagetrac-mirror/commit/78b5036ac44d171568aa15774190ed3e20cb7c17)**",
    "created_at": "2019-04-27T11:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337594",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2f855b0`](https://github.com/sagemath/sagetrac-mirror/commit/2f855b0298f80080013d7c9b1a9f58b98876d1c8)** to **[`78b5036`](https://github.com/sagemath/sagetrac-mirror/commit/78b5036ac44d171568aa15774190ed3e20cb7c17)**



---

archive/issue_comments_337595.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n Following up on #22452 (Create a Polymake pexpect interface):\n \n-As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake). We use the Python bindings for this, https://github.com/sebasguts/JuPyMake which are used for Polymake's jupyter.\n+As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake). We use the Python bindings for this, https://github.com/polymake/JuPyMake which are used for Polymake's jupyter.\n \n Prerequisite:\n \n``````\n",
    "created_at": "2019-04-27T13:04:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337595",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 Following up on #22452 (Create a Polymake pexpect interface):
 
-As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake). We use the Python bindings for this, https://github.com/sebasguts/JuPyMake which are used for Polymake's jupyter.
+As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake). We use the Python bindings for this, https://github.com/polymake/JuPyMake which are used for Polymake's jupyter.
 
 Prerequisite:
 
``````




---

archive/issue_comments_337596.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,10 +2,10 @@\n \n As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake). We use the Python bindings for this, https://github.com/polymake/JuPyMake which are used for Polymake's jupyter.\n \n-Prerequisite:\n+Upstream package:\n \n ```\n-sage -pip install JuPyMake\n+  wget -P upstream https://files.pythonhosted.org/packages/a2/20/df07a05d2b56f8a901e9eda147574a7c6f58137efbf65ba87ba749225eb0/JuPyMake-0.8.tar.gz\n ```\n \n We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). \n``````\n",
    "created_at": "2019-04-27T13:21:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337596",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,10 +2,10 @@
 
 As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake). We use the Python bindings for this, https://github.com/polymake/JuPyMake which are used for Polymake's jupyter.
 
-Prerequisite:
+Upstream package:
 
 ```
-sage -pip install JuPyMake
+  wget -P upstream https://files.pythonhosted.org/packages/a2/20/df07a05d2b56f8a901e9eda147574a7c6f58137efbf65ba87ba749225eb0/JuPyMake-0.8.tar.gz
 ```
 
 We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). 
``````




---

archive/issue_comments_337597.json:
```json
{
    "body": "Changed commit from **[`78b5036`](https://github.com/sagemath/sagetrac-mirror/commit/78b5036ac44d171568aa15774190ed3e20cb7c17)** to **[`92274e0`](https://github.com/sagemath/sagetrac-mirror/commit/92274e0fd34e47c1db95bd45a6620755362e9e43)**",
    "created_at": "2019-04-27T13:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337597",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`78b5036`](https://github.com/sagemath/sagetrac-mirror/commit/78b5036ac44d171568aa15774190ed3e20cb7c17)** to **[`92274e0`](https://github.com/sagemath/sagetrac-mirror/commit/92274e0fd34e47c1db95bd45a6620755362e9e43)**



---

archive/issue_comments_337598.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92274e0fd34e47c1db95bd45a6620755362e9e43\"><code>92274e0</code></a></td><td><code>Add package jupymake</code></td></tr></table>\n",
    "created_at": "2019-04-27T13:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337598",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92274e0fd34e47c1db95bd45a6620755362e9e43"><code>92274e0</code></a></td><td><code>Add package jupymake</code></td></tr></table>




---

archive/issue_comments_337599.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nSome polymake errors are not properly signalled by Polymake: Only the stderr slot [2] is filled but the error slot [3] is empty\n\n```\nsage: from JuPyMake import ExecuteCommand\nsage: ExecuteCommand('help(\"Triangulation\");')\n(True, '', \"polymake:  ERROR: unknown help topic 'Triangulation'\\n\", '')\n```",
    "created_at": "2019-04-27T13:40:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337599",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Some polymake errors are not properly signalled by Polymake: Only the stderr slot [2] is filled but the error slot [3] is empty

```
sage: from JuPyMake import ExecuteCommand
sage: ExecuteCommand('help("Triangulation");')
(True, '', "polymake:  ERROR: unknown help topic 'Triangulation'\n", '')
```



---

archive/issue_comments_337600.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b40a1cba43feadb6febf1411826c83f8e1b8fee3\"><code>b40a1cb</code></a></td><td><code>No need for File::Slurp in jupymake interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6bd4971d19129c9edbba0087f8dc452f9908ae3f\"><code>6bd4971</code></a></td><td><code>Add doc</code></td></tr></table>\n",
    "created_at": "2019-04-27T14:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337600",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b40a1cba43feadb6febf1411826c83f8e1b8fee3"><code>b40a1cb</code></a></td><td><code>No need for File::Slurp in jupymake interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6bd4971d19129c9edbba0087f8dc452f9908ae3f"><code>6bd4971</code></a></td><td><code>Add doc</code></td></tr></table>




---

archive/issue_comments_337601.json:
```json
{
    "body": "Changed commit from **[`92274e0`](https://github.com/sagemath/sagetrac-mirror/commit/92274e0fd34e47c1db95bd45a6620755362e9e43)** to **[`6bd4971`](https://github.com/sagemath/sagetrac-mirror/commit/6bd4971d19129c9edbba0087f8dc452f9908ae3f)**",
    "created_at": "2019-04-27T14:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337601",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`92274e0`](https://github.com/sagemath/sagetrac-mirror/commit/92274e0fd34e47c1db95bd45a6620755362e9e43)** to **[`6bd4971`](https://github.com/sagemath/sagetrac-mirror/commit/6bd4971d19129c9edbba0087f8dc452f9908ae3f)**



---

archive/issue_comments_337602.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bad10c608fa88f230b4244470207b1ef2de61a3\"><code>0bad10c</code></a></td><td><code>Fix jupymake help</code></td></tr></table>\n",
    "created_at": "2019-04-27T15:25:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337602",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bad10c608fa88f230b4244470207b1ef2de61a3"><code>0bad10c</code></a></td><td><code>Fix jupymake help</code></td></tr></table>




---

archive/issue_comments_337603.json:
```json
{
    "body": "Changed commit from **[`6bd4971`](https://github.com/sagemath/sagetrac-mirror/commit/6bd4971d19129c9edbba0087f8dc452f9908ae3f)** to **[`0bad10c`](https://github.com/sagemath/sagetrac-mirror/commit/0bad10c608fa88f230b4244470207b1ef2de61a3)**",
    "created_at": "2019-04-27T15:25:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337603",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6bd4971`](https://github.com/sagemath/sagetrac-mirror/commit/6bd4971d19129c9edbba0087f8dc452f9908ae3f)** to **[`0bad10c`](https://github.com/sagemath/sagetrac-mirror/commit/0bad10c608fa88f230b4244470207b1ef2de61a3)**



---

archive/issue_comments_337604.json:
```json
{
    "body": "Changed commit from **[`0bad10c`](https://github.com/sagemath/sagetrac-mirror/commit/0bad10c608fa88f230b4244470207b1ef2de61a3)** to **[`6708663`](https://github.com/sagemath/sagetrac-mirror/commit/67086632c142d1dc4df8517ff38c55eb5c1174ca)**",
    "created_at": "2019-04-27T16:08:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337604",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0bad10c`](https://github.com/sagemath/sagetrac-mirror/commit/0bad10c608fa88f230b4244470207b1ef2de61a3)** to **[`6708663`](https://github.com/sagemath/sagetrac-mirror/commit/67086632c142d1dc4df8517ff38c55eb5c1174ca)**



---

archive/issue_comments_337605.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/624ac010b6185ea4bd4da9a2cb4485cef1d58f4f\"><code>624ac01</code></a></td><td><code>polymake: Also provide core functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67086632c142d1dc4df8517ff38c55eb5c1174ca\"><code>6708663</code></a></td><td><code>Merge branch 't/24905/public/upgrade_polymake_to_version_3_2r4' into t/22704/public/22704</code></td></tr></table>\n",
    "created_at": "2019-04-27T16:08:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337605",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/624ac010b6185ea4bd4da9a2cb4485cef1d58f4f"><code>624ac01</code></a></td><td><code>polymake: Also provide core functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67086632c142d1dc4df8517ff38c55eb5c1174ca"><code>6708663</code></a></td><td><code>Merge branch 't/24905/public/upgrade_polymake_to_version_3_2r4' into t/22704/public/22704</code></td></tr></table>




---

archive/issue_comments_337606.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5c8eb816efa600d69685e4d0a7bd2eb23535bc5\"><code>a5c8eb8</code></a></td><td><code>Add optional - polymake</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad2b9763cc2b40761b7d581763dd97d280e500a9\"><code>ad2b976</code></a></td><td><code>Can only quit polymake in pexpect interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ec6c74180b105d5311231f0cec03322cc515193\"><code>7ec6c74</code></a></td><td><code>Mark jupymake tests optional - jupymake</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b7ffbd0e07380cbcc26cc02e742e195de80fd66\"><code>8b7ffbd</code></a></td><td><code>Select polymake interface based on feature test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a614876d3b8981641c7acdd08a3612ff27bc8319\"><code>a614876</code></a></td><td><code>Fixup polymake doctests that depend on 'used package' messages</code></td></tr></table>\n",
    "created_at": "2019-04-27T17:42:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337606",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5c8eb816efa600d69685e4d0a7bd2eb23535bc5"><code>a5c8eb8</code></a></td><td><code>Add optional - polymake</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad2b9763cc2b40761b7d581763dd97d280e500a9"><code>ad2b976</code></a></td><td><code>Can only quit polymake in pexpect interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ec6c74180b105d5311231f0cec03322cc515193"><code>7ec6c74</code></a></td><td><code>Mark jupymake tests optional - jupymake</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b7ffbd0e07380cbcc26cc02e742e195de80fd66"><code>8b7ffbd</code></a></td><td><code>Select polymake interface based on feature test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a614876d3b8981641c7acdd08a3612ff27bc8319"><code>a614876</code></a></td><td><code>Fixup polymake doctests that depend on 'used package' messages</code></td></tr></table>




---

archive/issue_comments_337607.json:
```json
{
    "body": "Changed commit from **[`6708663`](https://github.com/sagemath/sagetrac-mirror/commit/67086632c142d1dc4df8517ff38c55eb5c1174ca)** to **[`a614876`](https://github.com/sagemath/sagetrac-mirror/commit/a614876d3b8981641c7acdd08a3612ff27bc8319)**",
    "created_at": "2019-04-27T17:42:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337607",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6708663`](https://github.com/sagemath/sagetrac-mirror/commit/67086632c142d1dc4df8517ff38c55eb5c1174ca)** to **[`a614876`](https://github.com/sagemath/sagetrac-mirror/commit/a614876d3b8981641c7acdd08a3612ff27bc8319)**



---

archive/issue_comments_337608.json:
```json
{
    "body": "Changed dependencies from **#22452, #26333** to **#26333**",
    "created_at": "2019-04-28T15:10:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337608",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#22452, #26333** to **#26333**



---

archive/issue_comments_337609.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,5 +10,24 @@\n \n We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). \n \n+Remaining issues:\n+- Signal handling (see #26333)\n+- 1 doctest\n+- Sporadic crashes, triggered by tab completion (?)\n+\n+```\n+* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0xe0)\n+  * frame #0: 0x00000003774e93a9 libperl.dylib`Perl_newSVpv + 20\n+    frame #1: 0x00000003775473e2 libperl.dylib`PerlIO_open + 47\n+    frame #2: 0x000000037750f51d libperl.dylib`Perl_pp_require + 2620\n+    frame #3: 0x00000003774d6947 libperl.dylib`Perl_runops_standard + 205\n+    frame #4: 0x0000000377475534 libperl.dylib`Perl_call_sv + 714\n+    frame #5: 0x0000000377234115 libpolymake.3.4.dylib`pm::perl::glue::call_func_list(my_perl=0x00007ff46697dc00, cv=0x00007ff46880bce8) at calls.cc:318:18\n+    frame #6: 0x0000000377239a29 libpolymake.3.4.dylib`pm::perl::glue::call_func_list(my_perl=0x00007ff46697dc00, cv=0x00000003772f01f8) at glue.h:119:11\n+    frame #7: 0x00000003772d514d libpolymake.3.4.dylib`pm::perl::Main::shell_execute(this=0x00007ff4607f9750, input=\"@SAGE0=(20);\") at methods.cc:173:8\n+    frame #8: 0x0000000106e63179 JuPyMake.so`ExecuteCommand(_object*, _object*) + 249\n+ ``` \n+\n+\n See also: #22710: Meta-ticket: polymake\n \n``````\n",
    "created_at": "2019-04-28T15:10:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337609",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,5 +10,24 @@
 
 We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). 
 
+Remaining issues:
+- Signal handling (see #26333)
+- 1 doctest
+- Sporadic crashes, triggered by tab completion (?)
+
+```
+* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0xe0)
+  * frame #0: 0x00000003774e93a9 libperl.dylib`Perl_newSVpv + 20
+    frame #1: 0x00000003775473e2 libperl.dylib`PerlIO_open + 47
+    frame #2: 0x000000037750f51d libperl.dylib`Perl_pp_require + 2620
+    frame #3: 0x00000003774d6947 libperl.dylib`Perl_runops_standard + 205
+    frame #4: 0x0000000377475534 libperl.dylib`Perl_call_sv + 714
+    frame #5: 0x0000000377234115 libpolymake.3.4.dylib`pm::perl::glue::call_func_list(my_perl=0x00007ff46697dc00, cv=0x00007ff46880bce8) at calls.cc:318:18
+    frame #6: 0x0000000377239a29 libpolymake.3.4.dylib`pm::perl::glue::call_func_list(my_perl=0x00007ff46697dc00, cv=0x00000003772f01f8) at glue.h:119:11
+    frame #7: 0x00000003772d514d libpolymake.3.4.dylib`pm::perl::Main::shell_execute(this=0x00007ff4607f9750, input="@SAGE0=(20);") at methods.cc:173:8
+    frame #8: 0x0000000106e63179 JuPyMake.so`ExecuteCommand(_object*, _object*) + 249
+ ``` 
+
+
 See also: #22710: Meta-ticket: polymake
 
``````




---

archive/issue_comments_337610.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nSignal handling issues are solved in new version of JuPyMake - waiting for a new release",
    "created_at": "2019-04-30T15:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337610",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

Signal handling issues are solved in new version of JuPyMake - waiting for a new release



---

archive/issue_comments_337611.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThis is coming from #24905, which is already set as positive review.\n\nCould you correct the following pyflakes warnings:\n\n```\n+src/sage/geometry/polyhedron/backend_polymake.py:29: 'sage.rings.all.QQ' imported but unused\n+src/sage/geometry/polyhedron/backend_polymake.py:29: 'sage.rings.all.ZZ' imported but unused\n```",
    "created_at": "2019-05-01T08:03:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337611",
    "user": "https://github.com/jplab"
}
```

<div id="comment:17" align="right">comment:17</div>

This is coming from #24905, which is already set as positive review.

Could you correct the following pyflakes warnings:

```
+src/sage/geometry/polyhedron/backend_polymake.py:29: 'sage.rings.all.QQ' imported but unused
+src/sage/geometry/polyhedron/backend_polymake.py:29: 'sage.rings.all.ZZ' imported but unused
```



---

archive/issue_comments_337612.json:
```json
{
    "body": "Changed commit from **[`a614876`](https://github.com/sagemath/sagetrac-mirror/commit/a614876d3b8981641c7acdd08a3612ff27bc8319)** to **[`bcc7c6b`](https://github.com/sagemath/sagetrac-mirror/commit/bcc7c6b88bb6c622988bf3b06579a5560c0181ee)**",
    "created_at": "2019-05-02T11:46:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337612",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a614876`](https://github.com/sagemath/sagetrac-mirror/commit/a614876d3b8981641c7acdd08a3612ff27bc8319)** to **[`bcc7c6b`](https://github.com/sagemath/sagetrac-mirror/commit/bcc7c6b88bb6c622988bf3b06579a5560c0181ee)**



---

archive/issue_comments_337613.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bcc7c6b88bb6c622988bf3b06579a5560c0181ee\"><code>bcc7c6b</code></a></td><td><code>Add polymake patch for thread correctness</code></td></tr></table>\n",
    "created_at": "2019-05-02T11:46:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337613",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bcc7c6b88bb6c622988bf3b06579a5560c0181ee"><code>bcc7c6b</code></a></td><td><code>Add polymake patch for thread correctness</code></td></tr></table>




---

archive/issue_comments_337614.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nCrashes are fixed.",
    "created_at": "2019-05-02T11:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337614",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

Crashes are fixed.



---

archive/issue_comments_337615.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,21 +13,6 @@\n Remaining issues:\n - Signal handling (see #26333)\n - 1 doctest\n-- Sporadic crashes, triggered by tab completion (?)\n-\n-```\n-* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0xe0)\n-  * frame #0: 0x00000003774e93a9 libperl.dylib`Perl_newSVpv + 20\n-    frame #1: 0x00000003775473e2 libperl.dylib`PerlIO_open + 47\n-    frame #2: 0x000000037750f51d libperl.dylib`Perl_pp_require + 2620\n-    frame #3: 0x00000003774d6947 libperl.dylib`Perl_runops_standard + 205\n-    frame #4: 0x0000000377475534 libperl.dylib`Perl_call_sv + 714\n-    frame #5: 0x0000000377234115 libpolymake.3.4.dylib`pm::perl::glue::call_func_list(my_perl=0x00007ff46697dc00, cv=0x00007ff46880bce8) at calls.cc:318:18\n-    frame #6: 0x0000000377239a29 libpolymake.3.4.dylib`pm::perl::glue::call_func_list(my_perl=0x00007ff46697dc00, cv=0x00000003772f01f8) at glue.h:119:11\n-    frame #7: 0x00000003772d514d libpolymake.3.4.dylib`pm::perl::Main::shell_execute(this=0x00007ff4607f9750, input=\"@SAGE0=(20);\") at methods.cc:173:8\n-    frame #8: 0x0000000106e63179 JuPyMake.so`ExecuteCommand(_object*, _object*) + 249\n- ``` \n-\n \n See also: #22710: Meta-ticket: polymake\n \n``````\n",
    "created_at": "2019-05-02T11:57:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337615",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,21 +13,6 @@
 Remaining issues:
 - Signal handling (see #26333)
 - 1 doctest
-- Sporadic crashes, triggered by tab completion (?)
-
-```
-* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0xe0)
-  * frame #0: 0x00000003774e93a9 libperl.dylib`Perl_newSVpv + 20
-    frame #1: 0x00000003775473e2 libperl.dylib`PerlIO_open + 47
-    frame #2: 0x000000037750f51d libperl.dylib`Perl_pp_require + 2620
-    frame #3: 0x00000003774d6947 libperl.dylib`Perl_runops_standard + 205
-    frame #4: 0x0000000377475534 libperl.dylib`Perl_call_sv + 714
-    frame #5: 0x0000000377234115 libpolymake.3.4.dylib`pm::perl::glue::call_func_list(my_perl=0x00007ff46697dc00, cv=0x00007ff46880bce8) at calls.cc:318:18
-    frame #6: 0x0000000377239a29 libpolymake.3.4.dylib`pm::perl::glue::call_func_list(my_perl=0x00007ff46697dc00, cv=0x00000003772f01f8) at glue.h:119:11
-    frame #7: 0x00000003772d514d libpolymake.3.4.dylib`pm::perl::Main::shell_execute(this=0x00007ff4607f9750, input="@SAGE0=(20);") at methods.cc:173:8
-    frame #8: 0x0000000106e63179 JuPyMake.so`ExecuteCommand(_object*, _object*) + 249
- ``` 
-
 
 See also: #22710: Meta-ticket: polymake
 
``````




---

archive/issue_comments_337616.json:
```json
{
    "body": "Changed dependencies from **#26333** to none",
    "created_at": "2019-05-02T12:02:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337616",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#26333** to none



---

archive/issue_comments_337617.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n Upstream package:\n \n ```\n-  wget -P upstream https://files.pythonhosted.org/packages/a2/20/df07a05d2b56f8a901e9eda147574a7c6f58137efbf65ba87ba749225eb0/JuPyMake-0.8.tar.gz\n+  wget -P upstream https://files.pythonhosted.org/packages/32/dd/0a48546daa2461e57207d31eeb64a3ad77fd9fb339d90e1e067ea25991a5/JuPyMake-0.9.tar.gz\n ```\n \n We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). \n``````\n",
    "created_at": "2019-05-02T12:04:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337617",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 Upstream package:
 
 ```
-  wget -P upstream https://files.pythonhosted.org/packages/a2/20/df07a05d2b56f8a901e9eda147574a7c6f58137efbf65ba87ba749225eb0/JuPyMake-0.8.tar.gz
+  wget -P upstream https://files.pythonhosted.org/packages/32/dd/0a48546daa2461e57207d31eeb64a3ad77fd9fb339d90e1e067ea25991a5/JuPyMake-0.9.tar.gz
 ```
 
 We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). 
``````




---

archive/issue_comments_337618.json:
```json
{
    "body": "Changed commit from **[`bcc7c6b`](https://github.com/sagemath/sagetrac-mirror/commit/bcc7c6b88bb6c622988bf3b06579a5560c0181ee)** to **[`1b8e2a5`](https://github.com/sagemath/sagetrac-mirror/commit/1b8e2a580423e3b215930b98d065d4514af02af9)**",
    "created_at": "2019-05-02T12:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337618",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bcc7c6b`](https://github.com/sagemath/sagetrac-mirror/commit/bcc7c6b88bb6c622988bf3b06579a5560c0181ee)** to **[`1b8e2a5`](https://github.com/sagemath/sagetrac-mirror/commit/1b8e2a580423e3b215930b98d065d4514af02af9)**



---

archive/issue_comments_337619.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34900a0742ebbc6790d7be6b18d15bf846645dee\"><code>34900a0</code></a></td><td><code>backend_polymake.py: Remove unused imports</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b8e2a580423e3b215930b98d065d4514af02af9\"><code>1b8e2a5</code></a></td><td><code>Update jupymake to 0.9</code></td></tr></table>\n",
    "created_at": "2019-05-02T12:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337619",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34900a0742ebbc6790d7be6b18d15bf846645dee"><code>34900a0</code></a></td><td><code>backend_polymake.py: Remove unused imports</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b8e2a580423e3b215930b98d065d4514af02af9"><code>1b8e2a5</code></a></td><td><code>Update jupymake to 0.9</code></td></tr></table>




---

archive/issue_comments_337620.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,7 +11,6 @@\n We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). \n \n Remaining issues:\n-- Signal handling (see #26333)\n - 1 doctest\n \n See also: #22710: Meta-ticket: polymake\n``````\n",
    "created_at": "2019-05-02T12:09:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337620",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,7 +11,6 @@
 We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). 
 
 Remaining issues:
-- Signal handling (see #26333)
 - 1 doctest
 
 See also: #22710: Meta-ticket: polymake
``````




---

archive/issue_comments_337621.json:
```json
{
    "body": "Dependencies: **#24905**",
    "created_at": "2019-05-02T12:09:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337621",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#24905**



---

archive/issue_comments_337622.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nSignal handling fixed by jupymake update",
    "created_at": "2019-05-02T12:09:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337622",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

Signal handling fixed by jupymake update



---

archive/issue_comments_337623.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,7 +11,31 @@\n We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). \n \n Remaining issues:\n-- 1 doctest\n+- 1 doctest regarding polymake's error handling:\n+\n+```\n+In [1]: import JuPyMake\n+In [2]: JuPyMake.InitializePolymake()\n+Out[2]: True\n+In [4]: JuPyMake.ExecuteCommand('application(\"xyzzy\");')\n+Out[4]:\n+(True,\n+ '',\n+ '',\n+ 'Can\\'t locate object method \"compile_scope\" via package\n+\"Polymake::Core::Shell::Mock\" at\n+/Users/mkoeppe/s/sage/sage-rebasing/local/share/polymake/perllib/Polymake/utils.pl\n+line 247.\\n')\n+In [6]: JuPyMake.ExecuteCommand('save(17);')\n+Out[6]:\n+(True,\n+ '',\n+ '',\n+ 'Can\\'t locate object method \"compile_scope\" via package\n+\"Polymake::Core::Shell::Mock\" at\n+/Users/mkoeppe/s/sage/sage-rebasing/local/share/polymake/perllib/Polymake/utils.pl\n+line 247.\\n')\n+```\n \n See also: #22710: Meta-ticket: polymake\n \n``````\n",
    "created_at": "2019-05-02T13:45:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337623",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,7 +11,31 @@
 We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). 
 
 Remaining issues:
-- 1 doctest
+- 1 doctest regarding polymake's error handling:
+
+```
+In [1]: import JuPyMake
+In [2]: JuPyMake.InitializePolymake()
+Out[2]: True
+In [4]: JuPyMake.ExecuteCommand('application("xyzzy");')
+Out[4]:
+(True,
+ '',
+ '',
+ 'Can\'t locate object method "compile_scope" via package
+"Polymake::Core::Shell::Mock" at
+/Users/mkoeppe/s/sage/sage-rebasing/local/share/polymake/perllib/Polymake/utils.pl
+line 247.\n')
+In [6]: JuPyMake.ExecuteCommand('save(17);')
+Out[6]:
+(True,
+ '',
+ '',
+ 'Can\'t locate object method "compile_scope" via package
+"Polymake::Core::Shell::Mock" at
+/Users/mkoeppe/s/sage/sage-rebasing/local/share/polymake/perllib/Polymake/utils.pl
+line 247.\n')
+```
 
 See also: #22710: Meta-ticket: polymake
 
``````




---

archive/issue_comments_337624.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2019-05-02T13:45:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337624",
    "user": "https://github.com/mkoeppe"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_337625.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\npolymake's error handling bug is reported upstream.",
    "created_at": "2019-05-02T13:45:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337625",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

polymake's error handling bug is reported upstream.



---

archive/issue_comments_337626.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nApart from 1 remaining doctest regarding the form of some error messages, this is ready for review!",
    "created_at": "2019-05-02T13:47:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337626",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Apart from 1 remaining doctest regarding the form of some error messages, this is ready for review!



---

archive/issue_comments_337627.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2019-05-02T13:47:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337627",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_318509.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-05-02T13:47:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318509"
}
```



---

archive/issue_events_318510.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-05-02T13:56:19Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "title_is": "Create a variant of the polymake interface using polymake's callable library (polymake::Main) via JuPyMake",
    "title_was": "Create a variant of the polymake pexpect interface using polymake's simulate_shell_input / JuPyMake",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318510"
}
```



---

archive/issue_events_318511.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-05-02T13:56:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318511"
}
```



---

archive/issue_events_318512.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-05-02T13:56:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "milestone_number": null,
    "milestone_title": "sage-8.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318512"
}
```



---

archive/issue_comments_337628.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n Following up on #22452 (Create a Polymake pexpect interface):\n \n-As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake). We use the Python bindings for this, https://github.com/polymake/JuPyMake which are used for Polymake's jupyter.\n+As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake). \n+\n+Recent polymake versions have developed this further and now provide a class `polymake::Main` with convenient access to the polymake interpreter. We use the (partial) Python bindings for this, https://github.com/polymake/JuPyMake which are used for Polymake's jupyter.\n \n Upstream package:\n \n``````\n",
    "created_at": "2019-05-02T13:56:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337628",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,8 @@
 Following up on #22452 (Create a Polymake pexpect interface):
 
-As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake). We use the Python bindings for this, https://github.com/polymake/JuPyMake which are used for Polymake's jupyter.
+As suggested by Gawrilow in https://forum.polymake.org/viewtopic.php?f=8&t=544, we could create a variant of the polymake pexpect interface that does not go through pty's but rather replaces the relevant send/receive methods of pexpect by calls to `simulate_shell_input` (linking to libpolymake). 
+
+Recent polymake versions have developed this further and now provide a class `polymake::Main` with convenient access to the polymake interpreter. We use the (partial) Python bindings for this, https://github.com/polymake/JuPyMake which are used for Polymake's jupyter.
 
 Upstream package:
 
``````




---

archive/issue_comments_337629.json:
```json
{
    "body": "Changed commit from **[`1b8e2a5`](https://github.com/sagemath/sagetrac-mirror/commit/1b8e2a580423e3b215930b98d065d4514af02af9)** to **[`e46cd38`](https://github.com/sagemath/sagetrac-mirror/commit/e46cd380e9645b0e7e6a26474aa2f69999f7cdc3)**",
    "created_at": "2019-05-08T13:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337629",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1b8e2a5`](https://github.com/sagemath/sagetrac-mirror/commit/1b8e2a580423e3b215930b98d065d4514af02af9)** to **[`e46cd38`](https://github.com/sagemath/sagetrac-mirror/commit/e46cd380e9645b0e7e6a26474aa2f69999f7cdc3)**



---

archive/issue_comments_337630.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/666db96aad37cc2b5d3567eec49905a54a5f2f01\"><code>666db96</code></a></td><td><code>Added two missing optional tags</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e91dcc26a4c1be6ce6b298b572a9d748933a719\"><code>4e91dcc</code></a></td><td><code>Change format of a 'not tested' doc test annotation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05f3e612e8f32af5d453f2968eaab81fa4427912\"><code>05f3e61</code></a></td><td><code>update docs, as discussed on #24905</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/53c8ee65d8803ffe4762d260bc173ae6763a7203\"><code>53c8ee6</code></a></td><td><code>Mention libterm-readkey-perl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b613e57983e061c8ed3413b1e6e7877608cc2d41\"><code>b613e57</code></a></td><td><code>Mention libterm-readline-gnu-perl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5c3249a42a583a76c10268509ce295a34c8c8fc\"><code>e5c3249</code></a></td><td><code>polymake: Mention MOngoDB for polydb</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b89376a1961208aff924359f4d2b6573c02c2be2\"><code>b89376a</code></a></td><td><code>polymake: Update info on macOS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c1b044b7717f8cd3aed07a24e37f8f82246b1f9\"><code>0c1b044</code></a></td><td><code>polymake: update MongoDB information for linux distros</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e46cd380e9645b0e7e6a26474aa2f69999f7cdc3\"><code>e46cd38</code></a></td><td><code>Merge branch 't/24905/public/upgrade_polymake_to_version_3_2r4' into t/22704/public/22704</code></td></tr></table>\n",
    "created_at": "2019-05-08T13:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337630",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/666db96aad37cc2b5d3567eec49905a54a5f2f01"><code>666db96</code></a></td><td><code>Added two missing optional tags</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e91dcc26a4c1be6ce6b298b572a9d748933a719"><code>4e91dcc</code></a></td><td><code>Change format of a 'not tested' doc test annotation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05f3e612e8f32af5d453f2968eaab81fa4427912"><code>05f3e61</code></a></td><td><code>update docs, as discussed on #24905</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/53c8ee65d8803ffe4762d260bc173ae6763a7203"><code>53c8ee6</code></a></td><td><code>Mention libterm-readkey-perl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b613e57983e061c8ed3413b1e6e7877608cc2d41"><code>b613e57</code></a></td><td><code>Mention libterm-readline-gnu-perl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5c3249a42a583a76c10268509ce295a34c8c8fc"><code>e5c3249</code></a></td><td><code>polymake: Mention MOngoDB for polydb</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b89376a1961208aff924359f4d2b6573c02c2be2"><code>b89376a</code></a></td><td><code>polymake: Update info on macOS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c1b044b7717f8cd3aed07a24e37f8f82246b1f9"><code>0c1b044</code></a></td><td><code>polymake: update MongoDB information for linux distros</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e46cd380e9645b0e7e6a26474aa2f69999f7cdc3"><code>e46cd38</code></a></td><td><code>Merge branch 't/24905/public/upgrade_polymake_to_version_3_2r4' into t/22704/public/22704</code></td></tr></table>




---

archive/issue_comments_337631.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\ndoes this need #24905 ?",
    "created_at": "2019-05-08T17:04:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337631",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">comment:28</div>

does this need #24905 ?



---

archive/issue_comments_337632.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI did this work on top of the #24905 branch because otherwise there would be big merge conflicts.",
    "created_at": "2019-05-08T19:26:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337632",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

I did this work on top of the #24905 branch because otherwise there would be big merge conflicts.



---

archive/issue_comments_337633.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nthat's what I get after trying this on Linux:\n\n```\n$ ./sage -tp --optional=bliss,build,dochtml,e_antic,gap_packages,jupymake,lidia,lrslib,memlimit,ninja_build,normaliz,python2,polymake,sage src/sage/interfaces/polymake.py \ntoo many failed tests, not using stored timings\nRunning doctests with ID 2019-05-08-22-08-17-11941b32.\nGit branch: testwip\nUsing --optional=bliss,build,dochtml,e_antic,gap_packages,jupymake,lidia,lrslib,memlimit,ninja_build,normaliz,polymake,python2,sage\nDoctesting 1 file using 4 threads.\nsage -t src/sage/interfaces/polymake.py\n**********************************************************************\nFile \"src/sage/interfaces/polymake.py\", line 765, in sage.interfaces.polymake.PolymakeAbstract.application\nFailed example:\n    polymake.eval('application \"killerapp\";')         # optional - polymake\nExpected:\n    Traceback (most recent call last):\n    ...\n    PolymakeError: Unknown application killerapp\nGot:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 671, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 1095, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.interfaces.polymake.PolymakeAbstract.application[15]>\", line 1, in <module>\n        polymake.eval('application \"killerapp\";')         # optional - polymake\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python2.7/site-packages/sage/interfaces/polymake.py\", line 2520, in eval\n        raise PolymakeError(error)\n    PolymakeError: Can't locate object method \"compile_scope\" via package \"Polymake::Core::Shell::Mock\" at /mnt/opt/Sage/sage-dev/local/share/polymake/perllib/Polymake/utils.pl line 247.\n    <BLANKLINE>\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.interfaces.polymake.PolymakeAbstract.application\n    [317 tests, 1 failure, 9.54 s]\n----------------------------------------------------------------------\nsage -t src/sage/interfaces/polymake.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2019-05-08T21:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337633",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">comment:30</div>

that's what I get after trying this on Linux:

```
$ ./sage -tp --optional=bliss,build,dochtml,e_antic,gap_packages,jupymake,lidia,lrslib,memlimit,ninja_build,normaliz,python2,polymake,sage src/sage/interfaces/polymake.py 
too many failed tests, not using stored timings
Running doctests with ID 2019-05-08-22-08-17-11941b32.
Git branch: testwip
Using --optional=bliss,build,dochtml,e_antic,gap_packages,jupymake,lidia,lrslib,memlimit,ninja_build,normaliz,polymake,python2,sage
Doctesting 1 file using 4 threads.
sage -t src/sage/interfaces/polymake.py
**********************************************************************
File "src/sage/interfaces/polymake.py", line 765, in sage.interfaces.polymake.PolymakeAbstract.application
Failed example:
    polymake.eval('application "killerapp";')         # optional - polymake
Expected:
    Traceback (most recent call last):
    ...
    PolymakeError: Unknown application killerapp
Got:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/mnt/opt/Sage/sage-dev/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 671, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/mnt/opt/Sage/sage-dev/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1095, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.interfaces.polymake.PolymakeAbstract.application[15]>", line 1, in <module>
        polymake.eval('application "killerapp";')         # optional - polymake
      File "/mnt/opt/Sage/sage-dev/local/lib/python2.7/site-packages/sage/interfaces/polymake.py", line 2520, in eval
        raise PolymakeError(error)
    PolymakeError: Can't locate object method "compile_scope" via package "Polymake::Core::Shell::Mock" at /mnt/opt/Sage/sage-dev/local/share/polymake/perllib/Polymake/utils.pl line 247.
    <BLANKLINE>
**********************************************************************
1 item had failures:
   1 of  17 in sage.interfaces.polymake.PolymakeAbstract.application
    [317 tests, 1 failure, 9.54 s]
----------------------------------------------------------------------
sage -t src/sage/interfaces/polymake.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_337634.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nand also\n\n```\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 175, in sage.geometry.polyhedron.base.Polyhedron_base._sage_input_\nFailed example:\n    P = Polyhedron(vertices = [[1, 0], [0, 1]], rays = [[1, 1]], backend='polymake') # optional - polymake\nExpected nothing\nGot:\n     gmp v.6.1\n...\nFile \"src/sage/geometry/polyhedron/backend_polymake.py\", line 59, in sage.geometry.polyhedron.backend_polymake.Polyhedron_polymake\nFailed example:\n    p = Polyhedron(vertices=[(0,0),(1,0),(0,1)], rays=[(1,1)],   # optional - polymake\n                   lines=[], backend='polymake')\nExpected nothing\nGot:\n     gmp v.6.1\n```",
    "created_at": "2019-05-08T21:21:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337634",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:31" align="right">comment:31</div>

and also

```
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 175, in sage.geometry.polyhedron.base.Polyhedron_base._sage_input_
Failed example:
    P = Polyhedron(vertices = [[1, 0], [0, 1]], rays = [[1, 1]], backend='polymake') # optional - polymake
Expected nothing
Got:
     gmp v.6.1
...
File "src/sage/geometry/polyhedron/backend_polymake.py", line 59, in sage.geometry.polyhedron.backend_polymake.Polyhedron_polymake
Failed example:
    p = Polyhedron(vertices=[(0,0),(1,0),(0,1)], rays=[(1,1)],   # optional - polymake
                   lines=[], backend='polymake')
Expected nothing
Got:
     gmp v.6.1
```



---

archive/issue_comments_337635.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@dimpase](#comment:30):\n> that's what I get after trying this on Linux:\n> \n> ```\n> $ ./sage -tp --optional=bliss,build,dochtml,e_antic,gap_packages,jupymake,lidia,lrslib,memlimit,ninja_build,normaliz,python2,polymake,sage src/sage/interfaces/polymake.py \n> ....\n>        raise PolymakeError(error)\n>     PolymakeError: Can't locate object method \"compile_scope\" via package \"Polymake::Core::Shell::Mock\" at /mnt/opt/Sage/sage-dev/local/share/polymake/perllib/Polymake/utils.pl line 247.\n> ```\n\nYes, I know this one - see ticket description. I have reported it upstream.",
    "created_at": "2019-05-09T09:08:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337635",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@dimpase](#comment:30):
> that's what I get after trying this on Linux:
> 
> ```
> $ ./sage -tp --optional=bliss,build,dochtml,e_antic,gap_packages,jupymake,lidia,lrslib,memlimit,ninja_build,normaliz,python2,polymake,sage src/sage/interfaces/polymake.py 
> ....
>        raise PolymakeError(error)
>     PolymakeError: Can't locate object method "compile_scope" via package "Polymake::Core::Shell::Mock" at /mnt/opt/Sage/sage-dev/local/share/polymake/perllib/Polymake/utils.pl line 247.
> ```

Yes, I know this one - see ticket description. I have reported it upstream.



---

archive/issue_comments_337636.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@dimpase](#comment:31):\n> and also\n> \n> ```\n> **********************************************************************\n> File \"src/sage/geometry/polyhedron/base.py\", line 175, in sage.geometry.polyhedron.base.Polyhedron_base._sage_input_\n> Failed example:\n>     P = Polyhedron(vertices = [[1, 0], [0, 1]], rays = [[1, 1]], backend='polymake') # optional - polymake\n> Expected nothing\n> Got:\n>      gmp v.6.1\n> ...\n> File \"src/sage/geometry/polyhedron/backend_polymake.py\", line 59, in sage.geometry.polyhedron.backend_polymake.Polyhedron_polymake\n> Failed example:\n>     p = Polyhedron(vertices=[(0,0),(1,0),(0,1)], rays=[(1,1)],   # optional - polymake\n>                    lines=[], backend='polymake')\n> Expected nothing\n> Got:\n>      gmp v.6.1\n> ```\n\nLooks like this message comes from lrslib, I'll investigate",
    "created_at": "2019-05-09T09:10:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337636",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@dimpase](#comment:31):
> and also
> 
> ```
> **********************************************************************
> File "src/sage/geometry/polyhedron/base.py", line 175, in sage.geometry.polyhedron.base.Polyhedron_base._sage_input_
> Failed example:
>     P = Polyhedron(vertices = [[1, 0], [0, 1]], rays = [[1, 1]], backend='polymake') # optional - polymake
> Expected nothing
> Got:
>      gmp v.6.1
> ...
> File "src/sage/geometry/polyhedron/backend_polymake.py", line 59, in sage.geometry.polyhedron.backend_polymake.Polyhedron_polymake
> Failed example:
>     p = Polyhedron(vertices=[(0,0),(1,0),(0,1)], rays=[(1,1)],   # optional - polymake
>                    lines=[], backend='polymake')
> Expected nothing
> Got:
>      gmp v.6.1
> ```

Looks like this message comes from lrslib, I'll investigate



---

archive/issue_comments_337637.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nActually on my machine polymake does not find the installed lrslib (it's looking for liblrs but we only have liblrsgmp.)",
    "created_at": "2019-05-09T09:18:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337637",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

Actually on my machine polymake does not find the installed lrslib (it's looking for liblrs but we only have liblrsgmp.)



---

archive/issue_comments_337638.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI also only have `liblrsgmp`. Not sure if the following helps, but still:\n\n```\n$ ldd local/lib/libpolymake.so\n\tlinux-vdso.so.1 (0x00007fff97bbb000)\n\tlibperl.so.5.28 => /usr/lib64/libperl.so.5.28 (0x00007fcae6d94000)\n\tlibxml2.so.2 => /usr/lib64/libxml2.so.2 (0x00007fcae6bef000)\n\tlibdl.so.2 => /lib64/libdl.so.2 (0x00007fcae6be9000)\n\tlibmpfr.so.6 => /mnt/opt/Sage/sage-dev/local/lib/libmpfr.so.6 (0x00007fcae6b6a000)\n\tlibgmp.so.10 => /usr/lib64/libgmp.so.10 (0x00007fcae68df000)\n\tlibpthread.so.0 => /lib64/libpthread.so.0 (0x00007fcae68bc000)\n\tlibstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/9.1.0/libstdc++.so.6 (0x00007fcae6642000)\n\tlibm.so.6 => /lib64/libm.so.6 (0x00007fcae6505000)\n\tlibgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/9.1.0/libgcc_s.so.1 (0x00007fcae64eb000)\n\tlibc.so.6 => /lib64/libc.so.6 (0x00007fcae631b000)\n\tlibcrypt.so.1 => /lib64/libcrypt.so.1 (0x00007fcae62e2000)\n\tlibicuuc.so.64 => /usr/lib64/libicuuc.so.64 (0x00007fcae60f1000)\n\tlibz.so.1 => /lib64/libz.so.1 (0x00007fcae5ecf000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007fcae71bd000)\n\tlibicudata.so.64 => /usr/lib64/libicudata.so.64 (0x00007fcae4489000)\n```\nthe rest of polymake libs are statically linked, so it's not as easy to gather whether lrs has anything to do with it.",
    "created_at": "2019-05-09T09:29:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337638",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:35" align="right">comment:35</div>

I also only have `liblrsgmp`. Not sure if the following helps, but still:

```
$ ldd local/lib/libpolymake.so
	linux-vdso.so.1 (0x00007fff97bbb000)
	libperl.so.5.28 => /usr/lib64/libperl.so.5.28 (0x00007fcae6d94000)
	libxml2.so.2 => /usr/lib64/libxml2.so.2 (0x00007fcae6bef000)
	libdl.so.2 => /lib64/libdl.so.2 (0x00007fcae6be9000)
	libmpfr.so.6 => /mnt/opt/Sage/sage-dev/local/lib/libmpfr.so.6 (0x00007fcae6b6a000)
	libgmp.so.10 => /usr/lib64/libgmp.so.10 (0x00007fcae68df000)
	libpthread.so.0 => /lib64/libpthread.so.0 (0x00007fcae68bc000)
	libstdc++.so.6 => /usr/lib/gcc/x86_64-pc-linux-gnu/9.1.0/libstdc++.so.6 (0x00007fcae6642000)
	libm.so.6 => /lib64/libm.so.6 (0x00007fcae6505000)
	libgcc_s.so.1 => /usr/lib/gcc/x86_64-pc-linux-gnu/9.1.0/libgcc_s.so.1 (0x00007fcae64eb000)
	libc.so.6 => /lib64/libc.so.6 (0x00007fcae631b000)
	libcrypt.so.1 => /lib64/libcrypt.so.1 (0x00007fcae62e2000)
	libicuuc.so.64 => /usr/lib64/libicuuc.so.64 (0x00007fcae60f1000)
	libz.so.1 => /lib64/libz.so.1 (0x00007fcae5ecf000)
	/lib64/ld-linux-x86-64.so.2 (0x00007fcae71bd000)
	libicudata.so.64 => /usr/lib64/libicudata.so.64 (0x00007fcae4489000)
```
the rest of polymake libs are statically linked, so it's not as easy to gather whether lrs has anything to do with it.



---

archive/issue_comments_337639.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@mkoeppe](#comment:34):\n> Actually on my machine polymake does not find the installed lrslib (it's looking for liblrs but we only have liblrsgmp.)\n\nThis belongs to the polymake 3.4 upgrade ticket (#24905).",
    "created_at": "2019-05-09T09:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337639",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@mkoeppe](#comment:34):
> Actually on my machine polymake does not find the installed lrslib (it's looking for liblrs but we only have liblrsgmp.)

This belongs to the polymake 3.4 upgrade ticket (#24905).



---

archive/issue_comments_337640.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@mkoeppe](#comment:33):\n> Replying to [@dimpase](#comment:31):\n> > and also\n> > \n> > ```\n> > **********************************************************************\n> > File \"src/sage/geometry/polyhedron/base.py\", line 175, in sage.geometry.polyhedron.base.Polyhedron_base._sage_input_\n> > Failed example:\n> >     P = Polyhedron(vertices = [[1, 0], [0, 1]], rays = [[1, 1]], backend='polymake') # optional - polymake\n> > Expected nothing\n> > Got:\n> >      gmp v.6.1\n> > ...\n> > File \"src/sage/geometry/polyhedron/backend_polymake.py\", line 59, in sage.geometry.polyhedron.backend_polymake.Polyhedron_polymake\n> > Failed example:\n> >     p = Polyhedron(vertices=[(0,0),(1,0),(0,1)], rays=[(1,1)],   # optional - polymake\n> >                    lines=[], backend='polymake')\n> > Expected nothing\n> > Got:\n> >      gmp v.6.1\n> > ```\n\n> Looks like this message comes from lrslib, I'll investigate\n\nAfter the lrs fix on #27803, one of these 2 errors is still present:\n\n```\nFile \"src/sage/geometry/polyhedron/base.py\", line 175, in sage.geometry.polyhedron.base.Polyhedron_base._sage_input_\nFailed example:\n    P = Polyhedron(vertices = [[1, 0], [0, 1]], rays = [[1, 1]], backend='polymake') # optional - polymake\nExpected nothing\nGot:\n     gmp v.6.1\n```",
    "created_at": "2019-05-09T11:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337640",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@mkoeppe](#comment:33):
> Replying to [@dimpase](#comment:31):
> > and also
> > 
> > ```
> > **********************************************************************
> > File "src/sage/geometry/polyhedron/base.py", line 175, in sage.geometry.polyhedron.base.Polyhedron_base._sage_input_
> > Failed example:
> >     P = Polyhedron(vertices = [[1, 0], [0, 1]], rays = [[1, 1]], backend='polymake') # optional - polymake
> > Expected nothing
> > Got:
> >      gmp v.6.1
> > ...
> > File "src/sage/geometry/polyhedron/backend_polymake.py", line 59, in sage.geometry.polyhedron.backend_polymake.Polyhedron_polymake
> > Failed example:
> >     p = Polyhedron(vertices=[(0,0),(1,0),(0,1)], rays=[(1,1)],   # optional - polymake
> >                    lines=[], backend='polymake')
> > Expected nothing
> > Got:
> >      gmp v.6.1
> > ```

> Looks like this message comes from lrslib, I'll investigate

After the lrs fix on #27803, one of these 2 errors is still present:

```
File "src/sage/geometry/polyhedron/base.py", line 175, in sage.geometry.polyhedron.base.Polyhedron_base._sage_input_
Failed example:
    P = Polyhedron(vertices = [[1, 0], [0, 1]], rays = [[1, 1]], backend='polymake') # optional - polymake
Expected nothing
Got:
     gmp v.6.1
```



---

archive/issue_comments_337641.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nYes, and with #27803 I can reproduce it. I think these errors appear non-deterministicaly.",
    "created_at": "2019-05-09T11:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337641",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

Yes, and with #27803 I can reproduce it. I think these errors appear non-deterministicaly.



---

archive/issue_comments_337642.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@mkoeppe](#comment:38):\n> Yes, and with #27803 I can reproduce it. I think these errors appear non-deterministicaly. \n\nI think it is deterministic, and occurs on the 1st invocation of the polymake interface.\nTry starting Sage and running\n\n```\nP = Polyhedron(vertices = [[1, 0], [0, 1]], rays = [[1, 1]], backend='polymake')\n```\nrepeatedly.",
    "created_at": "2019-05-09T11:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337642",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@mkoeppe](#comment:38):
> Yes, and with #27803 I can reproduce it. I think these errors appear non-deterministicaly. 

I think it is deterministic, and occurs on the 1st invocation of the polymake interface.
Try starting Sage and running

```
P = Polyhedron(vertices = [[1, 0], [0, 1]], rays = [[1, 1]], backend='polymake')
```
repeatedly.



---

archive/issue_comments_337643.json:
```json
{
    "body": "Changed dependencies from **#24905** to **#24905, #27803**",
    "created_at": "2019-05-09T12:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337643",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#24905** to **#24905, #27803**



---

archive/issue_comments_337644.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@dimpase](#comment:39):\n> I think it is deterministic, and occurs on the 1st invocation of the polymake interface.\n\nYou are right.",
    "created_at": "2019-05-09T12:10:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337644",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@dimpase](#comment:39):
> I think it is deterministic, and occurs on the 1st invocation of the polymake interface.

You are right.



---

archive/issue_comments_337645.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThe new behavior from this ticket comes from the fact that with the new in-process polymake, lrslib prints directly to stdout, so this output is not captured.\nPerhaps lrslib should be configured with `LRS_QUIET`.",
    "created_at": "2019-05-09T12:25:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337645",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

The new behavior from this ticket comes from the fact that with the new in-process polymake, lrslib prints directly to stdout, so this output is not captured.
Perhaps lrslib should be configured with `LRS_QUIET`.



---

archive/issue_comments_337646.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@mkoeppe](#comment:42):\n> Perhaps lrslib should be configured with `LRS_QUIET`.\n\nlrslib 070 removes this output unconditionally.",
    "created_at": "2019-05-09T12:27:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337646",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@mkoeppe](#comment:42):
> Perhaps lrslib should be configured with `LRS_QUIET`.

lrslib 070 removes this output unconditionally.



---

archive/issue_comments_337647.json:
```json
{
    "body": "Changed dependencies from **#24905, #27803** to **#24905, #27803, #27805**",
    "created_at": "2019-05-09T12:49:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337647",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#24905, #27803** to **#24905, #27803, #27805**



---

archive/issue_comments_337648.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2eda6e11325d5d997f0de64e9d9f7add42fa7adb\"><code>2eda6e1</code></a></td><td><code>polymake: add to fedora instructions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59161415289ce3256a260a8d798df7d95071658a\"><code>5916141</code></a></td><td><code>Fix polymake lrslib detection</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/086bb2d3b48442f7f68e3f25baa80ce0376f9ce6\"><code>086bb2d</code></a></td><td><code>Merge branch 't/27803/public/27803-polymake-lrslib-detection' into t/22704/public/22704</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b479117463bb1a8d6372455f8723150313fc3ab\"><code>1b47911</code></a></td><td><code>Configure lrslib with LRS_QUIET</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c84d89d552396a83638ee7a95de77c1a01c54e58\"><code>c84d89d</code></a></td><td><code>Merge branch 't/27805/configure_lrslib_with_lrs_quiet' into t/22704/public/22704</code></td></tr></table>\n",
    "created_at": "2019-05-09T13:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337648",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2eda6e11325d5d997f0de64e9d9f7add42fa7adb"><code>2eda6e1</code></a></td><td><code>polymake: add to fedora instructions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59161415289ce3256a260a8d798df7d95071658a"><code>5916141</code></a></td><td><code>Fix polymake lrslib detection</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/086bb2d3b48442f7f68e3f25baa80ce0376f9ce6"><code>086bb2d</code></a></td><td><code>Merge branch 't/27803/public/27803-polymake-lrslib-detection' into t/22704/public/22704</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b479117463bb1a8d6372455f8723150313fc3ab"><code>1b47911</code></a></td><td><code>Configure lrslib with LRS_QUIET</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c84d89d552396a83638ee7a95de77c1a01c54e58"><code>c84d89d</code></a></td><td><code>Merge branch 't/27805/configure_lrslib_with_lrs_quiet' into t/22704/public/22704</code></td></tr></table>




---

archive/issue_comments_337649.json:
```json
{
    "body": "Changed commit from **[`e46cd38`](https://github.com/sagemath/sagetrac-mirror/commit/e46cd380e9645b0e7e6a26474aa2f69999f7cdc3)** to **[`c84d89d`](https://github.com/sagemath/sagetrac-mirror/commit/c84d89d552396a83638ee7a95de77c1a01c54e58)**",
    "created_at": "2019-05-09T13:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337649",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e46cd38`](https://github.com/sagemath/sagetrac-mirror/commit/e46cd380e9645b0e7e6a26474aa2f69999f7cdc3)** to **[`c84d89d`](https://github.com/sagemath/sagetrac-mirror/commit/c84d89d552396a83638ee7a95de77c1a01c54e58)**



---

archive/issue_comments_337650.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nThe lrslib 070 update (#27745) is too much work for today. Instead I configure lrslib with LRS_QUIET (#27805).",
    "created_at": "2019-05-09T13:02:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337650",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:46" align="right">comment:46</div>

The lrslib 070 update (#27745) is too much work for today. Instead I configure lrslib with LRS_QUIET (#27805).



---

archive/issue_events_318513.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-09T15:06:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318513"
}
```



---

archive/issue_events_318514.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2019-05-09T15:06:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318514"
}
```



---

archive/issue_comments_337651.json:
```json
{
    "body": "Changed dependencies from **#24905, #27803, #27805** to **#24905**",
    "created_at": "2019-05-09T15:06:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337651",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#24905, #27803, #27805** to **#24905**



---

archive/issue_comments_337652.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nOK, this is fixed by #27805 indeed.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2eda6e11325d5d997f0de64e9d9f7add42fa7adb\"><code>2eda6e1</code></a></td><td><code>polymake: add to fedora instructions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59161415289ce3256a260a8d798df7d95071658a\"><code>5916141</code></a></td><td><code>Fix polymake lrslib detection</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/086bb2d3b48442f7f68e3f25baa80ce0376f9ce6\"><code>086bb2d</code></a></td><td><code>Merge branch 't/27803/public/27803-polymake-lrslib-detection' into t/22704/public/22704</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b479117463bb1a8d6372455f8723150313fc3ab\"><code>1b47911</code></a></td><td><code>Configure lrslib with LRS_QUIET</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c84d89d552396a83638ee7a95de77c1a01c54e58\"><code>c84d89d</code></a></td><td><code>Merge branch 't/27805/configure_lrslib_with_lrs_quiet' into t/22704/public/22704</code></td></tr></table>\n",
    "created_at": "2019-05-09T15:06:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337652",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:47" align="right">comment:47</div>

OK, this is fixed by #27805 indeed.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2eda6e11325d5d997f0de64e9d9f7add42fa7adb"><code>2eda6e1</code></a></td><td><code>polymake: add to fedora instructions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59161415289ce3256a260a8d798df7d95071658a"><code>5916141</code></a></td><td><code>Fix polymake lrslib detection</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/086bb2d3b48442f7f68e3f25baa80ce0376f9ce6"><code>086bb2d</code></a></td><td><code>Merge branch 't/27803/public/27803-polymake-lrslib-detection' into t/22704/public/22704</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b479117463bb1a8d6372455f8723150313fc3ab"><code>1b47911</code></a></td><td><code>Configure lrslib with LRS_QUIET</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c84d89d552396a83638ee7a95de77c1a01c54e58"><code>c84d89d</code></a></td><td><code>Merge branch 't/27805/configure_lrslib_with_lrs_quiet' into t/22704/public/22704</code></td></tr></table>




---

archive/issue_comments_337653.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2019-05-09T15:06:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337653",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_337654.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI've put the remaining minor issue to a follow-up ticket, #27807 (Polymake-jupymake interface: Fix polymake's error handling in Shell::Mock)",
    "created_at": "2019-05-09T16:03:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337654",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:48" align="right">comment:48</div>

I've put the remaining minor issue to a follow-up ticket, #27807 (Polymake-jupymake interface: Fix polymake's error handling in Shell::Mock)



---

archive/issue_comments_337655.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,32 +12,7 @@\n \n We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). \n \n-Remaining issues:\n-- 1 doctest regarding polymake's error handling:\n-\n-```\n-In [1]: import JuPyMake\n-In [2]: JuPyMake.InitializePolymake()\n-Out[2]: True\n-In [4]: JuPyMake.ExecuteCommand('application(\"xyzzy\");')\n-Out[4]:\n-(True,\n- '',\n- '',\n- 'Can\\'t locate object method \"compile_scope\" via package\n-\"Polymake::Core::Shell::Mock\" at\n-/Users/mkoeppe/s/sage/sage-rebasing/local/share/polymake/perllib/Polymake/utils.pl\n-line 247.\\n')\n-In [6]: JuPyMake.ExecuteCommand('save(17);')\n-Out[6]:\n-(True,\n- '',\n- '',\n- 'Can\\'t locate object method \"compile_scope\" via package\n-\"Polymake::Core::Shell::Mock\" at\n-/Users/mkoeppe/s/sage/sage-rebasing/local/share/polymake/perllib/Polymake/utils.pl\n-line 247.\\n')\n-```\n+Remaining issue: #27807\n \n See also: #22710: Meta-ticket: polymake\n \n``````\n",
    "created_at": "2019-05-09T16:03:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337655",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,32 +12,7 @@
 
 We do want to keep the current pty-based pexpect interface, though, because it may be handy for running polymake on a remote server; or for guarding against a crashing polymake (sigh). 
 
-Remaining issues:
-- 1 doctest regarding polymake's error handling:
-
-```
-In [1]: import JuPyMake
-In [2]: JuPyMake.InitializePolymake()
-Out[2]: True
-In [4]: JuPyMake.ExecuteCommand('application("xyzzy");')
-Out[4]:
-(True,
- '',
- '',
- 'Can\'t locate object method "compile_scope" via package
-"Polymake::Core::Shell::Mock" at
-/Users/mkoeppe/s/sage/sage-rebasing/local/share/polymake/perllib/Polymake/utils.pl
-line 247.\n')
-In [6]: JuPyMake.ExecuteCommand('save(17);')
-Out[6]:
-(True,
- '',
- '',
- 'Can\'t locate object method "compile_scope" via package
-"Polymake::Core::Shell::Mock" at
-/Users/mkoeppe/s/sage/sage-rebasing/local/share/polymake/perllib/Polymake/utils.pl
-line 247.\n')
-```
+Remaining issue: #27807
 
 See also: #22710: Meta-ticket: polymake
 
``````




---

archive/issue_comments_337656.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nShould I make that last failing doctest less specific regarding the error message for this ticket? (Before it's fixed fully in #27807)",
    "created_at": "2019-05-09T16:12:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337656",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:49" align="right">comment:49</div>

Should I make that last failing doctest less specific regarding the error message for this ticket? (Before it's fixed fully in #27807)



---

archive/issue_comments_337657.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nIf you like, you can tag it \"known error\".",
    "created_at": "2019-05-09T16:14:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337657",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:50" align="right">comment:50</div>

If you like, you can tag it "known error".



---

archive/issue_comments_337658.json:
```json
{
    "body": "Changed commit from **[`c84d89d`](https://github.com/sagemath/sagetrac-mirror/commit/c84d89d552396a83638ee7a95de77c1a01c54e58)** to **[`58aa1ad`](https://github.com/sagemath/sagetrac-mirror/commit/58aa1ad052d7c2901b919cac9863d8d867d574c1)**",
    "created_at": "2019-05-09T16:20:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337658",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c84d89d`](https://github.com/sagemath/sagetrac-mirror/commit/c84d89d552396a83638ee7a95de77c1a01c54e58)** to **[`58aa1ad`](https://github.com/sagemath/sagetrac-mirror/commit/58aa1ad052d7c2901b919cac9863d8d867d574c1)**



---

archive/issue_events_318515.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-05-09T16:20:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318515"
}
```



---

archive/issue_events_318516.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-05-09T16:20:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318516"
}
```



---

archive/issue_comments_337659.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58aa1ad052d7c2901b919cac9863d8d867d574c1\"><code>58aa1ad</code></a></td><td><code>Mark issue of #27807 as known bug</code></td></tr></table>\n",
    "created_at": "2019-05-09T16:20:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337659",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58aa1ad052d7c2901b919cac9863d8d867d574c1"><code>58aa1ad</code></a></td><td><code>Mark issue of #27807 as known bug</code></td></tr></table>




---

archive/issue_events_318517.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-05-10T10:00:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318517"
}
```



---

archive/issue_events_318518.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-05-10T10:00:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318518"
}
```



---

archive/issue_comments_337660.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nMerge conflict",
    "created_at": "2019-05-11T13:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337660",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:53" align="right">comment:53</div>

Merge conflict



---

archive/issue_events_318519.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-05-11T13:40:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318519"
}
```



---

archive/issue_events_318520.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-05-11T13:40:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318520"
}
```



---

archive/issue_comments_337661.json:
```json
{
    "body": "Changed commit from **[`58aa1ad`](https://github.com/sagemath/sagetrac-mirror/commit/58aa1ad052d7c2901b919cac9863d8d867d574c1)** to **[`8d9e2c2`](https://github.com/sagemath/sagetrac-mirror/commit/8d9e2c26686c4bbb0fac7d9b30fd60a11ef37446)**",
    "created_at": "2019-05-11T15:02:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337661",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`58aa1ad`](https://github.com/sagemath/sagetrac-mirror/commit/58aa1ad052d7c2901b919cac9863d8d867d574c1)** to **[`8d9e2c2`](https://github.com/sagemath/sagetrac-mirror/commit/8d9e2c26686c4bbb0fac7d9b30fd60a11ef37446)**



---

archive/issue_comments_337662.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d9e2c26686c4bbb0fac7d9b30fd60a11ef37446\"><code>8d9e2c2</code></a></td><td><code>Merge tag '8.8.beta5' into t/22704/public/22704</code></td></tr></table>\n",
    "created_at": "2019-05-11T15:02:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337662",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d9e2c26686c4bbb0fac7d9b30fd60a11ef37446"><code>8d9e2c2</code></a></td><td><code>Merge tag '8.8.beta5' into t/22704/public/22704</code></td></tr></table>




---

archive/issue_events_318521.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-05-11T15:06:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318521"
}
```



---

archive/issue_events_318522.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-05-11T15:06:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318522"
}
```



---

archive/issue_comments_337663.json:
```json
{
    "body": "Changed branch from **[public/22704](https://github.com/sagemath/sagetrac-mirror/tree/public/22704)** to **[`8d9e2c2`](https://github.com/sagemath/sagetrac-mirror/commit/8d9e2c26686c4bbb0fac7d9b30fd60a11ef37446)**",
    "created_at": "2019-05-14T12:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337663",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/22704](https://github.com/sagemath/sagetrac-mirror/tree/public/22704)** to **[`8d9e2c2`](https://github.com/sagemath/sagetrac-mirror/commit/8d9e2c26686c4bbb0fac7d9b30fd60a11ef37446)**



---

archive/issue_events_318523.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-05-14T12:37:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318523"
}
```



---

archive/issue_events_318524.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "473a81be98486501a5ff0a3dd97001059f60164d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-05-14T12:37:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22704#event-318524"
}
```



---

archive/issue_comments_337664.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nThe upstream package jupymake seems to be missing on the sage mirrors",
    "created_at": "2019-07-21T20:33:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337664",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:57" align="right">comment:57</div>

The upstream package jupymake seems to be missing on the sage mirrors



---

archive/issue_comments_337665.json:
```json
{
    "body": "Changed commit from **[`8d9e2c2`](https://github.com/sagemath/sagetrac-mirror/commit/8d9e2c26686c4bbb0fac7d9b30fd60a11ef37446)** to none",
    "created_at": "2019-07-21T20:33:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337665",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`8d9e2c2`](https://github.com/sagemath/sagetrac-mirror/commit/8d9e2c26686c4bbb0fac7d9b30fd60a11ef37446)** to none



---

archive/issue_comments_337666.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nDo I understand correctly that in the current version jupymake is necessary for polymake to function properly? Shouldn't jupymake become a dependancy of polymake?",
    "created_at": "2019-07-28T11:40:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337666",
    "user": "https://github.com/jplab"
}
```

<div id="comment:58" align="right">comment:58</div>

Do I understand correctly that in the current version jupymake is necessary for polymake to function properly? Shouldn't jupymake become a dependancy of polymake?



---

archive/issue_comments_337667.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@jplab](#comment:58):\n> Do I understand correctly that in the current version jupymake is necessary for polymake to function properly? Shouldn't jupymake become a dependancy of polymake?\n\nNo, there are two interface classes, which both work. `PolymakeExpect` (aliases to `Polymake`) and `PolymakeJupyMake`.\nDepending on whether you have jupymake, `polymake` is set to an instance of one or the other.",
    "created_at": "2019-07-29T23:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22704",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22704#issuecomment-337667",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@jplab](#comment:58):
> Do I understand correctly that in the current version jupymake is necessary for polymake to function properly? Shouldn't jupymake become a dependancy of polymake?

No, there are two interface classes, which both work. `PolymakeExpect` (aliases to `Polymake`) and `PolymakeJupyMake`.
Depending on whether you have jupymake, `polymake` is set to an instance of one or the other.
