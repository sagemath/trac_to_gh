# Issue 22196: export using the binary STL file format

archive/issues_021959.json:
```json
{
    "body": "because this is much better for large shapes with many triangles\n\nCC:  @ohanar @kcrisman @nilesjohnson vivianepons ams\n\nKeywords: STL, 3D\n\nReviewer: Alba M\u00e1laga\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nBranch: 83b323c462ac69bbc8b68563bb45946caf8a2655\n\nDependencies: #22144\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22196\n\n",
    "closed_at": "2017-02-02T22:09:24Z",
    "created_at": "2017-01-17T16:34:15Z",
    "labels": [
        "component: graphics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "export using the binary STL file format",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22196",
    "user": "https://github.com/fchapoton"
}
```
because this is much better for large shapes with many triangles

CC:  @ohanar @kcrisman @nilesjohnson vivianepons ams

Keywords: STL, 3D

Reviewer: Alba Málaga

Author: Frédéric Chapoton

Branch: 83b323c462ac69bbc8b68563bb45946caf8a2655

Dependencies: #22144

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22196





---

archive/issue_comments_411590.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/22196\"",
    "created_at": "2017-01-17T16:34:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411590",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/22196"



---

archive/issue_comments_411591.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-01-17T16:34:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411591",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_411592.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2017-01-17T16:34:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411592",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_411593.json:
```json
{
    "body": "Changing commit from \"\" to \"264c2031c2f0122a41c5e2d49549d754a937a26f\"",
    "created_at": "2017-01-17T16:34:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411593",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "264c2031c2f0122a41c5e2d49549d754a937a26f"



---

archive/issue_comments_411594.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-18T20:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411594",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_411595.json:
```json
{
    "body": "Changing commit from \"264c2031c2f0122a41c5e2d49549d754a937a26f\" to \"83b323c462ac69bbc8b68563bb45946caf8a2655\"",
    "created_at": "2017-01-18T20:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411595",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "264c2031c2f0122a41c5e2d49549d754a937a26f" to "83b323c462ac69bbc8b68563bb45946caf8a2655"



---

archive/issue_comments_411596.json:
```json
{
    "body": "<a id='comment:3'></a>ping ? anybody for a review ? this essentially just means checking that the export works as well as before, with a better (more compact) binary format for STL files.",
    "created_at": "2017-01-27T20:29:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411596",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>ping ? anybody for a review ? this essentially just means checking that the export works as well as before, with a better (more compact) binary format for STL files.



---

archive/issue_comments_411597.json:
```json
{
    "body": "<a id='comment:4'></a>I'll do the review. It's very useful to have it more lightweight. \n\nSorry for not reacting before. It's the end of semester in my lab, so everybody is kind of overwhelmed with the everyday work.",
    "created_at": "2017-01-28T22:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411597",
    "user": "https://trac.sagemath.org/admin/accounts/users/ams"
}
```

<a id='comment:4'></a>I'll do the review. It's very useful to have it more lightweight. 

Sorry for not reacting before. It's the end of semester in my lab, so everybody is kind of overwhelmed with the everyday work.



---

archive/issue_comments_411598.json:
```json
{
    "body": "<a id='comment:5'></a>I tested with an implicit plot\n\n```\nvar('x,y,z')\nG = implicit_plot3d((x^2+y^2+2*z^2-1/3)^2==((z-1/2)^2-2*x^2)*((z+1/2)^2-2*y^2),(x,-1,1),(y,-1,1),(z,-0.5,0.5))\nG.save('implicit.stl')\n```\n\nthe Moebius surface \n\n```\nfrom sage.plot.plot3d.parametric_surface import MoebiusStrip\nS = MoebiusStrip(1,.2)\nS.save('Moebius.stl')\n```\n\nand the buckyball polyhedron  \n\n```\nG = plot(polytopes.buckyball())\nG.all[-1].save('buckyball.stl')\n```\n\nI looked at the saved stl files in Blender. They looked fine, normals where coherent when possible. \n\nOne remark, unrelated to the binary format: the implicit plot had some \"double points\" (points very close to each other) which causes tiny triangles.",
    "created_at": "2017-01-28T23:04:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411598",
    "user": "https://trac.sagemath.org/admin/accounts/users/ams"
}
```

<a id='comment:5'></a>I tested with an implicit plot

```
var('x,y,z')
G = implicit_plot3d((x^2+y^2+2*z^2-1/3)^2==((z-1/2)^2-2*x^2)*((z+1/2)^2-2*y^2),(x,-1,1),(y,-1,1),(z,-0.5,0.5))
G.save('implicit.stl')
```

the Moebius surface 

```
from sage.plot.plot3d.parametric_surface import MoebiusStrip
S = MoebiusStrip(1,.2)
S.save('Moebius.stl')
```

and the buckyball polyhedron  

```
G = plot(polytopes.buckyball())
G.all[-1].save('buckyball.stl')
```

I looked at the saved stl files in Blender. They looked fine, normals where coherent when possible. 

One remark, unrelated to the binary format: the implicit plot had some "double points" (points very close to each other) which causes tiny triangles.



---

archive/issue_comments_411599.json:
```json
{
    "body": "<a id='comment:6'></a>so, positive review ?\n\nFor the question about tiny triangles, this would be for another ticket maybe. We are using something called a \"marching cubes\" algorithm. Maybe there is room for improvement, but this is not for me and not for now.",
    "created_at": "2017-01-30T08:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411599",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>so, positive review ?

For the question about tiny triangles, this would be for another ticket maybe. We are using something called a "marching cubes" algorithm. Maybe there is room for improvement, but this is not for me and not for now.



---

archive/issue_comments_411600.json:
```json
{
    "body": "<a id='comment:7'></a>Yes, in principle.\nI just had to leave home before all the doctests finished (it's sooo slooow). \nNow I am running them on the cloud, but I had to rebuilt the whole thing first, that's why it is taking some time. As soon as it's done, it will be a positive review. \n\nActually, just doctesting sage/plot/plot3d/base.pyx was quite fast and it worked fine. But if I understand well I am supposed to doctest everything, right ?",
    "created_at": "2017-01-30T09:44:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411600",
    "user": "https://trac.sagemath.org/admin/accounts/users/ams"
}
```

<a id='comment:7'></a>Yes, in principle.
I just had to leave home before all the doctests finished (it's sooo slooow). 
Now I am running them on the cloud, but I had to rebuilt the whole thing first, that's why it is taking some time. As soon as it's done, it will be a positive review. 

Actually, just doctesting sage/plot/plot3d/base.pyx was quite fast and it worked fine. But if I understand well I am supposed to doctest everything, right ?



---

archive/issue_comments_411601.json:
```json
{
    "body": "<a id='comment:8'></a>not really, because a patchbot has done that for you (green icon at top right of this page).. You are supposed to look at the code, test the code by using it, and check the doc. I think you did enough already.",
    "created_at": "2017-01-30T09:49:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411601",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>not really, because a patchbot has done that for you (green icon at top right of this page).. You are supposed to look at the code, test the code by using it, and check the doc. I think you did enough already.



---

archive/issue_comments_411602.json:
```json
{
    "body": "<a id='comment:9'></a>Done.",
    "created_at": "2017-01-30T10:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411602",
    "user": "https://trac.sagemath.org/admin/accounts/users/ams"
}
```

<a id='comment:9'></a>Done.



---

archive/issue_comments_411603.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Alba M\u00e1laga\"",
    "created_at": "2017-01-30T10:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411603",
    "user": "https://trac.sagemath.org/admin/accounts/users/ams"
}
```

Changing reviewer from "" to "Alba Málaga"



---

archive/issue_comments_411604.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-01-30T10:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411604",
    "user": "https://trac.sagemath.org/admin/accounts/users/ams"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_411605.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-02-02T22:09:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411605",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_058368.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-02T22:09:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22196#event-58368"
}
```



---

archive/issue_comments_411606.json:
```json
{
    "body": "Changing branch from \"u/chapoton/22196\" to \"83b323c462ac69bbc8b68563bb45946caf8a2655\"",
    "created_at": "2017-02-02T22:09:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411606",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/22196" to "83b323c462ac69bbc8b68563bb45946caf8a2655"



---

archive/issue_comments_411607.json:
```json
{
    "body": "Changing keywords from \"STL\" to \"STL, 3D\".",
    "created_at": "2018-03-21T22:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411607",
    "user": "https://github.com/slel"
}
```

Changing keywords from "STL" to "STL, 3D".



---

archive/issue_comments_411608.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2018-03-21T22:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411608",
    "user": "https://github.com/slel"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_411609.json:
```json
{
    "body": "Changing commit from \"83b323c462ac69bbc8b68563bb45946caf8a2655\" to \"\"",
    "created_at": "2018-03-21T22:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22196",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22196#issuecomment-411609",
    "user": "https://github.com/slel"
}
```

Changing commit from "83b323c462ac69bbc8b68563bb45946caf8a2655" to ""
