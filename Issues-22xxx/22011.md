# Issue 22011: Make giac a standard package

archive/issues_021774.json:
```json
{
    "body": "The discussion at https://groups.google.com/forum/?hl=en#!topic/sage-devel/HI0uZra5_iI turned up no objections.\n\n\nCC:  @frederichan-IMJPRG parisse\n\nBranch/Commit: 2453fa389c23f4a55fe291f9c25d3bf8a98866d7\n\nReviewer: Frederic Han\n\nAuthor: Ralf Stephan\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22011\n\n",
    "closed_at": "2016-12-14T00:21:02Z",
    "created_at": "2016-12-02T15:51:55Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Make giac a standard package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22011",
    "user": "https://github.com/rwst"
}
```
The discussion at https://groups.google.com/forum/?hl=en#!topic/sage-devel/HI0uZra5_iI turned up no objections.


CC:  @frederichan-IMJPRG parisse

Branch/Commit: 2453fa389c23f4a55fe291f9c25d3bf8a98866d7

Reviewer: Frederic Han

Author: Ralf Stephan

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22011





---

archive/issue_comments_321523.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,5 @@\n-This ticket should prepare Giac for the status of standard package, where it's required to use tarballs from the official site under http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/\n+The discussion at https://groups.google.com/forum/?hl=en#!topic/sage-devel/HI0uZra5_iI turned up no objections.\n \n-Up to now patches to the tarballs were added and a new tarball created. These patches will now be added by the usual mechanism, i.e. under `build/pkg/giac/patches`.\n \n Comment: 1\n \n``````\n",
    "created_at": "2016-12-04T06:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321523",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,5 @@
-This ticket should prepare Giac for the status of standard package, where it's required to use tarballs from the official site under http://www-fourier.ujf-grenoble.fr/~parisse/debian/dists/stable/main/source/
+The discussion at https://groups.google.com/forum/?hl=en#!topic/sage-devel/HI0uZra5_iI turned up no objections.
 
-Up to now patches to the tarballs were added and a new tarball created. These patches will now be added by the usual mechanism, i.e. under `build/pkg/giac/patches`.
 
 Comment: 1
 
``````




---

archive/issue_comments_321524.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-12-04T06:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321524",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_321525.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2016-12-04T06:39:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321525",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_321526.json:
```json
{
    "body": "<a id='comment:5'></a>What about all the\n\n```\n# optional - giac\n```\nin the doctests, should they be removed for a standard package?",
    "created_at": "2016-12-04T18:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321526",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:5'></a>What about all the

```
# optional - giac
```
in the doctests, should they be removed for a standard package?



---

archive/issue_comments_321527.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-05T09:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321527",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_321528.json:
```json
{
    "body": "<a id='comment:7'></a>Right. Anything missing?",
    "created_at": "2016-12-05T09:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321528",
    "user": "https://github.com/rwst"
}
```

<a id='comment:7'></a>Right. Anything missing?



---

archive/issue_comments_321529.json:
```json
{
    "body": "<a id='comment:8'></a>there are also some doctets in\n\n```\n\nsrc/sage/matrix/matrix1.pyx:            sage: giac(M)                              # optional - giac\nsrc/sage/matrix/matrix1.pyx:            sage: giac(M)                                      # optional - giac\nsrc/sage/matrix/matrix1.pyx:            sage: giac(M)                             # optional - giac\nsrc/sage/modules/free_module_element.pyx:            sage: v = vector(ZZ, 4, range(4))              # optional - giac\nsrc/sage/modules/free_module_element.pyx:            sage: giac(v)+v                                # optional -  giac\nsrc/sage/modules/free_module_element.pyx:            sage: v = vector(QQ, 3, [2/3, 0, 5/4])         # optional -  giac\nsrc/sage/modules/free_module_element.pyx:            sage: giac(v)                                  # optional -  giac\nsrc/sage/modules/free_module_element.pyx:            sage: P.<x> = ZZ[]                                       # optional -  giac\nsrc/sage/modules/free_module_element.pyx:            sage: v = vector(P, 3, [x^2 + 2, 2*x + 1, -2*x^2 + 4*x]) # optional -  giac\nsrc/sage/modules/free_module_element.pyx:            sage: giac(v)                                            # optional -  giac\n```",
    "created_at": "2016-12-05T09:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321529",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:8'></a>there are also some doctets in

```

src/sage/matrix/matrix1.pyx:            sage: giac(M)                              # optional - giac
src/sage/matrix/matrix1.pyx:            sage: giac(M)                                      # optional - giac
src/sage/matrix/matrix1.pyx:            sage: giac(M)                             # optional - giac
src/sage/modules/free_module_element.pyx:            sage: v = vector(ZZ, 4, range(4))              # optional - giac
src/sage/modules/free_module_element.pyx:            sage: giac(v)+v                                # optional -  giac
src/sage/modules/free_module_element.pyx:            sage: v = vector(QQ, 3, [2/3, 0, 5/4])         # optional -  giac
src/sage/modules/free_module_element.pyx:            sage: giac(v)                                  # optional -  giac
src/sage/modules/free_module_element.pyx:            sage: P.<x> = ZZ[]                                       # optional -  giac
src/sage/modules/free_module_element.pyx:            sage: v = vector(P, 3, [x^2 + 2, 2*x + 1, -2*x^2 + 4*x]) # optional -  giac
src/sage/modules/free_module_element.pyx:            sage: giac(v)                                            # optional -  giac
```



---

archive/issue_comments_321530.json:
```json
{
    "body": "<a id='comment:9'></a>Also, you have removed some \n\n```\n# random\n```\nthey should be kept because of the output may vary",
    "created_at": "2016-12-05T12:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321530",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:9'></a>Also, you have removed some 

```
# random
```
they should be kept because of the output may vary



---

archive/issue_comments_321531.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-05T14:15:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_321532.json:
```json
{
    "body": "Attachment [giacspkg.diff](tarball://root/attachments/some-uuid/ticket22011/giacspkg.diff) by @frederichan-IMJPRG created at 2016-12-06 10:16:12",
    "created_at": "2016-12-06T10:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321532",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Attachment [giacspkg.diff](tarball://root/attachments/some-uuid/ticket22011/giacspkg.diff) by @frederichan-IMJPRG created at 2016-12-06 10:16:12



---

archive/issue_comments_321533.json:
```json
{
    "body": "<a id='comment:11'></a>So because of the removed \n`# random`\non linux there is one doctest to fix and  add again random at cputime example.\n\nI had tested also on osx 10.12 just after an update from 10.7. The built of giac was broken at the end when trying make intl.\n\n```\n[giac-1.2.2.103] gcc -c -DLOCALEDIR=\\\"/Users/frederichan/dev/sage/local/share/locale\\\" -DLOCALE_ALIAS_PATH=\\\"/Users/frederichan/dev/sage/local/share/locale\\\" -DLIBDIR=\\\"/Users/frederichan/dev/sage/local/lib\\\" -DIN_LIBINTL -DENABLE_RELOCATABLE=1 -DIN_LIBRARY -DINSTALLDIR=\\\"/Users/frederichan/dev/sage/local/lib\\\" -DNO_XMALLOC -Dset_relocation_prefix=libintl_set_relocation_prefix -Drelocate=libintl_relocate -DDEPENDS_ON_LIBICONV=1 -DHAVE_CONFIG_H -I. -I. -I.. -I/System/Library/Frameworks/CoreFoundation.framework/Headers -g -O2  langprefs.c\n[giac-1.2.2.103] In file included from /usr/include/Availability.h:180:0,\n[giac-1.2.2.103]                  from /usr/include/stdlib.h:61,\n[giac-1.2.2.103]                  from langprefs.c:25:\n[giac-1.2.2.103] /System/Library/Frameworks/CoreFoundation.framework/Headers/CFURL.h:777:39: error: 'introduced' undeclared here (not in a function)\n[giac-1.2.2.103]  const CFStringRef kCFURLLabelColorKey API_DEPRECATED(\"Use NSURLLabelColorKey\", macosx(10.6, 10.12), ios(4.0, 10.0), watchos(2.0, 3.0), tvos(9.0, 10.0));\n[giac-1.2.2.103]                                        ^\n[giac-1.2.2.103] /System/Library/Frameworks/CoreFoundation.framework/Headers/CFURL.h:777:39: error: 'deprecated' undeclared here (not in a function)\n[giac-1.2.2.103]  const CFStringRef kCFURLLabelColorKey API_DEPRECATED(\"Use NSURLLabelColorKey\", macosx(10.6, 10.12), ios(4.0, 10.0), watchos(2.0, 3.0), tvos(9.0, 10.0));\n[giac-1.2.2.103]                                        ^\n[giac-1.2.2.103] /System/Library/Frameworks/CoreFoundation.framework/Headers/CFURL.h:777:39: error: 'message' undeclared here (not in a function)\n[giac-1.2.2.103]  const CFStringRef kCFURLLabelColorKey API_DEPRECATED(\"Use NSURLLabelColorKey\", macosx(10.6, 10.12), ios(4.0, 10.0), watchos(2.0, 3.0), tvos(9.0, 10.0));\n[giac-1.2.2.103]                                        ^\n[giac-1.2.2.103] make[5]: *** [langprefs.o] Error 1\n[giac-1.2.2.103] make[4]: *** [all-recursive] Error 1\n[giac-1.2.2.103] make[3]: *** [all] Error 2\n```\nbut configuring the giac spkg with --disable-nls was successfull on osx 10.12 so I suggest the following diff:\nhttps://trac.sagemath.org/attachment/ticket/22011/giacspkg.diff",
    "created_at": "2016-12-06T10:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321533",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:11'></a>So because of the removed 
`# random`
on linux there is one doctest to fix and  add again random at cputime example.

I had tested also on osx 10.12 just after an update from 10.7. The built of giac was broken at the end when trying make intl.

```
[giac-1.2.2.103] gcc -c -DLOCALEDIR=\"/Users/frederichan/dev/sage/local/share/locale\" -DLOCALE_ALIAS_PATH=\"/Users/frederichan/dev/sage/local/share/locale\" -DLIBDIR=\"/Users/frederichan/dev/sage/local/lib\" -DIN_LIBINTL -DENABLE_RELOCATABLE=1 -DIN_LIBRARY -DINSTALLDIR=\"/Users/frederichan/dev/sage/local/lib\" -DNO_XMALLOC -Dset_relocation_prefix=libintl_set_relocation_prefix -Drelocate=libintl_relocate -DDEPENDS_ON_LIBICONV=1 -DHAVE_CONFIG_H -I. -I. -I.. -I/System/Library/Frameworks/CoreFoundation.framework/Headers -g -O2  langprefs.c
[giac-1.2.2.103] In file included from /usr/include/Availability.h:180:0,
[giac-1.2.2.103]                  from /usr/include/stdlib.h:61,
[giac-1.2.2.103]                  from langprefs.c:25:
[giac-1.2.2.103] /System/Library/Frameworks/CoreFoundation.framework/Headers/CFURL.h:777:39: error: 'introduced' undeclared here (not in a function)
[giac-1.2.2.103]  const CFStringRef kCFURLLabelColorKey API_DEPRECATED("Use NSURLLabelColorKey", macosx(10.6, 10.12), ios(4.0, 10.0), watchos(2.0, 3.0), tvos(9.0, 10.0));
[giac-1.2.2.103]                                        ^
[giac-1.2.2.103] /System/Library/Frameworks/CoreFoundation.framework/Headers/CFURL.h:777:39: error: 'deprecated' undeclared here (not in a function)
[giac-1.2.2.103]  const CFStringRef kCFURLLabelColorKey API_DEPRECATED("Use NSURLLabelColorKey", macosx(10.6, 10.12), ios(4.0, 10.0), watchos(2.0, 3.0), tvos(9.0, 10.0));
[giac-1.2.2.103]                                        ^
[giac-1.2.2.103] /System/Library/Frameworks/CoreFoundation.framework/Headers/CFURL.h:777:39: error: 'message' undeclared here (not in a function)
[giac-1.2.2.103]  const CFStringRef kCFURLLabelColorKey API_DEPRECATED("Use NSURLLabelColorKey", macosx(10.6, 10.12), ios(4.0, 10.0), watchos(2.0, 3.0), tvos(9.0, 10.0));
[giac-1.2.2.103]                                        ^
[giac-1.2.2.103] make[5]: *** [langprefs.o] Error 1
[giac-1.2.2.103] make[4]: *** [all-recursive] Error 1
[giac-1.2.2.103] make[3]: *** [all] Error 2
```
but configuring the giac spkg with --disable-nls was successfull on osx 10.12 so I suggest the following diff:
https://trac.sagemath.org/attachment/ticket/22011/giacspkg.diff



---

archive/issue_comments_321534.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-06T16:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321534",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_321535.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-06T16:31:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_321536.json:
```json
{
    "body": "<a id='comment:14'></a>On fedora 25 amd64 I was able to build sage with\n\n```\nexport MAKE='make -j3'\nmake\n```\nAt the end giac was also built. I could run\n\n```\nmake ptestlong\n```  \nthen I could run\n\n```\nenv SAGE_CHECK=yes make giacpy\n```\nOn osx 10.12 I could built sage with make but something was missing psutil:\n\n```\n[sagelib-7.5.beta5] sys\t0m1.710s\ncd ../.. && sage-logger -p './sage --docbuild --no-pdf-links all html ' logs/dochtml.log\n[dochtml] /Users/frederichan/dev/sage/local/bin/python: No module named psutil; 'sage_setup.docbuild' is a package and cannot be directly executed\nmake[2]: *** [doc-html] Error 1\nmake[1]: *** [all] Error 2\n```\nso I made\n\n```\nmake psutil\n```\nthen I could build sage successfully, and giac was built. As it seems unreliated to giac I give a positive review",
    "created_at": "2016-12-07T10:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321536",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<a id='comment:14'></a>On fedora 25 amd64 I was able to build sage with

```
export MAKE='make -j3'
make
```
At the end giac was also built. I could run

```
make ptestlong
```  
then I could run

```
env SAGE_CHECK=yes make giacpy
```
On osx 10.12 I could built sage with make but something was missing psutil:

```
[sagelib-7.5.beta5] sys	0m1.710s
cd ../.. && sage-logger -p './sage --docbuild --no-pdf-links all html ' logs/dochtml.log
[dochtml] /Users/frederichan/dev/sage/local/bin/python: No module named psutil; 'sage_setup.docbuild' is a package and cannot be directly executed
make[2]: *** [doc-html] Error 1
make[1]: *** [all] Error 2
```
so I made

```
make psutil
```
then I could build sage successfully, and giac was built. As it seems unreliated to giac I give a positive review



---

archive/issue_comments_321537.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-12-07T10:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321537",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_321538.json:
```json
{
    "body": "<a id='comment:15'></a>Thanks for the review.",
    "created_at": "2016-12-07T14:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321538",
    "user": "https://github.com/rwst"
}
```

<a id='comment:15'></a>Thanks for the review.



---

archive/issue_comments_321539.json:
```json
{
    "body": "<a id='comment:16'></a>Please add your name as reviewer.",
    "created_at": "2016-12-07T14:23:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321539",
    "user": "https://github.com/rwst"
}
```

<a id='comment:16'></a>Please add your name as reviewer.



---

archive/issue_events_057958.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-14T00:21:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22011#event-57958"
}
```



---

archive/issue_comments_321540.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-12-14T00:21:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22011",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22011#issuecomment-321540",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
