# Issue 22077: Upgrade eclib to version 20170104

archive/issues_021840.json:
```json
{
    "body": "The current eclib version in Sage (as of 7.5.beta5) is v20160720.\n\n**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170104.tar.bz2\n\nOf relevance to Sage are a bugfix and some extra functionality related to modular symbols, see #10256 and #21046.\n\n**CC:**  @categorie\n\n**Keywords:** eclib\n\n**Branch/Commit:** [cb3fd05c95fb3afbaed9ba621038293b5412d6e0](https://github.com/sagemath/sagetrac-mirror/commit/cb3fd05c95fb3afbaed9ba621038293b5412d6e0)\n\n**Reviewer:** Jeroen Demeyer\n\n**Author:** John Cremona\n\nIssue created by migration from https://trac.sagemath.org/ticket/22077\n\n",
    "closed_at": "2017-01-21T16:34:58Z",
    "created_at": "2016-12-19T14:01:24Z",
    "labels": [
        "component: packages: standard",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "title": "Upgrade eclib to version 20170104",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/22077",
    "user": "https://github.com/JohnCremona"
}
```
The current eclib version in Sage (as of 7.5.beta5) is v20160720.

**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170104.tar.bz2

Of relevance to Sage are a bugfix and some extra functionality related to modular symbols, see #10256 and #21046.

**CC:**  @categorie

**Keywords:** eclib

**Branch/Commit:** [cb3fd05c95fb3afbaed9ba621038293b5412d6e0](https://github.com/sagemath/sagetrac-mirror/commit/cb3fd05c95fb3afbaed9ba621038293b5412d6e0)

**Reviewer:** Jeroen Demeyer

**Author:** John Cremona

Issue created by migration from https://trac.sagemath.org/ticket/22077





---

archive/issue_comments_328035.json:
```json
{
    "body": "<a id='comment:1'></a>\nI will upload a branch as soon as I have tested the new build and all doctests.",
    "created_at": "2016-12-19T14:01:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328035",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:1'></a>
I will upload a branch as soon as I have tested the new build and all doctests.



---

archive/issue_comments_328036.json:
```json
{
    "body": "**Branch:** [u/cremona/22077](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/22077)",
    "created_at": "2016-12-19T16:20:38Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328036",
    "user": "https://github.com/JohnCremona"
}
```

**Branch:** [u/cremona/22077](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/22077)



---

archive/issue_events_197325.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2016-12-19T16:20:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197325"
}
```



---

archive/issue_comments_328037.json:
```json
{
    "body": "<a id='comment:2'></a>\nOK, please review.  As well as the new package code I made some small changes to the output of some modular symbol doctests.  In each case I checked that the change is exactly that which one would expect from the new eclib code (a few integers fivided by 2).",
    "created_at": "2016-12-19T16:20:38Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328037",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:2'></a>
OK, please review.  As well as the new package code I made some small changes to the output of some modular symbol doctests.  In each case I checked that the change is exactly that which one would expect from the new eclib code (a few integers fivided by 2).



---

archive/issue_comments_328038.json:
```json
{
    "body": "**Commit:** [089877e25157a83b74de930c553bc3eea32884fa](https://github.com/sagemath/sagetrac-mirror/commit/089877e25157a83b74de930c553bc3eea32884fa)",
    "created_at": "2016-12-19T16:20:38Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328038",
    "user": "https://github.com/JohnCremona"
}
```

**Commit:** [089877e25157a83b74de930c553bc3eea32884fa](https://github.com/sagemath/sagetrac-mirror/commit/089877e25157a83b74de930c553bc3eea32884fa)



---

archive/issue_comments_328039.json:
```json
{
    "body": "<a id='comment:3'></a>\nSo, what about https://github.com/JohnCremona/eclib/issues/10\n\nDo we still need the `NTL_ALL` macro?",
    "created_at": "2016-12-19T19:36:13Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328039",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
So, what about https://github.com/JohnCremona/eclib/issues/10

Do we still need the `NTL_ALL` macro?



---

archive/issue_comments_328040.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [jdemeyer](#comment%3A3):\n> So, what about https://github.com/JohnCremona/eclib/issues/10\n> \n> Do we still need the `NTL_ALL` macro?\n\nIf you look here: https://github.com/JohnCremona/eclib/commits/master, specifically at the commits made in January this year, you will see that the code now works (at least it is supposed to) with or without NTL_ALL being set.  This is controlled by the --enable-mpfp flag to ./configure.  That was quite a lot of work since there were quite a lot of tests whose output was trivially different with/without that option set.\n\nNote that the default configurations is to have --enable-mpfp set and hence NTL_ALL set, you have to turn it off using --disable-mpfp.  Since Sage's spkg-install does not turn it off, it is on in Sage.\n\nSo I think the only thing I did not do is update and close that Issue.  Sorry!",
    "created_at": "2016-12-19T19:56:04Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328040",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:4'></a>
Replying to [jdemeyer](#comment%3A3):
> So, what about https://github.com/JohnCremona/eclib/issues/10
> 
> Do we still need the `NTL_ALL` macro?

If you look here: https://github.com/JohnCremona/eclib/commits/master, specifically at the commits made in January this year, you will see that the code now works (at least it is supposed to) with or without NTL_ALL being set.  This is controlled by the --enable-mpfp flag to ./configure.  That was quite a lot of work since there were quite a lot of tests whose output was trivially different with/without that option set.

Note that the default configurations is to have --enable-mpfp set and hence NTL_ALL set, you have to turn it off using --disable-mpfp.  Since Sage's spkg-install does not turn it off, it is on in Sage.

So I think the only thing I did not do is update and close that Issue.  Sorry!



---

archive/issue_comments_328041.json:
```json
{
    "body": "<a id='comment:5'></a>\nIf so, can you apply this additional patch\n\n```diff\ndiff --git a/src/sage/libs/eclib/__init__.pxd b/src/sage/libs/eclib/__init__.pxd\nindex a666ec1..e42d0cc 100644\n--- a/src/sage/libs/eclib/__init__.pxd\n+++ b/src/sage/libs/eclib/__init__.pxd\n@@ -1,5 +1,4 @@\n # distutils: language = c++\n-# distutils: extra_compile_args = -DNTL_ALL\n # distutils: libraries = ec ntl pari gmp m\n \n # NOTE: eclib includes have specific dependencies and must be included\n```",
    "created_at": "2016-12-20T07:48:00Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328041",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
If so, can you apply this additional patch

```diff
diff --git a/src/sage/libs/eclib/__init__.pxd b/src/sage/libs/eclib/__init__.pxd
index a666ec1..e42d0cc 100644
--- a/src/sage/libs/eclib/__init__.pxd
+++ b/src/sage/libs/eclib/__init__.pxd
@@ -1,5 +1,4 @@
 # distutils: language = c++
-# distutils: extra_compile_args = -DNTL_ALL
 # distutils: libraries = ec ntl pari gmp m
 
 # NOTE: eclib includes have specific dependencies and must be included
```



---

archive/issue_comments_328042.json:
```json
{
    "body": "<a id='comment:6'></a>\nRegarding the changed doctests, I cannot really review those. But I'm happy to assume that you know what you are doing and just accept the changed output.",
    "created_at": "2016-12-20T07:50:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328042",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
Regarding the changed doctests, I cannot really review those. But I'm happy to assume that you know what you are doing and just accept the changed output.



---

archive/issue_comments_328043.json:
```json
{
    "body": "<a id='comment:7'></a>\nOK, I can make that additional change.  After that I'll force a rebuild of eclib in Sage and watch: it should be that -DNTL_ALL is set during compilation anyway.  However I just looked at the log from my build of the new spkg yesterday and every compile line only contains \"-D NTL_ALL\" and no other instances of \"NTL_ALL\".\n\nAbout the doctests: I ran them past Rob Pollack and Chris Wuthrich who are experts, and also the remarks I made above were supposed to be a justification for the correctness of the new values.",
    "created_at": "2016-12-20T09:21:10Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328043",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:7'></a>
OK, I can make that additional change.  After that I'll force a rebuild of eclib in Sage and watch: it should be that -DNTL_ALL is set during compilation anyway.  However I just looked at the log from my build of the new spkg yesterday and every compile line only contains "-D NTL_ALL" and no other instances of "NTL_ALL".

About the doctests: I ran them past Rob Pollack and Chris Wuthrich who are experts, and also the remarks I made above were supposed to be a justification for the correctness of the new values.



---

archive/issue_comments_328044.json:
```json
{
    "body": "<a id='comment:8'></a>\nAfter writing that I realised that I did not know when the presence of the line you suggest deleting has any effect.  It has nothing to do with building libec at build time, I realise, but rather is there to make sure that the cython compilations which read eclib's header files have the right macros set.  And that must be crucial given that the compiled code must then link to the library libec!  So I now think that we must continue to set NTL_ALL in this cython file, otherwise there will be errors which including eclib's header files.\n\nI checked to see what other compiler flags are set at eclib build time.  There is one other (apart from lots put there by autotools):  FLINT_LEVEL=1.  But that one is not an issue since it controls some implementations (in some eclib .cc files) and not headers.\n\nDoes this make sense?  If so, no further patching is needed.",
    "created_at": "2016-12-20T09:37:18Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328044",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:8'></a>
After writing that I realised that I did not know when the presence of the line you suggest deleting has any effect.  It has nothing to do with building libec at build time, I realise, but rather is there to make sure that the cython compilations which read eclib's header files have the right macros set.  And that must be crucial given that the compiled code must then link to the library libec!  So I now think that we must continue to set NTL_ALL in this cython file, otherwise there will be errors which including eclib's header files.

I checked to see what other compiler flags are set at eclib build time.  There is one other (apart from lots put there by autotools):  FLINT_LEVEL=1.  But that one is not an issue since it controls some implementations (in some eclib .cc files) and not headers.

Does this make sense?  If so, no further patching is needed.



---

archive/issue_comments_328045.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [cremona](#comment%3A8):\n> It has nothing to do with building libec at build time, I realise, but rather is there to make sure that the cython compilations which read eclib's header files have the right macros set.\n\nExactly. This is about compiling Sage library files (Cython extensions) against `libec`.\n\n> And that must be crucial given that the compiled code must then link to the library libec!  So I now think that we must continue to set NTL_ALL in this cython file, otherwise there will be errors which including eclib's header files.\n\nThat's a pity because `-DNTL_ALL` should not be needed. That was precisely the point that I was trying to make at https://github.com/JohnCremona/eclib/issues/10: eclib should not force other packages (like Sage) to use certain compiler flags. The `NTL_ALL` macro should be considered an implementation detail of `eclib` and it should not influence other software built against `eclib`.\n\nBut this is a minor point which won't influence this Sage ticket.",
    "created_at": "2016-12-20T13:32:52Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328045",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
Replying to [cremona](#comment%3A8):
> It has nothing to do with building libec at build time, I realise, but rather is there to make sure that the cython compilations which read eclib's header files have the right macros set.

Exactly. This is about compiling Sage library files (Cython extensions) against `libec`.

> And that must be crucial given that the compiled code must then link to the library libec!  So I now think that we must continue to set NTL_ALL in this cython file, otherwise there will be errors which including eclib's header files.

That's a pity because `-DNTL_ALL` should not be needed. That was precisely the point that I was trying to make at https://github.com/JohnCremona/eclib/issues/10: eclib should not force other packages (like Sage) to use certain compiler flags. The `NTL_ALL` macro should be considered an implementation detail of `eclib` and it should not influence other software built against `eclib`.

But this is a minor point which won't influence this Sage ticket.



---

archive/issue_comments_328046.json:
```json
{
    "body": "<a id='comment:10'></a>\nI understand your point, but it is more than just an implementation detail, as it affects the interface.  When compiled with the NTL_ALL option, functions which compute real or complex values (e.g. periods of elliptic curves) do so to arbitrary precision, returning values with type RR (NTL reals) for example, while without that option the same named function will return a C double.\n\nI do understand that this can be viewed as bad design on my part and not a feature which a professional library should have.  eclib has undergone a lot of transition since it was just \"my code\" (until 2007) so that by now it is almost respectable.  One of the remaining issues is this one: users should not have to decide at build time whether they want to use doubles or arbitrary precision for a large collection of functions; the library should provide both and allow the uers to use whichever is most appropriate in the circumstances.  In some cases, because of overloading, the same function name can be re-used; but in others different names would be necessary (e.g. for periods of elliptic curves, where the input is the same exact data whether ones wants low or high precision).  It will happen one day.\n\nI will copy some of this discussions to https://github.com/JohnCremona/eclib/issues/10",
    "created_at": "2016-12-20T13:45:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328046",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:10'></a>
I understand your point, but it is more than just an implementation detail, as it affects the interface.  When compiled with the NTL_ALL option, functions which compute real or complex values (e.g. periods of elliptic curves) do so to arbitrary precision, returning values with type RR (NTL reals) for example, while without that option the same named function will return a C double.

I do understand that this can be viewed as bad design on my part and not a feature which a professional library should have.  eclib has undergone a lot of transition since it was just "my code" (until 2007) so that by now it is almost respectable.  One of the remaining issues is this one: users should not have to decide at build time whether they want to use doubles or arbitrary precision for a large collection of functions; the library should provide both and allow the uers to use whichever is most appropriate in the circumstances.  In some cases, because of overloading, the same function name can be re-used; but in others different names would be necessary (e.g. for periods of elliptic curves, where the input is the same exact data whether ones wants low or high precision).  It will happen one day.

I will copy some of this discussions to https://github.com/JohnCremona/eclib/issues/10



---

archive/issue_events_197326.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2016-12-22T09:18:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197326"
}
```



---

archive/issue_events_197327.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2016-12-22T09:18:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197327"
}
```



---

archive/issue_comments_328047.json:
```json
{
    "body": "<a id='comment:11'></a>\nI am resetting this to \"needs work\" just so I can work some more on adding functions to make the interface for modular symbols better as in #10256.  (There was also a test output file committed to the last eclib release by mistake).  It looks as if this missed the 7.5 release anyway.",
    "created_at": "2016-12-22T09:18:11Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328047",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:11'></a>
I am resetting this to "needs work" just so I can work some more on adding functions to make the interface for modular symbols better as in #10256.  (There was also a test output file committed to the last eclib release by mistake).  It looks as if this missed the 7.5 release anyway.



---

archive/issue_comments_328048.json:
```json
{
    "body": "<a id='comment:12'></a>\nDo you mean you want to keep working on `eclib` itself or on the Sage interface?",
    "created_at": "2016-12-22T12:54:04Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328048",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
Do you mean you want to keep working on `eclib` itself or on the Sage interface?



---

archive/issue_comments_328049.json:
```json
{
    "body": "<a id='comment:13'></a>\nBoth.   There are normalization issues around modular symbols that I am sorting out on the eclib side as well as giving access to them via Sage.  So there will be a new eclib release (possibly today if I can finish) and at the same time I have   branch for #10256 which will depend on that (hence #10256 has this ticket as a dependency).",
    "created_at": "2016-12-22T13:46:25Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328049",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:13'></a>
Both.   There are normalization issues around modular symbols that I am sorting out on the eclib side as well as giving access to them via Sage.  So there will be a new eclib release (possibly today if I can finish) and at the same time I have   branch for #10256 which will depend on that (hence #10256 has this ticket as a dependency).



---

archive/issue_comments_328050.json:
```json
{
    "body": "<a id='comment:14'></a>\nFine for me. In case you want to change your mind, feel free to set this back to needs_review.",
    "created_at": "2016-12-22T13:47:30Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328050",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
Fine for me. In case you want to change your mind, feel free to set this back to needs_review.



---

archive/issue_comments_328051.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n The current eclib version in Sage (as of 7.5.beta5) is v20160720.\n \n-This ticket updates to v20161920 from http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161219.tar.bz2\n+This ticket updates to v20161920 from http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161222.tar.bz2\n \n Of relevance to Sage are a bugfix and some extra functionality related to modular symbols, see #10256 and #21046.\n``````\n",
    "created_at": "2016-12-22T20:33:49Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328051",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 The current eclib version in Sage (as of 7.5.beta5) is v20160720.
 
-This ticket updates to v20161920 from http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161219.tar.bz2
+This ticket updates to v20161920 from http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161222.tar.bz2
 
 Of relevance to Sage are a bugfix and some extra functionality related to modular symbols, see #10256 and #21046.
``````




---

archive/issue_comments_328052.json:
```json
{
    "body": "**Changing commit** from \"[089877e25157a83b74de930c553bc3eea32884fa](https://github.com/sagemath/sagetrac-mirror/commit/089877e25157a83b74de930c553bc3eea32884fa)\" to \"[b23e8cfe387df28de043ed26097449a5b1db75e9](https://github.com/sagemath/sagetrac-mirror/commit/b23e8cfe387df28de043ed26097449a5b1db75e9)\".",
    "created_at": "2016-12-22T20:36:17Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328052",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[089877e25157a83b74de930c553bc3eea32884fa](https://github.com/sagemath/sagetrac-mirror/commit/089877e25157a83b74de930c553bc3eea32884fa)" to "[b23e8cfe387df28de043ed26097449a5b1db75e9](https://github.com/sagemath/sagetrac-mirror/commit/b23e8cfe387df28de043ed26097449a5b1db75e9)".



---

archive/issue_comments_328053.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b23e8cfe387df28de043ed26097449a5b1db75e9\">b23e8cf</a></td><td><code>#22077: upgrade eclib to v20161222</code></td></tr></table>\n",
    "created_at": "2016-12-22T20:36:17Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328053",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b23e8cfe387df28de043ed26097449a5b1db75e9">b23e8cf</a></td><td><code>#22077: upgrade eclib to v20161222</code></td></tr></table>




---

archive/issue_comments_328054.json:
```json
{
    "body": "<a id='comment:17'></a>\nOK, so here is another new version.  I don't expect to need to make more changes as I work on #10256.  On the other hand there is perhaps little point in getting this in before that anyway: I made some more changes to modular symbol doctest output just so they pass but those tests will all be reworked in #10256 anyway.  It would not hurt for someone else to check that the new release still works OK rather than having to deal with both tickets at once.  I don't know.  Anyway, #10256 will depend on this as it is now.",
    "created_at": "2016-12-22T20:40:12Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328054",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:17'></a>
OK, so here is another new version.  I don't expect to need to make more changes as I work on #10256.  On the other hand there is perhaps little point in getting this in before that anyway: I made some more changes to modular symbol doctest output just so they pass but those tests will all be reworked in #10256 anyway.  It would not hurt for someone else to check that the new release still works OK rather than having to deal with both tickets at once.  I don't know.  Anyway, #10256 will depend on this as it is now.



---

archive/issue_comments_328055.json:
```json
{
    "body": "<a id='comment:18'></a>\nNeeds review then?",
    "created_at": "2016-12-23T07:02:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328055",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
Needs review then?



---

archive/issue_comments_328056.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n The current eclib version in Sage (as of 7.5.beta5) is v20160720.\n \n-This ticket updates to v20161920 from http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161222.tar.bz2\n+**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161222.tar.bz2\n \n Of relevance to Sage are a bugfix and some extra functionality related to modular symbols, see #10256 and #21046.\n``````\n",
    "created_at": "2016-12-23T07:02:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328056",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 The current eclib version in Sage (as of 7.5.beta5) is v20160720.
 
-This ticket updates to v20161920 from http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161222.tar.bz2
+**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161222.tar.bz2
 
 Of relevance to Sage are a bugfix and some extra functionality related to modular symbols, see #10256 and #21046.
``````




---

archive/issue_events_197328.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-12-23T07:02:01Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "rename": {
        "from": "Upgrade eclib to version 20161219",
        "to": "Upgrade eclib to version 20161222"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197328"
}
```



---

archive/issue_comments_328057.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [jdemeyer](#comment%3A18):\n> Needs review then?\n\nNot yet.  I uploaded that new version last night but then realised that I have yet to ensure that the modular symbols are normalised as to sign (I dealt with the factor of 2 ok, touch wood).  This probably means a delay of several days now...",
    "created_at": "2016-12-23T10:40:19Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328057",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:19'></a>
Replying to [jdemeyer](#comment%3A18):
> Needs review then?

Not yet.  I uploaded that new version last night but then realised that I have yet to ensure that the modular symbols are normalised as to sign (I dealt with the factor of 2 ok, touch wood).  This probably means a delay of several days now...



---

archive/issue_comments_328058.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57e1ae4c74e0667b0241068ff2a88b75165e0856\">57e1ae4</a></td><td><code>updated eclib to v20161223</code></td></tr></table>\n",
    "created_at": "2016-12-23T15:51:28Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328058",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57e1ae4c74e0667b0241068ff2a88b75165e0856">57e1ae4</a></td><td><code>updated eclib to v20161223</code></td></tr></table>




---

archive/issue_comments_328059.json:
```json
{
    "body": "**Changing commit** from \"[b23e8cfe387df28de043ed26097449a5b1db75e9](https://github.com/sagemath/sagetrac-mirror/commit/b23e8cfe387df28de043ed26097449a5b1db75e9)\" to \"[57e1ae4c74e0667b0241068ff2a88b75165e0856](https://github.com/sagemath/sagetrac-mirror/commit/57e1ae4c74e0667b0241068ff2a88b75165e0856)\".",
    "created_at": "2016-12-23T15:51:28Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328059",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b23e8cfe387df28de043ed26097449a5b1db75e9](https://github.com/sagemath/sagetrac-mirror/commit/b23e8cfe387df28de043ed26097449a5b1db75e9)" to "[57e1ae4c74e0667b0241068ff2a88b75165e0856](https://github.com/sagemath/sagetrac-mirror/commit/57e1ae4c74e0667b0241068ff2a88b75165e0856)".



---

archive/issue_comments_328060.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n The current eclib version in Sage (as of 7.5.beta5) is v20160720.\n \n-**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161222.tar.bz2\n+**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161223.tar.bz2\n \n Of relevance to Sage are a bugfix and some extra functionality related to modular symbols, see #10256 and #21046.\n``````\n",
    "created_at": "2016-12-23T15:53:57Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328060",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 The current eclib version in Sage (as of 7.5.beta5) is v20160720.
 
-**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161222.tar.bz2
+**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161223.tar.bz2
 
 Of relevance to Sage are a bugfix and some extra functionality related to modular symbols, see #10256 and #21046.
``````




---

archive/issue_comments_328061.json:
```json
{
    "body": "<a id='comment:22'></a>\nWith luck this version (v20161230) will be the last bugfix version with the new modular symbols functionality.  Right now this all works fine with the branch soon to be uploaded to #10256, but I should make a version here which passes all tests even if the relevant tests will all be superseded there.",
    "created_at": "2016-12-30T17:54:21Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328061",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:22'></a>
With luck this version (v20161230) will be the last bugfix version with the new modular symbols functionality.  Right now this all works fine with the branch soon to be uploaded to #10256, but I should make a version here which passes all tests even if the relevant tests will all be superseded there.



---

archive/issue_comments_328062.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n The current eclib version in Sage (as of 7.5.beta5) is v20160720.\n \n-**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161223.tar.bz2\n+**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161230.tar.bz2\n \n Of relevance to Sage are a bugfix and some extra functionality related to modular symbols, see #10256 and #21046.\n``````\n",
    "created_at": "2016-12-30T17:54:21Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328062",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 The current eclib version in Sage (as of 7.5.beta5) is v20160720.
 
-**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161223.tar.bz2
+**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161230.tar.bz2
 
 Of relevance to Sage are a bugfix and some extra functionality related to modular symbols, see #10256 and #21046.
``````




---

archive/issue_comments_328063.json:
```json
{
    "body": "**Changing commit** from \"[57e1ae4c74e0667b0241068ff2a88b75165e0856](https://github.com/sagemath/sagetrac-mirror/commit/57e1ae4c74e0667b0241068ff2a88b75165e0856)\" to \"[13662b2a16c99a2324cba2bb9b5d4385bad7acee](https://github.com/sagemath/sagetrac-mirror/commit/13662b2a16c99a2324cba2bb9b5d4385bad7acee)\".",
    "created_at": "2016-12-30T18:03:08Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328063",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[57e1ae4c74e0667b0241068ff2a88b75165e0856](https://github.com/sagemath/sagetrac-mirror/commit/57e1ae4c74e0667b0241068ff2a88b75165e0856)" to "[13662b2a16c99a2324cba2bb9b5d4385bad7acee](https://github.com/sagemath/sagetrac-mirror/commit/13662b2a16c99a2324cba2bb9b5d4385bad7acee)".



---

archive/issue_comments_328064.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13662b2a16c99a2324cba2bb9b5d4385bad7acee\">13662b2</a></td><td><code>updated eclib to v20161230</code></td></tr></table>\n",
    "created_at": "2016-12-30T18:03:08Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328064",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13662b2a16c99a2324cba2bb9b5d4385bad7acee">13662b2</a></td><td><code>updated eclib to v20161230</code></td></tr></table>




---

archive/issue_comments_328065.json:
```json
{
    "body": "<a id='comment:24'></a>\nPlease review, using v20161230 of eclib (as in the link).  The only doctest changes are to do with scaling of modular symbols, which will be dealt with properly in #10256, so the only thing to do is check that the new source builds OK and all test pass.",
    "created_at": "2016-12-30T18:06:10Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328065",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:24'></a>
Please review, using v20161230 of eclib (as in the link).  The only doctest changes are to do with scaling of modular symbols, which will be dealt with properly in #10256, so the only thing to do is check that the new source builds OK and all test pass.



---

archive/issue_events_197329.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2016-12-30T18:06:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197329"
}
```



---

archive/issue_events_197330.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2016-12-30T18:06:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197330"
}
```



---

archive/issue_events_197331.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-12-31T09:59:37Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "rename": {
        "from": "Upgrade eclib to version 20161222",
        "to": "Upgrade eclib to version 20161230"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197331"
}
```



---

archive/issue_comments_328066.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2016-12-31T09:59:37Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328066",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_events_197332.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-01T19:10:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197332"
}
```



---

archive/issue_events_197333.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-01T19:10:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197333"
}
```



---

archive/issue_comments_328067.json:
```json
{
    "body": "<a id='comment:27'></a>\nVery sorry, JD -- see #10256",
    "created_at": "2017-01-03T10:39:39Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328067",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:27'></a>
Very sorry, JD -- see #10256



---

archive/issue_events_197334.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-01-03T10:39:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197334"
}
```



---

archive/issue_events_197335.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-01-03T10:39:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197335"
}
```



---

archive/issue_events_197336.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-01-03T15:14:15Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "rename": {
        "from": "Upgrade eclib to version 20161230",
        "to": "Upgrade eclib to version 20170103"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197336"
}
```



---

archive/issue_comments_328068.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n The current eclib version in Sage (as of 7.5.beta5) is v20160720.\n \n-**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161230.tar.bz2\n+**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170103.tar.bz2\n \n Of relevance to Sage are a bugfix and some extra functionality related to modular symbols, see #10256 and #21046.\n``````\n",
    "created_at": "2017-01-03T15:14:15Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328068",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 The current eclib version in Sage (as of 7.5.beta5) is v20160720.
 
-**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20161230.tar.bz2
+**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170103.tar.bz2
 
 Of relevance to Sage are a bugfix and some extra functionality related to modular symbols, see #10256 and #21046.
``````




---

archive/issue_comments_328069.json:
```json
{
    "body": "<a id='comment:28'></a>\nAnother version will appear shortly.  For the record: the sign of plus modular symbols was being set correctly when L(E,1) is nonzero but not otherwise (random) and the sign of the minus symbol was not being set at all.  Now both are dealt with.\n\nThe new tarball is in place, and I will update the branch soon.\n\nI suggest that when this has yet again had a review by Jeroen, we do not set it to positive review until Chris is happy over at #10256.",
    "created_at": "2017-01-03T15:14:15Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328069",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:28'></a>
Another version will appear shortly.  For the record: the sign of plus modular symbols was being set correctly when L(E,1) is nonzero but not otherwise (random) and the sign of the minus symbol was not being set at all.  Now both are dealt with.

The new tarball is in place, and I will update the branch soon.

I suggest that when this has yet again had a review by Jeroen, we do not set it to positive review until Chris is happy over at #10256.



---

archive/issue_comments_328070.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e695e8c6ce01db84035d1206e615661d9678e5f\">7e695e8</a></td><td><code>updated eclib to v20170103</code></td></tr></table>\n",
    "created_at": "2017-01-03T16:36:31Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328070",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e695e8c6ce01db84035d1206e615661d9678e5f">7e695e8</a></td><td><code>updated eclib to v20170103</code></td></tr></table>




---

archive/issue_comments_328071.json:
```json
{
    "body": "**Changing commit** from \"[13662b2a16c99a2324cba2bb9b5d4385bad7acee](https://github.com/sagemath/sagetrac-mirror/commit/13662b2a16c99a2324cba2bb9b5d4385bad7acee)\" to \"[7e695e8c6ce01db84035d1206e615661d9678e5f](https://github.com/sagemath/sagetrac-mirror/commit/7e695e8c6ce01db84035d1206e615661d9678e5f)\".",
    "created_at": "2017-01-03T16:36:31Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328071",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[13662b2a16c99a2324cba2bb9b5d4385bad7acee](https://github.com/sagemath/sagetrac-mirror/commit/13662b2a16c99a2324cba2bb9b5d4385bad7acee)" to "[7e695e8c6ce01db84035d1206e615661d9678e5f](https://github.com/sagemath/sagetrac-mirror/commit/7e695e8c6ce01db84035d1206e615661d9678e5f)".



---

archive/issue_comments_328072.json:
```json
{
    "body": "<a id='comment:30'></a>\nOK, ready for review again.  Apart from a general check that nothing is broken this should wait until #10256 is also good.",
    "created_at": "2017-01-03T16:37:48Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328072",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:30'></a>
OK, ready for review again.  Apart from a general check that nothing is broken this should wait until #10256 is also good.



---

archive/issue_comments_328073.json:
```json
{
    "body": "<a id='comment:31'></a>\nI fear I am losing all credibility here.  Scrap v20170103 and watch this space.",
    "created_at": "2017-01-04T09:08:51Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328073",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:31'></a>
I fear I am losing all credibility here.  Scrap v20170103 and watch this space.



---

archive/issue_comments_328074.json:
```json
{
    "body": "**Changing commit** from \"[7e695e8c6ce01db84035d1206e615661d9678e5f](https://github.com/sagemath/sagetrac-mirror/commit/7e695e8c6ce01db84035d1206e615661d9678e5f)\" to \"[1c7887157a6d7ae068c28637152c56e3d8c00804](https://github.com/sagemath/sagetrac-mirror/commit/1c7887157a6d7ae068c28637152c56e3d8c00804)\".",
    "created_at": "2017-01-04T19:55:52Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328074",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7e695e8c6ce01db84035d1206e615661d9678e5f](https://github.com/sagemath/sagetrac-mirror/commit/7e695e8c6ce01db84035d1206e615661d9678e5f)" to "[1c7887157a6d7ae068c28637152c56e3d8c00804](https://github.com/sagemath/sagetrac-mirror/commit/1c7887157a6d7ae068c28637152c56e3d8c00804)".



---

archive/issue_comments_328075.json:
```json
{
    "body": "<a id='comment:32'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8fabe91a3ff9c42a7a4d719a305d1f9924f80f1b\">8fabe91</a></td><td><code>updated eclib to v20170104</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c7887157a6d7ae068c28637152c56e3d8c00804\">1c78871</a></td><td><code>updated eclib to v20170104 again</code></td></tr></table>\n",
    "created_at": "2017-01-04T19:55:52Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328075",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8fabe91a3ff9c42a7a4d719a305d1f9924f80f1b">8fabe91</a></td><td><code>updated eclib to v20170104</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c7887157a6d7ae068c28637152c56e3d8c00804">1c78871</a></td><td><code>updated eclib to v20170104 again</code></td></tr></table>




---

archive/issue_comments_328076.json:
```json
{
    "body": "<a id='comment:33'></a>\nAnother attempt, with more testing this time.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8fabe91a3ff9c42a7a4d719a305d1f9924f80f1b\">8fabe91</a></td><td><code>updated eclib to v20170104</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c7887157a6d7ae068c28637152c56e3d8c00804\">1c78871</a></td><td><code>updated eclib to v20170104 again</code></td></tr></table>\n",
    "created_at": "2017-01-04T19:58:45Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328076",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:33'></a>
Another attempt, with more testing this time.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8fabe91a3ff9c42a7a4d719a305d1f9924f80f1b">8fabe91</a></td><td><code>updated eclib to v20170104</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c7887157a6d7ae068c28637152c56e3d8c00804">1c78871</a></td><td><code>updated eclib to v20170104 again</code></td></tr></table>




---

archive/issue_comments_328077.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n The current eclib version in Sage (as of 7.5.beta5) is v20160720.\n \n-**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170103.tar.bz2\n+**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170104.tar.bz2\n \n Of relevance to Sage are a bugfix and some extra functionality related to modular symbols, see #10256 and #21046.\n``````\n",
    "created_at": "2017-01-04T19:58:45Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328077",
    "user": "https://github.com/JohnCremona"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 The current eclib version in Sage (as of 7.5.beta5) is v20160720.
 
-**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170103.tar.bz2
+**New tarball**: http://homepages.warwick.ac.uk/staff/J.E.Cremona/ftp/eclib-20170104.tar.bz2
 
 Of relevance to Sage are a bugfix and some extra functionality related to modular symbols, see #10256 and #21046.
``````




---

archive/issue_events_197337.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-01-04T19:58:45Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "rename": {
        "from": "Upgrade eclib to version 20170103",
        "to": "Upgrade eclib to version 20170104"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197337"
}
```



---

archive/issue_events_197338.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-01-04T19:59:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197338"
}
```



---

archive/issue_events_197339.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-01-04T19:59:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197339"
}
```



---

archive/issue_comments_328078.json:
```json
{
    "body": "<a id='comment:36'></a>\nCan you squash all those commits? I see little point in keeping all those incremental upgrades as separate commits.",
    "created_at": "2017-01-05T13:29:09Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328078",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'></a>
Can you squash all those commits? I see little point in keeping all those incremental upgrades as separate commits.



---

archive/issue_comments_328079.json:
```json
{
    "body": "<a id='comment:37'></a>\nProbably, I would not be happy at #10256 if you squash commits here. Does it really harm having them?",
    "created_at": "2017-01-05T13:33:53Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328079",
    "user": "https://github.com/categorie"
}
```

<a id='comment:37'></a>
Probably, I would not be happy at #10256 if you squash commits here. Does it really harm having them?



---

archive/issue_comments_328080.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [wuthrich](#comment%3A37):\n> Probably, I would not be happy at #10256 if you squash commits here.\n\nNever mind then.",
    "created_at": "2017-01-05T13:35:14Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328080",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:38'></a>
Replying to [wuthrich](#comment%3A37):
> Probably, I would not be happy at #10256 if you squash commits here.

Never mind then.



---

archive/issue_comments_328081.json:
```json
{
    "body": "<a id='comment:39'></a>\nYes, sorry about the tangle.  We certainly could disentangle: on this ticket that's what you were suggesting anyway, and on the other one I think there are <6 files affected and one could always use the non-git route of copying those 6 files elsewhere first and starting a new branch...\nI can do that if necessary.",
    "created_at": "2017-01-05T14:19:56Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328081",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:39'></a>
Yes, sorry about the tangle.  We certainly could disentangle: on this ticket that's what you were suggesting anyway, and on the other one I think there are <6 files affected and one could always use the non-git route of copying those 6 files elsewhere first and starting a new branch...
I can do that if necessary.



---

archive/issue_comments_328082.json:
```json
{
    "body": "<a id='comment:40'></a>\nI made a clean single commit on top of 7.5.rc1 which is at u/cremona/22077new.  It could be used instead of the original u/cremona/22077, but only if #10256 is also cleaned up.  Next...",
    "created_at": "2017-01-05T19:10:00Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328082",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:40'></a>
I made a clean single commit on top of 7.5.rc1 which is at u/cremona/22077new.  It could be used instead of the original u/cremona/22077, but only if #10256 is also cleaned up.  Next...



---

archive/issue_comments_328083.json:
```json
{
    "body": "<a id='comment:41'></a>\nJeroen, how about using my clean branch here, and at #10256 using one I just made which merges this with the current branch there (u/wuthrich/ticket/10256)?  I resolved the merge conflicts in 3 files, so now have a version of that branch which is no worse than before, while this one is simpler.",
    "created_at": "2017-01-05T19:29:07Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328083",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:41'></a>
Jeroen, how about using my clean branch here, and at #10256 using one I just made which merges this with the current branch there (u/wuthrich/ticket/10256)?  I resolved the merge conflicts in 3 files, so now have a version of that branch which is no worse than before, while this one is simpler.



---

archive/issue_events_197340.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-05T19:41:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197340"
}
```



---

archive/issue_events_197341.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-05T19:41:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197341"
}
```



---

archive/issue_comments_328084.json:
```json
{
    "body": "<a id='comment:42'></a>\nThat's all fine for me. Just change branches and set this one back to needs_review.",
    "created_at": "2017-01-05T19:41:10Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328084",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:42'></a>
That's all fine for me. Just change branches and set this one back to needs_review.



---

archive/issue_events_197342.json:
```json
{
    "actor": "https://github.com/categorie",
    "created_at": "2017-01-05T20:47:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197342"
}
```



---

archive/issue_events_197343.json:
```json
{
    "actor": "https://github.com/categorie",
    "created_at": "2017-01-05T20:47:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197343"
}
```



---

archive/issue_comments_328085.json:
```json
{
    "body": "<a id='comment:43'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb3fd05c95fb3afbaed9ba621038293b5412d6e0\">cb3fd05</a></td><td><code>#22077 update eclib to v20170104</code></td></tr></table>\n",
    "created_at": "2017-01-05T20:47:51Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328085",
    "user": "https://github.com/categorie"
}
```

<a id='comment:43'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb3fd05c95fb3afbaed9ba621038293b5412d6e0">cb3fd05</a></td><td><code>#22077 update eclib to v20170104</code></td></tr></table>




---

archive/issue_comments_328086.json:
```json
{
    "body": "**Changing branch** from \"[u/cremona/22077](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/22077)\" to \"[u/cremona/22077new](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/22077new)\".",
    "created_at": "2017-01-05T20:47:51Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328086",
    "user": "https://github.com/categorie"
}
```

**Changing branch** from "[u/cremona/22077](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/22077)" to "[u/cremona/22077new](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/22077new)".



---

archive/issue_comments_328087.json:
```json
{
    "body": "**Changing commit** from \"[1c7887157a6d7ae068c28637152c56e3d8c00804](https://github.com/sagemath/sagetrac-mirror/commit/1c7887157a6d7ae068c28637152c56e3d8c00804)\" to \"[cb3fd05c95fb3afbaed9ba621038293b5412d6e0](https://github.com/sagemath/sagetrac-mirror/commit/cb3fd05c95fb3afbaed9ba621038293b5412d6e0)\".",
    "created_at": "2017-01-05T20:47:51Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328087",
    "user": "https://github.com/categorie"
}
```

**Changing commit** from "[1c7887157a6d7ae068c28637152c56e3d8c00804](https://github.com/sagemath/sagetrac-mirror/commit/1c7887157a6d7ae068c28637152c56e3d8c00804)" to "[cb3fd05c95fb3afbaed9ba621038293b5412d6e0](https://github.com/sagemath/sagetrac-mirror/commit/cb3fd05c95fb3afbaed9ba621038293b5412d6e0)".



---

archive/issue_comments_328088.json:
```json
{
    "body": "<a id='comment:44'></a>\nThanks.  Now I'll replace the branch at #10256 with a tidied one too.",
    "created_at": "2017-01-05T21:02:57Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328088",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:44'></a>
Thanks.  Now I'll replace the branch at #10256 with a tidied one too.



---

archive/issue_events_197344.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-01-05T21:30:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197344"
}
```



---

archive/issue_events_197345.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-01-05T21:30:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197345"
}
```



---

archive/issue_comments_328089.json:
```json
{
    "body": "<a id='comment:45'></a>\nApologies, I messed up -- the new branch is certainly a cleaned up version of its predecessor but that one was wrong.  I will fix this in the morning.\n\nIgnore the above comment, this (=branch u/cremona/22077new = commit cb3fd05)  is fine.  Just note that the additional work on #10256 will involve changes to sage/libs/eclib as well as sage/schemes/elliptic_curves, in order to expose some new functionality in eclib.  This one *only* does the minimum to make eclib c20170104 work OK and pass tests.",
    "created_at": "2017-01-05T21:30:45Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328089",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:45'></a>
Apologies, I messed up -- the new branch is certainly a cleaned up version of its predecessor but that one was wrong.  I will fix this in the morning.

Ignore the above comment, this (=branch u/cremona/22077new = commit cb3fd05)  is fine.  Just note that the additional work on #10256 will involve changes to sage/libs/eclib as well as sage/schemes/elliptic_curves, in order to expose some new functionality in eclib.  This one *only* does the minimum to make eclib c20170104 work OK and pass tests.



---

archive/issue_events_197346.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-01-06T09:52:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197346"
}
```



---

archive/issue_events_197347.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2017-01-06T09:52:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197347"
}
```



---

archive/issue_comments_328090.json:
```json
{
    "body": "<a id='comment:47'></a>\nNote that #10256 which depends on this has a postive review.  I don't know if this proprty is inherited!",
    "created_at": "2017-01-09T09:22:47Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328090",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:47'></a>
Note that #10256 which depends on this has a postive review.  I don't know if this proprty is inherited!



---

archive/issue_comments_328091.json:
```json
{
    "body": "<a id='comment:48'></a>\nGood. I'll try to review this today.",
    "created_at": "2017-01-09T09:33:17Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328091",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:48'></a>
Good. I'll try to review this today.



---

archive/issue_comments_328092.json:
```json
{
    "body": "<a id='comment:49'></a>\nI didn't check the mathematics. But the package builds fine.",
    "created_at": "2017-01-09T09:58:15Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328092",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:49'></a>
I didn't check the mathematics. But the package builds fine.



---

archive/issue_events_197348.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-09T09:58:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197348"
}
```



---

archive/issue_events_197349.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-09T09:58:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197349"
}
```



---

archive/issue_comments_328093.json:
```json
{
    "body": "<a id='comment:50'></a>\nThanks.  The mathematical changes are effectively reviewed (already) at #10256.",
    "created_at": "2017-01-09T10:10:54Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328093",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:50'></a>
Thanks.  The mathematical changes are effectively reviewed (already) at #10256.



---

archive/issue_comments_328094.json:
```json
{
    "body": "**Changing branch** from \"[u/cremona/22077new](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/22077new)\" to \"[cb3fd05c95fb3afbaed9ba621038293b5412d6e0](https://github.com/sagemath/sagetrac-mirror/commit/cb3fd05c95fb3afbaed9ba621038293b5412d6e0)\".",
    "created_at": "2017-01-21T16:34:58Z",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22077#issuecomment-328094",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/cremona/22077new](https://github.com/sagemath/sagetrac-mirror/tree/u/cremona/22077new)" to "[cb3fd05c95fb3afbaed9ba621038293b5412d6e0](https://github.com/sagemath/sagetrac-mirror/commit/cb3fd05c95fb3afbaed9ba621038293b5412d6e0)".



---

archive/issue_events_197350.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-21T16:34:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197350"
}
```



---

archive/issue_events_197351.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f728b9256121ad1ba2ee3d15261da268ba1ab903",
    "created_at": "2017-01-21T16:34:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22077",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22077#event-197351"
}
```
