# Issue 22762: py3: get rid of __cmp__ in quadratic forms

archive/issues_022525.json:
```json
{
    "body": "as another micro-step towards python3\n\n**CC:**  @tscrim @jm58660 @jdemeyer\n\n**Branch/Commit:** [e90cb7dcecdab2322a7a01629368fc830285d4f2](https://github.com/sagemath/sagetrac-mirror/commit/e90cb7dcecdab2322a7a01629368fc830285d4f2)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/22762\n\n",
    "closed_at": "2017-04-23T12:57:42Z",
    "created_at": "2017-04-05T12:07:16Z",
    "labels": [
        "component: python3",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "py3: get rid of __cmp__ in quadratic forms",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22762",
    "user": "https://github.com/fchapoton"
}
```
as another micro-step towards python3

**CC:**  @tscrim @jm58660 @jdemeyer

**Branch/Commit:** [e90cb7dcecdab2322a7a01629368fc830285d4f2](https://github.com/sagemath/sagetrac-mirror/commit/e90cb7dcecdab2322a7a01629368fc830285d4f2)

**Reviewer:** Travis Scrimshaw

**Author:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/22762





---

archive/issue_events_206797.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-04-05T12:08:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22762#event-206797"
}
```



---

archive/issue_comments_342994.json:
```json
{
    "body": "**Branch:** [u/chapoton/22762](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22762)",
    "created_at": "2017-04-05T12:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-342994",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/chapoton/22762](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22762)



---

archive/issue_comments_342995.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9aeefb1612b860beef8d30b658a322d1407389cd\">9aeefb1</a></td><td><code>posets: order and chain polytopes over ZZ</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f9194e9e994a3581fb68bf5639e9a90aa180fd9\">4f9194e</a></td><td><code>py3: get rid of `__cmp__` in quadratic forms</code></td></tr></table>\n",
    "created_at": "2017-04-05T12:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-342995",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9aeefb1612b860beef8d30b658a322d1407389cd">9aeefb1</a></td><td><code>posets: order and chain polytopes over ZZ</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f9194e9e994a3581fb68bf5639e9a90aa180fd9">4f9194e</a></td><td><code>py3: get rid of `__cmp__` in quadratic forms</code></td></tr></table>




---

archive/issue_comments_342996.json:
```json
{
    "body": "**Commit:** [4f9194e9e994a3581fb68bf5639e9a90aa180fd9](https://github.com/sagemath/sagetrac-mirror/commit/4f9194e9e994a3581fb68bf5639e9a90aa180fd9)",
    "created_at": "2017-04-05T12:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-342996",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [4f9194e9e994a3581fb68bf5639e9a90aa180fd9](https://github.com/sagemath/sagetrac-mirror/commit/4f9194e9e994a3581fb68bf5639e9a90aa180fd9)



---

archive/issue_comments_342997.json:
```json
{
    "body": "**Changing commit** from \"[4f9194e9e994a3581fb68bf5639e9a90aa180fd9](https://github.com/sagemath/sagetrac-mirror/commit/4f9194e9e994a3581fb68bf5639e9a90aa180fd9)\" to \"[95d4b0ff75985c8c4f7ec7923232fac898301865](https://github.com/sagemath/sagetrac-mirror/commit/95d4b0ff75985c8c4f7ec7923232fac898301865)\".",
    "created_at": "2017-04-05T12:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-342997",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4f9194e9e994a3581fb68bf5639e9a90aa180fd9](https://github.com/sagemath/sagetrac-mirror/commit/4f9194e9e994a3581fb68bf5639e9a90aa180fd9)" to "[95d4b0ff75985c8c4f7ec7923232fac898301865](https://github.com/sagemath/sagetrac-mirror/commit/95d4b0ff75985c8c4f7ec7923232fac898301865)".



---

archive/issue_comments_342998.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95d4b0ff75985c8c4f7ec7923232fac898301865\">95d4b0f</a></td><td><code>py3: get rid of `__cmp__` in quadratic forms</code></td></tr></table>\n",
    "created_at": "2017-04-05T12:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-342998",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95d4b0ff75985c8c4f7ec7923232fac898301865">95d4b0f</a></td><td><code>py3: get rid of `__cmp__` in quadratic forms</code></td></tr></table>




---

archive/issue_comments_342999.json:
```json
{
    "body": "<a id='comment:3'></a>\nDo we want to use `@total_ordering` on the class?",
    "created_at": "2017-04-05T16:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-342999",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
Do we want to use `@total_ordering` on the class?



---

archive/issue_comments_343000.json:
```json
{
    "body": "<a id='comment:4'></a>\nWhat for ? Python3 docs tells it is enough to implement `__eq__` and `__lt__`.\n\nhttps://docs.python.org/3/library/stdtypes.html#comparisons",
    "created_at": "2017-04-06T06:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-343000",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
What for ? Python3 docs tells it is enough to implement `__eq__` and `__lt__`.

https://docs.python.org/3/library/stdtypes.html#comparisons



---

archive/issue_comments_343001.json:
```json
{
    "body": "<a id='comment:5'></a>\nThat is good to know for when we do switch to Python3. Yet, it is not sufficient for Python2 as we need to implement a (trivial) `__ne__` for these cases as well.",
    "created_at": "2017-04-06T22:03:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-343001",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
That is good to know for when we do switch to Python3. Yet, it is not sufficient for Python2 as we need to implement a (trivial) `__ne__` for these cases as well.



---

archive/issue_comments_343002.json:
```json
{
    "body": "<a id='comment:6'></a>\ngreen bot, please review",
    "created_at": "2017-04-11T20:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-343002",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
green bot, please review



---

archive/issue_comments_343003.json:
```json
{
    "body": "<a id='comment:7'></a>\nI think we should add the `@total_ordering` as this change in effect removes functionality while we are using Python2. Otherwise we should go full bore the other direction and remove `__lt__`.",
    "created_at": "2017-04-11T22:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-343003",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
I think we should add the `@total_ordering` as this change in effect removes functionality while we are using Python2. Otherwise we should go full bore the other direction and remove `__lt__`.



---

archive/issue_comments_343004.json:
```json
{
    "body": "<a id='comment:8'></a>\n`__lt__` is needed because we sometimes sort this kind of things\n\nwhat is the removed functionality ?",
    "created_at": "2017-04-16T09:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-343004",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
`__lt__` is needed because we sometimes sort this kind of things

what is the removed functionality ?



---

archive/issue_comments_343005.json:
```json
{
    "body": "<a id='comment:9'></a>\nFor example, with this branch:\n\n```\nsage: P = BinaryQF([2,2,3])\nsage: Q = BinaryQF([1,2,3])\nsage: Q <= P\nFalse\n```\nIf this is done for print sorting (the ordering seems artificial to me), then I think those places should have other sorting methods. Is there a specific place where this sorting is used?",
    "created_at": "2017-04-16T18:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-343005",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
For example, with this branch:

```
sage: P = BinaryQF([2,2,3])
sage: Q = BinaryQF([1,2,3])
sage: Q <= P
False
```
If this is done for print sorting (the ordering seems artificial to me), then I think those places should have other sorting methods. Is there a specific place where this sorting is used?



---

archive/issue_comments_343006.json:
```json
{
    "body": "<a id='comment:10'></a>\nI tried to remove the `__lt__` and got doctest failures in various places. As I did not manage to solve them all, I just drop the problem for the moment.",
    "created_at": "2017-04-17T19:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-343006",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>
I tried to remove the `__lt__` and got doctest failures in various places. As I did not manage to solve them all, I just drop the problem for the moment.



---

archive/issue_comments_343007.json:
```json
{
    "body": "<a id='comment:11'></a>\nAh okay. Thanks for trying. I would say we are back to adding `@total_ordering` to the class; at least this is the simplest approach.",
    "created_at": "2017-04-17T23:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-343007",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
Ah okay. Thanks for trying. I would say we are back to adding `@total_ordering` to the class; at least this is the simplest approach.



---

archive/issue_comments_343008.json:
```json
{
    "body": "**Changing commit** from \"[95d4b0ff75985c8c4f7ec7923232fac898301865](https://github.com/sagemath/sagetrac-mirror/commit/95d4b0ff75985c8c4f7ec7923232fac898301865)\" to \"[e90cb7dcecdab2322a7a01629368fc830285d4f2](https://github.com/sagemath/sagetrac-mirror/commit/e90cb7dcecdab2322a7a01629368fc830285d4f2)\".",
    "created_at": "2017-04-18T18:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-343008",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[95d4b0ff75985c8c4f7ec7923232fac898301865](https://github.com/sagemath/sagetrac-mirror/commit/95d4b0ff75985c8c4f7ec7923232fac898301865)" to "[e90cb7dcecdab2322a7a01629368fc830285d4f2](https://github.com/sagemath/sagetrac-mirror/commit/e90cb7dcecdab2322a7a01629368fc830285d4f2)".



---

archive/issue_comments_343009.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d677ff3ba3ff5482b28c9a263ae649ca7fe11cd\">7d677ff</a></td><td><code>Merge branch 'u/chapoton/22762' in 8.0.b2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e90cb7dcecdab2322a7a01629368fc830285d4f2\">e90cb7d</a></td><td><code>trac 22762 adding total_ordering</code></td></tr></table>\n",
    "created_at": "2017-04-18T18:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-343009",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d677ff3ba3ff5482b28c9a263ae649ca7fe11cd">7d677ff</a></td><td><code>Merge branch 'u/chapoton/22762' in 8.0.b2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e90cb7dcecdab2322a7a01629368fc830285d4f2">e90cb7d</a></td><td><code>trac 22762 adding total_ordering</code></td></tr></table>




---

archive/issue_comments_343010.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2017-04-18T22:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-343010",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_events_206798.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-04-18T22:38:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22762#event-206798"
}
```



---

archive/issue_events_206799.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-04-18T22:38:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22762#event-206799"
}
```



---

archive/issue_comments_343011.json:
```json
{
    "body": "<a id='comment:13'></a>\nThanks.",
    "created_at": "2017-04-18T22:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-343011",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
Thanks.



---

archive/issue_events_206800.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-23T12:57:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22762#event-206800"
}
```



---

archive/issue_events_206801.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-23T12:57:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22762#event-206801"
}
```



---

archive/issue_comments_343012.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/22762](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22762)\" to \"[e90cb7dcecdab2322a7a01629368fc830285d4f2](https://github.com/sagemath/sagetrac-mirror/commit/e90cb7dcecdab2322a7a01629368fc830285d4f2)\".",
    "created_at": "2017-04-23T12:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-343012",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/chapoton/22762](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22762)" to "[e90cb7dcecdab2322a7a01629368fc830285d4f2](https://github.com/sagemath/sagetrac-mirror/commit/e90cb7dcecdab2322a7a01629368fc830285d4f2)".
