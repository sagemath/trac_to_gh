# Issue 22762: py3: get rid of __cmp__ in quadratic forms

archive/issues_022525.json:
```json
{
    "body": "as another micro-step towards python3\n\nCC:  @tscrim @jm58660 @jdemeyer\n\nBranch/Commit: [e90cb7dcecdab2322a7a01629368fc830285d4f2](https://github.com/sagemath/sagetrac-mirror/commit/e90cb7dcecdab2322a7a01629368fc830285d4f2)\n\nReviewer: Travis Scrimshaw\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22762\n\n",
    "closed_at": "2017-04-23T12:57:42Z",
    "created_at": "2017-04-05T12:07:16Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "py3: get rid of __cmp__ in quadratic forms",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22762",
    "user": "https://github.com/fchapoton"
}
```
as another micro-step towards python3

CC:  @tscrim @jm58660 @jdemeyer

Branch/Commit: [e90cb7dcecdab2322a7a01629368fc830285d4f2](https://github.com/sagemath/sagetrac-mirror/commit/e90cb7dcecdab2322a7a01629368fc830285d4f2)

Reviewer: Travis Scrimshaw

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22762





---

archive/issue_comments_427146.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-04-05T12:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427146",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_427147.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/22762\"",
    "created_at": "2017-04-05T12:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427147",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/22762"



---

archive/issue_comments_427148.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[9aeefb1](https://github.com/sagemath/sagetrac-mirror/commit/9aeefb1612b860beef8d30b658a322d1407389cd)|`posets: order and chain polytopes over ZZ`|\n|[4f9194e](https://github.com/sagemath/sagetrac-mirror/commit/4f9194e9e994a3581fb68bf5639e9a90aa180fd9)|`py3: get rid of __cmp__ in quadratic forms`|",
    "created_at": "2017-04-05T12:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427148",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[9aeefb1](https://github.com/sagemath/sagetrac-mirror/commit/9aeefb1612b860beef8d30b658a322d1407389cd)|`posets: order and chain polytopes over ZZ`|
|[4f9194e](https://github.com/sagemath/sagetrac-mirror/commit/4f9194e9e994a3581fb68bf5639e9a90aa180fd9)|`py3: get rid of __cmp__ in quadratic forms`|



---

archive/issue_comments_427149.json:
```json
{
    "body": "Changing commit from \"\" to \"4f9194e9e994a3581fb68bf5639e9a90aa180fd9\"",
    "created_at": "2017-04-05T12:08:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427149",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "4f9194e9e994a3581fb68bf5639e9a90aa180fd9"



---

archive/issue_comments_427150.json:
```json
{
    "body": "Changing commit from \"4f9194e9e994a3581fb68bf5639e9a90aa180fd9\" to \"95d4b0ff75985c8c4f7ec7923232fac898301865\"",
    "created_at": "2017-04-05T12:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427150",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4f9194e9e994a3581fb68bf5639e9a90aa180fd9" to "95d4b0ff75985c8c4f7ec7923232fac898301865"



---

archive/issue_comments_427151.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[95d4b0f](https://github.com/sagemath/sagetrac-mirror/commit/95d4b0ff75985c8c4f7ec7923232fac898301865)|`py3: get rid of __cmp__ in quadratic forms`|",
    "created_at": "2017-04-05T12:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427151",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[95d4b0f](https://github.com/sagemath/sagetrac-mirror/commit/95d4b0ff75985c8c4f7ec7923232fac898301865)|`py3: get rid of __cmp__ in quadratic forms`|



---

archive/issue_comments_427152.json:
```json
{
    "body": "<a id='comment:3'></a>\nDo we want to use ``@`total_ordering` on the class?",
    "created_at": "2017-04-05T16:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427152",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
Do we want to use ``@`total_ordering` on the class?



---

archive/issue_comments_427153.json:
```json
{
    "body": "<a id='comment:4'></a>\nWhat for ? Python3 docs tells it is enough to implement `__eq__` and `__lt__`.\n\nhttps://docs.python.org/3/library/stdtypes.html#comparisons",
    "created_at": "2017-04-06T06:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427153",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
What for ? Python3 docs tells it is enough to implement `__eq__` and `__lt__`.

https://docs.python.org/3/library/stdtypes.html#comparisons



---

archive/issue_comments_427154.json:
```json
{
    "body": "<a id='comment:5'></a>\nThat is good to know for when we do switch to Python3. Yet, it is not sufficient for Python2 as we need to implement a (trivial) `__ne__` for these cases as well.",
    "created_at": "2017-04-06T22:03:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427154",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
That is good to know for when we do switch to Python3. Yet, it is not sufficient for Python2 as we need to implement a (trivial) `__ne__` for these cases as well.



---

archive/issue_comments_427155.json:
```json
{
    "body": "<a id='comment:6'></a>\ngreen bot, please review",
    "created_at": "2017-04-11T20:49:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427155",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
green bot, please review



---

archive/issue_comments_427156.json:
```json
{
    "body": "<a id='comment:7'></a>\nI think we should add the ``@`total_ordering` as this change in effect removes functionality while we are using Python2. Otherwise we should go full bore the other direction and remove `__lt__`.",
    "created_at": "2017-04-11T22:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427156",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
I think we should add the ``@`total_ordering` as this change in effect removes functionality while we are using Python2. Otherwise we should go full bore the other direction and remove `__lt__`.



---

archive/issue_comments_427157.json:
```json
{
    "body": "<a id='comment:8'></a>\n`__lt__` is needed because we sometimes sort this kind of things\n\nwhat is the removed functionality ?",
    "created_at": "2017-04-16T09:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427157",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'></a>
`__lt__` is needed because we sometimes sort this kind of things

what is the removed functionality ?



---

archive/issue_comments_427158.json:
```json
{
    "body": "<a id='comment:9'></a>\nFor example, with this branch:\n\n```\nsage: P = BinaryQF([2,2,3])\nsage: Q = BinaryQF([1,2,3])\nsage: Q <= P\nFalse\n```\nIf this is done for print sorting (the ordering seems artificial to me), then I think those places should have other sorting methods. Is there a specific place where this sorting is used?",
    "created_at": "2017-04-16T18:03:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427158",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
For example, with this branch:

```
sage: P = BinaryQF([2,2,3])
sage: Q = BinaryQF([1,2,3])
sage: Q <= P
False
```
If this is done for print sorting (the ordering seems artificial to me), then I think those places should have other sorting methods. Is there a specific place where this sorting is used?



---

archive/issue_comments_427159.json:
```json
{
    "body": "<a id='comment:10'></a>\nI tried to remove the `__lt__` and got doctest failures in various places. As I did not manage to solve them all, I just drop the problem for the moment.",
    "created_at": "2017-04-17T19:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427159",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>
I tried to remove the `__lt__` and got doctest failures in various places. As I did not manage to solve them all, I just drop the problem for the moment.



---

archive/issue_comments_427160.json:
```json
{
    "body": "<a id='comment:11'></a>\nAh okay. Thanks for trying. I would say we are back to adding ``@`total_ordering` to the class; at least this is the simplest approach.",
    "created_at": "2017-04-17T23:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427160",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
Ah okay. Thanks for trying. I would say we are back to adding ``@`total_ordering` to the class; at least this is the simplest approach.



---

archive/issue_comments_427161.json:
```json
{
    "body": "Changing commit from \"95d4b0ff75985c8c4f7ec7923232fac898301865\" to \"e90cb7dcecdab2322a7a01629368fc830285d4f2\"",
    "created_at": "2017-04-18T18:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427161",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "95d4b0ff75985c8c4f7ec7923232fac898301865" to "e90cb7dcecdab2322a7a01629368fc830285d4f2"



---

archive/issue_comments_427162.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[7d677ff](https://github.com/sagemath/sagetrac-mirror/commit/7d677ff3ba3ff5482b28c9a263ae649ca7fe11cd)|`Merge branch 'u/chapoton/22762' in 8.0.b2`|\n|[e90cb7d](https://github.com/sagemath/sagetrac-mirror/commit/e90cb7dcecdab2322a7a01629368fc830285d4f2)|`trac 22762 adding total_ordering`|",
    "created_at": "2017-04-18T18:21:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427162",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[7d677ff](https://github.com/sagemath/sagetrac-mirror/commit/7d677ff3ba3ff5482b28c9a263ae649ca7fe11cd)|`Merge branch 'u/chapoton/22762' in 8.0.b2`|
|[e90cb7d](https://github.com/sagemath/sagetrac-mirror/commit/e90cb7dcecdab2322a7a01629368fc830285d4f2)|`trac 22762 adding total_ordering`|



---

archive/issue_comments_427163.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2017-04-18T22:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427163",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_427164.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-18T22:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427164",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_427165.json:
```json
{
    "body": "<a id='comment:13'></a>\nThanks.",
    "created_at": "2017-04-18T22:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427165",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
Thanks.



---

archive/issue_comments_427166.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-23T12:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427166",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_067381.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-23T12:57:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22762#event-67381"
}
```



---

archive/issue_comments_427167.json:
```json
{
    "body": "Changing branch from \"u/chapoton/22762\" to \"e90cb7dcecdab2322a7a01629368fc830285d4f2\"",
    "created_at": "2017-04-23T12:57:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22762",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22762#issuecomment-427167",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/22762" to "e90cb7dcecdab2322a7a01629368fc830285d4f2"
