# Issue 22193: Port cypari2 documentation as a standalone doctests

archive/issues_021956.json:
```json
{
    "body": "Since cypari2 is aimed to become an external module we should move the doctest of its documentation in the standalone file `src/sage/libs/pari/tests.py`.\n\nDepends on #22319\n\n**CC:**  @defeo @jdemeyer\n\n**Branch/Commit:** [128030ad25fc7eb86c3995cab3a399d672c5e6a4](https://github.com/sagemath/sagetrac-mirror/commit/128030ad25fc7eb86c3995cab3a399d672c5e6a4)\n\n**Reviewer:** Jeroen Demeyer\n\n**Author:** Vincent Delecroix, Luca De Feo\n\nIssue created by migration from https://trac.sagemath.org/ticket/22193\n\n",
    "closed_at": "2017-03-02T17:43:50Z",
    "created_at": "2017-01-16T18:39:02Z",
    "labels": [
        "component: packages: standard",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "title": "Port cypari2 documentation as a standalone doctests",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/22193",
    "user": "https://github.com/videlec"
}
```
Since cypari2 is aimed to become an external module we should move the doctest of its documentation in the standalone file `src/sage/libs/pari/tests.py`.

Depends on #22319

**CC:**  @defeo @jdemeyer

**Branch/Commit:** [128030ad25fc7eb86c3995cab3a399d672c5e6a4](https://github.com/sagemath/sagetrac-mirror/commit/128030ad25fc7eb86c3995cab3a399d672c5e6a4)

**Reviewer:** Jeroen Demeyer

**Author:** Vincent Delecroix, Luca De Feo

Issue created by migration from https://trac.sagemath.org/ticket/22193





---

archive/issue_comments_330591.json:
```json
{
    "body": "<a id='comment:1'></a>\nWe already have `src/sage/libs/pari/tests.py`. That would be a good place to put those tests.",
    "created_at": "2017-01-17T09:10:23Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330591",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'></a>
We already have `src/sage/libs/pari/tests.py`. That would be a good place to put those tests.



---

archive/issue_comments_330592.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-Since cypari2 is aimed to become an external module we should move the doctest of its documentation in a standalone file.\n+Since cypari2 is aimed to become an external module we should move the doctest of its documentation in the standalone file `src/sage/libs/pari/tests.py`.\n``````\n",
    "created_at": "2017-01-17T10:32:48Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330592",
    "user": "https://github.com/videlec"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-Since cypari2 is aimed to become an external module we should move the doctest of its documentation in a standalone file.
+Since cypari2 is aimed to become an external module we should move the doctest of its documentation in the standalone file `src/sage/libs/pari/tests.py`.
``````




---

archive/issue_comments_330593.json:
```json
{
    "body": "<a id='comment:3'></a>\ndoing that...",
    "created_at": "2017-01-17T10:48:16Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330593",
    "user": "https://github.com/videlec"
}
```

<a id='comment:3'></a>
doing that...



---

archive/issue_comments_330594.json:
```json
{
    "body": "**Author:** Vincent Delecroix",
    "created_at": "2017-01-17T10:48:16Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330594",
    "user": "https://github.com/videlec"
}
```

**Author:** Vincent Delecroix



---

archive/attachments_021572.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "pari_doctests.py",
    "asset_url": "tarball://root/attachments/ticket22193/pari_doctests.py",
    "created_at": "2017-01-17T18:14:55Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket22193/pari_doctests.py",
    "user": "https://github.com/videlec"
}
```



---

archive/issue_comments_330595.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Attachment:** [pari_doctests.py](https://github.com/sagemath/sage/files/ticket22193/pari_doctests.py)\n\nI joined the script I used to generate the files.",
    "created_at": "2017-01-17T18:14:55Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330595",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
**Attachment:** [pari_doctests.py](https://github.com/sagemath/sage/files/ticket22193/pari_doctests.py)

I joined the script I used to generate the files.



---

archive/issue_comments_330596.json:
```json
{
    "body": "**Branch:** [u/vdelecroix/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22193)",
    "created_at": "2017-01-17T18:15:21Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330596",
    "user": "https://github.com/videlec"
}
```

**Branch:** [u/vdelecroix/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22193)



---

archive/issue_comments_330597.json:
```json
{
    "body": "**Commit:** [3f211e45626df9f6338542decb4ef0df484fd7ff](https://github.com/sagemath/sagetrac-mirror/commit/3f211e45626df9f6338542decb4ef0df484fd7ff)",
    "created_at": "2017-01-17T18:15:21Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330597",
    "user": "https://github.com/videlec"
}
```

**Commit:** [3f211e45626df9f6338542decb4ef0df484fd7ff](https://github.com/sagemath/sagetrac-mirror/commit/3f211e45626df9f6338542decb4ef0df484fd7ff)



---

archive/issue_comments_330598.json:
```json
{
    "body": "<a id='comment:5'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f211e45626df9f6338542decb4ef0df484fd7ff\">3f211e4</a></td><td><code>22193: copy doctests from cypari2</code></td></tr></table>\n",
    "created_at": "2017-01-17T18:15:21Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330598",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f211e45626df9f6338542decb4ef0df484fd7ff">3f211e4</a></td><td><code>22193: copy doctests from cypari2</code></td></tr></table>




---

archive/issue_events_198476.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-17T18:15:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198476"
}
```



---

archive/issue_comments_330599.json:
```json
{
    "body": "<a id='comment:6'></a>\nI don't really like that this is automatic. I think we should manually figure out which doctests should be kept in cypari2 and which ones should be moved to Sage.",
    "created_at": "2017-01-18T17:32:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330599",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
I don't really like that this is automatic. I think we should manually figure out which doctests should be kept in cypari2 and which ones should be moved to Sage.



---

archive/issue_comments_330600.json:
```json
{
    "body": "<a id='comment:7'></a>\nI think that the tests in `convert.pyx` don't really involve Sage at all (except for the preparser, so `2^64` should be changed to `2**64` for example).",
    "created_at": "2017-01-18T17:35:06Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330600",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
I think that the tests in `convert.pyx` don't really involve Sage at all (except for the preparser, so `2^64` should be changed to `2**64` for example).



---

archive/issue_comments_330601.json:
```json
{
    "body": "<a id='comment:8'></a>\nWhat's the status of this? Anyone working on it?",
    "created_at": "2017-02-03T16:07:52Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330601",
    "user": "https://github.com/defeo"
}
```

<a id='comment:8'></a>
What's the status of this? Anyone working on it?



---

archive/issue_comments_330602.json:
```json
{
    "body": "**Changing branch** from \"[u/vdelecroix/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22193)\" to \"[u/defeo/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/22193)\".",
    "created_at": "2017-02-06T19:49:36Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330602",
    "user": "https://github.com/defeo"
}
```

**Changing branch** from "[u/vdelecroix/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22193)" to "[u/defeo/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/22193)".



---

archive/issue_comments_330603.json:
```json
{
    "body": "**Dependencies:** #22221 #22222 #22291",
    "created_at": "2017-02-06T22:00:28Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330603",
    "user": "https://github.com/defeo"
}
```

**Dependencies:** #22221 #22222 #22291



---

archive/issue_comments_330604.json:
```json
{
    "body": "**Changing commit** from \"[3f211e45626df9f6338542decb4ef0df484fd7ff](https://github.com/sagemath/sagetrac-mirror/commit/3f211e45626df9f6338542decb4ef0df484fd7ff)\" to \"[b6f22af9012c3f0e67511fabccf65e519ab43050](https://github.com/sagemath/sagetrac-mirror/commit/b6f22af9012c3f0e67511fabccf65e519ab43050)\".",
    "created_at": "2017-02-06T22:00:28Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330604",
    "user": "https://github.com/defeo"
}
```

**Changing commit** from "[3f211e45626df9f6338542decb4ef0df484fd7ff](https://github.com/sagemath/sagetrac-mirror/commit/3f211e45626df9f6338542decb4ef0df484fd7ff)" to "[b6f22af9012c3f0e67511fabccf65e519ab43050](https://github.com/sagemath/sagetrac-mirror/commit/b6f22af9012c3f0e67511fabccf65e519ab43050)".



---

archive/issue_comments_330605.json:
```json
{
    "body": "<a id='comment:10'></a>\nIt's been extremely painful, but I've manually gone through all docstrings. As Jeroen suspected, very few of them were Sage-specific, but most of them needed to be de-Saged.\n\nI moved the few Sage-specific tests to `test.py`, and also duplicated there some tests that could have been done entirely in CyPari2, but that used to activate some code-paths in Sage that wouldn't be activated otherwise.\n\nThere's two notable bits of docstring I haven't touched yet:\n\n1. The \"Guide to real precision\" in the module docstring of `pari_instance.pyx`. This is very Sage-specific, and it's more than just a testsuite. Where shall we move it?\n\n2. The `Gen.sage()`, which of course has no place in CyPari. Did we decide anything on subclassing `Gen`, though?\n\nFor the rest, I hopefully changed all `^` to `**` at the right spots, and removed all dependencies on Sage (except for the `sage:` prompt and the import statements). If I forgot something, we will notice anyway when setting up tests outside of Sage. I also fear that some doctests may fail in Python3, but that should also be easy to fix.\n\nIn my doctest trip, I saw a lot of very archaic code, esp. in the number field and the elliptic curve methods. For example `nfbasis` has a very weird docstring, and takes a flag parameter that seems to be undocumented in PARI.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41d47f7a14d9844c3a030c234a2c5d4a8971944f\">41d47f7</a></td><td><code>Fix dependency on PARI headers</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/175506854ef5ee301cbbbda94e135fbb63f02902\">1755068</a></td><td><code>Merge commit '41d47f7a14d9844c3a030c234a2c5d4a8971944f' of trac.sagemath.org:sage into t/22193/port_cypary2_doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98869b4f83de894281bf164016d7ef9a2f4b3227\">98869b4</a></td><td><code>Remove _pari_instance global</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9c93dcb32ff1993ede5419533aff7c60345fa2d\">c9c93dc</a></td><td><code>Merge commit '98869b4f83de894281bf164016d7ef9a2f4b3227' of trac.sagemath.org:sage into t/22193/port_cypary2_doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5f74b1a88203cbc1768e47a2ae2037a1b6f18d6\">b5f74b1</a></td><td><code>Use longintrepr.pxd from Cython</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6d32360a3a87cd88ef7f211cbe34e803d23fcf7\">c6d3236</a></td><td><code>Merge commit 'b5f74b1a88203cbc1768e47a2ae2037a1b6f18d6' of trac.sagemath.org:sage into t/22193/port_cypary2_doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6f22af9012c3f0e67511fabccf65e519ab43050\">b6f22af</a></td><td><code>Made docstrings in libs/cypari2 mostyl Sage-independent</code></td></tr></table>\n",
    "created_at": "2017-02-06T22:00:28Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330605",
    "user": "https://github.com/defeo"
}
```

<a id='comment:10'></a>
It's been extremely painful, but I've manually gone through all docstrings. As Jeroen suspected, very few of them were Sage-specific, but most of them needed to be de-Saged.

I moved the few Sage-specific tests to `test.py`, and also duplicated there some tests that could have been done entirely in CyPari2, but that used to activate some code-paths in Sage that wouldn't be activated otherwise.

There's two notable bits of docstring I haven't touched yet:

1. The "Guide to real precision" in the module docstring of `pari_instance.pyx`. This is very Sage-specific, and it's more than just a testsuite. Where shall we move it?

2. The `Gen.sage()`, which of course has no place in CyPari. Did we decide anything on subclassing `Gen`, though?

For the rest, I hopefully changed all `^` to `**` at the right spots, and removed all dependencies on Sage (except for the `sage:` prompt and the import statements). If I forgot something, we will notice anyway when setting up tests outside of Sage. I also fear that some doctests may fail in Python3, but that should also be easy to fix.

In my doctest trip, I saw a lot of very archaic code, esp. in the number field and the elliptic curve methods. For example `nfbasis` has a very weird docstring, and takes a flag parameter that seems to be undocumented in PARI.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41d47f7a14d9844c3a030c234a2c5d4a8971944f">41d47f7</a></td><td><code>Fix dependency on PARI headers</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/175506854ef5ee301cbbbda94e135fbb63f02902">1755068</a></td><td><code>Merge commit '41d47f7a14d9844c3a030c234a2c5d4a8971944f' of trac.sagemath.org:sage into t/22193/port_cypary2_doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98869b4f83de894281bf164016d7ef9a2f4b3227">98869b4</a></td><td><code>Remove _pari_instance global</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9c93dcb32ff1993ede5419533aff7c60345fa2d">c9c93dc</a></td><td><code>Merge commit '98869b4f83de894281bf164016d7ef9a2f4b3227' of trac.sagemath.org:sage into t/22193/port_cypary2_doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5f74b1a88203cbc1768e47a2ae2037a1b6f18d6">b5f74b1</a></td><td><code>Use longintrepr.pxd from Cython</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6d32360a3a87cd88ef7f211cbe34e803d23fcf7">c6d3236</a></td><td><code>Merge commit 'b5f74b1a88203cbc1768e47a2ae2037a1b6f18d6' of trac.sagemath.org:sage into t/22193/port_cypary2_doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6f22af9012c3f0e67511fabccf65e519ab43050">b6f22af</a></td><td><code>Made docstrings in libs/cypari2 mostyl Sage-independent</code></td></tr></table>




---

archive/issue_comments_330606.json:
```json
{
    "body": "**Changing author** from \"Vincent Delecroix\" to \"Vincent Delecroix, Luca De Feo\".",
    "created_at": "2017-02-06T22:00:28Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330606",
    "user": "https://github.com/defeo"
}
```

**Changing author** from "Vincent Delecroix" to "Vincent Delecroix, Luca De Feo".



---

archive/issue_events_198477.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-02-06T22:00:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198477"
}
```



---

archive/issue_events_198478.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-02-06T22:00:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198478"
}
```



---

archive/issue_comments_330607.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52e9f8c03f97b53406c869c521264399a5ccd7cb\">52e9f8c</a></td><td><code>Removed Sage-specific bits from guide to real precision</code></td></tr></table>\n",
    "created_at": "2017-02-08T18:17:40Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330607",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52e9f8c03f97b53406c869c521264399a5ccd7cb">52e9f8c</a></td><td><code>Removed Sage-specific bits from guide to real precision</code></td></tr></table>




---

archive/issue_comments_330608.json:
```json
{
    "body": "**Changing commit** from \"[b6f22af9012c3f0e67511fabccf65e519ab43050](https://github.com/sagemath/sagetrac-mirror/commit/b6f22af9012c3f0e67511fabccf65e519ab43050)\" to \"[52e9f8c03f97b53406c869c521264399a5ccd7cb](https://github.com/sagemath/sagetrac-mirror/commit/52e9f8c03f97b53406c869c521264399a5ccd7cb)\".",
    "created_at": "2017-02-08T18:17:40Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330608",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b6f22af9012c3f0e67511fabccf65e519ab43050](https://github.com/sagemath/sagetrac-mirror/commit/b6f22af9012c3f0e67511fabccf65e519ab43050)" to "[52e9f8c03f97b53406c869c521264399a5ccd7cb](https://github.com/sagemath/sagetrac-mirror/commit/52e9f8c03f97b53406c869c521264399a5ccd7cb)".



---

archive/issue_events_198479.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-02-08T18:18:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198479"
}
```



---

archive/issue_events_198480.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-02-08T18:18:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198480"
}
```



---

archive/issue_comments_330609.json:
```json
{
    "body": "<a id='comment:13'></a>\nJust had a quick look and it looks good on first sight. I need to check a bit better in order to give positive_review though.\n\nDoes the documentation from `src/sage/libs/pari/__init__.py` actually appear anywhere?",
    "created_at": "2017-02-08T19:52:04Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330609",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Just had a quick look and it looks good on first sight. I need to check a bit better in order to give positive_review though.

Does the documentation from `src/sage/libs/pari/__init__.py` actually appear anywhere?



---

archive/issue_comments_330610.json:
```json
{
    "body": "<a id='comment:14'></a>\n> Does the documentation from `src/sage/libs/pari/__init__.py` actually appear anywhere?\n\n\nI don't think so, but all documentation from `cypari2` seems to have disappeared from the reference manual anyway. I thought that was a deliberate choice?",
    "created_at": "2017-02-08T22:15:07Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330610",
    "user": "https://github.com/defeo"
}
```

<a id='comment:14'></a>
> Does the documentation from `src/sage/libs/pari/__init__.py` actually appear anywhere?


I don't think so, but all documentation from `cypari2` seems to have disappeared from the reference manual anyway. I thought that was a deliberate choice?



---

archive/issue_comments_330611.json:
```json
{
    "body": "<a id='comment:15'></a>\nPlease rebase to 7.6.beta3",
    "created_at": "2017-02-09T08:39:20Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330611",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Please rebase to 7.6.beta3



---

archive/issue_events_198481.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-09T08:39:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198481"
}
```



---

archive/issue_events_198482.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-09T08:39:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198482"
}
```



---

archive/issue_comments_330612.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [defeo](#comment%3A14):\n> all documentation from `cypari2` seems to have disappeared from the reference manual anyway.\n\n\nThe code for `src/sage/libs/cypari2` will be removed from Sage anyway, so I don't consider it a problem that the doc is not in Sage anymore.\n\nHowever, the doc for `src/sage/libs/pari` should remain in Sage. It is currently not.",
    "created_at": "2017-02-09T08:41:05Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330612",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Replying to [defeo](#comment%3A14):
> all documentation from `cypari2` seems to have disappeared from the reference manual anyway.


The code for `src/sage/libs/cypari2` will be removed from Sage anyway, so I don't consider it a problem that the doc is not in Sage anymore.

However, the doc for `src/sage/libs/pari` should remain in Sage. It is currently not.



---

archive/issue_comments_330613.json:
```json
{
    "body": "**Changing branch** from \"[u/defeo/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/22193)\" to \"[u/jdemeyer/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22193)\".",
    "created_at": "2017-02-09T11:13:19Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330613",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/defeo/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/22193)" to "[u/jdemeyer/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22193)".



---

archive/issue_comments_330614.json:
```json
{
    "body": "<a id='comment:18'></a>\nRebased (and fixed a typo in the commit message).\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8608c943687254338f3084233fba6b1df27b29fd\">8608c94</a></td><td><code>Made docstrings in libs/cypari2 mostly Sage-independent</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cb08162bfbc1d5b64f8899bd455907e6ddec937\">3cb0816</a></td><td><code>Removed Sage-specific bits from guide to real precision</code></td></tr></table>\n",
    "created_at": "2017-02-09T11:14:18Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330614",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
Rebased (and fixed a typo in the commit message).

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8608c943687254338f3084233fba6b1df27b29fd">8608c94</a></td><td><code>Made docstrings in libs/cypari2 mostly Sage-independent</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cb08162bfbc1d5b64f8899bd455907e6ddec937">3cb0816</a></td><td><code>Removed Sage-specific bits from guide to real precision</code></td></tr></table>




---

archive/issue_comments_330615.json:
```json
{
    "body": "**Changing commit** from \"[52e9f8c03f97b53406c869c521264399a5ccd7cb](https://github.com/sagemath/sagetrac-mirror/commit/52e9f8c03f97b53406c869c521264399a5ccd7cb)\" to \"[3cb08162bfbc1d5b64f8899bd455907e6ddec937](https://github.com/sagemath/sagetrac-mirror/commit/3cb08162bfbc1d5b64f8899bd455907e6ddec937)\".",
    "created_at": "2017-02-09T11:14:18Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330615",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[52e9f8c03f97b53406c869c521264399a5ccd7cb](https://github.com/sagemath/sagetrac-mirror/commit/52e9f8c03f97b53406c869c521264399a5ccd7cb)" to "[3cb08162bfbc1d5b64f8899bd455907e6ddec937](https://github.com/sagemath/sagetrac-mirror/commit/3cb08162bfbc1d5b64f8899bd455907e6ddec937)".



---

archive/issue_comments_330616.json:
```json
{
    "body": "<a id='comment:19'></a>\nI'm having a look at the documentation right now.",
    "created_at": "2017-02-09T11:14:47Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330616",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>
I'm having a look at the documentation right now.



---

archive/issue_comments_330617.json:
```json
{
    "body": "**Changing dependencies** from \"#22221 #22222 #22291\" to \"\".",
    "created_at": "2017-02-09T11:14:47Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330617",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#22221 #22222 #22291" to "".



---

archive/issue_comments_330618.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2017-02-09T11:14:47Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330618",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_comments_330619.json:
```json
{
    "body": "**Changing commit** from \"[3cb08162bfbc1d5b64f8899bd455907e6ddec937](https://github.com/sagemath/sagetrac-mirror/commit/3cb08162bfbc1d5b64f8899bd455907e6ddec937)\" to \"[db744ba0f606e1fda2fa7cac94b64baafaaf1aa5](https://github.com/sagemath/sagetrac-mirror/commit/db744ba0f606e1fda2fa7cac94b64baafaaf1aa5)\".",
    "created_at": "2017-02-09T15:31:44Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330619",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3cb08162bfbc1d5b64f8899bd455907e6ddec937](https://github.com/sagemath/sagetrac-mirror/commit/3cb08162bfbc1d5b64f8899bd455907e6ddec937)" to "[db744ba0f606e1fda2fa7cac94b64baafaaf1aa5](https://github.com/sagemath/sagetrac-mirror/commit/db744ba0f606e1fda2fa7cac94b64baafaaf1aa5)".



---

archive/issue_comments_330620.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db744ba0f606e1fda2fa7cac94b64baafaaf1aa5\">db744ba</a></td><td><code>Add sage.libs.pari to the documentation</code></td></tr></table>\n",
    "created_at": "2017-02-09T15:31:44Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330620",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db744ba0f606e1fda2fa7cac94b64baafaaf1aa5">db744ba</a></td><td><code>Add sage.libs.pari to the documentation</code></td></tr></table>




---

archive/issue_events_198483.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-09T15:32:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198483"
}
```



---

archive/issue_events_198484.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-09T15:32:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198484"
}
```



---

archive/issue_comments_330621.json:
```json
{
    "body": "<a id='comment:22'></a>\nThanks for the rebase.\n\nWe could improve the documentation of `sage.libs.pari`, but that's probably best kept for another ticket.",
    "created_at": "2017-02-09T17:28:04Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330621",
    "user": "https://github.com/defeo"
}
```

<a id='comment:22'></a>
Thanks for the rebase.

We could improve the documentation of `sage.libs.pari`, but that's probably best kept for another ticket.



---

archive/issue_events_198485.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-02-09T17:28:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198485"
}
```



---

archive/issue_events_198486.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-02-09T17:28:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198486"
}
```



---

archive/issue_events_198487.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-10T08:27:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198487"
}
```



---

archive/issue_events_198488.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-10T08:27:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198488"
}
```



---

archive/issue_comments_330622.json:
```json
{
    "body": "<a id='comment:23'></a>\nSome details...\n\n1. You forgot to remove one `int()` here:\n\n```\nsage: int(2) ** pari(-5)\n```\n\n2. Why did you remove this?\n\n```\nsage: bnr = pari(\"K = bnfinit(x^4 - 4*x^2 + 1); bnrinit(K, 2*x)\")\nsage: bnr.nf_get_pol()\n```\n\n3. This sentence is no longer relevant:\n\n```\nHowever, beware that ``pari(L)`` returns an absolute number field::\n```\n\n4. This is a significant change:\n\n```\n-            sage: two = RealField(256)(2)._pari_()\n+            sage: two = pari(2)\n```\nInstead, you could use\n\n```\ntwo = pari(\"2.0000000000000000000000000000000000000000000000000000000000000000000000000000\")\n```\n\n5. This is confusing since the `5/3` is not the fraction 5/3 in Python!\n\n```\nsage: pari([-1, 5/3, -8.0]).vecmin()\n```\nYou could keep the original test with quotes: `pari(\"[1, -5/3, 8.0]\").vecmin()`",
    "created_at": "2017-02-10T08:27:52Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330622",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
Some details...

1. You forgot to remove one `int()` here:

```
sage: int(2) ** pari(-5)
```

2. Why did you remove this?

```
sage: bnr = pari("K = bnfinit(x^4 - 4*x^2 + 1); bnrinit(K, 2*x)")
sage: bnr.nf_get_pol()
```

3. This sentence is no longer relevant:

```
However, beware that ``pari(L)`` returns an absolute number field::
```

4. This is a significant change:

```
-            sage: two = RealField(256)(2)._pari_()
+            sage: two = pari(2)
```
Instead, you could use

```
two = pari("2.0000000000000000000000000000000000000000000000000000000000000000000000000000")
```

5. This is confusing since the `5/3` is not the fraction 5/3 in Python!

```
sage: pari([-1, 5/3, -8.0]).vecmin()
```
You could keep the original test with quotes: `pari("[1, -5/3, 8.0]").vecmin()`



---

archive/issue_comments_330623.json:
```json
{
    "body": "<a id='comment:24'></a>\n> 1. You forgot to remove one `int()` here:\n> \n> ```\n> sage: int(2) ** pari(-5)\n> ```\n\n\nThis breaks in Sage, unless we positive review #22321. But I wanted to explore that ticket a bit more before setting it to needs review.\n\nOn the other hand, it doesn't hurt Python.\n\n> 2. Why did you remove this?\n> \n> ```\n> sage: bnr = pari(\"K = bnfinit(x^4 - 4*x^2 + 1); bnrinit(K, 2*x)\")\n> sage: bnr.nf_get_pol()\n> ```\n\n\nI did not remove it. I changed it to\n\n```\nsage: x = pari('x')                                                                                                         \nsage: K = (x**4 - 4*x**2 + 1).nfinit()\nsage: K.nf_get_pol()                                                                                                        \n```\n\nwhich seems to be functionally equivalent and more concise. However, you know PARI better than me. If you think that's more appropriate, I can change it to\n \n\n```\nsage: x = pari('x')                                                                                                         \nsage: K = (x**4 - 4*x**2 + 1).bnfinit().bnrinit(2*x)                                                                        \nsage: K.nf_get_pol()                                                                                                        \n```",
    "created_at": "2017-02-10T15:06:57Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330623",
    "user": "https://github.com/defeo"
}
```

<a id='comment:24'></a>
> 1. You forgot to remove one `int()` here:
> 
> ```
> sage: int(2) ** pari(-5)
> ```


This breaks in Sage, unless we positive review #22321. But I wanted to explore that ticket a bit more before setting it to needs review.

On the other hand, it doesn't hurt Python.

> 2. Why did you remove this?
> 
> ```
> sage: bnr = pari("K = bnfinit(x^4 - 4*x^2 + 1); bnrinit(K, 2*x)")
> sage: bnr.nf_get_pol()
> ```


I did not remove it. I changed it to

```
sage: x = pari('x')                                                                                                         
sage: K = (x**4 - 4*x**2 + 1).nfinit()
sage: K.nf_get_pol()                                                                                                        
```

which seems to be functionally equivalent and more concise. However, you know PARI better than me. If you think that's more appropriate, I can change it to
 

```
sage: x = pari('x')                                                                                                         
sage: K = (x**4 - 4*x**2 + 1).bnfinit().bnrinit(2*x)                                                                        
sage: K.nf_get_pol()                                                                                                        
```



---

archive/issue_comments_330624.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22193)\" to \"[u/defeo/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/22193)\".",
    "created_at": "2017-02-10T15:09:00Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330624",
    "user": "https://github.com/defeo"
}
```

**Changing branch** from "[u/jdemeyer/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/22193)" to "[u/defeo/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/22193)".



---

archive/issue_comments_330625.json:
```json
{
    "body": "**Changing commit** from \"[db744ba0f606e1fda2fa7cac94b64baafaaf1aa5](https://github.com/sagemath/sagetrac-mirror/commit/db744ba0f606e1fda2fa7cac94b64baafaaf1aa5)\" to \"[3e4bc1c84add1fc78e8951ae3d531cc59e033c42](https://github.com/sagemath/sagetrac-mirror/commit/3e4bc1c84add1fc78e8951ae3d531cc59e033c42)\".",
    "created_at": "2017-02-10T15:09:27Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330625",
    "user": "https://github.com/defeo"
}
```

**Changing commit** from "[db744ba0f606e1fda2fa7cac94b64baafaaf1aa5](https://github.com/sagemath/sagetrac-mirror/commit/db744ba0f606e1fda2fa7cac94b64baafaaf1aa5)" to "[3e4bc1c84add1fc78e8951ae3d531cc59e033c42](https://github.com/sagemath/sagetrac-mirror/commit/3e4bc1c84add1fc78e8951ae3d531cc59e033c42)".



---

archive/issue_comments_330626.json:
```json
{
    "body": "<a id='comment:26'></a>\nfixed the rest\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e4bc1c84add1fc78e8951ae3d531cc59e033c42\">3e4bc1c</a></td><td><code>Restored some doctests</code></td></tr></table>\n",
    "created_at": "2017-02-10T15:09:27Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330626",
    "user": "https://github.com/defeo"
}
```

<a id='comment:26'></a>
fixed the rest

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e4bc1c84add1fc78e8951ae3d531cc59e033c42">3e4bc1c</a></td><td><code>Restored some doctests</code></td></tr></table>




---

archive/issue_comments_330627.json:
```json
{
    "body": "<a id='comment:27'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0348e00f854a147baa36af3172a57c36878db4c9\">0348e00</a></td><td><code>Implement `__index__` for PARI Gen</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50593d693c55e77ecf18459d8fd3baec047307e5\">50593d6</a></td><td><code>Minor fixes to __index__</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83965bd73676272c17dea40254d69819edc151ce\">83965bd</a></td><td><code>Merge branch 'u/jdemeyer/implement___index___for_pari_gen' of git://trac.sagemath.org/sage into t/22193/22193</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4efdc2d774abfb09d9cb7d8ecee168091356bc5b\">4efdc2d</a></td><td><code>Removed one unnecessary conversion to int in doctest</code></td></tr></table>\n",
    "created_at": "2017-02-10T15:16:52Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330627",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0348e00f854a147baa36af3172a57c36878db4c9">0348e00</a></td><td><code>Implement `__index__` for PARI Gen</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50593d693c55e77ecf18459d8fd3baec047307e5">50593d6</a></td><td><code>Minor fixes to __index__</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83965bd73676272c17dea40254d69819edc151ce">83965bd</a></td><td><code>Merge branch 'u/jdemeyer/implement___index___for_pari_gen' of git://trac.sagemath.org/sage into t/22193/22193</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4efdc2d774abfb09d9cb7d8ecee168091356bc5b">4efdc2d</a></td><td><code>Removed one unnecessary conversion to int in doctest</code></td></tr></table>




---

archive/issue_comments_330628.json:
```json
{
    "body": "**Changing commit** from \"[3e4bc1c84add1fc78e8951ae3d531cc59e033c42](https://github.com/sagemath/sagetrac-mirror/commit/3e4bc1c84add1fc78e8951ae3d531cc59e033c42)\" to \"[4efdc2d774abfb09d9cb7d8ecee168091356bc5b](https://github.com/sagemath/sagetrac-mirror/commit/4efdc2d774abfb09d9cb7d8ecee168091356bc5b)\".",
    "created_at": "2017-02-10T15:16:52Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330628",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3e4bc1c84add1fc78e8951ae3d531cc59e033c42](https://github.com/sagemath/sagetrac-mirror/commit/3e4bc1c84add1fc78e8951ae3d531cc59e033c42)" to "[4efdc2d774abfb09d9cb7d8ecee168091356bc5b](https://github.com/sagemath/sagetrac-mirror/commit/4efdc2d774abfb09d9cb7d8ecee168091356bc5b)".



---

archive/issue_comments_330629.json:
```json
{
    "body": "**Dependencies:** #22319",
    "created_at": "2017-02-10T15:18:08Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330629",
    "user": "https://github.com/defeo"
}
```

**Dependencies:** #22319



---

archive/issue_comments_330630.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [defeo](#comment%3A24):\n> > 1. You forgot to remove one `int()` here:\n> > \n> > ```\n> > sage: int(2) ** pari(-5)\n> > ```\n\n> \n> This breaks in Sage, unless we positive review #22321.\n\n\nWait, no, I got confused: it just needs #22319, which is positive reviewed. Fixed now.",
    "created_at": "2017-02-10T15:18:08Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330630",
    "user": "https://github.com/defeo"
}
```

<a id='comment:28'></a>
Replying to [defeo](#comment%3A24):
> > 1. You forgot to remove one `int()` here:
> > 
> > ```
> > sage: int(2) ** pari(-5)
> > ```

> 
> This breaks in Sage, unless we positive review #22321.


Wait, no, I got confused: it just needs #22319, which is positive reviewed. Fixed now.



---

archive/issue_comments_330631.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [defeo](#comment%3A24):\n> ... which seems to be functionally equivalent\n\n\nBut the `bnrinit()` call is gone, so it's clearly a different test.\n\nWhy not keep the original test? It should work as written in CyPari2.",
    "created_at": "2017-02-10T15:35:02Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330631",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>
Replying to [defeo](#comment%3A24):
> ... which seems to be functionally equivalent


But the `bnrinit()` call is gone, so it's clearly a different test.

Why not keep the original test? It should work as written in CyPari2.



---

archive/issue_comments_330632.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [jdemeyer](#comment%3A29):\n> Replying to [defeo](#comment%3A24):\n> > ... which seems to be functionally equivalent\n  \n> \n> But the `bnrinit()` call is gone, so it's clearly a different test.\n> \n> Why not keep the original test? It should work as written in CyPari2.\n\n\nBecause examples in the documentation should show the proper way to do things, not the ugly one.\n\nI admit I do not understand the reason for the call to `bnrinit()`, maybe you can elucidate.\n\nWe can put the old test in `TESTS::`, however, if you wish to keep it.",
    "created_at": "2017-02-10T15:56:02Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330632",
    "user": "https://github.com/defeo"
}
```

<a id='comment:30'></a>
Replying to [jdemeyer](#comment%3A29):
> Replying to [defeo](#comment%3A24):
> > ... which seems to be functionally equivalent
  
> 
> But the `bnrinit()` call is gone, so it's clearly a different test.
> 
> Why not keep the original test? It should work as written in CyPari2.


Because examples in the documentation should show the proper way to do things, not the ugly one.

I admit I do not understand the reason for the call to `bnrinit()`, maybe you can elucidate.

We can put the old test in `TESTS::`, however, if you wish to keep it.



---

archive/issue_comments_330633.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [defeo](#comment%3A30):\n> I admit I do not understand the reason for the call to `bnrinit()`, maybe you can elucidate.\n\n\nIt shows that `nf_get_pol()` works when given a bnr (the output of `bnrinit()`) as input. So it is an important test which really should not be removed.",
    "created_at": "2017-02-10T16:01:54Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330633",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>
Replying to [defeo](#comment%3A30):
> I admit I do not understand the reason for the call to `bnrinit()`, maybe you can elucidate.


It shows that `nf_get_pol()` works when given a bnr (the output of `bnrinit()`) as input. So it is an important test which really should not be removed.



---

archive/issue_comments_330634.json:
```json
{
    "body": "**Changing commit** from \"[4efdc2d774abfb09d9cb7d8ecee168091356bc5b](https://github.com/sagemath/sagetrac-mirror/commit/4efdc2d774abfb09d9cb7d8ecee168091356bc5b)\" to \"[96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/commit/96ddcd3616f7c18b757a34af4a15241b0696439d)\".",
    "created_at": "2017-02-10T16:05:51Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330634",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4efdc2d774abfb09d9cb7d8ecee168091356bc5b](https://github.com/sagemath/sagetrac-mirror/commit/4efdc2d774abfb09d9cb7d8ecee168091356bc5b)" to "[96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/commit/96ddcd3616f7c18b757a34af4a15241b0696439d)".



---

archive/issue_comments_330635.json:
```json
{
    "body": "<a id='comment:32'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96ddcd3616f7c18b757a34af4a15241b0696439d\">96ddcd3</a></td><td><code>Restored old example with bnr</code></td></tr></table>\n",
    "created_at": "2017-02-10T16:05:51Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330635",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96ddcd3616f7c18b757a34af4a15241b0696439d">96ddcd3</a></td><td><code>Restored old example with bnr</code></td></tr></table>




---

archive/issue_comments_330636.json:
```json
{
    "body": "<a id='comment:33'></a>\nwhat about this?",
    "created_at": "2017-02-10T16:06:16Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330636",
    "user": "https://github.com/defeo"
}
```

<a id='comment:33'></a>
what about this?



---

archive/issue_events_198489.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-02-10T16:06:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198489"
}
```



---

archive/issue_events_198490.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-02-10T16:06:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198490"
}
```



---

archive/issue_events_198491.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-11T09:35:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198491"
}
```



---

archive/issue_events_198492.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-11T09:35:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198492"
}
```



---

archive/issue_comments_330637.json:
```json
{
    "body": "**Changing branch** from \"[u/defeo/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/22193)\" to \"[96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/commit/96ddcd3616f7c18b757a34af4a15241b0696439d)\".",
    "created_at": "2017-02-12T22:08:47Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330637",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/defeo/22193](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/22193)" to "[96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/commit/96ddcd3616f7c18b757a34af4a15241b0696439d)".



---

archive/issue_events_198493.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-12T22:08:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198493"
}
```



---

archive/issue_events_198494.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-12T22:08:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198494"
}
```



---

archive/issue_comments_330638.json:
```json
{
    "body": "<a id='comment:36'></a>\nfails on 32-bit:\n\n```\nsage -t --long src/sage/libs/cypari2/pari_instance.pyx\n3569**********************************************************************\n3570File \"src/sage/libs/cypari2/pari_instance.pyx\", line 112, in sage.libs.cypari2.pari_instance\n3571Failed example:\n3572    pari(float(1.0)).sin(precision=180) - pari(1).sin(precision=180)\n3573Expected:\n3574    5.42101086242752 E-20\n3575Got:\n3576    5.42101086 E-20\n3577**********************************************************************\n35781 item had failures:\n3579   1 of  31 in sage.libs.cypari2.pari_instance\n3580    [151 tests, 1 failure, 0.33 s]\n```",
    "created_at": "2017-02-13T19:11:43Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330638",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:36'></a>
fails on 32-bit:

```
sage -t --long src/sage/libs/cypari2/pari_instance.pyx
3569**********************************************************************
3570File "src/sage/libs/cypari2/pari_instance.pyx", line 112, in sage.libs.cypari2.pari_instance
3571Failed example:
3572    pari(float(1.0)).sin(precision=180) - pari(1).sin(precision=180)
3573Expected:
3574    5.42101086242752 E-20
3575Got:
3576    5.42101086 E-20
3577**********************************************************************
35781 item had failures:
3579   1 of  31 in sage.libs.cypari2.pari_instance
3580    [151 tests, 1 failure, 0.33 s]
```



---

archive/issue_comments_330639.json:
```json
{
    "body": "**Changing commit** from \"[96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/commit/96ddcd3616f7c18b757a34af4a15241b0696439d)\" to \"\".",
    "created_at": "2017-02-13T19:11:43Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330639",
    "user": "https://github.com/vbraun"
}
```

**Changing commit** from "[96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/commit/96ddcd3616f7c18b757a34af4a15241b0696439d)" to "".



---

archive/issue_comments_330640.json:
```json
{
    "body": "**Changing branch** from \"[96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/commit/96ddcd3616f7c18b757a34af4a15241b0696439d)\" to \"[u/defeo/96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/96ddcd3616f7c18b757a34af4a15241b0696439d)\".",
    "created_at": "2017-02-15T11:32:12Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330640",
    "user": "https://github.com/defeo"
}
```

**Changing branch** from "[96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/commit/96ddcd3616f7c18b757a34af4a15241b0696439d)" to "[u/defeo/96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/96ddcd3616f7c18b757a34af4a15241b0696439d)".



---

archive/issue_comments_330641.json:
```json
{
    "body": "<a id='comment:38'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8608c943687254338f3084233fba6b1df27b29fd\">8608c94</a></td><td><code>Made docstrings in libs/cypari2 mostly Sage-independent</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cb08162bfbc1d5b64f8899bd455907e6ddec937\">3cb0816</a></td><td><code>Removed Sage-specific bits from guide to real precision</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db744ba0f606e1fda2fa7cac94b64baafaaf1aa5\">db744ba</a></td><td><code>Add sage.libs.pari to the documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e4bc1c84add1fc78e8951ae3d531cc59e033c42\">3e4bc1c</a></td><td><code>Restored some doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83965bd73676272c17dea40254d69819edc151ce\">83965bd</a></td><td><code>Merge branch 'u/jdemeyer/implement___index___for_pari_gen' of git://trac.sagemath.org/sage into t/22193/22193</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4efdc2d774abfb09d9cb7d8ecee168091356bc5b\">4efdc2d</a></td><td><code>Removed one unnecessary conversion to int in doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96ddcd3616f7c18b757a34af4a15241b0696439d\">96ddcd3</a></td><td><code>Restored old example with bnr</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27251c31be002d282b0b10d9cdef92d07ee1d9c1\">27251c3</a></td><td><code>Fixed doctests failing on 32 bits, and improved docs</code></td></tr></table>\n",
    "created_at": "2017-02-15T11:33:18Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330641",
    "user": "https://github.com/defeo"
}
```

<a id='comment:38'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8608c943687254338f3084233fba6b1df27b29fd">8608c94</a></td><td><code>Made docstrings in libs/cypari2 mostly Sage-independent</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cb08162bfbc1d5b64f8899bd455907e6ddec937">3cb0816</a></td><td><code>Removed Sage-specific bits from guide to real precision</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db744ba0f606e1fda2fa7cac94b64baafaaf1aa5">db744ba</a></td><td><code>Add sage.libs.pari to the documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e4bc1c84add1fc78e8951ae3d531cc59e033c42">3e4bc1c</a></td><td><code>Restored some doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83965bd73676272c17dea40254d69819edc151ce">83965bd</a></td><td><code>Merge branch 'u/jdemeyer/implement___index___for_pari_gen' of git://trac.sagemath.org/sage into t/22193/22193</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4efdc2d774abfb09d9cb7d8ecee168091356bc5b">4efdc2d</a></td><td><code>Removed one unnecessary conversion to int in doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96ddcd3616f7c18b757a34af4a15241b0696439d">96ddcd3</a></td><td><code>Restored old example with bnr</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27251c31be002d282b0b10d9cdef92d07ee1d9c1">27251c3</a></td><td><code>Fixed doctests failing on 32 bits, and improved docs</code></td></tr></table>




---

archive/issue_events_198495.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-02-15T11:33:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198495"
}
```



---

archive/issue_comments_330642.json:
```json
{
    "body": "**Commit:** [27251c31be002d282b0b10d9cdef92d07ee1d9c1](https://github.com/sagemath/sagetrac-mirror/commit/27251c31be002d282b0b10d9cdef92d07ee1d9c1)",
    "created_at": "2017-02-15T11:33:18Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330642",
    "user": "https://github.com/defeo"
}
```

**Commit:** [27251c31be002d282b0b10d9cdef92d07ee1d9c1](https://github.com/sagemath/sagetrac-mirror/commit/27251c31be002d282b0b10d9cdef92d07ee1d9c1)



---

archive/issue_events_198496.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-15T11:57:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198496"
}
```



---

archive/issue_events_198497.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-15T11:57:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198497"
}
```



---

archive/issue_comments_330643.json:
```json
{
    "body": "<a id='comment:39'></a>\nI think  it would be better to keep the spirit of the original examples instead of inventing a pointless example like `pari(float(1.0)).sin(precision=180) - pari(1).sin(precision=180) == 0`. Remember that these doctests are meant as *documentation* and I don't see what you are documenting there...",
    "created_at": "2017-02-15T11:57:10Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330643",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>
I think  it would be better to keep the spirit of the original examples instead of inventing a pointless example like `pari(float(1.0)).sin(precision=180) - pari(1).sin(precision=180) == 0`. Remember that these doctests are meant as *documentation* and I don't see what you are documenting there...



---

archive/issue_comments_330644.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [jdemeyer](#comment%3A39):\n> I think  it would be better to keep the spirit of the original examples instead of inventing a pointless example like `pari(float(1.0)).sin(precision=180) - pari(1).sin(precision=180) == 0`. Remember that these doctests are meant as *documentation* and I don't see what you are documenting there...\n\n\nThe original documentation said\n\n```\nIn the third case, the precision is determined only by the inexact\ninputs and the ``precision`` argument is ignored::\n                                                  \n    sage: pari(1.0).sin(precision=180).sage()\n    0.841470984807896507\n    sage: pari(1.0).sin(precision=40).sage()\n    0.841470984807896507\n    sage: pari(RealField(100).one()).sin().sage()\n    0.84147098480789650665250232163029899962\n```\n\nwhich has no equivalent in CyPari. Would you find this clearer?\n\n```\n    sage: d = pari(float(1.0)).sin(precision=180); d\n    0.8414709848078965067\n    sage: d.bitprecision()                                 \n    64\n```\n\nHowever this test is also architecture dependent.",
    "created_at": "2017-02-15T12:19:59Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330644",
    "user": "https://github.com/defeo"
}
```

<a id='comment:40'></a>
Replying to [jdemeyer](#comment%3A39):
> I think  it would be better to keep the spirit of the original examples instead of inventing a pointless example like `pari(float(1.0)).sin(precision=180) - pari(1).sin(precision=180) == 0`. Remember that these doctests are meant as *documentation* and I don't see what you are documenting there...


The original documentation said

```
In the third case, the precision is determined only by the inexact
inputs and the ``precision`` argument is ignored::
                                                  
    sage: pari(1.0).sin(precision=180).sage()
    0.841470984807896507
    sage: pari(1.0).sin(precision=40).sage()
    0.841470984807896507
    sage: pari(RealField(100).one()).sin().sage()
    0.84147098480789650665250232163029899962
```

which has no equivalent in CyPari. Would you find this clearer?

```
    sage: d = pari(float(1.0)).sin(precision=180); d
    0.8414709848078965067
    sage: d.bitprecision()                                 
    64
```

However this test is also architecture dependent.



---

archive/issue_comments_330645.json:
```json
{
    "body": "<a id='comment:41'></a>\n@jdemeyer ping?\n\nReplying to [defeo](#comment%3A40):\n> Replying to [jdemeyer](#comment%3A39):\n> Would you find this clearer?\n> \n> ```\n>     sage: d = pari(float(1.0)).sin(precision=180); d\n>     0.8414709848078965067\n>     sage: d.bitprecision()                                 \n>     64\n> ```\n> \n> However this test is also architecture dependent.\n",
    "created_at": "2017-02-16T21:07:55Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330645",
    "user": "https://github.com/defeo"
}
```

<a id='comment:41'></a>
@jdemeyer ping?

Replying to [defeo](#comment%3A40):
> Replying to [jdemeyer](#comment%3A39):
> Would you find this clearer?
> 
> ```
>     sage: d = pari(float(1.0)).sin(precision=180); d
>     0.8414709848078965067
>     sage: d.bitprecision()                                 
>     64
> ```
> 
> However this test is also architecture dependent.




---

archive/issue_comments_330646.json:
```json
{
    "body": "<a id='comment:42'></a>\nReplying to [defeo](#comment%3A40):\n> which has no equivalent in CyPari.\n\n\nI disagree with this.\n\nThere are plenty of ways to create high-precision numbers in CyPari:\n\n```\nsage: n = pari(\"1.0000000000000000000000000000\"); n.bitprecision()\n128\nsage: n = pari(\"localbitprec(100); 1.0\"); n.bitprecision()\n128\nsage: n = pari(1.0).bitprecision(100); n.bitprecision()\n128\n```\n\nPersonally, I would prefer the third way.\n\nSo I think that you can mostly keep the old doctests, just replacing `pari(RealField(100)(1.0))` by `pari(1.0).bitprecision(100)`.",
    "created_at": "2017-02-17T13:38:24Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330646",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:42'></a>
Replying to [defeo](#comment%3A40):
> which has no equivalent in CyPari.


I disagree with this.

There are plenty of ways to create high-precision numbers in CyPari:

```
sage: n = pari("1.0000000000000000000000000000"); n.bitprecision()
128
sage: n = pari("localbitprec(100); 1.0"); n.bitprecision()
128
sage: n = pari(1.0).bitprecision(100); n.bitprecision()
128
```

Personally, I would prefer the third way.

So I think that you can mostly keep the old doctests, just replacing `pari(RealField(100)(1.0))` by `pari(1.0).bitprecision(100)`.



---

archive/issue_comments_330647.json:
```json
{
    "body": "<a id='comment:43'></a>\nLooking at the documentation of precision more carefully, I think you should actually restore larger parts of the docs. For example, the first part of \"Internal representation and conversion between Sage and PARI\" and all of \"Output precision for printing\" should be kept for CyPari2.",
    "created_at": "2017-02-17T13:44:17Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330647",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'></a>
Looking at the documentation of precision more carefully, I think you should actually restore larger parts of the docs. For example, the first part of "Internal representation and conversion between Sage and PARI" and all of "Output precision for printing" should be kept for CyPari2.



---

archive/issue_comments_330648.json:
```json
{
    "body": "<a id='comment:44'></a>\nReplying to [jdemeyer](#comment%3A43):\n> For example, the first part of \"Internal representation and conversion between Sage and PARI\" \n\n\nThere's pretty much nothing that can be salvaged from this section: precision in PARI is in multiples of 32 or 64. That's it.\n\n> and all of \"Output precision for printing\" should be kept for CyPari2.\n\n\nI think this section is completely misleading, and the more I try to understand, the less I get it. It talks about \"printing\" precision, `set_real_precision` seems to affect more than printing:\n\n```\nsage: pari.set_real_precision_bits(1000)\nsage: a = pari('Pi')\nsage: \nsage: pari.set_real_precision_bits(10)\nsage: b = pari('Pi')\nsage: a - b\n-2.17 E-19\nsage: pari.set_real_precision_bits(1000)\nsage: a - b\n-2.168404344971008868 E-19\nsage: a - b.bitprecision(1000)\n-5.016557612668332023557327080330757013833665769218359371379100137196517465788293201785191348671769335290615539044941776827464059187151888254971589729806147889444035537705104506961803557118902433406655387152435176621321683472879809085435143307653965138954567335178660639273975085872627541300 E-20\n```\n\nI think this whole part needs to be rewritten, not translated from the old docs. Problem is, I'm not sure I understand what it does.",
    "created_at": "2017-02-17T15:22:38Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330648",
    "user": "https://github.com/defeo"
}
```

<a id='comment:44'></a>
Replying to [jdemeyer](#comment%3A43):
> For example, the first part of "Internal representation and conversion between Sage and PARI" 


There's pretty much nothing that can be salvaged from this section: precision in PARI is in multiples of 32 or 64. That's it.

> and all of "Output precision for printing" should be kept for CyPari2.


I think this section is completely misleading, and the more I try to understand, the less I get it. It talks about "printing" precision, `set_real_precision` seems to affect more than printing:

```
sage: pari.set_real_precision_bits(1000)
sage: a = pari('Pi')
sage: 
sage: pari.set_real_precision_bits(10)
sage: b = pari('Pi')
sage: a - b
-2.17 E-19
sage: pari.set_real_precision_bits(1000)
sage: a - b
-2.168404344971008868 E-19
sage: a - b.bitprecision(1000)
-5.016557612668332023557327080330757013833665769218359371379100137196517465788293201785191348671769335290615539044941776827464059187151888254971589729806147889444035537705104506961803557118902433406655387152435176621321683472879809085435143307653965138954567335178660639273975085872627541300 E-20
```

I think this whole part needs to be rewritten, not translated from the old docs. Problem is, I'm not sure I understand what it does.



---

archive/issue_comments_330649.json:
```json
{
    "body": "<a id='comment:45'></a>\nCan you explain me what you don't understand?\n\nI could certainly try to improve the docs, but then I need to know what's wrong with the current docs.",
    "created_at": "2017-02-17T18:46:19Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330649",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:45'></a>
Can you explain me what you don't understand?

I could certainly try to improve the docs, but then I need to know what's wrong with the current docs.



---

archive/issue_comments_330650.json:
```json
{
    "body": "<a id='comment:46'></a>\nReplying to [defeo](#comment%3A44):\n> There's pretty much nothing that can be salvaged from this section: precision in PARI is in multiples of 32 or 64. That's it.\n\n\n...but that is a very important fact to mention which is certainly more than \"pretty much nothing\".",
    "created_at": "2017-02-17T18:47:33Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330650",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'></a>
Replying to [defeo](#comment%3A44):
> There's pretty much nothing that can be salvaged from this section: precision in PARI is in multiples of 32 or 64. That's it.


...but that is a very important fact to mention which is certainly more than "pretty much nothing".



---

archive/issue_comments_330651.json:
```json
{
    "body": "<a id='comment:47'></a>\nReplying to [defeo](#comment%3A44):\n> I think this section is completely misleading, and the more I try to understand, the less I get it. It talks about \"printing\" precision, `set_real_precision` seems to affect more than printing:\n\n\nI hope that \"completely misleading\" is an exaggeration. The sentence \"The maximum number of digits when printing a PARI real can be set using the methods `Pari.set_real_precision_bits` or `Pari.set_real_precision`\" is correct but it's true that `set_real_precision_bits` affects more than just printing. It also affects precision for numbers parsed using the string interface, which is documented in the \"Input precision for function calls\" section. So I wonder where your confusion comes from.",
    "created_at": "2017-02-17T18:52:22Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330651",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:47'></a>
Replying to [defeo](#comment%3A44):
> I think this section is completely misleading, and the more I try to understand, the less I get it. It talks about "printing" precision, `set_real_precision` seems to affect more than printing:


I hope that "completely misleading" is an exaggeration. The sentence "The maximum number of digits when printing a PARI real can be set using the methods `Pari.set_real_precision_bits` or `Pari.set_real_precision`" is correct but it's true that `set_real_precision_bits` affects more than just printing. It also affects precision for numbers parsed using the string interface, which is documented in the "Input precision for function calls" section. So I wonder where your confusion comes from.



---

archive/issue_comments_330652.json:
```json
{
    "body": "<a id='comment:48'></a>\nSorry, I shouldn't be doing so many things in parallel. I'll try to frame my doubts better.\n\nFor one, I do not understand this:\n\n```\nsage: pi = pari('Pi')\nsage: a = pari(float(1.0))\nsage: pari.set_real_precision(500)\n15\nsage: pi\n3.141592653589793239\nsage: a\n1.0000000000000000000\nsage: pi.bitprecision(1000)\n3.1415926535897932385128089594061862044327426701784133911132812500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\nsage: a.bitprecision(1000)\n1.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\n```\n\nHow does PARI decide what bits to add when calling `bitprecision()`? Why does `Pi` have junk digits before all the zeros, while `1.0` gets only added zeros?",
    "created_at": "2017-02-17T22:12:11Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330652",
    "user": "https://github.com/defeo"
}
```

<a id='comment:48'></a>
Sorry, I shouldn't be doing so many things in parallel. I'll try to frame my doubts better.

For one, I do not understand this:

```
sage: pi = pari('Pi')
sage: a = pari(float(1.0))
sage: pari.set_real_precision(500)
15
sage: pi
3.141592653589793239
sage: a
1.0000000000000000000
sage: pi.bitprecision(1000)
3.1415926535897932385128089594061862044327426701784133911132812500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
sage: a.bitprecision(1000)
1.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
```

How does PARI decide what bits to add when calling `bitprecision()`? Why does `Pi` have junk digits before all the zeros, while `1.0` gets only added zeros?



---

archive/issue_comments_330653.json:
```json
{
    "body": "<a id='comment:49'></a>\nThen, there's the fact that I expect (too optimistically) `Pi` to be a *symbolic* quantity, i.e. that incrementing precision (with `pi.bitprecision(1000)`) would compute correctly the new digits instead of adding random junk.\n\nThat's probably asking too much from PARI, but I got bad habits from Sage :)\n\nThe same behavior from `pari.pi()` surprises me much less: when I see a function call, I understand that's a function supposed to compute \u03c0 up to a fixed precision.\n\nAnyway, not much we can do here: that's the way PARI it is.",
    "created_at": "2017-02-17T22:18:35Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330653",
    "user": "https://github.com/defeo"
}
```

<a id='comment:49'></a>
Then, there's the fact that I expect (too optimistically) `Pi` to be a *symbolic* quantity, i.e. that incrementing precision (with `pi.bitprecision(1000)`) would compute correctly the new digits instead of adding random junk.

That's probably asking too much from PARI, but I got bad habits from Sage :)

The same behavior from `pari.pi()` surprises me much less: when I see a function call, I understand that's a function supposed to compute π up to a fixed precision.

Anyway, not much we can do here: that's the way PARI it is.



---

archive/issue_comments_330654.json:
```json
{
    "body": "<a id='comment:50'></a>\nAnd, finally, when I read\n\n> The maximum number of digits when printing a PARI real can be set using the methods :meth:`Pari.set_real_precision_bits` or :meth:`Pari.set_real_precision`.\n\n\nI understand that's the SOLE role of `set_real_precision`: controlling output precision. Then, when I go further down, I discover that it also controls input precision for strings.\n\nI would find it clearer, if it was stated right away that `set_real_precision` controls input and output precision for strings.",
    "created_at": "2017-02-17T22:21:30Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330654",
    "user": "https://github.com/defeo"
}
```

<a id='comment:50'></a>
And, finally, when I read

> The maximum number of digits when printing a PARI real can be set using the methods :meth:`Pari.set_real_precision_bits` or :meth:`Pari.set_real_precision`.


I understand that's the SOLE role of `set_real_precision`: controlling output precision. Then, when I go further down, I discover that it also controls input precision for strings.

I would find it clearer, if it was stated right away that `set_real_precision` controls input and output precision for strings.



---

archive/issue_comments_330655.json:
```json
{
    "body": "<a id='comment:51'></a>\nReplying to [defeo](#comment%3A48):\n> Sorry, I shouldn't be doing so many things in parallel. I'll try to frame my doubts better.\n> \n> For one, I do not understand this:\n> \n> ```\n> sage: pi = pari('Pi')\n> sage: a = pari(float(1.0))\n> sage: pari.set_real_precision(500)\n> 15\n> sage: pi\n> 3.141592653589793239\n> sage: a\n> 1.0000000000000000000\n> sage: pi.bitprecision(1000)\n> 3.1415926535897932385128089594061862044327426701784133911132812500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\n> sage: a.bitprecision(1000)\n> 1.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000\n> ```\n> \n> How does PARI decide what bits to add when calling `bitprecision()`?\n\n\nIt just adds zero bits.\n\n> Why does `Pi` have junk digits before all the zeros, while `1.0` gets only added zeros?\n\n\nYou should not make any conclusions from the *decimal* representation of the number, in binary it's just zeros.\n\nReplying to [defeo](#comment%3A49):\n> Then, there's the fact that I expect (too optimistically) `Pi` to be a *symbolic* quantity, i.e. that incrementing precision (with `pi.bitprecision(1000)`) would compute correctly the new digits instead of adding random junk.\n\n\nPARI doesn't really do symbolic computations. `Pi` does a computation returning a floating-point approximation of \u03c0.\n\n> The same behavior from `pari.pi()` surprises me much less: when I see a function call, I understand that's a function supposed to compute \u03c0 up to a fixed precision.\n\n\nActually, `Pi` is a function call. This works:\n\n```\ngp> Pi()\n%1 = 3.1415926535897932384626433832795028842\n```\nIt's just that the GP parser turns `Pi` into `Pi()` to improve user-friendliness.",
    "created_at": "2017-02-18T08:51:21Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330655",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:51'></a>
Replying to [defeo](#comment%3A48):
> Sorry, I shouldn't be doing so many things in parallel. I'll try to frame my doubts better.
> 
> For one, I do not understand this:
> 
> ```
> sage: pi = pari('Pi')
> sage: a = pari(float(1.0))
> sage: pari.set_real_precision(500)
> 15
> sage: pi
> 3.141592653589793239
> sage: a
> 1.0000000000000000000
> sage: pi.bitprecision(1000)
> 3.1415926535897932385128089594061862044327426701784133911132812500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> sage: a.bitprecision(1000)
> 1.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
> ```
> 
> How does PARI decide what bits to add when calling `bitprecision()`?


It just adds zero bits.

> Why does `Pi` have junk digits before all the zeros, while `1.0` gets only added zeros?


You should not make any conclusions from the *decimal* representation of the number, in binary it's just zeros.

Replying to [defeo](#comment%3A49):
> Then, there's the fact that I expect (too optimistically) `Pi` to be a *symbolic* quantity, i.e. that incrementing precision (with `pi.bitprecision(1000)`) would compute correctly the new digits instead of adding random junk.


PARI doesn't really do symbolic computations. `Pi` does a computation returning a floating-point approximation of π.

> The same behavior from `pari.pi()` surprises me much less: when I see a function call, I understand that's a function supposed to compute π up to a fixed precision.


Actually, `Pi` is a function call. This works:

```
gp> Pi()
%1 = 3.1415926535897932384626433832795028842
```
It's just that the GP parser turns `Pi` into `Pi()` to improve user-friendliness.



---

archive/issue_comments_330656.json:
```json
{
    "body": "<a id='comment:52'></a>\n> > Why does `Pi` have junk digits before all the zeros, while `1.0` gets only added zeros?\n\n> \n> You should not make any conclusions from the *decimal* representation of the number, in binary it's just zeros.\n\n\nRight. So I think \n\n```\nn = pari(1.0).bitprecision(100)\n```\n\nis giving bad advice to the user: it only gets the intended value by chance, and the doctstring of `bitprecision` does nothing to help the user guess what the result would be.\n\n> It's just that the GP parser turns `Pi` into `Pi()` to improve user-friendliness.\n\n\nI call this user-hateness.",
    "created_at": "2017-02-18T16:27:51Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330656",
    "user": "https://github.com/defeo"
}
```

<a id='comment:52'></a>
> > Why does `Pi` have junk digits before all the zeros, while `1.0` gets only added zeros?

> 
> You should not make any conclusions from the *decimal* representation of the number, in binary it's just zeros.


Right. So I think 

```
n = pari(1.0).bitprecision(100)
```

is giving bad advice to the user: it only gets the intended value by chance, and the doctstring of `bitprecision` does nothing to help the user guess what the result would be.

> It's just that the GP parser turns `Pi` into `Pi()` to improve user-friendliness.


I call this user-hateness.



---

archive/issue_comments_330657.json:
```json
{
    "body": "<a id='comment:53'></a>\nFeel free to complain to the PARI developers for anything that you don't like...",
    "created_at": "2017-02-18T17:43:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330657",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:53'></a>
Feel free to complain to the PARI developers for anything that you don't like...



---

archive/issue_comments_330658.json:
```json
{
    "body": "<a id='comment:54'></a>\nLuca, are you going to work on this, or should I?",
    "created_at": "2017-02-21T07:41:15Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330658",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:54'></a>
Luca, are you going to work on this, or should I?



---

archive/issue_comments_330659.json:
```json
{
    "body": "<a id='comment:55'></a>\nSorry, I was busy teaching. I was meaning to finalize this, but if I don't make it by today, it will have to wait until Fri.\n\nOf course, if you have time to donate to this, feel free to jump in.",
    "created_at": "2017-02-21T10:08:12Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330659",
    "user": "https://github.com/defeo"
}
```

<a id='comment:55'></a>
Sorry, I was busy teaching. I was meaning to finalize this, but if I don't make it by today, it will have to wait until Fri.

Of course, if you have time to donate to this, feel free to jump in.



---

archive/issue_comments_330660.json:
```json
{
    "body": "<a id='comment:56'></a>\nOK, I will try to have a look today.",
    "created_at": "2017-02-22T11:38:56Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330660",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'></a>
OK, I will try to have a look today.



---

archive/issue_comments_330661.json:
```json
{
    "body": "**Changing branch** from \"[u/defeo/96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/96ddcd3616f7c18b757a34af4a15241b0696439d)\" to \"[u/jdemeyer/96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/96ddcd3616f7c18b757a34af4a15241b0696439d)\".",
    "created_at": "2017-02-22T13:02:34Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330661",
    "user": "https://github.com/jdemeyer"
}
```

**Changing branch** from "[u/defeo/96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/96ddcd3616f7c18b757a34af4a15241b0696439d)" to "[u/jdemeyer/96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/96ddcd3616f7c18b757a34af4a15241b0696439d)".



---

archive/issue_comments_330662.json:
```json
{
    "body": "**Changing commit** from \"[27251c31be002d282b0b10d9cdef92d07ee1d9c1](https://github.com/sagemath/sagetrac-mirror/commit/27251c31be002d282b0b10d9cdef92d07ee1d9c1)\" to \"[fb79fd9275b295ac10a3d57f7acff997879f41c6](https://github.com/sagemath/sagetrac-mirror/commit/fb79fd9275b295ac10a3d57f7acff997879f41c6)\".",
    "created_at": "2017-02-22T16:05:45Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330662",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[27251c31be002d282b0b10d9cdef92d07ee1d9c1](https://github.com/sagemath/sagetrac-mirror/commit/27251c31be002d282b0b10d9cdef92d07ee1d9c1)" to "[fb79fd9275b295ac10a3d57f7acff997879f41c6](https://github.com/sagemath/sagetrac-mirror/commit/fb79fd9275b295ac10a3d57f7acff997879f41c6)".



---

archive/issue_comments_330663.json:
```json
{
    "body": "<a id='comment:58'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb79fd9275b295ac10a3d57f7acff997879f41c6\">fb79fd9</a></td><td><code>Update documentation about precision</code></td></tr></table>\n",
    "created_at": "2017-02-22T16:05:45Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330663",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb79fd9275b295ac10a3d57f7acff997879f41c6">fb79fd9</a></td><td><code>Update documentation about precision</code></td></tr></table>




---

archive/issue_events_198498.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-22T16:06:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198498"
}
```



---

archive/issue_events_198499.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-02-22T16:06:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198499"
}
```



---

archive/issue_comments_330664.json:
```json
{
    "body": "<a id='comment:60'></a>\nI hope this helps...",
    "created_at": "2017-02-22T16:06:59Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330664",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:60'></a>
I hope this helps...



---

archive/issue_events_198500.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-02-25T14:22:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198500"
}
```



---

archive/issue_events_198501.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-02-25T14:22:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198501"
}
```



---

archive/issue_comments_330665.json:
```json
{
    "body": "<a id='comment:61'></a>\nSorry for the delay. It is clearer now, thanks for the patch.\n\nAre you sure the doctests pass on 32-bits? This, for example:\n\n```\nsage: c = pari(1).sin(); c\n0.841470984807897\nsage: c.bitprecision()\n64\n```",
    "created_at": "2017-02-25T14:22:53Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330665",
    "user": "https://github.com/defeo"
}
```

<a id='comment:61'></a>
Sorry for the delay. It is clearer now, thanks for the patch.

Are you sure the doctests pass on 32-bits? This, for example:

```
sage: c = pari(1).sin(); c
0.841470984807897
sage: c.bitprecision()
64
```



---

archive/issue_comments_330666.json:
```json
{
    "body": "<a id='comment:62'></a>\n> Are you sure the doctests pass on 32-bits? This, for example:\n> \n> ```\n> sage: c = pari(1).sin(); c\n> 0.841470984807897\n> sage: c.bitprecision()\n> 64\n> ```\n\n\nOk, went again through the examples, and this example is obviously not a problem. The only problematic tests are those that do `pari(1.0)`: that's not arch dependent in Sage (because 1.0 is a real), but it is in Python.\n\nAnyway, they are ok for now. We shall see when we bring this to cypari.",
    "created_at": "2017-02-26T22:20:47Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330666",
    "user": "https://github.com/defeo"
}
```

<a id='comment:62'></a>
> Are you sure the doctests pass on 32-bits? This, for example:
> 
> ```
> sage: c = pari(1).sin(); c
> 0.841470984807897
> sage: c.bitprecision()
> 64
> ```


Ok, went again through the examples, and this example is obviously not a problem. The only problematic tests are those that do `pari(1.0)`: that's not arch dependent in Sage (because 1.0 is a real), but it is in Python.

Anyway, they are ok for now. We shall see when we bring this to cypari.



---

archive/issue_comments_330667.json:
```json
{
    "body": "<a id='comment:63'></a>\nReplying to [defeo](#comment%3A62):\n> The only problematic tests are those that do `pari(1.0)`: that's not arch dependent in Sage (because 1.0 is a real), but it is in Python.\n\n\nNo, Python floats are the same on 32-bit and 64-bit. It's true that certain *computations* involving floats might give different results. But for a conversion, the results should be the same on 32-bit and 64-bit.",
    "created_at": "2017-02-27T07:03:18Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330667",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:63'></a>
Replying to [defeo](#comment%3A62):
> The only problematic tests are those that do `pari(1.0)`: that's not arch dependent in Sage (because 1.0 is a real), but it is in Python.


No, Python floats are the same on 32-bit and 64-bit. It's true that certain *computations* involving floats might give different results. But for a conversion, the results should be the same on 32-bit and 64-bit.



---

archive/issue_comments_330668.json:
```json
{
    "body": "<a id='comment:64'></a>\n\n```\nsage -t --long src/sage/libs/cypari2/pari_instance.pyx\n**********************************************************************\nFile \"src/sage/libs/cypari2/pari_instance.pyx\", line 91, in sage.libs.cypari2.pari_instance\nFailed example:\n    pari(\"Pi\") - p\nExpected:\n    1.22514845490862 E-16\nGot:\n    1.225148455 E-16\n**********************************************************************\nFile \"src/sage/libs/cypari2/pari_instance.pyx\", line 94, in sage.libs.cypari2.pari_instance\nFailed example:\n    pari(\"Pi\") - p\nExpected:\n    1.22514845490862 E-16\nGot:\n    1.225148455 E-16\n**********************************************************************\n1 item had failures:\n   2 of  54 in sage.libs.cypari2.pari_instance\n    [174 tests, 2 failures, 0.22 s]\n```",
    "created_at": "2017-02-28T23:23:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330668",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:64'></a>

```
sage -t --long src/sage/libs/cypari2/pari_instance.pyx
**********************************************************************
File "src/sage/libs/cypari2/pari_instance.pyx", line 91, in sage.libs.cypari2.pari_instance
Failed example:
    pari("Pi") - p
Expected:
    1.22514845490862 E-16
Got:
    1.225148455 E-16
**********************************************************************
File "src/sage/libs/cypari2/pari_instance.pyx", line 94, in sage.libs.cypari2.pari_instance
Failed example:
    pari("Pi") - p
Expected:
    1.22514845490862 E-16
Got:
    1.225148455 E-16
**********************************************************************
1 item had failures:
   2 of  54 in sage.libs.cypari2.pari_instance
    [174 tests, 2 failures, 0.22 s]
```



---

archive/issue_events_198502.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-28T23:23:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198502"
}
```



---

archive/issue_events_198503.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-28T23:23:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198503"
}
```



---

archive/issue_comments_330669.json:
```json
{
    "body": "<a id='comment:65'></a>\nSorry for that.",
    "created_at": "2017-03-01T07:28:29Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330669",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:65'></a>
Sorry for that.



---

archive/issue_comments_330670.json:
```json
{
    "body": "<a id='comment:66'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/128030ad25fc7eb86c3995cab3a399d672c5e6a4\">128030a</a></td><td><code>Less digits are shown on 32-bit</code></td></tr></table>\n",
    "created_at": "2017-03-01T07:30:05Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330670",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/128030ad25fc7eb86c3995cab3a399d672c5e6a4">128030a</a></td><td><code>Less digits are shown on 32-bit</code></td></tr></table>




---

archive/issue_comments_330671.json:
```json
{
    "body": "**Changing commit** from \"[fb79fd9275b295ac10a3d57f7acff997879f41c6](https://github.com/sagemath/sagetrac-mirror/commit/fb79fd9275b295ac10a3d57f7acff997879f41c6)\" to \"[128030ad25fc7eb86c3995cab3a399d672c5e6a4](https://github.com/sagemath/sagetrac-mirror/commit/128030ad25fc7eb86c3995cab3a399d672c5e6a4)\".",
    "created_at": "2017-03-01T07:30:05Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330671",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fb79fd9275b295ac10a3d57f7acff997879f41c6](https://github.com/sagemath/sagetrac-mirror/commit/fb79fd9275b295ac10a3d57f7acff997879f41c6)" to "[128030ad25fc7eb86c3995cab3a399d672c5e6a4](https://github.com/sagemath/sagetrac-mirror/commit/128030ad25fc7eb86c3995cab3a399d672c5e6a4)".



---

archive/issue_events_198504.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-01T07:36:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198504"
}
```



---

archive/issue_events_198505.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-01T07:36:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198505"
}
```



---

archive/issue_events_198506.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-01T12:35:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198506"
}
```



---

archive/issue_events_198507.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-01T12:35:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198507"
}
```



---

archive/issue_comments_330672.json:
```json
{
    "body": "<a id='comment:68'></a>\nThis fixes the 32-bit tests.",
    "created_at": "2017-03-01T12:35:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330672",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:68'></a>
This fixes the 32-bit tests.



---

archive/issue_comments_330673.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/96ddcd3616f7c18b757a34af4a15241b0696439d)\" to \"[128030ad25fc7eb86c3995cab3a399d672c5e6a4](https://github.com/sagemath/sagetrac-mirror/commit/128030ad25fc7eb86c3995cab3a399d672c5e6a4)\".",
    "created_at": "2017-03-02T17:43:50Z",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22193#issuecomment-330673",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/96ddcd3616f7c18b757a34af4a15241b0696439d](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/96ddcd3616f7c18b757a34af4a15241b0696439d)" to "[128030ad25fc7eb86c3995cab3a399d672c5e6a4](https://github.com/sagemath/sagetrac-mirror/commit/128030ad25fc7eb86c3995cab3a399d672c5e6a4)".



---

archive/issue_events_198508.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-02T17:43:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198508"
}
```



---

archive/issue_events_198509.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3d5fc3ffc2e5e55012054bf1e2721b6a34adb46f",
    "created_at": "2017-03-02T17:43:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22193",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22193#event-198509"
}
```
