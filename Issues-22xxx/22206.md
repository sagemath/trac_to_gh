# Issue 22206: Generation of strong orientations of a graph

archive/issues_021969.json:
```json
{
    "body": "Keywords: graphs, orientations\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/22206\n\n",
    "closed_at": "2017-02-21T14:35:12Z",
    "created_at": "2017-01-19T10:26:20Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Generation of strong orientations of a graph",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22206",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```
Keywords: graphs, orientations



Issue created by migration from https://trac.sagemath.org/ticket/22206





---

archive/issue_comments_305076.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-19T10:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305076",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305077.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2017-01-19T10:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305077",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_305078.json:
```json
{
    "body": "Changing keywords from \"\" to \"graphs, orientations\".",
    "created_at": "2017-01-19T10:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305078",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```

Changing keywords from "" to "graphs, orientations".



---

archive/issue_comments_305079.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to graph theory.",
    "created_at": "2017-01-19T10:53:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305079",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```

Changing component from PLEASE CHANGE to graph theory.



---

archive/issue_comments_305080.json:
```json
{
    "body": "Hello, welcome !\n\n* always have a blankline after a line ending with `::`\n\n* every function needs to have doctests",
    "created_at": "2017-01-19T11:02:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305080",
    "user": "https://github.com/fchapoton"
}
```

Hello, welcome !

* always have a blankline after a line ending with `::`

* every function needs to have doctests



---

archive/issue_comments_305081.json:
```json
{
    "body": "Hello, thanks for pointing out. I submit the corrected version. For inner functions, there must be also a doctest or a simple description is enough?\n\nReplying to [comment:5 chapoton]:\n> Hello, welcome !\n> \n> * always have a blankline after a line ending with `::`\n> \n> * every function needs to have doctests\n \n>",
    "created_at": "2017-01-19T13:00:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305081",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```

Hello, thanks for pointing out. I submit the corrected version. For inner functions, there must be also a doctest or a simple description is enough?

Replying to [comment:5 chapoton]:
> Hello, welcome !
> 
> * always have a blankline after a line ending with `::`
> 
> * every function needs to have doctests
 
>



---

archive/issue_comments_305082.json:
```json
{
    "body": "Replying to [comment:6 pvalicov]:\n> Hello, thanks for pointing out. I submit the corrected version. For inner functions, there must be also a doctest or a simple description is enough?\n\n\ndoctests for every function that is not inside a function, as explained here :\nhttp://doc.sagemath.org/html/en/developer/coding_basics.html\n\n> \n> Replying to [comment:5 chapoton]:\n> > Hello, welcome !\n> > \n> > * always have a blankline after a line ending with `::`\n> > \n> > * every function needs to have doctests\n \n> >",
    "created_at": "2017-01-19T13:02:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305082",
    "user": "https://github.com/fchapoton"
}
```

Replying to [comment:6 pvalicov]:
> Hello, thanks for pointing out. I submit the corrected version. For inner functions, there must be also a doctest or a simple description is enough?


doctests for every function that is not inside a function, as explained here :
http://doc.sagemath.org/html/en/developer/coding_basics.html

> 
> Replying to [comment:5 chapoton]:
> > Hello, welcome !
> > 
> > * always have a blankline after a line ending with `::`
> > 
> > * every function needs to have doctests
 
> >



---

archive/issue_comments_305083.json:
```json
{
    "body": "see the patchbot report (colored icon at top right) for the coverage: 2 functions are missing documentation\n\npatchbot also says: do not use xrange, but range (if you want an iterator, use `from six.moves import range`)",
    "created_at": "2017-01-19T14:54:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305083",
    "user": "https://github.com/fchapoton"
}
```

see the patchbot report (colored icon at top right) for the coverage: 2 functions are missing documentation

patchbot also says: do not use xrange, but range (if you want an iterator, use `from six.moves import range`)



---

archive/issue_comments_305084.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-19T15:19:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305084",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305085.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-19T15:26:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305085",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305086.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-19T15:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305086",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305087.json:
```json
{
    "body": "- the main function still has no documentation\n\n- when calling a reference, you must write `[CGMRV16]_` with an underscore",
    "created_at": "2017-01-21T17:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305087",
    "user": "https://github.com/fchapoton"
}
```

- the main function still has no documentation

- when calling a reference, you must write `[CGMRV16]_` with an underscore



---

archive/issue_comments_305088.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-23T10:22:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305088",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305089.json:
```json
{
    "body": "Dear Kolja and Petru,\n\na few comments on your code:\n- ticket #22247 should allow you to avoid a (costly) call to `self.edge_connectivity()`\n- `Dg = DiGraph([self.vertices(), self.edges()])` could be simply `Dg = DiGraph(self)`\n- when you do `treeEdges = [(edge[0],edge[1]) for edge in self.edges() if edge in te]`, all edges in `te` are in `self`. So to remove the labels, you can do `treeEdges = [(u,v) for u,v,_ in te]`\n- You can initialize `existingAedges` directly using `existingAedges = [0]*len(A)`\n- avoid `bitChanged >>= 1; bit += 1;` and put each instruction in a separate line\n- use `yield Dg.copy()`. Indeed, the instruction `yield Dg` will in fact return a pointer. Since `Dg` is modified in your method, what you have returned will also be modified. \n\nBest,\n\nDavid.",
    "created_at": "2017-01-24T18:04:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305089",
    "user": "https://github.com/dcoudert"
}
```

Dear Kolja and Petru,

a few comments on your code:
- ticket #22247 should allow you to avoid a (costly) call to `self.edge_connectivity()`
- `Dg = DiGraph([self.vertices(), self.edges()])` could be simply `Dg = DiGraph(self)`
- when you do `treeEdges = [(edge[0],edge[1]) for edge in self.edges() if edge in te]`, all edges in `te` are in `self`. So to remove the labels, you can do `treeEdges = [(u,v) for u,v,_ in te]`
- You can initialize `existingAedges` directly using `existingAedges = [0]*len(A)`
- avoid `bitChanged >>= 1; bit += 1;` and put each instruction in a separate line
- use `yield Dg.copy()`. Indeed, the instruction `yield Dg` will in fact return a pointer. Since `Dg` is modified in your method, what you have returned will also be modified. 

Best,

David.



---

archive/issue_comments_305090.json:
```json
{
    "body": "Ticket #22254 which improves the computation of bridges might also be useful. The proposed implementation avoids a call to `strong_orientation`...",
    "created_at": "2017-01-25T12:39:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305090",
    "user": "https://github.com/dcoudert"
}
```

Ticket #22254 which improves the computation of bridges might also be useful. The proposed implementation avoids a call to `strong_orientation`...



---

archive/issue_comments_305091.json:
```json
{
    "body": "Hi David,\n\n Thanks for the comments. Cannot use `Dg = DiGraph(self)` because it will doubly orient all the edges of self, and we want Dg to be a simple directed graph.\nFor ticket #22247 can I already use the code even if it was not validated yet in sage ?\n\nPetru",
    "created_at": "2017-01-25T16:56:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305091",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```

Hi David,

 Thanks for the comments. Cannot use `Dg = DiGraph(self)` because it will doubly orient all the edges of self, and we want Dg to be a simple directed graph.
For ticket #22247 can I already use the code even if it was not validated yet in sage ?

Petru



---

archive/issue_comments_305092.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-25T17:03:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305092",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305093.json:
```json
{
    "body": ">  Thanks for the comments. Cannot use `Dg = DiGraph(self)` because it will doubly orient all the edges of self, and we want Dg to be a simple directed graph.\n\nRight, I forgot that issue ;)\n\n> For ticket #22247 can I already use the code even if it was not validated yet in sage ?\n\nI'm not a git guru, but I think you can safely rebase your ticket on top of #22247 (or #22254). Don't forget to indicate the dependency.",
    "created_at": "2017-01-25T17:04:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305093",
    "user": "https://github.com/dcoudert"
}
```

>  Thanks for the comments. Cannot use `Dg = DiGraph(self)` because it will doubly orient all the edges of self, and we want Dg to be a simple directed graph.

Right, I forgot that issue ;)

> For ticket #22247 can I already use the code even if it was not validated yet in sage ?

I'm not a git guru, but I think you can safely rebase your ticket on top of #22247 (or #22254). Don't forget to indicate the dependency.



---

archive/issue_comments_305094.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-25T18:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305094",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305095.json:
```json
{
    "body": "I don't know how to ensure that the last (minor) modifications made on #22247 will be taken into account in this patch. Hope someone will be able to answer that question.\n\nYou should set this ticket to `needs_review` if belive it is ready for review.",
    "created_at": "2017-02-08T17:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305095",
    "user": "https://github.com/dcoudert"
}
```

I don't know how to ensure that the last (minor) modifications made on #22247 will be taken into account in this patch. Hope someone will be able to answer that question.

You should set this ticket to `needs_review` if belive it is ready for review.



---

archive/issue_comments_305096.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-02-08T18:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305096",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_305097.json:
```json
{
    "body": "some minor comments:\n* Add a space in each method between the one line description of the method and the long description, e.g., after `Returns an iterator over all strong orientations of self.`\n* Ensure that comments are in 80 columns mode (sorry for that).\n* `Dg = DiGraph([self.vertices(), self.edges()], pos=self.get_pos())` to keep the position of nodes.\n* `Dg.delete_edge((u,v))` could be `Dg.delete_edge(u,v)`\n* indentation for `yield orientation` is excessive. should be 4 spaces",
    "created_at": "2017-02-09T07:44:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305097",
    "user": "https://github.com/dcoudert"
}
```

some minor comments:
* Add a space in each method between the one line description of the method and the long description, e.g., after `Returns an iterator over all strong orientations of self.`
* Ensure that comments are in 80 columns mode (sorry for that).
* `Dg = DiGraph([self.vertices(), self.edges()], pos=self.get_pos())` to keep the position of nodes.
* `Dg.delete_edge((u,v))` could be `Dg.delete_edge(u,v)`
* indentation for `yield orientation` is excessive. should be 4 spaces



---

archive/issue_comments_305098.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-09T10:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305098",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305099.json:
```json
{
    "body": "* Line `an undirected graph. It is an adaptation of the algorithm published in [CGMRV16]_.` has length 82 and so must be cut. Sorry.\n* There is an empty line after `def all_strong_orientations_iterator(self):`. Remove it. Otherwise we cannot build the documentation (use `./sage -docbuild reference/graphs html` to rebuilt only that part of the doc).\n* Line `# if the graph has a bridge or is disconnected, then it cannot be strongly oriented` is too long\n\nWe have a method `strong_orientation` returning a random strong orientation, and method `all_strong_orientations_iterator`. Wouldn't it be better to rename your method `strong_orientations_iterator` ?",
    "created_at": "2017-02-09T14:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305099",
    "user": "https://github.com/dcoudert"
}
```

* Line `an undirected graph. It is an adaptation of the algorithm published in [CGMRV16]_.` has length 82 and so must be cut. Sorry.
* There is an empty line after `def all_strong_orientations_iterator(self):`. Remove it. Otherwise we cannot build the documentation (use `./sage -docbuild reference/graphs html` to rebuilt only that part of the doc).
* Line `# if the graph has a bridge or is disconnected, then it cannot be strongly oriented` is too long

We have a method `strong_orientation` returning a random strong orientation, and method `all_strong_orientations_iterator`. Wouldn't it be better to rename your method `strong_orientations_iterator` ?



---

archive/issue_comments_305100.json:
```json
{
    "body": "You could also rebase on 7.6.beta2",
    "created_at": "2017-02-09T14:27:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305100",
    "user": "https://github.com/dcoudert"
}
```

You could also rebase on 7.6.beta2



---

archive/issue_comments_305101.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-09T16:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305101",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305102.json:
```json
{
    "body": "I discovered some limitations that must be fixed and may be documented (at least to recall that the number of orientations could be huge).\n\n1- I don't know what's going on here. I tried many times and sometimes its working well, sometimes not. I have put the graph6 strings of the graphs so that you can try it and track&solve the issue.\n\n```\nsage: G = graphs.RandomBarabasiAlbert(30, 2)\nsage: G.graph6_string()\n']ZgZCOWg@OD?c?G@?oA?C_?D??SO?@?A??_AC??OO?A???o?G?OG@??A?A??P???A_???CC???'\nsage: %time D = next(G.strong_orientations_iterator())\nCPU times: user 1.39 s, sys: 663 ms, total: 2.06 s\nWall time: 2.37 s\nsage:\nsage: G = graphs.RandomBarabasiAlbert(30, 2)\nsage: G.graph6_string()\n']\\\\cl@_W_`_S?GA?KOC?c?GO?P?@C???`AA??C?G?_@??A?OC_??_???aO???C??@_??A???o??'\nsage: %time D = next(G.strong_orientations_iterator())\n---------------------------------------------------------------------------\nStopIteration                             Traceback (most recent call last)\n...\nStopIteration: \n```\n\n2- Here we have too big numbers, but it can be easily fixed replacing the `for i in range(0, 2**(len(A)-1))` loop with a while loop. \n\n```\nsage: G = graphs.RandomBarabasiAlbert(100, 2)\nsage: %time D = next(G.strong_orientations_iterator())\n---------------------------------------------------------------------------\nOverflowError                             Traceback (most recent call last)\n...\n/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/strong_orientations_generator.pyc in strong_orientations_iterator(self)\n    131     # of G by orienting properly the tree-edges\n    132     previousWord = 0\n--> 133     for i in range(0, 2**(len(A)-1)):\n    134         word = (i >> 1) ^ i\n    135         bitChanged = word ^ previousWord\n\nOverflowError: range() result has too many items\nsage: G.graph6_string()\n'b\\\\MOp_WGS_D?g?a?B?C?O?Q?H??OO?_?CGC?c??@A??A?@??OG?G_????G?G???P?OO??_@???A??@@O?????@?_??C@???P?????'\n```\n\n3- Concerning the `_all_strong_orientations_of_a_mixed_graph` method (you should remove the `all`), I don't know how many number of recursive calls can be done before reaching the stack limit. So we might have a problem here too. This will certainly appear after you have fixed the previous issues.",
    "created_at": "2017-02-09T18:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305102",
    "user": "https://github.com/dcoudert"
}
```

I discovered some limitations that must be fixed and may be documented (at least to recall that the number of orientations could be huge).

1- I don't know what's going on here. I tried many times and sometimes its working well, sometimes not. I have put the graph6 strings of the graphs so that you can try it and track&solve the issue.

```
sage: G = graphs.RandomBarabasiAlbert(30, 2)
sage: G.graph6_string()
']ZgZCOWg@OD?c?G@?oA?C_?D??SO?@?A??_AC??OO?A???o?G?OG@??A?A??P???A_???CC???'
sage: %time D = next(G.strong_orientations_iterator())
CPU times: user 1.39 s, sys: 663 ms, total: 2.06 s
Wall time: 2.37 s
sage:
sage: G = graphs.RandomBarabasiAlbert(30, 2)
sage: G.graph6_string()
']\\cl@_W_`_S?GA?KOC?c?GO?P?@C???`AA??C?G?_@??A?OC_??_???aO???C??@_??A???o??'
sage: %time D = next(G.strong_orientations_iterator())
---------------------------------------------------------------------------
StopIteration                             Traceback (most recent call last)
...
StopIteration: 
```

2- Here we have too big numbers, but it can be easily fixed replacing the `for i in range(0, 2**(len(A)-1))` loop with a while loop. 

```
sage: G = graphs.RandomBarabasiAlbert(100, 2)
sage: %time D = next(G.strong_orientations_iterator())
---------------------------------------------------------------------------
OverflowError                             Traceback (most recent call last)
...
/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/strong_orientations_generator.pyc in strong_orientations_iterator(self)
    131     # of G by orienting properly the tree-edges
    132     previousWord = 0
--> 133     for i in range(0, 2**(len(A)-1)):
    134         word = (i >> 1) ^ i
    135         bitChanged = word ^ previousWord

OverflowError: range() result has too many items
sage: G.graph6_string()
'b\\MOp_WGS_D?g?a?B?C?O?Q?H??OO?_?CGC?c??@A??A?@??OG?G_????G?G???P?OO??_@???A??@@O?????@?_??C@???P?????'
```

3- Concerning the `_all_strong_orientations_of_a_mixed_graph` method (you should remove the `all`), I don't know how many number of recursive calls can be done before reaching the stack limit. So we might have a problem here too. This will certainly appear after you have fixed the previous issues.



---

archive/issue_comments_305103.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-02-09T18:25:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305103",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_305104.json:
```json
{
    "body": "I changed the for loop into a while loop, as well as the name of the helper method (will submit it). The second and the third graphs in your tests are not biconnected, so there is no strong orientation possible for these graphs. That's why the next() method of the iterator throws an exception (which is the normal behaviour).\nReplying to [comment:27 dcoudert]:\n> I discovered some limitations that must be fixed and may be documented (at least to recall that the number of orientations could be huge).\n> \n> 1- I don't know what's going on here. I tried many times and sometimes its working well, sometimes not. I have put the graph6 strings of the graphs so that you can try it and track&solve the issue.\n> \n> ```\n> sage: G = graphs.RandomBarabasiAlbert(30, 2)\n> sage: G.graph6_string()\n> ']ZgZCOWg@OD?c?G@?oA?C_?D??SO?@?A??_AC??OO?A???o?G?OG@??A?A??P???A_???CC???'\n> sage: %time D = next(G.strong_orientations_iterator())\n> CPU times: user 1.39 s, sys: 663 ms, total: 2.06 s\n> Wall time: 2.37 s\n> sage:\n> sage: G = graphs.RandomBarabasiAlbert(30, 2)\n> sage: G.graph6_string()\n> ']\\\\cl@_W_`_S?GA?KOC?c?GO?P?@C???`AA??C?G?_@??A?OC_??_???aO???C??@_??A???o??'\n> sage: %time D = next(G.strong_orientations_iterator())\n> ---------------------------------------------------------------------------\n> StopIteration                             Traceback (most recent call last)\n> ...\n> StopIteration: \n> ```\n> \n> 2- Here we have too big numbers, but it can be easily fixed replacing the `for i in range(0, 2**(len(A)-1))` loop with a while loop. \n> \n> ```\n> sage: G = graphs.RandomBarabasiAlbert(100, 2)\n> sage: %time D = next(G.strong_orientations_iterator())\n> ---------------------------------------------------------------------------\n> OverflowError                             Traceback (most recent call last)\n> ...\n> /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/strong_orientations_generator.pyc in strong_orientations_iterator(self)\n>     131     # of G by orienting properly the tree-edges\n>     132     previousWord = 0\n> --> 133     for i in range(0, 2**(len(A)-1)):\n>     134         word = (i >> 1) ^ i\n>     135         bitChanged = word ^ previousWord\n> \n> OverflowError: range() result has too many items\n> sage: G.graph6_string()\n> 'b\\\\MOp_WGS_D?g?a?B?C?O?Q?H??OO?_?CGC?c??@A??A?@??OG?G_????G?G???P?OO??_@???A??@@O?????@?_??C@???P?????'\n> ```\n> \n> 3- Concerning the `_all_strong_orientations_of_a_mixed_graph` method (you should remove the `all`), I don't know how many number of recursive calls can be done before reaching the stack limit. So we might have a problem here too. This will certainly appear after you have fixed the previous issues.",
    "created_at": "2017-02-10T10:58:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305104",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```

I changed the for loop into a while loop, as well as the name of the helper method (will submit it). The second and the third graphs in your tests are not biconnected, so there is no strong orientation possible for these graphs. That's why the next() method of the iterator throws an exception (which is the normal behaviour).
Replying to [comment:27 dcoudert]:
> I discovered some limitations that must be fixed and may be documented (at least to recall that the number of orientations could be huge).
> 
> 1- I don't know what's going on here. I tried many times and sometimes its working well, sometimes not. I have put the graph6 strings of the graphs so that you can try it and track&solve the issue.
> 
> ```
> sage: G = graphs.RandomBarabasiAlbert(30, 2)
> sage: G.graph6_string()
> ']ZgZCOWg@OD?c?G@?oA?C_?D??SO?@?A??_AC??OO?A???o?G?OG@??A?A??P???A_???CC???'
> sage: %time D = next(G.strong_orientations_iterator())
> CPU times: user 1.39 s, sys: 663 ms, total: 2.06 s
> Wall time: 2.37 s
> sage:
> sage: G = graphs.RandomBarabasiAlbert(30, 2)
> sage: G.graph6_string()
> ']\\cl@_W_`_S?GA?KOC?c?GO?P?@C???`AA??C?G?_@??A?OC_??_???aO???C??@_??A???o??'
> sage: %time D = next(G.strong_orientations_iterator())
> ---------------------------------------------------------------------------
> StopIteration                             Traceback (most recent call last)
> ...
> StopIteration: 
> ```
> 
> 2- Here we have too big numbers, but it can be easily fixed replacing the `for i in range(0, 2**(len(A)-1))` loop with a while loop. 
> 
> ```
> sage: G = graphs.RandomBarabasiAlbert(100, 2)
> sage: %time D = next(G.strong_orientations_iterator())
> ---------------------------------------------------------------------------
> OverflowError                             Traceback (most recent call last)
> ...
> /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/strong_orientations_generator.pyc in strong_orientations_iterator(self)
>     131     # of G by orienting properly the tree-edges
>     132     previousWord = 0
> --> 133     for i in range(0, 2**(len(A)-1)):
>     134         word = (i >> 1) ^ i
>     135         bitChanged = word ^ previousWord
> 
> OverflowError: range() result has too many items
> sage: G.graph6_string()
> 'b\\MOp_WGS_D?g?a?B?C?O?Q?H??OO?_?CGC?c??@A??A?@??OG?G_????G?G???P?OO??_@???A??@@O?????@?_??C@???P?????'
> ```
> 
> 3- Concerning the `_all_strong_orientations_of_a_mixed_graph` method (you should remove the `all`), I don't know how many number of recursive calls can be done before reaching the stack limit. So we might have a problem here too. This will certainly appear after you have fixed the previous issues.



---

archive/issue_comments_305105.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-10T11:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305105",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305106.json:
```json
{
    "body": "Replying to [comment:28 pvalicov]:\n> I changed the for loop into a while loop, as well as the name of the helper method (will submit it). \n> The second and the third graphs in your tests are not biconnected, so there is no strong orientation possible for these graphs. That's why the next() method of the iterator throws an exception (which is the normal behaviour).\n\nRight, first time I realize that the BA generator could return graphs that are not  biconnected.\n\n\n> > 3- Concerning the `_all_strong_orientations_of_a_mixed_graph` method (you should remove the `all`), I don't know how many number of recursive calls can be done before reaching the stack limit. So we might have a problem here too. This will certainly appear after you have fixed the previous issues.\n\n\nSo far no stackoverflow error, but slow on large graphs. This was expected.\n\n```\nsage: G = graphs.RandomBarabasiAlbert(100, 2)\nsage: %time D = next(G.strong_orientations_iterator())\nCPU times: user 81.3 ms, sys: 11.8 ms, total: 93.1 ms\nWall time: 84.6 ms\nsage: G = graphs.RandomBarabasiAlbert(1000, 2)\nsage: %time D = next(G.strong_orientations_iterator())\nCPU times: user 1min, sys: 364 ms, total: 1min\nWall time: 1min 1s\nsage: G = graphs.RandomBarabasiAlbert(2000, 2)\nsage: %time D = next(G.strong_orientations_iterator())\nCPU times: user 7min 53s, sys: 3.85 s, total: 7min 57s\nWall time: 8min 4s\n```\n\nThe patch passes all tests on `src/sage/graphs/` but I have an issue with the documentation. I tried `make doc-clean && make` and got \n\n```\n[dochtml] [graphs   ] reading sources... [100%] sage/graphs/weakly_chordal\n[dochtml] [graphs   ] /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py:docstring of sage.graphs.graph.Graph.topological_minor:0: WARNING: Literal block expected; none found.\n[dochtml] Error building the documentation.\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/Users/dcoudert/sage/local/lib/python/runpy.py\", line 174, in _run_module_as_main\n[dochtml]     \"__main__\", fname, loader, pkg_name)\n[dochtml]   File \"/Users/dcoudert/sage/local/lib/python/runpy.py\", line 72, in _run_code\n[dochtml]     exec code in run_globals\n[dochtml]   File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 1667, in main\n[dochtml]     builder()\n[dochtml]   File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 316, in _wrapper\n[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n[dochtml]   File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 510, in _wrapper\n[dochtml]     build_many(build_ref_doc, L)\n[dochtml]   File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 252, in build_many\n[dochtml]     ret = x.get(99999)\n[dochtml]   File \"/Users/dcoudert/sage/local/lib/python/multiprocessing/pool.py\", line 567, in get\n[dochtml]     raise self._value\n[dochtml] OSError: [graphs   ] /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py:docstring of sage.graphs.graph.Graph.topological_minor:0: WARNING: Literal block expected; none found.\n[dochtml] \n```\nAre you able to build the doc ? may be the problem comes from something else...",
    "created_at": "2017-02-10T16:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305106",
    "user": "https://github.com/dcoudert"
}
```

Replying to [comment:28 pvalicov]:
> I changed the for loop into a while loop, as well as the name of the helper method (will submit it). 
> The second and the third graphs in your tests are not biconnected, so there is no strong orientation possible for these graphs. That's why the next() method of the iterator throws an exception (which is the normal behaviour).

Right, first time I realize that the BA generator could return graphs that are not  biconnected.


> > 3- Concerning the `_all_strong_orientations_of_a_mixed_graph` method (you should remove the `all`), I don't know how many number of recursive calls can be done before reaching the stack limit. So we might have a problem here too. This will certainly appear after you have fixed the previous issues.


So far no stackoverflow error, but slow on large graphs. This was expected.

```
sage: G = graphs.RandomBarabasiAlbert(100, 2)
sage: %time D = next(G.strong_orientations_iterator())
CPU times: user 81.3 ms, sys: 11.8 ms, total: 93.1 ms
Wall time: 84.6 ms
sage: G = graphs.RandomBarabasiAlbert(1000, 2)
sage: %time D = next(G.strong_orientations_iterator())
CPU times: user 1min, sys: 364 ms, total: 1min
Wall time: 1min 1s
sage: G = graphs.RandomBarabasiAlbert(2000, 2)
sage: %time D = next(G.strong_orientations_iterator())
CPU times: user 7min 53s, sys: 3.85 s, total: 7min 57s
Wall time: 8min 4s
```

The patch passes all tests on `src/sage/graphs/` but I have an issue with the documentation. I tried `make doc-clean && make` and got 

```
[dochtml] [graphs   ] reading sources... [100%] sage/graphs/weakly_chordal
[dochtml] [graphs   ] /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py:docstring of sage.graphs.graph.Graph.topological_minor:0: WARNING: Literal block expected; none found.
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/Users/dcoudert/sage/local/lib/python/runpy.py", line 174, in _run_module_as_main
[dochtml]     "__main__", fname, loader, pkg_name)
[dochtml]   File "/Users/dcoudert/sage/local/lib/python/runpy.py", line 72, in _run_code
[dochtml]     exec code in run_globals
[dochtml]   File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 1667, in main
[dochtml]     builder()
[dochtml]   File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 316, in _wrapper
[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
[dochtml]   File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 510, in _wrapper
[dochtml]     build_many(build_ref_doc, L)
[dochtml]   File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 252, in build_many
[dochtml]     ret = x.get(99999)
[dochtml]   File "/Users/dcoudert/sage/local/lib/python/multiprocessing/pool.py", line 567, in get
[dochtml]     raise self._value
[dochtml] OSError: [graphs   ] /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py:docstring of sage.graphs.graph.Graph.topological_minor:0: WARNING: Literal block expected; none found.
[dochtml] 
```
Are you able to build the doc ? may be the problem comes from something else...



---

archive/issue_comments_305107.json:
```json
{
    "body": "Replying to [comment:30 dcoudert]:\n> Replying to [comment:28 pvalicov]:\n> > I changed the for loop into a while loop, as well as the name of the helper method (will submit it). \n> > The second and the third graphs in your tests are not biconnected, so there is no strong orientation possible for these graphs. That's why the next() method of the iterator throws an exception (which is the normal behaviour).\n\n> Right, first time I realize that the BA generator could return graphs that are not  biconnected.\n> \n> \n> > > 3- Concerning the `_all_strong_orientations_of_a_mixed_graph` method (you should remove the `all`), I don't know how many number of recursive calls can be done before reaching the stack limit. So we might have a problem here too. This will certainly appear after you have fixed the previous issues.\n\n> \n> So far no stackoverflow error, but slow on large graphs. This was expected.\n> \n> ```\n> sage: G = graphs.RandomBarabasiAlbert(100, 2)\n> sage: %time D = next(G.strong_orientations_iterator())\n> CPU times: user 81.3 ms, sys: 11.8 ms, total: 93.1 ms\n> Wall time: 84.6 ms\n> sage: G = graphs.RandomBarabasiAlbert(1000, 2)\n> sage: %time D = next(G.strong_orientations_iterator())\n> CPU times: user 1min, sys: 364 ms, total: 1min\n> Wall time: 1min 1s\n> sage: G = graphs.RandomBarabasiAlbert(2000, 2)\n> sage: %time D = next(G.strong_orientations_iterator())\n> CPU times: user 7min 53s, sys: 3.85 s, total: 7min 57s\n> Wall time: 8min 4s\n> ```\n> \n> The patch passes all tests on `src/sage/graphs/` but I have an issue with the documentation. I tried `make doc-clean && make` and got \n> \n> ```\n> [dochtml] [graphs   ] reading sources... [100%] sage/graphs/weakly_chordal\n> [dochtml] [graphs   ] /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py:docstring of sage.graphs.graph.Graph.topological_minor:0: WARNING: Literal block expected; none found.\n> [dochtml] Error building the documentation.\n> [dochtml] Traceback (most recent call last):\n> [dochtml]   File \"/Users/dcoudert/sage/local/lib/python/runpy.py\", line 174, in _run_module_as_main\n> [dochtml]     \"__main__\", fname, loader, pkg_name)\n> [dochtml]   File \"/Users/dcoudert/sage/local/lib/python/runpy.py\", line 72, in _run_code\n> [dochtml]     exec code in run_globals\n> [dochtml]   File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n> [dochtml]     main()\n> [dochtml]   File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 1667, in main\n> [dochtml]     builder()\n> [dochtml]   File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 316, in _wrapper\n> [dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n> [dochtml]   File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 510, in _wrapper\n> [dochtml]     build_many(build_ref_doc, L)\n> [dochtml]   File \"/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py\", line 252, in build_many\n> [dochtml]     ret = x.get(99999)\n> [dochtml]   File \"/Users/dcoudert/sage/local/lib/python/multiprocessing/pool.py\", line 567, in get\n> [dochtml]     raise self._value\n> [dochtml] OSError: [graphs   ] /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py:docstring of sage.graphs.graph.Graph.topological_minor:0: WARNING: Literal block expected; none found.\n> [dochtml] \n> ```\n> Are you able to build the doc ? may be the problem comes from something else...\n\n\nI get the same errors as you and as far as I see from the error message, the problem comes from the docstring of the `topological_minor`. Since it's my first submission, just to be clear: besides the file containing the function, the only changes I made in the rest of sage hierarchy was adding in sage/src/sage/graphs/graph.py an additional category and these lines of code :\n\n```\nfrom sage.graphs.strong_orientations_generator import strong_orientations_iterator\nGraph.strong_orientations_iterator    =    strong_orientations_iterator\n```\n\nDid I forget something?",
    "created_at": "2017-02-11T11:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305107",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```

Replying to [comment:30 dcoudert]:
> Replying to [comment:28 pvalicov]:
> > I changed the for loop into a while loop, as well as the name of the helper method (will submit it). 
> > The second and the third graphs in your tests are not biconnected, so there is no strong orientation possible for these graphs. That's why the next() method of the iterator throws an exception (which is the normal behaviour).

> Right, first time I realize that the BA generator could return graphs that are not  biconnected.
> 
> 
> > > 3- Concerning the `_all_strong_orientations_of_a_mixed_graph` method (you should remove the `all`), I don't know how many number of recursive calls can be done before reaching the stack limit. So we might have a problem here too. This will certainly appear after you have fixed the previous issues.

> 
> So far no stackoverflow error, but slow on large graphs. This was expected.
> 
> ```
> sage: G = graphs.RandomBarabasiAlbert(100, 2)
> sage: %time D = next(G.strong_orientations_iterator())
> CPU times: user 81.3 ms, sys: 11.8 ms, total: 93.1 ms
> Wall time: 84.6 ms
> sage: G = graphs.RandomBarabasiAlbert(1000, 2)
> sage: %time D = next(G.strong_orientations_iterator())
> CPU times: user 1min, sys: 364 ms, total: 1min
> Wall time: 1min 1s
> sage: G = graphs.RandomBarabasiAlbert(2000, 2)
> sage: %time D = next(G.strong_orientations_iterator())
> CPU times: user 7min 53s, sys: 3.85 s, total: 7min 57s
> Wall time: 8min 4s
> ```
> 
> The patch passes all tests on `src/sage/graphs/` but I have an issue with the documentation. I tried `make doc-clean && make` and got 
> 
> ```
> [dochtml] [graphs   ] reading sources... [100%] sage/graphs/weakly_chordal
> [dochtml] [graphs   ] /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py:docstring of sage.graphs.graph.Graph.topological_minor:0: WARNING: Literal block expected; none found.
> [dochtml] Error building the documentation.
> [dochtml] Traceback (most recent call last):
> [dochtml]   File "/Users/dcoudert/sage/local/lib/python/runpy.py", line 174, in _run_module_as_main
> [dochtml]     "__main__", fname, loader, pkg_name)
> [dochtml]   File "/Users/dcoudert/sage/local/lib/python/runpy.py", line 72, in _run_code
> [dochtml]     exec code in run_globals
> [dochtml]   File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
> [dochtml]     main()
> [dochtml]   File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 1667, in main
> [dochtml]     builder()
> [dochtml]   File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 316, in _wrapper
> [dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
> [dochtml]   File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 510, in _wrapper
> [dochtml]     build_many(build_ref_doc, L)
> [dochtml]   File "/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage_setup/docbuild/__init__.py", line 252, in build_many
> [dochtml]     ret = x.get(99999)
> [dochtml]   File "/Users/dcoudert/sage/local/lib/python/multiprocessing/pool.py", line 567, in get
> [dochtml]     raise self._value
> [dochtml] OSError: [graphs   ] /Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py:docstring of sage.graphs.graph.Graph.topological_minor:0: WARNING: Literal block expected; none found.
> [dochtml] 
> ```
> Are you able to build the doc ? may be the problem comes from something else...


I get the same errors as you and as far as I see from the error message, the problem comes from the docstring of the `topological_minor`. Since it's my first submission, just to be clear: besides the file containing the function, the only changes I made in the rest of sage hierarchy was adding in sage/src/sage/graphs/graph.py an additional category and these lines of code :

```
from sage.graphs.strong_orientations_generator import strong_orientations_iterator
Graph.strong_orientations_iterator    =    strong_orientations_iterator
```

Did I forget something?



---

archive/issue_comments_305108.json:
```json
{
    "body": "Right, you should add `sage/graphs/strong_orientations_generator` to file `src/doc/en/reference/graphs/index.rst`. This way the file will be well visible in html documentation.\n\nI have no clue where the error with `topological_minor` comes from. May be some cache has to be clear or... don't know. May be the patchbot will provide extra information after adding above line and setting the ticket to needs review.",
    "created_at": "2017-02-11T11:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305108",
    "user": "https://github.com/dcoudert"
}
```

Right, you should add `sage/graphs/strong_orientations_generator` to file `src/doc/en/reference/graphs/index.rst`. This way the file will be well visible in html documentation.

I have no clue where the error with `topological_minor` comes from. May be some cache has to be clear or... don't know. May be the patchbot will provide extra information after adding above line and setting the ticket to needs review.



---

archive/issue_comments_305109.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-11T14:09:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305109",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305110.json:
```json
{
    "body": "Replying to [comment:32 dcoudert]:\n> Right, you should add `sage/graphs/strong_orientations_generator` to file `src/doc/en/reference/graphs/index.rst`. This way the file will be well visible in html documentation.\n> \n> I have no clue where the error with `topological_minor` comes from. May be some cache has to be clear or... don't know. May be the patchbot will provide extra information after adding above line and setting the ticket to needs review.\n> \n\nThanks for that. There were some errors in the documentation and now it should work.",
    "created_at": "2017-02-11T14:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305110",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```

Replying to [comment:32 dcoudert]:
> Right, you should add `sage/graphs/strong_orientations_generator` to file `src/doc/en/reference/graphs/index.rst`. This way the file will be well visible in html documentation.
> 
> I have no clue where the error with `topological_minor` comes from. May be some cache has to be clear or... don't know. May be the patchbot will provide extra information after adding above line and setting the ticket to needs review.
> 

Thanks for that. There were some errors in the documentation and now it should work.



---

archive/issue_comments_305111.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-02-11T14:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305111",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_305112.json:
```json
{
    "body": "Now everything is working well: passes all tests and the documentation builds properly and look nice.\n\nI have only very minor comments\n* at the beginning of the module, you have `O(m*n)` but O(m) is without ```\n* You can check the source code of `src/sage/graphs/graph_decompositions/vertex_separation.pyx` to see how to get some titles in bold, or some titles with a blue background. This is not very important.\n\nAfter that we will be done.",
    "created_at": "2017-02-11T15:01:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305112",
    "user": "https://github.com/dcoudert"
}
```

Now everything is working well: passes all tests and the documentation builds properly and look nice.

I have only very minor comments
* at the beginning of the module, you have `O(m*n)` but O(m) is without ```
* You can check the source code of `src/sage/graphs/graph_decompositions/vertex_separation.pyx` to see how to get some titles in bold, or some titles with a blue background. This is not very important.

After that we will be done.



---

archive/issue_comments_305113.json:
```json
{
    "body": "Some comments.\n\n- `strong_orientations_iterator` should not have `self` as an input. Moreover, `self` is not listed as an input.\n- You should have `strong_orientations_iterator` in the actual `graph.py` as a proper method. This makes code maintenance easier.\n- References should go in the master reference file.\n- I suspect your name is not `YOUR NAME`.\n- You should use `.. NOTE::` blocks.\n- You missed a latex formatting around an `O(m)` in the `ALGORITHM` part of `strong_orientations_generator.py`. Similarly, you should remove the `*` from the earlier one.\n- The `INPUT` block should be formatted as:\n  {{{\n    INPUT:\n\n    - ``D``g -- the mixed graph; the undirected edges are doubly oriented\n    - ``V`` -- the set of vertices\n    - ``E`` -- the set of undirected edges (these edges are oriented in both ways);\n      no labels are allowed\n  }}}\n- All of your conditionals have an extra space, i.e., change `if cond :` to `if cond:`.\n- This change needs to be reverted:\n  {{{#!diff\ndiff --git a/src/sage/graphs/strong_orientations_generator.py b/src/sage/graphs/strong_orientations_generator.py\nnew file mode 100644\nindex 0000000..932fa85\n--- /dev/null\n+++ b/src/sage/graphs/strong_orientations_generator.py\n`@``@` -175,7 +177,7 `@``@` def _strong_orientations_of_a_mixed_graph(Dg, V, E):\n- an iterator which will produce all strong orientations of the input\n  partially directed graph.\n \n-    EXAMPLES::\n+    EXAMPLES:\n \n         sage: from sage.graphs.strong_orientations_generator import _strong_orientations_of_a_mixed_graph\n         sage: g = graphs.CycleGraph(5)\n  }}}",
    "created_at": "2017-02-11T15:11:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305113",
    "user": "https://github.com/tscrim"
}
```

Some comments.

- `strong_orientations_iterator` should not have `self` as an input. Moreover, `self` is not listed as an input.
- You should have `strong_orientations_iterator` in the actual `graph.py` as a proper method. This makes code maintenance easier.
- References should go in the master reference file.
- I suspect your name is not `YOUR NAME`.
- You should use `.. NOTE::` blocks.
- You missed a latex formatting around an `O(m)` in the `ALGORITHM` part of `strong_orientations_generator.py`. Similarly, you should remove the `*` from the earlier one.
- The `INPUT` block should be formatted as:
  {{{
    INPUT:

    - ``D``g -- the mixed graph; the undirected edges are doubly oriented
    - ``V`` -- the set of vertices
    - ``E`` -- the set of undirected edges (these edges are oriented in both ways);
      no labels are allowed
  }}}
- All of your conditionals have an extra space, i.e., change `if cond :` to `if cond:`.
- This change needs to be reverted:
  {{{#!diff
diff --git a/src/sage/graphs/strong_orientations_generator.py b/src/sage/graphs/strong_orientations_generator.py
new file mode 100644
index 0000000..932fa85
--- /dev/null
+++ b/src/sage/graphs/strong_orientations_generator.py
`@``@` -175,7 +177,7 `@``@` def _strong_orientations_of_a_mixed_graph(Dg, V, E):
- an iterator which will produce all strong orientations of the input
  partially directed graph.
 
-    EXAMPLES::
+    EXAMPLES:
 
         sage: from sage.graphs.strong_orientations_generator import _strong_orientations_of_a_mixed_graph
         sage: g = graphs.CycleGraph(5)
  }}}



---

archive/issue_comments_305114.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-13T10:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305114",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305115.json:
```json
{
    "body": "Replying to [comment:37 tscrim]:\n> Some comments.\n> \n> - `strong_orientations_iterator` should not have `self` as an input. Moreover, `self` is not listed as an input.\n> - You should have `strong_orientations_iterator` in the actual `graph.py` as a proper method. This makes code maintenance easier.\n \nI thought that because of the helper function `_strong_orientations_of_a_mixed_graph` will make the code in `graph.py` more polluted. I followed the same pattern as for other graph algorithms which are in the folder `src/sage/graphs'. Do you think it is still necessary to refactor the code and add it to `graph.py` ?\n> - References should go in the master reference file.\n> - I suspect your name is not `YOUR NAME`.\n> - You should use `.. NOTE::` blocks.\n> - You missed a latex formatting around an `O(m)` in the `ALGORITHM` part of `strong_orientations_generator.py`. Similarly, you should remove the `*` from the earlier one.\n> - The `INPUT` block should be formatted as:\n>   {{{\n>     INPUT:\n> \n>     - ``D``g -- the mixed graph; the undirected edges are doubly oriented\n>     - ``V`` -- the set of vertices\n>     - ``E`` -- the set of undirected edges (these edges are oriented in both ways);\n>       no labels are allowed\n>   }}}\n> - All of your conditionals have an extra space, i.e., change `if cond :` to `if cond:`.\n> - This change needs to be reverted:\n>   {{{#!diff\n> diff --git a/src/sage/graphs/strong_orientations_generator.py b/src/sage/graphs/strong_orientations_generator.py\n> new file mode 100644\n> index 0000000..932fa85\n> --- /dev/null\n> +++ b/src/sage/graphs/strong_orientations_generator.py\n> `@``@` -175,7 +177,7 `@``@` def _strong_orientations_of_a_mixed_graph(Dg, V, E):\n> - an iterator which will produce all strong orientations of the input\n>   partially directed graph.\n>  \n> -    EXAMPLES::\n> +    EXAMPLES:\n>  \n>          sage: from sage.graphs.strong_orientations_generator import _strong_orientations_of_a_mixed_graph\n>          sage: g = graphs.CycleGraph(5)\n>   }}}",
    "created_at": "2017-02-13T10:10:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305115",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```

Replying to [comment:37 tscrim]:
> Some comments.
> 
> - `strong_orientations_iterator` should not have `self` as an input. Moreover, `self` is not listed as an input.
> - You should have `strong_orientations_iterator` in the actual `graph.py` as a proper method. This makes code maintenance easier.
 
I thought that because of the helper function `_strong_orientations_of_a_mixed_graph` will make the code in `graph.py` more polluted. I followed the same pattern as for other graph algorithms which are in the folder `src/sage/graphs'. Do you think it is still necessary to refactor the code and add it to `graph.py` ?
> - References should go in the master reference file.
> - I suspect your name is not `YOUR NAME`.
> - You should use `.. NOTE::` blocks.
> - You missed a latex formatting around an `O(m)` in the `ALGORITHM` part of `strong_orientations_generator.py`. Similarly, you should remove the `*` from the earlier one.
> - The `INPUT` block should be formatted as:
>   {{{
>     INPUT:
> 
>     - ``D``g -- the mixed graph; the undirected edges are doubly oriented
>     - ``V`` -- the set of vertices
>     - ``E`` -- the set of undirected edges (these edges are oriented in both ways);
>       no labels are allowed
>   }}}
> - All of your conditionals have an extra space, i.e., change `if cond :` to `if cond:`.
> - This change needs to be reverted:
>   {{{#!diff
> diff --git a/src/sage/graphs/strong_orientations_generator.py b/src/sage/graphs/strong_orientations_generator.py
> new file mode 100644
> index 0000000..932fa85
> --- /dev/null
> +++ b/src/sage/graphs/strong_orientations_generator.py
> `@``@` -175,7 +177,7 `@``@` def _strong_orientations_of_a_mixed_graph(Dg, V, E):
> - an iterator which will produce all strong orientations of the input
>   partially directed graph.
>  
> -    EXAMPLES::
> +    EXAMPLES:
>  
>          sage: from sage.graphs.strong_orientations_generator import _strong_orientations_of_a_mixed_graph
>          sage: g = graphs.CycleGraph(5)
>   }}}



---

archive/issue_comments_305116.json:
```json
{
    "body": "I agree that it is good to have the *helper* function a separate file to reduce clutter. However, the main method `strong_orientations_iterator` should be in the class itself (and contain the import statement out to the helper function).",
    "created_at": "2017-02-13T15:39:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305116",
    "user": "https://github.com/tscrim"
}
```

I agree that it is good to have the *helper* function a separate file to reduce clutter. However, the main method `strong_orientations_iterator` should be in the class itself (and contain the import statement out to the helper function).



---

archive/issue_comments_305117.json:
```json
{
    "body": "Replying to [comment:40 tscrim]:\n> I agree that it is good to have the *helper* function a separate file to reduce clutter. However, the main method `strong_orientations_iterator` should be in the class itself (and contain the import statement out to the helper function).\n\n\nSorry for being too insistent (and thanks for the effort) but then I don't understand the point of having files like `tutte_polynomial.py`, `schnyder.py`, `lovasz_theta.py`, `line_graph.py`, `partial_cube.py` etc. in the `src/sage/graphs/` ?\n\nThe reason I followed the same way of coding by doing the import of the main function (i.e. `strong_orientations_iterator`) in `graph.py` is because I thought that importing the entire function makes somehow the entire code of the class `Graph` easier as this class is already quite big in terms of lines of code.",
    "created_at": "2017-02-13T16:30:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305117",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```

Replying to [comment:40 tscrim]:
> I agree that it is good to have the *helper* function a separate file to reduce clutter. However, the main method `strong_orientations_iterator` should be in the class itself (and contain the import statement out to the helper function).


Sorry for being too insistent (and thanks for the effort) but then I don't understand the point of having files like `tutte_polynomial.py`, `schnyder.py`, `lovasz_theta.py`, `line_graph.py`, `partial_cube.py` etc. in the `src/sage/graphs/` ?

The reason I followed the same way of coding by doing the import of the main function (i.e. `strong_orientations_iterator`) in `graph.py` is because I thought that importing the entire function makes somehow the entire code of the class `Graph` easier as this class is already quite big in terms of lines of code.



---

archive/issue_comments_305118.json:
```json
{
    "body": "Replying to [comment:41 pvalicov]:\n> Replying to [comment:40 tscrim]:\n> > I agree that it is good to have the *helper* function a separate file to reduce clutter. However, the main method `strong_orientations_iterator` should be in the class itself (and contain the import statement out to the helper function).\n\n> \n> Sorry for being too insistent (and thanks for the effort) but then I don't understand the point of having files like `tutte_polynomial.py`, `schnyder.py`, `lovasz_theta.py`, `line_graph.py`, `partial_cube.py` etc. in the `src/sage/graphs/` ?\n\n\nSome of them are better justified because they need larger volumes of code (such as helper classes), and even still I do not agree with the design choice of having it be a separate file. In particular, IMO the `lovasz_theta.py` does not deserve a separate file.\n\n> The reason I followed the same way of coding by doing the import of the main function (i.e. `strong_orientations_iterator`) in `graph.py` is because I thought that importing the entire function makes somehow the entire code of the class `Graph` easier as this class is already quite big in terms of lines of code.\n\n\nIt's taking a bucket of water from the ocean. Plus, find (and code folding) makes this argument far less effective to me, especially compared to having to search through other seemingly random files. However, since there does seem to be some practice of doing this, I won't oppose this, but it is not a good practice IMO (and it only works because it is Python).",
    "created_at": "2017-02-13T16:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305118",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:41 pvalicov]:
> Replying to [comment:40 tscrim]:
> > I agree that it is good to have the *helper* function a separate file to reduce clutter. However, the main method `strong_orientations_iterator` should be in the class itself (and contain the import statement out to the helper function).

> 
> Sorry for being too insistent (and thanks for the effort) but then I don't understand the point of having files like `tutte_polynomial.py`, `schnyder.py`, `lovasz_theta.py`, `line_graph.py`, `partial_cube.py` etc. in the `src/sage/graphs/` ?


Some of them are better justified because they need larger volumes of code (such as helper classes), and even still I do not agree with the design choice of having it be a separate file. In particular, IMO the `lovasz_theta.py` does not deserve a separate file.

> The reason I followed the same way of coding by doing the import of the main function (i.e. `strong_orientations_iterator`) in `graph.py` is because I thought that importing the entire function makes somehow the entire code of the class `Graph` easier as this class is already quite big in terms of lines of code.


It's taking a bucket of water from the ocean. Plus, find (and code folding) makes this argument far less effective to me, especially compared to having to search through other seemingly random files. However, since there does seem to be some practice of doing this, I won't oppose this, but it is not a good practice IMO (and it only works because it is Python).



---

archive/issue_comments_305119.json:
```json
{
    "body": "The helper function is roughly 50 lines of codes. Putting it in a separated file while the main method is in `graph.py` makes no sense to me. Either we decide to put every thing in `graph.py`, or we agree to create this new file with the aim of gathering all methods related to orientations in it. For instance, we could move method `strong_orientation` in this file. May be it could be named `strong_orientations.py` rather than `strong_orientations_generator.py` to be more general.",
    "created_at": "2017-02-13T16:45:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305119",
    "user": "https://github.com/dcoudert"
}
```

The helper function is roughly 50 lines of codes. Putting it in a separated file while the main method is in `graph.py` makes no sense to me. Either we decide to put every thing in `graph.py`, or we agree to create this new file with the aim of gathering all methods related to orientations in it. For instance, we could move method `strong_orientation` in this file. May be it could be named `strong_orientations.py` rather than `strong_orientations_generator.py` to be more general.



---

archive/issue_comments_305120.json:
```json
{
    "body": "I am not an expert in Sage but I think that having a file like `strong_orientations.py` regrouping everything would be clearer. More generally I would say that a file like `orientations.py` containing the `orientations` method, all methods related to strong orientations and future methods that one could naturally expect like `acyclic_orientations` (I was thinking submitting it too), is a good idea. So what should I do? Do I leave my submission as it is for now ? And the factorisation, if it is accepted, will be another ticket (I don't know how to do it yet) ?",
    "created_at": "2017-02-15T09:20:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305120",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```

I am not an expert in Sage but I think that having a file like `strong_orientations.py` regrouping everything would be clearer. More generally I would say that a file like `orientations.py` containing the `orientations` method, all methods related to strong orientations and future methods that one could naturally expect like `acyclic_orientations` (I was thinking submitting it too), is a good idea. So what should I do? Do I leave my submission as it is for now ? And the factorisation, if it is accepted, will be another ticket (I don't know how to do it yet) ?



---

archive/issue_comments_305121.json:
```json
{
    "body": "I'm in favor of having a special file for all kinds of orientations.\n\nSo, unless someone has strong arguments against it, I suggest to rename the file `orientations.py`, rewrite the file header to explain that this file contains methods related to graph orientations and move the description of the strong orientation generator inside the method.\n\nThe top description of the file could be something like:\n\n```\nr\"\"\"\nOrientations\n\nThis module implements several methods to compute orientations of undirected\ngraphs subject to specific constraints (e.g., acyclic, strongly connected,\netc.). It also implements some iterators over all these orientations.\n\n**This module contains the following methods**\n\n.. csv-table::\n    :class: contentstable\n    :widths: 30, 70\n    :delim: |\n\n    :meth:`strong_orientations_iterator` | Return an iterator over all strong orientations of a graph `G`\n\n\nAuthors\n-------\n\n- Kolja Knauer, Petru Valicov (2017-01-10) -- initial version\n\n\nMethods\n-------\n\"\"\"\n```\nSee file `src/sage/graphs/graph_decomposition/vertex_separation.pyx` for example.\n\n\n\nIn another ticket, we can move related methods to this new file, and at the same time fix minor issues such as:\n\n```\nsage: G = Graph(1)\nsage: next(G.orientations())\nDigraph on 0 vertices\n```",
    "created_at": "2017-02-15T09:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305121",
    "user": "https://github.com/dcoudert"
}
```

I'm in favor of having a special file for all kinds of orientations.

So, unless someone has strong arguments against it, I suggest to rename the file `orientations.py`, rewrite the file header to explain that this file contains methods related to graph orientations and move the description of the strong orientation generator inside the method.

The top description of the file could be something like:

```
r"""
Orientations

This module implements several methods to compute orientations of undirected
graphs subject to specific constraints (e.g., acyclic, strongly connected,
etc.). It also implements some iterators over all these orientations.

**This module contains the following methods**

.. csv-table::
    :class: contentstable
    :widths: 30, 70
    :delim: |

    :meth:`strong_orientations_iterator` | Return an iterator over all strong orientations of a graph `G`


Authors
-------

- Kolja Knauer, Petru Valicov (2017-01-10) -- initial version


Methods
-------
"""
```
See file `src/sage/graphs/graph_decomposition/vertex_separation.pyx` for example.



In another ticket, we can move related methods to this new file, and at the same time fix minor issues such as:

```
sage: G = Graph(1)
sage: next(G.orientations())
Digraph on 0 vertices
```



---

archive/issue_comments_305122.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-15T12:01:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305122",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305123.json:
```json
{
    "body": "* you forgot to update file `src/doc/en/reference/graphs/index.rst`: `sage/graphs/strong_orientations_generator` -> `sage/graphs/orientations`. After that I can try to build the doc.\n\n* Because we use this definition \"A biconnected graph is a connected graph on two or more vertices that is not broken into disconnected pieces by deleting any single vertex.\", we have the following issue:\n\n```\nsage: G = graphs.CompleteGraph(2)\nsage: next(G.strong_orientations_iterator())\n---------------------------------------------------------------------------\nIndexError                                Traceback (most recent call last)\n<ipython-input-12-1a1d14901a2b> in <module>()\n----> 1 next(G.strong_orientations_iterator())\n\n/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/orientations.pyc in strong_orientations_iterator(G)\n    155 \n    156         previousWord = word;\n--> 157         if existingAedges[bit] == 0:\n    158             Dg.reverse_edge(A[bit])\n    159             existingAedges[bit] = 1\n\nIndexError: list index out of range\n``` \n  To fix that you can certainly ensure that the graph has at least 3 vertices and is biconnected. Add a doctest for this case please.",
    "created_at": "2017-02-15T12:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305123",
    "user": "https://github.com/dcoudert"
}
```

* you forgot to update file `src/doc/en/reference/graphs/index.rst`: `sage/graphs/strong_orientations_generator` -> `sage/graphs/orientations`. After that I can try to build the doc.

* Because we use this definition "A biconnected graph is a connected graph on two or more vertices that is not broken into disconnected pieces by deleting any single vertex.", we have the following issue:

```
sage: G = graphs.CompleteGraph(2)
sage: next(G.strong_orientations_iterator())
---------------------------------------------------------------------------
IndexError                                Traceback (most recent call last)
<ipython-input-12-1a1d14901a2b> in <module>()
----> 1 next(G.strong_orientations_iterator())

/Users/dcoudert/sage/local/lib/python2.7/site-packages/sage/graphs/orientations.pyc in strong_orientations_iterator(G)
    155 
    156         previousWord = word;
--> 157         if existingAedges[bit] == 0:
    158             Dg.reverse_edge(A[bit])
    159             existingAedges[bit] = 1

IndexError: list index out of range
``` 
  To fix that you can certainly ensure that the graph has at least 3 vertices and is biconnected. Add a doctest for this case please.



---

archive/issue_comments_305124.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-15T14:07:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305124",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305125.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-15T17:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305125",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305126.json:
```json
{
    "body": "* Remove `REFERENCES` since references are somewhere else.\n* Add an empty line after `ALGORITHM:`\n* in the text, I suggest to rewrite \"and then launches `_strong_orientations_of_a_mixed_graph` which is the helper function corresponding to the generation algorithm described in\" as \"and then launches a helper function corresponding to the generation algorithm described in\". The reason is that method named like `_blah` are not displayed in the html documentation.\n\n\nAlmost done. Passes all tests and the rest of the doc displays nicely.",
    "created_at": "2017-02-15T18:18:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305126",
    "user": "https://github.com/dcoudert"
}
```

* Remove `REFERENCES` since references are somewhere else.
* Add an empty line after `ALGORITHM:`
* in the text, I suggest to rewrite "and then launches `_strong_orientations_of_a_mixed_graph` which is the helper function corresponding to the generation algorithm described in" as "and then launches a helper function corresponding to the generation algorithm described in". The reason is that method named like `_blah` are not displayed in the html documentation.


Almost done. Passes all tests and the rest of the doc displays nicely.



---

archive/issue_comments_305127.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-15T18:43:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305127",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_305128.json:
```json
{
    "body": "Thanks, I've done everything. One comment: since we have a separate file to all kind of orientations stuff, wouldn't it be better to gather all the references in this file as it is done in other files or we keep everything in the master reference file? It is done this way in several files in `src/sage/graphs`.\n\nReplying to [comment:50 dcoudert]:\n> * Remove `REFERENCES` since references are somewhere else.\n> * Add an empty line after `ALGORITHM:`\n> * in the text, I suggest to rewrite \"and then launches `_strong_orientations_of_a_mixed_graph` which is the helper function corresponding to the generation algorithm described in\" as \"and then launches a helper function corresponding to the generation algorithm described in\". The reason is that method named like `_blah` are not displayed in the html documentation.\n> \n> \n> Almost done. Passes all tests and the rest of the doc displays nicely.",
    "created_at": "2017-02-15T18:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305128",
    "user": "https://trac.sagemath.org/admin/accounts/users/pvalicov"
}
```

Thanks, I've done everything. One comment: since we have a separate file to all kind of orientations stuff, wouldn't it be better to gather all the references in this file as it is done in other files or we keep everything in the master reference file? It is done this way in several files in `src/sage/graphs`.

Replying to [comment:50 dcoudert]:
> * Remove `REFERENCES` since references are somewhere else.
> * Add an empty line after `ALGORITHM:`
> * in the text, I suggest to rewrite "and then launches `_strong_orientations_of_a_mixed_graph` which is the helper function corresponding to the generation algorithm described in" as "and then launches a helper function corresponding to the generation algorithm described in". The reason is that method named like `_blah` are not displayed in the html documentation.
> 
> 
> Almost done. Passes all tests and the rest of the doc displays nicely.



---

archive/issue_comments_305129.json:
```json
{
    "body": "Some months ago, It has been decided to put all references in the master file. So all references that are currently in the graph module will eventually be moved to the master file. This is to avoid duplications (references and keys).\n\nFor me this patch is now good to go. Congratulation for your first contribution !",
    "created_at": "2017-02-15T19:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305129",
    "user": "https://github.com/dcoudert"
}
```

Some months ago, It has been decided to put all references in the master file. So all references that are currently in the graph module will eventually be moved to the master file. This is to avoid duplications (references and keys).

For me this patch is now good to go. Congratulation for your first contribution !



---

archive/issue_comments_305130.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-15T19:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305130",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_058377.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-21T14:35:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22206#event-58377"
}
```



---

archive/issue_comments_305131.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-02-21T14:35:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22206",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22206#issuecomment-305131",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
