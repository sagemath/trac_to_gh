# Issue 22948: avoid "absolute_import" in tab completion

archive/issues_022711.json:
```json
{
    "body": "As reported in [this thread on sage-devel](https://groups.google.com/forum/#!topic/sage-devel/XksZ-oCVrOo)\n\n```\nsage: designs.<TAB>\nabsolute_import ...\n```\n\nCC:  @dcoudert\n\nReviewer: David Coudert\n\nAuthor: Vincent Delecroix\n\nBranch: 26617dd78d7230f73872841046713e3d9eed057d\n\nCommit: 26617dd78d7230f73872841046713e3d9eed057d\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22948\n\n",
    "closed_at": "2017-05-08T21:18:36Z",
    "created_at": "2017-05-04T14:36:09Z",
    "labels": [
        "component: misc",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "avoid \"absolute_import\" in tab completion",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22948",
    "user": "https://github.com/videlec"
}
```
As reported in [this thread on sage-devel](https://groups.google.com/forum/#!topic/sage-devel/XksZ-oCVrOo)

```
sage: designs.<TAB>
absolute_import ...
```

CC:  @dcoudert

Reviewer: David Coudert

Author: Vincent Delecroix

Branch: 26617dd78d7230f73872841046713e3d9eed057d

Commit: 26617dd78d7230f73872841046713e3d9eed057d

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22948





---

archive/issue_comments_316704.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-05-04T14:59:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22948#issuecomment-316704",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_316705.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2017-05-04T14:59:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22948#issuecomment-316705",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_316706.json:
```json
{
    "body": "<a id='comment:2'></a>Big -1 on the (current) doctests as it is one more thing to update each time we add something to the respective catalog. I'm essentially in favor of removing them altogether. If you really want a doctest, then you're better checking if, e.g., `'absolute_import' in dir(crystals)`. I feel such a doctest, which is not there for all catalogs, is just going to create extra headaches.",
    "created_at": "2017-05-04T15:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22948#issuecomment-316706",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'></a>Big -1 on the (current) doctests as it is one more thing to update each time we add something to the respective catalog. I'm essentially in favor of removing them altogether. If you really want a doctest, then you're better checking if, e.g., `'absolute_import' in dir(crystals)`. I feel such a doctest, which is not there for all catalogs, is just going to create extra headaches.



---

archive/issue_comments_316707.json:
```json
{
    "body": "<a id='comment:3'></a>I also agree that `absolute_import in dir(designs)` would be safer.\n\nI tried the current version and it solves the issue for `designs.<TAB>`and passes all tests on `src/sage/coding`, `src/sage/combinat/crystals/`, `src/sage/combinat/designs/`, `src/sage/game_theory/`, and `src/sage/groups/`.",
    "created_at": "2017-05-04T15:11:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22948#issuecomment-316707",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'></a>I also agree that `absolute_import in dir(designs)` would be safer.

I tried the current version and it solves the issue for `designs.<TAB>`and passes all tests on `src/sage/coding`, `src/sage/combinat/crystals/`, `src/sage/combinat/designs/`, `src/sage/game_theory/`, and `src/sage/groups/`.



---

archive/issue_comments_316708.json:
```json
{
    "body": "<a id='comment:4'></a>All right. Will change it.",
    "created_at": "2017-05-04T15:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22948#issuecomment-316708",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>All right. Will change it.



---

archive/issue_comments_316709.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-05-04T15:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22948#issuecomment-316709",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_316710.json:
```json
{
    "body": "<a id='comment:6'></a>done",
    "created_at": "2017-05-04T15:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22948#issuecomment-316710",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>done



---

archive/issue_comments_316711.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-04T15:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22948#issuecomment-316711",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_316712.json:
```json
{
    "body": "<a id='comment:7'></a>For me this is good to go (passes all tests).\nThank you.",
    "created_at": "2017-05-04T15:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22948#issuecomment-316712",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>For me this is good to go (passes all tests).
Thank you.



---

archive/issue_comments_316713.json:
```json
{
    "body": "<a id='comment:8'></a>Rather than putting `del` everywhere (and likely forgetting in other modules) wouldn't it make more sense to update the `__dir__` implementation to exclude it (and anything else from `__futures__`)?",
    "created_at": "2017-05-04T16:58:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22948#issuecomment-316713",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>Rather than putting `del` everywhere (and likely forgetting in other modules) wouldn't it make more sense to update the `__dir__` implementation to exclude it (and anything else from `__futures__`)?



---

archive/issue_comments_316714.json:
```json
{
    "body": "<a id='comment:9'></a>Ah, of course, but this is a module.  That said, surely there's somewhere to control what gets included in tab-completion (it doesn't include other globals like standard module imports does it?)",
    "created_at": "2017-05-04T16:59:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22948#issuecomment-316714",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>Ah, of course, but this is a module.  That said, surely there's somewhere to control what gets included in tab-completion (it doesn't include other globals like standard module imports does it?)



---

archive/issue_comments_316715.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:8 embray]:\n> Rather than putting `del` everywhere (and likely forgetting in other modules) wouldn't it make more sense to update the `__dir__` implementation to exclude it (and anything else from `__futures__`)?\n\n\nIt would! But I have no idea how to implement it.",
    "created_at": "2017-05-04T17:02:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22948#issuecomment-316715",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'></a>Replying to [comment:8 embray]:
> Rather than putting `del` everywhere (and likely forgetting in other modules) wouldn't it make more sense to update the `__dir__` implementation to exclude it (and anything else from `__futures__`)?


It would! But I have no idea how to implement it.



---

archive/issue_comments_316716.json:
```json
{
    "body": "<a id='comment:11'></a>Maybe it's not so simple after all.  It seems there's nothing like that currently in Sage, and scant documentation on how to customize tab-completion in IPython (though it does appear to be possible).  Maybe something worth working on (another possibility is that if we provide our own SageModule class, as I've been meaning to do anyways, we can customize `__dir__` for modules in Sage).\n\nIn the meantime, this is just limited to some \"catalog\" modules where it matters most so that's fine.",
    "created_at": "2017-05-04T17:20:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22948#issuecomment-316716",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>Maybe it's not so simple after all.  It seems there's nothing like that currently in Sage, and scant documentation on how to customize tab-completion in IPython (though it does appear to be possible).  Maybe something worth working on (another possibility is that if we provide our own SageModule class, as I've been meaning to do anyways, we can customize `__dir__` for modules in Sage).

In the meantime, this is just limited to some "catalog" modules where it matters most so that's fine.



---

archive/issue_comments_316717.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-08T21:18:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22948#issuecomment-316717",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_059505.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-08T21:18:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22948",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22948#event-59505"
}
```
