# Issue 22948: avoid "absolute_import" in tab completion

archive/issues_022711.json:
```json
{
    "assignees": [],
    "body": "As reported in [this thread on sage-devel](https://groups.google.com/forum/#!topic/sage-devel/XksZ-oCVrOo)\n\n```\nsage: designs.<TAB>\nabsolute_import ...\n```\n\nCC:  @dcoudert\n\nBranch/Commit: **[`26617dd`](https://github.com/sagemath/sagetrac-mirror/commit/26617dd78d7230f73872841046713e3d9eed057d)**\n\nReviewer: **David Coudert**\n\nAuthor: **Vincent Delecroix**\n\nComponent: **misc**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22948_\n\n",
    "closed_at": "2017-05-08T21:18:36Z",
    "created_at": "2017-05-04T14:36:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "avoid \"absolute_import\" in tab completion",
    "type": "issue",
    "updated_at": "2017-05-08T21:18:36Z",
    "url": "https://github.com/sagemath/sage/issues/22948",
    "user": "https://github.com/videlec"
}
```
As reported in [this thread on sage-devel](https://groups.google.com/forum/#!topic/sage-devel/XksZ-oCVrOo)

```
sage: designs.<TAB>
absolute_import ...
```

CC:  @dcoudert

Branch/Commit: **[`26617dd`](https://github.com/sagemath/sagetrac-mirror/commit/26617dd78d7230f73872841046713e3d9eed057d)**

Reviewer: **David Coudert**

Author: **Vincent Delecroix**

Component: **misc**

_Issue created by migration from https://trac.sagemath.org/ticket/22948_





---

archive/issue_events_321545.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-05-04T14:36:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22948#event-321545"
}
```



---

archive/issue_events_321546.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-05-04T14:36:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22948#event-321546"
}
```



---

archive/issue_events_321547.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-05-04T14:36:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22948#event-321547"
}
```



---

archive/issue_comments_342687.json:
```json
{
    "body": "Commit: **[`1ae7192`](https://github.com/sagemath/sagetrac-mirror/commit/1ae719287f3f44c3f18aac7bc2393afa45a7ffcb)**",
    "created_at": "2017-05-04T14:59:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342687",
    "user": "https://github.com/videlec"
}
```

Commit: **[`1ae7192`](https://github.com/sagemath/sagetrac-mirror/commit/1ae719287f3f44c3f18aac7bc2393afa45a7ffcb)**



---

archive/issue_comments_342688.json:
```json
{
    "body": "Branch: **[u/vdelecroix/22948](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22948)**",
    "created_at": "2017-05-04T14:59:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342688",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/22948](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22948)**



---

archive/issue_events_321548.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-05-04T14:59:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22948#event-321548"
}
```



---

archive/issue_comments_342689.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ae719287f3f44c3f18aac7bc2393afa45a7ffcb\"><code>1ae7192</code></a></td><td><code>22948: del absolute_import at the end of catalogs</code></td></tr></table>\n",
    "created_at": "2017-05-04T14:59:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342689",
    "user": "https://github.com/videlec"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ae719287f3f44c3f18aac7bc2393afa45a7ffcb"><code>1ae7192</code></a></td><td><code>22948: del absolute_import at the end of catalogs</code></td></tr></table>




---

archive/issue_comments_342690.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nBig -1 on the (current) doctests as it is one more thing to update each time we add something to the respective catalog. I'm essentially in favor of removing them altogether. If you really want a doctest, then you're better checking if, e.g., `'absolute_import' in dir(crystals)`. I feel such a doctest, which is not there for all catalogs, is just going to create extra headaches.",
    "created_at": "2017-05-04T15:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342690",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:2" align="right">comment:2</div>

Big -1 on the (current) doctests as it is one more thing to update each time we add something to the respective catalog. I'm essentially in favor of removing them altogether. If you really want a doctest, then you're better checking if, e.g., `'absolute_import' in dir(crystals)`. I feel such a doctest, which is not there for all catalogs, is just going to create extra headaches.



---

archive/issue_comments_342691.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI also agree that `absolute_import in dir(designs)` would be safer.\n\nI tried the current version and it solves the issue for `designs.<TAB>`and passes all tests on `src/sage/coding`, `src/sage/combinat/crystals/`, `src/sage/combinat/designs/`, `src/sage/game_theory/`, and `src/sage/groups/`.",
    "created_at": "2017-05-04T15:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342691",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">comment:3</div>

I also agree that `absolute_import in dir(designs)` would be safer.

I tried the current version and it solves the issue for `designs.<TAB>`and passes all tests on `src/sage/coding`, `src/sage/combinat/crystals/`, `src/sage/combinat/designs/`, `src/sage/game_theory/`, and `src/sage/groups/`.



---

archive/issue_comments_342692.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAll right. Will change it.",
    "created_at": "2017-05-04T15:18:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342692",
    "user": "https://github.com/videlec"
}
```

<div id="comment:4" align="right">comment:4</div>

All right. Will change it.



---

archive/issue_comments_342693.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26617dd78d7230f73872841046713e3d9eed057d\"><code>26617dd</code></a></td><td><code>22948: del absolute_import at the end of catalogs</code></td></tr></table>\n",
    "created_at": "2017-05-04T15:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342693",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26617dd78d7230f73872841046713e3d9eed057d"><code>26617dd</code></a></td><td><code>22948: del absolute_import at the end of catalogs</code></td></tr></table>




---

archive/issue_comments_342694.json:
```json
{
    "body": "Changed commit from **[`1ae7192`](https://github.com/sagemath/sagetrac-mirror/commit/1ae719287f3f44c3f18aac7bc2393afa45a7ffcb)** to **[`26617dd`](https://github.com/sagemath/sagetrac-mirror/commit/26617dd78d7230f73872841046713e3d9eed057d)**",
    "created_at": "2017-05-04T15:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342694",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1ae7192`](https://github.com/sagemath/sagetrac-mirror/commit/1ae719287f3f44c3f18aac7bc2393afa45a7ffcb)** to **[`26617dd`](https://github.com/sagemath/sagetrac-mirror/commit/26617dd78d7230f73872841046713e3d9eed057d)**



---

archive/issue_comments_342695.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\ndone",
    "created_at": "2017-05-04T15:28:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342695",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

done



---

archive/issue_events_321549.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-05-04T15:37:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22948#event-321549"
}
```



---

archive/issue_events_321550.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-05-04T15:37:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22948#event-321550"
}
```



---

archive/issue_comments_342696.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nFor me this is good to go (passes all tests).\nThank you.",
    "created_at": "2017-05-04T15:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342696",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:7" align="right">comment:7</div>

For me this is good to go (passes all tests).
Thank you.



---

archive/issue_comments_342697.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2017-05-04T15:37:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342697",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_342698.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nRather than putting `del` everywhere (and likely forgetting in other modules) wouldn't it make more sense to update the `__dir__` implementation to exclude it (and anything else from `__futures__`)?",
    "created_at": "2017-05-04T16:58:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342698",
    "user": "https://github.com/embray"
}
```

<div id="comment:8" align="right">comment:8</div>

Rather than putting `del` everywhere (and likely forgetting in other modules) wouldn't it make more sense to update the `__dir__` implementation to exclude it (and anything else from `__futures__`)?



---

archive/issue_comments_342699.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAh, of course, but this is a module.  That said, surely there's somewhere to control what gets included in tab-completion (it doesn't include other globals like standard module imports does it?)",
    "created_at": "2017-05-04T16:59:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342699",
    "user": "https://github.com/embray"
}
```

<div id="comment:9" align="right">comment:9</div>

Ah, of course, but this is a module.  That said, surely there's somewhere to control what gets included in tab-completion (it doesn't include other globals like standard module imports does it?)



---

archive/issue_comments_342700.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@embray](#comment:8):\n> Rather than putting `del` everywhere (and likely forgetting in other modules) wouldn't it make more sense to update the `__dir__` implementation to exclude it (and anything else from `__futures__`)?\n\nIt would! But I have no idea how to implement it.",
    "created_at": "2017-05-04T17:02:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342700",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@embray](#comment:8):
> Rather than putting `del` everywhere (and likely forgetting in other modules) wouldn't it make more sense to update the `__dir__` implementation to exclude it (and anything else from `__futures__`)?

It would! But I have no idea how to implement it.



---

archive/issue_comments_342701.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nMaybe it's not so simple after all.  It seems there's nothing like that currently in Sage, and scant documentation on how to customize tab-completion in IPython (though it does appear to be possible).  Maybe something worth working on (another possibility is that if we provide our own SageModule class, as I've been meaning to do anyways, we can customize `__dir__` for modules in Sage).\n\nIn the meantime, this is just limited to some \"catalog\" modules where it matters most so that's fine.",
    "created_at": "2017-05-04T17:20:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342701",
    "user": "https://github.com/embray"
}
```

<div id="comment:11" align="right">comment:11</div>

Maybe it's not so simple after all.  It seems there's nothing like that currently in Sage, and scant documentation on how to customize tab-completion in IPython (though it does appear to be possible).  Maybe something worth working on (another possibility is that if we provide our own SageModule class, as I've been meaning to do anyways, we can customize `__dir__` for modules in Sage).

In the meantime, this is just limited to some "catalog" modules where it matters most so that's fine.



---

archive/issue_comments_342702.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/22948](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22948)** to **[`26617dd`](https://github.com/sagemath/sagetrac-mirror/commit/26617dd78d7230f73872841046713e3d9eed057d)**",
    "created_at": "2017-05-08T21:18:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22948#issuecomment-342702",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vdelecroix/22948](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/22948)** to **[`26617dd`](https://github.com/sagemath/sagetrac-mirror/commit/26617dd78d7230f73872841046713e3d9eed057d)**



---

archive/issue_events_321551.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-08T21:18:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22948#event-321551"
}
```



---

archive/issue_events_321552.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b238720683bf47062fb9b7a1cc47a6fd6fe71f2c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-05-08T21:18:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22948",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22948#event-321552"
}
```
