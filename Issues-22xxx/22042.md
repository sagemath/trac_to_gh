# Issue 22042: Three.js: reduce CPU load for static scenes

archive/issues_021805.json:
```json
{
    "body": "This addresses https://groups.google.com/d/msg/sage-devel/pGLZrwfdQB8/6OsQzr8fBgAJ\n\nCC:  tdumont @dimpase @vbraun\n\nKeywords: threejs\n\nBranch/Commit: a1e206c71a4ab1acfa5969c70e3ec45ed542d3a2\n\nReviewer: Dima Pasechnik\n\nAuthor: Paul Masson\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22042\n\n",
    "closed_at": "2016-12-24T19:47:29Z",
    "created_at": "2016-12-10T01:35:09Z",
    "labels": [
        "component: graphics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Three.js: reduce CPU load for static scenes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22042",
    "user": "https://github.com/paulmasson"
}
```
This addresses https://groups.google.com/d/msg/sage-devel/pGLZrwfdQB8/6OsQzr8fBgAJ

CC:  tdumont @dimpase @vbraun

Keywords: threejs

Branch/Commit: a1e206c71a4ab1acfa5969c70e3ec45ed542d3a2

Reviewer: Dima Pasechnik

Author: Paul Masson

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22042





---

archive/issue_comments_407601.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-\n+This addresses https://groups.google.com/d/msg/sage-devel/pGLZrwfdQB8/6OsQzr8fBgAJ\n \n Author: Paul Masson\n \n``````\n",
    "created_at": "2016-12-10T03:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407601",
    "user": "https://github.com/paulmasson"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-
+This addresses https://groups.google.com/d/msg/sage-devel/pGLZrwfdQB8/6OsQzr8fBgAJ
 
 Author: Paul Masson
 
``````




---

archive/issue_comments_407602.json:
```json
{
    "body": "Changing branch from \"\" to \"u/paulmasson/22042\"",
    "created_at": "2016-12-10T03:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407602",
    "user": "https://github.com/paulmasson"
}
```

Changing branch from "" to "u/paulmasson/22042"



---

archive/issue_comments_407603.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2016-12-10T03:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407603",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_407604.json:
```json
{
    "body": "Changing commit from \"\" to \"48bd38d20a0f03d9f283203d6243578719e92cb7\"",
    "created_at": "2016-12-10T03:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407604",
    "user": "https://github.com/paulmasson"
}
```

Changing commit from "" to "48bd38d20a0f03d9f283203d6243578719e92cb7"



---

archive/issue_comments_407605.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-12-10T03:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407605",
    "user": "https://github.com/paulmasson"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_407606.json:
```json
{
    "body": "<a id='comment:4'></a>Does this change just disable the animation? \nI'd have expected something on the Python end of it too.",
    "created_at": "2016-12-10T08:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407606",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>Does this change just disable the animation? 
I'd have expected something on the Python end of it too.



---

archive/issue_comments_407607.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 dimpase]:\n> I'd have expected something on the Python end of it too.\n\nSince all of the rendering happens in JavaScript, there is no need to alter any Python for this ticket. With these changes the scene is rendered only upon user interaction.",
    "created_at": "2016-12-10T20:33:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407607",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:5'></a>Replying to [comment:4 dimpase]:
> I'd have expected something on the Python end of it too.

Since all of the rendering happens in JavaScript, there is no need to alter any Python for this ticket. With these changes the scene is rendered only upon user interaction.



---

archive/issue_comments_407608.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 paulmasson]:\n> Replying to [comment:4 dimpase]:\n> > I'd have expected something on the Python end of it too.\n\n> Since all of the rendering happens in JavaScript, there is no need to alter any Python for this ticket. With these changes the scene is rendered only upon user interaction.\n\nI mean, `animate` is set to `false` and remains so, and several pieces in the code\nare conditional on its value. I'd imagine that it ought to be under the user control whether to animate or not. What is the point, can't you just remove these that are only executed for `animate==true`, and make the rest unconditional? \n\nI also really do not understand how the examples touched by this change are relevant for Sage. OK, these are examples how to render something in javascript. So?",
    "created_at": "2016-12-10T21:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407608",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>Replying to [comment:5 paulmasson]:
> Replying to [comment:4 dimpase]:
> > I'd have expected something on the Python end of it too.

> Since all of the rendering happens in JavaScript, there is no need to alter any Python for this ticket. With these changes the scene is rendered only upon user interaction.

I mean, `animate` is set to `false` and remains so, and several pieces in the code
are conditional on its value. I'd imagine that it ought to be under the user control whether to animate or not. What is the point, can't you just remove these that are only executed for `animate==true`, and make the rest unconditional? 

I also really do not understand how the examples touched by this change are relevant for Sage. OK, these are examples how to render something in javascript. So?



---

archive/issue_comments_407609.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 dimpase]:\n> Replying to [comment:5 paulmasson]:\n> > Replying to [comment:4 dimpase]:\n\n> I mean, `animate` is set to `false` and remains so, and several pieces in the code\n> are conditional on its value. I'd imagine that it ought to be under the user control whether to animate or not. What is the point, can't you just remove these that are only executed for `animate==true`, and make the rest unconditional? \n\nAnimation is not currently supported by this viewer but will be, at which point there will be a keyword option `animate` that will set the JavaScript variable. The conditionals will be necessary at some point in the near future and are included in preparation for additional functionality.\n> I also really do not understand how the examples touched by this change are relevant for Sage. OK, these are examples how to render something in javascript. So?\n\nThe examples are embedded in the documentation for this viewer. If you build the documentation, you'll see them in the file `threejs.html` in `reference/plot3d`.",
    "created_at": "2016-12-10T22:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407609",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:7'></a>Replying to [comment:6 dimpase]:
> Replying to [comment:5 paulmasson]:
> > Replying to [comment:4 dimpase]:

> I mean, `animate` is set to `false` and remains so, and several pieces in the code
> are conditional on its value. I'd imagine that it ought to be under the user control whether to animate or not. What is the point, can't you just remove these that are only executed for `animate==true`, and make the rest unconditional? 

Animation is not currently supported by this viewer but will be, at which point there will be a keyword option `animate` that will set the JavaScript variable. The conditionals will be necessary at some point in the near future and are included in preparation for additional functionality.
> I also really do not understand how the examples touched by this change are relevant for Sage. OK, these are examples how to render something in javascript. So?

The examples are embedded in the documentation for this viewer. If you build the documentation, you'll see them in the file `threejs.html` in `reference/plot3d`.



---

archive/issue_comments_407610.json:
```json
{
    "body": "<a id='comment:8'></a>I'd like to see a comment in the code explaining the change, as it's\nquite counter-intuitive.",
    "created_at": "2016-12-11T22:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407610",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>I'd like to see a comment in the code explaining the change, as it's
quite counter-intuitive.



---

archive/issue_comments_407611.json:
```json
{
    "body": "Changing commit from \"48bd38d20a0f03d9f283203d6243578719e92cb7\" to \"a1e206c71a4ab1acfa5969c70e3ec45ed542d3a2\"",
    "created_at": "2016-12-11T23:55:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407611",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "48bd38d20a0f03d9f283203d6243578719e92cb7" to "a1e206c71a4ab1acfa5969c70e3ec45ed542d3a2"



---

archive/issue_comments_407612.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-11T23:55:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407612",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_407613.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:8 dimpase]:\n> I'd like to see a comment in the code explaining the change, as it's\n> quite counter-intuitive.  \n\nDone.",
    "created_at": "2016-12-11T23:57:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407613",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:10'></a>Replying to [comment:8 dimpase]:
> I'd like to see a comment in the code explaining the change, as it's
> quite counter-intuitive.  

Done.



---

archive/issue_comments_407614.json:
```json
{
    "body": "<a id='comment:11'></a>looks good to me, thanks!",
    "created_at": "2016-12-14T23:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407614",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>looks good to me, thanks!



---

archive/issue_comments_407615.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2016-12-14T23:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407615",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_407616.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-12-14T23:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407616",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_407617.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-12-24T19:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407617",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_407618.json:
```json
{
    "body": "Changing branch from \"u/paulmasson/22042\" to \"a1e206c71a4ab1acfa5969c70e3ec45ed542d3a2\"",
    "created_at": "2016-12-24T19:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22042#issuecomment-407618",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/paulmasson/22042" to "a1e206c71a4ab1acfa5969c70e3ec45ed542d3a2"



---

archive/issue_events_058012.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-24T19:47:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22042",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22042#event-58012"
}
```
