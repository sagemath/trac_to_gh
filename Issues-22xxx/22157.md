# Issue 22157: Add SPQR-tree decomposition for 2-vertex-connected graphs

archive/issues_021920.json:
```json
{
    "assignees": [],
    "body": "Addition of a method spqr_tree() to generic_graph.py to decompose a 2-vertex-connected graph into cycles, cocycles, and 3-vertex-connected blocks.\n\nCC:  @dcoudert @meghanamreddy @sagetrac-saiharsh\n\nComponent: **graph theory**\n\nKeywords: **connectivity, decomposition, gsoc2018**\n\nAuthor: **Tondomker Sai Harsh**\n\nBranch/Commit: **[`c7ab364`](https://github.com/sagemath/sagetrac-mirror/commit/c7ab3646d1623334a567c475489503f3968ede64)**\n\nReviewer: **David Coudert, Meghana M Reddy**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22157_\n\n",
    "closed_at": "2018-08-11T16:55:08Z",
    "created_at": "2017-01-09T05:46:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add SPQR-tree decomposition for 2-vertex-connected graphs",
    "type": "issue",
    "updated_at": "2018-08-11T16:55:08Z",
    "url": "https://github.com/sagemath/sage/issues/22157",
    "user": "https://github.com/sagetrac-jfallon"
}
```
Addition of a method spqr_tree() to generic_graph.py to decompose a 2-vertex-connected graph into cycles, cocycles, and 3-vertex-connected blocks.

CC:  @dcoudert @meghanamreddy @sagetrac-saiharsh

Component: **graph theory**

Keywords: **connectivity, decomposition, gsoc2018**

Author: **Tondomker Sai Harsh**

Branch/Commit: **[`c7ab364`](https://github.com/sagemath/sagetrac-mirror/commit/c7ab3646d1623334a567c475489503f3968ede64)**

Reviewer: **David Coudert, Meghana M Reddy**

_Issue created by migration from https://trac.sagemath.org/ticket/22157_





---

archive/issue_events_307450.json:
```json
{
    "actor": "https://github.com/sagetrac-jfallon",
    "created_at": "2017-01-09T05:46:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307450"
}
```



---

archive/issue_events_307451.json:
```json
{
    "actor": "https://github.com/sagetrac-jfallon",
    "created_at": "2017-01-09T05:46:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307451"
}
```



---

archive/issue_events_307452.json:
```json
{
    "actor": "https://github.com/sagetrac-jfallon",
    "created_at": "2017-01-09T05:46:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307452"
}
```



---

archive/issue_events_307453.json:
```json
{
    "actor": "https://github.com/sagetrac-jfallon",
    "created_at": "2017-01-09T05:46:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307453"
}
```



---

archive/issue_comments_326900.json:
```json
{
    "body": "Branch: **[u/jfallon/spqr_tree](https://github.com/sagemath/sagetrac-mirror/tree/u/jfallon/spqr_tree)**",
    "created_at": "2017-01-09T06:47:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326900",
    "user": "https://github.com/sagetrac-jfallon"
}
```

Branch: **[u/jfallon/spqr_tree](https://github.com/sagemath/sagetrac-mirror/tree/u/jfallon/spqr_tree)**



---

archive/issue_comments_326901.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI'll be happy to help reviewing this method.",
    "created_at": "2017-01-09T14:58:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326901",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:2" align="right">comment:2</div>

I'll be happy to help reviewing this method.



---

archive/issue_comments_326902.json:
```json
{
    "body": "Commit: **[`15b5859`](https://github.com/sagemath/sagetrac-mirror/commit/15b585938b9d033e7a2e75809407ebcba6dfd435)**",
    "created_at": "2017-01-09T18:43:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326902",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`15b5859`](https://github.com/sagemath/sagetrac-mirror/commit/15b585938b9d033e7a2e75809407ebcba6dfd435)**



---

archive/issue_comments_326903.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15b585938b9d033e7a2e75809407ebcba6dfd435\"><code>15b5859</code></a></td><td><code>First commit early version with twosplit helper function and spqr_tre() method.</code></td></tr></table>\n",
    "created_at": "2017-01-09T18:43:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326903",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15b585938b9d033e7a2e75809407ebcba6dfd435"><code>15b5859</code></a></td><td><code>First commit early version with twosplit helper function and spqr_tre() method.</code></td></tr></table>




---

archive/issue_comments_326904.json:
```json
{
    "body": "Reviewer: **dcoudert**",
    "created_at": "2017-01-09T20:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326904",
    "user": "https://github.com/sagetrac-jfallon"
}
```

Reviewer: **dcoudert**



---

archive/issue_comments_326905.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nWhen I look at the code, I see many many modifications in various functions. I hope it is only a side effect of the tool to see the commits and that you have only touch methods `twosplit` and `spqr_tree`.\n\nThe proposed method is far from being a linear time algorithm. Although I was not expecting the implementation to perfectly follow the time complexity, and we are for sure more interested by the functionality than by it's running time, I'm surprised that you use methods such as `vertex_connectivity` or `is_isomorphic`. You have also lots of graph copies and such operations are also time consuming. I fear that this code will be usable only for small graphs, while it would be very useful for graphs with thousands of nodes.\n\nCould you add more comments in the code. So far it is really hard to follow what you are doing and why. Thanks.",
    "created_at": "2017-01-10T12:10:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326905",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:5" align="right">comment:5</div>

When I look at the code, I see many many modifications in various functions. I hope it is only a side effect of the tool to see the commits and that you have only touch methods `twosplit` and `spqr_tree`.

The proposed method is far from being a linear time algorithm. Although I was not expecting the implementation to perfectly follow the time complexity, and we are for sure more interested by the functionality than by it's running time, I'm surprised that you use methods such as `vertex_connectivity` or `is_isomorphic`. You have also lots of graph copies and such operations are also time consuming. I fear that this code will be usable only for small graphs, while it would be very useful for graphs with thousands of nodes.

Could you add more comments in the code. So far it is really hard to follow what you are doing and why. Thanks.



---

archive/issue_comments_326906.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nRegarding the other functions, all I have done to the generic_graph.py file is to paste in the two functions; I have not touched anything else. Given the complexity cost of calling other functions, it seems best to accomplish the transition from crude to code by overhaul; adding comments to the current content will be time best spent making large improvements. The function did what I needed as a helper for a larger function; for contribution to Sage it needs better treatment.",
    "created_at": "2017-01-10T16:11:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326906",
    "user": "https://github.com/sagetrac-jfallon"
}
```

<div id="comment:6" align="right">comment:6</div>

Regarding the other functions, all I have done to the generic_graph.py file is to paste in the two functions; I have not touched anything else. Given the complexity cost of calling other functions, it seems best to accomplish the transition from crude to code by overhaul; adding comments to the current content will be time best spent making large improvements. The function did what I needed as a helper for a larger function; for contribution to Sage it needs better treatment.



---

archive/issue_comments_326907.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIf I understand well, your first objective is to have a method returning a `SPQR-tree`, but you don't need this method to be fast and you are not planning yet to implement best possible method. This is perfectly understandable and in such case we need to add a warning or todo flag explaining that a faster algorithm could be implemented.\n\nsome remarks:\n\nIn method `twosplit` you can avoid calling twice `vertex_connectivity`. First call `cut_size,cut_vertices = self.vertex_connectivity(value_only=False)` and then check if `cut_size != 2`.\n\nIn method `spqr_tree`, you can avoid a call to `vertex_connectivity` doing `if not self.is_connected() and len(self.blocks_and_cut_vertices()[1]) > 0: ...`.\n\nWe can certainly make a small method to check that `A` is a cycle. For instance `if A.order()==A.size() and min(A.degree())==max(A.degree() and A.is_connected()` ? Unfortunately, no such method has been added to `graph_classes` yet.\n\nYou don't need to call `GraphGenerators.EmptyGraph()`. You can call directly `Graph(multiedges=True)` if you want to allow multi edges.\n\nInstead of `e in SPR[i].edges(labels = False)` you could test `SPR[i].has_edge(e)`. Many times.",
    "created_at": "2017-01-11T16:50:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326907",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:7" align="right">comment:7</div>

If I understand well, your first objective is to have a method returning a `SPQR-tree`, but you don't need this method to be fast and you are not planning yet to implement best possible method. This is perfectly understandable and in such case we need to add a warning or todo flag explaining that a faster algorithm could be implemented.

some remarks:

In method `twosplit` you can avoid calling twice `vertex_connectivity`. First call `cut_size,cut_vertices = self.vertex_connectivity(value_only=False)` and then check if `cut_size != 2`.

In method `spqr_tree`, you can avoid a call to `vertex_connectivity` doing `if not self.is_connected() and len(self.blocks_and_cut_vertices()[1]) > 0: ...`.

We can certainly make a small method to check that `A` is a cycle. For instance `if A.order()==A.size() and min(A.degree())==max(A.degree() and A.is_connected()` ? Unfortunately, no such method has been added to `graph_classes` yet.

You don't need to call `GraphGenerators.EmptyGraph()`. You can call directly `Graph(multiedges=True)` if you want to allow multi edges.

Instead of `e in SPR[i].edges(labels = False)` you could test `SPR[i].has_edge(e)`. Many times.



---

archive/issue_comments_326908.json:
```json
{
    "body": "Changed commit from **[`15b5859`](https://github.com/sagemath/sagetrac-mirror/commit/15b585938b9d033e7a2e75809407ebcba6dfd435)** to **[`f19a806`](https://github.com/sagemath/sagetrac-mirror/commit/f19a806617ad5cb179054dcb2a93264c95fc97d9)**",
    "created_at": "2017-01-13T05:12:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326908",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`15b5859`](https://github.com/sagemath/sagetrac-mirror/commit/15b585938b9d033e7a2e75809407ebcba6dfd435)** to **[`f19a806`](https://github.com/sagemath/sagetrac-mirror/commit/f19a806617ad5cb179054dcb2a93264c95fc97d9)**



---

archive/issue_comments_326909.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f19a806617ad5cb179054dcb2a93264c95fc97d9\"><code>f19a806</code></a></td><td><code>Removed many copy actions; replaced some calls to vertex_connectivity; general streamlines; more comments added</code></td></tr></table>\n",
    "created_at": "2017-01-13T05:12:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326909",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f19a806617ad5cb179054dcb2a93264c95fc97d9"><code>f19a806</code></a></td><td><code>Removed many copy actions; replaced some calls to vertex_connectivity; general streamlines; more comments added</code></td></tr></table>




---

archive/issue_comments_326910.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nSome proposals to improve method `twosplit`.\n* the name of the method is not appropriate. It should be at least `two_split` or something more clear\n* You can use method `self._scream_if_not_simple()` to avoid adding your own tests.\n* `virtual_edge = (cut_vertices[0],cut_vertices[1])` -> `virtual_edge = tuple(cut_vertices)`\n* Instead of `H = self.subgraph(vertices = [v for v in self.vertices() if v not in cut_vertices])` you can do the following which should be slightly faster: \n\n```\nH = Graph(self.edges(labels=False))\nH.delete_vertices(cut_vertices)\n```\n* In loop `for K in CC:...` you can do that, thus saving a useless creation of a subgraph (graph copies and taking subgraph can be a long operation):\n\n```\n    cut_sides = []\n    for K in CC:\n        for u in cut_vertices:\n            K.add_edges([(u,v) for v in self.neighbor_iterator(u) if v in K])\n        K.allow_multiple_edges(True) ## why do we need that ???\n        if not K.has_edge(virtual_edge):\n            K.add_edge(virtual_edge)\n        cut_sides.append(K)\n```\n* The loop `for i in range(Comps + 1): cocycles.add_edge(virtual_edge)` could be replaced with `cocycles.add_edges([virtual_edge]*(Comps+1))`. Very similar in fact.\n* Also, do not hesitate to add an empty line between important blocs of code/comments to ease the readability.\n\n\nOverall, the method should be something like that:\n\n```\n    from sage.graphs.graph import Graph\n    self._scream_if_not_simple()\n\n    cut_size,cut_vertices = self.vertex_connectivity(value_only = False)\n    if cut_size != 2:\n        raise NotImplementedError(\"twosplit is only implemented on graphs with vertex connectivity 2\")\n\n    H = Graph(self.edges(labels=False))\n    H.delete_vertices(cut_vertices)\n\n    virtual_edge = tuple(cut_vertices)    \n    CC = H.connected_components_subgraphs()\n    Comps = len(CC)\n\n    # deletion of separating pair leaves connected components;\n    # we add to each of those components a virtual edge\n    # between the separating pair and restore edges incident to them\n    cut_sides = []\n    for K in CC:\n        for u in cut_vertices:\n            K.add_edges([(u,v) for v in self.neighbor_iterator(u) if v in K])\n        K.allow_multiple_edges(True) ## why ???\n        if not K.has_edge(virtual_edge):\n            K.add_edge(virtual_edge)\n        cut_sides.append(K)\n\n    # if the original graph has an edge between the separating pair\n    # of vertices, a bond with one edge more than the number of \n    # auxiliary graphs is needed for re-assembly\n    cocycles = Graph(multiedges=True)\n    if self.has_edge(virtual_edge):\n        cocycles.add_edges([virtual_edge]*(Comps+1))\n\n    # if the original graph has no edge between the separating pair\n    # of vertices but deletion of the separating pair leaves\n    # more than two components, a bond with one edge per component\n    # is needed for re-assembly\n    elif Comps > 2:\n        cocycles.add_edges([virtual_edge]*Comps)\n\n    return cut_sides,cocycles,virtual_edge\n```\n\nOf course, the modifications I proposed are not helpful to speed up the code. We need a palm-tree and the appropriate algorithm for that...",
    "created_at": "2017-01-14T17:43:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326910",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:9" align="right">comment:9</div>

Some proposals to improve method `twosplit`.
* the name of the method is not appropriate. It should be at least `two_split` or something more clear
* You can use method `self._scream_if_not_simple()` to avoid adding your own tests.
* `virtual_edge = (cut_vertices[0],cut_vertices[1])` -> `virtual_edge = tuple(cut_vertices)`
* Instead of `H = self.subgraph(vertices = [v for v in self.vertices() if v not in cut_vertices])` you can do the following which should be slightly faster: 

```
H = Graph(self.edges(labels=False))
H.delete_vertices(cut_vertices)
```
* In loop `for K in CC:...` you can do that, thus saving a useless creation of a subgraph (graph copies and taking subgraph can be a long operation):

```
    cut_sides = []
    for K in CC:
        for u in cut_vertices:
            K.add_edges([(u,v) for v in self.neighbor_iterator(u) if v in K])
        K.allow_multiple_edges(True) ## why do we need that ???
        if not K.has_edge(virtual_edge):
            K.add_edge(virtual_edge)
        cut_sides.append(K)
```
* The loop `for i in range(Comps + 1): cocycles.add_edge(virtual_edge)` could be replaced with `cocycles.add_edges([virtual_edge]*(Comps+1))`. Very similar in fact.
* Also, do not hesitate to add an empty line between important blocs of code/comments to ease the readability.


Overall, the method should be something like that:

```
    from sage.graphs.graph import Graph
    self._scream_if_not_simple()

    cut_size,cut_vertices = self.vertex_connectivity(value_only = False)
    if cut_size != 2:
        raise NotImplementedError("twosplit is only implemented on graphs with vertex connectivity 2")

    H = Graph(self.edges(labels=False))
    H.delete_vertices(cut_vertices)

    virtual_edge = tuple(cut_vertices)    
    CC = H.connected_components_subgraphs()
    Comps = len(CC)

    # deletion of separating pair leaves connected components;
    # we add to each of those components a virtual edge
    # between the separating pair and restore edges incident to them
    cut_sides = []
    for K in CC:
        for u in cut_vertices:
            K.add_edges([(u,v) for v in self.neighbor_iterator(u) if v in K])
        K.allow_multiple_edges(True) ## why ???
        if not K.has_edge(virtual_edge):
            K.add_edge(virtual_edge)
        cut_sides.append(K)

    # if the original graph has an edge between the separating pair
    # of vertices, a bond with one edge more than the number of 
    # auxiliary graphs is needed for re-assembly
    cocycles = Graph(multiedges=True)
    if self.has_edge(virtual_edge):
        cocycles.add_edges([virtual_edge]*(Comps+1))

    # if the original graph has no edge between the separating pair
    # of vertices but deletion of the separating pair leaves
    # more than two components, a bond with one edge per component
    # is needed for re-assembly
    elif Comps > 2:
        cocycles.add_edges([virtual_edge]*Comps)

    return cut_sides,cocycles,virtual_edge
```

Of course, the modifications I proposed are not helpful to speed up the code. We need a palm-tree and the appropriate algorithm for that...



---

archive/issue_comments_326911.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAny news on this ticket? It would be very useful to have this method.",
    "created_at": "2017-10-21T09:27:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326911",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:10" align="right">comment:10</div>

Any news on this ticket? It would be very useful to have this method.



---

archive/issue_events_307454.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-10-21T09:27:33Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307454"
}
```



---

archive/issue_events_307455.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2017-10-21T09:27:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307455"
}
```



---

archive/issue_comments_326912.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/283fc30d99469bcefb5ee81a001200caf7b4897e\"><code>283fc30</code></a></td><td><code>Some efficiency and clariay changes, especially prefering list objects over graphs when possible.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e6c38df5a07c41ec470aa6213292afcd6b0ddca\"><code>8e6c38d</code></a></td><td><code>Renamed helper function `cleave' to better describe its behavior splitting the graph at a cleavage unit. Some graph objecs were replaced with lists, where possible, for minor efficiency improvement.</code></td></tr></table>\n",
    "created_at": "2017-10-30T18:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326912",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/283fc30d99469bcefb5ee81a001200caf7b4897e"><code>283fc30</code></a></td><td><code>Some efficiency and clariay changes, especially prefering list objects over graphs when possible.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e6c38df5a07c41ec470aa6213292afcd6b0ddca"><code>8e6c38d</code></a></td><td><code>Renamed helper function `cleave' to better describe its behavior splitting the graph at a cleavage unit. Some graph objecs were replaced with lists, where possible, for minor efficiency improvement.</code></td></tr></table>




---

archive/issue_comments_326913.json:
```json
{
    "body": "Changed commit from **[`f19a806`](https://github.com/sagemath/sagetrac-mirror/commit/f19a806617ad5cb179054dcb2a93264c95fc97d9)** to **[`8e6c38d`](https://github.com/sagemath/sagetrac-mirror/commit/8e6c38df5a07c41ec470aa6213292afcd6b0ddca)**",
    "created_at": "2017-10-30T18:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326913",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f19a806`](https://github.com/sagemath/sagetrac-mirror/commit/f19a806617ad5cb179054dcb2a93264c95fc97d9)** to **[`8e6c38d`](https://github.com/sagemath/sagetrac-mirror/commit/8e6c38df5a07c41ec470aa6213292afcd6b0ddca)**



---

archive/issue_comments_326914.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nCould anyone explain me the current status of this ticket, how far it's completed? and what are the gaps?",
    "created_at": "2018-03-22T21:11:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326914",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:12" align="right">comment:12</div>

Could anyone explain me the current status of this ticket, how far it's completed? and what are the gaps?



---

archive/issue_comments_326915.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThe proposed patch implements a slow version of the decomposition of a graph into 3 connected components. It must be rebased on last beta, and the proposed methods must be moved to `graph.py` since it is for undirected graphs only.",
    "created_at": "2018-03-24T08:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326915",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:13" align="right">comment:13</div>

The proposed patch implements a slow version of the decomposition of a graph into 3 connected components. It must be rebased on last beta, and the proposed methods must be moved to `graph.py` since it is for undirected graphs only.



---

archive/issue_events_307456.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-04-26T13:32:28Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307456"
}
```



---

archive/issue_events_307457.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2018-04-26T13:32:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307457"
}
```



---

archive/issue_comments_326916.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e407edbfce9de3192352dca88e6ffab009441e3f\"><code>e407edb</code></a></td><td><code>First commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3\"><code>ad12f54</code></a></td><td><code>Minor change in definition.</code></td></tr></table>\n",
    "created_at": "2018-05-25T10:16:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326916",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:15"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e407edbfce9de3192352dca88e6ffab009441e3f"><code>e407edb</code></a></td><td><code>First commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3"><code>ad12f54</code></a></td><td><code>Minor change in definition.</code></td></tr></table>




---

archive/issue_comments_326917.json:
```json
{
    "body": "Changed commit from **[`8e6c38d`](https://github.com/sagemath/sagetrac-mirror/commit/8e6c38df5a07c41ec470aa6213292afcd6b0ddca)** to **[`ad12f54`](https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3)**",
    "created_at": "2018-05-25T10:16:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326917",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

Changed commit from **[`8e6c38d`](https://github.com/sagemath/sagetrac-mirror/commit/8e6c38df5a07c41ec470aa6213292afcd6b0ddca)** to **[`ad12f54`](https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3)**



---

archive/issue_comments_326918.json:
```json
{
    "body": "Changed branch from **[u/jfallon/spqr_tree](https://github.com/sagemath/sagetrac-mirror/tree/u/jfallon/spqr_tree)** to **[public/22157_spqrtree](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree)**",
    "created_at": "2018-05-25T10:16:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326918",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

Changed branch from **[u/jfallon/spqr_tree](https://github.com/sagemath/sagetrac-mirror/tree/u/jfallon/spqr_tree)** to **[public/22157_spqrtree](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree)**



---

archive/issue_comments_326919.json:
```json
{
    "body": "Changed commit from **[`ad12f54`](https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3)** to **[`d7a01ac`](https://github.com/sagemath/sagetrac-mirror/commit/d7a01acfecd03cab6e42252c0330edcd52f1d42a)**",
    "created_at": "2018-05-25T10:40:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326919",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ad12f54`](https://github.com/sagemath/sagetrac-mirror/commit/ad12f54045500ef0f9884fd36eb21073ac5815c3)** to **[`d7a01ac`](https://github.com/sagemath/sagetrac-mirror/commit/d7a01acfecd03cab6e42252c0330edcd52f1d42a)**



---

archive/issue_comments_326920.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7a01acfecd03cab6e42252c0330edcd52f1d42a\"><code>d7a01ac</code></a></td><td><code>Minor changes</code></td></tr></table>\n",
    "created_at": "2018-05-25T10:40:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326920",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7a01acfecd03cab6e42252c0330edcd52f1d42a"><code>d7a01ac</code></a></td><td><code>Minor changes</code></td></tr></table>




---

archive/issue_comments_326921.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nYour patch does not pass tests.\nIn the multigraph example, you must add `multiedges=True`, so\n\n```\nsage: G = Graph({0:[1,1,1,2,3],1:[4,5],2:[3,3],3:[5],4:[5],6:[2,4],7:[2,2,4,4]}, multiedges=True)\n```\n\nFurthermore, have you checked that the returned solutions are correct ?\nIn the subgraphs, some multiple edges are presents but some are missing.\n\n```\nsage: G = Graph({0:[1,1,1,2,3],1:[4,5],2:[3,3],3:[5],4:[5],6:[2,4],7:[2,2,4,4]}, multiedges=True)\nsage: S,C,f = G.cleave()\nsage: for g in S:\n....:     print(g.edges(labels=0))\n....: \n[(0, 1), (0, 1), (0, 1), (0, 2), (0, 3), (1, 4), (1, 5), (2, 3), (2, 4), (3, 5), (4, 5)]\n[(2, 4), (2, 6), (4, 6)]\n[(2, 4), (2, 7), (4, 7)]\n```\n\nI do prefer the following example, easier to check:\n\n```\nsage: G = graphs.CompleteBipartiteGraph(2,3)\nsage: G.add_edge(2, 3)\nsage: G.allow_multiple_edges(True)\nsage: G.add_edges(G.edges())\nsage: S,C,f = G.cleave()\nsage: for g in S:\n....:     print(g.edges(labels=0))\n....:     \n[(0, 1), (0, 2), (0, 3), (1, 2), (1, 3), (2, 3), (2, 3)]\n[(0, 1), (0, 4), (1, 4)]\n```\nIt seems the problem is with multiple edges incident to a cut vertex.",
    "created_at": "2018-05-26T12:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326921",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:18" align="right">comment:18</div>

Your patch does not pass tests.
In the multigraph example, you must add `multiedges=True`, so

```
sage: G = Graph({0:[1,1,1,2,3],1:[4,5],2:[3,3],3:[5],4:[5],6:[2,4],7:[2,2,4,4]}, multiedges=True)
```

Furthermore, have you checked that the returned solutions are correct ?
In the subgraphs, some multiple edges are presents but some are missing.

```
sage: G = Graph({0:[1,1,1,2,3],1:[4,5],2:[3,3],3:[5],4:[5],6:[2,4],7:[2,2,4,4]}, multiedges=True)
sage: S,C,f = G.cleave()
sage: for g in S:
....:     print(g.edges(labels=0))
....: 
[(0, 1), (0, 1), (0, 1), (0, 2), (0, 3), (1, 4), (1, 5), (2, 3), (2, 4), (3, 5), (4, 5)]
[(2, 4), (2, 6), (4, 6)]
[(2, 4), (2, 7), (4, 7)]
```

I do prefer the following example, easier to check:

```
sage: G = graphs.CompleteBipartiteGraph(2,3)
sage: G.add_edge(2, 3)
sage: G.allow_multiple_edges(True)
sage: G.add_edges(G.edges())
sage: S,C,f = G.cleave()
sage: for g in S:
....:     print(g.edges(labels=0))
....:     
[(0, 1), (0, 2), (0, 3), (1, 2), (1, 3), (2, 3), (2, 3)]
[(0, 1), (0, 4), (1, 4)]
```
It seems the problem is with multiple edges incident to a cut vertex.



---

archive/issue_comments_326922.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@dcoudert](#comment%3A18):\n> Your patch does not pass tests.\n> In the multigraph example, you must add `multiedges=True`, so\n> \n> ```\n> sage: G = Graph({0:[1,1,1,2,3],1:[4,5],2:[3,3],3:[5],4:[5],6:[2,4],7:[2,2,4,4]}, multiedges=True)\n> ```\n> \n> Furthermore, have you checked that the returned solutions are correct ?\n> In the subgraphs, some multiple edges are presents but some are missing.\n> \n> ```\n> sage: G = Graph({0:[1,1,1,2,3],1:[4,5],2:[3,3],3:[5],4:[5],6:[2,4],7:[2,2,4,4]}, multiedges=True)\n> sage: S,C,f = G.cleave()\n> sage: for g in S:\n> ....:     print(g.edges(labels=0))\n> ....: \n> [(0, 1), (0, 1), (0, 1), (0, 2), (0, 3), (1, 4), (1, 5), (2, 3), (2, 4), (3, 5), (4, 5)]\n> [(2, 4), (2, 6), (4, 6)]\n> [(2, 4), (2, 7), (4, 7)]\n> ```\n> \n> I do prefer the following example, easier to check:\n> \n> ```\n> sage: G = graphs.CompleteBipartiteGraph(2,3)\n> sage: G.add_edge(2, 3)\n> sage: G.allow_multiple_edges(True)\n> sage: G.add_edges(G.edges())\n> sage: S,C,f = G.cleave()\n> sage: for g in S:\n> ....:     print(g.edges(labels=0))\n> ....:     \n> [(0, 1), (0, 2), (0, 3), (1, 2), (1, 3), (2, 3), (2, 3)]\n> [(0, 1), (0, 4), (1, 4)]\n> ```\n> It seems the problem is with multiple edges incident to a cut vertex.\n\nYes, there are few edges missing in `S` because we are adding only one edge in a component between `u` and cut vertex even if there are multiple edges between them. Please see below.\n\n```\nfor u in cut_vertices:\n    component.add_edges([(u,v) for v in G.neighbor_iterator(u) if v in componentVertices])\n```\n\\\\\nShall I iterate over cut vertices edges using `G.edge_iterator` and add edges like below.\n\n```\nfor u in cut_vertices:\n    component.add_edges([(u,e[1]) for e in G.edge_iterator(u) if e[1] in componentVertices])\n```\nOr is there any better way to find number of multiple edges between `u` and `v`. \\\\\n\\\\\nI feel the `cocycles` if there is an edge between the separating pair then it should be like\n\n```\ncocycles.add_edges([virtual_edge]*(Comps+(number of multiple edges between cutvertices)))\n```\nPlease let me know if I am wrong.",
    "created_at": "2018-05-27T09:25:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326922",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@dcoudert](#comment%3A18):
> Your patch does not pass tests.
> In the multigraph example, you must add `multiedges=True`, so
> 
> ```
> sage: G = Graph({0:[1,1,1,2,3],1:[4,5],2:[3,3],3:[5],4:[5],6:[2,4],7:[2,2,4,4]}, multiedges=True)
> ```
> 
> Furthermore, have you checked that the returned solutions are correct ?
> In the subgraphs, some multiple edges are presents but some are missing.
> 
> ```
> sage: G = Graph({0:[1,1,1,2,3],1:[4,5],2:[3,3],3:[5],4:[5],6:[2,4],7:[2,2,4,4]}, multiedges=True)
> sage: S,C,f = G.cleave()
> sage: for g in S:
> ....:     print(g.edges(labels=0))
> ....: 
> [(0, 1), (0, 1), (0, 1), (0, 2), (0, 3), (1, 4), (1, 5), (2, 3), (2, 4), (3, 5), (4, 5)]
> [(2, 4), (2, 6), (4, 6)]
> [(2, 4), (2, 7), (4, 7)]
> ```
> 
> I do prefer the following example, easier to check:
> 
> ```
> sage: G = graphs.CompleteBipartiteGraph(2,3)
> sage: G.add_edge(2, 3)
> sage: G.allow_multiple_edges(True)
> sage: G.add_edges(G.edges())
> sage: S,C,f = G.cleave()
> sage: for g in S:
> ....:     print(g.edges(labels=0))
> ....:     
> [(0, 1), (0, 2), (0, 3), (1, 2), (1, 3), (2, 3), (2, 3)]
> [(0, 1), (0, 4), (1, 4)]
> ```
> It seems the problem is with multiple edges incident to a cut vertex.

Yes, there are few edges missing in `S` because we are adding only one edge in a component between `u` and cut vertex even if there are multiple edges between them. Please see below.

```
for u in cut_vertices:
    component.add_edges([(u,v) for v in G.neighbor_iterator(u) if v in componentVertices])
```
\\
Shall I iterate over cut vertices edges using `G.edge_iterator` and add edges like below.

```
for u in cut_vertices:
    component.add_edges([(u,e[1]) for e in G.edge_iterator(u) if e[1] in componentVertices])
```
Or is there any better way to find number of multiple edges between `u` and `v`. \\
\\
I feel the `cocycles` if there is an edge between the separating pair then it should be like

```
cocycles.add_edges([virtual_edge]*(Comps+(number of multiple edges between cutvertices)))
```
Please let me know if I am wrong.



---

archive/issue_comments_326923.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n> Shall I iterate over cut vertices edges using `G.edge_iterator` and add edges like below.\n> \n> ```\n> for u in cut_vertices:\n>     component.add_edges([(u,e[1]) for e in G.edge_iterator(u) if e[1] in componentVertices])\n> ```\n\nYou can do directly:\n\n```\ncomponent.add_edges([e for e in G.edge_iterator(vertex=cut_vertices) if e[0] in componentVertices or e[1] in componentVertices])\n```\n\\\\\n\n> I feel the `cocycles` if there is an edge between the separating pair then it should be like\n> \n> ```\n> cocycles.add_edges([virtual_edge]*(Comps+(number of multiple edges between cutvertices)))\n> ```\n> Please let me know if I am wrong. \n\nGood question. In fact, it might be even more. Indeed, you create a list of subgraphs, each corresponding to the vertices of a connected component in the graph minus the cut vertices, plus the cut vertices and edges between them.\nHence, if we have 2 edges between the cut vertices, we must also have 2 edges between these vertices in each subgraph.\n\nConsequently, the cocycle contains `(#comps + 1) * (number of multiple edges between cutvertices)` edges when we have edges between the cut vertices and `#comps` otherwise. \n\n\nDo not forget to correct all minor issues in the method like <code>if \\`G\\` is a biconnected..</code> -> <code>If \\`G\\` is a biconnected..</code>, in the description of the output you must say that `C` is `cocylcles`, etc.",
    "created_at": "2018-05-28T08:17:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326923",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:20" align="right">comment:20</div>

> Shall I iterate over cut vertices edges using `G.edge_iterator` and add edges like below.
> 
> ```
> for u in cut_vertices:
>     component.add_edges([(u,e[1]) for e in G.edge_iterator(u) if e[1] in componentVertices])
> ```

You can do directly:

```
component.add_edges([e for e in G.edge_iterator(vertex=cut_vertices) if e[0] in componentVertices or e[1] in componentVertices])
```
\\

> I feel the `cocycles` if there is an edge between the separating pair then it should be like
> 
> ```
> cocycles.add_edges([virtual_edge]*(Comps+(number of multiple edges between cutvertices)))
> ```
> Please let me know if I am wrong. 

Good question. In fact, it might be even more. Indeed, you create a list of subgraphs, each corresponding to the vertices of a connected component in the graph minus the cut vertices, plus the cut vertices and edges between them.
Hence, if we have 2 edges between the cut vertices, we must also have 2 edges between these vertices in each subgraph.

Consequently, the cocycle contains `(#comps + 1) * (number of multiple edges between cutvertices)` edges when we have edges between the cut vertices and `#comps` otherwise. 


Do not forget to correct all minor issues in the method like <code>if \`G\` is a biconnected..</code> -> <code>If \`G\` is a biconnected..</code>, in the description of the output you must say that `C` is `cocylcles`, etc.



---

archive/issue_comments_326924.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@dcoudert](#comment%3A20):\n> Good question. In fact, it might be even more. Indeed, you create a list of subgraphs, each corresponding to the vertices of a connected component in the graph minus the cut vertices, plus the cut vertices and edges between them.\n> Hence, if we have 2 edges between the cut vertices, we must also have 2 edges between these vertices in each subgraph.\n\nSorry, I am unable to understand, does it means if `G` has 3 edges between cut vertices then each connected component of H(after removing cut vertices in G) should have 3 virtual edges between cut vertices?\n\nIf no edge between cut vertices in G, it's clear, (#comps).\n \n> Do not forget to correct all minor issues in the method like <code>if \\`G\\` is a biconnected..</code> -> <code>If \\`G\\` is a biconnected..</code>, in the description of the output you must say that `C` is `cocylcles`, etc.\n\nYes I will and update it in next commit.",
    "created_at": "2018-05-28T09:24:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326924",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@dcoudert](#comment%3A20):
> Good question. In fact, it might be even more. Indeed, you create a list of subgraphs, each corresponding to the vertices of a connected component in the graph minus the cut vertices, plus the cut vertices and edges between them.
> Hence, if we have 2 edges between the cut vertices, we must also have 2 edges between these vertices in each subgraph.

Sorry, I am unable to understand, does it means if `G` has 3 edges between cut vertices then each connected component of H(after removing cut vertices in G) should have 3 virtual edges between cut vertices?

If no edge between cut vertices in G, it's clear, (#comps).
 
> Do not forget to correct all minor issues in the method like <code>if \`G\` is a biconnected..</code> -> <code>If \`G\` is a biconnected..</code>, in the description of the output you must say that `C` is `cocylcles`, etc.

Yes I will and update it in next commit.



---

archive/issue_comments_326925.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n> Sorry, I am unable to understand, does it means if `G` has 3 edges between cut vertices then each connected component of H(after removing cut vertices in G) should have 3 virtual edges between cut vertices?\n\nIt's what I think.",
    "created_at": "2018-05-28T09:33:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326925",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:22" align="right">comment:22</div>

> Sorry, I am unable to understand, does it means if `G` has 3 edges between cut vertices then each connected component of H(after removing cut vertices in G) should have 3 virtual edges between cut vertices?

It's what I think.



---

archive/issue_comments_326926.json:
```json
{
    "body": "Changed commit from **[`d7a01ac`](https://github.com/sagemath/sagetrac-mirror/commit/d7a01acfecd03cab6e42252c0330edcd52f1d42a)** to **[`82dbe6a`](https://github.com/sagemath/sagetrac-mirror/commit/82dbe6adbd10ac1b94037b847f977e14525d5243)**",
    "created_at": "2018-05-28T18:56:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326926",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

Changed commit from **[`d7a01ac`](https://github.com/sagemath/sagetrac-mirror/commit/d7a01acfecd03cab6e42252c0330edcd52f1d42a)** to **[`82dbe6a`](https://github.com/sagemath/sagetrac-mirror/commit/82dbe6adbd10ac1b94037b847f977e14525d5243)**



---

archive/issue_comments_326927.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82dbe6adbd10ac1b94037b847f977e14525d5243\"><code>82dbe6a</code></a></td><td><code>Using sage8.3beta3 and few updates</code></td></tr></table>\n",
    "created_at": "2018-05-28T18:56:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326927",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:23"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82dbe6adbd10ac1b94037b847f977e14525d5243"><code>82dbe6a</code></a></td><td><code>Using sage8.3beta3 and few updates</code></td></tr></table>




---

archive/issue_comments_326928.json:
```json
{
    "body": "Changed branch from **[public/22157_spqrtree](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree)** to **[public/22157_spqrtree_beta3](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_beta3)**",
    "created_at": "2018-05-28T18:56:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326928",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

Changed branch from **[public/22157_spqrtree](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree)** to **[public/22157_spqrtree_beta3](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_beta3)**



---

archive/issue_comments_326929.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIt took sometime for updating it to latest beta version.\\\\\n\\\\\nI am using a variable `multiedges_bw_cutvertices` which stores the number of multiple edges between cut vertices in `G` and it's used to add number of virtual edges to each component.\\\\\nThe previous version add only one virtual edge.\n\n```\nif not component.has_edge(virtual_edge):\n    component.add_edges([virtual_edge]*multiedges_bw_cutvertices)\n```\n\nI am unable to understand why `cocycles` a dipole graph is not define when the connected components are 2? (Unable to find the supporting point)\n\n```\nelif Comps > 2:\n    cocycles.add_edges([virtual_edge]*Comps)\n```\n\nDo these examples are enough or we need to add more examples for cleave function?\n\nIn the next commit I will be updating spqr_tree function.",
    "created_at": "2018-05-29T06:14:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326929",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:24" align="right">comment:24</div>

It took sometime for updating it to latest beta version.\\
\\
I am using a variable `multiedges_bw_cutvertices` which stores the number of multiple edges between cut vertices in `G` and it's used to add number of virtual edges to each component.\\
The previous version add only one virtual edge.

```
if not component.has_edge(virtual_edge):
    component.add_edges([virtual_edge]*multiedges_bw_cutvertices)
```

I am unable to understand why `cocycles` a dipole graph is not define when the connected components are 2? (Unable to find the supporting point)

```
elif Comps > 2:
    cocycles.add_edges([virtual_edge]*Comps)
```

Do these examples are enough or we need to add more examples for cleave function?

In the next commit I will be updating spqr_tree function.



---

archive/issue_comments_326930.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\n> I am unable to understand why `cocycles` a dipole graph is not define when the connected components are 2? (Unable to find the supporting point)\n\nI don't understand the question. Please give a clear example\n\n> In the next commit I will be updating spqr_tree function. \n\nOK\n\\\\\n\nYou can get the number of edges between cut vertices as \n\n```\nif self.has_edge(virtual_edge):\n   if self.has_multiple_edges():\n      multiedges_bw_cutvertices = len(self.edge_label(cut_vertices[0],cut_vertices[1]))\n   else:\n      multiedges_bw_cutvertices = 1\nelse:\n   multiedges_bw_cutvertices = 0\n```\n\nDo `component.allow_multiple_edges(True)` before adding edges to the component. Otherwise, multiedges will not be added",
    "created_at": "2018-05-29T15:39:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326930",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:25" align="right">comment:25</div>

> I am unable to understand why `cocycles` a dipole graph is not define when the connected components are 2? (Unable to find the supporting point)

I don't understand the question. Please give a clear example

> In the next commit I will be updating spqr_tree function. 

OK
\\

You can get the number of edges between cut vertices as 

```
if self.has_edge(virtual_edge):
   if self.has_multiple_edges():
      multiedges_bw_cutvertices = len(self.edge_label(cut_vertices[0],cut_vertices[1]))
   else:
      multiedges_bw_cutvertices = 1
else:
   multiedges_bw_cutvertices = 0
```

Do `component.allow_multiple_edges(True)` before adding edges to the component. Otherwise, multiedges will not be added



---

archive/issue_comments_326931.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@dcoudert](#comment%3A25):\n\n\n\\\\\nPlease see below lines.\n\n```\n        if self.has_edge(virtual_edge):\n            cocycles.add_edges([virtual_edge]*(Comps+1)*multiedges_bw_cutvertices)\n\n        elif Comps > 2:\n            cocycles.add_edges([virtual_edge]*Comps)\n```\n\nWhen we have connected components = 2 and `G` has no virtual edge then it neither enters in if condition nor in else condition. End up by returning an empty list for `cocycle`. is it correct? \\\\\n\nIf the number of connected components is 2 and there is not virtual edge present in `G`\nthen why we are not adding virtual edges to `cocycles`?",
    "created_at": "2018-05-29T15:58:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326931",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@dcoudert](#comment%3A25):


\\
Please see below lines.

```
        if self.has_edge(virtual_edge):
            cocycles.add_edges([virtual_edge]*(Comps+1)*multiedges_bw_cutvertices)

        elif Comps > 2:
            cocycles.add_edges([virtual_edge]*Comps)
```

When we have connected components = 2 and `G` has no virtual edge then it neither enters in if condition nor in else condition. End up by returning an empty list for `cocycle`. is it correct? \\

If the number of connected components is 2 and there is not virtual edge present in `G`
then why we are not adding virtual edges to `cocycles`?



---

archive/issue_comments_326932.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nBut you must add edges to the cocycle when `Comps >= 2` ! So please change.",
    "created_at": "2018-05-30T10:19:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326932",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:27" align="right">comment:27</div>

But you must add edges to the cocycle when `Comps >= 2` ! So please change.



---

archive/issue_comments_326933.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n1. Cleave function is defined initially, knowing that input is always simple biconnected graph.\n2. As `A` is always simple according to `split_multiple_edges` algorithm in the reference paper, I feel there is no need to add `B.allow_multiple_edges(False)`.\n3. Currently, all the cycles are pushed to polygons(S-Block) but what if a cycle is tri connected i.e a triangle. I feel it need to be in `R-Block` instead of `S-Block`. Correct me, If I am wrong.\n\n4. According to `Theorem 1` in reference paper, the number of nodes in Tree need to be equal to the number of tri-connected components and the edges between nodes u,v exit only if the components u and v share the common edge. The current implementation is adding all the required edges and the generated tree seems to be correct, yet not found a counter case yet.\nIs there any simple way to verify the output tree?\n\\\\ \n\\\\\n5. I tried with few examples.\n\n```\nG = Graph({1:[2,3], 3:[2, 5], 2:[4], 6:[4,5]})\nG = Graph({0:[1,2,3],1:[4,5],2:[3],3:[5],4:[5],6:[2,4]})\n# Refernce Paper graph\nG = Graph({1:[2, 4, 8, 12, 13], 2:[1, 3, 13], 3:[2, 4, 13], 4:[1, 3, 7, 5], 5:[4, 6, 7, 8], 6:[5, 7], 7:[4, 5, 6], 8:[1, 5, 9, 11, 12], 9:[8, 10, 11, 12], 10:[9, 11, 12], 11:[8, 9, 10], 12:[1, 8, 9, 10]})\n```\nAFAIK, the output seems to be correct.\nPlease let me know the case in which it's giving an incorrect answer.\n6. There is a minor change in the `cleave function`, multiedges_bw_cutvertices -> num_virtual_edge_add, my bad I gave initially the incorrect name. \n`num_virtual_edge_add` says the number of virtual edges needs to be added to a component.",
    "created_at": "2018-06-03T17:27:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326933",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:28" align="right">comment:28</div>

1. Cleave function is defined initially, knowing that input is always simple biconnected graph.
2. As `A` is always simple according to `split_multiple_edges` algorithm in the reference paper, I feel there is no need to add `B.allow_multiple_edges(False)`.
3. Currently, all the cycles are pushed to polygons(S-Block) but what if a cycle is tri connected i.e a triangle. I feel it need to be in `R-Block` instead of `S-Block`. Correct me, If I am wrong.

4. According to `Theorem 1` in reference paper, the number of nodes in Tree need to be equal to the number of tri-connected components and the edges between nodes u,v exit only if the components u and v share the common edge. The current implementation is adding all the required edges and the generated tree seems to be correct, yet not found a counter case yet.
Is there any simple way to verify the output tree?
\\ 
\\
5. I tried with few examples.

```
G = Graph({1:[2,3], 3:[2, 5], 2:[4], 6:[4,5]})
G = Graph({0:[1,2,3],1:[4,5],2:[3],3:[5],4:[5],6:[2,4]})
# Refernce Paper graph
G = Graph({1:[2, 4, 8, 12, 13], 2:[1, 3, 13], 3:[2, 4, 13], 4:[1, 3, 7, 5], 5:[4, 6, 7, 8], 6:[5, 7], 7:[4, 5, 6], 8:[1, 5, 9, 11, 12], 9:[8, 10, 11, 12], 10:[9, 11, 12], 11:[8, 9, 10], 12:[1, 8, 9, 10]})
```
AFAIK, the output seems to be correct.
Please let me know the case in which it's giving an incorrect answer.
6. There is a minor change in the `cleave function`, multiedges_bw_cutvertices -> num_virtual_edge_add, my bad I gave initially the incorrect name. 
`num_virtual_edge_add` says the number of virtual edges needs to be added to a component.



---

archive/issue_comments_326934.json:
```json
{
    "body": "Changed commit from **[`82dbe6a`](https://github.com/sagemath/sagetrac-mirror/commit/82dbe6adbd10ac1b94037b847f977e14525d5243)** to **[`ad946da`](https://github.com/sagemath/sagetrac-mirror/commit/ad946dabc60578979c80087a54aadf87fecbca30)**",
    "created_at": "2018-06-04T10:26:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326934",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`82dbe6a`](https://github.com/sagemath/sagetrac-mirror/commit/82dbe6adbd10ac1b94037b847f977e14525d5243)** to **[`ad946da`](https://github.com/sagemath/sagetrac-mirror/commit/ad946dabc60578979c80087a54aadf87fecbca30)**



---

archive/issue_comments_326935.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad946dabc60578979c80087a54aadf87fecbca30\"><code>ad946da</code></a></td><td><code>First commit on SPQR-Tree</code></td></tr></table>\n",
    "created_at": "2018-06-04T10:26:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326935",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad946dabc60578979c80087a54aadf87fecbca30"><code>ad946da</code></a></td><td><code>First commit on SPQR-Tree</code></td></tr></table>




---

archive/issue_comments_326936.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@sagetrac-git](#comment%3A29):\n\nPlease test on this spqr-tree function and there is a minor change in the output definition.\nPrevious it return `(R,S,P,SPR,SPQR-tree)` \\\\\nNow it return      `(R,S,P,SPR,tricomp,SPQR-tree)` \\\\\nTri-Component is a list of tri-components from R and S block. As S-Block contains the only polygon so there is only one case in which a component is a cycle and tri-connected is Triangle.\n\n|                                                                                                                                                 |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[ad946da](https://github.com/sagemath/sagetrac-mirror/commit/ad946dabc60578979c80087a54aadf87fecbca30)|`First commit on SPQR-Tree`|",
    "created_at": "2018-06-04T10:33:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326936",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@sagetrac-git](#comment%3A29):

Please test on this spqr-tree function and there is a minor change in the output definition.
Previous it return `(R,S,P,SPR,SPQR-tree)` \\
Now it return      `(R,S,P,SPR,tricomp,SPQR-tree)` \\
Tri-Component is a list of tri-components from R and S block. As S-Block contains the only polygon so there is only one case in which a component is a cycle and tri-connected is Triangle.

|                                                                                                                                                 |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[ad946da](https://github.com/sagemath/sagetrac-mirror/commit/ad946dabc60578979c80087a54aadf87fecbca30)|`First commit on SPQR-Tree`|



---

archive/issue_comments_326937.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nI cannot test yet. I had to do a `make dist-clean && make` after a system update. long time...\n\n- In `cleave`, the error message `\"G must be a biconnected graph.\"` is not appropriate. It can be used only if you test `if cut_size < 2`. But when `cut_size > 2`, it is better to say `\"G has no 2-vertex cut\"`  (without dot at the end of the sentence)\n\n- `R & S block` -> <code>\\`R\\` and \\`S\\` blocks</code>\n\n- do you think that the example `sage: G.spqr_tree()[1]` is useful ? I don't understand what we get. May be should should add explanation before that a graph build from a complete bipartite graph `2x5` with an edge joining the vertices of the side of order 2 is decomposed into 5 rigid blocks. However, the blocks are triangles...\\\\\n  This graph could be more informative. It is made of 3 `K_4` with edge `(0, 1)` in common.\n\n```\nsage: G = Graph(2)\nsage: for i in range(3):\n....:     G.add_clique([0, 1, G.add_vertex(), G.add_vertex()])\n```\n  It will be split into 3 3-connected blocks, each isomorphic to a `K_4`.",
    "created_at": "2018-06-04T15:08:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326937",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:31" align="right">comment:31</div>

I cannot test yet. I had to do a `make dist-clean && make` after a system update. long time...

- In `cleave`, the error message `"G must be a biconnected graph."` is not appropriate. It can be used only if you test `if cut_size < 2`. But when `cut_size > 2`, it is better to say `"G has no 2-vertex cut"`  (without dot at the end of the sentence)

- `R & S block` -> <code>\`R\` and \`S\` blocks</code>

- do you think that the example `sage: G.spqr_tree()[1]` is useful ? I don't understand what we get. May be should should add explanation before that a graph build from a complete bipartite graph `2x5` with an edge joining the vertices of the side of order 2 is decomposed into 5 rigid blocks. However, the blocks are triangles...\\
  This graph could be more informative. It is made of 3 `K_4` with edge `(0, 1)` in common.

```
sage: G = Graph(2)
sage: for i in range(3):
....:     G.add_clique([0, 1, G.add_vertex(), G.add_vertex()])
```
  It will be split into 3 3-connected blocks, each isomorphic to a `K_4`.



---

archive/issue_comments_326938.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\n> - do you think that the example `sage: G.spqr_tree()[1]` is useful ? I don't understand what we get. May be should should add explanation before that a graph build from a complete bipartite graph `2x5` with an edge joining the vertices of the side of order 2 is decomposed into 5 rigid blocks. However, the blocks are triangles...\\\\\n>   This graph could be more informative. It is made of 3 `K_4` with edge `(0, 1)` in common.\n> \n> ```\n> sage: G = Graph(2)\n> sage: for i in range(3):\n> ....:     G.add_clique([0, 1, G.add_vertex(), G.add_vertex()])\n> ```\n>   It will be split into 3 3-connected blocks, each isomorphic to a `K_4`.\n> \n\nYes, followed by G.spqr_tree()[0],  G.spqr_tree()[1] will give us a empty set as other components are tri-connected and covered in R-Block. \\\\\n\nG = Graph({0:[1,2],3:[1,2],4:[1,2],5:[1,2],6:[1,2]}) will give similar results if triangles are added to R-Block instead of S-block i.e polygon blocks.\nCurrently, it's giving an empty list to R-block(G.spqr_tree()[0]) and all triangles to S-Block(G.spqr_tree()[1]).",
    "created_at": "2018-06-04T16:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326938",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:32" align="right">comment:32</div>

> - do you think that the example `sage: G.spqr_tree()[1]` is useful ? I don't understand what we get. May be should should add explanation before that a graph build from a complete bipartite graph `2x5` with an edge joining the vertices of the side of order 2 is decomposed into 5 rigid blocks. However, the blocks are triangles...\\
>   This graph could be more informative. It is made of 3 `K_4` with edge `(0, 1)` in common.
> 
> ```
> sage: G = Graph(2)
> sage: for i in range(3):
> ....:     G.add_clique([0, 1, G.add_vertex(), G.add_vertex()])
> ```
>   It will be split into 3 3-connected blocks, each isomorphic to a `K_4`.
> 

Yes, followed by G.spqr_tree()[0],  G.spqr_tree()[1] will give us a empty set as other components are tri-connected and covered in R-Block. \\

G = Graph({0:[1,2],3:[1,2],4:[1,2],5:[1,2],6:[1,2]}) will give similar results if triangles are added to R-Block instead of S-block i.e polygon blocks.
Currently, it's giving an empty list to R-block(G.spqr_tree()[0]) and all triangles to S-Block(G.spqr_tree()[1]).



---

archive/issue_comments_326939.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nmy main complain is that this output is ugly\n\n```\n+            sage: G.spqr_tree()[1]\n+            [Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,\n+             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,\n+             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,\n+             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,\n+             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices]\n```",
    "created_at": "2018-06-04T16:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326939",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:33" align="right">comment:33</div>

my main complain is that this output is ugly

```
+            sage: G.spqr_tree()[1]
+            [Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,
+             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,
+             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,
+             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,
+             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices]
```



---

archive/issue_comments_326940.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@dcoudert](#comment%3A33):\n> my main complain is that this output is ugly\n> \n> ```\n> +            sage: G.spqr_tree()[1]\n> +            [Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,\n> +             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,\n> +             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,\n> +             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,\n> +             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices]\n> ```\n\nYes it doesn't look good and convey less information. \\\\\nAny suggestion where I can find the document related to it or we can reduce this message in the code? \\\\\nTried searching in developer's  Guide  couldn't find a related doc.",
    "created_at": "2018-06-04T20:19:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326940",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@dcoudert](#comment%3A33):
> my main complain is that this output is ugly
> 
> ```
> +            sage: G.spqr_tree()[1]
> +            [Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,
> +             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,
> +             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,
> +             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices,
> +             Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of (Subgraph of ()))))): Multi-graph on 3 vertices]
> ```

Yes it doesn't look good and convey less information. \\
Any suggestion where I can find the document related to it or we can reduce this message in the code? \\
Tried searching in developer's  Guide  couldn't find a related doc.



---

archive/issue_comments_326941.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nYou want to show that the set `S` contains 5 3-cycles. So you can do:\n\n```\nsage: G = Graph({0:[1,2],3:[1,2],4:[1,2],5:[1,2],6:[1,2]})\nsage: R,S,P,SPR,tricomp,SPQR-tree = G.spqr_tree()\nsage: R\n[]\nsage: C3 = graphs.CycleGraph(3)\nsage: all(h.is_isomorphic(C3) for h in S]\nTrue\n```",
    "created_at": "2018-06-05T07:06:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326941",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:35" align="right">comment:35</div>

You want to show that the set `S` contains 5 3-cycles. So you can do:

```
sage: G = Graph({0:[1,2],3:[1,2],4:[1,2],5:[1,2],6:[1,2]})
sage: R,S,P,SPR,tricomp,SPQR-tree = G.spqr_tree()
sage: R
[]
sage: C3 = graphs.CycleGraph(3)
sage: all(h.is_isomorphic(C3) for h in S]
True
```



---

archive/issue_comments_326942.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@dcoudert](#comment%3A35):\n> You want to show that the set `S` contains 5 3-cycles. So you can do:\n> \n> ```\n> sage: G = Graph({0:[1,2],3:[1,2],4:[1,2],5:[1,2],6:[1,2]})\n> sage: R,S,P,SPR,tricomp,SPQR-tree = G.spqr_tree()\n> sage: R\n> []\n> sage: C3 = graphs.CycleGraph(3)\n> sage: all(h.is_isomorphic(C3) for h in S]\n> True\n> ```\n\nWith the help of 3 K_4 example and this, 2 good examples are covered.\n\n```\nsage: G = Graph(2)\nsage: for i in range(3):\n....:     G.add_clique([0, 1, G.add_vertex(), G.add_vertex()])\nsage: R,S,P,SPR,tricomp,SPQR_tree = G.spqr_tree()\nsage: CG4 = graphs.CompleteGraph(4)\nsage: all(h.is_isomorphic(CG4) for h in R)\nTrue\n```\nI will update it in next commit.\n\nOne example for multiple edges, \n\n```\nsage: G = graphs.CompleteBipartiteGraph(2,3)\nsage: G.add_edge(2, 3)            \nsage: G.allow_multiple_edges(True)\nsage: G.add_edges(G.edges())\nsage: G.add_edges([[0,1],[0,1],[0,1]])\nsage: R,S,P,SPR,tricomp,SPQR-tree = G.spqr_tree()\nsage: tricomp\n[Subgraph of (): Multi-graph on 3 vertices,\n Subgraph of (): Multi-graph on 4 vertices]\n```\nWith different order of tri-connected components.",
    "created_at": "2018-06-05T15:41:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326942",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@dcoudert](#comment%3A35):
> You want to show that the set `S` contains 5 3-cycles. So you can do:
> 
> ```
> sage: G = Graph({0:[1,2],3:[1,2],4:[1,2],5:[1,2],6:[1,2]})
> sage: R,S,P,SPR,tricomp,SPQR-tree = G.spqr_tree()
> sage: R
> []
> sage: C3 = graphs.CycleGraph(3)
> sage: all(h.is_isomorphic(C3) for h in S]
> True
> ```

With the help of 3 K_4 example and this, 2 good examples are covered.

```
sage: G = Graph(2)
sage: for i in range(3):
....:     G.add_clique([0, 1, G.add_vertex(), G.add_vertex()])
sage: R,S,P,SPR,tricomp,SPQR_tree = G.spqr_tree()
sage: CG4 = graphs.CompleteGraph(4)
sage: all(h.is_isomorphic(CG4) for h in R)
True
```
I will update it in next commit.

One example for multiple edges, 

```
sage: G = graphs.CompleteBipartiteGraph(2,3)
sage: G.add_edge(2, 3)            
sage: G.allow_multiple_edges(True)
sage: G.add_edges(G.edges())
sage: G.add_edges([[0,1],[0,1],[0,1]])
sage: R,S,P,SPR,tricomp,SPQR-tree = G.spqr_tree()
sage: tricomp
[Subgraph of (): Multi-graph on 3 vertices,
 Subgraph of (): Multi-graph on 4 vertices]
```
With different order of tri-connected components.



---

archive/issue_comments_326943.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2457a526eef1474a230fec134f4a5c6ae824b61f\"><code>2457a52</code></a></td><td><code>Examples updated.</code></td></tr></table>\n",
    "created_at": "2018-06-06T17:08:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326943",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2457a526eef1474a230fec134f4a5c6ae824b61f"><code>2457a52</code></a></td><td><code>Examples updated.</code></td></tr></table>




---

archive/issue_comments_326944.json:
```json
{
    "body": "Changed commit from **[`ad946da`](https://github.com/sagemath/sagetrac-mirror/commit/ad946dabc60578979c80087a54aadf87fecbca30)** to **[`2457a52`](https://github.com/sagemath/sagetrac-mirror/commit/2457a526eef1474a230fec134f4a5c6ae824b61f)**",
    "created_at": "2018-06-06T17:08:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326944",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ad946da`](https://github.com/sagemath/sagetrac-mirror/commit/ad946dabc60578979c80087a54aadf87fecbca30)** to **[`2457a52`](https://github.com/sagemath/sagetrac-mirror/commit/2457a526eef1474a230fec134f4a5c6ae824b61f)**



---

archive/issue_comments_326945.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI have updated examples.\nCurrently, I am doing some performance analysis, how it's behaving on huge graphs. \\\\\nIndividually which operation is taking time.\n\\\\\nReplying to [@sagetrac-git](#comment%3A37):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2457a526eef1474a230fec134f4a5c6ae824b61f\"><code>2457a52</code></a></td><td><code>Examples updated.</code></td></tr></table>\n",
    "created_at": "2018-06-07T15:05:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326945",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:38" align="right">comment:38</div>

I have updated examples.
Currently, I am doing some performance analysis, how it's behaving on huge graphs. \\
Individually which operation is taking time.
\\
Replying to [@sagetrac-git](#comment%3A37):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2457a526eef1474a230fec134f4a5c6ae824b61f"><code>2457a52</code></a></td><td><code>Examples updated.</code></td></tr></table>




---

archive/issue_comments_326946.json:
```json
{
    "body": "Changed keywords from **connectivity, decomposition** to **connectivity, decomposition, gsoc2018**",
    "created_at": "2018-06-07T16:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326946",
    "user": "https://github.com/dcoudert"
}
```

Changed keywords from **connectivity, decomposition** to **connectivity, decomposition, gsoc2018**



---

archive/issue_comments_326947.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI bet that `self.vertex_connectivity(value_only=False)` is one of the most time consuming operation. That's why we need the implementation of the linear time algorithm.\n\nThe most import in this patch is to get a working method. It will be very useful for testing the linear time code.",
    "created_at": "2018-06-07T16:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326947",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:39" align="right">comment:39</div>

I bet that `self.vertex_connectivity(value_only=False)` is one of the most time consuming operation. That's why we need the implementation of the linear time algorithm.

The most import in this patch is to get a working method. It will be very useful for testing the linear time code.



---

archive/issue_comments_326948.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@dcoudert](#comment%3A39):\n> I bet that `self.vertex_connectivity(value_only=False)` is one of the most time consuming operation. That's why we need the implementation of the linear time algorithm.\n\nI will keep this as a separate parameter. \\\\\nThanks for suggesting me. \\\\\nI will try to update you will the report ASAP.\n> The most import in this patch is to get a working method. It will be very useful for testing the linear time code.\n\nYes, If found any incorrect answer please let me know.\\\\",
    "created_at": "2018-06-07T17:50:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326948",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@dcoudert](#comment%3A39):
> I bet that `self.vertex_connectivity(value_only=False)` is one of the most time consuming operation. That's why we need the implementation of the linear time algorithm.

I will keep this as a separate parameter. \\
Thanks for suggesting me. \\
I will try to update you will the report ASAP.
> The most import in this patch is to get a working method. It will be very useful for testing the linear time code.

Yes, If found any incorrect answer please let me know.\\



---

archive/issue_comments_326949.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nYes, it's taking much time for graphs which has order > 2000 and size > 40000.\nMostly the time is taken by vertex_connectivity function and some other component depending on graph.(cases are less)\n\\\\\nTo reduce memory usage, I am deleting few variables after usage. \n\nAfter doing few runs with different graphs, I kept flags to find running time for below 5 parts.\n1. Vertex_connectivity\n2. Split_multiple_edge(4711 to 4730)\n3. cleave and appending cuts (4734 to 4761)\n4. appending blocks (4769 to 4806)\n5. Construction of Tree (4812 to 4843)\n\nvertex_connectiviy is taking more time when there are multiple edges in input graph. So I am pushing, Split_multiple_edges as the first step(if graph has multiple edges) as split_mutiple_edge will give output as a simple version of G. if there are x cut points in multigraph then they should be x cut points in a simple graph too. correct me if I am wrong.\n\nThere is a significant difference in running time of vertex_connectivity function if we do above change, atleast code running time is down with 1/2 when there are multiple edges in input graph.\n\nI will upload the result file mostly by tomorrow night. Some test cases are pending.",
    "created_at": "2018-06-11T20:14:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326949",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:41" align="right">comment:41</div>

Yes, it's taking much time for graphs which has order > 2000 and size > 40000.
Mostly the time is taken by vertex_connectivity function and some other component depending on graph.(cases are less)
\\
To reduce memory usage, I am deleting few variables after usage. 

After doing few runs with different graphs, I kept flags to find running time for below 5 parts.
1. Vertex_connectivity
2. Split_multiple_edge(4711 to 4730)
3. cleave and appending cuts (4734 to 4761)
4. appending blocks (4769 to 4806)
5. Construction of Tree (4812 to 4843)

vertex_connectiviy is taking more time when there are multiple edges in input graph. So I am pushing, Split_multiple_edges as the first step(if graph has multiple edges) as split_mutiple_edge will give output as a simple version of G. if there are x cut points in multigraph then they should be x cut points in a simple graph too. correct me if I am wrong.

There is a significant difference in running time of vertex_connectivity function if we do above change, atleast code running time is down with 1/2 when there are multiple edges in input graph.

I will upload the result file mostly by tomorrow night. Some test cases are pending.



---

archive/issue_comments_326950.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\n> vertex_connectiviy is taking more time when there are multiple edges in input graph. \n\nThis is surprizing. In the ILP formulation, multiple edges only lead to adding multiple times the same constraint, but then solver quickly remove redundant constraints.\n\n> So I am pushing, Split_multiple_edges as the first step(if graph has multiple edges) as split_mutiple_edge will give output as a simple version of G. if there are x cut points in multigraph then they should be x cut points in a simple graph too. correct me if I am wrong.\n> \n\nDon't do that ! ;)\n\nWhat is `split_multiple_edges` doing ? If it split an edge into a path, it introduce a new vertex of degree 2, and so a new cut with 2 vertices.\n\n\n\n> There is a significant difference in running time of vertex_connectivity function if we do above change, atleast code running time is down with 1/2 when there are multiple edges in input graph.\n\nReally weird. Isn't it due to extra computation like a copy of the graph ?",
    "created_at": "2018-06-12T15:53:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326950",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:42" align="right">comment:42</div>

> vertex_connectiviy is taking more time when there are multiple edges in input graph. 

This is surprizing. In the ILP formulation, multiple edges only lead to adding multiple times the same constraint, but then solver quickly remove redundant constraints.

> So I am pushing, Split_multiple_edges as the first step(if graph has multiple edges) as split_mutiple_edge will give output as a simple version of G. if there are x cut points in multigraph then they should be x cut points in a simple graph too. correct me if I am wrong.
> 

Don't do that ! ;)

What is `split_multiple_edges` doing ? If it split an edge into a path, it introduce a new vertex of degree 2, and so a new cut with 2 vertices.



> There is a significant difference in running time of vertex_connectivity function if we do above change, atleast code running time is down with 1/2 when there are multiple edges in input graph.

Really weird. Isn't it due to extra computation like a copy of the graph ?



---

archive/issue_comments_326951.json:
```json
{
    "body": "Attachment: **[Results.csv.gz](https://github.com/sagemath/sage/files/ticket22157/Results.csv.gz)**",
    "created_at": "2018-06-12T21:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326951",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

Attachment: **[Results.csv.gz](https://github.com/sagemath/sage/files/ticket22157/Results.csv.gz)**



---

archive/issue_comments_326952.json:
```json
{
    "body": "Attachment: **[Results.2.csv.gz](https://github.com/sagemath/sage/files/ticket22157/Results.2.csv.gz)**",
    "created_at": "2018-06-12T21:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326952",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

Attachment: **[Results.2.csv.gz](https://github.com/sagemath/sage/files/ticket22157/Results.2.csv.gz)**



---

archive/issue_comments_326953.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@dcoudert](#comment%3A42):\n> This is surprizing. In the ILP formulation, multiple edges only lead to adding multiple times the same constraint, but then solver quickly remove redundant constraints.\n> Except that all other components are taking time but it sounds reasonable.\n\nPlease have a look at the second table in the attached file. \n\nIn which I used two graph G1 with order = 3502 and size = 8751 and G2 with order = 5002 and size = 12501. later I am adding multiple edges to G1 and G2.\nThere is an increase in running time of Vertex Connectivity\nbut the difference is significant, please let me know if this kind of nature is expected.\n\n\\\\\n> > So I am pushing, Split_multiple_edges as the first step(if graph has multiple edges) as split_mutiple_edge will give output as a simple version of G. if there are x cut points in multigraph then they should be x cut points in a simple graph too. correct me if I am wrong.\n> > \n\n> Don't do that ! ;)\n> \n> What is `split_multiple_edges` doing ? If it split an edge into a path, it introduce a new vertex of degree 2, and so a new cut with 2 vertices.\n> \n\n`split_multiple_edges` in this part bundle of multiple edges are replaced by a new virtual edge. This step is done only to make graph simple from multi.\nIt's reference is present in section 4.1 of the reference paper.\n\nIt's not going add any new vertex. \n\\\\\n> \n> \n> > There is a significant difference in running time of vertex_connectivity function if we do above change, atleast code running time is down with 1/2 when there are multiple edges in input graph.\n\n> \n> Really weird. Isn't it due to extra computation like a copy of the graph ?\n\nI am finding how much time it's taking to execute `self.vertex_connectivity(value_only = False)` this step.\nLet me know if I missed something.\n\nResults.2.csv is same as Results.csv\n\\\\\nTable 1 has all multigraphs, it's intended to show which component is taking time if multiple edges are more.\n\\\\\nI wanted to generate a graph which shows running time vs memory consumption couldn't complete it.\n\\\\\nI used Intel(R) Xeon(R) CPU E5-2640 v4 processor, which has 2.40GHz frequency. To generate the running time.",
    "created_at": "2018-06-12T21:52:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326953",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@dcoudert](#comment%3A42):
> This is surprizing. In the ILP formulation, multiple edges only lead to adding multiple times the same constraint, but then solver quickly remove redundant constraints.
> Except that all other components are taking time but it sounds reasonable.

Please have a look at the second table in the attached file. 

In which I used two graph G1 with order = 3502 and size = 8751 and G2 with order = 5002 and size = 12501. later I am adding multiple edges to G1 and G2.
There is an increase in running time of Vertex Connectivity
but the difference is significant, please let me know if this kind of nature is expected.

\\
> > So I am pushing, Split_multiple_edges as the first step(if graph has multiple edges) as split_mutiple_edge will give output as a simple version of G. if there are x cut points in multigraph then they should be x cut points in a simple graph too. correct me if I am wrong.
> > 

> Don't do that ! ;)
> 
> What is `split_multiple_edges` doing ? If it split an edge into a path, it introduce a new vertex of degree 2, and so a new cut with 2 vertices.
> 

`split_multiple_edges` in this part bundle of multiple edges are replaced by a new virtual edge. This step is done only to make graph simple from multi.
It's reference is present in section 4.1 of the reference paper.

It's not going add any new vertex. 
\\
> 
> 
> > There is a significant difference in running time of vertex_connectivity function if we do above change, atleast code running time is down with 1/2 when there are multiple edges in input graph.

> 
> Really weird. Isn't it due to extra computation like a copy of the graph ?

I am finding how much time it's taking to execute `self.vertex_connectivity(value_only = False)` this step.
Let me know if I missed something.

Results.2.csv is same as Results.csv
\\
Table 1 has all multigraphs, it's intended to show which component is taking time if multiple edges are more.
\\
I wanted to generate a graph which shows running time vs memory consumption couldn't complete it.
\\
I used Intel(R) Xeon(R) CPU E5-2640 v4 processor, which has 2.40GHz frequency. To generate the running time.



---

archive/issue_comments_326954.json:
```json
{
    "body": "Changed commit from **[`2457a52`](https://github.com/sagemath/sagetrac-mirror/commit/2457a526eef1474a230fec134f4a5c6ae824b61f)** to **[`22e164b`](https://github.com/sagemath/sagetrac-mirror/commit/22e164b11e46d477e90bb8e8b238a62a4c9f6521)**",
    "created_at": "2018-06-13T10:40:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326954",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2457a52`](https://github.com/sagemath/sagetrac-mirror/commit/2457a526eef1474a230fec134f4a5c6ae824b61f)** to **[`22e164b`](https://github.com/sagemath/sagetrac-mirror/commit/22e164b11e46d477e90bb8e8b238a62a4c9f6521)**



---

archive/issue_comments_326955.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22e164b11e46d477e90bb8e8b238a62a4c9f6521\"><code>22e164b</code></a></td><td><code>Deleting few variables after there usage, added few flags for running time analysis which will be removed later.</code></td></tr></table>\n",
    "created_at": "2018-06-13T10:40:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326955",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22e164b11e46d477e90bb8e8b238a62a4c9f6521"><code>22e164b</code></a></td><td><code>Deleting few variables after there usage, added few flags for running time analysis which will be removed later.</code></td></tr></table>




---

archive/issue_comments_326956.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [@sagetrac-git](#comment%3A44):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22e164b11e46d477e90bb8e8b238a62a4c9f6521\"><code>22e164b</code></a></td><td><code>Deleting few variables after there usage, added few flags for running time analysis which will be removed later.</code></td></tr></table>\n\nPlease use this code for testing.\n\nBelow is the sample output of the code.\n\n```\nsage: G = Graph(2)\n....: for i in range(20):G.add_clique([0, 1, G.add_vertex(), G.add_vertex()])\n....: R,S,P,SPR,tricomp,SPQR_tree = G.spqr_tree()\nNodes: 42\nEdges: 101\ncut_size =  2 cut_vertices =  [0, 1]\nTime Taken for Vertex Connectivity: 0.0595650672913\nTime Taken for Split_multiple_edge algorithm: 0.000383853912354\nTime Taken for cleave and appending cuts  0.00986504554749\nTime Taken for appending blocks, 6.48498535156e-05\nTime Taken for Construction of Tree 0.00036883354187\nTotal time: 0.0704739093781\n```",
    "created_at": "2018-06-13T10:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326956",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [@sagetrac-git](#comment%3A44):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22e164b11e46d477e90bb8e8b238a62a4c9f6521"><code>22e164b</code></a></td><td><code>Deleting few variables after there usage, added few flags for running time analysis which will be removed later.</code></td></tr></table>

Please use this code for testing.

Below is the sample output of the code.

```
sage: G = Graph(2)
....: for i in range(20):G.add_clique([0, 1, G.add_vertex(), G.add_vertex()])
....: R,S,P,SPR,tricomp,SPQR_tree = G.spqr_tree()
Nodes: 42
Edges: 101
cut_size =  2 cut_vertices =  [0, 1]
Time Taken for Vertex Connectivity: 0.0595650672913
Time Taken for Split_multiple_edge algorithm: 0.000383853912354
Time Taken for cleave and appending cuts  0.00986504554749
Time Taken for appending blocks, 6.48498535156e-05
Time Taken for Construction of Tree 0.00036883354187
Total time: 0.0704739093781
```



---

archive/issue_comments_326957.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nI did some tests\n\n```\nsage: G = Graph(2)\nsage: for i in range(1000):G.add_clique([0, 1, G.add_vertex(), G.add_vertex()])\nsage: H = Graph(G.edges()+G.edges(), multiedges=True)\nsage: %timeit a,b = G.vertex_connectivity(value_only=False, solver='Cplex')\n1 loop, best of 3: 458 ms per loop\nsage: %timeit a,b = H.vertex_connectivity(value_only=False, solver='Cplex')\n1 loop, best of 3: 639 ms per loop\nsage: %timeit a,b = G.vertex_connectivity(value_only=False, solver='GLPK')\n1 loop, best of 3: 8.71 s per loop\nsage: %timeit a,b = H.vertex_connectivity(value_only=False, solver='GLPK')\n1 loop, best of 3: 15.3 s per loop\n```\nI also checked more closely adding parameter `verbose=3`.\n\nWith `Cplex`, the difference in running time is mostly in the time needed to write the ILP, and then in the elimination of rows/columns. So the difference is small.\nWith `GLPK`, I have the feeling that it does not eliminate rows/columns, and so is very long.\n\nAnyway, we knew that `vertex_connectivity` is slow and that it takes most of the computing time of the method. So don't waste more time trying to optimize the running time of this method. It will be slow. The most important is that it is safe = it gives the correct result.",
    "created_at": "2018-06-13T11:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326957",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:46" align="right">comment:46</div>

I did some tests

```
sage: G = Graph(2)
sage: for i in range(1000):G.add_clique([0, 1, G.add_vertex(), G.add_vertex()])
sage: H = Graph(G.edges()+G.edges(), multiedges=True)
sage: %timeit a,b = G.vertex_connectivity(value_only=False, solver='Cplex')
1 loop, best of 3: 458 ms per loop
sage: %timeit a,b = H.vertex_connectivity(value_only=False, solver='Cplex')
1 loop, best of 3: 639 ms per loop
sage: %timeit a,b = G.vertex_connectivity(value_only=False, solver='GLPK')
1 loop, best of 3: 8.71 s per loop
sage: %timeit a,b = H.vertex_connectivity(value_only=False, solver='GLPK')
1 loop, best of 3: 15.3 s per loop
```
I also checked more closely adding parameter `verbose=3`.

With `Cplex`, the difference in running time is mostly in the time needed to write the ILP, and then in the elimination of rows/columns. So the difference is small.
With `GLPK`, I have the feeling that it does not eliminate rows/columns, and so is very long.

Anyway, we knew that `vertex_connectivity` is slow and that it takes most of the computing time of the method. So don't waste more time trying to optimize the running time of this method. It will be slow. The most important is that it is safe = it gives the correct result.



---

archive/issue_comments_326958.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@dcoudert](#comment%3A46):\n> I did some tests\n> \n> ```\n> sage: G = Graph(2)\n> sage: for i in range(1000):G.add_clique([0, 1, G.add_vertex(), G.add_vertex()])\n> sage: H = Graph(G.edges()+G.edges(), multiedges=True)\n> sage: %timeit a,b = G.vertex_connectivity(value_only=False, solver='Cplex')\n> 1 loop, best of 3: 458 ms per loop\n> sage: %timeit a,b = H.vertex_connectivity(value_only=False, solver='Cplex')\n> 1 loop, best of 3: 639 ms per loop\n> sage: %timeit a,b = G.vertex_connectivity(value_only=False, solver='GLPK')\n> 1 loop, best of 3: 8.71 s per loop\n> sage: %timeit a,b = H.vertex_connectivity(value_only=False, solver='GLPK')\n> 1 loop, best of 3: 15.3 s per loop\n> ```\n> I also checked more closely adding parameter `verbose=3`.\n> \n> With `Cplex`, the difference in running time is mostly in the time needed to write the ILP, and then in the elimination of rows/columns. So the difference is small.\n> With `GLPK`, I have the feeling that it does not eliminate rows/columns, and so is very long.\n> \n\nI feel for 1000 nodes if it's taking ms is reasonable time. Ultimately it need to preform good when graph is simple but it's taking time for it too.\n\n> Anyway, we knew that `vertex_connectivity` is slow and that it takes most of the computing time of the method. So don't waste more time trying to optimize the running time of this method. It will be slow. The most important is that it is safe = it gives the correct result.\n\nThe overall contribution of vertex_connectivity is to check whether the graph is bi-connected or not. if we mention the input need to be biconnected then we can remove the `vertex_connectivity`  or we can use `is_biconnected()`. \\\\\nAgain `vertex_connectivity` is used in `Cleave` a helper function of spqr_tree, the input to Cleave function is a simple subgraph. Its time is comparatively less if we see in Results.csv",
    "created_at": "2018-06-13T16:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326958",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@dcoudert](#comment%3A46):
> I did some tests
> 
> ```
> sage: G = Graph(2)
> sage: for i in range(1000):G.add_clique([0, 1, G.add_vertex(), G.add_vertex()])
> sage: H = Graph(G.edges()+G.edges(), multiedges=True)
> sage: %timeit a,b = G.vertex_connectivity(value_only=False, solver='Cplex')
> 1 loop, best of 3: 458 ms per loop
> sage: %timeit a,b = H.vertex_connectivity(value_only=False, solver='Cplex')
> 1 loop, best of 3: 639 ms per loop
> sage: %timeit a,b = G.vertex_connectivity(value_only=False, solver='GLPK')
> 1 loop, best of 3: 8.71 s per loop
> sage: %timeit a,b = H.vertex_connectivity(value_only=False, solver='GLPK')
> 1 loop, best of 3: 15.3 s per loop
> ```
> I also checked more closely adding parameter `verbose=3`.
> 
> With `Cplex`, the difference in running time is mostly in the time needed to write the ILP, and then in the elimination of rows/columns. So the difference is small.
> With `GLPK`, I have the feeling that it does not eliminate rows/columns, and so is very long.
> 

I feel for 1000 nodes if it's taking ms is reasonable time. Ultimately it need to preform good when graph is simple but it's taking time for it too.

> Anyway, we knew that `vertex_connectivity` is slow and that it takes most of the computing time of the method. So don't waste more time trying to optimize the running time of this method. It will be slow. The most important is that it is safe = it gives the correct result.

The overall contribution of vertex_connectivity is to check whether the graph is bi-connected or not. if we mention the input need to be biconnected then we can remove the `vertex_connectivity`  or we can use `is_biconnected()`. \\
Again `vertex_connectivity` is used in `Cleave` a helper function of spqr_tree, the input to Cleave function is a simple subgraph. Its time is comparatively less if we see in Results.csv



---

archive/issue_comments_326959.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\n> > Anyway, we knew that `vertex_connectivity` is slow and that it takes most of the computing time of the method. So don't waste more time trying to optimize the running time of this method. It will be slow. The most important is that it is safe = it gives the correct result.\n\n> The overall contribution of vertex_connectivity is to check whether the graph is bi-connected or not. \n\nNot only. We want to check if the graph has a 2-vertex-cut or not.\n\nIn particular, the `cleave` method is used to split a biconnected graph along a 2-vertex cut, if it has one.\n\n> if we mention the input need to be biconnected then we can remove the `vertex_connectivity`  or we can use `is_biconnected()`. \\\\\n\nWhere ? in `cleave`, we need to find the 2-vertex-cuts.",
    "created_at": "2018-06-14T14:48:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326959",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:48" align="right">comment:48</div>

> > Anyway, we knew that `vertex_connectivity` is slow and that it takes most of the computing time of the method. So don't waste more time trying to optimize the running time of this method. It will be slow. The most important is that it is safe = it gives the correct result.

> The overall contribution of vertex_connectivity is to check whether the graph is bi-connected or not. 

Not only. We want to check if the graph has a 2-vertex-cut or not.

In particular, the `cleave` method is used to split a biconnected graph along a 2-vertex cut, if it has one.

> if we mention the input need to be biconnected then we can remove the `vertex_connectivity`  or we can use `is_biconnected()`. \\

Where ? in `cleave`, we need to find the 2-vertex-cuts.



---

archive/issue_comments_326960.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@dcoudert](#comment%3A48):\n> Not only. We want to check if the graph has a 2-vertex-cut or not.\n\nYes, we need to check a graph has 2 cut vertices. If it's biconnected we would have used is_biconected.\n> \n> Where ? in `cleave`, we need to find the 2-vertex-cuts.\n\nYes in `cleave` function but again the same problem. \\\\\nI will remove the flags and update it.",
    "created_at": "2018-06-14T19:45:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326960",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@dcoudert](#comment%3A48):
> Not only. We want to check if the graph has a 2-vertex-cut or not.

Yes, we need to check a graph has 2 cut vertices. If it's biconnected we would have used is_biconected.
> 
> Where ? in `cleave`, we need to find the 2-vertex-cuts.

Yes in `cleave` function but again the same problem. \\
I will remove the flags and update it.



---

archive/issue_comments_326961.json:
```json
{
    "body": "Changed commit from **[`22e164b`](https://github.com/sagemath/sagetrac-mirror/commit/22e164b11e46d477e90bb8e8b238a62a4c9f6521)** to **[`867933b`](https://github.com/sagemath/sagetrac-mirror/commit/867933b453e9a070c03179fb314a59db7ca64ad7)**",
    "created_at": "2018-06-15T10:40:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326961",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`22e164b`](https://github.com/sagemath/sagetrac-mirror/commit/22e164b11e46d477e90bb8e8b238a62a4c9f6521)** to **[`867933b`](https://github.com/sagemath/sagetrac-mirror/commit/867933b453e9a070c03179fb314a59db7ca64ad7)**



---

archive/issue_comments_326962.json:
```json
{
    "body": "<div id=\"comment:50\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/867933b453e9a070c03179fb314a59db7ca64ad7\"><code>867933b</code></a></td><td><code>Flags are removed.</code></td></tr></table>\n",
    "created_at": "2018-06-15T10:40:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326962",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:50"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/867933b453e9a070c03179fb314a59db7ca64ad7"><code>867933b</code></a></td><td><code>Flags are removed.</code></td></tr></table>




---

archive/issue_comments_326963.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad0f893de90206badfdd3da7208b6d63a6026abd\"><code>ad0f893</code></a></td><td><code>trac #22157: Merged with 8.3.beta5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0039580a077d275af5bca699ad8f1d4399f4e95d\"><code>0039580</code></a></td><td><code>trac #22157: move to connectivity.pyx</code></td></tr></table>\n",
    "created_at": "2018-06-16T18:11:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326963",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:51"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad0f893de90206badfdd3da7208b6d63a6026abd"><code>ad0f893</code></a></td><td><code>trac #22157: Merged with 8.3.beta5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0039580a077d275af5bca699ad8f1d4399f4e95d"><code>0039580</code></a></td><td><code>trac #22157: move to connectivity.pyx</code></td></tr></table>




---

archive/issue_comments_326964.json:
```json
{
    "body": "Changed branch from **[public/22157_spqrtree_beta3](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_beta3)** to **[public/22157_spqrtree_beta5](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_beta5)**",
    "created_at": "2018-06-16T18:11:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326964",
    "user": "https://github.com/dcoudert"
}
```

Changed branch from **[public/22157_spqrtree_beta3](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_beta3)** to **[public/22157_spqrtree_beta5](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_beta5)**



---

archive/issue_comments_326965.json:
```json
{
    "body": "Changed commit from **[`867933b`](https://github.com/sagemath/sagetrac-mirror/commit/867933b453e9a070c03179fb314a59db7ca64ad7)** to **[`0039580`](https://github.com/sagemath/sagetrac-mirror/commit/0039580a077d275af5bca699ad8f1d4399f4e95d)**",
    "created_at": "2018-06-16T18:11:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326965",
    "user": "https://github.com/dcoudert"
}
```

Changed commit from **[`867933b`](https://github.com/sagemath/sagetrac-mirror/commit/867933b453e9a070c03179fb314a59db7ca64ad7)** to **[`0039580`](https://github.com/sagemath/sagetrac-mirror/commit/0039580a077d275af5bca699ad8f1d4399f4e95d)**



---

archive/issue_comments_326966.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nI moved the methods to `connectivity.pyx` and fixed the doctests. I will do more tests/corrections tomorrow.",
    "created_at": "2018-06-16T18:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326966",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:52" align="right">comment:52</div>

I moved the methods to `connectivity.pyx` and fixed the doctests. I will do more tests/corrections tomorrow.



---

archive/issue_comments_326967.json:
```json
{
    "body": "Changed branch from **[public/22157_spqrtree_beta5](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_beta5)** to **[public/22157_spqrtree_dc](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_dc)**",
    "created_at": "2018-06-16T18:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326967",
    "user": "https://github.com/dcoudert"
}
```

Changed branch from **[public/22157_spqrtree_beta5](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_beta5)** to **[public/22157_spqrtree_dc](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_dc)**



---

archive/issue_comments_326968.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [@dcoudert](#comment%3A52):\n> I moved the methods to `connectivity.pyx` and fixed the doctests. I will do more tests/corrections tomorrow.\n\nThanks for updating it to beta5, could you please say what are the remaining gaps are available in this ticket.",
    "created_at": "2018-06-16T21:40:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326968",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [@dcoudert](#comment%3A52):
> I moved the methods to `connectivity.pyx` and fixed the doctests. I will do more tests/corrections tomorrow.

Thanks for updating it to beta5, could you please say what are the remaining gaps are available in this ticket.



---

archive/issue_comments_326969.json:
```json
{
    "body": "Changed commit from **[`0039580`](https://github.com/sagemath/sagetrac-mirror/commit/0039580a077d275af5bca699ad8f1d4399f4e95d)** to **[`8cf8432`](https://github.com/sagemath/sagetrac-mirror/commit/8cf8432bfba5e5dd051894eaee0c204e9660fdc3)**",
    "created_at": "2018-06-17T17:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326969",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0039580`](https://github.com/sagemath/sagetrac-mirror/commit/0039580a077d275af5bca699ad8f1d4399f4e95d)** to **[`8cf8432`](https://github.com/sagemath/sagetrac-mirror/commit/8cf8432bfba5e5dd051894eaee0c204e9660fdc3)**



---

archive/issue_comments_326970.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cf8432bfba5e5dd051894eaee0c204e9660fdc3\"><code>8cf8432</code></a></td><td><code>trac #22157: more general cleave</code></td></tr></table>\n",
    "created_at": "2018-06-17T17:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326970",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cf8432bfba5e5dd051894eaee0c204e9660fdc3"><code>8cf8432</code></a></td><td><code>trac #22157: more general cleave</code></td></tr></table>




---

archive/issue_comments_326971.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nI have changed the `cleave` method to a more general form. It's now working for any size of vertex cut. More importantly, you can give it a vertex cut. This way, we save some calls to `vertex_connectivity`. I have updated `spqr_tree` accordingly.\n\nIn `spqr_tree`,  I have remove all `del` statements. In particular, you where deleting `SG` before the while loop over `twoblocks`... not good :P\n\nPlease check the new `cleave`.\n\nI have not checked `spqr_tree` carefully yet.",
    "created_at": "2018-06-17T17:21:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326971",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:55" align="right">comment:55</div>

I have changed the `cleave` method to a more general form. It's now working for any size of vertex cut. More importantly, you can give it a vertex cut. This way, we save some calls to `vertex_connectivity`. I have updated `spqr_tree` accordingly.

In `spqr_tree`,  I have remove all `del` statements. In particular, you where deleting `SG` before the while loop over `twoblocks`... not good :P

Please check the new `cleave`.

I have not checked `spqr_tree` carefully yet.



---

archive/issue_comments_326972.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@dcoudert](#comment%3A55):\n> I have changed the `cleave` method to a more general form. It's now working for any size of vertex cut. More importantly, you can give it a vertex cut. This way, we save some calls to `vertex_connectivity`. I have updated `spqr_tree` accordingly.\n> \n\nYes, now it could be used in general not only specific to `spqr_tree`. \\\\\n\n> In `spqr_tree`,  I have remove all `del` statements. In particular, you where deleting `SG` before the while loop over `twoblocks`... not good :P\n\nI kept `SG` before the while loop of `twoblocks` because there was no use of `SG` in future, as it was appended in `twoblocks` it's safe to delete it and deleting of `SG` won't reflect in `twoblocks`. \\\\\nThe moto of deleting variables is to reduce the memory usage. correct me if I am wrong.\n\n> Please check the new `cleave`.\n\nThe code is well structured and easy to read. \\\\\nCan we add an example in which cut vertices which are generated differ from ones which are given as input.\\\\\n\n```\nsage: G = Graph()\nsage: G.add_cycle(vertices=[0,1,2,3,4])\nsage: cut_size,cut_vertices = G.vertex_connectivity(value_only=False)\nsage: cut_vertices\n[2, 4]\nsage: S,C,f = G.cleave(cut_vertices=[1, 3])\nsage: [g.order() for g in S]\n[4, 3]\nsage: C.order(), C.size()\n(2, 2)\nsage: f.vertices()\n[1, 3]\n\n```",
    "created_at": "2018-06-17T19:49:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326972",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@dcoudert](#comment%3A55):
> I have changed the `cleave` method to a more general form. It's now working for any size of vertex cut. More importantly, you can give it a vertex cut. This way, we save some calls to `vertex_connectivity`. I have updated `spqr_tree` accordingly.
> 

Yes, now it could be used in general not only specific to `spqr_tree`. \\

> In `spqr_tree`,  I have remove all `del` statements. In particular, you where deleting `SG` before the while loop over `twoblocks`... not good :P

I kept `SG` before the while loop of `twoblocks` because there was no use of `SG` in future, as it was appended in `twoblocks` it's safe to delete it and deleting of `SG` won't reflect in `twoblocks`. \\
The moto of deleting variables is to reduce the memory usage. correct me if I am wrong.

> Please check the new `cleave`.

The code is well structured and easy to read. \\
Can we add an example in which cut vertices which are generated differ from ones which are given as input.\\

```
sage: G = Graph()
sage: G.add_cycle(vertices=[0,1,2,3,4])
sage: cut_size,cut_vertices = G.vertex_connectivity(value_only=False)
sage: cut_vertices
[2, 4]
sage: S,C,f = G.cleave(cut_vertices=[1, 3])
sage: [g.order() for g in S]
[4, 3]
sage: C.order(), C.size()
(2, 2)
sage: f.vertices()
[1, 3]

```



---

archive/issue_comments_326973.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\n> > In `spqr_tree`,  I have remove all `del` statements. In particular, you where deleting `SG` before the while loop over `twoblocks`... not good :P\n\n> I kept `SG` before the while loop of `twoblocks` because there was no use of `SG` in future, as it was appended in `twoblocks` it's safe to delete it and deleting of `SG` won't reflect in `twoblocks`. \\\\\n> The moto of deleting variables is to reduce the memory usage. correct me if I am wrong.\n\nDeleting SG might lead to an error. Understand that when you append SG to `twoblocks`, you don't copy the full object, you just append a pointer to SG. Hopeful, when you do `del SG` it apparently only deletes the pointer, not the full object. So please don't do that !\n\nTo give you an example:\n\n```\nsage: G = Graph()\nsage: L = []\nsage: L.append(G)\nsage: G.add_edge(0, 1)\nsage: L[0].edges()\n[(0, 1, None)]\n```\n \n\nConcerning `del twoblocks`, since the list is empty at that time, the memory occupancy is negligeable, so there is no need to do that.\n\n\n> Can we add an example in which cut vertices which are generated differ from ones which are given as input.\\\\\n> \n> ```\n> sage: G = Graph()\n> sage: G.add_cycle(vertices=[0,1,2,3,4])\n> sage: cut_size,cut_vertices = G.vertex_connectivity(value_only=False)\n> sage: cut_vertices\n> [2, 4]\n> sage: S,C,f = G.cleave(cut_vertices=[1, 3])\n> sage: [g.order() for g in S]\n> [4, 3]\n> sage: C.order(), C.size()\n> (2, 2)\n> sage: f.vertices()\n> [1, 3]\n> \n> ```\n\nI don't understand what you want to show. What is important is to give a valid vertex cut of the graph. You may add an example with more vertices than needed if you want, but I'm not sure it's so interesting here.",
    "created_at": "2018-06-17T20:10:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326973",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:57" align="right">comment:57</div>

> > In `spqr_tree`,  I have remove all `del` statements. In particular, you where deleting `SG` before the while loop over `twoblocks`... not good :P

> I kept `SG` before the while loop of `twoblocks` because there was no use of `SG` in future, as it was appended in `twoblocks` it's safe to delete it and deleting of `SG` won't reflect in `twoblocks`. \\
> The moto of deleting variables is to reduce the memory usage. correct me if I am wrong.

Deleting SG might lead to an error. Understand that when you append SG to `twoblocks`, you don't copy the full object, you just append a pointer to SG. Hopeful, when you do `del SG` it apparently only deletes the pointer, not the full object. So please don't do that !

To give you an example:

```
sage: G = Graph()
sage: L = []
sage: L.append(G)
sage: G.add_edge(0, 1)
sage: L[0].edges()
[(0, 1, None)]
```
 

Concerning `del twoblocks`, since the list is empty at that time, the memory occupancy is negligeable, so there is no need to do that.


> Can we add an example in which cut vertices which are generated differ from ones which are given as input.\\
> 
> ```
> sage: G = Graph()
> sage: G.add_cycle(vertices=[0,1,2,3,4])
> sage: cut_size,cut_vertices = G.vertex_connectivity(value_only=False)
> sage: cut_vertices
> [2, 4]
> sage: S,C,f = G.cleave(cut_vertices=[1, 3])
> sage: [g.order() for g in S]
> [4, 3]
> sage: C.order(), C.size()
> (2, 2)
> sage: f.vertices()
> [1, 3]
> 
> ```

I don't understand what you want to show. What is important is to give a valid vertex cut of the graph. You may add an example with more vertices than needed if you want, but I'm not sure it's so interesting here.



---

archive/issue_comments_326974.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@dcoudert](#comment%3A57):\n> Deleting SG might lead to an error. Understand that when you append SG to `twoblocks`, you don't copy the full object, you just append a pointer to SG. Hopeful, when you do `del SG` it apparently only deletes the pointer, not the full object. So please don't do that !\n> \n> To give you an example:\n> \n> ```\n> sage: G = Graph()\n> sage: L = []\n> sage: L.append(G)\n> sage: G.add_edge(0, 1)\n> sage: L[0].edges()\n> [(0, 1, None)]\n> ```\n>  \n> \n> Concerning `del twoblocks`, since the list is empty at that time, the memory occupancy is negligeable, so there is no need to do that.\n> \n\nThanks for clearing it, I thought the change in `SG` should not effect in `twoblocks`.\nso we can delete it. \nBefore keeping `del SG`, I did below test.\n\n```\nsage: G = Graph([[0,1]])\nsage: l = []\nsage: l.append(G)\nsage: G\nGraph on 2 vertices\nsage: l\n[Graph on 2 vertices]\nsage: del G\nsage: G\n---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)\n<ipython-input-7-96e89ba817df> in <module>()\n----> 1 G\n\nNameError: name 'G' is not defined\nsage: l\n[Graph on 2 vertices]\nsage: l[0].add_edge(2,3)\nsage: l\n[Graph on 4 vertices]\n\n```\nThis gives me thought that `G` and `l` doesn't have any link between them and both have independent memory location, so why to keep `G` when we have its instance in `l` but actually, it's appending links and deleting link i.e `SG` doesn't make sense and doesn't affect memory usage.\n\n> > Can we add an example in which cut vertices which are generated differ from ones which are given as input.\\\\\n> > \n> > ```\n> > sage: G = Graph()\n> > sage: G.add_cycle(vertices=[0,1,2,3,4])\n> > sage: cut_size,cut_vertices = G.vertex_connectivity(value_only=False)\n> > sage: cut_vertices\n> > [2, 4]\n> > sage: S,C,f = G.cleave(cut_vertices=[1, 3])\n> > sage: [g.order() for g in S]\n> > [4, 3]\n> > sage: C.order(), C.size()\n> > (2, 2)\n> > sage: f.vertices()\n> > [1, 3]\n> > \n> > ```\n\n> I don't understand what you want to show. What is important is to give a valid vertex cut of the graph. You may add an example with more vertices than needed if you want, but I'm not sure it's so interesting here.\n\nI want to show that the cut vertices(passing values when calling the function) could differ(in size too) from the generated output of `vertex_connectivity`, as we have enough examples may this is not a good example.",
    "created_at": "2018-06-17T21:58:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326974",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@dcoudert](#comment%3A57):
> Deleting SG might lead to an error. Understand that when you append SG to `twoblocks`, you don't copy the full object, you just append a pointer to SG. Hopeful, when you do `del SG` it apparently only deletes the pointer, not the full object. So please don't do that !
> 
> To give you an example:
> 
> ```
> sage: G = Graph()
> sage: L = []
> sage: L.append(G)
> sage: G.add_edge(0, 1)
> sage: L[0].edges()
> [(0, 1, None)]
> ```
>  
> 
> Concerning `del twoblocks`, since the list is empty at that time, the memory occupancy is negligeable, so there is no need to do that.
> 

Thanks for clearing it, I thought the change in `SG` should not effect in `twoblocks`.
so we can delete it. 
Before keeping `del SG`, I did below test.

```
sage: G = Graph([[0,1]])
sage: l = []
sage: l.append(G)
sage: G
Graph on 2 vertices
sage: l
[Graph on 2 vertices]
sage: del G
sage: G
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-7-96e89ba817df> in <module>()
----> 1 G

NameError: name 'G' is not defined
sage: l
[Graph on 2 vertices]
sage: l[0].add_edge(2,3)
sage: l
[Graph on 4 vertices]

```
This gives me thought that `G` and `l` doesn't have any link between them and both have independent memory location, so why to keep `G` when we have its instance in `l` but actually, it's appending links and deleting link i.e `SG` doesn't make sense and doesn't affect memory usage.

> > Can we add an example in which cut vertices which are generated differ from ones which are given as input.\\
> > 
> > ```
> > sage: G = Graph()
> > sage: G.add_cycle(vertices=[0,1,2,3,4])
> > sage: cut_size,cut_vertices = G.vertex_connectivity(value_only=False)
> > sage: cut_vertices
> > [2, 4]
> > sage: S,C,f = G.cleave(cut_vertices=[1, 3])
> > sage: [g.order() for g in S]
> > [4, 3]
> > sage: C.order(), C.size()
> > (2, 2)
> > sage: f.vertices()
> > [1, 3]
> > 
> > ```

> I don't understand what you want to show. What is important is to give a valid vertex cut of the graph. You may add an example with more vertices than needed if you want, but I'm not sure it's so interesting here.

I want to show that the cut vertices(passing values when calling the function) could differ(in size too) from the generated output of `vertex_connectivity`, as we have enough examples may this is not a good example.



---

archive/issue_comments_326975.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/980f76fadc5baa2fb3c92413d872009218c4c6bf\"><code>980f76f</code></a></td><td><code>Updated to 8.3.beta6 and examples</code></td></tr></table>\n",
    "created_at": "2018-06-23T17:06:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326975",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:59"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/980f76fadc5baa2fb3c92413d872009218c4c6bf"><code>980f76f</code></a></td><td><code>Updated to 8.3.beta6 and examples</code></td></tr></table>




---

archive/issue_comments_326976.json:
```json
{
    "body": "Changed commit from **[`8cf8432`](https://github.com/sagemath/sagetrac-mirror/commit/8cf8432bfba5e5dd051894eaee0c204e9660fdc3)** to **[`980f76f`](https://github.com/sagemath/sagetrac-mirror/commit/980f76fadc5baa2fb3c92413d872009218c4c6bf)**",
    "created_at": "2018-06-23T17:06:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326976",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

Changed commit from **[`8cf8432`](https://github.com/sagemath/sagetrac-mirror/commit/8cf8432bfba5e5dd051894eaee0c204e9660fdc3)** to **[`980f76f`](https://github.com/sagemath/sagetrac-mirror/commit/980f76fadc5baa2fb3c92413d872009218c4c6bf)**



---

archive/issue_comments_326977.json:
```json
{
    "body": "Changed branch from **[public/22157_spqrtree_dc](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_dc)** to **[public/22157_spqrtree_beta6](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_beta6)**",
    "created_at": "2018-06-23T17:06:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326977",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

Changed branch from **[public/22157_spqrtree_dc](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_dc)** to **[public/22157_spqrtree_beta6](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_beta6)**



---

archive/issue_comments_326978.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nA minor change in the examples, `G.spqr_tree()` to `spqr_tree(G)` and `G.cleave(cut_vertices)` to `cleave(G, cut_vertices)`as the code is shifted to connectivity.pyx file.",
    "created_at": "2018-06-23T17:12:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326978",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:60" align="right">comment:60</div>

A minor change in the examples, `G.spqr_tree()` to `spqr_tree(G)` and `G.cleave(cut_vertices)` to `cleave(G, cut_vertices)`as the code is shifted to connectivity.pyx file.



---

archive/issue_comments_326979.json:
```json
{
    "body": "Changed commit from **[`980f76f`](https://github.com/sagemath/sagetrac-mirror/commit/980f76fadc5baa2fb3c92413d872009218c4c6bf)** to **[`7fb97eb`](https://github.com/sagemath/sagetrac-mirror/commit/7fb97eb34fd33a05ac2cecdb2ad04cd3f014c6bb)**",
    "created_at": "2018-06-24T09:13:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326979",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`980f76f`](https://github.com/sagemath/sagetrac-mirror/commit/980f76fadc5baa2fb3c92413d872009218c4c6bf)** to **[`7fb97eb`](https://github.com/sagemath/sagetrac-mirror/commit/7fb97eb34fd33a05ac2cecdb2ad04cd3f014c6bb)**



---

archive/issue_comments_326980.json:
```json
{
    "body": "<div id=\"comment:61\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8736f6e2f6654d891fb67cfd06eaa59595d3634a\"><code>8736f6e</code></a></td><td><code>trac #22157: Merged with 8.3.beta7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b0ae811359517061b95e2c72aafafd28e72bea9\"><code>3b0ae81</code></a></td><td><code>trac #22157: ensure that subgraphs returned by cleave have right vertex sets</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04261dec9ce692c06fab70665770f9ec93a1a8dd\"><code>04261de</code></a></td><td><code>trac #22157: add cleave to list of methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/051e5457fd5252b32c484e9362d077e64b6144be\"><code>051e545</code></a></td><td><code>trac #22157: improve description of spqr_tree</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fb97eb34fd33a05ac2cecdb2ad04cd3f014c6bb\"><code>7fb97eb</code></a></td><td><code>trac #22157: improve some comments</code></td></tr></table>\n",
    "created_at": "2018-06-24T09:13:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326980",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:61"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8736f6e2f6654d891fb67cfd06eaa59595d3634a"><code>8736f6e</code></a></td><td><code>trac #22157: Merged with 8.3.beta7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b0ae811359517061b95e2c72aafafd28e72bea9"><code>3b0ae81</code></a></td><td><code>trac #22157: ensure that subgraphs returned by cleave have right vertex sets</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04261dec9ce692c06fab70665770f9ec93a1a8dd"><code>04261de</code></a></td><td><code>trac #22157: add cleave to list of methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/051e5457fd5252b32c484e9362d077e64b6144be"><code>051e545</code></a></td><td><code>trac #22157: improve description of spqr_tree</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fb97eb34fd33a05ac2cecdb2ad04cd3f014c6bb"><code>7fb97eb</code></a></td><td><code>trac #22157: improve some comments</code></td></tr></table>




---

archive/issue_comments_326981.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nI did some more corrections, but I need some clarifications to go beyond.\n- Could you try to improve the comments. So far, some of them a really not clear ;)\n\n- if `SG` is simplified to a cycle, can't we directly return the solution ?\n\n- In the part where you merge cycles to form `cycle_graph`, I'm not sure of what we want at the end. I suspect that we can do something smarter, but it depends on what we must get.\n\n- Why are we returning so many different values ? Can't we just return a tree in which nodes a tuples (type, graph) ? Observe that using `immutable` graphs, we can do:\n\n```\nsage: P = Graph(1, immutable=True)\nsage: Q = Graph(2, immutable=True)\nsage: H = Graph([[P, Q], [(P, Q)]])\n```\n\n- The case of `Q` block could also be handled at the beginning, right ?",
    "created_at": "2018-06-24T09:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326981",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:62" align="right">comment:62</div>

I did some more corrections, but I need some clarifications to go beyond.
- Could you try to improve the comments. So far, some of them a really not clear ;)

- if `SG` is simplified to a cycle, can't we directly return the solution ?

- In the part where you merge cycles to form `cycle_graph`, I'm not sure of what we want at the end. I suspect that we can do something smarter, but it depends on what we must get.

- Why are we returning so many different values ? Can't we just return a tree in which nodes a tuples (type, graph) ? Observe that using `immutable` graphs, we can do:

```
sage: P = Graph(1, immutable=True)
sage: Q = Graph(2, immutable=True)
sage: H = Graph([[P, Q], [(P, Q)]])
```

- The case of `Q` block could also be handled at the beginning, right ?



---

archive/issue_comments_326982.json:
```json
{
    "body": "<div id=\"comment:63\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/150e8689ee4481c2df8e9474287936e0430668be\"><code>150e868</code></a></td><td><code>Updated for case when `SG` is a cycle.</code></td></tr></table>\n",
    "created_at": "2018-06-25T14:14:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326982",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:63"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/150e8689ee4481c2df8e9474287936e0430668be"><code>150e868</code></a></td><td><code>Updated for case when `SG` is a cycle.</code></td></tr></table>




---

archive/issue_comments_326983.json:
```json
{
    "body": "Changed commit from **[`7fb97eb`](https://github.com/sagemath/sagetrac-mirror/commit/7fb97eb34fd33a05ac2cecdb2ad04cd3f014c6bb)** to **[`150e868`](https://github.com/sagemath/sagetrac-mirror/commit/150e8689ee4481c2df8e9474287936e0430668be)**",
    "created_at": "2018-06-25T14:14:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326983",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7fb97eb`](https://github.com/sagemath/sagetrac-mirror/commit/7fb97eb34fd33a05ac2cecdb2ad04cd3f014c6bb)** to **[`150e868`](https://github.com/sagemath/sagetrac-mirror/commit/150e8689ee4481c2df8e9474287936e0430668be)**



---

archive/issue_comments_326984.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [@sagetrac-git](#comment%3A63):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n\n|                                                                                                                                                 |                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[150e868](https://github.com/sagemath/sagetrac-mirror/commit/150e8689ee4481c2df8e9474287936e0430668be)|<code>Updated for case when \\`SG\\` is a cycle.</code>|\nI have added `P_block_new` for test.\nExample: \n\n```\nsage: from sage.graphs.connectivity import spqr_tree\n....: G = Graph()\n....: G.add_cycle(vertices=[0,1,2,3,4])\n....: G.allow_multiple_edges(True)\n....: G.add_edges(G.edges())\n....: G.add_edge(2,3)\n....: G.add_edge(3,4)\n....: \nsage: R,S,P,SPR,tricomp,SPQR_tree,P_new = spqr_tree(G)\nsage: P==P_new\nTrue\n\n```\nIn the next commit, I will update the comments and add a return statement `if SG.is_cycle():`.",
    "created_at": "2018-06-25T14:19:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326984",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [@sagetrac-git](#comment%3A63):
> Branch pushed to git repo; I updated commit sha1. New commits:

|                                                                                                                                                 |                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[150e868](https://github.com/sagemath/sagetrac-mirror/commit/150e8689ee4481c2df8e9474287936e0430668be)|<code>Updated for case when \`SG\` is a cycle.</code>|
I have added `P_block_new` for test.
Example: 

```
sage: from sage.graphs.connectivity import spqr_tree
....: G = Graph()
....: G.add_cycle(vertices=[0,1,2,3,4])
....: G.allow_multiple_edges(True)
....: G.add_edges(G.edges())
....: G.add_edge(2,3)
....: G.add_edge(3,4)
....: 
sage: R,S,P,SPR,tricomp,SPQR_tree,P_new = spqr_tree(G)
sage: P==P_new
True

```
In the next commit, I will update the comments and add a return statement `if SG.is_cycle():`.



---

archive/issue_comments_326985.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [@dcoudert](#comment%3A62):\n\n> - Could you try to improve the comments. So far, some of them a really not clear ;)\n\nI will try to add in the next commit. I am not yet good at writing formally.\n> \n> - if `SG` is simplified to a cycle, can't we directly return the solution ?\n\nYes we can do this, \nR will be `[]` \\\\\nS will be `SG` \\\\\nP_block will be the components formed by combining multiple edges in `cocycle`. there are two ways to do it. \\\\\n1. Make components by adding multiple edges. \\\\\n2. Make multigraph using `cocycle` edges then extract subgraphs using `cuts`. \\\\\nI feel option 1 is slightly better than option 2, let me know which option is better.\n> \n> - In the part where you merge cycles to form `cycle_graph`, I'm not sure of what we want at the end. I suspect that we can do something smarter, but it depends on what we must get.\n> \n\nIt's a verification step used to check whether all the cycles are formed using `cocycle` edges. \\\\\nInitially, I thought we can skip this step as there is no case in which cycle will be formed without using `cocycle` edge but I am not 100% sure.\n> - Why are we returning so many different values ? Can't we just return a tree in which nodes a tuples (type, graph) ? Observe that using `immutable` graphs, we can do:\n> \n> ```\n> sage: P = Graph(1, immutable=True)\n> sage: Q = Graph(2, immutable=True)\n> sage: H = Graph([[P, Q], [(P, Q)]])\n> ```\n> \n> - The case of `Q` block could also be handled at the beginning, right ?\n\nWe can remove `SPR` block as it's addition of previous 3 variables, `R_blocks + polygons + P_blocks`. \\\\",
    "created_at": "2018-06-25T14:32:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326985",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [@dcoudert](#comment%3A62):

> - Could you try to improve the comments. So far, some of them a really not clear ;)

I will try to add in the next commit. I am not yet good at writing formally.
> 
> - if `SG` is simplified to a cycle, can't we directly return the solution ?

Yes we can do this, 
R will be `[]` \\
S will be `SG` \\
P_block will be the components formed by combining multiple edges in `cocycle`. there are two ways to do it. \\
1. Make components by adding multiple edges. \\
2. Make multigraph using `cocycle` edges then extract subgraphs using `cuts`. \\
I feel option 1 is slightly better than option 2, let me know which option is better.
> 
> - In the part where you merge cycles to form `cycle_graph`, I'm not sure of what we want at the end. I suspect that we can do something smarter, but it depends on what we must get.
> 

It's a verification step used to check whether all the cycles are formed using `cocycle` edges. \\
Initially, I thought we can skip this step as there is no case in which cycle will be formed without using `cocycle` edge but I am not 100% sure.
> - Why are we returning so many different values ? Can't we just return a tree in which nodes a tuples (type, graph) ? Observe that using `immutable` graphs, we can do:
> 
> ```
> sage: P = Graph(1, immutable=True)
> sage: Q = Graph(2, immutable=True)
> sage: H = Graph([[P, Q], [(P, Q)]])
> ```
> 
> - The case of `Q` block could also be handled at the beginning, right ?

We can remove `SPR` block as it's addition of previous 3 variables, `R_blocks + polygons + P_blocks`. \\



---

archive/issue_comments_326986.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\n> P_block will be the components formed by combining multiple edges in `cocycle`. there are two ways to do it. \\\\\n> 1. Make components by adding multiple edges. \\\\\n> 2. Make multigraph using `cocycle` edges then extract subgraphs using `cuts`. \\\\\n> I feel option 1 is slightly better than option 2, let me know which option is better.\n\nIt's also my impression.\n\n> > - In the part where you merge cycles to form `cycle_graph`, I'm not sure of what we want at the end. I suspect that we can do something smarter, but it depends on what we must get.\n> > \n\n> It's a verification step used to check whether all the cycles are formed using `cocycle` edges. \\\\\n> Initially, I thought we can skip this step as there is no case in which cycle will be formed without using `cocycle` edge but I am not 100% sure.\n\nMe neither. \n\n> > - Why are we returning so many different values ? Can't we just return a tree in which nodes a tuples (type, graph) ? Observe that using `immutable` graphs, we can do:\n> > \n> > ```\n> > sage: P = Graph(1, immutable=True)\n> > sage: Q = Graph(2, immutable=True)\n> > sage: H = Graph([[P, Q], [(P, Q)]])\n> > ```\n> > \n> > - The case of `Q` block could also be handled at the beginning, right ?\n\n> We can remove `SPR` block as it's addition of previous 3 variables, `R_blocks + polygons + P_blocks`. \\\\\n\nAssume that the nodes of the SPQR-tree are (immutable) multi-graphs and not subsets of vertices. If I give you only the SPQR-tree, we should be able to reconstruct the original graph, right ? So are other outputs necessary ?",
    "created_at": "2018-06-27T07:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326986",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:66" align="right">comment:66</div>

> P_block will be the components formed by combining multiple edges in `cocycle`. there are two ways to do it. \\
> 1. Make components by adding multiple edges. \\
> 2. Make multigraph using `cocycle` edges then extract subgraphs using `cuts`. \\
> I feel option 1 is slightly better than option 2, let me know which option is better.

It's also my impression.

> > - In the part where you merge cycles to form `cycle_graph`, I'm not sure of what we want at the end. I suspect that we can do something smarter, but it depends on what we must get.
> > 

> It's a verification step used to check whether all the cycles are formed using `cocycle` edges. \\
> Initially, I thought we can skip this step as there is no case in which cycle will be formed without using `cocycle` edge but I am not 100% sure.

Me neither. 

> > - Why are we returning so many different values ? Can't we just return a tree in which nodes a tuples (type, graph) ? Observe that using `immutable` graphs, we can do:
> > 
> > ```
> > sage: P = Graph(1, immutable=True)
> > sage: Q = Graph(2, immutable=True)
> > sage: H = Graph([[P, Q], [(P, Q)]])
> > ```
> > 
> > - The case of `Q` block could also be handled at the beginning, right ?

> We can remove `SPR` block as it's addition of previous 3 variables, `R_blocks + polygons + P_blocks`. \\

Assume that the nodes of the SPQR-tree are (immutable) multi-graphs and not subsets of vertices. If I give you only the SPQR-tree, we should be able to reconstruct the original graph, right ? So are other outputs necessary ?



---

archive/issue_comments_326987.json:
```json
{
    "body": "Changed commit from **[`150e868`](https://github.com/sagemath/sagetrac-mirror/commit/150e8689ee4481c2df8e9474287936e0430668be)** to **[`92362bc`](https://github.com/sagemath/sagetrac-mirror/commit/92362bcb77a8ddb619277c8be6293c8ea3b81fed)**",
    "created_at": "2018-06-27T11:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326987",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`150e868`](https://github.com/sagemath/sagetrac-mirror/commit/150e8689ee4481c2df8e9474287936e0430668be)** to **[`92362bc`](https://github.com/sagemath/sagetrac-mirror/commit/92362bcb77a8ddb619277c8be6293c8ea3b81fed)**



---

archive/issue_comments_326988.json:
```json
{
    "body": "<div id=\"comment:67\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92362bcb77a8ddb619277c8be6293c8ea3b81fed\"><code>92362bc</code></a></td><td><code>Updated tree construction using immutable.</code></td></tr></table>\n",
    "created_at": "2018-06-27T11:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326988",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:67"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92362bcb77a8ddb619277c8be6293c8ea3b81fed"><code>92362bc</code></a></td><td><code>Updated tree construction using immutable.</code></td></tr></table>




---

archive/issue_comments_326989.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\n\n```\nsage: from sage.graphs.connectivity import spqr_tree\n....: G = Graph()\n....: G.add_cycle(vertices=[0,1,2,3,4])\n....: G.allow_multiple_edges(True)\n....: G.add_edges(G.edges())\n....: G.add_edge(2,3)\n....: G.add_edge(3,4)\n....: R,S,P,SPR,tricomp,SPQR_tree, tree_new = spqr_tree(G)\nsage: tree_new == SPQR_tree\nTrue\nsage: SPQR_tree.vertices()\n[('P', (0, 1), Subgraph of (): Multi-graph on 2 vertices),\n ('P', (0, 4), Subgraph of (): Multi-graph on 2 vertices),\n ('P', (1, 2), Subgraph of (): Multi-graph on 2 vertices),\n ('P', (2, 3), Subgraph of (): Multi-graph on 2 vertices),\n ('P', (3, 4), Subgraph of (): Multi-graph on 2 vertices),\n ('S', (0, 1, 2, 3, 4), Subgraph of (): Multi-graph on 5 vertices)]\n```\n\nUpdated SPQR_Tree vertices with subgraphs and added tree construction along with P_Block part for `SG` cycle case. \\\\\nLet me know this is the right way to do. \\\\\nFrom this, we need to return only `Tree` and not need to return other blocks.\\\\\nStill, subgraph vertices are there in SPQR_Tree it's for testing which will be removed.",
    "created_at": "2018-06-27T11:45:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326989",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:68" align="right">comment:68</div>


```
sage: from sage.graphs.connectivity import spqr_tree
....: G = Graph()
....: G.add_cycle(vertices=[0,1,2,3,4])
....: G.allow_multiple_edges(True)
....: G.add_edges(G.edges())
....: G.add_edge(2,3)
....: G.add_edge(3,4)
....: R,S,P,SPR,tricomp,SPQR_tree, tree_new = spqr_tree(G)
sage: tree_new == SPQR_tree
True
sage: SPQR_tree.vertices()
[('P', (0, 1), Subgraph of (): Multi-graph on 2 vertices),
 ('P', (0, 4), Subgraph of (): Multi-graph on 2 vertices),
 ('P', (1, 2), Subgraph of (): Multi-graph on 2 vertices),
 ('P', (2, 3), Subgraph of (): Multi-graph on 2 vertices),
 ('P', (3, 4), Subgraph of (): Multi-graph on 2 vertices),
 ('S', (0, 1, 2, 3, 4), Subgraph of (): Multi-graph on 5 vertices)]
```

Updated SPQR_Tree vertices with subgraphs and added tree construction along with P_Block part for `SG` cycle case. \\
Let me know this is the right way to do. \\
From this, we need to return only `Tree` and not need to return other blocks.\\
Still, subgraph vertices are there in SPQR_Tree it's for testing which will be removed.



---

archive/issue_comments_326990.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nDo you agree that, if after the `Split_multiple_edge Algorithm`, `SG` is reduced to a cycle,  it means that the graph `G` is a cycle with possibly multiple edges, and so that the SPQR-tree contains a single vertex `('S', Graph(G, immutable=True, multiedges=G.has_multiple_edges()))` ? \n\nIf so, you do directly:\n\n```\nif SG.is_cycle():\n    return Graph({('S', Graph(G, immutable=True, multiedges=G.has_multiple_edges())): []})\n```",
    "created_at": "2018-06-27T15:48:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326990",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:69" align="right">comment:69</div>

Do you agree that, if after the `Split_multiple_edge Algorithm`, `SG` is reduced to a cycle,  it means that the graph `G` is a cycle with possibly multiple edges, and so that the SPQR-tree contains a single vertex `('S', Graph(G, immutable=True, multiedges=G.has_multiple_edges()))` ? 

If so, you do directly:

```
if SG.is_cycle():
    return Graph({('S', Graph(G, immutable=True, multiedges=G.has_multiple_edges())): []})
```



---

archive/issue_comments_326991.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nReplying to [@dcoudert](#comment%3A69):\n> Do you agree that, if after the `Split_multiple_edge Algorithm`, `SG` is reduced to a cycle,  it means that the graph `G` is a cycle with possibly multiple edges, and so that the SPQR-tree contains a single vertex `('S', Graph(G, immutable=True, multiedges=G.has_multiple_edges()))` ? \n> \n> If so, you do directly:\n> \n> ```\n> if SG.is_cycle():\n>     return Graph({('S', Graph(G, immutable=True, multiedges=G.has_multiple_edges())): []})\n> ```\n\nYes, `SG` will be a cycle if `G` is a cycle with few multi edges but in SPQR-Tree I feel we will have morethan one vertex because `G` is multi-graph so some edges will be added to `cocycle` which will lead to creation of `P_Block`(P vertices). \\\\\n\n`return Graph({('S', Graph(G, immutable=True, multiedges=G.has_multiple_edges())`. \\\\\nThis is true when `G` is cycle with `n - 1` edges. So no edges will contribute in creation of `P_Block`. \\\\\n\ncorrect me if I am wrong.",
    "created_at": "2018-06-27T17:02:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326991",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:70" align="right">comment:70</div>

Replying to [@dcoudert](#comment%3A69):
> Do you agree that, if after the `Split_multiple_edge Algorithm`, `SG` is reduced to a cycle,  it means that the graph `G` is a cycle with possibly multiple edges, and so that the SPQR-tree contains a single vertex `('S', Graph(G, immutable=True, multiedges=G.has_multiple_edges()))` ? 
> 
> If so, you do directly:
> 
> ```
> if SG.is_cycle():
>     return Graph({('S', Graph(G, immutable=True, multiedges=G.has_multiple_edges())): []})
> ```

Yes, `SG` will be a cycle if `G` is a cycle with few multi edges but in SPQR-Tree I feel we will have morethan one vertex because `G` is multi-graph so some edges will be added to `cocycle` which will lead to creation of `P_Block`(P vertices). \\

`return Graph({('S', Graph(G, immutable=True, multiedges=G.has_multiple_edges())`. \\
This is true when `G` is cycle with `n - 1` edges. So no edges will contribute in creation of `P_Block`. \\

correct me if I am wrong.



---

archive/issue_comments_326992.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nI'm not completely sure of that, but may be I missed something in the definitions (not clear for multigraphs). Somehow, the question we have to answer is: can a P node be a leaf of the SPQR tree ?\\\\\nIf so, a P node is a separator only if it is also an internal vertex of the tree.\n\n`@`Meghana: what's your understanding of this case ?",
    "created_at": "2018-06-28T08:15:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326992",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:71" align="right">comment:71</div>

I'm not completely sure of that, but may be I missed something in the definitions (not clear for multigraphs). Somehow, the question we have to answer is: can a P node be a leaf of the SPQR tree ?\\
If so, a P node is a separator only if it is also an internal vertex of the tree.

`@`Meghana: what's your understanding of this case ?



---

archive/issue_comments_326993.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [@dcoudert](#comment%3A71):\n> I'm not completely sure of that, but may be I missed something in the definitions (not clear for multigraphs). Somehow, the question we have to answer is: can a P node be a leaf of the SPQR tree ?\\\\\n\nYes, it can be a leaf node.\n> If so, a P node is a separator only if it is also an internal vertex of the tree.\n\nYes, it will be a separator if it's an internal vertex.\n\n```\n        sage: G = graphs.CompleteBipartiteGraph(2,3)\n        sage: G.add_edge(2, 3)\n        sage: G.allow_multiple_edges(True)\n        sage: G.add_edges(G.edges())\n        sage: G.add_edges([[0,1],[0,1],[0,1]])\n        sage: R,S,P,SPR,tricomp,SPQR_tree,tree_new = spqr_tree(G)\n```\nIn the above example some `P` elements are acting as leaf and some as internal vertex(a seperator).",
    "created_at": "2018-06-28T10:19:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326993",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [@dcoudert](#comment%3A71):
> I'm not completely sure of that, but may be I missed something in the definitions (not clear for multigraphs). Somehow, the question we have to answer is: can a P node be a leaf of the SPQR tree ?\\

Yes, it can be a leaf node.
> If so, a P node is a separator only if it is also an internal vertex of the tree.

Yes, it will be a separator if it's an internal vertex.

```
        sage: G = graphs.CompleteBipartiteGraph(2,3)
        sage: G.add_edge(2, 3)
        sage: G.allow_multiple_edges(True)
        sage: G.add_edges(G.edges())
        sage: G.add_edges([[0,1],[0,1],[0,1]])
        sage: R,S,P,SPR,tricomp,SPQR_tree,tree_new = spqr_tree(G)
```
In the above example some `P` elements are acting as leaf and some as internal vertex(a seperator).



---

archive/issue_comments_326994.json:
```json
{
    "body": "Changed commit from **[`92362bc`](https://github.com/sagemath/sagetrac-mirror/commit/92362bcb77a8ddb619277c8be6293c8ea3b81fed)** to **[`9a712d1`](https://github.com/sagemath/sagetrac-mirror/commit/9a712d1639aee90a3695df9e4de48017606aa723)**",
    "created_at": "2018-06-28T10:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326994",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`92362bc`](https://github.com/sagemath/sagetrac-mirror/commit/92362bcb77a8ddb619277c8be6293c8ea3b81fed)** to **[`9a712d1`](https://github.com/sagemath/sagetrac-mirror/commit/9a712d1639aee90a3695df9e4de48017606aa723)**



---

archive/issue_comments_326995.json:
```json
{
    "body": "<div id=\"comment:73\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a712d1639aee90a3695df9e4de48017606aa723\"><code>9a712d1</code></a></td><td><code>Small test error fixed.</code></td></tr></table>\n",
    "created_at": "2018-06-28T10:22:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326995",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:73"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a712d1639aee90a3695df9e4de48017606aa723"><code>9a712d1</code></a></td><td><code>Small test error fixed.</code></td></tr></table>




---

archive/issue_comments_326996.json:
```json
{
    "body": "Changed commit from **[`9a712d1`](https://github.com/sagemath/sagetrac-mirror/commit/9a712d1639aee90a3695df9e4de48017606aa723)** to **[`4468377`](https://github.com/sagemath/sagetrac-mirror/commit/4468377d4b9357f92bf49af558d0c578055341fa)**",
    "created_at": "2018-06-28T18:00:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326996",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9a712d1`](https://github.com/sagemath/sagetrac-mirror/commit/9a712d1639aee90a3695df9e4de48017606aa723)** to **[`4468377`](https://github.com/sagemath/sagetrac-mirror/commit/4468377d4b9357f92bf49af558d0c578055341fa)**



---

archive/issue_comments_326997.json:
```json
{
    "body": "<div id=\"comment:74\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4468377d4b9357f92bf49af558d0c578055341fa\"><code>4468377</code></a></td><td><code>trac #22157: case when reduced to a cycle</code></td></tr></table>\n",
    "created_at": "2018-06-28T18:00:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326997",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:74"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4468377d4b9357f92bf49af558d0c578055341fa"><code>4468377</code></a></td><td><code>trac #22157: case when reduced to a cycle</code></td></tr></table>




---

archive/issue_comments_326998.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nWith what I did, you can do (don't add a third edge between 0 and 1 in this example. There is an error in `is_clique`: #25696):\n\n```\nsage: G = Graph([(0, 1), (0, 1), (0, 3), (1, 2), (2, 3)], multiedges=True)\nsage: spqr_tree(G)\nSPQR-tree of : Graph on 2 vertices\nsage: spqr_tree(G).edges()\n[(('P', Multi-graph on 2 vertices), ('S', Multi-graph on 4 vertices), None)]\n```\nI think the code is simpler and we return only what we need = the SPQR tree. Do you agree or you think something is missing ?\n\n\n\nAt some point, we will need a function that reconstruct a graph from a SPQR tree.",
    "created_at": "2018-06-28T18:05:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326998",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:75" align="right">comment:75</div>

With what I did, you can do (don't add a third edge between 0 and 1 in this example. There is an error in `is_clique`: #25696):

```
sage: G = Graph([(0, 1), (0, 1), (0, 3), (1, 2), (2, 3)], multiedges=True)
sage: spqr_tree(G)
SPQR-tree of : Graph on 2 vertices
sage: spqr_tree(G).edges()
[(('P', Multi-graph on 2 vertices), ('S', Multi-graph on 4 vertices), None)]
```
I think the code is simpler and we return only what we need = the SPQR tree. Do you agree or you think something is missing ?



At some point, we will need a function that reconstruct a graph from a SPQR tree.



---

archive/issue_comments_326999.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nReplying to [@dcoudert](#comment%3A75):\n> With what I did, you can do (don't add a third edge between 0 and 1 in this example. There is an error in `is_clique`: #25696):\n> \n> ```\n> sage: G = Graph([(0, 1), (0, 1), (0, 3), (1, 2), (2, 3)], multiedges=True)\n> sage: spqr_tree(G)\n> SPQR-tree of : Graph on 2 vertices\n> sage: spqr_tree(G).edges()\n> [(('P', Multi-graph on 2 vertices), ('S', Multi-graph on 4 vertices), None)]\n> ```\n> I think the code is simpler and we return only what we need = the SPQR tree. Do you agree or you think something is missing ?\n\nYes, SPQR-Tree is sufficient as all blocks with edges are covered in it.\n> \n> At some point, we will need a function that reconstruct a graph from a SPQR tree.\n\nIs it for verification?",
    "created_at": "2018-06-28T18:28:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-326999",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:76" align="right">comment:76</div>

Replying to [@dcoudert](#comment%3A75):
> With what I did, you can do (don't add a third edge between 0 and 1 in this example. There is an error in `is_clique`: #25696):
> 
> ```
> sage: G = Graph([(0, 1), (0, 1), (0, 3), (1, 2), (2, 3)], multiedges=True)
> sage: spqr_tree(G)
> SPQR-tree of : Graph on 2 vertices
> sage: spqr_tree(G).edges()
> [(('P', Multi-graph on 2 vertices), ('S', Multi-graph on 4 vertices), None)]
> ```
> I think the code is simpler and we return only what we need = the SPQR tree. Do you agree or you think something is missing ?

Yes, SPQR-Tree is sufficient as all blocks with edges are covered in it.
> 
> At some point, we will need a function that reconstruct a graph from a SPQR tree.

Is it for verification?



---

archive/issue_comments_327000.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\n> > I think the code is simpler and we return only what we need = the SPQR tree. Do you agree or you think something is missing ?\n\n> Yes, SPQR-Tree is sufficient as all blocks with edges are covered in it.\n\nSo you can improve the last parts of the method in this way and update the examples and tests ?\n\n> > At some point, we will need a function that reconstruct a graph from a SPQR tree.\n\n> Is it for verification?\n\nYes. It can be an internal method of `connectivity.pyx`. Then we can reconstruct and check that the resulting graph is isomorphic to the original one.",
    "created_at": "2018-06-28T18:33:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327000",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:77" align="right">comment:77</div>

> > I think the code is simpler and we return only what we need = the SPQR tree. Do you agree or you think something is missing ?

> Yes, SPQR-Tree is sufficient as all blocks with edges are covered in it.

So you can improve the last parts of the method in this way and update the examples and tests ?

> > At some point, we will need a function that reconstruct a graph from a SPQR tree.

> Is it for verification?

Yes. It can be an internal method of `connectivity.pyx`. Then we can reconstruct and check that the resulting graph is isomorphic to the original one.



---

archive/issue_comments_327001.json:
```json
{
    "body": "Changed commit from **[`4468377`](https://github.com/sagemath/sagetrac-mirror/commit/4468377d4b9357f92bf49af558d0c578055341fa)** to **[`fdae153`](https://github.com/sagemath/sagetrac-mirror/commit/fdae15359d6813b2a1fa4e7f1947ce0fa99c80d7)**",
    "created_at": "2018-06-28T20:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327001",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4468377`](https://github.com/sagemath/sagetrac-mirror/commit/4468377d4b9357f92bf49af558d0c578055341fa)** to **[`fdae153`](https://github.com/sagemath/sagetrac-mirror/commit/fdae15359d6813b2a1fa4e7f1947ce0fa99c80d7)**



---

archive/issue_comments_327002.json:
```json
{
    "body": "<div id=\"comment:78\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdae15359d6813b2a1fa4e7f1947ce0fa99c80d7\"><code>fdae153</code></a></td><td><code>Updated examples and output definition</code></td></tr></table>\n",
    "created_at": "2018-06-28T20:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327002",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:78"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdae15359d6813b2a1fa4e7f1947ce0fa99c80d7"><code>fdae153</code></a></td><td><code>Updated examples and output definition</code></td></tr></table>




---

archive/issue_comments_327003.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [@sagetrac-git](#comment%3A78):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n\n|                                                                                                                                                 |                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[fdae153](https://github.com/sagemath/sagetrac-mirror/commit/fdae15359d6813b2a1fa4e7f1947ce0fa99c80d7)|`Updated examples and output definition`|\nIs there is a way we can future improve the tree creation? \\\\\nUpdated the examples and removed few unused statements.",
    "created_at": "2018-06-28T20:22:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327003",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [@sagetrac-git](#comment%3A78):
> Branch pushed to git repo; I updated commit sha1. New commits:

|                                                                                                                                                 |                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[fdae153](https://github.com/sagemath/sagetrac-mirror/commit/fdae15359d6813b2a1fa4e7f1947ce0fa99c80d7)|`Updated examples and output definition`|
Is there is a way we can future improve the tree creation? \\
Updated the examples and removed few unused statements.



---

archive/issue_comments_327004.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nThe merging of cycles is not working well :(\n\n```\nsage: G = Graph(2)\nsage: for _ in range(3):\n....:     G.add_path([0, G.add_vertex(), G.add_vertex(), 1])\n....:     \nsage: H = spqr_tree(G)\nsage: H.order()\n8\nsage: for u in H:\n....:     print u[0],u[1].vertices()\n....:     \nP [1, 4]\nS [0, 1, 2]\nP [1, 2]\nS [0, 1, 6, 7]\nS [1, 2, 3]\nP [0, 1]\nS [0, 1, 4]\nS [1, 4, 5]\n```",
    "created_at": "2018-06-29T06:45:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327004",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:80" align="right">comment:80</div>

The merging of cycles is not working well :(

```
sage: G = Graph(2)
sage: for _ in range(3):
....:     G.add_path([0, G.add_vertex(), G.add_vertex(), 1])
....:     
sage: H = spqr_tree(G)
sage: H.order()
8
sage: for u in H:
....:     print u[0],u[1].vertices()
....:     
P [1, 4]
S [0, 1, 2]
P [1, 2]
S [0, 1, 6, 7]
S [1, 2, 3]
P [0, 1]
S [0, 1, 4]
S [1, 4, 5]
```



---

archive/issue_comments_327005.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nReplying to [@dcoudert](#comment%3A80):\n> The merging of cycles is not working well :(\n> \n> ```\n> sage: G = Graph(2)\n> sage: for _ in range(3):\n> ....:     G.add_path([0, G.add_vertex(), G.add_vertex(), 1])\n> ....:     \n> sage: H = spqr_tree(G)\n> sage: H.order()\n> 8\n> sage: for u in H:\n> ....:     print u[0],u[1].vertices()\n> ....:     \n> P [1, 4]\n> S [0, 1, 2]\n> P [1, 2]\n> S [0, 1, 6, 7]\n> S [1, 2, 3]\n> P [0, 1]\n> S [0, 1, 4]\n> S [1, 4, 5]\n> ```\n\nIs the problem is there are not sorted? \\\\\nany problem in accessing vertices like this\n\n```\nsage: G = Graph(2)\nsage: for _ in range(3):\n....:     G.add_path([0, G.add_vertex(), G.add_vertex(), 1])\n....:     \nsage: H = spqr_tree(G)\nsage: H.order() \n10\nsage: for u in H.vertices():\n....:     print u[0], u[1].vertices()\n....:     \nP [0, 7]\nP [1, 2]\nP [0, 5]\nP [0, 1]\nS [0, 6, 7]\nS [0, 1, 7]\nS [0, 4, 5]\nS [0, 1, 5]\nS [1, 2, 3]\nS [0, 1, 2]\n```",
    "created_at": "2018-06-29T18:15:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327005",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:81" align="right">comment:81</div>

Replying to [@dcoudert](#comment%3A80):
> The merging of cycles is not working well :(
> 
> ```
> sage: G = Graph(2)
> sage: for _ in range(3):
> ....:     G.add_path([0, G.add_vertex(), G.add_vertex(), 1])
> ....:     
> sage: H = spqr_tree(G)
> sage: H.order()
> 8
> sage: for u in H:
> ....:     print u[0],u[1].vertices()
> ....:     
> P [1, 4]
> S [0, 1, 2]
> P [1, 2]
> S [0, 1, 6, 7]
> S [1, 2, 3]
> P [0, 1]
> S [0, 1, 4]
> S [1, 4, 5]
> ```

Is the problem is there are not sorted? \\
any problem in accessing vertices like this

```
sage: G = Graph(2)
sage: for _ in range(3):
....:     G.add_path([0, G.add_vertex(), G.add_vertex(), 1])
....:     
sage: H = spqr_tree(G)
sage: H.order() 
10
sage: for u in H.vertices():
....:     print u[0], u[1].vertices()
....:     
P [0, 7]
P [1, 2]
P [0, 5]
P [0, 1]
S [0, 6, 7]
S [0, 1, 7]
S [0, 4, 5]
S [0, 1, 5]
S [1, 2, 3]
S [0, 1, 2]
```



---

archive/issue_comments_327006.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nNo. I expect the SPQR tree to have 1 P block and 3 S blocks. We have more, meaning that the merging of cycles is not well done.",
    "created_at": "2018-06-29T21:45:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327006",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:82" align="right">comment:82</div>

No. I expect the SPQR tree to have 1 P block and 3 S blocks. We have more, meaning that the merging of cycles is not well done.



---

archive/issue_comments_327007.json:
```json
{
    "body": "<div id=\"comment:83\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2fea1c09977564aa90967e779eb87dc8dc7e4d9\"><code>f2fea1c</code></a></td><td><code>trac #22157: improvements in spqr_tree</code></td></tr></table>\n",
    "created_at": "2018-06-30T13:18:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327007",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:83"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2fea1c09977564aa90967e779eb87dc8dc7e4d9"><code>f2fea1c</code></a></td><td><code>trac #22157: improvements in spqr_tree</code></td></tr></table>




---

archive/issue_comments_327008.json:
```json
{
    "body": "Changed commit from **[`fdae153`](https://github.com/sagemath/sagetrac-mirror/commit/fdae15359d6813b2a1fa4e7f1947ce0fa99c80d7)** to **[`f2fea1c`](https://github.com/sagemath/sagetrac-mirror/commit/f2fea1c09977564aa90967e779eb87dc8dc7e4d9)**",
    "created_at": "2018-06-30T13:18:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327008",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fdae153`](https://github.com/sagemath/sagetrac-mirror/commit/fdae15359d6813b2a1fa4e7f1947ce0fa99c80d7)** to **[`f2fea1c`](https://github.com/sagemath/sagetrac-mirror/commit/f2fea1c09977564aa90967e779eb87dc8dc7e4d9)**



---

archive/issue_comments_327009.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nI did multiple changes in the code. Some parts were not clear to me. The main change is to separate the manipulation of the multiedges of the original graph from the cocycle edges. I have also changed some data structure to have easier stuff to manipulate. I think that the merging of cycles is now correct. Also, the construction of the graph is easier the way I did it (*).\n\nTODO:\n- check the code carefully. Some additional comments might be needed, and I may have missed some cases.\n- check that the number of edges in the P blocks is what we expect. \n- do many tests to check if it's working. We could add extra examples / tests. For instance, we could add a test with `G = graphs.Grid2dGraph(2, 5)`, or the graph of the wikipedia page, etc.\n\n(*) I raised an issue in the immutable graph backend. I don't know if we should open a ticket to change this behavior, possibly with a deprecation warning. We can't do it in this ticket.",
    "created_at": "2018-06-30T13:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327009",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:84" align="right">comment:84</div>

I did multiple changes in the code. Some parts were not clear to me. The main change is to separate the manipulation of the multiedges of the original graph from the cocycle edges. I have also changed some data structure to have easier stuff to manipulate. I think that the merging of cycles is now correct. Also, the construction of the graph is easier the way I did it (*).

TODO:
- check the code carefully. Some additional comments might be needed, and I may have missed some cases.
- check that the number of edges in the P blocks is what we expect. 
- do many tests to check if it's working. We could add extra examples / tests. For instance, we could add a test with `G = graphs.Grid2dGraph(2, 5)`, or the graph of the wikipedia page, etc.

(*) I raised an issue in the immutable graph backend. I don't know if we should open a ticket to change this behavior, possibly with a deprecation warning. We can't do it in this ticket.



---

archive/issue_comments_327010.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nReplying to [@dcoudert](#comment%3A84):\n> I did multiple changes in the code. Some parts were not clear to me. The main change is to separate the manipulation of the multiedges of the original graph from the cocycle edges. I have also changed some data structure to have easier stuff to manipulate. I think that the merging of cycles is now correct. Also, the construction of the graph is easier the way I did it (*).\n\nYes, the changes preform better. \\\\\nI was trying to get a verification way to cross-check the results but couldn't find a good way to reconstruct the graph from the `Tree` as we are adding few edges.\ncould you say is there a good way to reconstruct `G` from `Tree`?\\\\\nI am trying `OGDF` for `SPQR-Tree` but getting few issues.\\\\\n> \n> TODO:\n> - check the code carefully. Some additional comments might be needed, and I may have missed some cases.\n\nYes, I will try.\n> - check that the number of edges in the P blocks is what we expect. \n> - do many tests to check if it's working. We could add extra examples / tests. For instance, we could add a test with `G = graphs.Grid2dGraph(2, 5)`, or the graph of the wikipedia page, etc.\n> \n\nYes, I will test on some standard examples(in reference papers), update you on this.\n\n> (*) I raised an issue in the immutable graph backend. I don't know if we should open a ticket to change this behavior, possibly with a deprecation warning. We can't do it in this ticket.\n\nin my view, If it helps others by adding deprecation warning then we can open a ticket for it.",
    "created_at": "2018-07-01T22:22:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327010",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:85" align="right">comment:85</div>

Replying to [@dcoudert](#comment%3A84):
> I did multiple changes in the code. Some parts were not clear to me. The main change is to separate the manipulation of the multiedges of the original graph from the cocycle edges. I have also changed some data structure to have easier stuff to manipulate. I think that the merging of cycles is now correct. Also, the construction of the graph is easier the way I did it (*).

Yes, the changes preform better. \\
I was trying to get a verification way to cross-check the results but couldn't find a good way to reconstruct the graph from the `Tree` as we are adding few edges.
could you say is there a good way to reconstruct `G` from `Tree`?\\
I am trying `OGDF` for `SPQR-Tree` but getting few issues.\\
> 
> TODO:
> - check the code carefully. Some additional comments might be needed, and I may have missed some cases.

Yes, I will try.
> - check that the number of edges in the P blocks is what we expect. 
> - do many tests to check if it's working. We could add extra examples / tests. For instance, we could add a test with `G = graphs.Grid2dGraph(2, 5)`, or the graph of the wikipedia page, etc.
> 

Yes, I will test on some standard examples(in reference papers), update you on this.

> (*) I raised an issue in the immutable graph backend. I don't know if we should open a ticket to change this behavior, possibly with a deprecation warning. We can't do it in this ticket.

in my view, If it helps others by adding deprecation warning then we can open a ticket for it.



---

archive/issue_comments_327011.json:
```json
{
    "body": "<div id=\"comment:86\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0be5582235ecf6043b9bdcd2558233e2df2471d7\"><code>0be5582</code></a></td><td><code>trac #22157: Merged with 8.3.beta8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a299cc57330591466a535ab90bb2fca94bbc758e\"><code>a299cc5</code></a></td><td><code>trac #22157: add method spqr_tree_to_graph and multiple tests</code></td></tr></table>\n",
    "created_at": "2018-07-04T11:14:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327011",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:86"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0be5582235ecf6043b9bdcd2558233e2df2471d7"><code>0be5582</code></a></td><td><code>trac #22157: Merged with 8.3.beta8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a299cc57330591466a535ab90bb2fca94bbc758e"><code>a299cc5</code></a></td><td><code>trac #22157: add method spqr_tree_to_graph and multiple tests</code></td></tr></table>




---

archive/issue_comments_327012.json:
```json
{
    "body": "Changed commit from **[`f2fea1c`](https://github.com/sagemath/sagetrac-mirror/commit/f2fea1c09977564aa90967e779eb87dc8dc7e4d9)** to **[`a299cc5`](https://github.com/sagemath/sagetrac-mirror/commit/a299cc57330591466a535ab90bb2fca94bbc758e)**",
    "created_at": "2018-07-04T11:14:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327012",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f2fea1c`](https://github.com/sagemath/sagetrac-mirror/commit/f2fea1c09977564aa90967e779eb87dc8dc7e4d9)** to **[`a299cc5`](https://github.com/sagemath/sagetrac-mirror/commit/a299cc57330591466a535ab90bb2fca94bbc758e)**



---

archive/issue_comments_327013.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nI added method `spqr_tree_to_graph`. It is useful to check that the construction is correct.\nOn the way I solved an issue with the number of edges in the P blocks. It should now be OK.\n\n=> Please check again the code and test these methods with various examples. If you find errors / typos / etc. correct them.",
    "created_at": "2018-07-04T11:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327013",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:87" align="right">comment:87</div>

I added method `spqr_tree_to_graph`. It is useful to check that the construction is correct.
On the way I solved an issue with the number of edges in the P blocks. It should now be OK.

=> Please check again the code and test these methods with various examples. If you find errors / typos / etc. correct them.



---

archive/issue_events_307458.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2018-07-04T11:20:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307458"
}
```



---

archive/issue_comments_327014.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nReplying to [@dcoudert](#comment%3A87):\n> I added method `spqr_tree_to_graph`. It is useful to check that the construction is correct.\n> On the way I solved an issue with the number of edges in the P blocks. It should now be OK.\n\nYes, it's okay now, on the last version, I found only two counter case, in which the number of `S` and `P` block is (4, 2) which is expected to be (9, 8), verified by OGDF code. this occurred on the example graph provided by Hopcroft paper, that 4 S components are found by breaking 2 squares into 4 triangles by using 2 cut edges. But the current version is giving the correct answer now. \\\\\nThe second example was on a graph which is formed by combining 4 cycles of length 4, in which the previous version was giving 0 `S components` and the current version is giving the correct answer.\n\n> \n> => Please check again the code and test these methods with various examples. If you find errors / typos / etc. correct them.\n\nAdded the reference paper example to `spqr_tree_to_graph` function, it's the same graph on which the last version failed. \\\\\nAnd a very minor change in `spqr_tree` examples.\n\nFor the below graph there is a miss match in OGDF output and current version.\nfor Graph,\n\n```\nsage: G = graphs.CycleGraph(4)\nsage: G.allow_multiple_edges(True)\nsage: G.add_edges([(0, 2), (0, 2)])\nsage: T = spqr_tree(G)\nsage: T.vertices()\n[('R', Cycle graph: Multi-graph on 4 vertices)]\n```\nOGDF says it should have 2 `S components` and 2 `P components`. but both seems to be correct. \nExcept for this example, I feel everything is fine.",
    "created_at": "2018-07-04T20:59:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327014",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:88" align="right">comment:88</div>

Replying to [@dcoudert](#comment%3A87):
> I added method `spqr_tree_to_graph`. It is useful to check that the construction is correct.
> On the way I solved an issue with the number of edges in the P blocks. It should now be OK.

Yes, it's okay now, on the last version, I found only two counter case, in which the number of `S` and `P` block is (4, 2) which is expected to be (9, 8), verified by OGDF code. this occurred on the example graph provided by Hopcroft paper, that 4 S components are found by breaking 2 squares into 4 triangles by using 2 cut edges. But the current version is giving the correct answer now. \\
The second example was on a graph which is formed by combining 4 cycles of length 4, in which the previous version was giving 0 `S components` and the current version is giving the correct answer.

> 
> => Please check again the code and test these methods with various examples. If you find errors / typos / etc. correct them.

Added the reference paper example to `spqr_tree_to_graph` function, it's the same graph on which the last version failed. \\
And a very minor change in `spqr_tree` examples.

For the below graph there is a miss match in OGDF output and current version.
for Graph,

```
sage: G = graphs.CycleGraph(4)
sage: G.allow_multiple_edges(True)
sage: G.add_edges([(0, 2), (0, 2)])
sage: T = spqr_tree(G)
sage: T.vertices()
[('R', Cycle graph: Multi-graph on 4 vertices)]
```
OGDF says it should have 2 `S components` and 2 `P components`. but both seems to be correct. 
Except for this example, I feel everything is fine.



---

archive/issue_comments_327015.json:
```json
{
    "body": "<div id=\"comment:89\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8c85932150d889bc2da82edb736cb55e344ee99\"><code>b8c8593</code></a></td><td><code>Some minor changes in examples</code></td></tr></table>\n",
    "created_at": "2018-07-04T21:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327015",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:89"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8c85932150d889bc2da82edb736cb55e344ee99"><code>b8c8593</code></a></td><td><code>Some minor changes in examples</code></td></tr></table>




---

archive/issue_comments_327016.json:
```json
{
    "body": "Changed commit from **[`a299cc5`](https://github.com/sagemath/sagetrac-mirror/commit/a299cc57330591466a535ab90bb2fca94bbc758e)** to **[`b8c8593`](https://github.com/sagemath/sagetrac-mirror/commit/b8c85932150d889bc2da82edb736cb55e344ee99)**",
    "created_at": "2018-07-04T21:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327016",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a299cc5`](https://github.com/sagemath/sagetrac-mirror/commit/a299cc57330591466a535ab90bb2fca94bbc758e)** to **[`b8c8593`](https://github.com/sagemath/sagetrac-mirror/commit/b8c85932150d889bc2da82edb736cb55e344ee99)**



---

archive/issue_comments_327017.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\n> Added the reference paper example to `spqr_tree_to_graph` function, it's the same graph on which the last version failed. \\\\\n\nYou should add the link using <code>:wikipedia:\\`SPQR_tree\\`</code>\n\n> And a very minor change in `spqr_tree` examples.\n\nWhy did you change this way ?\n\n```\n-        sage: all(u[1].is_isomorphic(K4) for u in Tree.vertices() if u[0] == 'R')\n+        sage: all(u[1].is_isomorphic(K4) for u in Tree.vertices() if u[0] == 'S')\n```\n a K4 is 3 connected, so it is a 'R' block, not a 'S' block.\n\n \n> For the below graph there is a miss match in OGDF output and current version.\n> for Graph,\n> \n> ```\n> sage: G = graphs.CycleGraph(4)\n> sage: G.allow_multiple_edges(True)\n> sage: G.add_edges([(0, 2), (0, 2)])\n> sage: T = spqr_tree(G)\n> sage: T.vertices()\n> [('R', Cycle graph: Multi-graph on 4 vertices)]\n> ```\n> OGDF says it should have 2 `S components` and 2 `P components`. but both seems to be correct. \n> Except for this example, I feel everything is fine.\n\nIt's due to `is_clique`, as reported in #25696. The graph has 4 vertices and 6 edges...\n\nYou can rebase this ticket on top of #25696 and add the dependency. Then the example should work properly.\n\nOne case has not been treated yet: `Q` blocks when `G` is a single edge.",
    "created_at": "2018-07-04T21:45:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327017",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:90" align="right">comment:90</div>

> Added the reference paper example to `spqr_tree_to_graph` function, it's the same graph on which the last version failed. \\

You should add the link using <code>:wikipedia:\`SPQR_tree\`</code>

> And a very minor change in `spqr_tree` examples.

Why did you change this way ?

```
-        sage: all(u[1].is_isomorphic(K4) for u in Tree.vertices() if u[0] == 'R')
+        sage: all(u[1].is_isomorphic(K4) for u in Tree.vertices() if u[0] == 'S')
```
 a K4 is 3 connected, so it is a 'R' block, not a 'S' block.

 
> For the below graph there is a miss match in OGDF output and current version.
> for Graph,
> 
> ```
> sage: G = graphs.CycleGraph(4)
> sage: G.allow_multiple_edges(True)
> sage: G.add_edges([(0, 2), (0, 2)])
> sage: T = spqr_tree(G)
> sage: T.vertices()
> [('R', Cycle graph: Multi-graph on 4 vertices)]
> ```
> OGDF says it should have 2 `S components` and 2 `P components`. but both seems to be correct. 
> Except for this example, I feel everything is fine.

It's due to `is_clique`, as reported in #25696. The graph has 4 vertices and 6 edges...

You can rebase this ticket on top of #25696 and add the dependency. Then the example should work properly.

One case has not been treated yet: `Q` blocks when `G` is a single edge.



---

archive/issue_comments_327018.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nReplying to [@dcoudert](#comment%3A90):\n> > Added the reference paper example to `spqr_tree_to_graph` function, it's the same graph on which the last version failed. \\\\\n\n> \n> You should add the link using <code>:wikipedia:\\`SPQR_tree\\`</code>\n\nYes added.\n\n> > And a very minor change in `spqr_tree` examples.\n\n> \n> Why did you change this way ?\n> \n> ```\n> -        sage: all(u[1].is_isomorphic(K4) for u in Tree.vertices() if u[0] == 'R')\n> +        sage: all(u[1].is_isomorphic(K4) for u in Tree.vertices() if u[0] == 'S')\n> ```\n>  a K4 is 3 connected, so it is a 'R' block, not a 'S' block.\n\nYes, it should be `R` not `S`, as S contains cycles. my mistake.\n>  \n\n> \n> It's due to `is_clique`, as reported in #25696. The graph has 4 vertices and 6 edges...\n> \n> You can rebase this ticket on top of #25696 and add the dependency. Then the example should work properly.\n> \n\nI will rebase and try it.\n> One case has not been treated yet: `Q` blocks when `G` is a single edge.\n\nYes, all the examples are taken such that no `Q` block exists.",
    "created_at": "2018-07-04T22:09:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327018",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:91" align="right">comment:91</div>

Replying to [@dcoudert](#comment%3A90):
> > Added the reference paper example to `spqr_tree_to_graph` function, it's the same graph on which the last version failed. \\

> 
> You should add the link using <code>:wikipedia:\`SPQR_tree\`</code>

Yes added.

> > And a very minor change in `spqr_tree` examples.

> 
> Why did you change this way ?
> 
> ```
> -        sage: all(u[1].is_isomorphic(K4) for u in Tree.vertices() if u[0] == 'R')
> +        sage: all(u[1].is_isomorphic(K4) for u in Tree.vertices() if u[0] == 'S')
> ```
>  a K4 is 3 connected, so it is a 'R' block, not a 'S' block.

Yes, it should be `R` not `S`, as S contains cycles. my mistake.
>  

> 
> It's due to `is_clique`, as reported in #25696. The graph has 4 vertices and 6 edges...
> 
> You can rebase this ticket on top of #25696 and add the dependency. Then the example should work properly.
> 

I will rebase and try it.
> One case has not been treated yet: `Q` blocks when `G` is a single edge.

Yes, all the examples are taken such that no `Q` block exists.



---

archive/issue_comments_327019.json:
```json
{
    "body": "Changed commit from **[`b8c8593`](https://github.com/sagemath/sagetrac-mirror/commit/b8c85932150d889bc2da82edb736cb55e344ee99)** to **[`71be100`](https://github.com/sagemath/sagetrac-mirror/commit/71be1006bac1068d823d2a1a03b4c6bc904cbbb5)**",
    "created_at": "2018-07-04T22:09:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327019",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b8c8593`](https://github.com/sagemath/sagetrac-mirror/commit/b8c85932150d889bc2da82edb736cb55e344ee99)** to **[`71be100`](https://github.com/sagemath/sagetrac-mirror/commit/71be1006bac1068d823d2a1a03b4c6bc904cbbb5)**



---

archive/issue_comments_327020.json:
```json
{
    "body": "<div id=\"comment:92\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71be1006bac1068d823d2a1a03b4c6bc904cbbb5\"><code>71be100</code></a></td><td><code>updated</code></td></tr></table>\n",
    "created_at": "2018-07-04T22:09:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327020",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:92"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71be1006bac1068d823d2a1a03b4c6bc904cbbb5"><code>71be100</code></a></td><td><code>updated</code></td></tr></table>




---

archive/issue_comments_327021.json:
```json
{
    "body": "<div id=\"comment:93\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a962830f79b7844b2214c85f5b5fcbe7bac4dc3\"><code>8a96283</code></a></td><td><code>trac #22157: typos</code></td></tr></table>\n",
    "created_at": "2018-07-07T15:20:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327021",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:93"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a962830f79b7844b2214c85f5b5fcbe7bac4dc3"><code>8a96283</code></a></td><td><code>trac #22157: typos</code></td></tr></table>




---

archive/issue_comments_327022.json:
```json
{
    "body": "Changed commit from **[`71be100`](https://github.com/sagemath/sagetrac-mirror/commit/71be1006bac1068d823d2a1a03b4c6bc904cbbb5)** to **[`8a96283`](https://github.com/sagemath/sagetrac-mirror/commit/8a962830f79b7844b2214c85f5b5fcbe7bac4dc3)**",
    "created_at": "2018-07-07T15:20:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327022",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`71be100`](https://github.com/sagemath/sagetrac-mirror/commit/71be1006bac1068d823d2a1a03b4c6bc904cbbb5)** to **[`8a96283`](https://github.com/sagemath/sagetrac-mirror/commit/8a962830f79b7844b2214c85f5b5fcbe7bac4dc3)**



---

archive/issue_comments_327023.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\n`@`Meghana: can you do some tests ? This patch is almost ready, but we may have missed some cases.",
    "created_at": "2018-07-07T15:23:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327023",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:94" align="right">comment:94</div>

`@`Meghana: can you do some tests ? This patch is almost ready, but we may have missed some cases.



---

archive/issue_comments_327024.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nReplying to [@dcoudert](#comment%3A94):\n> `@`Meghana: can you do some tests ? This patch is almost ready, but we may have missed some cases.\n\nYes, I have been doing some tests. It seems correct with all the various test cases I checked till now. I am going through the code now. I will update if I find any errors.",
    "created_at": "2018-07-11T10:23:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327024",
    "user": "https://github.com/meghanamreddy"
}
```

<div id="comment:95" align="right">comment:95</div>

Replying to [@dcoudert](#comment%3A94):
> `@`Meghana: can you do some tests ? This patch is almost ready, but we may have missed some cases.

Yes, I have been doing some tests. It seems correct with all the various test cases I checked till now. I am going through the code now. I will update if I find any errors.



---

archive/issue_comments_327025.json:
```json
{
    "body": "<div id=\"comment:96\" align=\"right\">comment:96</div>\n\nCan we add an example in the `cleave` function to show the usage of the parameter `virtual_edges`? Also, in which use case would we set the parameter to False? I was not sure about the use case since the definition of `virtual_edges` used in the `cleave` function is different from what we use in the linear time algorithm.",
    "created_at": "2018-07-11T12:45:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327025",
    "user": "https://github.com/meghanamreddy"
}
```

<div id="comment:96" align="right">comment:96</div>

Can we add an example in the `cleave` function to show the usage of the parameter `virtual_edges`? Also, in which use case would we set the parameter to False? I was not sure about the use case since the definition of `virtual_edges` used in the `cleave` function is different from what we use in the linear time algorithm.



---

archive/issue_comments_327026.json:
```json
{
    "body": "<div id=\"comment:97\" align=\"right\">comment:97</div>\n\nReplying to [@meghanamreddy](#comment%3A96):\n> Can we add an example in the `cleave` function to show the usage of the parameter `virtual_edges`? \n\nSure. \n\n`@`Say Harsh: can you do that ?\n\n> Also, in which use case would we set the parameter to False? I was not sure about the use case since the definition of `virtual_edges` used in the `cleave` function is different from what we use in the linear time algorithm.\n\nThe way we implemented the `cleave` method is more general than for our needs only. It can be useful to set `virtual_edges=False` when you want the subgraphs induced by the cut. If `S` is the set of vertices of the cut, and `A` and `B` are the sets of vertices of connected components in `G-S`, then we get `G[A+S]` and `G[B+S]` with only edges from `G`.",
    "created_at": "2018-07-11T12:58:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327026",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:97" align="right">comment:97</div>

Replying to [@meghanamreddy](#comment%3A96):
> Can we add an example in the `cleave` function to show the usage of the parameter `virtual_edges`? 

Sure. 

`@`Say Harsh: can you do that ?

> Also, in which use case would we set the parameter to False? I was not sure about the use case since the definition of `virtual_edges` used in the `cleave` function is different from what we use in the linear time algorithm.

The way we implemented the `cleave` method is more general than for our needs only. It can be useful to set `virtual_edges=False` when you want the subgraphs induced by the cut. If `S` is the set of vertices of the cut, and `A` and `B` are the sets of vertices of connected components in `G-S`, then we get `G[A+S]` and `G[B+S]` with only edges from `G`.



---

archive/issue_comments_327027.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nReplying to [@dcoudert](#comment%3A97):\n\n> `@`Say Harsh: can you do that ?\n\nYes, I will do that.",
    "created_at": "2018-07-11T13:12:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327027",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:98" align="right">comment:98</div>

Replying to [@dcoudert](#comment%3A97):

> `@`Say Harsh: can you do that ?

Yes, I will do that.



---

archive/issue_comments_327028.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\n> The way we implemented the `cleave` method is more general than for our needs only. It can be useful to set `virtual_edges=False` when you want the subgraphs induced by the cut. If `S` is the set of vertices of the cut, and `A` and `B` are the sets of vertices of connected components in `G-S`, then we get `G[A+S]` and `G[B+S]` with only edges from `G`.\n\nOk, I understood now.\n\nI was using the following example of a cycle on `5` vertices to test the parameter `virtual_edges`:\n\n```\nG = Graph()\nG.add_edges([(1,2),(1,5),(2,4),(3,4),(3,5)])\nS,C,f = cleave(G, cut_vertices=[1,2,3], virtual_edges=True)\n```\nIn the case where `virtual_edges` is set to True, `f` is a path graph on `3` vertices. In the case where it is set to False, it is a graph with `3` isolated vertices. However, according to the definition of `f`, \n    `f` is the complement of the subgraph of `G` induced by the vertex cut. Hence, its vertex set is the vertex cut, and its edge set is the set of virtual edges.\n\nHence, when `virtual_edges` is set to False, `f` in the above example should be a graph on vertices `1,2 and 3` with one edge between `2` and `3` (which is the complement of the subgraph). I am not sure what the output should be when `virtual_edges` is set to true.",
    "created_at": "2018-07-11T14:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327028",
    "user": "https://github.com/meghanamreddy"
}
```

<div id="comment:99" align="right">comment:99</div>

> The way we implemented the `cleave` method is more general than for our needs only. It can be useful to set `virtual_edges=False` when you want the subgraphs induced by the cut. If `S` is the set of vertices of the cut, and `A` and `B` are the sets of vertices of connected components in `G-S`, then we get `G[A+S]` and `G[B+S]` with only edges from `G`.

Ok, I understood now.

I was using the following example of a cycle on `5` vertices to test the parameter `virtual_edges`:

```
G = Graph()
G.add_edges([(1,2),(1,5),(2,4),(3,4),(3,5)])
S,C,f = cleave(G, cut_vertices=[1,2,3], virtual_edges=True)
```
In the case where `virtual_edges` is set to True, `f` is a path graph on `3` vertices. In the case where it is set to False, it is a graph with `3` isolated vertices. However, according to the definition of `f`, 
    `f` is the complement of the subgraph of `G` induced by the vertex cut. Hence, its vertex set is the vertex cut, and its edge set is the set of virtual edges.

Hence, when `virtual_edges` is set to False, `f` in the above example should be a graph on vertices `1,2 and 3` with one edge between `2` and `3` (which is the complement of the subgraph). I am not sure what the output should be when `virtual_edges` is set to true.



---

archive/issue_comments_327029.json:
```json
{
    "body": "Changed commit from **[`8a96283`](https://github.com/sagemath/sagetrac-mirror/commit/8a962830f79b7844b2214c85f5b5fcbe7bac4dc3)** to **[`2aace07`](https://github.com/sagemath/sagetrac-mirror/commit/2aace0794889951e566b0dc34d88208f3a8c5f91)**",
    "created_at": "2018-07-11T15:33:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327029",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8a96283`](https://github.com/sagemath/sagetrac-mirror/commit/8a962830f79b7844b2214c85f5b5fcbe7bac4dc3)** to **[`2aace07`](https://github.com/sagemath/sagetrac-mirror/commit/2aace0794889951e566b0dc34d88208f3a8c5f91)**



---

archive/issue_comments_327030.json:
```json
{
    "body": "<div id=\"comment:100\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2aace0794889951e566b0dc34d88208f3a8c5f91\"><code>2aace07</code></a></td><td><code>Fixed some typos</code></td></tr></table>\n",
    "created_at": "2018-07-11T15:33:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327030",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:100"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2aace0794889951e566b0dc34d88208f3a8c5f91"><code>2aace07</code></a></td><td><code>Fixed some typos</code></td></tr></table>




---

archive/issue_comments_327031.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\n> I was using the following example of a cycle on `5` vertices to test the parameter `virtual_edges`:\n\n...\n> Hence, when `virtual_edges` is set to False, `f` in the above example should be a graph on vertices `1,2 and 3` with one edge between `2` and `3` (which is the complement of the subgraph). I am not sure what the output should be when `virtual_edges` is set to true.\n\nWhen `virtual_edges==False`, we don't add virtual edges to the sides of the cut. `f` is the graph containing only the virtual edges, so when we don't add virtual edges, `f` has no edges. When `virtual_edges==True`, then `f` is the complement of the subgraph induced by the cut. We should update the documentation accordingly.\n\nConcerning last commit: \nThe convention in Sagemath is to write `Return the connected components...` and not `Returns the connected components...`.\nIt has not yet been unified. We change it step by step.",
    "created_at": "2018-07-11T15:56:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327031",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:101" align="right">comment:101</div>

> I was using the following example of a cycle on `5` vertices to test the parameter `virtual_edges`:

...
> Hence, when `virtual_edges` is set to False, `f` in the above example should be a graph on vertices `1,2 and 3` with one edge between `2` and `3` (which is the complement of the subgraph). I am not sure what the output should be when `virtual_edges` is set to true.

When `virtual_edges==False`, we don't add virtual edges to the sides of the cut. `f` is the graph containing only the virtual edges, so when we don't add virtual edges, `f` has no edges. When `virtual_edges==True`, then `f` is the complement of the subgraph induced by the cut. We should update the documentation accordingly.

Concerning last commit: 
The convention in Sagemath is to write `Return the connected components...` and not `Returns the connected components...`.
It has not yet been unified. We change it step by step.



---

archive/issue_comments_327032.json:
```json
{
    "body": "Changed commit from **[`2aace07`](https://github.com/sagemath/sagetrac-mirror/commit/2aace0794889951e566b0dc34d88208f3a8c5f91)** to **[`a6f2a5a`](https://github.com/sagemath/sagetrac-mirror/commit/a6f2a5ab5fe881193b4f081f9b0abf599ff872a9)**",
    "created_at": "2018-07-11T17:16:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327032",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2aace07`](https://github.com/sagemath/sagetrac-mirror/commit/2aace0794889951e566b0dc34d88208f3a8c5f91)** to **[`a6f2a5a`](https://github.com/sagemath/sagetrac-mirror/commit/a6f2a5ab5fe881193b4f081f9b0abf599ff872a9)**



---

archive/issue_comments_327033.json:
```json
{
    "body": "<div id=\"comment:102\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a6f2a5ab5fe881193b4f081f9b0abf599ff872a9\"><code>a6f2a5a</code></a></td><td><code>Virtual edge case added</code></td></tr></table>\n",
    "created_at": "2018-07-11T17:16:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327033",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:102"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a6f2a5ab5fe881193b4f081f9b0abf599ff872a9"><code>a6f2a5a</code></a></td><td><code>Virtual edge case added</code></td></tr></table>




---

archive/issue_comments_327034.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nReplying to [@sagetrac-git](#comment%3A102):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n\n|                                                                                                                                                 |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[a6f2a5a](https://github.com/sagemath/sagetrac-mirror/commit/a6f2a5ab5fe881193b4f081f9b0abf599ff872a9)|`Virtual edge case added`|\nWe will have the same output for virtual_edge == True and False if the complement subgraph of cut vertices has no edges, which means subgraph of cut vertices is a complete graph. \\\\\n\nAnd yes, `f` has no virtual edge when `virtual_edge == False` we can see it at virtual edges set to the false case in example.",
    "created_at": "2018-07-11T17:22:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327034",
    "user": "https://github.com/sagetrac-saiharsh"
}
```

<div id="comment:103" align="right">comment:103</div>

Replying to [@sagetrac-git](#comment%3A102):
> Branch pushed to git repo; I updated commit sha1. New commits:

|                                                                                                                                                 |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[a6f2a5a](https://github.com/sagemath/sagetrac-mirror/commit/a6f2a5ab5fe881193b4f081f9b0abf599ff872a9)|`Virtual edge case added`|
We will have the same output for virtual_edge == True and False if the complement subgraph of cut vertices has no edges, which means subgraph of cut vertices is a complete graph. \\

And yes, `f` has no virtual edge when `virtual_edge == False` we can see it at virtual edges set to the false case in example.



---

archive/issue_comments_327035.json:
```json
{
    "body": "<div id=\"comment:104\" align=\"right\">comment:104</div>\n\n> When `virtual_edges==False`, we don't add virtual edges to the sides of the cut. `f` is the graph containing only the virtual edges, so when we don't add virtual edges, `f` has no edges. When `virtual_edges==True`, then `f` is the complement of the subgraph induced by the cut. We should update the documentation accordingly.\n\nIn the example I considered, when `virtual_edges==True`, the virtual edges that are added are `(1,3)` and `(2,3)`. So when `virtual_edges==True`, `f` is the complement of the subgraph induced by the cut? Or `f` is the graph containing only the virtual edges? If it is the former, `f` would be a graph on `3` vertices with one edge between `(2,3)`. If it is the latter, `f` would be a path graph on three vertices. Currently, the output `f` is a path graph on `3` vertices. \n\nI know I am asking too many times, but I would like to update the documentation to make it more clear.\n\n> \n> Concerning last commit: \n> The convention in Sagemath is to write `Return the connected components...` and not `Returns the connected components...`.\n> It has not yet been unified. We change it step by step.\n\nMy mistake, I saw in `generic_graph.py` and followed the same. I will change it.",
    "created_at": "2018-07-11T19:01:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327035",
    "user": "https://github.com/meghanamreddy"
}
```

<div id="comment:104" align="right">comment:104</div>

> When `virtual_edges==False`, we don't add virtual edges to the sides of the cut. `f` is the graph containing only the virtual edges, so when we don't add virtual edges, `f` has no edges. When `virtual_edges==True`, then `f` is the complement of the subgraph induced by the cut. We should update the documentation accordingly.

In the example I considered, when `virtual_edges==True`, the virtual edges that are added are `(1,3)` and `(2,3)`. So when `virtual_edges==True`, `f` is the complement of the subgraph induced by the cut? Or `f` is the graph containing only the virtual edges? If it is the former, `f` would be a graph on `3` vertices with one edge between `(2,3)`. If it is the latter, `f` would be a path graph on three vertices. Currently, the output `f` is a path graph on `3` vertices. 

I know I am asking too many times, but I would like to update the documentation to make it more clear.

> 
> Concerning last commit: 
> The convention in Sagemath is to write `Return the connected components...` and not `Returns the connected components...`.
> It has not yet been unified. We change it step by step.

My mistake, I saw in `generic_graph.py` and followed the same. I will change it.



---

archive/issue_comments_327036.json:
```json
{
    "body": "<div id=\"comment:105\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52e4c9c1ef51aaca6e321902365e4ce393f46f0c\"><code>52e4c9c</code></a></td><td><code>Reverted the changes - Returns to Return.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7da741a330f4686593541c93a7348a7784d49e1\"><code>c7da741</code></a></td><td><code>Merge branch 'develop' into t/22157/public/22157_spqrtree_beta6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1cae543be894a36592898af2722d11b3573e0fac\"><code>1cae543</code></a></td><td><code>Updated to 8.3.rc0</code></td></tr></table>\n",
    "created_at": "2018-07-12T05:32:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327036",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:105"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52e4c9c1ef51aaca6e321902365e4ce393f46f0c"><code>52e4c9c</code></a></td><td><code>Reverted the changes - Returns to Return.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7da741a330f4686593541c93a7348a7784d49e1"><code>c7da741</code></a></td><td><code>Merge branch 'develop' into t/22157/public/22157_spqrtree_beta6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1cae543be894a36592898af2722d11b3573e0fac"><code>1cae543</code></a></td><td><code>Updated to 8.3.rc0</code></td></tr></table>




---

archive/issue_comments_327037.json:
```json
{
    "body": "Changed commit from **[`a6f2a5a`](https://github.com/sagemath/sagetrac-mirror/commit/a6f2a5ab5fe881193b4f081f9b0abf599ff872a9)** to **[`1cae543`](https://github.com/sagemath/sagetrac-mirror/commit/1cae543be894a36592898af2722d11b3573e0fac)**",
    "created_at": "2018-07-12T05:32:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327037",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a6f2a5a`](https://github.com/sagemath/sagetrac-mirror/commit/a6f2a5ab5fe881193b4f081f9b0abf599ff872a9)** to **[`1cae543`](https://github.com/sagemath/sagetrac-mirror/commit/1cae543be894a36592898af2722d11b3573e0fac)**



---

archive/issue_comments_327038.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nAs said Sai Harsh, when \n* `virtual_edges == True`, `f` contains all the virtual edges which are the edges of the complement of the subgraph of `G` induced by the cut. In your example, it is a path graph with edges `(1,3)` and `(2, 3)`.\n* `virtual_edges == False`, `f` is an independent set, so a graph containing only the vertices of the cut and no edge.",
    "created_at": "2018-07-12T07:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327038",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:106" align="right">comment:106</div>

As said Sai Harsh, when 
* `virtual_edges == True`, `f` contains all the virtual edges which are the edges of the complement of the subgraph of `G` induced by the cut. In your example, it is a path graph with edges `(1,3)` and `(2, 3)`.
* `virtual_edges == False`, `f` is an independent set, so a graph containing only the vertices of the cut and no edge.



---

archive/issue_comments_327039.json:
```json
{
    "body": "<div id=\"comment:107\" align=\"right\">comment:107</div>\n\nOkay, I understood now. I had done a silly mistake in my previous question, my bad, sorry for the repeated questions.\n\nI ran many test cases on the `sqpr_tree` and `spqr_tree_to_graph` functions, and there seemed to be no errors.",
    "created_at": "2018-07-12T07:42:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327039",
    "user": "https://github.com/meghanamreddy"
}
```

<div id="comment:107" align="right">comment:107</div>

Okay, I understood now. I had done a silly mistake in my previous question, my bad, sorry for the repeated questions.

I ran many test cases on the `sqpr_tree` and `spqr_tree_to_graph` functions, and there seemed to be no errors.



---

archive/issue_comments_327040.json:
```json
{
    "body": "Changed commit from **[`1cae543`](https://github.com/sagemath/sagetrac-mirror/commit/1cae543be894a36592898af2722d11b3573e0fac)** to **[`c7ab364`](https://github.com/sagemath/sagetrac-mirror/commit/c7ab3646d1623334a567c475489503f3968ede64)**",
    "created_at": "2018-07-13T11:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327040",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1cae543`](https://github.com/sagemath/sagetrac-mirror/commit/1cae543be894a36592898af2722d11b3573e0fac)** to **[`c7ab364`](https://github.com/sagemath/sagetrac-mirror/commit/c7ab3646d1623334a567c475489503f3968ede64)**



---

archive/issue_comments_327041.json:
```json
{
    "body": "<div id=\"comment:108\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7ab3646d1623334a567c475489503f3968ede64\"><code>c7ab364</code></a></td><td><code>trac #22157: review commit</code></td></tr></table>\n",
    "created_at": "2018-07-13T11:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327041",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:108"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7ab3646d1623334a567c475489503f3968ede64"><code>c7ab364</code></a></td><td><code>trac #22157: review commit</code></td></tr></table>




---

archive/issue_comments_327042.json:
```json
{
    "body": "Changed reviewer from **dcoudert** to **David Coudert, Meghana M Reddy**",
    "created_at": "2018-07-13T11:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327042",
    "user": "https://github.com/dcoudert"
}
```

Changed reviewer from **dcoudert** to **David Coudert, Meghana M Reddy**



---

archive/issue_comments_327043.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nMinor edits so that the doc build properly.",
    "created_at": "2018-07-13T11:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327043",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:109" align="right">comment:109</div>

Minor edits so that the doc build properly.



---

archive/issue_events_307459.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2018-07-13T11:26:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307459"
}
```



---

archive/issue_events_307460.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2018-07-13T11:26:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307460"
}
```



---

archive/issue_comments_327044.json:
```json
{
    "body": "Author: **Tondomker Sai Harsh**",
    "created_at": "2018-07-13T11:26:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327044",
    "user": "https://github.com/dcoudert"
}
```

Author: **Tondomker Sai Harsh**



---

archive/issue_events_307461.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2018-07-13T17:36:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307461"
}
```



---

archive/issue_events_307462.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2018-07-13T17:36:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307462"
}
```



---

archive/issue_comments_327045.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nFor me this patch is now good to go !",
    "created_at": "2018-07-13T17:36:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327045",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:110" align="right">comment:110</div>

For me this patch is now good to go !



---

archive/issue_events_307463.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-08-11T16:55:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307463"
}
```



---

archive/issue_events_307464.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "912e88cfbecbb0234c01e4a341f33a2198bbbf87",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-08-11T16:55:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22157#event-307464"
}
```



---

archive/issue_comments_327046.json:
```json
{
    "body": "Changed branch from **[public/22157_spqrtree_beta6](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_beta6)** to **[`c7ab364`](https://github.com/sagemath/sagetrac-mirror/commit/c7ab3646d1623334a567c475489503f3968ede64)**",
    "created_at": "2018-08-11T16:55:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22157",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22157#issuecomment-327046",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/22157_spqrtree_beta6](https://github.com/sagemath/sagetrac-mirror/tree/public/22157_spqrtree_beta6)** to **[`c7ab364`](https://github.com/sagemath/sagetrac-mirror/commit/c7ab3646d1623334a567c475489503f3968ede64)**
