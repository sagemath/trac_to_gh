# Issue 22258: py3 do not call cmp() in code of real_mpfi

archive/issues_022021.json:
```json
{
    "body": "as a step to python3\n\nBEWARE: this file will need later a much deeper treatment, because the current behaviour is not possible in python3 (cmp is not the same order as rich comparison)\n\nthe current ticket only aims at removing calls to cmp in the code, so that it compiles with cython/python3\n\nCC:  @tscrim @jdemeyer @a-andre\n\nBranch/Commit: 759ae169e76ed464eec9c0f42ca5cd06521ca083\n\nReviewer: Travis Scrimshaw\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22258\n\n",
    "closed_at": "2017-02-02T22:09:15Z",
    "created_at": "2017-01-25T16:20:02Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "py3 do not call cmp() in code of real_mpfi",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22258",
    "user": "https://github.com/fchapoton"
}
```
as a step to python3

BEWARE: this file will need later a much deeper treatment, because the current behaviour is not possible in python3 (cmp is not the same order as rich comparison)

the current ticket only aims at removing calls to cmp in the code, so that it compiles with cython/python3

CC:  @tscrim @jdemeyer @a-andre

Branch/Commit: 759ae169e76ed464eec9c0f42ca5cd06521ca083

Reviewer: Travis Scrimshaw

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22258





---

archive/issue_comments_412685.json:
```json
{
    "body": "Changing commit from \"\" to \"759ae169e76ed464eec9c0f42ca5cd06521ca083\"",
    "created_at": "2017-01-25T16:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412685",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "759ae169e76ed464eec9c0f42ca5cd06521ca083"



---

archive/issue_comments_412686.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n as a step to python3\n \n BEWARE: this file will need later a much deeper treatment later, because the current behaviour is not possible in python3 (cmp is not the same order as rich comparison)\n+\n+the current ticket only aims at removing calls to cmp in the code, so that it compiles with cython/python3\n``````\n",
    "created_at": "2017-01-25T16:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412686",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 as a step to python3
 
 BEWARE: this file will need later a much deeper treatment later, because the current behaviour is not possible in python3 (cmp is not the same order as rich comparison)
+
+the current ticket only aims at removing calls to cmp in the code, so that it compiles with cython/python3
``````




---

archive/issue_comments_412687.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/22258\"",
    "created_at": "2017-01-25T16:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412687",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/22258"



---

archive/issue_comments_412688.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[759ae16](https://git.sagemath.org/sage.git/commit?id=759ae169e76ed464eec9c0f42ca5cd06521ca083)|`first try of cmp removal in mpfi`|",
    "created_at": "2017-01-25T16:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412688",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[759ae16](https://git.sagemath.org/sage.git/commit?id=759ae169e76ed464eec9c0f42ca5cd06521ca083)|`first try of cmp removal in mpfi`|



---

archive/issue_comments_412689.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n as a step to python3\n \n-BEWARE: this file will need later a much deeper treatment later, because the current behaviour is not possible in python3 (cmp is not the same order as rich comparison)\n+BEWARE: this file will need later a much deeper treatment, because the current behaviour is not possible in python3 (cmp is not the same order as rich comparison)\n \n the current ticket only aims at removing calls to cmp in the code, so that it compiles with cython/python3\n``````\n",
    "created_at": "2017-01-25T16:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412689",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 as a step to python3
 
-BEWARE: this file will need later a much deeper treatment later, because the current behaviour is not possible in python3 (cmp is not the same order as rich comparison)
+BEWARE: this file will need later a much deeper treatment, because the current behaviour is not possible in python3 (cmp is not the same order as rich comparison)
 
 the current ticket only aims at removing calls to cmp in the code, so that it compiles with cython/python3
``````




---

archive/issue_comments_412690.json:
```json
{
    "body": "<a id='comment:3'></a>\nwaiting for the bots",
    "created_at": "2017-01-25T20:19:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412690",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
waiting for the bots



---

archive/issue_comments_412691.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-01-25T20:19:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412691",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_412692.json:
```json
{
    "body": "<a id='comment:4'></a>\ngreen bot, please review",
    "created_at": "2017-01-27T08:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412692",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>
green bot, please review



---

archive/issue_comments_412693.json:
```json
{
    "body": "<a id='comment:5'></a>\nI'm slightly worried about the `richcmp(left.__prec, right.__prec, op)` doing more precise comparisons than before and would cause a subtle behavior change. Nor am I not completely convinced the doctests cover all the behavior. I won't have time today to add such tests and verify, but I will try to get to this tomorrow (unless someone who is more familiar with interval comparisons verifies this is okay).",
    "created_at": "2017-01-27T14:47:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412693",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
I'm slightly worried about the `richcmp(left.__prec, right.__prec, op)` doing more precise comparisons than before and would cause a subtle behavior change. Nor am I not completely convinced the doctests cover all the behavior. I won't have time today to add such tests and verify, but I will try to get to this tomorrow (unless someone who is more familiar with interval comparisons verifies this is okay).



---

archive/issue_comments_412694.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [tscrim](#comment%3A5):\n> I'm slightly worried about the `richcmp(left.__prec, right.__prec, op)` doing more precise comparisons than before and would cause a subtle behavior change.\n\n\nIn this case, the behaviour looks meaningful so it's a change in the good sense.",
    "created_at": "2017-01-27T14:59:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412694",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
Replying to [tscrim](#comment%3A5):
> I'm slightly worried about the `richcmp(left.__prec, right.__prec, op)` doing more precise comparisons than before and would cause a subtle behavior change.


In this case, the behaviour looks meaningful so it's a change in the good sense.



---

archive/issue_comments_412695.json:
```json
{
    "body": "<a id='comment:7'></a>\nping ?",
    "created_at": "2017-01-30T16:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412695",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
ping ?



---

archive/issue_comments_412696.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2017-01-30T17:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412696",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_412697.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-01-30T17:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412697",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_412698.json:
```json
{
    "body": "<a id='comment:8'></a>\nOkay, then good to go.",
    "created_at": "2017-01-30T17:01:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412698",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
Okay, then good to go.



---

archive/issue_comments_412699.json:
```json
{
    "body": "Changing branch from \"u/chapoton/22258\" to \"759ae169e76ed464eec9c0f42ca5cd06521ca083\"",
    "created_at": "2017-02-02T22:09:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412699",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/chapoton/22258" to "759ae169e76ed464eec9c0f42ca5cd06521ca083"



---

archive/issue_events_058438.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-02T22:09:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22258#event-58438"
}
```



---

archive/issue_comments_412700.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-02-02T22:09:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22258",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22258#issuecomment-412700",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
