# Issue 22257: py3: no cmp() in real lazy

archive/issues_022020.json:
```json
{
    "assignees": [],
    "body": "as another step tp py3\n\nCC:  @tscrim @a-andre @jdemeyer @saraedum\n\nKeywords: **days85**\n\nBranch/Commit: **[cec557e](https://github.com/sagemath/sagetrac-mirror/commit/cec557e14b81b1e0b08c32eb77ac471ecbf9fb2b)**\n\nReviewer: **Julian R\u00fcth, Dima Pasechnik, Travis Scrimshaw**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22257_\n\n",
    "closed_at": "2017-04-11T22:22:53Z",
    "created_at": "2017-01-25T14:25:55Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20python3",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3: no cmp() in real lazy",
    "type": "issue",
    "updated_at": "2017-04-11T22:22:53Z",
    "url": "https://github.com/sagemath/sage/issues/22257",
    "user": "https://github.com/fchapoton"
}
```
as another step tp py3

CC:  @tscrim @a-andre @jdemeyer @saraedum

Keywords: **days85**

Branch/Commit: **[cec557e](https://github.com/sagemath/sagetrac-mirror/commit/cec557e14b81b1e0b08c32eb77ac471ecbf9fb2b)**

Reviewer: **Julian Rüth, Dima Pasechnik, Travis Scrimshaw**

Author: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/22257_





---

archive/issue_events_293562.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-01-25T14:25:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293562"
}
```



---

archive/issue_events_293563.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-01-25T14:25:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20python3",
    "label_color": "000080",
    "label_name": "component: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293563"
}
```



---

archive/issue_events_293564.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-01-25T14:25:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293564"
}
```



---

archive/issue_events_293565.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-01-25T14:25:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293565"
}
```



---

archive/issue_comments_331585.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a919fa0cb113b648fd79001cd4ef1afbf30a40b\">6a919fa</a></td><td><code>py3 : removal of cmp() in real_lazy</code></td></tr></table>\n",
    "created_at": "2017-01-25T14:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331585",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1" align="right">Comment 1</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a919fa0cb113b648fd79001cd4ef1afbf30a40b">6a919fa</a></td><td><code>py3 : removal of cmp() in real_lazy</code></td></tr></table>




---

archive/issue_comments_331586.json:
```json
{
    "body": "Branch: **[u/chapoton/22257](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257)**",
    "created_at": "2017-01-25T14:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331586",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/22257](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257)**



---

archive/issue_comments_331587.json:
```json
{
    "body": "Commit: **[6a919fa](https://github.com/sagemath/sagetrac-mirror/commit/6a919fa0cb113b648fd79001cd4ef1afbf30a40b)**",
    "created_at": "2017-01-25T14:31:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331587",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[6a919fa](https://github.com/sagemath/sagetrac-mirror/commit/6a919fa0cb113b648fd79001cd4ef1afbf30a40b)**



---

archive/issue_events_293566.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-01-25T20:18:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293566"
}
```



---

archive/issue_comments_331588.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nwaiting for the bots",
    "created_at": "2017-01-25T20:18:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331588",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:2" align="right">Comment 2</div>

waiting for the bots



---

archive/issue_events_293567.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-01-27T08:39:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293567"
}
```



---

archive/issue_events_293568.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-01-27T08:39:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293568"
}
```



---

archive/issue_comments_331589.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nooch, this one is going to be more complicated than expected..",
    "created_at": "2017-01-27T12:42:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331589",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4" align="right">Comment 4</div>

ooch, this one is going to be more complicated than expected..



---

archive/issue_events_293569.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-02-01T08:48:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293569"
}
```



---

archive/issue_events_293570.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-02-01T08:48:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293570"
}
```



---

archive/issue_comments_331590.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nhere is another try ; let us wait for the bots\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec2ca43788b988b3234a90ed64100540d9254c49\">ec2ca43</a></td><td><code>trac 22257 get rid of cmp(), second tentative</code></td></tr></table>\n",
    "created_at": "2017-02-01T08:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331590",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:5" align="right">Comment 5</div>

here is another try ; let us wait for the bots

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec2ca43788b988b3234a90ed64100540d9254c49">ec2ca43</a></td><td><code>trac 22257 get rid of cmp(), second tentative</code></td></tr></table>




---

archive/issue_comments_331591.json:
```json
{
    "body": "Changed branch from **[u/chapoton/22257](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257)** to **[u/chapoton/22257v2](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v2)**",
    "created_at": "2017-02-01T08:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331591",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/chapoton/22257](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257)** to **[u/chapoton/22257v2](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v2)**



---

archive/issue_comments_331592.json:
```json
{
    "body": "Changed commit from **[6a919fa](https://github.com/sagemath/sagetrac-mirror/commit/6a919fa0cb113b648fd79001cd4ef1afbf30a40b)** to **[ec2ca43](https://github.com/sagemath/sagetrac-mirror/commit/ec2ca43788b988b3234a90ed64100540d9254c49)**",
    "created_at": "2017-02-01T08:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331592",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[6a919fa](https://github.com/sagemath/sagetrac-mirror/commit/6a919fa0cb113b648fd79001cd4ef1afbf30a40b)** to **[ec2ca43](https://github.com/sagemath/sagetrac-mirror/commit/ec2ca43788b988b3234a90ed64100540d9254c49)**



---

archive/issue_comments_331593.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nOooch, again. This is going to be *really* more complicated than expected.",
    "created_at": "2017-02-01T12:47:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331593",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">Comment 6</div>

Oooch, again. This is going to be *really* more complicated than expected.



---

archive/issue_events_293571.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-02-01T12:51:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293571"
}
```



---

archive/issue_events_293572.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-02-01T12:51:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293572"
}
```



---

archive/issue_comments_331594.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nThis triggers that:\n\n```\nsage: z4 = CyclotomicField(4).gen()\nsage: CDF(z4)\n0.0\n```\nI have not been able to understand why.",
    "created_at": "2017-02-23T13:22:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331594",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">Comment 8</div>

This triggers that:

```
sage: z4 = CyclotomicField(4).gen()
sage: CDF(z4)
0.0
```
I have not been able to understand why.



---

archive/issue_comments_331595.json:
```json
{
    "body": "Changed commit from **[ec2ca43](https://github.com/sagemath/sagetrac-mirror/commit/ec2ca43788b988b3234a90ed64100540d9254c49)** to **[efa77ed](https://github.com/sagemath/sagetrac-mirror/commit/efa77ed34e7c6dd33701b2d378db556e7fa27b82)**",
    "created_at": "2017-03-08T16:00:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331595",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[ec2ca43](https://github.com/sagemath/sagetrac-mirror/commit/ec2ca43788b988b3234a90ed64100540d9254c49)** to **[efa77ed](https://github.com/sagemath/sagetrac-mirror/commit/efa77ed34e7c6dd33701b2d378db556e7fa27b82)**



---

archive/issue_comments_331596.json:
```json
{
    "body": "Changed branch from **[u/chapoton/22257v2](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v2)** to **[u/chapoton/22257v3](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v3)**",
    "created_at": "2017-03-08T16:00:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331596",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/chapoton/22257v2](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v2)** to **[u/chapoton/22257v3](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v3)**



---

archive/issue_events_293573.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-08T16:00:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293573"
}
```



---

archive/issue_events_293574.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-08T16:00:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293574"
}
```



---

archive/issue_comments_331597.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nanother try, let us wait for the patchbots\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a919fa0cb113b648fd79001cd4ef1afbf30a40b\">6a919fa</a></td><td><code>py3 : removal of cmp() in real_lazy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9eb46b53cec5934c49f3a9f0a0b71cce7a52eb4f\">9eb46b5</a></td><td><code>Merge branch 'u/chapoton/22257' in 7.6.b6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/efa77ed34e7c6dd33701b2d378db556e7fa27b82\">efa77ed</a></td><td><code>trac 22257 fixing doctests</code></td></tr></table>\n",
    "created_at": "2017-03-08T16:00:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331597",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">Comment 9</div>

another try, let us wait for the patchbots

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a919fa0cb113b648fd79001cd4ef1afbf30a40b">6a919fa</a></td><td><code>py3 : removal of cmp() in real_lazy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9eb46b53cec5934c49f3a9f0a0b71cce7a52eb4f">9eb46b5</a></td><td><code>Merge branch 'u/chapoton/22257' in 7.6.b6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/efa77ed34e7c6dd33701b2d378db556e7fa27b82">efa77ed</a></td><td><code>trac 22257 fixing doctests</code></td></tr></table>




---

archive/issue_comments_331598.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nok, this almost works, apparently.\n\nCould some number-theorist please tell me if the failing doctest is really a failure ?",
    "created_at": "2017-03-08T19:07:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331598",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">Comment 10</div>

ok, this almost works, apparently.

Could some number-theorist please tell me if the failing doctest is really a failure ?



---

archive/issue_comments_331599.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nWould this work instead:\n\n```\nreturn richcmp(left.endpoints(), right.endpoints(), op)\n```",
    "created_at": "2017-03-08T20:34:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331599",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">Comment 11</div>

Would this work instead:

```
return richcmp(left.endpoints(), right.endpoints(), op)
```



---

archive/issue_comments_331600.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@fchapoton](#comment%3A10):\n> ok, this almost works, apparently.\n> \n> Could some number-theorist please tell me if the failing doctest is really a failure ?\n\nCould you post here what the test is and what fails?  To save time.",
    "created_at": "2017-03-08T20:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331600",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@fchapoton](#comment%3A10):
> ok, this almost works, apparently.
> 
> Could some number-theorist please tell me if the failing doctest is really a failure ?

Could you post here what the test is and what fails?  To save time.



---

archive/issue_comments_331601.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nYes, sure. Here is the existing doctest\n\n```\nsage: f = x^8 - 3*x^7 + 61/3*x^6 - 9*x^5 + 298*x^4 + 458*x^3 + 1875*x^2 + 4293*x + 3099\nsage: F1 = NumberField(f, 'z', embedding=-1.18126721294295 + 3.02858651117832j)\nsage: F2 = NumberField(f, 'z', embedding=-1.18126721294295 - 3.02858651117832j)\nsage: (F, map1, map2, k) = F1.composite_fields(F2, both_maps=True)[0]\nsage: F.degree()\n32\nsage: F.gen() == map2(F2.gen()) + k*map1(F1.gen())\nTrue\n```\nIt fails by answering instead that F has degree 8 (just as F1, F2), with 2 identity maps as  morphisms.",
    "created_at": "2017-03-08T20:53:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331601",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">Comment 13</div>

Yes, sure. Here is the existing doctest

```
sage: f = x^8 - 3*x^7 + 61/3*x^6 - 9*x^5 + 298*x^4 + 458*x^3 + 1875*x^2 + 4293*x + 3099
sage: F1 = NumberField(f, 'z', embedding=-1.18126721294295 + 3.02858651117832j)
sage: F2 = NumberField(f, 'z', embedding=-1.18126721294295 - 3.02858651117832j)
sage: (F, map1, map2, k) = F1.composite_fields(F2, both_maps=True)[0]
sage: F.degree()
32
sage: F.gen() == map2(F2.gen()) + k*map1(F1.gen())
True
```
It fails by answering instead that F has degree 8 (just as F1, F2), with 2 identity maps as  morphisms.



---

archive/issue_comments_331602.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nBut wait, it seems that this number theoretical doctest failure disappears with the latest change suggested by Jeroen.",
    "created_at": "2017-03-08T20:55:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331602",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">Comment 14</div>

But wait, it seems that this number theoretical doctest failure disappears with the latest change suggested by Jeroen.



---

archive/issue_comments_331603.json:
```json
{
    "body": "Changed commit from **[efa77ed](https://github.com/sagemath/sagetrac-mirror/commit/efa77ed34e7c6dd33701b2d378db556e7fa27b82)** to **[e1f07ca](https://github.com/sagemath/sagetrac-mirror/commit/e1f07ca74416008e8280700152ec90e6e6f6329e)**",
    "created_at": "2017-03-08T20:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331603",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[efa77ed](https://github.com/sagemath/sagetrac-mirror/commit/efa77ed34e7c6dd33701b2d378db556e7fa27b82)** to **[e1f07ca](https://github.com/sagemath/sagetrac-mirror/commit/e1f07ca74416008e8280700152ec90e6e6f6329e)**



---

archive/issue_comments_331604.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nlet me launch my patchbot on this new version\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1f07ca74416008e8280700152ec90e6e6f6329e\">e1f07ca</a></td><td><code>trac 22257  fixing back doctests</code></td></tr></table>\n",
    "created_at": "2017-03-08T20:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331604",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:15" align="right">Comment 15</div>

let me launch my patchbot on this new version

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1f07ca74416008e8280700152ec90e6e6f6329e">e1f07ca</a></td><td><code>trac 22257  fixing back doctests</code></td></tr></table>




---

archive/issue_comments_331605.json:
```json
{
    "body": "Changed branch from **[u/chapoton/22257v3](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v3)** to **[u/chapoton/22257v4](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v4)**",
    "created_at": "2017-03-08T20:58:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331605",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/chapoton/22257v3](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v3)** to **[u/chapoton/22257v4](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v4)**



---

archive/issue_comments_331606.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nDegree 4 is certainly wrong since F1 contains only one root of f.  Over F1, f factors into degrees 1, 3, 4.  If the conjugate root is a root of the degree 4 factor then the degree of the composite would indeed be 8*4=32.  I did not check whether the conjugate is a root of the degree 3 factor; if it was, the composite would have degree 24.",
    "created_at": "2017-03-08T22:10:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331606",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:16" align="right">Comment 16</div>

Degree 4 is certainly wrong since F1 contains only one root of f.  Over F1, f factors into degrees 1, 3, 4.  If the conjugate root is a root of the degree 4 factor then the degree of the composite would indeed be 8*4=32.  I did not check whether the conjugate is a root of the degree 3 factor; if it was, the composite would have degree 24.



---

archive/issue_comments_331607.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nThank you, John and Jeroen.\n\nBot is now green, so please review. Turns out to be not so complicated, in the end.",
    "created_at": "2017-03-09T07:27:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331607",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">Comment 17</div>

Thank you, John and Jeroen.

Bot is now green, so please review. Turns out to be not so complicated, in the end.



---

archive/issue_comments_331608.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nJust to confirm, I checked that after adjoining the first root, the second is a root of the degree 4 factor, so the compositum does have degree 8*4=32.",
    "created_at": "2017-03-09T09:30:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331608",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:18" align="right">Comment 18</div>

Just to confirm, I checked that after adjoining the first root, the second is a root of the degree 4 factor, so the compositum does have degree 8*4=32.



---

archive/issue_comments_331609.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nWhy do you need to add those `bool()` calls to various doctests?",
    "created_at": "2017-03-09T14:52:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331609",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">Comment 19</div>

Why do you need to add those `bool()` calls to various doctests?



---

archive/issue_comments_331610.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nYou don't need this:\n\n```\nfrom cpython.object cimport Py_EQ\n```",
    "created_at": "2017-03-09T14:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331610",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">Comment 20</div>

You don't need this:

```
from cpython.object cimport Py_EQ
```



---

archive/issue_events_293575.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-09T14:53:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293575"
}
```



---

archive/issue_events_293576.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-09T14:53:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293576"
}
```



---

archive/issue_comments_331611.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nWhy this convoluted code\n\n```diff\n+        sage: x, y = xyz.xy()\n+        sage: max(abs(x - 6), abs(y + 15)) < 1e-14\n+        True\n```\ninstead of `abs_tol`?",
    "created_at": "2017-03-09T14:55:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331611",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">Comment 21</div>

Why this convoluted code

```diff
+        sage: x, y = xyz.xy()
+        sage: max(abs(x - 6), abs(y + 15)) < 1e-14
+        True
```
instead of `abs_tol`?



---

archive/issue_comments_331612.json:
```json
{
    "body": "Changed commit from **[e1f07ca](https://github.com/sagemath/sagetrac-mirror/commit/e1f07ca74416008e8280700152ec90e6e6f6329e)** to **[a93ded9](https://github.com/sagemath/sagetrac-mirror/commit/a93ded97cb0210c094a361f671b315f9c8cc7615)**",
    "created_at": "2017-03-09T16:04:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331612",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e1f07ca](https://github.com/sagemath/sagetrac-mirror/commit/e1f07ca74416008e8280700152ec90e6e6f6329e)** to **[a93ded9](https://github.com/sagemath/sagetrac-mirror/commit/a93ded97cb0210c094a361f671b315f9c8cc7615)**



---

archive/issue_comments_331613.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a93ded97cb0210c094a361f671b315f9c8cc7615\">a93ded9</a></td><td><code>trac 22257 details</code></td></tr></table>\n",
    "created_at": "2017-03-09T16:04:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331613",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22" align="right">Comment 22</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a93ded97cb0210c094a361f671b315f9c8cc7615">a93ded9</a></td><td><code>trac 22257 details</code></td></tr></table>




---

archive/issue_events_293577.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-09T16:06:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293577"
}
```



---

archive/issue_events_293578.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-09T16:06:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293578"
}
```



---

archive/issue_comments_331614.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\ndone.\n\nFor the added bool, they are necessary because otherwise one gets a symbolic equality. This is probably caused by a difference of behavior between cmp and richcmp in the symbolic ring (that we will have to handle at some point, for sure).",
    "created_at": "2017-03-09T16:06:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331614",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">Comment 23</div>

done.

For the added bool, they are necessary because otherwise one gets a symbolic equality. This is probably caused by a difference of behavior between cmp and richcmp in the symbolic ring (that we will have to handle at some point, for sure).



---

archive/issue_comments_331615.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\ngreen bot, please review",
    "created_at": "2017-03-10T07:37:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331615",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:24" align="right">Comment 24</div>

green bot, please review



---

archive/issue_comments_331616.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nping ?",
    "created_at": "2017-03-12T17:51:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331616",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:25" align="right">Comment 25</div>

ping ?



---

archive/issue_comments_331617.json:
```json
{
    "body": "Reviewer: **Julian R\u00fcth**",
    "created_at": "2017-03-14T16:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331617",
    "user": "https://github.com/saraedum"
}
```

Reviewer: **Julian Rüth**



---

archive/issue_events_293579.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-03-14T16:17:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293579"
}
```



---

archive/issue_events_293580.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-03-14T16:17:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293580"
}
```



---

archive/issue_comments_331618.json:
```json
{
    "body": "Changed keywords from **** to **days85**",
    "created_at": "2017-03-14T16:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331618",
    "user": "https://github.com/saraedum"
}
```

Changed keywords from **** to **days85**



---

archive/issue_comments_331619.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nThis looks good. I don't really understand the `bool()` though. If we keep it like this, then code that compares elements of `RLF` is going to break, right?",
    "created_at": "2017-03-14T16:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331619",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:26" align="right">Comment 26</div>

This looks good. I don't really understand the `bool()` though. If we keep it like this, then code that compares elements of `RLF` is going to break, right?



---

archive/issue_comments_331620.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nno, because the bool will be called by the \"if\" or \"while\" or whatever uses it as a test. Only bare equalities will stay unevaluated.",
    "created_at": "2017-03-14T16:18:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331620",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:27" align="right">Comment 27</div>

no, because the bool will be called by the "if" or "while" or whatever uses it as a test. Only bare equalities will stay unevaluated.



---

archive/issue_comments_331621.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nWouldn't it be better to add the `bool` in `_richcmp_`?",
    "created_at": "2017-03-14T16:27:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331621",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">Comment 28</div>

Wouldn't it be better to add the `bool` in `_richcmp_`?



---

archive/issue_comments_331622.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nWell, this is only needed for lazy_numbers initialized from the Symbolic Ring.\n\nI would prefer to keep the bool where it is. This is really just a very tiny shadow of the fact that the symbolic ring has two different uses for cmp and richcmp. We will need to get rid of one of these at some point, but this is not the place to do so.",
    "created_at": "2017-03-14T16:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331622",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:29" align="right">Comment 29</div>

Well, this is only needed for lazy_numbers initialized from the Symbolic Ring.

I would prefer to keep the bool where it is. This is really just a very tiny shadow of the fact that the symbolic ring has two different uses for cmp and richcmp. We will need to get rid of one of these at some point, but this is not the place to do so.



---

archive/issue_comments_331623.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nReplying to [@fchapoton](#comment%3A29):\n> Well, this is only needed for lazy_numbers initialized from the Symbolic Ring.\n> \n> This is really just a very tiny shadow of the fact that the symbolic ring has two different uses for cmp and richcmp. We will need to get rid of one of these at some point, but this is not the place to do so.\n\nI agree with all of the above. Still, I don't like the fact that you are breaking `RLF(1) < RLF(sqrt(2))`.",
    "created_at": "2017-03-14T17:20:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331623",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:30" align="right">Comment 30</div>

Replying to [@fchapoton](#comment%3A29):
> Well, this is only needed for lazy_numbers initialized from the Symbolic Ring.
> 
> This is really just a very tiny shadow of the fact that the symbolic ring has two different uses for cmp and richcmp. We will need to get rid of one of these at some point, but this is not the place to do so.

I agree with all of the above. Still, I don't like the fact that you are breaking `RLF(1) < RLF(sqrt(2))`.



---

archive/issue_comments_331624.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nOk, I see now. I think this is fine then. jdemeyer, please set this back to needs_work if you think that something needs to be done about the comparisons.",
    "created_at": "2017-03-14T19:19:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331624",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:31" align="right">Comment 31</div>

Ok, I see now. I think this is fine then. jdemeyer, please set this back to needs_work if you think that something needs to be done about the comparisons.



---

archive/issue_events_293581.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-03-14T19:19:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293581"
}
```



---

archive/issue_events_293582.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2017-03-14T19:19:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293582"
}
```



---

archive/issue_comments_331625.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nReplying to [@saraedum](#comment%3A31):\n> Ok, I see now. I think this is fine then. jdemeyer, please set this back to needs_work if you think that something needs to be done about the comparisons.\n\nWell, I *do* think that there is something to be fixed here. But I don't feel strongly enough about it to set the ticket back to needs_work.",
    "created_at": "2017-03-14T19:50:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331625",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">Comment 32</div>

Replying to [@saraedum](#comment%3A31):
> Ok, I see now. I think this is fine then. jdemeyer, please set this back to needs_work if you think that something needs to be done about the comparisons.

Well, I *do* think that there is something to be fixed here. But I don't feel strongly enough about it to set the ticket back to needs_work.



---

archive/issue_comments_331626.json:
```json
{
    "body": "Changed branch from **[u/chapoton/22257v4](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v4)** to **[a93ded9](https://github.com/sagemath/sagetrac-mirror/commit/a93ded97cb0210c094a361f671b315f9c8cc7615)**",
    "created_at": "2017-03-27T20:42:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331626",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/22257v4](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v4)** to **[a93ded9](https://github.com/sagemath/sagetrac-mirror/commit/a93ded97cb0210c094a361f671b315f9c8cc7615)**



---

archive/issue_events_293583.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-27T20:42:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293583"
}
```



---

archive/issue_events_293584.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-27T20:42:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293584"
}
```



---

archive/issue_comments_331627.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nOn OSX:\n\n```\nsage -t --long --warn-long 126.9 src/sage/symbolic/expression.pyx\n**********************************************************************\nFile \"src/sage/symbolic/expression.pyx\", line 3537, in sage.symbolic.expression.Expression._cmp_\nFailed example:\n    RealSet((0, pi),[pi, pi],(pi,4))\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.symbolic.expression.Expression._cmp_[40]>\", line 1, in <module>\n        RealSet((Integer(0), pi),[pi, pi],(pi,Integer(4)))\n      File \"sage/misc/lazy_import.pyx\", line 389, in sage.misc.lazy_import.LazyImport.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/lazy_import.c:4007)\n        return self._get_object()(*args, **kwds)\n      File \"sage/misc/classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/classcall_metaclass.c:1410)\n        return cls.classcall(cls, *args, **kwds)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/sets/real_set.py\", line 644, in __classcall__\n        intervals.append(InternalRealInterval(lower, True, upper, True))\n      File \"sage/misc/classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/classcall_metaclass.c:1410)\n        return cls.classcall(cls, *args, **kwds)\n      File \"sage/misc/cachefunc.pyx\", line 1059, in sage.misc.cachefunc.CachedFunction.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:6077)\n        w = self.f(*args, **kwds)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 1022, in __classcall__\n        instance = typecall(cls, *args, **options)\n      File \"sage/misc/classcall_metaclass.pyx\", line 497, in sage.misc.classcall_metaclass.typecall (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/classcall_metaclass.c:1859)\n        return (<PyTypeObject*>type).tp_call(cls, args, kwds)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/sets/real_set.py\", line 123, in __init__\n        raise ValueError('lower/upper bounds are not sorted')\n    ValueError: lower/upper bounds are not sorted\n**********************************************************************\n```",
    "created_at": "2017-03-27T22:39:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331627",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:34" align="right">Comment 34</div>

On OSX:

```
sage -t --long --warn-long 126.9 src/sage/symbolic/expression.pyx
**********************************************************************
File "src/sage/symbolic/expression.pyx", line 3537, in sage.symbolic.expression.Expression._cmp_
Failed example:
    RealSet((0, pi),[pi, pi],(pi,4))
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.symbolic.expression.Expression._cmp_[40]>", line 1, in <module>
        RealSet((Integer(0), pi),[pi, pi],(pi,Integer(4)))
      File "sage/misc/lazy_import.pyx", line 389, in sage.misc.lazy_import.LazyImport.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/lazy_import.c:4007)
        return self._get_object()(*args, **kwds)
      File "sage/misc/classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/classcall_metaclass.c:1410)
        return cls.classcall(cls, *args, **kwds)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/sets/real_set.py", line 644, in __classcall__
        intervals.append(InternalRealInterval(lower, True, upper, True))
      File "sage/misc/classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/classcall_metaclass.c:1410)
        return cls.classcall(cls, *args, **kwds)
      File "sage/misc/cachefunc.pyx", line 1059, in sage.misc.cachefunc.CachedFunction.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:6077)
        w = self.f(*args, **kwds)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1022, in __classcall__
        instance = typecall(cls, *args, **options)
      File "sage/misc/classcall_metaclass.pyx", line 497, in sage.misc.classcall_metaclass.typecall (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/classcall_metaclass.c:1859)
        return (<PyTypeObject*>type).tp_call(cls, args, kwds)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/sets/real_set.py", line 123, in __init__
        raise ValueError('lower/upper bounds are not sorted')
    ValueError: lower/upper bounds are not sorted
**********************************************************************
```



---

archive/issue_comments_331628.json:
```json
{
    "body": "Changed commit from **[a93ded9](https://github.com/sagemath/sagetrac-mirror/commit/a93ded97cb0210c094a361f671b315f9c8cc7615)** to none",
    "created_at": "2017-03-27T22:39:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331628",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[a93ded9](https://github.com/sagemath/sagetrac-mirror/commit/a93ded97cb0210c094a361f671b315f9c8cc7615)** to none



---

archive/issue_comments_331629.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nhell ! I have no apple on which to debug that..",
    "created_at": "2017-03-28T15:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331629",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:35" align="right">Comment 35</div>

hell ! I have no apple on which to debug that..



---

archive/issue_events_293585.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-28T16:02:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293585"
}
```



---

archive/issue_events_293586.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-28T16:02:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293586"
}
```



---

archive/issue_events_293587.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-30T11:57:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293587"
}
```



---

archive/issue_events_293588.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-30T11:57:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293588"
}
```



---

archive/issue_events_293589.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-30T11:57:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293589"
}
```



---

archive/issue_comments_331630.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nmay be related to #16035 ?",
    "created_at": "2017-03-30T20:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331630",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:39" align="right">Comment 39</div>

may be related to #16035 ?



---

archive/issue_comments_331631.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nReplying to [@fchapoton](#comment%3A35):\n> hell ! I have no apple on which to debug that..\n\nthis is perfectly reproducible on FreeBSD 11.0 with clang 3.8, as described in #22679\nFreeBSD 11 is some kind of approximation of OSX.\n\nI took the current branch there and merged your `u/chapoton/22257v4`.",
    "created_at": "2017-03-31T20:20:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331631",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:40" align="right">Comment 40</div>

Replying to [@fchapoton](#comment%3A35):
> hell ! I have no apple on which to debug that..

this is perfectly reproducible on FreeBSD 11.0 with clang 3.8, as described in #22679
FreeBSD 11 is some kind of approximation of OSX.

I took the current branch there and merged your `u/chapoton/22257v4`.



---

archive/issue_comments_331632.json:
```json
{
    "body": "Changed branch from **[a93ded9](https://github.com/sagemath/sagetrac-mirror/commit/a93ded97cb0210c094a361f671b315f9c8cc7615)** to **[u/chapoton/22257v4](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v4)**",
    "created_at": "2017-03-31T20:32:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331632",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[a93ded9](https://github.com/sagemath/sagetrac-mirror/commit/a93ded97cb0210c094a361f671b315f9c8cc7615)** to **[u/chapoton/22257v4](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v4)**



---

archive/issue_comments_331633.json:
```json
{
    "body": "Commit: **[a93ded9](https://github.com/sagemath/sagetrac-mirror/commit/a93ded97cb0210c094a361f671b315f9c8cc7615)**",
    "created_at": "2017-03-31T20:32:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331633",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[a93ded9](https://github.com/sagemath/sagetrac-mirror/commit/a93ded97cb0210c094a361f671b315f9c8cc7615)**



---

archive/issue_comments_331634.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nI made a branch u/chapoton/22257v5 where the richcmp are wrapped with bool",
    "created_at": "2017-04-01T12:33:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331634",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:42" align="right">Comment 42</div>

I made a branch u/chapoton/22257v5 where the richcmp are wrapped with bool



---

archive/issue_comments_331635.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nThis really needs somebody with either osx or freebsd to do the debugging. Please help !",
    "created_at": "2017-04-04T19:17:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331635",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:43" align="right">Comment 43</div>

This really needs somebody with either osx or freebsd to do the debugging. Please help !



---

archive/issue_comments_331636.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nCould please at least someone with either a Mac or FreeBSD give me the result of the failing doctest above with the branch\n\nu/chapoton/22257_testing\n\napplied ?",
    "created_at": "2017-04-05T12:43:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331636",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:44" align="right">Comment 44</div>

Could please at least someone with either a Mac or FreeBSD give me the result of the failing doctest above with the branch

u/chapoton/22257_testing

applied ?



---

archive/issue_comments_331637.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nhere is FreeBSD with u/chapoton/22257_testing\n\n```\nsage -t --long --warn-long 41.0 src/sage/symbolic/expression.pyx\n**********************************************************************\nFile \"src/sage/symbolic/expression.pyx\", line 3537, in sage.symbolic.expression.Expression._cmp_\nFailed example:\n    RealSet((0, pi),[pi, pi],(pi,4))\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.symbolic.expression.Expression._cmp_[40]>\", line 1, in <module>\n        RealSet((Integer(0), pi),[pi, pi],(pi,Integer(4)))\n      File \"sage/misc/lazy_import.pyx\", line 389, in sage.misc.lazy_import.LazyImport.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/lazy_import.c:4016)\n        return self._get_object()(*args, **kwds)\n      File \"sage/misc/classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/classcall_metaclass.c:1415)\n        return cls.classcall(cls, *args, **kwds)\n      File \"/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/sets/real_set.py\", line 645, in __classcall__\n        intervals.append(InternalRealInterval(lower, True, upper, True))\n      File \"sage/misc/classcall_metaclass.pyx\", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/classcall_metaclass.c:1415)\n        return cls.classcall(cls, *args, **kwds)\n      File \"sage/misc/cachefunc.pyx\", line 1059, in sage.misc.cachefunc.CachedFunction.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/cachefunc.c:6086)\n        w = self.f(*args, **kwds)\n      File \"/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/structure/unique_representation.py\", line 1022, in __classcall__\n        instance = typecall(cls, *args, **options)\n      File \"sage/misc/classcall_metaclass.pyx\", line 497, in sage.misc.classcall_metaclass.typecall (/home/dima/Sage/sage/src/build/cythonized/sage/misc/classcall_metaclass.c:1864)\n        return (<PyTypeObject*>type).tp_call(cls, args, kwds)\n      File \"/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/sets/real_set.py\", line 124, in __init__\n        raise ValueError(msg.format(lower, upper))\n    ValueError: lower/upper bounds (3.141592653589794?/3.141592653589794?) are not sorted\n**********************************************************************\n1 item had failures:\n   1 of  44 in sage.symbolic.expression.Expression._cmp_\n    [2673 tests, 1 failure, 25.49 s]\n```",
    "created_at": "2017-04-05T19:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331637",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:45" align="right">Comment 45</div>

here is FreeBSD with u/chapoton/22257_testing

```
sage -t --long --warn-long 41.0 src/sage/symbolic/expression.pyx
**********************************************************************
File "src/sage/symbolic/expression.pyx", line 3537, in sage.symbolic.expression.Expression._cmp_
Failed example:
    RealSet((0, pi),[pi, pi],(pi,4))
Exception raised:
    Traceback (most recent call last):
      File "/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.symbolic.expression.Expression._cmp_[40]>", line 1, in <module>
        RealSet((Integer(0), pi),[pi, pi],(pi,Integer(4)))
      File "sage/misc/lazy_import.pyx", line 389, in sage.misc.lazy_import.LazyImport.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/lazy_import.c:4016)
        return self._get_object()(*args, **kwds)
      File "sage/misc/classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/classcall_metaclass.c:1415)
        return cls.classcall(cls, *args, **kwds)
      File "/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/sets/real_set.py", line 645, in __classcall__
        intervals.append(InternalRealInterval(lower, True, upper, True))
      File "sage/misc/classcall_metaclass.pyx", line 330, in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/classcall_metaclass.c:1415)
        return cls.classcall(cls, *args, **kwds)
      File "sage/misc/cachefunc.pyx", line 1059, in sage.misc.cachefunc.CachedFunction.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/cachefunc.c:6086)
        w = self.f(*args, **kwds)
      File "/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/structure/unique_representation.py", line 1022, in __classcall__
        instance = typecall(cls, *args, **options)
      File "sage/misc/classcall_metaclass.pyx", line 497, in sage.misc.classcall_metaclass.typecall (/home/dima/Sage/sage/src/build/cythonized/sage/misc/classcall_metaclass.c:1864)
        return (<PyTypeObject*>type).tp_call(cls, args, kwds)
      File "/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/sets/real_set.py", line 124, in __init__
        raise ValueError(msg.format(lower, upper))
    ValueError: lower/upper bounds (3.141592653589794?/3.141592653589794?) are not sorted
**********************************************************************
1 item had failures:
   1 of  44 in sage.symbolic.expression.Expression._cmp_
    [2673 tests, 1 failure, 25.49 s]
```



---

archive/issue_comments_331638.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nThanks a lot, Dima ! So the problem is not coming from where Volker thought it could come..\n\nCould you just try `RealSet([pi, pi])` and `pi == pi` please ?",
    "created_at": "2017-04-05T19:23:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331638",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:46" align="right">Comment 46</div>

Thanks a lot, Dima ! So the problem is not coming from where Volker thought it could come..

Could you just try `RealSet([pi, pi])` and `pi == pi` please ?



---

archive/issue_comments_331639.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nAnd, just in case, that's what I have at the prompt with this branch applied:\n\n```\nsage: bool(pi-pi == 0)\nTrue\nsage: bool(pi-pi < 0)\nFalse\nsage: bool(pi-pi > 0)\nFalse\nsage: pi<pi\npi < pi\nsage: bool(pi<pi)\nTrue\nsage: bool(pi==pi)\nTrue\nsage: bool(pi>pi)\nTrue\nsage: bool(pi<4)\nTrue\nsage: bool(pi>4)\nFalse\n```\nfrom the point of view of numerical analysis, this all makes sense.\nOne cannot reliably compare floating point numbers for equality, and `pi` is just\na floating point number in disguise. So you compare two \"equal\" floating point numbers for equality, this won't fly...\n\nBut the following seems to make sense:\n\n```\nsage: bool(pi-pi == 0)\nTrue\nsage: bool(pi-pi < 0)\nFalse\nsage: bool(pi-pi > 0)\nFalse\n```\n(what happens is I suppose that pi-pi gets properly simplified to 0...)",
    "created_at": "2017-04-05T19:26:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331639",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:47" align="right">Comment 47</div>

And, just in case, that's what I have at the prompt with this branch applied:

```
sage: bool(pi-pi == 0)
True
sage: bool(pi-pi < 0)
False
sage: bool(pi-pi > 0)
False
sage: pi<pi
pi < pi
sage: bool(pi<pi)
True
sage: bool(pi==pi)
True
sage: bool(pi>pi)
True
sage: bool(pi<4)
True
sage: bool(pi>4)
False
```
from the point of view of numerical analysis, this all makes sense.
One cannot reliably compare floating point numbers for equality, and `pi` is just
a floating point number in disguise. So you compare two "equal" floating point numbers for equality, this won't fly...

But the following seems to make sense:

```
sage: bool(pi-pi == 0)
True
sage: bool(pi-pi < 0)
False
sage: bool(pi-pi > 0)
False
```
(what happens is I suppose that pi-pi gets properly simplified to 0...)



---

archive/issue_comments_331640.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\n\n```\nsage: RealSet([pi, pi])\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-15-46f200bbe718> in <module>()\n----> 1 RealSet([pi, pi])\n\n/usr/home/dima/Sage/sage/src/sage/misc/lazy_import.pyx in sage.misc.lazy_import.LazyImport.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/lazy_import.c:4016)()\n    387             True\n    388         \"\"\"\n--> 389         return self._get_object()(*args, **kwds)\n    390 \n    391     def __repr__(self):\n\n/usr/home/dima/Sage/sage/src/sage/misc/classcall_metaclass.pyx in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/classcall_metaclass.c:1415)()\n    328         \"\"\"\n    329         if cls.classcall is not None:\n--> 330             return cls.classcall(cls, *args, **kwds)\n    331         else:\n    332             # Fast version of type.__call__(cls, *args, **kwds)\n\n/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/sets/real_set.pyc in __classcall__(cls, *args)\n    643             elif isinstance(arg, list):\n    644                 lower, upper = RealSet._prep(*arg)\n--> 645                 intervals.append(InternalRealInterval(lower, True, upper, True))\n    646             elif isinstance(arg, InternalRealInterval):\n    647                 intervals.append(arg)\n\n/usr/home/dima/Sage/sage/src/sage/misc/classcall_metaclass.pyx in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/classcall_metaclass.c:1415)()\n    328         \"\"\"\n    329         if cls.classcall is not None:\n--> 330             return cls.classcall(cls, *args, **kwds)\n    331         else:\n    332             # Fast version of type.__call__(cls, *args, **kwds)\n\n/usr/home/dima/Sage/sage/src/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedFunction.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/cachefunc.c:6086)()\n   1057                 return self.cache[k]\n   1058         except KeyError:\n-> 1059             w = self.f(*args, **kwds)\n   1060             self.cache[k] = w\n   1061             return w\n\n/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/structure/unique_representation.pyc in __classcall__(cls, *args, **options)\n   1020             True\n   1021         \"\"\"\n-> 1022         instance = typecall(cls, *args, **options)\n   1023         assert isinstance( instance, cls )\n   1024         if instance.__class__.__reduce__ == CachedRepresentation.__reduce__:\n\n/usr/home/dima/Sage/sage/src/sage/misc/classcall_metaclass.pyx in sage.misc.classcall_metaclass.typecall (/home/dima/Sage/sage/src/build/cythonized/sage/misc/classcall_metaclass.c:1864)()\n    495             TypeError: Argument 'cls' has incorrect type (expected type, got classobj)\n    496     \"\"\"\n--> 497     return (<PyTypeObject*>type).tp_call(cls, args, kwds)\n    498 \n    499 # Class for timing::\n\n/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/sets/real_set.pyc in __init__(self, lower, lower_closed, upper, upper_closed, check)\n    122             if not(lower is minus_infinity or upper is infinity) and lower > upper:\n    123                 msg = 'lower/upper bounds ({}/{}) are not sorted'\n--> 124                 raise ValueError(msg.format(lower, upper))\n    125             if (lower_closed and lower == minus_infinity):\n    126                 raise ValueError('interval cannot be closed at -oo')\n\nValueError: lower/upper bounds (3.141592653589794?/3.141592653589794?) are not sorted\n```",
    "created_at": "2017-04-05T19:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331640",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">Comment 48</div>


```
sage: RealSet([pi, pi])
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-15-46f200bbe718> in <module>()
----> 1 RealSet([pi, pi])

/usr/home/dima/Sage/sage/src/sage/misc/lazy_import.pyx in sage.misc.lazy_import.LazyImport.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/lazy_import.c:4016)()
    387             True
    388         """
--> 389         return self._get_object()(*args, **kwds)
    390 
    391     def __repr__(self):

/usr/home/dima/Sage/sage/src/sage/misc/classcall_metaclass.pyx in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/classcall_metaclass.c:1415)()
    328         """
    329         if cls.classcall is not None:
--> 330             return cls.classcall(cls, *args, **kwds)
    331         else:
    332             # Fast version of type.__call__(cls, *args, **kwds)

/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/sets/real_set.pyc in __classcall__(cls, *args)
    643             elif isinstance(arg, list):
    644                 lower, upper = RealSet._prep(*arg)
--> 645                 intervals.append(InternalRealInterval(lower, True, upper, True))
    646             elif isinstance(arg, InternalRealInterval):
    647                 intervals.append(arg)

/usr/home/dima/Sage/sage/src/sage/misc/classcall_metaclass.pyx in sage.misc.classcall_metaclass.ClasscallMetaclass.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/classcall_metaclass.c:1415)()
    328         """
    329         if cls.classcall is not None:
--> 330             return cls.classcall(cls, *args, **kwds)
    331         else:
    332             # Fast version of type.__call__(cls, *args, **kwds)

/usr/home/dima/Sage/sage/src/sage/misc/cachefunc.pyx in sage.misc.cachefunc.CachedFunction.__call__ (/home/dima/Sage/sage/src/build/cythonized/sage/misc/cachefunc.c:6086)()
   1057                 return self.cache[k]
   1058         except KeyError:
-> 1059             w = self.f(*args, **kwds)
   1060             self.cache[k] = w
   1061             return w

/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/structure/unique_representation.pyc in __classcall__(cls, *args, **options)
   1020             True
   1021         """
-> 1022         instance = typecall(cls, *args, **options)
   1023         assert isinstance( instance, cls )
   1024         if instance.__class__.__reduce__ == CachedRepresentation.__reduce__:

/usr/home/dima/Sage/sage/src/sage/misc/classcall_metaclass.pyx in sage.misc.classcall_metaclass.typecall (/home/dima/Sage/sage/src/build/cythonized/sage/misc/classcall_metaclass.c:1864)()
    495             TypeError: Argument 'cls' has incorrect type (expected type, got classobj)
    496     """
--> 497     return (<PyTypeObject*>type).tp_call(cls, args, kwds)
    498 
    499 # Class for timing::

/usr/home/dima/Sage/sage/local/lib/python2.7/site-packages/sage/sets/real_set.pyc in __init__(self, lower, lower_closed, upper, upper_closed, check)
    122             if not(lower is minus_infinity or upper is infinity) and lower > upper:
    123                 msg = 'lower/upper bounds ({}/{}) are not sorted'
--> 124                 raise ValueError(msg.format(lower, upper))
    125             if (lower_closed and lower == minus_infinity):
    126                 raise ValueError('interval cannot be closed at -oo')

ValueError: lower/upper bounds (3.141592653589794?/3.141592653589794?) are not sorted
```



---

archive/issue_comments_331641.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nok, so the problem is here:\n\n```\nsage: bool(pi>pi)\nTrue\n```\nwhich is not the normal behaviour. I get `False` with the same branch.\n\nOne possible solution (not solving the real issue) would be to replace the test \u0300`lower > upper` by `lower - upper > 0`.",
    "created_at": "2017-04-05T19:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331641",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:49" align="right">Comment 49</div>

ok, so the problem is here:

```
sage: bool(pi>pi)
True
```
which is not the normal behaviour. I get `False` with the same branch.

One possible solution (not solving the real issue) would be to replace the test ̀`lower > upper` by `lower - upper > 0`.



---

archive/issue_comments_331642.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nBy the way, Dima, could you please check the status of #16035 and report there ?",
    "created_at": "2017-04-05T19:49:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331642",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:50" align="right">Comment 50</div>

By the way, Dima, could you please check the status of #16035 and report there ?



---

archive/issue_comments_331643.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nReplying to [@fchapoton](#comment%3A50):\n> By the way, Dima, could you please check the status of #16035 and report there ?\n\njust did; no problem in my setup.",
    "created_at": "2017-04-05T19:54:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331643",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:51" align="right">Comment 51</div>

Replying to [@fchapoton](#comment%3A50):
> By the way, Dima, could you please check the status of #16035 and report there ?

just did; no problem in my setup.



---

archive/issue_comments_331644.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nThanks. Could you please tell me what happens with\n\n```\nbool(e < e)\n```\nand\n\n```\nbool(sqrt(2) < sqrt(2))\n```\nJust to be sure we really have located the problem..",
    "created_at": "2017-04-05T19:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331644",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:52" align="right">Comment 52</div>

Thanks. Could you please tell me what happens with

```
bool(e < e)
```
and

```
bool(sqrt(2) < sqrt(2))
```
Just to be sure we really have located the problem..



---

archive/issue_comments_331645.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\n\n```\nsage: e<e\ne < e\nsage: bool(e<e)\nFalse\nsage: bool(e>e)\nFalse\nsage: bool(e==e)\nTrue\nsage: type(e)\n<type 'sage.symbolic.constants_c.E'>\nsage: type(pi)\n<type 'sage.symbolic.expression.Expression'>\nsage: type(sqrt(2))\n<type 'sage.symbolic.expression.Expression'>\nsage: sqrt(2)==sqrt(2)\nsqrt(2) == sqrt(2)\nsage: sqrt(2)<sqrt(2)\nsqrt(2) < sqrt(2)\nsage: bool(sqrt(2)<sqrt(2))\nFalse\nsage: bool(sqrt(2)==sqrt(2))\nTrue\nsage: bool(sqrt(2)>sqrt(2))\nFalse\n```\n\nI wonder why `pi` is not of type `sage.symbolic.constants_c.E`, while `e` is.\nThe latter explains why these comparison tests work.\n\nWith `pi` vs `sqrt(2)`, apparently simplification works better with algebraic numbers than with transcendentals.",
    "created_at": "2017-04-05T20:12:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331645",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:53" align="right">Comment 53</div>


```
sage: e<e
e < e
sage: bool(e<e)
False
sage: bool(e>e)
False
sage: bool(e==e)
True
sage: type(e)
<type 'sage.symbolic.constants_c.E'>
sage: type(pi)
<type 'sage.symbolic.expression.Expression'>
sage: type(sqrt(2))
<type 'sage.symbolic.expression.Expression'>
sage: sqrt(2)==sqrt(2)
sqrt(2) == sqrt(2)
sage: sqrt(2)<sqrt(2)
sqrt(2) < sqrt(2)
sage: bool(sqrt(2)<sqrt(2))
False
sage: bool(sqrt(2)==sqrt(2))
True
sage: bool(sqrt(2)>sqrt(2))
False
```

I wonder why `pi` is not of type `sage.symbolic.constants_c.E`, while `e` is.
The latter explains why these comparison tests work.

With `pi` vs `sqrt(2)`, apparently simplification works better with algebraic numbers than with transcendentals.



---

archive/issue_comments_331646.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\ngood. So the problem is specific to pi and other similar constants.\nCould you please try\n\n```\nsage: from sage.symbolic.constants import Pi\nsage: mypi = Pi()\nsage: mypi.__lt__(pi)\npi > 3.141592653589793\nsage: bool(_)\nFalse\n```\nand\n\n```\nsage: bool(euler_gamma < euler_gamma)\nFalse\n```",
    "created_at": "2017-04-05T20:31:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331646",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:54" align="right">Comment 54</div>

good. So the problem is specific to pi and other similar constants.
Could you please try

```
sage: from sage.symbolic.constants import Pi
sage: mypi = Pi()
sage: mypi.__lt__(pi)
pi > 3.141592653589793
sage: bool(_)
False
```
and

```
sage: bool(euler_gamma < euler_gamma)
False
```



---

archive/issue_comments_331647.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nReplying to [@fchapoton](#comment%3A54):\n> good. So the problem is specific to pi and other similar constants.\n> Could you please try\n> \n> ```\n> sage: from sage.symbolic.constants import Pi\n> sage: mypi = Pi()\n> sage: mypi.__lt__(pi)\n> pi > 3.141592653589793\n> sage: bool(_)\n> False\n> ```\n\nthis is OK.\n\n> and\n> \n> ```\n> sage: bool(euler_gamma < euler_gamma)\n> False\n> ```\n\nno, this is not\n\n```\nsage: bool(euler_gamma < euler_gamma)\nTrue\nsage: bool(euler_gamma > euler_gamma)\nTrue\nsage: bool(euler_gamma == euler_gamma)\nTrue\nsage: type(euler_gamma)\n<type 'sage.symbolic.expression.Expression'>\n```\nso `euler_gamma` is as bad as `pi` here.",
    "created_at": "2017-04-05T20:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331647",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:55" align="right">Comment 55</div>

Replying to [@fchapoton](#comment%3A54):
> good. So the problem is specific to pi and other similar constants.
> Could you please try
> 
> ```
> sage: from sage.symbolic.constants import Pi
> sage: mypi = Pi()
> sage: mypi.__lt__(pi)
> pi > 3.141592653589793
> sage: bool(_)
> False
> ```

this is OK.

> and
> 
> ```
> sage: bool(euler_gamma < euler_gamma)
> False
> ```

no, this is not

```
sage: bool(euler_gamma < euler_gamma)
True
sage: bool(euler_gamma > euler_gamma)
True
sage: bool(euler_gamma == euler_gamma)
True
sage: type(euler_gamma)
<type 'sage.symbolic.expression.Expression'>
```
so `euler_gamma` is as bad as `pi` here.



---

archive/issue_comments_331648.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nHere is a new tentative. Dima, when you can, could you try with this branch (u/chapoton/22257v6), please ?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/00fc3f19e71fe4f832e6fd310b21dd1ddde057e5\">00fc3f1</a></td><td><code>Merge branch 'u/chapoton/22257v4' in 8.0.b0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cec557e14b81b1e0b08c32eb77ac471ecbf9fb2b\">cec557e</a></td><td><code>trac 22257 trying to fix comparison pi < pi issue on osx</code></td></tr></table>\n",
    "created_at": "2017-04-06T07:25:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331648",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:56" align="right">Comment 56</div>

Here is a new tentative. Dima, when you can, could you try with this branch (u/chapoton/22257v6), please ?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/00fc3f19e71fe4f832e6fd310b21dd1ddde057e5">00fc3f1</a></td><td><code>Merge branch 'u/chapoton/22257v4' in 8.0.b0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cec557e14b81b1e0b08c32eb77ac471ecbf9fb2b">cec557e</a></td><td><code>trac 22257 trying to fix comparison pi < pi issue on osx</code></td></tr></table>




---

archive/issue_comments_331649.json:
```json
{
    "body": "Changed commit from **[a93ded9](https://github.com/sagemath/sagetrac-mirror/commit/a93ded97cb0210c094a361f671b315f9c8cc7615)** to **[cec557e](https://github.com/sagemath/sagetrac-mirror/commit/cec557e14b81b1e0b08c32eb77ac471ecbf9fb2b)**",
    "created_at": "2017-04-06T07:25:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331649",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[a93ded9](https://github.com/sagemath/sagetrac-mirror/commit/a93ded97cb0210c094a361f671b315f9c8cc7615)** to **[cec557e](https://github.com/sagemath/sagetrac-mirror/commit/cec557e14b81b1e0b08c32eb77ac471ecbf9fb2b)**



---

archive/issue_comments_331650.json:
```json
{
    "body": "Changed branch from **[u/chapoton/22257v4](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v4)** to **[u/chapoton/22257v6](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v6)**",
    "created_at": "2017-04-06T07:25:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331650",
    "user": "https://github.com/fchapoton"
}
```

Changed branch from **[u/chapoton/22257v4](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v4)** to **[u/chapoton/22257v6](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v6)**



---

archive/issue_comments_331651.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">Comment 57</div>\n\nok, at least the patchbot is still green on linux.",
    "created_at": "2017-04-06T09:50:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331651",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:57" align="right">Comment 57</div>

ok, at least the patchbot is still green on linux.



---

archive/issue_comments_331652.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nOK, `u/chapoton/22257v6` passes the long tests in `src/sage/symbolic/expression.pyx`.\nAnd the following also looks sane:\n\n```\nsage: pi<pi\npi < pi\nsage: bool(pi<pi)\nFalse\nsage: bool(pi>pi)\nFalse\nsage: bool(pi==pi)\nTrue\n```",
    "created_at": "2017-04-06T21:32:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331652",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:58" align="right">Comment 58</div>

OK, `u/chapoton/22257v6` passes the long tests in `src/sage/symbolic/expression.pyx`.
And the following also looks sane:

```
sage: pi<pi
pi < pi
sage: bool(pi<pi)
False
sage: bool(pi>pi)
False
sage: bool(pi==pi)
True
```



---

archive/issue_comments_331653.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">Comment 59</div>\n\nok, then let me ask again for a review",
    "created_at": "2017-04-07T06:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331653",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:59" align="right">Comment 59</div>

ok, then let me ask again for a review



---

archive/issue_events_293590.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-04-07T06:36:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293590"
}
```



---

archive/issue_events_293591.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-04-07T06:36:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293591"
}
```



---

archive/issue_comments_331654.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nGreen bot on linux and should be ok also on macosx.\n\nThe only change compared to the previously \"positive-reviewed\" branch is the removal of the method `__lt__` in the class `Constant` inside the file `constants.py`. Some doctests have also been added in expressions.pyx.\n\nThis means that comparison with pi and similar constants will be handled (in a better way) by the general comparison of expressions.\n\nOnce again, this is currently the point where python3 compilation fails. And this is needed to go forward, with next step being 22297.\n\nPlease review!",
    "created_at": "2017-04-07T11:48:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331654",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:60" align="right">Comment 60</div>

Green bot on linux and should be ok also on macosx.

The only change compared to the previously "positive-reviewed" branch is the removal of the method `__lt__` in the class `Constant` inside the file `constants.py`. Some doctests have also been added in expressions.pyx.

This means that comparison with pi and similar constants will be handled (in a better way) by the general comparison of expressions.

Once again, this is currently the point where python3 compilation fails. And this is needed to go forward, with next step being 22297.

Please review!



---

archive/issue_comments_331655.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">Comment 61</div>\n\n**ping** ?",
    "created_at": "2017-04-09T06:30:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331655",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:61" align="right">Comment 61</div>

**ping** ?



---

archive/issue_comments_331656.json:
```json
{
    "body": "Changed reviewer from **Julian R\u00fcth** to **Julian R\u00fcth, Dima Pasechnik, Travis Scrimshaw**",
    "created_at": "2017-04-09T15:34:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331656",
    "user": "https://github.com/tscrim"
}
```

Changed reviewer from **Julian Rüth** to **Julian Rüth, Dima Pasechnik, Travis Scrimshaw**



---

archive/issue_comments_331657.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">Comment 62</div>\n\nI'm good sending this back to the buildbots.",
    "created_at": "2017-04-09T15:34:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331657",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:62" align="right">Comment 62</div>

I'm good sending this back to the buildbots.



---

archive/issue_events_293592.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-04-09T15:34:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293592"
}
```



---

archive/issue_events_293593.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-04-09T15:34:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293593"
}
```



---

archive/issue_events_293594.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-11T22:22:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293594"
}
```



---

archive/issue_events_293595.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c308ac70f63a45b88457e5fcba0c5666ef95e6e9",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-04-11T22:22:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22257#event-293595"
}
```



---

archive/issue_comments_331658.json:
```json
{
    "body": "Changed branch from **[u/chapoton/22257v6](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v6)** to **[cec557e](https://github.com/sagemath/sagetrac-mirror/commit/cec557e14b81b1e0b08c32eb77ac471ecbf9fb2b)**",
    "created_at": "2017-04-11T22:22:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22257",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22257#issuecomment-331658",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/22257v6](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/22257v6)** to **[cec557e](https://github.com/sagemath/sagetrac-mirror/commit/cec557e14b81b1e0b08c32eb77ac471ecbf9fb2b)**
