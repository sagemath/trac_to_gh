# Issue 22804: add orthogonal/orthonormal feature to affine_hull of polyhedra

archive/issues_022567.json:
```json
{
    "assignees": [],
    "body": "As mentioned in [#16045 comment:22](https://github.com/sagemath/sage/issues/16045#comment:22) it would be desirable to get the affine hull of a polyhderon, while preserving the polyhedron isometrically (instead of applying an affine transformation, that might distort lenght, volumes, angels, etc.). \n\nI propose to add an option \"algorithm\" for the `.affine_hull` method for polyhedra. \nThis can then be used to correctly calculate volume of non full-diemsional polyhedra, see #16045. \n\nCC:  @videlec\n\nKeywords: **polyhedron**\n\nBranch: **[`2ca1a84`](https://github.com/sagemath/sagetrac-mirror/commit/2ca1a84917a04649a6b7b252959087f1d7ab153a)**\n\nReviewer: **Matthias Koeppe, Vincent Delecroix**\n\nAuthor: **Moritz Firsching**\n\nComponent: **geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22804_\n\n",
    "closed_at": "2017-06-22T07:24:35Z",
    "created_at": "2017-04-13T11:49:47Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "add orthogonal/orthonormal feature to affine_hull of polyhedra",
    "type": "issue",
    "updated_at": "2017-06-26T19:55:33Z",
    "url": "https://github.com/sagemath/sage/issues/22804",
    "user": "https://github.com/mo271"
}
```
As mentioned in [#16045 comment:22](https://github.com/sagemath/sage/issues/16045#comment:22) it would be desirable to get the affine hull of a polyhderon, while preserving the polyhedron isometrically (instead of applying an affine transformation, that might distort lenght, volumes, angels, etc.). 

I propose to add an option "algorithm" for the `.affine_hull` method for polyhedra. 
This can then be used to correctly calculate volume of non full-diemsional polyhedra, see #16045. 

CC:  @videlec

Keywords: **polyhedron**

Branch: **[`2ca1a84`](https://github.com/sagemath/sagetrac-mirror/commit/2ca1a84917a04649a6b7b252959087f1d7ab153a)**

Reviewer: **Matthias Koeppe, Vincent Delecroix**

Author: **Moritz Firsching**

Component: **geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/22804_





---

archive/issue_events_315501.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-04-13T11:49:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22804#event-315501"
}
```



---

archive/issue_events_315502.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-04-13T11:49:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22804#event-315502"
}
```



---

archive/issue_events_315503.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-04-13T11:49:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22804#event-315503"
}
```



---

archive/issue_events_315504.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-04-13T11:49:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22804#event-315504"
}
```



---

archive/issue_comments_339791.json:
```json
{
    "body": "Branch: **[u/moritz/affine_hull](https://github.com/sagemath/sagetrac-mirror/tree/u/moritz/affine_hull)**",
    "created_at": "2017-04-13T11:51:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339791",
    "user": "https://github.com/mo271"
}
```

Branch: **[u/moritz/affine_hull](https://github.com/sagemath/sagetrac-mirror/tree/u/moritz/affine_hull)**



---

archive/issue_comments_339792.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nTwo quick comments\n\n1) The keyword `algorithm` is very misleading. \"Algorithm\" refers to a method to compute something not the result itself. Moreover, both constructions are projections. You should find something more coherent! And also describe in the documentation what is the result.\n\n2) I like better the more explicit\n\n```\nP.vertices()[0].vector() == P.ambient_space().zero()\n```\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91f239b980b90b9256a64d90b234622ba5e13b1e\"><code>91f239b</code></a></td><td><code>adding isometry feature to affine_hull</code></td></tr></table>\n",
    "created_at": "2017-04-14T16:19:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339792",
    "user": "https://github.com/videlec"
}
```

<div id="comment:2" align="right">comment:2</div>

Two quick comments

1) The keyword `algorithm` is very misleading. "Algorithm" refers to a method to compute something not the result itself. Moreover, both constructions are projections. You should find something more coherent! And also describe in the documentation what is the result.

2) I like better the more explicit

```
P.vertices()[0].vector() == P.ambient_space().zero()
```

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91f239b980b90b9256a64d90b234622ba5e13b1e"><code>91f239b</code></a></td><td><code>adding isometry feature to affine_hull</code></td></tr></table>




---

archive/issue_comments_339793.json:
```json
{
    "body": "Commit: **[`91f239b`](https://github.com/sagemath/sagetrac-mirror/commit/91f239b980b90b9256a64d90b234622ba5e13b1e)**",
    "created_at": "2017-04-14T16:19:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339793",
    "user": "https://github.com/videlec"
}
```

Commit: **[`91f239b`](https://github.com/sagemath/sagetrac-mirror/commit/91f239b980b90b9256a64d90b234622ba5e13b1e)**



---

archive/issue_comments_339794.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/43dd75996628161be4537af729291c412a2ea9cd\"><code>43dd759</code></a></td><td><code>change name of parameter to 'force_isometry'</code></td></tr></table>\n",
    "created_at": "2017-04-14T20:26:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339794",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/43dd75996628161be4537af729291c412a2ea9cd"><code>43dd759</code></a></td><td><code>change name of parameter to 'force_isometry'</code></td></tr></table>




---

archive/issue_comments_339795.json:
```json
{
    "body": "Changed commit from **[`91f239b`](https://github.com/sagemath/sagetrac-mirror/commit/91f239b980b90b9256a64d90b234622ba5e13b1e)** to **[`43dd759`](https://github.com/sagemath/sagetrac-mirror/commit/43dd75996628161be4537af729291c412a2ea9cd)**",
    "created_at": "2017-04-14T20:26:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339795",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`91f239b`](https://github.com/sagemath/sagetrac-mirror/commit/91f239b980b90b9256a64d90b234622ba5e13b1e)** to **[`43dd759`](https://github.com/sagemath/sagetrac-mirror/commit/43dd75996628161be4537af729291c412a2ea9cd)**



---

archive/issue_comments_339796.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThanks for your comments, Vincent! I hope the new commit addresses all the proposed changes.\n\nI was not quite happy with the choice of \"algorithm\" for a name of the parameter. Now I named the parameter \"force_isometry\".",
    "created_at": "2017-04-14T20:31:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339796",
    "user": "https://github.com/mo271"
}
```

<div id="comment:4" align="right">comment:4</div>

Thanks for your comments, Vincent! I hope the new commit addresses all the proposed changes.

I was not quite happy with the choice of "algorithm" for a name of the parameter. Now I named the parameter "force_isometry".



---

archive/issue_comments_339797.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI don't understand why this step\n\n```\n    #if the self is full-dimensional, return it immediately\n    if self.ambient_dim() == self.dim():\n        return self\n```\nis inside the `if force_isometry`.",
    "created_at": "2017-04-15T16:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339797",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

I don't understand why this step

```
    #if the self is full-dimensional, return it immediately
    if self.ambient_dim() == self.dim():
        return self
```
is inside the `if force_isometry`.



---

archive/issue_comments_339798.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@videlec](#comment:5):\n> I don't understand why this step\n> \n> ```\n>     #if the self is full-dimensional, return it immediately\n>     if self.ambient_dim() == self.dim():\n>         return self\n> ```\n> is inside the `if force_isometry`.\n\nThe intent was not to disturb the original method too much. \n\nHoweer , I will gladly move it above the `if force_isometry`. (I don't know why the old method didn't include this check..)",
    "created_at": "2017-04-15T16:14:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339798",
    "user": "https://github.com/mo271"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@videlec](#comment:5):
> I don't understand why this step
> 
> ```
>     #if the self is full-dimensional, return it immediately
>     if self.ambient_dim() == self.dim():
>         return self
> ```
> is inside the `if force_isometry`.

The intent was not to disturb the original method too much. 

Howeer , I will gladly move it above the `if force_isometry`. (I don't know why the old method didn't include this check..)



---

archive/issue_comments_339799.json:
```json
{
    "body": "Changed commit from **[`43dd759`](https://github.com/sagemath/sagetrac-mirror/commit/43dd75996628161be4537af729291c412a2ea9cd)** to **[`7afd9aa`](https://github.com/sagemath/sagetrac-mirror/commit/7afd9aa602f15040f1f21142593097d8b6bd2631)**",
    "created_at": "2017-04-17T14:46:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339799",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`43dd759`](https://github.com/sagemath/sagetrac-mirror/commit/43dd75996628161be4537af729291c412a2ea9cd)** to **[`7afd9aa`](https://github.com/sagemath/sagetrac-mirror/commit/7afd9aa602f15040f1f21142593097d8b6bd2631)**



---

archive/issue_comments_339800.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7afd9aa602f15040f1f21142593097d8b6bd2631\"><code>7afd9aa</code></a></td><td><code>move dimenion check to top of method</code></td></tr></table>\n",
    "created_at": "2017-04-17T14:46:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339800",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7afd9aa602f15040f1f21142593097d8b6bd2631"><code>7afd9aa</code></a></td><td><code>move dimenion check to top of method</code></td></tr></table>




---

archive/issue_comments_339801.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThis looks like a nice interface, but let me just say that for volume computations it's overkill to compute this (which will lead to a double description computation in the slow \"field\" backend), when all one needs is to compute a scaling factor for the volume...\n\nAnother comment: I don't think this is a suitable test:\n\n```\nif self.base_ring() in [ZZ,QQ]\n```\nbecause you could as well have some number field that is too small.\n\n```\nsage: D = polytopes.dodecahedron()\nsage: F = D.faces(2)[0].as_polyhedron()\nsage: F.affine_hull(force_isometry=True)\nTypeError: QR decomposition unable to compute square roots in Number Field in sqrt5 with defining polynomial x^2 - 5\n```",
    "created_at": "2017-04-17T19:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339801",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

This looks like a nice interface, but let me just say that for volume computations it's overkill to compute this (which will lead to a double description computation in the slow "field" backend), when all one needs is to compute a scaling factor for the volume...

Another comment: I don't think this is a suitable test:

```
if self.base_ring() in [ZZ,QQ]
```
because you could as well have some number field that is too small.

```
sage: D = polytopes.dodecahedron()
sage: F = D.faces(2)[0].as_polyhedron()
sage: F.affine_hull(force_isometry=True)
TypeError: QR decomposition unable to compute square roots in Number Field in sqrt5 with defining polynomial x^2 - 5
```



---

archive/issue_comments_339802.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI agree that for volume computations, this is an overkill. (see more on that below)\n\nFor other purposes it might still be useful to have. At the moment, it is not possible it is cumbersome to plot a regular tetrahedron, which looks like a regular tetrahedron. With this feature this is really easy. (Same for other polytopes that are most easily defined as non full-dimensional polytopes. \nTherefore I would like to keep this new feature.\n\nI propose to add two new ways to obtain the affine hull: \n\n- `orthonormal`, which should be simply what has been called isometry above\n- `orthogonal`, a scaled version, that uses `gram_schmitt`. From that the scaling factor can be obtained.\n\nNow I wonder where to store or return the scaling factor. \n\nWould the following be a reasonable way to do it:\nhave a method like\n\n```\ndef affine_hull(self, mode= \"default\", return_scaling_factor=False)\n```\n\nHere `mode` can take values `\"default\"`, `\"orthogonal\"`, `\"orthonormal\"`.\nIf `return_scaling_factor` is True, then instead of returning simply the polyhedron, return a pair (polyhedron, scaling factor).\n\n\nI am not quite happy with the names \"`mode`\" and `\"return_scaling_factor\"`, I am sure we can find better alternatives.\n\n\nWhat do you think?",
    "created_at": "2017-04-27T17:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339802",
    "user": "https://github.com/mo271"
}
```

<div id="comment:9" align="right">comment:9</div>

I agree that for volume computations, this is an overkill. (see more on that below)

For other purposes it might still be useful to have. At the moment, it is not possible it is cumbersome to plot a regular tetrahedron, which looks like a regular tetrahedron. With this feature this is really easy. (Same for other polytopes that are most easily defined as non full-dimensional polytopes. 
Therefore I would like to keep this new feature.

I propose to add two new ways to obtain the affine hull: 

- `orthonormal`, which should be simply what has been called isometry above
- `orthogonal`, a scaled version, that uses `gram_schmitt`. From that the scaling factor can be obtained.

Now I wonder where to store or return the scaling factor. 

Would the following be a reasonable way to do it:
have a method like

```
def affine_hull(self, mode= "default", return_scaling_factor=False)
```

Here `mode` can take values `"default"`, `"orthogonal"`, `"orthonormal"`.
If `return_scaling_factor` is True, then instead of returning simply the polyhedron, return a pair (polyhedron, scaling factor).


I am not quite happy with the names "`mode`" and `"return_scaling_factor"`, I am sure we can find better alternatives.


What do you think?



---

archive/issue_comments_339803.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHow about returning the map that sends the result back to the space, instead of returning the factor? Then document how the volume transforms, with an example.\n\nInstead of `mode`, I guess one could just use two boolean keyword parameters.",
    "created_at": "2017-04-27T19:14:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339803",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

How about returning the map that sends the result back to the space, instead of returning the factor? Then document how the volume transforms, with an example.

Instead of `mode`, I guess one could just use two boolean keyword parameters.



---

archive/issue_comments_339804.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9425eb64f1097071e814a7345105c59b2921d9f\"><code>c9425eb</code></a></td><td><code>adding isometry feature to affine_hull</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d23a22ffa20fb1a80eae3dd4063da1a6a97173c\"><code>8d23a22</code></a></td><td><code>change name of parameter to 'force_isometry'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83e52777e90d5c4e77ccf217a4cb4d8d0fcd0edf\"><code>83e5277</code></a></td><td><code>move dimension check to top of method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a7e3a0bb91fb07e1ffec358b72fc269fa4d24c19\"><code>a7e3a0b</code></a></td><td><code>introduce parameter 'orthogonal', 'orthonormal' and 'as_affine_map'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0cac6bf64b6e4acd8deba536fcf993c433d5968\"><code>f0cac6b</code></a></td><td><code>typos and one more doctest</code></td></tr></table>\n",
    "created_at": "2017-05-08T19:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339804",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9425eb64f1097071e814a7345105c59b2921d9f"><code>c9425eb</code></a></td><td><code>adding isometry feature to affine_hull</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d23a22ffa20fb1a80eae3dd4063da1a6a97173c"><code>8d23a22</code></a></td><td><code>change name of parameter to 'force_isometry'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83e52777e90d5c4e77ccf217a4cb4d8d0fcd0edf"><code>83e5277</code></a></td><td><code>move dimension check to top of method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a7e3a0bb91fb07e1ffec358b72fc269fa4d24c19"><code>a7e3a0b</code></a></td><td><code>introduce parameter 'orthogonal', 'orthonormal' and 'as_affine_map'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0cac6bf64b6e4acd8deba536fcf993c433d5968"><code>f0cac6b</code></a></td><td><code>typos and one more doctest</code></td></tr></table>




---

archive/issue_comments_339805.json:
```json
{
    "body": "Changed commit from **[`7afd9aa`](https://github.com/sagemath/sagetrac-mirror/commit/7afd9aa602f15040f1f21142593097d8b6bd2631)** to **[`f0cac6b`](https://github.com/sagemath/sagetrac-mirror/commit/f0cac6bf64b6e4acd8deba536fcf993c433d5968)**",
    "created_at": "2017-05-08T19:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339805",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7afd9aa`](https://github.com/sagemath/sagetrac-mirror/commit/7afd9aa602f15040f1f21142593097d8b6bd2631)** to **[`f0cac6b`](https://github.com/sagemath/sagetrac-mirror/commit/f0cac6bf64b6e4acd8deba536fcf993c433d5968)**



---

archive/issue_comments_339806.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThank you very much for your quick reply, mkoeppe!\n\nI have now indeed introduced two booleans, `orthogonal` and `orthonormal`. \"Returning the map\" means in this case returning an affine map, I guess. I went ahead and return now a \"linear_transformation\" together with a vector. I guess there is some support of affine groups, but I am not sure if this should be used instead: http://doc.sagemath.org/html/en/reference/groups/sage/groups/affine_gps/group_element.html.\n\nIn any case, the method is all set to use it with the volume computations now. \n\n\nAs a side effect, a user will know be able to plot nice 3d-plots of the regular Tetrahedron as well as the Permutahedron. (Once this ticket gets a positive review, I suggest to alter the plot routine to enforce an orthonormal transformation by default)",
    "created_at": "2017-05-08T19:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339806",
    "user": "https://github.com/mo271"
}
```

<div id="comment:12" align="right">comment:12</div>

Thank you very much for your quick reply, mkoeppe!

I have now indeed introduced two booleans, `orthogonal` and `orthonormal`. "Returning the map" means in this case returning an affine map, I guess. I went ahead and return now a "linear_transformation" together with a vector. I guess there is some support of affine groups, but I am not sure if this should be used instead: http://doc.sagemath.org/html/en/reference/groups/sage/groups/affine_gps/group_element.html.

In any case, the method is all set to use it with the volume computations now. 


As a side effect, a user will know be able to plot nice 3d-plots of the regular Tetrahedron as well as the Permutahedron. (Once this ticket gets a positive review, I suggest to alter the plot routine to enforce an orthonormal transformation by default)



---

archive/issue_events_315505.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-05-08T19:24:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22804#event-315505"
}
```



---

archive/issue_events_315506.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-05-08T19:34:54Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "title_is": "add orthogonal/orthonormal feature to affine_hull of polyhedra",
    "title_was": "add isometry feature to affine_hull of polyhedra",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22804#event-315506"
}
```



---

archive/issue_comments_339807.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n- `a orthogonal` -> `an orthogonal`\n- `a orthonormal` -> `an orthonormal`\n- `orhtonormal` -> `orthonormal`\n- I think that the fact that `orthonormal=True`/`orthogonal=True` will silently modify the base ring should be mentioned in the INPUT. One also might actually want to prevent this kind of behavior. What about an additional boolean keyword `extend` that would be inserted as follows in the code\n\n```\ntry:\n    A = M.gram_schmidt(orthonormal=orthonormal)[0]\nexcept TypeError:\n+    if not extend:\n+        raise\n    M = matrix(AA, M)\n    A = M.gram_schmidt(orthonormal=orthonormal)[0]\n```\n- you should test this with polyhedron over embedded number fields like `sage: K.<sqrt3> = QuadraticField(3)`",
    "created_at": "2017-05-22T18:23:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339807",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">comment:15</div>

- `a orthogonal` -> `an orthogonal`
- `a orthonormal` -> `an orthonormal`
- `orhtonormal` -> `orthonormal`
- I think that the fact that `orthonormal=True`/`orthogonal=True` will silently modify the base ring should be mentioned in the INPUT. One also might actually want to prevent this kind of behavior. What about an additional boolean keyword `extend` that would be inserted as follows in the code

```
try:
    A = M.gram_schmidt(orthonormal=orthonormal)[0]
except TypeError:
+    if not extend:
+        raise
    M = matrix(AA, M)
    A = M.gram_schmidt(orthonormal=orthonormal)[0]
```
- you should test this with polyhedron over embedded number fields like `sage: K.<sqrt3> = QuadraticField(3)`



---

archive/issue_comments_339808.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6304fef77268d548845aa8fdbfef7c0f538d7083\"><code>6304fef</code></a></td><td><code>adding isometry feature to affine_hull</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8638fed69e618a828d5c21cbcd0c5202d776dd9\"><code>c8638fe</code></a></td><td><code>change name of parameter to 'force_isometry'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e6c68b27bd068512065ece76f216f7e93a2a851\"><code>6e6c68b</code></a></td><td><code>move dimension check to top of method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bef4cf98d7278f20e4886fff0a253109d0f3b05a\"><code>bef4cf9</code></a></td><td><code>introduce parameter 'orthogonal', 'orthonormal' and 'as_affine_map'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/caa089b46264b9a27dd8e92e12a19e4616c45b5c\"><code>caa089b</code></a></td><td><code>typos and one more doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ded4ac615ad364b4e90a7faf8793d3d956dc72f6\"><code>ded4ac6</code></a></td><td><code>added base_extend parameter, plus a few typos</code></td></tr></table>\n",
    "created_at": "2017-05-24T09:27:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339808",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6304fef77268d548845aa8fdbfef7c0f538d7083"><code>6304fef</code></a></td><td><code>adding isometry feature to affine_hull</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8638fed69e618a828d5c21cbcd0c5202d776dd9"><code>c8638fe</code></a></td><td><code>change name of parameter to 'force_isometry'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e6c68b27bd068512065ece76f216f7e93a2a851"><code>6e6c68b</code></a></td><td><code>move dimension check to top of method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bef4cf98d7278f20e4886fff0a253109d0f3b05a"><code>bef4cf9</code></a></td><td><code>introduce parameter 'orthogonal', 'orthonormal' and 'as_affine_map'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/caa089b46264b9a27dd8e92e12a19e4616c45b5c"><code>caa089b</code></a></td><td><code>typos and one more doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ded4ac615ad364b4e90a7faf8793d3d956dc72f6"><code>ded4ac6</code></a></td><td><code>added base_extend parameter, plus a few typos</code></td></tr></table>




---

archive/issue_comments_339809.json:
```json
{
    "body": "Changed commit from **[`f0cac6b`](https://github.com/sagemath/sagetrac-mirror/commit/f0cac6bf64b6e4acd8deba536fcf993c433d5968)** to **[`ded4ac6`](https://github.com/sagemath/sagetrac-mirror/commit/ded4ac615ad364b4e90a7faf8793d3d956dc72f6)**",
    "created_at": "2017-05-24T09:27:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339809",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f0cac6b`](https://github.com/sagemath/sagetrac-mirror/commit/f0cac6bf64b6e4acd8deba536fcf993c433d5968)** to **[`ded4ac6`](https://github.com/sagemath/sagetrac-mirror/commit/ded4ac615ad364b4e90a7faf8793d3d956dc72f6)**



---

archive/issue_comments_339810.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThank you Vincent for the comments! I have implemented all of them. I called the parameter `base_extend` instead of `extend`. \n\nAlso its rebased on the current beta.",
    "created_at": "2017-05-24T09:29:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339810",
    "user": "https://github.com/mo271"
}
```

<div id="comment:17" align="right">comment:17</div>

Thank you Vincent for the comments! I have implemented all of them. I called the parameter `base_extend` instead of `extend`. 

Also its rebased on the current beta.



---

archive/issue_comments_339811.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nPlease change to `extend`. It is what is mostly used in Sage\n\n```\nsage: V=QQ^2\nsage: H=V.endomorphism_ring()([[0,-1],[1,0]])\nsage: H.eigenvalues()\n[-1*I, 1*I]\nsage: H.eigenvalues(extend=False)\n[]\n```\nOr\n\n```\nsage: 3.sqrt()\nsqrt(3)\nsage: 3.sqrt(extend=False)\nTraceback (most recent call last)\n...\nValueError: square root of 3 not an integer\n```\nIf you want to change conventions, that is the purpose of another ticket.",
    "created_at": "2017-05-24T09:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339811",
    "user": "https://github.com/videlec"
}
```

<div id="comment:18" align="right">comment:18</div>

Please change to `extend`. It is what is mostly used in Sage

```
sage: V=QQ^2
sage: H=V.endomorphism_ring()([[0,-1],[1,0]])
sage: H.eigenvalues()
[-1*I, 1*I]
sage: H.eigenvalues(extend=False)
[]
```
Or

```
sage: 3.sqrt()
sqrt(3)
sage: 3.sqrt(extend=False)
Traceback (most recent call last)
...
ValueError: square root of 3 not an integer
```
If you want to change conventions, that is the purpose of another ticket.



---

archive/issue_comments_339812.json:
```json
{
    "body": "Changed commit from **[`ded4ac6`](https://github.com/sagemath/sagetrac-mirror/commit/ded4ac615ad364b4e90a7faf8793d3d956dc72f6)** to **[`87c86b5`](https://github.com/sagemath/sagetrac-mirror/commit/87c86b5df233e6e04e2371a4c259d9ba182ccf38)**",
    "created_at": "2017-05-24T09:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339812",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ded4ac6`](https://github.com/sagemath/sagetrac-mirror/commit/ded4ac615ad364b4e90a7faf8793d3d956dc72f6)** to **[`87c86b5`](https://github.com/sagemath/sagetrac-mirror/commit/87c86b5df233e6e04e2371a4c259d9ba182ccf38)**



---

archive/issue_comments_339813.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87c86b5df233e6e04e2371a4c259d9ba182ccf38\"><code>87c86b5</code></a></td><td><code>changed 'base_extend' to 'extend'</code></td></tr></table>\n",
    "created_at": "2017-05-24T09:57:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339813",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87c86b5df233e6e04e2371a4c259d9ba182ccf38"><code>87c86b5</code></a></td><td><code>changed 'base_extend' to 'extend'</code></td></tr></table>




---

archive/issue_comments_339814.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@videlec](#comment:18):\n> Please change to `extend`. It is what is mostly used in Sage\n\n done; I didn't mean to alter the conventions.",
    "created_at": "2017-05-24T09:58:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339814",
    "user": "https://github.com/mo271"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@videlec](#comment:18):
> Please change to `extend`. It is what is mostly used in Sage

 done; I didn't mean to alter the conventions.



---

archive/issue_comments_339815.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nCould you update the `NOTE` as the base ring can not be changed by default. Or it can still be the case the base ring changes silently?",
    "created_at": "2017-06-01T18:51:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339815",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">comment:21</div>

Could you update the `NOTE` as the base ring can not be changed by default. Or it can still be the case the base ring changes silently?



---

archive/issue_comments_339816.json:
```json
{
    "body": "Changed commit from **[`87c86b5`](https://github.com/sagemath/sagetrac-mirror/commit/87c86b5df233e6e04e2371a4c259d9ba182ccf38)** to **[`2ca1a84`](https://github.com/sagemath/sagetrac-mirror/commit/2ca1a84917a04649a6b7b252959087f1d7ab153a)**",
    "created_at": "2017-06-02T08:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339816",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`87c86b5`](https://github.com/sagemath/sagetrac-mirror/commit/87c86b5df233e6e04e2371a4c259d9ba182ccf38)** to **[`2ca1a84`](https://github.com/sagemath/sagetrac-mirror/commit/2ca1a84917a04649a6b7b252959087f1d7ab153a)**



---

archive/issue_comments_339817.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0aaab2bab26aabd61a166fbef7c33e28a5b15eaa\"><code>0aaab2b</code></a></td><td><code>adding isometry feature to affine_hull</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17ac7c35c8bd5adb9cdb9b0118fba8531586833b\"><code>17ac7c3</code></a></td><td><code>change name of parameter to 'force_isometry'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/777ce7e426335ac430c8c975e3619fc4ccff3e66\"><code>777ce7e</code></a></td><td><code>move dimension check to top of method</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/836be616114b3aa8451b596a44ce107c437a2219\"><code>836be61</code></a></td><td><code>introduce parameter 'orthogonal', 'orthonormal' and 'as_affine_map'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1679534449f5da7eb25273e7b2dbb9d7505c6183\"><code>1679534</code></a></td><td><code>typos and one more doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f64046354a64ea1307f26640c4f6310fb98283f\"><code>1f64046</code></a></td><td><code>added base_extend parameter, plus a few typos</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee003eb4e27d401e6a6ab8000a40a030a18490a3\"><code>ee003eb</code></a></td><td><code>changed 'base_extend' to 'extend'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ca1a84917a04649a6b7b252959087f1d7ab153a\"><code>2ca1a84</code></a></td><td><code>removed NOTE and made sure base ring stays fixed</code></td></tr></table>\n",
    "created_at": "2017-06-02T08:45:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339817",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0aaab2bab26aabd61a166fbef7c33e28a5b15eaa"><code>0aaab2b</code></a></td><td><code>adding isometry feature to affine_hull</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17ac7c35c8bd5adb9cdb9b0118fba8531586833b"><code>17ac7c3</code></a></td><td><code>change name of parameter to 'force_isometry'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/777ce7e426335ac430c8c975e3619fc4ccff3e66"><code>777ce7e</code></a></td><td><code>move dimension check to top of method</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/836be616114b3aa8451b596a44ce107c437a2219"><code>836be61</code></a></td><td><code>introduce parameter 'orthogonal', 'orthonormal' and 'as_affine_map'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1679534449f5da7eb25273e7b2dbb9d7505c6183"><code>1679534</code></a></td><td><code>typos and one more doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f64046354a64ea1307f26640c4f6310fb98283f"><code>1f64046</code></a></td><td><code>added base_extend parameter, plus a few typos</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee003eb4e27d401e6a6ab8000a40a030a18490a3"><code>ee003eb</code></a></td><td><code>changed 'base_extend' to 'extend'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ca1a84917a04649a6b7b252959087f1d7ab153a"><code>2ca1a84</code></a></td><td><code>removed NOTE and made sure base ring stays fixed</code></td></tr></table>




---

archive/issue_comments_339818.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThanks again, for looking at the ticket, Vincent!\n\nI have now updated the code to make sure that the base ring is never changed (and removed the note).\n\nBefore that it was never extended, but sometimes \"simplified\", i.e. restricted to a smaller base ring, if you were lucky. See the following example:\n\n```\nsage: K.<sqrt2> = QuadraticField(2)\nsage: sage: P = Polyhedron([2*[K.zero()],2*[sqrt2]]); P\nA 1-dimensional polyhedron in (Number Field in sqrt2 with defining polynomial x^2 - 2)^2 defined as the convex hull of 2 vertices\nsage: P.vertices()\n(A vertex at (0, 0), A vertex at (sqrt2, sqrt2))\n```\n\npreviously we had:\n\n\n```\nA = P.affine_hull(orthonormal=True); A\nA 1-dimensional polyhedron in ZZ^1 defined as the convex hull of 2 vertices\nsage: A.vertices()\n(A vertex at (0), A vertex at (2))\n```\n\nSo the base_ring was changed from `K` to `ZZ`.\n\nNow I changed this to:\n\n```\nsage: A = P.affine_hull(orthonormal=True); A\nA 1-dimensional polyhedron in (Number Field in sqrt2 with defining polynomial x^2 - 2)^1 defined as the convex hull of 2 vertices\nsage: A.vertices()\n(A vertex at (0), A vertex at (2))\n```\n\nalso, I rebased on the current beta...\n\n\nI think there are advantages to both, simplifying the base ring and also to keeping it.\nIt could also be controlled by the `extend` parameter, but the name doesn't quite capture what is going on.\nBut in general I don't think this should be done here, but there should be a general method, which tries to find the smallest base ring possible. (This might be usefull for demoting rational polytopes to integer ones, but also from AA to some smaller field.)",
    "created_at": "2017-06-02T08:49:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339818",
    "user": "https://github.com/mo271"
}
```

<div id="comment:23" align="right">comment:23</div>

Thanks again, for looking at the ticket, Vincent!

I have now updated the code to make sure that the base ring is never changed (and removed the note).

Before that it was never extended, but sometimes "simplified", i.e. restricted to a smaller base ring, if you were lucky. See the following example:

```
sage: K.<sqrt2> = QuadraticField(2)
sage: sage: P = Polyhedron([2*[K.zero()],2*[sqrt2]]); P
A 1-dimensional polyhedron in (Number Field in sqrt2 with defining polynomial x^2 - 2)^2 defined as the convex hull of 2 vertices
sage: P.vertices()
(A vertex at (0, 0), A vertex at (sqrt2, sqrt2))
```

previously we had:


```
A = P.affine_hull(orthonormal=True); A
A 1-dimensional polyhedron in ZZ^1 defined as the convex hull of 2 vertices
sage: A.vertices()
(A vertex at (0), A vertex at (2))
```

So the base_ring was changed from `K` to `ZZ`.

Now I changed this to:

```
sage: A = P.affine_hull(orthonormal=True); A
A 1-dimensional polyhedron in (Number Field in sqrt2 with defining polynomial x^2 - 2)^1 defined as the convex hull of 2 vertices
sage: A.vertices()
(A vertex at (0), A vertex at (2))
```

also, I rebased on the current beta...


I think there are advantages to both, simplifying the base ring and also to keeping it.
It could also be controlled by the `extend` parameter, but the name doesn't quite capture what is going on.
But in general I don't think this should be done here, but there should be a general method, which tries to find the smallest base ring possible. (This might be usefull for demoting rational polytopes to integer ones, but also from AA to some smaller field.)



---

archive/issue_comments_339819.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI feel it is good enough. I just launched the patchbot to see how it goes.\n\nConcerning ring/field simplification there should be something at the level of fields. Such method would also be useful on matrices for example.",
    "created_at": "2017-06-03T15:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339819",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">comment:24</div>

I feel it is good enough. I just launched the patchbot to see how it goes.

Concerning ring/field simplification there should be something at the level of fields. Such method would also be useful on matrices for example.



---

archive/issue_comments_339820.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe, Vincent Delecroix**",
    "created_at": "2017-06-03T15:47:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339820",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Matthias Koeppe, Vincent Delecroix**



---

archive/issue_comments_339821.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI think that the ticket is good enough (and patchbot is happy)",
    "created_at": "2017-06-18T20:45:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339821",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">comment:25</div>

I think that the ticket is good enough (and patchbot is happy)



---

archive/issue_events_315507.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-06-18T20:45:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22804#event-315507"
}
```



---

archive/issue_events_315508.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-06-18T20:45:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22804#event-315508"
}
```



---

archive/issue_events_315509.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-22T07:24:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22804#event-315509"
}
```



---

archive/issue_events_315510.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "4eb4c182bb3abd48d3969734b1fa64d58aa659fe",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-06-22T07:24:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22804#event-315510"
}
```



---

archive/issue_comments_339822.json:
```json
{
    "body": "Changed branch from **[u/moritz/affine_hull](https://github.com/sagemath/sagetrac-mirror/tree/u/moritz/affine_hull)** to **[`2ca1a84`](https://github.com/sagemath/sagetrac-mirror/commit/2ca1a84917a04649a6b7b252959087f1d7ab153a)**",
    "created_at": "2017-06-22T07:24:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339822",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/moritz/affine_hull](https://github.com/sagemath/sagetrac-mirror/tree/u/moritz/affine_hull)** to **[`2ca1a84`](https://github.com/sagemath/sagetrac-mirror/commit/2ca1a84917a04649a6b7b252959087f1d7ab153a)**



---

archive/issue_comments_339823.json:
```json
{
    "body": "Changed commit from **[`2ca1a84`](https://github.com/sagemath/sagetrac-mirror/commit/2ca1a84917a04649a6b7b252959087f1d7ab153a)** to none",
    "created_at": "2017-06-26T19:55:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339823",
    "user": "https://github.com/mo271"
}
```

Changed commit from **[`2ca1a84`](https://github.com/sagemath/sagetrac-mirror/commit/2ca1a84917a04649a6b7b252959087f1d7ab153a)** to none



---

archive/issue_comments_339824.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThanks for the review, Vincent! I will continue to work on #16045.",
    "created_at": "2017-06-26T19:55:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22804",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22804#issuecomment-339824",
    "user": "https://github.com/mo271"
}
```

<div id="comment:27" align="right">comment:27</div>

Thanks for the review, Vincent! I will continue to work on #16045.
