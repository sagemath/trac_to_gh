# Issue 22325: Replace all pexpect-maxima calls in function/orthogonal-polys

archive/issues_022088.json:
```json
{
    "body": "Now that some functionality of specific orthogonal polys is handled by other than pexpect calls (?, see #17753) let's replace the unneeded calls completely.\n\nThere seems to be no reason to preserve the functionality `func._maxima_init_evaled_(args)` because the same can be had with `maxima(func(args, hold=True))` which is also intuitive.\n\nThe ticket will also remove pexpect calls from `OrthogonalPoly`.\n\nBranch/Commit: 7a9eb46bf332b5894b27a68541e89b4616b17d8f\n\nReviewer: Travis Scrimshaw\n\nAuthor: Ralf Stephan\n\nDependencies: #22326, #22174\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22325\n\n",
    "closed_at": "2017-02-12T22:09:03Z",
    "created_at": "2017-02-08T07:31:13Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Replace all pexpect-maxima calls in function/orthogonal-polys",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22325",
    "user": "https://github.com/rwst"
}
```
Now that some functionality of specific orthogonal polys is handled by other than pexpect calls (?, see #17753) let's replace the unneeded calls completely.

There seems to be no reason to preserve the functionality `func._maxima_init_evaled_(args)` because the same can be had with `maxima(func(args, hold=True))` which is also intuitive.

The ticket will also remove pexpect calls from `OrthogonalPoly`.

Branch/Commit: 7a9eb46bf332b5894b27a68541e89b4616b17d8f

Reviewer: Travis Scrimshaw

Author: Ralf Stephan

Dependencies: #22326, #22174

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22325





---

archive/issue_comments_326570.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n-Now that all functionality of specific orthogonal polys is handled by other than pexpect calls (?, see #17753) let's replace the unneeded calls completely.\n+Now that some functionality of specific orthogonal polys is handled by other than pexpect calls (?, see #17753) let's replace the unneeded calls completely.\n+\n+There seems to be no reason to preserve the functionality `func._maxima_init_evaled_(args)` because the same can be had with `maxima(func(args, hold=True))` which is also intuitive. This means the ABC `OrthogonalPoly` can be discarded completely.\n \n Comment: 1\n \n``````\n",
    "created_at": "2017-02-08T08:13:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22325#issuecomment-326570",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
-Now that all functionality of specific orthogonal polys is handled by other than pexpect calls (?, see #17753) let's replace the unneeded calls completely.
+Now that some functionality of specific orthogonal polys is handled by other than pexpect calls (?, see #17753) let's replace the unneeded calls completely.
+
+There seems to be no reason to preserve the functionality `func._maxima_init_evaled_(args)` because the same can be had with `maxima(func(args, hold=True))` which is also intuitive. This means the ABC `OrthogonalPoly` can be discarded completely.
 
 Comment: 1
 
``````




---

archive/issue_comments_326571.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,17 @@\n+Now that some functionality of specific orthogonal polys is handled by other than pexpect calls (?, see #17753) let's replace the unneeded calls completely.\n \n+There seems to be no reason to preserve the functionality `func._maxima_init_evaled_(args)` because the same can be had with `maxima(func(args, hold=True))` which is also intuitive. This means the ABC `OrthogonalPoly` can be discarded completely.\n+\n+This shifts the responsibility to the Maxima interface however because neither pexpect-maxima nor maxima-lib can handle the functions `chebyshev_U`, `chebyshev_T`, `laguerre`, and `gen_laguerre`, presumably without loading `orthopolys`:\n+\n+```\n+sage: maxima(gen_laguerre(1,2,x, hold=True))\n+None\n+sage: gen_laguerre(1,2,x, hold=True)._maxima_()\n+None\n+```\n+\n+This means this ticket depends on one implementing these functions in one of the interfaces.\n \n Comment: 1\n \n``````\n",
    "created_at": "2017-02-08T08:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22325#issuecomment-326571",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,17 @@
+Now that some functionality of specific orthogonal polys is handled by other than pexpect calls (?, see #17753) let's replace the unneeded calls completely.
 
+There seems to be no reason to preserve the functionality `func._maxima_init_evaled_(args)` because the same can be had with `maxima(func(args, hold=True))` which is also intuitive. This means the ABC `OrthogonalPoly` can be discarded completely.
+
+This shifts the responsibility to the Maxima interface however because neither pexpect-maxima nor maxima-lib can handle the functions `chebyshev_U`, `chebyshev_T`, `laguerre`, and `gen_laguerre`, presumably without loading `orthopolys`:
+
+```
+sage: maxima(gen_laguerre(1,2,x, hold=True))
+None
+sage: gen_laguerre(1,2,x, hold=True)._maxima_()
+None
+```
+
+This means this ticket depends on one implementing these functions in one of the interfaces.
 
 Comment: 1
 
``````




---

archive/issue_comments_326572.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,17 @@\n+Now that some functionality of specific orthogonal polys is handled by other than pexpect calls (?, see #17753) let's replace the unneeded calls completely.\n \n+There seems to be no reason to preserve the functionality `func._maxima_init_evaled_(args)` because the same can be had with `maxima(func(args, hold=True))` which is also intuitive.\n+\n+This shifts the responsibility to the Maxima interface however because neither pexpect-maxima nor maxima-lib can handle the functions `chebyshev_U`, `chebyshev_T`, `laguerre`, and `gen_laguerre`, presumably without loading `orthopolys`:\n+\n+```\n+sage: maxima(gen_laguerre(1,2,x, hold=True))\n+None\n+sage: gen_laguerre(1,2,x, hold=True)._maxima_()\n+None\n+```\n+\n+This means this ticket depends on one implementing these functions in one of the interfaces (#22327), in order to make the conversion doctests work. The ticket will also remove pexpect calls from `OrthogonalPoly`.\n \n Comment: 1\n \n``````\n",
    "created_at": "2017-02-08T09:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22325#issuecomment-326572",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,17 @@
+Now that some functionality of specific orthogonal polys is handled by other than pexpect calls (?, see #17753) let's replace the unneeded calls completely.
 
+There seems to be no reason to preserve the functionality `func._maxima_init_evaled_(args)` because the same can be had with `maxima(func(args, hold=True))` which is also intuitive.
+
+This shifts the responsibility to the Maxima interface however because neither pexpect-maxima nor maxima-lib can handle the functions `chebyshev_U`, `chebyshev_T`, `laguerre`, and `gen_laguerre`, presumably without loading `orthopolys`:
+
+```
+sage: maxima(gen_laguerre(1,2,x, hold=True))
+None
+sage: gen_laguerre(1,2,x, hold=True)._maxima_()
+None
+```
+
+This means this ticket depends on one implementing these functions in one of the interfaces (#22327), in order to make the conversion doctests work. The ticket will also remove pexpect calls from `OrthogonalPoly`.
 
 Comment: 1
 
``````




---

archive/issue_comments_326573.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+Now that some functionality of specific orthogonal polys is handled by other than pexpect calls (?, see #17753) let's replace the unneeded calls completely.\n \n+There seems to be no reason to preserve the functionality `func._maxima_init_evaled_(args)` because the same can be had with `maxima(func(args, hold=True))` which is also intuitive.\n+\n+The ticket will also remove pexpect calls from `OrthogonalPoly`.\n \n Comment: 1\n \n``````\n",
    "created_at": "2017-02-08T09:38:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22325#issuecomment-326573",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
+Now that some functionality of specific orthogonal polys is handled by other than pexpect calls (?, see #17753) let's replace the unneeded calls completely.
 
+There seems to be no reason to preserve the functionality `func._maxima_init_evaled_(args)` because the same can be had with `maxima(func(args, hold=True))` which is also intuitive.
+
+The ticket will also remove pexpect calls from `OrthogonalPoly`.
 
 Comment: 1
 
``````




---

archive/issue_comments_326574.json:
```json
{
    "body": "<a id='comment:6'></a>New commits:",
    "created_at": "2017-02-08T14:43:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22325#issuecomment-326574",
    "user": "https://github.com/rwst"
}
```

<a id='comment:6'></a>New commits:



---

archive/issue_comments_326575.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-09T14:28:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22325#issuecomment-326575",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_326576.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-02-09T14:29:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22325#issuecomment-326576",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_326577.json:
```json
{
    "body": "<a id='comment:9'></a>I am not sure about this change:\n\n```diff\ndiff --git a/src/sage/functions/orthogonal_polys.py b/src/sage/functions/orthogonal_polys.py\nindex 1421a53..a6fe651 100644\n--- a/src/sage/functions/orthogonal_polys.py\n+++ b/src/sage/functions/orthogonal_polys.py\n@@ -465,8 +412,6 @@ class OrthogonalFunction(BuiltinFunction):\n             return self.eval_pari(*args, **kwds)\n         elif algorithm == 'recursive':\n             return self.eval_recursive(*args, **kwds)\n-        elif algorithm == 'maxima':\n-            return self._maxima_init_evaled_(*args, **kwds)\n \n         return super(OrthogonalFunction,self).__call__(*args, **kwds)\n \n```\nas it seems like you are removing functionality to the user. Specifically, you either need to deprecate the `algorithm='maxima'` input or (IMO better) send it off to Maxima.",
    "created_at": "2017-02-09T15:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22325#issuecomment-326577",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>I am not sure about this change:

```diff
diff --git a/src/sage/functions/orthogonal_polys.py b/src/sage/functions/orthogonal_polys.py
index 1421a53..a6fe651 100644
--- a/src/sage/functions/orthogonal_polys.py
+++ b/src/sage/functions/orthogonal_polys.py
@@ -465,8 +412,6 @@ class OrthogonalFunction(BuiltinFunction):
             return self.eval_pari(*args, **kwds)
         elif algorithm == 'recursive':
             return self.eval_recursive(*args, **kwds)
-        elif algorithm == 'maxima':
-            return self._maxima_init_evaled_(*args, **kwds)
 
         return super(OrthogonalFunction,self).__call__(*args, **kwds)
 
```
as it seems like you are removing functionality to the user. Specifically, you either need to deprecate the `algorithm='maxima'` input or (IMO better) send it off to Maxima.



---

archive/issue_comments_326578.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 tscrim]:\n> as it seems like you are removing functionality to the user. Specifically, you either need to deprecate the `algorithm='maxima'` input or (IMO better) send it off to Maxima.\n\n\nRight, I intended delegating but did the wrong thing.",
    "created_at": "2017-02-09T15:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22325#issuecomment-326578",
    "user": "https://github.com/rwst"
}
```

<a id='comment:10'></a>Replying to [comment:9 tscrim]:
> as it seems like you are removing functionality to the user. Specifically, you either need to deprecate the `algorithm='maxima'` input or (IMO better) send it off to Maxima.


Right, I intended delegating but did the wrong thing.



---

archive/issue_comments_326579.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-09T15:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22325#issuecomment-326579",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_326580.json:
```json
{
    "body": "<a id='comment:12'></a>Actually that never worked. Let's open a ticket for it.",
    "created_at": "2017-02-09T15:42:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22325#issuecomment-326580",
    "user": "https://github.com/rwst"
}
```

<a id='comment:12'></a>Actually that never worked. Let's open a ticket for it.



---

archive/issue_comments_326581.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-09T15:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22325#issuecomment-326581",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_326582.json:
```json
{
    "body": "<a id='comment:13'></a>Thanks. I agree; we can handle the algorithm issues on a followup.",
    "created_at": "2017-02-09T15:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22325#issuecomment-326582",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>Thanks. I agree; we can handle the algorithm issues on a followup.



---

archive/issue_comments_326583.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-02-12T22:09:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22325#issuecomment-326583",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_058519.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-12T22:09:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22325",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22325#event-58519"
}
```
