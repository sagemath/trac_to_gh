# Issue 22049: Numpy doesn't build on Cygwin due to missing xlocale.h

archive/issues_021812.json:
```json
{
    "body": "I'm not sure why this never came up for me before.  I did recently reinstall Cygwin, and maybe had forgotten that I long ago symlinked locale.h to xlocale.h.  Another possibility is that the version of Cygwin I was using didn't define strtold_l, which is the only case in which Numpy looks for xlocale.h.\n\nUpstream report at https://github.com/numpy/numpy/pull/8367\n\n**Branch:** [bbe65d125a628c8b88605aaf3b068706d1285ed8](https://github.com/sagemath/sagetrac-mirror/commit/bbe65d125a628c8b88605aaf3b068706d1285ed8)\n\n**Upstream:** Fixed upstream, in a later stable release.\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Erik Bray\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22049\n\n",
    "closed_at": "2016-12-14T23:15:43Z",
    "created_at": "2016-12-12T12:01:13Z",
    "labels": [
        "component: porting: cygwin",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Numpy doesn't build on Cygwin due to missing xlocale.h",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22049",
    "user": "https://github.com/embray"
}
```
I'm not sure why this never came up for me before.  I did recently reinstall Cygwin, and maybe had forgotten that I long ago symlinked locale.h to xlocale.h.  Another possibility is that the version of Cygwin I was using didn't define strtold_l, which is the only case in which Numpy looks for xlocale.h.

Upstream report at https://github.com/numpy/numpy/pull/8367

**Branch:** [bbe65d125a628c8b88605aaf3b068706d1285ed8](https://github.com/sagemath/sagetrac-mirror/commit/bbe65d125a628c8b88605aaf3b068706d1285ed8)

**Upstream:** Fixed upstream, in a later stable release.

**Reviewer:** Travis Scrimshaw

**Author:** Erik Bray

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/22049





---

archive/issue_comments_410478.json:
```json
{
    "body": "**Author:** Erik Bray",
    "created_at": "2016-12-12T12:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410478",
    "user": "https://github.com/embray"
}
```

**Author:** Erik Bray



---

archive/issue_comments_410479.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2016-12-12T12:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410479",
    "user": "https://github.com/embray"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_410480.json:
```json
{
    "body": "**Branch:** [u/embray/cygwin/numpy-xlocale](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/numpy-xlocale)",
    "created_at": "2016-12-12T12:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410480",
    "user": "https://github.com/embray"
}
```

**Branch:** [u/embray/cygwin/numpy-xlocale](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/numpy-xlocale)



---

archive/issue_comments_410481.json:
```json
{
    "body": "**Commit:** [eb35f8678b205619dabd4ccb5615b1dc8777cfe6](https://github.com/sagemath/sagetrac-mirror/commit/eb35f8678b205619dabd4ccb5615b1dc8777cfe6)",
    "created_at": "2016-12-12T12:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410481",
    "user": "https://github.com/embray"
}
```

**Commit:** [eb35f8678b205619dabd4ccb5615b1dc8777cfe6](https://github.com/sagemath/sagetrac-mirror/commit/eb35f8678b205619dabd4ccb5615b1dc8777cfe6)



---

archive/issue_comments_410482.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb35f8678b205619dabd4ccb5615b1dc8777cfe6\">eb35f86</a></td><td><code>Add xlocale.h patch to Numpy to fix #22049</code></td></tr></table>\n",
    "created_at": "2016-12-12T12:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410482",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb35f8678b205619dabd4ccb5615b1dc8777cfe6">eb35f86</a></td><td><code>Add xlocale.h patch to Numpy to fix #22049</code></td></tr></table>




---

archive/issue_comments_410483.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n I'm not sure why this never came up for me before.  I did recently reinstall Cygwin, and maybe had forgotten that I long ago symlinked locale.h to xlocale.h.  Another possibility is that the version of Cygwin I was using didn't define strtold_l, which is the only case in which Numpy looks for xlocale.h.\n+\n+Upstream report at https://github.com/numpy/numpy/pull/8367\n``````\n",
    "created_at": "2016-12-12T12:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410483",
    "user": "https://github.com/embray"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 I'm not sure why this never came up for me before.  I did recently reinstall Cygwin, and maybe had forgotten that I long ago symlinked locale.h to xlocale.h.  Another possibility is that the version of Cygwin I was using didn't define strtold_l, which is the only case in which Numpy looks for xlocale.h.
+
+Upstream report at https://github.com/numpy/numpy/pull/8367
``````




---

archive/issue_comments_410484.json:
```json
{
    "body": "**Changing commit** from \"[eb35f8678b205619dabd4ccb5615b1dc8777cfe6](https://github.com/sagemath/sagetrac-mirror/commit/eb35f8678b205619dabd4ccb5615b1dc8777cfe6)\" to \"[b5e48ff813e78d93b52f2511a243cd8635c93e95](https://github.com/sagemath/sagetrac-mirror/commit/b5e48ff813e78d93b52f2511a243cd8635c93e95)\".",
    "created_at": "2016-12-12T13:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410484",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[eb35f8678b205619dabd4ccb5615b1dc8777cfe6](https://github.com/sagemath/sagetrac-mirror/commit/eb35f8678b205619dabd4ccb5615b1dc8777cfe6)" to "[b5e48ff813e78d93b52f2511a243cd8635c93e95](https://github.com/sagemath/sagetrac-mirror/commit/b5e48ff813e78d93b52f2511a243cd8635c93e95)".



---

archive/issue_comments_410485.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5e48ff813e78d93b52f2511a243cd8635c93e95\">b5e48ff</a></td><td><code>Update to new version of the upstream patch</code></td></tr></table>\n",
    "created_at": "2016-12-12T13:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410485",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5e48ff813e78d93b52f2511a243cd8635c93e95">b5e48ff</a></td><td><code>Update to new version of the upstream patch</code></td></tr></table>




---

archive/issue_comments_410486.json:
```json
{
    "body": "<a id='comment:4'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5e48ff813e78d93b52f2511a243cd8635c93e95\">b5e48ff</a></td><td><code>Update to new version of the upstream patch</code></td></tr></table>\n",
    "created_at": "2016-12-12T13:41:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410486",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5e48ff813e78d93b52f2511a243cd8635c93e95">b5e48ff</a></td><td><code>Update to new version of the upstream patch</code></td></tr></table>




---

archive/issue_comments_410487.json:
```json
{
    "body": "**Changing upstream** from \"Not yet reported upstream; Will do shortly.\" to \"Reported upstream. Developers acknowledge bug.\".",
    "created_at": "2016-12-12T13:41:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410487",
    "user": "https://github.com/embray"
}
```

**Changing upstream** from "Not yet reported upstream; Will do shortly." to "Reported upstream. Developers acknowledge bug.".



---

archive/issue_comments_410488.json:
```json
{
    "body": "<a id='comment:5'></a>\nYou will need to bump the numpy version, but otherwise LGTM.",
    "created_at": "2016-12-12T23:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410488",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
You will need to bump the numpy version, but otherwise LGTM.



---

archive/issue_comments_410489.json:
```json
{
    "body": "<a id='comment:6'></a>\nActually, that's not quite true since it didn't build beforehand and it doesn't affect anyone else who has already built numpy.",
    "created_at": "2016-12-12T23:11:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410489",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>
Actually, that's not quite true since it didn't build beforehand and it doesn't affect anyone else who has already built numpy.



---

archive/issue_comments_410490.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2016-12-12T23:11:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410490",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_410491.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2016-12-12T23:11:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410491",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_410492.json:
```json
{
    "body": "**Changing commit** from \"[b5e48ff813e78d93b52f2511a243cd8635c93e95](https://github.com/sagemath/sagetrac-mirror/commit/b5e48ff813e78d93b52f2511a243cd8635c93e95)\" to \"[be650440af652d5e71204fa71088e9fcdadafa07](https://github.com/sagemath/sagetrac-mirror/commit/be650440af652d5e71204fa71088e9fcdadafa07)\".",
    "created_at": "2016-12-13T12:51:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410492",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b5e48ff813e78d93b52f2511a243cd8635c93e95](https://github.com/sagemath/sagetrac-mirror/commit/b5e48ff813e78d93b52f2511a243cd8635c93e95)" to "[be650440af652d5e71204fa71088e9fcdadafa07](https://github.com/sagemath/sagetrac-mirror/commit/be650440af652d5e71204fa71088e9fcdadafa07)".



---

archive/issue_comments_410493.json:
```json
{
    "body": "**Changing status** from positive_review to needs_review.",
    "created_at": "2016-12-13T12:51:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410493",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing status** from positive_review to needs_review.



---

archive/issue_comments_410494.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** This was a forced push. **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be650440af652d5e71204fa71088e9fcdadafa07\">be65044</a></td><td><code>Update to new version of the upstream patch</code></td></tr></table>\n",
    "created_at": "2016-12-13T12:51:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410494",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** This was a forced push. **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be650440af652d5e71204fa71088e9fcdadafa07">be65044</a></td><td><code>Update to new version of the upstream patch</code></td></tr></table>




---

archive/issue_comments_410495.json:
```json
{
    "body": "<a id='comment:8'></a>\nThat was my thinking as well.  The only affected platform we know or care about is Cygwin--it won't affect existing numpy installations.",
    "created_at": "2016-12-13T13:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410495",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>
That was my thinking as well.  The only affected platform we know or care about is Cygwin--it won't affect existing numpy installations.



---

archive/issue_comments_410496.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2016-12-13T13:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410496",
    "user": "https://github.com/embray"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_410497.json:
```json
{
    "body": "<a id='comment:9'></a>\nOops, my updated version of the patch had a typo.",
    "created_at": "2016-12-13T13:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410497",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>
Oops, my updated version of the patch had a typo.



---

archive/issue_comments_410498.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bbe65d125a628c8b88605aaf3b068706d1285ed8\">bbe65d1</a></td><td><code>Add xlocale.h patch to Numpy to fix #22049</code></td></tr></table>\n",
    "created_at": "2016-12-13T13:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410498",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bbe65d125a628c8b88605aaf3b068706d1285ed8">bbe65d1</a></td><td><code>Add xlocale.h patch to Numpy to fix #22049</code></td></tr></table>




---

archive/issue_comments_410499.json:
```json
{
    "body": "**Changing commit** from \"[be650440af652d5e71204fa71088e9fcdadafa07](https://github.com/sagemath/sagetrac-mirror/commit/be650440af652d5e71204fa71088e9fcdadafa07)\" to \"[bbe65d125a628c8b88605aaf3b068706d1285ed8](https://github.com/sagemath/sagetrac-mirror/commit/bbe65d125a628c8b88605aaf3b068706d1285ed8)\".",
    "created_at": "2016-12-13T13:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410499",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[be650440af652d5e71204fa71088e9fcdadafa07](https://github.com/sagemath/sagetrac-mirror/commit/be650440af652d5e71204fa71088e9fcdadafa07)" to "[bbe65d125a628c8b88605aaf3b068706d1285ed8](https://github.com/sagemath/sagetrac-mirror/commit/bbe65d125a628c8b88605aaf3b068706d1285ed8)".



---

archive/issue_comments_410500.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2016-12-13T13:39:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410500",
    "user": "https://github.com/embray"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_410501.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2016-12-13T15:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410501",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_410502.json:
```json
{
    "body": "**Changing upstream** from \"Reported upstream. Developers acknowledge bug.\" to \"Fixed upstream, but not in a stable release.\".",
    "created_at": "2016-12-13T17:45:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410502",
    "user": "https://github.com/embray"
}
```

**Changing upstream** from "Reported upstream. Developers acknowledge bug." to "Fixed upstream, but not in a stable release.".



---

archive/issue_comments_410503.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2016-12-14T23:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410503",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_events_065991.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-14T23:15:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22049#event-65991"
}
```



---

archive/issue_comments_410504.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/cygwin/numpy-xlocale](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/numpy-xlocale)\" to \"[bbe65d125a628c8b88605aaf3b068706d1285ed8](https://github.com/sagemath/sagetrac-mirror/commit/bbe65d125a628c8b88605aaf3b068706d1285ed8)\".",
    "created_at": "2016-12-14T23:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410504",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/embray/cygwin/numpy-xlocale](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/numpy-xlocale)" to "[bbe65d125a628c8b88605aaf3b068706d1285ed8](https://github.com/sagemath/sagetrac-mirror/commit/bbe65d125a628c8b88605aaf3b068706d1285ed8)".



---

archive/issue_comments_410505.json:
```json
{
    "body": "**Changing upstream** from \"Fixed upstream, but not in a stable release.\" to \"Fixed upstream, in a later stable release.\".",
    "created_at": "2020-05-28T22:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410505",
    "user": "https://github.com/dimpase"
}
```

**Changing upstream** from "Fixed upstream, but not in a stable release." to "Fixed upstream, in a later stable release.".



---

archive/issue_comments_410506.json:
```json
{
    "body": "**Changing commit** from \"[bbe65d125a628c8b88605aaf3b068706d1285ed8](https://github.com/sagemath/sagetrac-mirror/commit/bbe65d125a628c8b88605aaf3b068706d1285ed8)\" to \"\".",
    "created_at": "2020-05-28T22:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-410506",
    "user": "https://github.com/dimpase"
}
```

**Changing commit** from "[bbe65d125a628c8b88605aaf3b068706d1285ed8](https://github.com/sagemath/sagetrac-mirror/commit/bbe65d125a628c8b88605aaf3b068706d1285ed8)" to "".
