# Issue 22049: Numpy doesn't build on Cygwin due to missing xlocale.h

archive/issues_021812.json:
```json
{
    "body": "I'm not sure why this never came up for me before.  I did recently reinstall Cygwin, and maybe had forgotten that I long ago symlinked locale.h to xlocale.h.  Another possibility is that the version of Cygwin I was using didn't define strtold_l, which is the only case in which Numpy looks for xlocale.h.\n\nUpstream report at https://github.com/numpy/numpy/pull/8367\n\nUpstream: Fixed upstream, in a later stable release.\n\nReviewer: Travis Scrimshaw\n\nAuthor: Erik Bray\n\nBranch: bbe65d125a628c8b88605aaf3b068706d1285ed8\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22049\n\n",
    "closed_at": "2016-12-14T23:15:43Z",
    "created_at": "2016-12-12T12:01:13Z",
    "labels": [
        "component: porting: cygwin",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Numpy doesn't build on Cygwin due to missing xlocale.h",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22049",
    "user": "https://github.com/embray"
}
```
I'm not sure why this never came up for me before.  I did recently reinstall Cygwin, and maybe had forgotten that I long ago symlinked locale.h to xlocale.h.  Another possibility is that the version of Cygwin I was using didn't define strtold_l, which is the only case in which Numpy looks for xlocale.h.

Upstream report at https://github.com/numpy/numpy/pull/8367

Upstream: Fixed upstream, in a later stable release.

Reviewer: Travis Scrimshaw

Author: Erik Bray

Branch: bbe65d125a628c8b88605aaf3b068706d1285ed8

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22049





---

archive/issue_comments_402371.json:
```json
{
    "body": "Changing author from \"\" to \"Erik Bray\"",
    "created_at": "2016-12-12T12:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402371",
    "user": "https://github.com/embray"
}
```

Changing author from "" to "Erik Bray"



---

archive/issue_comments_402372.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-12-12T12:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402372",
    "user": "https://github.com/embray"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_402373.json:
```json
{
    "body": "Changing branch from \"\" to \"u/embray/cygwin/numpy-xlocale\"",
    "created_at": "2016-12-12T12:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402373",
    "user": "https://github.com/embray"
}
```

Changing branch from "" to "u/embray/cygwin/numpy-xlocale"



---

archive/issue_comments_402374.json:
```json
{
    "body": "Changing commit from \"\" to \"eb35f8678b205619dabd4ccb5615b1dc8777cfe6\"",
    "created_at": "2016-12-12T12:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402374",
    "user": "https://github.com/embray"
}
```

Changing commit from "" to "eb35f8678b205619dabd4ccb5615b1dc8777cfe6"



---

archive/issue_comments_402375.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[eb35f86](https://github.com/sagemath/sagetrac-mirror/commit/eb35f8678b205619dabd4ccb5615b1dc8777cfe6)|`Add xlocale.h patch to Numpy to fix #22049`|",
    "created_at": "2016-12-12T12:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402375",
    "user": "https://github.com/embray"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[eb35f86](https://github.com/sagemath/sagetrac-mirror/commit/eb35f8678b205619dabd4ccb5615b1dc8777cfe6)|`Add xlocale.h patch to Numpy to fix #22049`|



---

archive/issue_comments_402376.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n I'm not sure why this never came up for me before.  I did recently reinstall Cygwin, and maybe had forgotten that I long ago symlinked locale.h to xlocale.h.  Another possibility is that the version of Cygwin I was using didn't define strtold_l, which is the only case in which Numpy looks for xlocale.h.\n+\n+Upstream report at https://github.com/numpy/numpy/pull/8367\n``````\n",
    "created_at": "2016-12-12T12:09:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402376",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 I'm not sure why this never came up for me before.  I did recently reinstall Cygwin, and maybe had forgotten that I long ago symlinked locale.h to xlocale.h.  Another possibility is that the version of Cygwin I was using didn't define strtold_l, which is the only case in which Numpy looks for xlocale.h.
+
+Upstream report at https://github.com/numpy/numpy/pull/8367
``````




---

archive/issue_comments_402377.json:
```json
{
    "body": "Changing commit from \"eb35f8678b205619dabd4ccb5615b1dc8777cfe6\" to \"b5e48ff813e78d93b52f2511a243cd8635c93e95\"",
    "created_at": "2016-12-12T13:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402377",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "eb35f8678b205619dabd4ccb5615b1dc8777cfe6" to "b5e48ff813e78d93b52f2511a243cd8635c93e95"



---

archive/issue_comments_402378.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[b5e48ff](https://github.com/sagemath/sagetrac-mirror/commit/b5e48ff813e78d93b52f2511a243cd8635c93e95)|`Update to new version of the upstream patch`|",
    "created_at": "2016-12-12T13:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402378",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[b5e48ff](https://github.com/sagemath/sagetrac-mirror/commit/b5e48ff813e78d93b52f2511a243cd8635c93e95)|`Update to new version of the upstream patch`|



---

archive/issue_comments_402379.json:
```json
{
    "body": "<a id='comment:4'></a>\nNew commits:\n|                                                                                                                                          |                                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[b5e48ff](https://github.com/sagemath/sagetrac-mirror/commit/b5e48ff813e78d93b52f2511a243cd8635c93e95)|`Update to new version of the upstream patch`|",
    "created_at": "2016-12-12T13:41:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402379",
    "user": "https://github.com/embray"
}
```

<a id='comment:4'></a>
New commits:
|                                                                                                                                          |                                             |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[b5e48ff](https://github.com/sagemath/sagetrac-mirror/commit/b5e48ff813e78d93b52f2511a243cd8635c93e95)|`Update to new version of the upstream patch`|



---

archive/issue_comments_402380.json:
```json
{
    "body": "Changing upstream from \"Not yet reported upstream; Will do shortly.\" to \"Reported upstream. Developers acknowledge bug.\"",
    "created_at": "2016-12-12T13:41:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402380",
    "user": "https://github.com/embray"
}
```

Changing upstream from "Not yet reported upstream; Will do shortly." to "Reported upstream. Developers acknowledge bug."



---

archive/issue_comments_402381.json:
```json
{
    "body": "<a id='comment:5'></a>\nYou will need to bump the numpy version, but otherwise LGTM.",
    "created_at": "2016-12-12T23:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402381",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
You will need to bump the numpy version, but otherwise LGTM.



---

archive/issue_comments_402382.json:
```json
{
    "body": "<a id='comment:6'></a>\nActually, that's not quite true since it didn't build beforehand and it doesn't affect anyone else who has already built numpy.",
    "created_at": "2016-12-12T23:11:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402382",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>
Actually, that's not quite true since it didn't build beforehand and it doesn't affect anyone else who has already built numpy.



---

archive/issue_comments_402383.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2016-12-12T23:11:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402383",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_402384.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-12-12T23:11:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402384",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_402385.json:
```json
{
    "body": "Changing commit from \"b5e48ff813e78d93b52f2511a243cd8635c93e95\" to \"be650440af652d5e71204fa71088e9fcdadafa07\"",
    "created_at": "2016-12-13T12:51:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402385",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b5e48ff813e78d93b52f2511a243cd8635c93e95" to "be650440af652d5e71204fa71088e9fcdadafa07"



---

archive/issue_comments_402386.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2016-12-13T12:51:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402386",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_402387.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[be65044](https://github.com/sagemath/sagetrac-mirror/commit/be650440af652d5e71204fa71088e9fcdadafa07)|`Update to new version of the upstream patch`|",
    "created_at": "2016-12-13T12:51:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402387",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[be65044](https://github.com/sagemath/sagetrac-mirror/commit/be650440af652d5e71204fa71088e9fcdadafa07)|`Update to new version of the upstream patch`|



---

archive/issue_comments_402388.json:
```json
{
    "body": "<a id='comment:8'></a>\nThat was my thinking as well.  The only affected platform we know or care about is Cygwin--it won't affect existing numpy installations.",
    "created_at": "2016-12-13T13:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402388",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>
That was my thinking as well.  The only affected platform we know or care about is Cygwin--it won't affect existing numpy installations.



---

archive/issue_comments_402389.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-12-13T13:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402389",
    "user": "https://github.com/embray"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_402390.json:
```json
{
    "body": "<a id='comment:9'></a>\nOops, my updated version of the patch had a typo.",
    "created_at": "2016-12-13T13:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402390",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>
Oops, my updated version of the patch had a typo.



---

archive/issue_comments_402391.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[bbe65d1](https://github.com/sagemath/sagetrac-mirror/commit/bbe65d125a628c8b88605aaf3b068706d1285ed8)|`Add xlocale.h patch to Numpy to fix #22049`|",
    "created_at": "2016-12-13T13:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402391",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[bbe65d1](https://github.com/sagemath/sagetrac-mirror/commit/bbe65d125a628c8b88605aaf3b068706d1285ed8)|`Add xlocale.h patch to Numpy to fix #22049`|



---

archive/issue_comments_402392.json:
```json
{
    "body": "Changing commit from \"be650440af652d5e71204fa71088e9fcdadafa07\" to \"bbe65d125a628c8b88605aaf3b068706d1285ed8\"",
    "created_at": "2016-12-13T13:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402392",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "be650440af652d5e71204fa71088e9fcdadafa07" to "bbe65d125a628c8b88605aaf3b068706d1285ed8"



---

archive/issue_comments_402393.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-12-13T13:39:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402393",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_402394.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-12-13T15:25:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402394",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_402395.json:
```json
{
    "body": "Changing upstream from \"Reported upstream. Developers acknowledge bug.\" to \"Fixed upstream, but not in a stable release.\"",
    "created_at": "2016-12-13T17:45:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402395",
    "user": "https://github.com/embray"
}
```

Changing upstream from "Reported upstream. Developers acknowledge bug." to "Fixed upstream, but not in a stable release."



---

archive/issue_comments_402396.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-12-14T23:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402396",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_073800.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-14T23:15:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22049#event-73800"
}
```



---

archive/issue_comments_402397.json:
```json
{
    "body": "Changing branch from \"u/embray/cygwin/numpy-xlocale\" to \"bbe65d125a628c8b88605aaf3b068706d1285ed8\"",
    "created_at": "2016-12-14T23:15:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402397",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/embray/cygwin/numpy-xlocale" to "bbe65d125a628c8b88605aaf3b068706d1285ed8"



---

archive/issue_comments_402398.json:
```json
{
    "body": "Changing upstream from \"Fixed upstream, but not in a stable release.\" to \"Fixed upstream, in a later stable release.\"",
    "created_at": "2020-05-28T22:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402398",
    "user": "https://github.com/dimpase"
}
```

Changing upstream from "Fixed upstream, but not in a stable release." to "Fixed upstream, in a later stable release."



---

archive/issue_comments_402399.json:
```json
{
    "body": "Changing commit from \"bbe65d125a628c8b88605aaf3b068706d1285ed8\" to \"\"",
    "created_at": "2020-05-28T22:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22049",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22049#issuecomment-402399",
    "user": "https://github.com/dimpase"
}
```

Changing commit from "bbe65d125a628c8b88605aaf3b068706d1285ed8" to ""
