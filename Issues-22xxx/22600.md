# Issue 22600: Implement Weyl groups as permutation groups

archive/issues_022363.json:
```json
{
    "body": "Right now, they can be constructed using the experimental GAP3 spkg using `ReflectionGroup`, but we can have a native version by using the root system code. The advantage to this implementation is that it is extremely fast to iterate over.\n\nWe also refactor the element classes and move some other code up to the appropriate categories. A small bug is also fixed for checking irreducibility for generic Dynkin diagrams.\n\nCC:  sage-combinat stumpc5 @nthiery @darijgr\n\nKeywords: days85\n\nBranch/Commit: cbe9bf269788ebda128a37a076a4a488cf03efd7\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Travis Scrimshaw\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22600\n\n",
    "closed_at": "2017-03-29T16:51:30Z",
    "created_at": "2017-03-14T12:58:06Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Implement Weyl groups as permutation groups",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22600",
    "user": "https://github.com/tscrim"
}
```
Right now, they can be constructed using the experimental GAP3 spkg using `ReflectionGroup`, but we can have a native version by using the root system code. The advantage to this implementation is that it is extremely fast to iterate over.

We also refactor the element classes and move some other code up to the appropriate categories. A small bug is also fixed for checking irreducibility for generic Dynkin diagrams.

CC:  sage-combinat stumpc5 @nthiery @darijgr

Keywords: days85

Branch/Commit: cbe9bf269788ebda128a37a076a4a488cf03efd7

Reviewer: Frédéric Chapoton

Author: Travis Scrimshaw

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22600





---

archive/issue_comments_330984.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-14T12:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330984",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_330985.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2017-03-14T12:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330985",
    "user": "https://github.com/tscrim"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_330986.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-14T12:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330986",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_330987.json:
```json
{
    "body": "<a id='comment:3'></a>It could be that more things need to be moved up to the category, that are essentially generic methods, and some more ``@`abstract_methods` defined. However, I think we can worry about that later as we come across them.\n\nI noticed a few other things to do. I will finish them after lunch.",
    "created_at": "2017-03-14T13:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330987",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>It could be that more things need to be moved up to the category, that are essentially generic methods, and some more ``@`abstract_methods` defined. However, I think we can worry about that later as we come across them.

I noticed a few other things to do. I will finish them after lunch.



---

archive/issue_comments_330988.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-03-14T13:15:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330988",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_330989.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-14T16:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330989",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_330990.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-03-14T16:40:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330990",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_330991.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-03-14T16:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330991",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_330992.json:
```json
{
    "body": "<a id='comment:7'></a>Hi Travis! What is the point of moving the element class into cython?",
    "created_at": "2017-03-14T19:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330992",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:7'></a>Hi Travis! What is the point of moving the element class into cython?



---

archive/issue_comments_330993.json:
```json
{
    "body": "<a id='comment:8'></a>IIRC, it is faster to have a `cdef` class, even when the methods are predominantly Python. However, it does allow us to use `cpdef` and run things entirely with C-function calls. There are quite possibly a number of other improvements we could do now that it is a `cdef` class, but I didn't want to get into that too much now (lest I spend the entire Sage days doing that :P).",
    "created_at": "2017-03-14T19:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330993",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>IIRC, it is faster to have a `cdef` class, even when the methods are predominantly Python. However, it does allow us to use `cpdef` and run things entirely with C-function calls. There are quite possibly a number of other improvements we could do now that it is a `cdef` class, but I didn't want to get into that too much now (lest I spend the entire Sage days doing that :P).



---

archive/issue_comments_330994.json:
```json
{
    "body": "<a id='comment:9'></a>okay, so nothing concrete yet. I have also reimplemented the gap3 iteration algorithm in Sage in #20445 in case you want to give it a try, or to check if you could use it as well for Weyl groups.",
    "created_at": "2017-03-14T19:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330994",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:9'></a>okay, so nothing concrete yet. I have also reimplemented the gap3 iteration algorithm in Sage in #20445 in case you want to give it a try, or to check if you could use it as well for Weyl groups.



---

archive/issue_comments_330995.json:
```json
{
    "body": "<a id='comment:10'></a>I remember the iteration algorithm. We probably should consider cleaning that up and including it as an alternative implementation. Also from talking with Jeroen, I've become more convinced that if we want more speed from the current iteration algorithm, we need to extract it out into a C++ class. This would be a separate ticket of course.",
    "created_at": "2017-03-16T23:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330995",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>I remember the iteration algorithm. We probably should consider cleaning that up and including it as an alternative implementation. Also from talking with Jeroen, I've become more convinced that if we want more speed from the current iteration algorithm, we need to extract it out into a C++ class. This would be a separate ticket of course.



---

archive/issue_comments_330996.json:
```json
{
    "body": "<a id='comment:11'></a>Don't do this Cython code: `from six.moves import range`.",
    "created_at": "2017-03-17T09:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330996",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>Don't do this Cython code: `from six.moves import range`.



---

archive/issue_comments_330997.json:
```json
{
    "body": "<a id='comment:12'></a>Just for fun, let me post this:\n\nThis is the C code generated for `for i in range(len(M_gals[0]))` with `six.moves.range`:\n\n```C\n  __pyx_t_2 = __Pyx_GetModuleGlobalName(__pyx_n_s_range); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 640, __pyx_L1_error)\n  __Pyx_GOTREF(__pyx_t_2);\n  __pyx_t_7 = __Pyx_GetItemInt_List(__pyx_v_M_gals, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 640, __pyx_L1_error)\n  __Pyx_GOTREF(__pyx_t_7);\n  __pyx_t_5 = PyObject_Length(__pyx_t_7); if (unlikely(__pyx_t_5 == -1)) __PYX_ERR(0, 640, __pyx_L1_error)\n  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;\n  __pyx_t_7 = PyInt_FromSsize_t(__pyx_t_5); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 640, __pyx_L1_error)\n  __Pyx_GOTREF(__pyx_t_7);\n  __pyx_t_3 = NULL;\n  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {\n    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);\n    if (likely(__pyx_t_3)) {\n      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);\n      __Pyx_INCREF(__pyx_t_3);\n      __Pyx_INCREF(function);\n      __Pyx_DECREF_SET(__pyx_t_2, function);\n    }\n  }\n  if (!__pyx_t_3) {\n    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 640, __pyx_L1_error)\n    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;\n    __Pyx_GOTREF(__pyx_t_1);\n  } else {\n    #if CYTHON_FAST_PYCALL\n    if (PyFunction_Check(__pyx_t_2)) {\n      PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_t_7};\n      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 640, __pyx_L1_error)\n      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;\n      __Pyx_GOTREF(__pyx_t_1);\n      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;\n    } else\n    #endif\n    #if CYTHON_FAST_PYCCALL\n    if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {\n      PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_t_7};\n      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 640, __pyx_L1_error)\n      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;\n      __Pyx_GOTREF(__pyx_t_1);\n      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;\n    } else\n    #endif\n    {\n      __pyx_t_4 = PyTuple_New(1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 640, __pyx_L1_error)\n      __Pyx_GOTREF(__pyx_t_4);\n      __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_3); __pyx_t_3 = NULL;\n      __Pyx_GIVEREF(__pyx_t_7);\n      PyTuple_SET_ITEM(__pyx_t_4, 0+1, __pyx_t_7);\n      __pyx_t_7 = 0;\n      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_4, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 640, __pyx_L1_error)\n      __Pyx_GOTREF(__pyx_t_1);\n      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;\n    }\n  }\n  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;\n  if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {\n    __pyx_t_2 = __pyx_t_1; __Pyx_INCREF(__pyx_t_2); __pyx_t_5 = 0;\n    __pyx_t_6 = NULL;\n  } else {\n    __pyx_t_5 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 640, __pyx_L1_error)\n    __Pyx_GOTREF(__pyx_t_2);\n    __pyx_t_6 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 640, __pyx_L1_error)\n  }\n  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;\n  for (;;) {\n    if (likely(!__pyx_t_6)) {\n      if (likely(PyList_CheckExact(__pyx_t_2))) {\n        if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_2)) break;\n        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS\n        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_1); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 640, __pyx_L1_error)\n        #else\n        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 640, __pyx_L1_error)\n        __Pyx_GOTREF(__pyx_t_1);\n        #endif\n      } else {\n        if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_2)) break;\n        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS\n        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_1); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 640, __pyx_L1_error)\n        #else\n        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 640, __pyx_L1_error)\n        __Pyx_GOTREF(__pyx_t_1);\n        #endif\n      }\n    } else {\n      __pyx_t_1 = __pyx_t_6(__pyx_t_2);\n      if (unlikely(!__pyx_t_1)) {\n        PyObject* exc_type = PyErr_Occurred();\n        if (exc_type) {\n          if (likely(exc_type == PyExc_StopIteration || PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();\n          else __PYX_ERR(0, 640, __pyx_L1_error)\n        }\n        break;\n      }\n      __Pyx_GOTREF(__pyx_t_1);\n    }\n    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_1);\n    __pyx_t_1 = 0;\n```\nand this is without `six.moves.range`:\n\n```C\n  __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_M_gals, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 638, __pyx_L1_error)\n  __Pyx_GOTREF(__pyx_t_1);\n  __pyx_t_5 = PyObject_Length(__pyx_t_1); if (unlikely(__pyx_t_5 == -1)) __PYX_ERR(0, 638, __pyx_L1_error)\n  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;\n  for (__pyx_t_12 = 0; __pyx_t_12 < __pyx_t_5; __pyx_t_12+=1) {\n    __pyx_v_i = __pyx_t_12;\n```",
    "created_at": "2017-03-17T09:23:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330997",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Just for fun, let me post this:

This is the C code generated for `for i in range(len(M_gals[0]))` with `six.moves.range`:

```C
  __pyx_t_2 = __Pyx_GetModuleGlobalName(__pyx_n_s_range); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 640, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_2);
  __pyx_t_7 = __Pyx_GetItemInt_List(__pyx_v_M_gals, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 640, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __pyx_t_5 = PyObject_Length(__pyx_t_7); if (unlikely(__pyx_t_5 == -1)) __PYX_ERR(0, 640, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = PyInt_FromSsize_t(__pyx_t_5); if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 640, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_7);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS && unlikely(PyMethod_Check(__pyx_t_2))) {
    __pyx_t_3 = PyMethod_GET_SELF(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = PyMethod_GET_FUNCTION(__pyx_t_2);
      __Pyx_INCREF(__pyx_t_3);
      __Pyx_INCREF(function);
      __Pyx_DECREF_SET(__pyx_t_2, function);
    }
  }
  if (!__pyx_t_3) {
    __pyx_t_1 = __Pyx_PyObject_CallOneArg(__pyx_t_2, __pyx_t_7); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 640, __pyx_L1_error)
    __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    __Pyx_GOTREF(__pyx_t_1);
  } else {
    #if CYTHON_FAST_PYCALL
    if (PyFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_t_7};
      __pyx_t_1 = __Pyx_PyFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 640, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (__Pyx_PyFastCFunction_Check(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_t_7};
      __pyx_t_1 = __Pyx_PyCFunction_FastCall(__pyx_t_2, __pyx_temp+1-1, 1+1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 640, __pyx_L1_error)
      __Pyx_XDECREF(__pyx_t_3); __pyx_t_3 = 0;
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_7); __pyx_t_7 = 0;
    } else
    #endif
    {
      __pyx_t_4 = PyTuple_New(1+1); if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 640, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_4);
      __Pyx_GIVEREF(__pyx_t_3); PyTuple_SET_ITEM(__pyx_t_4, 0, __pyx_t_3); __pyx_t_3 = NULL;
      __Pyx_GIVEREF(__pyx_t_7);
      PyTuple_SET_ITEM(__pyx_t_4, 0+1, __pyx_t_7);
      __pyx_t_7 = 0;
      __pyx_t_1 = __Pyx_PyObject_Call(__pyx_t_2, __pyx_t_4, NULL); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 640, __pyx_L1_error)
      __Pyx_GOTREF(__pyx_t_1);
      __Pyx_DECREF(__pyx_t_4); __pyx_t_4 = 0;
    }
  }
  __Pyx_DECREF(__pyx_t_2); __pyx_t_2 = 0;
  if (likely(PyList_CheckExact(__pyx_t_1)) || PyTuple_CheckExact(__pyx_t_1)) {
    __pyx_t_2 = __pyx_t_1; __Pyx_INCREF(__pyx_t_2); __pyx_t_5 = 0;
    __pyx_t_6 = NULL;
  } else {
    __pyx_t_5 = -1; __pyx_t_2 = PyObject_GetIter(__pyx_t_1); if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 640, __pyx_L1_error)
    __Pyx_GOTREF(__pyx_t_2);
    __pyx_t_6 = Py_TYPE(__pyx_t_2)->tp_iternext; if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 640, __pyx_L1_error)
  }
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  for (;;) {
    if (likely(!__pyx_t_6)) {
      if (likely(PyList_CheckExact(__pyx_t_2))) {
        if (__pyx_t_5 >= PyList_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyList_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_1); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 640, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 640, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      } else {
        if (__pyx_t_5 >= PyTuple_GET_SIZE(__pyx_t_2)) break;
        #if CYTHON_ASSUME_SAFE_MACROS && !CYTHON_AVOID_BORROWED_REFS
        __pyx_t_1 = PyTuple_GET_ITEM(__pyx_t_2, __pyx_t_5); __Pyx_INCREF(__pyx_t_1); __pyx_t_5++; if (unlikely(0 < 0)) __PYX_ERR(0, 640, __pyx_L1_error)
        #else
        __pyx_t_1 = PySequence_ITEM(__pyx_t_2, __pyx_t_5); __pyx_t_5++; if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 640, __pyx_L1_error)
        __Pyx_GOTREF(__pyx_t_1);
        #endif
      }
    } else {
      __pyx_t_1 = __pyx_t_6(__pyx_t_2);
      if (unlikely(!__pyx_t_1)) {
        PyObject* exc_type = PyErr_Occurred();
        if (exc_type) {
          if (likely(exc_type == PyExc_StopIteration || PyErr_GivenExceptionMatches(exc_type, PyExc_StopIteration))) PyErr_Clear();
          else __PYX_ERR(0, 640, __pyx_L1_error)
        }
        break;
      }
      __Pyx_GOTREF(__pyx_t_1);
    }
    __Pyx_XDECREF_SET(__pyx_v_i, __pyx_t_1);
    __pyx_t_1 = 0;
```
and this is without `six.moves.range`:

```C
  __pyx_t_1 = __Pyx_GetItemInt_List(__pyx_v_M_gals, 0, long, 1, __Pyx_PyInt_From_long, 1, 0, 1); if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 638, __pyx_L1_error)
  __Pyx_GOTREF(__pyx_t_1);
  __pyx_t_5 = PyObject_Length(__pyx_t_1); if (unlikely(__pyx_t_5 == -1)) __PYX_ERR(0, 638, __pyx_L1_error)
  __Pyx_DECREF(__pyx_t_1); __pyx_t_1 = 0;
  for (__pyx_t_12 = 0; __pyx_t_12 < __pyx_t_5; __pyx_t_12+=1) {
    __pyx_v_i = __pyx_t_12;
```



---

archive/issue_comments_330998.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-17T10:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330998",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_330999.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-17T12:29:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-330999",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_331000.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-21T07:35:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-331000",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_058973.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-03-21T07:40:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22600#event-58973"
}
```



---

archive/issue_comments_331001.json:
```json
{
    "body": "<a id='comment:16'></a>This should be relatively easy to review since it is mainly refactoring code with some mild conversion to Cython (which one can just check that the [gap3] doctests pass). I'd appreciate if one of you could do so.",
    "created_at": "2017-03-21T07:40:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-331001",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>This should be relatively easy to review since it is mainly refactoring code with some mild conversion to Cython (which one can just check that the [gap3] doctests pass). I'd appreciate if one of you could do so.



---

archive/issue_comments_331002.json:
```json
{
    "body": "<a id='comment:17'></a>Is there a good way to know what parts are just moved and what are actually changed? I probably can't help much with the mathematical content (e.g., the noncrossing elements)...",
    "created_at": "2017-03-22T20:08:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-331002",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:17'></a>Is there a good way to know what parts are just moved and what are actually changed? I probably can't help much with the mathematical content (e.g., the noncrossing elements)...



---

archive/issue_comments_331003.json:
```json
{
    "body": "<a id='comment:18'></a>Essentially no functionality has changed other than the addition of a native version of real reflection groups. In other words, there are no mathematical changes. There are a number of code changes for speed improvements by using Cython (with thanks to Jeroen for answering my Cython questions). Although for getting a good diff, perhaps the best is just to compare (by hand) function by function.",
    "created_at": "2017-03-24T13:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-331003",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>Essentially no functionality has changed other than the addition of a native version of real reflection groups. In other words, there are no mathematical changes. There are a number of code changes for speed improvements by using Cython (with thanks to Jeroen for answering my Cython questions). Although for getting a good diff, perhaps the best is just to compare (by hand) function by function.



---

archive/issue_comments_331004.json:
```json
{
    "body": "<a id='comment:19'></a>ok, let it be. Doctests pass with or without gap3.",
    "created_at": "2017-03-25T13:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-331004",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:19'></a>ok, let it be. Doctests pass with or without gap3.



---

archive/issue_comments_331005.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-25T13:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-331005",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_331006.json:
```json
{
    "body": "<a id='comment:20'></a>Thank you.",
    "created_at": "2017-03-25T16:12:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-331006",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>Thank you.



---

archive/issue_events_058974.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-29T16:51:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22600#event-58974"
}
```



---

archive/issue_comments_331007.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-29T16:51:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22600",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22600#issuecomment-331007",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
