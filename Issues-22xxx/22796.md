# Issue 22796: Remove deprecated_callable_import

archive/issues_022559.json:
```json
{
    "body": "The functionality of `deprecated_callable_import` can be achieved in a simpler and more general way by a lazy import with deprecation.\n\nSo we remove `deprecated_callable_import` in this ticket and remove existing uses coming from #17034, #17867, #19096, #19315. Only one deprecation from #20908 remains.\n\nCC:  @videlec\n\nBranch/Commit: 0ac7893146826afa62ffe437868e8c5d6d313c17\n\nReviewer: Dima Pasechnik\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22796\n\n",
    "closed_at": "2017-05-16T22:22:09Z",
    "created_at": "2017-04-11T12:23:53Z",
    "labels": [
        "component: misc"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Remove deprecated_callable_import",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22796",
    "user": "https://github.com/jdemeyer"
}
```
The functionality of `deprecated_callable_import` can be achieved in a simpler and more general way by a lazy import with deprecation.

So we remove `deprecated_callable_import` in this ticket and remove existing uses coming from #17034, #17867, #19096, #19315. Only one deprecation from #20908 remains.

CC:  @videlec

Branch/Commit: 0ac7893146826afa62ffe437868e8c5d6d313c17

Reviewer: Dima Pasechnik

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22796





---

archive/issue_comments_334754.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n The functionality of `deprecated_callable_import` can be achieved in a simpler and more general way by a lazy import with deprecation.\n \n-So we deprecate `deprecated_callable_import` in this ticket and remove all existing uses. Those existing uses come from #17034, #17867, #19096, #19315, #20908 so they can be removed.\n+So we deprecate `deprecated_callable_import` in this ticket and remove existing uses coming from #17034, #17867, #19096, #19315. Only one deprecation from #20908 remains.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2017-04-11T12:26:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334754",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,6 @@
 The functionality of `deprecated_callable_import` can be achieved in a simpler and more general way by a lazy import with deprecation.
 
-So we deprecate `deprecated_callable_import` in this ticket and remove all existing uses. Those existing uses come from #17034, #17867, #19096, #19315, #20908 so they can be removed.
+So we deprecate `deprecated_callable_import` in this ticket and remove existing uses coming from #17034, #17867, #19096, #19315. Only one deprecation from #20908 remains.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_334755.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n+The functionality of `deprecated_callable_import` can be achieved in a simpler and more general way by a lazy import with deprecation.\n \n+So we remove `deprecated_callable_import` in this ticket and remove existing uses coming from #17034, #17867, #19096, #19315. Only one deprecation from #20908 remains.\n \n Author: Jeroen Demeyer\n \n```\n",
    "created_at": "2017-04-11T12:36:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334755",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
+The functionality of `deprecated_callable_import` can be achieved in a simpler and more general way by a lazy import with deprecation.
 
+So we remove `deprecated_callable_import` in this ticket and remove existing uses coming from #17034, #17867, #19096, #19315. Only one deprecation from #20908 remains.
 
 Author: Jeroen Demeyer
 
```




---

archive/issue_comments_334756.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-04-11T13:03:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334756",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334757.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-04-11T13:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334757",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_334758.json:
```json
{
    "body": "<a id='comment:6'></a>To make `lazy_import` invisible, I think the following is cleaner\n\n```\nfrom sage.misc.lazy_import import lazy_import\nlazy_import('sage.some.package', 'some_function', deprecation=666)\ndel lazy_import\n```",
    "created_at": "2017-04-11T13:47:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334758",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>To make `lazy_import` invisible, I think the following is cleaner

```
from sage.misc.lazy_import import lazy_import
lazy_import('sage.some.package', 'some_function', deprecation=666)
del lazy_import
```



---

archive/issue_comments_334759.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 vdelecroix]:\n> I think the following is cleaner\n\n\nI think that `import lazy_import as _lazy_import` is better, because there are less chances for mistakes (one could easily forget to add the `del lazy_import` or accidentally remove that statement).",
    "created_at": "2017-04-11T13:49:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334759",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>Replying to [comment:6 vdelecroix]:
> I think the following is cleaner


I think that `import lazy_import as _lazy_import` is better, because there are less chances for mistakes (one could easily forget to add the `del lazy_import` or accidentally remove that statement).



---

archive/issue_comments_334760.json:
```json
{
    "body": "<a id='comment:8'></a>This looks good to me.",
    "created_at": "2017-05-09T15:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334760",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>This looks good to me.



---

archive/issue_comments_334761.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-09T15:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334761",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_334762.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-05-11T22:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334762",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_334763.json:
```json
{
    "body": "<a id='comment:9'></a>Merge conflict...",
    "created_at": "2017-05-11T22:02:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334763",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:9'></a>Merge conflict...



---

archive/issue_comments_334764.json:
```json
{
    "body": "<a id='comment:10'></a>it does merge cleanly in 8.0.beta5, thus I have no idea where the merge conflict comes from.",
    "created_at": "2017-05-11T22:34:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334764",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>it does merge cleanly in 8.0.beta5, thus I have no idea where the merge conflict comes from.



---

archive/issue_comments_334765.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-05-12T08:36:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334765",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_334766.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-05-13T09:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334766",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_334767.json:
```json
{
    "body": "<a id='comment:12'></a>Merge conflict... Obviously the merge conflict comes from stuff in beta6, duh.",
    "created_at": "2017-05-13T09:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334767",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>Merge conflict... Obviously the merge conflict comes from stuff in beta6, duh.



---

archive/issue_comments_334768.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-05-13T20:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334768",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_334769.json:
```json
{
    "body": "<a id='comment:13'></a>it was weird seeing \"Merge conflict\" against a branch that was not public yet :-)\nanyhow, it's a trivial merge, one chunk was to be deleted.",
    "created_at": "2017-05-13T20:00:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334769",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>it was weird seeing "Merge conflict" against a branch that was not public yet :-)
anyhow, it's a trivial merge, one chunk was to be deleted.



---

archive/issue_comments_334770.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-05-14T09:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334770",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_334771.json:
```json
{
    "body": "<a id='comment:14'></a>\n```\nsage -t --long --warn-long 72.0 src/sage/combinat/designs/design_catalog.py\n**********************************************************************\nFile \"src/sage/combinat/designs/design_catalog.py\", line 77, in sage.combinat.designs.design_catalog\nFailed example:\n    'absolute_import' in dir(designs) or 'deprecated_callable_import' in dir(designs)\nExpected:\n    False\nGot:\n    True\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.combinat.designs.design_catalog\n    [2 tests, 1 failure, 0.27 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 72.0 src/sage/combinat/designs/design_catalog.py  # 1 doctest failed\n----------------------------------------------------------------------\nTotal time for all tests: 0.3 seconds\n    cpu time: 0.3 seconds\n    cumulative wall time: 0.3 seconds\n```",
    "created_at": "2017-05-14T09:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334771",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>
```
sage -t --long --warn-long 72.0 src/sage/combinat/designs/design_catalog.py
**********************************************************************
File "src/sage/combinat/designs/design_catalog.py", line 77, in sage.combinat.designs.design_catalog
Failed example:
    'absolute_import' in dir(designs) or 'deprecated_callable_import' in dir(designs)
Expected:
    False
Got:
    True
**********************************************************************
1 item had failures:
   1 of   3 in sage.combinat.designs.design_catalog
    [2 tests, 1 failure, 0.27 s]
----------------------------------------------------------------------
sage -t --long --warn-long 72.0 src/sage/combinat/designs/design_catalog.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 0.3 seconds
    cpu time: 0.3 seconds
    cumulative wall time: 0.3 seconds
```



---

archive/issue_comments_334772.json:
```json
{
    "body": "<a id='comment:15'></a>should the following be applied:\n\n```\n--- a/src/sage/combinat/designs/design_catalog.py\n+++ b/src/sage/combinat/designs/design_catalog.py\n@@ -74,7 +74,7 @@ REFERENCES:\n \n TESTS::\n \n-    sage: 'absolute_import' in dir(designs) or 'deprecated_callable_import' in dir(designs)\n+    sage: 'deprecated_callable_import' in dir(designs)\n     False\n \"\"\"\n from __future__ import absolute_import\n```\n\n(I don't get the `absolute_import` part in this test---surely `absolute_import` is all over the place; removing it from the test makes the test pass)",
    "created_at": "2017-05-14T10:34:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334772",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>should the following be applied:

```
--- a/src/sage/combinat/designs/design_catalog.py
+++ b/src/sage/combinat/designs/design_catalog.py
@@ -74,7 +74,7 @@ REFERENCES:
 
 TESTS::
 
-    sage: 'absolute_import' in dir(designs) or 'deprecated_callable_import' in dir(designs)
+    sage: 'deprecated_callable_import' in dir(designs)
     False
 """
 from __future__ import absolute_import
```

(I don't get the `absolute_import` part in this test---surely `absolute_import` is all over the place; removing it from the test makes the test pass)



---

archive/issue_comments_334773.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2017-05-14T17:47:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334773",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_334774.json:
```json
{
    "body": "<a id='comment:17'></a>oops, wrong branch",
    "created_at": "2017-05-14T17:48:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334774",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>oops, wrong branch



---

archive/issue_comments_334775.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-05-14T17:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334775",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_334776.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-05-14T17:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334776",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_334777.json:
```json
{
    "body": "<a id='comment:19'></a>the last commit removes an obsolete test - there is no `deprecated_callable_import` anywhere any more anyway.",
    "created_at": "2017-05-14T17:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334777",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>the last commit removes an obsolete test - there is no `deprecated_callable_import` anywhere any more anyway.



---

archive/issue_comments_334778.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 dimpase]:\n> the last commit removes an obsolete test - there is no `deprecated_callable_import` anywhere any more anyway.\n\n\nWell, the test was about `absolute_import` and `deprecated_callable_import`. You only fixed the latter, I now fixed the former too.",
    "created_at": "2017-05-15T16:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334778",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>Replying to [comment:19 dimpase]:
> the last commit removes an obsolete test - there is no `deprecated_callable_import` anywhere any more anyway.


Well, the test was about `absolute_import` and `deprecated_callable_import`. You only fixed the latter, I now fixed the former too.



---

archive/issue_comments_334779.json:
```json
{
    "body": "<a id='comment:22'></a>Sage imports drive me mad elsewhere too: #22799#comment:90\n:-)\n\n---\nNew commits:",
    "created_at": "2017-05-15T16:37:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334779",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:22'></a>Sage imports drive me mad elsewhere too: #22799#comment:90
:-)

---
New commits:



---

archive/issue_comments_334780.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-15T16:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334780",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_059291.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-16T22:22:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22796#event-59291"
}
```



---

archive/issue_comments_334781.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-16T22:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22796",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22796#issuecomment-334781",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
