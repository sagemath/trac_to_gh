# Issue 22713: Multiple zeta algebra

archive/issues_022476.json:
```json
{
    "body": "**Old description:**\n\nThere is code in Pynac's `zeta2_eval` allowing `lst` arguments. Let's check if that can be interfaced to Python. Is there numerics available in mpmath or arb?\n\nhttps://en.wikipedia.org/wiki/Multiple_zeta_function\n\n**New description:**\n\nThis ticket is now used to implement the algebra of MZV, using algorithms of Francis Brown.\n\nSample computation:\n\n```\nsage: Z = Multizeta\nsage: M = matrix(2,2,[Z(2),Z(3),Z(4),Z(5)])\nsage: M.det()\n-10*\u03b6(1,6) - 5*\u03b6(2,5) - \u03b6(3,4) + \u03b6(4,3) + \u03b6(5,2)\n```\n\nCC:  @videlec @tscrim @kedlaya @dwbump @JohnCremona\n\nKeywords: motives\n\nBranch/Commit: c9e3b4cf905f5bb81821e8a078eb1dd1424930dd\n\nReviewer: Vincent Delecroix\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22713\n\n",
    "closed_at": "2020-05-26T21:49:48Z",
    "created_at": "2017-03-30T07:56:51Z",
    "labels": [
        "component: number theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Multiple zeta algebra",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22713",
    "user": "https://github.com/rwst"
}
```
**Old description:**

There is code in Pynac's `zeta2_eval` allowing `lst` arguments. Let's check if that can be interfaced to Python. Is there numerics available in mpmath or arb?

https://en.wikipedia.org/wiki/Multiple_zeta_function

**New description:**

This ticket is now used to implement the algebra of MZV, using algorithms of Francis Brown.

Sample computation:

```
sage: Z = Multizeta
sage: M = matrix(2,2,[Z(2),Z(3),Z(4),Z(5)])
sage: M.det()
-10*ζ(1,6) - 5*ζ(2,5) - ζ(3,4) + ζ(4,3) + ζ(5,2)
```

CC:  @videlec @tscrim @kedlaya @dwbump @JohnCremona

Keywords: motives

Branch/Commit: c9e3b4cf905f5bb81821e8a078eb1dd1424930dd

Reviewer: Vincent Delecroix

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22713





---

archive/issue_comments_333440.json:
```json
{
    "body": "<a id='comment:1'></a>see also #18010",
    "created_at": "2019-12-06T13:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333440",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>see also #18010



---

archive/issue_comments_333441.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2020-01-02T09:45:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333441",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_333442.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-02T09:53:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333442",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_059177.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-01-02T10:31:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22713#event-59177"
}
```



---

archive/issue_comments_333443.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-01-04T11:05:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333443",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333444.json:
```json
{
    "body": "<a id='comment:6'></a>Here is a first advanced sketch for an implementation of the ring of Multiple Zeta values. This in fact implements the motivic MZV, in some sense, following the algorithm given by Francis Brown.\n\nI would appreciate comments and suggestions.\n\n---\nNew commits:",
    "created_at": "2020-03-18T15:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333444",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>Here is a first advanced sketch for an implementation of the ring of Multiple Zeta values. This in fact implements the motivic MZV, in some sense, following the algorithm given by Francis Brown.

I would appreciate comments and suggestions.

---
New commits:



---

archive/issue_comments_333445.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2020-03-18T15:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333445",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_333446.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,17 @@\n There is code in Pynac's `zeta2_eval` allowing `lst` arguments. Let's check if that can be interfaced to Python. Is there numerics available in mpmath or arb?\n \n https://en.wikipedia.org/wiki/Multiple_zeta_function\n+\n+EDIT: ticket used to implement the algebra of MZV.\n+\n+Sample computation:\n+\n+```\n+sage: Z = Multizeta\n+sage: M = matrix(2,2,[Z(2),Z(3),Z(4),Z(5)])\n+sage: M.det()\n+-10*\u03b6(1,6) - 5*\u03b6(2,5) - \u03b6(3,4) + \u03b6(4,3) + \u03b6(5,2)\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2020-03-18T15:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333446",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,17 @@
 There is code in Pynac's `zeta2_eval` allowing `lst` arguments. Let's check if that can be interfaced to Python. Is there numerics available in mpmath or arb?
 
 https://en.wikipedia.org/wiki/Multiple_zeta_function
+
+EDIT: ticket used to implement the algebra of MZV.
+
+Sample computation:
+
+```
+sage: Z = Multizeta
+sage: M = matrix(2,2,[Z(2),Z(3),Z(4),Z(5)])
+sage: M.det()
+-10*ζ(1,6) - 5*ζ(2,5) - ζ(3,4) + ζ(4,3) + ζ(5,2)
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_333447.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-18T15:51:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333447",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333448.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-03-19T08:35:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333448",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_333449.json:
```json
{
    "body": "<a id='comment:10'></a>Do you know anybody that could be interested in this stuff, and would review ?",
    "created_at": "2020-03-27T09:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333449",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>Do you know anybody that could be interested in this stuff, and would review ?



---

archive/issue_comments_333450.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2020-03-27T09:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333450",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_333451.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,21 @@\n+**Old description:**\n \n+There is code in Pynac's `zeta2_eval` allowing `lst` arguments. Let's check if that can be interfaced to Python. Is there numerics available in mpmath or arb?\n+\n+https://en.wikipedia.org/wiki/Multiple_zeta_function\n+\n+**New description:**\n+\n+This ticket is now used to implement the algebra of MZV, using algorithms of Francis Brown.\n+\n+Sample computation:\n+\n+```\n+sage: Z = Multizeta\n+sage: M = matrix(2,2,[Z(2),Z(3),Z(4),Z(5)])\n+sage: M.det()\n+-10*\u03b6(1,6) - 5*\u03b6(2,5) - \u03b6(3,4) + \u03b6(4,3) + \u03b6(5,2)\n+```\n \n Comment: 1\n \n``````\n",
    "created_at": "2020-03-27T09:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333451",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,21 @@
+**Old description:**
 
+There is code in Pynac's `zeta2_eval` allowing `lst` arguments. Let's check if that can be interfaced to Python. Is there numerics available in mpmath or arb?
+
+https://en.wikipedia.org/wiki/Multiple_zeta_function
+
+**New description:**
+
+This ticket is now used to implement the algebra of MZV, using algorithms of Francis Brown.
+
+Sample computation:
+
+```
+sage: Z = Multizeta
+sage: M = matrix(2,2,[Z(2),Z(3),Z(4),Z(5)])
+sage: M.det()
+-10*ζ(1,6) - 5*ζ(2,5) - ζ(3,4) + ζ(4,3) + ζ(5,2)
+```
 
 Comment: 1
 
``````




---

archive/issue_comments_333452.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 chapoton]:\n> Do you know anybody that could be interested in this stuff, and would review ?\n\n\nI am not sure. I have cc-ed Dan Bump, who might be willing to or know someone who could. I can do the technical review and would be willing to set a positive review if nobody else is willing to check the mathematics. However, I would rather have a mathematical review.",
    "created_at": "2020-03-27T10:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333452",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>Replying to [comment:10 chapoton]:
> Do you know anybody that could be interested in this stuff, and would review ?


I am not sure. I have cc-ed Dan Bump, who might be willing to or know someone who could. I can do the technical review and would be willing to set a positive review if nobody else is willing to check the mathematics. However, I would rather have a mathematical review.



---

archive/issue_comments_333453.json:
```json
{
    "body": "<a id='comment:12'></a>Actually, I thought about implementing the same thing! I can start the review next week (or maybe even this week-end).",
    "created_at": "2020-03-27T10:59:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333453",
    "user": "https://github.com/videlec"
}
```

<a id='comment:12'></a>Actually, I thought about implementing the same thing! I can start the review next week (or maybe even this week-end).



---

archive/issue_comments_333454.json:
```json
{
    "body": "<a id='comment:13'></a>Cool ! Ca manque sans doute encore un peu de documentation, mais c'est pleinement fonctionnel (je crois).",
    "created_at": "2020-03-28T21:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333454",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'></a>Cool ! Ca manque sans doute encore un peu de documentation, mais c'est pleinement fonctionnel (je crois).



---

archive/issue_comments_333455.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2020-03-29T15:49:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333455",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_333456.json:
```json
{
    "body": "<a id='comment:14'></a>**Major code integration issues**\n\n- why in `modular`?\n- It might be useful to distinguish between multizeta values and\n  their algebra\n- what is the relation between your code and the already existing\n\n```\nsage: zeta(3)\nzeta(3)\n```\n\n**Major design issues**\n\nWhy are multizeta relations not part of the algebra!?\n\n```\nsage: 4*Multizeta(1,3) == Multizeta(4)\nFalse\nsage: Multizeta(2,2,2) == pi**6 / 7.factorial()\nFalse\n```\nThis is the most interesting part of the story! A lot is (conjecturally) known\n\n- the algebra has a graduation by weight (sum of the composition)\n- the algebra has a filtration by length\n- a very simple additive basis (Hoffman): multizeta values whith entries 2 and 3\n  (it is hence very easy to provide additive basis in fixed weight)\n- a rather simple multiplicative basis (Broadhurst)\n\n**Minor**\n\n- You should be more explicit about this comment\n\n```\nBeware that this conversion involves the sign `(-1)^w` where `w` is the\nlength of the composition and the number of `1`in the word in 0 and 1.\n```\n- the string representation is not informative enough\n\n```\nsage: m = Multizeta(3,2,2)\nsage: m.parent()\nAlgebra of MZV as zeta(n1,...nr) over Rational Field\n```\n- why do you cache numerical pari evaluation!? Also pari has a much faster evaluation for all multiple zeta values of given weight `zetamultall` which makes sense in this context.",
    "created_at": "2020-03-29T15:49:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333456",
    "user": "https://github.com/videlec"
}
```

<a id='comment:14'></a>**Major code integration issues**

- why in `modular`?
- It might be useful to distinguish between multizeta values and
  their algebra
- what is the relation between your code and the already existing

```
sage: zeta(3)
zeta(3)
```

**Major design issues**

Why are multizeta relations not part of the algebra!?

```
sage: 4*Multizeta(1,3) == Multizeta(4)
False
sage: Multizeta(2,2,2) == pi**6 / 7.factorial()
False
```
This is the most interesting part of the story! A lot is (conjecturally) known

- the algebra has a graduation by weight (sum of the composition)
- the algebra has a filtration by length
- a very simple additive basis (Hoffman): multizeta values whith entries 2 and 3
  (it is hence very easy to provide additive basis in fixed weight)
- a rather simple multiplicative basis (Broadhurst)

**Minor**

- You should be more explicit about this comment

```
Beware that this conversion involves the sign `(-1)^w` where `w` is the
length of the composition and the number of `1`in the word in 0 and 1.
```
- the string representation is not informative enough

```
sage: m = Multizeta(3,2,2)
sage: m.parent()
Algebra of MZV as zeta(n1,...nr) over Rational Field
```
- why do you cache numerical pari evaluation!? Also pari has a much faster evaluation for all multiple zeta values of given weight `zetamultall` which makes sense in this context.



---

archive/issue_comments_333457.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-29T17:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333457",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333458.json:
```json
{
    "body": "<a id='comment:16'></a>Merci pour les commentaires !\n\nReplying to [comment:14 vdelecroix]:\n> **Major code integration issues**\n> \n> - why in `modular`?\n\n\nWell, this is the current place of some motivic stuff, for example hypergeometric motives. Any better suggestion ?\n\n> - It might be useful to distinguish between multizeta values and\n>   their algebra\n\n\nWhat do you mean ? change `Multizetas` to `MultizetasAlgebra` ?\n\n> - what is the relation between your code and the already existing\n> \n> ```\n> sage: zeta(3)\n> zeta(3)\n> ```\n\n\nNo relation. Symbolic ring is the root of all evil. I think that conversions are not really possible : from SR to MZV, it would have a very small domain. From MZV to SR, it would fail for lack of a symbolic MZV function. This is not at all what I want to do here.\n\n> **Major design issues**\n> \n> Why are multizeta relations not part of the algebra!?\n> \n> ```\n> sage: 4*Multizeta(1,3) == Multizeta(4)\n> False\n> sage: Multizeta(2,2,2) == pi**6 / 7.factorial()\n> False\n> ```\n\n\nI just forgot to implement equality for one of the two classes. Done now.\n\n> This is the most interesting part of the story! A lot is (conjecturally) known\n> \n> - the algebra has a graduation by weight (sum of the composition)\n> - the algebra has a filtration by length\n> - a very simple additive basis (Hoffman): multizeta values whith entries 2 and 3\n>   (it is hence very easy to provide additive basis in fixed weight)\n> - a rather simple multiplicative basis (Broadhurst)\n\n\nYes, sure. Because the implemented algebra is the \"motivic algebra of MZV\", these statements are not conjectural, but theorems. We already have the grading (see `M.category()`), in fact. There is room for a lot more work. It would be more fun to do this in a collaborative way. I spent a lot of time already just to make the \"motivic\" equality work correctly.\n\n> **Minor**\n> \n> - You should be more explicit about this comment\n> \n> ```\n> Beware that this conversion involves the sign `(-1)^w` where `w` is the\n> length of the composition and the number of `1`in the word in 0 and 1.\n> ```\n\n\nI hav expanded the comment.\n\n> - the string representation is not informative enough\n> \n> ```\n> sage: m = Multizeta(3,2,2)\n> sage: m.parent()\n> Algebra of MZV as zeta(n1,...nr) over Rational Field\n> ```\n\n\nI changed the repr to be more verbose.\n\n> - why do you cache numerical pari evaluation!? Also pari has a much faster evaluation for all multiple zeta values of given weight `zetamultall` which makes sense in this context.\n\n\nI cache that because I need a lot of them. But maybe this is not a good idea, given that their number is a power of 2. And of course, using the faster pari method to copmpute them all may be a good idea. But this depends on how the algebra is used.",
    "created_at": "2020-03-29T17:22:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333458",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:16'></a>Merci pour les commentaires !

Replying to [comment:14 vdelecroix]:
> **Major code integration issues**
> 
> - why in `modular`?


Well, this is the current place of some motivic stuff, for example hypergeometric motives. Any better suggestion ?

> - It might be useful to distinguish between multizeta values and
>   their algebra


What do you mean ? change `Multizetas` to `MultizetasAlgebra` ?

> - what is the relation between your code and the already existing
> 
> ```
> sage: zeta(3)
> zeta(3)
> ```


No relation. Symbolic ring is the root of all evil. I think that conversions are not really possible : from SR to MZV, it would have a very small domain. From MZV to SR, it would fail for lack of a symbolic MZV function. This is not at all what I want to do here.

> **Major design issues**
> 
> Why are multizeta relations not part of the algebra!?
> 
> ```
> sage: 4*Multizeta(1,3) == Multizeta(4)
> False
> sage: Multizeta(2,2,2) == pi**6 / 7.factorial()
> False
> ```


I just forgot to implement equality for one of the two classes. Done now.

> This is the most interesting part of the story! A lot is (conjecturally) known
> 
> - the algebra has a graduation by weight (sum of the composition)
> - the algebra has a filtration by length
> - a very simple additive basis (Hoffman): multizeta values whith entries 2 and 3
>   (it is hence very easy to provide additive basis in fixed weight)
> - a rather simple multiplicative basis (Broadhurst)


Yes, sure. Because the implemented algebra is the "motivic algebra of MZV", these statements are not conjectural, but theorems. We already have the grading (see `M.category()`), in fact. There is room for a lot more work. It would be more fun to do this in a collaborative way. I spent a lot of time already just to make the "motivic" equality work correctly.

> **Minor**
> 
> - You should be more explicit about this comment
> 
> ```
> Beware that this conversion involves the sign `(-1)^w` where `w` is the
> length of the composition and the number of `1`in the word in 0 and 1.
> ```


I hav expanded the comment.

> - the string representation is not informative enough
> 
> ```
> sage: m = Multizeta(3,2,2)
> sage: m.parent()
> Algebra of MZV as zeta(n1,...nr) over Rational Field
> ```


I changed the repr to be more verbose.

> - why do you cache numerical pari evaluation!? Also pari has a much faster evaluation for all multiple zeta values of given weight `zetamultall` which makes sense in this context.


I cache that because I need a lot of them. But maybe this is not a good idea, given that their number is a power of 2. And of course, using the faster pari method to copmpute them all may be a good idea. But this depends on how the algebra is used.



---

archive/issue_comments_333459.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 chapoton]:\n\n> There is room for a lot more work. It would be more fun to do this in a collaborative way. I spent a lot of time already just to make the \"motivic\" equality work correctly.\n\n\nConsider my comments not as \"do this in this ticket\" but rather as\n- how does Vincent can make this useful for him (or at least understandable)? Given the fact that you spent a lot of time on this you know the code much better than I do.\n- Make sure that all what I suggest can be done in the future without changing the design.\n\nOnce I am convinced by the design, I can go through the documentation and suggest/change/expand (inside a commit).",
    "created_at": "2020-03-29T18:10:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333459",
    "user": "https://github.com/videlec"
}
```

<a id='comment:17'></a>Replying to [comment:16 chapoton]:

> There is room for a lot more work. It would be more fun to do this in a collaborative way. I spent a lot of time already just to make the "motivic" equality work correctly.


Consider my comments not as "do this in this ticket" but rather as
- how does Vincent can make this useful for him (or at least understandable)? Given the fact that you spent a lot of time on this you know the code much better than I do.
- Make sure that all what I suggest can be done in the future without changing the design.

Once I am convinced by the design, I can go through the documentation and suggest/change/expand (inside a commit).



---

archive/issue_comments_333460.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:16 chapoton]:\n> Merci pour les commentaires !\n> \n> Replying to [comment:14 vdelecroix]:\n> > **Major code integration issues**\n> > \n> > - why in `modular`?\n \n> \n> Well, this is the current place of some motivic stuff, for example hypergeometric motives. Any better suggestion ?\n\n\n`arith`? `motives`?\n\nI do not see the link with modular form (which does not mean that there is not one).\n \n> > - It might be useful to distinguish between multizeta values and\n> >   their algebra\n \n> \n> What do you mean ? change `Multizetas` to `MultizetasAlgebra` ?\n\n\nNot exactly. `(s1, s2, s3) -> zeta(s1, s2, s3)` is a function. `zeta(3, 5, 2)` is a special value of this function which is a real number. But the `Multizeta` you designed lives in a different world. It has an evaluation to the reals. But this is not clearly stated in the module documentation to my mind.\n\n> > - what is the relation between your code and the already existing\n> > \n> > ```\n> > sage: zeta(3)\n> > zeta(3)\n> > ```\n\n> \n> No relation. Symbolic ring is the root of all evil. I think that conversions are not really possible : from SR to MZV, it would have a very small domain. From MZV to SR, it would fail for lack of a symbolic MZV function. This is not at all what I want to do here.\n\n\nBut `pi` and `zeta(2)` are (when considered as real numbers) part of the (image in the real numbers of the) algebra you are trying to design. This is confusing, unless everything becomes \"motivic\".\n\n> > **Major design issues**\n> > \n> > Why are multizeta relations not part of the algebra!?\n> > \n> > ```\n> > sage: 4*Multizeta(1,3) == Multizeta(4)\n> > False\n> > sage: Multizeta(2,2,2) == pi**6 / 7.factorial()\n> > False\n> > ```\n\n> \n> I just forgot to implement equality for one of the two classes. Done now.\n\n\nWunderbar!\n\n> > This is the most interesting part of the story! A lot is (conjecturally) known\n> > \n> > - the algebra has a graduation by weight (sum of the composition)\n> > - the algebra has a filtration by length\n> > - a very simple additive basis (Hoffman): multizeta values whith entries 2 and 3\n> >   (it is hence very easy to provide additive basis in fixed weight)\n> > - a rather simple multiplicative basis (Broadhurst)\n \n> \n> Yes, sure. Because the implemented algebra is the \"motivic algebra of MZV\", these statements are not conjectural, but theorems.\n\n\nAs I said, it would help if there were a clearer distinction between this motivic version and its image in the set of real numbers.\n\nAlso, if the algebra of motivic MZV is \"just\" a special case of `FreeZinbielAlgebra` why do you hide it under this `F_ring` function? I have hard time understanding the logic of your proposal. If `FreeZinbielAlgebra` lacks support for infinite basis, shouldn't it be the purpose of this ticket (or a dependency of this one)?\n\n> We already have the grading (see `M.category()`), in fact.\n\n\nWhat I want to be able to do (maybe this is already possible)\n\n- access a graded component (as a finite dimensional `Q`-vector space), let say `M` and do `M.basis()`, `M.dimension()`, ... And more generally, perform linear algebra there.\n\n> > - the string representation is not informative enough\n> > \n> > ```\n> > sage: m = Multizeta(3,2,2)\n> > sage: m.parent()\n> > Algebra of MZV as zeta(n1,...nr) over Rational Field\n> > ```\n\n> \n> I changed the repr to be more verbose.\n\n\nPlease use \"motivic zeta values\" here (unless I misunderstood something).",
    "created_at": "2020-03-29T18:13:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333460",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'></a>Replying to [comment:16 chapoton]:
> Merci pour les commentaires !
> 
> Replying to [comment:14 vdelecroix]:
> > **Major code integration issues**
> > 
> > - why in `modular`?
 
> 
> Well, this is the current place of some motivic stuff, for example hypergeometric motives. Any better suggestion ?


`arith`? `motives`?

I do not see the link with modular form (which does not mean that there is not one).
 
> > - It might be useful to distinguish between multizeta values and
> >   their algebra
 
> 
> What do you mean ? change `Multizetas` to `MultizetasAlgebra` ?


Not exactly. `(s1, s2, s3) -> zeta(s1, s2, s3)` is a function. `zeta(3, 5, 2)` is a special value of this function which is a real number. But the `Multizeta` you designed lives in a different world. It has an evaluation to the reals. But this is not clearly stated in the module documentation to my mind.

> > - what is the relation between your code and the already existing
> > 
> > ```
> > sage: zeta(3)
> > zeta(3)
> > ```

> 
> No relation. Symbolic ring is the root of all evil. I think that conversions are not really possible : from SR to MZV, it would have a very small domain. From MZV to SR, it would fail for lack of a symbolic MZV function. This is not at all what I want to do here.


But `pi` and `zeta(2)` are (when considered as real numbers) part of the (image in the real numbers of the) algebra you are trying to design. This is confusing, unless everything becomes "motivic".

> > **Major design issues**
> > 
> > Why are multizeta relations not part of the algebra!?
> > 
> > ```
> > sage: 4*Multizeta(1,3) == Multizeta(4)
> > False
> > sage: Multizeta(2,2,2) == pi**6 / 7.factorial()
> > False
> > ```

> 
> I just forgot to implement equality for one of the two classes. Done now.


Wunderbar!

> > This is the most interesting part of the story! A lot is (conjecturally) known
> > 
> > - the algebra has a graduation by weight (sum of the composition)
> > - the algebra has a filtration by length
> > - a very simple additive basis (Hoffman): multizeta values whith entries 2 and 3
> >   (it is hence very easy to provide additive basis in fixed weight)
> > - a rather simple multiplicative basis (Broadhurst)
 
> 
> Yes, sure. Because the implemented algebra is the "motivic algebra of MZV", these statements are not conjectural, but theorems.


As I said, it would help if there were a clearer distinction between this motivic version and its image in the set of real numbers.

Also, if the algebra of motivic MZV is "just" a special case of `FreeZinbielAlgebra` why do you hide it under this `F_ring` function? I have hard time understanding the logic of your proposal. If `FreeZinbielAlgebra` lacks support for infinite basis, shouldn't it be the purpose of this ticket (or a dependency of this one)?

> We already have the grading (see `M.category()`), in fact.


What I want to be able to do (maybe this is already possible)

- access a graded component (as a finite dimensional `Q`-vector space), let say `M` and do `M.basis()`, `M.dimension()`, ... And more generally, perform linear algebra there.

> > - the string representation is not informative enough
> > 
> > ```
> > sage: m = Multizeta(3,2,2)
> > sage: m.parent()
> > Algebra of MZV as zeta(n1,...nr) over Rational Field
> > ```

> 
> I changed the repr to be more verbose.


Please use "motivic zeta values" here (unless I misunderstood something).



---

archive/issue_comments_333461.json:
```json
{
    "body": "<a id='comment:19'></a>> > - why do you cache numerical pari evaluation!? Also pari has a much faster evaluation for all multiple zeta values of given weight `zetamultall` which makes sense in this context.\n \n> \n> I cache that because I need a lot of them. But maybe this is not a good idea, given that their number is a power of 2. And of course, using the faster pari method to copmpute them all may be a good idea. But this depends on how the algebra is used.\n\n\nThat you need a lot of them is not a good enough reason! But this is a very minor issue for sure.",
    "created_at": "2020-03-29T18:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333461",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>> > - why do you cache numerical pari evaluation!? Also pari has a much faster evaluation for all multiple zeta values of given weight `zetamultall` which makes sense in this context.
 
> 
> I cache that because I need a lot of them. But maybe this is not a good idea, given that their number is a power of 2. And of course, using the faster pari method to copmpute them all may be a good idea. But this depends on how the algebra is used.


That you need a lot of them is not a good enough reason! But this is a very minor issue for sure.



---

archive/issue_comments_333462.json:
```json
{
    "body": "<a id='comment:20'></a>It should be easy to extend the `FreeZinbielAlgebra` to support infinite bases. From looking at the code, it just requires a little bit of changing around of the `__classcall_private__` and `__init__` methods to allow for infinite generating set, along with a slight tweaks to the construction functor to check this cases. This might be of independent interest.",
    "created_at": "2020-03-30T08:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333462",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>It should be easy to extend the `FreeZinbielAlgebra` to support infinite bases. From looking at the code, it just requires a little bit of changing around of the `__classcall_private__` and `__init__` methods to allow for infinite generating set, along with a slight tweaks to the construction functor to check this cases. This might be of independent interest.



---

archive/issue_comments_333463.json:
```json
{
    "body": "<a id='comment:21'></a>Hello Travis,\n\nI would like very much to have that, but did not feel able to do that. It was already hard to allow numbered variables such as \"z2\" as generator names. What we need here is the free Zinbiel algebra on the set of odd integers greater than 3.",
    "created_at": "2020-03-30T08:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333463",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>Hello Travis,

I would like very much to have that, but did not feel able to do that. It was already hard to allow numbered variables such as "z2" as generator names. What we need here is the free Zinbiel algebra on the set of odd integers greater than 3.



---

archive/issue_comments_333464.json:
```json
{
    "body": "<a id='comment:22'></a>I will do this tomorrow (it is quite late here and I don't think I have the energy to do it today). To sketch what I will do to `FreeZinbielAlgebra`:\n\nIn the `__classcall_private__` allow `n` to be a non-integer, in which case `names` should be `None` and just pass that to the `__init__`. There `n`, in this case, will get fed to `Alphabet`. Then `algebra_generators` will need a case when `self.variable_names() is not None`. Then there will also be some slight cases when checking stuff in the construction functor with disabling those features as checking trivial intersection of infinite sets is not computable.",
    "created_at": "2020-03-30T08:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333464",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>I will do this tomorrow (it is quite late here and I don't think I have the energy to do it today). To sketch what I will do to `FreeZinbielAlgebra`:

In the `__classcall_private__` allow `n` to be a non-integer, in which case `names` should be `None` and just pass that to the `__init__`. There `n`, in this case, will get fed to `Alphabet`. Then `algebra_generators` will need a case when `self.variable_names() is not None`. Then there will also be some slight cases when checking stuff in the construction functor with disabling those features as checking trivial intersection of infinite sets is not computable.



---

archive/issue_comments_333465.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-30T15:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333465",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333466.json:
```json
{
    "body": "<a id='comment:24'></a>What is your rule about lower case/upper case in mathematic terms such as `motivic Multiple Zeta Values`?\n\nEDIT: for example it appears in the doc as `motivic multiple zeta values`.",
    "created_at": "2020-03-30T15:40:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333466",
    "user": "https://github.com/videlec"
}
```

<a id='comment:24'></a>What is your rule about lower case/upper case in mathematic terms such as `motivic Multiple Zeta Values`?

EDIT: for example it appears in the doc as `motivic multiple zeta values`.



---

archive/issue_comments_333467.json:
```json
{
    "body": "<a id='comment:25'></a>What do you mean by `Although this set of relations is not explicit`?",
    "created_at": "2020-03-30T15:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333467",
    "user": "https://github.com/videlec"
}
```

<a id='comment:25'></a>What do you mean by `Although this set of relations is not explicit`?



---

archive/issue_comments_333468.json:
```json
{
    "body": "<a id='comment:26'></a>Salut Vincent. Je crois qu'il faut lire l'article de Brown pour comprendre un peu ce que fait le programme.\n\nConcernant les majuscules/minuscules : il est d'usage de parler de MZV, c'est pour ca que j'ai garder les majuscules \u00e0 Multiple Zeta Values. Mais d'un autre cot\u00e9, je propose les fonctions Multizeta et Multizetas, ce qui n'est pas tres coherent.\n\nConcernant les relations non explicites : l'ideal des relations n'est pas explicite, mais defini grosso modo comme \"l'ensemble des relations induites par les changements de variables en geometrie algebrique\". Et malgr\u00e9 tout, les gens comme F. Brown parviennent \u00e0 d\u00e9crire le quotient, \u00e0 en donner des bases, etc. Mais on ne connait pas d'ensemble de generateurs de l'ideal des relations, sauf de facon conjecturale.",
    "created_at": "2020-03-30T15:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333468",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:26'></a>Salut Vincent. Je crois qu'il faut lire l'article de Brown pour comprendre un peu ce que fait le programme.

Concernant les majuscules/minuscules : il est d'usage de parler de MZV, c'est pour ca que j'ai garder les majuscules à Multiple Zeta Values. Mais d'un autre coté, je propose les fonctions Multizeta et Multizetas, ce qui n'est pas tres coherent.

Concernant les relations non explicites : l'ideal des relations n'est pas explicite, mais defini grosso modo comme "l'ensemble des relations induites par les changements de variables en geometrie algebrique". Et malgré tout, les gens comme F. Brown parviennent à décrire le quotient, à en donner des bases, etc. Mais on ne connait pas d'ensemble de generateurs de l'ideal des relations, sauf de facon conjecturale.



---

archive/issue_comments_333469.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-30T16:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333469",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333470.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-30T17:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333471.json:
```json
{
    "body": "<a id='comment:29'></a>Testing relations from [wikipedia](https://en.wikipedia.org/wiki/Multiple_zeta_function#Two_parameters_case) (which has the opposite convention for the order of entries)\n\n```\nsage: assert Multizeta(2,2) == 3/4 * Multizeta(4)\nsage: assert Multizeta(2,3) == 3*Multizeta(2)*Multizeta(3) - 11/2*Multizeta(5)\nsage: assert Multizeta(2,4) == Multizeta(3)**2 - 4/3*Multizeta(6)\nsage: assert Multizeta(2,5) == 5*Multizeta(2)*Multizeta(5) + 2*Multizeta(3)*Multizeta(4) - 11*Multizeta(7)\nsage: assert Multizeta(3,2) == 9/2*Multizeta(5) - 2*Multizeta(2)*Multizeta(3)\nsage: assert Multizeta(3,3) == 1/2 * (Multizeta(3)**2 - Multizeta(6))\nsage: assert Multizeta(3,4) == 17*Multizeta(7) - 10*Multizeta(2)*Multizeta(5)\nsage: assert Multizeta(3,5) == 5*Multizeta(3)*Multizeta(5) - 147/24*Multizeta(8) - 5/2*Multizeta(2,6)\nsage: assert Multizeta(4,2) == 25/12*Multizeta(6) - Multizeta(3)**2\nsage: assert Multizeta(4,3) == 10*Multizeta(2)*Multizeta(5) + Multizeta(3)*Multizeta(4) - 18*Multizeta(7)\nsage: assert Multizeta(4,4) == 1/2*(Multizeta(4)**2 - Multizeta(8))\n```",
    "created_at": "2020-03-30T17:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333471",
    "user": "https://github.com/videlec"
}
```

<a id='comment:29'></a>Testing relations from [wikipedia](https://en.wikipedia.org/wiki/Multiple_zeta_function#Two_parameters_case) (which has the opposite convention for the order of entries)

```
sage: assert Multizeta(2,2) == 3/4 * Multizeta(4)
sage: assert Multizeta(2,3) == 3*Multizeta(2)*Multizeta(3) - 11/2*Multizeta(5)
sage: assert Multizeta(2,4) == Multizeta(3)**2 - 4/3*Multizeta(6)
sage: assert Multizeta(2,5) == 5*Multizeta(2)*Multizeta(5) + 2*Multizeta(3)*Multizeta(4) - 11*Multizeta(7)
sage: assert Multizeta(3,2) == 9/2*Multizeta(5) - 2*Multizeta(2)*Multizeta(3)
sage: assert Multizeta(3,3) == 1/2 * (Multizeta(3)**2 - Multizeta(6))
sage: assert Multizeta(3,4) == 17*Multizeta(7) - 10*Multizeta(2)*Multizeta(5)
sage: assert Multizeta(3,5) == 5*Multizeta(3)*Multizeta(5) - 147/24*Multizeta(8) - 5/2*Multizeta(2,6)
sage: assert Multizeta(4,2) == 25/12*Multizeta(6) - Multizeta(3)**2
sage: assert Multizeta(4,3) == 10*Multizeta(2)*Multizeta(5) + Multizeta(3)*Multizeta(4) - 18*Multizeta(7)
sage: assert Multizeta(4,4) == 1/2*(Multizeta(4)**2 - Multizeta(8))
```



---

archive/issue_comments_333472.json:
```json
{
    "body": "<a id='comment:30'></a>I thought about getting linear relations using\n\n```\nsage: matrix([Multizeta(2,2), Multizeta(1,3), Multizeta(4)]).right_kernel()\n```\nBut this badly fails\n\n```\n---------------------------------------------------------------------------\nKeyError                                  Traceback (most recent call last)\n/opt/sage/local/lib/python3.7/site-packages/sage/structure/category_object.pyx in sage.structure.category_object.CategoryObject.getattr_from_category (build/cythonized/sage/structure/category_object.c:6958)()\n    837         try:\n--> 838             return self.__cached_methods[name]\n    839         except KeyError:\n\nKeyError: 'is_integral_domain'\n\nDuring handling of the above exception, another exception occurred:\n\nAttributeError                            Traceback (most recent call last)\n<ipython-input-1-7e649f42fa12> in <module>()\n----> 1 matrix([Multizeta(Integer(2),Integer(2)), Multizeta(Integer(1),Integer(3)), Multizeta(Integer(4))]).right_kernel()\n\n/opt/sage/local/lib/python3.7/site-packages/sage/matrix/matrix2.pyx in sage.matrix.matrix2.Matrix.right_kernel (build/cythonized/sage/matrix/matrix2.c:29512)()\n   4239 \n   4240         # Go get the kernel matrix, this is where it all happens\n-> 4241         M = self.right_kernel_matrix(*args, **kwds)\n   4242 \n   4243         ambient = R**self.ncols()\n\n/opt/sage/local/lib/python3.7/site-packages/sage/matrix/matrix2.pyx in sage.matrix.matrix2.Matrix.right_kernel_matrix (build/cythonized/sage/matrix/matrix2.c:28514)()\n   3850             format, M = self._right_kernel_matrix_over_field()\n   3851 \n-> 3852         if M is None and R.is_integral_domain():\n   3853             format, M = self._right_kernel_matrix_over_domain()\n   3854 \n\n/opt/sage/local/lib/python3.7/site-packages/sage/structure/category_object.pyx in sage.structure.category_object.CategoryObject.__getattr__ (build/cythonized/sage/structure/category_object.c:6880)()\n    830             AttributeError: 'PrimeNumbers_with_category' object has no attribute 'sadfasdf'\n    831         \"\"\"\n--> 832         return self.getattr_from_category(name)\n    833 \n    834     cdef getattr_from_category(self, name):\n\n/opt/sage/local/lib/python3.7/site-packages/sage/structure/category_object.pyx in sage.structure.category_object.CategoryObject.getattr_from_category (build/cythonized/sage/structure/category_object.c:7043)()\n    845                 cls = self._category.parent_class\n    846 \n--> 847             attr = getattr_from_other_class(self, cls, name)\n    848             self.__cached_methods[name] = attr\n    849             return attr\n\n/opt/sage/local/lib/python3.7/site-packages/sage/cpython/getattr.pyx in sage.cpython.getattr.getattr_from_other_class (build/cythonized/sage/cpython/getattr.c:2547)()\n    387         dummy_error_message.cls = type(self)\n    388         dummy_error_message.name = name\n--> 389         raise AttributeError(dummy_error_message)\n    390     cdef PyObject* attr = instance_getattr(cls, name)\n    391     if attr is NULL:\n\nAttributeError: 'Multizetas_with_category' object has no attribute 'is_integral_domain'\n```",
    "created_at": "2020-03-30T17:34:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333472",
    "user": "https://github.com/videlec"
}
```

<a id='comment:30'></a>I thought about getting linear relations using

```
sage: matrix([Multizeta(2,2), Multizeta(1,3), Multizeta(4)]).right_kernel()
```
But this badly fails

```
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
/opt/sage/local/lib/python3.7/site-packages/sage/structure/category_object.pyx in sage.structure.category_object.CategoryObject.getattr_from_category (build/cythonized/sage/structure/category_object.c:6958)()
    837         try:
--> 838             return self.__cached_methods[name]
    839         except KeyError:

KeyError: 'is_integral_domain'

During handling of the above exception, another exception occurred:

AttributeError                            Traceback (most recent call last)
<ipython-input-1-7e649f42fa12> in <module>()
----> 1 matrix([Multizeta(Integer(2),Integer(2)), Multizeta(Integer(1),Integer(3)), Multizeta(Integer(4))]).right_kernel()

/opt/sage/local/lib/python3.7/site-packages/sage/matrix/matrix2.pyx in sage.matrix.matrix2.Matrix.right_kernel (build/cythonized/sage/matrix/matrix2.c:29512)()
   4239 
   4240         # Go get the kernel matrix, this is where it all happens
-> 4241         M = self.right_kernel_matrix(*args, **kwds)
   4242 
   4243         ambient = R**self.ncols()

/opt/sage/local/lib/python3.7/site-packages/sage/matrix/matrix2.pyx in sage.matrix.matrix2.Matrix.right_kernel_matrix (build/cythonized/sage/matrix/matrix2.c:28514)()
   3850             format, M = self._right_kernel_matrix_over_field()
   3851 
-> 3852         if M is None and R.is_integral_domain():
   3853             format, M = self._right_kernel_matrix_over_domain()
   3854 

/opt/sage/local/lib/python3.7/site-packages/sage/structure/category_object.pyx in sage.structure.category_object.CategoryObject.__getattr__ (build/cythonized/sage/structure/category_object.c:6880)()
    830             AttributeError: 'PrimeNumbers_with_category' object has no attribute 'sadfasdf'
    831         """
--> 832         return self.getattr_from_category(name)
    833 
    834     cdef getattr_from_category(self, name):

/opt/sage/local/lib/python3.7/site-packages/sage/structure/category_object.pyx in sage.structure.category_object.CategoryObject.getattr_from_category (build/cythonized/sage/structure/category_object.c:7043)()
    845                 cls = self._category.parent_class
    846 
--> 847             attr = getattr_from_other_class(self, cls, name)
    848             self.__cached_methods[name] = attr
    849             return attr

/opt/sage/local/lib/python3.7/site-packages/sage/cpython/getattr.pyx in sage.cpython.getattr.getattr_from_other_class (build/cythonized/sage/cpython/getattr.c:2547)()
    387         dummy_error_message.cls = type(self)
    388         dummy_error_message.name = name
--> 389         raise AttributeError(dummy_error_message)
    390     cdef PyObject* attr = instance_getattr(cls, name)
    391     if attr is NULL:

AttributeError: 'Multizetas_with_category' object has no attribute 'is_integral_domain'
```



---

archive/issue_comments_333473.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:30 vdelecroix]:\n> I thought about getting linear relations using\n> \n> ```\n> sage: matrix([Multizeta(2,2), Multizeta(1,3), Multizeta(4)]).right_kernel()\n> ```\n\n\nAlternatively\n\n```\nsage: pari.lindep([pari.zetamult([2,2]), pari.zetamult([3,1]), pari.zetamult([4])])\n[-1, -1, 1]~\n```\n(wher you can notice that PARI/GP also has the other convention for the order)",
    "created_at": "2020-03-30T17:50:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333473",
    "user": "https://github.com/videlec"
}
```

<a id='comment:31'></a>Replying to [comment:30 vdelecroix]:
> I thought about getting linear relations using
> 
> ```
> sage: matrix([Multizeta(2,2), Multizeta(1,3), Multizeta(4)]).right_kernel()
> ```


Alternatively

```
sage: pari.lindep([pari.zetamult([2,2]), pari.zetamult([3,1]), pari.zetamult([4])])
[-1, -1, 1]~
```
(wher you can notice that PARI/GP also has the other convention for the order)



---

archive/issue_comments_333474.json:
```json
{
    "body": "<a id='comment:32'></a>* Concerning the order convention, it is unfortunate that here is no unique prefered one. I sticked with Brown's convention, which I like because the conversion to iterated integral is more simple.\n\n* Concerning the question of finding relations between a given set of MZV, the simplest way is to convert them all to the F-ring and do linear algebra there.\n\n* One could probably add \"integral domain\" to the category of \"Multizetas\"",
    "created_at": "2020-03-30T18:30:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333474",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:32'></a>* Concerning the order convention, it is unfortunate that here is no unique prefered one. I sticked with Brown's convention, which I like because the conversion to iterated integral is more simple.

* Concerning the question of finding relations between a given set of MZV, the simplest way is to convert them all to the F-ring and do linear algebra there.

* One could probably add "integral domain" to the category of "Multizetas"



---

archive/issue_comments_333475.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-30T18:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333475",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333476.json:
```json
{
    "body": "<a id='comment:34'></a>Replying to [comment:22 tscrim]:\n> I will do this tomorrow (it is quite late here and I don't think I have the energy to do it today). To sketch what I will do to `FreeZinbielAlgebra`:\n\n\nThis is now #29434. For your application here, I would just use the larger algebra with generators indexed by `ZZ` and just use the generators you need for simplicity.",
    "created_at": "2020-03-31T06:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333476",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:34'></a>Replying to [comment:22 tscrim]:
> I will do this tomorrow (it is quite late here and I don't think I have the energy to do it today). To sketch what I will do to `FreeZinbielAlgebra`:


This is now #29434. For your application here, I would just use the larger algebra with generators indexed by `ZZ` and just use the generators you need for simplicity.



---

archive/issue_comments_333477.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-02T14:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333477",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333478.json:
```json
{
    "body": "<a id='comment:36'></a>`@`cremona : John, would you please put a message in sage-nt, so that interested people can have a look at this ticket ?",
    "created_at": "2020-04-02T14:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333478",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:36'></a>`@`cremona : John, would you please put a message in sage-nt, so that interested people can have a look at this ticket ?



---

archive/issue_comments_333479.json:
```json
{
    "body": "<a id='comment:37'></a>Replying to [comment:36 chapoton]:\n> `@`cremona : John, would you please put a message in sage-nt, so that interested people can have a look at this ticket ?\n\n\nOK, will do",
    "created_at": "2020-04-02T14:12:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333479",
    "user": "https://github.com/JohnCremona"
}
```

<a id='comment:37'></a>Replying to [comment:36 chapoton]:
> `@`cremona : John, would you please put a message in sage-nt, so that interested people can have a look at this ticket ?


OK, will do



---

archive/issue_comments_333480.json:
```json
{
    "body": "<a id='comment:39'></a>May I set back to needs review ?",
    "created_at": "2020-04-06T19:04:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333480",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:39'></a>May I set back to needs review ?



---

archive/issue_comments_333481.json:
```json
{
    "body": "<a id='comment:40'></a>Bien sur tu peux. Mais je croyais que tu allais refactoriser en utilisant #29434 et te d\u00e9barasser de `F_ring`. Que comptes-tu faire?",
    "created_at": "2020-04-06T19:06:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333481",
    "user": "https://github.com/videlec"
}
```

<a id='comment:40'></a>Bien sur tu peux. Mais je croyais que tu allais refactoriser en utilisant #29434 et te débarasser de `F_ring`. Que comptes-tu faire?



---

archive/issue_comments_333482.json:
```json
{
    "body": "<a id='comment:41'></a>Salut,\n\nil n'est pas question de se d\u00e9barrasser du F_ring, qui joue un role crucial.\n\non peut modifier le F_ring pour qu'il ait un nombre infini de generateurs, mais de toutes facons, le code devient lent a partir de n=12 ou 13, et il est limit\u00e9 par la table des g\u00e9n\u00e9rateurs des zetas comme alg\u00e8bres, qui est cod\u00e9e en dur jusqu'a n=17.\n\nJe devrais sans doute mettre un gros avertissement : ne fonctionne qu'en poids <= 17",
    "created_at": "2020-04-06T19:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333482",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:41'></a>Salut,

il n'est pas question de se débarrasser du F_ring, qui joue un role crucial.

on peut modifier le F_ring pour qu'il ait un nombre infini de generateurs, mais de toutes facons, le code devient lent a partir de n=12 ou 13, et il est limité par la table des générateurs des zetas comme algèbres, qui est codée en dur jusqu'a n=17.

Je devrais sans doute mettre un gros avertissement : ne fonctionne qu'en poids <= 17



---

archive/issue_comments_333483.json:
```json
{
    "body": "<a id='comment:42'></a>Question to Travis, `@`tscrim. How to make this work: \n\n```\nsage: Z = Multizeta\nsage: Z(3)/Z(2,1)\n```\nI have declared the algebra to be an integral domain, but this does not trigger the fraction field.",
    "created_at": "2020-04-06T19:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333483",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:42'></a>Question to Travis, `@`tscrim. How to make this work: 

```
sage: Z = Multizeta
sage: Z(3)/Z(2,1)
```
I have declared the algebra to be an integral domain, but this does not trigger the fraction field.



---

archive/issue_comments_333484.json:
```json
{
    "body": "<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-06T19:53:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333484",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333485.json:
```json
{
    "body": "<a id='comment:44'></a>Instead of giving wrong answers, the code would better crash with errors. I thought you disliked the symbolic ring :-)",
    "created_at": "2020-04-06T20:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333485",
    "user": "https://github.com/videlec"
}
```

<a id='comment:44'></a>Instead of giving wrong answers, the code would better crash with errors. I thought you disliked the symbolic ring :-)



---

archive/issue_comments_333486.json:
```json
{
    "body": "<a id='comment:45'></a>Replying to [comment:42 chapoton]:\n> Question to Travis, `@`tscrim. How to make this work: \n> \n> ```\n> sage: Z = Multizeta\n> sage: Z(3)/Z(2,1)\n> ```\n> I have declared the algebra to be an integral domain, but this does not trigger the fraction field.\n\n\nSo the code that actually implements the fraction field stuff is in `sage.rings.ring.Ring`. I am not sure how I feel about inheriting from that since it is a subclass of `ParentWithGens`. I would probably just implement the following modified form of `fraction_field` in the `IntegralDomains` category:\n\n```python\n    @cached_method\n    def fraction_field(self):\n        \"\"\"\n        Return the fraction field of ``self``.\n\n        EXAMPLES::\n        \"\"\"\n        from sage.rings.fraction_field import FractionField_generic\n        return FractionField_generic(self)\n```\n(Note that `FractionField_generic` is not a `UniqueRepresentation`, so this is not a memory leak.)\n\nPardon ma r\u00e9ponse n'est pas en Fran\u00e7ais. I can mostly understand because I also know Spanish, but not really respond without some Google help. `;P`",
    "created_at": "2020-04-06T23:59:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333486",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:45'></a>Replying to [comment:42 chapoton]:
> Question to Travis, `@`tscrim. How to make this work: 
> 
> ```
> sage: Z = Multizeta
> sage: Z(3)/Z(2,1)
> ```
> I have declared the algebra to be an integral domain, but this does not trigger the fraction field.


So the code that actually implements the fraction field stuff is in `sage.rings.ring.Ring`. I am not sure how I feel about inheriting from that since it is a subclass of `ParentWithGens`. I would probably just implement the following modified form of `fraction_field` in the `IntegralDomains` category:

```python
    @cached_method
    def fraction_field(self):
        """
        Return the fraction field of ``self``.

        EXAMPLES::
        """
        from sage.rings.fraction_field import FractionField_generic
        return FractionField_generic(self)
```
(Note that `FractionField_generic` is not a `UniqueRepresentation`, so this is not a memory leak.)

Pardon ma réponse n'est pas en Français. I can mostly understand because I also know Spanish, but not really respond without some Google help. `;P`



---

archive/issue_comments_333487.json:
```json
{
    "body": "<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-11T18:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333487",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333488.json:
```json
{
    "body": "<a id='comment:47'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333488",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_059178.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22713#event-59178"
}
```



---

archive/issue_events_059179.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22713#event-59179"
}
```



---

archive/issue_comments_333489.json:
```json
{
    "body": "<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-04-19T13:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333489",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_333490.json:
```json
{
    "body": "<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-19T13:28:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333491.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2020-04-19T13:29:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333491",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_333492.json:
```json
{
    "body": "<a id='comment:51'></a>Why do you have so many functions as opposed to methods? In particular, I don't understand why `base_brown` is not a method of `Multizetas`. Moreover, here the right terminology here is I believe `base` and not `basis`.\n\nWhy do you have trivial functions such as `compositions_23`, `numerical_MZV` or `vector_to_multizeta`. These functions have code 10x shorter than their documentation.\n\nThe following piece of documentation is **very** cryptic.\n\n```\n        Return the morphism ``phi``.\n\n        This sends multiple zeta values to the algebra :func:`F_ring`.\n```\nWhere are the `F ring` and the `phi morphism` actually defined? There is not even a reference to where to look for a definition.\n\nThis is really nice (as a feature)\n\n```\nThen one can compute the space of relations::\n\n    sage: from sage.modular.multiple_zeta import f_to_vector\n    sage: M = matrix([f_to_vector(Zc.phi()) for Zc in L])\n    sage: K = M.kernel(); K\n```\nbut not very nice from a user perspective. Whouldn't it be possible to have `Zc.phi().vector()` (or even better `Zc.vector()`)?\n\nThe doctest coming just after is kind of weird\n\n```\n    sage: relation.phi()\n    0\n    sage: relation.n()\n    0.000000000000...\n```\nWhy do you numerically evaluate `0`? It would be nice to also print what `relation` is and run `relation.is_zero()`.\n\nIs this global definition\n\n```\nMZV = Multizeta\n```\nused anywhere?\n\nNow, a more concrete mathematical questions: I have a prefered basis, let say `basis_brown`, how do I decompose a multizeta on this basis?",
    "created_at": "2020-04-19T14:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333492",
    "user": "https://github.com/videlec"
}
```

<a id='comment:51'></a>Why do you have so many functions as opposed to methods? In particular, I don't understand why `base_brown` is not a method of `Multizetas`. Moreover, here the right terminology here is I believe `base` and not `basis`.

Why do you have trivial functions such as `compositions_23`, `numerical_MZV` or `vector_to_multizeta`. These functions have code 10x shorter than their documentation.

The following piece of documentation is **very** cryptic.

```
        Return the morphism ``phi``.

        This sends multiple zeta values to the algebra :func:`F_ring`.
```
Where are the `F ring` and the `phi morphism` actually defined? There is not even a reference to where to look for a definition.

This is really nice (as a feature)

```
Then one can compute the space of relations::

    sage: from sage.modular.multiple_zeta import f_to_vector
    sage: M = matrix([f_to_vector(Zc.phi()) for Zc in L])
    sage: K = M.kernel(); K
```
but not very nice from a user perspective. Whouldn't it be possible to have `Zc.phi().vector()` (or even better `Zc.vector()`)?

The doctest coming just after is kind of weird

```
    sage: relation.phi()
    0
    sage: relation.n()
    0.000000000000...
```
Why do you numerically evaluate `0`? It would be nice to also print what `relation` is and run `relation.is_zero()`.

Is this global definition

```
MZV = Multizeta
```
used anywhere?

Now, a more concrete mathematical questions: I have a prefered basis, let say `basis_brown`, how do I decompose a multizeta on this basis?



---

archive/issue_comments_333493.json:
```json
{
    "body": "<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-19T17:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333493",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333494.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-19T18:19:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333494",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333495.json:
```json
{
    "body": "<a id='comment:54'></a>Replying to [comment:51 vdelecroix]:\n> Why do you have so many functions as opposed to methods? In particular, I don't understand why `base_brown` is not a method of `Multizetas`. Moreover, here the right terminology here is I believe `base` and not `basis`.\n\n\nThis could be turned into a method, yes. I have not done that yet.\n\n> Why do you have trivial functions such as `compositions_23`, `numerical_MZV` or `vector_to_multizeta`. These functions have code 10x shorter than their documentation.\n\n\nGot rid of them three.\n \n> The following piece of documentation is **very** cryptic.\n> \n> ```\n>         Return the morphism ``phi``.\n> \n>         This sends multiple zeta values to the algebra :func:`F_ring`.\n> ```\n> Where are the `F ring` and the `phi morphism` actually defined? There is not even a reference to where to look for a definition.\n\n\nWell, everything is based on Brown's article [Brown2012]. But one could add more explanations, for sure.\n \n> This is really nice (as a feature)\n> \n> ```\n> Then one can compute the space of relations::\n> \n>     sage: from sage.modular.multiple_zeta import f_to_vector\n>     sage: M = matrix([f_to_vector(Zc.phi()) for Zc in L])\n>     sage: K = M.kernel(); K\n> ```\n> but not very nice from a user perspective. Whouldn't it be possible to have `Zc.phi().vector()` (or even better `Zc.vector()`)?\n\n\nClearly, this only makes sense for homogeneous elements. One could have a method \"phi_vector\" that would raise error for non-homogeneous elements. I am not sure if it makes sense to add a method \"vector\" to the F-ring, with the similar restrictions.\n \n> The doctest coming just after is kind of weird\n> \n> ```\n>     sage: relation.phi()\n>     0\n>     sage: relation.n()\n>     0.000000000000...\n> ```\n> Why do you numerically evaluate `0`? It would be nice to also print what `relation` is and run `relation.is_zero()`.\n\n\nThis is because the relation, now displayed, is not the zero linear combination. It is only equal to the zero element. Of course, we know that the period map sends this to zero, because phi sends this to zero.\n \n> Is this global definition\n> \n> ```\n> MZV = Multizeta\n> ```\n> used anywhere?\n\n\nNo, removed.\n \n> Now, a more concrete mathematical questions: I have a prefered basis, let say `basis_brown`, how do I decompose a multizeta on this basis?\n\n\nJust compute phi or rather \"phi_vector\" on every element of your basis, compute phi or rather \"phi_vector\" on your element, make a matrix and take the kernel of the obtained matrix.",
    "created_at": "2020-04-19T18:37:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333495",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:54'></a>Replying to [comment:51 vdelecroix]:
> Why do you have so many functions as opposed to methods? In particular, I don't understand why `base_brown` is not a method of `Multizetas`. Moreover, here the right terminology here is I believe `base` and not `basis`.


This could be turned into a method, yes. I have not done that yet.

> Why do you have trivial functions such as `compositions_23`, `numerical_MZV` or `vector_to_multizeta`. These functions have code 10x shorter than their documentation.


Got rid of them three.
 
> The following piece of documentation is **very** cryptic.
> 
> ```
>         Return the morphism ``phi``.
> 
>         This sends multiple zeta values to the algebra :func:`F_ring`.
> ```
> Where are the `F ring` and the `phi morphism` actually defined? There is not even a reference to where to look for a definition.


Well, everything is based on Brown's article [Brown2012]. But one could add more explanations, for sure.
 
> This is really nice (as a feature)
> 
> ```
> Then one can compute the space of relations::
> 
>     sage: from sage.modular.multiple_zeta import f_to_vector
>     sage: M = matrix([f_to_vector(Zc.phi()) for Zc in L])
>     sage: K = M.kernel(); K
> ```
> but not very nice from a user perspective. Whouldn't it be possible to have `Zc.phi().vector()` (or even better `Zc.vector()`)?


Clearly, this only makes sense for homogeneous elements. One could have a method "phi_vector" that would raise error for non-homogeneous elements. I am not sure if it makes sense to add a method "vector" to the F-ring, with the similar restrictions.
 
> The doctest coming just after is kind of weird
> 
> ```
>     sage: relation.phi()
>     0
>     sage: relation.n()
>     0.000000000000...
> ```
> Why do you numerically evaluate `0`? It would be nice to also print what `relation` is and run `relation.is_zero()`.


This is because the relation, now displayed, is not the zero linear combination. It is only equal to the zero element. Of course, we know that the period map sends this to zero, because phi sends this to zero.
 
> Is this global definition
> 
> ```
> MZV = Multizeta
> ```
> used anywhere?


No, removed.
 
> Now, a more concrete mathematical questions: I have a prefered basis, let say `basis_brown`, how do I decompose a multizeta on this basis?


Just compute phi or rather "phi_vector" on every element of your basis, compute phi or rather "phi_vector" on your element, make a matrix and take the kernel of the obtained matrix.



---

archive/issue_comments_333496.json:
```json
{
    "body": "<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-19T19:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333496",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333497.json:
```json
{
    "body": "<a id='comment:56'></a>I have added a little more doc to phi, and move base_brown to a method.",
    "created_at": "2020-04-19T19:09:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333497",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:56'></a>I have added a little more doc to phi, and move base_brown to a method.



---

archive/issue_comments_333498.json:
```json
{
    "body": "<a id='comment:57'></a>Maybe I should also remove \"base_multi\" ?",
    "created_at": "2020-04-19T19:31:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333498",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:57'></a>Maybe I should also remove "base_multi" ?



---

archive/issue_comments_333499.json:
```json
{
    "body": "<a id='comment:58'></a>Fact: singular is `basis` and plural is `bases`. No `base` (unless when used as an adjective as in `base ring`).",
    "created_at": "2020-04-19T20:24:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333499",
    "user": "https://github.com/videlec"
}
```

<a id='comment:58'></a>Fact: singular is `basis` and plural is `bases`. No `base` (unless when used as an adjective as in `base ring`).



---

archive/issue_comments_333500.json:
```json
{
    "body": "<a id='comment:59'></a>Replying to [comment:54 chapoton]:\n> Replying to [comment:51 vdelecroix]:\n> > This is really nice (as a feature)\n> > \n> > ```\n> > Then one can compute the space of relations::\n> > \n> >     sage: from sage.modular.multiple_zeta import f_to_vector\n> >     sage: M = matrix([f_to_vector(Zc.phi()) for Zc in L])\n> >     sage: K = M.kernel(); K\n> > ```\n> > but not very nice from a user perspective. Whouldn't it be possible to have `Zc.phi().vector()` (or even better `Zc.vector()`)?\n\n> \n> Clearly, this only makes sense for homogeneous elements. One could have a method \"phi_vector\" that would raise error for non-homogeneous elements. I am not sure if it makes sense to add a method \"vector\" to the F-ring, with the similar restrictions.\n\n\nBut then one would expect `Zc.homogeneous_component().vector()` to work. An alternative is to consider the semi-sparse infinite dimensional vector space whose elements are dictionaries `d -> phi_vector in degree d`.",
    "created_at": "2020-04-19T20:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333500",
    "user": "https://github.com/videlec"
}
```

<a id='comment:59'></a>Replying to [comment:54 chapoton]:
> Replying to [comment:51 vdelecroix]:
> > This is really nice (as a feature)
> > 
> > ```
> > Then one can compute the space of relations::
> > 
> >     sage: from sage.modular.multiple_zeta import f_to_vector
> >     sage: M = matrix([f_to_vector(Zc.phi()) for Zc in L])
> >     sage: K = M.kernel(); K
> > ```
> > but not very nice from a user perspective. Whouldn't it be possible to have `Zc.phi().vector()` (or even better `Zc.vector()`)?

> 
> Clearly, this only makes sense for homogeneous elements. One could have a method "phi_vector" that would raise error for non-homogeneous elements. I am not sure if it makes sense to add a method "vector" to the F-ring, with the similar restrictions.


But then one would expect `Zc.homogeneous_component().vector()` to work. An alternative is to consider the semi-sparse infinite dimensional vector space whose elements are dictionaries `d -> phi_vector in degree d`.



---

archive/issue_comments_333501.json:
```json
{
    "body": "<a id='comment:60'></a>Replying to [comment:57 chapoton]:\n> Maybe I should also remove \"base_multi\" ?\n\n\nYes. Moving both as methods make sense.",
    "created_at": "2020-04-19T20:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333501",
    "user": "https://github.com/videlec"
}
```

<a id='comment:60'></a>Replying to [comment:57 chapoton]:
> Maybe I should also remove "base_multi" ?


Yes. Moving both as methods make sense.



---

archive/issue_comments_333502.json:
```json
{
    "body": "<a id='comment:61'></a>Replying to [comment:60 vdelecroix]:\n> Replying to [comment:57 chapoton]:\n> > Maybe I should also remove \"base_multi\" ?\n\n> \n> Yes. Moving both as methods make sense.\n\n\nActually, here I would not call it a `basis`. Shouldn't it rather be `algebra_generators`?",
    "created_at": "2020-04-19T20:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333502",
    "user": "https://github.com/videlec"
}
```

<a id='comment:61'></a>Replying to [comment:60 vdelecroix]:
> Replying to [comment:57 chapoton]:
> > Maybe I should also remove "base_multi" ?

> 
> Yes. Moving both as methods make sense.


Actually, here I would not call it a `basis`. Shouldn't it rather be `algebra_generators`?



---

archive/issue_comments_333503.json:
```json
{
    "body": "<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-20T12:16:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333503",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:62'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333504.json:
```json
{
    "body": "<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-20T12:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333505.json:
```json
{
    "body": "<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-20T12:26:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333505",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333506.json:
```json
{
    "body": "<a id='comment:65'></a>Please don't cache `pari.zetamult`. It does not make sense to use this function with repeated calls while there is `zetamultall` that compute all values up to a given weight. For weight <= 15 there is a 100x time difference\n\n```\nsage: %time Z = pari.zetamultall(15)\nCPU times: user 156 ms, sys: 26.7 ms, total: 183 ms\nWall time: 183 ms\nsage: %time Z = [pari.zetamult(pari.zetamultconvert(i)) for i in range(1, 16384)]\nCPU times: user 9.99 s, sys: 1.43 ms, total: 9.99 s\nWall time: 10 s\n```",
    "created_at": "2020-04-20T12:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333506",
    "user": "https://github.com/videlec"
}
```

<a id='comment:65'></a>Please don't cache `pari.zetamult`. It does not make sense to use this function with repeated calls while there is `zetamultall` that compute all values up to a given weight. For weight <= 15 there is a 100x time difference

```
sage: %time Z = pari.zetamultall(15)
CPU times: user 156 ms, sys: 26.7 ms, total: 183 ms
Wall time: 183 ms
sage: %time Z = [pari.zetamult(pari.zetamultconvert(i)) for i in range(1, 16384)]
CPU times: user 9.99 s, sys: 1.43 ms, total: 9.99 s
Wall time: 10 s
```



---

archive/issue_comments_333507.json:
```json
{
    "body": "<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-20T14:15:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333507",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333508.json:
```json
{
    "body": "<a id='comment:67'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-20T14:21:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333508",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:67'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333509.json:
```json
{
    "body": "<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-20T14:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333510.json:
```json
{
    "body": "<a id='comment:69'></a>voila une tentative avec zetamultall. Je ne sais pas trop comment g\u00e9rer le stockage, et le r\u00e9-emploi \u00e9ventuel de ces calculs pour des poids et des pr\u00e9cisions diff\u00e9rentes.",
    "created_at": "2020-04-20T14:49:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333510",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:69'></a>voila une tentative avec zetamultall. Je ne sais pas trop comment gérer le stockage, et le ré-emploi éventuel de ces calculs pour des poids et des précisions différentes.



---

archive/issue_comments_333511.json:
```json
{
    "body": "<a id='comment:70'></a>Je ne pense pas qu'il faille utiliser le cache de ``@`cached_function`. Quand une demande en poids plus grand est faite il faut juste \u00e9craser les valeurs pr\u00e9c\u00e9dentes. Qui peut le plus peut le moins. En plus ici le r\u00e9sultat de `zetamultall` est toujours ordonn\u00e9 par poids croissant.\n\nCe serait bien d'avoir un algo qui r\u00e9utilise le travail fait en poids `w` pour calculer le poids `w+1`. Mais je ne suis pas sur que l'algorithme d'Akilesh permette \u00e7a. (en tout cas PARI/GP ne le fait pas)\n\nPuisque de toute fa\u00e7on l'alg\u00e8bre ne \"marche pas\" en poids > 17, le seul truc qui compte est le poids 17, non? Et \u00e7a ne fait pas tant de valeurs que \u00e7a\n\n```\nsage: len(pari.zetamultall(17)) == 2**16 - 1\nTrue\n```",
    "created_at": "2020-04-20T15:01:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333511",
    "user": "https://github.com/videlec"
}
```

<a id='comment:70'></a>Je ne pense pas qu'il faille utiliser le cache de ``@`cached_function`. Quand une demande en poids plus grand est faite il faut juste écraser les valeurs précédentes. Qui peut le plus peut le moins. En plus ici le résultat de `zetamultall` est toujours ordonné par poids croissant.

Ce serait bien d'avoir un algo qui réutilise le travail fait en poids `w` pour calculer le poids `w+1`. Mais je ne suis pas sur que l'algorithme d'Akilesh permette ça. (en tout cas PARI/GP ne le fait pas)

Puisque de toute façon l'algèbre ne "marche pas" en poids > 17, le seul truc qui compte est le poids 17, non? Et ça ne fait pas tant de valeurs que ça

```
sage: len(pari.zetamultall(17)) == 2**16 - 1
True
```



---

archive/issue_comments_333512.json:
```json
{
    "body": "<a id='comment:71'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-21T08:39:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333512",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:71'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333513.json:
```json
{
    "body": "<a id='comment:72'></a>Je viens de rajouter une methode phi_as_vector, qui simplifie la recherche de relations.\n\nLa question du pr\u00e9-calcul, du stockage et du re-calcul des valeurs numeriques si n\u00e9cessaire me pose probleme. Est-ce que je dois utiliser une variable globale ?\n\nPar ailleurs, la seule chose qui va ne pas marcher en poids > 17 est le test d'\u00e9galit\u00e9 (et le morphisme phi). On peut tr\u00e8s bien faire quand meme des produits, et vouloir calculer une valeur numerique sur une composition de taille plus grande.",
    "created_at": "2020-04-21T08:46:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333513",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:72'></a>Je viens de rajouter une methode phi_as_vector, qui simplifie la recherche de relations.

La question du pré-calcul, du stockage et du re-calcul des valeurs numeriques si nécessaire me pose probleme. Est-ce que je dois utiliser une variable globale ?

Par ailleurs, la seule chose qui va ne pas marcher en poids > 17 est le test d'égalité (et le morphisme phi). On peut très bien faire quand meme des produits, et vouloir calculer une valeur numerique sur une composition de taille plus grande.



---

archive/issue_comments_333514.json:
```json
{
    "body": "Changing keywords from \"\" to \"motives\".",
    "created_at": "2020-04-21T19:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333514",
    "user": "https://github.com/fchapoton"
}
```

Changing keywords from "" to "motives".



---

archive/issue_comments_333515.json:
```json
{
    "body": "Changing component from symbolics to number theory.",
    "created_at": "2020-04-21T19:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333515",
    "user": "https://github.com/fchapoton"
}
```

Changing component from symbolics to number theory.



---

archive/issue_comments_333516.json:
```json
{
    "body": "<a id='comment:74'></a>Si tu pr\u00e9vois d'aller plus loin que poids 17 pour `zetamult`, \u00e7a va commencer \u00e0 co\u00fbter cher en temps et m\u00e9moire. Aussi, si le calcul a \u00e9t\u00e9 fait en pr\u00e9cision `10 * prec` ce n'est pas la peine de le refaire pour `prec`. Que penses-tu d'avoir une classe `MultizetaValues(cache_max_weight, prec)` qui stocke les valeurs en poids jusqu'\u00e0 `cache_max_weight` (avec pr\u00e9cision `prec` fix\u00e9)  via des appels \u00e0 `zetamultall`. Si la pr\u00e9cision demand\u00e9e est en dessous de la pr\u00e9cision ou le poids en dessous de `cache_max_weight` on utilise le cache, sinon on fait un appel \u00e0 `zetamult`. Il est tout \u00e0 fait possible de faire en sorte que la `cache_max_weight` et `prec` soit modifiable \u00e0 la vol\u00e9e de mani\u00e8re \u00e0 ce qu'un utilisateur puisse ajuster \u00e0 son besoin.",
    "created_at": "2020-04-23T06:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333516",
    "user": "https://github.com/videlec"
}
```

<a id='comment:74'></a>Si tu prévois d'aller plus loin que poids 17 pour `zetamult`, ça va commencer à coûter cher en temps et mémoire. Aussi, si le calcul a été fait en précision `10 * prec` ce n'est pas la peine de le refaire pour `prec`. Que penses-tu d'avoir une classe `MultizetaValues(cache_max_weight, prec)` qui stocke les valeurs en poids jusqu'à `cache_max_weight` (avec précision `prec` fixé)  via des appels à `zetamultall`. Si la précision demandée est en dessous de la précision ou le poids en dessous de `cache_max_weight` on utilise le cache, sinon on fait un appel à `zetamult`. Il est tout à fait possible de faire en sorte que la `cache_max_weight` et `prec` soit modifiable à la volée de manière à ce qu'un utilisateur puisse ajuster à son besoin.



---

archive/issue_comments_333517.json:
```json
{
    "body": "<a id='comment:75'></a>Question: Comment Brown a construit sa base? Ce n'est pas possible d'\u00e9crire un algo pour faire \u00e7a? (et en particulier aller plus loin que poids 17)",
    "created_at": "2020-04-23T07:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333517",
    "user": "https://github.com/videlec"
}
```

<a id='comment:75'></a>Question: Comment Brown a construit sa base? Ce n'est pas possible d'écrire un algo pour faire ça? (et en particulier aller plus loin que poids 17)



---

archive/issue_comments_333518.json:
```json
{
    "body": "<a id='comment:76'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-23T08:55:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333518",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:76'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333519.json:
```json
{
    "body": "<a id='comment:77'></a>Salut,\n\nvoil\u00e0 une tentative minimale de cache fait-maison, mais je ne sais pas trop si c'est la bonne mani\u00e8re.\n\nIl a 4 tests qui foirent pour cause de pr\u00e9cision trop grande. J'aurais besoin de d\u00e9grader la pr\u00e9cision d'un nombre en pari, et je ne sais pas comment faire.\n\nConcernant la base multiplicative de Brown, il me semble que \u00e7a rel\u00e8ve un peu de l'artisanat. On calcule l'application phi avec un candidat pour la base, et si \u00e7a donne bien une base de la composante homog\u00e8ne du F-anneau, alors on avait fait un bon choix. Il y a peut-\u00eatre une autre base multiplicative propos\u00e9e par Broadhurst (du style mots de Lyndon), mais je ne sais pas si elle est conjecturale ou pas.\n\nJe suis moins pr\u00e9-occup\u00e9 par aller au del\u00e0 de 17 que par r\u00e9ussir \u00e0 \u00eatre efficace jusqu'au poids 13, y compris en pr\u00e9sence de coefficients polynomiaux. J'ai \u00e9chou\u00e9 hier (sur mon vieux portable, interrompu au bout de quelques heures \u00e0 chauffer fort) \u00e0 faire un calcul qui m\u2019int\u00e9resse en poids 11.",
    "created_at": "2020-04-23T09:03:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333519",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:77'></a>Salut,

voilà une tentative minimale de cache fait-maison, mais je ne sais pas trop si c'est la bonne manière.

Il a 4 tests qui foirent pour cause de précision trop grande. J'aurais besoin de dégrader la précision d'un nombre en pari, et je ne sais pas comment faire.

Concernant la base multiplicative de Brown, il me semble que ça relève un peu de l'artisanat. On calcule l'application phi avec un candidat pour la base, et si ça donne bien une base de la composante homogène du F-anneau, alors on avait fait un bon choix. Il y a peut-être une autre base multiplicative proposée par Broadhurst (du style mots de Lyndon), mais je ne sais pas si elle est conjecturale ou pas.

Je suis moins pré-occupé par aller au delà de 17 que par réussir à être efficace jusqu'au poids 13, y compris en présence de coefficients polynomiaux. J'ai échoué hier (sur mon vieux portable, interrompu au bout de quelques heures à chauffer fort) à faire un calcul qui m’intéresse en poids 11.



---

archive/issue_comments_333520.json:
```json
{
    "body": "<a id='comment:78'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-23T15:16:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333520",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:78'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333521.json:
```json
{
    "body": "<a id='comment:79'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-23T15:26:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333521",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:79'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333522.json:
```json
{
    "body": "<a id='comment:80'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-23T15:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333522",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:80'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333523.json:
```json
{
    "body": "<a id='comment:81'></a>Sur la branch `public/22713` j'ai nettoy\u00e9 l'approximation num\u00e9rique.",
    "created_at": "2020-04-23T15:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333523",
    "user": "https://github.com/videlec"
}
```

<a id='comment:81'></a>Sur la branch `public/22713` j'ai nettoyé l'approximation numérique.



---

archive/issue_comments_333524.json:
```json
{
    "body": "<a id='comment:82'></a>(j'esp\u00e8re qu'il n'y a pas de conflit avec tes trois derniers commits)",
    "created_at": "2020-04-23T15:38:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333524",
    "user": "https://github.com/videlec"
}
```

<a id='comment:82'></a>(j'espère qu'il n'y a pas de conflit avec tes trois derniers commits)



---

archive/issue_comments_333525.json:
```json
{
    "body": "<a id='comment:83'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-23T15:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333525",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:83'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333526.json:
```json
{
    "body": "<a id='comment:84'></a>Y'a un petit bug dans `pari_eval`. Je vais rajouter un commit...",
    "created_at": "2020-04-23T16:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333526",
    "user": "https://github.com/videlec"
}
```

<a id='comment:84'></a>Y'a un petit bug dans `pari_eval`. Je vais rajouter un commit...



---

archive/issue_comments_333527.json:
```json
{
    "body": "<a id='comment:85'></a>See `4c2cf94267` still on `public/22713` (rebased on your `d9ce5ae`).",
    "created_at": "2020-04-23T16:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333527",
    "user": "https://github.com/videlec"
}
```

<a id='comment:85'></a>See `4c2cf94267` still on `public/22713` (rebased on your `d9ce5ae`).



---

archive/issue_comments_333528.json:
```json
{
    "body": "<a id='comment:86'></a>Si tu veux faire du poids 13, il faut absolument faire avant\n\n```\nsage: from sage.modular.multiple_zeta import MultizetaValues\nsage: M = MultizetaValues()\nsage: M.update(max_weight=13, prec=1024)\n```\n(j'imagine que precision 1024 est suffisant ici?)\n\nMais ce n'est peut-\u00eatre pas la partie num\u00e9rique qui rame... t'as fait du profiling?",
    "created_at": "2020-04-23T16:21:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333528",
    "user": "https://github.com/videlec"
}
```

<a id='comment:86'></a>Si tu veux faire du poids 13, il faut absolument faire avant

```
sage: from sage.modular.multiple_zeta import MultizetaValues
sage: M = MultizetaValues()
sage: M.update(max_weight=13, prec=1024)
```
(j'imagine que precision 1024 est suffisant ici?)

Mais ce n'est peut-être pas la partie numérique qui rame... t'as fait du profiling?



---

archive/issue_comments_333529.json:
```json
{
    "body": "<a id='comment:87'></a>Basculons sur la branche public/ pour nous simplifier la vie.\n\nConcernant mon calcul perso en poids 11, je crois que je vais devoir faire un algo plus subtil.\n\nTODO ici : s'occuper du coverage.",
    "created_at": "2020-04-24T13:39:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333529",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:87'></a>Basculons sur la branche public/ pour nous simplifier la vie.

Concernant mon calcul perso en poids 11, je crois que je vais devoir faire un algo plus subtil.

TODO ici : s'occuper du coverage.



---

archive/issue_comments_333530.json:
```json
{
    "body": "<a id='comment:88'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-24T15:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333530",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:88'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333531.json:
```json
{
    "body": "<a id='comment:89'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-25T08:20:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:89'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333532.json:
```json
{
    "body": "<a id='comment:90'></a>Coverage is ok.\n\nSo, what remains to be done ?",
    "created_at": "2020-04-26T19:18:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333532",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:90'></a>Coverage is ok.

So, what remains to be done ?



---

archive/issue_comments_333533.json:
```json
{
    "body": "<a id='comment:91'></a>One feature which is not advertized in the main docstring of the module is the numerical approximation. I think it deserves a mention.\n\nOtherwise I believe it is ready for inclusion.",
    "created_at": "2020-04-27T18:05:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333533",
    "user": "https://github.com/videlec"
}
```

<a id='comment:91'></a>One feature which is not advertized in the main docstring of the module is the numerical approximation. I think it deserves a mention.

Otherwise I believe it is ready for inclusion.



---

archive/issue_comments_333534.json:
```json
{
    "body": "<a id='comment:92'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-28T06:34:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333534",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:92'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_333535.json:
```json
{
    "body": "<a id='comment:93'></a>I have added a little more doc about numerical approximation.\n\n* Should I move references to master ref file ?\n\n* I am tempted to squash all commits. May I ?\n\n* Anything else ?",
    "created_at": "2020-04-28T06:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333535",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:93'></a>I have added a little more doc about numerical approximation.

* Should I move references to master ref file ?

* I am tempted to squash all commits. May I ?

* Anything else ?



---

archive/issue_comments_333536.json:
```json
{
    "body": "<a id='comment:94'></a>Replying to [comment:93 chapoton]:\n> I have added a little more doc about numerical approximation.\n> * I am tempted to squash all commits. May I ?\n\n\nSure",
    "created_at": "2020-04-28T07:25:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333536",
    "user": "https://github.com/videlec"
}
```

<a id='comment:94'></a>Replying to [comment:93 chapoton]:
> I have added a little more doc about numerical approximation.
> * I am tempted to squash all commits. May I ?


Sure



---

archive/issue_comments_333537.json:
```json
{
    "body": "<a id='comment:95'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-04-28T07:38:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333537",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:95'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_333538.json:
```json
{
    "body": "<a id='comment:96'></a>all commits squashed, and the patchbot is green",
    "created_at": "2020-04-28T16:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333538",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:96'></a>all commits squashed, and the patchbot is green



---

archive/issue_comments_333539.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-28T19:11:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333539",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_333540.json:
```json
{
    "body": "<a id='comment:97'></a>Replying to [comment:96 chapoton]:\n> all commits squashed, and the patchbot is green\n\n\nLet us get that in!\n\nEst-ce que tu es dispo mardi 05.05 14h-17h? Bill (Allombert) organise une hacking session PARI/GP et j'aimerais travailler sur les multizeta color\u00e9s (\u00e9valuation des polylogarithmes aux racines de l'unit\u00e9). Henri (Cohen) a d\u00e9j\u00e0 programm\u00e9 quelques trucs num\u00e9riques. Si jamais \u00e7a t'int\u00e9resse.",
    "created_at": "2020-04-28T19:11:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333540",
    "user": "https://github.com/videlec"
}
```

<a id='comment:97'></a>Replying to [comment:96 chapoton]:
> all commits squashed, and the patchbot is green


Let us get that in!

Est-ce que tu es dispo mardi 05.05 14h-17h? Bill (Allombert) organise une hacking session PARI/GP et j'aimerais travailler sur les multizeta colorés (évaluation des polylogarithmes aux racines de l'unité). Henri (Cohen) a déjà programmé quelques trucs numériques. Si jamais ça t'intéresse.



---

archive/issue_comments_333541.json:
```json
{
    "body": "<a id='comment:98'></a>Not python2-compatible",
    "created_at": "2020-05-03T22:40:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333541",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:98'></a>Not python2-compatible



---

archive/issue_comments_333542.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-05-03T22:40:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333542",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_333543.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-05-04T05:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333543",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_333544.json:
```json
{
    "body": "<a id='comment:99'></a>Replying to [comment:98 vbraun]:\n> Not python2-compatible\n\n\nWhy is that a problem? The milestone is set to 9.2 which is supposed to be Python3 only. Or did I misunderstand something?",
    "created_at": "2020-05-04T05:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333544",
    "user": "https://github.com/videlec"
}
```

<a id='comment:99'></a>Replying to [comment:98 vbraun]:
> Not python2-compatible


Why is that a problem? The milestone is set to 9.2 which is supposed to be Python3 only. Or did I misunderstand something?



---

archive/issue_comments_333545.json:
```json
{
    "body": "<a id='comment:0'></a>Probably the merging tools do not respect the milestone..",
    "created_at": "2020-05-04T05:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333545",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:0'></a>Probably the merging tools do not respect the milestone..



---

archive/issue_comments_333546.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-05-26T21:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22713#issuecomment-333546",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_059180.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-05-26T21:49:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22713",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22713#event-59180"
}
```
