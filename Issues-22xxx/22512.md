# Issue 22512: sage -sws2rst does not display code block properly

archive/issues_022275.json:
```json
{
    "body": "In rst, block of code are written as:\n\n\n```\nsage: def plop():\n....:     return 'plop'\n```\n\n\nCurrently, `sage -sws2rst` will output the old-style:\n\n```\nsage: def plop():\n...       return 'plop'\n```\n\nThis causes issues with other parsers. The culprit is in sagenb, `sagenb/misc/worksheet2rst.py` which is maintained in github.\n\nSince i do not have a github account, you can pull the commit at:\nhttp://tmpsagenb.metelu.net/sagenb.git or get the git-formatted attached patch https://trac.sagemath.org/raw-attachment/ticket/22512/0001-Fix-code-blocks-in-rst-export.patch\n\n\nCC:  simonking @jdemeyer @dimpase @fchapoton\n\nKeywords: days84\n\nStopgaps: the author needs a hardhat with tinfoil lining to open github account\n\nReviewer: Dima Pasechnik\n\nAuthor: Thierry Monteil\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22512\n\n",
    "closed_at": "2017-05-21T10:49:00Z",
    "created_at": "2017-03-03T22:30:48Z",
    "labels": [
        "component: notebook",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "sage -sws2rst does not display code block properly",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22512",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```
In rst, block of code are written as:


```
sage: def plop():
....:     return 'plop'
```


Currently, `sage -sws2rst` will output the old-style:

```
sage: def plop():
...       return 'plop'
```

This causes issues with other parsers. The culprit is in sagenb, `sagenb/misc/worksheet2rst.py` which is maintained in github.

Since i do not have a github account, you can pull the commit at:
http://tmpsagenb.metelu.net/sagenb.git or get the git-formatted attached patch https://trac.sagemath.org/raw-attachment/ticket/22512/0001-Fix-code-blocks-in-rst-export.patch


CC:  simonking @jdemeyer @dimpase @fchapoton

Keywords: days84

Stopgaps: the author needs a hardhat with tinfoil lining to open github account

Reviewer: Dima Pasechnik

Author: Thierry Monteil

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22512





---

archive/issue_comments_329691.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -17,7 +17,8 @@\n This causes issues with other parsers. The culprit is in sagenb, \\`sagenb/misc/worksheet2rst.py\\` which is maintained in github.\n \n Since i do not have a github account, you can pull the commit at:\n-http://tmpsagenb.metelu.net/sagenb.git or get the git-formatted patch in attachment.\n+http://tmpsagenb.metelu.net/sagenb.git or get the git-formatted attached patch https://trac.sagemath.org/raw-attachment/ticket/22512/0001-Fix-code-blocks-in-rst-export.patch\n+\n \n Author: Thierry Monteil\n \n```\n",
    "created_at": "2017-03-03T22:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329691",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Description changed:
```diff
--- 
+++ 
@@ -17,7 +17,8 @@
 This causes issues with other parsers. The culprit is in sagenb, \`sagenb/misc/worksheet2rst.py\` which is maintained in github.
 
 Since i do not have a github account, you can pull the commit at:
-http://tmpsagenb.metelu.net/sagenb.git or get the git-formatted patch in attachment.
+http://tmpsagenb.metelu.net/sagenb.git or get the git-formatted attached patch https://trac.sagemath.org/raw-attachment/ticket/22512/0001-Fix-code-blocks-in-rst-export.patch
+
 
 Author: Thierry Monteil
 
```




---

archive/issue_comments_329692.json:
```json
{
    "body": "<a id='comment:1'></a>Attachment [0001-Fix-code-blocks-in-rst-export.patch](tarball://root/attachments/some-uuid/ticket22512/0001-Fix-code-blocks-in-rst-export.patch) by tmonteil created at 2017-03-03 22:34:30",
    "created_at": "2017-03-03T22:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329692",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:1'></a>Attachment [0001-Fix-code-blocks-in-rst-export.patch](tarball://root/attachments/some-uuid/ticket22512/0001-Fix-code-blocks-in-rst-export.patch) by tmonteil created at 2017-03-03 22:34:30



---

archive/issue_comments_329693.json:
```json
{
    "body": "Changing keywords from \"\" to \"days84\".",
    "created_at": "2017-03-03T22:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329693",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing keywords from "" to "days84".



---

archive/issue_comments_329694.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-03T22:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329694",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_329695.json:
```json
{
    "body": "<a id='comment:3'></a>Why can't you make a proper git branch here on trac? (no, you do not need a github account for this!).\nSee http://doc.sagemath.org/html/en/developer/manual_git.html#the-trac-server\n(where you can safely ignore anything related to github).",
    "created_at": "2017-03-04T08:21:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329695",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>Why can't you make a proper git branch here on trac? (no, you do not need a github account for this!).
See http://doc.sagemath.org/html/en/developer/manual_git.html#the-trac-server
(where you can safely ignore anything related to github).



---

archive/issue_comments_329696.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 dimpase]:\n> Why can't you make a proper git branch here on trac? (no, you do not need a github account for this!).\n\n\nSimply because the file i modified is not part of Sage source code, but part of sagenb source code which is maintained on github only.",
    "created_at": "2017-03-04T08:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329696",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:4'></a>Replying to [comment:3 dimpase]:
> Why can't you make a proper git branch here on trac? (no, you do not need a github account for this!).


Simply because the file i modified is not part of Sage source code, but part of sagenb source code which is maintained on github only.



---

archive/issue_comments_329697.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-03-04T09:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329697",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_329698.json:
```json
{
    "body": "<a id='comment:6'></a>I think instead of insulting the author, it would be better to try to find a solution.\n\nIf the development of the sage notebook is not part of sage development any longer, then the notebook developers should of course be made aware of the proposed fix. And since the notebook development takes place on a seemingly problematic platform then at least the notebook developers should provide a different way of communicating the fix to them.",
    "created_at": "2017-03-04T10:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329698",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:6'></a>I think instead of insulting the author, it would be better to try to find a solution.

If the development of the sage notebook is not part of sage development any longer, then the notebook developers should of course be made aware of the proposed fix. And since the notebook development takes place on a seemingly problematic platform then at least the notebook developers should provide a different way of communicating the fix to them.



---

archive/issue_comments_329699.json:
```json
{
    "body": "<a id='comment:7'></a>so I  am mad and work on a problematic platform?\n\nplease, really, I have enough cockroaches in my own head to take care of...\n\nsome people who are privileged to have fixed jobs have much too much time on their hands to partake in crackpot theories, that's all I can say.",
    "created_at": "2017-03-04T10:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329699",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>so I  am mad and work on a problematic platform?

please, really, I have enough cockroaches in my own head to take care of...

some people who are privileged to have fixed jobs have much too much time on their hands to partake in crackpot theories, that's all I can say.



---

archive/issue_comments_329700.json:
```json
{
    "body": "<a id='comment:8'></a>I will not enter personal attacks. Let me just point out that i conformed to \"the github way\" as close as possible, by providing a pull request. I also provided an attached self-contained patch, in case.\n\n```\ngit pull http://tmpsagenb.metelu.net/sagenb.git master\n```\n\nis probably shorter to type than the previous comments, and i guess it is not much longer than an internal github pull.\n\nI did that already when contributing to other repositories (e.g. rst2ipynb recently), and it did not cause any problem to the maintainer. If i had to get a github account to contribute to sagenb, then i won't consider it only as a \"seemingly problematic platform\".\n\nIf it is an issue, i can provide certified https on demand. The sha256sum of the commit is 2cb350173d08ac534485918f08bca849e4ac6126.",
    "created_at": "2017-03-04T11:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329700",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:8'></a>I will not enter personal attacks. Let me just point out that i conformed to "the github way" as close as possible, by providing a pull request. I also provided an attached self-contained patch, in case.

```
git pull http://tmpsagenb.metelu.net/sagenb.git master
```

is probably shorter to type than the previous comments, and i guess it is not much longer than an internal github pull.

I did that already when contributing to other repositories (e.g. rst2ipynb recently), and it did not cause any problem to the maintainer. If i had to get a github account to contribute to sagenb, then i won't consider it only as a "seemingly problematic platform".

If it is an issue, i can provide certified https on demand. The sha256sum of the commit is 2cb350173d08ac534485918f08bca849e4ac6126.



---

archive/issue_comments_329701.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 tmonteil]:\n> I will not enter personal attacks. Let me just point out that i conformed to \"the github way\" as close as possible, by providing a pull request. I also p\n\n\nyou are conducting a personal attack on people who would need to jump various hoops to accommodate you. Where on Earth do you get this sense of entitlement?\nWe are not your servants.\n\n\n\n\nrovided an attached self-contained patch, in case.\n> \n> \n> ```\n> git pull http://tmpsagenb.metelu.net/sagenb.git master\n> ```\n> \n> is probably shorter to type than the previous comments, and i guess it is not much longer than an internal github pull.\n> \n> I did that already when contributing to other repositories (e.g. rst2ipynb recently), and it did not cause any problem to the maintainer. If i had to get a github account to contribute to sagenb, then i won't consider it only as a \"seemingly problematic platform\".\n> \n> If it is an issue, i can provide certified https on demand. The sha256sum of the commit is 2cb350173d08ac534485918f08bca849e4ac6126.\n\n>",
    "created_at": "2017-03-04T11:59:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329701",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>Replying to [comment:8 tmonteil]:
> I will not enter personal attacks. Let me just point out that i conformed to "the github way" as close as possible, by providing a pull request. I also p


you are conducting a personal attack on people who would need to jump various hoops to accommodate you. Where on Earth do you get this sense of entitlement?
We are not your servants.




rovided an attached self-contained patch, in case.
> 
> 
> ```
> git pull http://tmpsagenb.metelu.net/sagenb.git master
> ```
> 
> is probably shorter to type than the previous comments, and i guess it is not much longer than an internal github pull.
> 
> I did that already when contributing to other repositories (e.g. rst2ipynb recently), and it did not cause any problem to the maintainer. If i had to get a github account to contribute to sagenb, then i won't consider it only as a "seemingly problematic platform".
> 
> If it is an issue, i can provide certified https on demand. The sha256sum of the commit is 2cb350173d08ac534485918f08bca849e4ac6126.

>



---

archive/issue_events_058848.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-05-11T16:43:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22512#event-58848"
}
```



---

archive/issue_comments_329702.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2017-05-11T16:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329702",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_329703.json:
```json
{
    "body": "<a id='comment:11'></a>This is [merged](https://github.com/sagemath/sagenb/commit/b6fb4c9bac183d6ffa1a172e8c953dc074e1c863) in sagenb github repo.",
    "created_at": "2017-05-11T16:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329703",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>This is [merged](https://github.com/sagemath/sagenb/commit/b6fb4c9bac183d6ffa1a172e8c953dc074e1c863) in sagenb github repo.



---

archive/issue_comments_329704.json:
```json
{
    "body": "<a id='comment:12'></a>Thanks !",
    "created_at": "2017-05-11T16:48:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329704",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:12'></a>Thanks !



---

archive/issue_events_058849.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-21T10:49:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22512#event-58849"
}
```



---

archive/issue_comments_329705.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-21T10:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22512#issuecomment-329705",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_058850.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-21T10:49:00Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22512#event-58850"
}
```



---

archive/issue_events_058851.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-21T10:49:00Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22512",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22512#event-58851"
}
```
