# Issue 22209: Differentiation of conj/imag/real/abs functions

archive/issues_021972.json:
```json
{
    "body": "At the moment the result from differentiation of the functions `conj`, `real`, `imag`,  `abs` does not take the argument domain into account.\n\n```\nsage: _ = var('x', domain='real')\nsage: _ = var('z')\n\nsage: (x^z).conjugate().diff(x)\nx^(z - 1)*z*D[0](conjugate)(x^z)\nsage: atan(x).imag_part().diff(x)\nD[0](imag_part)(arctan(x))/(x^2 + 1)\nsage: abs(log(z)).diff(z)\nlog(z)/(z*abs(log(z)))\n```\n\nGiNaC has functionality that is only now included in Pynac. The ticket should doctest it when it is implemented. It all benefits from recent domain logic improvements in Pynac as well.\n\nhttps://github.com/pynac/pynac/issues/45\n\nBranch/Commit: [052e3cb82cbb06a8fcaae7e5b949d8d34504b663](https://github.com/sagemath/sagetrac-mirror/commit/052e3cb82cbb06a8fcaae7e5b949d8d34504b663)\n\nReviewer: Travis Scrimshaw\n\nAuthor: Ralf Stephan\n\nDependencies: #22219\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22209\n\n",
    "closed_at": "2017-05-18T16:39:06Z",
    "created_at": "2017-01-19T16:35:11Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Differentiation of conj/imag/real/abs functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22209",
    "user": "https://github.com/rwst"
}
```
At the moment the result from differentiation of the functions `conj`, `real`, `imag`,  `abs` does not take the argument domain into account.

```
sage: _ = var('x', domain='real')
sage: _ = var('z')

sage: (x^z).conjugate().diff(x)
x^(z - 1)*z*D[0](conjugate)(x^z)
sage: atan(x).imag_part().diff(x)
D[0](imag_part)(arctan(x))/(x^2 + 1)
sage: abs(log(z)).diff(z)
log(z)/(z*abs(log(z)))
```

GiNaC has functionality that is only now included in Pynac. The ticket should doctest it when it is implemented. It all benefits from recent domain logic improvements in Pynac as well.

https://github.com/pynac/pynac/issues/45

Branch/Commit: [052e3cb82cbb06a8fcaae7e5b949d8d34504b663](https://github.com/sagemath/sagetrac-mirror/commit/052e3cb82cbb06a8fcaae7e5b949d8d34504b663)

Reviewer: Travis Scrimshaw

Author: Ralf Stephan

Dependencies: #22219

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22209





---

archive/issue_comments_414587.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,3 +13,5 @@\n ```\n \n GiNaC has functionality that is only now included in Pynac. The ticket should doctest it when it is implemented.\n+\n+https://github.com/pynac/pynac/issues/45\n``````\n",
    "created_at": "2017-01-20T06:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414587",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,3 +13,5 @@
 ```
 
 GiNaC has functionality that is only now included in Pynac. The ticket should doctest it when it is implemented.
+
+https://github.com/pynac/pynac/issues/45
``````




---

archive/issue_comments_414588.json:
```json
{
    "body": "Changing branch from \"\" to \"u/rws/differentiation_of_conj_imag_real_abs_functions\"",
    "created_at": "2017-01-20T08:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414588",
    "user": "https://github.com/rwst"
}
```

Changing branch from "" to "u/rws/differentiation_of_conj_imag_real_abs_functions"



---

archive/issue_comments_414589.json:
```json
{
    "body": "Changing dependencies from \"\" to \"pynac-0.7.4\"",
    "created_at": "2017-01-20T08:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414589",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "" to "pynac-0.7.4"



---

archive/issue_comments_414590.json:
```json
{
    "body": "Changing author from \"\" to \"Ralf Stephan\"",
    "created_at": "2017-01-20T08:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414590",
    "user": "https://github.com/rwst"
}
```

Changing author from "" to "Ralf Stephan"



---

archive/issue_comments_414591.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-01-20T08:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414591",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_414592.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-At the moment the result from differentiation of the functions `conj`, `real`, `imag` is preliminary, and from `abs` is wrong.\n+At the moment the result from differentiation of the functions `conj`, `real`, `imag`,  `abs` does not take the argument domain into account.\n \n ```\n sage: _ = var('x', domain='real')\n@@ -12,6 +12,6 @@\n log(z)/(z*abs(log(z)))\n ```\n \n-GiNaC has functionality that is only now included in Pynac. The ticket should doctest it when it is implemented.\n+GiNaC has functionality that is only now included in Pynac. The ticket should doctest it when it is implemented. It all benefits from recent domain logic improvements in Pynac as well.\n \n https://github.com/pynac/pynac/issues/45\n``````\n",
    "created_at": "2017-01-20T08:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414592",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-At the moment the result from differentiation of the functions `conj`, `real`, `imag` is preliminary, and from `abs` is wrong.
+At the moment the result from differentiation of the functions `conj`, `real`, `imag`,  `abs` does not take the argument domain into account.
 
 ```
 sage: _ = var('x', domain='real')
@@ -12,6 +12,6 @@
 log(z)/(z*abs(log(z)))
 ```
 
-GiNaC has functionality that is only now included in Pynac. The ticket should doctest it when it is implemented.
+GiNaC has functionality that is only now included in Pynac. The ticket should doctest it when it is implemented. It all benefits from recent domain logic improvements in Pynac as well.
 
 https://github.com/pynac/pynac/issues/45
``````




---

archive/issue_comments_414593.json:
```json
{
    "body": "Changing commit from \"\" to \"f96fe12adb044d5ec132f2ca26c15dd09f43d9c1\"",
    "created_at": "2017-01-20T08:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414593",
    "user": "https://github.com/rwst"
}
```

Changing commit from "" to "f96fe12adb044d5ec132f2ca26c15dd09f43d9c1"



---

archive/issue_comments_414594.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                                                        |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[f96fe12](https://github.com/sagemath/sagetrac-mirror/commit/f96fe12adb044d5ec132f2ca26c15dd09f43d9c1)|`22209: Differentiation of conj/imag/real/abs functions`|",
    "created_at": "2017-01-20T08:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414594",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                                                        |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[f96fe12](https://github.com/sagemath/sagetrac-mirror/commit/f96fe12adb044d5ec132f2ca26c15dd09f43d9c1)|`22209: Differentiation of conj/imag/real/abs functions`|



---

archive/issue_comments_414595.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-02-08T07:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414595",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_414596.json:
```json
{
    "body": "Changing dependencies from \"pynac-0.7.4\" to \"#22219\"",
    "created_at": "2017-02-08T07:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414596",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "pynac-0.7.4" to "#22219"



---

archive/issue_comments_414597.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-02-08T07:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414597",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_414598.json:
```json
{
    "body": "<a id='comment:5'></a>\nTrigger patchbot.",
    "created_at": "2017-02-08T07:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414598",
    "user": "https://github.com/rwst"
}
```

<a id='comment:5'></a>
Trigger patchbot.



---

archive/issue_comments_414599.json:
```json
{
    "body": "Changing commit from \"f96fe12adb044d5ec132f2ca26c15dd09f43d9c1\" to \"052e3cb82cbb06a8fcaae7e5b949d8d34504b663\"",
    "created_at": "2017-02-20T08:08:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414599",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f96fe12adb044d5ec132f2ca26c15dd09f43d9c1" to "052e3cb82cbb06a8fcaae7e5b949d8d34504b663"



---

archive/issue_comments_414600.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|\n|[052e3cb](https://github.com/sagemath/sagetrac-mirror/commit/052e3cb82cbb06a8fcaae7e5b949d8d34504b663)|`Merge branch 'develop' into t/22209/differentiation_of_conj_imag_real_abs_functions`|",
    "created_at": "2017-02-20T08:08:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414600",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|
|[052e3cb](https://github.com/sagemath/sagetrac-mirror/commit/052e3cb82cbb06a8fcaae7e5b949d8d34504b663)|`Merge branch 'develop' into t/22209/differentiation_of_conj_imag_real_abs_functions`|



---

archive/issue_comments_414601.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2017-05-16T13:25:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414601",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_414602.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-16T13:25:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414602",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_066395.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-16T13:25:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22209#event-66395"
}
```



---

archive/issue_comments_414603.json:
```json
{
    "body": "<a id='comment:7'></a>\nLGTM.",
    "created_at": "2017-05-16T13:25:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414603",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
LGTM.



---

archive/issue_comments_414604.json:
```json
{
    "body": "Changing branch from \"u/rws/differentiation_of_conj_imag_real_abs_functions\" to \"052e3cb82cbb06a8fcaae7e5b949d8d34504b663\"",
    "created_at": "2017-05-18T16:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414604",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/rws/differentiation_of_conj_imag_real_abs_functions" to "052e3cb82cbb06a8fcaae7e5b949d8d34504b663"



---

archive/issue_events_066396.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-18T16:39:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22209#event-66396"
}
```



---

archive/issue_comments_414605.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-18T16:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-414605",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
