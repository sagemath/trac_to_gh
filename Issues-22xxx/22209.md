# Issue 22209: Differentiation of conj/imag/real/abs functions

archive/issues_021972.json:
```json
{
    "body": "At the moment the result from differentiation of the functions `conj`, `real`, `imag`,  `abs` does not take the argument domain into account.\n\n```\nsage: _ = var('x', domain='real')\nsage: _ = var('z')\n\nsage: (x^z).conjugate().diff(x)\nx^(z - 1)*z*D[0](conjugate)(x^z)\nsage: atan(x).imag_part().diff(x)\nD[0](imag_part)(arctan(x))/(x^2 + 1)\nsage: abs(log(z)).diff(z)\nlog(z)/(z*abs(log(z)))\n```\n\nGiNaC has functionality that is only now included in Pynac. The ticket should doctest it when it is implemented. It all benefits from recent domain logic improvements in Pynac as well.\n\nhttps://github.com/pynac/pynac/issues/45\n\nBranch/Commit: 052e3cb82cbb06a8fcaae7e5b949d8d34504b663\n\nReviewer: Travis Scrimshaw\n\nAuthor: Ralf Stephan\n\nDependencies: #22219\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22209\n\n",
    "closed_at": "2017-05-18T16:39:06Z",
    "created_at": "2017-01-19T16:35:11Z",
    "labels": [
        "component: symbolics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Differentiation of conj/imag/real/abs functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22209",
    "user": "https://github.com/rwst"
}
```
At the moment the result from differentiation of the functions `conj`, `real`, `imag`,  `abs` does not take the argument domain into account.

```
sage: _ = var('x', domain='real')
sage: _ = var('z')

sage: (x^z).conjugate().diff(x)
x^(z - 1)*z*D[0](conjugate)(x^z)
sage: atan(x).imag_part().diff(x)
D[0](imag_part)(arctan(x))/(x^2 + 1)
sage: abs(log(z)).diff(z)
log(z)/(z*abs(log(z)))
```

GiNaC has functionality that is only now included in Pynac. The ticket should doctest it when it is implemented. It all benefits from recent domain logic improvements in Pynac as well.

https://github.com/pynac/pynac/issues/45

Branch/Commit: 052e3cb82cbb06a8fcaae7e5b949d8d34504b663

Reviewer: Travis Scrimshaw

Author: Ralf Stephan

Dependencies: #22219

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22209





---

archive/issue_comments_325148.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,6 +14,8 @@\n \n GiNaC has functionality that is only now included in Pynac. The ticket should doctest it when it is implemented.\n \n+https://github.com/pynac/pynac/issues/45\n+\n Comment: 1\n \n Issue created by migration from https://trac.sagemath.org/ticket/22209\n``````\n",
    "created_at": "2017-01-20T06:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-325148",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,6 +14,8 @@
 
 GiNaC has functionality that is only now included in Pynac. The ticket should doctest it when it is implemented.
 
+https://github.com/pynac/pynac/issues/45
+
 Comment: 1
 
 Issue created by migration from https://trac.sagemath.org/ticket/22209
``````




---

archive/issue_comments_325149.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-01-20T08:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-325149",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_325150.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+At the moment the result from differentiation of the functions `conj`, `real`, `imag`,  `abs` does not take the argument domain into account.\n \n+```\n+sage: _ = var('x', domain='real')\n+sage: _ = var('z')\n+\n+sage: (x^z).conjugate().diff(x)\n+x^(z - 1)*z*D[0](conjugate)(x^z)\n+sage: atan(x).imag_part().diff(x)\n+D[0](imag_part)(arctan(x))/(x^2 + 1)\n+sage: abs(log(z)).diff(z)\n+log(z)/(z*abs(log(z)))\n+```\n+\n+GiNaC has functionality that is only now included in Pynac. The ticket should doctest it when it is implemented. It all benefits from recent domain logic improvements in Pynac as well.\n+\n+https://github.com/pynac/pynac/issues/45\n \n Comment: 1\n \n``````\n",
    "created_at": "2017-01-20T08:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-325150",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,20 @@
+At the moment the result from differentiation of the functions `conj`, `real`, `imag`,  `abs` does not take the argument domain into account.
 
+```
+sage: _ = var('x', domain='real')
+sage: _ = var('z')
+
+sage: (x^z).conjugate().diff(x)
+x^(z - 1)*z*D[0](conjugate)(x^z)
+sage: atan(x).imag_part().diff(x)
+D[0](imag_part)(arctan(x))/(x^2 + 1)
+sage: abs(log(z)).diff(z)
+log(z)/(z*abs(log(z)))
+```
+
+GiNaC has functionality that is only now included in Pynac. The ticket should doctest it when it is implemented. It all benefits from recent domain logic improvements in Pynac as well.
+
+https://github.com/pynac/pynac/issues/45
 
 Comment: 1
 
``````




---

archive/issue_comments_325151.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2017-01-20T08:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-325151",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_325152.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-02-08T07:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-325152",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_325153.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-02-08T07:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-325153",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_325154.json:
```json
{
    "body": "<a id='comment:5'></a>Trigger patchbot.",
    "created_at": "2017-02-08T07:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-325154",
    "user": "https://github.com/rwst"
}
```

<a id='comment:5'></a>Trigger patchbot.



---

archive/issue_comments_325155.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-20T08:08:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-325155",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_325156.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-16T13:25:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-325156",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_058385.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-16T13:25:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22209#event-58385"
}
```



---

archive/issue_comments_325157.json:
```json
{
    "body": "<a id='comment:7'></a>LGTM.",
    "created_at": "2017-05-16T13:25:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-325157",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>LGTM.



---

archive/issue_events_058386.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-18T16:39:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22209#event-58386"
}
```



---

archive/issue_comments_325158.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-18T16:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22209",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22209#issuecomment-325158",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
