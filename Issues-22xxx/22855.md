# Issue 22855: Add weight space permutahedron for Coxeter matrix group

archive/issues_022618.json:
```json
{
    "assignees": [],
    "body": "Using almost the same code from ReflectionGroup and adding it to CoxeterMatrixGroup in order to allow constructing a weight space permutahedron in a Coxeter matrix group and not just in reflection groups.\n\nCC:  @tscrim @fchapoton @stumpc5\n\nKeywords: **sagedays86**\n\nBranch/Commit: **[`e85b3fb`](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Aram Dermenjian**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22855_\n\n",
    "closed_at": "2017-05-31T22:25:37Z",
    "created_at": "2017-04-21T19:00:06Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add weight space permutahedron for Coxeter matrix group",
    "type": "issue",
    "updated_at": "2017-05-31T22:25:37Z",
    "url": "https://github.com/sagemath/sage/issues/22855",
    "user": "https://github.com/thecaligarmo"
}
```
Using almost the same code from ReflectionGroup and adding it to CoxeterMatrixGroup in order to allow constructing a weight space permutahedron in a Coxeter matrix group and not just in reflection groups.

CC:  @tscrim @fchapoton @stumpc5

Keywords: **sagedays86**

Branch/Commit: **[`e85b3fb`](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)**

Reviewer: **Travis Scrimshaw**

Author: **Aram Dermenjian**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/22855_





---

archive/issue_events_316109.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-04-21T19:00:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316109"
}
```



---

archive/issue_events_316110.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-04-21T19:00:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316110"
}
```



---

archive/issue_events_316111.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-04-21T19:00:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316111"
}
```



---

archive/issue_events_316112.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-04-21T19:00:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316112"
}
```



---

archive/issue_comments_340831.json:
```json
{
    "body": "Branch: **[u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group)**",
    "created_at": "2017-04-21T19:32:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340831",
    "user": "https://github.com/thecaligarmo"
}
```

Branch: **[u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group)**



---

archive/issue_events_316113.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-04-21T19:41:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316113"
}
```



---

archive/issue_comments_340832.json:
```json
{
    "body": "Changed author from **aram.dermenjian** to **Aram Dermenjian**",
    "created_at": "2017-04-21T19:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340832",
    "user": "https://github.com/thecaligarmo"
}
```

Changed author from **aram.dermenjian** to **Aram Dermenjian**



---

archive/issue_comments_340833.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ed823059311d688a21294fce5e198a3c8a2cb9e\"><code>6ed8230</code></a></td><td><code>Add permutahedron to Coxeter matrix group</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd\"><code>7ab3fc6</code></a></td><td><code>normalizing breaks the base ring</code></td></tr></table>\n",
    "created_at": "2017-04-21T19:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340833",
    "user": "https://github.com/thecaligarmo"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ed823059311d688a21294fce5e198a3c8a2cb9e"><code>6ed8230</code></a></td><td><code>Add permutahedron to Coxeter matrix group</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd"><code>7ab3fc6</code></a></td><td><code>normalizing breaks the base ring</code></td></tr></table>




---

archive/issue_comments_340834.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw,Christian Stump,Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2017-04-21T19:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340834",
    "user": "https://github.com/thecaligarmo"
}
```

Reviewer: **Travis Scrimshaw,Christian Stump,Frédéric Chapoton**



---

archive/issue_comments_340835.json:
```json
{
    "body": "Commit: **[`7ab3fc6`](https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd)**",
    "created_at": "2017-04-21T19:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340835",
    "user": "https://github.com/thecaligarmo"
}
```

Commit: **[`7ab3fc6`](https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd)**



---

archive/issue_comments_340836.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw,Christian Stump,Fr\u00e9d\u00e9ric Chapoton** to none",
    "created_at": "2017-04-21T19:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340836",
    "user": "https://github.com/thecaligarmo"
}
```

Changed reviewer from **Travis Scrimshaw,Christian Stump,Frédéric Chapoton** to none



---

archive/issue_comments_340837.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nCan we lift this to the category and use more generic code (i.e., by using the `canonical_matrix`)?\n\nI'm also a little worried about using the fundamental weights for a few reasons. The first is the choice of a weight lattice I think means we have chosen a Cartan type, which is a little bit of extra data. The second is that the simple roots are not necessarily linearly independent when described by the fundamental weights, e.g., in affine types you need an extra element `\\delta`.\n\nActually, the `ReflectionGroup_real.permutahedron` says in a `.. NOTE::` that it is in the root system basis. Christian, do you have any comments on this?\n\nMinor doc point, you need an extra blank line:\n\n```diff\n         .. NOTE::\n+\n             The result is expressed in the root basis coordinates.\n```",
    "created_at": "2017-04-22T02:17:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340837",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

Can we lift this to the category and use more generic code (i.e., by using the `canonical_matrix`)?

I'm also a little worried about using the fundamental weights for a few reasons. The first is the choice of a weight lattice I think means we have chosen a Cartan type, which is a little bit of extra data. The second is that the simple roots are not necessarily linearly independent when described by the fundamental weights, e.g., in affine types you need an extra element `\delta`.

Actually, the `ReflectionGroup_real.permutahedron` says in a `.. NOTE::` that it is in the root system basis. Christian, do you have any comments on this?

Minor doc point, you need an extra blank line:

```diff
         .. NOTE::
+
             The result is expressed in the root basis coordinates.
```



---

archive/issue_comments_340838.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI had looked into moving this up to the category, but there are a few reasons I was a little hesitant. It seems like the way coxeter matrices are constructed/stored are different between the three main Coxeter group classes (CoxeterMatrixGroups, WeylGroups, and ReflectionGroups). In order to make it work in the category we'd need to add individual tests to find the matrix. The canonical matrix is a little tricky as it is only defined on an element. So we'd need to create an element just to grab it's canonical_matrix.\n\nFor the fundamental_weights, it actually looks at the bilinear form which is only looking at the coxeter matrix. So in the case of CoxeterMatrixGroups there is not that extra bit of data.\n\nFor your second concern, for affine Coxeter groups, fundamental_weights already breaks on affine Coxeter groups due to the concern you described above. So in this case the permutahedron would throw the same error as fundamental weights will. To alter the error we can always check to make sure the group is finite and throw an error if not and go from there.\n\nI missed that. The extra blank line has been added.",
    "created_at": "2017-04-22T12:54:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340838",
    "user": "https://github.com/thecaligarmo"
}
```

<div id="comment:5" align="right">comment:5</div>

I had looked into moving this up to the category, but there are a few reasons I was a little hesitant. It seems like the way coxeter matrices are constructed/stored are different between the three main Coxeter group classes (CoxeterMatrixGroups, WeylGroups, and ReflectionGroups). In order to make it work in the category we'd need to add individual tests to find the matrix. The canonical matrix is a little tricky as it is only defined on an element. So we'd need to create an element just to grab it's canonical_matrix.

For the fundamental_weights, it actually looks at the bilinear form which is only looking at the coxeter matrix. So in the case of CoxeterMatrixGroups there is not that extra bit of data.

For your second concern, for affine Coxeter groups, fundamental_weights already breaks on affine Coxeter groups due to the concern you described above. So in this case the permutahedron would throw the same error as fundamental weights will. To alter the error we can always check to make sure the group is finite and throw an error if not and go from there.

I missed that. The extra blank line has been added.



---

archive/issue_comments_340839.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176\"><code>af483cb</code></a></td><td><code>Fix note spacing</code></td></tr></table>\n",
    "created_at": "2017-04-22T12:54:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340839",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176"><code>af483cb</code></a></td><td><code>Fix note spacing</code></td></tr></table>




---

archive/issue_comments_340840.json:
```json
{
    "body": "Changed commit from **[`7ab3fc6`](https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd)** to **[`af483cb`](https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176)**",
    "created_at": "2017-04-22T12:54:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340840",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7ab3fc6`](https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd)** to **[`af483cb`](https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176)**



---

archive/issue_comments_340841.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@thecaligarmo](#comment:5):\n> I had looked into moving this up to the category, but there are a few reasons I was a little hesitant. It seems like the way coxeter matrices are constructed/stored are different between the three main Coxeter group classes (CoxeterMatrixGroups, WeylGroups, and ReflectionGroups). In order to make it work in the category we'd need to add individual tests to find the matrix. The canonical matrix is a little tricky as it is only defined on an element. So we'd need to create an element just to grab it's canonical_matrix.\n\nThe `canonical_matrix` is suppose to be with respect to the root basis (i.e., the canonical faithful representation), so there is nothing you need to test.\n\nActually, the bilinear form (can be obtained from the Coxeter matrix, which is basically a required method) and fundamental weights (which comes from the bilinear form) both should be lifted to the category.\n\n> For the fundamental_weights, it actually looks at the bilinear form which is only looking at the coxeter matrix. So in the case of CoxeterMatrixGroups there is not that extra bit of data.\n\nAh, right, it is just the dual basis wrt the bilinear form. Which roots are short and long are not relevant.\n\n> For your second concern, for affine Coxeter groups, fundamental_weights already breaks on affine Coxeter groups due to the concern you described above. So in this case the permutahedron would throw the same error as fundamental weights will. To alter the error we can always check to make sure the group is finite and throw an error if not and go from there.\n\nYes, we should definitely check that the group is finite, otherwise the permutahedron would run for forever. For example, I believe this would never terminate:\n\n```\nsage: W = CoxeterGroup([[1,7,2],[7,1,3],[2,3,1]])\nsage: W.bilinear_form().det()\n-1/2*E(7) - 1/4*E(7)^2 - 1/4*E(7)^3 - 1/4*E(7)^4 - 1/4*E(7)^5 - 1/2*E(7)^6\nsage: W.permutahedron()\n# Wait until the end of the universe\n```",
    "created_at": "2017-04-22T13:32:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340841",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@thecaligarmo](#comment:5):
> I had looked into moving this up to the category, but there are a few reasons I was a little hesitant. It seems like the way coxeter matrices are constructed/stored are different between the three main Coxeter group classes (CoxeterMatrixGroups, WeylGroups, and ReflectionGroups). In order to make it work in the category we'd need to add individual tests to find the matrix. The canonical matrix is a little tricky as it is only defined on an element. So we'd need to create an element just to grab it's canonical_matrix.

The `canonical_matrix` is suppose to be with respect to the root basis (i.e., the canonical faithful representation), so there is nothing you need to test.

Actually, the bilinear form (can be obtained from the Coxeter matrix, which is basically a required method) and fundamental weights (which comes from the bilinear form) both should be lifted to the category.

> For the fundamental_weights, it actually looks at the bilinear form which is only looking at the coxeter matrix. So in the case of CoxeterMatrixGroups there is not that extra bit of data.

Ah, right, it is just the dual basis wrt the bilinear form. Which roots are short and long are not relevant.

> For your second concern, for affine Coxeter groups, fundamental_weights already breaks on affine Coxeter groups due to the concern you described above. So in this case the permutahedron would throw the same error as fundamental weights will. To alter the error we can always check to make sure the group is finite and throw an error if not and go from there.

Yes, we should definitely check that the group is finite, otherwise the permutahedron would run for forever. For example, I believe this would never terminate:

```
sage: W = CoxeterGroup([[1,7,2],[7,1,3],[2,3,1]])
sage: W.bilinear_form().det()
-1/2*E(7) - 1/4*E(7)^2 - 1/4*E(7)^3 - 1/4*E(7)^4 - 1/4*E(7)^5 - 1/2*E(7)^6
sage: W.permutahedron()
# Wait until the end of the universe
```



---

archive/issue_comments_340842.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAlso, we should shrink the plot width to `300 px`.",
    "created_at": "2017-04-22T13:32:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340842",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">comment:8</div>

Also, we should shrink the plot width to `300 px`.



---

archive/issue_comments_340843.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7c7c9aa7b75fe7115e21648189df6203ddd30b7\"><code>d7c7c9a</code></a></td><td><code>Add infinite warning and reduce image size</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de\"><code>885b978</code></a></td><td><code>Use canonical matrix rank</code></td></tr></table>\n",
    "created_at": "2017-04-25T13:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340843",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7c7c9aa7b75fe7115e21648189df6203ddd30b7"><code>d7c7c9a</code></a></td><td><code>Add infinite warning and reduce image size</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de"><code>885b978</code></a></td><td><code>Use canonical matrix rank</code></td></tr></table>




---

archive/issue_comments_340844.json:
```json
{
    "body": "Changed commit from **[`af483cb`](https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176)** to **[`885b978`](https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de)**",
    "created_at": "2017-04-25T13:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340844",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`af483cb`](https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176)** to **[`885b978`](https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de)**



---

archive/issue_comments_340845.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI've gone ahead and used the canonical_matrix as desired and also decreased the plot width to 300px. There is now a TypeError warning when the coxeter group is infinite. Let me know if you'd like the wording on that changed.[]\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7c7c9aa7b75fe7115e21648189df6203ddd30b7\"><code>d7c7c9a</code></a></td><td><code>Add infinite warning and reduce image size</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de\"><code>885b978</code></a></td><td><code>Use canonical matrix rank</code></td></tr></table>\n",
    "created_at": "2017-04-25T13:39:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340845",
    "user": "https://github.com/thecaligarmo"
}
```

<div id="comment:10" align="right">comment:10</div>

I've gone ahead and used the canonical_matrix as desired and also decreased the plot width to 300px. There is now a TypeError warning when the coxeter group is infinite. Let me know if you'd like the wording on that changed.[]

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7c7c9aa7b75fe7115e21648189df6203ddd30b7"><code>d7c7c9a</code></a></td><td><code>Add infinite warning and reduce image size</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de"><code>885b978</code></a></td><td><code>Use canonical matrix rank</code></td></tr></table>




---

archive/issue_comments_340846.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nActually, we could drop the finite check if we lift this to the category of finite Coxeter groups, which I think we should do now as the implementation is generic.",
    "created_at": "2017-04-26T03:16:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340846",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

Actually, we could drop the finite check if we lift this to the category of finite Coxeter groups, which I think we should do now as the implementation is generic.



---

archive/issue_comments_340847.json:
```json
{
    "body": "Changed commit from **[`885b978`](https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de)** to **[`4b14e27`](https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815)**",
    "created_at": "2017-05-10T20:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340847",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`885b978`](https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de)** to **[`4b14e27`](https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815)**



---

archive/issue_comments_340848.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815\"><code>4b14e27</code></a></td><td><code>Pushing permutahedron to category</code></td></tr></table>\n",
    "created_at": "2017-05-10T20:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340848",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815"><code>4b14e27</code></a></td><td><code>Pushing permutahedron to category</code></td></tr></table>




---

archive/issue_comments_340849.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nOk, I've pushed it up to the finite coxeter group category. (Thus I've removed the finite test as it's only in finite groups) I couldn't test the ReflectionGroup section as I don't have chevie on my computer. It would be nice to get that double checked though as the code is slightly different than what was there before. (The tests have been ported over)",
    "created_at": "2017-05-10T20:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340849",
    "user": "https://github.com/thecaligarmo"
}
```

<div id="comment:13" align="right">comment:13</div>

Ok, I've pushed it up to the finite coxeter group category. (Thus I've removed the finite test as it's only in finite groups) I couldn't test the ReflectionGroup section as I don't have chevie on my computer. It would be nice to get that double checked though as the code is slightly different than what was there before. (The tests have been ported over)



---

archive/issue_comments_340850.json:
```json
{
    "body": "Changed branch from **[u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group)** to **[public/combinat/permutahedron_finite_coxeter_groups-22855](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/permutahedron_finite_coxeter_groups-22855)**",
    "created_at": "2017-05-10T21:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340850",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group)** to **[public/combinat/permutahedron_finite_coxeter_groups-22855](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/permutahedron_finite_coxeter_groups-22855)**



---

archive/issue_comments_340851.json:
```json
{
    "body": "Changed commit from **[`4b14e27`](https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815)** to **[`363c814`](https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec)**",
    "created_at": "2017-05-10T21:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340851",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[`4b14e27`](https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815)** to **[`363c814`](https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec)**



---

archive/issue_comments_340852.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2017-05-10T21:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340852",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_340853.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI fixed the indentation of the `permutahedron` method. I made `fundamental_weights` returns a `Family` for the Coxeter matrix group and cached the result. I also changed the base ring to be an input to `permutahedron`, and if it is not given, it defaults to the base ring that the vertices are computed over. IMO this is better because it should be defined over the common ring that contains the fundamental weights and the image of the action of the Coxeter group.\n\nI've tested this with `gap3`. If you agree with my changes, then positive review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a42c07f5893b67b861a4dac1969c93cbed1ec58\"><code>8a42c07</code></a></td><td><code>Merge branch 'u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group' of git://trac.sagemath.org/sage into u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec\"><code>363c814</code></a></td><td><code>Doing some compatibility changes and fixing a few things.</code></td></tr></table>\n",
    "created_at": "2017-05-10T21:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340853",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">comment:14</div>

I fixed the indentation of the `permutahedron` method. I made `fundamental_weights` returns a `Family` for the Coxeter matrix group and cached the result. I also changed the base ring to be an input to `permutahedron`, and if it is not given, it defaults to the base ring that the vertices are computed over. IMO this is better because it should be defined over the common ring that contains the fundamental weights and the image of the action of the Coxeter group.

I've tested this with `gap3`. If you agree with my changes, then positive review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a42c07f5893b67b861a4dac1969c93cbed1ec58"><code>8a42c07</code></a></td><td><code>Merge branch 'u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group' of git://trac.sagemath.org/sage into u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec"><code>363c814</code></a></td><td><code>Doing some compatibility changes and fixing a few things.</code></td></tr></table>




---

archive/issue_comments_340854.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThe changes look ok to me. Your idea for the base ring is a good one. Is there a reason you switched it to a family instead of leaving it as a dictionary? Does it help with performance?",
    "created_at": "2017-05-11T14:43:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340854",
    "user": "https://github.com/thecaligarmo"
}
```

<div id="comment:15" align="right">comment:15</div>

The changes look ok to me. Your idea for the base ring is a good one. Is there a reason you switched it to a family instead of leaving it as a dictionary? Does it help with performance?



---

archive/issue_events_316114.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-05-11T14:43:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316114"
}
```



---

archive/issue_events_316115.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-05-11T14:43:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316115"
}
```



---

archive/issue_comments_340855.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIt allows us to cache the result, which has a performance gain, and is a more standard idiom for things like this.",
    "created_at": "2017-05-11T14:50:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340855",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">comment:16</div>

It allows us to cache the result, which has a performance gain, and is a more standard idiom for things like this.



---

archive/issue_comments_340856.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n\n```\nsage -t --long --warn-long 65.0 src/sage/combinat/subword_complex.py  # 4 doctests failed\n```",
    "created_at": "2017-05-13T20:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340856",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:17" align="right">comment:17</div>


```
sage -t --long --warn-long 65.0 src/sage/combinat/subword_complex.py  # 4 doctests failed
```



---

archive/issue_events_316116.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-13T20:54:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316116"
}
```



---

archive/issue_events_316117.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-13T20:54:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316117"
}
```



---

archive/issue_comments_340857.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5422c088f7a9466009549fd43b33e15b2cd5253\"><code>f5422c0</code></a></td><td><code>Merge branch 'public/combinat/permutahedron_finite_coxeter_groups-22855' of git://trac.sagemath.org/sage into public/combinat/permutahedron_finite_coxeter_groups-22855</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505\"><code>e85b3fb</code></a></td><td><code>Need to iterate over the keys.</code></td></tr></table>\n",
    "created_at": "2017-05-13T22:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340857",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5422c088f7a9466009549fd43b33e15b2cd5253"><code>f5422c0</code></a></td><td><code>Merge branch 'public/combinat/permutahedron_finite_coxeter_groups-22855' of git://trac.sagemath.org/sage into public/combinat/permutahedron_finite_coxeter_groups-22855</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505"><code>e85b3fb</code></a></td><td><code>Need to iterate over the keys.</code></td></tr></table>




---

archive/issue_comments_340858.json:
```json
{
    "body": "Changed commit from **[`363c814`](https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec)** to **[`e85b3fb`](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)**",
    "created_at": "2017-05-13T22:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340858",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`363c814`](https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec)** to **[`e85b3fb`](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)**



---

archive/issue_comments_340859.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nWhoops, forgot to retest that file after changing to a `Family`. Simple fix.",
    "created_at": "2017-05-13T22:38:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340859",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

Whoops, forgot to retest that file after changing to a `Family`. Simple fix.



---

archive/issue_events_316118.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-13T22:38:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316118"
}
```



---

archive/issue_events_316119.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-13T22:38:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316119"
}
```



---

archive/issue_comments_340860.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nPatchbot is (essentially) green.",
    "created_at": "2017-05-18T01:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340860",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

Patchbot is (essentially) green.



---

archive/issue_comments_340861.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nping",
    "created_at": "2017-05-25T05:04:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340861",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:21" align="right">comment:21</div>

ping



---

archive/issue_comments_340862.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nSorry for the delay, it's been a busy couple weeks. Everything looks good from here. Tested things out and everything seems to work ok.",
    "created_at": "2017-05-30T10:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340862",
    "user": "https://github.com/thecaligarmo"
}
```

<div id="comment:22" align="right">comment:22</div>

Sorry for the delay, it's been a busy couple weeks. Everything looks good from here. Tested things out and everything seems to work ok.



---

archive/issue_events_316120.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-05-30T10:40:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316120"
}
```



---

archive/issue_events_316121.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-05-30T10:40:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316121"
}
```



---

archive/issue_events_316122.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-31T22:25:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316122"
}
```



---

archive/issue_events_316123.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3d233855a71c3c197ee607cb34db47f75f3b9d20",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-05-31T22:25:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-316123"
}
```



---

archive/issue_comments_340863.json:
```json
{
    "body": "Changed branch from **[public/combinat/permutahedron_finite_coxeter_groups-22855](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/permutahedron_finite_coxeter_groups-22855)** to **[`e85b3fb`](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)**",
    "created_at": "2017-05-31T22:25:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-340863",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/combinat/permutahedron_finite_coxeter_groups-22855](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/permutahedron_finite_coxeter_groups-22855)** to **[`e85b3fb`](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)**
