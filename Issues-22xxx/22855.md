# Issue 22855: Add weight space permutahedron for Coxeter matrix group

archive/issues_022618.json:
```json
{
    "body": "Using almost the same code from ReflectionGroup and adding it to CoxeterMatrixGroup in order to allow constructing a weight space permutahedron in a Coxeter matrix group and not just in reflection groups.\n\n**CC:**  @tscrim @fchapoton stumpc5\n\n**Keywords:** sagedays86\n\n**Branch/Commit:** [e85b3fb65f2c13d8da59bb7945be300590e64505](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Aram Dermenjian\n\nIssue created by migration from https://trac.sagemath.org/ticket/22855\n\n",
    "closed_at": "2017-05-31T22:25:37Z",
    "created_at": "2017-04-21T19:00:06Z",
    "labels": [
        "component: combinatorics",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "title": "Add weight space permutahedron for Coxeter matrix group",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/22855",
    "user": "https://github.com/thecaligarmo"
}
```
Using almost the same code from ReflectionGroup and adding it to CoxeterMatrixGroup in order to allow constructing a weight space permutahedron in a Coxeter matrix group and not just in reflection groups.

**CC:**  @tscrim @fchapoton stumpc5

**Keywords:** sagedays86

**Branch/Commit:** [e85b3fb65f2c13d8da59bb7945be300590e64505](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)

**Reviewer:** Travis Scrimshaw

**Author:** Aram Dermenjian

Issue created by migration from https://trac.sagemath.org/ticket/22855





---

archive/issue_comments_343425.json:
```json
{
    "body": "**Branch:** [u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group)",
    "created_at": "2017-04-21T19:32:26Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343425",
    "user": "https://github.com/thecaligarmo"
}
```

**Branch:** [u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group)



---

archive/issue_events_203763.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-04-21T19:41:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-203763"
}
```



---

archive/issue_comments_343426.json:
```json
{
    "body": "**Changing author** from \"aram.dermenjian\" to \"Aram Dermenjian\".",
    "created_at": "2017-04-21T19:41:13Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343426",
    "user": "https://github.com/thecaligarmo"
}
```

**Changing author** from "aram.dermenjian" to "Aram Dermenjian".



---

archive/issue_comments_343427.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ed823059311d688a21294fce5e198a3c8a2cb9e\">6ed8230</a></td><td><code>Add permutahedron to Coxeter matrix group</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd\">7ab3fc6</a></td><td><code>normalizing breaks the base ring</code></td></tr></table>\n",
    "created_at": "2017-04-21T19:41:13Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343427",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ed823059311d688a21294fce5e198a3c8a2cb9e">6ed8230</a></td><td><code>Add permutahedron to Coxeter matrix group</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd">7ab3fc6</a></td><td><code>normalizing breaks the base ring</code></td></tr></table>




---

archive/issue_comments_343428.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw,Christian Stump,Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2017-04-21T19:41:13Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343428",
    "user": "https://github.com/thecaligarmo"
}
```

**Reviewer:** Travis Scrimshaw,Christian Stump,Frédéric Chapoton



---

archive/issue_comments_343429.json:
```json
{
    "body": "**Commit:** [7ab3fc627047d0d3f1f2631289f39f2ac4d650bd](https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd)",
    "created_at": "2017-04-21T19:41:13Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343429",
    "user": "https://github.com/thecaligarmo"
}
```

**Commit:** [7ab3fc627047d0d3f1f2631289f39f2ac4d650bd](https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd)



---

archive/issue_comments_343430.json:
```json
{
    "body": "**Changing reviewer** from \"Travis Scrimshaw,Christian Stump,Fr\u00e9d\u00e9ric Chapoton\" to \"\".",
    "created_at": "2017-04-21T19:50:06Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343430",
    "user": "https://github.com/thecaligarmo"
}
```

**Changing reviewer** from "Travis Scrimshaw,Christian Stump,Frédéric Chapoton" to "".



---

archive/issue_comments_343431.json:
```json
{
    "body": "<a id='comment:4'></a>\nCan we lift this to the category and use more generic code (i.e., by using the `canonical_matrix`)?\n\nI'm also a little worried about using the fundamental weights for a few reasons. The first is the choice of a weight lattice I think means we have chosen a Cartan type, which is a little bit of extra data. The second is that the simple roots are not necessarily linearly independent when described by the fundamental weights, e.g., in affine types you need an extra element `\\delta`.\n\nActually, the `ReflectionGroup_real.permutahedron` says in a `.. NOTE::` that it is in the root system basis. Christian, do you have any comments on this?\n\nMinor doc point, you need an extra blank line:\n\n```diff\n         .. NOTE::\n+\n             The result is expressed in the root basis coordinates.\n```",
    "created_at": "2017-04-22T02:17:02Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343431",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
Can we lift this to the category and use more generic code (i.e., by using the `canonical_matrix`)?

I'm also a little worried about using the fundamental weights for a few reasons. The first is the choice of a weight lattice I think means we have chosen a Cartan type, which is a little bit of extra data. The second is that the simple roots are not necessarily linearly independent when described by the fundamental weights, e.g., in affine types you need an extra element `\delta`.

Actually, the `ReflectionGroup_real.permutahedron` says in a `.. NOTE::` that it is in the root system basis. Christian, do you have any comments on this?

Minor doc point, you need an extra blank line:

```diff
         .. NOTE::
+
             The result is expressed in the root basis coordinates.
```



---

archive/issue_comments_343432.json:
```json
{
    "body": "<a id='comment:5'></a>\nI had looked into moving this up to the category, but there are a few reasons I was a little hesitant. It seems like the way coxeter matrices are constructed/stored are different between the three main Coxeter group classes (CoxeterMatrixGroups, WeylGroups, and ReflectionGroups). In order to make it work in the category we'd need to add individual tests to find the matrix. The canonical matrix is a little tricky as it is only defined on an element. So we'd need to create an element just to grab it's canonical_matrix.\n\nFor the fundamental_weights, it actually looks at the bilinear form which is only looking at the coxeter matrix. So in the case of CoxeterMatrixGroups there is not that extra bit of data.\n\nFor your second concern, for affine Coxeter groups, fundamental_weights already breaks on affine Coxeter groups due to the concern you described above. So in this case the permutahedron would throw the same error as fundamental weights will. To alter the error we can always check to make sure the group is finite and throw an error if not and go from there.\n\nI missed that. The extra blank line has been added.",
    "created_at": "2017-04-22T12:54:08Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343432",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:5'></a>
I had looked into moving this up to the category, but there are a few reasons I was a little hesitant. It seems like the way coxeter matrices are constructed/stored are different between the three main Coxeter group classes (CoxeterMatrixGroups, WeylGroups, and ReflectionGroups). In order to make it work in the category we'd need to add individual tests to find the matrix. The canonical matrix is a little tricky as it is only defined on an element. So we'd need to create an element just to grab it's canonical_matrix.

For the fundamental_weights, it actually looks at the bilinear form which is only looking at the coxeter matrix. So in the case of CoxeterMatrixGroups there is not that extra bit of data.

For your second concern, for affine Coxeter groups, fundamental_weights already breaks on affine Coxeter groups due to the concern you described above. So in this case the permutahedron would throw the same error as fundamental weights will. To alter the error we can always check to make sure the group is finite and throw an error if not and go from there.

I missed that. The extra blank line has been added.



---

archive/issue_comments_343433.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176\">af483cb</a></td><td><code>Fix note spacing</code></td></tr></table>\n",
    "created_at": "2017-04-22T12:54:47Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343433",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176">af483cb</a></td><td><code>Fix note spacing</code></td></tr></table>




---

archive/issue_comments_343434.json:
```json
{
    "body": "**Changing commit** from \"[7ab3fc627047d0d3f1f2631289f39f2ac4d650bd](https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd)\" to \"[af483cb37df10077c954328c01b12743c3f27176](https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176)\".",
    "created_at": "2017-04-22T12:54:47Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7ab3fc627047d0d3f1f2631289f39f2ac4d650bd](https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd)" to "[af483cb37df10077c954328c01b12743c3f27176](https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176)".



---

archive/issue_comments_343435.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [@thecaligarmo](#comment%3A5):\n> I had looked into moving this up to the category, but there are a few reasons I was a little hesitant. It seems like the way coxeter matrices are constructed/stored are different between the three main Coxeter group classes (CoxeterMatrixGroups, WeylGroups, and ReflectionGroups). In order to make it work in the category we'd need to add individual tests to find the matrix. The canonical matrix is a little tricky as it is only defined on an element. So we'd need to create an element just to grab it's canonical_matrix.\n\nThe `canonical_matrix` is suppose to be with respect to the root basis (i.e., the canonical faithful representation), so there is nothing you need to test.\n\nActually, the bilinear form (can be obtained from the Coxeter matrix, which is basically a required method) and fundamental weights (which comes from the bilinear form) both should be lifted to the category.\n\n> For the fundamental_weights, it actually looks at the bilinear form which is only looking at the coxeter matrix. So in the case of CoxeterMatrixGroups there is not that extra bit of data.\n\nAh, right, it is just the dual basis wrt the bilinear form. Which roots are short and long are not relevant.\n\n> For your second concern, for affine Coxeter groups, fundamental_weights already breaks on affine Coxeter groups due to the concern you described above. So in this case the permutahedron would throw the same error as fundamental weights will. To alter the error we can always check to make sure the group is finite and throw an error if not and go from there.\n\nYes, we should definitely check that the group is finite, otherwise the permutahedron would run for forever. For example, I believe this would never terminate:\n\n```\nsage: W = CoxeterGroup([[1,7,2],[7,1,3],[2,3,1]])\nsage: W.bilinear_form().det()\n-1/2*E(7) - 1/4*E(7)^2 - 1/4*E(7)^3 - 1/4*E(7)^4 - 1/4*E(7)^5 - 1/2*E(7)^6\nsage: W.permutahedron()\n# Wait until the end of the universe\n```",
    "created_at": "2017-04-22T13:32:14Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343435",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
Replying to [@thecaligarmo](#comment%3A5):
> I had looked into moving this up to the category, but there are a few reasons I was a little hesitant. It seems like the way coxeter matrices are constructed/stored are different between the three main Coxeter group classes (CoxeterMatrixGroups, WeylGroups, and ReflectionGroups). In order to make it work in the category we'd need to add individual tests to find the matrix. The canonical matrix is a little tricky as it is only defined on an element. So we'd need to create an element just to grab it's canonical_matrix.

The `canonical_matrix` is suppose to be with respect to the root basis (i.e., the canonical faithful representation), so there is nothing you need to test.

Actually, the bilinear form (can be obtained from the Coxeter matrix, which is basically a required method) and fundamental weights (which comes from the bilinear form) both should be lifted to the category.

> For the fundamental_weights, it actually looks at the bilinear form which is only looking at the coxeter matrix. So in the case of CoxeterMatrixGroups there is not that extra bit of data.

Ah, right, it is just the dual basis wrt the bilinear form. Which roots are short and long are not relevant.

> For your second concern, for affine Coxeter groups, fundamental_weights already breaks on affine Coxeter groups due to the concern you described above. So in this case the permutahedron would throw the same error as fundamental weights will. To alter the error we can always check to make sure the group is finite and throw an error if not and go from there.

Yes, we should definitely check that the group is finite, otherwise the permutahedron would run for forever. For example, I believe this would never terminate:

```
sage: W = CoxeterGroup([[1,7,2],[7,1,3],[2,3,1]])
sage: W.bilinear_form().det()
-1/2*E(7) - 1/4*E(7)^2 - 1/4*E(7)^3 - 1/4*E(7)^4 - 1/4*E(7)^5 - 1/2*E(7)^6
sage: W.permutahedron()
# Wait until the end of the universe
```



---

archive/issue_comments_343436.json:
```json
{
    "body": "<a id='comment:8'></a>\nAlso, we should shrink the plot width to `300 px`.",
    "created_at": "2017-04-22T13:32:43Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343436",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
Also, we should shrink the plot width to `300 px`.



---

archive/issue_comments_343437.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7c7c9aa7b75fe7115e21648189df6203ddd30b7\">d7c7c9a</a></td><td><code>Add infinite warning and reduce image size</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de\">885b978</a></td><td><code>Use canonical matrix rank</code></td></tr></table>\n",
    "created_at": "2017-04-25T13:37:58Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343437",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7c7c9aa7b75fe7115e21648189df6203ddd30b7">d7c7c9a</a></td><td><code>Add infinite warning and reduce image size</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de">885b978</a></td><td><code>Use canonical matrix rank</code></td></tr></table>




---

archive/issue_comments_343438.json:
```json
{
    "body": "**Changing commit** from \"[af483cb37df10077c954328c01b12743c3f27176](https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176)\" to \"[885b978ce6f0037311a97d8798866ba0574f45de](https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de)\".",
    "created_at": "2017-04-25T13:37:58Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343438",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[af483cb37df10077c954328c01b12743c3f27176](https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176)" to "[885b978ce6f0037311a97d8798866ba0574f45de](https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de)".



---

archive/issue_comments_343439.json:
```json
{
    "body": "<a id='comment:10'></a>\nI've gone ahead and used the canonical_matrix as desired and also decreased the plot width to 300px. There is now a TypeError warning when the coxeter group is infinite. Let me know if you'd like the wording on that changed.[]\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7c7c9aa7b75fe7115e21648189df6203ddd30b7\">d7c7c9a</a></td><td><code>Add infinite warning and reduce image size</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de\">885b978</a></td><td><code>Use canonical matrix rank</code></td></tr></table>\n",
    "created_at": "2017-04-25T13:39:04Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343439",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:10'></a>
I've gone ahead and used the canonical_matrix as desired and also decreased the plot width to 300px. There is now a TypeError warning when the coxeter group is infinite. Let me know if you'd like the wording on that changed.[]

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7c7c9aa7b75fe7115e21648189df6203ddd30b7">d7c7c9a</a></td><td><code>Add infinite warning and reduce image size</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de">885b978</a></td><td><code>Use canonical matrix rank</code></td></tr></table>




---

archive/issue_comments_343440.json:
```json
{
    "body": "<a id='comment:11'></a>\nActually, we could drop the finite check if we lift this to the category of finite Coxeter groups, which I think we should do now as the implementation is generic.",
    "created_at": "2017-04-26T03:16:05Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343440",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
Actually, we could drop the finite check if we lift this to the category of finite Coxeter groups, which I think we should do now as the implementation is generic.



---

archive/issue_comments_343441.json:
```json
{
    "body": "**Changing commit** from \"[885b978ce6f0037311a97d8798866ba0574f45de](https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de)\" to \"[4b14e27f0bb8e3f05d9911b1736d4edca6b60815](https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815)\".",
    "created_at": "2017-05-10T20:03:00Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343441",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[885b978ce6f0037311a97d8798866ba0574f45de](https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de)" to "[4b14e27f0bb8e3f05d9911b1736d4edca6b60815](https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815)".



---

archive/issue_comments_343442.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815\">4b14e27</a></td><td><code>Pushing permutahedron to category</code></td></tr></table>\n",
    "created_at": "2017-05-10T20:03:00Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343442",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815">4b14e27</a></td><td><code>Pushing permutahedron to category</code></td></tr></table>




---

archive/issue_comments_343443.json:
```json
{
    "body": "<a id='comment:13'></a>\nOk, I've pushed it up to the finite coxeter group category. (Thus I've removed the finite test as it's only in finite groups) I couldn't test the ReflectionGroup section as I don't have chevie on my computer. It would be nice to get that double checked though as the code is slightly different than what was there before. (The tests have been ported over)",
    "created_at": "2017-05-10T20:06:41Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343443",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:13'></a>
Ok, I've pushed it up to the finite coxeter group category. (Thus I've removed the finite test as it's only in finite groups) I couldn't test the ReflectionGroup section as I don't have chevie on my computer. It would be nice to get that double checked though as the code is slightly different than what was there before. (The tests have been ported over)



---

archive/issue_comments_343444.json:
```json
{
    "body": "**Changing branch** from \"[u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group)\" to \"[public/combinat/permutahedron_finite_coxeter_groups-22855](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/permutahedron_finite_coxeter_groups-22855)\".",
    "created_at": "2017-05-10T21:32:13Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343444",
    "user": "https://github.com/tscrim"
}
```

**Changing branch** from "[u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group)" to "[public/combinat/permutahedron_finite_coxeter_groups-22855](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/permutahedron_finite_coxeter_groups-22855)".



---

archive/issue_comments_343445.json:
```json
{
    "body": "**Changing commit** from \"[4b14e27f0bb8e3f05d9911b1736d4edca6b60815](https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815)\" to \"[363c814abee826b593740864a98676d0548156ec](https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec)\".",
    "created_at": "2017-05-10T21:32:13Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343445",
    "user": "https://github.com/tscrim"
}
```

**Changing commit** from "[4b14e27f0bb8e3f05d9911b1736d4edca6b60815](https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815)" to "[363c814abee826b593740864a98676d0548156ec](https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec)".



---

archive/issue_comments_343446.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2017-05-10T21:32:13Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343446",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_343447.json:
```json
{
    "body": "<a id='comment:14'></a>\nI fixed the indentation of the `permutahedron` method. I made `fundamental_weights` returns a `Family` for the Coxeter matrix group and cached the result. I also changed the base ring to be an input to `permutahedron`, and if it is not given, it defaults to the base ring that the vertices are computed over. IMO this is better because it should be defined over the common ring that contains the fundamental weights and the image of the action of the Coxeter group.\n\nI've tested this with `gap3`. If you agree with my changes, then positive review.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a42c07f5893b67b861a4dac1969c93cbed1ec58\">8a42c07</a></td><td><code>Merge branch 'u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group' of git://trac.sagemath.org/sage into u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec\">363c814</a></td><td><code>Doing some compatibility changes and fixing a few things.</code></td></tr></table>\n",
    "created_at": "2017-05-10T21:32:13Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343447",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
I fixed the indentation of the `permutahedron` method. I made `fundamental_weights` returns a `Family` for the Coxeter matrix group and cached the result. I also changed the base ring to be an input to `permutahedron`, and if it is not given, it defaults to the base ring that the vertices are computed over. IMO this is better because it should be defined over the common ring that contains the fundamental weights and the image of the action of the Coxeter group.

I've tested this with `gap3`. If you agree with my changes, then positive review.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a42c07f5893b67b861a4dac1969c93cbed1ec58">8a42c07</a></td><td><code>Merge branch 'u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group' of git://trac.sagemath.org/sage into u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec">363c814</a></td><td><code>Doing some compatibility changes and fixing a few things.</code></td></tr></table>




---

archive/issue_comments_343448.json:
```json
{
    "body": "<a id='comment:15'></a>\nThe changes look ok to me. Your idea for the base ring is a good one. Is there a reason you switched it to a family instead of leaving it as a dictionary? Does it help with performance?",
    "created_at": "2017-05-11T14:43:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343448",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:15'></a>
The changes look ok to me. Your idea for the base ring is a good one. Is there a reason you switched it to a family instead of leaving it as a dictionary? Does it help with performance?



---

archive/issue_events_203764.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-05-11T14:43:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-203764"
}
```



---

archive/issue_events_203765.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-05-11T14:43:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-203765"
}
```



---

archive/issue_comments_343449.json:
```json
{
    "body": "<a id='comment:16'></a>\nIt allows us to cache the result, which has a performance gain, and is a more standard idiom for things like this.",
    "created_at": "2017-05-11T14:50:37Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343449",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>
It allows us to cache the result, which has a performance gain, and is a more standard idiom for things like this.



---

archive/issue_comments_343450.json:
```json
{
    "body": "<a id='comment:17'></a>\n\n```\nsage -t --long --warn-long 65.0 src/sage/combinat/subword_complex.py  # 4 doctests failed\n```",
    "created_at": "2017-05-13T20:54:38Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343450",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>

```
sage -t --long --warn-long 65.0 src/sage/combinat/subword_complex.py  # 4 doctests failed
```



---

archive/issue_events_203766.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-13T20:54:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-203766"
}
```



---

archive/issue_events_203767.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-13T20:54:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-203767"
}
```



---

archive/issue_comments_343451.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5422c088f7a9466009549fd43b33e15b2cd5253\">f5422c0</a></td><td><code>Merge branch 'public/combinat/permutahedron_finite_coxeter_groups-22855' of git://trac.sagemath.org/sage into public/combinat/permutahedron_finite_coxeter_groups-22855</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505\">e85b3fb</a></td><td><code>Need to iterate over the keys.</code></td></tr></table>\n",
    "created_at": "2017-05-13T22:37:29Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343451",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5422c088f7a9466009549fd43b33e15b2cd5253">f5422c0</a></td><td><code>Merge branch 'public/combinat/permutahedron_finite_coxeter_groups-22855' of git://trac.sagemath.org/sage into public/combinat/permutahedron_finite_coxeter_groups-22855</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505">e85b3fb</a></td><td><code>Need to iterate over the keys.</code></td></tr></table>




---

archive/issue_comments_343452.json:
```json
{
    "body": "**Changing commit** from \"[363c814abee826b593740864a98676d0548156ec](https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec)\" to \"[e85b3fb65f2c13d8da59bb7945be300590e64505](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)\".",
    "created_at": "2017-05-13T22:37:29Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343452",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[363c814abee826b593740864a98676d0548156ec](https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec)" to "[e85b3fb65f2c13d8da59bb7945be300590e64505](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)".



---

archive/issue_comments_343453.json:
```json
{
    "body": "<a id='comment:19'></a>\nWhoops, forgot to retest that file after changing to a `Family`. Simple fix.",
    "created_at": "2017-05-13T22:38:01Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343453",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'></a>
Whoops, forgot to retest that file after changing to a `Family`. Simple fix.



---

archive/issue_events_203768.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-13T22:38:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-203768"
}
```



---

archive/issue_events_203769.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-13T22:38:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-203769"
}
```



---

archive/issue_comments_343454.json:
```json
{
    "body": "<a id='comment:20'></a>\nPatchbot is (essentially) green.",
    "created_at": "2017-05-18T01:41:11Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343454",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>
Patchbot is (essentially) green.



---

archive/issue_comments_343455.json:
```json
{
    "body": "<a id='comment:21'></a>\nping",
    "created_at": "2017-05-25T05:04:07Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343455",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>
ping



---

archive/issue_comments_343456.json:
```json
{
    "body": "<a id='comment:22'></a>\nSorry for the delay, it's been a busy couple weeks. Everything looks good from here. Tested things out and everything seems to work ok.",
    "created_at": "2017-05-30T10:40:48Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343456",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:22'></a>
Sorry for the delay, it's been a busy couple weeks. Everything looks good from here. Tested things out and everything seems to work ok.



---

archive/issue_events_203770.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-05-30T10:40:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-203770"
}
```



---

archive/issue_events_203771.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-05-30T10:40:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-203771"
}
```



---

archive/issue_events_203772.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-31T22:25:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-203772"
}
```



---

archive/issue_events_203773.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3d233855a71c3c197ee607cb34db47f75f3b9d20",
    "created_at": "2017-05-31T22:25:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-203773"
}
```



---

archive/issue_comments_343457.json:
```json
{
    "body": "**Changing branch** from \"[public/combinat/permutahedron_finite_coxeter_groups-22855](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/permutahedron_finite_coxeter_groups-22855)\" to \"[e85b3fb65f2c13d8da59bb7945be300590e64505](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)\".",
    "created_at": "2017-05-31T22:25:37Z",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343457",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/combinat/permutahedron_finite_coxeter_groups-22855](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/permutahedron_finite_coxeter_groups-22855)" to "[e85b3fb65f2c13d8da59bb7945be300590e64505](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)".
