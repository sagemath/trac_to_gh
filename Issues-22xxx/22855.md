# Issue 22855: Add weight space permutahedron for Coxeter matrix group

archive/issues_022618.json:
```json
{
    "assignees": [],
    "body": "Using almost the same code from ReflectionGroup and adding it to CoxeterMatrixGroup in order to allow constructing a weight space permutahedron in a Coxeter matrix group and not just in reflection groups.\n\nCC:  @tscrim @fchapoton stumpc5\n\nKeywords: **sagedays86**\n\nBranch/Commit: **[e85b3fb](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Aram Dermenjian**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22855_\n\n",
    "closed_at": "2017-05-31T22:25:37Z",
    "created_at": "2017-04-21T19:00:06Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add weight space permutahedron for Coxeter matrix group",
    "type": "issue",
    "updated_at": "2017-05-31T22:25:37Z",
    "url": "https://github.com/sagemath/sage/issues/22855",
    "user": "https://github.com/thecaligarmo"
}
```
Using almost the same code from ReflectionGroup and adding it to CoxeterMatrixGroup in order to allow constructing a weight space permutahedron in a Coxeter matrix group and not just in reflection groups.

CC:  @tscrim @fchapoton stumpc5

Keywords: **sagedays86**

Branch/Commit: **[e85b3fb](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)**

Reviewer: **Travis Scrimshaw**

Author: **Aram Dermenjian**

_Issue created by migration from https://trac.sagemath.org/ticket/22855_





---

archive/issue_events_300946.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-04-21T19:00:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300946"
}
```



---

archive/issue_events_300947.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-04-21T19:00:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300947"
}
```



---

archive/issue_events_300948.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-04-21T19:00:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300948"
}
```



---

archive/issue_events_300949.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-04-21T19:00:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300949"
}
```



---

archive/issue_comments_343542.json:
```json
{
    "body": "Branch: **[u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group)**",
    "created_at": "2017-04-21T19:32:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343542",
    "user": "https://github.com/thecaligarmo"
}
```

Branch: **[u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group)**



---

archive/issue_events_300950.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-04-21T19:41:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300950"
}
```



---

archive/issue_comments_343543.json:
```json
{
    "body": "Changed author from **aram.dermenjian** to **Aram Dermenjian**",
    "created_at": "2017-04-21T19:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343543",
    "user": "https://github.com/thecaligarmo"
}
```

Changed author from **aram.dermenjian** to **Aram Dermenjian**



---

archive/issue_comments_343544.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ed823059311d688a21294fce5e198a3c8a2cb9e\">6ed8230</a></td><td><code>Add permutahedron to Coxeter matrix group</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd\">7ab3fc6</a></td><td><code>normalizing breaks the base ring</code></td></tr></table>\n",
    "created_at": "2017-04-21T19:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343544",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:2'>Comment 2:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ed823059311d688a21294fce5e198a3c8a2cb9e">6ed8230</a></td><td><code>Add permutahedron to Coxeter matrix group</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd">7ab3fc6</a></td><td><code>normalizing breaks the base ring</code></td></tr></table>




---

archive/issue_comments_343545.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw,Christian Stump,Fr\u00e9d\u00e9ric Chapoton**",
    "created_at": "2017-04-21T19:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343545",
    "user": "https://github.com/thecaligarmo"
}
```

Reviewer: **Travis Scrimshaw,Christian Stump,Frédéric Chapoton**



---

archive/issue_comments_343546.json:
```json
{
    "body": "Commit: **[7ab3fc6](https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd)**",
    "created_at": "2017-04-21T19:41:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343546",
    "user": "https://github.com/thecaligarmo"
}
```

Commit: **[7ab3fc6](https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd)**



---

archive/issue_comments_343547.json:
```json
{
    "body": "Changed reviewer from **Travis Scrimshaw,Christian Stump,Fr\u00e9d\u00e9ric Chapoton** to none",
    "created_at": "2017-04-21T19:50:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343547",
    "user": "https://github.com/thecaligarmo"
}
```

Changed reviewer from **Travis Scrimshaw,Christian Stump,Frédéric Chapoton** to none



---

archive/issue_comments_343548.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nCan we lift this to the category and use more generic code (i.e., by using the `canonical_matrix`)?\n\nI'm also a little worried about using the fundamental weights for a few reasons. The first is the choice of a weight lattice I think means we have chosen a Cartan type, which is a little bit of extra data. The second is that the simple roots are not necessarily linearly independent when described by the fundamental weights, e.g., in affine types you need an extra element `\\delta`.\n\nActually, the `ReflectionGroup_real.permutahedron` says in a `.. NOTE::` that it is in the root system basis. Christian, do you have any comments on this?\n\nMinor doc point, you need an extra blank line:\n\n```diff\n         .. NOTE::\n+\n             The result is expressed in the root basis coordinates.\n```",
    "created_at": "2017-04-22T02:17:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343548",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'>Comment 4:</a>
Can we lift this to the category and use more generic code (i.e., by using the `canonical_matrix`)?

I'm also a little worried about using the fundamental weights for a few reasons. The first is the choice of a weight lattice I think means we have chosen a Cartan type, which is a little bit of extra data. The second is that the simple roots are not necessarily linearly independent when described by the fundamental weights, e.g., in affine types you need an extra element `\delta`.

Actually, the `ReflectionGroup_real.permutahedron` says in a `.. NOTE::` that it is in the root system basis. Christian, do you have any comments on this?

Minor doc point, you need an extra blank line:

```diff
         .. NOTE::
+
             The result is expressed in the root basis coordinates.
```



---

archive/issue_comments_343549.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nI had looked into moving this up to the category, but there are a few reasons I was a little hesitant. It seems like the way coxeter matrices are constructed/stored are different between the three main Coxeter group classes (CoxeterMatrixGroups, WeylGroups, and ReflectionGroups). In order to make it work in the category we'd need to add individual tests to find the matrix. The canonical matrix is a little tricky as it is only defined on an element. So we'd need to create an element just to grab it's canonical_matrix.\n\nFor the fundamental_weights, it actually looks at the bilinear form which is only looking at the coxeter matrix. So in the case of CoxeterMatrixGroups there is not that extra bit of data.\n\nFor your second concern, for affine Coxeter groups, fundamental_weights already breaks on affine Coxeter groups due to the concern you described above. So in this case the permutahedron would throw the same error as fundamental weights will. To alter the error we can always check to make sure the group is finite and throw an error if not and go from there.\n\nI missed that. The extra blank line has been added.",
    "created_at": "2017-04-22T12:54:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343549",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:5'>Comment 5:</a>
I had looked into moving this up to the category, but there are a few reasons I was a little hesitant. It seems like the way coxeter matrices are constructed/stored are different between the three main Coxeter group classes (CoxeterMatrixGroups, WeylGroups, and ReflectionGroups). In order to make it work in the category we'd need to add individual tests to find the matrix. The canonical matrix is a little tricky as it is only defined on an element. So we'd need to create an element just to grab it's canonical_matrix.

For the fundamental_weights, it actually looks at the bilinear form which is only looking at the coxeter matrix. So in the case of CoxeterMatrixGroups there is not that extra bit of data.

For your second concern, for affine Coxeter groups, fundamental_weights already breaks on affine Coxeter groups due to the concern you described above. So in this case the permutahedron would throw the same error as fundamental weights will. To alter the error we can always check to make sure the group is finite and throw an error if not and go from there.

I missed that. The extra blank line has been added.



---

archive/issue_comments_343550.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176\">af483cb</a></td><td><code>Fix note spacing</code></td></tr></table>\n",
    "created_at": "2017-04-22T12:54:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343550",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>Comment 6:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176">af483cb</a></td><td><code>Fix note spacing</code></td></tr></table>




---

archive/issue_comments_343551.json:
```json
{
    "body": "Changed commit from **[7ab3fc6](https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd)** to **[af483cb](https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176)**",
    "created_at": "2017-04-22T12:54:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343551",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7ab3fc6](https://github.com/sagemath/sagetrac-mirror/commit/7ab3fc627047d0d3f1f2631289f39f2ac4d650bd)** to **[af483cb](https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176)**



---

archive/issue_comments_343552.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nReplying to [@thecaligarmo](#comment%3A5):\n> I had looked into moving this up to the category, but there are a few reasons I was a little hesitant. It seems like the way coxeter matrices are constructed/stored are different between the three main Coxeter group classes (CoxeterMatrixGroups, WeylGroups, and ReflectionGroups). In order to make it work in the category we'd need to add individual tests to find the matrix. The canonical matrix is a little tricky as it is only defined on an element. So we'd need to create an element just to grab it's canonical_matrix.\n\nThe `canonical_matrix` is suppose to be with respect to the root basis (i.e., the canonical faithful representation), so there is nothing you need to test.\n\nActually, the bilinear form (can be obtained from the Coxeter matrix, which is basically a required method) and fundamental weights (which comes from the bilinear form) both should be lifted to the category.\n\n> For the fundamental_weights, it actually looks at the bilinear form which is only looking at the coxeter matrix. So in the case of CoxeterMatrixGroups there is not that extra bit of data.\n\nAh, right, it is just the dual basis wrt the bilinear form. Which roots are short and long are not relevant.\n\n> For your second concern, for affine Coxeter groups, fundamental_weights already breaks on affine Coxeter groups due to the concern you described above. So in this case the permutahedron would throw the same error as fundamental weights will. To alter the error we can always check to make sure the group is finite and throw an error if not and go from there.\n\nYes, we should definitely check that the group is finite, otherwise the permutahedron would run for forever. For example, I believe this would never terminate:\n\n```\nsage: W = CoxeterGroup([[1,7,2],[7,1,3],[2,3,1]])\nsage: W.bilinear_form().det()\n-1/2*E(7) - 1/4*E(7)^2 - 1/4*E(7)^3 - 1/4*E(7)^4 - 1/4*E(7)^5 - 1/2*E(7)^6\nsage: W.permutahedron()\n# Wait until the end of the universe\n```",
    "created_at": "2017-04-22T13:32:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343552",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'>Comment 7:</a>
Replying to [@thecaligarmo](#comment%3A5):
> I had looked into moving this up to the category, but there are a few reasons I was a little hesitant. It seems like the way coxeter matrices are constructed/stored are different between the three main Coxeter group classes (CoxeterMatrixGroups, WeylGroups, and ReflectionGroups). In order to make it work in the category we'd need to add individual tests to find the matrix. The canonical matrix is a little tricky as it is only defined on an element. So we'd need to create an element just to grab it's canonical_matrix.

The `canonical_matrix` is suppose to be with respect to the root basis (i.e., the canonical faithful representation), so there is nothing you need to test.

Actually, the bilinear form (can be obtained from the Coxeter matrix, which is basically a required method) and fundamental weights (which comes from the bilinear form) both should be lifted to the category.

> For the fundamental_weights, it actually looks at the bilinear form which is only looking at the coxeter matrix. So in the case of CoxeterMatrixGroups there is not that extra bit of data.

Ah, right, it is just the dual basis wrt the bilinear form. Which roots are short and long are not relevant.

> For your second concern, for affine Coxeter groups, fundamental_weights already breaks on affine Coxeter groups due to the concern you described above. So in this case the permutahedron would throw the same error as fundamental weights will. To alter the error we can always check to make sure the group is finite and throw an error if not and go from there.

Yes, we should definitely check that the group is finite, otherwise the permutahedron would run for forever. For example, I believe this would never terminate:

```
sage: W = CoxeterGroup([[1,7,2],[7,1,3],[2,3,1]])
sage: W.bilinear_form().det()
-1/2*E(7) - 1/4*E(7)^2 - 1/4*E(7)^3 - 1/4*E(7)^4 - 1/4*E(7)^5 - 1/2*E(7)^6
sage: W.permutahedron()
# Wait until the end of the universe
```



---

archive/issue_comments_343553.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nAlso, we should shrink the plot width to `300 px`.",
    "created_at": "2017-04-22T13:32:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343553",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'>Comment 8:</a>
Also, we should shrink the plot width to `300 px`.



---

archive/issue_comments_343554.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7c7c9aa7b75fe7115e21648189df6203ddd30b7\">d7c7c9a</a></td><td><code>Add infinite warning and reduce image size</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de\">885b978</a></td><td><code>Use canonical matrix rank</code></td></tr></table>\n",
    "created_at": "2017-04-25T13:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343554",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7c7c9aa7b75fe7115e21648189df6203ddd30b7">d7c7c9a</a></td><td><code>Add infinite warning and reduce image size</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de">885b978</a></td><td><code>Use canonical matrix rank</code></td></tr></table>




---

archive/issue_comments_343555.json:
```json
{
    "body": "Changed commit from **[af483cb](https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176)** to **[885b978](https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de)**",
    "created_at": "2017-04-25T13:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343555",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[af483cb](https://github.com/sagemath/sagetrac-mirror/commit/af483cb37df10077c954328c01b12743c3f27176)** to **[885b978](https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de)**



---

archive/issue_comments_343556.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nI've gone ahead and used the canonical_matrix as desired and also decreased the plot width to 300px. There is now a TypeError warning when the coxeter group is infinite. Let me know if you'd like the wording on that changed.[]\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7c7c9aa7b75fe7115e21648189df6203ddd30b7\">d7c7c9a</a></td><td><code>Add infinite warning and reduce image size</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de\">885b978</a></td><td><code>Use canonical matrix rank</code></td></tr></table>\n",
    "created_at": "2017-04-25T13:39:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343556",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:10'>Comment 10:</a>
I've gone ahead and used the canonical_matrix as desired and also decreased the plot width to 300px. There is now a TypeError warning when the coxeter group is infinite. Let me know if you'd like the wording on that changed.[]

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7c7c9aa7b75fe7115e21648189df6203ddd30b7">d7c7c9a</a></td><td><code>Add infinite warning and reduce image size</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de">885b978</a></td><td><code>Use canonical matrix rank</code></td></tr></table>




---

archive/issue_comments_343557.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nActually, we could drop the finite check if we lift this to the category of finite Coxeter groups, which I think we should do now as the implementation is generic.",
    "created_at": "2017-04-26T03:16:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343557",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'>Comment 11:</a>
Actually, we could drop the finite check if we lift this to the category of finite Coxeter groups, which I think we should do now as the implementation is generic.



---

archive/issue_comments_343558.json:
```json
{
    "body": "Changed commit from **[885b978](https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de)** to **[4b14e27](https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815)**",
    "created_at": "2017-05-10T20:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343558",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[885b978](https://github.com/sagemath/sagetrac-mirror/commit/885b978ce6f0037311a97d8798866ba0574f45de)** to **[4b14e27](https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815)**



---

archive/issue_comments_343559.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815\">4b14e27</a></td><td><code>Pushing permutahedron to category</code></td></tr></table>\n",
    "created_at": "2017-05-10T20:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343559",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815">4b14e27</a></td><td><code>Pushing permutahedron to category</code></td></tr></table>




---

archive/issue_comments_343560.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nOk, I've pushed it up to the finite coxeter group category. (Thus I've removed the finite test as it's only in finite groups) I couldn't test the ReflectionGroup section as I don't have chevie on my computer. It would be nice to get that double checked though as the code is slightly different than what was there before. (The tests have been ported over)",
    "created_at": "2017-05-10T20:06:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343560",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:13'>Comment 13:</a>
Ok, I've pushed it up to the finite coxeter group category. (Thus I've removed the finite test as it's only in finite groups) I couldn't test the ReflectionGroup section as I don't have chevie on my computer. It would be nice to get that double checked though as the code is slightly different than what was there before. (The tests have been ported over)



---

archive/issue_comments_343561.json:
```json
{
    "body": "Changed branch from **[u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group)** to **[public/combinat/permutahedron_finite_coxeter_groups-22855](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/permutahedron_finite_coxeter_groups-22855)**",
    "created_at": "2017-05-10T21:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343561",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group](https://github.com/sagemath/sagetrac-mirror/tree/u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group)** to **[public/combinat/permutahedron_finite_coxeter_groups-22855](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/permutahedron_finite_coxeter_groups-22855)**



---

archive/issue_comments_343562.json:
```json
{
    "body": "Changed commit from **[4b14e27](https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815)** to **[363c814](https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec)**",
    "created_at": "2017-05-10T21:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343562",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[4b14e27](https://github.com/sagemath/sagetrac-mirror/commit/4b14e27f0bb8e3f05d9911b1736d4edca6b60815)** to **[363c814](https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec)**



---

archive/issue_comments_343563.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2017-05-10T21:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343563",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_343564.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nI fixed the indentation of the `permutahedron` method. I made `fundamental_weights` returns a `Family` for the Coxeter matrix group and cached the result. I also changed the base ring to be an input to `permutahedron`, and if it is not given, it defaults to the base ring that the vertices are computed over. IMO this is better because it should be defined over the common ring that contains the fundamental weights and the image of the action of the Coxeter group.\n\nI've tested this with `gap3`. If you agree with my changes, then positive review.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a42c07f5893b67b861a4dac1969c93cbed1ec58\">8a42c07</a></td><td><code>Merge branch 'u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group' of git://trac.sagemath.org/sage into u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec\">363c814</a></td><td><code>Doing some compatibility changes and fixing a few things.</code></td></tr></table>\n",
    "created_at": "2017-05-10T21:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343564",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'>Comment 14:</a>
I fixed the indentation of the `permutahedron` method. I made `fundamental_weights` returns a `Family` for the Coxeter matrix group and cached the result. I also changed the base ring to be an input to `permutahedron`, and if it is not given, it defaults to the base ring that the vertices are computed over. IMO this is better because it should be defined over the common ring that contains the fundamental weights and the image of the action of the Coxeter group.

I've tested this with `gap3`. If you agree with my changes, then positive review.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a42c07f5893b67b861a4dac1969c93cbed1ec58">8a42c07</a></td><td><code>Merge branch 'u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group' of git://trac.sagemath.org/sage into u/aram.dermenjian/add_weight_space_permutahedron_for_coxeter_matrix_group</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec">363c814</a></td><td><code>Doing some compatibility changes and fixing a few things.</code></td></tr></table>




---

archive/issue_comments_343565.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nThe changes look ok to me. Your idea for the base ring is a good one. Is there a reason you switched it to a family instead of leaving it as a dictionary? Does it help with performance?",
    "created_at": "2017-05-11T14:43:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343565",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:15'>Comment 15:</a>
The changes look ok to me. Your idea for the base ring is a good one. Is there a reason you switched it to a family instead of leaving it as a dictionary? Does it help with performance?



---

archive/issue_events_300951.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-05-11T14:43:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300951"
}
```



---

archive/issue_events_300952.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-05-11T14:43:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300952"
}
```



---

archive/issue_comments_343566.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nIt allows us to cache the result, which has a performance gain, and is a more standard idiom for things like this.",
    "created_at": "2017-05-11T14:50:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343566",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'>Comment 16:</a>
It allows us to cache the result, which has a performance gain, and is a more standard idiom for things like this.



---

archive/issue_comments_343567.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\n\n```\nsage -t --long --warn-long 65.0 src/sage/combinat/subword_complex.py  # 4 doctests failed\n```",
    "created_at": "2017-05-13T20:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343567",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'>Comment 17:</a>

```
sage -t --long --warn-long 65.0 src/sage/combinat/subword_complex.py  # 4 doctests failed
```



---

archive/issue_events_300953.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-13T20:54:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300953"
}
```



---

archive/issue_events_300954.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-13T20:54:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300954"
}
```



---

archive/issue_comments_343568.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5422c088f7a9466009549fd43b33e15b2cd5253\">f5422c0</a></td><td><code>Merge branch 'public/combinat/permutahedron_finite_coxeter_groups-22855' of git://trac.sagemath.org/sage into public/combinat/permutahedron_finite_coxeter_groups-22855</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505\">e85b3fb</a></td><td><code>Need to iterate over the keys.</code></td></tr></table>\n",
    "created_at": "2017-05-13T22:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343568",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>Comment 18:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5422c088f7a9466009549fd43b33e15b2cd5253">f5422c0</a></td><td><code>Merge branch 'public/combinat/permutahedron_finite_coxeter_groups-22855' of git://trac.sagemath.org/sage into public/combinat/permutahedron_finite_coxeter_groups-22855</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505">e85b3fb</a></td><td><code>Need to iterate over the keys.</code></td></tr></table>




---

archive/issue_comments_343569.json:
```json
{
    "body": "Changed commit from **[363c814](https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec)** to **[e85b3fb](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)**",
    "created_at": "2017-05-13T22:37:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343569",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[363c814](https://github.com/sagemath/sagetrac-mirror/commit/363c814abee826b593740864a98676d0548156ec)** to **[e85b3fb](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)**



---

archive/issue_comments_343570.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nWhoops, forgot to retest that file after changing to a `Family`. Simple fix.",
    "created_at": "2017-05-13T22:38:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343570",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'>Comment 19:</a>
Whoops, forgot to retest that file after changing to a `Family`. Simple fix.



---

archive/issue_events_300955.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-13T22:38:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300955"
}
```



---

archive/issue_events_300956.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-13T22:38:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300956"
}
```



---

archive/issue_comments_343571.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nPatchbot is (essentially) green.",
    "created_at": "2017-05-18T01:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343571",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'>Comment 20:</a>
Patchbot is (essentially) green.



---

archive/issue_comments_343572.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nping",
    "created_at": "2017-05-25T05:04:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343572",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'>Comment 21:</a>
ping



---

archive/issue_comments_343573.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nSorry for the delay, it's been a busy couple weeks. Everything looks good from here. Tested things out and everything seems to work ok.",
    "created_at": "2017-05-30T10:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343573",
    "user": "https://github.com/thecaligarmo"
}
```

<a id='comment:22'>Comment 22:</a>
Sorry for the delay, it's been a busy couple weeks. Everything looks good from here. Tested things out and everything seems to work ok.



---

archive/issue_events_300957.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-05-30T10:40:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300957"
}
```



---

archive/issue_events_300958.json:
```json
{
    "actor": "https://github.com/thecaligarmo",
    "created_at": "2017-05-30T10:40:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300958"
}
```



---

archive/issue_events_300959.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-05-31T22:25:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300959"
}
```



---

archive/issue_events_300960.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3d233855a71c3c197ee607cb34db47f75f3b9d20",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-05-31T22:25:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22855#event-300960"
}
```



---

archive/issue_comments_343574.json:
```json
{
    "body": "Changed branch from **[public/combinat/permutahedron_finite_coxeter_groups-22855](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/permutahedron_finite_coxeter_groups-22855)** to **[e85b3fb](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)**",
    "created_at": "2017-05-31T22:25:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22855#issuecomment-343574",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/combinat/permutahedron_finite_coxeter_groups-22855](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/permutahedron_finite_coxeter_groups-22855)** to **[e85b3fb](https://github.com/sagemath/sagetrac-mirror/commit/e85b3fb65f2c13d8da59bb7945be300590e64505)**
