# Issue 22058: Upgrade git to 2.11.0

archive/issues_021821.json:
```json
{
    "body": "Motivation : recent changes in OpenSSL cause current git (2.6.2) to fail to compile with recent (>=1.1) version of openssl, due to changes in macros defining library function declarations.\n\nThis seems to have affected a number of packages. An example is given [here](https://stat.ethz.ch/pipermail/r-help/2016-December/443572.html), where the solution was a fix to the affected software (R package).\n\n**Tarball**: https://www.kernel.org/pub/software/scm/git/git-2.11.0.tar.gz\n\n**CC:**  @slel\n\n**Branch/Commit:** [bd5a04f3491d6565eb7481b7b0bdb9bec2393b04](https://github.com/sagemath/sagetrac-mirror/commit/bd5a04f3491d6565eb7481b7b0bdb9bec2393b04)\n\n**Reviewer:** Jeroen Demeyer, Dima Pasechnik\n\n**Author:** Emmanuel Charpentier\n\nIssue created by migration from https://trac.sagemath.org/ticket/22058\n\n",
    "closed_at": "2017-01-21T16:35:12Z",
    "created_at": "2016-12-14T22:39:56Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Upgrade git to 2.11.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22058",
    "user": "https://github.com/EmmanuelCharpentier"
}
```
Motivation : recent changes in OpenSSL cause current git (2.6.2) to fail to compile with recent (>=1.1) version of openssl, due to changes in macros defining library function declarations.

This seems to have affected a number of packages. An example is given [here](https://stat.ethz.ch/pipermail/r-help/2016-December/443572.html), where the solution was a fix to the affected software (R package).

**Tarball**: https://www.kernel.org/pub/software/scm/git/git-2.11.0.tar.gz

**CC:**  @slel

**Branch/Commit:** [bd5a04f3491d6565eb7481b7b0bdb9bec2393b04](https://github.com/sagemath/sagetrac-mirror/commit/bd5a04f3491d6565eb7481b7b0bdb9bec2393b04)

**Reviewer:** Jeroen Demeyer, Dima Pasechnik

**Author:** Emmanuel Charpentier

Issue created by migration from https://trac.sagemath.org/ticket/22058





---

archive/issue_comments_329204.json:
```json
{
    "body": "<a id='comment:1'></a>\nIHMO it's OK to go for 2.11.0.",
    "created_at": "2016-12-15T16:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329204",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>
IHMO it's OK to go for 2.11.0.



---

archive/issue_events_200830.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-12-16T11:32:52Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "rename": {
        "from": "Upgrade git to 2.10.2 (or 2.11 ?)",
        "to": "Upgrade git to 2.11"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22058#event-200830"
}
```



---

archive/issue_comments_329205.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,3 +3,5 @@\n This seems to have affected a number of packages. An example is given [here](https://stat.ethz.ch/pipermail/r-help/2016-December/443572.html), where the solution was a fix to the affected software (R package).\n \n Tarballs : [2.10.2](https://github.com/git/git/archive/v2.10.2.tar.gz) and [2.11.0](https://github.com/git/git/archive/v2.11.0.tar.gz). Advice on what to port required : 2.10.2 is 11 weeks old, 2.11.0 two weeks old : a bit wet behind the ears ?\n+\n+Update : I follow Dima's advice and upgrade to 2.11, changing title (but not description !) accordingly.\n``````\n",
    "created_at": "2016-12-16T11:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329205",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,3 +3,5 @@
 This seems to have affected a number of packages. An example is given [here](https://stat.ethz.ch/pipermail/r-help/2016-December/443572.html), where the solution was a fix to the affected software (R package).
 
 Tarballs : [2.10.2](https://github.com/git/git/archive/v2.10.2.tar.gz) and [2.11.0](https://github.com/git/git/archive/v2.11.0.tar.gz). Advice on what to port required : 2.10.2 is 11 weeks old, 2.11.0 two weeks old : a bit wet behind the ears ?
+
+Update : I follow Dima's advice and upgrade to 2.11, changing title (but not description !) accordingly.
``````




---

archive/issue_comments_329206.json:
```json
{
    "body": "**Branch:** [u/charpent/upgrade_git_to_2_10_2__or_2_11___](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_git_to_2_10_2__or_2_11___)",
    "created_at": "2016-12-16T15:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329206",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

**Branch:** [u/charpent/upgrade_git_to_2_10_2__or_2_11___](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_git_to_2_10_2__or_2_11___)



---

archive/issue_comments_329207.json:
```json
{
    "body": "**Author:** Emmanuel Charpentier",
    "created_at": "2016-12-16T15:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329207",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

**Author:** Emmanuel Charpentier



---

archive/issue_comments_329208.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe proposed patch :\n* build and installs cleanly a functional `git 2.11.0`\n* sort-of passes its own test suite (fails on items marked as \"known breakage\" in the log) :\n\n```\nfixed   0\nsuccess 13952\nfailed  0\nbroken  192\ntotal   14340\n```\n* results in a sage system that passes `ptestlong` with one known and unrelated failure (see #21884) :\n\n```\n----------------------------------------------------------------------\nsage -t --long --warn-long 88.0 src/sage/rings/polynomial/multi_polynomial_ideal.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\n\n==> `needs_review`\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f3c5f1e8e2bd4f296f2c4bbd4e734d036d1400d\">5f3c5f1</a></td><td><code>Update source to 2.11.0, fix checksum.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fc4c5ec54c2491d1a1f750536dac34000fdb7d9\">4fc4c5e</a></td><td><code>The config file has to be generated.</code></td></tr></table>\n",
    "created_at": "2016-12-16T15:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329208",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:4'></a>
The proposed patch :
* build and installs cleanly a functional `git 2.11.0`
* sort-of passes its own test suite (fails on items marked as "known breakage" in the log) :

```
fixed   0
success 13952
failed  0
broken  192
total   14340
```
* results in a sage system that passes `ptestlong` with one known and unrelated failure (see #21884) :

```
----------------------------------------------------------------------
sage -t --long --warn-long 88.0 src/sage/rings/polynomial/multi_polynomial_ideal.py  # 1 doctest failed
----------------------------------------------------------------------
```

==> `needs_review`

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f3c5f1e8e2bd4f296f2c4bbd4e734d036d1400d">5f3c5f1</a></td><td><code>Update source to 2.11.0, fix checksum.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fc4c5ec54c2491d1a1f750536dac34000fdb7d9">4fc4c5e</a></td><td><code>The config file has to be generated.</code></td></tr></table>




---

archive/issue_comments_329209.json:
```json
{
    "body": "**Commit:** [4fc4c5ec54c2491d1a1f750536dac34000fdb7d9](https://github.com/sagemath/sagetrac-mirror/commit/4fc4c5ec54c2491d1a1f750536dac34000fdb7d9)",
    "created_at": "2016-12-16T15:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329209",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

**Commit:** [4fc4c5ec54c2491d1a1f750536dac34000fdb7d9](https://github.com/sagemath/sagetrac-mirror/commit/4fc4c5ec54c2491d1a1f750536dac34000fdb7d9)



---

archive/issue_events_200831.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2016-12-16T15:28:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22058#event-200831"
}
```



---

archive/issue_comments_329210.json:
```json
{
    "body": "<a id='comment:5'></a>\nI do not understand the urge for a \"*recent (>=1.1) version of openssl*\" (note for example that 1.1.0 entered Debian unstable less than 2 month ago, and testing only half a month ago). We are using `1.0.2`, which is the current Long Term Support, and will be maintained until 2019-12 (3 years from now). Sticking to it allowed us not to be concerned by the last (2016-11-10) security fixes (which were about 1.1.0 only). It is usually easier to wait for some maturity, especially since we do not need latest openssl features (nor bugs). I am not saying that we have to stick to `1.0.2` until 2019-12, but i do not see why se should deal with the teething problems for free and no benefit (our exprience will not help R or git with that either).",
    "created_at": "2016-12-17T16:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329210",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:5'></a>
I do not understand the urge for a "*recent (>=1.1) version of openssl*" (note for example that 1.1.0 entered Debian unstable less than 2 month ago, and testing only half a month ago). We are using `1.0.2`, which is the current Long Term Support, and will be maintained until 2019-12 (3 years from now). Sticking to it allowed us not to be concerned by the last (2016-11-10) security fixes (which were about 1.1.0 only). It is usually easier to wait for some maturity, especially since we do not need latest openssl features (nor bugs). I am not saying that we have to stick to `1.0.2` until 2019-12, but i do not see why se should deal with the teething problems for free and no benefit (our exprience will not help R or git with that either).



---

archive/issue_comments_329211.json:
```json
{
    "body": "<a id='comment:6'></a>\nYou are indeed right : we (as Sage users) do not need \"recent\" versions of anything.\n\nBut we (as users of other software, corresponding with other users of other software) need reasonably current versions of software more or less in sync with what our \"real world\" correspondents use. This, of course varies from use to use. For example, to work with other statisticians using R, I need in practice to be able to use R latest released versions (R-help won't answer questions related to bugs in older versions), and in order to submit a new or revised package, I have to check it against the latest (daily !) development version. \n\nWe might also need new (real or virtual) machines (e. g. for testing purposes. So we need to accept installation on *reasonably* current machines. Therefore we have to be able to install Sage on these machines.\n\nI agree that nobody in is right mind will install (and work on) debian unstable. But, except for servers purpose, nobody in his right mind will install debian stable either, at least on a personal work machine. Debian testing (or analogues in other distributions) seems to be the default choice, debian stable + backports (or reasonable facsimiles) being a distant second choice. For example, you can probably bet that Ubuntu 17.04 will have openssl 1.1.\n\nFurthermore, this (understandable) reluctance to update can easily become a hindrance (think python2 vs python3). We have already been trapped by this in the past... and another trap is going to close on us : see [this thread](https://groups.google.com/forum/#!topic/sage-devel/JPpJvUpP1TQ) : it's a nice one... (not yet a ticket, because I'm not sure of the kind of answer to give).\n\nSo, all of this boils down to the definition of what is \"reasonably current\"... If \"debian testing\" or analogues are too new to be stated, the README.md file should state that.\n\nFeel free to request a discussion on this topic on, e. g. sage-devel ; this might need clarification.\n\nIn the meantime, what do you think of the proposed patch ?",
    "created_at": "2016-12-17T16:46:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329211",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:6'></a>
You are indeed right : we (as Sage users) do not need "recent" versions of anything.

But we (as users of other software, corresponding with other users of other software) need reasonably current versions of software more or less in sync with what our "real world" correspondents use. This, of course varies from use to use. For example, to work with other statisticians using R, I need in practice to be able to use R latest released versions (R-help won't answer questions related to bugs in older versions), and in order to submit a new or revised package, I have to check it against the latest (daily !) development version. 

We might also need new (real or virtual) machines (e. g. for testing purposes. So we need to accept installation on *reasonably* current machines. Therefore we have to be able to install Sage on these machines.

I agree that nobody in is right mind will install (and work on) debian unstable. But, except for servers purpose, nobody in his right mind will install debian stable either, at least on a personal work machine. Debian testing (or analogues in other distributions) seems to be the default choice, debian stable + backports (or reasonable facsimiles) being a distant second choice. For example, you can probably bet that Ubuntu 17.04 will have openssl 1.1.

Furthermore, this (understandable) reluctance to update can easily become a hindrance (think python2 vs python3). We have already been trapped by this in the past... and another trap is going to close on us : see [this thread](https://groups.google.com/forum/#!topic/sage-devel/JPpJvUpP1TQ) : it's a nice one... (not yet a ticket, because I'm not sure of the kind of answer to give).

So, all of this boils down to the definition of what is "reasonably current"... If "debian testing" or analogues are too new to be stated, the README.md file should state that.

Feel free to request a discussion on this topic on, e. g. sage-devel ; this might need clarification.

In the meantime, what do you think of the proposed patch ?



---

archive/issue_comments_329212.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [charpent](#comment%3A6):\n> You are indeed right : we (as Sage users) do not need \"recent\" versions of anything.\n\n\nWell, for example there have been various updates to latest unreleased PARI master branch, because it was useful.\n\n> But we (as users of other software, corresponding with other users of other software) need reasonably current versions of software more or less in sync with what our \"real world\" correspondents use.\n\n\nThe Long Term Support version should be one of the \"reasonably current versions\".\n\n> This, of course varies from use to use. For example, to work with other statisticians using R, I need in practice to be able to use R latest released versions (R-help won't answer questions related to bugs in older versions), and in order to submit a new or revised package, I have to check it against the latest (daily !) development version. \n\n\nI have an apparently working way to use a recent (external) version of R in Sage/rpy2 (i did that for SDL), i will open a ticket, but i first have to close some branches because my laptop is old and i can not afford to swith branch and let it burn for recompilations.\n\n> We might also need new (real or virtual) machines (e. g. for testing purposes. So we need to accept installation on *reasonably* current machines. Therefore we have to be able to install Sage on these machines.\n> \n> I agree that nobody in is right mind will install (and work on) debian unstable. But, except for servers purpose, nobody in his right mind will install debian stable either, at least on a personal work machine. Debian testing (or analogues in other distributions) seems to be the default choice, debian stable + backports (or reasonable facsimiles) being a distant second choice. For example, you can probably bet that Ubuntu 17.04 will have openssl 1.1.\n\n\nMy guess is that Debian moved 1.1.0 into testing because \"The freeze is coming\" (very soon), and of course Ubuntu 17.04 will follow since it is basically a snapshot of unstable (at least it was, i did not follow their recent evoltions).\n\nNote however that Debian struggled with 1.1.0 in experimental for more that 6 months now, an that the current (in preparation) Ubuntu 17.04 still uses 1.0.2:\n\nhttps://packages.qa.debian.org/o/openssl/news.rss20.xml\nhttp://packages.ubuntu.com/zesty/openssl\n\nI just do not understand why we have to enter such a struggle. My guess is that openssl recently changed various things, so that various softwares went broken, and it is prehaps good to just wait that the situation get stablilized, i am not claiming we should stick to 1.0.2.\n\n> Furthermore, this (understandable) reluctance to update can easily become a hindrance (think python2 vs python3). We have already been trapped by this in the past... and another trap is going to close on us : see [this thread](https://groups.google.com/forum/#!topic/sage-devel/JPpJvUpP1TQ) : it's a nice one... (not yet a ticket, because I'm not sure of the kind of answer to give).\n\n\nThis is not a reluctance. Regarding the comparison with Python 2to3, we had to wait that all our dependencies get python3 ready anyway.\n\n> So, all of this boils down to the definition of what is \"reasonably current\"... If \"debian testing\" or analogues are too new to be stated, the README.md file should state that.\n\n\nThe current testing is a pre-frozen, where maintainers are in a hurry to let things enter earlier because it will soon be forbidden.\n\n> Feel free to request a discussion on this topic on, e. g. sage-devel ; this might need clarification.\n> \n> In the meantime, what do you think of the proposed patch ?\n\n\nIt looks good. Unfortunately, i currently do not have the ressource to test it seriously :/",
    "created_at": "2016-12-17T17:48:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329212",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:7'></a>
Replying to [charpent](#comment%3A6):
> You are indeed right : we (as Sage users) do not need "recent" versions of anything.


Well, for example there have been various updates to latest unreleased PARI master branch, because it was useful.

> But we (as users of other software, corresponding with other users of other software) need reasonably current versions of software more or less in sync with what our "real world" correspondents use.


The Long Term Support version should be one of the "reasonably current versions".

> This, of course varies from use to use. For example, to work with other statisticians using R, I need in practice to be able to use R latest released versions (R-help won't answer questions related to bugs in older versions), and in order to submit a new or revised package, I have to check it against the latest (daily !) development version. 


I have an apparently working way to use a recent (external) version of R in Sage/rpy2 (i did that for SDL), i will open a ticket, but i first have to close some branches because my laptop is old and i can not afford to swith branch and let it burn for recompilations.

> We might also need new (real or virtual) machines (e. g. for testing purposes. So we need to accept installation on *reasonably* current machines. Therefore we have to be able to install Sage on these machines.
> 
> I agree that nobody in is right mind will install (and work on) debian unstable. But, except for servers purpose, nobody in his right mind will install debian stable either, at least on a personal work machine. Debian testing (or analogues in other distributions) seems to be the default choice, debian stable + backports (or reasonable facsimiles) being a distant second choice. For example, you can probably bet that Ubuntu 17.04 will have openssl 1.1.


My guess is that Debian moved 1.1.0 into testing because "The freeze is coming" (very soon), and of course Ubuntu 17.04 will follow since it is basically a snapshot of unstable (at least it was, i did not follow their recent evoltions).

Note however that Debian struggled with 1.1.0 in experimental for more that 6 months now, an that the current (in preparation) Ubuntu 17.04 still uses 1.0.2:

https://packages.qa.debian.org/o/openssl/news.rss20.xml
http://packages.ubuntu.com/zesty/openssl

I just do not understand why we have to enter such a struggle. My guess is that openssl recently changed various things, so that various softwares went broken, and it is prehaps good to just wait that the situation get stablilized, i am not claiming we should stick to 1.0.2.

> Furthermore, this (understandable) reluctance to update can easily become a hindrance (think python2 vs python3). We have already been trapped by this in the past... and another trap is going to close on us : see [this thread](https://groups.google.com/forum/#!topic/sage-devel/JPpJvUpP1TQ) : it's a nice one... (not yet a ticket, because I'm not sure of the kind of answer to give).


This is not a reluctance. Regarding the comparison with Python 2to3, we had to wait that all our dependencies get python3 ready anyway.

> So, all of this boils down to the definition of what is "reasonably current"... If "debian testing" or analogues are too new to be stated, the README.md file should state that.


The current testing is a pre-frozen, where maintainers are in a hurry to let things enter earlier because it will soon be forbidden.

> Feel free to request a discussion on this topic on, e. g. sage-devel ; this might need clarification.
> 
> In the meantime, what do you think of the proposed patch ?


It looks good. Unfortunately, i currently do not have the ressource to test it seriously :/



---

archive/issue_comments_329213.json:
```json
{
    "body": "<a id='comment:8'></a>\nA few points...\n\nReplying to [tmonteil](#comment%3A7):\n\n[ Snip... ]\n\n> The Long Term Support version should be one of the \"reasonably current versions\".\n\n\nYou mean Ubuntu LTS ? A bit too old on the \"desktop software\" and \"webware\" side, to the taste of my correspondents...\n\n[ Re-Snip... ]\n\n> I have an apparently working way to use a recent (external) version of R in Sage/rpy2 (i did that for SDL), i will open a ticket, but i first have to close some branches because my laptop is old and i can not afford to swith branch and let it burn for recompilations.\n\n\nThis is of great interest to me : maintaining an usable R in Sage is one of my goals. However, R is a standard package. Unless a decision is made to expel it, we are bound to maintain it. And cope with its new requirements (xz, https-enabled curl, pcre).\n\nFurthermore, keeping all the functionalities of the current pexpect interface won't be easy. This interface is highly inefficient (as underscored by William Stein, its author...), and ill-documented, but has extremely wide possibilities. Could you Cc me on this ?\n\n[ Re-re-Snip .. ]\n\n> I just do not understand why we have to enter such a struggle. My guess is that openssl recently changed various things, so that various softwares went broken, and it is prehaps good to just wait that the situation get stablilized, i am not claiming we should stick to 1.0.2.\n\n\nWhatever the motivations might be, and unless we advertise a \"recent installations need nod apply\" policy in the README.md file, there **will** be installation on (new) machines with 1.1.0 installed. Since we can't ship openssl ourselves, we have to support that.\n\n[ Re-re-re-Snip... ]\n\n> The current testing is a pre-frozen, where maintainers are in a hurry to let things enter earlier because it will soon be forbidden.\n\n\nWhatever the (good or bad) reasons, it's a fact of life we have to cope with. Don't fight the weather, man : it's an ungratifying business...\n\n> > In the meantime, what do you think of the proposed patch ?\n\n> \n> It looks good. Unfortunately, i currently do not have the ressource to test it seriously :/\n\n\nAny takers ?",
    "created_at": "2016-12-17T19:22:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329213",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:8'></a>
A few points...

Replying to [tmonteil](#comment%3A7):

[ Snip... ]

> The Long Term Support version should be one of the "reasonably current versions".


You mean Ubuntu LTS ? A bit too old on the "desktop software" and "webware" side, to the taste of my correspondents...

[ Re-Snip... ]

> I have an apparently working way to use a recent (external) version of R in Sage/rpy2 (i did that for SDL), i will open a ticket, but i first have to close some branches because my laptop is old and i can not afford to swith branch and let it burn for recompilations.


This is of great interest to me : maintaining an usable R in Sage is one of my goals. However, R is a standard package. Unless a decision is made to expel it, we are bound to maintain it. And cope with its new requirements (xz, https-enabled curl, pcre).

Furthermore, keeping all the functionalities of the current pexpect interface won't be easy. This interface is highly inefficient (as underscored by William Stein, its author...), and ill-documented, but has extremely wide possibilities. Could you Cc me on this ?

[ Re-re-Snip .. ]

> I just do not understand why we have to enter such a struggle. My guess is that openssl recently changed various things, so that various softwares went broken, and it is prehaps good to just wait that the situation get stablilized, i am not claiming we should stick to 1.0.2.


Whatever the motivations might be, and unless we advertise a "recent installations need nod apply" policy in the README.md file, there **will** be installation on (new) machines with 1.1.0 installed. Since we can't ship openssl ourselves, we have to support that.

[ Re-re-re-Snip... ]

> The current testing is a pre-frozen, where maintainers are in a hurry to let things enter earlier because it will soon be forbidden.


Whatever the (good or bad) reasons, it's a fact of life we have to cope with. Don't fight the weather, man : it's an ungratifying business...

> > In the meantime, what do you think of the proposed patch ?

> 
> It looks good. Unfortunately, i currently do not have the ressource to test it seriously :/


Any takers ?



---

archive/issue_events_200832.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-02T10:55:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "rename": {
        "from": "Upgrade git to 2.11",
        "to": "Upgrade git to 2.11.0"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22058#event-200832"
}
```



---

archive/issue_events_200833.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-02T10:55:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22058#event-200833"
}
```



---

archive/issue_events_200834.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-02T10:55:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22058#event-200834"
}
```



---

archive/issue_comments_329214.json:
```json
{
    "body": "<a id='comment:9'></a>\nThe tarball taken from github is NOT a proper source distribution. There should be no need to run `$MAKE configure`.",
    "created_at": "2017-01-02T10:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329214",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
The tarball taken from github is NOT a proper source distribution. There should be no need to run `$MAKE configure`.



---

archive/issue_comments_329215.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,6 +2,4 @@\n \n This seems to have affected a number of packages. An example is given [here](https://stat.ethz.ch/pipermail/r-help/2016-December/443572.html), where the solution was a fix to the affected software (R package).\n \n-Tarballs : [2.10.2](https://github.com/git/git/archive/v2.10.2.tar.gz) and [2.11.0](https://github.com/git/git/archive/v2.11.0.tar.gz). Advice on what to port required : 2.10.2 is 11 weeks old, 2.11.0 two weeks old : a bit wet behind the ears ?\n-\n-Update : I follow Dima's advice and upgrade to 2.11, changing title (but not description !) accordingly.\n+**Tarball**: https://www.kernel.org/pub/software/scm/git/git-2.11.0.tar.gz\n``````\n",
    "created_at": "2017-01-02T10:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329215",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,6 +2,4 @@
 
 This seems to have affected a number of packages. An example is given [here](https://stat.ethz.ch/pipermail/r-help/2016-December/443572.html), where the solution was a fix to the affected software (R package).
 
-Tarballs : [2.10.2](https://github.com/git/git/archive/v2.10.2.tar.gz) and [2.11.0](https://github.com/git/git/archive/v2.11.0.tar.gz). Advice on what to port required : 2.10.2 is 11 weeks old, 2.11.0 two weeks old : a bit wet behind the ears ?
-
-Update : I follow Dima's advice and upgrade to 2.11, changing title (but not description !) accordingly.
+**Tarball**: https://www.kernel.org/pub/software/scm/git/git-2.11.0.tar.gz
``````




---

archive/issue_comments_329216.json:
```json
{
    "body": "**Reviewer:** Jeroen Demeyer",
    "created_at": "2017-01-02T10:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329216",
    "user": "https://github.com/jdemeyer"
}
```

**Reviewer:** Jeroen Demeyer



---

archive/issue_comments_329217.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [jdemeyer](#comment%3A9):\n> The tarball taken from github is NOT a proper source distribution.\n\n\nI do not understand : this is the address pointed to by [the git repository](https://github.com/git/git/releases). Would you care to explain ?\n\n> There should be no need to run `$MAKE configure`.\n\n\nWhy ? Again, explanations are welcome.",
    "created_at": "2017-01-02T19:59:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329217",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:10'></a>
Replying to [jdemeyer](#comment%3A9):
> The tarball taken from github is NOT a proper source distribution.


I do not understand : this is the address pointed to by [the git repository](https://github.com/git/git/releases). Would you care to explain ?

> There should be no need to run `$MAKE configure`.


Why ? Again, explanations are welcome.



---

archive/issue_comments_329218.json:
```json
{
    "body": "<a id='comment:11'></a>\nWhat I mean is that a git repository is not the same as a source tarball. Take Sage for example: the tarball generated by `make dist` is not just a packaging of the git repo.\n\nIn particular, the actual source tarball of `git` (see new ticket description) contains the `configure` script, which the git repo does not contain. So, if you use the actual source tarball of `git`, then you do not need to run `$MAKE configure`.",
    "created_at": "2017-01-02T20:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329218",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
What I mean is that a git repository is not the same as a source tarball. Take Sage for example: the tarball generated by `make dist` is not just a packaging of the git repo.

In particular, the actual source tarball of `git` (see new ticket description) contains the `configure` script, which the git repo does not contain. So, if you use the actual source tarball of `git`, then you do not need to run `$MAKE configure`.



---

archive/issue_comments_329219.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e3c4835a0f5953aa1c4c922430c56e9f58e6b171\">e3c4835</a></td><td><code>Revert \"The config file has to be generated.\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/48efb15401231c3513475a1b008fa1da3463afa4\">48efb15</a></td><td><code>Update checksums for git.</code></td></tr></table>\n",
    "created_at": "2017-01-03T22:21:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329219",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e3c4835a0f5953aa1c4c922430c56e9f58e6b171">e3c4835</a></td><td><code>Revert "The config file has to be generated."</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/48efb15401231c3513475a1b008fa1da3463afa4">48efb15</a></td><td><code>Update checksums for git.</code></td></tr></table>




---

archive/issue_comments_329220.json:
```json
{
    "body": "**Changing commit** from \"[4fc4c5ec54c2491d1a1f750536dac34000fdb7d9](https://github.com/sagemath/sagetrac-mirror/commit/4fc4c5ec54c2491d1a1f750536dac34000fdb7d9)\" to \"[48efb15401231c3513475a1b008fa1da3463afa4](https://github.com/sagemath/sagetrac-mirror/commit/48efb15401231c3513475a1b008fa1da3463afa4)\".",
    "created_at": "2017-01-03T22:21:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329220",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4fc4c5ec54c2491d1a1f750536dac34000fdb7d9](https://github.com/sagemath/sagetrac-mirror/commit/4fc4c5ec54c2491d1a1f750536dac34000fdb7d9)" to "[48efb15401231c3513475a1b008fa1da3463afa4](https://github.com/sagemath/sagetrac-mirror/commit/48efb15401231c3513475a1b008fa1da3463afa4)".



---

archive/issue_comments_329221.json:
```json
{
    "body": "<a id='comment:13'></a>\ninstalls cleanly and passes its own test suite.",
    "created_at": "2017-01-03T22:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329221",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:13'></a>
installs cleanly and passes its own test suite.



---

archive/issue_events_200835.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-01-03T22:22:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22058#event-200835"
}
```



---

archive/issue_events_200836.json:
```json
{
    "actor": "https://github.com/EmmanuelCharpentier",
    "created_at": "2017-01-03T22:22:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22058#event-200836"
}
```



---

archive/issue_comments_329222.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [jdemeyer](#comment%3A11):\n> What I mean is that a git repository is not the same as a source tarball. Take Sage for example: the tarball generated by `make dist` is not just a packaging of the git repo.\n> \n> In particular, the actual source tarball of `git` (see new ticket description) contains the `configure` script, which the git repo does not contain. So, if you use the actual source tarball of `git`, then you do not need to run `$MAKE configure`.\n\n\nThanks a lot : I just followed the github link to the archives and was not aware of the kernel.org source... For my edification : where is this documented ?",
    "created_at": "2017-01-03T22:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329222",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:15'></a>
Replying to [jdemeyer](#comment%3A11):
> What I mean is that a git repository is not the same as a source tarball. Take Sage for example: the tarball generated by `make dist` is not just a packaging of the git repo.
> 
> In particular, the actual source tarball of `git` (see new ticket description) contains the `configure` script, which the git repo does not contain. So, if you use the actual source tarball of `git`, then you do not need to run `$MAKE configure`.


Thanks a lot : I just followed the github link to the archives and was not aware of the kernel.org source... For my edification : where is this documented ?



---

archive/issue_comments_329223.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [charpent](#comment%3A15):\n> For my edification : where is this documented ?\n\n\nGood question, it's hard to find. I found it under the \"Older releases\" link at https://git-scm.com/downloads",
    "created_at": "2017-01-04T07:25:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329223",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Replying to [charpent](#comment%3A15):
> For my edification : where is this documented ?


Good question, it's hard to find. I found it under the "Older releases" link at https://git-scm.com/downloads



---

archive/issue_comments_329224.json:
```json
{
    "body": "<a id='comment:17'></a>\nI would prefer the commits to be squashed (1 commit instead of 4). Can you do that?",
    "created_at": "2017-01-04T11:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329224",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
I would prefer the commits to be squashed (1 commit instead of 4). Can you do that?



---

archive/issue_comments_329225.json:
```json
{
    "body": "**Changing commit** from \"[48efb15401231c3513475a1b008fa1da3463afa4](https://github.com/sagemath/sagetrac-mirror/commit/48efb15401231c3513475a1b008fa1da3463afa4)\" to \"[bd5a04f3491d6565eb7481b7b0bdb9bec2393b04](https://github.com/sagemath/sagetrac-mirror/commit/bd5a04f3491d6565eb7481b7b0bdb9bec2393b04)\".",
    "created_at": "2017-01-04T12:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329225",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[48efb15401231c3513475a1b008fa1da3463afa4](https://github.com/sagemath/sagetrac-mirror/commit/48efb15401231c3513475a1b008fa1da3463afa4)" to "[bd5a04f3491d6565eb7481b7b0bdb9bec2393b04](https://github.com/sagemath/sagetrac-mirror/commit/bd5a04f3491d6565eb7481b7b0bdb9bec2393b04)".



---

archive/issue_comments_329226.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd5a04f3491d6565eb7481b7b0bdb9bec2393b04\">bd5a04f</a></td><td><code>Update source to 2.11.0, fix checksum.</code></td></tr></table>\n",
    "created_at": "2017-01-04T12:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329226",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd5a04f3491d6565eb7481b7b0bdb9bec2393b04">bd5a04f</a></td><td><code>Update source to 2.11.0, fix checksum.</code></td></tr></table>




---

archive/issue_comments_329227.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [git](#comment%3A18):\n> Branch pushed to git repo; I updated commit sha1. This was a forced push. **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd5a04f3491d6565eb7481b7b0bdb9bec2393b04\">bd5a04f</a></td><td><code>Update source to 2.11.0, fix checksum.</code></td></tr></table>\n\n\n1've checked that git builds and passes its own testsuite :\n\n```\n[git-2.11.0] fixed   0\n[git-2.11.0] success 13952\n[git-2.11.0] failed  0\n[git-2.11.0] broken  192\n[git-2.11.0] total   14340\n```\nI'd rather not `make ptestlong` on this machine, which is too damned slow for the test (about 4 hours...).",
    "created_at": "2017-01-04T12:16:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329227",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:19'></a>
Replying to [git](#comment%3A18):
> Branch pushed to git repo; I updated commit sha1. This was a forced push. **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd5a04f3491d6565eb7481b7b0bdb9bec2393b04">bd5a04f</a></td><td><code>Update source to 2.11.0, fix checksum.</code></td></tr></table>


1've checked that git builds and passes its own testsuite :

```
[git-2.11.0] fixed   0
[git-2.11.0] success 13952
[git-2.11.0] failed  0
[git-2.11.0] broken  192
[git-2.11.0] total   14340
```
I'd rather not `make ptestlong` on this machine, which is too damned slow for the test (about 4 hours...).



---

archive/issue_comments_329228.json:
```json
{
    "body": "<a id='comment:20'></a>\nAgainst Sage 7.5 built on a pristine Debian (testing) VM + current system's compilers and OpenSSL + development libs (`libssl-dev`, currently 1.1.0c)  :\n\n* Passes its own testsuite, with similar results :\n\n```\nfixed   0\nsuccess 13276\nfailed  0\nbroken  185\ntotal   13728\n```\n\n* The resulting sage passes `ptestlong` with no errors.\n\nOne notes that the testsuite \n* depends on an utility (`msgfmt`, in Debian's `gettext` package), that seems unneeded for anything else in Sage ;\n* that the number of tests seems to depend on other installed software.\n\nStill `needs_review`.",
    "created_at": "2017-01-15T05:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329228",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:20'></a>
Against Sage 7.5 built on a pristine Debian (testing) VM + current system's compilers and OpenSSL + development libs (`libssl-dev`, currently 1.1.0c)  :

* Passes its own testsuite, with similar results :

```
fixed   0
success 13276
failed  0
broken  185
total   13728
```

* The resulting sage passes `ptestlong` with no errors.

One notes that the testsuite 
* depends on an utility (`msgfmt`, in Debian's `gettext` package), that seems unneeded for anything else in Sage ;
* that the number of tests seems to depend on other installed software.

Still `needs_review`.



---

archive/issue_comments_329229.json:
```json
{
    "body": "**Changing reviewer** from \"Jeroen Demeyer\" to \"Jeroen Demeyer, Dima Pasechnik\".",
    "created_at": "2017-01-15T08:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329229",
    "user": "https://github.com/dimpase"
}
```

**Changing reviewer** from "Jeroen Demeyer" to "Jeroen Demeyer, Dima Pasechnik".



---

archive/issue_events_200837.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-01-15T08:50:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22058#event-200837"
}
```



---

archive/issue_events_200838.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-01-15T08:50:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22058#event-200838"
}
```



---

archive/issue_comments_329230.json:
```json
{
    "body": "<a id='comment:21'></a>\nlooks good to me.",
    "created_at": "2017-01-15T08:50:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329230",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:21'></a>
looks good to me.



---

archive/issue_events_200839.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-21T16:35:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22058#event-200839"
}
```



---

archive/issue_events_200840.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-21T16:35:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22058#event-200840"
}
```



---

archive/issue_comments_329231.json:
```json
{
    "body": "**Changing branch** from \"[u/charpent/upgrade_git_to_2_10_2__or_2_11___](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_git_to_2_10_2__or_2_11___)\" to \"[bd5a04f3491d6565eb7481b7b0bdb9bec2393b04](https://github.com/sagemath/sagetrac-mirror/commit/bd5a04f3491d6565eb7481b7b0bdb9bec2393b04)\".",
    "created_at": "2017-01-21T16:35:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22058",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22058#issuecomment-329231",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/charpent/upgrade_git_to_2_10_2__or_2_11___](https://github.com/sagemath/sagetrac-mirror/tree/u/charpent/upgrade_git_to_2_10_2__or_2_11___)" to "[bd5a04f3491d6565eb7481b7b0bdb9bec2393b04](https://github.com/sagemath/sagetrac-mirror/commit/bd5a04f3491d6565eb7481b7b0bdb9bec2393b04)".
