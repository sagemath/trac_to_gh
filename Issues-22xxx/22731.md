# Issue 22731: Replace "$SAGE_LOCAL/bin" by more specific variables to make Sage easier to package, use in venvs

archive/issues_022494.json:
```json
{
    "body": "Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.\n\n**1a.** Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n\n**1b.** (Wishlist item:) Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n\n**2a.** Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). As proposed in #29013, we use the variable `SAGE_VENV` for this, so these scripts would be referred to as `$SAGE_VENV/bin/sage-eval` etc.\n\n**2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.\n\n**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)\n\n**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (using `$SAGE_VENV/bin` directly instead of going through `SAGE_VENV_SCRIPTS_DIR`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n\nWe also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.\n\n\nSee also:\n- https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n- #30013 `src/bin/sage-env`: Make sure `$SAGE_VENV/bin` is at the beginning of the PATH\n- #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n- #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv\n\nCC:  @mkoeppe @jhpalmieri @orlitzky @tobiasdiez @isuruf @antonio-rojas @mwageringel\n\nBranch/Commit: 38eebc3d9f790c81b8ffcc963cf2513184c9ae6a\n\nReviewer: Tobias Diez, Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #29951\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22731\n\n",
    "closed_at": "2020-12-05T22:13:22Z",
    "created_at": "2017-03-31T20:38:14Z",
    "labels": [
        "component: porting"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Replace \"$SAGE_LOCAL/bin\" by more specific variables to make Sage easier to package, use in venvs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22731",
    "user": "https://github.com/tobihan"
}
```
Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.

**1a.** Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.

**1b.** (Wishlist item:) Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 

**2a.** Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). As proposed in #29013, we use the variable `SAGE_VENV` for this, so these scripts would be referred to as `$SAGE_VENV/bin/sage-eval` etc.

**2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.

**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)

**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (using `$SAGE_VENV/bin` directly instead of going through `SAGE_VENV_SCRIPTS_DIR`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.

We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.


See also:
- https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
- #30013 `src/bin/sage-env`: Make sure `$SAGE_VENV/bin` is at the beginning of the PATH
- #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
- #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv

CC:  @mkoeppe @jhpalmieri @orlitzky @tobiasdiez @isuruf @antonio-rojas @mwageringel

Branch/Commit: 38eebc3d9f790c81b8ffcc963cf2513184c9ae6a

Reviewer: Tobias Diez, Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #29951

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22731





---

archive/issue_comments_423650.json:
```json
{
    "body": "Changing branch from \"\" to \"u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_\"",
    "created_at": "2017-03-31T20:49:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423650",
    "user": "https://github.com/tobihan"
}
```

Changing branch from "" to "u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_"



---

archive/issue_comments_423651.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-\n+Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.\n+    \n+SAGE_SCRIPTS_DIR is already being defined in sage-env. With these changes Linux distros can install sage to /usr/bin and the other scripts somewhere else.\n``````\n",
    "created_at": "2017-03-31T20:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423651",
    "user": "https://github.com/tobihan"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-
+Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.
+    
+SAGE_SCRIPTS_DIR is already being defined in sage-env. With these changes Linux distros can install sage to /usr/bin and the other scripts somewhere else.
``````




---

archive/issue_comments_423652.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2017-03-31T20:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423652",
    "user": "https://github.com/tobihan"
}
```

Changing priority from major to minor.



---

archive/issue_comments_423653.json:
```json
{
    "body": "Changing author from \"\" to \"Tobias Hanen\"",
    "created_at": "2017-03-31T20:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423653",
    "user": "https://github.com/tobihan"
}
```

Changing author from "" to "Tobias Hanen"



---

archive/issue_comments_423654.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2017-03-31T20:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423654",
    "user": "https://github.com/tobihan"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_423655.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-31T20:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423655",
    "user": "https://github.com/tobihan"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_423656.json:
```json
{
    "body": "Changing commit from \"\" to \"6ae9bf199cc52f40a59913222876bd6d98ffd011\"",
    "created_at": "2017-03-31T20:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423656",
    "user": "https://github.com/tobihan"
}
```

Changing commit from "" to "6ae9bf199cc52f40a59913222876bd6d98ffd011"



---

archive/issue_comments_423657.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2017-03-31T20:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423657",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_423658.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to scripts.",
    "created_at": "2017-03-31T20:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423658",
    "user": "https://github.com/tobihan"
}
```

Changing component from PLEASE CHANGE to scripts.



---

archive/issue_comments_423659.json:
```json
{
    "body": "Changing author from \"Tobias Hanen\" to \"Tobias Hansen\"",
    "created_at": "2017-03-31T20:55:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423659",
    "user": "https://github.com/tobihan"
}
```

Changing author from "Tobias Hanen" to "Tobias Hansen"



---

archive/issue_comments_423660.json:
```json
{
    "body": "<a id='comment:4'></a>The name `SAGE_SCRIPTS_DIR` refers to the scripts of Sage itself. It is only meant to find `sage-env` and friends, nothing more.\n\nNow, if you want a invent a *new* variable with the purpose of defining the bindir (to replace `SAGE_LOCAL/bin`), that's fine. Just don't call it `SAGE_SCRIPTS_DIR`.",
    "created_at": "2017-04-01T10:44:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423660",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>The name `SAGE_SCRIPTS_DIR` refers to the scripts of Sage itself. It is only meant to find `sage-env` and friends, nothing more.

Now, if you want a invent a *new* variable with the purpose of defining the bindir (to replace `SAGE_LOCAL/bin`), that's fine. Just don't call it `SAGE_SCRIPTS_DIR`.



---

archive/issue_comments_423661.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-04-01T10:44:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423661",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_423662.json:
```json
{
    "body": "Changing component from scripts to porting.",
    "created_at": "2017-04-01T10:44:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423662",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from scripts to porting.



---

archive/issue_comments_423663.json:
```json
{
    "body": "Changing branch from \"u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_\" to \"u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_\"",
    "created_at": "2018-04-01T20:51:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423663",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_" to "u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_"



---

archive/issue_comments_423664.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-01T21:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423665.json:
```json
{
    "body": "Changing commit from \"6ae9bf199cc52f40a59913222876bd6d98ffd011\" to \"502f6abb14c4088bc6fe9cd9610400725af93c54\"",
    "created_at": "2018-04-01T21:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423665",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6ae9bf199cc52f40a59913222876bd6d98ffd011" to "502f6abb14c4088bc6fe9cd9610400725af93c54"



---

archive/issue_comments_423666.json:
```json
{
    "body": "<a id='comment:7'></a>I have not had a chance to try this out locally (as my Sage is rebuilding.) Is this more or less what you had in mind jdemeyer?",
    "created_at": "2018-04-01T21:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423666",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'></a>I have not had a chance to try this out locally (as my Sage is rebuilding.) Is this more or less what you had in mind jdemeyer?



---

archive/issue_comments_423667.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-01T21:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423667",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_423668.json:
```json
{
    "body": "Changing author from \"Tobias Hansen\" to \"Tobias Hansen, Julian R\u00fcth\"",
    "created_at": "2018-04-01T21:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423668",
    "user": "https://github.com/saraedum"
}
```

Changing author from "Tobias Hansen" to "Tobias Hansen, Julian Rüth"



---

archive/issue_comments_423669.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-02T08:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423669",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423670.json:
```json
{
    "body": "Changing commit from \"502f6abb14c4088bc6fe9cd9610400725af93c54\" to \"7b6d51fce967cea3a2d9163561925bca251cf6a3\"",
    "created_at": "2018-04-02T08:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423670",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "502f6abb14c4088bc6fe9cd9610400725af93c54" to "7b6d51fce967cea3a2d9163561925bca251cf6a3"



---

archive/issue_comments_423671.json:
```json
{
    "body": "<a id='comment:9'></a>It makes no sense to add both `$SAGE_LOCAL/bin` and `$SAGE_BIN` to the `PATH`. The whole point should be to replace `$SAGE_LOCAL/bin` by `$SAGE_BIN`.",
    "created_at": "2018-04-02T08:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423671",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>It makes no sense to add both `$SAGE_LOCAL/bin` and `$SAGE_BIN` to the `PATH`. The whole point should be to replace `$SAGE_LOCAL/bin` by `$SAGE_BIN`.



---

archive/issue_comments_423672.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-02T08:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423672",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423673.json:
```json
{
    "body": "Changing commit from \"7b6d51fce967cea3a2d9163561925bca251cf6a3\" to \"b91dbcb58ff20256f37f3a73f9c97713240abcd9\"",
    "created_at": "2018-04-02T08:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423673",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7b6d51fce967cea3a2d9163561925bca251cf6a3" to "b91dbcb58ff20256f37f3a73f9c97713240abcd9"



---

archive/issue_comments_423674.json:
```json
{
    "body": "<a id='comment:11'></a>1. You need to define `SAGE_BIN` somewhere in `sage-env`\n\n2. This conflicts with #25056",
    "created_at": "2018-04-02T08:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423674",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>1. You need to define `SAGE_BIN` somewhere in `sage-env`

2. This conflicts with #25056



---

archive/issue_comments_423675.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-04-02T08:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423675",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_423676.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.\n+Use `SAGE_BIN` in more places and define a fallback in `env.py`.\n     \n-SAGE_SCRIPTS_DIR is already being defined in sage-env. With these changes Linux distros can install sage to /usr/bin and the other scripts somewhere else.\n+With these changes Linux distros can install sage to `/usr/bin` and the other scripts somewhere else.\n``````\n",
    "created_at": "2018-04-02T08:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423676",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.
+Use `SAGE_BIN` in more places and define a fallback in `env.py`.
     
-SAGE_SCRIPTS_DIR is already being defined in sage-env. With these changes Linux distros can install sage to /usr/bin and the other scripts somewhere else.
+With these changes Linux distros can install sage to `/usr/bin` and the other scripts somewhere else.
``````




---

archive/issue_comments_423677.json:
```json
{
    "body": "Changing commit from \"b91dbcb58ff20256f37f3a73f9c97713240abcd9\" to \"2d4fa67978250cd7729b3c6904c158b54b5f9f41\"",
    "created_at": "2018-04-03T13:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423677",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b91dbcb58ff20256f37f3a73f9c97713240abcd9" to "2d4fa67978250cd7729b3c6904c158b54b5f9f41"



---

archive/issue_comments_423678.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-03T13:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423678",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423679.json:
```json
{
    "body": "<a id='comment:13'></a>Thanks for the feedback. I do not really understand how these scripts interact. Did you mean something like this?\n\nWhat is your point when it comes to the conflict with #25056. I guess whoever gets merged last needs to fix conflicts? Or is there something more substantial that needs to be taken into account?",
    "created_at": "2018-04-03T13:03:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423679",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:13'></a>Thanks for the feedback. I do not really understand how these scripts interact. Did you mean something like this?

What is your point when it comes to the conflict with #25056. I guess whoever gets merged last needs to fix conflicts? Or is there something more substantial that needs to be taken into account?



---

archive/issue_comments_423680.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-03T13:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423680",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_423681.json:
```json
{
    "body": "Changing work_issues from \"\" to \"needs more testing\"",
    "created_at": "2018-04-03T13:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423681",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "" to "needs more testing"



---

archive/issue_comments_423682.json:
```json
{
    "body": "<a id='comment:15'></a>[my Sage is rebuilding as always, so I could not test this yet.]",
    "created_at": "2018-04-03T13:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423682",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:15'></a>[my Sage is rebuilding as always, so I could not test this yet.]



---

archive/issue_comments_423683.json:
```json
{
    "body": "Changing work_issues from \"needs more testing\" to \"rebase, test\"",
    "created_at": "2018-04-05T09:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423683",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "needs more testing" to "rebase, test"



---

archive/issue_comments_423684.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-04-05T09:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423684",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_423685.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [saraedum](#comment%3A13):\n> What is your point when it comes to the conflict with #25056. I guess whoever gets merged last needs to fix conflicts? Or is there something more substantial that needs to be taken into account?\n\n\nIn this case, #25056 is a blocker so it will certainly take priority over this ticket. So it might be a good idea to rebase on top of #25056.",
    "created_at": "2018-04-05T09:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423685",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>Replying to [saraedum](#comment%3A13):
> What is your point when it comes to the conflict with #25056. I guess whoever gets merged last needs to fix conflicts? Or is there something more substantial that needs to be taken into account?


In this case, #25056 is a blocker so it will certainly take priority over this ticket. So it might be a good idea to rebase on top of #25056.



---

archive/issue_comments_423686.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#25056\"",
    "created_at": "2018-04-05T09:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423686",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#25056"



---

archive/issue_comments_423687.json:
```json
{
    "body": "<a id='comment:17'></a>1. `SAGE_BIN` should be set to the `--bindir` determined by `./configure`. Use `src/bin/sage-env-config.in` to implement this.\n\n2. I don't think that it should be allowed to override `SAGE_BIN` at runtime, it should be set unconditionally to the value determined by `./configure`. This would be analogous to `SAGE_LOCAL`.",
    "created_at": "2018-04-05T09:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423687",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>1. `SAGE_BIN` should be set to the `--bindir` determined by `./configure`. Use `src/bin/sage-env-config.in` to implement this.

2. I don't think that it should be allowed to override `SAGE_BIN` at runtime, it should be set unconditionally to the value determined by `./configure`. This would be analogous to `SAGE_LOCAL`.



---

archive/issue_comments_423688.json:
```json
{
    "body": "Changing commit from \"2d4fa67978250cd7729b3c6904c158b54b5f9f41\" to \"5b3d0541a77f9b69453b3f87e628172c7c402d2f\"",
    "created_at": "2018-04-05T14:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423688",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2d4fa67978250cd7729b3c6904c158b54b5f9f41" to "5b3d0541a77f9b69453b3f87e628172c7c402d2f"



---

archive/issue_comments_423689.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-05T14:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423689",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423690.json:
```json
{
    "body": "Changing work_issues from \"rebase, test\" to \"test with and without bindir, test relocation\"",
    "created_at": "2018-04-05T14:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423690",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "rebase, test" to "test with and without bindir, test relocation"



---

archive/issue_comments_423691.json:
```json
{
    "body": "Changing author from \"Tobias Hansen, Julian R\u00fcth\" to \"Tobias Hansen, Julian R\u00fcth, fbissey\"",
    "created_at": "2018-04-05T20:15:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423691",
    "user": "https://github.com/kiwifb"
}
```

Changing author from "Tobias Hansen, Julian Rüth" to "Tobias Hansen, Julian Rüth, fbissey"



---

archive/issue_comments_423692.json:
```json
{
    "body": "Changing author from \"Tobias Hansen, Julian R\u00fcth, fbissey\" to \"Tobias Hansen, Julian R\u00fcth, Fran\u00e7ois Bissey\"",
    "created_at": "2018-04-06T10:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423692",
    "user": "https://github.com/saraedum"
}
```

Changing author from "Tobias Hansen, Julian Rüth, fbissey" to "Tobias Hansen, Julian Rüth, François Bissey"



---

archive/issue_comments_423693.json:
```json
{
    "body": "<a id='comment:22'></a>Darn I had filled the wrong field when I wanted to \"subscribe\" to this ticket. \n\nI am not hot to create a new variable especially for calling stuff that should by and large be in the `PATH`. In my opinion, for sage-on-distro, it is even better if there is nothing in front of the name of the executables. It should just work unless you mess your environment and I am not sure we should protect the end users to that level.",
    "created_at": "2018-04-06T10:21:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423693",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:22'></a>Darn I had filled the wrong field when I wanted to "subscribe" to this ticket. 

I am not hot to create a new variable especially for calling stuff that should by and large be in the `PATH`. In my opinion, for sage-on-distro, it is even better if there is nothing in front of the name of the executables. It should just work unless you mess your environment and I am not sure we should protect the end users to that level.



---

archive/issue_comments_423694.json:
```json
{
    "body": "Changing author from \"Tobias Hansen, Julian R\u00fcth, Fran\u00e7ois Bissey\" to \"Tobias Hansen, Julian R\u00fcth\"",
    "created_at": "2018-04-06T10:21:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423694",
    "user": "https://github.com/kiwifb"
}
```

Changing author from "Tobias Hansen, Julian Rüth, François Bissey" to "Tobias Hansen, Julian Rüth"



---

archive/issue_comments_423695.json:
```json
{
    "body": "<a id='comment:23'></a>fbissey: So you are saying that you want to have all the `sage-*` scripts in the PATH? I think it's reasonable for some distros that they want to hide these. I can imagine that one reason to get them off the path is that some distros want MAN pages for everything that's on the PATH. Also not all of these scripts have a nice `--help`/`-h` implemented.",
    "created_at": "2018-04-06T11:00:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423695",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:23'></a>fbissey: So you are saying that you want to have all the `sage-*` scripts in the PATH? I think it's reasonable for some distros that they want to hide these. I can imagine that one reason to get them off the path is that some distros want MAN pages for everything that's on the PATH. Also not all of these scripts have a nice `--help`/`-h` implemented.



---

archive/issue_comments_423696.json:
```json
{
    "body": "<a id='comment:24'></a>I see. But it feels like it is more than just the sage-* scripts that are touched here. In `src/sage/graphs/lovasz_theta.py` this is not the path to a sage script but to an executable from an optional package for example. So you end up having to separate the scripts from the normal commands that are installed in `SAGE_LOCAL/bin`. I don't see this ticket currently doing that.",
    "created_at": "2018-04-06T11:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423696",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:24'></a>I see. But it feels like it is more than just the sage-* scripts that are touched here. In `src/sage/graphs/lovasz_theta.py` this is not the path to a sage script but to an executable from an optional package for example. So you end up having to separate the scripts from the normal commands that are installed in `SAGE_LOCAL/bin`. I don't see this ticket currently doing that.



---

archive/issue_comments_423697.json:
```json
{
    "body": "<a id='comment:25'></a>You're right. I'll try to change the scope of `SAGE_BIN`.",
    "created_at": "2018-04-06T11:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423697",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:25'></a>You're right. I'll try to change the scope of `SAGE_BIN`.



---

archive/issue_comments_423698.json:
```json
{
    "body": "Changing work_issues from \"test with and without bindir, test relocation\" to \"test with and without bindir, test relocation, change scope of SAGE_BIN\"",
    "created_at": "2018-04-06T11:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423698",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "test with and without bindir, test relocation" to "test with and without bindir, test relocation, change scope of SAGE_BIN"



---

archive/issue_comments_423699.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-11T23:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423699",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423700.json:
```json
{
    "body": "Changing commit from \"5b3d0541a77f9b69453b3f87e628172c7c402d2f\" to \"3224b7c15e0009b7b1bec0f9c883469b2d6ef73f\"",
    "created_at": "2018-04-11T23:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423700",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5b3d0541a77f9b69453b3f87e628172c7c402d2f" to "3224b7c15e0009b7b1bec0f9c883469b2d6ef73f"



---

archive/issue_comments_423701.json:
```json
{
    "body": "Changing dependencies from \"#25056\" to \"#25056, #20382\"",
    "created_at": "2018-04-12T00:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423701",
    "user": "https://github.com/saraedum"
}
```

Changing dependencies from "#25056" to "#25056, #20382"



---

archive/issue_comments_423702.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2018-04-12T00:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423702",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_423703.json:
```json
{
    "body": "<a id='comment:28'></a>I wonder whether we should do the following:\n\n* Introduce `$SAGE_BIN` as the place where `sage` and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --scriptsdir`.\n* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.)\n\nAlternatively the second point could be replaced by the following two:\n\n* Introduce `$SAGE_LIBEXEC`. Configurable through `./configure --libexecdir`, default `$SAGE_LOCAL/libexec/`. (See https://www.gnu.org/prep/standards/html_node/Directory-Variables.html.)\n* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LIBEXEC/sage/`. To keep backwards compatibility, we need the default to be `$SAGE_LOCAL/bin` if `$SAGE_LOCAL/bin/sage-env` exists.\n\nThe `$SAGE_SCRIPTS_DIR` fallback is ugly of course. It means that Sage installs vary depending on whether they are clean installs (after this proposal) or upgrades from before. That's unfortunate but we have that already because SPKGs do not uninstall completely. (Or do they by now?) Anyway, I think it makes sense to install things into standard places and I guess it could make the life of packagers easier.\n\nWhat do you think?",
    "created_at": "2018-04-12T00:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423703",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:28'></a>I wonder whether we should do the following:

* Introduce `$SAGE_BIN` as the place where `sage` and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --scriptsdir`.
* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.)

Alternatively the second point could be replaced by the following two:

* Introduce `$SAGE_LIBEXEC`. Configurable through `./configure --libexecdir`, default `$SAGE_LOCAL/libexec/`. (See https://www.gnu.org/prep/standards/html_node/Directory-Variables.html.)
* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LIBEXEC/sage/`. To keep backwards compatibility, we need the default to be `$SAGE_LOCAL/bin` if `$SAGE_LOCAL/bin/sage-env` exists.

The `$SAGE_SCRIPTS_DIR` fallback is ugly of course. It means that Sage installs vary depending on whether they are clean installs (after this proposal) or upgrades from before. That's unfortunate but we have that already because SPKGs do not uninstall completely. (Or do they by now?) Anyway, I think it makes sense to install things into standard places and I guess it could make the life of packagers easier.

What do you think?



---

archive/issue_comments_423704.json:
```json
{
    "body": "<a id='comment:29'></a>Well, I don't use the `configure` script but that sound relatively reasonable. I personally ship stuff like `sage-env` in `/etc` where I feel it belongs but that may be hard at this stage.\n\nUninstall is still being worked on by Erik, but it cannot be helped that there may be a hard block upgrading from a certain version of sage once those things are in place.",
    "created_at": "2018-04-12T01:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423704",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:29'></a>Well, I don't use the `configure` script but that sound relatively reasonable. I personally ship stuff like `sage-env` in `/etc` where I feel it belongs but that may be hard at this stage.

Uninstall is still being worked on by Erik, but it cannot be helped that there may be a hard block upgrading from a certain version of sage once those things are in place.



---

archive/issue_comments_423705.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Use `SAGE_BIN` in more places and define a fallback in `env.py`.\n-    \n-With these changes Linux distros can install sage to `/usr/bin` and the other scripts somewhere else.\n+* Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n+* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n+* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.) \n``````\n",
    "created_at": "2018-04-29T17:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423705",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Use `SAGE_BIN` in more places and define a fallback in `env.py`.
-    
-With these changes Linux distros can install sage to `/usr/bin` and the other scripts somewhere else.
+* Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
+* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
+* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.) 
``````




---

archive/issue_comments_423706.json:
```json
{
    "body": "Changing work_issues from \"test with and without bindir, test relocation, change scope of SAGE_BIN\" to \"\"",
    "created_at": "2018-04-29T17:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423706",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "test with and without bindir, test relocation, change scope of SAGE_BIN" to ""



---

archive/issue_comments_423707.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2018-04-29T17:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423707",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_423708.json:
```json
{
    "body": "<a id='comment:31'></a>Thanks for the feedback. I think I prefer the non-breaking change at the moment.",
    "created_at": "2018-04-29T17:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423708",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:31'></a>Thanks for the feedback. I think I prefer the non-breaking change at the moment.



---

archive/issue_comments_423709.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-04-29T18:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423709",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_423710.json:
```json
{
    "body": "Changing commit from \"3224b7c15e0009b7b1bec0f9c883469b2d6ef73f\" to \"c897d2b9e3e2a7d4a2220af60250f01b9b419746\"",
    "created_at": "2018-04-29T18:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423710",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3224b7c15e0009b7b1bec0f9c883469b2d6ef73f" to "c897d2b9e3e2a7d4a2220af60250f01b9b419746"



---

archive/issue_comments_423711.json:
```json
{
    "body": "Changing work_issues from \"\" to \"use features of 20382\"",
    "created_at": "2018-04-29T18:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423711",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "" to "use features of 20382"



---

archive/issue_comments_423712.json:
```json
{
    "body": "<a id='comment:34'></a>I think I want to the binaries differently if they are non-optional dependencies. So I think this should not be part of this ticket.",
    "created_at": "2018-04-29T18:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423712",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:34'></a>I think I want to the binaries differently if they are non-optional dependencies. So I think this should not be part of this ticket.



---

archive/issue_comments_423713.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,2 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n-* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.) \n``````\n",
    "created_at": "2018-04-29T18:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423713",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,2 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
-* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.) 
``````




---

archive/issue_comments_423714.json:
```json
{
    "body": "Changing work_issues from \"use features of 20382\" to \"\"",
    "created_at": "2018-04-29T18:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423714",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "use features of 20382" to ""



---

archive/issue_comments_423715.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-04-29T19:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423715",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423716.json:
```json
{
    "body": "Changing commit from \"c897d2b9e3e2a7d4a2220af60250f01b9b419746\" to \"5e597441a4435e2033100611512113095834bdbb\"",
    "created_at": "2018-04-29T19:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423716",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c897d2b9e3e2a7d4a2220af60250f01b9b419746" to "5e597441a4435e2033100611512113095834bdbb"



---

archive/issue_comments_423717.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-29T19:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423717",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_423718.json:
```json
{
    "body": "Changing work_issues from \"\" to \"requires testing\"",
    "created_at": "2018-04-29T19:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423718",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "" to "requires testing"



---

archive/issue_comments_423719.json:
```json
{
    "body": "<a id='comment:37'></a>This still needs quite some testing. I just want to see what the patchbot thinks about this.",
    "created_at": "2018-04-29T19:00:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423719",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:37'></a>This still needs quite some testing. I just want to see what the patchbot thinks about this.



---

archive/issue_comments_423720.json:
```json
{
    "body": "Changing commit from \"5e597441a4435e2033100611512113095834bdbb\" to \"6b1ec2e573978815d770f0baff01bffb9ec7d2e4\"",
    "created_at": "2018-05-01T16:16:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423720",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5e597441a4435e2033100611512113095834bdbb" to "6b1ec2e573978815d770f0baff01bffb9ec7d2e4"



---

archive/issue_comments_423721.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-05-01T16:16:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423721",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_423722.json:
```json
{
    "body": "Changing dependencies from \"#25056, #20382\" to \"#25056, #20382, #24655\"",
    "created_at": "2018-05-01T16:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423722",
    "user": "https://github.com/saraedum"
}
```

Changing dependencies from "#25056, #20382" to "#25056, #20382, #24655"



---

archive/issue_comments_423723.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-01T16:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423723",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_423724.json:
```json
{
    "body": "<a id='comment:40'></a>Ok, the patchbot does probably not help much here as it does not rebuild if something that fundamental changes. Let's see what CI thinks about it.",
    "created_at": "2018-05-01T16:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423724",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:40'></a>Ok, the patchbot does probably not help much here as it does not rebuild if something that fundamental changes. Let's see what CI thinks about it.



---

archive/issue_comments_423725.json:
```json
{
    "body": "Changing commit from \"6b1ec2e573978815d770f0baff01bffb9ec7d2e4\" to \"795d0faef202cf603ceebddcff8ef4113dab8e2e\"",
    "created_at": "2018-05-03T18:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423725",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6b1ec2e573978815d770f0baff01bffb9ec7d2e4" to "795d0faef202cf603ceebddcff8ef4113dab8e2e"



---

archive/issue_comments_423726.json:
```json
{
    "body": "<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-03T18:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423726",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423727.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n+\n+CI runs for the proposed changes are here: https://gitlab.com/sagemath/dev/sage/commits/sage-bin (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-03T18:23:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423727",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
+
+CI runs for the proposed changes are here: https://gitlab.com/sagemath/dev/sage/commits/sage-bin (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_423728.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes are here: https://gitlab.com/sagemath/dev/sage/commits/sage-bin (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/sage-bin/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/sage-bin))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-03T18:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423728",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes are here: https://gitlab.com/sagemath/dev/sage/commits/sage-bin (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/sage-bin/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/sage-bin))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_423729.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-11T14:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423729",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423730.json:
```json
{
    "body": "Changing commit from \"795d0faef202cf603ceebddcff8ef4113dab8e2e\" to \"4de96c2cfd063680492a5e066d1ee508980871f4\"",
    "created_at": "2018-05-11T14:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423730",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "795d0faef202cf603ceebddcff8ef4113dab8e2e" to "4de96c2cfd063680492a5e066d1ee508980871f4"



---

archive/issue_comments_423731.json:
```json
{
    "body": "Changing commit from \"4de96c2cfd063680492a5e066d1ee508980871f4\" to \"\"",
    "created_at": "2018-05-14T14:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423731",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "4de96c2cfd063680492a5e066d1ee508980871f4" to ""



---

archive/issue_comments_423732.json:
```json
{
    "body": "Changing branch from \"u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_\" to \"\"",
    "created_at": "2018-05-14T14:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423732",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_" to ""



---

archive/issue_comments_423733.json:
```json
{
    "body": "Changing branch from \"\" to \"u/saraedum/22731\"",
    "created_at": "2018-05-14T14:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423733",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "" to "u/saraedum/22731"



---

archive/issue_comments_423734.json:
```json
{
    "body": "Changing commit from \"\" to \"03c7aa4660e808f080f97a572b0b331c5bce4060\"",
    "created_at": "2018-05-15T09:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423734",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "03c7aa4660e808f080f97a572b0b331c5bce4060"



---

archive/issue_comments_423735.json:
```json
{
    "body": "<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-15T09:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423735",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423736.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/sage-bin/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/sage-bin))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-15T10:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423736",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/sage-bin/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/sage-bin))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_423737.json:
```json
{
    "body": "Changing commit from \"03c7aa4660e808f080f97a572b0b331c5bce4060\" to \"7e37bedcb1d086aa5eb2e1516beec495db39c4c5\"",
    "created_at": "2018-05-20T22:21:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423737",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "03c7aa4660e808f080f97a572b0b331c5bce4060" to "7e37bedcb1d086aa5eb2e1516beec495db39c4c5"



---

archive/issue_comments_423738.json:
```json
{
    "body": "<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-05-20T22:21:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423738",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_423739.json:
```json
{
    "body": "Changing dependencies from \"#25056, #20382, #24655\" to \"#25056, #20382, #24655, #24854\"",
    "created_at": "2018-05-20T22:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423739",
    "user": "https://github.com/saraedum"
}
```

Changing dependencies from "#25056, #20382, #24655" to "#25056, #20382, #24655, #24854"



---

archive/issue_comments_423740.json:
```json
{
    "body": "<a id='comment:51'></a>Would people on this thread have an idea on what can be done to make `$SAGE_LOCAL/bin/sage` work when `$SAGE_ROOT` is not yet set and/or how one can figure out if `$SAGE_ROOT/sage` (a script that has more logic to figure out a value for `$SAGE_ROOT`) is an acceptable executable to use?\n\nIt comes up in producing a jupyter kernelspec for sage that is suitable for use by an external jupyter. See: \n[sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/yEUJOW2fnJI)\n\nIf we can make it very easy to install sage's kernelspec in arbitrary jupyter configurations, it becomes significantly easier to integrate sage in computational environments (for instance, should the nteract desktop jupyter client ever become popular, we could just provide easy interfacing with a system install of it rather than packaging it with sage).",
    "created_at": "2018-05-20T23:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423740",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:51'></a>Would people on this thread have an idea on what can be done to make `$SAGE_LOCAL/bin/sage` work when `$SAGE_ROOT` is not yet set and/or how one can figure out if `$SAGE_ROOT/sage` (a script that has more logic to figure out a value for `$SAGE_ROOT`) is an acceptable executable to use?

It comes up in producing a jupyter kernelspec for sage that is suitable for use by an external jupyter. See: 
[sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/yEUJOW2fnJI)

If we can make it very easy to install sage's kernelspec in arbitrary jupyter configurations, it becomes significantly easier to integrate sage in computational environments (for instance, should the nteract desktop jupyter client ever become popular, we could just provide easy interfacing with a system install of it rather than packaging it with sage).



---

archive/issue_comments_423741.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-21T14:42:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423741",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_423742.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-21T14:43:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423742",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_423743.json:
```json
{
    "body": "Changing commit from \"7e37bedcb1d086aa5eb2e1516beec495db39c4c5\" to \"6d89d614dc1f363622e21b22e213e815b528425b\"",
    "created_at": "2018-05-21T14:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423743",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7e37bedcb1d086aa5eb2e1516beec495db39c4c5" to "6d89d614dc1f363622e21b22e213e815b528425b"



---

archive/issue_comments_423744.json:
```json
{
    "body": "<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-21T14:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423744",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423745.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-22T21:04:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423745",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_423746.json:
```json
{
    "body": "<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-22T21:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423746",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423747.json:
```json
{
    "body": "Changing commit from \"6d89d614dc1f363622e21b22e213e815b528425b\" to \"d7cb021121279a5d3645df7c1519dfff382ac033\"",
    "created_at": "2018-05-22T21:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423747",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6d89d614dc1f363622e21b22e213e815b528425b" to "d7cb021121279a5d3645df7c1519dfff382ac033"



---

archive/issue_comments_423748.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-26T13:10:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423748",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_423749.json:
```json
{
    "body": "<a id='comment:57'></a>The CI tests were successful (the failed tests are due to #25431)",
    "created_at": "2018-05-26T13:10:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423749",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:57'></a>The CI tests were successful (the failed tests are due to #25431)



---

archive/issue_comments_423750.json:
```json
{
    "body": "Changing dependencies from \"#25056, #20382, #24655, #24854\" to \"#25056, #20382, #24655, #24854, #25431\"",
    "created_at": "2018-05-26T13:10:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423750",
    "user": "https://github.com/saraedum"
}
```

Changing dependencies from "#25056, #20382, #24655, #24854" to "#25056, #20382, #24655, #24854, #25431"



---

archive/issue_comments_423751.json:
```json
{
    "body": "<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-26T13:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423751",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423752.json:
```json
{
    "body": "Changing commit from \"d7cb021121279a5d3645df7c1519dfff382ac033\" to \"bed5af50d2560826420e23b716193c95672ffe3e\"",
    "created_at": "2018-05-26T13:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423752",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d7cb021121279a5d3645df7c1519dfff382ac033" to "bed5af50d2560826420e23b716193c95672ffe3e"



---

archive/issue_comments_423753.json:
```json
{
    "body": "<a id='comment:61'></a>Replying to [saraedum](#comment%3A28):\n> Alternatively the second point could be replaced by the following two:\n> \n> * Introduce `$SAGE_LIBEXEC`. Configurable through `./configure --libexecdir`, default `$SAGE_LOCAL/libexec/`. (See https://www.gnu.org/prep/standards/html_node/Directory-Variables.html.)\n\n\n+1 for using libexec for all auxiliary scripts that are not useful for the user from the command line.",
    "created_at": "2018-05-31T17:26:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423753",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'></a>Replying to [saraedum](#comment%3A28):
> Alternatively the second point could be replaced by the following two:
> 
> * Introduce `$SAGE_LIBEXEC`. Configurable through `./configure --libexecdir`, default `$SAGE_LOCAL/libexec/`. (See https://www.gnu.org/prep/standards/html_node/Directory-Variables.html.)


+1 for using libexec for all auxiliary scripts that are not useful for the user from the command line.



---

archive/issue_comments_423754.json:
```json
{
    "body": "<a id='comment:62'></a>It's hard to see the changes on this branch, by the way, since this is on top of some circleci branch; also needs rebasing.",
    "created_at": "2018-05-31T17:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423754",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:62'></a>It's hard to see the changes on this branch, by the way, since this is on top of some circleci branch; also needs rebasing.



---

archive/issue_comments_423755.json:
```json
{
    "body": "Changing commit from \"bed5af50d2560826420e23b716193c95672ffe3e\" to \"7ba2ee2059f43222aabf3ce5de7a282f2687832d\"",
    "created_at": "2018-06-01T00:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423755",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bed5af50d2560826420e23b716193c95672ffe3e" to "7ba2ee2059f43222aabf3ce5de7a282f2687832d"



---

archive/issue_comments_423756.json:
```json
{
    "body": "<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-01T00:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423756",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423757.json:
```json
{
    "body": "Changing commit from \"7ba2ee2059f43222aabf3ce5de7a282f2687832d\" to \"2130060ef6ab1490368bd266ceaa3c190e2366a8\"",
    "created_at": "2018-06-01T00:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423757",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7ba2ee2059f43222aabf3ce5de7a282f2687832d" to "2130060ef6ab1490368bd266ceaa3c190e2366a8"



---

archive/issue_comments_423758.json:
```json
{
    "body": "<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-01T00:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423758",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423759.json:
```json
{
    "body": "<a id='comment:65'></a>See also #21559, #21569, #21570.",
    "created_at": "2018-06-02T04:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423759",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'></a>See also #21559, #21569, #21570.



---

archive/issue_comments_423760.json:
```json
{
    "body": "Changing commit from \"2130060ef6ab1490368bd266ceaa3c190e2366a8\" to \"08f93c738438eea285881837340a0211e71e8187\"",
    "created_at": "2018-06-21T10:11:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423760",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2130060ef6ab1490368bd266ceaa3c190e2366a8" to "08f93c738438eea285881837340a0211e71e8187"



---

archive/issue_comments_423761.json:
```json
{
    "body": "<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-06-21T10:11:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423761",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_423762.json:
```json
{
    "body": "<a id='comment:67'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2018-07-11T10:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423762",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:67'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_423763.json:
```json
{
    "body": "Changing commit from \"08f93c738438eea285881837340a0211e71e8187\" to \"a9ca8a1e356eb6508036e9c986f04f2d97131428\"",
    "created_at": "2018-07-11T10:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423763",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "08f93c738438eea285881837340a0211e71e8187" to "a9ca8a1e356eb6508036e9c986f04f2d97131428"



---

archive/issue_comments_423764.json:
```json
{
    "body": "Changing commit from \"a9ca8a1e356eb6508036e9c986f04f2d97131428\" to \"9c9caef7b23b5782d230dd52aa9f06cb7aee96d9\"",
    "created_at": "2018-07-12T09:06:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423764",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a9ca8a1e356eb6508036e9c986f04f2d97131428" to "9c9caef7b23b5782d230dd52aa9f06cb7aee96d9"



---

archive/issue_comments_423765.json:
```json
{
    "body": "<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-12T09:06:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423765",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:68'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423766.json:
```json
{
    "body": "<a id='comment:69'></a>1. There is a merge conflicts.\n\n2. As I mentioned in [comment:4], don't use `SAGE_SCRIPTS_DIR`.",
    "created_at": "2019-03-21T13:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423766",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:69'></a>1. There is a merge conflicts.

2. As I mentioned in [comment:4], don't use `SAGE_SCRIPTS_DIR`.



---

archive/issue_comments_423767.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-03-21T13:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423767",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_059208.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-15T23:40:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-59208"
}
```



---

archive/issue_comments_423768.json:
```json
{
    "body": "Changing work_issues from \"requires testing\" to \"clarify and prepare to support #30036\"",
    "created_at": "2020-07-15T23:43:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423768",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "requires testing" to "clarify and prepare to support #30036"



---

archive/issue_comments_423769.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,14 @@\n-* Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n-* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n+Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+* Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n+\n+  - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n+\n+* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip).\n+\n+* Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.\n+\n+* \"libexec\"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n+\n+\n+\n``````\n",
    "created_at": "2020-07-16T18:59:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423769",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,14 @@
-* Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
-* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
+Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+* Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.
+
+  - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 
+
+* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip).
+
+* Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.
+
+* "libexec"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
+
+
+
``````




---

archive/issue_comments_423770.json:
```json
{
    "body": "Changing work_issues from \"clarify and prepare to support #30036\" to \"clarify and prepare to support #30036, review/rebase changes\"",
    "created_at": "2020-07-16T19:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423770",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "clarify and prepare to support #30036" to "clarify and prepare to support #30036, review/rebase changes"



---

archive/issue_comments_423771.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,5 +10,6 @@\n \n * \"libexec\"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n \n+See also:\n+- https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n \n-\n``````\n",
    "created_at": "2020-07-17T02:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423771",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,5 +10,6 @@
 
 * "libexec"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
 
+See also:
+- https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
 
-
``````




---

archive/issue_comments_423772.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,4 +12,5 @@\n \n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n-\n+- #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n+- #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n``````\n",
    "created_at": "2020-08-13T05:45:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423772",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,4 +12,5 @@
 
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
-
+- #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
+- #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
``````




---

archive/issue_events_059209.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-08T06:04:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-59209"
}
```



---

archive/issue_events_059210.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-08T06:04:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-59210"
}
```



---

archive/issue_comments_423773.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n-Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes.\n+Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.\n \n * Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n \n   - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n \n-* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip).\n+* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). (#29013 proposed the variable `SAGE_VENV` for this.)\n \n * Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.\n \n``````\n",
    "created_at": "2020-09-11T17:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423773",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
-Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes.
+Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.
 
 * Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.
 
   - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 
 
-* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip).
+* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). (#29013 proposed the variable `SAGE_VENV` for this.)
 
 * Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.
 
``````




---

archive/issue_comments_423774.json:
```json
{
    "body": "Changing work_issues from \"clarify and prepare to support #30036, review/rebase changes\" to \"Implement as described\"",
    "created_at": "2020-09-11T17:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423774",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "clarify and prepare to support #30036, review/rebase changes" to "Implement as described"



---

archive/issue_comments_423775.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,16 +1,19 @@\n Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.\n \n-* Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n+**1a.** Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n \n-  - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n+**1b.** (Wishlist item:) Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n \n-* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). (#29013 proposed the variable `SAGE_VENV` for this.)\n+**2a.** Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). As proposed in #29013, we use the variable `SAGE_VENV` for this, so these scripts would be referred to as `$SAGE_VENV/bin/sage-eval` etc.\n \n-* Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.\n+**2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.\n \n-* \"libexec\"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n+**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n+\n+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect.  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n \n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n+\n``````\n",
    "created_at": "2020-09-11T17:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423775",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,16 +1,19 @@
 Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.
 
-* Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.
+**1a.** Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.
 
-  - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 
+**1b.** (Wishlist item:) Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 
 
-* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). (#29013 proposed the variable `SAGE_VENV` for this.)
+**2a.** Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). As proposed in #29013, we use the variable `SAGE_VENV` for this, so these scripts would be referred to as `$SAGE_VENV/bin/sage-eval` etc.
 
-* Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.
+**2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.
 
-* "libexec"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
+**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
+
+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect.  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
 
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
 - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
 - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
+
``````




---

archive/issue_comments_423776.json:
```json
{
    "body": "Changing branch from \"u/saraedum/22731\" to \"u/mkoeppe/22731\"",
    "created_at": "2020-09-11T19:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423776",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "u/saraedum/22731" to "u/mkoeppe/22731"



---

archive/issue_comments_423777.json:
```json
{
    "body": "Changing dependencies from \"#25056, #20382, #24655, #24854, #25431\" to \"\"",
    "created_at": "2020-09-11T19:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423777",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#25056, #20382, #24655, #24854, #25431" to ""



---

archive/issue_comments_423778.json:
```json
{
    "body": "<a id='comment:81'></a>Rebased away from #24854\n\n---\nNew commits:",
    "created_at": "2020-09-11T19:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423778",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:81'></a>Rebased away from #24854

---
New commits:



---

archive/issue_comments_423779.json:
```json
{
    "body": "Changing commit from \"9c9caef7b23b5782d230dd52aa9f06cb7aee96d9\" to \"b9dfd1a4cf1e789672f09a464757d50c2036b34a\"",
    "created_at": "2020-09-11T19:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423779",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "9c9caef7b23b5782d230dd52aa9f06cb7aee96d9" to "b9dfd1a4cf1e789672f09a464757d50c2036b34a"



---

archive/issue_comments_423780.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,9 +8,9 @@\n \n **2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.\n \n-**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n+**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)\n \n-**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect.  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n \n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n``````\n",
    "created_at": "2020-09-16T01:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423780",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,9 +8,9 @@
 
 **2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.
 
-**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
+**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)
 
-**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect.  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
 
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
``````




---

archive/issue_comments_423781.json:
```json
{
    "body": "<a id='comment:82'></a>Hoping that we can move this ticket forward next, to reduce the amount of necessary patching in distribution packaging.",
    "created_at": "2020-09-16T01:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423781",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:82'></a>Hoping that we can move this ticket forward next, to reduce the amount of necessary patching in distribution packaging.



---

archive/issue_comments_423782.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,4 +16,4 @@\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n-\n+- #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv\n``````\n",
    "created_at": "2020-09-16T03:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423782",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,4 +16,4 @@
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
 - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
 - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
-
+- #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv
``````




---

archive/issue_comments_423783.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#30818\"",
    "created_at": "2020-10-23T21:09:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423783",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#30818"



---

archive/issue_comments_423784.json:
```json
{
    "body": "Changing dependencies from \"#30818\" to \"#29850, #30818\"",
    "created_at": "2020-11-10T22:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423784",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30818" to "#29850, #30818"



---

archive/issue_comments_423785.json:
```json
{
    "body": "Changing commit from \"b9dfd1a4cf1e789672f09a464757d50c2036b34a\" to \"545d118b9bc907340eca5342e380ce32fa72a923\"",
    "created_at": "2020-11-10T23:01:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423785",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b9dfd1a4cf1e789672f09a464757d50c2036b34a" to "545d118b9bc907340eca5342e380ce32fa72a923"



---

archive/issue_comments_423786.json:
```json
{
    "body": "<a id='comment:86'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-11-10T23:01:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423786",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:86'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_423787.json:
```json
{
    "body": "<a id='comment:87'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T01:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423787",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:87'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423788.json:
```json
{
    "body": "Changing commit from \"545d118b9bc907340eca5342e380ce32fa72a923\" to \"6348c5c7c0eb2caba9f72f511847bea550b23709\"",
    "created_at": "2020-11-11T01:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423788",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "545d118b9bc907340eca5342e380ce32fa72a923" to "6348c5c7c0eb2caba9f72f511847bea550b23709"



---

archive/issue_comments_423789.json:
```json
{
    "body": "Changing work_issues from \"Implement as described\" to \"\"",
    "created_at": "2020-11-11T01:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423789",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "Implement as described" to ""



---

archive/issue_comments_423790.json:
```json
{
    "body": "Changing author from \"Tobias Hansen, Julian R\u00fcth\" to \"Matthias Koeppe\"",
    "created_at": "2020-11-11T01:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423790",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "Tobias Hansen, Julian Rüth" to "Matthias Koeppe"



---

archive/issue_comments_423791.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-11-11T01:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423791",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_423792.json:
```json
{
    "body": "Changing dependencies from \"#29850, #30818\" to \"#29850\"",
    "created_at": "2020-11-11T01:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423792",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29850, #30818" to "#29850"



---

archive/issue_comments_423793.json:
```json
{
    "body": "<a id='comment:90'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T02:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423793",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:90'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423794.json:
```json
{
    "body": "Changing commit from \"6348c5c7c0eb2caba9f72f511847bea550b23709\" to \"122bf7890c17de88de973be8ac9c5165e9d47447\"",
    "created_at": "2020-11-11T02:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423794",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6348c5c7c0eb2caba9f72f511847bea550b23709" to "122bf7890c17de88de973be8ac9c5165e9d47447"



---

archive/issue_comments_423795.json:
```json
{
    "body": "Changing dependencies from \"#29850\" to \"#29850, #30888\"",
    "created_at": "2020-11-11T02:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423795",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29850" to "#29850, #30888"



---

archive/issue_comments_423796.json:
```json
{
    "body": "<a id='comment:92'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-11-11T19:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423796",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:92'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_423797.json:
```json
{
    "body": "Changing commit from \"122bf7890c17de88de973be8ac9c5165e9d47447\" to \"6348c5c7c0eb2caba9f72f511847bea550b23709\"",
    "created_at": "2020-11-11T19:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423797",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "122bf7890c17de88de973be8ac9c5165e9d47447" to "6348c5c7c0eb2caba9f72f511847bea550b23709"



---

archive/issue_comments_423798.json:
```json
{
    "body": "Changing dependencies from \"#29850, #30888\" to \"#29850\"",
    "created_at": "2020-11-11T19:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423798",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29850, #30888" to "#29850"



---

archive/issue_comments_423799.json:
```json
{
    "body": "<a id='comment:94'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-11-12T18:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423799",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:94'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_423800.json:
```json
{
    "body": "Changing commit from \"6348c5c7c0eb2caba9f72f511847bea550b23709\" to \"c585d94b95c5675f5a68690d13fa6a949642c48f\"",
    "created_at": "2020-11-12T18:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423800",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6348c5c7c0eb2caba9f72f511847bea550b23709" to "c585d94b95c5675f5a68690d13fa6a949642c48f"



---

archive/issue_comments_423801.json:
```json
{
    "body": "Changing dependencies from \"#29850\" to \"#29951\"",
    "created_at": "2020-11-12T18:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423801",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29850" to "#29951"



---

archive/issue_comments_423802.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,6 +12,9 @@\n \n **In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n \n+We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.\n+\n+\n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n``````\n",
    "created_at": "2020-11-12T18:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423802",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,6 +12,9 @@
 
 **In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
 
+We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.
+
+
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
 - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
``````




---

archive/issue_comments_423803.json:
```json
{
    "body": "<a id='comment:95'></a>Picked some changes from #29850, rebased away from it.",
    "created_at": "2020-11-12T18:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423803",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:95'></a>Picked some changes from #29850, rebased away from it.



---

archive/issue_comments_423804.json:
```json
{
    "body": "Changing commit from \"c585d94b95c5675f5a68690d13fa6a949642c48f\" to \"2fd195f5f044d125b0d5a743fec9d79e449126af\"",
    "created_at": "2020-11-12T18:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423804",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c585d94b95c5675f5a68690d13fa6a949642c48f" to "2fd195f5f044d125b0d5a743fec9d79e449126af"



---

archive/issue_comments_423805.json:
```json
{
    "body": "<a id='comment:96'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-12T18:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423805",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:96'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423806.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,6 +17,6 @@\n \n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n-- #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n+- #30013 `src/bin/sage-env`: Make sure `$SAGE_VENV/bin` is at the beginning of the PATH\n - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n - #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv\n``````\n",
    "created_at": "2020-11-12T18:40:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423806",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,6 +17,6 @@
 
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
-- #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
+- #30013 `src/bin/sage-env`: Make sure `$SAGE_VENV/bin` is at the beginning of the PATH
 - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
 - #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv
``````




---

archive/issue_comments_423807.json:
```json
{
    "body": "<a id='comment:98'></a>Although the ticket description is long, the actual changes on top of #29951 are very small. Essentially, the `sage` script now relies on the `PATH` set by `sage-env` instead of hardcoding the directory where `python3` etc. is located. `$SAGE_VENV/bin` is used explicitly only in a few places that need an absolute filename.\n\nReady for review",
    "created_at": "2020-11-12T18:55:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423807",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:98'></a>Although the ticket description is long, the actual changes on top of #29951 are very small. Essentially, the `sage` script now relies on the `PATH` set by `sage-env` instead of hardcoding the directory where `python3` etc. is located. `$SAGE_VENV/bin` is used explicitly only in a few places that need an absolute filename.

Ready for review



---

archive/issue_comments_423808.json:
```json
{
    "body": "<a id='comment:99'></a>Codewise this looks good to me, but may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable as it's not clear from the context when to use which.\n\nMoreover, I was wondering if it makes sense to provide only a variable `SAGE_VENV_BIN` pointing to the binary folder in the venv (since at least from your ticket description and code changes would be sufficient and parallels the upcoming `SAGE_BIN`).\n\nNeeds another review as I'm not yet that familiar with sages inner workings.",
    "created_at": "2020-11-12T21:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423808",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:99'></a>Codewise this looks good to me, but may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable as it's not clear from the context when to use which.

Moreover, I was wondering if it makes sense to provide only a variable `SAGE_VENV_BIN` pointing to the binary folder in the venv (since at least from your ticket description and code changes would be sufficient and parallels the upcoming `SAGE_BIN`).

Needs another review as I'm not yet that familiar with sages inner workings.



---

archive/issue_comments_423809.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Tobias Diez,\"",
    "created_at": "2020-11-12T21:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423809",
    "user": "https://github.com/tobiasdiez"
}
```

Changing reviewer from "" to "Tobias Diez,"



---

archive/issue_comments_423810.json:
```json
{
    "body": "Changing commit from \"2fd195f5f044d125b0d5a743fec9d79e449126af\" to \"f3b7a9cce247457f07ef42069cdadb3f6409b008\"",
    "created_at": "2020-11-13T01:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423810",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2fd195f5f044d125b0d5a743fec9d79e449126af" to "f3b7a9cce247457f07ef42069cdadb3f6409b008"



---

archive/issue_comments_423811.json:
```json
{
    "body": "<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-13T01:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423811",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423812.json:
```json
{
    "body": "<a id='comment:101'></a>Replying to [gh-tobiasdiez](#comment%3A99):\n> ... may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable \n\n\nDone, please take a look",
    "created_at": "2020-11-13T01:27:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423812",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:101'></a>Replying to [gh-tobiasdiez](#comment%3A99):
> ... may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable 


Done, please take a look



---

archive/issue_comments_423813.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n \n **2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)\n \n-**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (using `$SAGE_VENV/bin` directly instead of going through `SAGE_VENV_SCRIPTS_DIR`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n \n We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.\n \n``````\n",
    "created_at": "2020-11-13T01:30:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423813",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 
 **2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)
 
-**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (using `$SAGE_VENV/bin` directly instead of going through `SAGE_VENV_SCRIPTS_DIR`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
 
 We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.
 
``````




---

archive/issue_comments_423814.json:
```json
{
    "body": "<a id='comment:103'></a>Replying to [gh-tobiasdiez](#comment%3A99):\n> I was wondering if it makes sense to provide only a variable `SAGE_VENV_BIN` pointing to the binary folder in the venv (since at least from your ticket description and code changes would be sufficient and parallels the upcoming `SAGE_BIN`).\n\nSure, that will make sense to do in the follow-up ticket regarding `SAGE_BIN` (if the downstream packagers still need that...)",
    "created_at": "2020-11-13T01:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423814",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:103'></a>Replying to [gh-tobiasdiez](#comment%3A99):
> I was wondering if it makes sense to provide only a variable `SAGE_VENV_BIN` pointing to the binary folder in the venv (since at least from your ticket description and code changes would be sufficient and parallels the upcoming `SAGE_BIN`).

Sure, that will make sense to do in the follow-up ticket regarding `SAGE_BIN` (if the downstream packagers still need that...)



---

archive/issue_comments_423815.json:
```json
{
    "body": "Changing reviewer from \"Tobias Diez,\" to \"Tobias Diez, ...\"",
    "created_at": "2020-11-13T01:35:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423815",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "Tobias Diez," to "Tobias Diez, ..."



---

archive/issue_comments_423816.json:
```json
{
    "body": "<a id='comment:105'></a>Replying to [mkoeppe](#comment%3A101):\n> Replying to [gh-tobiasdiez](#comment%3A99):\n> > ... may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable \n  \n> \n> Done, please take a look\n\n\nThanks! Looks good.",
    "created_at": "2020-11-13T09:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423816",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:105'></a>Replying to [mkoeppe](#comment%3A101):
> Replying to [gh-tobiasdiez](#comment%3A99):
> > ... may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable 
  
> 
> Done, please take a look


Thanks! Looks good.



---

archive/issue_comments_423817.json:
```json
{
    "body": "<a id='comment:8'></a>running\n\n```\n$ grep SAGE_LOCAL/bin build/ -R\n```\nreturns quite a few hits, mostly in  build/pkgs/\n\nShouldn't most of these be replaced with `SAGE_BIN` ?",
    "created_at": "2020-11-18T12:09:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423817",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>running

```
$ grep SAGE_LOCAL/bin build/ -R
```
returns quite a few hits, mostly in  build/pkgs/

Shouldn't most of these be replaced with `SAGE_BIN` ?



---

archive/issue_comments_423818.json:
```json
{
    "body": "<a id='comment:9'></a>See ticket description - \"In this ticket, ...\"",
    "created_at": "2020-11-18T19:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423818",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>See ticket description - "In this ticket, ..."



---

archive/issue_comments_423819.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-19T13:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423819",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_423820.json:
```json
{
    "body": "<a id='comment:0'></a>OK, fine",
    "created_at": "2020-11-19T13:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423820",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:0'></a>OK, fine



---

archive/issue_comments_423821.json:
```json
{
    "body": "Changing reviewer from \"Tobias Diez, ...\" to \"Tobias Diez, Dima Pasechnik\"",
    "created_at": "2020-11-19T13:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423821",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "Tobias Diez, ..." to "Tobias Diez, Dima Pasechnik"



---

archive/issue_comments_423822.json:
```json
{
    "body": "<a id='comment:1'></a>Thanks!",
    "created_at": "2020-11-19T17:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423822",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>Thanks!



---

archive/issue_comments_423823.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-22T15:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423823",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_423824.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/22731\" to \"f3b7a9cce247457f07ef42069cdadb3f6409b008\"",
    "created_at": "2020-11-22T15:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423824",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/22731" to "f3b7a9cce247457f07ef42069cdadb3f6409b008"



---

archive/issue_events_059211.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-22T15:06:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-59211"
}
```



---

archive/issue_comments_423825.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2020-11-22T16:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423825",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_423826.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2020-11-22T16:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423826",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_059212.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-22T16:05:36Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-59212"
}
```



---

archive/issue_comments_423827.json:
```json
{
    "body": "<a id='comment:3'></a>\n```\n$ git clean -f -d -x .\n$ ./bootstrap -d\nrm -rf config configure build/make/Makefile-auto.in\nrm -f src/doc/en/installation/*.txt\nrm -rf src/doc/en/reference/spkg/*.rst\nrm -f src/doc/en/reference/repl/*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/arch*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/debian*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/fedora*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/cygwin*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/homebrew*.txt\nsrc/doc/bootstrap:70: installing src/doc/en/reference/spkg/*.rst\nsrc/doc/bootstrap:102: installing src/doc/en/reference/repl/options.txt\nError: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this\nError setting environment variables by sourcing '/Users/vbraun/Sage/src/bin/sage-env';\npossibly contact sage-devel (see http://groups.google.com/group/sage-devel).\n```",
    "created_at": "2020-11-22T16:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423827",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>
```
$ git clean -f -d -x .
$ ./bootstrap -d
rm -rf config configure build/make/Makefile-auto.in
rm -f src/doc/en/installation/*.txt
rm -rf src/doc/en/reference/spkg/*.rst
rm -f src/doc/en/reference/repl/*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/arch*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/debian*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/fedora*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/cygwin*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/homebrew*.txt
src/doc/bootstrap:70: installing src/doc/en/reference/spkg/*.rst
src/doc/bootstrap:102: installing src/doc/en/reference/repl/options.txt
Error: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this
Error setting environment variables by sourcing '/Users/vbraun/Sage/src/bin/sage-env';
possibly contact sage-devel (see http://groups.google.com/group/sage-devel).
```



---

archive/issue_comments_423828.json:
```json
{
    "body": "Changing branch from \"f3b7a9cce247457f07ef42069cdadb3f6409b008\" to \"u/mkoeppe/22731\"",
    "created_at": "2020-11-22T16:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423828",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "f3b7a9cce247457f07ef42069cdadb3f6409b008" to "u/mkoeppe/22731"



---

archive/issue_comments_423829.json:
```json
{
    "body": "<a id='comment:4'></a>I noticed it as well in sage-on-gentoo. I was trying to minimize the patch to `bin/sage` but that got me. This is ultimately caused by the last line of `src/doc/bootstrap`\n\n```\n./sage -advanced > \"$OUTPUT\"\n```\nWhy is this line needed, I am wondering?",
    "created_at": "2020-11-22T20:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423829",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'></a>I noticed it as well in sage-on-gentoo. I was trying to minimize the patch to `bin/sage` but that got me. This is ultimately caused by the last line of `src/doc/bootstrap`

```
./sage -advanced > "$OUTPUT"
```
Why is this line needed, I am wondering?



---

archive/issue_comments_423830.json:
```json
{
    "body": "<a id='comment:115'></a>Replying to [fbissey](#comment%3A114):\n> This is ultimately caused by the last line of `src/doc/bootstrap`\n> \n> ```\n> ./sage -advanced > \"$OUTPUT\"\n> ```\n> Why is this line needed, I am wondering?\n\n\nIt generates part of the documentation.",
    "created_at": "2020-11-22T21:46:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423830",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:115'></a>Replying to [fbissey](#comment%3A114):
> This is ultimately caused by the last line of `src/doc/bootstrap`
> 
> ```
> ./sage -advanced > "$OUTPUT"
> ```
> Why is this line needed, I am wondering?


It generates part of the documentation.



---

archive/issue_comments_423831.json:
```json
{
    "body": "<a id='comment:6'></a>Is at the error point the value of `SAGE_SCRIPTS_DIR` already known?",
    "created_at": "2020-11-22T22:23:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423831",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>Is at the error point the value of `SAGE_SCRIPTS_DIR` already known?



---

archive/issue_comments_423832.json:
```json
{
    "body": "<a id='comment:7'></a>I see how it is used now. And no, `SAGE_SCRIPTS_DIR` or anything like that is not known, we are bootstrapping the documentation, which you should be able to do before running configure.\n\nSome dummy values could be set in the bootstrap script on the assumption you do that on a clean tree.",
    "created_at": "2020-11-22T22:26:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423832",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>I see how it is used now. And no, `SAGE_SCRIPTS_DIR` or anything like that is not known, we are bootstrapping the documentation, which you should be able to do before running configure.

Some dummy values could be set in the bootstrap script on the assumption you do that on a clean tree.



---

archive/issue_comments_423833.json:
```json
{
    "body": "<a id='comment:8'></a>The problem is solved in #30013, so I need to move some of the changes to this ticket.",
    "created_at": "2020-11-22T22:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423833",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>The problem is solved in #30013, so I need to move some of the changes to this ticket.



---

archive/issue_comments_423834.json:
```json
{
    "body": "<a id='comment:119'></a>Replying to [mkoeppe](#comment%3A118):\n> The problem is solved in #30013, so I need to move some of the changes to this ticket.\n\n\nYes, it looks like it would help.",
    "created_at": "2020-11-22T22:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423834",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:119'></a>Replying to [mkoeppe](#comment%3A118):
> The problem is solved in #30013, so I need to move some of the changes to this ticket.


Yes, it looks like it would help.



---

archive/issue_comments_423835.json:
```json
{
    "body": "<a id='comment:0'></a>I will work on this after the next beta comes out.",
    "created_at": "2020-11-22T22:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423835",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>I will work on this after the next beta comes out.



---

archive/issue_comments_423836.json:
```json
{
    "body": "<a id='comment:1'></a>Anyhow, just in case, here one could do\n\n```diff\n--- a/bootstrap\n+++ b/bootstrap\n@@ -113,6 +113,8 @@ SAGE_SPKG_CONFIGURE_$(echo ${pkgname} | tr '[a-z]' '[A-Z]')\"\n     # ONLY stderr, and to re-output the results back to stderr leaving\n     # stdout alone. Basically we swap the two descriptors using a\n     # third, filter, and then swap them back.\n+    touch src/bin/sage-env-config\n+    SAGE_SCRIPTS_DIR=./src/bin\n     BOOTSTRAP_QUIET=\"${BOOTSTRAP_QUIET}\" \\\n     SAGE_ROOT=\"$SAGE_ROOT\" \\\n     src/doc/bootstrap && \\\n```\nand it all goes through.",
    "created_at": "2020-11-22T22:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423836",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>Anyhow, just in case, here one could do

```diff
--- a/bootstrap
+++ b/bootstrap
@@ -113,6 +113,8 @@ SAGE_SPKG_CONFIGURE_$(echo ${pkgname} | tr '[a-z]' '[A-Z]')"
     # ONLY stderr, and to re-output the results back to stderr leaving
     # stdout alone. Basically we swap the two descriptors using a
     # third, filter, and then swap them back.
+    touch src/bin/sage-env-config
+    SAGE_SCRIPTS_DIR=./src/bin
     BOOTSTRAP_QUIET="${BOOTSTRAP_QUIET}" \
     SAGE_ROOT="$SAGE_ROOT" \
     src/doc/bootstrap && \
```
and it all goes through.



---

archive/issue_comments_423837.json:
```json
{
    "body": "Changing commit from \"f3b7a9cce247457f07ef42069cdadb3f6409b008\" to \"1fe77a819d2477bf4b53d228388a4ff3e2c7c45d\"",
    "created_at": "2020-11-23T02:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423837",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f3b7a9cce247457f07ef42069cdadb3f6409b008" to "1fe77a819d2477bf4b53d228388a4ff3e2c7c45d"



---

archive/issue_comments_423838.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-23T02:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423838",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423839.json:
```json
{
    "body": "<a id='comment:3'></a>Cherry-picked a commit from the original branch of #30888, where it was observed that\n`SAGE_SCRIPTS_DIR` is currently unused because the feature introduced in #25486 (\"Discover `SAGE_SCRIPTS_DIR` to make `$SAGE_LOCAL/bin/sage` work from any directory, in an environment without `SAGE_*` variables\") was killed by #30128.\n(#30888 will re-introduce this feature using a different mechanism.)",
    "created_at": "2020-11-23T02:09:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423839",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>Cherry-picked a commit from the original branch of #30888, where it was observed that
`SAGE_SCRIPTS_DIR` is currently unused because the feature introduced in #25486 ("Discover `SAGE_SCRIPTS_DIR` to make `$SAGE_LOCAL/bin/sage` work from any directory, in an environment without `SAGE_*` variables") was killed by #30128.
(#30888 will re-introduce this feature using a different mechanism.)



---

archive/issue_comments_423840.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-23T02:09:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423840",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_423841.json:
```json
{
    "body": "Changing commit from \"1fe77a819d2477bf4b53d228388a4ff3e2c7c45d\" to \"38eebc3d9f790c81b8ffcc963cf2513184c9ae6a\"",
    "created_at": "2020-11-25T00:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423841",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1fe77a819d2477bf4b53d228388a4ff3e2c7c45d" to "38eebc3d9f790c81b8ffcc963cf2513184c9ae6a"



---

archive/issue_comments_423842.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-25T00:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423842",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_423843.json:
```json
{
    "body": "<a id='comment:5'></a>Merged the latest beta. Ready for another round of review.",
    "created_at": "2020-11-25T00:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423843",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Merged the latest beta. Ready for another round of review.



---

archive/issue_comments_423844.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-25T19:12:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423844",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_423845.json:
```json
{
    "body": "<a id='comment:6'></a>this works, after \"git clean\" as above, too.",
    "created_at": "2020-11-25T19:12:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423845",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>this works, after "git clean" as above, too.



---

archive/issue_comments_423846.json:
```json
{
    "body": "<a id='comment:7'></a>Thanks!",
    "created_at": "2020-11-25T19:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423846",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Thanks!



---

archive/issue_events_059213.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-05T22:13:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-59213"
}
```



---

archive/issue_comments_423847.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/22731\" to \"38eebc3d9f790c81b8ffcc963cf2513184c9ae6a\"",
    "created_at": "2020-12-05T22:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423847",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/22731" to "38eebc3d9f790c81b8ffcc963cf2513184c9ae6a"



---

archive/issue_comments_423848.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-12-05T22:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-423848",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
