# Issue 22731: Replace "$SAGE_LOCAL/bin" by more specific variables to make Sage easier to package, use in venvs

archive/issues_022494.json:
```json
{
    "body": "Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.\n\n**1a.** Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n\n**1b.** (Wishlist item:) Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n\n**2a.** Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). As proposed in #29013, we use the variable `SAGE_VENV` for this, so these scripts would be referred to as `$SAGE_VENV/bin/sage-eval` etc.\n\n**2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.\n\n**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)\n\n**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (using `$SAGE_VENV/bin` directly instead of going through `SAGE_VENV_SCRIPTS_DIR`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n\nWe also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.\n\n\nSee also:\n- https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n- #30013 `src/bin/sage-env`: Make sure `$SAGE_VENV/bin` is at the beginning of the PATH\n- #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n- #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv\n\nCC:  @mkoeppe @jhpalmieri @orlitzky @tobiasdiez @isuruf @antonio-rojas @mwageringel\n\nBranch/Commit: 38eebc3d9f790c81b8ffcc963cf2513184c9ae6a\n\nReviewer: Tobias Diez, Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nDependencies: #29951\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/22731\n\n",
    "closed_at": "2020-12-05T22:13:22Z",
    "created_at": "2017-03-31T20:38:14Z",
    "labels": [
        "component: porting"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Replace \"$SAGE_LOCAL/bin\" by more specific variables to make Sage easier to package, use in venvs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22731",
    "user": "https://github.com/tobihan"
}
```
Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.

**1a.** Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.

**1b.** (Wishlist item:) Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 

**2a.** Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). As proposed in #29013, we use the variable `SAGE_VENV` for this, so these scripts would be referred to as `$SAGE_VENV/bin/sage-eval` etc.

**2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.

**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)

**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (using `$SAGE_VENV/bin` directly instead of going through `SAGE_VENV_SCRIPTS_DIR`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.

We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.


See also:
- https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
- #30013 `src/bin/sage-env`: Make sure `$SAGE_VENV/bin` is at the beginning of the PATH
- #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
- #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv

CC:  @mkoeppe @jhpalmieri @orlitzky @tobiasdiez @isuruf @antonio-rojas @mwageringel

Branch/Commit: 38eebc3d9f790c81b8ffcc963cf2513184c9ae6a

Reviewer: Tobias Diez, Dima Pasechnik

Author: Matthias Koeppe

Dependencies: #29951

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/22731





---

archive/issue_comments_418127.json:
```json
{
    "body": "Changing branch from \"\" to \"u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_\"",
    "created_at": "2017-03-31T20:49:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418127",
    "user": "https://github.com/tobihan"
}
```

Changing branch from "" to "u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_"



---

archive/issue_comments_418128.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-\n+Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.\n+    \n+SAGE_SCRIPTS_DIR is already being defined in sage-env. With these changes Linux distros can install sage to /usr/bin and the other scripts somewhere else.\n``````\n",
    "created_at": "2017-03-31T20:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418128",
    "user": "https://github.com/tobihan"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-
+Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.
+    
+SAGE_SCRIPTS_DIR is already being defined in sage-env. With these changes Linux distros can install sage to /usr/bin and the other scripts somewhere else.
``````




---

archive/issue_events_075141.json:
```json
{
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "label": "minor",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75141"
}
```



---

archive/issue_comments_418129.json:
```json
{
    "body": "Changing author from \"\" to \"Tobias Hanen\"",
    "created_at": "2017-03-31T20:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418129",
    "user": "https://github.com/tobihan"
}
```

Changing author from "" to "Tobias Hanen"



---

archive/issue_events_075142.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "rename": {
        "from": "Allow installation of sage scripts to an arbotrary location by using SAGE_SCRIPTS_DIR.",
        "to": "Allow installation of sage scripts to an arbitrary location by using SAGE_SCRIPTS_DIR."
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75142"
}
```



---

archive/issue_comments_418130.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-31T20:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418130",
    "user": "https://github.com/tobihan"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_418131.json:
```json
{
    "body": "Changing commit from \"\" to \"6ae9bf199cc52f40a59913222876bd6d98ffd011\"",
    "created_at": "2017-03-31T20:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418131",
    "user": "https://github.com/tobihan"
}
```

Changing commit from "" to "6ae9bf199cc52f40a59913222876bd6d98ffd011"



---

archive/issue_comments_418132.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[6ae9bf1](https://github.com/sagemath/sagetrac-mirror/commit/6ae9bf199cc52f40a59913222876bd6d98ffd011)|`Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.`|",
    "created_at": "2017-03-31T20:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418132",
    "user": "https://github.com/tobihan"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[6ae9bf1](https://github.com/sagemath/sagetrac-mirror/commit/6ae9bf199cc52f40a59913222876bd6d98ffd011)|`Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.`|



---

archive/issue_events_075143.json:
```json
{
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "label": "component: scripts",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75143"
}
```



---

archive/issue_comments_418133.json:
```json
{
    "body": "Changing author from \"Tobias Hanen\" to \"Tobias Hansen\"",
    "created_at": "2017-03-31T20:55:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418133",
    "user": "https://github.com/tobihan"
}
```

Changing author from "Tobias Hanen" to "Tobias Hansen"



---

archive/issue_comments_418134.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe name `SAGE_SCRIPTS_DIR` refers to the scripts of Sage itself. It is only meant to find `sage-env` and friends, nothing more.\n\nNow, if you want a invent a *new* variable with the purpose of defining the bindir (to replace `SAGE_LOCAL/bin`), that's fine. Just don't call it `SAGE_SCRIPTS_DIR`.",
    "created_at": "2017-04-01T10:44:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418134",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
The name `SAGE_SCRIPTS_DIR` refers to the scripts of Sage itself. It is only meant to find `sage-env` and friends, nothing more.

Now, if you want a invent a *new* variable with the purpose of defining the bindir (to replace `SAGE_LOCAL/bin`), that's fine. Just don't call it `SAGE_SCRIPTS_DIR`.



---

archive/issue_comments_418135.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-04-01T10:44:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418135",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_075144.json:
```json
{
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "label": "component: scripts",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75144"
}
```



---

archive/issue_comments_418136.json:
```json
{
    "body": "Changing branch from \"u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_\" to \"u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_\"",
    "created_at": "2018-04-01T20:51:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418136",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_" to "u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_"



---

archive/issue_comments_418137.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|\n|[502f6ab](https://github.com/sagemath/sagetrac-mirror/commit/502f6abb14c4088bc6fe9cd9610400725af93c54)|`Rename SAGE_SCRIPTS_DIR to SAGE_BIN in places where we are not looking for sage-env's friends`|",
    "created_at": "2018-04-01T21:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418137",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
|[502f6ab](https://github.com/sagemath/sagetrac-mirror/commit/502f6abb14c4088bc6fe9cd9610400725af93c54)|`Rename SAGE_SCRIPTS_DIR to SAGE_BIN in places where we are not looking for sage-env's friends`|



---

archive/issue_comments_418138.json:
```json
{
    "body": "Changing commit from \"6ae9bf199cc52f40a59913222876bd6d98ffd011\" to \"502f6abb14c4088bc6fe9cd9610400725af93c54\"",
    "created_at": "2018-04-01T21:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418138",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6ae9bf199cc52f40a59913222876bd6d98ffd011" to "502f6abb14c4088bc6fe9cd9610400725af93c54"



---

archive/issue_comments_418139.json:
```json
{
    "body": "<a id='comment:7'></a>\nI have not had a chance to try this out locally (as my Sage is rebuilding.) Is this more or less what you had in mind jdemeyer?",
    "created_at": "2018-04-01T21:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418139",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'></a>
I have not had a chance to try this out locally (as my Sage is rebuilding.) Is this more or less what you had in mind jdemeyer?



---

archive/issue_comments_418140.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-01T21:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418140",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418141.json:
```json
{
    "body": "Changing author from \"Tobias Hansen\" to \"Tobias Hansen, Julian R\u00fcth\"",
    "created_at": "2018-04-01T21:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418141",
    "user": "https://github.com/saraedum"
}
```

Changing author from "Tobias Hansen" to "Tobias Hansen, Julian Rüth"



---

archive/issue_comments_418142.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[07649aa](https://github.com/sagemath/sagetrac-mirror/commit/07649aa427423892463eda682346cdc2f5f93296)|`Replace more occurences of SAGE_LOCAL/bin with SAGE_BIN`|\n|[7b6d51f](https://github.com/sagemath/sagetrac-mirror/commit/7b6d51fce967cea3a2d9163561925bca251cf6a3)|`Fixed typos related to SAGE_BIN`|",
    "created_at": "2018-04-02T08:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418142",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[07649aa](https://github.com/sagemath/sagetrac-mirror/commit/07649aa427423892463eda682346cdc2f5f93296)|`Replace more occurences of SAGE_LOCAL/bin with SAGE_BIN`|
|[7b6d51f](https://github.com/sagemath/sagetrac-mirror/commit/7b6d51fce967cea3a2d9163561925bca251cf6a3)|`Fixed typos related to SAGE_BIN`|



---

archive/issue_comments_418143.json:
```json
{
    "body": "Changing commit from \"502f6abb14c4088bc6fe9cd9610400725af93c54\" to \"7b6d51fce967cea3a2d9163561925bca251cf6a3\"",
    "created_at": "2018-04-02T08:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418143",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "502f6abb14c4088bc6fe9cd9610400725af93c54" to "7b6d51fce967cea3a2d9163561925bca251cf6a3"



---

archive/issue_comments_418144.json:
```json
{
    "body": "<a id='comment:9'></a>\nIt makes no sense to add both `$SAGE_LOCAL/bin` and `$SAGE_BIN` to the `PATH`. The whole point should be to replace `$SAGE_LOCAL/bin` by `$SAGE_BIN`.",
    "created_at": "2018-04-02T08:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418144",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
It makes no sense to add both `$SAGE_LOCAL/bin` and `$SAGE_BIN` to the `PATH`. The whole point should be to replace `$SAGE_LOCAL/bin` by `$SAGE_BIN`.



---

archive/issue_comments_418145.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[b91dbcb](https://github.com/sagemath/sagetrac-mirror/commit/b91dbcb58ff20256f37f3a73f9c97713240abcd9)|`Drop SAGE_LOCAL/bin from PATH`|",
    "created_at": "2018-04-02T08:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418145",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[b91dbcb](https://github.com/sagemath/sagetrac-mirror/commit/b91dbcb58ff20256f37f3a73f9c97713240abcd9)|`Drop SAGE_LOCAL/bin from PATH`|



---

archive/issue_comments_418146.json:
```json
{
    "body": "Changing commit from \"7b6d51fce967cea3a2d9163561925bca251cf6a3\" to \"b91dbcb58ff20256f37f3a73f9c97713240abcd9\"",
    "created_at": "2018-04-02T08:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418146",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7b6d51fce967cea3a2d9163561925bca251cf6a3" to "b91dbcb58ff20256f37f3a73f9c97713240abcd9"



---

archive/issue_comments_418147.json:
```json
{
    "body": "<a id='comment:11'></a>\n1. You need to define `SAGE_BIN` somewhere in `sage-env`\n\n2. This conflicts with #25056",
    "created_at": "2018-04-02T08:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418147",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>
1. You need to define `SAGE_BIN` somewhere in `sage-env`

2. This conflicts with #25056



---

archive/issue_comments_418148.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-04-02T08:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418148",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_075145.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "rename": {
        "from": "Allow installation of sage scripts to an arbitrary location by using SAGE_SCRIPTS_DIR.",
        "to": "New environment variable SAGE_BIN"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75145"
}
```



---

archive/issue_comments_418149.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.\n+Use `SAGE_BIN` in more places and define a fallback in `env.py`.\n     \n-SAGE_SCRIPTS_DIR is already being defined in sage-env. With these changes Linux distros can install sage to /usr/bin and the other scripts somewhere else.\n+With these changes Linux distros can install sage to `/usr/bin` and the other scripts somewhere else.\n``````\n",
    "created_at": "2018-04-02T08:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418149",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.
+Use `SAGE_BIN` in more places and define a fallback in `env.py`.
     
-SAGE_SCRIPTS_DIR is already being defined in sage-env. With these changes Linux distros can install sage to /usr/bin and the other scripts somewhere else.
+With these changes Linux distros can install sage to `/usr/bin` and the other scripts somewhere else.
``````




---

archive/issue_comments_418150.json:
```json
{
    "body": "Changing commit from \"b91dbcb58ff20256f37f3a73f9c97713240abcd9\" to \"2d4fa67978250cd7729b3c6904c158b54b5f9f41\"",
    "created_at": "2018-04-03T13:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418150",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b91dbcb58ff20256f37f3a73f9c97713240abcd9" to "2d4fa67978250cd7729b3c6904c158b54b5f9f41"



---

archive/issue_comments_418151.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[2d4fa67](https://github.com/sagemath/sagetrac-mirror/commit/2d4fa67978250cd7729b3c6904c158b54b5f9f41)|`Set SAGE_BIN in sage-env`|",
    "created_at": "2018-04-03T13:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418151",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[2d4fa67](https://github.com/sagemath/sagetrac-mirror/commit/2d4fa67978250cd7729b3c6904c158b54b5f9f41)|`Set SAGE_BIN in sage-env`|



---

archive/issue_comments_418152.json:
```json
{
    "body": "<a id='comment:13'></a>\nThanks for the feedback. I do not really understand how these scripts interact. Did you mean something like this?\n\nWhat is your point when it comes to the conflict with #25056. I guess whoever gets merged last needs to fix conflicts? Or is there something more substantial that needs to be taken into account?",
    "created_at": "2018-04-03T13:03:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418152",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:13'></a>
Thanks for the feedback. I do not really understand how these scripts interact. Did you mean something like this?

What is your point when it comes to the conflict with #25056. I guess whoever gets merged last needs to fix conflicts? Or is there something more substantial that needs to be taken into account?



---

archive/issue_comments_418153.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-03T13:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418153",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418154.json:
```json
{
    "body": "Changing work_issues from \"\" to \"needs more testing\"",
    "created_at": "2018-04-03T13:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418154",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "" to "needs more testing"



---

archive/issue_comments_418155.json:
```json
{
    "body": "<a id='comment:15'></a>\n[my Sage is rebuilding as always, so I could not test this yet.]",
    "created_at": "2018-04-03T13:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418155",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:15'></a>
[my Sage is rebuilding as always, so I could not test this yet.]



---

archive/issue_comments_418156.json:
```json
{
    "body": "Changing work_issues from \"needs more testing\" to \"rebase, test\"",
    "created_at": "2018-04-05T09:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418156",
    "user": "https://github.com/jdemeyer"
}
```

Changing work_issues from "needs more testing" to "rebase, test"



---

archive/issue_comments_418157.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-04-05T09:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418157",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_418158.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [saraedum](#comment%3A13):\n> What is your point when it comes to the conflict with #25056. I guess whoever gets merged last needs to fix conflicts? Or is there something more substantial that needs to be taken into account?\n\n\nIn this case, #25056 is a blocker so it will certainly take priority over this ticket. So it might be a good idea to rebase on top of #25056.",
    "created_at": "2018-04-05T09:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418158",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Replying to [saraedum](#comment%3A13):
> What is your point when it comes to the conflict with #25056. I guess whoever gets merged last needs to fix conflicts? Or is there something more substantial that needs to be taken into account?


In this case, #25056 is a blocker so it will certainly take priority over this ticket. So it might be a good idea to rebase on top of #25056.



---

archive/issue_comments_418159.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#25056\"",
    "created_at": "2018-04-05T09:02:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418159",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#25056"



---

archive/issue_comments_418160.json:
```json
{
    "body": "<a id='comment:17'></a>\n1. `SAGE_BIN` should be set to the `--bindir` determined by `./configure`. Use `src/bin/sage-env-config.in` to implement this.\n\n2. I don't think that it should be allowed to override `SAGE_BIN` at runtime, it should be set unconditionally to the value determined by `./configure`. This would be analogous to `SAGE_LOCAL`.",
    "created_at": "2018-04-05T09:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418160",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
1. `SAGE_BIN` should be set to the `--bindir` determined by `./configure`. Use `src/bin/sage-env-config.in` to implement this.

2. I don't think that it should be allowed to override `SAGE_BIN` at runtime, it should be set unconditionally to the value determined by `./configure`. This would be analogous to `SAGE_LOCAL`.



---

archive/issue_comments_418161.json:
```json
{
    "body": "Changing commit from \"2d4fa67978250cd7729b3c6904c158b54b5f9f41\" to \"5b3d0541a77f9b69453b3f87e628172c7c402d2f\"",
    "created_at": "2018-04-05T14:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418161",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2d4fa67978250cd7729b3c6904c158b54b5f9f41" to "5b3d0541a77f9b69453b3f87e628172c7c402d2f"



---

archive/issue_comments_418162.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[542dbb6](https://github.com/sagemath/sagetrac-mirror/commit/542dbb62e91da24aa5c522525e4fdce70914c3bc)|`Do not allow resetting SAGE_BIN at runtime`|\n|[5b3d054](https://github.com/sagemath/sagetrac-mirror/commit/5b3d0541a77f9b69453b3f87e628172c7c402d2f)|`Fix another occurrence for SAGE_LOCAL/bin`|",
    "created_at": "2018-04-05T14:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418162",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[542dbb6](https://github.com/sagemath/sagetrac-mirror/commit/542dbb62e91da24aa5c522525e4fdce70914c3bc)|`Do not allow resetting SAGE_BIN at runtime`|
|[5b3d054](https://github.com/sagemath/sagetrac-mirror/commit/5b3d0541a77f9b69453b3f87e628172c7c402d2f)|`Fix another occurrence for SAGE_LOCAL/bin`|



---

archive/issue_comments_418163.json:
```json
{
    "body": "Changing work_issues from \"rebase, test\" to \"test with and without bindir, test relocation\"",
    "created_at": "2018-04-05T14:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418163",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "rebase, test" to "test with and without bindir, test relocation"



---

archive/issue_comments_418164.json:
```json
{
    "body": "Changing author from \"Tobias Hansen, Julian R\u00fcth\" to \"Tobias Hansen, Julian R\u00fcth, fbissey\"",
    "created_at": "2018-04-05T20:15:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418164",
    "user": "https://github.com/kiwifb"
}
```

Changing author from "Tobias Hansen, Julian Rüth" to "Tobias Hansen, Julian Rüth, fbissey"



---

archive/issue_comments_418165.json:
```json
{
    "body": "Changing author from \"Tobias Hansen, Julian R\u00fcth, fbissey\" to \"Tobias Hansen, Julian R\u00fcth, Fran\u00e7ois Bissey\"",
    "created_at": "2018-04-06T10:13:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418165",
    "user": "https://github.com/saraedum"
}
```

Changing author from "Tobias Hansen, Julian Rüth, fbissey" to "Tobias Hansen, Julian Rüth, François Bissey"



---

archive/issue_comments_418166.json:
```json
{
    "body": "<a id='comment:22'></a>\nDarn I had filled the wrong field when I wanted to \"subscribe\" to this ticket. \n\nI am not hot to create a new variable especially for calling stuff that should by and large be in the `PATH`. In my opinion, for sage-on-distro, it is even better if there is nothing in front of the name of the executables. It should just work unless you mess your environment and I am not sure we should protect the end users to that level.",
    "created_at": "2018-04-06T10:21:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418166",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:22'></a>
Darn I had filled the wrong field when I wanted to "subscribe" to this ticket. 

I am not hot to create a new variable especially for calling stuff that should by and large be in the `PATH`. In my opinion, for sage-on-distro, it is even better if there is nothing in front of the name of the executables. It should just work unless you mess your environment and I am not sure we should protect the end users to that level.



---

archive/issue_comments_418167.json:
```json
{
    "body": "Changing author from \"Tobias Hansen, Julian R\u00fcth, Fran\u00e7ois Bissey\" to \"Tobias Hansen, Julian R\u00fcth\"",
    "created_at": "2018-04-06T10:21:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418167",
    "user": "https://github.com/kiwifb"
}
```

Changing author from "Tobias Hansen, Julian Rüth, François Bissey" to "Tobias Hansen, Julian Rüth"



---

archive/issue_comments_418168.json:
```json
{
    "body": "<a id='comment:23'></a>\nfbissey: So you are saying that you want to have all the `sage-*` scripts in the PATH? I think it's reasonable for some distros that they want to hide these. I can imagine that one reason to get them off the path is that some distros want MAN pages for everything that's on the PATH. Also not all of these scripts have a nice `--help`/`-h` implemented.",
    "created_at": "2018-04-06T11:00:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418168",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:23'></a>
fbissey: So you are saying that you want to have all the `sage-*` scripts in the PATH? I think it's reasonable for some distros that they want to hide these. I can imagine that one reason to get them off the path is that some distros want MAN pages for everything that's on the PATH. Also not all of these scripts have a nice `--help`/`-h` implemented.



---

archive/issue_comments_418169.json:
```json
{
    "body": "<a id='comment:24'></a>\nI see. But it feels like it is more than just the sage-* scripts that are touched here. In `src/sage/graphs/lovasz_theta.py` this is not the path to a sage script but to an executable from an optional package for example. So you end up having to separate the scripts from the normal commands that are installed in `SAGE_LOCAL/bin`. I don't see this ticket currently doing that.",
    "created_at": "2018-04-06T11:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418169",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:24'></a>
I see. But it feels like it is more than just the sage-* scripts that are touched here. In `src/sage/graphs/lovasz_theta.py` this is not the path to a sage script but to an executable from an optional package for example. So you end up having to separate the scripts from the normal commands that are installed in `SAGE_LOCAL/bin`. I don't see this ticket currently doing that.



---

archive/issue_comments_418170.json:
```json
{
    "body": "<a id='comment:25'></a>\nYou're right. I'll try to change the scope of `SAGE_BIN`.",
    "created_at": "2018-04-06T11:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418170",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:25'></a>
You're right. I'll try to change the scope of `SAGE_BIN`.



---

archive/issue_comments_418171.json:
```json
{
    "body": "Changing work_issues from \"test with and without bindir, test relocation\" to \"test with and without bindir, test relocation, change scope of SAGE_BIN\"",
    "created_at": "2018-04-06T11:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418171",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "test with and without bindir, test relocation" to "test with and without bindir, test relocation, change scope of SAGE_BIN"



---

archive/issue_comments_418172.json:
```json
{
    "body": "<a id='comment:27'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------|\n|[3224b7c](https://github.com/sagemath/sagetrac-mirror/commit/3224b7c15e0009b7b1bec0f9c883469b2d6ef73f)|`Merge remote-tracking branch 'trac/develop' into t/22731/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_`|",
    "created_at": "2018-04-11T23:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418172",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------|
|[3224b7c](https://github.com/sagemath/sagetrac-mirror/commit/3224b7c15e0009b7b1bec0f9c883469b2d6ef73f)|`Merge remote-tracking branch 'trac/develop' into t/22731/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_`|



---

archive/issue_comments_418173.json:
```json
{
    "body": "Changing commit from \"5b3d0541a77f9b69453b3f87e628172c7c402d2f\" to \"3224b7c15e0009b7b1bec0f9c883469b2d6ef73f\"",
    "created_at": "2018-04-11T23:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418173",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5b3d0541a77f9b69453b3f87e628172c7c402d2f" to "3224b7c15e0009b7b1bec0f9c883469b2d6ef73f"



---

archive/issue_comments_418174.json:
```json
{
    "body": "Changing dependencies from \"#25056\" to \"#25056, #20382\"",
    "created_at": "2018-04-12T00:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418174",
    "user": "https://github.com/saraedum"
}
```

Changing dependencies from "#25056" to "#25056, #20382"



---

archive/issue_comments_418175.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2018-04-12T00:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418175",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_418176.json:
```json
{
    "body": "<a id='comment:28'></a>\nI wonder whether we should do the following:\n\n* Introduce `$SAGE_BIN` as the place where `sage` and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --scriptsdir`.\n* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.)\n\nAlternatively the second point could be replaced by the following two:\n\n* Introduce `$SAGE_LIBEXEC`. Configurable through `./configure --libexecdir`, default `$SAGE_LOCAL/libexec/`. (See https://www.gnu.org/prep/standards/html_node/Directory-Variables.html.)\n* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LIBEXEC/sage/`. To keep backwards compatibility, we need the default to be `$SAGE_LOCAL/bin` if `$SAGE_LOCAL/bin/sage-env` exists.\n\nThe `$SAGE_SCRIPTS_DIR` fallback is ugly of course. It means that Sage installs vary depending on whether they are clean installs (after this proposal) or upgrades from before. That's unfortunate but we have that already because SPKGs do not uninstall completely. (Or do they by now?) Anyway, I think it makes sense to install things into standard places and I guess it could make the life of packagers easier.\n\nWhat do you think?",
    "created_at": "2018-04-12T00:59:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418176",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:28'></a>
I wonder whether we should do the following:

* Introduce `$SAGE_BIN` as the place where `sage` and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --scriptsdir`.
* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.)

Alternatively the second point could be replaced by the following two:

* Introduce `$SAGE_LIBEXEC`. Configurable through `./configure --libexecdir`, default `$SAGE_LOCAL/libexec/`. (See https://www.gnu.org/prep/standards/html_node/Directory-Variables.html.)
* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LIBEXEC/sage/`. To keep backwards compatibility, we need the default to be `$SAGE_LOCAL/bin` if `$SAGE_LOCAL/bin/sage-env` exists.

The `$SAGE_SCRIPTS_DIR` fallback is ugly of course. It means that Sage installs vary depending on whether they are clean installs (after this proposal) or upgrades from before. That's unfortunate but we have that already because SPKGs do not uninstall completely. (Or do they by now?) Anyway, I think it makes sense to install things into standard places and I guess it could make the life of packagers easier.

What do you think?



---

archive/issue_comments_418177.json:
```json
{
    "body": "<a id='comment:29'></a>\nWell, I don't use the `configure` script but that sound relatively reasonable. I personally ship stuff like `sage-env` in `/etc` where I feel it belongs but that may be hard at this stage.\n\nUninstall is still being worked on by Erik, but it cannot be helped that there may be a hard block upgrading from a certain version of sage once those things are in place.",
    "created_at": "2018-04-12T01:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418177",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:29'></a>
Well, I don't use the `configure` script but that sound relatively reasonable. I personally ship stuff like `sage-env` in `/etc` where I feel it belongs but that may be hard at this stage.

Uninstall is still being worked on by Erik, but it cannot be helped that there may be a hard block upgrading from a certain version of sage once those things are in place.



---

archive/issue_events_075146.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "rename": {
        "from": "New environment variable SAGE_BIN",
        "to": "Use SAGE_BIN an SAGE_SCRIPTS_DIR to make Sage easier to package"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75146"
}
```



---

archive/issue_comments_418178.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Use `SAGE_BIN` in more places and define a fallback in `env.py`.\n-    \n-With these changes Linux distros can install sage to `/usr/bin` and the other scripts somewhere else.\n+* Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n+* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n+* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.) \n``````\n",
    "created_at": "2018-04-29T17:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418178",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Use `SAGE_BIN` in more places and define a fallback in `env.py`.
-    
-With these changes Linux distros can install sage to `/usr/bin` and the other scripts somewhere else.
+* Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
+* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
+* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.) 
``````




---

archive/issue_comments_418179.json:
```json
{
    "body": "Changing work_issues from \"test with and without bindir, test relocation, change scope of SAGE_BIN\" to \"\"",
    "created_at": "2018-04-29T17:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418179",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "test with and without bindir, test relocation, change scope of SAGE_BIN" to ""



---

archive/issue_comments_418180.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2018-04-29T17:58:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418180",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_418181.json:
```json
{
    "body": "<a id='comment:31'></a>\nThanks for the feedback. I think I prefer the non-breaking change at the moment.",
    "created_at": "2018-04-29T17:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418181",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:31'></a>
Thanks for the feedback. I think I prefer the non-breaking change at the moment.



---

archive/issue_comments_418182.json:
```json
{
    "body": "<a id='comment:32'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|\n|[c897d2b](https://github.com/sagemath/sagetrac-mirror/commit/c897d2b9e3e2a7d4a2220af60250f01b9b419746)|`A first draft of using SAGE_BIN and SAGE_SCRIPTS_DIR differently`|",
    "created_at": "2018-04-29T18:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418182",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|
|[c897d2b](https://github.com/sagemath/sagetrac-mirror/commit/c897d2b9e3e2a7d4a2220af60250f01b9b419746)|`A first draft of using SAGE_BIN and SAGE_SCRIPTS_DIR differently`|



---

archive/issue_comments_418183.json:
```json
{
    "body": "Changing commit from \"3224b7c15e0009b7b1bec0f9c883469b2d6ef73f\" to \"c897d2b9e3e2a7d4a2220af60250f01b9b419746\"",
    "created_at": "2018-04-29T18:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418183",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3224b7c15e0009b7b1bec0f9c883469b2d6ef73f" to "c897d2b9e3e2a7d4a2220af60250f01b9b419746"



---

archive/issue_comments_418184.json:
```json
{
    "body": "Changing work_issues from \"\" to \"use features of 20382\"",
    "created_at": "2018-04-29T18:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418184",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "" to "use features of 20382"



---

archive/issue_comments_418185.json:
```json
{
    "body": "<a id='comment:34'></a>\nI think I want to the binaries differently if they are non-optional dependencies. So I think this should not be part of this ticket.",
    "created_at": "2018-04-29T18:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418185",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:34'></a>
I think I want to the binaries differently if they are non-optional dependencies. So I think this should not be part of this ticket.



---

archive/issue_comments_418186.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,2 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n-* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.) \n``````\n",
    "created_at": "2018-04-29T18:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418186",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,2 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
-* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.) 
``````




---

archive/issue_comments_418187.json:
```json
{
    "body": "Changing work_issues from \"use features of 20382\" to \"\"",
    "created_at": "2018-04-29T18:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418187",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "use features of 20382" to ""



---

archive/issue_comments_418188.json:
```json
{
    "body": "<a id='comment:35'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[5e59744](https://github.com/sagemath/sagetrac-mirror/commit/5e597441a4435e2033100611512113095834bdbb)|`Add configure switch for scriptsdir`|",
    "created_at": "2018-04-29T19:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418188",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[5e59744](https://github.com/sagemath/sagetrac-mirror/commit/5e597441a4435e2033100611512113095834bdbb)|`Add configure switch for scriptsdir`|



---

archive/issue_comments_418189.json:
```json
{
    "body": "Changing commit from \"c897d2b9e3e2a7d4a2220af60250f01b9b419746\" to \"5e597441a4435e2033100611512113095834bdbb\"",
    "created_at": "2018-04-29T19:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418189",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c897d2b9e3e2a7d4a2220af60250f01b9b419746" to "5e597441a4435e2033100611512113095834bdbb"



---

archive/issue_comments_418190.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-29T19:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418190",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418191.json:
```json
{
    "body": "Changing work_issues from \"\" to \"requires testing\"",
    "created_at": "2018-04-29T19:00:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418191",
    "user": "https://github.com/saraedum"
}
```

Changing work_issues from "" to "requires testing"



---

archive/issue_comments_418192.json:
```json
{
    "body": "<a id='comment:37'></a>\nThis still needs quite some testing. I just want to see what the patchbot thinks about this.",
    "created_at": "2018-04-29T19:00:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418192",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:37'></a>
This still needs quite some testing. I just want to see what the patchbot thinks about this.



---

archive/issue_events_075147.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "rename": {
        "from": "Use SAGE_BIN an SAGE_SCRIPTS_DIR to make Sage easier to package",
        "to": "Use SAGE_BIN and SAGE_SCRIPTS_DIR to make Sage easier to package"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75147"
}
```



---

archive/issue_comments_418193.json:
```json
{
    "body": "Changing commit from \"5e597441a4435e2033100611512113095834bdbb\" to \"6b1ec2e573978815d770f0baff01bffb9ec7d2e4\"",
    "created_at": "2018-05-01T16:16:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418193",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5e597441a4435e2033100611512113095834bdbb" to "6b1ec2e573978815d770f0baff01bffb9ec7d2e4"



---

archive/issue_comments_418194.json:
```json
{
    "body": "<a id='comment:39'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[be3a0f7](https://github.com/sagemath/sagetrac-mirror/commit/be3a0f733950345bee7f4237db20558e1a06cefc)|`The docbuild crashes happen during an os.fork to spawn tachyon`|\n|[7d85dc7](https://github.com/sagemath/sagetrac-mirror/commit/7d85dc796c58c3de57401bc22d3587b94e205091)|`Something related to the sphinxbuild seems to be leaking memory`|\n|[50898fe](https://github.com/sagemath/sagetrac-mirror/commit/50898feaef6499180ab2ec5b21e4b6b18032a77d)|`Try to build-from-scratch on GitLab's underpowered CI machines`|\n|[95c6275](https://github.com/sagemath/sagetrac-mirror/commit/95c6275adac26be537c11a084114d8a8dc576392)|`Comment on fork logic in docbuilding`|\n|[c0574ca](https://github.com/sagemath/sagetrac-mirror/commit/c0574ca897321c56927e9ce5004fd2f75693785a)|`Merge remote-tracking branch 'trac/develop' into u/saraedum/gitlabci`|\n|[329fdab](https://github.com/sagemath/sagetrac-mirror/commit/329fdab86a1a3edf03c88780104a1471105fbcd6)|`fix tags for build-from-latest`|\n|[048e2d8](https://github.com/sagemath/sagetrac-mirror/commit/048e2d8f0a25bada68693f9b22a8e0426eab2fb2)|`silence unicode warnings from the patchbot`|\n|[f9c772e](https://github.com/sagemath/sagetrac-mirror/commit/f9c772e5003fda874e82edd5c785eab2657cee1b)|`Fix filtering logic in sphinx logger`|\n|[f043163](https://github.com/sagemath/sagetrac-mirror/commit/f0431637a02819116781d87825523a068bf88ee2)|`Fixed some minor doctest issues`|\n|[6b1ec2e](https://github.com/sagemath/sagetrac-mirror/commit/6b1ec2e573978815d770f0baff01bffb9ec7d2e4)|`Merge remote-tracking branch 'remotes/trac/u/saraedum/gitlabci' into sage-scripts-dir`|",
    "created_at": "2018-05-01T16:16:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418194",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[be3a0f7](https://github.com/sagemath/sagetrac-mirror/commit/be3a0f733950345bee7f4237db20558e1a06cefc)|`The docbuild crashes happen during an os.fork to spawn tachyon`|
|[7d85dc7](https://github.com/sagemath/sagetrac-mirror/commit/7d85dc796c58c3de57401bc22d3587b94e205091)|`Something related to the sphinxbuild seems to be leaking memory`|
|[50898fe](https://github.com/sagemath/sagetrac-mirror/commit/50898feaef6499180ab2ec5b21e4b6b18032a77d)|`Try to build-from-scratch on GitLab's underpowered CI machines`|
|[95c6275](https://github.com/sagemath/sagetrac-mirror/commit/95c6275adac26be537c11a084114d8a8dc576392)|`Comment on fork logic in docbuilding`|
|[c0574ca](https://github.com/sagemath/sagetrac-mirror/commit/c0574ca897321c56927e9ce5004fd2f75693785a)|`Merge remote-tracking branch 'trac/develop' into u/saraedum/gitlabci`|
|[329fdab](https://github.com/sagemath/sagetrac-mirror/commit/329fdab86a1a3edf03c88780104a1471105fbcd6)|`fix tags for build-from-latest`|
|[048e2d8](https://github.com/sagemath/sagetrac-mirror/commit/048e2d8f0a25bada68693f9b22a8e0426eab2fb2)|`silence unicode warnings from the patchbot`|
|[f9c772e](https://github.com/sagemath/sagetrac-mirror/commit/f9c772e5003fda874e82edd5c785eab2657cee1b)|`Fix filtering logic in sphinx logger`|
|[f043163](https://github.com/sagemath/sagetrac-mirror/commit/f0431637a02819116781d87825523a068bf88ee2)|`Fixed some minor doctest issues`|
|[6b1ec2e](https://github.com/sagemath/sagetrac-mirror/commit/6b1ec2e573978815d770f0baff01bffb9ec7d2e4)|`Merge remote-tracking branch 'remotes/trac/u/saraedum/gitlabci' into sage-scripts-dir`|



---

archive/issue_comments_418195.json:
```json
{
    "body": "Changing dependencies from \"#25056, #20382\" to \"#25056, #20382, #24655\"",
    "created_at": "2018-05-01T16:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418195",
    "user": "https://github.com/saraedum"
}
```

Changing dependencies from "#25056, #20382" to "#25056, #20382, #24655"



---

archive/issue_comments_418196.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-05-01T16:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418196",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_418197.json:
```json
{
    "body": "<a id='comment:40'></a>\nOk, the patchbot does probably not help much here as it does not rebuild if something that fundamental changes. Let's see what CI thinks about it.",
    "created_at": "2018-05-01T16:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418197",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:40'></a>
Ok, the patchbot does probably not help much here as it does not rebuild if something that fundamental changes. Let's see what CI thinks about it.



---

archive/issue_comments_418198.json:
```json
{
    "body": "Changing commit from \"6b1ec2e573978815d770f0baff01bffb9ec7d2e4\" to \"795d0faef202cf603ceebddcff8ef4113dab8e2e\"",
    "created_at": "2018-05-03T18:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418198",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6b1ec2e573978815d770f0baff01bffb9ec7d2e4" to "795d0faef202cf603ceebddcff8ef4113dab8e2e"



---

archive/issue_comments_418199.json:
```json
{
    "body": "<a id='comment:41'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|\n|[8f3480e](https://github.com/sagemath/sagetrac-mirror/commit/8f3480e71cafcef96b1c21aaf3219e8c81e5e9e1)|`It seems that MAKEOPTS/SAGE_NUM_THREADS parsing has been fixed now`|\n|[99355ad](https://github.com/sagemath/sagetrac-mirror/commit/99355ad8eb1402dd09ec4dd7bd0f898271147b8b)|`Build images in the same order in the Dockerfile and in build-docker.sh`|\n|[81babb8](https://github.com/sagemath/sagetrac-mirror/commit/81babb8af3c494be4ce89c586c6168ae80682560)|`Simplify caching during docker build`|\n|[ad39cc9](https://github.com/sagemath/sagetrac-mirror/commit/ad39cc9de9dd8a3f6092c7153278982393da57b8)|`Complicate parallelization quite a bit`|\n|[795d0fa](https://github.com/sagemath/sagetrac-mirror/commit/795d0faef202cf603ceebddcff8ef4113dab8e2e)|`Merge remote-tracking branch 'trac/u/saraedum/gitlabci' into HEAD`|",
    "created_at": "2018-05-03T18:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418199",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------|
|[8f3480e](https://github.com/sagemath/sagetrac-mirror/commit/8f3480e71cafcef96b1c21aaf3219e8c81e5e9e1)|`It seems that MAKEOPTS/SAGE_NUM_THREADS parsing has been fixed now`|
|[99355ad](https://github.com/sagemath/sagetrac-mirror/commit/99355ad8eb1402dd09ec4dd7bd0f898271147b8b)|`Build images in the same order in the Dockerfile and in build-docker.sh`|
|[81babb8](https://github.com/sagemath/sagetrac-mirror/commit/81babb8af3c494be4ce89c586c6168ae80682560)|`Simplify caching during docker build`|
|[ad39cc9](https://github.com/sagemath/sagetrac-mirror/commit/ad39cc9de9dd8a3f6092c7153278982393da57b8)|`Complicate parallelization quite a bit`|
|[795d0fa](https://github.com/sagemath/sagetrac-mirror/commit/795d0faef202cf603ceebddcff8ef4113dab8e2e)|`Merge remote-tracking branch 'trac/u/saraedum/gitlabci' into HEAD`|



---

archive/issue_comments_418200.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n+\n+CI runs for the proposed changes are here: https://gitlab.com/sagemath/dev/sage/commits/sage-bin (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-03T18:23:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418200",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
+
+CI runs for the proposed changes are here: https://gitlab.com/sagemath/dev/sage/commits/sage-bin (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_418201.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes are here: https://gitlab.com/sagemath/dev/sage/commits/sage-bin (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/sage-bin/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/sage-bin))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-03T18:26:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418201",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes are here: https://gitlab.com/sagemath/dev/sage/commits/sage-bin (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/sage-bin/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/sage-bin))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_418202.json:
```json
{
    "body": "<a id='comment:44'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------|\n|[4de96c2](https://github.com/sagemath/sagetrac-mirror/commit/4de96c2cfd063680492a5e066d1ee508980871f4)|`Merge remote-tracking branch 'trac/develop' into t/22731/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_`|",
    "created_at": "2018-05-11T14:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418202",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------|
|[4de96c2](https://github.com/sagemath/sagetrac-mirror/commit/4de96c2cfd063680492a5e066d1ee508980871f4)|`Merge remote-tracking branch 'trac/develop' into t/22731/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_`|



---

archive/issue_comments_418203.json:
```json
{
    "body": "Changing commit from \"795d0faef202cf603ceebddcff8ef4113dab8e2e\" to \"4de96c2cfd063680492a5e066d1ee508980871f4\"",
    "created_at": "2018-05-11T14:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418203",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "795d0faef202cf603ceebddcff8ef4113dab8e2e" to "4de96c2cfd063680492a5e066d1ee508980871f4"



---

archive/issue_comments_418204.json:
```json
{
    "body": "Changing commit from \"4de96c2cfd063680492a5e066d1ee508980871f4\" to \"\"",
    "created_at": "2018-05-14T14:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418204",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "4de96c2cfd063680492a5e066d1ee508980871f4" to ""



---

archive/issue_comments_418205.json:
```json
{
    "body": "Changing branch from \"u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_\" to \"\"",
    "created_at": "2018-05-14T14:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418205",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_" to ""



---

archive/issue_comments_418206.json:
```json
{
    "body": "Changing branch from \"\" to \"u/saraedum/22731\"",
    "created_at": "2018-05-14T14:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418206",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "" to "u/saraedum/22731"



---

archive/issue_comments_418207.json:
```json
{
    "body": "Changing commit from \"\" to \"03c7aa4660e808f080f97a572b0b331c5bce4060\"",
    "created_at": "2018-05-15T09:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418207",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "03c7aa4660e808f080f97a572b0b331c5bce4060"



---

archive/issue_comments_418208.json:
```json
{
    "body": "<a id='comment:47'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[03c7aa4](https://github.com/sagemath/sagetrac-mirror/commit/03c7aa4660e808f080f97a572b0b331c5bce4060)|`Merge remote-tracking branch 'trac/develop' into 22731`|",
    "created_at": "2018-05-15T09:58:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418208",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:47'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[03c7aa4](https://github.com/sagemath/sagetrac-mirror/commit/03c7aa4660e808f080f97a572b0b331c5bce4060)|`Merge remote-tracking branch 'trac/develop' into 22731`|



---

archive/issue_comments_418209.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/sage-bin/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/sage-bin))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-15T10:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418209",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/sage-bin/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/sage-bin))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_418210.json:
```json
{
    "body": "Changing commit from \"03c7aa4660e808f080f97a572b0b331c5bce4060\" to \"7e37bedcb1d086aa5eb2e1516beec495db39c4c5\"",
    "created_at": "2018-05-20T22:21:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418210",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "03c7aa4660e808f080f97a572b0b331c5bce4060" to "7e37bedcb1d086aa5eb2e1516beec495db39c4c5"



---

archive/issue_comments_418211.json:
```json
{
    "body": "<a id='comment:49'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[a532fce](https://github.com/sagemath/sagetrac-mirror/commit/a532fcee1ae77bbd4164b4f0bf637b5acfd2a452)|`Merge remote-tracking branch 'trac/develop' into u/saraedum/gitlabci`|\n|[686fe86](https://github.com/sagemath/sagetrac-mirror/commit/686fe86c7fb1f13f3d9d6ece7828107ff988e7c0)|`An attempt to use workflows on CircleCI`|\n|[79003ab](https://github.com/sagemath/sagetrac-mirror/commit/79003ab53cb5dcc4ade75573021dec91c763360c)|`Do not deduce CPUs/RAM by looking at the local machine`|\n|[906ebea](https://github.com/sagemath/sagetrac-mirror/commit/906ebeab69c1307582d6f299c8062837f9af30ba)|`Collect system information on the docker host`|\n|[60ddb4b](https://github.com/sagemath/sagetrac-mirror/commit/60ddb4b0486ee73fcb608d3efe60532fa5300fdd)|`simplify apk add command for [GitLab](GitLab) CI`|\n|[25f934e](https://github.com/sagemath/sagetrac-mirror/commit/25f934e5ec1bd8344b9e372f46387b569d379a8e)|`Build from the latest develop image`|\n|[aa49196](https://github.com/sagemath/sagetrac-mirror/commit/aa49196c4f0ed33da7a45b80c7a4a01bd46b7d61)|`Backport #24655 for automated docker builds`|\n|[a0fdc3c](https://github.com/sagemath/sagetrac-mirror/commit/a0fdc3c60f0415963bf4e945f2694dee66ebb8eb)|`Merge commit 'aa49196c4f0ed33da7a45b80c7a4a01bd46b7d61' into u/saraedum/gitlabci`|\n|[b704268](https://github.com/sagemath/sagetrac-mirror/commit/b70426813bafe93b62a7b36ed00f0cd0ed166a1f)|`Merge branch '24655' into 24854`|\n|[7e37bed](https://github.com/sagemath/sagetrac-mirror/commit/7e37bedcb1d086aa5eb2e1516beec495db39c4c5)|`Merge branch '24854' into 22731`|",
    "created_at": "2018-05-20T22:21:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:49'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[a532fce](https://github.com/sagemath/sagetrac-mirror/commit/a532fcee1ae77bbd4164b4f0bf637b5acfd2a452)|`Merge remote-tracking branch 'trac/develop' into u/saraedum/gitlabci`|
|[686fe86](https://github.com/sagemath/sagetrac-mirror/commit/686fe86c7fb1f13f3d9d6ece7828107ff988e7c0)|`An attempt to use workflows on CircleCI`|
|[79003ab](https://github.com/sagemath/sagetrac-mirror/commit/79003ab53cb5dcc4ade75573021dec91c763360c)|`Do not deduce CPUs/RAM by looking at the local machine`|
|[906ebea](https://github.com/sagemath/sagetrac-mirror/commit/906ebeab69c1307582d6f299c8062837f9af30ba)|`Collect system information on the docker host`|
|[60ddb4b](https://github.com/sagemath/sagetrac-mirror/commit/60ddb4b0486ee73fcb608d3efe60532fa5300fdd)|`simplify apk add command for [GitLab](GitLab) CI`|
|[25f934e](https://github.com/sagemath/sagetrac-mirror/commit/25f934e5ec1bd8344b9e372f46387b569d379a8e)|`Build from the latest develop image`|
|[aa49196](https://github.com/sagemath/sagetrac-mirror/commit/aa49196c4f0ed33da7a45b80c7a4a01bd46b7d61)|`Backport #24655 for automated docker builds`|
|[a0fdc3c](https://github.com/sagemath/sagetrac-mirror/commit/a0fdc3c60f0415963bf4e945f2694dee66ebb8eb)|`Merge commit 'aa49196c4f0ed33da7a45b80c7a4a01bd46b7d61' into u/saraedum/gitlabci`|
|[b704268](https://github.com/sagemath/sagetrac-mirror/commit/b70426813bafe93b62a7b36ed00f0cd0ed166a1f)|`Merge branch '24655' into 24854`|
|[7e37bed](https://github.com/sagemath/sagetrac-mirror/commit/7e37bedcb1d086aa5eb2e1516beec495db39c4c5)|`Merge branch '24854' into 22731`|



---

archive/issue_comments_418212.json:
```json
{
    "body": "Changing dependencies from \"#25056, #20382, #24655\" to \"#25056, #20382, #24655, #24854\"",
    "created_at": "2018-05-20T22:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418212",
    "user": "https://github.com/saraedum"
}
```

Changing dependencies from "#25056, #20382, #24655" to "#25056, #20382, #24655, #24854"



---

archive/issue_comments_418213.json:
```json
{
    "body": "<a id='comment:51'></a>\nWould people on this thread have an idea on what can be done to make `$SAGE_LOCAL/bin/sage` work when `$SAGE_ROOT` is not yet set and/or how one can figure out if `$SAGE_ROOT/sage` (a script that has more logic to figure out a value for `$SAGE_ROOT`) is an acceptable executable to use?\n\nIt comes up in producing a jupyter kernelspec for sage that is suitable for use by an external jupyter. See: \n[sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/yEUJOW2fnJI)\n\nIf we can make it very easy to install sage's kernelspec in arbitrary jupyter configurations, it becomes significantly easier to integrate sage in computational environments (for instance, should the nteract desktop jupyter client ever become popular, we could just provide easy interfacing with a system install of it rather than packaging it with sage).",
    "created_at": "2018-05-20T23:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418213",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:51'></a>
Would people on this thread have an idea on what can be done to make `$SAGE_LOCAL/bin/sage` work when `$SAGE_ROOT` is not yet set and/or how one can figure out if `$SAGE_ROOT/sage` (a script that has more logic to figure out a value for `$SAGE_ROOT`) is an acceptable executable to use?

It comes up in producing a jupyter kernelspec for sage that is suitable for use by an external jupyter. See: 
[sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/yEUJOW2fnJI)

If we can make it very easy to install sage's kernelspec in arbitrary jupyter configurations, it becomes significantly easier to integrate sage in computational environments (for instance, should the nteract desktop jupyter client ever become popular, we could just provide easy interfacing with a system install of it rather than packaging it with sage).



---

archive/issue_comments_418214.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-21T14:42:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418214",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_418215.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-21T14:43:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418215",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_418216.json:
```json
{
    "body": "Changing commit from \"7e37bedcb1d086aa5eb2e1516beec495db39c4c5\" to \"6d89d614dc1f363622e21b22e213e815b528425b\"",
    "created_at": "2018-05-21T14:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418216",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7e37bedcb1d086aa5eb2e1516beec495db39c4c5" to "6d89d614dc1f363622e21b22e213e815b528425b"



---

archive/issue_comments_418217.json:
```json
{
    "body": "<a id='comment:54'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[11f8a6c](https://github.com/sagemath/sagetrac-mirror/commit/11f8a6cc24e9a1853a85f45d48210bdfb35254ff)|`no port exposure needed for jupyter anymore`|\n|[1960ba1](https://github.com/sagemath/sagetrac-mirror/commit/1960ba1e0674435f222af242df6252d2b7ea50c8)|`add openssl/libssl-dev to the docker images`|\n|[14926cf](https://github.com/sagemath/sagetrac-mirror/commit/14926cfe70ca7f26f97cbf69a4f6e7298f6fc3d3)|`Revert \"add openssl/libssl-dev to the docker images\"`|\n|[f2c641a](https://github.com/sagemath/sagetrac-mirror/commit/f2c641a9d3a99fd0a1dc4f95c801c600e226f1f5)|`Add debug information on patch size`|\n|[6d89d61](https://github.com/sagemath/sagetrac-mirror/commit/6d89d614dc1f363622e21b22e213e815b528425b)|`Merge branch '24655' into 22731`|",
    "created_at": "2018-05-21T14:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418217",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[11f8a6c](https://github.com/sagemath/sagetrac-mirror/commit/11f8a6cc24e9a1853a85f45d48210bdfb35254ff)|`no port exposure needed for jupyter anymore`|
|[1960ba1](https://github.com/sagemath/sagetrac-mirror/commit/1960ba1e0674435f222af242df6252d2b7ea50c8)|`add openssl/libssl-dev to the docker images`|
|[14926cf](https://github.com/sagemath/sagetrac-mirror/commit/14926cfe70ca7f26f97cbf69a4f6e7298f6fc3d3)|`Revert "add openssl/libssl-dev to the docker images"`|
|[f2c641a](https://github.com/sagemath/sagetrac-mirror/commit/f2c641a9d3a99fd0a1dc4f95c801c600e226f1f5)|`Add debug information on patch size`|
|[6d89d61](https://github.com/sagemath/sagetrac-mirror/commit/6d89d614dc1f363622e21b22e213e815b528425b)|`Merge branch '24655' into 22731`|



---

archive/issue_comments_418218.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-22T21:04:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418218",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_418219.json:
```json
{
    "body": "<a id='comment:56'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[864843c](https://github.com/sagemath/sagetrac-mirror/commit/864843ce7ec0527d5498524d5f9efc0898ea22cd)|`fix syntax error in CircleCI configuration`|\n|[e1c8536](https://github.com/sagemath/sagetrac-mirror/commit/e1c853634791a10fb7fc286349d785ef144008f6)|`Run short and new doctests on CircleCI for every branch`|\n|[45579a1](https://github.com/sagemath/sagetrac-mirror/commit/45579a1cacc7b453f203854fcd78c2516fedf8d3)|`Call the right scripts in CircleCI`|\n|[83f71e7](https://github.com/sagemath/sagetrac-mirror/commit/83f71e7948c8eb8a72e63d4d1451f9f20779bb8b)|`Don't pipe \"echo\" into \"rm\"`|\n|[8d3caeb](https://github.com/sagemath/sagetrac-mirror/commit/8d3caebc4dedd9854a38e3f05dc7fe3ad35b75d4)|`Merge branch '24655' into 24854`|\n|[d7cb021](https://github.com/sagemath/sagetrac-mirror/commit/d7cb021121279a5d3645df7c1519dfff382ac033)|`Merge branch '24854' into 22731`|",
    "created_at": "2018-05-22T21:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418219",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[864843c](https://github.com/sagemath/sagetrac-mirror/commit/864843ce7ec0527d5498524d5f9efc0898ea22cd)|`fix syntax error in CircleCI configuration`|
|[e1c8536](https://github.com/sagemath/sagetrac-mirror/commit/e1c853634791a10fb7fc286349d785ef144008f6)|`Run short and new doctests on CircleCI for every branch`|
|[45579a1](https://github.com/sagemath/sagetrac-mirror/commit/45579a1cacc7b453f203854fcd78c2516fedf8d3)|`Call the right scripts in CircleCI`|
|[83f71e7](https://github.com/sagemath/sagetrac-mirror/commit/83f71e7948c8eb8a72e63d4d1451f9f20779bb8b)|`Don't pipe "echo" into "rm"`|
|[8d3caeb](https://github.com/sagemath/sagetrac-mirror/commit/8d3caebc4dedd9854a38e3f05dc7fe3ad35b75d4)|`Merge branch '24655' into 24854`|
|[d7cb021](https://github.com/sagemath/sagetrac-mirror/commit/d7cb021121279a5d3645df7c1519dfff382ac033)|`Merge branch '24854' into 22731`|



---

archive/issue_comments_418220.json:
```json
{
    "body": "Changing commit from \"6d89d614dc1f363622e21b22e213e815b528425b\" to \"d7cb021121279a5d3645df7c1519dfff382ac033\"",
    "created_at": "2018-05-22T21:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418220",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6d89d614dc1f363622e21b22e213e815b528425b" to "d7cb021121279a5d3645df7c1519dfff382ac033"



---

archive/issue_comments_418221.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-05-26T13:10:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418221",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418222.json:
```json
{
    "body": "<a id='comment:57'></a>\nThe CI tests were successful (the failed tests are due to #25431)",
    "created_at": "2018-05-26T13:10:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418222",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:57'></a>
The CI tests were successful (the failed tests are due to #25431)



---

archive/issue_comments_418223.json:
```json
{
    "body": "Changing dependencies from \"#25056, #20382, #24655, #24854\" to \"#25056, #20382, #24655, #24854, #25431\"",
    "created_at": "2018-05-26T13:10:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418223",
    "user": "https://github.com/saraedum"
}
```

Changing dependencies from "#25056, #20382, #24655, #24854" to "#25056, #20382, #24655, #24854, #25431"



---

archive/issue_comments_418224.json:
```json
{
    "body": "<a id='comment:59'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|\n|[e67314c](https://github.com/sagemath/sagetrac-mirror/commit/e67314c4adb29748b4ef683f351b1a1094c837de)|`Skip _test_matrix_smith for lattice precision rings`|\n|[bed5af5](https://github.com/sagemath/sagetrac-mirror/commit/bed5af50d2560826420e23b716193c95672ffe3e)|`Merge branch '25431' into 22731`|",
    "created_at": "2018-05-26T13:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418224",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------|
|[e67314c](https://github.com/sagemath/sagetrac-mirror/commit/e67314c4adb29748b4ef683f351b1a1094c837de)|`Skip _test_matrix_smith for lattice precision rings`|
|[bed5af5](https://github.com/sagemath/sagetrac-mirror/commit/bed5af50d2560826420e23b716193c95672ffe3e)|`Merge branch '25431' into 22731`|



---

archive/issue_comments_418225.json:
```json
{
    "body": "Changing commit from \"d7cb021121279a5d3645df7c1519dfff382ac033\" to \"bed5af50d2560826420e23b716193c95672ffe3e\"",
    "created_at": "2018-05-26T13:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418225",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d7cb021121279a5d3645df7c1519dfff382ac033" to "bed5af50d2560826420e23b716193c95672ffe3e"



---

archive/issue_comments_418226.json:
```json
{
    "body": "<a id='comment:61'></a>\nReplying to [saraedum](#comment%3A28):\n> Alternatively the second point could be replaced by the following two:\n> \n> * Introduce `$SAGE_LIBEXEC`. Configurable through `./configure --libexecdir`, default `$SAGE_LOCAL/libexec/`. (See https://www.gnu.org/prep/standards/html_node/Directory-Variables.html.)\n\n\n+1 for using libexec for all auxiliary scripts that are not useful for the user from the command line.",
    "created_at": "2018-05-31T17:26:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418226",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'></a>
Replying to [saraedum](#comment%3A28):
> Alternatively the second point could be replaced by the following two:
> 
> * Introduce `$SAGE_LIBEXEC`. Configurable through `./configure --libexecdir`, default `$SAGE_LOCAL/libexec/`. (See https://www.gnu.org/prep/standards/html_node/Directory-Variables.html.)


+1 for using libexec for all auxiliary scripts that are not useful for the user from the command line.



---

archive/issue_comments_418227.json:
```json
{
    "body": "<a id='comment:62'></a>\nIt's hard to see the changes on this branch, by the way, since this is on top of some circleci branch; also needs rebasing.",
    "created_at": "2018-05-31T17:27:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418227",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:62'></a>
It's hard to see the changes on this branch, by the way, since this is on top of some circleci branch; also needs rebasing.



---

archive/issue_comments_418228.json:
```json
{
    "body": "Changing commit from \"bed5af50d2560826420e23b716193c95672ffe3e\" to \"7ba2ee2059f43222aabf3ce5de7a282f2687832d\"",
    "created_at": "2018-06-01T00:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418228",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bed5af50d2560826420e23b716193c95672ffe3e" to "7ba2ee2059f43222aabf3ce5de7a282f2687832d"



---

archive/issue_comments_418229.json:
```json
{
    "body": "<a id='comment:63'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[3c0d6a3](https://github.com/sagemath/sagetrac-mirror/commit/3c0d6a3bb47b4d5799a83ad50d1556e895860b2e)|`Merge branch '22731' into HEAD`|\n|[d28f601](https://github.com/sagemath/sagetrac-mirror/commit/d28f601f53ddae2cecadc95854fbd91a525ac8f7)|`Make sage -pip work`|\n|[b8e6077](https://github.com/sagemath/sagetrac-mirror/commit/b8e6077366e318a542299adfa1920424944e696c)|`Do not install libssl-dev twice`|\n|[7f44254](https://github.com/sagemath/sagetrac-mirror/commit/7f44254f417f2cf19a50cd4bbe1e387f2084744b)|`Merge remote-tracking branch 'trac/develop' into 24655`|\n|[91d5271](https://github.com/sagemath/sagetrac-mirror/commit/91d52715e7b055dd6f33d1d22c5f536d3209aad6)|`Merge branch '24655' into HEAD`|\n|[b413748](https://github.com/sagemath/sagetrac-mirror/commit/b413748058bc4ab96300b165f830d27fafa5e460)|`Merge branch '24854' into HEAD`|\n|[4ddd346](https://github.com/sagemath/sagetrac-mirror/commit/4ddd34683e4e85c5121c720c0d790c4acfca1347)|`Backport #24655 to build docker images`|\n|[ab71cfa](https://github.com/sagemath/sagetrac-mirror/commit/ab71cfa8a74651587bb84fabffe39bad35fcfb4b)|`Merge branch 'docker-8.3.beta3' into 24655`|\n|[5086548](https://github.com/sagemath/sagetrac-mirror/commit/50865484eab0b0119bcb3778273965fa8fb7a483)|`Merge branch '24655' into 24854`|\n|[7ba2ee2](https://github.com/sagemath/sagetrac-mirror/commit/7ba2ee2059f43222aabf3ce5de7a282f2687832d)|`Merge branch '24854' into 22731`|",
    "created_at": "2018-06-01T00:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418229",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:63'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[3c0d6a3](https://github.com/sagemath/sagetrac-mirror/commit/3c0d6a3bb47b4d5799a83ad50d1556e895860b2e)|`Merge branch '22731' into HEAD`|
|[d28f601](https://github.com/sagemath/sagetrac-mirror/commit/d28f601f53ddae2cecadc95854fbd91a525ac8f7)|`Make sage -pip work`|
|[b8e6077](https://github.com/sagemath/sagetrac-mirror/commit/b8e6077366e318a542299adfa1920424944e696c)|`Do not install libssl-dev twice`|
|[7f44254](https://github.com/sagemath/sagetrac-mirror/commit/7f44254f417f2cf19a50cd4bbe1e387f2084744b)|`Merge remote-tracking branch 'trac/develop' into 24655`|
|[91d5271](https://github.com/sagemath/sagetrac-mirror/commit/91d52715e7b055dd6f33d1d22c5f536d3209aad6)|`Merge branch '24655' into HEAD`|
|[b413748](https://github.com/sagemath/sagetrac-mirror/commit/b413748058bc4ab96300b165f830d27fafa5e460)|`Merge branch '24854' into HEAD`|
|[4ddd346](https://github.com/sagemath/sagetrac-mirror/commit/4ddd34683e4e85c5121c720c0d790c4acfca1347)|`Backport #24655 to build docker images`|
|[ab71cfa](https://github.com/sagemath/sagetrac-mirror/commit/ab71cfa8a74651587bb84fabffe39bad35fcfb4b)|`Merge branch 'docker-8.3.beta3' into 24655`|
|[5086548](https://github.com/sagemath/sagetrac-mirror/commit/50865484eab0b0119bcb3778273965fa8fb7a483)|`Merge branch '24655' into 24854`|
|[7ba2ee2](https://github.com/sagemath/sagetrac-mirror/commit/7ba2ee2059f43222aabf3ce5de7a282f2687832d)|`Merge branch '24854' into 22731`|



---

archive/issue_comments_418230.json:
```json
{
    "body": "Changing commit from \"7ba2ee2059f43222aabf3ce5de7a282f2687832d\" to \"2130060ef6ab1490368bd266ceaa3c190e2366a8\"",
    "created_at": "2018-06-01T00:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418230",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7ba2ee2059f43222aabf3ce5de7a282f2687832d" to "2130060ef6ab1490368bd266ceaa3c190e2366a8"



---

archive/issue_comments_418231.json:
```json
{
    "body": "<a id='comment:64'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[6708512](https://github.com/sagemath/sagetrac-mirror/commit/67085121dde73cca7a32052313ca8a28d3596298)|`Call sage -tp with --all so it actually does something`|\n|[2130060](https://github.com/sagemath/sagetrac-mirror/commit/2130060ef6ab1490368bd266ceaa3c190e2366a8)|`Merge branch '24854' into 22731`|",
    "created_at": "2018-06-01T00:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418231",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[6708512](https://github.com/sagemath/sagetrac-mirror/commit/67085121dde73cca7a32052313ca8a28d3596298)|`Call sage -tp with --all so it actually does something`|
|[2130060](https://github.com/sagemath/sagetrac-mirror/commit/2130060ef6ab1490368bd266ceaa3c190e2366a8)|`Merge branch '24854' into 22731`|



---

archive/issue_comments_418232.json:
```json
{
    "body": "<a id='comment:65'></a>\nSee also #21559, #21569, #21570.",
    "created_at": "2018-06-02T04:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418232",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'></a>
See also #21559, #21569, #21570.



---

archive/issue_comments_418233.json:
```json
{
    "body": "Changing commit from \"2130060ef6ab1490368bd266ceaa3c190e2366a8\" to \"08f93c738438eea285881837340a0211e71e8187\"",
    "created_at": "2018-06-21T10:11:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418233",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2130060ef6ab1490368bd266ceaa3c190e2366a8" to "08f93c738438eea285881837340a0211e71e8187"



---

archive/issue_comments_418234.json:
```json
{
    "body": "<a id='comment:66'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[4ef4e18](https://github.com/sagemath/sagetrac-mirror/commit/4ef4e1830f78d45e9faf0ac48fa44f9d57da33ac)|`Where to report bugs for the docker images`|\n|[b8a94e2](https://github.com/sagemath/sagetrac-mirror/commit/b8a94e2fdbe3c8b7db3b06be0a707373ce85c1d9)|`Merge remote-tracking branch 'trac/develop' into 24655`|\n|[6a3d5d0](https://github.com/sagemath/sagetrac-mirror/commit/6a3d5d0c70310ddcf28ac684c56bf279d189179c)|`drop trailing space`|\n|[f7ea0f3](https://github.com/sagemath/sagetrac-mirror/commit/f7ea0f3c7a10baf475e96bd0bacd09f06039b14b)|`Make update-env posix compliant again`|\n|[44e931c](https://github.com/sagemath/sagetrac-mirror/commit/44e931cd8ccfd4d75b4d9d95cfc7f54308633b50)|`Merge branch '24655' into 24854`|\n|[e8dadc8](https://github.com/sagemath/sagetrac-mirror/commit/e8dadc8fc9e64968f66ff9953115203b6b0603df)|`Merge remote-tracking branch 'trac/develop' into 24655`|\n|[5877f65](https://github.com/sagemath/sagetrac-mirror/commit/5877f6577d414f357920f93314523d9c5b978c86)|`Merge branch '24655' into 24854`|\n|[569d492](https://github.com/sagemath/sagetrac-mirror/commit/569d492f83e15b7abfd79c5ddbdda51928187fe0)|`Merge remote-tracking branch 'trac/develop' into 24655`|\n|[e9c2cf8](https://github.com/sagemath/sagetrac-mirror/commit/e9c2cf841c9e83392f5fa5e111d49bbef05511cf)|`Merge branch '24655' into 24854`|\n|[08f93c7](https://github.com/sagemath/sagetrac-mirror/commit/08f93c738438eea285881837340a0211e71e8187)|`Merge branch '24854' into HEAD`|",
    "created_at": "2018-06-21T10:11:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418234",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:66'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[4ef4e18](https://github.com/sagemath/sagetrac-mirror/commit/4ef4e1830f78d45e9faf0ac48fa44f9d57da33ac)|`Where to report bugs for the docker images`|
|[b8a94e2](https://github.com/sagemath/sagetrac-mirror/commit/b8a94e2fdbe3c8b7db3b06be0a707373ce85c1d9)|`Merge remote-tracking branch 'trac/develop' into 24655`|
|[6a3d5d0](https://github.com/sagemath/sagetrac-mirror/commit/6a3d5d0c70310ddcf28ac684c56bf279d189179c)|`drop trailing space`|
|[f7ea0f3](https://github.com/sagemath/sagetrac-mirror/commit/f7ea0f3c7a10baf475e96bd0bacd09f06039b14b)|`Make update-env posix compliant again`|
|[44e931c](https://github.com/sagemath/sagetrac-mirror/commit/44e931cd8ccfd4d75b4d9d95cfc7f54308633b50)|`Merge branch '24655' into 24854`|
|[e8dadc8](https://github.com/sagemath/sagetrac-mirror/commit/e8dadc8fc9e64968f66ff9953115203b6b0603df)|`Merge remote-tracking branch 'trac/develop' into 24655`|
|[5877f65](https://github.com/sagemath/sagetrac-mirror/commit/5877f6577d414f357920f93314523d9c5b978c86)|`Merge branch '24655' into 24854`|
|[569d492](https://github.com/sagemath/sagetrac-mirror/commit/569d492f83e15b7abfd79c5ddbdda51928187fe0)|`Merge remote-tracking branch 'trac/develop' into 24655`|
|[e9c2cf8](https://github.com/sagemath/sagetrac-mirror/commit/e9c2cf841c9e83392f5fa5e111d49bbef05511cf)|`Merge branch '24655' into 24854`|
|[08f93c7](https://github.com/sagemath/sagetrac-mirror/commit/08f93c738438eea285881837340a0211e71e8187)|`Merge branch '24854' into HEAD`|



---

archive/issue_comments_418235.json:
```json
{
    "body": "<a id='comment:67'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[57d653d](https://github.com/sagemath/sagetrac-mirror/commit/57d653d348a292e0ba9e34b197b51023e0a14c2a)|`Merge branch '25270' into 24854`|\n|[d29058e](https://github.com/sagemath/sagetrac-mirror/commit/d29058e7950b177f6d0c48c88248790ec6a86a3b)|`Merge remote-tracking branch 'trac/develop' into 24655`|\n|[2cec8ac](https://github.com/sagemath/sagetrac-mirror/commit/2cec8ac704cddc2c65cbc439a7b07c7bcc953f1b)|`Replace do tag with big`|\n|[7bb3faf](https://github.com/sagemath/sagetrac-mirror/commit/7bb3fafc0393d05694a9bea1bdc5271ad930601b)|`Merge branch '24655' into 24854`|\n|[6c9c2ce](https://github.com/sagemath/sagetrac-mirror/commit/6c9c2ceb2112eba751ffdb0fbe583ff80734509c)|`Merge remote-tracking branch 'trac/develop' into 25270`|\n|[e38d7de](https://github.com/sagemath/sagetrac-mirror/commit/e38d7de774639a8ed9e05d8bfc0e827772d36d33)|`Merge branch '25270' into 24854`|\n|[662d3f8](https://github.com/sagemath/sagetrac-mirror/commit/662d3f8b0b40bceb9f2f75c8f507a1fce3ccc1df)|`Use --short to run --short doctests`|\n|[6241011](https://github.com/sagemath/sagetrac-mirror/commit/624101115b9af149f8bf0d7cfe2f63d9ccf5201d)|`Fix namespacing for CircleCI`|\n|[9f15655](https://github.com/sagemath/sagetrac-mirror/commit/9f1565541206568118e9144572f1ef3229e1523e)|`Merge branch '24655' into 24854`|\n|[a9ca8a1](https://github.com/sagemath/sagetrac-mirror/commit/a9ca8a1e356eb6508036e9c986f04f2d97131428)|`Merge branch '24854' into 22731`|",
    "created_at": "2018-07-11T10:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418235",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:67'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[57d653d](https://github.com/sagemath/sagetrac-mirror/commit/57d653d348a292e0ba9e34b197b51023e0a14c2a)|`Merge branch '25270' into 24854`|
|[d29058e](https://github.com/sagemath/sagetrac-mirror/commit/d29058e7950b177f6d0c48c88248790ec6a86a3b)|`Merge remote-tracking branch 'trac/develop' into 24655`|
|[2cec8ac](https://github.com/sagemath/sagetrac-mirror/commit/2cec8ac704cddc2c65cbc439a7b07c7bcc953f1b)|`Replace do tag with big`|
|[7bb3faf](https://github.com/sagemath/sagetrac-mirror/commit/7bb3fafc0393d05694a9bea1bdc5271ad930601b)|`Merge branch '24655' into 24854`|
|[6c9c2ce](https://github.com/sagemath/sagetrac-mirror/commit/6c9c2ceb2112eba751ffdb0fbe583ff80734509c)|`Merge remote-tracking branch 'trac/develop' into 25270`|
|[e38d7de](https://github.com/sagemath/sagetrac-mirror/commit/e38d7de774639a8ed9e05d8bfc0e827772d36d33)|`Merge branch '25270' into 24854`|
|[662d3f8](https://github.com/sagemath/sagetrac-mirror/commit/662d3f8b0b40bceb9f2f75c8f507a1fce3ccc1df)|`Use --short to run --short doctests`|
|[6241011](https://github.com/sagemath/sagetrac-mirror/commit/624101115b9af149f8bf0d7cfe2f63d9ccf5201d)|`Fix namespacing for CircleCI`|
|[9f15655](https://github.com/sagemath/sagetrac-mirror/commit/9f1565541206568118e9144572f1ef3229e1523e)|`Merge branch '24655' into 24854`|
|[a9ca8a1](https://github.com/sagemath/sagetrac-mirror/commit/a9ca8a1e356eb6508036e9c986f04f2d97131428)|`Merge branch '24854' into 22731`|



---

archive/issue_comments_418236.json:
```json
{
    "body": "Changing commit from \"08f93c738438eea285881837340a0211e71e8187\" to \"a9ca8a1e356eb6508036e9c986f04f2d97131428\"",
    "created_at": "2018-07-11T10:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418236",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "08f93c738438eea285881837340a0211e71e8187" to "a9ca8a1e356eb6508036e9c986f04f2d97131428"



---

archive/issue_comments_418237.json:
```json
{
    "body": "Changing commit from \"a9ca8a1e356eb6508036e9c986f04f2d97131428\" to \"9c9caef7b23b5782d230dd52aa9f06cb7aee96d9\"",
    "created_at": "2018-07-12T09:06:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418237",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a9ca8a1e356eb6508036e9c986f04f2d97131428" to "9c9caef7b23b5782d230dd52aa9f06cb7aee96d9"



---

archive/issue_comments_418238.json:
```json
{
    "body": "<a id='comment:68'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------|\n|[6e267b6](https://github.com/sagemath/sagetrac-mirror/commit/6e267b63dd1ce92e7cbd6ef0cdf99ed7be66ec53)|`Fix namespacing for [GitLab](GitLab) CI`|\n|[9c9caef](https://github.com/sagemath/sagetrac-mirror/commit/9c9caef7b23b5782d230dd52aa9f06cb7aee96d9)|`Merge branch '24655' into 22731`|",
    "created_at": "2018-07-12T09:06:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418238",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:68'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------|
|[6e267b6](https://github.com/sagemath/sagetrac-mirror/commit/6e267b63dd1ce92e7cbd6ef0cdf99ed7be66ec53)|`Fix namespacing for [GitLab](GitLab) CI`|
|[9c9caef](https://github.com/sagemath/sagetrac-mirror/commit/9c9caef7b23b5782d230dd52aa9f06cb7aee96d9)|`Merge branch '24655' into 22731`|



---

archive/issue_comments_418239.json:
```json
{
    "body": "<a id='comment:69'></a>\n1. There is a merge conflicts.\n\n2. As I mentioned in [comment:4], don't use `SAGE_SCRIPTS_DIR`.",
    "created_at": "2019-03-21T13:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418239",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:69'></a>
1. There is a merge conflicts.

2. As I mentioned in [comment:4], don't use `SAGE_SCRIPTS_DIR`.



---

archive/issue_comments_418240.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-03-21T13:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418240",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_075148.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-15T23:40:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75148"
}
```



---

archive/issue_comments_418241.json:
```json
{
    "body": "Changing work_issues from \"requires testing\" to \"clarify and prepare to support #30036\"",
    "created_at": "2020-07-15T23:43:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418241",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "requires testing" to "clarify and prepare to support #30036"



---

archive/issue_comments_418242.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,14 @@\n-* Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n-* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n+Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+* Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n+\n+  - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n+\n+* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip).\n+\n+* Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.\n+\n+* \"libexec\"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n+\n+\n+\n``````\n",
    "created_at": "2020-07-16T18:59:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418242",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,14 @@
-* Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
-* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
+Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+* Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.
+
+  - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 
+
+* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip).
+
+* Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.
+
+* "libexec"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
+
+
+
``````




---

archive/issue_events_075149.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "rename": {
        "from": "Use SAGE_BIN and SAGE_SCRIPTS_DIR to make Sage easier to package",
        "to": "Replace \"$SAGE_LOCAL/bin\" by more specific variables to make Sage easier to package"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75149"
}
```



---

archive/issue_comments_418243.json:
```json
{
    "body": "Changing work_issues from \"clarify and prepare to support #30036\" to \"clarify and prepare to support #30036, review/rebase changes\"",
    "created_at": "2020-07-16T19:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418243",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "clarify and prepare to support #30036" to "clarify and prepare to support #30036, review/rebase changes"



---

archive/issue_comments_418244.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,5 +10,6 @@\n \n * \"libexec\"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n \n+See also:\n+- https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n \n-\n``````\n",
    "created_at": "2020-07-17T02:39:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418244",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,5 +10,6 @@
 
 * "libexec"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
 
+See also:
+- https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
 
-
``````




---

archive/issue_comments_418245.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,4 +12,5 @@\n \n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n-\n+- #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n+- #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n``````\n",
    "created_at": "2020-08-13T05:45:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418245",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,4 +12,5 @@
 
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
-
+- #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
+- #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
``````




---

archive/issue_events_075150.json:
```json
{
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "label": "minor",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75150"
}
```



---

archive/issue_events_075151.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-08T06:04:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75151"
}
```



---

archive/issue_events_075152.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-08T06:04:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75152"
}
```



---

archive/issue_events_075153.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "rename": {
        "from": "Replace \"$SAGE_LOCAL/bin\" by more specific variables to make Sage easier to package",
        "to": "Replace \"$SAGE_LOCAL/bin\" by more specific variables to make Sage easier to package, use in venvs"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75153"
}
```



---

archive/issue_comments_418246.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n-Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes.\n+Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.\n \n * Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n \n   - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n \n-* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip).\n+* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). (#29013 proposed the variable `SAGE_VENV` for this.)\n \n * Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.\n \n``````\n",
    "created_at": "2020-09-11T17:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418246",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
-Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes.
+Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.
 
 * Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.
 
   - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 
 
-* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip).
+* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). (#29013 proposed the variable `SAGE_VENV` for this.)
 
 * Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.
 
``````




---

archive/issue_comments_418247.json:
```json
{
    "body": "Changing work_issues from \"clarify and prepare to support #30036, review/rebase changes\" to \"Implement as described\"",
    "created_at": "2020-09-11T17:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418247",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "clarify and prepare to support #30036, review/rebase changes" to "Implement as described"



---

archive/issue_comments_418248.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,16 +1,19 @@\n Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.\n \n-* Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n+**1a.** Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n \n-  - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n+**1b.** (Wishlist item:) Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n \n-* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). (#29013 proposed the variable `SAGE_VENV` for this.)\n+**2a.** Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). As proposed in #29013, we use the variable `SAGE_VENV` for this, so these scripts would be referred to as `$SAGE_VENV/bin/sage-eval` etc.\n \n-* Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.\n+**2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.\n \n-* \"libexec\"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n+**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n+\n+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect.  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n \n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n+\n``````\n",
    "created_at": "2020-09-11T17:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418248",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,16 +1,19 @@
 Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.
 
-* Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.
+**1a.** Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.
 
-  - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 
+**1b.** (Wishlist item:) Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 
 
-* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). (#29013 proposed the variable `SAGE_VENV` for this.)
+**2a.** Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). As proposed in #29013, we use the variable `SAGE_VENV` for this, so these scripts would be referred to as `$SAGE_VENV/bin/sage-eval` etc.
 
-* Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.
+**2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.
 
-* "libexec"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
+**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
+
+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect.  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
 
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
 - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
 - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
+
``````




---

archive/issue_comments_418249.json:
```json
{
    "body": "Changing branch from \"u/saraedum/22731\" to \"u/mkoeppe/22731\"",
    "created_at": "2020-09-11T19:24:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418249",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "u/saraedum/22731" to "u/mkoeppe/22731"



---

archive/issue_comments_418250.json:
```json
{
    "body": "Changing dependencies from \"#25056, #20382, #24655, #24854, #25431\" to \"\"",
    "created_at": "2020-09-11T19:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418250",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#25056, #20382, #24655, #24854, #25431" to ""



---

archive/issue_comments_418251.json:
```json
{
    "body": "<a id='comment:81'></a>\nRebased away from #24854\n\n---\nNew commits:\n|                                                                                                                                          |                                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|\n|[7325325](https://github.com/sagemath/sagetrac-mirror/commit/73253259d7d5eb08f0e41a05524961fe448c6fd2)|`A first draft of using SAGE_BIN and SAGE_SCRIPTS_DIR differently`|\n|[b9dfd1a](https://github.com/sagemath/sagetrac-mirror/commit/b9dfd1a4cf1e789672f09a464757d50c2036b34a)|`Add configure switch for scriptsdir`|",
    "created_at": "2020-09-11T19:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418251",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:81'></a>
Rebased away from #24854

---
New commits:
|                                                                                                                                          |                                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|
|[7325325](https://github.com/sagemath/sagetrac-mirror/commit/73253259d7d5eb08f0e41a05524961fe448c6fd2)|`A first draft of using SAGE_BIN and SAGE_SCRIPTS_DIR differently`|
|[b9dfd1a](https://github.com/sagemath/sagetrac-mirror/commit/b9dfd1a4cf1e789672f09a464757d50c2036b34a)|`Add configure switch for scriptsdir`|



---

archive/issue_comments_418252.json:
```json
{
    "body": "Changing commit from \"9c9caef7b23b5782d230dd52aa9f06cb7aee96d9\" to \"b9dfd1a4cf1e789672f09a464757d50c2036b34a\"",
    "created_at": "2020-09-11T19:24:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418252",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "9c9caef7b23b5782d230dd52aa9f06cb7aee96d9" to "b9dfd1a4cf1e789672f09a464757d50c2036b34a"



---

archive/issue_comments_418253.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,9 +8,9 @@\n \n **2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.\n \n-**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n+**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)\n \n-**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect.  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n \n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n``````\n",
    "created_at": "2020-09-16T01:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418253",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,9 +8,9 @@
 
 **2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.
 
-**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
+**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)
 
-**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect.  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
 
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
``````




---

archive/issue_comments_418254.json:
```json
{
    "body": "<a id='comment:82'></a>\nHoping that we can move this ticket forward next, to reduce the amount of necessary patching in distribution packaging.",
    "created_at": "2020-09-16T01:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418254",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:82'></a>
Hoping that we can move this ticket forward next, to reduce the amount of necessary patching in distribution packaging.



---

archive/issue_comments_418255.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,4 +16,4 @@\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n-\n+- #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv\n``````\n",
    "created_at": "2020-09-16T03:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418255",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,4 +16,4 @@
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
 - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
 - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
-
+- #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv
``````




---

archive/issue_comments_418256.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#30818\"",
    "created_at": "2020-10-23T21:09:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418256",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#30818"



---

archive/issue_comments_418257.json:
```json
{
    "body": "Changing dependencies from \"#30818\" to \"#29850, #30818\"",
    "created_at": "2020-11-10T22:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418257",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30818" to "#29850, #30818"



---

archive/issue_comments_418258.json:
```json
{
    "body": "Changing commit from \"b9dfd1a4cf1e789672f09a464757d50c2036b34a\" to \"545d118b9bc907340eca5342e380ce32fa72a923\"",
    "created_at": "2020-11-10T23:01:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418258",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b9dfd1a4cf1e789672f09a464757d50c2036b34a" to "545d118b9bc907340eca5342e380ce32fa72a923"



---

archive/issue_comments_418259.json:
```json
{
    "body": "<a id='comment:86'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                                                                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|\n|[9ba8cf2](https://github.com/sagemath/sagetrac-mirror/commit/9ba8cf2975545882f8c0d60f1faf193524726305)|`Merge tag '9.3.beta0' into t/29951/src_bin_sage_env__make_sage_env_config_and_sage_local_optional`|\n|[c8e6910](https://github.com/sagemath/sagetrac-mirror/commit/c8e69100d6b4ba30a3854266fbaa83aa3982f4a3)|`Merge tag '9.3.beta1' into t/29951/src_bin_sage_env__make_sage_env_config_and_sage_local_optional`|\n|[9ab593c](https://github.com/sagemath/sagetrac-mirror/commit/9ab593c41f56260651931a630a6c0fd504130395)|`Install sage-env-config with sage_conf`|\n|[a361580](https://github.com/sagemath/sagetrac-mirror/commit/a3615809e0eda053534d6f0713ee95e6c5939c7d)|`build/pkgs/sage_conf/spkg-src: New`|\n|[d02b597](https://github.com/sagemath/sagetrac-mirror/commit/d02b59722808b81329c390017e55e69237cc9557)|`build/pkgs/sagelib/src/setup.py: Do not install sage-env-config`|\n|[1b4bc99](https://github.com/sagemath/sagetrac-mirror/commit/1b4bc9938d3dcef8cd4f745f0bc26a718b35178d)|`src/bin/sage: Only source sage-env-config if it exists`|\n|[a1a6df5](https://github.com/sagemath/sagetrac-mirror/commit/a1a6df55d880441fe57975c653c161e929cc9dd5)|`src/bin/sage: Use python3 etc. from PATH instead of using SAGE_LOCAL`|\n|[d30b410](https://github.com/sagemath/sagetrac-mirror/commit/d30b4108d16ab4187d55d25bf19b94b2e6053106)|`build/pkgs/sage_conf/spkg-install: Build wheel manually`|\n|[19f7eae](https://github.com/sagemath/sagetrac-mirror/commit/19f7eae793b3eee1113f98e31b952246ebfd51c4)|`src/bin/sage-env: Make sage-env-config optional`|\n|[545d118](https://github.com/sagemath/sagetrac-mirror/commit/545d118b9bc907340eca5342e380ce32fa72a923)|`sage.env: Add SAGE_VENV`|",
    "created_at": "2020-11-10T23:01:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418259",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:86'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                                                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
|[9ba8cf2](https://github.com/sagemath/sagetrac-mirror/commit/9ba8cf2975545882f8c0d60f1faf193524726305)|`Merge tag '9.3.beta0' into t/29951/src_bin_sage_env__make_sage_env_config_and_sage_local_optional`|
|[c8e6910](https://github.com/sagemath/sagetrac-mirror/commit/c8e69100d6b4ba30a3854266fbaa83aa3982f4a3)|`Merge tag '9.3.beta1' into t/29951/src_bin_sage_env__make_sage_env_config_and_sage_local_optional`|
|[9ab593c](https://github.com/sagemath/sagetrac-mirror/commit/9ab593c41f56260651931a630a6c0fd504130395)|`Install sage-env-config with sage_conf`|
|[a361580](https://github.com/sagemath/sagetrac-mirror/commit/a3615809e0eda053534d6f0713ee95e6c5939c7d)|`build/pkgs/sage_conf/spkg-src: New`|
|[d02b597](https://github.com/sagemath/sagetrac-mirror/commit/d02b59722808b81329c390017e55e69237cc9557)|`build/pkgs/sagelib/src/setup.py: Do not install sage-env-config`|
|[1b4bc99](https://github.com/sagemath/sagetrac-mirror/commit/1b4bc9938d3dcef8cd4f745f0bc26a718b35178d)|`src/bin/sage: Only source sage-env-config if it exists`|
|[a1a6df5](https://github.com/sagemath/sagetrac-mirror/commit/a1a6df55d880441fe57975c653c161e929cc9dd5)|`src/bin/sage: Use python3 etc. from PATH instead of using SAGE_LOCAL`|
|[d30b410](https://github.com/sagemath/sagetrac-mirror/commit/d30b4108d16ab4187d55d25bf19b94b2e6053106)|`build/pkgs/sage_conf/spkg-install: Build wheel manually`|
|[19f7eae](https://github.com/sagemath/sagetrac-mirror/commit/19f7eae793b3eee1113f98e31b952246ebfd51c4)|`src/bin/sage-env: Make sage-env-config optional`|
|[545d118](https://github.com/sagemath/sagetrac-mirror/commit/545d118b9bc907340eca5342e380ce32fa72a923)|`sage.env: Add SAGE_VENV`|



---

archive/issue_comments_418260.json:
```json
{
    "body": "<a id='comment:87'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[6348c5c](https://github.com/sagemath/sagetrac-mirror/commit/6348c5c7c0eb2caba9f72f511847bea550b23709)|`src/sage: Replace some SAGE_LOCAL by SAGE_VENV`|",
    "created_at": "2020-11-11T01:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418260",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:87'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[6348c5c](https://github.com/sagemath/sagetrac-mirror/commit/6348c5c7c0eb2caba9f72f511847bea550b23709)|`src/sage: Replace some SAGE_LOCAL by SAGE_VENV`|



---

archive/issue_comments_418261.json:
```json
{
    "body": "Changing commit from \"545d118b9bc907340eca5342e380ce32fa72a923\" to \"6348c5c7c0eb2caba9f72f511847bea550b23709\"",
    "created_at": "2020-11-11T01:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418261",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "545d118b9bc907340eca5342e380ce32fa72a923" to "6348c5c7c0eb2caba9f72f511847bea550b23709"



---

archive/issue_comments_418262.json:
```json
{
    "body": "Changing work_issues from \"Implement as described\" to \"\"",
    "created_at": "2020-11-11T01:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418262",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "Implement as described" to ""



---

archive/issue_comments_418263.json:
```json
{
    "body": "Changing author from \"Tobias Hansen, Julian R\u00fcth\" to \"Matthias Koeppe\"",
    "created_at": "2020-11-11T01:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418263",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "Tobias Hansen, Julian Rüth" to "Matthias Koeppe"



---

archive/issue_comments_418264.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-11-11T01:19:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418264",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_418265.json:
```json
{
    "body": "Changing dependencies from \"#29850, #30818\" to \"#29850\"",
    "created_at": "2020-11-11T01:19:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418265",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29850, #30818" to "#29850"



---

archive/issue_comments_418266.json:
```json
{
    "body": "<a id='comment:90'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|\n|[ecde605](https://github.com/sagemath/sagetrac-mirror/commit/ecde60526b1c8da6e4b4914dcea50fd7e68e24a4)|`Merge branch 't/29850/install_sage_env_config_with_sage_conf' into t/30888/remove_unused_env_variable_sage_scripts_dir`|\n|[a318e9e](https://github.com/sagemath/sagetrac-mirror/commit/a318e9e3c03bc466f966965df378ff4685ff6d12)|`src/bin/sage-env: Do not set SAGE_SCRIPTS_DIR`|\n|[122bf78](https://github.com/sagemath/sagetrac-mirror/commit/122bf7890c17de88de973be8ac9c5165e9d47447)|`Merge branch 't/30888/remove_unused_env_variable_sage_scripts_dir' into t/22731/22731`|",
    "created_at": "2020-11-11T02:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418266",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:90'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|
|[ecde605](https://github.com/sagemath/sagetrac-mirror/commit/ecde60526b1c8da6e4b4914dcea50fd7e68e24a4)|`Merge branch 't/29850/install_sage_env_config_with_sage_conf' into t/30888/remove_unused_env_variable_sage_scripts_dir`|
|[a318e9e](https://github.com/sagemath/sagetrac-mirror/commit/a318e9e3c03bc466f966965df378ff4685ff6d12)|`src/bin/sage-env: Do not set SAGE_SCRIPTS_DIR`|
|[122bf78](https://github.com/sagemath/sagetrac-mirror/commit/122bf7890c17de88de973be8ac9c5165e9d47447)|`Merge branch 't/30888/remove_unused_env_variable_sage_scripts_dir' into t/22731/22731`|



---

archive/issue_comments_418267.json:
```json
{
    "body": "Changing commit from \"6348c5c7c0eb2caba9f72f511847bea550b23709\" to \"122bf7890c17de88de973be8ac9c5165e9d47447\"",
    "created_at": "2020-11-11T02:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418267",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6348c5c7c0eb2caba9f72f511847bea550b23709" to "122bf7890c17de88de973be8ac9c5165e9d47447"



---

archive/issue_comments_418268.json:
```json
{
    "body": "Changing dependencies from \"#29850\" to \"#29850, #30888\"",
    "created_at": "2020-11-11T02:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418268",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29850" to "#29850, #30888"



---

archive/issue_comments_418269.json:
```json
{
    "body": "<a id='comment:92'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-11-11T19:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418269",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:92'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_418270.json:
```json
{
    "body": "Changing commit from \"122bf7890c17de88de973be8ac9c5165e9d47447\" to \"6348c5c7c0eb2caba9f72f511847bea550b23709\"",
    "created_at": "2020-11-11T19:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418270",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "122bf7890c17de88de973be8ac9c5165e9d47447" to "6348c5c7c0eb2caba9f72f511847bea550b23709"



---

archive/issue_comments_418271.json:
```json
{
    "body": "Changing dependencies from \"#29850, #30888\" to \"#29850\"",
    "created_at": "2020-11-11T19:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418271",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29850, #30888" to "#29850"



---

archive/issue_comments_418272.json:
```json
{
    "body": "<a id='comment:94'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|\n|[8f88709](https://github.com/sagemath/sagetrac-mirror/commit/8f88709ed014c3af84ae5b3cbb26f1a1dbbbe53d)|`src/bin/sage: Only source sage-env-config if it exists`|\n|[ab2655e](https://github.com/sagemath/sagetrac-mirror/commit/ab2655ea81257c333d3fdf2613d99c4ec2b343d7)|`src/bin/sage: Use python3 etc. from PATH instead of using SAGE_LOCAL`|\n|[4577f37](https://github.com/sagemath/sagetrac-mirror/commit/4577f37111f99e5733dd1c909e6e3a79dfe2163d)|`src/bin/sage-env: Make sage-env-config optional`|\n|[c35c170](https://github.com/sagemath/sagetrac-mirror/commit/c35c170a7b7607187a5b5bb03f3bc3863555eb52)|`sage.env: Add SAGE_VENV`|\n|[c585d94](https://github.com/sagemath/sagetrac-mirror/commit/c585d94b95c5675f5a68690d13fa6a949642c48f)|`src/sage: Replace some SAGE_LOCAL by SAGE_VENV`|",
    "created_at": "2020-11-12T18:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418272",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:94'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------|
|[8f88709](https://github.com/sagemath/sagetrac-mirror/commit/8f88709ed014c3af84ae5b3cbb26f1a1dbbbe53d)|`src/bin/sage: Only source sage-env-config if it exists`|
|[ab2655e](https://github.com/sagemath/sagetrac-mirror/commit/ab2655ea81257c333d3fdf2613d99c4ec2b343d7)|`src/bin/sage: Use python3 etc. from PATH instead of using SAGE_LOCAL`|
|[4577f37](https://github.com/sagemath/sagetrac-mirror/commit/4577f37111f99e5733dd1c909e6e3a79dfe2163d)|`src/bin/sage-env: Make sage-env-config optional`|
|[c35c170](https://github.com/sagemath/sagetrac-mirror/commit/c35c170a7b7607187a5b5bb03f3bc3863555eb52)|`sage.env: Add SAGE_VENV`|
|[c585d94](https://github.com/sagemath/sagetrac-mirror/commit/c585d94b95c5675f5a68690d13fa6a949642c48f)|`src/sage: Replace some SAGE_LOCAL by SAGE_VENV`|



---

archive/issue_comments_418273.json:
```json
{
    "body": "Changing commit from \"6348c5c7c0eb2caba9f72f511847bea550b23709\" to \"c585d94b95c5675f5a68690d13fa6a949642c48f\"",
    "created_at": "2020-11-12T18:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418273",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6348c5c7c0eb2caba9f72f511847bea550b23709" to "c585d94b95c5675f5a68690d13fa6a949642c48f"



---

archive/issue_comments_418274.json:
```json
{
    "body": "Changing dependencies from \"#29850\" to \"#29951\"",
    "created_at": "2020-11-12T18:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418274",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29850" to "#29951"



---

archive/issue_comments_418275.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,6 +12,9 @@\n \n **In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n \n+We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.\n+\n+\n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n``````\n",
    "created_at": "2020-11-12T18:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418275",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,6 +12,9 @@
 
 **In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
 
+We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.
+
+
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
 - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
``````




---

archive/issue_comments_418276.json:
```json
{
    "body": "<a id='comment:95'></a>\nPicked some changes from #29850, rebased away from it.",
    "created_at": "2020-11-12T18:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418276",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:95'></a>
Picked some changes from #29850, rebased away from it.



---

archive/issue_comments_418277.json:
```json
{
    "body": "Changing commit from \"c585d94b95c5675f5a68690d13fa6a949642c48f\" to \"2fd195f5f044d125b0d5a743fec9d79e449126af\"",
    "created_at": "2020-11-12T18:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418277",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c585d94b95c5675f5a68690d13fa6a949642c48f" to "2fd195f5f044d125b0d5a743fec9d79e449126af"



---

archive/issue_comments_418278.json:
```json
{
    "body": "<a id='comment:96'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[2fd195f](https://github.com/sagemath/sagetrac-mirror/commit/2fd195f5f044d125b0d5a743fec9d79e449126af)|`src/bin/sage: Fix reference to trac ticket`|",
    "created_at": "2020-11-12T18:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418278",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:96'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[2fd195f](https://github.com/sagemath/sagetrac-mirror/commit/2fd195f5f044d125b0d5a743fec9d79e449126af)|`src/bin/sage: Fix reference to trac ticket`|



---

archive/issue_comments_418279.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,6 +17,6 @@\n \n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n-- #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n+- #30013 `src/bin/sage-env`: Make sure `$SAGE_VENV/bin` is at the beginning of the PATH\n - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n - #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv\n``````\n",
    "created_at": "2020-11-12T18:40:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418279",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,6 +17,6 @@
 
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
-- #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
+- #30013 `src/bin/sage-env`: Make sure `$SAGE_VENV/bin` is at the beginning of the PATH
 - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
 - #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv
``````




---

archive/issue_comments_418280.json:
```json
{
    "body": "<a id='comment:98'></a>\nAlthough the ticket description is long, the actual changes on top of #29951 are very small. Essentially, the `sage` script now relies on the `PATH` set by `sage-env` instead of hardcoding the directory where `python3` etc. is located. `$SAGE_VENV/bin` is used explicitly only in a few places that need an absolute filename.\n\nReady for review",
    "created_at": "2020-11-12T18:55:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418280",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:98'></a>
Although the ticket description is long, the actual changes on top of #29951 are very small. Essentially, the `sage` script now relies on the `PATH` set by `sage-env` instead of hardcoding the directory where `python3` etc. is located. `$SAGE_VENV/bin` is used explicitly only in a few places that need an absolute filename.

Ready for review



---

archive/issue_comments_418281.json:
```json
{
    "body": "<a id='comment:99'></a>\nCodewise this looks good to me, but may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable as it's not clear from the context when to use which.\n\nMoreover, I was wondering if it makes sense to provide only a variable `SAGE_VENV_BIN` pointing to the binary folder in the venv (since at least from your ticket description and code changes would be sufficient and parallels the upcoming `SAGE_BIN`).\n\nNeeds another review as I'm not yet that familiar with sages inner workings.",
    "created_at": "2020-11-12T21:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418281",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:99'></a>
Codewise this looks good to me, but may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable as it's not clear from the context when to use which.

Moreover, I was wondering if it makes sense to provide only a variable `SAGE_VENV_BIN` pointing to the binary folder in the venv (since at least from your ticket description and code changes would be sufficient and parallels the upcoming `SAGE_BIN`).

Needs another review as I'm not yet that familiar with sages inner workings.



---

archive/issue_comments_418282.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Tobias Diez,\"",
    "created_at": "2020-11-12T21:34:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418282",
    "user": "https://github.com/tobiasdiez"
}
```

Changing reviewer from "" to "Tobias Diez,"



---

archive/issue_comments_418283.json:
```json
{
    "body": "Changing commit from \"2fd195f5f044d125b0d5a743fec9d79e449126af\" to \"f3b7a9cce247457f07ef42069cdadb3f6409b008\"",
    "created_at": "2020-11-13T01:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418283",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2fd195f5f044d125b0d5a743fec9d79e449126af" to "f3b7a9cce247457f07ef42069cdadb3f6409b008"



---

archive/issue_comments_418284.json:
```json
{
    "body": "<a id='comment:0'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[f3b7a9c](https://github.com/sagemath/sagetrac-mirror/commit/f3b7a9cce247457f07ef42069cdadb3f6409b008)|`src/sage/env.py: Add documentation`|",
    "created_at": "2020-11-13T01:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418284",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[f3b7a9c](https://github.com/sagemath/sagetrac-mirror/commit/f3b7a9cce247457f07ef42069cdadb3f6409b008)|`src/sage/env.py: Add documentation`|



---

archive/issue_comments_418285.json:
```json
{
    "body": "<a id='comment:101'></a>\nReplying to [gh-tobiasdiez](#comment%3A99):\n> ... may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable \n\n\nDone, please take a look",
    "created_at": "2020-11-13T01:27:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418285",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:101'></a>
Replying to [gh-tobiasdiez](#comment%3A99):
> ... may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable 


Done, please take a look



---

archive/issue_comments_418286.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n \n **2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)\n \n-**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (using `$SAGE_VENV/bin` directly instead of going through `SAGE_VENV_SCRIPTS_DIR`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n \n We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.\n \n``````\n",
    "created_at": "2020-11-13T01:30:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418286",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 
 **2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)
 
-**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (using `$SAGE_VENV/bin` directly instead of going through `SAGE_VENV_SCRIPTS_DIR`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
 
 We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.
 
``````




---

archive/issue_comments_418287.json:
```json
{
    "body": "<a id='comment:103'></a>\nReplying to [gh-tobiasdiez](#comment%3A99):\n> I was wondering if it makes sense to provide only a variable `SAGE_VENV_BIN` pointing to the binary folder in the venv (since at least from your ticket description and code changes would be sufficient and parallels the upcoming `SAGE_BIN`).\n\nSure, that will make sense to do in the follow-up ticket regarding `SAGE_BIN` (if the downstream packagers still need that...)",
    "created_at": "2020-11-13T01:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418287",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:103'></a>
Replying to [gh-tobiasdiez](#comment%3A99):
> I was wondering if it makes sense to provide only a variable `SAGE_VENV_BIN` pointing to the binary folder in the venv (since at least from your ticket description and code changes would be sufficient and parallels the upcoming `SAGE_BIN`).

Sure, that will make sense to do in the follow-up ticket regarding `SAGE_BIN` (if the downstream packagers still need that...)



---

archive/issue_comments_418288.json:
```json
{
    "body": "Changing reviewer from \"Tobias Diez,\" to \"Tobias Diez, ...\"",
    "created_at": "2020-11-13T01:35:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418288",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "Tobias Diez," to "Tobias Diez, ..."



---

archive/issue_comments_418289.json:
```json
{
    "body": "<a id='comment:105'></a>\nReplying to [mkoeppe](#comment%3A101):\n> Replying to [gh-tobiasdiez](#comment%3A99):\n> > ... may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable \n  \n> \n> Done, please take a look\n\n\nThanks! Looks good.",
    "created_at": "2020-11-13T09:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418289",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:105'></a>
Replying to [mkoeppe](#comment%3A101):
> Replying to [gh-tobiasdiez](#comment%3A99):
> > ... may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable 
  
> 
> Done, please take a look


Thanks! Looks good.



---

archive/issue_comments_418290.json:
```json
{
    "body": "<a id='comment:8'></a>\nrunning\n\n```\n$ grep SAGE_LOCAL/bin build/ -R\n```\nreturns quite a few hits, mostly in  build/pkgs/\n\nShouldn't most of these be replaced with `SAGE_BIN` ?",
    "created_at": "2020-11-18T12:09:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418290",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>
running

```
$ grep SAGE_LOCAL/bin build/ -R
```
returns quite a few hits, mostly in  build/pkgs/

Shouldn't most of these be replaced with `SAGE_BIN` ?



---

archive/issue_comments_418291.json:
```json
{
    "body": "<a id='comment:9'></a>\nSee ticket description - \"In this ticket, ...\"",
    "created_at": "2020-11-18T19:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418291",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
See ticket description - "In this ticket, ..."



---

archive/issue_comments_418292.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-19T13:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418292",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_418293.json:
```json
{
    "body": "<a id='comment:0'></a>\nOK, fine",
    "created_at": "2020-11-19T13:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418293",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:0'></a>
OK, fine



---

archive/issue_comments_418294.json:
```json
{
    "body": "Changing reviewer from \"Tobias Diez, ...\" to \"Tobias Diez, Dima Pasechnik\"",
    "created_at": "2020-11-19T13:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418294",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "Tobias Diez, ..." to "Tobias Diez, Dima Pasechnik"



---

archive/issue_comments_418295.json:
```json
{
    "body": "<a id='comment:1'></a>\nThanks!",
    "created_at": "2020-11-19T17:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418295",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
Thanks!



---

archive/issue_comments_418296.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-22T15:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418296",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_418297.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/22731\" to \"f3b7a9cce247457f07ef42069cdadb3f6409b008\"",
    "created_at": "2020-11-22T15:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418297",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/22731" to "f3b7a9cce247457f07ef42069cdadb3f6409b008"



---

archive/issue_events_075154.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-22T15:06:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75154"
}
```



---

archive/issue_comments_418298.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2020-11-22T16:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418298",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_418299.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2020-11-22T16:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418299",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_075155.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-22T16:05:36Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75155"
}
```



---

archive/issue_comments_418300.json:
```json
{
    "body": "<a id='comment:3'></a>\n\n```\n$ git clean -f -d -x .\n$ ./bootstrap -d\nrm -rf config configure build/make/Makefile-auto.in\nrm -f src/doc/en/installation/*.txt\nrm -rf src/doc/en/reference/spkg/*.rst\nrm -f src/doc/en/reference/repl/*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/arch*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/debian*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/fedora*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/cygwin*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/homebrew*.txt\nsrc/doc/bootstrap:70: installing src/doc/en/reference/spkg/*.rst\nsrc/doc/bootstrap:102: installing src/doc/en/reference/repl/options.txt\nError: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this\nError setting environment variables by sourcing '/Users/vbraun/Sage/src/bin/sage-env';\npossibly contact sage-devel (see http://groups.google.com/group/sage-devel).\n```",
    "created_at": "2020-11-22T16:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418300",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:3'></a>

```
$ git clean -f -d -x .
$ ./bootstrap -d
rm -rf config configure build/make/Makefile-auto.in
rm -f src/doc/en/installation/*.txt
rm -rf src/doc/en/reference/spkg/*.rst
rm -f src/doc/en/reference/repl/*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/arch*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/debian*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/fedora*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/cygwin*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/homebrew*.txt
src/doc/bootstrap:70: installing src/doc/en/reference/spkg/*.rst
src/doc/bootstrap:102: installing src/doc/en/reference/repl/options.txt
Error: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this
Error setting environment variables by sourcing '/Users/vbraun/Sage/src/bin/sage-env';
possibly contact sage-devel (see http://groups.google.com/group/sage-devel).
```



---

archive/issue_comments_418301.json:
```json
{
    "body": "Changing branch from \"f3b7a9cce247457f07ef42069cdadb3f6409b008\" to \"u/mkoeppe/22731\"",
    "created_at": "2020-11-22T16:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418301",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "f3b7a9cce247457f07ef42069cdadb3f6409b008" to "u/mkoeppe/22731"



---

archive/issue_comments_418302.json:
```json
{
    "body": "<a id='comment:4'></a>\nI noticed it as well in sage-on-gentoo. I was trying to minimize the patch to `bin/sage` but that got me. This is ultimately caused by the last line of `src/doc/bootstrap`\n\n```\n./sage -advanced > \"$OUTPUT\"\n```\nWhy is this line needed, I am wondering?",
    "created_at": "2020-11-22T20:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418302",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'></a>
I noticed it as well in sage-on-gentoo. I was trying to minimize the patch to `bin/sage` but that got me. This is ultimately caused by the last line of `src/doc/bootstrap`

```
./sage -advanced > "$OUTPUT"
```
Why is this line needed, I am wondering?



---

archive/issue_comments_418303.json:
```json
{
    "body": "<a id='comment:115'></a>\nReplying to [fbissey](#comment%3A114):\n> This is ultimately caused by the last line of `src/doc/bootstrap`\n> \n> ```\n> ./sage -advanced > \"$OUTPUT\"\n> ```\n> Why is this line needed, I am wondering?\n\n\nIt generates part of the documentation.",
    "created_at": "2020-11-22T21:46:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418303",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:115'></a>
Replying to [fbissey](#comment%3A114):
> This is ultimately caused by the last line of `src/doc/bootstrap`
> 
> ```
> ./sage -advanced > "$OUTPUT"
> ```
> Why is this line needed, I am wondering?


It generates part of the documentation.



---

archive/issue_comments_418304.json:
```json
{
    "body": "<a id='comment:6'></a>\nIs at the error point the value of `SAGE_SCRIPTS_DIR` already known?",
    "created_at": "2020-11-22T22:23:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418304",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>
Is at the error point the value of `SAGE_SCRIPTS_DIR` already known?



---

archive/issue_comments_418305.json:
```json
{
    "body": "<a id='comment:7'></a>\nI see how it is used now. And no, `SAGE_SCRIPTS_DIR` or anything like that is not known, we are bootstrapping the documentation, which you should be able to do before running configure.\n\nSome dummy values could be set in the bootstrap script on the assumption you do that on a clean tree.",
    "created_at": "2020-11-22T22:26:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418305",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
I see how it is used now. And no, `SAGE_SCRIPTS_DIR` or anything like that is not known, we are bootstrapping the documentation, which you should be able to do before running configure.

Some dummy values could be set in the bootstrap script on the assumption you do that on a clean tree.



---

archive/issue_comments_418306.json:
```json
{
    "body": "<a id='comment:8'></a>\nThe problem is solved in #30013, so I need to move some of the changes to this ticket.",
    "created_at": "2020-11-22T22:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418306",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
The problem is solved in #30013, so I need to move some of the changes to this ticket.



---

archive/issue_comments_418307.json:
```json
{
    "body": "<a id='comment:119'></a>\nReplying to [mkoeppe](#comment%3A118):\n> The problem is solved in #30013, so I need to move some of the changes to this ticket.\n\n\nYes, it looks like it would help.",
    "created_at": "2020-11-22T22:35:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418307",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:119'></a>
Replying to [mkoeppe](#comment%3A118):
> The problem is solved in #30013, so I need to move some of the changes to this ticket.


Yes, it looks like it would help.



---

archive/issue_comments_418308.json:
```json
{
    "body": "<a id='comment:0'></a>\nI will work on this after the next beta comes out.",
    "created_at": "2020-11-22T22:40:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418308",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
I will work on this after the next beta comes out.



---

archive/issue_comments_418309.json:
```json
{
    "body": "<a id='comment:1'></a>\nAnyhow, just in case, here one could do\n\n```diff\n--- a/bootstrap\n+++ b/bootstrap\n@@ -113,6 +113,8 @@ SAGE_SPKG_CONFIGURE_$(echo ${pkgname} | tr '[a-z]' '[A-Z]')\"\n     # ONLY stderr, and to re-output the results back to stderr leaving\n     # stdout alone. Basically we swap the two descriptors using a\n     # third, filter, and then swap them back.\n+    touch src/bin/sage-env-config\n+    SAGE_SCRIPTS_DIR=./src/bin\n     BOOTSTRAP_QUIET=\"${BOOTSTRAP_QUIET}\" \\\n     SAGE_ROOT=\"$SAGE_ROOT\" \\\n     src/doc/bootstrap && \\\n```\nand it all goes through.",
    "created_at": "2020-11-22T22:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418309",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>
Anyhow, just in case, here one could do

```diff
--- a/bootstrap
+++ b/bootstrap
@@ -113,6 +113,8 @@ SAGE_SPKG_CONFIGURE_$(echo ${pkgname} | tr '[a-z]' '[A-Z]')"
     # ONLY stderr, and to re-output the results back to stderr leaving
     # stdout alone. Basically we swap the two descriptors using a
     # third, filter, and then swap them back.
+    touch src/bin/sage-env-config
+    SAGE_SCRIPTS_DIR=./src/bin
     BOOTSTRAP_QUIET="${BOOTSTRAP_QUIET}" \
     SAGE_ROOT="$SAGE_ROOT" \
     src/doc/bootstrap && \
```
and it all goes through.



---

archive/issue_comments_418310.json:
```json
{
    "body": "Changing commit from \"f3b7a9cce247457f07ef42069cdadb3f6409b008\" to \"1fe77a819d2477bf4b53d228388a4ff3e2c7c45d\"",
    "created_at": "2020-11-23T02:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418310",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f3b7a9cce247457f07ef42069cdadb3f6409b008" to "1fe77a819d2477bf4b53d228388a4ff3e2c7c45d"



---

archive/issue_comments_418311.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[1fe77a8](https://github.com/sagemath/sagetrac-mirror/commit/1fe77a819d2477bf4b53d228388a4ff3e2c7c45d)|`src/bin/sage-env: Do not set SAGE_SCRIPTS_DIR`|",
    "created_at": "2020-11-23T02:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418311",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[1fe77a8](https://github.com/sagemath/sagetrac-mirror/commit/1fe77a819d2477bf4b53d228388a4ff3e2c7c45d)|`src/bin/sage-env: Do not set SAGE_SCRIPTS_DIR`|



---

archive/issue_comments_418312.json:
```json
{
    "body": "<a id='comment:3'></a>\nCherry-picked a commit from the original branch of #30888, where it was observed that\n`SAGE_SCRIPTS_DIR` is currently unused because the feature introduced in #25486 (\"Discover `SAGE_SCRIPTS_DIR` to make `$SAGE_LOCAL/bin/sage` work from any directory, in an environment without `SAGE_*` variables\") was killed by #30128.\n(#30888 will re-introduce this feature using a different mechanism.)",
    "created_at": "2020-11-23T02:09:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418312",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
Cherry-picked a commit from the original branch of #30888, where it was observed that
`SAGE_SCRIPTS_DIR` is currently unused because the feature introduced in #25486 ("Discover `SAGE_SCRIPTS_DIR` to make `$SAGE_LOCAL/bin/sage` work from any directory, in an environment without `SAGE_*` variables") was killed by #30128.
(#30888 will re-introduce this feature using a different mechanism.)



---

archive/issue_comments_418313.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-23T02:09:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418313",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_418314.json:
```json
{
    "body": "Changing commit from \"1fe77a819d2477bf4b53d228388a4ff3e2c7c45d\" to \"38eebc3d9f790c81b8ffcc963cf2513184c9ae6a\"",
    "created_at": "2020-11-25T00:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418314",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1fe77a819d2477bf4b53d228388a4ff3e2c7c45d" to "38eebc3d9f790c81b8ffcc963cf2513184c9ae6a"



---

archive/issue_comments_418315.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[38eebc3](https://github.com/sagemath/sagetrac-mirror/commit/38eebc3d9f790c81b8ffcc963cf2513184c9ae6a)|`Merge tag '9.3.beta2' into t/22731/22731`|",
    "created_at": "2020-11-25T00:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418315",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[38eebc3](https://github.com/sagemath/sagetrac-mirror/commit/38eebc3d9f790c81b8ffcc963cf2513184c9ae6a)|`Merge tag '9.3.beta2' into t/22731/22731`|



---

archive/issue_comments_418316.json:
```json
{
    "body": "<a id='comment:5'></a>\nMerged the latest beta. Ready for another round of review.",
    "created_at": "2020-11-25T00:54:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418316",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Merged the latest beta. Ready for another round of review.



---

archive/issue_comments_418317.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-25T19:12:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418317",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_418318.json:
```json
{
    "body": "<a id='comment:6'></a>\nthis works, after \"git clean\" as above, too.",
    "created_at": "2020-11-25T19:12:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418318",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:6'></a>
this works, after "git clean" as above, too.



---

archive/issue_comments_418319.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks!",
    "created_at": "2020-11-25T19:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418319",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Thanks!



---

archive/issue_events_075156.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-05T22:13:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/22731#event-75156"
}
```



---

archive/issue_comments_418320.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/22731\" to \"38eebc3d9f790c81b8ffcc963cf2513184c9ae6a\"",
    "created_at": "2020-12-05T22:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418320",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/22731" to "38eebc3d9f790c81b8ffcc963cf2513184c9ae6a"



---

archive/issue_comments_418321.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-12-05T22:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22731#issuecomment-418321",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
