# Issue 22731: Replace "$SAGE_LOCAL/bin" by more specific variables to make Sage easier to package, use in venvs

archive/issues_022494.json:
```json
{
    "assignees": [],
    "body": "Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.\n\n**1a.** Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n\n**1b.** (Wishlist item:) Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n\n**2a.** Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). As proposed in #29013, we use the variable `SAGE_VENV` for this, so these scripts would be referred to as `$SAGE_VENV/bin/sage-eval` etc.\n\n**2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.\n\n**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)\n\n**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (using `$SAGE_VENV/bin` directly instead of going through `SAGE_VENV_SCRIPTS_DIR`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n\nWe also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.\n\n\nSee also:\n- https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n- #30013 `src/bin/sage-env`: Make sure `$SAGE_VENV/bin` is at the beginning of the PATH\n- #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n- #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv\n\nDepends on #29951\n\nCC:  @mkoeppe @jhpalmieri @orlitzky @tobiasdiez @isuruf @antonio-rojas @mwageringel\n\nBranch/Commit: **[38eebc3](https://github.com/sagemath/sagetrac-mirror/commit/38eebc3d9f790c81b8ffcc963cf2513184c9ae6a)**\n\nReviewer: **Tobias Diez, Dima Pasechnik**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **porting**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22731_\n\n",
    "closed_at": "2020-12-05T22:13:22Z",
    "created_at": "2017-03-31T20:38:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Replace \"$SAGE_LOCAL/bin\" by more specific variables to make Sage easier to package, use in venvs",
    "type": "issue",
    "updated_at": "2020-12-05T22:13:22Z",
    "url": "https://github.com/sagemath/sage/issues/22731",
    "user": "https://github.com/tobihan"
}
```
Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.

**1a.** Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.

**1b.** (Wishlist item:) Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 

**2a.** Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). As proposed in #29013, we use the variable `SAGE_VENV` for this, so these scripts would be referred to as `$SAGE_VENV/bin/sage-eval` etc.

**2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.

**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)

**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (using `$SAGE_VENV/bin` directly instead of going through `SAGE_VENV_SCRIPTS_DIR`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.

We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.


See also:
- https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
- #30013 `src/bin/sage-env`: Make sure `$SAGE_VENV/bin` is at the beginning of the PATH
- #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
- #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv

Depends on #29951

CC:  @mkoeppe @jhpalmieri @orlitzky @tobiasdiez @isuruf @antonio-rojas @mwageringel

Branch/Commit: **[38eebc3](https://github.com/sagemath/sagetrac-mirror/commit/38eebc3d9f790c81b8ffcc963cf2513184c9ae6a)**

Reviewer: **Tobias Diez, Dima Pasechnik**

Author: **Matthias Koeppe**

Component: **porting**

_Issue created by migration from https://trac.sagemath.org/ticket/22731_





---

archive/issue_events_317317.json:
```json
{
    "actor": "https://github.com/tobihan",
    "created_at": "2017-03-31T20:38:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317317"
}
```



---

archive/issue_events_317318.json:
```json
{
    "actor": "https://github.com/tobihan",
    "created_at": "2017-03-31T20:38:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317318"
}
```



---

archive/issue_comments_338176.json:
```json
{
    "body": "Branch: **[u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_](https://github.com/sagemath/sagetrac-mirror/tree/u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_)**",
    "created_at": "2017-03-31T20:49:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338176",
    "user": "https://github.com/tobihan"
}
```

Branch: **[u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_](https://github.com/sagemath/sagetrac-mirror/tree/u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_)**



---

archive/issue_comments_338177.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-\n+Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.\n+    \n+SAGE_SCRIPTS_DIR is already being defined in sage-env. With these changes Linux distros can install sage to /usr/bin and the other scripts somewhere else.\n``````\n",
    "created_at": "2017-03-31T20:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338177",
    "user": "https://github.com/tobihan"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-
+Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.
+    
+SAGE_SCRIPTS_DIR is already being defined in sage-env. With these changes Linux distros can install sage to /usr/bin and the other scripts somewhere else.
``````




---

archive/issue_events_317319.json:
```json
{
    "actor": "https://github.com/tobihan",
    "created_at": "2017-03-31T20:54:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317319"
}
```



---

archive/issue_events_317320.json:
```json
{
    "actor": "https://github.com/tobihan",
    "created_at": "2017-03-31T20:54:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317320"
}
```



---

archive/issue_comments_338178.json:
```json
{
    "body": "Author: **Tobias Hanen**",
    "created_at": "2017-03-31T20:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338178",
    "user": "https://github.com/tobihan"
}
```

Author: **Tobias Hanen**



---

archive/issue_events_317321.json:
```json
{
    "actor": "https://github.com/tobihan",
    "created_at": "2017-03-31T20:54:44Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "title_is": "Allow installation of sage scripts to an arbitrary location by using SAGE_SCRIPTS_DIR.",
    "title_was": "Allow installation of sage scripts to an arbotrary location by using SAGE_SCRIPTS_DIR.",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317321"
}
```



---

archive/issue_events_317322.json:
```json
{
    "actor": "https://github.com/tobihan",
    "created_at": "2017-03-31T20:54:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317322"
}
```



---

archive/issue_events_317323.json:
```json
{
    "actor": "https://github.com/tobihan",
    "created_at": "2017-03-31T20:54:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317323"
}
```



---

archive/issue_comments_338179.json:
```json
{
    "body": "Commit: **[6ae9bf1](https://github.com/sagemath/sagetrac-mirror/commit/6ae9bf199cc52f40a59913222876bd6d98ffd011)**",
    "created_at": "2017-03-31T20:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338179",
    "user": "https://github.com/tobihan"
}
```

Commit: **[6ae9bf1](https://github.com/sagemath/sagetrac-mirror/commit/6ae9bf199cc52f40a59913222876bd6d98ffd011)**



---

archive/issue_comments_338180.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ae9bf199cc52f40a59913222876bd6d98ffd011\">6ae9bf1</a></td><td><code>Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.</code></td></tr></table>\n",
    "created_at": "2017-03-31T20:54:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338180",
    "user": "https://github.com/tobihan"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ae9bf199cc52f40a59913222876bd6d98ffd011">6ae9bf1</a></td><td><code>Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.</code></td></tr></table>




---

archive/issue_events_317324.json:
```json
{
    "actor": "https://github.com/tobihan",
    "created_at": "2017-03-31T20:54:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20scripts",
    "label_color": "000080",
    "label_name": "c: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317324"
}
```



---

archive/issue_comments_338181.json:
```json
{
    "body": "Changed author from **Tobias Hanen** to **Tobias Hansen**",
    "created_at": "2017-03-31T20:55:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338181",
    "user": "https://github.com/tobihan"
}
```

Changed author from **Tobias Hanen** to **Tobias Hansen**



---

archive/issue_comments_338182.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe name `SAGE_SCRIPTS_DIR` refers to the scripts of Sage itself. It is only meant to find `sage-env` and friends, nothing more.\n\nNow, if you want a invent a *new* variable with the purpose of defining the bindir (to replace `SAGE_LOCAL/bin`), that's fine. Just don't call it `SAGE_SCRIPTS_DIR`.",
    "created_at": "2017-04-01T10:44:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338182",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4" align="right">comment:4</div>

The name `SAGE_SCRIPTS_DIR` refers to the scripts of Sage itself. It is only meant to find `sage-env` and friends, nothing more.

Now, if you want a invent a *new* variable with the purpose of defining the bindir (to replace `SAGE_LOCAL/bin`), that's fine. Just don't call it `SAGE_SCRIPTS_DIR`.



---

archive/issue_events_317325.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-04-01T10:44:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317325"
}
```



---

archive/issue_events_317326.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-04-01T10:44:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317326"
}
```



---

archive/issue_events_317327.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-04-01T10:44:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20scripts",
    "label_color": "000080",
    "label_name": "c: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317327"
}
```



---

archive/issue_events_317328.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-04-01T10:44:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting",
    "label_color": "000080",
    "label_name": "c: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317328"
}
```



---

archive/issue_comments_338183.json:
```json
{
    "body": "Changed branch from **[u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_](https://github.com/sagemath/sagetrac-mirror/tree/u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_)** to **[u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_)**",
    "created_at": "2018-04-01T20:51:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338183",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_](https://github.com/sagemath/sagetrac-mirror/tree/u/thansen/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_)** to **[u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_)**



---

archive/issue_comments_338184.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/502f6abb14c4088bc6fe9cd9610400725af93c54\">502f6ab</a></td><td><code>Rename SAGE_SCRIPTS_DIR to SAGE_BIN in places where we are not looking for sage-env's friends</code></td></tr></table>\n",
    "created_at": "2018-04-01T21:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338184",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/502f6abb14c4088bc6fe9cd9610400725af93c54">502f6ab</a></td><td><code>Rename SAGE_SCRIPTS_DIR to SAGE_BIN in places where we are not looking for sage-env's friends</code></td></tr></table>




---

archive/issue_comments_338185.json:
```json
{
    "body": "Changed commit from **[6ae9bf1](https://github.com/sagemath/sagetrac-mirror/commit/6ae9bf199cc52f40a59913222876bd6d98ffd011)** to **[502f6ab](https://github.com/sagemath/sagetrac-mirror/commit/502f6abb14c4088bc6fe9cd9610400725af93c54)**",
    "created_at": "2018-04-01T21:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338185",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6ae9bf1](https://github.com/sagemath/sagetrac-mirror/commit/6ae9bf199cc52f40a59913222876bd6d98ffd011)** to **[502f6ab](https://github.com/sagemath/sagetrac-mirror/commit/502f6abb14c4088bc6fe9cd9610400725af93c54)**



---

archive/issue_comments_338186.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI have not had a chance to try this out locally (as my Sage is rebuilding.) Is this more or less what you had in mind jdemeyer?",
    "created_at": "2018-04-01T21:30:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338186",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:7" align="right">comment:7</div>

I have not had a chance to try this out locally (as my Sage is rebuilding.) Is this more or less what you had in mind jdemeyer?



---

archive/issue_events_317329.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-01T21:30:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317329"
}
```



---

archive/issue_events_317330.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-01T21:30:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317330"
}
```



---

archive/issue_comments_338187.json:
```json
{
    "body": "Changed author from **Tobias Hansen** to **Tobias Hansen, Julian R\u00fcth**",
    "created_at": "2018-04-01T21:30:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338187",
    "user": "https://github.com/saraedum"
}
```

Changed author from **Tobias Hansen** to **Tobias Hansen, Julian Rüth**



---

archive/issue_comments_338188.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07649aa427423892463eda682346cdc2f5f93296\">07649aa</a></td><td><code>Replace more occurences of SAGE_LOCAL/bin with SAGE_BIN</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b6d51fce967cea3a2d9163561925bca251cf6a3\">7b6d51f</a></td><td><code>Fixed typos related to SAGE_BIN</code></td></tr></table>\n",
    "created_at": "2018-04-02T08:15:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338188",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07649aa427423892463eda682346cdc2f5f93296">07649aa</a></td><td><code>Replace more occurences of SAGE_LOCAL/bin with SAGE_BIN</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b6d51fce967cea3a2d9163561925bca251cf6a3">7b6d51f</a></td><td><code>Fixed typos related to SAGE_BIN</code></td></tr></table>




---

archive/issue_comments_338189.json:
```json
{
    "body": "Changed commit from **[502f6ab](https://github.com/sagemath/sagetrac-mirror/commit/502f6abb14c4088bc6fe9cd9610400725af93c54)** to **[7b6d51f](https://github.com/sagemath/sagetrac-mirror/commit/7b6d51fce967cea3a2d9163561925bca251cf6a3)**",
    "created_at": "2018-04-02T08:15:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338189",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[502f6ab](https://github.com/sagemath/sagetrac-mirror/commit/502f6abb14c4088bc6fe9cd9610400725af93c54)** to **[7b6d51f](https://github.com/sagemath/sagetrac-mirror/commit/7b6d51fce967cea3a2d9163561925bca251cf6a3)**



---

archive/issue_comments_338190.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nIt makes no sense to add both `$SAGE_LOCAL/bin` and `$SAGE_BIN` to the `PATH`. The whole point should be to replace `$SAGE_LOCAL/bin` by `$SAGE_BIN`.",
    "created_at": "2018-04-02T08:20:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338190",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

It makes no sense to add both `$SAGE_LOCAL/bin` and `$SAGE_BIN` to the `PATH`. The whole point should be to replace `$SAGE_LOCAL/bin` by `$SAGE_BIN`.



---

archive/issue_comments_338191.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b91dbcb58ff20256f37f3a73f9c97713240abcd9\">b91dbcb</a></td><td><code>Drop SAGE_LOCAL/bin from PATH</code></td></tr></table>\n",
    "created_at": "2018-04-02T08:27:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338191",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b91dbcb58ff20256f37f3a73f9c97713240abcd9">b91dbcb</a></td><td><code>Drop SAGE_LOCAL/bin from PATH</code></td></tr></table>




---

archive/issue_comments_338192.json:
```json
{
    "body": "Changed commit from **[7b6d51f](https://github.com/sagemath/sagetrac-mirror/commit/7b6d51fce967cea3a2d9163561925bca251cf6a3)** to **[b91dbcb](https://github.com/sagemath/sagetrac-mirror/commit/b91dbcb58ff20256f37f3a73f9c97713240abcd9)**",
    "created_at": "2018-04-02T08:27:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338192",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7b6d51f](https://github.com/sagemath/sagetrac-mirror/commit/7b6d51fce967cea3a2d9163561925bca251cf6a3)** to **[b91dbcb](https://github.com/sagemath/sagetrac-mirror/commit/b91dbcb58ff20256f37f3a73f9c97713240abcd9)**



---

archive/issue_comments_338193.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n1. You need to define `SAGE_BIN` somewhere in `sage-env`\n\n2. This conflicts with #25056",
    "created_at": "2018-04-02T08:39:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338193",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:11" align="right">comment:11</div>

1. You need to define `SAGE_BIN` somewhere in `sage-env`

2. This conflicts with #25056



---

archive/issue_events_317331.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-02T08:39:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317331"
}
```



---

archive/issue_events_317332.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-02T08:39:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317332"
}
```



---

archive/issue_events_317333.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-02T08:39:27Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "title_is": "New environment variable SAGE_BIN",
    "title_was": "Allow installation of sage scripts to an arbitrary location by using SAGE_SCRIPTS_DIR.",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317333"
}
```



---

archive/issue_comments_338194.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.\n+Use `SAGE_BIN` in more places and define a fallback in `env.py`.\n     \n-SAGE_SCRIPTS_DIR is already being defined in sage-env. With these changes Linux distros can install sage to /usr/bin and the other scripts somewhere else.\n+With these changes Linux distros can install sage to `/usr/bin` and the other scripts somewhere else.\n``````\n",
    "created_at": "2018-04-02T08:39:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338194",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Use SAGE_SCRIPTS_DIR in more places and define a fallback in env.py.
+Use `SAGE_BIN` in more places and define a fallback in `env.py`.
     
-SAGE_SCRIPTS_DIR is already being defined in sage-env. With these changes Linux distros can install sage to /usr/bin and the other scripts somewhere else.
+With these changes Linux distros can install sage to `/usr/bin` and the other scripts somewhere else.
``````




---

archive/issue_comments_338195.json:
```json
{
    "body": "Changed commit from **[b91dbcb](https://github.com/sagemath/sagetrac-mirror/commit/b91dbcb58ff20256f37f3a73f9c97713240abcd9)** to **[2d4fa67](https://github.com/sagemath/sagetrac-mirror/commit/2d4fa67978250cd7729b3c6904c158b54b5f9f41)**",
    "created_at": "2018-04-03T13:01:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338195",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b91dbcb](https://github.com/sagemath/sagetrac-mirror/commit/b91dbcb58ff20256f37f3a73f9c97713240abcd9)** to **[2d4fa67](https://github.com/sagemath/sagetrac-mirror/commit/2d4fa67978250cd7729b3c6904c158b54b5f9f41)**



---

archive/issue_comments_338196.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d4fa67978250cd7729b3c6904c158b54b5f9f41\">2d4fa67</a></td><td><code>Set SAGE_BIN in sage-env</code></td></tr></table>\n",
    "created_at": "2018-04-03T13:01:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338196",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d4fa67978250cd7729b3c6904c158b54b5f9f41">2d4fa67</a></td><td><code>Set SAGE_BIN in sage-env</code></td></tr></table>




---

archive/issue_comments_338197.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThanks for the feedback. I do not really understand how these scripts interact. Did you mean something like this?\n\nWhat is your point when it comes to the conflict with #25056. I guess whoever gets merged last needs to fix conflicts? Or is there something more substantial that needs to be taken into account?",
    "created_at": "2018-04-03T13:03:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338197",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:13" align="right">comment:13</div>

Thanks for the feedback. I do not really understand how these scripts interact. Did you mean something like this?

What is your point when it comes to the conflict with #25056. I guess whoever gets merged last needs to fix conflicts? Or is there something more substantial that needs to be taken into account?



---

archive/issue_events_317334.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-03T13:03:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317334"
}
```



---

archive/issue_events_317335.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-03T13:03:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317335"
}
```



---

archive/issue_comments_338198.json:
```json
{
    "body": "Work Issues: **needs more testing**",
    "created_at": "2018-04-03T13:03:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338198",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **needs more testing**



---

archive/issue_comments_338199.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\n[my Sage is rebuilding as always, so I could not test this yet.]",
    "created_at": "2018-04-03T13:03:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338199",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:15" align="right">comment:15</div>

[my Sage is rebuilding as always, so I could not test this yet.]



---

archive/issue_comments_338200.json:
```json
{
    "body": "Changed work issues from **needs more testing** to **rebase, test**",
    "created_at": "2018-04-05T09:02:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338200",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **needs more testing** to **rebase, test**



---

archive/issue_events_317336.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-05T09:02:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317336"
}
```



---

archive/issue_events_317337.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-04-05T09:02:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317337"
}
```



---

archive/issue_comments_338201.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@saraedum](#comment:13):\n> What is your point when it comes to the conflict with #25056. I guess whoever gets merged last needs to fix conflicts? Or is there something more substantial that needs to be taken into account?\n\nIn this case, #25056 is a blocker so it will certainly take priority over this ticket. So it might be a good idea to rebase on top of #25056.",
    "created_at": "2018-04-05T09:02:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338201",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@saraedum](#comment:13):
> What is your point when it comes to the conflict with #25056. I guess whoever gets merged last needs to fix conflicts? Or is there something more substantial that needs to be taken into account?

In this case, #25056 is a blocker so it will certainly take priority over this ticket. So it might be a good idea to rebase on top of #25056.



---

archive/issue_comments_338202.json:
```json
{
    "body": "Dependencies: **#25056**",
    "created_at": "2018-04-05T09:02:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338202",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#25056**



---

archive/issue_comments_338203.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\n1. `SAGE_BIN` should be set to the `--bindir` determined by `./configure`. Use `src/bin/sage-env-config.in` to implement this.\n\n2. I don't think that it should be allowed to override `SAGE_BIN` at runtime, it should be set unconditionally to the value determined by `./configure`. This would be analogous to `SAGE_LOCAL`.",
    "created_at": "2018-04-05T09:07:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338203",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

1. `SAGE_BIN` should be set to the `--bindir` determined by `./configure`. Use `src/bin/sage-env-config.in` to implement this.

2. I don't think that it should be allowed to override `SAGE_BIN` at runtime, it should be set unconditionally to the value determined by `./configure`. This would be analogous to `SAGE_LOCAL`.



---

archive/issue_comments_338204.json:
```json
{
    "body": "Changed commit from **[2d4fa67](https://github.com/sagemath/sagetrac-mirror/commit/2d4fa67978250cd7729b3c6904c158b54b5f9f41)** to **[5b3d054](https://github.com/sagemath/sagetrac-mirror/commit/5b3d0541a77f9b69453b3f87e628172c7c402d2f)**",
    "created_at": "2018-04-05T14:28:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338204",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2d4fa67](https://github.com/sagemath/sagetrac-mirror/commit/2d4fa67978250cd7729b3c6904c158b54b5f9f41)** to **[5b3d054](https://github.com/sagemath/sagetrac-mirror/commit/5b3d0541a77f9b69453b3f87e628172c7c402d2f)**



---

archive/issue_comments_338205.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/542dbb62e91da24aa5c522525e4fdce70914c3bc\">542dbb6</a></td><td><code>Do not allow resetting SAGE_BIN at runtime</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b3d0541a77f9b69453b3f87e628172c7c402d2f\">5b3d054</a></td><td><code>Fix another occurrence for SAGE_LOCAL/bin</code></td></tr></table>\n",
    "created_at": "2018-04-05T14:28:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338205",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/542dbb62e91da24aa5c522525e4fdce70914c3bc">542dbb6</a></td><td><code>Do not allow resetting SAGE_BIN at runtime</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b3d0541a77f9b69453b3f87e628172c7c402d2f">5b3d054</a></td><td><code>Fix another occurrence for SAGE_LOCAL/bin</code></td></tr></table>




---

archive/issue_comments_338206.json:
```json
{
    "body": "Changed work issues from **rebase, test** to **test with and without bindir, test relocation**",
    "created_at": "2018-04-05T14:29:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338206",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **rebase, test** to **test with and without bindir, test relocation**



---

archive/issue_comments_338207.json:
```json
{
    "body": "Changed author from **Tobias Hansen, Julian R\u00fcth** to **Tobias Hansen, Julian R\u00fcth, fbissey**",
    "created_at": "2018-04-05T20:15:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338207",
    "user": "https://github.com/kiwifb"
}
```

Changed author from **Tobias Hansen, Julian Rüth** to **Tobias Hansen, Julian Rüth, fbissey**



---

archive/issue_comments_338208.json:
```json
{
    "body": "Changed author from **Tobias Hansen, Julian R\u00fcth, fbissey** to **Tobias Hansen, Julian R\u00fcth, Fran\u00e7ois Bissey**",
    "created_at": "2018-04-06T10:13:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338208",
    "user": "https://github.com/saraedum"
}
```

Changed author from **Tobias Hansen, Julian Rüth, fbissey** to **Tobias Hansen, Julian Rüth, François Bissey**



---

archive/issue_comments_338209.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nDarn I had filled the wrong field when I wanted to \"subscribe\" to this ticket. \n\nI am not hot to create a new variable especially for calling stuff that should by and large be in the `PATH`. In my opinion, for sage-on-distro, it is even better if there is nothing in front of the name of the executables. It should just work unless you mess your environment and I am not sure we should protect the end users to that level.",
    "created_at": "2018-04-06T10:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338209",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:22" align="right">comment:22</div>

Darn I had filled the wrong field when I wanted to "subscribe" to this ticket. 

I am not hot to create a new variable especially for calling stuff that should by and large be in the `PATH`. In my opinion, for sage-on-distro, it is even better if there is nothing in front of the name of the executables. It should just work unless you mess your environment and I am not sure we should protect the end users to that level.



---

archive/issue_comments_338210.json:
```json
{
    "body": "Changed author from **Tobias Hansen, Julian R\u00fcth, Fran\u00e7ois Bissey** to **Tobias Hansen, Julian R\u00fcth**",
    "created_at": "2018-04-06T10:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338210",
    "user": "https://github.com/kiwifb"
}
```

Changed author from **Tobias Hansen, Julian Rüth, François Bissey** to **Tobias Hansen, Julian Rüth**



---

archive/issue_comments_338211.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nfbissey: So you are saying that you want to have all the `sage-*` scripts in the PATH? I think it's reasonable for some distros that they want to hide these. I can imagine that one reason to get them off the path is that some distros want MAN pages for everything that's on the PATH. Also not all of these scripts have a nice `--help`/`-h` implemented.",
    "created_at": "2018-04-06T11:00:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338211",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:23" align="right">comment:23</div>

fbissey: So you are saying that you want to have all the `sage-*` scripts in the PATH? I think it's reasonable for some distros that they want to hide these. I can imagine that one reason to get them off the path is that some distros want MAN pages for everything that's on the PATH. Also not all of these scripts have a nice `--help`/`-h` implemented.



---

archive/issue_comments_338212.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI see. But it feels like it is more than just the sage-* scripts that are touched here. In `src/sage/graphs/lovasz_theta.py` this is not the path to a sage script but to an executable from an optional package for example. So you end up having to separate the scripts from the normal commands that are installed in `SAGE_LOCAL/bin`. I don't see this ticket currently doing that.",
    "created_at": "2018-04-06T11:08:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338212",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:24" align="right">comment:24</div>

I see. But it feels like it is more than just the sage-* scripts that are touched here. In `src/sage/graphs/lovasz_theta.py` this is not the path to a sage script but to an executable from an optional package for example. So you end up having to separate the scripts from the normal commands that are installed in `SAGE_LOCAL/bin`. I don't see this ticket currently doing that.



---

archive/issue_comments_338213.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nYou're right. I'll try to change the scope of `SAGE_BIN`.",
    "created_at": "2018-04-06T11:13:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338213",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:25" align="right">comment:25</div>

You're right. I'll try to change the scope of `SAGE_BIN`.



---

archive/issue_comments_338214.json:
```json
{
    "body": "Changed work issues from **test with and without bindir, test relocation** to **test with and without bindir, test relocation, change scope of SAGE_BIN**",
    "created_at": "2018-04-06T11:15:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338214",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **test with and without bindir, test relocation** to **test with and without bindir, test relocation, change scope of SAGE_BIN**



---

archive/issue_comments_338215.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3224b7c15e0009b7b1bec0f9c883469b2d6ef73f\">3224b7c</a></td><td><code>Merge remote-tracking branch 'trac/develop' into t/22731/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_</code></td></tr></table>\n",
    "created_at": "2018-04-11T23:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338215",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3224b7c15e0009b7b1bec0f9c883469b2d6ef73f">3224b7c</a></td><td><code>Merge remote-tracking branch 'trac/develop' into t/22731/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_</code></td></tr></table>




---

archive/issue_comments_338216.json:
```json
{
    "body": "Changed commit from **[5b3d054](https://github.com/sagemath/sagetrac-mirror/commit/5b3d0541a77f9b69453b3f87e628172c7c402d2f)** to **[3224b7c](https://github.com/sagemath/sagetrac-mirror/commit/3224b7c15e0009b7b1bec0f9c883469b2d6ef73f)**",
    "created_at": "2018-04-11T23:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338216",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5b3d054](https://github.com/sagemath/sagetrac-mirror/commit/5b3d0541a77f9b69453b3f87e628172c7c402d2f)** to **[3224b7c](https://github.com/sagemath/sagetrac-mirror/commit/3224b7c15e0009b7b1bec0f9c883469b2d6ef73f)**



---

archive/issue_comments_338217.json:
```json
{
    "body": "Changed dependencies from **#25056** to **#25056, #20382**",
    "created_at": "2018-04-12T00:59:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338217",
    "user": "https://github.com/saraedum"
}
```

Changed dependencies from **#25056** to **#25056, #20382**



---

archive/issue_events_317338.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-12T00:59:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317338"
}
```



---

archive/issue_events_317339.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-12T00:59:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317339"
}
```



---

archive/issue_comments_338218.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI wonder whether we should do the following:\n\n* Introduce `$SAGE_BIN` as the place where `sage` and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --scriptsdir`.\n* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.)\n\nAlternatively the second point could be replaced by the following two:\n\n* Introduce `$SAGE_LIBEXEC`. Configurable through `./configure --libexecdir`, default `$SAGE_LOCAL/libexec/`. (See https://www.gnu.org/prep/standards/html_node/Directory-Variables.html.)\n* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LIBEXEC/sage/`. To keep backwards compatibility, we need the default to be `$SAGE_LOCAL/bin` if `$SAGE_LOCAL/bin/sage-env` exists.\n\nThe `$SAGE_SCRIPTS_DIR` fallback is ugly of course. It means that Sage installs vary depending on whether they are clean installs (after this proposal) or upgrades from before. That's unfortunate but we have that already because SPKGs do not uninstall completely. (Or do they by now?) Anyway, I think it makes sense to install things into standard places and I guess it could make the life of packagers easier.\n\nWhat do you think?",
    "created_at": "2018-04-12T00:59:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338218",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:28" align="right">comment:28</div>

I wonder whether we should do the following:

* Introduce `$SAGE_BIN` as the place where `sage` and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --scriptsdir`.
* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.)

Alternatively the second point could be replaced by the following two:

* Introduce `$SAGE_LIBEXEC`. Configurable through `./configure --libexecdir`, default `$SAGE_LOCAL/libexec/`. (See https://www.gnu.org/prep/standards/html_node/Directory-Variables.html.)
* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LIBEXEC/sage/`. To keep backwards compatibility, we need the default to be `$SAGE_LOCAL/bin` if `$SAGE_LOCAL/bin/sage-env` exists.

The `$SAGE_SCRIPTS_DIR` fallback is ugly of course. It means that Sage installs vary depending on whether they are clean installs (after this proposal) or upgrades from before. That's unfortunate but we have that already because SPKGs do not uninstall completely. (Or do they by now?) Anyway, I think it makes sense to install things into standard places and I guess it could make the life of packagers easier.

What do you think?



---

archive/issue_comments_338219.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nWell, I don't use the `configure` script but that sound relatively reasonable. I personally ship stuff like `sage-env` in `/etc` where I feel it belongs but that may be hard at this stage.\n\nUninstall is still being worked on by Erik, but it cannot be helped that there may be a hard block upgrading from a certain version of sage once those things are in place.",
    "created_at": "2018-04-12T01:16:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338219",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">comment:29</div>

Well, I don't use the `configure` script but that sound relatively reasonable. I personally ship stuff like `sage-env` in `/etc` where I feel it belongs but that may be hard at this stage.

Uninstall is still being worked on by Erik, but it cannot be helped that there may be a hard block upgrading from a certain version of sage once those things are in place.



---

archive/issue_events_317340.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-29T17:58:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "title_is": "Use SAGE_BIN an SAGE_SCRIPTS_DIR to make Sage easier to package",
    "title_was": "New environment variable SAGE_BIN",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317340"
}
```



---

archive/issue_comments_338220.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Use `SAGE_BIN` in more places and define a fallback in `env.py`.\n-    \n-With these changes Linux distros can install sage to `/usr/bin` and the other scripts somewhere else.\n+* Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n+* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n+* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.) \n``````\n",
    "created_at": "2018-04-29T17:58:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338220",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Use `SAGE_BIN` in more places and define a fallback in `env.py`.
-    
-With these changes Linux distros can install sage to `/usr/bin` and the other scripts somewhere else.
+* Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
+* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
+* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.) 
``````




---

archive/issue_comments_338221.json:
```json
{
    "body": "Changed work issues from **test with and without bindir, test relocation, change scope of SAGE_BIN** to none",
    "created_at": "2018-04-29T17:58:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338221",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **test with and without bindir, test relocation, change scope of SAGE_BIN** to none



---

archive/issue_events_317341.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-29T17:58:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317341"
}
```



---

archive/issue_events_317342.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-29T17:58:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317342"
}
```



---

archive/issue_comments_338222.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThanks for the feedback. I think I prefer the non-breaking change at the moment.",
    "created_at": "2018-04-29T17:59:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338222",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:31" align="right">comment:31</div>

Thanks for the feedback. I think I prefer the non-breaking change at the moment.



---

archive/issue_comments_338223.json:
```json
{
    "body": "<div id=\"comment:32\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c897d2b9e3e2a7d4a2220af60250f01b9b419746\">c897d2b</a></td><td><code>A first draft of using SAGE_BIN and SAGE_SCRIPTS_DIR differently</code></td></tr></table>\n",
    "created_at": "2018-04-29T18:17:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338223",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c897d2b9e3e2a7d4a2220af60250f01b9b419746">c897d2b</a></td><td><code>A first draft of using SAGE_BIN and SAGE_SCRIPTS_DIR differently</code></td></tr></table>




---

archive/issue_comments_338224.json:
```json
{
    "body": "Changed commit from **[3224b7c](https://github.com/sagemath/sagetrac-mirror/commit/3224b7c15e0009b7b1bec0f9c883469b2d6ef73f)** to **[c897d2b](https://github.com/sagemath/sagetrac-mirror/commit/c897d2b9e3e2a7d4a2220af60250f01b9b419746)**",
    "created_at": "2018-04-29T18:17:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338224",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3224b7c](https://github.com/sagemath/sagetrac-mirror/commit/3224b7c15e0009b7b1bec0f9c883469b2d6ef73f)** to **[c897d2b](https://github.com/sagemath/sagetrac-mirror/commit/c897d2b9e3e2a7d4a2220af60250f01b9b419746)**



---

archive/issue_comments_338225.json:
```json
{
    "body": "Work Issues: **use features of 20382**",
    "created_at": "2018-04-29T18:17:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338225",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **use features of 20382**



---

archive/issue_comments_338226.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI think I want to the binaries differently if they are non-optional dependencies. So I think this should not be part of this ticket.",
    "created_at": "2018-04-29T18:20:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338226",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:34" align="right">comment:34</div>

I think I want to the binaries differently if they are non-optional dependencies. So I think this should not be part of this ticket.



---

archive/issue_comments_338227.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,2 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n-* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.) \n``````\n",
    "created_at": "2018-04-29T18:20:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338227",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,2 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
-* The explicit calls such as `$SAGE_LOCAL/bin/theta` should go away with #20382. We should always call what's on the PATH when calling a non-Sage binary (possibly after we checked that it's sane with a Feature check.) 
``````




---

archive/issue_comments_338228.json:
```json
{
    "body": "Changed work issues from **use features of 20382** to none",
    "created_at": "2018-04-29T18:20:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338228",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **use features of 20382** to none



---

archive/issue_comments_338229.json:
```json
{
    "body": "<div id=\"comment:35\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e597441a4435e2033100611512113095834bdbb\">5e59744</a></td><td><code>Add configure switch for scriptsdir</code></td></tr></table>\n",
    "created_at": "2018-04-29T19:00:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338229",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e597441a4435e2033100611512113095834bdbb">5e59744</a></td><td><code>Add configure switch for scriptsdir</code></td></tr></table>




---

archive/issue_comments_338230.json:
```json
{
    "body": "Changed commit from **[c897d2b](https://github.com/sagemath/sagetrac-mirror/commit/c897d2b9e3e2a7d4a2220af60250f01b9b419746)** to **[5e59744](https://github.com/sagemath/sagetrac-mirror/commit/5e597441a4435e2033100611512113095834bdbb)**",
    "created_at": "2018-04-29T19:00:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338230",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c897d2b](https://github.com/sagemath/sagetrac-mirror/commit/c897d2b9e3e2a7d4a2220af60250f01b9b419746)** to **[5e59744](https://github.com/sagemath/sagetrac-mirror/commit/5e597441a4435e2033100611512113095834bdbb)**



---

archive/issue_events_317343.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-29T19:00:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317343"
}
```



---

archive/issue_events_317344.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-04-29T19:00:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317344"
}
```



---

archive/issue_comments_338231.json:
```json
{
    "body": "Work Issues: **requires testing**",
    "created_at": "2018-04-29T19:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338231",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **requires testing**



---

archive/issue_comments_338232.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nThis still needs quite some testing. I just want to see what the patchbot thinks about this.",
    "created_at": "2018-04-29T19:00:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338232",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:37" align="right">comment:37</div>

This still needs quite some testing. I just want to see what the patchbot thinks about this.



---

archive/issue_events_317345.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-05-01T16:14:09Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "title_is": "Use SAGE_BIN and SAGE_SCRIPTS_DIR to make Sage easier to package",
    "title_was": "Use SAGE_BIN an SAGE_SCRIPTS_DIR to make Sage easier to package",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317345"
}
```



---

archive/issue_comments_338233.json:
```json
{
    "body": "Changed commit from **[5e59744](https://github.com/sagemath/sagetrac-mirror/commit/5e597441a4435e2033100611512113095834bdbb)** to **[6b1ec2e](https://github.com/sagemath/sagetrac-mirror/commit/6b1ec2e573978815d770f0baff01bffb9ec7d2e4)**",
    "created_at": "2018-05-01T16:16:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338233",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5e59744](https://github.com/sagemath/sagetrac-mirror/commit/5e597441a4435e2033100611512113095834bdbb)** to **[6b1ec2e](https://github.com/sagemath/sagetrac-mirror/commit/6b1ec2e573978815d770f0baff01bffb9ec7d2e4)**



---

archive/issue_comments_338234.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be3a0f733950345bee7f4237db20558e1a06cefc\">be3a0f7</a></td><td><code>The docbuild crashes happen during an os.fork to spawn tachyon</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d85dc796c58c3de57401bc22d3587b94e205091\">7d85dc7</a></td><td><code>Something related to the sphinxbuild seems to be leaking memory</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50898feaef6499180ab2ec5b21e4b6b18032a77d\">50898fe</a></td><td><code>Try to build-from-scratch on GitLab's underpowered CI machines</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95c6275adac26be537c11a084114d8a8dc576392\">95c6275</a></td><td><code>Comment on fork logic in docbuilding</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0574ca897321c56927e9ce5004fd2f75693785a\">c0574ca</a></td><td><code>Merge remote-tracking branch 'trac/develop' into u/saraedum/gitlabci</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/329fdab86a1a3edf03c88780104a1471105fbcd6\">329fdab</a></td><td><code>fix tags for build-from-latest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/048e2d8f0a25bada68693f9b22a8e0426eab2fb2\">048e2d8</a></td><td><code>silence unicode warnings from the patchbot</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9c772e5003fda874e82edd5c785eab2657cee1b\">f9c772e</a></td><td><code>Fix filtering logic in sphinx logger</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0431637a02819116781d87825523a068bf88ee2\">f043163</a></td><td><code>Fixed some minor doctest issues</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b1ec2e573978815d770f0baff01bffb9ec7d2e4\">6b1ec2e</a></td><td><code>Merge remote-tracking branch 'remotes/trac/u/saraedum/gitlabci' into sage-scripts-dir</code></td></tr></table>\n",
    "created_at": "2018-05-01T16:16:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338234",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be3a0f733950345bee7f4237db20558e1a06cefc">be3a0f7</a></td><td><code>The docbuild crashes happen during an os.fork to spawn tachyon</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d85dc796c58c3de57401bc22d3587b94e205091">7d85dc7</a></td><td><code>Something related to the sphinxbuild seems to be leaking memory</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50898feaef6499180ab2ec5b21e4b6b18032a77d">50898fe</a></td><td><code>Try to build-from-scratch on GitLab's underpowered CI machines</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95c6275adac26be537c11a084114d8a8dc576392">95c6275</a></td><td><code>Comment on fork logic in docbuilding</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0574ca897321c56927e9ce5004fd2f75693785a">c0574ca</a></td><td><code>Merge remote-tracking branch 'trac/develop' into u/saraedum/gitlabci</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/329fdab86a1a3edf03c88780104a1471105fbcd6">329fdab</a></td><td><code>fix tags for build-from-latest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/048e2d8f0a25bada68693f9b22a8e0426eab2fb2">048e2d8</a></td><td><code>silence unicode warnings from the patchbot</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9c772e5003fda874e82edd5c785eab2657cee1b">f9c772e</a></td><td><code>Fix filtering logic in sphinx logger</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0431637a02819116781d87825523a068bf88ee2">f043163</a></td><td><code>Fixed some minor doctest issues</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b1ec2e573978815d770f0baff01bffb9ec7d2e4">6b1ec2e</a></td><td><code>Merge remote-tracking branch 'remotes/trac/u/saraedum/gitlabci' into sage-scripts-dir</code></td></tr></table>




---

archive/issue_comments_338235.json:
```json
{
    "body": "Changed dependencies from **#25056, #20382** to **#25056, #20382, #24655**",
    "created_at": "2018-05-01T16:17:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338235",
    "user": "https://github.com/saraedum"
}
```

Changed dependencies from **#25056, #20382** to **#25056, #20382, #24655**



---

archive/issue_events_317346.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-05-01T16:17:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317346"
}
```



---

archive/issue_events_317347.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-05-01T16:17:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317347"
}
```



---

archive/issue_comments_338236.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nOk, the patchbot does probably not help much here as it does not rebuild if something that fundamental changes. Let's see what CI thinks about it.",
    "created_at": "2018-05-01T16:17:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338236",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:40" align="right">comment:40</div>

Ok, the patchbot does probably not help much here as it does not rebuild if something that fundamental changes. Let's see what CI thinks about it.



---

archive/issue_comments_338237.json:
```json
{
    "body": "Changed commit from **[6b1ec2e](https://github.com/sagemath/sagetrac-mirror/commit/6b1ec2e573978815d770f0baff01bffb9ec7d2e4)** to **[795d0fa](https://github.com/sagemath/sagetrac-mirror/commit/795d0faef202cf603ceebddcff8ef4113dab8e2e)**",
    "created_at": "2018-05-03T18:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338237",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6b1ec2e](https://github.com/sagemath/sagetrac-mirror/commit/6b1ec2e573978815d770f0baff01bffb9ec7d2e4)** to **[795d0fa](https://github.com/sagemath/sagetrac-mirror/commit/795d0faef202cf603ceebddcff8ef4113dab8e2e)**



---

archive/issue_comments_338238.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f3480e71cafcef96b1c21aaf3219e8c81e5e9e1\">8f3480e</a></td><td><code>It seems that MAKEOPTS/SAGE_NUM_THREADS parsing has been fixed now</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99355ad8eb1402dd09ec4dd7bd0f898271147b8b\">99355ad</a></td><td><code>Build images in the same order in the Dockerfile and in build-docker.sh</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81babb8af3c494be4ce89c586c6168ae80682560\">81babb8</a></td><td><code>Simplify caching during docker build</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad39cc9de9dd8a3f6092c7153278982393da57b8\">ad39cc9</a></td><td><code>Complicate parallelization quite a bit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/795d0faef202cf603ceebddcff8ef4113dab8e2e\">795d0fa</a></td><td><code>Merge remote-tracking branch 'trac/u/saraedum/gitlabci' into HEAD</code></td></tr></table>\n",
    "created_at": "2018-05-03T18:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338238",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f3480e71cafcef96b1c21aaf3219e8c81e5e9e1">8f3480e</a></td><td><code>It seems that MAKEOPTS/SAGE_NUM_THREADS parsing has been fixed now</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99355ad8eb1402dd09ec4dd7bd0f898271147b8b">99355ad</a></td><td><code>Build images in the same order in the Dockerfile and in build-docker.sh</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81babb8af3c494be4ce89c586c6168ae80682560">81babb8</a></td><td><code>Simplify caching during docker build</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad39cc9de9dd8a3f6092c7153278982393da57b8">ad39cc9</a></td><td><code>Complicate parallelization quite a bit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/795d0faef202cf603ceebddcff8ef4113dab8e2e">795d0fa</a></td><td><code>Merge remote-tracking branch 'trac/u/saraedum/gitlabci' into HEAD</code></td></tr></table>




---

archive/issue_comments_338239.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n+\n+CI runs for the proposed changes are here: https://gitlab.com/sagemath/dev/sage/commits/sage-bin (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-03T18:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338239",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
+
+CI runs for the proposed changes are here: https://gitlab.com/sagemath/dev/sage/commits/sage-bin (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_338240.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes are here: https://gitlab.com/sagemath/dev/sage/commits/sage-bin (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/sage-bin/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/sage-bin))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-03T18:26:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338240",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes are here: https://gitlab.com/sagemath/dev/sage/commits/sage-bin (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/sage-bin/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/sage-bin))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_338241.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4de96c2cfd063680492a5e066d1ee508980871f4\">4de96c2</a></td><td><code>Merge remote-tracking branch 'trac/develop' into t/22731/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_</code></td></tr></table>\n",
    "created_at": "2018-05-11T14:52:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338241",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4de96c2cfd063680492a5e066d1ee508980871f4">4de96c2</a></td><td><code>Merge remote-tracking branch 'trac/develop' into t/22731/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_</code></td></tr></table>




---

archive/issue_comments_338242.json:
```json
{
    "body": "Changed commit from **[795d0fa](https://github.com/sagemath/sagetrac-mirror/commit/795d0faef202cf603ceebddcff8ef4113dab8e2e)** to **[4de96c2](https://github.com/sagemath/sagetrac-mirror/commit/4de96c2cfd063680492a5e066d1ee508980871f4)**",
    "created_at": "2018-05-11T14:52:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338242",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[795d0fa](https://github.com/sagemath/sagetrac-mirror/commit/795d0faef202cf603ceebddcff8ef4113dab8e2e)** to **[4de96c2](https://github.com/sagemath/sagetrac-mirror/commit/4de96c2cfd063680492a5e066d1ee508980871f4)**



---

archive/issue_comments_338243.json:
```json
{
    "body": "Changed commit from **[4de96c2](https://github.com/sagemath/sagetrac-mirror/commit/4de96c2cfd063680492a5e066d1ee508980871f4)** to none",
    "created_at": "2018-05-14T14:06:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338243",
    "user": "https://github.com/saraedum"
}
```

Changed commit from **[4de96c2](https://github.com/sagemath/sagetrac-mirror/commit/4de96c2cfd063680492a5e066d1ee508980871f4)** to none



---

archive/issue_comments_338244.json:
```json
{
    "body": "Changed branch from **[u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_)** to none",
    "created_at": "2018-05-14T14:06:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338244",
    "user": "https://github.com/saraedum"
}
```

Changed branch from **[u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/allow_installation_of_sage_scripts_to_an_arbotrary_location_by_using_sage_scripts_dir_)** to none



---

archive/issue_comments_338245.json:
```json
{
    "body": "Branch: **[u/saraedum/22731](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/22731)**",
    "created_at": "2018-05-14T14:06:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338245",
    "user": "https://github.com/saraedum"
}
```

Branch: **[u/saraedum/22731](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/22731)**



---

archive/issue_comments_338246.json:
```json
{
    "body": "Commit: **[03c7aa4](https://github.com/sagemath/sagetrac-mirror/commit/03c7aa4660e808f080f97a572b0b331c5bce4060)**",
    "created_at": "2018-05-15T09:58:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338246",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[03c7aa4](https://github.com/sagemath/sagetrac-mirror/commit/03c7aa4660e808f080f97a572b0b331c5bce4060)**



---

archive/issue_comments_338247.json:
```json
{
    "body": "<div id=\"comment:47\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03c7aa4660e808f080f97a572b0b331c5bce4060\">03c7aa4</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 22731</code></td></tr></table>\n",
    "created_at": "2018-05-15T09:58:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338247",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:47"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03c7aa4660e808f080f97a572b0b331c5bce4060">03c7aa4</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 22731</code></td></tr></table>




---

archive/issue_comments_338248.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/sage-bin/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/sage-bin))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-15T10:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338248",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/sage-bin/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/sage-bin))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_338249.json:
```json
{
    "body": "Changed commit from **[03c7aa4](https://github.com/sagemath/sagetrac-mirror/commit/03c7aa4660e808f080f97a572b0b331c5bce4060)** to **[7e37bed](https://github.com/sagemath/sagetrac-mirror/commit/7e37bedcb1d086aa5eb2e1516beec495db39c4c5)**",
    "created_at": "2018-05-20T22:21:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338249",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[03c7aa4](https://github.com/sagemath/sagetrac-mirror/commit/03c7aa4660e808f080f97a572b0b331c5bce4060)** to **[7e37bed](https://github.com/sagemath/sagetrac-mirror/commit/7e37bedcb1d086aa5eb2e1516beec495db39c4c5)**



---

archive/issue_comments_338250.json:
```json
{
    "body": "<div id=\"comment:49\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a532fcee1ae77bbd4164b4f0bf637b5acfd2a452\">a532fce</a></td><td><code>Merge remote-tracking branch 'trac/develop' into u/saraedum/gitlabci</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/686fe86c7fb1f13f3d9d6ece7828107ff988e7c0\">686fe86</a></td><td><code>An attempt to use workflows on CircleCI</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79003ab53cb5dcc4ade75573021dec91c763360c\">79003ab</a></td><td><code>Do not deduce CPUs/RAM by looking at the local machine</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/906ebeab69c1307582d6f299c8062837f9af30ba\">906ebea</a></td><td><code>Collect system information on the docker host</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60ddb4b0486ee73fcb608d3efe60532fa5300fdd\">60ddb4b</a></td><td><code>simplify apk add command for [GitLab](../wiki/GitLab) CI</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25f934e5ec1bd8344b9e372f46387b569d379a8e\">25f934e</a></td><td><code>Build from the latest develop image</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa49196c4f0ed33da7a45b80c7a4a01bd46b7d61\">aa49196</a></td><td><code>Backport #24655 for automated docker builds</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0fdc3c60f0415963bf4e945f2694dee66ebb8eb\">a0fdc3c</a></td><td><code>Merge commit 'aa49196c4f0ed33da7a45b80c7a4a01bd46b7d61' into u/saraedum/gitlabci</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b70426813bafe93b62a7b36ed00f0cd0ed166a1f\">b704268</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e37bedcb1d086aa5eb2e1516beec495db39c4c5\">7e37bed</a></td><td><code>Merge branch '24854' into 22731</code></td></tr></table>\n",
    "created_at": "2018-05-20T22:21:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338250",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a532fcee1ae77bbd4164b4f0bf637b5acfd2a452">a532fce</a></td><td><code>Merge remote-tracking branch 'trac/develop' into u/saraedum/gitlabci</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/686fe86c7fb1f13f3d9d6ece7828107ff988e7c0">686fe86</a></td><td><code>An attempt to use workflows on CircleCI</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79003ab53cb5dcc4ade75573021dec91c763360c">79003ab</a></td><td><code>Do not deduce CPUs/RAM by looking at the local machine</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/906ebeab69c1307582d6f299c8062837f9af30ba">906ebea</a></td><td><code>Collect system information on the docker host</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60ddb4b0486ee73fcb608d3efe60532fa5300fdd">60ddb4b</a></td><td><code>simplify apk add command for [GitLab](../wiki/GitLab) CI</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25f934e5ec1bd8344b9e372f46387b569d379a8e">25f934e</a></td><td><code>Build from the latest develop image</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa49196c4f0ed33da7a45b80c7a4a01bd46b7d61">aa49196</a></td><td><code>Backport #24655 for automated docker builds</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0fdc3c60f0415963bf4e945f2694dee66ebb8eb">a0fdc3c</a></td><td><code>Merge commit 'aa49196c4f0ed33da7a45b80c7a4a01bd46b7d61' into u/saraedum/gitlabci</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b70426813bafe93b62a7b36ed00f0cd0ed166a1f">b704268</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e37bedcb1d086aa5eb2e1516beec495db39c4c5">7e37bed</a></td><td><code>Merge branch '24854' into 22731</code></td></tr></table>




---

archive/issue_comments_338251.json:
```json
{
    "body": "Changed dependencies from **#25056, #20382, #24655** to **#25056, #20382, #24655, #24854**",
    "created_at": "2018-05-20T22:35:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338251",
    "user": "https://github.com/saraedum"
}
```

Changed dependencies from **#25056, #20382, #24655** to **#25056, #20382, #24655, #24854**



---

archive/issue_comments_338252.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nWould people on this thread have an idea on what can be done to make `$SAGE_LOCAL/bin/sage` work when `$SAGE_ROOT` is not yet set and/or how one can figure out if `$SAGE_ROOT/sage` (a script that has more logic to figure out a value for `$SAGE_ROOT`) is an acceptable executable to use?\n\nIt comes up in producing a jupyter kernelspec for sage that is suitable for use by an external jupyter. See: \n[sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/yEUJOW2fnJI)\n\nIf we can make it very easy to install sage's kernelspec in arbitrary jupyter configurations, it becomes significantly easier to integrate sage in computational environments (for instance, should the nteract desktop jupyter client ever become popular, we could just provide easy interfacing with a system install of it rather than packaging it with sage).",
    "created_at": "2018-05-20T23:42:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338252",
    "user": "https://github.com/nbruin"
}
```

<div id="comment:51" align="right">comment:51</div>

Would people on this thread have an idea on what can be done to make `$SAGE_LOCAL/bin/sage` work when `$SAGE_ROOT` is not yet set and/or how one can figure out if `$SAGE_ROOT/sage` (a script that has more logic to figure out a value for `$SAGE_ROOT`) is an acceptable executable to use?

It comes up in producing a jupyter kernelspec for sage that is suitable for use by an external jupyter. See: 
[sage-devel thread](https://groups.google.com/forum/#!topic/sage-devel/yEUJOW2fnJI)

If we can make it very easy to install sage's kernelspec in arbitrary jupyter configurations, it becomes significantly easier to integrate sage in computational environments (for instance, should the nteract desktop jupyter client ever become popular, we could just provide easy interfacing with a system install of it rather than packaging it with sage).



---

archive/issue_comments_338253.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-21T14:42:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338253",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/sage/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/sage/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_338254.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-21T14:43:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338254",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_338255.json:
```json
{
    "body": "Changed commit from **[7e37bed](https://github.com/sagemath/sagetrac-mirror/commit/7e37bedcb1d086aa5eb2e1516beec495db39c4c5)** to **[6d89d61](https://github.com/sagemath/sagetrac-mirror/commit/6d89d614dc1f363622e21b22e213e815b528425b)**",
    "created_at": "2018-05-21T14:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338255",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7e37bed](https://github.com/sagemath/sagetrac-mirror/commit/7e37bedcb1d086aa5eb2e1516beec495db39c4c5)** to **[6d89d61](https://github.com/sagemath/sagetrac-mirror/commit/6d89d614dc1f363622e21b22e213e815b528425b)**



---

archive/issue_comments_338256.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11f8a6cc24e9a1853a85f45d48210bdfb35254ff\">11f8a6c</a></td><td><code>no port exposure needed for jupyter anymore</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1960ba1e0674435f222af242df6252d2b7ea50c8\">1960ba1</a></td><td><code>add openssl/libssl-dev to the docker images</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14926cfe70ca7f26f97cbf69a4f6e7298f6fc3d3\">14926cf</a></td><td><code>Revert \"add openssl/libssl-dev to the docker images\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2c641a9d3a99fd0a1dc4f95c801c600e226f1f5\">f2c641a</a></td><td><code>Add debug information on patch size</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d89d614dc1f363622e21b22e213e815b528425b\">6d89d61</a></td><td><code>Merge branch '24655' into 22731</code></td></tr></table>\n",
    "created_at": "2018-05-21T14:44:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338256",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11f8a6cc24e9a1853a85f45d48210bdfb35254ff">11f8a6c</a></td><td><code>no port exposure needed for jupyter anymore</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1960ba1e0674435f222af242df6252d2b7ea50c8">1960ba1</a></td><td><code>add openssl/libssl-dev to the docker images</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14926cfe70ca7f26f97cbf69a4f6e7298f6fc3d3">14926cf</a></td><td><code>Revert "add openssl/libssl-dev to the docker images"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2c641a9d3a99fd0a1dc4f95c801c600e226f1f5">f2c641a</a></td><td><code>Add debug information on patch size</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d89d614dc1f363622e21b22e213e815b528425b">6d89d61</a></td><td><code>Merge branch '24655' into 22731</code></td></tr></table>




---

archive/issue_comments_338257.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n``````\n",
    "created_at": "2018-05-22T21:04:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338257",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 * Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
 * Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
``````




---

archive/issue_comments_338258.json:
```json
{
    "body": "<div id=\"comment:56\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/864843ce7ec0527d5498524d5f9efc0898ea22cd\">864843c</a></td><td><code>fix syntax error in CircleCI configuration</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1c853634791a10fb7fc286349d785ef144008f6\">e1c8536</a></td><td><code>Run short and new doctests on CircleCI for every branch</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/45579a1cacc7b453f203854fcd78c2516fedf8d3\">45579a1</a></td><td><code>Call the right scripts in CircleCI</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83f71e7948c8eb8a72e63d4d1451f9f20779bb8b\">83f71e7</a></td><td><code>Don't pipe \"echo\" into \"rm\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d3caebc4dedd9854a38e3f05dc7fe3ad35b75d4\">8d3caeb</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7cb021121279a5d3645df7c1519dfff382ac033\">d7cb021</a></td><td><code>Merge branch '24854' into 22731</code></td></tr></table>\n",
    "created_at": "2018-05-22T21:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338258",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/864843ce7ec0527d5498524d5f9efc0898ea22cd">864843c</a></td><td><code>fix syntax error in CircleCI configuration</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1c853634791a10fb7fc286349d785ef144008f6">e1c8536</a></td><td><code>Run short and new doctests on CircleCI for every branch</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/45579a1cacc7b453f203854fcd78c2516fedf8d3">45579a1</a></td><td><code>Call the right scripts in CircleCI</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83f71e7948c8eb8a72e63d4d1451f9f20779bb8b">83f71e7</a></td><td><code>Don't pipe "echo" into "rm"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d3caebc4dedd9854a38e3f05dc7fe3ad35b75d4">8d3caeb</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7cb021121279a5d3645df7c1519dfff382ac033">d7cb021</a></td><td><code>Merge branch '24854' into 22731</code></td></tr></table>




---

archive/issue_comments_338259.json:
```json
{
    "body": "Changed commit from **[6d89d61](https://github.com/sagemath/sagetrac-mirror/commit/6d89d614dc1f363622e21b22e213e815b528425b)** to **[d7cb021](https://github.com/sagemath/sagetrac-mirror/commit/d7cb021121279a5d3645df7c1519dfff382ac033)**",
    "created_at": "2018-05-22T21:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338259",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6d89d61](https://github.com/sagemath/sagetrac-mirror/commit/6d89d614dc1f363622e21b22e213e815b528425b)** to **[d7cb021](https://github.com/sagemath/sagetrac-mirror/commit/d7cb021121279a5d3645df7c1519dfff382ac033)**



---

archive/issue_events_317348.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-05-26T13:10:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317348"
}
```



---

archive/issue_events_317349.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-05-26T13:10:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317349"
}
```



---

archive/issue_comments_338260.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nThe CI tests were successful (the failed tests are due to #25431)",
    "created_at": "2018-05-26T13:10:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338260",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:57" align="right">comment:57</div>

The CI tests were successful (the failed tests are due to #25431)



---

archive/issue_comments_338261.json:
```json
{
    "body": "Changed dependencies from **#25056, #20382, #24655, #24854** to **#25056, #20382, #24655, #24854, #25431**",
    "created_at": "2018-05-26T13:10:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338261",
    "user": "https://github.com/saraedum"
}
```

Changed dependencies from **#25056, #20382, #24655, #24854** to **#25056, #20382, #24655, #24854, #25431**



---

archive/issue_comments_338262.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e67314c4adb29748b4ef683f351b1a1094c837de\">e67314c</a></td><td><code>Skip _test_matrix_smith for lattice precision rings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bed5af50d2560826420e23b716193c95672ffe3e\">bed5af5</a></td><td><code>Merge branch '25431' into 22731</code></td></tr></table>\n",
    "created_at": "2018-05-26T13:11:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338262",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e67314c4adb29748b4ef683f351b1a1094c837de">e67314c</a></td><td><code>Skip _test_matrix_smith for lattice precision rings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bed5af50d2560826420e23b716193c95672ffe3e">bed5af5</a></td><td><code>Merge branch '25431' into 22731</code></td></tr></table>




---

archive/issue_comments_338263.json:
```json
{
    "body": "Changed commit from **[d7cb021](https://github.com/sagemath/sagetrac-mirror/commit/d7cb021121279a5d3645df7c1519dfff382ac033)** to **[bed5af5](https://github.com/sagemath/sagetrac-mirror/commit/bed5af50d2560826420e23b716193c95672ffe3e)**",
    "created_at": "2018-05-26T13:11:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338263",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d7cb021](https://github.com/sagemath/sagetrac-mirror/commit/d7cb021121279a5d3645df7c1519dfff382ac033)** to **[bed5af5](https://github.com/sagemath/sagetrac-mirror/commit/bed5af50d2560826420e23b716193c95672ffe3e)**



---

archive/issue_comments_338264.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [@saraedum](#comment:28):\n> Alternatively the second point could be replaced by the following two:\n> \n> * Introduce `$SAGE_LIBEXEC`. Configurable through `./configure --libexecdir`, default `$SAGE_LOCAL/libexec/`. (See https://www.gnu.org/prep/standards/html_node/Directory-Variables.html.)\n\n+1 for using libexec for all auxiliary scripts that are not useful for the user from the command line.",
    "created_at": "2018-05-31T17:26:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338264",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [@saraedum](#comment:28):
> Alternatively the second point could be replaced by the following two:
> 
> * Introduce `$SAGE_LIBEXEC`. Configurable through `./configure --libexecdir`, default `$SAGE_LOCAL/libexec/`. (See https://www.gnu.org/prep/standards/html_node/Directory-Variables.html.)

+1 for using libexec for all auxiliary scripts that are not useful for the user from the command line.



---

archive/issue_comments_338265.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nIt's hard to see the changes on this branch, by the way, since this is on top of some circleci branch; also needs rebasing.",
    "created_at": "2018-05-31T17:27:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338265",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:62" align="right">comment:62</div>

It's hard to see the changes on this branch, by the way, since this is on top of some circleci branch; also needs rebasing.



---

archive/issue_comments_338266.json:
```json
{
    "body": "Changed commit from **[bed5af5](https://github.com/sagemath/sagetrac-mirror/commit/bed5af50d2560826420e23b716193c95672ffe3e)** to **[7ba2ee2](https://github.com/sagemath/sagetrac-mirror/commit/7ba2ee2059f43222aabf3ce5de7a282f2687832d)**",
    "created_at": "2018-06-01T00:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338266",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bed5af5](https://github.com/sagemath/sagetrac-mirror/commit/bed5af50d2560826420e23b716193c95672ffe3e)** to **[7ba2ee2](https://github.com/sagemath/sagetrac-mirror/commit/7ba2ee2059f43222aabf3ce5de7a282f2687832d)**



---

archive/issue_comments_338267.json:
```json
{
    "body": "<div id=\"comment:63\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c0d6a3bb47b4d5799a83ad50d1556e895860b2e\">3c0d6a3</a></td><td><code>Merge branch '22731' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d28f601f53ddae2cecadc95854fbd91a525ac8f7\">d28f601</a></td><td><code>Make sage -pip work</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8e6077366e318a542299adfa1920424944e696c\">b8e6077</a></td><td><code>Do not install libssl-dev twice</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f44254f417f2cf19a50cd4bbe1e387f2084744b\">7f44254</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 24655</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91d52715e7b055dd6f33d1d22c5f536d3209aad6\">91d5271</a></td><td><code>Merge branch '24655' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b413748058bc4ab96300b165f830d27fafa5e460\">b413748</a></td><td><code>Merge branch '24854' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ddd34683e4e85c5121c720c0d790c4acfca1347\">4ddd346</a></td><td><code>Backport #24655 to build docker images</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab71cfa8a74651587bb84fabffe39bad35fcfb4b\">ab71cfa</a></td><td><code>Merge branch 'docker-8.3.beta3' into 24655</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50865484eab0b0119bcb3778273965fa8fb7a483\">5086548</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ba2ee2059f43222aabf3ce5de7a282f2687832d\">7ba2ee2</a></td><td><code>Merge branch '24854' into 22731</code></td></tr></table>\n",
    "created_at": "2018-06-01T00:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338267",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:63"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c0d6a3bb47b4d5799a83ad50d1556e895860b2e">3c0d6a3</a></td><td><code>Merge branch '22731' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d28f601f53ddae2cecadc95854fbd91a525ac8f7">d28f601</a></td><td><code>Make sage -pip work</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8e6077366e318a542299adfa1920424944e696c">b8e6077</a></td><td><code>Do not install libssl-dev twice</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f44254f417f2cf19a50cd4bbe1e387f2084744b">7f44254</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 24655</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91d52715e7b055dd6f33d1d22c5f536d3209aad6">91d5271</a></td><td><code>Merge branch '24655' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b413748058bc4ab96300b165f830d27fafa5e460">b413748</a></td><td><code>Merge branch '24854' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ddd34683e4e85c5121c720c0d790c4acfca1347">4ddd346</a></td><td><code>Backport #24655 to build docker images</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab71cfa8a74651587bb84fabffe39bad35fcfb4b">ab71cfa</a></td><td><code>Merge branch 'docker-8.3.beta3' into 24655</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50865484eab0b0119bcb3778273965fa8fb7a483">5086548</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ba2ee2059f43222aabf3ce5de7a282f2687832d">7ba2ee2</a></td><td><code>Merge branch '24854' into 22731</code></td></tr></table>




---

archive/issue_comments_338268.json:
```json
{
    "body": "Changed commit from **[7ba2ee2](https://github.com/sagemath/sagetrac-mirror/commit/7ba2ee2059f43222aabf3ce5de7a282f2687832d)** to **[2130060](https://github.com/sagemath/sagetrac-mirror/commit/2130060ef6ab1490368bd266ceaa3c190e2366a8)**",
    "created_at": "2018-06-01T00:42:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338268",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7ba2ee2](https://github.com/sagemath/sagetrac-mirror/commit/7ba2ee2059f43222aabf3ce5de7a282f2687832d)** to **[2130060](https://github.com/sagemath/sagetrac-mirror/commit/2130060ef6ab1490368bd266ceaa3c190e2366a8)**



---

archive/issue_comments_338269.json:
```json
{
    "body": "<div id=\"comment:64\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67085121dde73cca7a32052313ca8a28d3596298\">6708512</a></td><td><code>Call sage -tp with --all so it actually does something</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2130060ef6ab1490368bd266ceaa3c190e2366a8\">2130060</a></td><td><code>Merge branch '24854' into 22731</code></td></tr></table>\n",
    "created_at": "2018-06-01T00:42:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338269",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:64"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67085121dde73cca7a32052313ca8a28d3596298">6708512</a></td><td><code>Call sage -tp with --all so it actually does something</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2130060ef6ab1490368bd266ceaa3c190e2366a8">2130060</a></td><td><code>Merge branch '24854' into 22731</code></td></tr></table>




---

archive/issue_comments_338270.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nSee also #21559, #21569, #21570.",
    "created_at": "2018-06-02T04:01:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338270",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:65" align="right">comment:65</div>

See also #21559, #21569, #21570.



---

archive/issue_comments_338271.json:
```json
{
    "body": "Changed commit from **[2130060](https://github.com/sagemath/sagetrac-mirror/commit/2130060ef6ab1490368bd266ceaa3c190e2366a8)** to **[08f93c7](https://github.com/sagemath/sagetrac-mirror/commit/08f93c738438eea285881837340a0211e71e8187)**",
    "created_at": "2018-06-21T10:11:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338271",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2130060](https://github.com/sagemath/sagetrac-mirror/commit/2130060ef6ab1490368bd266ceaa3c190e2366a8)** to **[08f93c7](https://github.com/sagemath/sagetrac-mirror/commit/08f93c738438eea285881837340a0211e71e8187)**



---

archive/issue_comments_338272.json:
```json
{
    "body": "<div id=\"comment:66\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ef4e1830f78d45e9faf0ac48fa44f9d57da33ac\">4ef4e18</a></td><td><code>Where to report bugs for the docker images</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8a94e2fdbe3c8b7db3b06be0a707373ce85c1d9\">b8a94e2</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 24655</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a3d5d0c70310ddcf28ac684c56bf279d189179c\">6a3d5d0</a></td><td><code>drop trailing space</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7ea0f3c7a10baf475e96bd0bacd09f06039b14b\">f7ea0f3</a></td><td><code>Make update-env posix compliant again</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44e931cd8ccfd4d75b4d9d95cfc7f54308633b50\">44e931c</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8dadc8fc9e64968f66ff9953115203b6b0603df\">e8dadc8</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 24655</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5877f6577d414f357920f93314523d9c5b978c86\">5877f65</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/569d492f83e15b7abfd79c5ddbdda51928187fe0\">569d492</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 24655</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9c2cf841c9e83392f5fa5e111d49bbef05511cf\">e9c2cf8</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08f93c738438eea285881837340a0211e71e8187\">08f93c7</a></td><td><code>Merge branch '24854' into HEAD</code></td></tr></table>\n",
    "created_at": "2018-06-21T10:11:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338272",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:66"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ef4e1830f78d45e9faf0ac48fa44f9d57da33ac">4ef4e18</a></td><td><code>Where to report bugs for the docker images</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8a94e2fdbe3c8b7db3b06be0a707373ce85c1d9">b8a94e2</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 24655</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a3d5d0c70310ddcf28ac684c56bf279d189179c">6a3d5d0</a></td><td><code>drop trailing space</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7ea0f3c7a10baf475e96bd0bacd09f06039b14b">f7ea0f3</a></td><td><code>Make update-env posix compliant again</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44e931cd8ccfd4d75b4d9d95cfc7f54308633b50">44e931c</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8dadc8fc9e64968f66ff9953115203b6b0603df">e8dadc8</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 24655</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5877f6577d414f357920f93314523d9c5b978c86">5877f65</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/569d492f83e15b7abfd79c5ddbdda51928187fe0">569d492</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 24655</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9c2cf841c9e83392f5fa5e111d49bbef05511cf">e9c2cf8</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08f93c738438eea285881837340a0211e71e8187">08f93c7</a></td><td><code>Merge branch '24854' into HEAD</code></td></tr></table>




---

archive/issue_comments_338273.json:
```json
{
    "body": "<div id=\"comment:67\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57d653d348a292e0ba9e34b197b51023e0a14c2a\">57d653d</a></td><td><code>Merge branch '25270' into 24854</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d29058e7950b177f6d0c48c88248790ec6a86a3b\">d29058e</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 24655</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2cec8ac704cddc2c65cbc439a7b07c7bcc953f1b\">2cec8ac</a></td><td><code>Replace do tag with big</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bb3fafc0393d05694a9bea1bdc5271ad930601b\">7bb3faf</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c9c2ceb2112eba751ffdb0fbe583ff80734509c\">6c9c2ce</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 25270</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e38d7de774639a8ed9e05d8bfc0e827772d36d33\">e38d7de</a></td><td><code>Merge branch '25270' into 24854</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/662d3f8b0b40bceb9f2f75c8f507a1fce3ccc1df\">662d3f8</a></td><td><code>Use --short to run --short doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/624101115b9af149f8bf0d7cfe2f63d9ccf5201d\">6241011</a></td><td><code>Fix namespacing for CircleCI</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f1565541206568118e9144572f1ef3229e1523e\">9f15655</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9ca8a1e356eb6508036e9c986f04f2d97131428\">a9ca8a1</a></td><td><code>Merge branch '24854' into 22731</code></td></tr></table>\n",
    "created_at": "2018-07-11T10:03:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338273",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:67"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57d653d348a292e0ba9e34b197b51023e0a14c2a">57d653d</a></td><td><code>Merge branch '25270' into 24854</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d29058e7950b177f6d0c48c88248790ec6a86a3b">d29058e</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 24655</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2cec8ac704cddc2c65cbc439a7b07c7bcc953f1b">2cec8ac</a></td><td><code>Replace do tag with big</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bb3fafc0393d05694a9bea1bdc5271ad930601b">7bb3faf</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c9c2ceb2112eba751ffdb0fbe583ff80734509c">6c9c2ce</a></td><td><code>Merge remote-tracking branch 'trac/develop' into 25270</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e38d7de774639a8ed9e05d8bfc0e827772d36d33">e38d7de</a></td><td><code>Merge branch '25270' into 24854</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/662d3f8b0b40bceb9f2f75c8f507a1fce3ccc1df">662d3f8</a></td><td><code>Use --short to run --short doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/624101115b9af149f8bf0d7cfe2f63d9ccf5201d">6241011</a></td><td><code>Fix namespacing for CircleCI</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f1565541206568118e9144572f1ef3229e1523e">9f15655</a></td><td><code>Merge branch '24655' into 24854</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9ca8a1e356eb6508036e9c986f04f2d97131428">a9ca8a1</a></td><td><code>Merge branch '24854' into 22731</code></td></tr></table>




---

archive/issue_comments_338274.json:
```json
{
    "body": "Changed commit from **[08f93c7](https://github.com/sagemath/sagetrac-mirror/commit/08f93c738438eea285881837340a0211e71e8187)** to **[a9ca8a1](https://github.com/sagemath/sagetrac-mirror/commit/a9ca8a1e356eb6508036e9c986f04f2d97131428)**",
    "created_at": "2018-07-11T10:03:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338274",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[08f93c7](https://github.com/sagemath/sagetrac-mirror/commit/08f93c738438eea285881837340a0211e71e8187)** to **[a9ca8a1](https://github.com/sagemath/sagetrac-mirror/commit/a9ca8a1e356eb6508036e9c986f04f2d97131428)**



---

archive/issue_comments_338275.json:
```json
{
    "body": "Changed commit from **[a9ca8a1](https://github.com/sagemath/sagetrac-mirror/commit/a9ca8a1e356eb6508036e9c986f04f2d97131428)** to **[9c9caef](https://github.com/sagemath/sagetrac-mirror/commit/9c9caef7b23b5782d230dd52aa9f06cb7aee96d9)**",
    "created_at": "2018-07-12T09:06:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338275",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a9ca8a1](https://github.com/sagemath/sagetrac-mirror/commit/a9ca8a1e356eb6508036e9c986f04f2d97131428)** to **[9c9caef](https://github.com/sagemath/sagetrac-mirror/commit/9c9caef7b23b5782d230dd52aa9f06cb7aee96d9)**



---

archive/issue_comments_338276.json:
```json
{
    "body": "<div id=\"comment:68\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e267b63dd1ce92e7cbd6ef0cdf99ed7be66ec53\">6e267b6</a></td><td><code>Fix namespacing for [GitLab](../wiki/GitLab) CI</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c9caef7b23b5782d230dd52aa9f06cb7aee96d9\">9c9caef</a></td><td><code>Merge branch '24655' into 22731</code></td></tr></table>\n",
    "created_at": "2018-07-12T09:06:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338276",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:68"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e267b63dd1ce92e7cbd6ef0cdf99ed7be66ec53">6e267b6</a></td><td><code>Fix namespacing for [GitLab](../wiki/GitLab) CI</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c9caef7b23b5782d230dd52aa9f06cb7aee96d9">9c9caef</a></td><td><code>Merge branch '24655' into 22731</code></td></tr></table>




---

archive/issue_comments_338277.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\n1. There is a merge conflicts.\n\n2. As I mentioned in [comment:4], don't use `SAGE_SCRIPTS_DIR`.",
    "created_at": "2019-03-21T13:55:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338277",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:69" align="right">comment:69</div>

1. There is a merge conflicts.

2. As I mentioned in [comment:4], don't use `SAGE_SCRIPTS_DIR`.



---

archive/issue_events_317350.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-21T13:55:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317350"
}
```



---

archive/issue_events_317351.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-03-21T13:55:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317351"
}
```



---

archive/issue_events_317352.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-15T23:40:07Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317352"
}
```



---

archive/issue_events_317353.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-15T23:40:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317353"
}
```



---

archive/issue_comments_338278.json:
```json
{
    "body": "Changed work issues from **requires testing** to **clarify and prepare to support #30036**",
    "created_at": "2020-07-15T23:43:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338278",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **requires testing** to **clarify and prepare to support #30036**



---

archive/issue_comments_338279.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,14 @@\n-* Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.\n-* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_\u2026` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.\n+Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes.\n \n-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)\n+* Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n+\n+  - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n+\n+* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip).\n+\n+* Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.\n+\n+* \"libexec\"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n+\n+\n+\n``````\n",
    "created_at": "2020-07-16T18:59:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338279",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,14 @@
-* Introduce `$SAGE_BIN` as the place where sage and the binaries of all the SPKGs get installed to. Configurable through `./configure --bindir`, default `$SAGE_LOCAL/bin/`.
-* Make `$SAGE_SCRIPTS_DIR` available like any other `$SAGE_…` variable everywhere and use it as the directory where all the `sage-*` scripts are installed to. The default should be `$SAGE_LOCAL/bin/`, however, it's configurable as `./configure --with-scriptsdir`.
+Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes.
 
-CI runs for the proposed changes [This is the Trac macro *Image* that was inherited from the migration called with arguments (https://gitlab.com/sagemath/dev/trac/badges/u/saraedum/22731/pipeline.svg,link=https://gitlab.com/sagemath/dev/trac/commits/u/saraedum/22731))](https://trac.sagemath.org/wiki/WikiMacros#Image-macro) (note that the patchbot does not test these changes.)
+* Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.
+
+  - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 
+
+* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip).
+
+* Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.
+
+* "libexec"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
+
+
+
``````




---

archive/issue_events_317354.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-16T18:59:43Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "title_is": "Replace \"$SAGE_LOCAL/bin\" by more specific variables to make Sage easier to package",
    "title_was": "Use SAGE_BIN and SAGE_SCRIPTS_DIR to make Sage easier to package",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317354"
}
```



---

archive/issue_comments_338280.json:
```json
{
    "body": "Changed work issues from **clarify and prepare to support #30036** to **clarify and prepare to support #30036, review/rebase changes**",
    "created_at": "2020-07-16T19:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338280",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **clarify and prepare to support #30036** to **clarify and prepare to support #30036, review/rebase changes**



---

archive/issue_comments_338281.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,5 +10,6 @@\n \n * \"libexec\"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n \n+See also:\n+- https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n \n-\n``````\n",
    "created_at": "2020-07-17T02:39:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338281",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,5 +10,6 @@
 
 * "libexec"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
 
+See also:
+- https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
 
-
``````




---

archive/issue_comments_338282.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,4 +12,5 @@\n \n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n-\n+- #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n+- #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n``````\n",
    "created_at": "2020-08-13T05:45:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338282",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,4 +12,5 @@
 
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
-
+- #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
+- #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
``````




---

archive/issue_events_317355.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-24T17:25:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317355"
}
```



---

archive/issue_events_317356.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-24T17:25:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317356"
}
```



---

archive/issue_events_317357.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-08T06:04:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317357"
}
```



---

archive/issue_events_317358.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-08T06:04:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317358"
}
```



---

archive/issue_events_317359.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-11T17:01:10Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "title_is": "Replace \"$SAGE_LOCAL/bin\" by more specific variables to make Sage easier to package, use in venvs",
    "title_was": "Replace \"$SAGE_LOCAL/bin\" by more specific variables to make Sage easier to package",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317359"
}
```



---

archive/issue_comments_338283.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,10 +1,10 @@\n-Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes.\n+Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.\n \n * Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n \n   - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n \n-* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip).\n+* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). (#29013 proposed the variable `SAGE_VENV` for this.)\n \n * Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.\n \n``````\n",
    "created_at": "2020-09-11T17:01:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338283",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,10 +1,10 @@
-Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes.
+Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.
 
 * Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.
 
   - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 
 
-* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip).
+* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). (#29013 proposed the variable `SAGE_VENV` for this.)
 
 * Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.
 
``````




---

archive/issue_comments_338284.json:
```json
{
    "body": "Changed work issues from **clarify and prepare to support #30036, review/rebase changes** to **Implement as described**",
    "created_at": "2020-09-11T17:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338284",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **clarify and prepare to support #30036, review/rebase changes** to **Implement as described**



---

archive/issue_comments_338285.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,16 +1,19 @@\n Various scripts refer to \"$SAGE_LOCAL/bin\" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.\n \n-* Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n+**1a.** Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.\n \n-  - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n+**1b.** (Wishlist item:) Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) \n \n-* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). (#29013 proposed the variable `SAGE_VENV` for this.)\n+**2a.** Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). As proposed in #29013, we use the variable `SAGE_VENV` for this, so these scripts would be referred to as `$SAGE_VENV/bin/sage-eval` etc.\n \n-* Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.\n+**2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.\n \n-* \"libexec\"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n+**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n+\n+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect.  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n \n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n+\n``````\n",
    "created_at": "2020-09-11T17:14:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338285",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,16 +1,19 @@
 Various scripts refer to "$SAGE_LOCAL/bin" in a way that conflates several different uses. We introduce new variables to give packagers more flexibility without having to patch, and to enable new installation schemes, including the use of Sage in users' venvs.
 
-* Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.
+**1a.** Introduce `$SAGE_BIN` as the place where the binaries of all the SPKGs get installed to. Default is `$SAGE_LOCAL/bin/`.
 
-  - Wishlist item: Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 
+**1b.** (Wishlist item:) Make it configurable through `./configure --bindir`, but this would need major changes to spkg-configure scripts. (Supporting `--bindir` would be another step toward more autotools compliance, see Meta-ticket #21566.) 
 
-* Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). (#29013 proposed the variable `SAGE_VENV` for this.)
+**2a.** Scripts such as `src/bin/sage`, `src/bin/sage-eval` are installed by the `sagelib` package using the `scripts` facility of distutils/setuptools.  If `sagelib` is installed into a venv, these scripts are installed into the `bin` directory of the venv. For the default installation in sage-the-distribution `--with-system-python`, this venv is identical with `SAGE_LOCAL`.  But if other venvs are created by the user, it will be unrelated to `SAGE_LOCAL`; in fact, `SAGE_LOCAL` may be undefined (in distribution packaging and when installing sagelib through pip). As proposed in #29013, we use the variable `SAGE_VENV` for this, so these scripts would be referred to as `$SAGE_VENV/bin/sage-eval` etc.
 
-* Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.
+**2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.
 
-* "libexec"-like scripts in `src/bin` that distribution packagers would like to hide.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
+**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
+
+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect.  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
 
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
 - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
 - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
+
``````




---

archive/issue_comments_338286.json:
```json
{
    "body": "Changed branch from **[u/saraedum/22731](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/22731)** to **[u/mkoeppe/22731](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/22731)**",
    "created_at": "2020-09-11T19:24:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338286",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/saraedum/22731](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/22731)** to **[u/mkoeppe/22731](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/22731)**



---

archive/issue_comments_338287.json:
```json
{
    "body": "Changed dependencies from **#25056, #20382, #24655, #24854, #25431** to none",
    "created_at": "2020-09-11T19:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338287",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#25056, #20382, #24655, #24854, #25431** to none



---

archive/issue_comments_338288.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nRebased away from #24854\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73253259d7d5eb08f0e41a05524961fe448c6fd2\">7325325</a></td><td><code>A first draft of using SAGE_BIN and SAGE_SCRIPTS_DIR differently</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9dfd1a4cf1e789672f09a464757d50c2036b34a\">b9dfd1a</a></td><td><code>Add configure switch for scriptsdir</code></td></tr></table>\n",
    "created_at": "2020-09-11T19:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338288",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:81" align="right">comment:81</div>

Rebased away from #24854

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73253259d7d5eb08f0e41a05524961fe448c6fd2">7325325</a></td><td><code>A first draft of using SAGE_BIN and SAGE_SCRIPTS_DIR differently</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9dfd1a4cf1e789672f09a464757d50c2036b34a">b9dfd1a</a></td><td><code>Add configure switch for scriptsdir</code></td></tr></table>




---

archive/issue_comments_338289.json:
```json
{
    "body": "Changed commit from **[9c9caef](https://github.com/sagemath/sagetrac-mirror/commit/9c9caef7b23b5782d230dd52aa9f06cb7aee96d9)** to **[b9dfd1a](https://github.com/sagemath/sagetrac-mirror/commit/b9dfd1a4cf1e789672f09a464757d50c2036b34a)**",
    "created_at": "2020-09-11T19:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338289",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[9c9caef](https://github.com/sagemath/sagetrac-mirror/commit/9c9caef7b23b5782d230dd52aa9f06cb7aee96d9)** to **[b9dfd1a](https://github.com/sagemath/sagetrac-mirror/commit/b9dfd1a4cf1e789672f09a464757d50c2036b34a)**



---

archive/issue_comments_338290.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,9 +8,9 @@\n \n **2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.\n \n-**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)\n+**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)\n \n-**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect.  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n \n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n``````\n",
    "created_at": "2020-09-16T01:43:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338290",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,9 +8,9 @@
 
 **2b.** Referring to the `python3` used for sage. Likewise, this comes from the venv, not `$SAGE_LOCAL/bin`.  So it should be referred to as `$SAGE_VENV/bin/python3`.
 
-**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed.)
+**2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)
 
-**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect.  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
 
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
``````




---

archive/issue_comments_338291.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nHoping that we can move this ticket forward next, to reduce the amount of necessary patching in distribution packaging.",
    "created_at": "2020-09-16T01:43:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338291",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:82" align="right">comment:82</div>

Hoping that we can move this ticket forward next, to reduce the amount of necessary patching in distribution packaging.



---

archive/issue_comments_338292.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -16,4 +16,4 @@\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n-\n+- #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv\n``````\n",
    "created_at": "2020-09-16T03:20:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338292",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -16,4 +16,4 @@
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
 - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
 - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
-
+- #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv
``````




---

archive/issue_comments_338293.json:
```json
{
    "body": "Dependencies: **#30818**",
    "created_at": "2020-10-23T21:09:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338293",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#30818**



---

archive/issue_comments_338294.json:
```json
{
    "body": "Changed dependencies from **#30818** to **#29850, #30818**",
    "created_at": "2020-11-10T22:41:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338294",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30818** to **#29850, #30818**



---

archive/issue_comments_338295.json:
```json
{
    "body": "Changed commit from **[b9dfd1a](https://github.com/sagemath/sagetrac-mirror/commit/b9dfd1a4cf1e789672f09a464757d50c2036b34a)** to **[545d118](https://github.com/sagemath/sagetrac-mirror/commit/545d118b9bc907340eca5342e380ce32fa72a923)**",
    "created_at": "2020-11-10T23:01:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338295",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b9dfd1a](https://github.com/sagemath/sagetrac-mirror/commit/b9dfd1a4cf1e789672f09a464757d50c2036b34a)** to **[545d118](https://github.com/sagemath/sagetrac-mirror/commit/545d118b9bc907340eca5342e380ce32fa72a923)**



---

archive/issue_comments_338296.json:
```json
{
    "body": "<div id=\"comment:86\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ba8cf2975545882f8c0d60f1faf193524726305\">9ba8cf2</a></td><td><code>Merge tag '9.3.beta0' into t/29951/src_bin_sage_env__make_sage_env_config_and_sage_local_optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8e69100d6b4ba30a3854266fbaa83aa3982f4a3\">c8e6910</a></td><td><code>Merge tag '9.3.beta1' into t/29951/src_bin_sage_env__make_sage_env_config_and_sage_local_optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ab593c41f56260651931a630a6c0fd504130395\">9ab593c</a></td><td><code>Install sage-env-config with sage_conf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3615809e0eda053534d6f0713ee95e6c5939c7d\">a361580</a></td><td><code>build/pkgs/sage_conf/spkg-src: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d02b59722808b81329c390017e55e69237cc9557\">d02b597</a></td><td><code>build/pkgs/sagelib/src/setup.py: Do not install sage-env-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b4bc9938d3dcef8cd4f745f0bc26a718b35178d\">1b4bc99</a></td><td><code>src/bin/sage: Only source sage-env-config if it exists</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1a6df55d880441fe57975c653c161e929cc9dd5\">a1a6df5</a></td><td><code>src/bin/sage: Use python3 etc. from PATH instead of using SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d30b4108d16ab4187d55d25bf19b94b2e6053106\">d30b410</a></td><td><code>build/pkgs/sage_conf/spkg-install: Build wheel manually</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19f7eae793b3eee1113f98e31b952246ebfd51c4\">19f7eae</a></td><td><code>src/bin/sage-env: Make sage-env-config optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/545d118b9bc907340eca5342e380ce32fa72a923\">545d118</a></td><td><code>sage.env: Add SAGE_VENV</code></td></tr></table>\n",
    "created_at": "2020-11-10T23:01:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338296",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:86"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ba8cf2975545882f8c0d60f1faf193524726305">9ba8cf2</a></td><td><code>Merge tag '9.3.beta0' into t/29951/src_bin_sage_env__make_sage_env_config_and_sage_local_optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8e69100d6b4ba30a3854266fbaa83aa3982f4a3">c8e6910</a></td><td><code>Merge tag '9.3.beta1' into t/29951/src_bin_sage_env__make_sage_env_config_and_sage_local_optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ab593c41f56260651931a630a6c0fd504130395">9ab593c</a></td><td><code>Install sage-env-config with sage_conf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3615809e0eda053534d6f0713ee95e6c5939c7d">a361580</a></td><td><code>build/pkgs/sage_conf/spkg-src: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d02b59722808b81329c390017e55e69237cc9557">d02b597</a></td><td><code>build/pkgs/sagelib/src/setup.py: Do not install sage-env-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b4bc9938d3dcef8cd4f745f0bc26a718b35178d">1b4bc99</a></td><td><code>src/bin/sage: Only source sage-env-config if it exists</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1a6df55d880441fe57975c653c161e929cc9dd5">a1a6df5</a></td><td><code>src/bin/sage: Use python3 etc. from PATH instead of using SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d30b4108d16ab4187d55d25bf19b94b2e6053106">d30b410</a></td><td><code>build/pkgs/sage_conf/spkg-install: Build wheel manually</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19f7eae793b3eee1113f98e31b952246ebfd51c4">19f7eae</a></td><td><code>src/bin/sage-env: Make sage-env-config optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/545d118b9bc907340eca5342e380ce32fa72a923">545d118</a></td><td><code>sage.env: Add SAGE_VENV</code></td></tr></table>




---

archive/issue_comments_338297.json:
```json
{
    "body": "<div id=\"comment:87\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6348c5c7c0eb2caba9f72f511847bea550b23709\">6348c5c</a></td><td><code>src/sage: Replace some SAGE_LOCAL by SAGE_VENV</code></td></tr></table>\n",
    "created_at": "2020-11-11T01:18:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338297",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:87"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6348c5c7c0eb2caba9f72f511847bea550b23709">6348c5c</a></td><td><code>src/sage: Replace some SAGE_LOCAL by SAGE_VENV</code></td></tr></table>




---

archive/issue_comments_338298.json:
```json
{
    "body": "Changed commit from **[545d118](https://github.com/sagemath/sagetrac-mirror/commit/545d118b9bc907340eca5342e380ce32fa72a923)** to **[6348c5c](https://github.com/sagemath/sagetrac-mirror/commit/6348c5c7c0eb2caba9f72f511847bea550b23709)**",
    "created_at": "2020-11-11T01:18:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338298",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[545d118](https://github.com/sagemath/sagetrac-mirror/commit/545d118b9bc907340eca5342e380ce32fa72a923)** to **[6348c5c](https://github.com/sagemath/sagetrac-mirror/commit/6348c5c7c0eb2caba9f72f511847bea550b23709)**



---

archive/issue_comments_338299.json:
```json
{
    "body": "Changed work issues from **Implement as described** to none",
    "created_at": "2020-11-11T01:19:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338299",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **Implement as described** to none



---

archive/issue_comments_338300.json:
```json
{
    "body": "Changed author from **Tobias Hansen, Julian R\u00fcth** to **Matthias Koeppe**",
    "created_at": "2020-11-11T01:19:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338300",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Tobias Hansen, Julian Rüth** to **Matthias Koeppe**



---

archive/issue_events_317360.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T01:19:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317360"
}
```



---

archive/issue_events_317361.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T01:19:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317361"
}
```



---

archive/issue_comments_338301.json:
```json
{
    "body": "Changed dependencies from **#29850, #30818** to **#29850**",
    "created_at": "2020-11-11T01:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338301",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29850, #30818** to **#29850**



---

archive/issue_comments_338302.json:
```json
{
    "body": "<div id=\"comment:90\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecde60526b1c8da6e4b4914dcea50fd7e68e24a4\">ecde605</a></td><td><code>Merge branch 't/29850/install_sage_env_config_with_sage_conf' into t/30888/remove_unused_env_variable_sage_scripts_dir</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a318e9e3c03bc466f966965df378ff4685ff6d12\">a318e9e</a></td><td><code>src/bin/sage-env: Do not set SAGE_SCRIPTS_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/122bf7890c17de88de973be8ac9c5165e9d47447\">122bf78</a></td><td><code>Merge branch 't/30888/remove_unused_env_variable_sage_scripts_dir' into t/22731/22731</code></td></tr></table>\n",
    "created_at": "2020-11-11T02:20:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338302",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:90"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecde60526b1c8da6e4b4914dcea50fd7e68e24a4">ecde605</a></td><td><code>Merge branch 't/29850/install_sage_env_config_with_sage_conf' into t/30888/remove_unused_env_variable_sage_scripts_dir</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a318e9e3c03bc466f966965df378ff4685ff6d12">a318e9e</a></td><td><code>src/bin/sage-env: Do not set SAGE_SCRIPTS_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/122bf7890c17de88de973be8ac9c5165e9d47447">122bf78</a></td><td><code>Merge branch 't/30888/remove_unused_env_variable_sage_scripts_dir' into t/22731/22731</code></td></tr></table>




---

archive/issue_comments_338303.json:
```json
{
    "body": "Changed commit from **[6348c5c](https://github.com/sagemath/sagetrac-mirror/commit/6348c5c7c0eb2caba9f72f511847bea550b23709)** to **[122bf78](https://github.com/sagemath/sagetrac-mirror/commit/122bf7890c17de88de973be8ac9c5165e9d47447)**",
    "created_at": "2020-11-11T02:20:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338303",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6348c5c](https://github.com/sagemath/sagetrac-mirror/commit/6348c5c7c0eb2caba9f72f511847bea550b23709)** to **[122bf78](https://github.com/sagemath/sagetrac-mirror/commit/122bf7890c17de88de973be8ac9c5165e9d47447)**



---

archive/issue_comments_338304.json:
```json
{
    "body": "Changed dependencies from **#29850** to **#29850, #30888**",
    "created_at": "2020-11-11T02:20:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338304",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29850** to **#29850, #30888**



---

archive/issue_comments_338305.json:
```json
{
    "body": "<div id=\"comment:92\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-11-11T19:01:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338305",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:92"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_338306.json:
```json
{
    "body": "Changed commit from **[122bf78](https://github.com/sagemath/sagetrac-mirror/commit/122bf7890c17de88de973be8ac9c5165e9d47447)** to **[6348c5c](https://github.com/sagemath/sagetrac-mirror/commit/6348c5c7c0eb2caba9f72f511847bea550b23709)**",
    "created_at": "2020-11-11T19:01:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338306",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[122bf78](https://github.com/sagemath/sagetrac-mirror/commit/122bf7890c17de88de973be8ac9c5165e9d47447)** to **[6348c5c](https://github.com/sagemath/sagetrac-mirror/commit/6348c5c7c0eb2caba9f72f511847bea550b23709)**



---

archive/issue_comments_338307.json:
```json
{
    "body": "Changed dependencies from **#29850, #30888** to **#29850**",
    "created_at": "2020-11-11T19:02:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338307",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29850, #30888** to **#29850**



---

archive/issue_comments_338308.json:
```json
{
    "body": "<div id=\"comment:94\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f88709ed014c3af84ae5b3cbb26f1a1dbbbe53d\">8f88709</a></td><td><code>src/bin/sage: Only source sage-env-config if it exists</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab2655ea81257c333d3fdf2613d99c4ec2b343d7\">ab2655e</a></td><td><code>src/bin/sage: Use python3 etc. from PATH instead of using SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4577f37111f99e5733dd1c909e6e3a79dfe2163d\">4577f37</a></td><td><code>src/bin/sage-env: Make sage-env-config optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c35c170a7b7607187a5b5bb03f3bc3863555eb52\">c35c170</a></td><td><code>sage.env: Add SAGE_VENV</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c585d94b95c5675f5a68690d13fa6a949642c48f\">c585d94</a></td><td><code>src/sage: Replace some SAGE_LOCAL by SAGE_VENV</code></td></tr></table>\n",
    "created_at": "2020-11-12T18:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338308",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:94"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f88709ed014c3af84ae5b3cbb26f1a1dbbbe53d">8f88709</a></td><td><code>src/bin/sage: Only source sage-env-config if it exists</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab2655ea81257c333d3fdf2613d99c4ec2b343d7">ab2655e</a></td><td><code>src/bin/sage: Use python3 etc. from PATH instead of using SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4577f37111f99e5733dd1c909e6e3a79dfe2163d">4577f37</a></td><td><code>src/bin/sage-env: Make sage-env-config optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c35c170a7b7607187a5b5bb03f3bc3863555eb52">c35c170</a></td><td><code>sage.env: Add SAGE_VENV</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c585d94b95c5675f5a68690d13fa6a949642c48f">c585d94</a></td><td><code>src/sage: Replace some SAGE_LOCAL by SAGE_VENV</code></td></tr></table>




---

archive/issue_comments_338309.json:
```json
{
    "body": "Changed commit from **[6348c5c](https://github.com/sagemath/sagetrac-mirror/commit/6348c5c7c0eb2caba9f72f511847bea550b23709)** to **[c585d94](https://github.com/sagemath/sagetrac-mirror/commit/c585d94b95c5675f5a68690d13fa6a949642c48f)**",
    "created_at": "2020-11-12T18:31:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338309",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6348c5c](https://github.com/sagemath/sagetrac-mirror/commit/6348c5c7c0eb2caba9f72f511847bea550b23709)** to **[c585d94](https://github.com/sagemath/sagetrac-mirror/commit/c585d94b95c5675f5a68690d13fa6a949642c48f)**



---

archive/issue_comments_338310.json:
```json
{
    "body": "Changed dependencies from **#29850** to **#29951**",
    "created_at": "2020-11-12T18:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338310",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29850** to **#29951**



---

archive/issue_comments_338311.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,6 +12,9 @@\n \n **In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n \n+We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.\n+\n+\n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n``````\n",
    "created_at": "2020-11-12T18:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338311",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,6 +12,9 @@
 
 **In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
 
+We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.
+
+
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
 - #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
``````




---

archive/issue_comments_338312.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nPicked some changes from #29850, rebased away from it.",
    "created_at": "2020-11-12T18:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338312",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:95" align="right">comment:95</div>

Picked some changes from #29850, rebased away from it.



---

archive/issue_comments_338313.json:
```json
{
    "body": "Changed commit from **[c585d94](https://github.com/sagemath/sagetrac-mirror/commit/c585d94b95c5675f5a68690d13fa6a949642c48f)** to **[2fd195f](https://github.com/sagemath/sagetrac-mirror/commit/2fd195f5f044d125b0d5a743fec9d79e449126af)**",
    "created_at": "2020-11-12T18:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338313",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c585d94](https://github.com/sagemath/sagetrac-mirror/commit/c585d94b95c5675f5a68690d13fa6a949642c48f)** to **[2fd195f](https://github.com/sagemath/sagetrac-mirror/commit/2fd195f5f044d125b0d5a743fec9d79e449126af)**



---

archive/issue_comments_338314.json:
```json
{
    "body": "<div id=\"comment:96\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2fd195f5f044d125b0d5a743fec9d79e449126af\">2fd195f</a></td><td><code>src/bin/sage: Fix reference to trac ticket</code></td></tr></table>\n",
    "created_at": "2020-11-12T18:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338314",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:96"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2fd195f5f044d125b0d5a743fec9d79e449126af">2fd195f</a></td><td><code>src/bin/sage: Fix reference to trac ticket</code></td></tr></table>




---

archive/issue_comments_338315.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,6 +17,6 @@\n \n See also:\n - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch\n-- #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`\n+- #30013 `src/bin/sage-env`: Make sure `$SAGE_VENV/bin` is at the beginning of the PATH\n - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional\n - #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv\n``````\n",
    "created_at": "2020-11-12T18:40:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338315",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,6 +17,6 @@
 
 See also:
 - https://salsa.debian.org/science-team/sagemath/-/blob/master/debian/patches/u1-scripts-dir.patch
-- #30013 `src/bin/sage-env`: Make sure `SAGE_SCRIPTS_DIR` is at the beginning of the `PATH`
+- #30013 `src/bin/sage-env`: Make sure `$SAGE_VENV/bin` is at the beginning of the PATH
 - #29951 `src/bin/sage-env`: Make `SAGE_ROOT` and `SAGE_LOCAL` optional
 - #30578 Add `src/requirements.txt` for installation of `sagelib` in a venv
``````




---

archive/issue_comments_338316.json:
```json
{
    "body": "<div id=\"comment:98\" align=\"right\">comment:98</div>\n\nAlthough the ticket description is long, the actual changes on top of #29951 are very small. Essentially, the `sage` script now relies on the `PATH` set by `sage-env` instead of hardcoding the directory where `python3` etc. is located. `$SAGE_VENV/bin` is used explicitly only in a few places that need an absolute filename.\n\nReady for review",
    "created_at": "2020-11-12T18:55:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338316",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:98" align="right">comment:98</div>

Although the ticket description is long, the actual changes on top of #29951 are very small. Essentially, the `sage` script now relies on the `PATH` set by `sage-env` instead of hardcoding the directory where `python3` etc. is located. `$SAGE_VENV/bin` is used explicitly only in a few places that need an absolute filename.

Ready for review



---

archive/issue_comments_338317.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nCodewise this looks good to me, but may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable as it's not clear from the context when to use which.\n\nMoreover, I was wondering if it makes sense to provide only a variable `SAGE_VENV_BIN` pointing to the binary folder in the venv (since at least from your ticket description and code changes would be sufficient and parallels the upcoming `SAGE_BIN`).\n\nNeeds another review as I'm not yet that familiar with sages inner workings.",
    "created_at": "2020-11-12T21:34:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338317",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:99" align="right">comment:99</div>

Codewise this looks good to me, but may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable as it's not clear from the context when to use which.

Moreover, I was wondering if it makes sense to provide only a variable `SAGE_VENV_BIN` pointing to the binary folder in the venv (since at least from your ticket description and code changes would be sufficient and parallels the upcoming `SAGE_BIN`).

Needs another review as I'm not yet that familiar with sages inner workings.



---

archive/issue_comments_338318.json:
```json
{
    "body": "Reviewer: **Tobias Diez,**",
    "created_at": "2020-11-12T21:34:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338318",
    "user": "https://github.com/tobiasdiez"
}
```

Reviewer: **Tobias Diez,**



---

archive/issue_comments_338319.json:
```json
{
    "body": "Changed commit from **[2fd195f](https://github.com/sagemath/sagetrac-mirror/commit/2fd195f5f044d125b0d5a743fec9d79e449126af)** to **[f3b7a9c](https://github.com/sagemath/sagetrac-mirror/commit/f3b7a9cce247457f07ef42069cdadb3f6409b008)**",
    "created_at": "2020-11-13T01:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338319",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2fd195f](https://github.com/sagemath/sagetrac-mirror/commit/2fd195f5f044d125b0d5a743fec9d79e449126af)** to **[f3b7a9c](https://github.com/sagemath/sagetrac-mirror/commit/f3b7a9cce247457f07ef42069cdadb3f6409b008)**



---

archive/issue_comments_338320.json:
```json
{
    "body": "<div id=\"comment:0\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3b7a9cce247457f07ef42069cdadb3f6409b008\">f3b7a9c</a></td><td><code>src/sage/env.py: Add documentation</code></td></tr></table>\n",
    "created_at": "2020-11-13T01:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338320",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:0"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3b7a9cce247457f07ef42069cdadb3f6409b008">f3b7a9c</a></td><td><code>src/sage/env.py: Add documentation</code></td></tr></table>




---

archive/issue_comments_338321.json:
```json
{
    "body": "<div id=\"comment:101\" align=\"right\">comment:101</div>\n\nReplying to [@tobiasdiez](#comment:99):\n> ... may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable \n\nDone, please take a look",
    "created_at": "2020-11-13T01:27:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338321",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:101" align="right">comment:101</div>

Replying to [@tobiasdiez](#comment:99):
> ... may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable 

Done, please take a look



---

archive/issue_comments_338322.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,7 +10,7 @@\n \n **2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are \"libexec\"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)\n \n-**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the \"libexec\" aspect (using `$SAGE_VENV/bin` directly instead of going through `SAGE_VENV_SCRIPTS_DIR`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.\n \n We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.\n \n``````\n",
    "created_at": "2020-11-13T01:30:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338322",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,7 +10,7 @@
 
 **2c.** The subset of the scripts in `src/bin`, currently installed by the `sagelib` package, that are "libexec"-like (not user-facing). Distribution packagers would like to hide these scripts.  (In the old description of this ticket, it was proposed to use `$SAGE_SCRIPTS_DIR` for this, but a more specific name is needed: We will use `$SAGE_VENV_SCRIPTS_DIR`.)
 
-**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (`SAGE_VENV_SCRIPTS_DIR` will be equal to `$SAGE_VENV/bin`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
+**In this ticket,** we introduce `SAGE_VENV` for 2abc, ignoring the "libexec" aspect (using `$SAGE_VENV/bin` directly instead of going through `SAGE_VENV_SCRIPTS_DIR`).  Items 1 and the libexec aspect of 2c  can be done on follow-up tickets.
 
 We also make `sage-env-config` optional from the viewpoint of the other scripts. This is preparation for #29850 / #29852.
 
``````




---

archive/issue_comments_338323.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nReplying to [@tobiasdiez](#comment:99):\n> I was wondering if it makes sense to provide only a variable `SAGE_VENV_BIN` pointing to the binary folder in the venv (since at least from your ticket description and code changes would be sufficient and parallels the upcoming `SAGE_BIN`).\n\nSure, that will make sense to do in the follow-up ticket regarding `SAGE_BIN` (if the downstream packagers still need that...)",
    "created_at": "2020-11-13T01:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338323",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:103" align="right">comment:103</div>

Replying to [@tobiasdiez](#comment:99):
> I was wondering if it makes sense to provide only a variable `SAGE_VENV_BIN` pointing to the binary folder in the venv (since at least from your ticket description and code changes would be sufficient and parallels the upcoming `SAGE_BIN`).

Sure, that will make sense to do in the follow-up ticket regarding `SAGE_BIN` (if the downstream packagers still need that...)



---

archive/issue_comments_338324.json:
```json
{
    "body": "Changed reviewer from **Tobias Diez,** to **Tobias Diez, ...**",
    "created_at": "2020-11-13T01:35:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338324",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Tobias Diez,** to **Tobias Diez, ...**



---

archive/issue_comments_338325.json:
```json
{
    "body": "<div id=\"comment:105\" align=\"right\">comment:105</div>\n\nReplying to [@mkoeppe](#comment:101):\n> Replying to [@tobiasdiez](#comment:99):\n> > ... may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable \n\n> \n> Done, please take a look\n\nThanks! Looks good.",
    "created_at": "2020-11-13T09:00:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338325",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:105" align="right">comment:105</div>

Replying to [@mkoeppe](#comment:101):
> Replying to [@tobiasdiez](#comment:99):
> > ... may I ask that you add a shortened version of the ticket description as comments in the `env.py` file as documentation for the `SAGE_VENV` and `SAGE_LOCAL` variable 

> 
> Done, please take a look

Thanks! Looks good.



---

archive/issue_comments_338326.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nrunning\n\n```\n$ grep SAGE_LOCAL/bin build/ -R\n```\nreturns quite a few hits, mostly in  build/pkgs/\n\nShouldn't most of these be replaced with `SAGE_BIN` ?",
    "created_at": "2020-11-18T12:09:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338326",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">comment:8</div>

running

```
$ grep SAGE_LOCAL/bin build/ -R
```
returns quite a few hits, mostly in  build/pkgs/

Shouldn't most of these be replaced with `SAGE_BIN` ?



---

archive/issue_comments_338327.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nSee ticket description - \"In this ticket, ...\"",
    "created_at": "2020-11-18T19:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338327",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

See ticket description - "In this ticket, ..."



---

archive/issue_events_317362.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-19T13:13:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317362"
}
```



---

archive/issue_events_317363.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-19T13:13:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317363"
}
```



---

archive/issue_comments_338328.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nOK, fine",
    "created_at": "2020-11-19T13:13:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338328",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:0" align="right">comment:0</div>

OK, fine



---

archive/issue_comments_338329.json:
```json
{
    "body": "Changed reviewer from **Tobias Diez, ...** to **Tobias Diez, Dima Pasechnik**",
    "created_at": "2020-11-19T13:13:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338329",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Tobias Diez, ...** to **Tobias Diez, Dima Pasechnik**



---

archive/issue_comments_338330.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nThanks!",
    "created_at": "2020-11-19T17:32:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338330",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>

Thanks!



---

archive/issue_comments_338331.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/22731](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/22731)** to **[f3b7a9c](https://github.com/sagemath/sagetrac-mirror/commit/f3b7a9cce247457f07ef42069cdadb3f6409b008)**",
    "created_at": "2020-11-22T15:06:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338331",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/22731](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/22731)** to **[f3b7a9c](https://github.com/sagemath/sagetrac-mirror/commit/f3b7a9cce247457f07ef42069cdadb3f6409b008)**



---

archive/issue_events_317364.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-22T15:06:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317364"
}
```



---

archive/issue_events_317365.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-22T15:06:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317365"
}
```



---

archive/issue_comments_338332.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n\n```\n$ git clean -f -d -x .\n$ ./bootstrap -d\nrm -rf config configure build/make/Makefile-auto.in\nrm -f src/doc/en/installation/*.txt\nrm -rf src/doc/en/reference/spkg/*.rst\nrm -f src/doc/en/reference/repl/*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/arch*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/debian*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/fedora*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/cygwin*.txt\nsrc/doc/bootstrap:60: installing src/doc/en/installation/homebrew*.txt\nsrc/doc/bootstrap:70: installing src/doc/en/reference/spkg/*.rst\nsrc/doc/bootstrap:102: installing src/doc/en/reference/repl/options.txt\nError: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this\nError setting environment variables by sourcing '/Users/vbraun/Sage/src/bin/sage-env';\npossibly contact sage-devel (see http://groups.google.com/group/sage-devel).\n```",
    "created_at": "2020-11-22T16:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338332",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:3" align="right">comment:3</div>


```
$ git clean -f -d -x .
$ ./bootstrap -d
rm -rf config configure build/make/Makefile-auto.in
rm -f src/doc/en/installation/*.txt
rm -rf src/doc/en/reference/spkg/*.rst
rm -f src/doc/en/reference/repl/*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/arch*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/debian*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/fedora*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/cygwin*.txt
src/doc/bootstrap:60: installing src/doc/en/installation/homebrew*.txt
src/doc/bootstrap:70: installing src/doc/en/reference/spkg/*.rst
src/doc/bootstrap:102: installing src/doc/en/reference/repl/options.txt
Error: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this
Error setting environment variables by sourcing '/Users/vbraun/Sage/src/bin/sage-env';
possibly contact sage-devel (see http://groups.google.com/group/sage-devel).
```



---

archive/issue_comments_338333.json:
```json
{
    "body": "Changed branch from **[f3b7a9c](https://github.com/sagemath/sagetrac-mirror/commit/f3b7a9cce247457f07ef42069cdadb3f6409b008)** to **[u/mkoeppe/22731](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/22731)**",
    "created_at": "2020-11-22T16:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338333",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[f3b7a9c](https://github.com/sagemath/sagetrac-mirror/commit/f3b7a9cce247457f07ef42069cdadb3f6409b008)** to **[u/mkoeppe/22731](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/22731)**



---

archive/issue_comments_338334.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI noticed it as well in sage-on-gentoo. I was trying to minimize the patch to `bin/sage` but that got me. This is ultimately caused by the last line of `src/doc/bootstrap`\n\n```\n./sage -advanced > \"$OUTPUT\"\n```\nWhy is this line needed, I am wondering?",
    "created_at": "2020-11-22T20:59:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338334",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:4" align="right">comment:4</div>

I noticed it as well in sage-on-gentoo. I was trying to minimize the patch to `bin/sage` but that got me. This is ultimately caused by the last line of `src/doc/bootstrap`

```
./sage -advanced > "$OUTPUT"
```
Why is this line needed, I am wondering?



---

archive/issue_comments_338335.json:
```json
{
    "body": "<div id=\"comment:115\" align=\"right\">comment:115</div>\n\nReplying to [@kiwifb](#comment:114):\n> This is ultimately caused by the last line of `src/doc/bootstrap`\n> \n> ```\n> ./sage -advanced > \"$OUTPUT\"\n> ```\n> Why is this line needed, I am wondering?\n\nIt generates part of the documentation.",
    "created_at": "2020-11-22T21:46:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338335",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:115" align="right">comment:115</div>

Replying to [@kiwifb](#comment:114):
> This is ultimately caused by the last line of `src/doc/bootstrap`
> 
> ```
> ./sage -advanced > "$OUTPUT"
> ```
> Why is this line needed, I am wondering?

It generates part of the documentation.



---

archive/issue_comments_338336.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIs at the error point the value of `SAGE_SCRIPTS_DIR` already known?",
    "created_at": "2020-11-22T22:23:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338336",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

Is at the error point the value of `SAGE_SCRIPTS_DIR` already known?



---

archive/issue_comments_338337.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI see how it is used now. And no, `SAGE_SCRIPTS_DIR` or anything like that is not known, we are bootstrapping the documentation, which you should be able to do before running configure.\n\nSome dummy values could be set in the bootstrap script on the assumption you do that on a clean tree.",
    "created_at": "2020-11-22T22:26:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338337",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

I see how it is used now. And no, `SAGE_SCRIPTS_DIR` or anything like that is not known, we are bootstrapping the documentation, which you should be able to do before running configure.

Some dummy values could be set in the bootstrap script on the assumption you do that on a clean tree.



---

archive/issue_comments_338338.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe problem is solved in #30013, so I need to move some of the changes to this ticket.",
    "created_at": "2020-11-22T22:34:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338338",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

The problem is solved in #30013, so I need to move some of the changes to this ticket.



---

archive/issue_comments_338339.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nReplying to [@mkoeppe](#comment:118):\n> The problem is solved in #30013, so I need to move some of the changes to this ticket.\n\nYes, it looks like it would help.",
    "created_at": "2020-11-22T22:35:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338339",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:119" align="right">comment:119</div>

Replying to [@mkoeppe](#comment:118):
> The problem is solved in #30013, so I need to move some of the changes to this ticket.

Yes, it looks like it would help.



---

archive/issue_comments_338340.json:
```json
{
    "body": "<div id=\"comment:0\" align=\"right\">comment:0</div>\n\nI will work on this after the next beta comes out.",
    "created_at": "2020-11-22T22:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338340",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:0" align="right">comment:0</div>

I will work on this after the next beta comes out.



---

archive/issue_comments_338341.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAnyhow, just in case, here one could do\n\n```diff\n--- a/bootstrap\n+++ b/bootstrap\n@@ -113,6 +113,8 @@ SAGE_SPKG_CONFIGURE_$(echo ${pkgname} | tr '[a-z]' '[A-Z]')\"\n     # ONLY stderr, and to re-output the results back to stderr leaving\n     # stdout alone. Basically we swap the two descriptors using a\n     # third, filter, and then swap them back.\n+    touch src/bin/sage-env-config\n+    SAGE_SCRIPTS_DIR=./src/bin\n     BOOTSTRAP_QUIET=\"${BOOTSTRAP_QUIET}\" \\\n     SAGE_ROOT=\"$SAGE_ROOT\" \\\n     src/doc/bootstrap && \\\n```\nand it all goes through.",
    "created_at": "2020-11-22T22:42:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338341",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1" align="right">comment:1</div>

Anyhow, just in case, here one could do

```diff
--- a/bootstrap
+++ b/bootstrap
@@ -113,6 +113,8 @@ SAGE_SPKG_CONFIGURE_$(echo ${pkgname} | tr '[a-z]' '[A-Z]')"
     # ONLY stderr, and to re-output the results back to stderr leaving
     # stdout alone. Basically we swap the two descriptors using a
     # third, filter, and then swap them back.
+    touch src/bin/sage-env-config
+    SAGE_SCRIPTS_DIR=./src/bin
     BOOTSTRAP_QUIET="${BOOTSTRAP_QUIET}" \
     SAGE_ROOT="$SAGE_ROOT" \
     src/doc/bootstrap && \
```
and it all goes through.



---

archive/issue_comments_338342.json:
```json
{
    "body": "Changed commit from **[f3b7a9c](https://github.com/sagemath/sagetrac-mirror/commit/f3b7a9cce247457f07ef42069cdadb3f6409b008)** to **[1fe77a8](https://github.com/sagemath/sagetrac-mirror/commit/1fe77a819d2477bf4b53d228388a4ff3e2c7c45d)**",
    "created_at": "2020-11-23T02:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338342",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f3b7a9c](https://github.com/sagemath/sagetrac-mirror/commit/f3b7a9cce247457f07ef42069cdadb3f6409b008)** to **[1fe77a8](https://github.com/sagemath/sagetrac-mirror/commit/1fe77a819d2477bf4b53d228388a4ff3e2c7c45d)**



---

archive/issue_comments_338343.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fe77a819d2477bf4b53d228388a4ff3e2c7c45d\">1fe77a8</a></td><td><code>src/bin/sage-env: Do not set SAGE_SCRIPTS_DIR</code></td></tr></table>\n",
    "created_at": "2020-11-23T02:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338343",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fe77a819d2477bf4b53d228388a4ff3e2c7c45d">1fe77a8</a></td><td><code>src/bin/sage-env: Do not set SAGE_SCRIPTS_DIR</code></td></tr></table>




---

archive/issue_comments_338344.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nCherry-picked a commit from the original branch of #30888, where it was observed that\n`SAGE_SCRIPTS_DIR` is currently unused because the feature introduced in #25486 (\"Discover `SAGE_SCRIPTS_DIR` to make `$SAGE_LOCAL/bin/sage` work from any directory, in an environment without `SAGE_*` variables\") was killed by #30128.\n(#30888 will re-introduce this feature using a different mechanism.)",
    "created_at": "2020-11-23T02:09:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338344",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

Cherry-picked a commit from the original branch of #30888, where it was observed that
`SAGE_SCRIPTS_DIR` is currently unused because the feature introduced in #25486 ("Discover `SAGE_SCRIPTS_DIR` to make `$SAGE_LOCAL/bin/sage` work from any directory, in an environment without `SAGE_*` variables") was killed by #30128.
(#30888 will re-introduce this feature using a different mechanism.)



---

archive/issue_events_317366.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-23T02:09:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317366"
}
```



---

archive/issue_comments_338345.json:
```json
{
    "body": "Changed commit from **[1fe77a8](https://github.com/sagemath/sagetrac-mirror/commit/1fe77a819d2477bf4b53d228388a4ff3e2c7c45d)** to **[38eebc3](https://github.com/sagemath/sagetrac-mirror/commit/38eebc3d9f790c81b8ffcc963cf2513184c9ae6a)**",
    "created_at": "2020-11-25T00:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338345",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1fe77a8](https://github.com/sagemath/sagetrac-mirror/commit/1fe77a819d2477bf4b53d228388a4ff3e2c7c45d)** to **[38eebc3](https://github.com/sagemath/sagetrac-mirror/commit/38eebc3d9f790c81b8ffcc963cf2513184c9ae6a)**



---

archive/issue_comments_338346.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38eebc3d9f790c81b8ffcc963cf2513184c9ae6a\">38eebc3</a></td><td><code>Merge tag '9.3.beta2' into t/22731/22731</code></td></tr></table>\n",
    "created_at": "2020-11-25T00:53:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338346",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38eebc3d9f790c81b8ffcc963cf2513184c9ae6a">38eebc3</a></td><td><code>Merge tag '9.3.beta2' into t/22731/22731</code></td></tr></table>




---

archive/issue_comments_338347.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nMerged the latest beta. Ready for another round of review.",
    "created_at": "2020-11-25T00:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338347",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Merged the latest beta. Ready for another round of review.



---

archive/issue_events_317367.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-25T19:12:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317367"
}
```



---

archive/issue_events_317368.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-25T19:12:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317368"
}
```



---

archive/issue_comments_338348.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nthis works, after \"git clean\" as above, too.",
    "created_at": "2020-11-25T19:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338348",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

this works, after "git clean" as above, too.



---

archive/issue_comments_338349.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThanks!",
    "created_at": "2020-11-25T19:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338349",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Thanks!



---

archive/issue_events_317369.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-05T22:13:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317369"
}
```



---

archive/issue_events_317370.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e7369840f0ecaa036994bb88827e8e6ea9288394",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-12-05T22:13:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22731#event-317370"
}
```



---

archive/issue_comments_338350.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/22731](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/22731)** to **[38eebc3](https://github.com/sagemath/sagetrac-mirror/commit/38eebc3d9f790c81b8ffcc963cf2513184c9ae6a)**",
    "created_at": "2020-12-05T22:13:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22731",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22731#issuecomment-338350",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/22731](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/22731)** to **[38eebc3](https://github.com/sagemath/sagetrac-mirror/commit/38eebc3d9f790c81b8ffcc963cf2513184c9ae6a)**
