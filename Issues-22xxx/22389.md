# Issue 22389: Make Three.js work offline

archive/issues_022152.json:
```json
{
    "assignees": [],
    "body": "This ticket adds a Boolean keyword argument `online` that determines whether the local standard package is replaced by links to the online content delivery network.\n\n**CC:**  @novoselt @egourgoulhon @kcrisman\n\n**Branch/Commit:** [5ddb9f154c1618039e60253e4e102a198d955af5](https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5)\n\n**Reviewer:** Andrey Novoseltsev\n\n**Author:** Paul Masson\n\nIssue created by migration from https://trac.sagemath.org/ticket/22389\n\n",
    "closed_at": "2017-02-23T12:00:27Z",
    "created_at": "2017-02-18T00:52:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make Three.js work offline",
    "type": "issue",
    "updated_at": "2017-02-23T12:00:27Z",
    "url": "https://github.com/sagemath/sage/issues/22389",
    "user": "https://github.com/paulmasson"
}
```
This ticket adds a Boolean keyword argument `online` that determines whether the local standard package is replaced by links to the online content delivery network.

**CC:**  @novoselt @egourgoulhon @kcrisman

**Branch/Commit:** [5ddb9f154c1618039e60253e4e102a198d955af5](https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5)

**Reviewer:** Andrey Novoseltsev

**Author:** Paul Masson

Issue created by migration from https://trac.sagemath.org/ticket/22389





---

archive/issue_events_271598.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2017-02-18T00:52:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-271598"
}
```



---

archive/issue_events_271599.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2017-02-18T00:52:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "08517b",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-271599"
}
```



---

archive/issue_events_271600.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2017-02-18T00:52:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-271600"
}
```



---

archive/issue_events_271601.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2017-02-18T02:25:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-271601"
}
```



---

archive/issue_comments_333620.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+This ticket adds a Boolean keyword argument `online` that determines whether the local standard package is replaced by links to the online content delivery network.\n``````\n",
    "created_at": "2017-02-18T02:25:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-333620",
    "user": "https://github.com/paulmasson"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+This ticket adds a Boolean keyword argument `online` that determines whether the local standard package is replaced by links to the online content delivery network.
``````




---

archive/issue_comments_333621.json:
```json
{
    "body": "**Branch:** [u/paulmasson/22389](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/22389)",
    "created_at": "2017-02-18T02:25:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-333621",
    "user": "https://github.com/paulmasson"
}
```

**Branch:** [u/paulmasson/22389](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/22389)



---

archive/issue_comments_333622.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5\">5ddb9f1</a></td><td><code>Make Three.js work offline</code></td></tr></table>\n",
    "created_at": "2017-02-18T02:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-333622",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5">5ddb9f1</a></td><td><code>Make Three.js work offline</code></td></tr></table>




---

archive/issue_comments_333623.json:
```json
{
    "body": "**Commit:** [5ddb9f154c1618039e60253e4e102a198d955af5](https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5)",
    "created_at": "2017-02-18T02:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-333623",
    "user": "https://github.com/sagetrac-git"
}
```

**Commit:** [5ddb9f154c1618039e60253e4e102a198d955af5](https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5)



---

archive/issue_comments_333624.json:
```json
{
    "body": "**Reviewer:** Andrey Novoseltsev",
    "created_at": "2017-02-18T23:53:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-333624",
    "user": "https://github.com/novoselt"
}
```

**Reviewer:** Andrey Novoseltsev



---

archive/issue_events_271602.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2017-02-18T23:53:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-271602"
}
```



---

archive/issue_events_271603.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2017-02-18T23:53:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-271603"
}
```



---

archive/issue_comments_333625.json:
```json
{
    "body": "<a id='comment:6'></a>\nThank you very much for this improvement!\n\nIt seems that threejs is well on its way to becoming the default 3d viewer, isn't it?\n(maybe a few things are still missing, like `mesh=True`, what else?)",
    "created_at": "2017-02-19T15:06:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-333625",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:6'></a>
Thank you very much for this improvement!

It seems that threejs is well on its way to becoming the default 3d viewer, isn't it?
(maybe a few things are still missing, like `mesh=True`, what else?)



---

archive/issue_comments_333626.json:
```json
{
    "body": "<a id='comment:7'></a>\nEric, Andrey and I are working on default lighting on #22261. Beyond that there is a major structural issue of handling more than sixteen Three.js scenes embedded in a single page, since most browsers start dropping WebGL contexts after that number. I know how to deal with this when I have complete control over a page, but that might not be true in either Jupyter or native Sage notebooks. I'll need time to work on that before calling this viewer ready for being the default.",
    "created_at": "2017-02-20T00:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-333626",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:7'></a>
Eric, Andrey and I are working on default lighting on #22261. Beyond that there is a major structural issue of handling more than sixteen Three.js scenes embedded in a single page, since most browsers start dropping WebGL contexts after that number. I know how to deal with this when I have complete control over a page, but that might not be true in either Jupyter or native Sage notebooks. I'll need time to work on that before calling this viewer ready for being the default.



---

archive/issue_comments_333627.json:
```json
{
    "body": "<a id='comment:8'></a>\nHow well are 17 jmol plots working for you?-)",
    "created_at": "2017-02-20T04:53:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-333627",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:8'></a>
How well are 17 jmol plots working for you?-)



---

archive/issue_comments_333628.json:
```json
{
    "body": "<a id='comment:9'></a>\nThanks a lot for this, i hate when Sage leaks remotely, without even noticing the user.",
    "created_at": "2017-02-20T17:53:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-333628",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:9'></a>
Thanks a lot for this, i hate when Sage leaks remotely, without even noticing the user.



---

archive/issue_comments_333629.json:
```json
{
    "body": "<a id='comment:10'></a>\n> How well are 17 jmol plots working for you?-)\n\nHaha!  But the difference is that they are not \"all live\" at the same time by default.  I haven't tried this branch so I don't know about three.js but my guess is that they are all \"live\" by default?",
    "created_at": "2017-02-21T03:16:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-333629",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'></a>
> How well are 17 jmol plots working for you?-)

Haha!  But the difference is that they are not "all live" at the same time by default.  I haven't tried this branch so I don't know about three.js but my guess is that they are all "live" by default?



---

archive/issue_comments_333630.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [@kcrisman](#comment%3A10):\n> my guess is that they are all \"live\" by default?\n\nYup!",
    "created_at": "2017-02-21T03:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-333630",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:11'></a>
Replying to [@kcrisman](#comment%3A10):
> my guess is that they are all "live" by default?

Yup!



---

archive/issue_comments_333631.json:
```json
{
    "body": "<a id='comment:12'></a>\nWell, my point was that such an output is still likely to be quite slow and not very common, so it is not an obstacle for changing the default viewer. Removing jmol completely from the standard distribution and making it optional is a different story.",
    "created_at": "2017-02-21T04:44:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-333631",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:12'></a>
Well, my point was that such an output is still likely to be quite slow and not very common, so it is not an obstacle for changing the default viewer. Removing jmol completely from the standard distribution and making it optional is a different story.



---

archive/issue_comments_333632.json:
```json
{
    "body": "<a id='comment:13'></a>\nI've opened #22408 to continue the discussion.",
    "created_at": "2017-02-21T21:15:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-333632",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:13'></a>
I've opened #22408 to continue the discussion.



---

archive/issue_events_271604.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-23T12:00:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-271604"
}
```



---

archive/issue_events_271605.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "de36637e5cc08e38cce62e89a5555edbaa117949",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-02-23T12:00:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-271605"
}
```



---

archive/issue_comments_333633.json:
```json
{
    "body": "**Changing branch** from \"[u/paulmasson/22389](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/22389)\" to \"[5ddb9f154c1618039e60253e4e102a198d955af5](https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5)\".",
    "created_at": "2017-02-23T12:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-333633",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/paulmasson/22389](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/22389)" to "[5ddb9f154c1618039e60253e4e102a198d955af5](https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5)".
