# Issue 22389: Make Three.js work offline

archive/issues_022152.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThis ticket adds a Boolean keyword argument `online` that determines whether the local standard package is replaced by links to the online content delivery network.\n\nCC:  @novoselt @egourgoulhon @kcrisman\n\nComponent: **packages: standard**\n\nAuthor: **Paul Masson**\n\nBranch/Commit: **[`5ddb9f1`](https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5)**\n\nReviewer: **Andrey Novoseltsev**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/22389_\n\n",
    "closed_at": "2017-02-23T12:00:27Z",
    "created_at": "2017-02-18T00:52:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make Three.js work offline",
    "type": "issue",
    "updated_at": "2017-02-23T12:00:27Z",
    "url": "https://github.com/sagemath/sage/issues/22389",
    "user": "https://github.com/paulmasson"
}
```
<div id="comment:0"></div>

This ticket adds a Boolean keyword argument `online` that determines whether the local standard package is replaced by links to the online content delivery network.

CC:  @novoselt @egourgoulhon @kcrisman

Component: **packages: standard**

Author: **Paul Masson**

Branch/Commit: **[`5ddb9f1`](https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5)**

Reviewer: **Andrey Novoseltsev**

_Issue created by migration from https://trac.sagemath.org/ticket/22389_





---

archive/issue_events_310318.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2017-02-18T00:52:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-310318"
}
```



---

archive/issue_events_310319.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2017-02-18T00:52:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-310319"
}
```



---

archive/issue_events_310320.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2017-02-18T00:52:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-310320"
}
```



---

archive/issue_events_310321.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2017-02-18T00:52:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-310321"
}
```



---

archive/issue_events_310322.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2017-02-18T02:25:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-310322"
}
```



---

archive/issue_comments_331042.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+This ticket adds a Boolean keyword argument `online` that determines whether the local standard package is replaced by links to the online content delivery network.\n``````\n",
    "created_at": "2017-02-18T02:25:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-331042",
    "user": "https://github.com/paulmasson"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+This ticket adds a Boolean keyword argument `online` that determines whether the local standard package is replaced by links to the online content delivery network.
``````




---

archive/issue_comments_331043.json:
```json
{
    "body": "Branch: **[u/paulmasson/22389](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/22389)**",
    "created_at": "2017-02-18T02:25:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-331043",
    "user": "https://github.com/paulmasson"
}
```

Branch: **[u/paulmasson/22389](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/22389)**



---

archive/issue_comments_331044.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5\"><code>5ddb9f1</code></a></td><td><code>Make Three.js work offline</code></td></tr></table>\n",
    "created_at": "2017-02-18T02:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-331044",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5"><code>5ddb9f1</code></a></td><td><code>Make Three.js work offline</code></td></tr></table>




---

archive/issue_comments_331045.json:
```json
{
    "body": "Commit: **[`5ddb9f1`](https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5)**",
    "created_at": "2017-02-18T02:26:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-331045",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`5ddb9f1`](https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5)**



---

archive/issue_comments_331046.json:
```json
{
    "body": "Reviewer: **Andrey Novoseltsev**",
    "created_at": "2017-02-18T23:53:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-331046",
    "user": "https://github.com/novoselt"
}
```

Reviewer: **Andrey Novoseltsev**



---

archive/issue_events_310323.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2017-02-18T23:53:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-310323"
}
```



---

archive/issue_events_310324.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2017-02-18T23:53:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-310324"
}
```



---

archive/issue_comments_331047.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThank you very much for this improvement!\n\nIt seems that threejs is well on its way to becoming the default 3d viewer, isn't it?\n(maybe a few things are still missing, like `mesh=True`, what else?)",
    "created_at": "2017-02-19T15:06:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-331047",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:6" align="right">comment:6</div>

Thank you very much for this improvement!

It seems that threejs is well on its way to becoming the default 3d viewer, isn't it?
(maybe a few things are still missing, like `mesh=True`, what else?)



---

archive/issue_comments_331048.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nEric, Andrey and I are working on default lighting on #22261. Beyond that there is a major structural issue of handling more than sixteen Three.js scenes embedded in a single page, since most browsers start dropping WebGL contexts after that number. I know how to deal with this when I have complete control over a page, but that might not be true in either Jupyter or native Sage notebooks. I'll need time to work on that before calling this viewer ready for being the default.",
    "created_at": "2017-02-20T00:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-331048",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:7" align="right">comment:7</div>

Eric, Andrey and I are working on default lighting on #22261. Beyond that there is a major structural issue of handling more than sixteen Three.js scenes embedded in a single page, since most browsers start dropping WebGL contexts after that number. I know how to deal with this when I have complete control over a page, but that might not be true in either Jupyter or native Sage notebooks. I'll need time to work on that before calling this viewer ready for being the default.



---

archive/issue_comments_331049.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHow well are 17 jmol plots working for you?-)",
    "created_at": "2017-02-20T04:53:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-331049",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:8" align="right">comment:8</div>

How well are 17 jmol plots working for you?-)



---

archive/issue_comments_331050.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThanks a lot for this, i hate when Sage leaks remotely, without even noticing the user.",
    "created_at": "2017-02-20T17:53:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-331050",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:9" align="right">comment:9</div>

Thanks a lot for this, i hate when Sage leaks remotely, without even noticing the user.



---

archive/issue_comments_331051.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n> How well are 17 jmol plots working for you?-)\n\nHaha!  But the difference is that they are not \"all live\" at the same time by default.  I haven't tried this branch so I don't know about three.js but my guess is that they are all \"live\" by default?",
    "created_at": "2017-02-21T03:16:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-331051",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:10" align="right">comment:10</div>

> How well are 17 jmol plots working for you?-)

Haha!  But the difference is that they are not "all live" at the same time by default.  I haven't tried this branch so I don't know about three.js but my guess is that they are all "live" by default?



---

archive/issue_comments_331052.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@kcrisman](#comment%3A10):\n> my guess is that they are all \"live\" by default?\n\nYup!",
    "created_at": "2017-02-21T03:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-331052",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@kcrisman](#comment%3A10):
> my guess is that they are all "live" by default?

Yup!



---

archive/issue_comments_331053.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nWell, my point was that such an output is still likely to be quite slow and not very common, so it is not an obstacle for changing the default viewer. Removing jmol completely from the standard distribution and making it optional is a different story.",
    "created_at": "2017-02-21T04:44:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-331053",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:12" align="right">comment:12</div>

Well, my point was that such an output is still likely to be quite slow and not very common, so it is not an obstacle for changing the default viewer. Removing jmol completely from the standard distribution and making it optional is a different story.



---

archive/issue_comments_331054.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI've opened #22408 to continue the discussion.",
    "created_at": "2017-02-21T21:15:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-331054",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:13" align="right">comment:13</div>

I've opened #22408 to continue the discussion.



---

archive/issue_events_310325.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-23T12:00:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-310325"
}
```



---

archive/issue_events_310326.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "de36637e5cc08e38cce62e89a5555edbaa117949",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-02-23T12:00:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/22389#event-310326"
}
```



---

archive/issue_comments_331055.json:
```json
{
    "body": "Changed branch from **[u/paulmasson/22389](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/22389)** to **[`5ddb9f1`](https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5)**",
    "created_at": "2017-02-23T12:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/22389",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/22389#issuecomment-331055",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/paulmasson/22389](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/22389)** to **[`5ddb9f1`](https://github.com/sagemath/sagetrac-mirror/commit/5ddb9f154c1618039e60253e4e102a198d955af5)**
