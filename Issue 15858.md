# Issue 15858: preserve term order in polynomial ring when extending base ring

archive/issues_015858.json:
```json
{
    "body": "CC:  jakobkroeker\n\nKeywords: polynomial ring, term order, preserve\n\nWe have the following\n\n```\nsage: S.<Y,X> = PolynomialRing(ZZ, order='lex')\nsage: f = 1/2 * X\nsage: f\n1/2*X\nsage: f.parent()\nMultivariate Polynomial Ring in Y, X over Rational Field\nsage: S\nMultivariate Polynomial Ring in Y, X over Integer Ring\nsage: f.parent().term_order()\nDegree reverse lexicographic term order\nsage: S.term_order()\nLexicographic term order\n```\n\n\nThe term ordering should be preserved.\n\n(This was reported by R. Rissner (personal communication))\n\nIssue created by migration from https://trac.sagemath.org/ticket/16095\n\n",
    "created_at": "2014-04-08T11:52:40Z",
    "labels": [
        "algebra",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "preserve term order in polynomial ring when extending base ring",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15858",
    "user": "dkrenn"
}
```
CC:  jakobkroeker

Keywords: polynomial ring, term order, preserve

We have the following

```
sage: S.<Y,X> = PolynomialRing(ZZ, order='lex')
sage: f = 1/2 * X
sage: f
1/2*X
sage: f.parent()
Multivariate Polynomial Ring in Y, X over Rational Field
sage: S
Multivariate Polynomial Ring in Y, X over Integer Ring
sage: f.parent().term_order()
Degree reverse lexicographic term order
sage: S.term_order()
Lexicographic term order
```


The term ordering should be preserved.

(This was reported by R. Rissner (personal communication))

Issue created by migration from https://trac.sagemath.org/ticket/16095





---

archive/issue_comments_205854.json:
```json
{
    "body": "Still there in 6.6.",
    "created_at": "2015-04-16T20:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15858",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15858#issuecomment-205854",
    "user": "dkrenn"
}
```

Still there in 6.6.



---

archive/issue_comments_205855.json:
```json
{
    "body": "So is this incorrect behaviour?",
    "created_at": "2017-03-04T00:29:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15858",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15858#issuecomment-205855",
    "user": "jakobkroeker"
}
```

So is this incorrect behaviour?



---

archive/issue_comments_205856.json:
```json
{
    "body": "Replying to [comment:4 jakobkroeker]:\n> So is this incorrect behaviour?\n\nYes. (Why asking?)",
    "created_at": "2017-03-19T11:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15858",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15858#issuecomment-205856",
    "user": "dkrenn"
}
```

Replying to [comment:4 jakobkroeker]:
> So is this incorrect behaviour?

Yes. (Why asking?)



---

archive/issue_comments_205857.json:
```json
{
    "body": "Replying to [comment:5 dkrenn]:\n> Replying to [comment:4 jakobkroeker]:\n> > So is this incorrect behaviour?\n> \n> Yes. (Why asking?)\n\nTo add this issue to the list of silently wrong results\n\nhttps://trac.sagemath.org/report/79",
    "created_at": "2017-03-19T17:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15858",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15858#issuecomment-205857",
    "user": "jakobkroeker"
}
```

Replying to [comment:5 dkrenn]:
> Replying to [comment:4 jakobkroeker]:
> > So is this incorrect behaviour?
> 
> Yes. (Why asking?)

To add this issue to the list of silently wrong results

https://trac.sagemath.org/report/79



---

archive/issue_comments_205858.json:
```json
{
    "body": "Replying to [comment:6 jakobkroeker]:\n> Replying to [comment:5 dkrenn]:\n> > Replying to [comment:4 jakobkroeker]:\n> > > So is this incorrect behaviour?\n> > \n> > Yes. (Why asking?)\n> \n> To add this issue to the list of silently wrong results\n> \n> https://trac.sagemath.org/report/79\n\nOk, thank you for doing this.",
    "created_at": "2017-03-19T18:32:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15858",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15858#issuecomment-205858",
    "user": "dkrenn"
}
```

Replying to [comment:6 jakobkroeker]:
> Replying to [comment:5 dkrenn]:
> > Replying to [comment:4 jakobkroeker]:
> > > So is this incorrect behaviour?
> > 
> > Yes. (Why asking?)
> 
> To add this issue to the list of silently wrong results
> 
> https://trac.sagemath.org/report/79

Ok, thank you for doing this.



---

archive/issue_comments_205859.json:
```json
{
    "body": "Note that something close works:\n\n```\nsage: S\nMultivariate Polynomial Ring in Y, X over Integer Ring\nsage: S.change_ring(QQ)\nMultivariate Polynomial Ring in Y, X over Rational Field\nsage: S.change_ring(QQ).term_order()\nLexicographic term order\nsage: S.term_order()\nLexicographic term order\n```\n",
    "created_at": "2019-10-12T11:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15858",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15858#issuecomment-205859",
    "user": "chapoton"
}
```

Note that something close works:

```
sage: S
Multivariate Polynomial Ring in Y, X over Integer Ring
sage: S.change_ring(QQ)
Multivariate Polynomial Ring in Y, X over Rational Field
sage: S.change_ring(QQ).term_order()
Lexicographic term order
sage: S.term_order()
Lexicographic term order
```




---

archive/issue_comments_205860.json:
```json
{
    "body": "Its only during coercion that this fails:\n\n```\nsage: from sage.structure.element import coercion_model\nsage: coercion_model.common_parent(g,X)\nMultivariate Polynomial Ring in Y, X over Rational Field\nsage: coercion_model.common_parent(g,X).term_order()\nDegree reverse lexicographic term order\n```\n",
    "created_at": "2019-10-12T11:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15858",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15858#issuecomment-205860",
    "user": "chapoton"
}
```

Its only during coercion that this fails:

```
sage: from sage.structure.element import coercion_model
sage: coercion_model.common_parent(g,X)
Multivariate Polynomial Ring in Y, X over Rational Field
sage: coercion_model.common_parent(g,X).term_order()
Degree reverse lexicographic term order
```

