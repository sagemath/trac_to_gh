# Issue 31182: Update python to 3.9.2

Issue created by migration from https://trac.sagemath.org/ticket/31419

Original creator: mkoeppe

Original creation time: 2021-02-20 16:33:53

CC:  fbissey arojas slelievre

https://docs.python.org/3/whatsnew/changelog.html#python-3-9-2-final


---

Comment by mkoeppe created at 2021-02-20 17:00:12

New commits:


---

Comment by mkoeppe created at 2021-02-20 17:00:12

Changing status from new to needs_review.


---

Comment by slelievre created at 2021-02-21 08:10:02

Any way to base this on top of #31344?


---

Comment by mkoeppe created at 2021-02-21 16:55:50

Samuel, to test, you can just fetch the branch of that ticket using `git trac fetch 31344` and then merge it in, using `git merge FETCH_HEAD`.


---

Comment by slelievre created at 2021-02-24 11:45:25

Changing keywords from "" to "upgrade, python".


---

Comment by slelievre created at 2021-02-24 11:45:25

Replying to [comment:6 mkoeppe]:
> Samuel, to test, you can just fetch the branch of that ticket using `git trac fetch 31344` and then merge it in, using `git merge FETCH_HEAD`.

I tested as follows.

Set up a new clone with tricks to save time and bandwidth:

```
$ ORIG=sage.git  # local mirror of https://github.com/sagemath/sage.git
$ DEST=sage93c  # name for new clone
$ UPST=$(pwd)/sage-upstream  # common upstream folder for several clones
$ git clone --single-branch --branch develop --tags $ORIG $DEST  # clone locally
$ cd $DEST
$ ln -s $UPST ./upstream  # use common upstream folder to download less 
$ git remote add trac git://trac.sagemath.org/sage.git -t develop
```


Follow your advice:

```
$ git trac checkout 31419
$ git trac fetch 31344
$ git merge FETCH_HEAD
```


Build and test:

```
$ source .homebrew-build-env
$ ./bootstrap -q
$ ./configure --enable-download-from-upstream-url -q
$ make -s V=0
$ make -s V=0 testlong
```


The build succeeds but `make testlong` gives:

```
----------------------------------------------------------------------
sage -t --long src/sage/interfaces/singular.py  # Killed due to segmentation fault
sage -t --long src/sage/interfaces/mwrank.py  # 4 doctests failed
sage -t --long src/sage/interfaces/gap.py  # 7 doctests failed
----------------------------------------------------------------------
```


When run again separately (with `./sage -t --long`), the tests

- pass for `src/sage/interfaces/singular.py` and `src/sage/interfaces/mwrank.py`
- keep failing for `src/sage/interfaces/gap.py`


---

Comment by mkoeppe created at 2021-02-24 18:07:25

I don't think these doctest failures are related to this update


---

Comment by mkoeppe created at 2021-02-24 18:10:02

Replying to [comment:7 slelievre]:
> I tested as follows.
> 
> Set up a new clone with tricks to save time and bandwidth:
> {{{
> $ ORIG=sage.git  # local mirror of https://github.com/sagemath/sage.git
> $ DEST=sage93c  # name for new clone
> ...
> $ git clone --single-branch --branch develop --tags $ORIG $DEST  # clone locally

Even easier is to use `(cd $ORIG && git worktree add $DEST)`


---

Comment by dimpase created at 2021-02-27 12:39:59

all good in view of 
https://github.com/mkoeppe/sage/actions/runs/584631860


---

Comment by dimpase created at 2021-02-27 12:39:59

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-02-27 18:28:24

Thanks!


---

Comment by vbraun created at 2021-03-09 00:01:17

Resolution: fixed
