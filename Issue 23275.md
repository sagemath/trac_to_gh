# Issue 23275: Update Dokchitser's L-function script

Issue created by migration from https://trac.sagemath.org/ticket/23512

Original creator: alexjbest

Original creation time: 2017-07-21 22:01:07

Keywords: sd87

The version of Tim Dokchitser's computel script is older than the one on his website.
This ticket updates to the latest version.

The only change is the fix of an inequality.


---

Comment by alexjbest created at 2017-07-21 22:01:44

Changing status from new to needs_review.


---

Comment by alexjbest created at 2017-07-21 22:01:44

New commits:


---

Comment by caruso created at 2017-07-21 22:08:33

I think you should add doctests showing the impact of this update


---

Comment by edgarcosta created at 2017-07-22 06:26:29

Changing status from needs_review to positive_review.


---

Comment by edgarcosta created at 2017-07-22 06:28:26

The only difference is that the inequality

```
res > err
```

is replaced by 

```
abs(res)>err
```



The old version didn't account for the res being negative.


---

Comment by caruso created at 2017-07-22 12:48:26

Yes, I saw.
Nevertheless, I guess that you should add a doctest demonstrating that the bug this ticket is supposed to fix is indeed fixed (as far as I understand, each ticket needs to include a doctest showing its benefit). You can add it in the section TESTS like this


```
    TESTS:

    Check that `trac`:23512 is fixed::

        ...
```



---

Comment by caruso created at 2017-07-22 12:48:26

Changing status from positive_review to needs_work.


---

Comment by git created at 2017-07-23 04:46:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by alexjbest created at 2017-07-23 04:51:52

I agree that an example is a good idea, but I couldn't find one originally!

Thanks to some hints from Tim Dokchitser I have now added an example that failed previous to this change:
The issue was with complex entries in gammaV which occur for L-functions of maass forms for example http://www.lmfdb.org/L/ModularForm/GL2/Q/Maass/4f4bf1c388aece438d000000/ , the lack of abs caused the cflength function to crash when it tried to check an inequality with a complex number.


---

Comment by alexjbest created at 2017-07-23 04:51:52

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2017-07-23 07:36:39

The added example is missing the final `::` (and this line is too long and should be broken in 2 lines)


---

Comment by chapoton created at 2017-07-23 09:07:33

Changing keywords from "sd87" to "sd87, dokchister".


---

Comment by chapoton created at 2017-07-23 19:13:18

ok, I did the little changes in doc. Setting to positive.
----
New commits:


---

Comment by chapoton created at 2017-07-23 19:13:18

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-08-05 23:27:20

Resolution: fixed
