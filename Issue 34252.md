# Issue 34252: Update sympy to 1.12

archive/issues_034252.json:
```json
{
    "body": "CC:  @kiwifb @oscarbenjamin @antonio-rojas @davewittemorris\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/34489\n\n",
    "created_at": "2022-09-03T22:38:12Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-pending",
    "title": "Update sympy to 1.12",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34252",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @kiwifb @oscarbenjamin @antonio-rojas @davewittemorris



Issue created by migration from https://trac.sagemath.org/ticket/34489





---

archive/issue_comments_485185.json:
```json
{
    "body": "I just tried to push a commit here to update a doctest but it failed with:\n\n```\n$ git push trac update_sympy_1_12:u/mkoeppe/update_sympy_to_1_12\nWarning: the ECDSA host key for 'trac.sagemath.org' differs from the key for the IP address '104.197.143.230'\nOffending key for IP in /home/oscar/.ssh/known_hosts:26\nMatching host key in /home/oscar/.ssh/known_hosts:27\nAre you sure you want to continue connecting (yes/no)? yes\nCounting objects: 6, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (6/6), 601 bytes | 0 bytes/s, done.\nTotal 6 (delta 5), reused 0 (delta 0)\nremote: FATAL: W refs/heads/u/mkoeppe/update_sympy_to_1_12 sage gh-oscarbenjamin DENIED by fallthru\nremote: error: hook declined to update refs/heads/u/mkoeppe/update_sympy_to_1_12\nTo git@trac.sagemath.org:sage.git\n ! [remote rejected] update_sympy_1_12 -> u/mkoeppe/update_sympy_to_1_12 (hook declined)\nerror: failed to push some refs to 'git@trac.sagemath.org:sage.git'\n```\n\nIs there something I need to do first before I can push?\n----\nNew commits:",
    "created_at": "2022-09-05T18:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34252#issuecomment-485185",
    "user": "https://github.com/oscarbenjamin"
}
```

I just tried to push a commit here to update a doctest but it failed with:

```
$ git push trac update_sympy_1_12:u/mkoeppe/update_sympy_to_1_12
Warning: the ECDSA host key for 'trac.sagemath.org' differs from the key for the IP address '104.197.143.230'
Offending key for IP in /home/oscar/.ssh/known_hosts:26
Matching host key in /home/oscar/.ssh/known_hosts:27
Are you sure you want to continue connecting (yes/no)? yes
Counting objects: 6, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (6/6), done.
Writing objects: 100% (6/6), 601 bytes | 0 bytes/s, done.
Total 6 (delta 5), reused 0 (delta 0)
remote: FATAL: W refs/heads/u/mkoeppe/update_sympy_to_1_12 sage gh-oscarbenjamin DENIED by fallthru
remote: error: hook declined to update refs/heads/u/mkoeppe/update_sympy_to_1_12
To git@trac.sagemath.org:sage.git
 ! [remote rejected] update_sympy_1_12 -> u/mkoeppe/update_sympy_to_1_12 (hook declined)
error: failed to push some refs to 'git@trac.sagemath.org:sage.git'
```

Is there something I need to do first before I can push?
----
New commits:



---

archive/issue_comments_485186.json:
```json
{
    "body": "This is the diff I wanted to push:\n\n```\ndiff --git a/src/sage/calculus/calculus.py b/src/sage/calculus/calculus.py\nindex 76cd898..439543e 100644\n--- a/src/sage/calculus/calculus.py\n+++ b/src/sage/calculus/calculus.py\n@@ -1691,7 +1691,7 @@ def laplace(ex, t, s, algorithm='maxima'):\n     Testing SymPy::\n \n         sage: laplace(t^n, t, s, algorithm='sympy')\n-        (gamma(n + 1)/(s*s^n), 0, re(n) > -1)\n+        (s^(-n - 1)*gamma(n + 1), 0, re(n) > -1)\n \n     Testing Maxima::\n```\n\nIt is due to this change in SymPy:\nhttps://github.com/sympy/sympy/pull/23962",
    "created_at": "2022-09-05T18:13:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34252#issuecomment-485186",
    "user": "https://github.com/oscarbenjamin"
}
```

This is the diff I wanted to push:

```
diff --git a/src/sage/calculus/calculus.py b/src/sage/calculus/calculus.py
index 76cd898..439543e 100644
--- a/src/sage/calculus/calculus.py
+++ b/src/sage/calculus/calculus.py
@@ -1691,7 +1691,7 @@ def laplace(ex, t, s, algorithm='maxima'):
     Testing SymPy::
 
         sage: laplace(t^n, t, s, algorithm='sympy')
-        (gamma(n + 1)/(s*s^n), 0, re(n) > -1)
+        (s^(-n - 1)*gamma(n + 1), 0, re(n) > -1)
 
     Testing Maxima::
```

It is due to this change in SymPy:
https://github.com/sympy/sympy/pull/23962



---

archive/issue_comments_485187.json:
```json
{
    "body": "The warning is because our Trac server has been upgraded and has new host keys - see https://groups.google.com/g/sage-devel/c/GMmG95o7tE8/m/Gt3zWlGCBwAJ",
    "created_at": "2022-09-05T18:22:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34252#issuecomment-485187",
    "user": "https://github.com/mkoeppe"
}
```

The warning is because our Trac server has been upgraded and has new host keys - see https://groups.google.com/g/sage-devel/c/GMmG95o7tE8/m/Gt3zWlGCBwAJ



---

archive/issue_comments_485188.json:
```json
{
    "body": "The error is because of a branch protection rule. You can't push to a branch named `u/mkoeppe/...`. Instead push to a branch that uses your username, or use a \"public\" branch",
    "created_at": "2022-09-05T18:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34252#issuecomment-485188",
    "user": "https://github.com/mkoeppe"
}
```

The error is because of a branch protection rule. You can't push to a branch named `u/mkoeppe/...`. Instead push to a branch that uses your username, or use a "public" branch



---

archive/issue_comments_485189.json:
```json
{
    "body": "see https://doc.sagemath.org/html/en/developer/workflows.html#public-repository",
    "created_at": "2022-09-05T18:24:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34252#issuecomment-485189",
    "user": "https://github.com/mkoeppe"
}
```

see https://doc.sagemath.org/html/en/developer/workflows.html#public-repository



---

archive/issue_comments_485190.json:
```json
{
    "body": "I remember now it's `git trac checkout/push` that I needed.\n----\nNew commits:",
    "created_at": "2022-09-05T19:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34252",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34252#issuecomment-485190",
    "user": "https://github.com/oscarbenjamin"
}
```

I remember now it's `git trac checkout/push` that I needed.
----
New commits:
