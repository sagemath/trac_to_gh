# Issue 24931: Symbolic expression matching bug

Issue created by migration from https://trac.sagemath.org/ticket/25168

Original creator: rws

Original creation time: 2018-04-14 08:27:35

This is from GiNaC:

```
sage: w0=SR.wild(0); w1=SR.wild(1); w2=SR.wild(2)
sage: (sqrt(c+x)*x).match(w0 * sqrt(w0+w1))
sage: (sqrt(c+x)*x).match(w1 * sqrt(w0+w1))
{$0: c, $1: x}
ssage: (sqrt(c*x)*x).match(w0 * sqrt(w0*w1))  # no output: fail
sage: (sqrt(c*x)*x).match(w1 * sqrt(w0*w1))
{$0: c, $1: x}
```


Matching practically works if wildcards are not repeated. This means it's unusable for serious work.

https://github.com/pynac/pynac/issues/324


---

Comment by rws created at 2018-04-17 06:52:38

It should be noted that GiNaC's match() also does not differentiate between regular and sequence variables, they behave as regular in nonassociative functions, but as sequence in sums and products. This means that `(a+b).match(a+b+w0)` will match with `w0:0`. This can no longer be changed as it's established by now. It however complicates real commutative matching (if done right) by a great deal.

In contrast Mathematica differentiates between `f[a + b + u_] := u` where `f` does not match `a+b`, and `f[a + b + u___] := u` with `f[a + b] = Sequence[]`.


---

Comment by git created at 2018-05-27 06:14:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by rws created at 2018-07-01 08:00:09

Changing status from new to needs_review.


---

Comment by rws created at 2018-07-01 08:00:09

New commits:


---

Comment by vdelecroix created at 2018-08-03 19:20:18

update milestone 8.3 -> 8.4
