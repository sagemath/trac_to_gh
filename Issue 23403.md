# Issue 23403: FractionWithFactoredDenominator.smooth_critical_ideal should accept names as strings

Issue created by migration from https://trac.sagemath.org/ticket/23640

Original creator: jdemeyer

Original creation time: 2017-08-18 09:15:22

CC:  simonking rws dkrenn

Currently, `FractionWithFactoredDenominator.smooth_critical_ideal` accepts its variable names as symbolic entries. This is really strange, especially since no symbolic computations are done.

This should be deprecated and the variable names should be accepted as strings (or possibly variables from a pre-existing polynomial ring).

This is needed for #10483.


---

Comment by jdemeyer created at 2017-08-18 09:18:54

I'm attaching a patch that I'm moving from #10483. One thing which is missing is the deprecation of the existing behaviour.
----
New commits:


---

Comment by jdemeyer created at 2017-08-18 09:19:02

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-08-18 09:19:09

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2017-08-18 09:21:23

Minor nitpick about:

```
            # Coerce alpha into L.
            alpha = [L(a) for a in alpha]
```


Here you are doing a _conversion_, not a _coercion_. Either really do a coercion there or fix the comment.


---

Comment by jdemeyer created at 2017-08-18 09:22:17

It's also not clear why this coercion/conversion should be done only `if indets`.


---

Comment by dkrenn created at 2017-08-18 10:12:31

Replying to [comment:5 jdemeyer]:
> Minor nitpick about:
> {{{
>             # Coerce alpha into L.
>             alpha = [L(a) for a in alpha]
> }}}
> 
> Here you are doing a _conversion_, not a _coercion_. Either really do a coercion there or fix the comment.

+1 for using `.coerce`


---

Comment by dkrenn created at 2017-08-18 10:13:06

Replying to [comment:6 jdemeyer]:
> It's also not clear why this coercion/conversion should be done only `if indets`.

+1 for doing this always.


---

Comment by dkrenn created at 2017-08-18 10:14:23


```
            if isinstance(a, str) and a not in K.variable_names():
                indets.append(a)
```

There should be an error message, if some `a` is ignored (i.e., when it is not a string and not an existing variable).
