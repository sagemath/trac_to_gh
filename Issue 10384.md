# Issue 10384: f2py and sage : impossible to create a .so lib ?

archive/issues_010384.json:
```json
{
    "body": "Assignee: jason, jkantor\n\nKeywords: f2py compilation lib\n\nI'm trying to install a module which uses fortran code. The installation of that module perfectly works with \npython setup.py install\n\nBut the fortran compilation with sage fails :\nsage setup.py install\nwith the error :\n undefined reference to `MAIN__'\n\n\nIn fact, a \"mrcwaf.so\" file should be created, which is a lib file containing the Fortran code, but with the sage line code the compilation runs as if it wasn't a lib and searches for a MAIN.\n\nI think the gcc compilation line made by sage hasn't the correct options.\n\nI attach the messages from the classic python compiling and the sage compilations errors.\n\nI'm using python2.6, sage 4.5.2, gcc 4.4.4, f2py 2 and numpy 1.3.0 with fedora 12\n\nHere is the program I want to install :\n\nhttp://sourceforge.net/projects/mrcwa/\n\nPS : I succeed to install mrcwa in sage by first compiling the fortran with the python line which creates the mrcwaf.so file. And then,  the compilation of the program with sage sees this mrcwaf.so  and copies it in the sage tree.\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/10437\n\n",
    "created_at": "2010-12-06T14:46:01Z",
    "labels": [
        "numerical",
        "major",
        "bug"
    ],
    "title": "f2py and sage : impossible to create a .so lib ?",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10384",
    "user": "Christyves"
}
```
Assignee: jason, jkantor

Keywords: f2py compilation lib

I'm trying to install a module which uses fortran code. The installation of that module perfectly works with 
python setup.py install

But the fortran compilation with sage fails :
sage setup.py install
with the error :
 undefined reference to `MAIN__'


In fact, a "mrcwaf.so" file should be created, which is a lib file containing the Fortran code, but with the sage line code the compilation runs as if it wasn't a lib and searches for a MAIN.

I think the gcc compilation line made by sage hasn't the correct options.

I attach the messages from the classic python compiling and the sage compilations errors.

I'm using python2.6, sage 4.5.2, gcc 4.4.4, f2py 2 and numpy 1.3.0 with fedora 12

Here is the program I want to install :

http://sourceforge.net/projects/mrcwa/

PS : I succeed to install mrcwa in sage by first compiling the fortran with the python line which creates the mrcwaf.so file. And then,  the compilation of the program with sage sees this mrcwaf.so  and copies it in the sage tree.



Issue created by migration from https://trac.sagemath.org/ticket/10437





---

archive/issue_comments_106858.json:
```json
{
    "body": "Attachment",
    "created_at": "2010-12-06T14:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10384#issuecomment-106858",
    "user": "Christyves"
}
```

Attachment



---

archive/issue_comments_106859.json:
```json
{
    "body": "I think this problem has been solved, but since the error report is very unclear I cannot tell for sure, so I'm going to close this anyway.",
    "created_at": "2012-08-23T12:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10384#issuecomment-106859",
    "user": "jdemeyer"
}
```

I think this problem has been solved, but since the error report is very unclear I cannot tell for sure, so I'm going to close this anyway.



---

archive/issue_comments_106860.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2012-08-23T12:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10384",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10384#issuecomment-106860",
    "user": "jdemeyer"
}
```

Resolution: worksforme
