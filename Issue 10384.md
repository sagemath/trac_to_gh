# Issue 10384: f2py and sage : impossible to create a .so lib ?

Issue created by migration from https://trac.sagemath.org/ticket/10437

Original creator: Christyves

Original creation time: 2010-12-06 14:46:01

Assignee: jason, jkantor

Keywords: f2py compilation lib

I'm trying to install a module which uses fortran code. The installation of that module perfectly works with 
python setup.py install

But the fortran compilation with sage fails :
sage setup.py install
with the error :
 undefined reference to `MAIN__'


In fact, a "mrcwaf.so" file should be created, which is a lib file containing the Fortran code, but with the sage line code the compilation runs as if it wasn't a lib and searches for a MAIN.

I think the gcc compilation line made by sage hasn't the correct options.

I attach the messages from the classic python compiling and the sage compilations errors.

I'm using python2.6, sage 4.5.2, gcc 4.4.4, f2py 2 and numpy 1.3.0 with fedora 12

Here is the program I want to install :

http://sourceforge.net/projects/mrcwa/

PS : I succeed to install mrcwa in sage by first compiling the fortran with the python line which creates the mrcwaf.so file. And then,  the compilation of the program with sage sees this mrcwaf.so  and copies it in the sage tree.




---

Attachment


---

Comment by jdemeyer created at 2012-08-23 12:57:10

I think this problem has been solved, but since the error report is very unclear I cannot tell for sure, so I'm going to close this anyway.


---

Comment by jdemeyer created at 2012-08-23 12:57:10

Resolution: worksforme
