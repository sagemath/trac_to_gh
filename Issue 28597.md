# Issue 28597: Doctesting: don't test SageNB files unless SageNB has been installed

Issue created by migration from https://trac.sagemath.org/ticket/28834

Original creator: jhpalmieri

Original creation time: 2019-12-02 22:01:09

Since `SageNB` is now an optional package, we should detect whether it's present before doctesting its files via `make ptestlong` and similar commands.



---

Comment by jhpalmieri created at 2019-12-02 22:18:20

Without these changes, a Python 2 build of Sage fails to run doctests. With these changes, tests pass for me with a plain Python 2 build and also after running `./sage -i sagenb`. Before running `./sage -i sagenb`, `make ptestlong` says

```
Doctesting 3796 files using 12 threads...
```

(Same with Python 2 or Python 3)

After running `./sage -i sagenb`, with Python 2:

```
Doctesting 3849 files using 12 threads...
```

So it appears that the extra files are being correctly detected and doctested.
----
New commits:


---

Comment by jhpalmieri created at 2019-12-02 22:18:20

Changing status from new to needs_review.


---

Comment by chapoton created at 2019-12-03 08:54:58

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2019-12-03 08:54:58

ok, seems a reasonable thing to do


---

Comment by dimpase created at 2019-12-03 10:47:36

appears to work in Python2 with and without sagenb installed.


---

Comment by vbraun created at 2019-12-08 21:19:41

Resolution: fixed
