# Issue 14772: formatting of references

archive/issues_014772.json:
```json
{
    "body": "CC:  @nathanncohen\n\nThere seems to be some bug in the HTML generation... The docstring of the function `RandomGNP` in the file \"sage/graphs/generators/random.py\"\ncontains\n\n\n```\n    REFERENCES:\n\n    .. [1] P. Erdos and A. Renyi. On Random Graphs, Publ. Math. 6, 290 (1959).\n\n    .. [2] E. N. Gilbert. Random Graphs, Ann. Math. Stat., 30, 1141 (1959).\n\n    .. [3] V. Batagelj and U. Brandes. Efficient generation of large\n           random networks. Phys. Rev. E, 71, 036113, 2005.\n\n```\n\n\nCalling `./sage --docbuild reference html` creates the following output\nwith *unequal and wide* spacing (file: \"doc/output/html/en/reference/graphs/sage/graphs/graph_generators.html\"):\n\n\n```\n<p>REFERENCES:</p>\n<table class=\"docutils footnote\" frame=\"void\" id=\"id12\" rules=\"none\">\n<colgroup><col class=\"label\" /><col /></colgroup>\n<tbody valign=\"top\">\n<tr><td class=\"label\">[1]</td><td><ol class=\"first last upperalpha simple\" start=\"16\">\n<li>Erdos and A. Renyi. On Random Graphs, Publ. Math. 6, 290 (1959).</li>\n</ol>\n</td></tr>\n</tbody>\n</table>\n<table class=\"docutils footnote\" frame=\"void\" id=\"id13\" rules=\"none\">\n<colgroup><col class=\"label\" /><col /></colgroup>\n<tbody valign=\"top\">\n<tr><td class=\"label\">[2]</td><td><ol class=\"first last upperalpha simple\" start=\"5\">\n<li><ol class=\"first upperalpha\" start=\"14\">\n<li>Gilbert. Random Graphs, Ann. Math. Stat., 30, 1141 (1959).</li>\n</ol>\n</li>\n</ol>\n</td></tr>\n</tbody>\n</table>\n<table class=\"docutils footnote\" frame=\"void\" id=\"id14\" rules=\"none\">\n<colgroup><col class=\"label\" /><col /></colgroup>\n<tbody valign=\"top\">\n<tr><td class=\"label\"><a class=\"fn-backref\" href=\"#id11\">[3]</a></td><td>V. Batagelj and U. Brandes. Efficient generation of large\nrandom networks. Phys. Rev. E, 71, 036113, 2005.</td></tr>\n</tbody>\n</table>\n```\n\n\n\nReplacing \"..\" with \"-\" (e.g. ` .. [1] P. Erdos ` by ` - [1] P. Erdos `; as it is used in the docstring of the method `LCFGraph` in \"sage/graphs/generators/families.py\") will yield the following compiler error:\n\n\n```\ndocstring of sage.graphs.graph_generators.GraphGenerators.RandomGNP:12: ERROR: Unknown target name: \"3\".\n```\n\n\nNevertheless the output *looks* alright in the browser (but item 3 has different HTML code):\n\n\n```\n<p>REFERENCES:</p>\n<ul>\n<li><p class=\"first\">[1] P. Erdos and A. Renyi. On Random Graphs, Publ. Math. 6, 290 (1959).</p>\n</li>\n<li><p class=\"first\">[2] E. N. Gilbert. Random Graphs, Ann. Math. Stat., 30, 1141 (1959).</p>\n</li>\n<li><dl class=\"first docutils\">\n<dt>[3] V. Batagelj and U. Brandes. Efficient generation of large</dt>\n<dd><p class=\"first last\">random networks. Phys. Rev. E, 71, 036113, 2005.</p>\n</dd>\n</dl>\n</li>\n</ul>\n```\n\n\n----\n\nFurthermore, if only a docstring of a file in \"sage/graphs/generators/\" is changed and `./sage -b` is run, then `./sage --docbuild reference html` does **not** recognize the docstring change. My workaround is to make a modification to \"sage/graphs/graph_generators.py\" each time to trigger the necessity of a rebuild of the html reference.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15009\n\n",
    "created_at": "2013-08-06T10:49:04Z",
    "labels": [
        "component: documentation",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "formatting of references",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14772",
    "user": "https://trac.sagemath.org/admin/accounts/users/eisermbi"
}
```
CC:  @nathanncohen

There seems to be some bug in the HTML generation... The docstring of the function `RandomGNP` in the file "sage/graphs/generators/random.py"
contains


```
    REFERENCES:

    .. [1] P. Erdos and A. Renyi. On Random Graphs, Publ. Math. 6, 290 (1959).

    .. [2] E. N. Gilbert. Random Graphs, Ann. Math. Stat., 30, 1141 (1959).

    .. [3] V. Batagelj and U. Brandes. Efficient generation of large
           random networks. Phys. Rev. E, 71, 036113, 2005.

```


Calling `./sage --docbuild reference html` creates the following output
with *unequal and wide* spacing (file: "doc/output/html/en/reference/graphs/sage/graphs/graph_generators.html"):


```
<p>REFERENCES:</p>
<table class="docutils footnote" frame="void" id="id12" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><ol class="first last upperalpha simple" start="16">
<li>Erdos and A. Renyi. On Random Graphs, Publ. Math. 6, 290 (1959).</li>
</ol>
</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id13" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><ol class="first last upperalpha simple" start="5">
<li><ol class="first upperalpha" start="14">
<li>Gilbert. Random Graphs, Ann. Math. Stat., 30, 1141 (1959).</li>
</ol>
</li>
</ol>
</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id14" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id11">[3]</a></td><td>V. Batagelj and U. Brandes. Efficient generation of large
random networks. Phys. Rev. E, 71, 036113, 2005.</td></tr>
</tbody>
</table>
```



Replacing ".." with "-" (e.g. ` .. [1] P. Erdos ` by ` - [1] P. Erdos `; as it is used in the docstring of the method `LCFGraph` in "sage/graphs/generators/families.py") will yield the following compiler error:


```
docstring of sage.graphs.graph_generators.GraphGenerators.RandomGNP:12: ERROR: Unknown target name: "3".
```


Nevertheless the output *looks* alright in the browser (but item 3 has different HTML code):


```
<p>REFERENCES:</p>
<ul>
<li><p class="first">[1] P. Erdos and A. Renyi. On Random Graphs, Publ. Math. 6, 290 (1959).</p>
</li>
<li><p class="first">[2] E. N. Gilbert. Random Graphs, Ann. Math. Stat., 30, 1141 (1959).</p>
</li>
<li><dl class="first docutils">
<dt>[3] V. Batagelj and U. Brandes. Efficient generation of large</dt>
<dd><p class="first last">random networks. Phys. Rev. E, 71, 036113, 2005.</p>
</dd>
</dl>
</li>
</ul>
```


----

Furthermore, if only a docstring of a file in "sage/graphs/generators/" is changed and `./sage -b` is run, then `./sage --docbuild reference html` does **not** recognize the docstring change. My workaround is to make a modification to "sage/graphs/graph_generators.py" each time to trigger the necessity of a rebuild of the html reference.

Issue created by migration from https://trac.sagemath.org/ticket/15009





---

archive/issue_comments_188098.json:
```json
{
    "body": "The thing in square brackets is the reference link (and will be a hyperlink in the docs):\n\n```\nSee page 89 of [Nat2000]_.\n\nREFERENCES:\n\n.. [Nat2000] M.B. Nathanson. Elementary Methods in Number Theory.\n   Springer, 2000.\n```\n \nUsing numbers as keys is extremely uncool since the reference name must be unique throughout the reference manual. This is probably why `LCFGraph` doesn't do references correctly.",
    "created_at": "2013-08-06T13:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14772",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14772#issuecomment-188098",
    "user": "https://github.com/vbraun"
}
```

The thing in square brackets is the reference link (and will be a hyperlink in the docs):

```
See page 89 of [Nat2000]_.

REFERENCES:

.. [Nat2000] M.B. Nathanson. Elementary Methods in Number Theory.
   Springer, 2000.
```
 
Using numbers as keys is extremely uncool since the reference name must be unique throughout the reference manual. This is probably why `LCFGraph` doesn't do references correctly.



---

archive/issue_comments_188099.json:
```json
{
    "body": "I see. Hence, the proper way to state a reference is by using \"..\" and a proper reference name in square brackets. I am attaching a patch that corrects all reference sections under `sage/graphs` that have reference links to them.\n\nJust noted that for\n`RandomGNP` of `sage/graphs/graph_generators_pyx.pyx`,\n`RandomGNP` of `sage/graphs/generators/random.py`,\n`RandomDirectedGNP` of `sage/graphs/digraph_generators.py`,\nthe first two references are the same. I will leave it like that...\n\nThe usage of \"-\" seems to create a list with bullets. Hence, it might be only acceptable if none of the entries in the reference section are used by a reference link... I will also leave such lists as they are (though the numbers with square brackets seem to be of not much benefit).",
    "created_at": "2013-08-07T16:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14772",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14772#issuecomment-188099",
    "user": "https://trac.sagemath.org/admin/accounts/users/eisermbi"
}
```

I see. Hence, the proper way to state a reference is by using ".." and a proper reference name in square brackets. I am attaching a patch that corrects all reference sections under `sage/graphs` that have reference links to them.

Just noted that for
`RandomGNP` of `sage/graphs/graph_generators_pyx.pyx`,
`RandomGNP` of `sage/graphs/generators/random.py`,
`RandomDirectedGNP` of `sage/graphs/digraph_generators.py`,
the first two references are the same. I will leave it like that...

The usage of "-" seems to create a list with bullets. Hence, it might be only acceptable if none of the entries in the reference section are used by a reference link... I will also leave such lists as they are (though the numbers with square brackets seem to be of not much benefit).



---

archive/issue_comments_188100.json:
```json
{
    "body": "Helloooooooooooo !!\n\nWell, it all seems right. Could I ask you to do a couple of modifications though ? I'm sorry to ask that but I now have a Git version of Sage, and I don't think I could easily produce a diff patch to be applied on top of your mercurial patch, considering that some folders have been renamed in the git version of Sage `^^;`\n\nThere are two things, actually :\n\n* `c_i = triangles_i / (k_i\\*(k_i-1)/2)` appears three times in `generic_graph.py`, and it would be much prettied if it were `c_i = \\text{triangles}_i / \\binom {k_i} 2` instead\n\n* `T = 3\\*triangles/triads` should be LaTeX code, i.e. ``T = 3\\times \\text{triangles}/\\text{triads}``\n\nSorry for that ! Looks like it is my fault, by the way `^^;`\n\nNathann",
    "created_at": "2013-08-08T13:01:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14772",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14772#issuecomment-188100",
    "user": "https://github.com/nathanncohen"
}
```

Helloooooooooooo !!

Well, it all seems right. Could I ask you to do a couple of modifications though ? I'm sorry to ask that but I now have a Git version of Sage, and I don't think I could easily produce a diff patch to be applied on top of your mercurial patch, considering that some folders have been renamed in the git version of Sage `^^;`

There are two things, actually :

* `c_i = triangles_i / (k_i\*(k_i-1)/2)` appears three times in `generic_graph.py`, and it would be much prettied if it were `c_i = \text{triangles}_i / \binom {k_i} 2` instead

* `T = 3\*triangles/triads` should be LaTeX code, i.e. ``T = 3\times \text{triangles}/\text{triads}``

Sorry for that ! Looks like it is my fault, by the way `^^;`

Nathann



---

archive/issue_comments_188101.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-08-11T14:10:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14772",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14772#issuecomment-188101",
    "user": "https://trac.sagemath.org/admin/accounts/users/eisermbi"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_188102.json:
```json
{
    "body": "I have rewritten the docstrings of `cluster_triangles, clustering_average, cluster_transitivity, clustering_coeff`. Hope that listing a reference (here: NetworkX documentation) only once for 4 methods is okay. Otherwise one needs to change each instance of the reference... What do you think?",
    "created_at": "2013-08-11T14:10:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14772",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14772#issuecomment-188102",
    "user": "https://trac.sagemath.org/admin/accounts/users/eisermbi"
}
```

I have rewritten the docstrings of `cluster_triangles, clustering_average, cluster_transitivity, clustering_coeff`. Hope that listing a reference (here: NetworkX documentation) only once for 4 methods is okay. Otherwise one needs to change each instance of the reference... What do you think?



---

archive/issue_comments_188103.json:
```json
{
    "body": "Attachment [trac_15009.patch](tarball://root/attachments/some-uuid/ticket15009/trac_15009.patch) by @vbraun created at 2013-08-11 15:00:29\n\nReferences should be defined once and referenced as often as necessary. If the reference is not specific to the method but referred to in other methods as well then it should probably be defined in the module docstring and not in one of the methods.",
    "created_at": "2013-08-11T15:00:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14772",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14772#issuecomment-188103",
    "user": "https://github.com/vbraun"
}
```

Attachment [trac_15009.patch](tarball://root/attachments/some-uuid/ticket15009/trac_15009.patch) by @vbraun created at 2013-08-11 15:00:29

References should be defined once and referenced as often as necessary. If the reference is not specific to the method but referred to in other methods as well then it should probably be defined in the module docstring and not in one of the methods.



---

archive/issue_comments_188104.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-08-11T17:16:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14772",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14772#issuecomment-188104",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_188105.json:
```json
{
    "body": "(thank you for having fixed those docstrings !! `:-)`)",
    "created_at": "2013-08-13T08:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14772",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14772#issuecomment-188105",
    "user": "https://github.com/nathanncohen"
}
```

(thank you for having fixed those docstrings !! `:-)`)



---

archive/issue_events_014498.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-20T13:00:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/14772",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/14772#event-14498"
}
```



---

archive/issue_comments_188106.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-08-20T13:00:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14772",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14772#issuecomment-188106",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
