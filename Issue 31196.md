# Issue 31196: more efficient method for number of real components of an elliptic curve over Q

Issue created by migration from https://trac.sagemath.org/ticket/31433

Original creator: cremona

Original creation time: 2021-02-25 09:07:47

CC:  slelievre

Keywords: elliptic curve

e.g.

```
sage: E = EllipticCurve([0,-1,1,0,0])                                                                                                                 
sage: E.discriminant()                                                                                                                                
-11
sage: E.real_components()                                                                                                                             
1
```

The number of real components is 1 or 2 when the discriminant is negaive or positive respectively.  The current code does a lot of unneceesary work:

```
       invs = self.short_weierstrass_model().ainvs()
        x = rings.polygen(self.base_ring())
        f = x**3 + invs[3]*x + invs[4]
        if f.discriminant() > 0:
            return 2
        else:
            return 1
```

It is unnecessary to compute a short Weierstrass model, take its coefficients, construct a polynomial, and compute its discriminant, since `E.discriminant()` has the same sign as the discriminant computed here.

As well as fixing this I'll add a `real_components()` method for elliptic curves over number fields, which will take as a parameter a real embedding of the base field.


---

Comment by slelievre created at 2021-02-25 10:51:41

Changing component from PLEASE CHANGE to elliptic curves.


---

Comment by cremona created at 2021-02-25 16:29:33

New commits:


---

Comment by cremona created at 2021-02-25 16:29:33

Changing status from new to needs_review.


---

Comment by chapoton created at 2021-02-26 08:39:25

two many final dots here:

```
+        Return the number of real components with respect to a real embedding of the base field..
```



---

Comment by git created at 2021-02-26 08:55:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2021-02-26 12:52:32

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2021-02-26 12:52:32

ok, looks good. Avanti !


---

Comment by cremona created at 2021-02-26 13:40:18

Replying to [comment:6 chapoton]:
> ok, looks good. Avanti !
Merci!


---

Comment by vbraun created at 2021-03-09 00:01:10

Resolution: fixed
