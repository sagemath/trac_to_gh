# Issue 30984: Alllow arbitrary folder as output directory of docbuild

archive/issues_030984.json:
```json
{
    "body": "CC:  @tscrim @nthiery chapton @mkoeppe @jhpalmieri\n\nIt was not possible to specify an arbitrary folder as the output of the docbuild, because the citation extension had an assertion that checked that the output directory was a subfolder of \u0300 SAGE_DOC`. This check is replaced by providing some default folder for the citations in case the output directory is not below `SAGE_DOC`. \n\nThis is allows to build the documentation by running `sphinx` manually, which is required by some tools (e.g. the restructuredtext extension for VS code provides a HTML preview of the currently edited rst file by running sphinx on it).\n\n\nI also used the opportunity to convert the code in question to use pathlib.\n\nIssue created by migration from https://trac.sagemath.org/ticket/31221\n\n",
    "created_at": "2021-01-10T16:07:55Z",
    "labels": [
        "documentation",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Alllow arbitrary folder as output directory of docbuild",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30984",
    "user": "@tobiasdiez"
}
```
CC:  @tscrim @nthiery chapton @mkoeppe @jhpalmieri

It was not possible to specify an arbitrary folder as the output of the docbuild, because the citation extension had an assertion that checked that the output directory was a subfolder of Ì€ SAGE_DOC`. This check is replaced by providing some default folder for the citations in case the output directory is not below `SAGE_DOC`. 

This is allows to build the documentation by running `sphinx` manually, which is required by some tools (e.g. the restructuredtext extension for VS code provides a HTML preview of the currently edited rst file by running sphinx on it).


I also used the opportunity to convert the code in question to use pathlib.

Issue created by migration from https://trac.sagemath.org/ticket/31221





---

archive/issue_comments_442439.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-10T16:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30984#issuecomment-442439",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_442440.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-10T16:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30984#issuecomment-442440",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_442441.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-01-10T16:09:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30984#issuecomment-442441",
    "user": "@tobiasdiez"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_442442.json:
```json
{
    "body": "Patchbot is green, looks fine to me.",
    "created_at": "2021-01-16T18:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30984#issuecomment-442442",
    "user": "@mkoeppe"
}
```

Patchbot is green, looks fine to me.



---

archive/issue_comments_442443.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-01-16T18:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30984#issuecomment-442443",
    "user": "@mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_442444.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-01-16T19:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30984#issuecomment-442444",
    "user": "@tobiasdiez"
}
```

Thanks!



---

archive/issue_comments_442445.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-24T10:37:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30984",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30984#issuecomment-442445",
    "user": "@vbraun"
}
```

Resolution: fixed
