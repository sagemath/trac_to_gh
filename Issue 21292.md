# Issue 21292: Bug in factoring of general symbolic expressions

archive/issues_021292.json:
```json
{
    "body": "\n```\nsage: (sin(x)^2-1).factor()\n(sin(x) + 1)*(sin(x) - 1)\nsage: f(x) = function('f')(x)\nsage: (f(x)^2-1).factor()\n(f(x) + 1)*(f(x) - 1)\nsage: f(x).diff(x)\ndiff(f(x), x)\nsage: (f(x).diff(x)^2-1).factor()\n...\nNotImplementedError: derivative\n\nsage: SR((f(x).diff(x)^2-1)._maxima_().factor())\n(diff(f(x), x) + 1)*(diff(f(x), x) - 1)\n```\n\n`factor()` falls back to Maxima if it cannot convert the expression to a polynomial. It fails to catch `NotImplementedError` from `expression_conversion.py` however.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21529\n\n",
    "created_at": "2016-09-18T13:24:48Z",
    "labels": [
        "symbolics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Bug in factoring of general symbolic expressions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21292",
    "user": "@rwst"
}
```

```
sage: (sin(x)^2-1).factor()
(sin(x) + 1)*(sin(x) - 1)
sage: f(x) = function('f')(x)
sage: (f(x)^2-1).factor()
(f(x) + 1)*(f(x) - 1)
sage: f(x).diff(x)
diff(f(x), x)
sage: (f(x).diff(x)^2-1).factor()
...
NotImplementedError: derivative

sage: SR((f(x).diff(x)^2-1)._maxima_().factor())
(diff(f(x), x) + 1)*(diff(f(x), x) - 1)
```

`factor()` falls back to Maxima if it cannot convert the expression to a polynomial. It fails to catch `NotImplementedError` from `expression_conversion.py` however.

Issue created by migration from https://trac.sagemath.org/ticket/21529





---

archive/issue_comments_295530.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-09-18T13:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21292#issuecomment-295530",
    "user": "@rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_295531.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-09-18T13:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21292#issuecomment-295531",
    "user": "@rwst"
}
```

New commits:



---

archive/issue_comments_295532.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-09-20T08:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21292#issuecomment-295532",
    "user": "@mezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_295533.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-09-21T20:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21292#issuecomment-295533",
    "user": "@vbraun"
}
```

Resolution: fixed
