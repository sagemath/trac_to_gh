# Issue 12892: The documentation should search methods in classes

Issue created by migration from https://trac.sagemath.org/ticket/13064

Original creator: ppurka

Original creation time: 2012-05-30 05:19:01

Assignee: mvngu

CC:  sage-combinat

Keywords: documentation

The documentation here http://www.sagemath.org/doc/reference/search.html should be able to search methods (those not starting with `_`) in the classes. For instance, the following search http://www.sagemath.org/doc/reference/search.html?q=integer_representation gives zero results even though `integer_representation` is a valid method for an element of `GF(2^p)`.

```
sage: F = GF(2**3, 'a')
sage: b = F.random_element(); b
a^2 + a
sage: b.integer_representation()
6
```



---

Comment by nbruin created at 2012-05-30 05:35:07

I don't think the problem is that it cannot search in methods. For instance, if you try

```
frobenius
```

you'll see plenty of methods show up. Are you positive that `integer_representation` is documented in the "sage reference"? If you look in the index under "I", you'll see many methods indexed, but not that one. So I guess that `sage.rings.finite_rings.element_givaro.FiniteField_givaroElement` is simply not included there.


---

Comment by ppurka created at 2012-05-30 05:59:19

My guess was that maybe it only searches and indexes methods which are present in global scope. I will have to look more carefully to see why it is missing some of the methods.


---

Comment by tscrim created at 2012-11-17 08:13:18

The problem (in this particular case) is that the documentation for these finite fields are not included/built because there's no references in a `.rst` file. Would anyone mind if I reuse this ticket to update the appropriate `.rst` file?


---

Comment by ppurka created at 2012-11-17 08:16:09

Sure, go ahead.


---

Comment by tscrim created at 2012-11-18 04:53:35

I've added a finite field `.rst` file (there might be others that are missing out there...) and cleaned up the documentation for those files so the docbuild won't complain. Please review.


---

Comment by tscrim created at 2012-11-18 04:53:35

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2012-11-18 05:30:13

I think that for the usage in the ticket description, the functions `search_src` and `search_def` are much more appropriate than searching the documentation, which only searches the documentation: the reference manual, the tutorial, etc. Maybe `search_src` etc. should be better publicized. There should be a good way to put a note about them on the [search page for the docs](http://www.sagemath.org/doc/reference/search.html), for instance. Would that be a good idea?


---

Comment by ppurka created at 2012-11-18 05:35:15

Replying to [comment:6 jhpalmieri]:
> I think that for the usage in the ticket description, the functions `search_src` and `search_def` are much more appropriate than searching the documentation, which only searches the documentation: the reference manual, the tutorial, etc. Maybe `search_src` etc. should be better publicized. There should be a good way to put a note about them on the [search page for the docs](http://www.sagemath.org/doc/reference/search.html), for instance. Would that be a good idea?

Definitely a good idea. I wasn't aware of this `search_src` function until very recently. `search_def` seems new to me :) Why doesn't the documentation searching function have these two integrated in them? Maybe a link from the documentation search page?


---

Comment by tscrim created at 2012-11-18 05:50:38

Replying to [comment:6 jhpalmieri]:
> I think that for the usage in the ticket description, the functions `search_src` and `search_def` are much more appropriate than searching the documentation, which only searches the documentation: the reference manual, the tutorial, etc. Maybe `search_src` etc. should be better publicized. There should be a good way to put a note about them on the [search page for the docs](http://www.sagemath.org/doc/reference/search.html), for instance. Would that be a good idea?

Almost certainly. Something like: "In sage, you can use `search_src` [with a link to its doc] to find functions in *all* of the source code, including private functions (those that begin with a leading underscore '`_`')." Possibly also adding: "If there is a module not linked in this documentation, it is a bug that needs to be reported."

Also `search_def` according to its documentation is the same as `search_src`.


---

Comment by ppurka created at 2012-11-18 05:54:53

Replying to [comment:8 tscrim]:
> Also `search_def` according to its documentation is the same as `search_src`.
Actually they are different functions. Their input and output formats are similar. The `search_def` searches only function names while the `search_src` searches through the whole source code, matching any line with the search string.


---

Comment by jhpalmieri created at 2012-11-18 05:58:26

Those `search_*` functions are only available when you're running Sage, while the documentation search page just needs the build documentation â€” no need for Sage to be running. So that's one reason why they're not integrated, and probably why they shouldn't be.

I'm imagining text like "You can also run `search_src(...)` from while running Sage to search the source code. You can also browse the source code by running `hg_sage.serve()` from Sage."

Re `search_def('blah')`: it is like `search_src('blah')`, but it restricts its search to lines of the form `def blah` or `cdef blah`, so it sees both functions and methods which contain 'blah' in their name.


---

Comment by jhpalmieri created at 2012-11-18 06:16:06

Here's a sample patch. This changes Sage so it uses its own "search.html" page instead of the default one. The difference between the default one and the one in the patch is this:

```diff
--- local/lib/python/site-packages/Sphinx-1.1.2-py2.7.egg/sphinx/themes/basic/search.html	2012-11-17 10:34:58.000000000 -0800
+++ devel/sage/doc/common/themes/sage/search.html	2012-11-17 22:11:12.000000000 -0800
@@ -31,6 +31,12 @@
     function will automatically search for all of the words. Pages
     containing fewer words won't appear in the result list.{% endtrans %}
   </p>
+  <p>
+    {% trans %}Note also that you can also call "search_src(...)"
+    while running Sage to search Sage's source code. You can also
+    browse Sage's source code by calling "hg_sage.serve()" while running
+    Sage.{% endtrans %}
+  </p>
   <form action="" method="get">
     <input type="text" name="q" value="" />
     <input type="submit" value="{{ _('search') }}" />
```



---

Attachment


---

Attachment

I've rebased over #13180. I'm happy with the change to the search page.


---

Comment by tscrim created at 2012-11-26 18:24:26

This applies cleanly for me on 5.5.rc0, so let's try again.

For patchbot:

Apply: trac_13064-finite_rings_doc-ts.patch, trac_13064-search.patch


---

Comment by ppurka created at 2013-02-07 08:20:45

Changing status from needs_review to positive_review.


---

Comment by ppurka created at 2013-02-07 08:20:45

Sorry for sitting on this for so long. I have nothing else to add to this.


---

Comment by tscrim created at 2013-02-07 14:08:06

Thank you for doing the final review on this.

Best,

Travis


---

Comment by jdemeyer created at 2013-02-09 12:12:24

Resolution: fixed
