# Issue 12892: The documentation should search methods in classes

archive/issues_012892.json:
```json
{
    "body": "Assignee: mvngu\n\nCC:  sage-combinat\n\nKeywords: documentation\n\nThe documentation here http://www.sagemath.org/doc/reference/search.html should be able to search methods (those not starting with `_`) in the classes. For instance, the following search http://www.sagemath.org/doc/reference/search.html?q=integer_representation gives zero results even though `integer_representation` is a valid method for an element of `GF(2^p)`.\n\n```\nsage: F = GF(2**3, 'a')\nsage: b = F.random_element(); b\na^2 + a\nsage: b.integer_representation()\n6\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/13064\n\n",
    "created_at": "2012-05-30T05:19:01Z",
    "labels": [
        "component: documentation",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.7",
    "title": "The documentation should search methods in classes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12892",
    "user": "https://github.com/ppurka"
}
```
Assignee: mvngu

CC:  sage-combinat

Keywords: documentation

The documentation here http://www.sagemath.org/doc/reference/search.html should be able to search methods (those not starting with `_`) in the classes. For instance, the following search http://www.sagemath.org/doc/reference/search.html?q=integer_representation gives zero results even though `integer_representation` is a valid method for an element of `GF(2^p)`.

```
sage: F = GF(2**3, 'a')
sage: b = F.random_element(); b
a^2 + a
sage: b.integer_representation()
6
```

Issue created by migration from https://trac.sagemath.org/ticket/13064





---

archive/issue_comments_154922.json:
```json
{
    "body": "I don't think the problem is that it cannot search in methods. For instance, if you try\n\n```\nfrobenius\n```\nyou'll see plenty of methods show up. Are you positive that `integer_representation` is documented in the \"sage reference\"? If you look in the index under \"I\", you'll see many methods indexed, but not that one. So I guess that `sage.rings.finite_rings.element_givaro.FiniteField_givaroElement` is simply not included there.",
    "created_at": "2012-05-30T05:35:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154922",
    "user": "https://github.com/nbruin"
}
```

I don't think the problem is that it cannot search in methods. For instance, if you try

```
frobenius
```
you'll see plenty of methods show up. Are you positive that `integer_representation` is documented in the "sage reference"? If you look in the index under "I", you'll see many methods indexed, but not that one. So I guess that `sage.rings.finite_rings.element_givaro.FiniteField_givaroElement` is simply not included there.



---

archive/issue_comments_154923.json:
```json
{
    "body": "My guess was that maybe it only searches and indexes methods which are present in global scope. I will have to look more carefully to see why it is missing some of the methods.",
    "created_at": "2012-05-30T05:59:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154923",
    "user": "https://github.com/ppurka"
}
```

My guess was that maybe it only searches and indexes methods which are present in global scope. I will have to look more carefully to see why it is missing some of the methods.



---

archive/issue_comments_154924.json:
```json
{
    "body": "The problem (in this particular case) is that the documentation for these finite fields are not included/built because there's no references in a `.rst` file. Would anyone mind if I reuse this ticket to update the appropriate `.rst` file?",
    "created_at": "2012-11-17T08:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154924",
    "user": "https://github.com/tscrim"
}
```

The problem (in this particular case) is that the documentation for these finite fields are not included/built because there's no references in a `.rst` file. Would anyone mind if I reuse this ticket to update the appropriate `.rst` file?



---

archive/issue_comments_154925.json:
```json
{
    "body": "Sure, go ahead.",
    "created_at": "2012-11-17T08:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154925",
    "user": "https://github.com/ppurka"
}
```

Sure, go ahead.



---

archive/issue_comments_154926.json:
```json
{
    "body": "I've added a finite field `.rst` file (there might be others that are missing out there...) and cleaned up the documentation for those files so the docbuild won't complain. Please review.",
    "created_at": "2012-11-18T04:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154926",
    "user": "https://github.com/tscrim"
}
```

I've added a finite field `.rst` file (there might be others that are missing out there...) and cleaned up the documentation for those files so the docbuild won't complain. Please review.



---

archive/issue_comments_154927.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-11-18T04:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154927",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_154928.json:
```json
{
    "body": "I think that for the usage in the ticket description, the functions `search_src` and `search_def` are much more appropriate than searching the documentation, which only searches the documentation: the reference manual, the tutorial, etc. Maybe `search_src` etc. should be better publicized. There should be a good way to put a note about them on the [search page for the docs](http://www.sagemath.org/doc/reference/search.html), for instance. Would that be a good idea?",
    "created_at": "2012-11-18T05:30:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154928",
    "user": "https://github.com/jhpalmieri"
}
```

I think that for the usage in the ticket description, the functions `search_src` and `search_def` are much more appropriate than searching the documentation, which only searches the documentation: the reference manual, the tutorial, etc. Maybe `search_src` etc. should be better publicized. There should be a good way to put a note about them on the [search page for the docs](http://www.sagemath.org/doc/reference/search.html), for instance. Would that be a good idea?



---

archive/issue_comments_154929.json:
```json
{
    "body": "Replying to [comment:6 jhpalmieri]:\n> I think that for the usage in the ticket description, the functions `search_src` and `search_def` are much more appropriate than searching the documentation, which only searches the documentation: the reference manual, the tutorial, etc. Maybe `search_src` etc. should be better publicized. There should be a good way to put a note about them on the [search page for the docs](http://www.sagemath.org/doc/reference/search.html), for instance. Would that be a good idea?\n\n\nDefinitely a good idea. I wasn't aware of this `search_src` function until very recently. `search_def` seems new to me :) Why doesn't the documentation searching function have these two integrated in them? Maybe a link from the documentation search page?",
    "created_at": "2012-11-18T05:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154929",
    "user": "https://github.com/ppurka"
}
```

Replying to [comment:6 jhpalmieri]:
> I think that for the usage in the ticket description, the functions `search_src` and `search_def` are much more appropriate than searching the documentation, which only searches the documentation: the reference manual, the tutorial, etc. Maybe `search_src` etc. should be better publicized. There should be a good way to put a note about them on the [search page for the docs](http://www.sagemath.org/doc/reference/search.html), for instance. Would that be a good idea?


Definitely a good idea. I wasn't aware of this `search_src` function until very recently. `search_def` seems new to me :) Why doesn't the documentation searching function have these two integrated in them? Maybe a link from the documentation search page?



---

archive/issue_comments_154930.json:
```json
{
    "body": "Replying to [comment:6 jhpalmieri]:\n> I think that for the usage in the ticket description, the functions `search_src` and `search_def` are much more appropriate than searching the documentation, which only searches the documentation: the reference manual, the tutorial, etc. Maybe `search_src` etc. should be better publicized. There should be a good way to put a note about them on the [search page for the docs](http://www.sagemath.org/doc/reference/search.html), for instance. Would that be a good idea?\n\n\nAlmost certainly. Something like: \"In sage, you can use `search_src` [with a link to its doc] to find functions in **all** of the source code, including private functions (those that begin with a leading underscore '`_`').\" Possibly also adding: \"If there is a module not linked in this documentation, it is a bug that needs to be reported.\"\n\nAlso `search_def` according to its documentation is the same as `search_src`.",
    "created_at": "2012-11-18T05:50:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154930",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:6 jhpalmieri]:
> I think that for the usage in the ticket description, the functions `search_src` and `search_def` are much more appropriate than searching the documentation, which only searches the documentation: the reference manual, the tutorial, etc. Maybe `search_src` etc. should be better publicized. There should be a good way to put a note about them on the [search page for the docs](http://www.sagemath.org/doc/reference/search.html), for instance. Would that be a good idea?


Almost certainly. Something like: "In sage, you can use `search_src` [with a link to its doc] to find functions in **all** of the source code, including private functions (those that begin with a leading underscore '`_`')." Possibly also adding: "If there is a module not linked in this documentation, it is a bug that needs to be reported."

Also `search_def` according to its documentation is the same as `search_src`.



---

archive/issue_comments_154931.json:
```json
{
    "body": "Replying to [comment:8 tscrim]:\n> Also `search_def` according to its documentation is the same as `search_src`.\n\nActually they are different functions. Their input and output formats are similar. The `search_def` searches only function names while the `search_src` searches through the whole source code, matching any line with the search string.",
    "created_at": "2012-11-18T05:54:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154931",
    "user": "https://github.com/ppurka"
}
```

Replying to [comment:8 tscrim]:
> Also `search_def` according to its documentation is the same as `search_src`.

Actually they are different functions. Their input and output formats are similar. The `search_def` searches only function names while the `search_src` searches through the whole source code, matching any line with the search string.



---

archive/issue_comments_154932.json:
```json
{
    "body": "Those `search_*` functions are only available when you're running Sage, while the documentation search page just needs the build documentation \u2014 no need for Sage to be running. So that's one reason why they're not integrated, and probably why they shouldn't be.\n\nI'm imagining text like \"You can also run `search_src(...)` from while running Sage to search the source code. You can also browse the source code by running `hg_sage.serve()` from Sage.\"\n\nRe `search_def('blah')`: it is like `search_src('blah')`, but it restricts its search to lines of the form `def blah` or `cdef blah`, so it sees both functions and methods which contain 'blah' in their name.",
    "created_at": "2012-11-18T05:58:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154932",
    "user": "https://github.com/jhpalmieri"
}
```

Those `search_*` functions are only available when you're running Sage, while the documentation search page just needs the build documentation â€” no need for Sage to be running. So that's one reason why they're not integrated, and probably why they shouldn't be.

I'm imagining text like "You can also run `search_src(...)` from while running Sage to search the source code. You can also browse the source code by running `hg_sage.serve()` from Sage."

Re `search_def('blah')`: it is like `search_src('blah')`, but it restricts its search to lines of the form `def blah` or `cdef blah`, so it sees both functions and methods which contain 'blah' in their name.



---

archive/issue_comments_154933.json:
```json
{
    "body": "Here's a sample patch. This changes Sage so it uses its own \"search.html\" page instead of the default one. The difference between the default one and the one in the patch is this:\n\n```diff\n--- local/lib/python/site-packages/Sphinx-1.1.2-py2.7.egg/sphinx/themes/basic/search.html\t2012-11-17 10:34:58.000000000 -0800\n+++ devel/sage/doc/common/themes/sage/search.html\t2012-11-17 22:11:12.000000000 -0800\n@@ -31,6 +31,12 @@\n     function will automatically search for all of the words. Pages\n     containing fewer words won't appear in the result list.{% endtrans %}\n   </p>\n+  <p>\n+    {% trans %}Note also that you can also call \"search_src(...)\"\n+    while running Sage to search Sage's source code. You can also\n+    browse Sage's source code by calling \"hg_sage.serve()\" while running\n+    Sage.{% endtrans %}\n+  </p>\n   <form action=\"\" method=\"get\">\n     <input type=\"text\" name=\"q\" value=\"\" />\n     <input type=\"submit\" value=\"{{ _('search') }}\" />\n```",
    "created_at": "2012-11-18T06:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154933",
    "user": "https://github.com/jhpalmieri"
}
```

Here's a sample patch. This changes Sage so it uses its own "search.html" page instead of the default one. The difference between the default one and the one in the patch is this:

```diff
--- local/lib/python/site-packages/Sphinx-1.1.2-py2.7.egg/sphinx/themes/basic/search.html	2012-11-17 10:34:58.000000000 -0800
+++ devel/sage/doc/common/themes/sage/search.html	2012-11-17 22:11:12.000000000 -0800
@@ -31,6 +31,12 @@
     function will automatically search for all of the words. Pages
     containing fewer words won't appear in the result list.{% endtrans %}
   </p>
+  <p>
+    {% trans %}Note also that you can also call "search_src(...)"
+    while running Sage to search Sage's source code. You can also
+    browse Sage's source code by calling "hg_sage.serve()" while running
+    Sage.{% endtrans %}
+  </p>
   <form action="" method="get">
     <input type="text" name="q" value="" />
     <input type="submit" value="{{ _('search') }}" />
```



---

archive/issue_comments_154934.json:
```json
{
    "body": "Attachment [trac_13064-search.patch](tarball://root/attachments/some-uuid/ticket13064/trac_13064-search.patch) by @jhpalmieri created at 2012-11-18 06:16:49",
    "created_at": "2012-11-18T06:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154934",
    "user": "https://github.com/jhpalmieri"
}
```

Attachment [trac_13064-search.patch](tarball://root/attachments/some-uuid/ticket13064/trac_13064-search.patch) by @jhpalmieri created at 2012-11-18 06:16:49



---

archive/issue_comments_154935.json:
```json
{
    "body": "Attachment [trac_13064-finite_rings_doc-ts.patch](tarball://root/attachments/some-uuid/ticket13064/trac_13064-finite_rings_doc-ts.patch) by @tscrim created at 2012-11-20 22:47:28\n\nI've rebased over #13180. I'm happy with the change to the search page.",
    "created_at": "2012-11-20T22:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154935",
    "user": "https://github.com/tscrim"
}
```

Attachment [trac_13064-finite_rings_doc-ts.patch](tarball://root/attachments/some-uuid/ticket13064/trac_13064-finite_rings_doc-ts.patch) by @tscrim created at 2012-11-20 22:47:28

I've rebased over #13180. I'm happy with the change to the search page.



---

archive/issue_comments_154936.json:
```json
{
    "body": "This applies cleanly for me on 5.5.rc0, so let's try again.\n\nFor patchbot:\n\nApply: trac_13064-finite_rings_doc-ts.patch, trac_13064-search.patch",
    "created_at": "2012-11-26T18:24:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154936",
    "user": "https://github.com/tscrim"
}
```

This applies cleanly for me on 5.5.rc0, so let's try again.

For patchbot:

Apply: trac_13064-finite_rings_doc-ts.patch, trac_13064-search.patch



---

archive/issue_comments_154937.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-02-07T08:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154937",
    "user": "https://github.com/ppurka"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_154938.json:
```json
{
    "body": "Sorry for sitting on this for so long. I have nothing else to add to this.",
    "created_at": "2013-02-07T08:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154938",
    "user": "https://github.com/ppurka"
}
```

Sorry for sitting on this for so long. I have nothing else to add to this.



---

archive/issue_comments_154939.json:
```json
{
    "body": "Thank you for doing the final review on this.\n\nBest,\n\nTravis",
    "created_at": "2013-02-07T14:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154939",
    "user": "https://github.com/tscrim"
}
```

Thank you for doing the final review on this.

Best,

Travis



---

archive/issue_events_035849.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-02-09T12:12:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/12892#event-35849"
}
```



---

archive/issue_comments_154940.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-02-09T12:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12892",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12892#issuecomment-154940",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
