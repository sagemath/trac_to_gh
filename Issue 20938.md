# Issue 20938: Set ARCHFLAGS environment variable - for Perl modules

archive/issues_020938.json:
```json
{
    "body": "CC:  vdelecroix jdemeyer embray vbraun tmonteil dimpase kcrisman\n\nTo make installing Perl modules easier on Mac OS X, we should set the ARCHFLAGS environment variable. This is to make sure that the output of \"perl -MExtUtils::Embed -e ldopts\" and \"perl -MExtUtils::Embed -e ccflags\" (picked up from system perl) do not contain -arch flags incompatible with our gcc.\n\nThis simplifies `perl_term_readline_gnu` (#20894), `polymake` (#20892), and makes installing `pypolymake` (#21170) as a pip package possible.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21175\n\n",
    "created_at": "2016-08-05T15:16:55Z",
    "labels": [
        "build",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Set ARCHFLAGS environment variable - for Perl modules",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20938",
    "user": "mkoeppe"
}
```
CC:  vdelecroix jdemeyer embray vbraun tmonteil dimpase kcrisman

To make installing Perl modules easier on Mac OS X, we should set the ARCHFLAGS environment variable. This is to make sure that the output of "perl -MExtUtils::Embed -e ldopts" and "perl -MExtUtils::Embed -e ccflags" (picked up from system perl) do not contain -arch flags incompatible with our gcc.

This simplifies `perl_term_readline_gnu` (#20894), `polymake` (#20892), and makes installing `pypolymake` (#21170) as a pip package possible.

Issue created by migration from https://trac.sagemath.org/ticket/21175





---

archive/issue_comments_289617.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-08-05T15:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289617",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_289618.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-05T15:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289618",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_289619.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-18T23:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289619",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_289620.json:
```json
{
    "body": "Needs review.",
    "created_at": "2016-08-18T23:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289620",
    "user": "mkoeppe"
}
```

Needs review.



---

archive/issue_comments_289621.json:
```json
{
    "body": "It looks OK on Linux; must it be tested on OSX too?",
    "created_at": "2016-08-26T12:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289621",
    "user": "dimpase"
}
```

It looks OK on Linux; must it be tested on OSX too?



---

archive/issue_comments_289622.json:
```json
{
    "body": "I have tested it on both platforms.",
    "created_at": "2016-08-26T13:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289622",
    "user": "mkoeppe"
}
```

I have tested it on both platforms.



---

archive/issue_comments_289623.json:
```json
{
    "body": "put in this, and then tried to install polymake on OSX, and got\n\n```\n[polymake-3.0r2] checking fink installation ... The Fink package system is a mandatory prerequisite to build and use polymake under MacOS.\n[polymake-3.0r2] Please refer to http://www.polymake.org/doku.php/mac for details and installation instructions.\n[polymake-3.0r2] If you already have Fink installed at a non-standard location, please specify it using option --with-fink\n[polymake-3.0r2] Error configuring Polymake\n```\n\nReally? Fink?",
    "created_at": "2016-08-26T16:02:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289623",
    "user": "dimpase"
}
```

put in this, and then tried to install polymake on OSX, and got

```
[polymake-3.0r2] checking fink installation ... The Fink package system is a mandatory prerequisite to build and use polymake under MacOS.
[polymake-3.0r2] Please refer to http://www.polymake.org/doku.php/mac for details and installation instructions.
[polymake-3.0r2] If you already have Fink installed at a non-standard location, please specify it using option --with-fink
[polymake-3.0r2] Error configuring Polymake
```

Really? Fink?



---

archive/issue_comments_289624.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-26T19:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289624",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_289625.json:
```json
{
    "body": "Thanks for catching this -- I killed the `--without-fink` by accident. Should work now.",
    "created_at": "2016-08-26T19:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289625",
    "user": "mkoeppe"
}
```

Thanks for catching this -- I killed the `--without-fink` by accident. Should work now.



---

archive/issue_comments_289626.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-27T12:30:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289626",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_289627.json:
```json
{
    "body": "OK, looks good now.",
    "created_at": "2016-08-27T12:30:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289627",
    "user": "dimpase"
}
```

OK, looks good now.



---

archive/issue_comments_289628.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-08-27T22:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289628",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_289629.json:
```json
{
    "body": "Reviewer name",
    "created_at": "2016-08-27T22:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289629",
    "user": "vbraun"
}
```

Reviewer name



---

archive/issue_comments_289630.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-08-28T05:33:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289630",
    "user": "mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_289631.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-08-30T06:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289631",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_289632.json:
```json
{
    "body": "Follow-up in #29408",
    "created_at": "2020-04-09T03:41:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20938",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20938#issuecomment-289632",
    "user": "mkoeppe"
}
```

Follow-up in #29408
