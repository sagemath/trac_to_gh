# Issue 19443: Add mock, pytest, tox optional packages

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2015-12-08 13:25:39




---

Comment by jdemeyer created at 2015-12-08 14:56:03

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2015-12-08 14:56:03

New commits:


---

Comment by vbraun created at 2015-12-27 16:45:11

Can't these all be installed via pip? Why not make them pip-type packages?


---

Comment by jdemeyer created at 2015-12-28 09:47:22

Replying to [comment:11 vbraun]:
> Can't these all be installed via pip? Why not make them pip-type packages?

Well, I would like to eventually change the build system to make such packages automatic dependencies if `SAGE_CHECK=yes`. Many Python packages have a test suite, but we don't run them because they require these extra packages.

Since `pip` packages bypass the usual `local/var/lib/sage/installed` system, they should not be used as dependencies of other packages.


---

Comment by vbraun created at 2015-12-28 11:35:00

A pip-type package could just update `local/var/lib/sage/installed` with the output of `pip list`

IMHO we are going to fight an uphill battle if we keep repackaging more and more of pypi for stuff that has no direct mathematical use. It just wastes our own resources that could be spent elsewhere. We should be relying more on pip, not less.


---

Comment by jdemeyer created at 2016-05-20 07:46:59

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2016-05-20 07:46:59

needs_work because of the old-style dependency lists. Let me know if anybody wants to review this, then I'll make the required changes.


---

Comment by fbissey created at 2016-05-20 11:38:44

I'll look, we need those for testing.


---

Comment by vbraun created at 2016-05-29 14:23:52

I think its a bit too much to make all testsuite dependencies de facto standard packages because they are dependencies of standard packages. 

How about requiring internet access for building with SAGE_CHECK=yes? Then all those pip packages could just be installed by a script-type `check_dependencies` package that just contains

```
if SAGE_CHECK
    pip install -r check-requirements.txt
```



---

Comment by mkoeppe created at 2020-01-13 00:50:41

Replying to [comment:16 vbraun]:
> How about requiring internet access for building with SAGE_CHECK=yes? Then all those pip packages could just be installed by a script-type `check_dependencies` package that just contains
> {{{
> if SAGE_CHECK
>     pip install -r check-requirements.txt
> }}}
I have a version of this in #28998.


---

Comment by mkoeppe created at 2020-06-06 05:39:36

Changing status from needs_work to needs_review.


---

Comment by mjo created at 2021-11-20 22:31:04

Changing status from needs_review to positive_review.


---

Comment by mjo created at 2021-11-20 22:31:04

Our python situation is unrecognizable from five years ago; this will need to be started from scratch if there's anything to be salvaged.


---

Comment by mkoeppe created at 2021-11-20 23:57:15

Resolution: invalid
