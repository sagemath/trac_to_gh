# Issue 19443: Add mock, pytest, tox optional packages

archive/issues_019443.json:
```json
{
    "body": "\n\nIssue created by migration from https://trac.sagemath.org/ticket/19680\n\n",
    "created_at": "2015-12-08T13:25:39Z",
    "labels": [
        "packages: optional",
        "major",
        "enhancement"
    ],
    "title": "Add mock, pytest, tox optional packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19443",
    "user": "jdemeyer"
}
```


Issue created by migration from https://trac.sagemath.org/ticket/19680





---

archive/issue_comments_267348.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-12-08T14:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19443#issuecomment-267348",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_267349.json:
```json
{
    "body": "New commits:",
    "created_at": "2015-12-08T14:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19443#issuecomment-267349",
    "user": "jdemeyer"
}
```

New commits:



---

archive/issue_comments_267350.json:
```json
{
    "body": "Can't these all be installed via pip? Why not make them pip-type packages?",
    "created_at": "2015-12-27T16:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19443#issuecomment-267350",
    "user": "vbraun"
}
```

Can't these all be installed via pip? Why not make them pip-type packages?



---

archive/issue_comments_267351.json:
```json
{
    "body": "Replying to [comment:11 vbraun]:\n> Can't these all be installed via pip? Why not make them pip-type packages?\n\nWell, I would like to eventually change the build system to make such packages automatic dependencies if `SAGE_CHECK=yes`. Many Python packages have a test suite, but we don't run them because they require these extra packages.\n\nSince `pip` packages bypass the usual `local/var/lib/sage/installed` system, they should not be used as dependencies of other packages.",
    "created_at": "2015-12-28T09:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19443#issuecomment-267351",
    "user": "jdemeyer"
}
```

Replying to [comment:11 vbraun]:
> Can't these all be installed via pip? Why not make them pip-type packages?

Well, I would like to eventually change the build system to make such packages automatic dependencies if `SAGE_CHECK=yes`. Many Python packages have a test suite, but we don't run them because they require these extra packages.

Since `pip` packages bypass the usual `local/var/lib/sage/installed` system, they should not be used as dependencies of other packages.



---

archive/issue_comments_267352.json:
```json
{
    "body": "A pip-type package could just update `local/var/lib/sage/installed` with the output of `pip list`\n\nIMHO we are going to fight an uphill battle if we keep repackaging more and more of pypi for stuff that has no direct mathematical use. It just wastes our own resources that could be spent elsewhere. We should be relying more on pip, not less.",
    "created_at": "2015-12-28T11:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19443#issuecomment-267352",
    "user": "vbraun"
}
```

A pip-type package could just update `local/var/lib/sage/installed` with the output of `pip list`

IMHO we are going to fight an uphill battle if we keep repackaging more and more of pypi for stuff that has no direct mathematical use. It just wastes our own resources that could be spent elsewhere. We should be relying more on pip, not less.



---

archive/issue_comments_267353.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-05-20T07:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19443#issuecomment-267353",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_267354.json:
```json
{
    "body": "needs_work because of the old-style dependency lists. Let me know if anybody wants to review this, then I'll make the required changes.",
    "created_at": "2016-05-20T07:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19443#issuecomment-267354",
    "user": "jdemeyer"
}
```

needs_work because of the old-style dependency lists. Let me know if anybody wants to review this, then I'll make the required changes.



---

archive/issue_comments_267355.json:
```json
{
    "body": "I'll look, we need those for testing.",
    "created_at": "2016-05-20T11:38:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19443#issuecomment-267355",
    "user": "fbissey"
}
```

I'll look, we need those for testing.



---

archive/issue_comments_267356.json:
```json
{
    "body": "I think its a bit too much to make all testsuite dependencies de facto standard packages because they are dependencies of standard packages. \n\nHow about requiring internet access for building with SAGE_CHECK=yes? Then all those pip packages could just be installed by a script-type `check_dependencies` package that just contains\n\n```\nif SAGE_CHECK\n    pip install -r check-requirements.txt\n```\n",
    "created_at": "2016-05-29T14:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19443#issuecomment-267356",
    "user": "vbraun"
}
```

I think its a bit too much to make all testsuite dependencies de facto standard packages because they are dependencies of standard packages. 

How about requiring internet access for building with SAGE_CHECK=yes? Then all those pip packages could just be installed by a script-type `check_dependencies` package that just contains

```
if SAGE_CHECK
    pip install -r check-requirements.txt
```




---

archive/issue_comments_267357.json:
```json
{
    "body": "Replying to [comment:16 vbraun]:\n> How about requiring internet access for building with SAGE_CHECK=yes? Then all those pip packages could just be installed by a script-type `check_dependencies` package that just contains\n> {{{\n> if SAGE_CHECK\n>     pip install -r check-requirements.txt\n> }}}\nI have a version of this in #28998.",
    "created_at": "2020-01-13T00:50:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19443#issuecomment-267357",
    "user": "mkoeppe"
}
```

Replying to [comment:16 vbraun]:
> How about requiring internet access for building with SAGE_CHECK=yes? Then all those pip packages could just be installed by a script-type `check_dependencies` package that just contains
> {{{
> if SAGE_CHECK
>     pip install -r check-requirements.txt
> }}}
I have a version of this in #28998.



---

archive/issue_comments_267358.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-06-06T05:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19443#issuecomment-267358",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_267359.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-11-20T22:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19443#issuecomment-267359",
    "user": "mjo"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_267360.json:
```json
{
    "body": "Our python situation is unrecognizable from five years ago; this will need to be started from scratch if there's anything to be salvaged.",
    "created_at": "2021-11-20T22:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19443#issuecomment-267360",
    "user": "mjo"
}
```

Our python situation is unrecognizable from five years ago; this will need to be started from scratch if there's anything to be salvaged.



---

archive/issue_comments_267361.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2021-11-20T23:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19443",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19443#issuecomment-267361",
    "user": "mkoeppe"
}
```

Resolution: invalid
