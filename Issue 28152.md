# Issue 28152: Support Singular ringorder column in term order

archive/issues_028152.json:
```json
{
    "body": "CC:  @saliola @antonleykin @mwageringel\n\nPresently, there is no way to construct a multi-variate polynomial ring based on a Singular ring with ring order with 'c' or 'C'. Singular ring order with 'c' or 'C' is useful if computation with modules over the ring is needed. \n\nThis ticket aims to support constructing base Singular ring with ring order with 'c' or 'C'.\n\nThis enhancement is mainly for developers.\n\nWith the patch, we have for instance:\n\n```\nsage: T = TermOrder('degrevlex(2),lex(3)')\nsage: P.<a,b,x,y,z> = PolynomialRing(QQ,order=T)\nsage: P._singular_()\npolynomial ring, over a field, global ordering\n// coefficients: QQ\n// number of vars : 5\n//        block   1 : ordering dp\n//                  : names    a b\n//        block   2 : ordering lp\n//                  : names    x y z\n//        block   3 : ordering C\nsage: T._singular_ringorder_column = 0\nsage: P.<a,b,x,y,z> = PolynomialRing(QQ,order=T)\nsage: P._singular_()\npolynomial ring, over a field, global ordering\n// coefficients: QQ\n// number of vars : 5\n//        block   1 : ordering C\n//        block   2 : ordering dp\n//                  : names    a b\n//        block   3 : ordering lp\n//                  : names    x y z\nsage: T._singular_ringorder_column = 1\nsage: P.<a,b,x,y,z> = PolynomialRing(QQ,order=T)\nsage: P._singular_()\npolynomial ring, over a field, global ordering\n// coefficients: QQ\n// number of vars : 5\n//        block   1 : ordering c\n//        block   2 : ordering dp\n//                  : names    a b\n//        block   3 : ordering lp\n//                  : names    x y z\nsage: T._singular_ringorder_column = 2\nsage: P.<a,b,x,y,z> = PolynomialRing(QQ,order=T)\nsage: P._singular_()\npolynomial ring, over a field, global ordering\n// coefficients: QQ\n// number of vars : 5\n//        block   1 : ordering dp\n//                  : names    a b\n//        block   2 : ordering C\n//        block   3 : ordering lp\n//                  : names    x y z\nsage: T._singular_ringorder_column = 3\nsage: P.<a,b,x,y,z> = PolynomialRing(QQ,order=T)\nsage: P._singular_()\npolynomial ring, over a field, global ordering\n// coefficients: QQ\n// number of vars : 5\n//        block   1 : ordering dp\n//                  : names    a b\n//        block   2 : ordering c\n//        block   3 : ordering lp\n//                  : names    x y z\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/28389\n\n",
    "created_at": "2019-08-23T06:46:17Z",
    "labels": [
        "component: basic arithmetic",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Support Singular ringorder column in term order",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28152",
    "user": "https://github.com/kwankyu"
}
```
CC:  @saliola @antonleykin @mwageringel

Presently, there is no way to construct a multi-variate polynomial ring based on a Singular ring with ring order with 'c' or 'C'. Singular ring order with 'c' or 'C' is useful if computation with modules over the ring is needed. 

This ticket aims to support constructing base Singular ring with ring order with 'c' or 'C'.

This enhancement is mainly for developers.

With the patch, we have for instance:

```
sage: T = TermOrder('degrevlex(2),lex(3)')
sage: P.<a,b,x,y,z> = PolynomialRing(QQ,order=T)
sage: P._singular_()
polynomial ring, over a field, global ordering
// coefficients: QQ
// number of vars : 5
//        block   1 : ordering dp
//                  : names    a b
//        block   2 : ordering lp
//                  : names    x y z
//        block   3 : ordering C
sage: T._singular_ringorder_column = 0
sage: P.<a,b,x,y,z> = PolynomialRing(QQ,order=T)
sage: P._singular_()
polynomial ring, over a field, global ordering
// coefficients: QQ
// number of vars : 5
//        block   1 : ordering C
//        block   2 : ordering dp
//                  : names    a b
//        block   3 : ordering lp
//                  : names    x y z
sage: T._singular_ringorder_column = 1
sage: P.<a,b,x,y,z> = PolynomialRing(QQ,order=T)
sage: P._singular_()
polynomial ring, over a field, global ordering
// coefficients: QQ
// number of vars : 5
//        block   1 : ordering c
//        block   2 : ordering dp
//                  : names    a b
//        block   3 : ordering lp
//                  : names    x y z
sage: T._singular_ringorder_column = 2
sage: P.<a,b,x,y,z> = PolynomialRing(QQ,order=T)
sage: P._singular_()
polynomial ring, over a field, global ordering
// coefficients: QQ
// number of vars : 5
//        block   1 : ordering dp
//                  : names    a b
//        block   2 : ordering C
//        block   3 : ordering lp
//                  : names    x y z
sage: T._singular_ringorder_column = 3
sage: P.<a,b,x,y,z> = PolynomialRing(QQ,order=T)
sage: P._singular_()
polynomial ring, over a field, global ordering
// coefficients: QQ
// number of vars : 5
//        block   1 : ordering dp
//                  : names    a b
//        block   2 : ordering c
//        block   3 : ordering lp
//                  : names    x y z
```



Issue created by migration from https://trac.sagemath.org/ticket/28389





---

archive/issue_comments_397115.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-08-23T06:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397115",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_397116.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-08-23T07:25:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397116",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_397117.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-08-23T07:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397117",
    "user": "https://github.com/kwankyu"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_397118.json:
```json
{
    "body": "what are these c/C orderings? I never heard of them...",
    "created_at": "2019-08-27T19:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397118",
    "user": "https://github.com/dimpase"
}
```

what are these c/C orderings? I never heard of them...



---

archive/issue_comments_397119.json:
```json
{
    "body": "Replying to [comment:5 dimpase]:\n> what are these c/C orderings? I never heard of them...\n\nLet R=k[x,y,z] and R<sup>3</sup> be a free module over R. Then an element of the free module is represented, in Singular, like\n\n(x, -y, x+z) = x*gen(1) - y*gen(2) + (x+z)*gen(3)\n\nThat is, gen(1), gen(2), gen(3) denotes the \"columns\" of the free module. On the other hand, an element of R is viewed as\n\nx<sup>3</sup>+z = (x<sup>3</sup>+z)*gen(1)\n\nby Singular. The ordering of monomials of a free module is determined by ordering of monomial of R like x, y, x+z, ... and ordering of generators like gen(1), gen(2), ...\n\nc/C ordering is ordering of the generators, and the position of c/C ordering in term order determine when to break ties by ordering of generators. TOP (term over position) and POT (position over term) are used to denote typical special cases. C denotes ascending order, and c denotes descending order.\n\nHence position of c/C ordering affects computations of Groebner bases in free modules over R. \n\nIf you compute only over R, c/C ordering doesn't matter. But if you start computing on free modules over R in Singular, it does. But currently Sage does not allow to specify the position of c/C ordering when you create a polynomial ring based on Singular. Typically you want POT or `(c,dp)` in Singular string.\n\nIf you start computing with free modules over the Singular ring underlying (or derived from by `_singular_`) Sage polynomial ring, then you want to control c/C ordering (the default is TOP, c/C ordering at the end in term order).\n\nThis is a developer thing. Hence I decided to make the handle `_singular_ringorder_column` an underlined attribute.",
    "created_at": "2019-08-28T01:13:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397119",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:5 dimpase]:
> what are these c/C orderings? I never heard of them...

Let R=k[x,y,z] and R<sup>3</sup> be a free module over R. Then an element of the free module is represented, in Singular, like

(x, -y, x+z) = x*gen(1) - y*gen(2) + (x+z)*gen(3)

That is, gen(1), gen(2), gen(3) denotes the "columns" of the free module. On the other hand, an element of R is viewed as

x<sup>3</sup>+z = (x<sup>3</sup>+z)*gen(1)

by Singular. The ordering of monomials of a free module is determined by ordering of monomial of R like x, y, x+z, ... and ordering of generators like gen(1), gen(2), ...

c/C ordering is ordering of the generators, and the position of c/C ordering in term order determine when to break ties by ordering of generators. TOP (term over position) and POT (position over term) are used to denote typical special cases. C denotes ascending order, and c denotes descending order.

Hence position of c/C ordering affects computations of Groebner bases in free modules over R. 

If you compute only over R, c/C ordering doesn't matter. But if you start computing on free modules over R in Singular, it does. But currently Sage does not allow to specify the position of c/C ordering when you create a polynomial ring based on Singular. Typically you want POT or `(c,dp)` in Singular string.

If you start computing with free modules over the Singular ring underlying (or derived from by `_singular_`) Sage polynomial ring, then you want to control c/C ordering (the default is TOP, c/C ordering at the end in term order).

This is a developer thing. Hence I decided to make the handle `_singular_ringorder_column` an underlined attribute.



---

archive/issue_comments_397120.json:
```json
{
    "body": "I don't understand how this is \"a developer thing\". For actually carrying out computations orderings are essential, and for different tasks the user might want to choose a different order. So it should not be hidden from the user.",
    "created_at": "2019-08-28T05:34:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397120",
    "user": "https://github.com/dimpase"
}
```

I don't understand how this is "a developer thing". For actually carrying out computations orderings are essential, and for different tasks the user might want to choose a different order. So it should not be hidden from the user.



---

archive/issue_comments_397121.json:
```json
{
    "body": "Replying to [comment:7 dimpase]:\n> I don't understand how this is \"a developer thing\". For actually carrying out computations orderings are essential, and for different tasks the user might want to choose a different order. So it should not be hidden from the user.\n\nNote that `_singular_ringorder_column` is an attribute of `TermOrder`.  A `TermOrder` object is to specify ordering of monomials of a multi-variate //polynomial ring// of Sage. For a (non-developer) user of `TermOrder`, an attribute that is concerned with ordering of monomials of //free modules over the underlying Singular ring// is irrelevant.\n\nIf someday we add a new class `ModuleTermOrder` for free modules over polynomial rings, then it would internally set `_singular_ringorder_column` of the `TermOrder` of the polynomial ring. Then a user is just concerned with the `ModuleTermOrder` object, but not directly with _singular_ringorder_column`.",
    "created_at": "2019-08-28T07:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397121",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:7 dimpase]:
> I don't understand how this is "a developer thing". For actually carrying out computations orderings are essential, and for different tasks the user might want to choose a different order. So it should not be hidden from the user.

Note that `_singular_ringorder_column` is an attribute of `TermOrder`.  A `TermOrder` object is to specify ordering of monomials of a multi-variate //polynomial ring// of Sage. For a (non-developer) user of `TermOrder`, an attribute that is concerned with ordering of monomials of //free modules over the underlying Singular ring// is irrelevant.

If someday we add a new class `ModuleTermOrder` for free modules over polynomial rings, then it would internally set `_singular_ringorder_column` of the `TermOrder` of the polynomial ring. Then a user is just concerned with the `ModuleTermOrder` object, but not directly with _singular_ringorder_column`.



---

archive/issue_comments_397122.json:
```json
{
    "body": "As a matter of fact, we're interested in getting `ChainComplex` functionality for modules over polynomial rings (Macaulay2 can do such computations).\n\nBut even without `ModuleTermOrder`, but with `c/C`, one would be able to do computations in modules over polynomial rings, no?",
    "created_at": "2019-08-28T08:30:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397122",
    "user": "https://github.com/dimpase"
}
```

As a matter of fact, we're interested in getting `ChainComplex` functionality for modules over polynomial rings (Macaulay2 can do such computations).

But even without `ModuleTermOrder`, but with `c/C`, one would be able to do computations in modules over polynomial rings, no?



---

archive/issue_comments_397123.json:
```json
{
    "body": "Replying to [comment:9 dimpase]:\n> As a matter of fact, we're interested in getting `ChainComplex` functionality for modules over polynomial rings (Macaulay2 can do such computations).\n\nNice. Then you will need this branch :-)\n\n> But even without `ModuleTermOrder`, but with `c/C`, one would be able to do computations in modules over polynomial rings, no?\n\nI just checked this:\n\n\n```\nsage: R.<x,y,z> = PolynomialRing(QQ)\nsage: R\nMultivariate Polynomial Ring in x, y, z over Rational Field\nsage: type(R)\n<class 'sage.rings.polynomial.multi_polynomial_libsingular.MPolynomialRing_libsingular'>\nsage: M = R**3\nsage: M\nAmbient free module of rank 3 over the integral domain Multivariate Polynomial Ring in x, y, z over Rational Field\nsage: type(M)\n<class 'sage.modules.free_module.FreeModule_ambient_domain_with_category'>\n```\n\n\nApparently sage doesn't have  a `FreeModule_libsingular`. (If it had, then there would also be `ModuleTermOrder`) \n\nSo sage doesn't have functionality for modules over polynomial rings like singular or macaulay2.\n\nBut sage has singular interface, and we can do\n\n```\nsage: I = R.ideal([x+y,x-y])\nsage: Ising = I._singular_()\nsage: Ising.syz()\n-x+y,\nx+y\nsage: _.sage()\n[-x + y]\n[ x + y]\n```\n\n\nand the computation above would be affected by `c/C` ordering.\n\n\n```\nsage: R._singular_()\npolynomial ring, over a field, global ordering\n// coefficients: QQ\n// number of vars : 3\n//        block   1 : ordering dp\n//                  : names    x y z\n//        block   2 : ordering C\n```\n",
    "created_at": "2019-08-28T09:00:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397123",
    "user": "https://github.com/kwankyu"
}
```

Replying to [comment:9 dimpase]:
> As a matter of fact, we're interested in getting `ChainComplex` functionality for modules over polynomial rings (Macaulay2 can do such computations).

Nice. Then you will need this branch :-)

> But even without `ModuleTermOrder`, but with `c/C`, one would be able to do computations in modules over polynomial rings, no?

I just checked this:


```
sage: R.<x,y,z> = PolynomialRing(QQ)
sage: R
Multivariate Polynomial Ring in x, y, z over Rational Field
sage: type(R)
<class 'sage.rings.polynomial.multi_polynomial_libsingular.MPolynomialRing_libsingular'>
sage: M = R**3
sage: M
Ambient free module of rank 3 over the integral domain Multivariate Polynomial Ring in x, y, z over Rational Field
sage: type(M)
<class 'sage.modules.free_module.FreeModule_ambient_domain_with_category'>
```


Apparently sage doesn't have  a `FreeModule_libsingular`. (If it had, then there would also be `ModuleTermOrder`) 

So sage doesn't have functionality for modules over polynomial rings like singular or macaulay2.

But sage has singular interface, and we can do

```
sage: I = R.ideal([x+y,x-y])
sage: Ising = I._singular_()
sage: Ising.syz()
-x+y,
x+y
sage: _.sage()
[-x + y]
[ x + y]
```


and the computation above would be affected by `c/C` ordering.


```
sage: R._singular_()
polynomial ring, over a field, global ordering
// coefficients: QQ
// number of vars : 3
//        block   1 : ordering dp
//                  : names    x y z
//        block   2 : ordering C
```




---

archive/issue_comments_397124.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-09-16T07:22:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397124",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_397125.json:
```json
{
    "body": "Changing component from basic arithmetic to commutative algebra.",
    "created_at": "2019-10-22T08:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397125",
    "user": "https://github.com/dimpase"
}
```

Changing component from basic arithmetic to commutative algebra.



---

archive/issue_comments_397126.json:
```json
{
    "body": "I totally forgot about this ticket while at IMA, cf. #28573",
    "created_at": "2019-10-22T08:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397126",
    "user": "https://github.com/dimpase"
}
```

I totally forgot about this ticket while at IMA, cf. #28573



---

archive/issue_comments_397127.json:
```json
{
    "body": "Should we merge this as it is now ? the patchbot is green.",
    "created_at": "2020-01-04T20:21:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397127",
    "user": "https://github.com/fchapoton"
}
```

Should we merge this as it is now ? the patchbot is green.



---

archive/issue_comments_397128.json:
```json
{
    "body": "Thanks for the reminder. I keep forgetting about reviewing these things, sorry.",
    "created_at": "2020-01-05T04:55:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397128",
    "user": "https://github.com/dimpase"
}
```

Thanks for the reminder. I keep forgetting about reviewing these things, sorry.



---

archive/issue_comments_397129.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-01-05T04:55:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397129",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_397130.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-01-09T23:44:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28152#issuecomment-397130",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
