# Issue 31583: Fix pickling of normaliz representation objects

archive/issues_031583.json:
```json
{
    "body": "CC:  jipilab mkoeppe vbraun\n\nThe normaliz cone is recreated after loading a saved normaliz polyhedron. Unfortunatly, it is recreated from the representation objects and not from the corresponding vectors. This leads to circular dependencies that are not always successfully resolved:\n\n\n```\nsage: P = polytopes.cube(backend='normaliz')                                    \nsage: v = P.Vrepresentation()[0]                                                \nsage: v1 = loads(v.dumps())                                                     \nTraceback (most recent call last)\n...\n~/Applications/sage/local/lib/python3.8/site-packages/sage/geometry/polyhedron/representation.py in __getitem__(self, i)\n     83             2\n     84         \"\"\"\n---> 85         return self._vector[i]\n     86 \n     87     def __hash__(self):\n\nAttributeError: 'Vertex' object has no attribute '_vector'\n```\n\n\nWe fix this by initialization of the cone from the vectors instead.\n\nIssue created by migration from https://trac.sagemath.org/ticket/31820\n\n",
    "created_at": "2021-05-12T13:48:07Z",
    "labels": [
        "geometry",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Fix pickling of normaliz representation objects",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31583",
    "user": "@kliem"
}
```
CC:  jipilab mkoeppe vbraun

The normaliz cone is recreated after loading a saved normaliz polyhedron. Unfortunatly, it is recreated from the representation objects and not from the corresponding vectors. This leads to circular dependencies that are not always successfully resolved:


```
sage: P = polytopes.cube(backend='normaliz')                                    
sage: v = P.Vrepresentation()[0]                                                
sage: v1 = loads(v.dumps())                                                     
Traceback (most recent call last)
...
~/Applications/sage/local/lib/python3.8/site-packages/sage/geometry/polyhedron/representation.py in __getitem__(self, i)
     83             2
     84         """
---> 85         return self._vector[i]
     86 
     87     def __hash__(self):

AttributeError: 'Vertex' object has no attribute '_vector'
```


We fix this by initialization of the cone from the vectors instead.

Issue created by migration from https://trac.sagemath.org/ticket/31820





---

archive/issue_comments_451289.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-05-12T13:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31583#issuecomment-451289",
    "user": "@kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_451290.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-05-12T13:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31583#issuecomment-451290",
    "user": "@kliem"
}
```

New commits:



---

archive/issue_comments_451291.json:
```json
{
    "body": "Changing keywords from \"\" to \"normaliz, pickling\".",
    "created_at": "2021-05-12T13:51:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31583#issuecomment-451291",
    "user": "@kliem"
}
```

Changing keywords from "" to "normaliz, pickling".



---

archive/issue_comments_451292.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-05-12T15:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31583#issuecomment-451292",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_451293.json:
```json
{
    "body": "Thank you.",
    "created_at": "2021-05-12T20:58:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31583#issuecomment-451293",
    "user": "@kliem"
}
```

Thank you.



---

archive/issue_comments_451294.json:
```json
{
    "body": "Apparently this was merged as part of #31821.",
    "created_at": "2021-07-24T18:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31583#issuecomment-451294",
    "user": "mkoeppe"
}
```

Apparently this was merged as part of #31821.



---

archive/issue_comments_451295.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-24T18:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31583#issuecomment-451295",
    "user": "mkoeppe"
}
```

Resolution: fixed
