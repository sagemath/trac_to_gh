# Issue 20891: Improve support for comparisons in plain Python modules

archive/issues_020891.json:
```json
{
    "body": "CC:  chapoton vdelecroix\n\nThis is meant to improve the way how plain Python modules can use `_richcmp_`.\n\nWe need access to the CPython function `PyObject_RichCompare()` which \u2014as far as I know\u2014 is not exposed by Python. So we add a Python interface to `PyObject_RichCompare()` called `richcmp()`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21128\n\n",
    "created_at": "2016-07-29T14:40:31Z",
    "labels": [
        "coercion",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Improve support for comparisons in plain Python modules",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20891",
    "user": "jdemeyer"
}
```
CC:  chapoton vdelecroix

This is meant to improve the way how plain Python modules can use `_richcmp_`.

We need access to the CPython function `PyObject_RichCompare()` which —as far as I know— is not exposed by Python. So we add a Python interface to `PyObject_RichCompare()` called `richcmp()`.

Issue created by migration from https://trac.sagemath.org/ticket/21128





---

archive/issue_comments_288837.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-07-29T14:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288837",
    "user": "jdemeyer"
}
```

New commits:



---

archive/issue_comments_288838.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-29T14:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288838",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_288839.json:
```json
{
    "body": "The function `py_rich_to_bool` had some documentation that `richcmp` lacks. And making `py_rich_to_bool` a deprecated alias of `richcmp` would be good.",
    "created_at": "2016-07-29T18:19:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288839",
    "user": "dmuthiah"
}
```

The function `py_rich_to_bool` had some documentation that `richcmp` lacks. And making `py_rich_to_bool` a deprecated alias of `richcmp` would be good.



---

archive/issue_comments_288840.json:
```json
{
    "body": "Replying to [comment:3 dmuthiah]:\n> And making `py_rich_to_bool` a deprecated alias of `richcmp` would be good.\n\nThe function `py_rich_to_bool` is not a public function, so I don't think we should do the trouble of deprecating it. But if you insist, I will do that.",
    "created_at": "2016-07-30T07:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288840",
    "user": "jdemeyer"
}
```

Replying to [comment:3 dmuthiah]:
> And making `py_rich_to_bool` a deprecated alias of `richcmp` would be good.

The function `py_rich_to_bool` is not a public function, so I don't think we should do the trouble of deprecating it. But if you insist, I will do that.



---

archive/issue_comments_288841.json:
```json
{
    "body": "It is not clear to me what is a public function. `py_rich_to_bool` is exactly the kind of function that is helpful for external Sage modules. Hence a deprecation seems reasonable to me.",
    "created_at": "2016-07-30T17:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288841",
    "user": "vdelecroix"
}
```

It is not clear to me what is a public function. `py_rich_to_bool` is exactly the kind of function that is helpful for external Sage modules. Hence a deprecation seems reasonable to me.



---

archive/issue_comments_288842.json:
```json
{
    "body": "Replying to [comment:3 dmuthiah]:\n> The function `py_rich_to_bool` had some documentation that `richcmp` lacks. And making `py_rich_to_bool` a deprecated alias of `richcmp` would be good.\n\n`py_rich_to_bool` is replaced by the existing function `rich_to_bool` and no documentation is lost. The function `richcmp()` is a new function analogous to `cmp()`.",
    "created_at": "2016-08-01T08:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288842",
    "user": "jdemeyer"
}
```

Replying to [comment:3 dmuthiah]:
> The function `py_rich_to_bool` had some documentation that `richcmp` lacks. And making `py_rich_to_bool` a deprecated alias of `richcmp` would be good.

`py_rich_to_bool` is replaced by the existing function `rich_to_bool` and no documentation is lost. The function `richcmp()` is a new function analogous to `cmp()`.



---

archive/issue_comments_288843.json:
```json
{
    "body": "Looks good.\n\nNevertheless, I would also prefer a deprecation for `py_rich_to_bool`.",
    "created_at": "2016-08-01T09:39:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288843",
    "user": "chapoton"
}
```

Looks good.

Nevertheless, I would also prefer a deprecation for `py_rich_to_bool`.



---

archive/issue_comments_288844.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-01T10:21:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288844",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_288845.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-01T18:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288845",
    "user": "vdelecroix"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_288846.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-08-07T20:00:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288846",
    "user": "vbraun"
}
```

Resolution: fixed
