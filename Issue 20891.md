# Issue 20891: Improve support for comparisons in plain Python modules

archive/issues_020891.json:
```json
{
    "body": "CC:  @fchapoton @videlec\n\nThis is meant to improve the way how plain Python modules can use `_richcmp_`.\n\nWe need access to the CPython function `PyObject_RichCompare()` which \u2014as far as I know\u2014 is not exposed by Python. So we add a Python interface to `PyObject_RichCompare()` called `richcmp()`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21128\n\n",
    "created_at": "2016-07-29T14:40:31Z",
    "labels": [
        "component: coercion"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Improve support for comparisons in plain Python modules",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20891",
    "user": "https://github.com/jdemeyer"
}
```
CC:  @fchapoton @videlec

This is meant to improve the way how plain Python modules can use `_richcmp_`.

We need access to the CPython function `PyObject_RichCompare()` which —as far as I know— is not exposed by Python. So we add a Python interface to `PyObject_RichCompare()` called `richcmp()`.

Issue created by migration from https://trac.sagemath.org/ticket/21128





---

archive/issue_comments_288508.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-07-29T14:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288508",
    "user": "https://github.com/jdemeyer"
}
```

New commits:



---

archive/issue_comments_288509.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-29T14:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288509",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_288510.json:
```json
{
    "body": "The function `py_rich_to_bool` had some documentation that `richcmp` lacks. And making `py_rich_to_bool` a deprecated alias of `richcmp` would be good.",
    "created_at": "2016-07-29T18:19:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288510",
    "user": "https://trac.sagemath.org/admin/accounts/users/dmuthiah"
}
```

The function `py_rich_to_bool` had some documentation that `richcmp` lacks. And making `py_rich_to_bool` a deprecated alias of `richcmp` would be good.



---

archive/issue_comments_288511.json:
```json
{
    "body": "Replying to [comment:3 dmuthiah]:\n> And making `py_rich_to_bool` a deprecated alias of `richcmp` would be good.\n\nThe function `py_rich_to_bool` is not a public function, so I don't think we should do the trouble of deprecating it. But if you insist, I will do that.",
    "created_at": "2016-07-30T07:55:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288511",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:3 dmuthiah]:
> And making `py_rich_to_bool` a deprecated alias of `richcmp` would be good.

The function `py_rich_to_bool` is not a public function, so I don't think we should do the trouble of deprecating it. But if you insist, I will do that.



---

archive/issue_comments_288512.json:
```json
{
    "body": "It is not clear to me what is a public function. `py_rich_to_bool` is exactly the kind of function that is helpful for external Sage modules. Hence a deprecation seems reasonable to me.",
    "created_at": "2016-07-30T17:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288512",
    "user": "https://github.com/videlec"
}
```

It is not clear to me what is a public function. `py_rich_to_bool` is exactly the kind of function that is helpful for external Sage modules. Hence a deprecation seems reasonable to me.



---

archive/issue_comments_288513.json:
```json
{
    "body": "Replying to [comment:3 dmuthiah]:\n> The function `py_rich_to_bool` had some documentation that `richcmp` lacks. And making `py_rich_to_bool` a deprecated alias of `richcmp` would be good.\n\n`py_rich_to_bool` is replaced by the existing function `rich_to_bool` and no documentation is lost. The function `richcmp()` is a new function analogous to `cmp()`.",
    "created_at": "2016-08-01T08:15:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288513",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:3 dmuthiah]:
> The function `py_rich_to_bool` had some documentation that `richcmp` lacks. And making `py_rich_to_bool` a deprecated alias of `richcmp` would be good.

`py_rich_to_bool` is replaced by the existing function `rich_to_bool` and no documentation is lost. The function `richcmp()` is a new function analogous to `cmp()`.



---

archive/issue_comments_288514.json:
```json
{
    "body": "Looks good.\n\nNevertheless, I would also prefer a deprecation for `py_rich_to_bool`.",
    "created_at": "2016-08-01T09:39:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288514",
    "user": "https://github.com/fchapoton"
}
```

Looks good.

Nevertheless, I would also prefer a deprecation for `py_rich_to_bool`.



---

archive/issue_comments_288515.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-01T10:21:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288515",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_288516.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-01T18:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288516",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_019815.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-07T20:00:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20891#event-19815"
}
```



---

archive/issue_comments_288517.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-08-07T20:00:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20891#issuecomment-288517",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
