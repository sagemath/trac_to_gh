# Issue 24125: numpy fails to build

Issue created by migration from https://trac.sagemath.org/ticket/24362

Original creator: tmonteil

Original creation time: 2017-12-10 13:45:35

CC:  jdemeyer fbissey

numpy fails to build on a 40-core 64bit PC running Debian 8. I used sage's gcc (with `export SAGE_INSTALL_GCC='yes'`). Log attached.



---

Attachment

Unfortunately, I can reproduce the issue with `make -j1` (i was secretly hoping a race condition).


---

Comment by git created at 2017-12-10 22:55:23

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tmonteil created at 2017-12-10 22:56:04

Apparently, i found the culprit: MKL blas was installed on the computer, but unsetting `MKL` is not enough, we also have to unset `MKLROOT`.
----
New commits:


---

Comment by fbissey created at 2017-12-10 23:15:37

Yes numpy is stupid that way. It knows better than your settings unless you disable any other possibility.


---

Comment by tmonteil created at 2017-12-11 11:34:42

Changing status from new to needs_review.


---

Comment by tmonteil created at 2017-12-11 11:34:42

make ptestlong leads to "All tests passed!"


---

Comment by fbissey created at 2017-12-11 20:44:44

Changing status from needs_review to positive_review.


---

Comment by fbissey created at 2017-12-11 20:44:44

Looks good to me.


---

Comment by vbraun created at 2017-12-16 09:49:21

Resolution: fixed
