# Issue 13347: Autotools spkg does not build correctly on systems without autotools installed

Issue created by migration from Trac.

Original creator: jpflori

Original creation time: 2012-09-29 22:36:01

Assignee: tbd

CC:  jdemeyer

It seems that the experimental spkg does not build correctly on systems without autotools installed.
Indeed it seems that recent version of autoconf want a version of automake already installed and recent version of automake want a recent version of autoconf installed.

autoconf builds seem to fail from 2.62 onward with

```
No version of automake has been installed yet
```

As a consequence, automake fails from 1.11 onward:

```
configure: error: Autoconf 2.61a-341 or better is required.
```

(the needed versions increases with later versions of automake)

Moreover the above error are not detected.

As cygwin is quite slow for these kind of stuff, the spkg-install script did not finish yet, but I assume no second pass is performed.

One might expect that someone wanting this spkg for development would have a system wide install, but I did not on the windows install I sometimes use for Sage on Cygwin coding.
And fixing this does not seem horribly complicated.


---

Comment by jdemeyer created at 2012-09-30 09:06:07

I propose to close this as invalid because it is certainly not true that the autotools spkg requires system-wide autotools already installed.  The spkg is clever enough to use it own previously-built autotools.  The assumption

```
I assume no second pass is performed.
```

is false.


---

Comment by jdemeyer created at 2012-09-30 09:06:07

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2012-09-30 09:16:48

(that being said, I agree that proper dependency checking in the `autotools` spkg would be better)


---

Comment by jpflori created at 2012-09-30 10:52:41

Ok, I had a proper look at the spkg-install script and I guess the point of the "brute-force" multiple phase loop is about this.It is just that everything is so slow on Cygwin for that kind of things that I was too bored to really think about it.
And indeed, as you mention here and in the script a proper dependency check would be nicer and could speed up things a little?
Anyway, sorry about the noise, I'll put this as positive review and let you close the ticket as won't fix/duplicate.

By the way, the build did not finish because Windows decided to restart in the middle of the night for updates, and then the memory got exhausted...
Anyway I'll use your spkg form linux where everything just works.


---

Comment by jpflori created at 2012-09-30 10:52:41

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2012-10-01 19:12:42

I added proper dependency checking to the autotools spkg at #13557, it needs review.


---

Comment by jdemeyer created at 2012-10-03 14:46:34

Resolution: invalid
