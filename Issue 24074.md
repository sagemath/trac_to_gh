# Issue 24074: fix algdep when it finds a constant polynomial

Issue created by migration from Trac.

Original creator: nbruin

Original creation time: 2017-12-01 12:03:38

This problem:

```
sage: algdep(CC(-1)^(1/3),1)
ValueError: min() arg is an empty sequence
```

It should just return some bogus polynomial of degree 1:

```
sage: algdep(CC(-1)^(1/7),1)
x - 1
```



---

Comment by nbruin created at 2017-12-01 12:12:24

New commits:


---

Comment by nbruin created at 2017-12-01 12:12:24

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-12-01 12:48:25

Wouldn't it be better to raise an exception in this case instead of returning a bogus polynomial?


---

Comment by nbruin created at 2017-12-01 14:17:21

Replying to [comment:3 jdemeyer]:
> Wouldn't it be better to raise an exception in this case instead of returning a bogus polynomial?

It's not actually a bogus polynomial. We just choose the next vector in the LLL-reduced basis. So I think it is the "best" irreducible polynomial that comes out of the problem when the "best" polynomial of degree at most d turns out to be a constant polynomial.


---

Comment by jdemeyer created at 2017-12-01 15:50:56

Replying to [comment:4 nbruin]:
> It's not actually a bogus polynomial. We just choose the next vector in the LLL-reduced basis. So I think it is the "best" irreducible polynomial that comes out of the problem when the "best" polynomial of degree at most d turns out to be a constant polynomial.

It is true that your answer is the best possible, but it is still really really bad. So it looks pretty meaningless to return that.

If the best polynomial which has `z` as a zero is a constant polynomial, it really means that there is no polynomial which comes close to having `z` as a zero. At least it violates the expectation of `algdep`.


---

Comment by nbruin created at 2017-12-01 16:32:01

Replying to [comment:5 jdemeyer]:
> If the best polynomial which has `z` as a zero is a constant polynomial, it really means that there is no polynomial which comes close to having `z` as a zero. At least it violates the expectation of `algdep`.

It doesn't seem to be that bad. With the fix here we get:

```
sage: [(algdep(10*CC(-1)^(n/7),1),round((10*CC(-1)^(n/7)).real_part())) for n in range(10)]
[(x - 10, 10),
 (x - 9, 9),
 (x - 6, 6),
 (x - 2, 2),
 (x + 2, -2),
 (x + 6, -6),
 (x + 9, -9),
 (x + 10, -10),
 (x + 9, -9),
 (x + 6, -6)]
```

without the fix we get a few of those answers already, so the fix does seem to make algdep behave more consistently.

Degree 1 polynomials over ZZ are of course a little strange because their roots don't lie dense in CC, so the LLL problem gives vectors with surprisingly small coefficients evn when the fit is not very good.


---

Comment by jdemeyer created at 2017-12-04 08:42:32

I'm not convinced, but OK...


---

Comment by jdemeyer created at 2017-12-04 08:42:32

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-12-13 17:37:34

Resolution: fixed
