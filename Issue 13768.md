# Issue 13768: Implement the inverse of the method area_dinv_to_bounce_area_map in dyck_word.py

Issue created by migration from https://trac.sagemath.org/ticket/13972

Original creator: zabrocki

Original creation time: 2013-01-19 12:25:14

Assignee: zabrocki

CC:  dorota@yorku.ca stumpc5

Keywords: dyck_words

In ticket #13550 we implemented Haglund's map which sends dinv/area to area/bounce but did not implement the inverse.  This ticket adds the method bounce_area_to_area_dinv_map to dyck_word.py.


---

Comment by zabrocki created at 2013-01-19 13:25:08

Changing status from new to needs_review.


---

Comment by zabrocki created at 2013-01-19 15:17:29

I restored the code for `area_dinv_to_bounce_area_map` because of the following timing tests.
Original:

```
sage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(8)]') 
5 loops, best of 3: 62.3 ms per loop
sage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(9)]') 
5 loops, best of 3: 220 ms per loop
sage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(10)]')
5 loops, best of 3: 793 ms per loop
```

My version:

```
sage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(8)]')
5 loops, best of 3: 82.2 ms per loop
sage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(9)]')
5 loops, best of 3: 303 ms per loop
sage: timeit('[D.area_dinv_to_bounce_area_map() for D in DyckWords(10)]')
5 loops, best of 3: 1.1 s per loop
```

The difference is probably due to the fact that my version had to call `to_area_sequence` and then output the `DyckWord` using the area sequence that it constructed.


---

Attachment

I just figured a way to speed up `bounce_area_to_area_dinv_map` based on my last comment.  Its not a major difference, but it helps.


---

Comment by stumpc5 created at 2013-01-20 10:19:58

Replying to [comment:1 zabrocki]:

Hi Mike,

I am happy with the patch and give it a positive review once the patchbot is happy as well. The only suggested change would be: could you add a combinatorial decorator, so we can use this map in the statistic finder?

Cheers, Christian


---

Comment by zabrocki created at 2013-01-20 13:45:38

Hi Christian,
Doesn't that require #11641 to add combinatorial decorator?  What is the status of that patch?   I looked at the patch and it seems that (a) it needs a review (b) it doesn't have most of the combinatorial decorators that were there before.
-Mike


---

Comment by DorotaMazur created at 2013-01-20 14:06:06

Hi Mike, 

I agree with Christian. 
It passed all the tests and the documentation also seems ok.
Dorota


---

Comment by DorotaMazur created at 2013-01-21 20:58:03

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2013-01-21 21:14:12

Please write your real names in the Author resp. Reviewer fields.


---

Comment by stumpc5 created at 2013-01-21 21:18:32

Replying to [comment:5 zabrocki]:
> Doesn't that require #11641 to add combinatorial decorator?

Hi Mike (sorry for the delay...),

That's right, I was somewhat loosing track of the tickets and thought that #11641 was merged in in some 5.6 release.

+1 for the positive review...

Replying to [comment:8 jdemeyer]:
> Please write your real names in the Author resp. Reviewer fields.

I was actually doing that while you were writing this message...

Christian


---

Comment by jdemeyer created at 2013-01-25 13:08:03

Resolution: fixed
