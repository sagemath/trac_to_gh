# Issue 33108: configure --with-system-standard-packages={force,yes,no}

Issue created by migration from https://trac.sagemath.org/ticket/33345

Original creator: mkoeppe

Original creation time: 2022-02-15 00:52:41

CC:  dimpase jhpalmieri @tobiasdiez slabbe slelievre

This new option sets a default for all standard packages.

To build all standard packages (except gcc) from SPKG, use `configure --with-system-standard-packages=no`.

To require all standard packages to be present in the system, use `configure --with-system-standard-packages=force`. (This is for #30845.)


---

Comment by mkoeppe created at 2022-02-15 01:02:56

New commits:


---

Comment by git created at 2022-02-15 01:11:23

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2022-02-15 01:53:41

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-02-15 02:40:02

Changing status from needs_review to needs_work.


---

Comment by git created at 2022-02-15 04:25:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-02-15 04:27:18

Changing status from needs_work to needs_review.


---

Comment by git created at 2022-02-15 05:15:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dimpase created at 2022-02-15 06:15:42

Just to clarify, is this for all standard packages, including these without `spkg-configure.m4` ?


---

Comment by mkoeppe created at 2022-02-15 06:18:31

Only for those standard packages for which the option `--with-system-...` exists, i.e., the ones with `spkg-configure.m4`.


---

Comment by jhpalmieri created at 2022-02-16 18:27:25

I guess this isn't really a question for this ticket; if you know of a better place, please point me there, but anyway: when I run `./configure --help`, I see

```
...
Optional Features:
...
  --enable-bliss={no|if_installed (default)|yes}
                          enable build and use of the optional package bliss: Computing
                          automorphism groups and canonical forms of graphs
                          * package info: ./sage -info bliss
  --disable-bliss         disable build and uninstall if previously installed by Sage in PREFIX;
                          same as --enable-bliss=no
...
  --enable-sagemath_objects={no|if_installed (default)|yes}
                          enable build and use of the experimental package
                          ============================================================================================================
                          * package info: ./sage -info sagemath_objects
...
Optional Packages:
...
  --with-system-brial={no|yes (default)|force (exit with an error if no usable version is found)}
                          detect and use an existing system brial
...
```

I guess I have more than one question:
- `bliss`, for example, is an optional package, but it's listed in the "Optional Features" section of the help message. Why?
- What's up with all of the "=" in `--enable-sagemath-objects`?
- `brial`, for example, is a standard package but it's listed in the "Optional Packages" section. Why?

I noticed this when looking at the help message for `--with-system-standard-packages`, which says "default setting for all standard package except gcc". This doesn't sound quite right to me. Maybe "provide default setting for ..."?

This is all pretty low priority because I don't know if anyone actually looks at this help message in any detail; I tend to do `./configure --help | grep <whatever>`, so I miss the organizational scheme anyway.


---

Comment by mkoeppe created at 2022-02-16 18:48:08

"Optional Features" is just autoconf's section for all `--enable/disable` options
and "Optional Packages" is the section for all `--with` options. This cannot be changed.


---

Comment by git created at 2022-02-16 18:50:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2022-02-16 18:55:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-02-16 18:56:24

Replying to [comment:20 jhpalmieri]:
> - What's up with all of the "=" in `--enable-sagemath-objects`?

Thanks for spotting this, fixed now


---

Comment by jhpalmieri created at 2022-02-16 19:47:12

Maybe I don't understand what this is supposed to do. I did `brew uninstall singular` and then `./configure --with-system-standard-packages=force`. I didn't get an error (or if so it wasn't obvious, and `echo $?` returned 0), but instead the usual message:

```
checking for the package system in use... homebrew
configure:

    hint: installing the following system packages, if not
    already present, is recommended and may avoid having to
    build them (though some may have to be built anyway):

      $ brew install singular
```

Same if I do `brew uninstall cmake`.


---

Comment by mkoeppe created at 2022-02-16 19:56:37

`config.log` please


---

Attachment


---

Comment by mkoeppe created at 2022-02-16 20:01:49

Replying to [comment:25 jhpalmieri]:
> Same if I do `brew uninstall cmake`.

Indeed, when I try this here, I see

```
cmake-3.21.0:                                no suitable system package; this is an error
```

but no error is actually issued. I'll fix this.


---

Comment by mkoeppe created at 2022-02-16 20:01:49

Changing status from needs_review to needs_work.


---

Comment by git created at 2022-02-18 05:36:42

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
