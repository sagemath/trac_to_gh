# Issue 13143: Clean up devel/sage/MANIFEST.in

Issue created by migration from https://trac.sagemath.org/ticket/13315

Original creator: jdemeyer

Original creation time: 2012-07-31 17:42:06

Assignee: tbd

There are some obvious improvement and simplifications to be done to `devel/sage/MANIFEST.in`.


---

Comment by jdemeyer created at 2012-07-31 21:11:13

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2012-08-01 16:34:39

I tested this patch by creating a new sdist (starting from sage-5.2), and these are the only differences in files being added or not (this is the diff of `ls -a1RF` output):

```diff
--- sage-5.2.ls 2012-08-01 18:31:34.000000000 +0200
+++ sage-5.2.trac13315.ls       2012-08-01 18:31:39.000000000 +0200
@@ -30,6 +30,7 @@
 branch
 branch.cache
 branchheads.cache
+cache/
 dirstate
 hgrc
 last-message.txt
@@ -41,6 +42,12 @@
 undo.desc
 undo.dirstate

+./.hg/cache:
+./
+../
+branchheads
+tags
+
 ./.hg/store:
 ./
 ../
@@ -49,6 +56,10 @@
 00manifest.d
 00manifest.i
 data/
+fncache
+phaseroots
+undo
+undo.phaseroots

 ./.hg/store/data:
 ./
@@ -5178,7 +5189,6 @@
 ./c_lib:
 ./
 ../
-.sconsign.dblite
 SConstruct
 include/
 src/
```



---

Comment by jhpalmieri created at 2012-08-02 03:14:07

At first glance this seems okay to me. But why not more clean up, for example

```diff
diff --git a/MANIFEST.in b/MANIFEST.in
--- a/MANIFEST.in
+++ b/MANIFEST.in
@@ -1,30 +1,23 @@
-recursive-include * *.c *.cc *.cpp *.h *.hh *.hpp *.pyx *.pxd *.pxi *.txt *.tex
-recursive-include doc *.rst *.py *.inc
+global-include *.c *.cc *.cpp *.h *.hh *.hpp *.py  *.pyx *.pxd *.pxi *.txt *.tex
+recursive-include doc *.rst *.inc
 graft .hg
 include .hgignore .hgtags
 include MANIFEST.in
 include bundle export install pull sage-push
-include module_list.py
-include fpickle_setup.py
 include spkg-delauto spkg-dist spkg-install
 include c_lib/SConstruct
 include sage/ext/mac-app/README
 include sage/graphs/graph_decompositions/rankwidth_c/README
-include sage/libs/gmp/__init__.py
-include sage/libs/polybori/__init__.py
-include sage/numerical/test.py
-include sage/rings/polynomial/padics/__init__.py
 include sage/schemes/hyperelliptic_curves/hypellfrob/README
-include sage/server/notebook/templates/*
-include sage/server/notebook/templates/css/*
-include sage/server/notebook/templates/notebook/*
-include sage/server/notebook/templates/worksheet/*
 include sage/tests/french_book/README
+graft sage/server/notebook/templates
+graft sage/server/notebook/templates/css
+graft sage/server/notebook/templates/notebook
+graft sage/server/notebook/templates/worksheet
 include doc/common/python.inv
 include doc/common/update-python-inv.sh
 include doc/en/introspect/static/empty
 include doc/en/introspect/templates/layout.html
-include doc/en/numerical_sage/errors
 include doc/en/website/static/pdf.png
 include doc/en/website/templates/index.html
 include doc/en/a_tour_of_sage/eigen_plot.png
```

(Why do we include `doc/en/numerical_sage/errors`? Why don't we include all `*.py` files?)


---

Comment by jhpalmieri created at 2012-08-02 03:38:06

Also, regarding line 22 of spkg-dist:

```
	cp -pR .hg* doc sage c_lib tmp/
```

copying the entire doc directory can take a while, since we're copying all of the output. Would it be better to copy `doc/common` and `doc/[a-z][a-z]`?


---

Comment by jdemeyer created at 2012-08-02 06:15:45

Good points.


---

Comment by jdemeyer created at 2012-08-02 06:15:45

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2012-08-02 07:07:15

Changing status from needs_work to needs_review.


---

Comment by jhpalmieri created at 2012-08-03 03:42:59

In line 1 of MANIFEST.in, should we replace `recursive-include * ...` with `global-include ...`? Then I think we can delete line 8 (`include fpickle_setup.py module_list.py`). In my testing, the results are the same with these changes.


---

Comment by jdemeyer created at 2012-08-03 07:55:43

Changing status from needs_review to needs_work.


---

Comment by jdemeyer created at 2012-08-03 11:14:23

Changing status from needs_work to needs_review.


---

Attachment


---

Comment by jhpalmieri created at 2012-08-03 16:24:20

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2012-08-03 16:24:20

Okay, this looks good to me.


---

Comment by jdemeyer created at 2012-08-12 19:01:42

Resolution: fixed
