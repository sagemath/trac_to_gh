# Issue 13143: Clean up devel/sage/MANIFEST.in

archive/issues_013143.json:
```json
{
    "body": "Assignee: tbd\n\nThere are some obvious improvement and simplifications to be done to `devel/sage/MANIFEST.in`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13315\n\n",
    "created_at": "2012-07-31T17:42:06Z",
    "labels": [
        "component: distribution",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.3",
    "title": "Clean up devel/sage/MANIFEST.in",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13143",
    "user": "https://github.com/jdemeyer"
}
```
Assignee: tbd

There are some obvious improvement and simplifications to be done to `devel/sage/MANIFEST.in`.

Issue created by migration from https://trac.sagemath.org/ticket/13315





---

archive/issue_comments_159854.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-07-31T21:11:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13143#issuecomment-159854",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_159855.json:
```json
{
    "body": "I tested this patch by creating a new sdist (starting from sage-5.2), and these are the only differences in files being added or not (this is the diff of `ls -a1RF` output):\n\n```diff\n--- sage-5.2.ls 2012-08-01 18:31:34.000000000 +0200\n+++ sage-5.2.trac13315.ls       2012-08-01 18:31:39.000000000 +0200\n@@ -30,6 +30,7 @@\n branch\n branch.cache\n branchheads.cache\n+cache/\n dirstate\n hgrc\n last-message.txt\n@@ -41,6 +42,12 @@\n undo.desc\n undo.dirstate\n\n+./.hg/cache:\n+./\n+../\n+branchheads\n+tags\n+\n ./.hg/store:\n ./\n ../\n@@ -49,6 +56,10 @@\n 00manifest.d\n 00manifest.i\n data/\n+fncache\n+phaseroots\n+undo\n+undo.phaseroots\n\n ./.hg/store/data:\n ./\n@@ -5178,7 +5189,6 @@\n ./c_lib:\n ./\n ../\n-.sconsign.dblite\n SConstruct\n include/\n src/\n```\n",
    "created_at": "2012-08-01T16:34:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13143#issuecomment-159855",
    "user": "https://github.com/jdemeyer"
}
```

I tested this patch by creating a new sdist (starting from sage-5.2), and these are the only differences in files being added or not (this is the diff of `ls -a1RF` output):

```diff
--- sage-5.2.ls 2012-08-01 18:31:34.000000000 +0200
+++ sage-5.2.trac13315.ls       2012-08-01 18:31:39.000000000 +0200
@@ -30,6 +30,7 @@
 branch
 branch.cache
 branchheads.cache
+cache/
 dirstate
 hgrc
 last-message.txt
@@ -41,6 +42,12 @@
 undo.desc
 undo.dirstate

+./.hg/cache:
+./
+../
+branchheads
+tags
+
 ./.hg/store:
 ./
 ../
@@ -49,6 +56,10 @@
 00manifest.d
 00manifest.i
 data/
+fncache
+phaseroots
+undo
+undo.phaseroots

 ./.hg/store/data:
 ./
@@ -5178,7 +5189,6 @@
 ./c_lib:
 ./
 ../
-.sconsign.dblite
 SConstruct
 include/
 src/
```




---

archive/issue_comments_159856.json:
```json
{
    "body": "At first glance this seems okay to me. But why not more clean up, for example\n\n```diff\ndiff --git a/MANIFEST.in b/MANIFEST.in\n--- a/MANIFEST.in\n+++ b/MANIFEST.in\n@@ -1,30 +1,23 @@\n-recursive-include * *.c *.cc *.cpp *.h *.hh *.hpp *.pyx *.pxd *.pxi *.txt *.tex\n-recursive-include doc *.rst *.py *.inc\n+global-include *.c *.cc *.cpp *.h *.hh *.hpp *.py  *.pyx *.pxd *.pxi *.txt *.tex\n+recursive-include doc *.rst *.inc\n graft .hg\n include .hgignore .hgtags\n include MANIFEST.in\n include bundle export install pull sage-push\n-include module_list.py\n-include fpickle_setup.py\n include spkg-delauto spkg-dist spkg-install\n include c_lib/SConstruct\n include sage/ext/mac-app/README\n include sage/graphs/graph_decompositions/rankwidth_c/README\n-include sage/libs/gmp/__init__.py\n-include sage/libs/polybori/__init__.py\n-include sage/numerical/test.py\n-include sage/rings/polynomial/padics/__init__.py\n include sage/schemes/hyperelliptic_curves/hypellfrob/README\n-include sage/server/notebook/templates/*\n-include sage/server/notebook/templates/css/*\n-include sage/server/notebook/templates/notebook/*\n-include sage/server/notebook/templates/worksheet/*\n include sage/tests/french_book/README\n+graft sage/server/notebook/templates\n+graft sage/server/notebook/templates/css\n+graft sage/server/notebook/templates/notebook\n+graft sage/server/notebook/templates/worksheet\n include doc/common/python.inv\n include doc/common/update-python-inv.sh\n include doc/en/introspect/static/empty\n include doc/en/introspect/templates/layout.html\n-include doc/en/numerical_sage/errors\n include doc/en/website/static/pdf.png\n include doc/en/website/templates/index.html\n include doc/en/a_tour_of_sage/eigen_plot.png\n```\n\n(Why do we include `doc/en/numerical_sage/errors`? Why don't we include all `*.py` files?)",
    "created_at": "2012-08-02T03:14:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13143#issuecomment-159856",
    "user": "https://github.com/jhpalmieri"
}
```

At first glance this seems okay to me. But why not more clean up, for example

```diff
diff --git a/MANIFEST.in b/MANIFEST.in
--- a/MANIFEST.in
+++ b/MANIFEST.in
@@ -1,30 +1,23 @@
-recursive-include * *.c *.cc *.cpp *.h *.hh *.hpp *.pyx *.pxd *.pxi *.txt *.tex
-recursive-include doc *.rst *.py *.inc
+global-include *.c *.cc *.cpp *.h *.hh *.hpp *.py  *.pyx *.pxd *.pxi *.txt *.tex
+recursive-include doc *.rst *.inc
 graft .hg
 include .hgignore .hgtags
 include MANIFEST.in
 include bundle export install pull sage-push
-include module_list.py
-include fpickle_setup.py
 include spkg-delauto spkg-dist spkg-install
 include c_lib/SConstruct
 include sage/ext/mac-app/README
 include sage/graphs/graph_decompositions/rankwidth_c/README
-include sage/libs/gmp/__init__.py
-include sage/libs/polybori/__init__.py
-include sage/numerical/test.py
-include sage/rings/polynomial/padics/__init__.py
 include sage/schemes/hyperelliptic_curves/hypellfrob/README
-include sage/server/notebook/templates/*
-include sage/server/notebook/templates/css/*
-include sage/server/notebook/templates/notebook/*
-include sage/server/notebook/templates/worksheet/*
 include sage/tests/french_book/README
+graft sage/server/notebook/templates
+graft sage/server/notebook/templates/css
+graft sage/server/notebook/templates/notebook
+graft sage/server/notebook/templates/worksheet
 include doc/common/python.inv
 include doc/common/update-python-inv.sh
 include doc/en/introspect/static/empty
 include doc/en/introspect/templates/layout.html
-include doc/en/numerical_sage/errors
 include doc/en/website/static/pdf.png
 include doc/en/website/templates/index.html
 include doc/en/a_tour_of_sage/eigen_plot.png
```

(Why do we include `doc/en/numerical_sage/errors`? Why don't we include all `*.py` files?)



---

archive/issue_comments_159857.json:
```json
{
    "body": "Also, regarding line 22 of spkg-dist:\n\n```\n\tcp -pR .hg* doc sage c_lib tmp/\n```\n\ncopying the entire doc directory can take a while, since we're copying all of the output. Would it be better to copy `doc/common` and `doc/[a-z][a-z]`?",
    "created_at": "2012-08-02T03:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13143#issuecomment-159857",
    "user": "https://github.com/jhpalmieri"
}
```

Also, regarding line 22 of spkg-dist:

```
	cp -pR .hg* doc sage c_lib tmp/
```

copying the entire doc directory can take a while, since we're copying all of the output. Would it be better to copy `doc/common` and `doc/[a-z][a-z]`?



---

archive/issue_comments_159858.json:
```json
{
    "body": "Good points.",
    "created_at": "2012-08-02T06:15:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13143#issuecomment-159858",
    "user": "https://github.com/jdemeyer"
}
```

Good points.



---

archive/issue_comments_159859.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-08-02T06:15:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13143#issuecomment-159859",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_159860.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-08-02T07:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13143#issuecomment-159860",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_159861.json:
```json
{
    "body": "In line 1 of MANIFEST.in, should we replace `recursive-include * ...` with `global-include ...`? Then I think we can delete line 8 (`include fpickle_setup.py module_list.py`). In my testing, the results are the same with these changes.",
    "created_at": "2012-08-03T03:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13143#issuecomment-159861",
    "user": "https://github.com/jhpalmieri"
}
```

In line 1 of MANIFEST.in, should we replace `recursive-include * ...` with `global-include ...`? Then I think we can delete line 8 (`include fpickle_setup.py module_list.py`). In my testing, the results are the same with these changes.



---

archive/issue_comments_159862.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-08-03T07:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13143#issuecomment-159862",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_159863.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-08-03T11:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13143#issuecomment-159863",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_159864.json:
```json
{
    "body": "Attachment [13315_manifest.patch](tarball://root/attachments/some-uuid/ticket13315/13315_manifest.patch) by @jdemeyer created at 2012-08-03 11:14:23",
    "created_at": "2012-08-03T11:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13143#issuecomment-159864",
    "user": "https://github.com/jdemeyer"
}
```

Attachment [13315_manifest.patch](tarball://root/attachments/some-uuid/ticket13315/13315_manifest.patch) by @jdemeyer created at 2012-08-03 11:14:23



---

archive/issue_comments_159865.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-08-03T16:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13143#issuecomment-159865",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_159866.json:
```json
{
    "body": "Okay, this looks good to me.",
    "created_at": "2012-08-03T16:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13143#issuecomment-159866",
    "user": "https://github.com/jhpalmieri"
}
```

Okay, this looks good to me.



---

archive/issue_comments_159867.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-08-12T19:01:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13143#issuecomment-159867",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_036845.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-08-12T19:01:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/13143",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/13143#event-36845"
}
```
