# Issue 15660: UniqueFactory for QuaternionAlgebras

Issue created by migration from https://trac.sagemath.org/ticket/15897

Original creator: saraedum

Original creation time: 2014-03-06 13:36:59

Quaternion algebras use a generic dictionary to cache objects (instead of
`UniqueRepresentation` or `UniqueFactory`). This ticket replaces this generic
cache with a `UniqueFactory` implementation.


---

Comment by saraedum created at 2014-03-06 13:43:00

Changing status from new to needs_review.


---

Comment by saraedum created at 2014-03-06 13:43:00

New commits:


---

Comment by roed created at 2014-03-06 21:42:53

Looks good to me.


---

Comment by roed created at 2014-03-06 21:42:53

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-03-11 21:17:48

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2014-03-11 21:17:48


```
sage -t src/sage/algebras/quaternion_algebra.py
**********************************************************************
File "src/sage/algebras/quaternion_algebra.py", line 12, in sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0
Failed example:
    f, t = Q.__reduce__()
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0[1]>", line 1, in <module>
        f, t = Q.__reduce__()
    ValueError: too many values to unpack
**********************************************************************
File "src/sage/algebras/quaternion_algebra.py", line 14, in sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0
Failed example:
    sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0(*t)
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0[3]>", line 1, in <module>
        sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0(*t)
    NameError: name 't' is not defined
**********************************************************************
1 item had failures:
   2 of   5 in sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0
    [4 tests, 2 failures, 0.01 s]
----------------------------------------------------------------------
sage -t src/sage/algebras/quaternion_algebra.py  # 2 doctests failed
----------------------------------------------------------------------
```



---

Comment by git created at 2014-04-09 17:55:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by saraedum created at 2014-04-09 17:55:08

Changing status from needs_work to needs_review.


---

Comment by pbruin created at 2014-05-10 01:29:17

Changing component from commutative algebra to algebra.


---

Comment by pbruin created at 2014-05-10 01:29:17

Changing status from needs_review to positive_review.


---

Comment by pbruin created at 2014-05-10 01:29:17

Looks good and the patchbot is happy.  (But quaternion algebras are not commutative!)


---

Comment by vbraun created at 2014-05-13 07:58:38

Resolution: fixed
