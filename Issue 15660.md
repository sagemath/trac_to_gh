# Issue 15660: UniqueFactory for QuaternionAlgebras

archive/issues_015660.json:
```json
{
    "body": "Quaternion algebras use a generic dictionary to cache objects (instead of\n`UniqueRepresentation` or `UniqueFactory`). This ticket replaces this generic\ncache with a `UniqueFactory` implementation.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15897\n\n",
    "created_at": "2014-03-06T13:36:59Z",
    "labels": [
        "commutative algebra",
        "minor",
        "enhancement"
    ],
    "title": "UniqueFactory for QuaternionAlgebras",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15660",
    "user": "saraedum"
}
```
Quaternion algebras use a generic dictionary to cache objects (instead of
`UniqueRepresentation` or `UniqueFactory`). This ticket replaces this generic
cache with a `UniqueFactory` implementation.

Issue created by migration from https://trac.sagemath.org/ticket/15897





---

archive/issue_comments_202722.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-03-06T13:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15660#issuecomment-202722",
    "user": "saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_202723.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-03-06T13:43:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15660#issuecomment-202723",
    "user": "saraedum"
}
```

New commits:



---

archive/issue_comments_202724.json:
```json
{
    "body": "Looks good to me.",
    "created_at": "2014-03-06T21:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15660#issuecomment-202724",
    "user": "roed"
}
```

Looks good to me.



---

archive/issue_comments_202725.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-03-06T21:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15660#issuecomment-202725",
    "user": "roed"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_202726.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2014-03-11T21:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15660#issuecomment-202726",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_202727.json:
```json
{
    "body": "\n```\nsage -t src/sage/algebras/quaternion_algebra.py\n**********************************************************************\nFile \"src/sage/algebras/quaternion_algebra.py\", line 12, in sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0\nFailed example:\n    f, t = Q.__reduce__()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0[1]>\", line 1, in <module>\n        f, t = Q.__reduce__()\n    ValueError: too many values to unpack\n**********************************************************************\nFile \"src/sage/algebras/quaternion_algebra.py\", line 14, in sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0\nFailed example:\n    sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0(*t)\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 480, in _run\n        self.execute(example, compiled, test.globs)\n      File \"/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 839, in execute\n        exec compiled in globs\n      File \"<doctest sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0[3]>\", line 1, in <module>\n        sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0(*t)\n    NameError: name 't' is not defined\n**********************************************************************\n1 item had failures:\n   2 of   5 in sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0\n    [4 tests, 2 failures, 0.01 s]\n----------------------------------------------------------------------\nsage -t src/sage/algebras/quaternion_algebra.py  # 2 doctests failed\n----------------------------------------------------------------------\n```\n",
    "created_at": "2014-03-11T21:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15660#issuecomment-202727",
    "user": "vbraun"
}
```


```
sage -t src/sage/algebras/quaternion_algebra.py
**********************************************************************
File "src/sage/algebras/quaternion_algebra.py", line 12, in sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0
Failed example:
    f, t = Q.__reduce__()
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0[1]>", line 1, in <module>
        f, t = Q.__reduce__()
    ValueError: too many values to unpack
**********************************************************************
File "src/sage/algebras/quaternion_algebra.py", line 14, in sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0
Failed example:
    sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0(*t)
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/home/release/Sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0[3]>", line 1, in <module>
        sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0(*t)
    NameError: name 't' is not defined
**********************************************************************
1 item had failures:
   2 of   5 in sage.algebras.quaternion_algebra.unpickle_QuaternionAlgebra_v0
    [4 tests, 2 failures, 0.01 s]
----------------------------------------------------------------------
sage -t src/sage/algebras/quaternion_algebra.py  # 2 doctests failed
----------------------------------------------------------------------
```




---

archive/issue_comments_202728.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-04-09T17:55:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15660#issuecomment-202728",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_202729.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2014-04-09T17:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15660#issuecomment-202729",
    "user": "saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_202730.json:
```json
{
    "body": "Changing component from commutative algebra to algebra.",
    "created_at": "2014-05-10T01:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15660#issuecomment-202730",
    "user": "pbruin"
}
```

Changing component from commutative algebra to algebra.



---

archive/issue_comments_202731.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-05-10T01:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15660#issuecomment-202731",
    "user": "pbruin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_202732.json:
```json
{
    "body": "Looks good and the patchbot is happy.  (But quaternion algebras are not commutative!)",
    "created_at": "2014-05-10T01:29:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15660#issuecomment-202732",
    "user": "pbruin"
}
```

Looks good and the patchbot is happy.  (But quaternion algebras are not commutative!)



---

archive/issue_comments_202733.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-05-13T07:58:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15660",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15660#issuecomment-202733",
    "user": "vbraun"
}
```

Resolution: fixed
