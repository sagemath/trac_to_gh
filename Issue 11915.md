# Issue 11915: Clean up devel/sage/.hgignore

Issue created by migration from Trac.

Original creator: jdemeyer

Original creation time: 2011-11-26 15:54:05

Assignee: jason

There are *lots* of files in `devel/sage/.hgignore` which no longer exist.


---

Attachment


---

Comment by kini created at 2011-11-26 16:30:31

There was a relevant thread (though without a lot of info) [on sage-devel](https://groups.google.com/d/topic/sage-devel/-1fRKetaN9Q/discussion). I was concerned that these files could possibly exist in a modern Sage installation when some arcane SPKG or other is installed. Did you confirm that this is not the case for anything removed by your patch?


---

Comment by jdemeyer created at 2011-11-26 18:23:53

Replying to [comment:1 kini]:
> Did you confirm that this is not the case for anything removed by your patch?
No, I did not try installing every optional and experimental package.  Note also that I did not remove all non-existing files, only the ones where I could guess where they came from and which looked unlikely to re-appear (for example, I did not remove `.git` in case we ever change to use git).  It's also not a big disaster if some file turns out to exist anyway, the only consequence is complaints from `hg status`.


---

Comment by jdemeyer created at 2011-11-26 18:23:53

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2011-11-26 18:25:01

Changing assignee from jason to jdemeyer.


---

Comment by kini created at 2011-11-26 19:38:02

Changing status from needs_review to positive_review.


---

Comment by kini created at 2011-11-26 19:38:02

Well, for example `sage-update` actually cares about whether there are complaints from `hg status`, though this is silly in the first place, IMO. Anyway I see no real problem with this patch. If something breaks because of it, it shouldn't be breaking. I will give it a positive review.


---

Comment by jhpalmieri created at 2011-11-26 19:58:05

Can you explain why some files are listed in `.hgignore` but are part of the distribution?  For example, "PKG-INFO" (autogenerated somehow?), "pull", and "sage/rings/integer.h"?  What about the 4.5 megabyte file `sage/c_lib/.sconsign.dblite`?


---

Comment by kini created at 2011-11-26 20:11:47

I think William was trying to make `hg status` tell him whether he had changed the Sage library code or not, rather than whether the working directory had any changes at all, which is what the usual meaning of `hg status`'s output and return code is. See `$SAGE_LOCAL/sage-test-new` which implements `sage -tnew` and parses the output of `hg status`. So things that are not code are put in the ignore file.


---

Comment by jhpalmieri created at 2011-11-26 20:32:57

That sounds plausible; however, I would rather track all of these files and do more processing in `sage-test-new` â€” only test the file if its suffix is something appropriate.  (This obviously would belong on another ticket.)


---

Comment by jdemeyer created at 2011-11-26 21:14:41

Replying to [comment:5 jhpalmieri]:
> Can you explain why some files are listed in `.hgignore` but are part of the distribution?  For example, "PKG-INFO" (autogenerated somehow?), "pull", and "sage/rings/integer.h"?  What about the 4.5 megabyte file `sage/c_lib/.sconsign.dblite`?

`pull` is no longer in `.hgignore` with my patch.

The `.h` files are auto-generated by Cython and should not be in the MANIFEST.

I have no idea about `.sconsign.dblite`


---

Comment by jdemeyer created at 2011-11-27 09:20:04

Resolution: fixed
