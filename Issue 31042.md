# Issue 31042: Add package argon2-cffi

archive/issues_031042.json:
```json
{
    "body": "CC:  @jcamp0x2a slelievre kcrisman dimpase jhpalmieri @tobiasdiez\n\nThis is an `install-requires` of `notebook`.\n\nIn #26919 we did not add it, but if we let Python dependencies play out, it gets pulled in by sagelib via ipywidgets (#31278)\n\nIssue created by migration from https://trac.sagemath.org/ticket/31279\n\n",
    "created_at": "2021-01-22T03:44:16Z",
    "labels": [
        "packages: standard",
        "minor",
        "bug"
    ],
    "title": "Add package argon2-cffi",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31042",
    "user": "mkoeppe"
}
```
CC:  @jcamp0x2a slelievre kcrisman dimpase jhpalmieri @tobiasdiez

This is an `install-requires` of `notebook`.

In #26919 we did not add it, but if we let Python dependencies play out, it gets pulled in by sagelib via ipywidgets (#31278)

Issue created by migration from https://trac.sagemath.org/ticket/31279





---

archive/issue_comments_443353.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-01-22T04:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443353",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_443354.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-01-22T04:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443354",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_443355.json:
```json
{
    "body": "Changing priority from minor to major.",
    "created_at": "2021-01-22T04:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443355",
    "user": "mkoeppe"
}
```

Changing priority from minor to major.



---

archive/issue_comments_443356.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2021-02-02T19:32:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443356",
    "user": "mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_443357.json:
```json
{
    "body": "I don't understand this ticket. If I build Sage and run the notebook, `argon-cffi` is not installed anywhere, as far as I can tell. What am I missing?",
    "created_at": "2021-02-02T19:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443357",
    "user": "jhpalmieri"
}
```

I don't understand this ticket. If I build Sage and run the notebook, `argon-cffi` is not installed anywhere, as far as I can tell. What am I missing?



---

archive/issue_comments_443358.json:
```json
{
    "body": "We install all packages using `pip install --no-deps` (see `build/bin/sage-pip-install`), so dependencies that the package declares as `install-requires` are not automatically installed. As a result, I assume some feature of the Jupyter notebook must be unavailable; but I do not know what exactly.",
    "created_at": "2021-02-08T02:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443358",
    "user": "mkoeppe"
}
```

We install all packages using `pip install --no-deps` (see `build/bin/sage-pip-install`), so dependencies that the package declares as `install-requires` are not automatically installed. As a result, I assume some feature of the Jupyter notebook must be unavailable; but I do not know what exactly.



---

archive/issue_comments_443359.json:
```json
{
    "body": "`argon2-cffi` does something with password hashing, and I don't know if it's really necessary. I don't know enough about the security of the Jupyter notebook, or how `argon2-cffi` would help, to make a decision.",
    "created_at": "2021-02-08T17:35:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443359",
    "user": "jhpalmieri"
}
```

`argon2-cffi` does something with password hashing, and I don't know if it's really necessary. I don't know enough about the security of the Jupyter notebook, or how `argon2-cffi` would help, to make a decision.



---

archive/issue_comments_443360.json:
```json
{
    "body": "used here: https://github.com/jupyter/notebook/blob/bc28d6123117c3c733697e27e9d4bd71d7f0c46b/notebook/auth/security.py",
    "created_at": "2021-02-08T17:37:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443360",
    "user": "mkoeppe"
}
```

used here: https://github.com/jupyter/notebook/blob/bc28d6123117c3c733697e27e9d4bd71d7f0c46b/notebook/auth/security.py



---

archive/issue_comments_443361.json:
```json
{
    "body": "We need to set `ARGON2_CFFI_USE_SSE2` to `0` in case of `SAGE_FAT_BINARY`.\n\nhttps://argon2-cffi.readthedocs.io/en/stable/installation.html",
    "created_at": "2021-02-11T08:15:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443361",
    "user": "@kliem"
}
```

We need to set `ARGON2_CFFI_USE_SSE2` to `0` in case of `SAGE_FAT_BINARY`.

https://argon2-cffi.readthedocs.io/en/stable/installation.html



---

archive/issue_comments_443362.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-02-11T17:07:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443362",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_443363.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-11T17:38:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443363",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443364.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-02-11T17:39:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443364",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_443365.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-02-11T18:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443365",
    "user": "@kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_443366.json:
```json
{
    "body": "LGTM.",
    "created_at": "2021-02-11T18:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443366",
    "user": "@kliem"
}
```

LGTM.



---

archive/issue_comments_443367.json:
```json
{
    "body": "Thank you!",
    "created_at": "2021-02-11T18:45:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443367",
    "user": "mkoeppe"
}
```

Thank you!



---

archive/issue_comments_443368.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-03-01T00:21:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443368",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_443369.json:
```json
{
    "body": "Follow up in #31441",
    "created_at": "2021-03-01T00:25:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31042",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31042#issuecomment-443369",
    "user": "mkoeppe"
}
```

Follow up in #31441
