# Issue 11243: update pynac to 0.2.3

Issue created by migration from https://trac.sagemath.org/ticket/11415

Original creator: burcin

Original creation time: 2011-05-31 15:04:22

Assignee: burcin

CC:  kcrisman

Yet another pynac release, including fixes for #10964, #11352 and #9240.

http://sage.math.washington.edu/home/burcin/pynac/pynac-0.2.3.spkg

Attached patch fixes some doctest to remove extra braces printed when typesetting mul objects.


---

Attachment


---

Comment by kcrisman created at 2011-06-08 21:11:42

I'm confused about 

```

changeset:   197:3c39cd396893
user:        Burcin Erocal <burcin@erocal.org>
date:        Tue May 31 16:37:48 2011 +0200
summary:     Use "%lf" to print doubles instead of "%f".
```

Not that it seems to be affecting anything, though one would think it would print things differently...

Anyway, I don't see that in the Ginac commit list, but I don't see it mentioned in any of the relevant tickets either.

Otherwise, so far, so good.  Now to look at the actual patches and tickets involved.  #9240 I will probably not get to right away.


---

Comment by kcrisman created at 2011-06-08 21:27:44

Positive review on the patch in this ticket.


---

Comment by kcrisman created at 2011-06-08 22:03:30

Changing status from new to needs_review.


---

Comment by kcrisman created at 2011-06-08 22:03:30

Positive review modulo an answer to the question about why the change from && to & was necessary in the Pynac patch for #9240.


---

Comment by fbissey created at 2011-06-08 23:15:55

Replying to [comment:2 kcrisman]:
> I'm confused about 
> {{{
> 
> changeset:   197:3c39cd396893
> user:        Burcin Erocal <burcin`@`erocal.org>
> date:        Tue May 31 16:37:48 2011 +0200
> summary:     Use "%lf" to print doubles instead of "%f".
> }}}
> Not that it seems to be affecting anything, though one would think it would print things differently...
> 
Hi Karl,

Burcin introduced this on my report because gcc complains. See here [https://bitbucket.org/burcin/pynac/issue/2/correct-format-in-numericcpp](https://bitbucket.org/burcin/pynac/issue/2/correct-format-in-numericcpp). This is not about printing but about entering data if you look at the commit [https://bitbucket.org/burcin/pynac/changeset/3c39cd396893](https://bitbucket.org/burcin/pynac/changeset/3c39cd396893) this is in scanf not printf. So printing is not affected.


---

Comment by kcrisman created at 2011-06-09 00:12:49

> 
> Burcin introduced this on my report because gcc complains. See here [https://bitbucket.org/burcin/pynac/issue/2/correct-format-in-numericcpp](https://bitbucket.org/burcin/pynac/issue/2/correct-format-in-numericcpp). This is not about printing but about entering data if you look at the commit [https://bitbucket.org/burcin/pynac/changeset/3c39cd396893](https://bitbucket.org/burcin/pynac/changeset/3c39cd396893) this is in scanf not printf. So printing is not affected.

Thanks, Francois!  I have to say, David Kirkby would love this - someone fixing a *warning* and not just an actual error in an upstream package!  If you watch Sage compile, it's amazing just how many warnings there are - small wonder we need gcc!

And since I know very little about C and its derivatives (enough to get in trouble, I guess), that explanation was actually very helpful.

Now I just need to know the answer about the bitwise and versus boolean and.


---

Comment by fbissey created at 2011-06-09 00:31:59

I actually didn't report all the warnings. Just the easy to fix one. There's some of that as well:

```
/scratch/portage/sci-libs/pynac-0.2.2/work/pynac-0.2.2/src/ginac/numeric.cpp: In function 'PyObject* Integer(const long int&)':
/scratch/portage/sci-libs/pynac-0.2.2/work/pynac-0.2.2/src/ginac/numeric.cpp:173:56: warning: deprecated conversion from string constant to 'char*'
/scratch/portage/sci-libs/pynac-0.2.2/work/pynac-0.2.2/src/ginac/numeric.cpp: In function 'void GiNaC::coerce(GiNaC::Number_T&, GiNaC::Number_T&, const GiNaC::Number_T&, const GiNaC::Number_T&)':
/scratch/portage/sci-libs/pynac-0.2.2/work/pynac-0.2.2/src/ginac/numeric.cpp:262:67: warning: deprecated conversion from string constant to 'char*'
```

But you wouldn't believe how widespread this one is. Just look at your singular build logs for example when you have time. 
I may attempt your other question but in #9240 (he says looking at his C manual and looking at the code).


---

Comment by kcrisman created at 2011-06-09 00:35:01

Yes, I've seen lots of those as well.


---

Comment by kcrisman created at 2011-06-09 01:42:29

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2011-06-09 01:42:29

Well, fbissey seems to be convinced in #9240 that the && to & is ok, and it doesn't break anything, and it's certainly in the right spirit (just what kind of and), so I think that suffices for the new Pynac.  #9240 itself needs some clarification, at least for me.


---

Comment by burcin created at 2011-06-09 09:25:34

Replying to [comment:7 fbissey]:
> I actually didn't report all the warnings. Just the easy to fix one. There's some of that as well:
 {{{
 /scratch/portage/sci-libs/pynac-0.2.2/work/pynac-0.2.2/src/ginac/numeric.cpp: In function 'PyObject* Integer(const long int&)':
 /scratch/portage/sci-libs/pynac-0.2.2/work/pynac-0.2.2/src/ginac/numeric.cpp:173:56: warning: deprecated conversion from string constant to 'char*'
 /scratch/portage/sci-libs/pynac-0.2.2/work/pynac-0.2.2/src/ginac/numeric.cpp: In function 'void GiNaC::coerce(GiNaC::Number_T&, GiNaC::Number_T&, const GiNaC::Number_T&, const GiNaC::Number_T&)':
 /scratch/portage/sci-libs/pynac-0.2.2/work/pynac-0.2.2/src/ginac/numeric.cpp:262:67: warning: deprecated conversion from string constant to 'char*'
 }}}
> But you wouldn't believe how widespread this one is. Just look at your singular build logs for example when you have time. 
> I may attempt your other question but in #9240 (he says looking at his C manual and looking at the code).

I try to fix the warnings I know about. Thanks Francois for reporting the `%lf` issue.

Unfortunately the ones above are due to the python headers not declaring the `char*` arguments of some functions as const. I don't think it's a good idea to manually cast to a nonconstant type to suppress these warnings.


Many thanks for the reviews Karl-Dieter.


---

Comment by jdemeyer created at 2011-06-09 19:36:29

Changing component from symbolics to packages.


---

Comment by jdemeyer created at 2011-06-14 19:20:05

Resolution: fixed
