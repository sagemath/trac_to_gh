# Issue 20065: Clean up MILP backend interface

archive/issues_020065.json:
```json
{
    "body": "CC:  @dimpase @videlec @vbraun @jdemeyer @fchapoton @kiwifb rudi @novoselt @mo271 @jplab @mmasdeu @kwankyu tmonteil @mforets @yuan-zhou\n\nKeywords: lp\n\nWhile implementing `InteractiveLPBackend` for #20296, I noticed several deficiencies in the design of the MILP backend interface.\n\n- `add_col` and `add_variable` both add a variable to the problem; but `add_col` only allows to add a column with no name; whereas `add_variable` only allows to add a column with no coefficients. There should be one function (`add_variable`, probably) that can do both; should then deprecate `add_col`. (Also compare with `add_linear_constraint`, which takes as zipped index/coefficient list, whereas `add_col` takes two parallel lists.)\n\n- `variable_upper_bound`: This interface is bizarre.  Can't remove an upper bound from a variable because `None` means both 'no upper bound' and 'get the upper bound'. Likewise `variable_lower_bound`. (Moreover, there's redundancy with `col_bounds`.)\n\n- `add_variables` and `add_linear_constraints` should have a default implementation in `GenericBackend`, like `add_linear_constraint_vector`.\n\nAlso, I think the backends should be tested using a common `TestSuite`. Right now each backend uses its own doctests, which have slightly diverged from each other, so there is nothing (other than the fact that they were the result of copy-paste from each other) that ensures consistency. (#20296 fixes several wrong doctests in `GenericBackend`, from which I tried to copy-paste, for example.)\n\nIssue created by migration from https://trac.sagemath.org/ticket/20302\n\n",
    "created_at": "2016-03-27T00:12:12Z",
    "labels": [
        "component: numerical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Clean up MILP backend interface",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20065",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @dimpase @videlec @vbraun @jdemeyer @fchapoton @kiwifb rudi @novoselt @mo271 @jplab @mmasdeu @kwankyu tmonteil @mforets @yuan-zhou

Keywords: lp

While implementing `InteractiveLPBackend` for #20296, I noticed several deficiencies in the design of the MILP backend interface.

- `add_col` and `add_variable` both add a variable to the problem; but `add_col` only allows to add a column with no name; whereas `add_variable` only allows to add a column with no coefficients. There should be one function (`add_variable`, probably) that can do both; should then deprecate `add_col`. (Also compare with `add_linear_constraint`, which takes as zipped index/coefficient list, whereas `add_col` takes two parallel lists.)

- `variable_upper_bound`: This interface is bizarre.  Can't remove an upper bound from a variable because `None` means both 'no upper bound' and 'get the upper bound'. Likewise `variable_lower_bound`. (Moreover, there's redundancy with `col_bounds`.)

- `add_variables` and `add_linear_constraints` should have a default implementation in `GenericBackend`, like `add_linear_constraint_vector`.

Also, I think the backends should be tested using a common `TestSuite`. Right now each backend uses its own doctests, which have slightly diverged from each other, so there is nothing (other than the fact that they were the result of copy-paste from each other) that ensures consistency. (#20296 fixes several wrong doctests in `GenericBackend`, from which I tried to copy-paste, for example.)

Issue created by migration from https://trac.sagemath.org/ticket/20302





---

archive/issue_comments_276036.json:
```json
{
    "body": "Description modified to remove my comments about `variable_upper_bound` and `variable_lower_bound`. I was misled by the interface description in `GenericBackend`, which was out of sync with the real backends. Fixed in #20296",
    "created_at": "2016-03-27T19:22:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20065#issuecomment-276036",
    "user": "https://github.com/mkoeppe"
}
```

Description modified to remove my comments about `variable_upper_bound` and `variable_lower_bound`. I was misled by the interface description in `GenericBackend`, which was out of sync with the real backends. Fixed in #20296



---

archive/issue_comments_276037.json:
```json
{
    "body": "Hello,\n\nI guess that you do not want to fix all of that in one ticket. One possibility is to use this one as a \"task ticket\" pointing to other tickets. See for example #18846, #17601 or #18333.",
    "created_at": "2016-03-30T12:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20065#issuecomment-276037",
    "user": "https://github.com/videlec"
}
```

Hello,

I guess that you do not want to fix all of that in one ticket. One possibility is to use this one as a "task ticket" pointing to other tickets. See for example #18846, #17601 or #18333.



---

archive/issue_comments_276038.json:
```json
{
    "body": "Changing type from defect to task.",
    "created_at": "2016-03-30T16:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20065#issuecomment-276038",
    "user": "https://github.com/mkoeppe"
}
```

Changing type from defect to task.



---

archive/issue_events_055067.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-06-27T02:09:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55067"
}
```



---

archive/issue_events_055068.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-15T01:20:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55068"
}
```



---

archive/issue_events_055069.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-15T01:20:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55069"
}
```



---

archive/issue_events_055070.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-11-04T19:16:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55070"
}
```



---

archive/issue_events_055071.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-11-04T19:16:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55071"
}
```



---

archive/issue_events_055072.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-02T09:33:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55072"
}
```



---

archive/issue_events_055073.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-02T09:33:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55073"
}
```



---

archive/issue_comments_276039.json:
```json
{
    "body": "Perhaps I am not that `klee` that you think I am. My name is Kwankyu Lee.",
    "created_at": "2017-03-02T10:04:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20065#issuecomment-276039",
    "user": "https://github.com/kwankyu"
}
```

Perhaps I am not that `klee` that you think I am. My name is Kwankyu Lee.



---

archive/issue_comments_276040.json:
```json
{
    "body": "Yes, you wrote ticket #22472 regarding optimization documentation, so I copied you to make sure you are aware of other efforts regarding the optimization code.",
    "created_at": "2017-03-02T10:27:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20065#issuecomment-276040",
    "user": "https://github.com/mkoeppe"
}
```

Yes, you wrote ticket #22472 regarding optimization documentation, so I copied you to make sure you are aware of other efforts regarding the optimization code.



---

archive/issue_comments_276041.json:
```json
{
    "body": "Ok :-)",
    "created_at": "2017-03-02T10:36:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20065#issuecomment-276041",
    "user": "https://github.com/kwankyu"
}
```

Ok :-)



---

archive/issue_events_055074.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2018-10-19T16:47:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55074"
}
```



---

archive/issue_events_055075.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2018-10-19T16:47:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55075"
}
```



---

archive/issue_events_055076.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-11-28T14:55:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-8.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55076"
}
```



---

archive/issue_events_055077.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-11-28T14:55:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55077"
}
```



---

archive/issue_comments_276042.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2020-01-06T14:10:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20065#issuecomment-276042",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_events_055078.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55078"
}
```



---

archive/issue_events_055079.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2020-01-06T14:10:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55079"
}
```



---

archive/issue_events_055080.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55080"
}
```



---

archive/issue_events_055081.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-04-14T19:41:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55081"
}
```



---

archive/issue_comments_276043.json:
```json
{
    "body": "Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.",
    "created_at": "2020-04-14T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20065#issuecomment-276043",
    "user": "https://github.com/mkoeppe"
}
```

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.



---

archive/issue_events_055082.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55082"
}
```



---

archive/issue_events_055083.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55083"
}
```



---

archive/issue_events_055084.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55084"
}
```



---

archive/issue_events_055085.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55085"
}
```



---

archive/issue_comments_276044.json:
```json
{
    "body": "Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20065#issuecomment-276044",
    "user": "https://github.com/mkoeppe"
}
```

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_055086.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55086"
}
```



---

archive/issue_events_055087.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-10T17:30:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55087"
}
```



---

archive/issue_events_055088.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:11:26Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55088"
}
```



---

archive/issue_events_055089.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:11:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55089"
}
```



---

archive/issue_events_055090.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55090"
}
```



---

archive/issue_events_055091.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55091"
}
```



---

archive/issue_events_055092.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55092"
}
```



---

archive/issue_events_055093.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/20065",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/20065#event-55093"
}
```
