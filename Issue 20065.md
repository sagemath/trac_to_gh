# Issue 20065: Clean up MILP backend interface

Issue created by migration from https://trac.sagemath.org/ticket/20302

Original creator: mkoeppe

Original creation time: 2016-03-27 00:12:12

CC:  dimpase vdelecroix vbraun jdemeyer chapoton fbissey rudi novoselt moritz jipilab mmasdeu klee tmonteil mforets yzh

Keywords: lp

While implementing `InteractiveLPBackend` for #20296, I noticed several deficiencies in the design of the MILP backend interface.

 - `add_col` and `add_variable` both add a variable to the problem; but `add_col` only allows to add a column with no name; whereas `add_variable` only allows to add a column with no coefficients. There should be one function (`add_variable`, probably) that can do both; should then deprecate `add_col`. (Also compare with `add_linear_constraint`, which takes as zipped index/coefficient list, whereas `add_col` takes two parallel lists.)

 - `variable_upper_bound`: This interface is bizarre.  Can't remove an upper bound from a variable because `None` means both 'no upper bound' and 'get the upper bound'. Likewise `variable_lower_bound`. (Moreover, there's redundancy with `col_bounds`.)

 - `add_variables` and `add_linear_constraints` should have a default implementation in `GenericBackend`, like `add_linear_constraint_vector`.

Also, I think the backends should be tested using a common `TestSuite`. Right now each backend uses its own doctests, which have slightly diverged from each other, so there is nothing (other than the fact that they were the result of copy-paste from each other) that ensures consistency. (#20296 fixes several wrong doctests in `GenericBackend`, from which I tried to copy-paste, for example.)


---

Comment by mkoeppe created at 2016-03-27 19:22:08

Description modified to remove my comments about `variable_upper_bound` and `variable_lower_bound`. I was misled by the interface description in `GenericBackend`, which was out of sync with the real backends. Fixed in #20296


---

Comment by vdelecroix created at 2016-03-30 12:51:26

Hello,

I guess that you do not want to fix all of that in one ticket. One possibility is to use this one as a "task ticket" pointing to other tickets. See for example #18846, #17601 or #18333.


---

Comment by mkoeppe created at 2016-03-30 16:24:42

Changing type from defect to task.


---

Comment by klee created at 2017-03-02 10:04:35

Perhaps I am not that `klee` that you think I am. My name is Kwankyu Lee.


---

Comment by mkoeppe created at 2017-03-02 10:27:25

Yes, you wrote ticket #22472 regarding optimization documentation, so I copied you to make sure you are aware of other efforts regarding the optimization code.


---

Comment by klee created at 2017-03-02 10:36:20

Ok :-)


---

Comment by embray created at 2020-01-06 14:10:03

Ticket retargeted after milestone closed


---

Comment by mkoeppe created at 2020-04-14 19:41:51

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.


---

Comment by mkoeppe created at 2021-03-24 02:04:25

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.
