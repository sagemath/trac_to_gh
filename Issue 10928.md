# Issue 10928: analytic_rank() should set rank() and gens() when it returns 0

archive/issues_010928.json:
```json
{
    "body": "Assignee: weigandt\n\nCC:  @JohnCremona @williamstein\n\nKeywords: rank, gens\n\nIf the analytic rank of an elliptic curve over QQ is computed to be 0, it is a theorem that the algebraic rank is 0, and we can set the generators to be []. This is not done.\n\n\n\n```\nsage: E=EllipticCurve([1, 0, 0, -1319539461660, -159402536950172400])\nsage: E.analytic_rank()\n0\nsage: E.rank()\nUnable to compute the rank with certainty (lower bound=0).\nThis could be because Sha(E/Q)[2] is nontrivial.\nTry calling something like two_descent(second_limit=13) on the\ncurve then trying this command again.  You could also try rank\nwith only_use_mwrank=False.\n---------------------------------------------------------------------------\nBOOM!\n\nRuntimeError: Rank not provably correct.\n\n```\n\n\nWe could also set the rank to 1 if the analytic rank is provably 1, but it seems customary only to set the rank when we can also set the generators, so that shouldn't be done until improved Heegner point functionality is available.\n\nIssue created by migration from https://trac.sagemath.org/ticket/11023\n\n",
    "created_at": "2011-03-25T00:30:06Z",
    "labels": [
        "elliptic curves",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "analytic_rank() should set rank() and gens() when it returns 0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10928",
    "user": "weigandt"
}
```
Assignee: weigandt

CC:  @JohnCremona @williamstein

Keywords: rank, gens

If the analytic rank of an elliptic curve over QQ is computed to be 0, it is a theorem that the algebraic rank is 0, and we can set the generators to be []. This is not done.



```
sage: E=EllipticCurve([1, 0, 0, -1319539461660, -159402536950172400])
sage: E.analytic_rank()
0
sage: E.rank()
Unable to compute the rank with certainty (lower bound=0).
This could be because Sha(E/Q)[2] is nontrivial.
Try calling something like two_descent(second_limit=13) on the
curve then trying this command again.  You could also try rank
with only_use_mwrank=False.
---------------------------------------------------------------------------
BOOM!

RuntimeError: Rank not provably correct.

```


We could also set the rank to 1 if the analytic rank is provably 1, but it seems customary only to set the rank when we can also set the generators, so that shouldn't be done until improved Heegner point functionality is available.

Issue created by migration from https://trac.sagemath.org/ticket/11023





---

archive/issue_comments_117480.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2011-03-25T01:07:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10928",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10928#issuecomment-117480",
    "user": "weigandt"
}
```

Changing priority from major to minor.



---

archive/issue_comments_117481.json:
```json
{
    "body": "Changing priority from minor to major.",
    "created_at": "2011-03-25T06:18:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10928",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10928#issuecomment-117481",
    "user": "weigandt"
}
```

Changing priority from minor to major.



---

archive/issue_comments_117482.json:
```json
{
    "body": "Ooops! I misread the documentation, which says that analytic_rank returns an integer that is *probably* the analytic rank of E, as opposed to *provably*.\n\nPerhaps the documentation should be changed to make this clearer. The letters b and v are right next to each other on the keyboard.\n\nMuch like #1848 we should probably put a proof=False flag here with the current implementation and try to run something as provable as possible for a proof=True. It seems reasonable that this could be done at least in the case of analytic rank 0.",
    "created_at": "2011-03-25T06:18:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10928",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10928#issuecomment-117482",
    "user": "weigandt"
}
```

Ooops! I misread the documentation, which says that analytic_rank returns an integer that is *probably* the analytic rank of E, as opposed to *provably*.

Perhaps the documentation should be changed to make this clearer. The letters b and v are right next to each other on the keyboard.

Much like #1848 we should probably put a proof=False flag here with the current implementation and try to run something as provable as possible for a proof=True. It seems reasonable that this could be done at least in the case of analytic rank 0.
