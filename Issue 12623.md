# Issue 12623: Invalid simplification from Expression.simplify_trig()

archive/issues_012623.json:
```json
{
    "body": "Assignee: @burcin\n\nCC:  @kcrisman\n\nSame issue as #12794 from the looks of it. Maybe this is just a particular nasty function?\n\nIssue created by migration from https://trac.sagemath.org/ticket/12795\n\n",
    "created_at": "2012-04-02T17:25:08Z",
    "labels": [
        "symbolics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Invalid simplification from Expression.simplify_trig()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12623",
    "user": "@orlitzky"
}
```
Assignee: @burcin

CC:  @kcrisman

Same issue as #12794 from the looks of it. Maybe this is just a particular nasty function?

Issue created by migration from https://trac.sagemath.org/ticket/12795





---

archive/issue_comments_150111.json:
```json
{
    "body": "Attachment [simplify_trig_gone_wild.sage](tarball://root/attachments/some-uuid/ticket12795/simplify_trig_gone_wild.sage) by @orlitzky created at 2012-04-02 17:25:19\n\nA .sage file exhibiting the problem",
    "created_at": "2012-04-02T17:25:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12623#issuecomment-150111",
    "user": "@orlitzky"
}
```

Attachment [simplify_trig_gone_wild.sage](tarball://root/attachments/some-uuid/ticket12795/simplify_trig_gone_wild.sage) by @orlitzky created at 2012-04-02 17:25:19

A .sage file exhibiting the problem



---

archive/issue_comments_150112.json:
```json
{
    "body": "I'm inclined to believe it's a pretty nasty function.  Given that the simplifications in both cases appear to be the same (and that `G.expand()` gives a different, but still correct, thing without numerical issues), I think the problem is just that you lose too much accuracy.  See my comment on #12794.",
    "created_at": "2013-06-16T00:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12623#issuecomment-150112",
    "user": "@kcrisman"
}
```

I'm inclined to believe it's a pretty nasty function.  Given that the simplifications in both cases appear to be the same (and that `G.expand()` gives a different, but still correct, thing without numerical issues), I think the problem is just that you lose too much accuracy.  See my comment on #12794.



---

archive/issue_comments_150113.json:
```json
{
    "body": "shows solution",
    "created_at": "2013-06-16T00:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12623#issuecomment-150113",
    "user": "@kcrisman"
}
```

shows solution



---

archive/issue_comments_150114.json:
```json
{
    "body": "Attachment [better.png](tarball://root/attachments/some-uuid/ticket12795/better.png) by @kcrisman created at 2013-06-16 00:56:32\n\nThanks for pointing out #12795, which got me trying this out again... Pretty sure this is invalid.\n\n```\nsage: G = F(u=b)\nsage: H = G.simplify_trig()\nsage: R = RealField(1000)\nsage: L = [(j,H(R(j))) for j in srange(-1,.2,.001)]\nsage: M = [(a,R(b)) for a,b in L] # should have done this in one step, but oh well\nsage: points(M)+plot(G,(x,-1,.2),color='red')\n```\n\nyields the following bee-yoo-tiful picture that every student of mathematics should have the chance to understand - why you don't just plug and chug:\n\n![](better.png)",
    "created_at": "2013-06-16T00:56:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12623#issuecomment-150114",
    "user": "@kcrisman"
}
```

Attachment [better.png](tarball://root/attachments/some-uuid/ticket12795/better.png) by @kcrisman created at 2013-06-16 00:56:32

Thanks for pointing out #12795, which got me trying this out again... Pretty sure this is invalid.

```
sage: G = F(u=b)
sage: H = G.simplify_trig()
sage: R = RealField(1000)
sage: L = [(j,H(R(j))) for j in srange(-1,.2,.001)]
sage: M = [(a,R(b)) for a,b in L] # should have done this in one step, but oh well
sage: points(M)+plot(G,(x,-1,.2),color='red')
```

yields the following bee-yoo-tiful picture that every student of mathematics should have the chance to understand - why you don't just plug and chug:

![](better.png)



---

archive/issue_comments_150115.json:
```json
{
    "body": "You are right about these, I should have closed them earlier. The problem is with plot() using floats. The result of `simplify_rational()` is still accurate.",
    "created_at": "2015-12-04T01:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12623#issuecomment-150115",
    "user": "@orlitzky"
}
```

You are right about these, I should have closed them earlier. The problem is with plot() using floats. The result of `simplify_rational()` is still accurate.



---

archive/issue_comments_150116.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-12-04T01:19:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12623#issuecomment-150116",
    "user": "@orlitzky"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_150117.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-12-04T01:19:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12623#issuecomment-150117",
    "user": "@orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_150118.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2015-12-04T22:13:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12623",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12623#issuecomment-150118",
    "user": "@vbraun"
}
```

Resolution: invalid
