# Issue 34532: use libgap in simplicial_complex

Issue created by migration from https://trac.sagemath.org/ticket/34769

Original creator: dimpase

Original creation time: 2022-11-21 13:53:32

CC:  jhpalmieri

this is just a 1-line change.

A part of #26902


---

Comment by dimpase created at 2022-11-21 14:25:39

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2022-11-21 18:57:07

Would it make sense to make it a 2-line change instead?

```diff
diff --git a/src/sage/topology/simplicial_complex.py b/src/sage/topology/simplicial_complex.py
index fe237895d8..857430769a 100644
--- a/src/sage/topology/simplicial_complex.py
+++ b/src/sage/topology/simplicial_complex.py
@@ -4081,7 +4081,7 @@ class SimplicialComplex(Parent, GenericCellComplex):
             return self.connected_component(Simplex([base_point])).fundamental_group(simplify=simplify)
 
         from sage.groups.free_group import FreeGroup
-        from sage.libs.gap.libgap import libgap as gap
+        from sage.libs.gap.libgap import libgap
         G = self.graph()
         # If the vertices and edges of G are not sortable, e.g., a mix
         # of str and int, Sage+Python 3 may raise a TypeError when
@@ -4098,7 +4098,7 @@ class SimplicialComplex(Parent, GenericCellComplex):
                 for e in G2.edges(sort=True)
                 if e not in spanning_tree]
         if len(gens) == 0:
-            return gap.TrivialGroup()
+            return libgap.TrivialGroup()
 
         # Edges in the graph may be sorted differently than in the
         # simplicial complex, so convert the edges to frozensets so we
```



---

Comment by dimpase created at 2022-11-21 20:18:22

We have imported `libgap as gap`, thus `gap` is the right thing in the scope, no?


---

Comment by jhpalmieri created at 2022-11-21 20:42:14

Your proposed change is this:

```diff
diff --git a/src/sage/topology/simplicial_complex.py b/src/sage/topology/simplicial_complex.py
index 736df96..fe23789 100644
--- a/src/sage/topology/simplicial_complex.py
+++ b/src/sage/topology/simplicial_complex.py
@@ -4081,7 +4081,7 @@ class SimplicialComplex(Parent, GenericCellComplex):
             return self.connected_component(Simplex([base_point])).fundamental_group(simplify=simplify)
 
         from sage.groups.free_group import FreeGroup
-        from sage.interfaces.gap import gap
+        from sage.libs.gap.libgap import libgap as gap
         G = self.graph()
         # If the vertices and edges of G are not sortable, e.g., a mix
         # of str and int, Sage+Python 3 may raise a TypeError when
```

I'm suggesting just doing `from ... import libgap` and also changing the one other line that uses `gap`.


---

Comment by jhpalmieri created at 2022-11-21 20:44:53

The Sage library tends to use `from ... import libgap` rather than `from ... import libgap as gap`, and consistency might be good.


---

Comment by dimpase created at 2022-11-21 21:21:54

as our aim is to drop pexpect gap, and rename libgap -> gap, I don't see why we should keep the convention you mentioned. It is less changes yo be done at the final stage this way (with your proposal,we will then have to change back all `libgap.` to `gap.`


---

Comment by jhpalmieri created at 2022-11-21 22:07:31

It's fine, we can leave this as is, but currently searching for "import libgap as gap" (that is, `git grep "import.*libgap.*as.*gap`) comes up empty in the Sage library. I didn't know there was a proposal to rename libgap to gap.


---

Comment by jhpalmieri created at 2022-11-21 22:07:31

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-12-03 00:45:12

Resolution: fixed
