# Issue 34532: use libgap in simplicial_complex

archive/issues_034532.json:
```json
{
    "body": "CC:  @jhpalmieri\n\nthis is just a 1-line change.\n\nA part of #26902\n\nIssue created by migration from https://trac.sagemath.org/ticket/34769\n\n",
    "created_at": "2022-11-21T13:53:32Z",
    "labels": [
        "component: algebraic topology"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "use libgap in simplicial_complex",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34532",
    "user": "https://github.com/dimpase"
}
```
CC:  @jhpalmieri

this is just a 1-line change.

A part of #26902

Issue created by migration from https://trac.sagemath.org/ticket/34769





---

archive/issue_comments_488106.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-11-21T14:25:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34532#issuecomment-488106",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_488107.json:
```json
{
    "body": "Would it make sense to make it a 2-line change instead?\n\n```diff\ndiff --git a/src/sage/topology/simplicial_complex.py b/src/sage/topology/simplicial_complex.py\nindex fe237895d8..857430769a 100644\n--- a/src/sage/topology/simplicial_complex.py\n+++ b/src/sage/topology/simplicial_complex.py\n@@ -4081,7 +4081,7 @@ class SimplicialComplex(Parent, GenericCellComplex):\n             return self.connected_component(Simplex([base_point])).fundamental_group(simplify=simplify)\n \n         from sage.groups.free_group import FreeGroup\n-        from sage.libs.gap.libgap import libgap as gap\n+        from sage.libs.gap.libgap import libgap\n         G = self.graph()\n         # If the vertices and edges of G are not sortable, e.g., a mix\n         # of str and int, Sage+Python 3 may raise a TypeError when\n@@ -4098,7 +4098,7 @@ class SimplicialComplex(Parent, GenericCellComplex):\n                 for e in G2.edges(sort=True)\n                 if e not in spanning_tree]\n         if len(gens) == 0:\n-            return gap.TrivialGroup()\n+            return libgap.TrivialGroup()\n \n         # Edges in the graph may be sorted differently than in the\n         # simplicial complex, so convert the edges to frozensets so we\n```\n",
    "created_at": "2022-11-21T18:57:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34532#issuecomment-488107",
    "user": "https://github.com/jhpalmieri"
}
```

Would it make sense to make it a 2-line change instead?

```diff
diff --git a/src/sage/topology/simplicial_complex.py b/src/sage/topology/simplicial_complex.py
index fe237895d8..857430769a 100644
--- a/src/sage/topology/simplicial_complex.py
+++ b/src/sage/topology/simplicial_complex.py
@@ -4081,7 +4081,7 @@ class SimplicialComplex(Parent, GenericCellComplex):
             return self.connected_component(Simplex([base_point])).fundamental_group(simplify=simplify)
 
         from sage.groups.free_group import FreeGroup
-        from sage.libs.gap.libgap import libgap as gap
+        from sage.libs.gap.libgap import libgap
         G = self.graph()
         # If the vertices and edges of G are not sortable, e.g., a mix
         # of str and int, Sage+Python 3 may raise a TypeError when
@@ -4098,7 +4098,7 @@ class SimplicialComplex(Parent, GenericCellComplex):
                 for e in G2.edges(sort=True)
                 if e not in spanning_tree]
         if len(gens) == 0:
-            return gap.TrivialGroup()
+            return libgap.TrivialGroup()
 
         # Edges in the graph may be sorted differently than in the
         # simplicial complex, so convert the edges to frozensets so we
```




---

archive/issue_comments_488108.json:
```json
{
    "body": "We have imported `libgap as gap`, thus `gap` is the right thing in the scope, no?",
    "created_at": "2022-11-21T20:18:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34532#issuecomment-488108",
    "user": "https://github.com/dimpase"
}
```

We have imported `libgap as gap`, thus `gap` is the right thing in the scope, no?



---

archive/issue_comments_488109.json:
```json
{
    "body": "Your proposed change is this:\n\n```diff\ndiff --git a/src/sage/topology/simplicial_complex.py b/src/sage/topology/simplicial_complex.py\nindex 736df96..fe23789 100644\n--- a/src/sage/topology/simplicial_complex.py\n+++ b/src/sage/topology/simplicial_complex.py\n@@ -4081,7 +4081,7 @@ class SimplicialComplex(Parent, GenericCellComplex):\n             return self.connected_component(Simplex([base_point])).fundamental_group(simplify=simplify)\n \n         from sage.groups.free_group import FreeGroup\n-        from sage.interfaces.gap import gap\n+        from sage.libs.gap.libgap import libgap as gap\n         G = self.graph()\n         # If the vertices and edges of G are not sortable, e.g., a mix\n         # of str and int, Sage+Python 3 may raise a TypeError when\n```\n\nI'm suggesting just doing `from ... import libgap` and also changing the one other line that uses `gap`.",
    "created_at": "2022-11-21T20:42:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34532#issuecomment-488109",
    "user": "https://github.com/jhpalmieri"
}
```

Your proposed change is this:

```diff
diff --git a/src/sage/topology/simplicial_complex.py b/src/sage/topology/simplicial_complex.py
index 736df96..fe23789 100644
--- a/src/sage/topology/simplicial_complex.py
+++ b/src/sage/topology/simplicial_complex.py
@@ -4081,7 +4081,7 @@ class SimplicialComplex(Parent, GenericCellComplex):
             return self.connected_component(Simplex([base_point])).fundamental_group(simplify=simplify)
 
         from sage.groups.free_group import FreeGroup
-        from sage.interfaces.gap import gap
+        from sage.libs.gap.libgap import libgap as gap
         G = self.graph()
         # If the vertices and edges of G are not sortable, e.g., a mix
         # of str and int, Sage+Python 3 may raise a TypeError when
```

I'm suggesting just doing `from ... import libgap` and also changing the one other line that uses `gap`.



---

archive/issue_comments_488110.json:
```json
{
    "body": "The Sage library tends to use `from ... import libgap` rather than `from ... import libgap as gap`, and consistency might be good.",
    "created_at": "2022-11-21T20:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34532#issuecomment-488110",
    "user": "https://github.com/jhpalmieri"
}
```

The Sage library tends to use `from ... import libgap` rather than `from ... import libgap as gap`, and consistency might be good.



---

archive/issue_comments_488111.json:
```json
{
    "body": "as our aim is to drop pexpect gap, and rename libgap -> gap, I don't see why we should keep the convention you mentioned. It is less changes yo be done at the final stage this way (with your proposal,we will then have to change back all `libgap.` to `gap.`",
    "created_at": "2022-11-21T21:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34532#issuecomment-488111",
    "user": "https://github.com/dimpase"
}
```

as our aim is to drop pexpect gap, and rename libgap -> gap, I don't see why we should keep the convention you mentioned. It is less changes yo be done at the final stage this way (with your proposal,we will then have to change back all `libgap.` to `gap.`



---

archive/issue_comments_488112.json:
```json
{
    "body": "It's fine, we can leave this as is, but currently searching for \"import libgap as gap\" (that is, `git grep \"import.*libgap.*as.*gap`) comes up empty in the Sage library. I didn't know there was a proposal to rename libgap to gap.",
    "created_at": "2022-11-21T22:07:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34532#issuecomment-488112",
    "user": "https://github.com/jhpalmieri"
}
```

It's fine, we can leave this as is, but currently searching for "import libgap as gap" (that is, `git grep "import.*libgap.*as.*gap`) comes up empty in the Sage library. I didn't know there was a proposal to rename libgap to gap.



---

archive/issue_comments_488113.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-11-21T22:07:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34532#issuecomment-488113",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_488114.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-12-03T00:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34532",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34532#issuecomment-488114",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
