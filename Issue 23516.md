# Issue 23516: Produce Linux binaries that don't require gfortran, or improve error and documentation

Issue created by migration from https://trac.sagemath.org/ticket/23753

Original creator: slelievre

Original creation time: 2017-08-30 14:24:03

CC:  vbraun

The sage-support mailing list gets numerous crash reports from users having installed
SageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log
containing a long traceback ending with an import error about libgfortran not being found,
typically:

```
ImportError: libgfortran.so.3: cannot open shared object file: No such file or directory
```


This import error is at the end of a very long traceback that users typically can't parse
(after all, it's often their first time starting sage, they're not experts at reading tracebacks).

Posters of such crash report get told to install gfortran by using one of the following

```
sudo apt-get install gfortran
sudo yum install gfortran
sudo yaourt install gfortran
```

etc., which usually solves the problem for them.

Ideally,

(a) could Linux binaries be produced that can work without gfortran being installed?

Otherwise,

(b) this requirement should appear on the installation page at
http://doc.sagemath.org/html/en/installation/binary.html
-- more precisely, in the "Linux and macOS" section:
http://doc.sagemath.org/html/en/installation/binary.html#linux-and-os-x

(c) for linux binary installs, could the presence of gfortran be tested the first time
Sage is started, and failing its presence, could Sage exit straight away
with a short and helpful error message such as


```
Sage requires gfortran to be installed. Please install it before you can run Sage.
Depending on your Linux distribution, this could be by typing one of the following

    sudo apt-get install gfortran # Debian, Ubuntu
    sudo yum install gfortran     # Red Hat, Fedora
    sudo yaourt install gfortran  # Arch Linux
```


rather than the crash log containing the long traceback with the import error at the end?


---

Comment by jdemeyer created at 2017-08-30 15:16:10

Changing component from PLEASE CHANGE to distribution.


---

Comment by jdemeyer created at 2017-08-30 15:16:10

Do you know which binaries have this problem? All of them or only a certain subset?

At a minimum, can you point to one specific problematic binary in order to test things?


---

Comment by jdemeyer created at 2017-08-30 15:16:10

Changing type from PLEASE CHANGE to defect.


---

Comment by slelievre created at 2017-08-30 15:43:07

I would guess all of them, from the number of crash reports we get on a regular basis.

I edited the ticket description adding a link to a sage-support search for [ Sage_crash_report.txt ].

Users don't always provide details of which Linux distribution they are using, but some do.

I don't think the IPython post-mortem reports they attach inform us on what binary was used.


---

Comment by jdemeyer created at 2017-08-30 17:14:25

Next time we get such a report, we should ask *exactly* which binary they used.


---

Comment by vbraun created at 2017-08-30 22:24:42

Afaik no Linux binaries contain gfortran; It shoud just be a matter of adding SAGE_INSTALL_GCC (or so) to the builder script https://github.com/sagemath/binary-pkg


---

Comment by jdemeyer created at 2017-08-31 08:16:07

Resolution: invalid


---

Comment by jdemeyer created at 2017-08-31 08:16:07

Replying to [comment:4 vbraun]:
> It shoud just be a matter of adding SAGE_INSTALL_GCC (or so)

So this isn't done already? That explains everything then...
