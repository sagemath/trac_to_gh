# Issue 23516: Produce Linux binaries that don't require gfortran, or improve error and documentation

archive/issues_023516.json:
```json
{
    "body": "CC:  @vbraun\n\nThe sage-support mailing list gets numerous crash reports from users having installed\nSageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log\ncontaining a long traceback ending with an import error about libgfortran not being found,\ntypically:\n\n```\nImportError: libgfortran.so.3: cannot open shared object file: No such file or directory\n```\n\n\nThis import error is at the end of a very long traceback that users typically can't parse\n(after all, it's often their first time starting sage, they're not experts at reading tracebacks).\n\nPosters of such crash report get told to install gfortran by using one of the following\n\n```\nsudo apt-get install gfortran\nsudo yum install gfortran\nsudo yaourt install gfortran\n```\n\netc., which usually solves the problem for them.\n\nIdeally,\n\n(a) could Linux binaries be produced that can work without gfortran being installed?\n\nOtherwise,\n\n(b) this requirement should appear on the installation page at\nhttp://doc.sagemath.org/html/en/installation/binary.html\n-- more precisely, in the \"Linux and macOS\" section:\nhttp://doc.sagemath.org/html/en/installation/binary.html#linux-and-os-x\n\n(c) for linux binary installs, could the presence of gfortran be tested the first time\nSage is started, and failing its presence, could Sage exit straight away\nwith a short and helpful error message such as\n\n\n```\nSage requires gfortran to be installed. Please install it before you can run Sage.\nDepending on your Linux distribution, this could be by typing one of the following\n\n    sudo apt-get install gfortran # Debian, Ubuntu\n    sudo yum install gfortran     # Red Hat, Fedora\n    sudo yaourt install gfortran  # Arch Linux\n```\n\n\nrather than the crash log containing the long traceback with the import error at the end?\n\nIssue created by migration from https://trac.sagemath.org/ticket/23753\n\n",
    "created_at": "2017-08-30T14:24:03Z",
    "labels": [
        "component: please change"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Produce Linux binaries that don't require gfortran, or improve error and documentation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23516",
    "user": "https://github.com/slel"
}
```
CC:  @vbraun

The sage-support mailing list gets numerous crash reports from users having installed
SageMath from binaries for Linux, and seeing Sage crash when first started, with a crash log
containing a long traceback ending with an import error about libgfortran not being found,
typically:

```
ImportError: libgfortran.so.3: cannot open shared object file: No such file or directory
```


This import error is at the end of a very long traceback that users typically can't parse
(after all, it's often their first time starting sage, they're not experts at reading tracebacks).

Posters of such crash report get told to install gfortran by using one of the following

```
sudo apt-get install gfortran
sudo yum install gfortran
sudo yaourt install gfortran
```

etc., which usually solves the problem for them.

Ideally,

(a) could Linux binaries be produced that can work without gfortran being installed?

Otherwise,

(b) this requirement should appear on the installation page at
http://doc.sagemath.org/html/en/installation/binary.html
-- more precisely, in the "Linux and macOS" section:
http://doc.sagemath.org/html/en/installation/binary.html#linux-and-os-x

(c) for linux binary installs, could the presence of gfortran be tested the first time
Sage is started, and failing its presence, could Sage exit straight away
with a short and helpful error message such as


```
Sage requires gfortran to be installed. Please install it before you can run Sage.
Depending on your Linux distribution, this could be by typing one of the following

    sudo apt-get install gfortran # Debian, Ubuntu
    sudo yum install gfortran     # Red Hat, Fedora
    sudo yaourt install gfortran  # Arch Linux
```


rather than the crash log containing the long traceback with the import error at the end?

Issue created by migration from https://trac.sagemath.org/ticket/23753





---

archive/issue_comments_329153.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to distribution.",
    "created_at": "2017-08-30T15:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23516#issuecomment-329153",
    "user": "https://github.com/jdemeyer"
}
```

Changing component from PLEASE CHANGE to distribution.



---

archive/issue_comments_329154.json:
```json
{
    "body": "Do you know which binaries have this problem? All of them or only a certain subset?\n\nAt a minimum, can you point to one specific problematic binary in order to test things?",
    "created_at": "2017-08-30T15:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23516#issuecomment-329154",
    "user": "https://github.com/jdemeyer"
}
```

Do you know which binaries have this problem? All of them or only a certain subset?

At a minimum, can you point to one specific problematic binary in order to test things?



---

archive/issue_comments_329155.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2017-08-30T15:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23516#issuecomment-329155",
    "user": "https://github.com/jdemeyer"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_329156.json:
```json
{
    "body": "I would guess all of them, from the number of crash reports we get on a regular basis.\n\nI edited the ticket description adding a link to a sage-support search for [ Sage_crash_report.txt ].\n\nUsers don't always provide details of which Linux distribution they are using, but some do.\n\nI don't think the IPython post-mortem reports they attach inform us on what binary was used.",
    "created_at": "2017-08-30T15:43:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23516#issuecomment-329156",
    "user": "https://github.com/slel"
}
```

I would guess all of them, from the number of crash reports we get on a regular basis.

I edited the ticket description adding a link to a sage-support search for [ Sage_crash_report.txt ].

Users don't always provide details of which Linux distribution they are using, but some do.

I don't think the IPython post-mortem reports they attach inform us on what binary was used.



---

archive/issue_comments_329157.json:
```json
{
    "body": "Next time we get such a report, we should ask **exactly** which binary they used.",
    "created_at": "2017-08-30T17:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23516#issuecomment-329157",
    "user": "https://github.com/jdemeyer"
}
```

Next time we get such a report, we should ask **exactly** which binary they used.



---

archive/issue_comments_329158.json:
```json
{
    "body": "Afaik no Linux binaries contain gfortran; It shoud just be a matter of adding SAGE_INSTALL_GCC (or so) to the builder script https://github.com/sagemath/binary-pkg",
    "created_at": "2017-08-30T22:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23516#issuecomment-329158",
    "user": "https://github.com/vbraun"
}
```

Afaik no Linux binaries contain gfortran; It shoud just be a matter of adding SAGE_INSTALL_GCC (or so) to the builder script https://github.com/sagemath/binary-pkg



---

archive/issue_events_060627.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-31T08:16:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23516",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23516#event-60627"
}
```



---

archive/issue_comments_329159.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2017-08-31T08:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23516#issuecomment-329159",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: invalid



---

archive/issue_events_060628.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-08-31T08:16:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/23516",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23516#event-60628"
}
```



---

archive/issue_comments_329160.json:
```json
{
    "body": "Replying to [comment:4 vbraun]:\n> It shoud just be a matter of adding SAGE_INSTALL_GCC (or so)\n\nSo this isn't done already? That explains everything then...",
    "created_at": "2017-08-31T08:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23516",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23516#issuecomment-329160",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:4 vbraun]:
> It shoud just be a matter of adding SAGE_INSTALL_GCC (or so)

So this isn't done already? That explains everything then...
