# Issue 12715: Optional args in Matrix_Mod submatrix method

archive/issues_012715.json:
```json
{
    "body": "Assignee: jason, was\n\nKeywords: matrix, finite field, submatrix\n\nWhen computing the smith form of a matrix (over a finite field) it promts an error\n\n\n```python\nsage: AA = matrix(Zmod(2), [[1,1],[1,0],[0,1]])\nsage: AA.smith_form()\n```\n\n\nIt promts\n\n```\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"_sage_input_100.py\", line 10, in <module>\n    exec compile(u'open(\"___code___.py\",\"w\").write(\"# -*- coding: utf-8 -*-\\\\n\" + _support_.preparse_worksheet_cell(base64.b64decode(\"QUEuc21pdGhfZm9ybSgp\"),globals())+\"\\\\n\"); execfile(os.path.abspath(\"___code___.py\"))\n  File \"\", line 1, in <module>\n   \n  File \"/tmp/tmpXWhShB/___code___.py\", line 2, in <module>\n    exec compile(u'AA.smith_form()\n  File \"\", line 1, in <module>\n   \n  File \"matrix2.pyx\", line 10512, in sage.matrix.matrix2.Matrix.smith_form (sage/matrix/matrix2.c:49285)\n  File \"matrix_mod2_dense.pyx\", line 1666, in sage.matrix.matrix_mod2_dense.Matrix_mod2_dense.submatrix (sage/matrix/matrix_mod2_dense.c:9696)\nTypeError: submatrix() takes exactly 4 positional arguments (2 given)\n```\n\n\nIt seems like the \"Matrix_mod\" submatrix method doesn't have \"ncols\" and \"nrows\" as optional parameters (like the base Matrix class).\n\nI used Sage 4.8.0 in an Ubuntu 12.04 (32 bits).\n\nsage-support discussion: [https://groups.google.com/forum/?fromgroups#!topic/sage-support/TssHVf3oUeM](https://groups.google.com/forum/?fromgroups#!topic/sage-support/TssHVf3oUeM)\n\nIssue created by migration from https://trac.sagemath.org/ticket/12887\n\n",
    "created_at": "2012-04-27T14:17:08Z",
    "labels": [
        "linear algebra",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Optional args in Matrix_Mod submatrix method",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12715",
    "user": "dscharles"
}
```
Assignee: jason, was

Keywords: matrix, finite field, submatrix

When computing the smith form of a matrix (over a finite field) it promts an error


```python
sage: AA = matrix(Zmod(2), [[1,1],[1,0],[0,1]])
sage: AA.smith_form()
```


It promts

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "_sage_input_100.py", line 10, in <module>
    exec compile(u'open("___code___.py","w").write("# -*- coding: utf-8 -*-\\n" + _support_.preparse_worksheet_cell(base64.b64decode("QUEuc21pdGhfZm9ybSgp"),globals())+"\\n"); execfile(os.path.abspath("___code___.py"))
  File "", line 1, in <module>
   
  File "/tmp/tmpXWhShB/___code___.py", line 2, in <module>
    exec compile(u'AA.smith_form()
  File "", line 1, in <module>
   
  File "matrix2.pyx", line 10512, in sage.matrix.matrix2.Matrix.smith_form (sage/matrix/matrix2.c:49285)
  File "matrix_mod2_dense.pyx", line 1666, in sage.matrix.matrix_mod2_dense.Matrix_mod2_dense.submatrix (sage/matrix/matrix_mod2_dense.c:9696)
TypeError: submatrix() takes exactly 4 positional arguments (2 given)
```


It seems like the "Matrix_mod" submatrix method doesn't have "ncols" and "nrows" as optional parameters (like the base Matrix class).

I used Sage 4.8.0 in an Ubuntu 12.04 (32 bits).

sage-support discussion: [https://groups.google.com/forum/?fromgroups#!topic/sage-support/TssHVf3oUeM](https://groups.google.com/forum/?fromgroups#!topic/sage-support/TssHVf3oUeM)

Issue created by migration from https://trac.sagemath.org/ticket/12887





---

archive/issue_comments_152266.json:
```json
{
    "body": "Attachment [trac_12887_submatrix_over_finite_field.patch](tarball://root/attachments/some-uuid/ticket12887/trac_12887_submatrix_over_finite_field.patch) by dscharles created at 2012-04-27 14:23:23",
    "created_at": "2012-04-27T14:23:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152266",
    "user": "dscharles"
}
```

Attachment [trac_12887_submatrix_over_finite_field.patch](tarball://root/attachments/some-uuid/ticket12887/trac_12887_submatrix_over_finite_field.patch) by dscharles created at 2012-04-27 14:23:23



---

archive/issue_comments_152267.json:
```json
{
    "body": "I attached a patch. I hope it's well done (It's my first one...)",
    "created_at": "2012-04-27T14:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152267",
    "user": "dscharles"
}
```

I attached a patch. I hope it's well done (It's my first one...)



---

archive/issue_comments_152268.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-04-30T16:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152268",
    "user": "malb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_152269.json:
```json
{
    "body": "Patch looks good to me. \n\nPS: Can you add yourself to http://trac.sagemath.org/sage_trac/wiki please.",
    "created_at": "2012-04-30T16:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152269",
    "user": "malb"
}
```

Patch looks good to me. 

PS: Can you add yourself to http://trac.sagemath.org/sage_trac/wiki please.



---

archive/issue_comments_152270.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-04-30T16:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152270",
    "user": "malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_152271.json:
```json
{
    "body": "It also required some output changes.",
    "created_at": "2012-04-30T17:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152271",
    "user": "dscharles"
}
```

It also required some output changes.



---

archive/issue_comments_152272.json:
```json
{
    "body": "Attachment [trac_12887_changed_output.patch](tarball://root/attachments/some-uuid/ticket12887/trac_12887_changed_output.patch) by dscharles created at 2012-04-30 17:49:20\n\nI'm sorry I didn't realized before, but it also was necessary to change the output in order to work properly.\n(Should I open another ticket?)\n\nBefore the last patch:\n\n```python\nsage: A = matrix([[1,1],[2,2],[3,3]])\nsage: B = matrix(Zmod(2), [[1,1],[2,2],[3,3]])\nsage: A.submatrix(2,2)\n[]\nsage: A.submatrix(2,2).ncols()\n0\nsage: A.submatrix(2,2).nrows()\n1\nsage: B\n[]\nsage: B.submatrix(2,2).ncols()\n0\nsage: B.submatrix(2,2).nrows()\n0\n```\n\n\nAfter the patch\n\n```python\nsage: B.submatrix(2,2)\n[]\nsage: B.submatrix(2,2).ncols()\n0\nsage: B.submatrix(2,2).nrows()\n1\n```\n\n\nWith that done, the smith_form method worked with some (easy) examples.",
    "created_at": "2012-04-30T17:49:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152272",
    "user": "dscharles"
}
```

Attachment [trac_12887_changed_output.patch](tarball://root/attachments/some-uuid/ticket12887/trac_12887_changed_output.patch) by dscharles created at 2012-04-30 17:49:20

I'm sorry I didn't realized before, but it also was necessary to change the output in order to work properly.
(Should I open another ticket?)

Before the last patch:

```python
sage: A = matrix([[1,1],[2,2],[3,3]])
sage: B = matrix(Zmod(2), [[1,1],[2,2],[3,3]])
sage: A.submatrix(2,2)
[]
sage: A.submatrix(2,2).ncols()
0
sage: A.submatrix(2,2).nrows()
1
sage: B
[]
sage: B.submatrix(2,2).ncols()
0
sage: B.submatrix(2,2).nrows()
0
```


After the patch

```python
sage: B.submatrix(2,2)
[]
sage: B.submatrix(2,2).ncols()
0
sage: B.submatrix(2,2).nrows()
1
```


With that done, the smith_form method worked with some (easy) examples.



---

archive/issue_comments_152273.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2012-05-01T09:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152273",
    "user": "malb"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_152274.json:
```json
{
    "body": "Looks good, can you merge the two patches? Also, if you change stuff like that you should switch from *positive review* to *needs review* below.",
    "created_at": "2012-05-01T09:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152274",
    "user": "malb"
}
```

Looks good, can you merge the two patches? Also, if you change stuff like that you should switch from *positive review* to *needs review* below.



---

archive/issue_comments_152275.json:
```json
{
    "body": "Attachment [trac_12887_Matrix_mod_submatrix_fix.patch](tarball://root/attachments/some-uuid/ticket12887/trac_12887_Matrix_mod_submatrix_fix.patch) by dscharles created at 2012-05-01 11:14:47\n\nMerged patch",
    "created_at": "2012-05-01T11:14:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152275",
    "user": "dscharles"
}
```

Attachment [trac_12887_Matrix_mod_submatrix_fix.patch](tarball://root/attachments/some-uuid/ticket12887/trac_12887_Matrix_mod_submatrix_fix.patch) by dscharles created at 2012-05-01 11:14:47

Merged patch



---

archive/issue_comments_152276.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-05-01T11:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152276",
    "user": "dscharles"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_152277.json:
```json
{
    "body": "Merged patch uploaded.",
    "created_at": "2012-05-01T11:16:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152277",
    "user": "dscharles"
}
```

Merged patch uploaded.



---

archive/issue_comments_152278.json:
```json
{
    "body": "Looks good, but could you also add those examples from this ticket to the doctests to test that your code produces the desired outcome. Sorry for only mentioning that now!",
    "created_at": "2012-05-01T11:38:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152278",
    "user": "malb"
}
```

Looks good, but could you also add those examples from this ticket to the doctests to test that your code produces the desired outcome. Sorry for only mentioning that now!



---

archive/issue_comments_152279.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2014-04-03T08:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152279",
    "user": "rws"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_152280.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-04-30T08:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152280",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_152281.json:
```json
{
    "body": "Let us close this old ticket. Works now:\n\n```\nsage: AA = matrix(Zmod(2), [[1,1],[1,0],[0,1]])\nsage: AA.smith_form()\n(\n[1 0]  [1 0 0]       \n[0 1]  [1 1 0]  [1 1]\n[0 0], [1 1 1], [0 1]\n)\n```\n",
    "created_at": "2018-04-30T08:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152281",
    "user": "chapoton"
}
```

Let us close this old ticket. Works now:

```
sage: AA = matrix(Zmod(2), [[1,1],[1,0],[0,1]])
sage: AA.smith_form()
(
[1 0]  [1 0 0]       
[0 1]  [1 1 0]  [1 1]
[0 0], [1 1 1], [0 1]
)
```




---

archive/issue_comments_152282.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-06-02T11:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152282",
    "user": "sbrandhorst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_152283.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2018-11-08T16:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12715",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12715#issuecomment-152283",
    "user": "embray"
}
```

Resolution: worksforme
