# Issue 12715: Optional args in Matrix_Mod submatrix method

Issue created by migration from Trac.

Original creator: dscharles

Original creation time: 2012-04-27 14:17:08

Assignee: jason, was

Keywords: matrix, finite field, submatrix

When computing the smith form of a matrix (over a finite field) it promts an error


```python
sage: AA = matrix(Zmod(2), [[1,1],[1,0],[0,1]])
sage: AA.smith_form()
```


It promts

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "_sage_input_100.py", line 10, in <module>
    exec compile(u'open("___code___.py","w").write("# -*- coding: utf-8 -*-\\n" + _support_.preparse_worksheet_cell(base64.b64decode("QUEuc21pdGhfZm9ybSgp"),globals())+"\\n"); execfile(os.path.abspath("___code___.py"))
  File "", line 1, in <module>
   
  File "/tmp/tmpXWhShB/___code___.py", line 2, in <module>
    exec compile(u'AA.smith_form()
  File "", line 1, in <module>
   
  File "matrix2.pyx", line 10512, in sage.matrix.matrix2.Matrix.smith_form (sage/matrix/matrix2.c:49285)
  File "matrix_mod2_dense.pyx", line 1666, in sage.matrix.matrix_mod2_dense.Matrix_mod2_dense.submatrix (sage/matrix/matrix_mod2_dense.c:9696)
TypeError: submatrix() takes exactly 4 positional arguments (2 given)
```


It seems like the "Matrix_mod" submatrix method doesn't have "ncols" and "nrows" as optional parameters (like the base Matrix class).

I used Sage 4.8.0 in an Ubuntu 12.04 (32 bits).

sage-support discussion: [https://groups.google.com/forum/?fromgroups#!topic/sage-support/TssHVf3oUeM](https://groups.google.com/forum/?fromgroups#!topic/sage-support/TssHVf3oUeM)


---

Attachment


---

Comment by dscharles created at 2012-04-27 14:24:16

I attached a patch. I hope it's well done (It's my first one...)


---

Comment by malb created at 2012-04-30 16:47:09

Changing status from new to needs_review.


---

Comment by malb created at 2012-04-30 16:47:09

Patch looks good to me. 

PS: Can you add yourself to http://trac.sagemath.org/sage_trac/wiki please.


---

Comment by malb created at 2012-04-30 16:47:20

Changing status from needs_review to positive_review.


---

Comment by dscharles created at 2012-04-30 17:40:28

It also required some output changes.


---

Attachment

I'm sorry I didn't realized before, but it also was necessary to change the output in order to work properly.
(Should I open another ticket?)

Before the last patch:

```python
sage: A = matrix([[1,1],[2,2],[3,3]])
sage: B = matrix(Zmod(2), [[1,1],[2,2],[3,3]])
sage: A.submatrix(2,2)
[]
sage: A.submatrix(2,2).ncols()
0
sage: A.submatrix(2,2).nrows()
1
sage: B
[]
sage: B.submatrix(2,2).ncols()
0
sage: B.submatrix(2,2).nrows()
0
```


After the patch

```python
sage: B.submatrix(2,2)
[]
sage: B.submatrix(2,2).ncols()
0
sage: B.submatrix(2,2).nrows()
1
```


With that done, the smith_form method worked with some (easy) examples.


---

Comment by malb created at 2012-05-01 09:21:21

Changing status from positive_review to needs_work.


---

Comment by malb created at 2012-05-01 09:21:21

Looks good, can you merge the two patches? Also, if you change stuff like that you should switch from _positive review_ to _needs review_ below.


---

Attachment

Merged patch


---

Comment by dscharles created at 2012-05-01 11:16:38

Changing status from needs_work to needs_review.


---

Comment by dscharles created at 2012-05-01 11:16:38

Merged patch uploaded.


---

Comment by malb created at 2012-05-01 11:38:17

Looks good, but could you also add those examples from this ticket to the doctests to test that your code produces the desired outcome. Sorry for only mentioning that now!


---

Comment by rws created at 2014-04-03 08:56:41

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2018-04-30 08:48:32

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2018-04-30 08:48:32

Let us close this old ticket. Works now:

```
sage: AA = matrix(Zmod(2), [[1,1],[1,0],[0,1]])
sage: AA.smith_form()
(
[1 0]  [1 0 0]       
[0 1]  [1 1 0]  [1 1]
[0 0], [1 1 1], [0 1]
)
```



---

Comment by sbrandhorst created at 2018-06-02 11:26:36

Changing status from needs_review to positive_review.


---

Comment by embray created at 2018-11-08 16:12:46

Resolution: worksforme
