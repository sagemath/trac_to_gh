# Issue 14556: %psearch with non-invertible matrix fails

archive/issues_014556.json:
```json
{
    "body": "Assignee: was\n\nKeywords: sage-mode ipython matrix\n\nSage-mode uses `%psearch -a TEXT*` for tab completion.  This doesn't work for a matrix which isn't invertible:\n\n\n```\nsage: F = GF(2)\nsage: M = Matrix(F,2,2,[0,1,0,1])\nsage: %psearch -a M.*\n---------------------------------------------------------------------------\nZeroDivisionError                         Traceback (most recent call last)\n/Users/ivanandres/SageStuff/sage-5.8.beta4/local/lib/python2.7/site-packages/IPython/core/oinspect.pyc in psearch(self, pattern, ns_table, ns_search, ignore_case, show_all)\n    836             namespaces_seen.add(id(ns))\n    837             tmp_res = list_namespace(ns, type_pattern, filter,\n--> 838                                     ignore_case=ignore_case, show_all=show_all)\n    839             search_result.update(tmp_res)\n    840\n\n/Users/ivanandres/SageStuff/sage-5.8.beta4/local/lib/python2.7/site-packages/IPython/utils/wildcard.pyc in list_namespace(namespace, type_pattern, filter, ignore_case, show_all)\n    104         results = {}\n    105         for name, obj in filtered.iteritems():\n--> 106             ns = list_namespace(dict_dir(obj), type_pattern,\n    107                                 \".\".join(pattern_list[1:]),\n    108                                 ignore_case=ignore_case, show_all=show_all)\n\n/Users/ivanandres/SageStuff/sage-5.8.beta4/local/lib/python2.7/site-packages/IPython/utils/wildcard.pyc in dict_dir(obj)\n     68        # thing.  In particular, Traits use this pattern\n     69        try:\n---> 70            ns[key] = getattr(obj, key)\n     71        except AttributeError:\n     72            pass\n\n/Users/ivanandres/SageStuff/sage-5.8.beta4/local/lib/python2.7/site-packages/sage/matrix/matrix2.so in sage.matrix.matrix2.Matrix.I.__get__ (sage/matrix/matrix2.c:62997)()\n\n/Users/ivanandres/SageStuff/sage-5.8.beta4/local/lib/python2.7/site-packages/sage/matrix/matrix2.so in sage.matrix.matrix2.Matrix.inverse (sage/matrix/matrix2.c:40047)()\n\n/Users/ivanandres/SageStuff/sage-5.8.beta4/local/lib/python2.7/site-packages/sage/matrix/matrix_mod2_dense.so in sage.matrix.matrix_mod2_dense.Matrix_mod2_dense.__invert__ (sage/matrix/matrix_mod2_dense.c:6905)()\n\nZeroDivisionError: Matrix does not have full rank.\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/14760\n\n",
    "created_at": "2013-06-17T19:45:04Z",
    "labels": [
        "user interface",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "%psearch with non-invertible matrix fails",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14556",
    "user": "iandrus"
}
```
Assignee: was

Keywords: sage-mode ipython matrix

Sage-mode uses `%psearch -a TEXT*` for tab completion.  This doesn't work for a matrix which isn't invertible:


```
sage: F = GF(2)
sage: M = Matrix(F,2,2,[0,1,0,1])
sage: %psearch -a M.*
---------------------------------------------------------------------------
ZeroDivisionError                         Traceback (most recent call last)
/Users/ivanandres/SageStuff/sage-5.8.beta4/local/lib/python2.7/site-packages/IPython/core/oinspect.pyc in psearch(self, pattern, ns_table, ns_search, ignore_case, show_all)
    836             namespaces_seen.add(id(ns))
    837             tmp_res = list_namespace(ns, type_pattern, filter,
--> 838                                     ignore_case=ignore_case, show_all=show_all)
    839             search_result.update(tmp_res)
    840

/Users/ivanandres/SageStuff/sage-5.8.beta4/local/lib/python2.7/site-packages/IPython/utils/wildcard.pyc in list_namespace(namespace, type_pattern, filter, ignore_case, show_all)
    104         results = {}
    105         for name, obj in filtered.iteritems():
--> 106             ns = list_namespace(dict_dir(obj), type_pattern,
    107                                 ".".join(pattern_list[1:]),
    108                                 ignore_case=ignore_case, show_all=show_all)

/Users/ivanandres/SageStuff/sage-5.8.beta4/local/lib/python2.7/site-packages/IPython/utils/wildcard.pyc in dict_dir(obj)
     68        # thing.  In particular, Traits use this pattern
     69        try:
---> 70            ns[key] = getattr(obj, key)
     71        except AttributeError:
     72            pass

/Users/ivanandres/SageStuff/sage-5.8.beta4/local/lib/python2.7/site-packages/sage/matrix/matrix2.so in sage.matrix.matrix2.Matrix.I.__get__ (sage/matrix/matrix2.c:62997)()

/Users/ivanandres/SageStuff/sage-5.8.beta4/local/lib/python2.7/site-packages/sage/matrix/matrix2.so in sage.matrix.matrix2.Matrix.inverse (sage/matrix/matrix2.c:40047)()

/Users/ivanandres/SageStuff/sage-5.8.beta4/local/lib/python2.7/site-packages/sage/matrix/matrix_mod2_dense.so in sage.matrix.matrix_mod2_dense.Matrix_mod2_dense.__invert__ (sage/matrix/matrix_mod2_dense.c:6905)()

ZeroDivisionError: Matrix does not have full rank.
```


Issue created by migration from https://trac.sagemath.org/ticket/14760





---

archive/issue_comments_184780.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2013-06-17T19:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14556",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14556#issuecomment-184780",
    "user": "iandrus"
}
```

Changing type from PLEASE CHANGE to defect.
