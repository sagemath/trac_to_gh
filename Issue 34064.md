# Issue 34064: Remove claims that Cygwin is supported

Issue created by migration from https://trac.sagemath.org/ticket/34301

Original creator: mkoeppe

Original creation time: 2022-08-07 19:29:24

CC:  jhpalmieri tscrim slelievre

https://trac.sagemath.org/wiki/ReleaseTours/sage-9.7#Sage9.7doesnotsupportCygwinuseWindowsSubsystemforLinuxinstead

We update README.md and manuals accordingly.


---

Comment by mkoeppe created at 2022-08-07 19:48:24

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-08-07 19:48:24

New commits:


---

Comment by mkoeppe created at 2022-08-07 20:32:15

Also https://wiki.sagemath.org/SageWindows needs to be updated 

And https://github.com/sagemath/sage-windows should be archived

And https://www.sagemath.org/download.html needs to be updated


---

Comment by mkoeppe created at 2022-08-07 20:38:06

Replying to [comment:8 mkoeppe]:
> Also https://wiki.sagemath.org/SageWindows needs to be updated 

I've removed a big chunk of outdated information.

There is a bit of info on there that should be reviewed for usefulness for #31156 (Document running Sage + Jupyter in WSL, with a browser in Windows)


---

Comment by mkoeppe created at 2022-08-07 23:54:46

Changing priority from critical to blocker.


---

Comment by tscrim created at 2022-08-08 04:45:33

It seems like we have a more nuanced description of support we have for it. It seems like the biggest issue is in docbuilding and (recently) giac. If we fully drop support for it as the ticket proposes, then almost certainly we will never get it back.

I am willing to do what I can to help as I have a Windows machine (that previously built Sage successfully on at least 9.5 IIRC, but I think it was one of the 9.6 beta versions). Although I am a bit stretched thin right now and package building is not something I know much about. However, I do think it is not something we should drop for WSL for the next few years until we are more certain most people have migrated to a Windows version that has WSL.

If we do decide to fully drop support (rather than just being honest about what we know doesn't work), we might want to include instructions to build the last stable version that we know works.


---

Comment by tscrim created at 2022-08-08 04:47:32

Replying to [comment:9 mkoeppe]:
> Replying to [comment:8 mkoeppe]:
> > Also https://wiki.sagemath.org/SageWindows needs to be updated 
> 
> I've removed a big chunk of outdated information.
> 
> There is a bit of info on there that should be reviewed for usefulness for #31156 (Document running Sage + Jupyter in WSL, with a browser in Windows)

Does that also work for pdfs (e.g., `view(x^2 + cos(x))`) and `animate()` outputs?


---

Comment by mkoeppe created at 2022-08-08 04:52:40

Replying to [comment:11 tscrim]:
> If we fully drop support for it as the ticket proposes, then almost certainly we will never get it back.

It's trivial to revert the doc changes when someone fixes the build.

Until then it's crucial that we don't mislead prospective users.


---

Comment by tscrim created at 2022-08-08 05:03:18

Replying to [comment:13 mkoeppe]:
> Replying to [comment:11 tscrim]:
> > If we fully drop support for it as the ticket proposes, then almost certainly we will never get it back.
> 
> It's trivial to revert the doc changes when someone fixes the build.

The documentation change is trivial, yes. However, it is the policy change of no longer putting any effort to care about Cygwin builds means is will further bitrot. So it will likely take much more effort to resupport Cygwin in the future.

> Until then it's crucial that we don't mislead prospective users.

+1 but this ticket isn't just about that. The biggest issue with Cygwin right now is the building of giac #34269, right? Once this is resolved, it is expected that Sage builds, starts, and passes (most) tests on Cygwin, right?


---

Comment by mkoeppe created at 2022-08-08 05:20:54

Replying to [comment:14 tscrim]:
> The biggest issue with Cygwin right now is the building of giac #34269, right? 
> Once this is resolved, it is expected that Sage builds, starts, and passes (most) tests on Cygwin, right?

No, it was already badly broken in the 9.6 series. Per â€‹https://groups.google.com/g/sage-release/c/GOGWk66zaCQ/m/M_jQiOjaAAAJ (March 2022) "various segfaults, likely related to GAP", in the testsuite.

The broken Giac build stops us from seeing other build problems with packages that we updated in the 9.7 series. Giac upstream does not test Cygwin, and I have no line of communication with them. There's also another critical bug in Giac (#33848) and no reaction from upstream.


---

Comment by mkoeppe created at 2022-08-08 15:32:07

Replying to [comment:11 tscrim]:
> If we do decide to fully drop support (rather than just being honest about what we know doesn't work), we might want to include instructions to build the last stable version that we know works.

The release notes (https://trac.sagemath.org/wiki/ReleaseTours/sage-9.7#Sage9.7doesnotsupportCygwinuseWindowsSubsystemforLinuxinstead) are a good place for this, but not the documentation


---

Comment by mkoeppe created at 2022-08-09 16:57:39

Replying to [comment:14 tscrim]:
> Replying to [comment:13 mkoeppe]:
> > Replying to [comment:11 tscrim]:
> > > If we fully drop support for it as the ticket proposes, then almost certainly we will never get it back.
> > 
> > It's trivial to revert the doc changes when someone fixes the build.
> 
> The documentation change is trivial, yes. However, it is the policy change of no longer putting any effort to care about Cygwin builds means is will further bitrot. So it will likely take much more effort to resupport Cygwin in the future.
> 
> > Until then it's crucial that we don't mislead prospective users.
> 
> +1 but this ticket isn't just about that. 

I worded https://trac.sagemath.org/wiki/ReleaseTours/sage-9.7#Sage9.7doesnotsupportCygwinuseWindowsSubsystemforLinuxinstead carefully -- it does not say that we have "dropped" Cygwin support; it only says that Sage 9.7 doesn't support it, and it lists the issues.

Also note that this ticket does not remove the Cygwin testing infrastructure -- in fact, I made major investments in it during the 9.7 cycle - #33791, which makes it very easy for upstream projects to reuse this infrastructure to test the portability of their project. (see for example https://github.com/latte-int/latte/blob/master/.github/workflows/ci-sage.yml#L93)
But we need engagement of developers on our side and in upstream projects with the Cygwin port.


---

Comment by tscrim created at 2022-08-11 00:45:47

Thanks. I weakened the language `should` -> `can` to further indicate that we hope to bring back Cygwin support in future versions.

I will also try to be more active in maintaining Cygwin support, but starting sometime next month, I will become very busy with family stuff. At the very least, I can test stuff on my Windows machine.


---

Comment by tscrim created at 2022-08-11 00:50:28

I should point out that we should make similar changes here for this ticket. In particular, saying Cygwin support has discontinued means, to me, that we will not bring back support later on.

Thinking a bit more, I think we should leave the Cygwin installation guide in the docs because someone might want to install, say, 9.5 using Cygwin. This way the instructions are still there for people who might need to use Cygwin and are fine with an older version.


---

Comment by mkoeppe created at 2022-08-11 00:53:59

It says that about the Windows binaries, not the build from source.


---

Comment by tscrim created at 2022-08-11 00:55:27

Ah, right, we've discontinued all binaries.


---

Comment by mkoeppe created at 2022-08-11 00:56:57

Replying to [comment:20 tscrim]:
> I think we should leave the Cygwin installation guide in the docs because someone might want to install, say, 9.5 using Cygwin. This way the instructions are still there for people who might need to use Cygwin and are fine with an older version.

People who want to install the old version need to read the README of the old version.


---

Comment by tscrim created at 2022-08-11 01:00:14

Replying to [comment:23 mkoeppe]:
> Replying to [comment:20 tscrim]:
> > I think we should leave the Cygwin installation guide in the docs because someone might want to install, say, 9.5 using Cygwin. This way the instructions are still there for people who might need to use Cygwin and are fine with an older version.
> 
> People who want to install the old version need to read the README of the old version.

But it won't be in our online documentation any more for installing from source. If nobody knows it exists, then there is no compelling reason to try to support Cygwin anymore.


---

Comment by mkoeppe created at 2022-08-11 01:18:39

OK I think we can restore the instructions in the installation guide and include what used to be in the README.md there.


---

Comment by mkoeppe created at 2022-08-11 01:28:55

Changing status from needs_review to needs_work.


---

Comment by git created at 2022-08-11 02:34:38

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2022-08-11 02:34:49

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2022-08-11 02:49:18

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2022-08-11 02:49:18

Thank you. This is okay with me.


---

Comment by mkoeppe created at 2022-08-11 04:19:26

Doc does not build - 

```
[sagemath_doc_html-none] [installat] /__w/sagetrac-mirror/sagetrac-mirror/src/doc/en/installation/source.rst:359: WARNING: Inline interpreted text or phrase reference start-string without end-string.
[sagemath_doc_html-none] [installat] /__w/sagetrac-mirror/sagetrac-mirror/src/doc/en/installation/source.rst:359: WARNING: hardcoded link 'https://trac.sagemath.org/query?status=closed&status=needs_info&status=needs_review&status=needs_work&status=new&status=positive_review&component=porting%3A+Cygwin&milestone=sage-9.8&milestone=sage-9.7&milestone=sage-9.6&milestone=sage-9.5&milestone=sage-9.4&milestone=sage-9.3&milestone=sage-9.2&milestone=sage-9.1&col=id&col=summary&col=milestone&col=status&col=priority&col=changetime&col=author&col=reviewer&desc=1&order=changetime' could be replaced by an extlink (try using ':trac:`query?status=closed&status=needs_info&status=needs_review&status=needs_work&status=new&status=positive_review&component=porting%3A+Cygwin&milestone=sage-9.8&milestone=sage-9.7&milestone=sage-9.6&milestone=sage-9.5&milestone=sage-9.4&milestone=sage-9.3&milestone=sage-9.2&milestone=sage-9.1&col=id&col=summary&col=milestone&col=status&col=priority&col=changetime&col=author&col=reviewer&desc=1&order=changetime`' instead)
```



---

Comment by git created at 2022-08-11 04:22:53

Changing status from positive_review to needs_review.


---

Comment by git created at 2022-08-11 04:22:53

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by mkoeppe created at 2022-08-11 04:23:02

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-08-28 13:32:49

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2022-08-28 13:32:49

PDF docs don't build


---

Comment by git created at 2022-08-28 16:12:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-08-28 16:12:52

Sorry, fixed now


---

Comment by mkoeppe created at 2022-08-28 16:12:52

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2022-08-30 06:52:02

Resolution: fixed
