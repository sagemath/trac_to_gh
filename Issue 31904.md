# Issue 31904: Unstable doctest involving permutation groups

Issue created by migration from https://trac.sagemath.org/ticket/32141

Original creator: @kliem

Original creation time: 2021-07-06 05:51:06

Keywords: permutation group, gap


```
sage -t --long --random-seed=177974800756175182386455054172924741312 src/sage/groups/perm_gps/permgroup.py
**********************************************************************
File "src/sage/groups/perm_gps/permgroup.py", line 2896, in sage.groups.perm_gps.permgroup.PermutationGroup_generic.as_finitely_presented_group
Failed example:
    G.as_finitely_presented_group().as_permutation_group().is_isomorphic(G)
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.7/site-packages/sage/groups/finitely_presented.py", line 1001, in as_permutation_group
        coset_table = self.gap().CosetTable(trivial_subgroup).sage()
      File "sage/libs/gap/element.pyx", line 2677, in sage.libs.gap.element.GapElement_MethodProxy.__call__ (build/cythonized/sage/libs/gap/element.c:20775)
        return GapElement_Function.__call__(self, * ([self.first_argument] + list(args)))
      File "sage/libs/gap/element.pyx", line 2525, in sage.libs.gap.element.GapElement_Function.__call__ (build/cythonized/sage/libs/gap/element.c:19779)
        sig_on()
    sage.libs.gap.util.GAPError: Error, the coset enumeration has defined more than 4096000 cosets

    During handling of the above exception, another exception occurred:

    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 718, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1137, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.groups.perm_gps.permgroup.PermutationGroup_generic.as_finitely_presented_group[13]>", line 1, in <module>
        G.as_finitely_presented_group().as_permutation_group().is_isomorphic(G)
      File "/srv/public/kliem/sage/local/lib/python3.7/site-packages/sage/groups/finitely_presented.py", line 1003, in as_permutation_group
        raise ValueError('Coset enumeration exceeded limit, is the group finite?')
    ValueError: Coset enumeration exceeded limit, is the group finite?
**********************************************************************
1 item had failures:
   1 of  27 in sage.groups.perm_gps.permgroup.PermutationGroup_generic.as_finitely_presented_group
    [919 tests, 1 failure, 16.75 s]
```



