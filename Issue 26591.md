# Issue 26591: pep8 cleaning of bandwidth.pyx

archive/issues_026591.json:
```json
{
    "body": "CC:  @tscrim\n\nClean the file\n\nIssue created by migration from https://trac.sagemath.org/ticket/26828\n\n",
    "created_at": "2018-12-05T01:49:48Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.7",
    "title": "pep8 cleaning of bandwidth.pyx",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26591",
    "user": "https://github.com/dcoudert"
}
```
CC:  @tscrim

Clean the file

Issue created by migration from https://trac.sagemath.org/ticket/26828





---

archive/issue_comments_373323.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-12-05T01:51:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373323",
    "user": "https://github.com/dcoudert"
}
```

New commits:



---

archive/issue_comments_373324.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-12-05T01:51:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373324",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_373325.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-01-03T08:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373325",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_373326.json:
```json
{
    "body": "rebase on 8.6.beta1 and fix a merge conflict.",
    "created_at": "2019-01-03T08:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373326",
    "user": "https://github.com/dcoudert"
}
```

rebase on 8.6.beta1 and fix a merge conflict.



---

archive/issue_comments_373327.json:
```json
{
    "body": "Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.",
    "created_at": "2019-01-15T18:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373327",
    "user": "https://github.com/embray"
}
```

Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.



---

archive/issue_comments_373328.json:
```json
{
    "body": "**Some pep8 remarks**\n\n- 1. Block comment should start with '# ': l104, l112.\n- 2. l246 to 254 change :\\\\\n\n\n```\n    cdef unsigned short ** d                = <unsigned short **> mem.allocarray(n,   sizeof(unsigned short *))\n    cdef unsigned short *  distances        = <unsigned short *>  mem.allocarray(n*n, sizeof(unsigned short  ))\n    cdef index_t *         current          = <index_t *>         mem.allocarray(n,   sizeof(index_t))\n    cdef index_t *         ordering         = <index_t *>         mem.allocarray(n,   sizeof(index_t))\n    cdef index_t *         left_to_order    = <index_t *>         mem.allocarray(n,   sizeof(index_t))\n    cdef index_t *         index_array_tmp  = <index_t *>         mem.allocarray(n,   sizeof(index_t))\n    cdef range_t *         range_arrays     = <range_t *>         mem.allocarray(n*n, sizeof(range_t))\n    cdef range_t **        ith_range_array  = <range_t **>        mem.allocarray(n,   sizeof(range_t *))\n    cdef range_t *         range_array_tmp  = <range_t *>         mem.allocarray(n,   sizeof(range_t))\n```\n\ninto \n\n```\n    cdef unsigned short ** d = <unsigned short **> mem.allocarray(n, sizeof(unsigned short *))\n    cdef unsigned short * distances = <unsigned short *> mem.allocarray(n * n, sizeof(unsigned short  ))\n    cdef index_t * current = <index_t *> mem.allocarray(n, sizeof(index_t))\n    cdef index_t * ordering = <index_t *> mem.allocarray(n, sizeof(index_t))\n    cdef index_t * left_to_order = <index_t *> mem.allocarray(n, sizeof(index_t))\n    cdef index_t * index_array_tmp = <index_t *> mem.allocarray(n, sizeof(index_t))\n    cdef range_t * range_arrays = <range_t *> mem.allocarray(n * n, sizeof(range_t))\n    cdef range_t ** ith_range_array = <range_t **> mem.allocarray(n, sizeof(range_t *))\n    cdef range_t * range_array_tmp = <range_t *> mem.allocarray(n, sizeof(range_t))\n```\n\n\n- 3. l289 to 296 change:\\\\\n\n\n```\ncdef bint bandwidth_C(int n, int k,\n                     unsigned short ** d,\n                     index_t *         current,         # choice of vertex for the current position\n                     index_t *         ordering,        # the actual ordering of vertices\n                     index_t *         left_to_order,   # begins with the assigned vertices, ends with the others\n                     index_t *         index_array_tmp, # tmp space\n                     range_t **        ith_range_array, # array of ranges, for every step of the algorithm\n                     range_t *         range_array_tmp):# tmp space\n\n```\n\ninto\n\n```\ncdef bint bandwidth_C(int n, int k,\n                      unsigned short ** d,\n                      index_t * current,           # choice of vertex for the current position\n                      index_t * ordering,          # the actual ordering of vertices\n                      index_t * left_to_order,     # begins with the assigned vertices, ends with the others\n                      index_t * index_array_tmp,   # tmp space\n                      range_t ** ith_range_array,  # array of ranges, for every step of the algorithm\n                      range_t * range_array_tmp):  # tmp space\n```\n\n\n- 4. At least two spaces before inline comment : \nl299 `cdef int pi # the position`\nl300 `cdef int vi # the vertex`\n\n- 5. Missing whitespace around operator:\nl354 and l355 `ith_range_array[i+1]`\n\n**Python question**\n\n\n```\n-            if i == 0:\n+            if not i:\n```\n\nWhat is the reason for using `not i` rather than `i == 0` ? \\\\\n\n`not i` mean `i == 0 or i is None` is it ok to do the same thing in both case ?\\\\\nFor what i see `i is None` should never happen but if it do i don't think it should pass silently.",
    "created_at": "2019-01-16T16:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373328",
    "user": "https://github.com/vinklein"
}
```

**Some pep8 remarks**

- 1. Block comment should start with '# ': l104, l112.
- 2. l246 to 254 change :\\


```
    cdef unsigned short ** d                = <unsigned short **> mem.allocarray(n,   sizeof(unsigned short *))
    cdef unsigned short *  distances        = <unsigned short *>  mem.allocarray(n*n, sizeof(unsigned short  ))
    cdef index_t *         current          = <index_t *>         mem.allocarray(n,   sizeof(index_t))
    cdef index_t *         ordering         = <index_t *>         mem.allocarray(n,   sizeof(index_t))
    cdef index_t *         left_to_order    = <index_t *>         mem.allocarray(n,   sizeof(index_t))
    cdef index_t *         index_array_tmp  = <index_t *>         mem.allocarray(n,   sizeof(index_t))
    cdef range_t *         range_arrays     = <range_t *>         mem.allocarray(n*n, sizeof(range_t))
    cdef range_t **        ith_range_array  = <range_t **>        mem.allocarray(n,   sizeof(range_t *))
    cdef range_t *         range_array_tmp  = <range_t *>         mem.allocarray(n,   sizeof(range_t))
```

into 

```
    cdef unsigned short ** d = <unsigned short **> mem.allocarray(n, sizeof(unsigned short *))
    cdef unsigned short * distances = <unsigned short *> mem.allocarray(n * n, sizeof(unsigned short  ))
    cdef index_t * current = <index_t *> mem.allocarray(n, sizeof(index_t))
    cdef index_t * ordering = <index_t *> mem.allocarray(n, sizeof(index_t))
    cdef index_t * left_to_order = <index_t *> mem.allocarray(n, sizeof(index_t))
    cdef index_t * index_array_tmp = <index_t *> mem.allocarray(n, sizeof(index_t))
    cdef range_t * range_arrays = <range_t *> mem.allocarray(n * n, sizeof(range_t))
    cdef range_t ** ith_range_array = <range_t **> mem.allocarray(n, sizeof(range_t *))
    cdef range_t * range_array_tmp = <range_t *> mem.allocarray(n, sizeof(range_t))
```


- 3. l289 to 296 change:\\


```
cdef bint bandwidth_C(int n, int k,
                     unsigned short ** d,
                     index_t *         current,         # choice of vertex for the current position
                     index_t *         ordering,        # the actual ordering of vertices
                     index_t *         left_to_order,   # begins with the assigned vertices, ends with the others
                     index_t *         index_array_tmp, # tmp space
                     range_t **        ith_range_array, # array of ranges, for every step of the algorithm
                     range_t *         range_array_tmp):# tmp space

```

into

```
cdef bint bandwidth_C(int n, int k,
                      unsigned short ** d,
                      index_t * current,           # choice of vertex for the current position
                      index_t * ordering,          # the actual ordering of vertices
                      index_t * left_to_order,     # begins with the assigned vertices, ends with the others
                      index_t * index_array_tmp,   # tmp space
                      range_t ** ith_range_array,  # array of ranges, for every step of the algorithm
                      range_t * range_array_tmp):  # tmp space
```


- 4. At least two spaces before inline comment : 
l299 `cdef int pi # the position`
l300 `cdef int vi # the vertex`

- 5. Missing whitespace around operator:
l354 and l355 `ith_range_array[i+1]`

**Python question**


```
-            if i == 0:
+            if not i:
```

What is the reason for using `not i` rather than `i == 0` ? \\

`not i` mean `i == 0 or i is None` is it ok to do the same thing in both case ?\\
For what i see `i is None` should never happen but if it do i don't think it should pass silently.



---

archive/issue_comments_373329.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-01-17T10:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373329",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_373330.json:
```json
{
    "body": "Thank you for your help in reviewing this ticket.\n\nI'm ccing Travis as he may answer the `not i` instead of `i == 0` question.",
    "created_at": "2019-01-17T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373330",
    "user": "https://github.com/dcoudert"
}
```

Thank you for your help in reviewing this ticket.

I'm ccing Travis as he may answer the `not i` instead of `i == 0` question.



---

archive/issue_comments_373331.json:
```json
{
    "body": "Here we have `cdef int i` so it does not matter at all whether you write `i == 0` or `not i`. It's just a matter of style.\n\nThe advantage of `i == 0` is that it makes it clear that you're really testing for 0.",
    "created_at": "2019-01-17T15:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373331",
    "user": "https://github.com/jdemeyer"
}
```

Here we have `cdef int i` so it does not matter at all whether you write `i == 0` or `not i`. It's just a matter of style.

The advantage of `i == 0` is that it makes it clear that you're really testing for 0.



---

archive/issue_comments_373332.json:
```json
{
    "body": "I am ok with \u200be6ba36c. Concerning the `not i` vs `i == 0` it's up to you dcoudert you can set the ticket to positive review if you want to keep `not i`.",
    "created_at": "2019-01-17T15:37:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373332",
    "user": "https://github.com/vinklein"
}
```

I am ok with â€‹e6ba36c. Concerning the `not i` vs `i == 0` it's up to you dcoudert you can set the ticket to positive review if you want to keep `not i`.



---

archive/issue_comments_373333.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-01-17T16:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373333",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_373334.json:
```json
{
    "body": "Thank you for the clarification. I changed to `i == 0` to make it clear.",
    "created_at": "2019-01-17T16:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373334",
    "user": "https://github.com/dcoudert"
}
```

Thank you for the clarification. I changed to `i == 0` to make it clear.



---

archive/issue_comments_373335.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-01-17T17:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373335",
    "user": "https://github.com/vinklein"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_373336.json:
```json
{
    "body": "Looks good to me.",
    "created_at": "2019-01-17T17:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373336",
    "user": "https://github.com/vinklein"
}
```

Looks good to me.



---

archive/issue_comments_373337.json:
```json
{
    "body": "I'm not wild about the change\n\n\n```diff\n-    cdef unsigned short ** d                = <unsigned short **> mem.allocarray(n,   sizeof(unsigned short *))\n-    cdef unsigned short *  distances        = <unsigned short *>  mem.allocarray(n*n, sizeof(unsigned short  ))\n-    cdef index_t *         current          = <index_t *>         mem.allocarray(n,   sizeof(index_t))\n-    cdef index_t *         ordering         = <index_t *>         mem.allocarray(n,   sizeof(index_t))\n-    cdef index_t *         left_to_order    = <index_t *>         mem.allocarray(n,   sizeof(index_t))\n-    cdef index_t *         index_array_tmp  = <index_t *>         mem.allocarray(n,   sizeof(index_t))\n-    cdef range_t *         range_arrays     = <range_t *>         mem.allocarray(n*n, sizeof(range_t))\n-    cdef range_t **        ith_range_array  = <range_t **>        mem.allocarray(n,   sizeof(range_t *))\n-    cdef range_t *         range_array_tmp  = <range_t *>         mem.allocarray(n,   sizeof(range_t))\n-\n-    cdef int i,j,kk\n+    cdef unsigned short ** d = <unsigned short **> mem.allocarray(n, sizeof(unsigned short *))\n+    cdef unsigned short * distances = <unsigned short *> mem.allocarray(n*n, sizeof(unsigned short))\n+    cdef index_t * current = <index_t *> mem.allocarray(n, sizeof(index_t))\n+    cdef index_t * ordering = <index_t *> mem.allocarray(n, sizeof(index_t))\n+    cdef index_t * left_to_order = <index_t *> mem.allocarray(n, sizeof(index_t))\n+    cdef index_t * index_array_tmp  = <index_t *> mem.allocarray(n, sizeof(index_t))\n+    cdef range_t * range_arrays = <range_t *> mem.allocarray(n*n, sizeof(range_t))\n+    cdef range_t ** ith_range_array  = <range_t **> mem.allocarray(n, sizeof(range_t *))\n+    cdef range_t * range_array_tmp  = <range_t *> mem.allocarray(n, sizeof(range_t))\n```\n\n\nAs much as I like to stick to pep8, and have sometimes made changes like this myself, between the two I genuinely find the original formatting more readable, in this particular case.  Nevertheless, it's not that important either way.",
    "created_at": "2019-01-18T12:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373337",
    "user": "https://github.com/embray"
}
```

I'm not wild about the change


```diff
-    cdef unsigned short ** d                = <unsigned short **> mem.allocarray(n,   sizeof(unsigned short *))
-    cdef unsigned short *  distances        = <unsigned short *>  mem.allocarray(n*n, sizeof(unsigned short  ))
-    cdef index_t *         current          = <index_t *>         mem.allocarray(n,   sizeof(index_t))
-    cdef index_t *         ordering         = <index_t *>         mem.allocarray(n,   sizeof(index_t))
-    cdef index_t *         left_to_order    = <index_t *>         mem.allocarray(n,   sizeof(index_t))
-    cdef index_t *         index_array_tmp  = <index_t *>         mem.allocarray(n,   sizeof(index_t))
-    cdef range_t *         range_arrays     = <range_t *>         mem.allocarray(n*n, sizeof(range_t))
-    cdef range_t **        ith_range_array  = <range_t **>        mem.allocarray(n,   sizeof(range_t *))
-    cdef range_t *         range_array_tmp  = <range_t *>         mem.allocarray(n,   sizeof(range_t))
-
-    cdef int i,j,kk
+    cdef unsigned short ** d = <unsigned short **> mem.allocarray(n, sizeof(unsigned short *))
+    cdef unsigned short * distances = <unsigned short *> mem.allocarray(n*n, sizeof(unsigned short))
+    cdef index_t * current = <index_t *> mem.allocarray(n, sizeof(index_t))
+    cdef index_t * ordering = <index_t *> mem.allocarray(n, sizeof(index_t))
+    cdef index_t * left_to_order = <index_t *> mem.allocarray(n, sizeof(index_t))
+    cdef index_t * index_array_tmp  = <index_t *> mem.allocarray(n, sizeof(index_t))
+    cdef range_t * range_arrays = <range_t *> mem.allocarray(n*n, sizeof(range_t))
+    cdef range_t ** ith_range_array  = <range_t **> mem.allocarray(n, sizeof(range_t *))
+    cdef range_t * range_array_tmp  = <range_t *> mem.allocarray(n, sizeof(range_t))
```


As much as I like to stick to pep8, and have sometimes made changes like this myself, between the two I genuinely find the original formatting more readable, in this particular case.  Nevertheless, it's not that important either way.



---

archive/issue_comments_373338.json:
```json
{
    "body": "I agree with you for the readability. \\\\\nBut i also assume that readability is something highly subjective.\\\\\n\nEither way the meaning of my pep8 remarks were \"If the goal of the ticket is to be as close as possible to pep8 you should do this\" rather than \"This is a problem blocking the ticket\".",
    "created_at": "2019-01-18T12:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373338",
    "user": "https://github.com/vinklein"
}
```

I agree with you for the readability. \\
But i also assume that readability is something highly subjective.\\

Either way the meaning of my pep8 remarks were "If the goal of the ticket is to be as close as possible to pep8 you should do this" rather than "This is a problem blocking the ticket".



---

archive/issue_comments_373339.json:
```json
{
    "body": "Yes, agreed all of the above :) I'm just making noise ignore me.",
    "created_at": "2019-01-18T13:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373339",
    "user": "https://github.com/embray"
}
```

Yes, agreed all of the above :) I'm just making noise ignore me.



---

archive/issue_comments_373340.json:
```json
{
    "body": "I also find the first presentation easier to read, but I will not fight for it. At least we have globally improved the presentation of this file.",
    "created_at": "2019-01-19T17:47:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373340",
    "user": "https://github.com/dcoudert"
}
```

I also find the first presentation easier to read, but I will not fight for it. At least we have globally improved the presentation of this file.



---

archive/issue_comments_373341.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-01-24T18:17:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26591#issuecomment-373341",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_024705.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-24T18:17:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/26591",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/26591#event-24705"
}
```
