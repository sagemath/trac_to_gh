# Issue 10340: make MIP backend interface more Python-ic

archive/issues_010340.json:
```json
{
    "body": "Assignee: @nathanncohen\n\nCC:  @nathanncohen\n\nKeywords: LP, MIP\n\nSage 4.6.1 will contain a new set of backend classes for mixed integer programming, which will make it easier to write interfaces for other solvers. There has been some off-list discussion about this interface and the follow changes were agreed upon:\n\n* :func: `add_linear_constraint` should allow ``lb`` and ``ub``  instead of direction and one bound, it's more expressive.\n* :func:`add_variable` should return the index of the newly created variable instead of the next index.\n* change :func:`add_linear_constraint` to accept any iterable of the form`` [(c,v) ...]``\n* ``min`` and ``max`` should be lower bound (or ``lb``) and upper bound (or ``ub``) to conform to MIP conventions\n* allow parameters in :func:`add_variable`\n\nIssue created by migration from https://trac.sagemath.org/ticket/10341\n\n",
    "created_at": "2010-11-26T16:51:56Z",
    "labels": [
        "component: linear programming"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.6.2",
    "title": "make MIP backend interface more Python-ic",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10340",
    "user": "https://github.com/malb"
}
```
Assignee: @nathanncohen

CC:  @nathanncohen

Keywords: LP, MIP

Sage 4.6.1 will contain a new set of backend classes for mixed integer programming, which will make it easier to write interfaces for other solvers. There has been some off-list discussion about this interface and the follow changes were agreed upon:

* :func: `add_linear_constraint` should allow ``lb`` and ``ub``  instead of direction and one bound, it's more expressive.
* :func:`add_variable` should return the index of the newly created variable instead of the next index.
* change :func:`add_linear_constraint` to accept any iterable of the form`` [(c,v) ...]``
* ``min`` and ``max`` should be lower bound (or ``lb``) and upper bound (or ``ub``) to conform to MIP conventions
* allow parameters in :func:`add_variable`

Issue created by migration from https://trac.sagemath.org/ticket/10341





---

archive/issue_comments_105924.json:
```json
{
    "body": "Attachment [mip_interface_changes.patch](tarball://root/attachments/some-uuid/ticket10341/mip_interface_changes.patch) by @malb created at 2010-11-26 16:54:08\n\nThe attached patch makes the necessary changes to the ``GenericBackend`` and the ``GLPK`` class. ``Coin`` and ``CPLEX`` are not done yet.",
    "created_at": "2010-11-26T16:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105924",
    "user": "https://github.com/malb"
}
```

Attachment [mip_interface_changes.patch](tarball://root/attachments/some-uuid/ticket10341/mip_interface_changes.patch) by @malb created at 2010-11-26 16:54:08

The attached patch makes the necessary changes to the ``GenericBackend`` and the ``GLPK`` class. ``Coin`` and ``CPLEX`` are not done yet.



---

archive/issue_comments_105925.json:
```json
{
    "body": "Changing status from new to needs_work.",
    "created_at": "2010-11-26T16:54:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105925",
    "user": "https://github.com/malb"
}
```

Changing status from new to needs_work.



---

archive/issue_comments_105926.json:
```json
{
    "body": "And here are the modifications to CPLEX and Coin. The doctests pass, plus all the methods of Graph/Digraph/GenericGraph pass with both GLPK, Coin and CPLEX.\n\nI agreed with you patch almost everywhere ! The only modification I made is the \"constraints\" argument you had placed in the add_constraint method. I really didn't get why you picked this name. I made it \"coefficients\", as the pairs are actually the coefficient of the sparse matrix, but of course we can discuss it during the review `:-)`\n\nNathann",
    "created_at": "2010-11-27T15:48:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105926",
    "user": "https://github.com/nathanncohen"
}
```

And here are the modifications to CPLEX and Coin. The doctests pass, plus all the methods of Graph/Digraph/GenericGraph pass with both GLPK, Coin and CPLEX.

I agreed with you patch almost everywhere ! The only modification I made is the "constraints" argument you had placed in the add_constraint method. I really didn't get why you picked this name. I made it "coefficients", as the pairs are actually the coefficient of the sparse matrix, but of course we can discuss it during the review `:-)`

Nathann



---

archive/issue_comments_105927.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-11-27T15:48:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105927",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_105928.json:
```json
{
    "body": "Attachment [trac_10431-part2.patch](tarball://root/attachments/some-uuid/ticket10341/trac_10431-part2.patch) by @nathanncohen created at 2010-11-27 15:49:22",
    "created_at": "2010-11-27T15:49:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105928",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [trac_10431-part2.patch](tarball://root/attachments/some-uuid/ticket10341/trac_10431-part2.patch) by @nathanncohen created at 2010-11-27 15:49:22



---

archive/issue_comments_105929.json:
```json
{
    "body": "Sure, your naming makes much more sense. Are you reviewing mine first, or is your patch your review? I can review your's then?",
    "created_at": "2010-11-27T16:18:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105929",
    "user": "https://github.com/malb"
}
```

Sure, your naming makes much more sense. Are you reviewing mine first, or is your patch your review? I can review your's then?



---

archive/issue_comments_105930.json:
```json
{
    "body": "I noticed two more interface \"issues\" we may decide to \"fix\":\n- ``p.row()`` returns two lists ``(indices,coeffs)`` right now, we could change it to return ``[(v1,c1),...,(vn,cn)]``.\n- We could allow an optional ``obj`` parameter which contains the coefficient of the new variable in the objective function?\n\nNeither of those changes I view as mandatory, just throwing the idea out there to see what others think.",
    "created_at": "2010-11-27T16:21:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105930",
    "user": "https://github.com/malb"
}
```

I noticed two more interface "issues" we may decide to "fix":
- ``p.row()`` returns two lists ``(indices,coeffs)`` right now, we could change it to return ``[(v1,c1),...,(vn,cn)]``.
- We could allow an optional ``obj`` parameter which contains the coefficient of the new variable in the objective function?

Neither of those changes I view as mandatory, just throwing the idea out there to see what others think.



---

archive/issue_comments_105931.json:
```json
{
    "body": "> Sure, your naming makes much more sense. Are you reviewing mine first, or is your patch your review?\n\nWell, I checked yours while working on it and fixed this \"constraints->coefficients\" inside of my patch ... If you review mine, both files will have be read by two sets of eyes, so I guess it would count as a valid review `:-)`\n\nNathann",
    "created_at": "2010-11-27T16:22:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105931",
    "user": "https://github.com/nathanncohen"
}
```

> Sure, your naming makes much more sense. Are you reviewing mine first, or is your patch your review?

Well, I checked yours while working on it and fixed this "constraints->coefficients" inside of my patch ... If you review mine, both files will have be read by two sets of eyes, so I guess it would count as a valid review `:-)`

Nathann



---

archive/issue_comments_105932.json:
```json
{
    "body": "Replying to [comment:5 malb]:\n> I noticed two more interface \"issues\" we may decide to \"fix\":\n>  - ``p.row()`` returns two lists ``(indices,coeffs)`` right now, we could change it to return ``[(v1,c1),...,(vn,cn)]``.\n>  - We could allow an optional ``obj`` parameter which contains the coefficient of the new variable in the objective function?\n> \n> Neither of those changes I view as mandatory, just throwing the idea out there to see what others think.\n\nThough they sound right... `:-)`\n\nNathann",
    "created_at": "2010-11-27T17:05:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105932",
    "user": "https://github.com/nathanncohen"
}
```

Replying to [comment:5 malb]:
> I noticed two more interface "issues" we may decide to "fix":
>  - ``p.row()`` returns two lists ``(indices,coeffs)`` right now, we could change it to return ``[(v1,c1),...,(vn,cn)]``.
>  - We could allow an optional ``obj`` parameter which contains the coefficient of the new variable in the objective function?
> 
> Neither of those changes I view as mandatory, just throwing the idea out there to see what others think.

Though they sound right... `:-)`

Nathann



---

archive/issue_comments_105933.json:
```json
{
    "body": "One more thing: you assume in your interface that one can change column and row names after those have been created. However, this isn't easy in SCIP (I could possibly hack around it by hacking around the API). Can we change that, e.g. by adding name as an optional parameter to add_variable() and add_linear_constraint()?",
    "created_at": "2010-11-27T18:13:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105933",
    "user": "https://github.com/malb"
}
```

One more thing: you assume in your interface that one can change column and row names after those have been created. However, this isn't easy in SCIP (I could possibly hack around it by hacking around the API). Can we change that, e.g. by adding name as an optional parameter to add_variable() and add_linear_constraint()?



---

archive/issue_comments_105934.json:
```json
{
    "body": "Well, if that's how SCIP's interface is written, I see no way around that .... `:-/`\n\nI just hope all these optional parameters won't hurt the interface's efficiency. I am eager  to have a working stable version of it in Sage, that would let me rebase other patches that have been made invalid because of the work we are doing here. I may spend some time trying to do some performance analysis on the interface afterwards `:-D`\n\nI'm already sick of these names... They are totally useless for all practical purposes, their only aim is to produce different results in p.show() (which doesn't even use them for the moment) or when writing the LP to files, which is totally orthogonal to actually *solving* them. Besides, each solver has a different way of managing them, especially Coin. I spent nights just fighting with it, for nothing in the end (oh yes.. it compiles, and there was no regression since the first version of LP.. Who the hell cares ?)\n\nJust to know : are you yourself using names for variables and constraints ? \n\nNathann\n\nP.S. : Oh, yes.. Let's add this optional argument if there is no way around. If at some point we find a trick, it won't be as hard to remove an optional argument from an interface as any other, as most of the method calls don't include it.\n\nSo in the end",
    "created_at": "2010-11-27T18:32:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105934",
    "user": "https://github.com/nathanncohen"
}
```

Well, if that's how SCIP's interface is written, I see no way around that .... `:-/`

I just hope all these optional parameters won't hurt the interface's efficiency. I am eager  to have a working stable version of it in Sage, that would let me rebase other patches that have been made invalid because of the work we are doing here. I may spend some time trying to do some performance analysis on the interface afterwards `:-D`

I'm already sick of these names... They are totally useless for all practical purposes, their only aim is to produce different results in p.show() (which doesn't even use them for the moment) or when writing the LP to files, which is totally orthogonal to actually *solving* them. Besides, each solver has a different way of managing them, especially Coin. I spent nights just fighting with it, for nothing in the end (oh yes.. it compiles, and there was no regression since the first version of LP.. Who the hell cares ?)

Just to know : are you yourself using names for variables and constraints ? 

Nathann

P.S. : Oh, yes.. Let's add this optional argument if there is no way around. If at some point we find a trick, it won't be as hard to remove an optional argument from an interface as any other, as most of the method calls don't include it.

So in the end



---

archive/issue_comments_105935.json:
```json
{
    "body": "I usually set them (e.g. when converting from polynomial systems), but I guess I'm not really using them usually.",
    "created_at": "2010-11-27T18:45:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105935",
    "user": "https://github.com/malb"
}
```

I usually set them (e.g. when converting from polynomial systems), but I guess I'm not really using them usually.



---

archive/issue_comments_105936.json:
```json
{
    "body": "So what are they useful for in SCIP ? Can it produce outputs at .lp or .mpw files ?\n\nNathann",
    "created_at": "2010-11-27T18:46:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105936",
    "user": "https://github.com/nathanncohen"
}
```

So what are they useful for in SCIP ? Can it produce outputs at .lp or .mpw files ?

Nathann



---

archive/issue_comments_105937.json:
```json
{
    "body": "Yep, and other formats. You can also query a variable (which is a C struct) for its name in your code. For example, you can search for variables by name.",
    "created_at": "2010-11-27T18:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105937",
    "user": "https://github.com/malb"
}
```

Yep, and other formats. You can also query a variable (which is a C struct) for its name in your code. For example, you can search for variables by name.



---

archive/issue_comments_105938.json:
```json
{
    "body": "Replying to [comment:12 malb]:\n> Yep, and other formats. \n\nNice !!\n\n> You can also query a variable (which is a C struct) for its name in your code. For example, you can search for variables by name.\n\nSame in GLPK. For the moment, I do not do any work on the matrix once it has been defined. Or rather, I only add more information, but never remove/read anything from it O_o\n\nNathann",
    "created_at": "2010-11-27T19:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105938",
    "user": "https://github.com/nathanncohen"
}
```

Replying to [comment:12 malb]:
> Yep, and other formats. 

Nice !!

> You can also query a variable (which is a C struct) for its name in your code. For example, you can search for variables by name.

Same in GLPK. For the moment, I do not do any work on the matrix once it has been defined. Or rather, I only add more information, but never remove/read anything from it O_o

Nathann



---

archive/issue_comments_105939.json:
```json
{
    "body": "Okay, what remains to be done then:\n* drop setting a variable name by col_name() \n* drop setting a constraint name by row_name()\n* add an optional parameter name to add_variable and add_linear_constraint\n* (optional) make row() return a list [(c1,v1),...,(cn,vn)]\n* (optional) add an optional parameter obj to add_variable\n* (optional) unify get/set_objective_value\n\nAnything I missed?",
    "created_at": "2010-11-27T19:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105939",
    "user": "https://github.com/malb"
}
```

Okay, what remains to be done then:
* drop setting a variable name by col_name() 
* drop setting a constraint name by row_name()
* add an optional parameter name to add_variable and add_linear_constraint
* (optional) make row() return a list [(c1,v1),...,(cn,vn)]
* (optional) add an optional parameter obj to add_variable
* (optional) unify get/set_objective_value

Anything I missed?



---

archive/issue_comments_105940.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2010-11-27T19:05:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105940",
    "user": "https://github.com/malb"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_105941.json:
```json
{
    "body": "Oh... Hem.. Actually, if we are to actually *drop* these methods... `-_-`\n\nI can not stand these names... Here is the problem : right now, there are no names when you add variables or constraints in MixedIntegerLinearProgram. When p.show() is called, the names are filled with something which makes them at least distinct and recognizable... But if we want to drop these methods, then p.show() has to be rewritten  too.. `-_-`\n\nNathann",
    "created_at": "2010-11-27T19:09:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105941",
    "user": "https://github.com/nathanncohen"
}
```

Oh... Hem.. Actually, if we are to actually *drop* these methods... `-_-`

I can not stand these names... Here is the problem : right now, there are no names when you add variables or constraints in MixedIntegerLinearProgram. When p.show() is called, the names are filled with something which makes them at least distinct and recognizable... But if we want to drop these methods, then p.show() has to be rewritten  too.. `-_-`

Nathann



---

archive/issue_comments_105942.json:
```json
{
    "body": "I would suggest an optional parameter \"name=None\" for add_variable()?",
    "created_at": "2010-11-27T21:12:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105942",
    "user": "https://github.com/malb"
}
```

I would suggest an optional parameter "name=None" for add_variable()?



---

archive/issue_comments_105943.json:
```json
{
    "body": "Replying to [comment:16 malb]:\n> I would suggest an optional parameter \"name=None\" for add_variable()?\nIf you need it for SCIP... `:-/`",
    "created_at": "2010-11-27T21:18:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105943",
    "user": "https://github.com/nathanncohen"
}
```

Replying to [comment:16 malb]:
> I would suggest an optional parameter "name=None" for add_variable()?
If you need it for SCIP... `:-/`



---

archive/issue_comments_105944.json:
```json
{
    "body": "Attachment [trac_10431-part3.patch](tarball://root/attachments/some-uuid/ticket10341/trac_10431-part3.patch) by @malb created at 2010-11-28 13:33:27",
    "created_at": "2010-11-28T13:33:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105944",
    "user": "https://github.com/malb"
}
```

Attachment [trac_10431-part3.patch](tarball://root/attachments/some-uuid/ticket10341/trac_10431-part3.patch) by @malb created at 2010-11-28 13:33:27



---

archive/issue_comments_105945.json:
```json
{
    "body": "I did the changes below for the GenericBackend and GLPK. Nathann, can you do Coin and CPLEX? I'll update my SCIP interface to see whether now I can pass all doctests with it?\n* drop setting a variable name by col_name()\n* drop setting a constraint name by row_name()\n* add an optional parameter name to add_variable and add_linear_constraint\n* add an optional parameter obj to add_variable\n* unify get/set_objective_coefficient",
    "created_at": "2010-11-28T13:34:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105945",
    "user": "https://github.com/malb"
}
```

I did the changes below for the GenericBackend and GLPK. Nathann, can you do Coin and CPLEX? I'll update my SCIP interface to see whether now I can pass all doctests with it?
* drop setting a variable name by col_name()
* drop setting a constraint name by row_name()
* add an optional parameter name to add_variable and add_linear_constraint
* add an optional parameter obj to add_variable
* unify get/set_objective_coefficient



---

archive/issue_comments_105946.json:
```json
{
    "body": "Hello !!!\n\nMartin, the point is that I do not know how to get rid of setting names through col_name and row_name for the moment ! It would mean show() would have to be rewritten, and I do not know how to do it nicely ! `:-/`\n\nIf you have any idea...\n\nNathann",
    "created_at": "2010-11-28T13:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105946",
    "user": "https://github.com/nathanncohen"
}
```

Hello !!!

Martin, the point is that I do not know how to get rid of setting names through col_name and row_name for the moment ! It would mean show() would have to be rewritten, and I do not know how to do it nicely ! `:-/`

If you have any idea...

Nathann



---

archive/issue_comments_105947.json:
```json
{
    "body": "My best bet would be to keep the name argument in row/col_name, and have SCIP ignore it when it is given or raise an exception. It is already the case for Coin which does not accept names for everything. We could then define a name when the variable/constraint is added (which would work for SCIP), or later on (which wouldn't for SCIP)..\n\nThen again, dropping everything name-related may be the best idea in the end. It's totally useless, it adds arguments/methods everywhere, and no two solvers handle it the same way. What do you think of it ?\n\nNathann",
    "created_at": "2010-11-28T14:02:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105947",
    "user": "https://github.com/nathanncohen"
}
```

My best bet would be to keep the name argument in row/col_name, and have SCIP ignore it when it is given or raise an exception. It is already the case for Coin which does not accept names for everything. We could then define a name when the variable/constraint is added (which would work for SCIP), or later on (which wouldn't for SCIP)..

Then again, dropping everything name-related may be the best idea in the end. It's totally useless, it adds arguments/methods everywhere, and no two solvers handle it the same way. What do you think of it ?

Nathann



---

archive/issue_comments_105948.json:
```json
{
    "body": "Did you check my patch? For some reason p.show() still works, or is the doctest not enough to ensure this?",
    "created_at": "2010-11-28T14:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105948",
    "user": "https://github.com/malb"
}
```

Did you check my patch? For some reason p.show() still works, or is the doctest not enough to ensure this?



---

archive/issue_comments_105949.json:
```json
{
    "body": "Replying to [comment:22 malb]:\n> Did you check my patch? For some reason p.show() still works, or is the doctest not enough to ensure this?\n\nWell, if your doctests pass then I guess the docstring is not enough. Anyway, for the moment the variable's names are just \"cached\" inside of MixedIntegerLinearProgram, because I thought stupid to call routines to updates the names unless someone wants to show() it or to export it to a file (which one never does when actually trying to solve them). There is a method named update_variable_name, which you commented in your patch, which does just that : before print show() or exporting the result, it updates the variable's names. This is the only way for the variables to have a name, and as it is usually done after the LP has been generated, it has to use the set_col_name commands. I remember having written somewhere that it was broken at some point, but I am never too eager to deal with this name mess.\n\nOh, of course everything works fine if you comment #update_variable_names. The .show() method will just print x_1, x_2, etc and the .lp and .mps files will have the same kind of names. I do not think it is that awful, and removing all this name-related stuff from the class will just make it easier to work with.\n\nI mean, it would have been nice to be able to deal with names, but :\n\n* The solvers all have a different way to deal with them. If we want to be able to deal with them all, we'll just end up with an awkward interface\n* You don't use them, I don't use them, they play no part in the actual solving of LP which stil;l has to be considered the main point here\n* The LP file formats deal with names, the solver's libraries too, but then again people write LP in languages like AMPL or Mathprog (for GLPK), which have a very basic set of commands available as they are only meant to deal with LP. In Sage, we have Python which is infinitely more expressive...\n\nIt looks like a lot of work for something we're not even sure we can use...\n\nNathann",
    "created_at": "2010-11-28T14:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105949",
    "user": "https://github.com/nathanncohen"
}
```

Replying to [comment:22 malb]:
> Did you check my patch? For some reason p.show() still works, or is the doctest not enough to ensure this?

Well, if your doctests pass then I guess the docstring is not enough. Anyway, for the moment the variable's names are just "cached" inside of MixedIntegerLinearProgram, because I thought stupid to call routines to updates the names unless someone wants to show() it or to export it to a file (which one never does when actually trying to solve them). There is a method named update_variable_name, which you commented in your patch, which does just that : before print show() or exporting the result, it updates the variable's names. This is the only way for the variables to have a name, and as it is usually done after the LP has been generated, it has to use the set_col_name commands. I remember having written somewhere that it was broken at some point, but I am never too eager to deal with this name mess.

Oh, of course everything works fine if you comment #update_variable_names. The .show() method will just print x_1, x_2, etc and the .lp and .mps files will have the same kind of names. I do not think it is that awful, and removing all this name-related stuff from the class will just make it easier to work with.

I mean, it would have been nice to be able to deal with names, but :

* The solvers all have a different way to deal with them. If we want to be able to deal with them all, we'll just end up with an awkward interface
* You don't use them, I don't use them, they play no part in the actual solving of LP which stil;l has to be considered the main point here
* The LP file formats deal with names, the solver's libraries too, but then again people write LP in languages like AMPL or Mathprog (for GLPK), which have a very basic set of commands available as they are only meant to deal with LP. In Sage, we have Python which is infinitely more expressive...

It looks like a lot of work for something we're not even sure we can use...

Nathann



---

archive/issue_comments_105950.json:
```json
{
    "body": "So what about:\n* If the user wants to use names then (s)he has to provide them at creation time of variables or constraints. \n* Solvers which don't support them, simply ignore them. \n* In show, if there is a custom name set (queried by backend.col_name() and backend.row_name()) then it is used for printing\n* When writing lp we do the same?",
    "created_at": "2010-11-28T14:27:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105950",
    "user": "https://github.com/malb"
}
```

So what about:
* If the user wants to use names then (s)he has to provide them at creation time of variables or constraints. 
* Solvers which don't support them, simply ignore them. 
* In show, if there is a custom name set (queried by backend.col_name() and backend.row_name()) then it is used for printing
* When writing lp we do the same?



---

archive/issue_comments_105951.json:
```json
{
    "body": "Replying to [comment:24 malb]:\n> So what about:\n>  * If the user wants to use names then (s)he has to provide them at creation time of variables or constraints. \n>  * Solvers which don't support them, simply ignore them. \n>  * In show, if there is a custom name set (queried by backend.col_name() and backend.row_name()) then it is used for printing\n>  * When writing lp we do the same?\n\n.....\n\nSounds logic enough `:-p`\n\nIt just exposes I had a stupid idea when I wrote this set_row_name in the first place. And I guess it's only fitting that I clean my own mess. Please comment the code from mip.py you need to make your patch run and pass doctests, and I'll change what is needed there when dealing with Coin and CPLEX !\n\nNathann",
    "created_at": "2010-11-28T14:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105951",
    "user": "https://github.com/nathanncohen"
}
```

Replying to [comment:24 malb]:
> So what about:
>  * If the user wants to use names then (s)he has to provide them at creation time of variables or constraints. 
>  * Solvers which don't support them, simply ignore them. 
>  * In show, if there is a custom name set (queried by backend.col_name() and backend.row_name()) then it is used for printing
>  * When writing lp we do the same?

.....

Sounds logic enough `:-p`

It just exposes I had a stupid idea when I wrote this set_row_name in the first place. And I guess it's only fitting that I clean my own mess. Please comment the code from mip.py you need to make your patch run and pass doctests, and I'll change what is needed there when dealing with Coin and CPLEX !

Nathann



---

archive/issue_comments_105952.json:
```json
{
    "body": "part3 passes doctests for me. However, so far it simply ignores names.",
    "created_at": "2010-11-28T14:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105952",
    "user": "https://github.com/malb"
}
```

part3 passes doctests for me. However, so far it simply ignores names.



---

archive/issue_comments_105953.json:
```json
{
    "body": "PS: Can you give me some examples which take about 1 minute to compute with GLPK from the graph module? I want to test the performance of the SCIP solver for those.",
    "created_at": "2010-11-28T14:43:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105953",
    "user": "https://github.com/malb"
}
```

PS: Can you give me some examples which take about 1 minute to compute with GLPK from the graph module? I want to test the performance of the SCIP solver for those.



---

archive/issue_comments_105954.json:
```json
{
    "body": "Oh ! To compare performances, you could just try a sage -t on graph.py digraph.py and generic_graph.py.\n\nI guess the performances would then depend on the kind of problem : all the solvers I tried until now are just awful for the minor method :\n\n\n```python\nsage: %time graphs.Grid2dGraph(5,5).minor(graphs.CompleteGraph(4), solver = \"GLPK\")\nCPU times: user 10.59 s, sys: 0.01 s, total: 10.60 s\nWall time: 10.62 s\n{0: [(1, 3), (1, 2), (3, 3), (4, 4), (1, 4), (2, 3), (3, 4)], 1: [(2, 1), (2, 2), (3, 2), (4, 2), (2, 0)], 2: [(0, 0), (1, 0), (0, 1), (0, 2)], 3: [(1, 1)]}\n```\n\nThe methods raises an exception when 4 becomes 5, which is natural as the problem has no solution, but it takes one lifetime to get this answer from GLPK. If SCIP can get it quickly, that's just a miracle `:-D`\n\nAnother problem of the same kind :\n\n\n```python\nn = 7\ngraphs.Grid2dGraph(n,n).disjoint_routed_paths([((0,0), (n-1,n-1)), ((0, n-1), (n-1, 0))])\n```\n\n\nThis already takes 10 seconds with CPLEX. Try n=8 if you are patient !\n\nThe answer is also an infeasibility, and the solvers are having a hard time proving it.. But I guess it just comes from my bad LP formulation `^^;`\n\nA different type of LP formulation, on random graphs :\n\n\n```python\nfrom sage.graphs.graph_coloring import edge_coloring\n%timeit edge_coloring(graphs.RandomGNP(30,.3), solver = \"GLPK\", verbose = 2)\n5 loops, best of 3: 4.47 s per loop\n```\n\n\nNathann",
    "created_at": "2010-11-28T15:04:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105954",
    "user": "https://github.com/nathanncohen"
}
```

Oh ! To compare performances, you could just try a sage -t on graph.py digraph.py and generic_graph.py.

I guess the performances would then depend on the kind of problem : all the solvers I tried until now are just awful for the minor method :


```python
sage: %time graphs.Grid2dGraph(5,5).minor(graphs.CompleteGraph(4), solver = "GLPK")
CPU times: user 10.59 s, sys: 0.01 s, total: 10.60 s
Wall time: 10.62 s
{0: [(1, 3), (1, 2), (3, 3), (4, 4), (1, 4), (2, 3), (3, 4)], 1: [(2, 1), (2, 2), (3, 2), (4, 2), (2, 0)], 2: [(0, 0), (1, 0), (0, 1), (0, 2)], 3: [(1, 1)]}
```

The methods raises an exception when 4 becomes 5, which is natural as the problem has no solution, but it takes one lifetime to get this answer from GLPK. If SCIP can get it quickly, that's just a miracle `:-D`

Another problem of the same kind :


```python
n = 7
graphs.Grid2dGraph(n,n).disjoint_routed_paths([((0,0), (n-1,n-1)), ((0, n-1), (n-1, 0))])
```


This already takes 10 seconds with CPLEX. Try n=8 if you are patient !

The answer is also an infeasibility, and the solvers are having a hard time proving it.. But I guess it just comes from my bad LP formulation `^^;`

A different type of LP formulation, on random graphs :


```python
from sage.graphs.graph_coloring import edge_coloring
%timeit edge_coloring(graphs.RandomGNP(30,.3), solver = "GLPK", verbose = 2)
5 loops, best of 3: 4.47 s per loop
```


Nathann



---

archive/issue_comments_105955.json:
```json
{
    "body": "On my machine:\n\n\n```python\nsage: %time graphs.Grid2dGraph(5,5).minor(graphs.CompleteGraph(4), solver = \"GLPK\", verbose=0)\nCPU times: user 2.81 s, sys: 0.00 s, total: 2.81 s\nWall time: 2.82 s\n{0: [(1, 3), (1, 2), (1, 1), (2, 3), (2, 4)], 1: [(3, 0), (1, 0), (3, 1), (2, 0)], 2: [(2, 1)], 3: [(4, 4), (2, 2), (3, 2), (4, 2), (4, 3), (3, 4)]}\n```\n\n\nIt seems there's still a bug in my SCIP interface:\n\n\n```python\nsage: %time graphs.Grid2dGraph(5,5).minor(graphs.CompleteGraph(4), solver = \"SCIP\", verbose=0)\nCPU times: user 1.88 s, sys: 0.04 s, total: 1.92 s\nWall time: 1.94 s\n{0: [(0, 0), (0, 1)], 1: [(1, 1)], 2: [(2, 1), (2, 2), (1, 0), (2, 0)], 3: [(1, 2), (0, 2)]}\n```\n",
    "created_at": "2010-11-28T15:47:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105955",
    "user": "https://github.com/malb"
}
```

On my machine:


```python
sage: %time graphs.Grid2dGraph(5,5).minor(graphs.CompleteGraph(4), solver = "GLPK", verbose=0)
CPU times: user 2.81 s, sys: 0.00 s, total: 2.81 s
Wall time: 2.82 s
{0: [(1, 3), (1, 2), (1, 1), (2, 3), (2, 4)], 1: [(3, 0), (1, 0), (3, 1), (2, 0)], 2: [(2, 1)], 3: [(4, 4), (2, 2), (3, 2), (4, 2), (4, 3), (3, 4)]}
```


It seems there's still a bug in my SCIP interface:


```python
sage: %time graphs.Grid2dGraph(5,5).minor(graphs.CompleteGraph(4), solver = "SCIP", verbose=0)
CPU times: user 1.88 s, sys: 0.04 s, total: 1.92 s
Wall time: 1.94 s
{0: [(0, 0), (0, 1)], 1: [(1, 1)], 2: [(2, 1), (2, 2), (1, 0), (2, 0)], 3: [(1, 2), (0, 2)]}
```




---

archive/issue_comments_105956.json:
```json
{
    "body": "Replying to [comment:29 malb]:\n> It seems there's still a bug in my SCIP interface:\n\nWhy so ? The answer is not unique ! `:-)`\n\nNathann",
    "created_at": "2010-11-28T16:20:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105956",
    "user": "https://github.com/nathanncohen"
}
```

Replying to [comment:29 malb]:
> It seems there's still a bug in my SCIP interface:

Why so ? The answer is not unique ! `:-)`

Nathann



---

archive/issue_comments_105957.json:
```json
{
    "body": "That's a critical piece of information I missed :)",
    "created_at": "2010-11-28T16:28:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105957",
    "user": "https://github.com/malb"
}
```

That's a critical piece of information I missed :)



---

archive/issue_comments_105958.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2010-11-29T19:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105958",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_105959.json:
```json
{
    "body": "Plus CPLEX, plus Coin ! `:-)`\n\nNathann",
    "created_at": "2010-11-29T19:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105959",
    "user": "https://github.com/nathanncohen"
}
```

Plus CPLEX, plus Coin ! `:-)`

Nathann



---

archive/issue_comments_105960.json:
```json
{
    "body": "The patch looks good, I'm running long doctests on sage.math now. Can I assume you ran doctests for CPLEX and Coin (i.e. with the optional packages installed)? I think the only remaining issue is:\n\n\n```python\nsage: p = MixedIntegerLinearProgram()\nsage: p.new_variable(name=\"foo\")                                                                                                                                                                               \nMIPVariable of dimension 1.                                                                                                                                                                                    \nsage: x = _\nsage: p.add_constraint(0 <= x[1] <= 2)\nsage: p.show()\nMaximization:\n  \nConstraints:\n  x_0 <= 2.0\nVariables:\n  x_0 is a real variable (min=0.0, max=+oo)\n```\n\n\nFor some reason MIPVariable ignores the optional name parameter and hardcodes \"x\". Is there a reason for this?",
    "created_at": "2010-11-30T13:44:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105960",
    "user": "https://github.com/malb"
}
```

The patch looks good, I'm running long doctests on sage.math now. Can I assume you ran doctests for CPLEX and Coin (i.e. with the optional packages installed)? I think the only remaining issue is:


```python
sage: p = MixedIntegerLinearProgram()
sage: p.new_variable(name="foo")                                                                                                                                                                               
MIPVariable of dimension 1.                                                                                                                                                                                    
sage: x = _
sage: p.add_constraint(0 <= x[1] <= 2)
sage: p.show()
Maximization:
  
Constraints:
  x_0 <= 2.0
Variables:
  x_0 is a real variable (min=0.0, max=+oo)
```


For some reason MIPVariable ignores the optional name parameter and hardcodes "x". Is there a reason for this?



---

archive/issue_comments_105961.json:
```json
{
    "body": "> Is there a reason for this?\n\nNot really. \nTechnically, you will find this 'x' inside of the __repr__ method in LinearFunction, which does not care at all whether the variable has a name or not (it does not even know the MIPVariable object itself, just its id in the LP, and the MIPVariable itself does not know its name (only the LP does). All of is has to be rewritten, it is ugly and inefficient code, but would like to find a way to deal with this that does not make every LP waste time on totally useless name-related operations. \n\nI still think we should just remove anything in these classes which is name-related for the same eternal reasons. The code is ugly, hard to understand, it slows the class down, and it is totally useless for solving LP anyway `:-/`\n\nNathann",
    "created_at": "2010-11-30T15:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105961",
    "user": "https://github.com/nathanncohen"
}
```

> Is there a reason for this?

Not really. 
Technically, you will find this 'x' inside of the __repr__ method in LinearFunction, which does not care at all whether the variable has a name or not (it does not even know the MIPVariable object itself, just its id in the LP, and the MIPVariable itself does not know its name (only the LP does). All of is has to be rewritten, it is ugly and inefficient code, but would like to find a way to deal with this that does not make every LP waste time on totally useless name-related operations. 

I still think we should just remove anything in these classes which is name-related for the same eternal reasons. The code is ugly, hard to understand, it slows the class down, and it is totally useless for solving LP anyway `:-/`

Nathann



---

archive/issue_comments_105962.json:
```json
{
    "body": "Oh, and I of course checked all the patches on CPLEX and Coin each time. All tests do not pass, because of old bugs :\n\n* Coin does not support names, so some doctests in mip.py fail because of that\n* for some reason the variable_min/max command on CPLEX variables that are not bounded return a BIG NUMBER and not None when the variable is not bounded (the doctest of a p.show() in mip.py fails because of that)\n* There is a doctest in generic_graph that fails when one uses LP and Coin to solve a max_flow problem on graphs whose edges are randomly weighted. Coin sometimes answers 8.16540000001 instead of 8.1654 and the tests is an equality.\n\nIn the end, the remaining bugs (and they have been there for quite a while, but I did not really worry....) are all about displaying stuff. One is about numerical noise on a very specific case (Coin + Flows. One also has to know that by default Sage uses a Cython implementation of the Ford-Fulkerson algorithm to compute a flow, and not the LP unless asked otherwise -- I made the docstring of Graph.flow mention this noise).\n\nShort of this, all tests pass in graph.py, digraph.py and generic_graph.py. So all the methods there do not see the difference between GLPK, Coin or CPLEX (except for the time spent testing the docstrings) `;-)`\n\nWould it be possible to address them in a future ticket ? And could I please have your thoughts about removing all these names from the class ? `:-)`\n\nNathann",
    "created_at": "2010-11-30T15:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105962",
    "user": "https://github.com/nathanncohen"
}
```

Oh, and I of course checked all the patches on CPLEX and Coin each time. All tests do not pass, because of old bugs :

* Coin does not support names, so some doctests in mip.py fail because of that
* for some reason the variable_min/max command on CPLEX variables that are not bounded return a BIG NUMBER and not None when the variable is not bounded (the doctest of a p.show() in mip.py fails because of that)
* There is a doctest in generic_graph that fails when one uses LP and Coin to solve a max_flow problem on graphs whose edges are randomly weighted. Coin sometimes answers 8.16540000001 instead of 8.1654 and the tests is an equality.

In the end, the remaining bugs (and they have been there for quite a while, but I did not really worry....) are all about displaying stuff. One is about numerical noise on a very specific case (Coin + Flows. One also has to know that by default Sage uses a Cython implementation of the Ford-Fulkerson algorithm to compute a flow, and not the LP unless asked otherwise -- I made the docstring of Graph.flow mention this noise).

Short of this, all tests pass in graph.py, digraph.py and generic_graph.py. So all the methods there do not see the difference between GLPK, Coin or CPLEX (except for the time spent testing the docstrings) `;-)`

Would it be possible to address them in a future ticket ? And could I please have your thoughts about removing all these names from the class ? `:-)`

Nathann



---

archive/issue_comments_105963.json:
```json
{
    "body": "> Would it be possible to address them in a future ticket ? \n\nAgreed.\n\n> And could I please have your thoughts about removing all these names from the class ? :-)\n\nI'm unsure about this. But it is certainly undesirable to allow \"name\" as a parameter in new_variable() and then to ignore it. My main motivation for keeping names around would be to make debugging easier: I can check whether my mixed integer program looks like I want it to look without getting confused about variable name matching.",
    "created_at": "2010-11-30T16:20:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105963",
    "user": "https://github.com/malb"
}
```

> Would it be possible to address them in a future ticket ? 

Agreed.

> And could I please have your thoughts about removing all these names from the class ? :-)

I'm unsure about this. But it is certainly undesirable to allow "name" as a parameter in new_variable() and then to ignore it. My main motivation for keeping names around would be to make debugging easier: I can check whether my mixed integer program looks like I want it to look without getting confused about variable name matching.



---

archive/issue_comments_105964.json:
```json
{
    "body": "> I'm unsure about this. But it is certainly undesirable to allow \"name\" as a parameter in new_variable() and then to ignore it. My main motivation for keeping names around would be to make debugging easier: I can check whether my mixed integer program looks like I want it to look without getting confused about variable name matching.\n\nIt can be very useful like that for sure.... But I really can not stand that the performances of a solver could somehow suffer because of something which is not used 99% of the time : when the LP are known to work. I really hope this could be fixed soon `:-/`\n\nNathann",
    "created_at": "2010-11-30T16:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105964",
    "user": "https://github.com/nathanncohen"
}
```

> I'm unsure about this. But it is certainly undesirable to allow "name" as a parameter in new_variable() and then to ignore it. My main motivation for keeping names around would be to make debugging easier: I can check whether my mixed integer program looks like I want it to look without getting confused about variable name matching.

It can be very useful like that for sure.... But I really can not stand that the performances of a solver could somehow suffer because of something which is not used 99% of the time : when the LP are known to work. I really hope this could be fixed soon `:-/`

Nathann



---

archive/issue_comments_105965.json:
```json
{
    "body": "How does performance suffer exactly? Names aren't used except for showing and writing lp files?",
    "created_at": "2010-11-30T17:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105965",
    "user": "https://github.com/malb"
}
```

How does performance suffer exactly? Names aren't used except for showing and writing lp files?



---

archive/issue_comments_105966.json:
```json
{
    "body": "names aren't used except in these cases, but when the mip.py file will have been rewritten any creation of variable will mean storing+concatenating names, any call to add_variables/constraints already creates variables that are to receive potential names. I still do not know the loss between calls of cdef methods and cpdef, and one of the reasons why we have so many optional arguments is to deal with names. And so much in the backends is about names (I can not stand to look at code when I know it is never used. I immediately want to remove it)\n\nI mean, all the LP interface does is create constraints and variables. When you add name considerations to all of these things, you just add time to earn nothing. I will have fun profiling all this when it will be in to check what we could earn by removing them or writing it more smartly. Perhaps I'm just complaining for nothing as usual... Even though cutting the code by half seems tempting just for its sake `:-D`\n\nNathann",
    "created_at": "2010-11-30T17:10:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105966",
    "user": "https://github.com/nathanncohen"
}
```

names aren't used except in these cases, but when the mip.py file will have been rewritten any creation of variable will mean storing+concatenating names, any call to add_variables/constraints already creates variables that are to receive potential names. I still do not know the loss between calls of cdef methods and cpdef, and one of the reasons why we have so many optional arguments is to deal with names. And so much in the backends is about names (I can not stand to look at code when I know it is never used. I immediately want to remove it)

I mean, all the LP interface does is create constraints and variables. When you add name considerations to all of these things, you just add time to earn nothing. I will have fun profiling all this when it will be in to check what we could earn by removing them or writing it more smartly. Perhaps I'm just complaining for nothing as usual... Even though cutting the code by half seems tempting just for its sake `:-D`

Nathann



---

archive/issue_comments_105967.json:
```json
{
    "body": "I don't care much about writing LP files but printing of MIPVariables (p.show()) should allow custom names. I'm not saying it should be supported in the backends but the frontend should. It's just the level of convenience users will expect.",
    "created_at": "2010-11-30T18:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105967",
    "user": "https://github.com/malb"
}
```

I don't care much about writing LP files but printing of MIPVariables (p.show()) should allow custom names. I'm not saying it should be supported in the backends but the frontend should. It's just the level of convenience users will expect.



---

archive/issue_comments_105968.json:
```json
{
    "body": "Here is another patch to fix the .show method and the names in general. Even the .lp files exported through Sage bear the good names !\n\nI also fixed the CPLEX problem with infinite bounds, so that all test pass with CPLEX too !\n\nNathann",
    "created_at": "2010-12-04T19:08:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105968",
    "user": "https://github.com/nathanncohen"
}
```

Here is another patch to fix the .show method and the names in general. Even the .lp files exported through Sage bear the good names !

I also fixed the CPLEX problem with infinite bounds, so that all test pass with CPLEX too !

Nathann



---

archive/issue_comments_105969.json:
```json
{
    "body": "You accidentally hardcoded GLPK it seems in generic_backend.pyx?\n\n\n```python\n  solver = \"GLPK\" \n```\n",
    "created_at": "2010-12-04T19:48:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105969",
    "user": "https://github.com/malb"
}
```

You accidentally hardcoded GLPK it seems in generic_backend.pyx?


```python
  solver = "GLPK" 
```




---

archive/issue_comments_105970.json:
```json
{
    "body": "Gloops.... Thank you for spotting it, this would have been nasty `^^;`\n\nI use that line to test LP with GLPK even though I have CPLEX installed....\n\nPatch updated !\n\nNathann",
    "created_at": "2010-12-04T19:56:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105970",
    "user": "https://github.com/nathanncohen"
}
```

Gloops.... Thank you for spotting it, this would have been nasty `^^;`

I use that line to test LP with GLPK even though I have CPLEX installed....

Patch updated !

Nathann



---

archive/issue_comments_105971.json:
```json
{
    "body": "Do doctests sill pass with CPLEX?",
    "created_at": "2010-12-04T19:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105971",
    "user": "https://github.com/malb"
}
```

Do doctests sill pass with CPLEX?



---

archive/issue_comments_105972.json:
```json
{
    "body": "Of course of course !! I always do a last check with GLPK when I am done with the patch, as it is the \"most important\" solver for Sage `:-)`\n\nNathann",
    "created_at": "2010-12-04T20:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105972",
    "user": "https://github.com/nathanncohen"
}
```

Of course of course !! I always do a last check with GLPK when I am done with the patch, as it is the "most important" solver for Sage `:-)`

Nathann



---

archive/issue_comments_105973.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2010-12-04T20:27:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105973",
    "user": "https://github.com/malb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_105974.json:
```json
{
    "body": "Cool, positive review then!",
    "created_at": "2010-12-04T20:27:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105974",
    "user": "https://github.com/malb"
}
```

Cool, positive review then!



---

archive/issue_events_026596.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-12-04T22:47:26Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "milestone": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10340#event-26596"
}
```



---

archive/issue_comments_105975.json:
```json
{
    "body": "Why is there a [attachment:trac_10431-part5.patch]?  Should it be applied?",
    "created_at": "2010-12-05T22:21:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105975",
    "user": "https://github.com/jdemeyer"
}
```

Why is there a [attachment:trac_10431-part5.patch]?  Should it be applied?



---

archive/issue_comments_105976.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2010-12-05T22:21:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105976",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_105977.json:
```json
{
    "body": "It should ! I forgot to update the ticket's description `:-)`\n\nNathann",
    "created_at": "2010-12-06T07:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105977",
    "user": "https://github.com/nathanncohen"
}
```

It should ! I forgot to update the ticket's description `:-)`

Nathann



---

archive/issue_comments_105978.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2010-12-06T07:36:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105978",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_105979.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2010-12-06T07:37:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105979",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_105980.json:
```json
{
    "body": "Please fix the commit messages to contain the **correct** ticket number 10341 on the first line.",
    "created_at": "2011-01-23T19:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105980",
    "user": "https://github.com/jdemeyer"
}
```

Please fix the commit messages to contain the **correct** ticket number 10341 on the first line.



---

archive/issue_comments_105981.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-01-23T19:38:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105981",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_105982.json:
```json
{
    "body": "Attachment [trac_10431-part4.patch](tarball://root/attachments/some-uuid/ticket10341/trac_10431-part4.patch) by @nathanncohen created at 2011-01-23 20:12:16",
    "created_at": "2011-01-23T20:12:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105982",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [trac_10431-part4.patch](tarball://root/attachments/some-uuid/ticket10341/trac_10431-part4.patch) by @nathanncohen created at 2011-01-23 20:12:16



---

archive/issue_comments_105983.json:
```json
{
    "body": "Attachment [trac_10431-part5.patch](tarball://root/attachments/some-uuid/ticket10341/trac_10431-part5.patch) by @nathanncohen created at 2011-01-23 20:12:59",
    "created_at": "2011-01-23T20:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105983",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [trac_10431-part5.patch](tarball://root/attachments/some-uuid/ticket10341/trac_10431-part5.patch) by @nathanncohen created at 2011-01-23 20:12:59



---

archive/issue_comments_105984.json:
```json
{
    "body": "Done ! Sorry about that !\n\nNathann",
    "created_at": "2011-01-23T20:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105984",
    "user": "https://github.com/nathanncohen"
}
```

Done ! Sorry about that !

Nathann



---

archive/issue_comments_105985.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-01-23T20:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105985",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_105986.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-01-23T20:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105986",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_105987.json:
```json
{
    "body": "Commit message of first patch still needs to be fixed.",
    "created_at": "2011-01-23T20:18:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105987",
    "user": "https://github.com/jdemeyer"
}
```

Commit message of first patch still needs to be fixed.



---

archive/issue_comments_105988.json:
```json
{
    "body": "Attachment [mip_interface_changes-fixed_commit_message.patch](tarball://root/attachments/some-uuid/ticket10341/mip_interface_changes-fixed_commit_message.patch) by @nathanncohen created at 2011-01-23 20:21:02",
    "created_at": "2011-01-23T20:21:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105988",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [mip_interface_changes-fixed_commit_message.patch](tarball://root/attachments/some-uuid/ticket10341/mip_interface_changes-fixed_commit_message.patch) by @nathanncohen created at 2011-01-23 20:21:02



---

archive/issue_comments_105989.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-01-23T20:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105989",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_105990.json:
```json
{
    "body": "OOps....\n\nI just uploaded a copy of this one (I can not overwrite it) `^^;`\n\nNathann",
    "created_at": "2011-01-23T20:21:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105990",
    "user": "https://github.com/nathanncohen"
}
```

OOps....

I just uploaded a copy of this one (I can not overwrite it) `^^;`

Nathann



---

archive/issue_comments_105991.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-01-24T16:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105991",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_105992.json:
```json
{
    "body": "Please check Sphinx syntax:\n\n```\ndocstring of sage.numerical.mip.MixedIntegerLinearProgram.add_constraint:72: (WARNING/2) Literal block expected; none found.\n```\n",
    "created_at": "2011-01-24T16:46:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105992",
    "user": "https://github.com/jdemeyer"
}
```

Please check Sphinx syntax:

```
docstring of sage.numerical.mip.MixedIntegerLinearProgram.add_constraint:72: (WARNING/2) Literal block expected; none found.
```




---

archive/issue_comments_105993.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2011-01-25T10:59:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105993",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_105994.json:
```json
{
    "body": "Replying to [comment:56 jdemeyer]:\n> Please check Sphinx syntax:\n\nRight.... Here it is !\n\nNathann",
    "created_at": "2011-01-25T10:59:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105994",
    "user": "https://github.com/nathanncohen"
}
```

Replying to [comment:56 jdemeyer]:
> Please check Sphinx syntax:

Right.... Here it is !

Nathann



---

archive/issue_comments_105995.json:
```json
{
    "body": "Attachment [trac_10431-part6.patch](tarball://root/attachments/some-uuid/ticket10341/trac_10431-part6.patch) by @nathanncohen created at 2011-01-25 11:00:18",
    "created_at": "2011-01-25T11:00:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105995",
    "user": "https://github.com/nathanncohen"
}
```

Attachment [trac_10431-part6.patch](tarball://root/attachments/some-uuid/ticket10341/trac_10431-part6.patch) by @nathanncohen created at 2011-01-25 11:00:18



---

archive/issue_comments_105996.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-01-26T22:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10340#issuecomment-105996",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_026597.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-01-26T22:27:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10340",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10340#event-26597"
}
```
