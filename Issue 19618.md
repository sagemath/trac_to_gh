# Issue 19618: Ascii version of "Möbius": mobius or moebius?

Issue created by migration from https://trac.sagemath.org/ticket/19855

Original creator: jmantysalo

Original creation time: 2016-01-10 07:36:18

CC:  vbraun kcrisman

There is `moebius_algebra()` in finite lattices, and `mobius_function()` in finite posets. Another should be changed. Same applies to `mobius_transform` on `hyperbolic_isometry.py` and `moebius` on `libs/pari/auto_gen.pxi` etc.

Before changes wait to see if discussion at sage-devel comes to end. Then change also this description.


---

Comment by jmantysalo created at 2016-01-14 16:36:10

Where did those `conf.py` came?

Otherwise this can be commented. I have not yet run tests, so not in needs_review anyways.
----
New commits:


---

Comment by git created at 2016-01-14 19:52:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2016-01-14 19:58:33

Those "conf.py" changes should not be there. Each of those files should be a symlink to `../conf_sub.py`.


---

Comment by jmantysalo created at 2016-01-14 20:11:17

Replying to [comment:6 jhpalmieri]:
> Those "conf.py" changes should not be there. Each of those files should be a symlink to `../conf_sub.py`.

Should there be any conf.py in source? I.e. can I remove all to get a working patch?


---

Comment by jhpalmieri created at 2016-01-14 20:22:59

There should be actual files `conf.py` and `conf_sub.py` in `doc/en/reference`. Most (probably all) of the subdirectories should contain a symlink `conf.py -> ../conf_sub.py`.


---

Comment by git created at 2016-01-15 05:46:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-01-15 05:50:37

There is `src/sage/rings/arith.py` with


```
    def __repr__(self):
        """
        Returns a description of this function.

        EXAMPLES::

            sage: q = Moebius()
            sage: q.__repr__()
            'The Möbius function'
        """
        return "The Möbius function"
```


and it says


```
Expected:
    The Möbius function
Got:
    'The M\xc3\xb6bius function'
```


I can see no difference to other functions. Charcode-line at the beginning of file is same etc. Any ideas?


---

Comment by jhpalmieri created at 2016-01-15 06:34:47

Change the leading `"""` to `u"""` or to `r"""`?


---

Comment by jdemeyer created at 2016-01-15 06:45:38

Can you please base this on #19879 to avoid merge conflicts?


---

Comment by jmantysalo created at 2016-01-15 06:51:13

Replying to [comment:12 jdemeyer]:
> Can you please base this on #19879 to avoid merge conflicts?

Yes I can, but first I should make this to work...


---

Comment by jmantysalo created at 2016-01-15 06:52:28

Replying to [comment:11 jhpalmieri]:
> Change the leading `"""` to `u"""` or to `r"""`?

Already tried `u"""`, now tested `r"""`. No help from those.


---

Comment by git created at 2016-01-15 07:03:00

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2016-01-18 08:39:13

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jmantysalo created at 2016-01-18 08:43:15

OK, now this should be OK. There was an error at `src/sage/algebras/catalog.py`, so I did _not_ change class name but corrected a broken link.

I changed every docstring so that right form, "Möbius", is used everywhere except in the code. Also `_repr_` is changed.


---

Comment by jmantysalo created at 2016-01-18 08:43:15

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2016-01-18 08:45:39

Changing status from needs_review to needs_work.


---

Comment by jmantysalo created at 2016-01-18 08:45:39

Forget. Still wrong arith.py...


---

Comment by git created at 2016-01-26 09:08:12

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-01-26 09:09:54

Changing status from needs_work to needs_review.


---

Comment by jmantysalo created at 2016-01-26 09:09:54

Hopefully I got this right at last.


---

Comment by chapoton created at 2016-01-29 19:41:00

patchbot is not happy..


---

Comment by jmantysalo created at 2016-01-29 19:43:49

Replying to [comment:21 chapoton]:
> patchbot is not happy..

??? 7.1.beta1 -patchbot says that all tests passed.


---

Comment by chapoton created at 2016-01-29 20:03:57

but 2 plugins are failing, and you should take care of what they say


---

Comment by git created at 2016-01-29 20:59:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-01-29 21:00:48

Replying to [comment:23 chapoton]:
> but 2 plugins are failing, and you should take care of what they say

Ah, OK. Now those should be corrected. Took a while to understand what's wrong with `...`-continuation I didn't change.


---

Comment by chapoton created at 2016-01-30 17:39:46

yet one plugin is still red..


---

Comment by git created at 2016-01-30 17:49:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-01-30 17:50:01

Arghs. Yet another try.


---

Comment by jmantysalo created at 2016-01-31 09:09:53

Hooray! Now it does not complain!


---

Comment by chapoton created at 2016-01-31 09:19:24

almost good to go.

This looks wrong in src/sage/repl/rich_output/backend_ipython.py:

```
+# -*- coding: utf-8 -*-
 # -*- encoding: utf-8 -*-
```


once corrected, you can set positive review


---

Comment by git created at 2016-01-31 09:22:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-01-31 09:27:19

Replying to [comment:30 chapoton]:

> {{{
> +# -*- coding: utf-8 -*-
>  # -*- encoding: utf-8 -*-
> }}}

Good catch. It seems that there is no difference between the two, but "coding" is used many times more than "encoding". Should I unify them on another patch, just to make automatic processing a little bit easier?


---

Comment by jmantysalo created at 2016-01-31 10:03:18

Changing status from needs_review to positive_review.


---

Comment by jmantysalo created at 2016-01-31 10:03:18

Replying to [comment:30 chapoton]:

> - - once corrected, you can set positive review

Done. (And tested.)

Thanks!


---

Comment by chapoton created at 2016-01-31 11:10:02

Replying to [comment:32 jmantysalo]:

> Good catch. It seems that there is no difference between the two, but "coding" is used many times more than "encoding". Should I unify them on another patch, just to make automatic processing a little bit easier?

*NO* ! Please try to open tickets only for important things.


---

Comment by jmantysalo created at 2016-01-31 11:11:40

Replying to [comment:34 chapoton]:

> *NO* ! Please try to open tickets only for important things.

Ok.


---

Comment by vbraun created at 2016-01-31 21:44:11

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2016-01-31 21:44:11

reviewer name missing


---

Comment by tscrim created at 2016-02-01 03:09:29

We should also avoid unicode in strings (at least until we switch to Python3).


---

Comment by jmantysalo created at 2016-02-01 06:33:18

Replying to [comment:38 tscrim]:
> We should also avoid unicode in strings (at least until we switch to Python3).

Why?

(Maybe the answer should go to sage-devel instead of one ticket.)


---

Comment by tscrim created at 2016-02-01 06:36:55

Replying to [comment:39 jmantysalo]:
> Replying to [comment:38 tscrim]:
> > We should also avoid unicode in strings (at least until we switch to Python3).
> 
> Why?
> 
> (Maybe the answer should go to sage-devel instead of one ticket.)

Python 2 strings are not unicode by default (which is changed in Python 3), so this can cause output problems (in particular, for those rare terminals that do not support unicode).


---

Comment by jmantysalo created at 2016-02-01 06:39:41

Replying to [comment:40 tscrim]:
> Replying to [comment:39 jmantysalo]:
> > Replying to [comment:38 tscrim]:
> > > We should also avoid unicode in strings (at least until we switch to Python3).
> > 
> > Why?
> > 
> > (Maybe the answer should go to sage-devel instead of one ticket.)
> 
> Python 2 strings are not unicode by default (which is changed in Python 3), so this can cause output problems (in particular, for those rare terminals that do not support unicode).

?? But in sage-devel there has been discussion about this. I think that it was said that we can assume unicode support.


---

Comment by tscrim created at 2016-02-01 06:46:26

Replying to [comment:41 jmantysalo]:
> Replying to [comment:40 tscrim]:
> > Replying to [comment:39 jmantysalo]:
> > > Replying to [comment:38 tscrim]:
> > > > We should also avoid unicode in strings (at least until we switch to Python3).
> > > 
> > > Why?
> > > 
> > > (Maybe the answer should go to sage-devel instead of one ticket.)
> > 
> > Python 2 strings are not unicode by default (which is changed in Python 3), so this can cause output problems (in particular, for those rare terminals that do not support unicode).
> 
> ?? But in sage-devel there has been discussion about this. I think that it was said that we can assume unicode support.

This is what I get:

```
sage: s = "ü"
sage: s
'\xc3\xbc'
```

Granted, this is fixed by doing `print s`, and we have the same behavior for `s = u"ü"`. Yet most output does not occur with a print statement.


---

Comment by git created at 2016-02-01 07:08:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-02-01 07:10:34

Replying to [comment:42 tscrim]:

> Granted, this is fixed by doing `print s`, and we have the same behavior for `s = u"ü"`. Yet most output does not occur with a print statement.

OK. Corrected, now compiling and testing.


---

Comment by git created at 2016-02-01 08:22:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2016-02-01 10:00:38

Tests passed.


---

Comment by jmantysalo created at 2016-02-01 10:00:38

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2016-02-02 20:23:08

ok, let it go.


---

Comment by chapoton created at 2016-02-02 20:23:08

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2016-02-03 19:10:41

Resolution: fixed
