# Issue 23138: Cannot pull back from PBW basis to Lie algebra

Issue created by migration from Trac.

Original creator: tscrim

Original creation time: 2017-07-06 03:36:59

CC:  sage-combinat salisbury1

Keywords: lie algebras

This should work but doesn't:

```
sage: L = lie_algebras.cross_product(QQ)
sage: pbw = L.pbw_basis()
sage: L(pbw(L.an_element())) == L.an_element() # BOOM
```

This is due to not setting `inverse_on_support` when creating the coercion. This also exposes the need to overwrite `term` for `LieAlgebraWithStructureCoefficients`.


---

Comment by tscrim created at 2017-07-06 03:38:13

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-07-06 03:38:13

New commits:


---

Comment by chapoton created at 2017-07-07 06:38:33

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2017-07-07 06:38:33

thanks, let it be


---

Comment by vbraun created at 2017-07-22 07:42:16

Merge conflict


---

Comment by vbraun created at 2017-07-22 07:42:16

Changing status from positive_review to needs_work.


---

Comment by git created at 2017-07-22 13:39:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-07-22 13:40:08

Essentially a trivial rebase over #23373, but this should have someone else check that the tests still pass in the `lie_algebras` folder.


---

Comment by tscrim created at 2017-07-22 13:40:08

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2017-07-23 22:31:33

Patchbot is back to green, and I am pretty certain #23373 is the only conflict.


---

Comment by git created at 2017-07-26 02:26:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2017-07-26 02:47:20

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tscrim created at 2017-07-30 17:24:39

Green 8.0 patchbot; independent build failure of the 8.1beta0.


---

Comment by tscrim created at 2017-08-04 02:50:47

8.1beta0 bot is morally green.


---

Comment by chapoton created at 2017-08-07 20:23:29

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2017-08-07 20:23:29

ok, good to go


---

Comment by tscrim created at 2017-08-07 20:42:23

Thank you again.


---

Comment by vbraun created at 2017-08-11 18:17:58

Resolution: fixed
