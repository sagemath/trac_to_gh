# Issue 17227: Computing the automorphism group of a graph

archive/issues_017227.json:
```json
{
    "body": "CC:  @nathanncohen\n\nHello!\n\nI have a suggestion for a big improvement for the Graph Theoretical module of Sage. Right now I am a not in the proper mood to do it myself so I am leaving this here in case anyone is willing to do it or as a TODO note for a later time.\n\nConsider the graph on ~10k vertices located in the file https://www.dropbox.com/s/pbtk2965ti71u9n/graph.txt.gz?dl=0 where each line contains an edge pair.\n\nUsing the standard way in Sage (read graph call automorphism_group() ) takes a few ** hours**  (I'll tell the exact time when it actually finishes) to compute and makes a ** 30GB** memory footprint.\n\nThe same thing can be done using bliss http://www.tcs.tkk.fi/Software/bliss/index.html with no actual memory footprint in **20 seconds.**\n\nSo right now its much cheaper for me to just write the graph into DIMACS format call bliss and parse its output. \n\nI guess the same kind of performance can be obtained using nauty so I suppose there is something OFF with the current implementation of the automorphism group method. IIRC it is written in Python?\n\nHopefully we can make this into a productive patch.\n\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/17464\n\n",
    "created_at": "2014-12-08T08:34:05Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Computing the automorphism group of a graph",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17227",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```
CC:  @nathanncohen

Hello!

I have a suggestion for a big improvement for the Graph Theoretical module of Sage. Right now I am a not in the proper mood to do it myself so I am leaving this here in case anyone is willing to do it or as a TODO note for a later time.

Consider the graph on ~10k vertices located in the file https://www.dropbox.com/s/pbtk2965ti71u9n/graph.txt.gz?dl=0 where each line contains an edge pair.

Using the standard way in Sage (read graph call automorphism_group() ) takes a few ** hours**  (I'll tell the exact time when it actually finishes) to compute and makes a ** 30GB** memory footprint.

The same thing can be done using bliss http://www.tcs.tkk.fi/Software/bliss/index.html with no actual memory footprint in **20 seconds.**

So right now its much cheaper for me to just write the graph into DIMACS format call bliss and parse its output. 

I guess the same kind of performance can be obtained using nauty so I suppose there is something OFF with the current implementation of the automorphism group method. IIRC it is written in Python?

Hopefully we can make this into a productive patch.




Issue created by migration from https://trac.sagemath.org/ticket/17464





---

archive/issue_comments_228840.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2014-12-26T14:17:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228840",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_228841.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-12-26T14:17:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228841",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

New commits:



---

archive/issue_comments_228842.json:
```json
{
    "body": "I'd be glad if someone could take a look at this branch. It is far from being \"production ready\" and I mainly posting it here because\n\n1. I want any comments and suggestions if its going in the right direction(to avoid later rewrites :D)\n2. I need someone to explain how to make a spkg so that I can properly include bliss headers and be able to link against bliss.\n3. Discuss what to do with the add_gen function that converts a permutation to cycle notation. Do you agree that I leave it there and avoid using Permutation.to_cycle()?\n4. How to handle digraphs elegantly?\n\nAs is for now, the code correctly compute the aut of a graph/digraph provided that libbliss.a is in the sage lib folder and the location of the bliss header is correctly set in bliss.pyx.\n\n\nI wrote that above question for the general audience but honestly,.. Nathann what do you think??",
    "created_at": "2014-12-26T14:20:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228842",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

I'd be glad if someone could take a look at this branch. It is far from being "production ready" and I mainly posting it here because

1. I want any comments and suggestions if its going in the right direction(to avoid later rewrites :D)
2. I need someone to explain how to make a spkg so that I can properly include bliss headers and be able to link against bliss.
3. Discuss what to do with the add_gen function that converts a permutation to cycle notation. Do you agree that I leave it there and avoid using Permutation.to_cycle()?
4. How to handle digraphs elegantly?

As is for now, the code correctly compute the aut of a graph/digraph provided that libbliss.a is in the sage lib folder and the location of the bliss header is correctly set in bliss.pyx.


I wrote that above question for the general audience but honestly,.. Nathann what do you think??



---

archive/issue_comments_228843.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-26T14:23:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228843",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228844.json:
```json
{
    "body": "Yoooooooooooo !\n\nWell, so far your branch does not look \"that bad\". The only weird thing is that I do not get why this bliss branch should do that modifications `:-P`\n\n```diff\n+    :meth:`~GenericGraph.geodetic_number` | Returns the geodetic number of the given graph.\n```\n\n\nThe right way to write this code, however, begins as you say by writing the spkg, as nobody can test it without it. And the right way to do that, as usual is copy and paste.\n\n1) There is a developer's manual that I am trying to improve these days. There is a section I never read about exactly that: http://www.sagemath.org/doc/developer/packaging.html. If you find anything wrong/unclear in there, please fix it if you can. We must make this clear to everybody. If you do not understand, tell me where it is and I will try to fix it.\n\n2) spkgs are rather simple nowadays. The code that **installs** the program is a Sage code, like any other. You will find it in SAGE_ROOT/build/. Take a look at the structure of `buckygen`, for instance: it is an optional graph package, just like bliss will be.\n\n3) That was for the Sage code, but the non-sage code (i.e. the source code of bliss) must be stored in the SAGE_ROOT/upstream folder. You will figure out that the code in build/ is actually instruction about what to do with the bliss-version.tar.bz2 that must be there, and which is only the official bliss release.\n\n4) Then there are he \"checksums\": http://www.sagemath.org/doc/developer/packaging.html#checksums\n\nSo before continuing with this you should create a ticket to add bliss as a spkg. It could be quick, and if you have time right now we can settle it fast, I won't get to bed before one hour at least, I can review it before.\n\nA ticket that adds a new package should contain:\n\n1) A branch that adds the required files in the build/ folder\n\n2) A .tar.bz2 file (hosted wherever you like) that I should download in the upstream/ folder before typing \"sage -i bliss\".\n\nI am a bit offline this evening because I have a very short ethernet cable next to an uncomfortable chair. I come back from time to time to check my emails `:-P`\n\nGood luck !\n\nNathann",
    "created_at": "2014-12-26T15:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228844",
    "user": "https://github.com/nathanncohen"
}
```

Yoooooooooooo !

Well, so far your branch does not look "that bad". The only weird thing is that I do not get why this bliss branch should do that modifications `:-P`

```diff
+    :meth:`~GenericGraph.geodetic_number` | Returns the geodetic number of the given graph.
```


The right way to write this code, however, begins as you say by writing the spkg, as nobody can test it without it. And the right way to do that, as usual is copy and paste.

1) There is a developer's manual that I am trying to improve these days. There is a section I never read about exactly that: http://www.sagemath.org/doc/developer/packaging.html. If you find anything wrong/unclear in there, please fix it if you can. We must make this clear to everybody. If you do not understand, tell me where it is and I will try to fix it.

2) spkgs are rather simple nowadays. The code that **installs** the program is a Sage code, like any other. You will find it in SAGE_ROOT/build/. Take a look at the structure of `buckygen`, for instance: it is an optional graph package, just like bliss will be.

3) That was for the Sage code, but the non-sage code (i.e. the source code of bliss) must be stored in the SAGE_ROOT/upstream folder. You will figure out that the code in build/ is actually instruction about what to do with the bliss-version.tar.bz2 that must be there, and which is only the official bliss release.

4) Then there are he "checksums": http://www.sagemath.org/doc/developer/packaging.html#checksums

So before continuing with this you should create a ticket to add bliss as a spkg. It could be quick, and if you have time right now we can settle it fast, I won't get to bed before one hour at least, I can review it before.

A ticket that adds a new package should contain:

1) A branch that adds the required files in the build/ folder

2) A .tar.bz2 file (hosted wherever you like) that I should download in the upstream/ folder before typing "sage -i bliss".

I am a bit offline this evening because I have a very short ethernet cable next to an uncomfortable chair. I come back from time to time to check my emails `:-P`

Good luck !

Nathann



---

archive/issue_comments_228845.json:
```json
{
    "body": "Thanks for the input!! \n\nContinuing our talk here I have a short question. The class definitions of a Graph and Digraph in bliss both contain the same functions add_edge(int i, int j) and change_color(int x, int c).\n\nNow as far as I see *if* we patch bliss to make these two functions a (virtual) part of the abstract graph class then we could do something like\n\n\n```\nAbstractGraph *g;\ng = either Graph or Digraph\ng.add_edge(i,j)\ng.change_color(i,c)\ng.find_automorphisms()\n```\n\n\nI think this would be the most efficient way to handle digraphs/graphs. \n\nDo you think this will work out or do you see any other way to handle these two types?",
    "created_at": "2014-12-27T11:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228845",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Thanks for the input!! 

Continuing our talk here I have a short question. The class definitions of a Graph and Digraph in bliss both contain the same functions add_edge(int i, int j) and change_color(int x, int c).

Now as far as I see *if* we patch bliss to make these two functions a (virtual) part of the abstract graph class then we could do something like


```
AbstractGraph *g;
g = either Graph or Digraph
g.add_edge(i,j)
g.change_color(i,c)
g.find_automorphisms()
```


I think this would be the most efficient way to handle digraphs/graphs. 

Do you think this will work out or do you see any other way to handle these two types?



---

archive/issue_comments_228846.json:
```json
{
    "body": "Yo !\n\n> Continuing our talk here I have a short question. The class definitions of a Graph and Digraph in bliss both contain the same functions add_edge(int i, int j) and change_color(int x, int c).\n> \n> Now as far as I see *if* we patch bliss to make these two functions a (virtual) part of the abstract graph class then we could do something like\n\nOh. Well... It would be best to not patch anything in bliss, just in case they release a new version... You can add whatever code you need in the Sage code though.\n\nBut really if it is just to avoid some \"if\", perhaps that's going a bit far `O_o`\n\nNathann",
    "created_at": "2014-12-27T11:44:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228846",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> Continuing our talk here I have a short question. The class definitions of a Graph and Digraph in bliss both contain the same functions add_edge(int i, int j) and change_color(int x, int c).
> 
> Now as far as I see *if* we patch bliss to make these two functions a (virtual) part of the abstract graph class then we could do something like

Oh. Well... It would be best to not patch anything in bliss, just in case they release a new version... You can add whatever code you need in the Sage code though.

But really if it is just to avoid some "if", perhaps that's going a bit far `O_o`

Nathann



---

archive/issue_comments_228847.json:
```json
{
    "body": "Note: it would be cool to make bliss the default algorithm for the computation of automorphism group <when it is available>. Some other code call this graph automorphism code: we should of course add an optional flag there to ask those function to use bliss, but it could also help if it was used by default when available.\n\nJust in case we forget it, from time to time. 'Cause I think that this code is really called from many obscure places in Sage.\n\nNathann",
    "created_at": "2014-12-27T11:57:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228847",
    "user": "https://github.com/nathanncohen"
}
```

Note: it would be cool to make bliss the default algorithm for the computation of automorphism group <when it is available>. Some other code call this graph automorphism code: we should of course add an optional flag there to ask those function to use bliss, but it could also help if it was used by default when available.

Just in case we forget it, from time to time. 'Cause I think that this code is really called from many obscure places in Sage.

Nathann



---

archive/issue_comments_228848.json:
```json
{
    "body": "Replying to [comment:6 ncohen]:\n> Yo !\n> \n> > Continuing our talk here I have a short question. The class definitions of a Graph and Digraph in bliss both contain the same functions add_edge(int i, int j) and change_color(int x, int c).\n> > \n> > Now as far as I see *if* we patch bliss to make these two functions a (virtual) part of the abstract graph class then we could do something like\n> \n> Oh. Well... It would be best to not patch anything in bliss, just in case they release a new version... You can add whatever code you need in the Sage code though.\n> \n> But really if it is just to avoid some \"if\", perhaps that's going a bit far `O_o`\nYes I am most likely over-thinking it. Though with the if part we get an awful lot of duplicated (ugly). I guess there is some other way to make it nice while still being efficient - more to this when the actual branch is ready for review.\n\nBest,\n\nJernej\n\n> \n> Nathann",
    "created_at": "2014-12-27T19:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228848",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Replying to [comment:6 ncohen]:
> Yo !
> 
> > Continuing our talk here I have a short question. The class definitions of a Graph and Digraph in bliss both contain the same functions add_edge(int i, int j) and change_color(int x, int c).
> > 
> > Now as far as I see *if* we patch bliss to make these two functions a (virtual) part of the abstract graph class then we could do something like
> 
> Oh. Well... It would be best to not patch anything in bliss, just in case they release a new version... You can add whatever code you need in the Sage code though.
> 
> But really if it is just to avoid some "if", perhaps that's going a bit far `O_o`
Yes I am most likely over-thinking it. Though with the if part we get an awful lot of duplicated (ugly). I guess there is some other way to make it nice while still being efficient - more to this when the actual branch is ready for review.

Best,

Jernej

> 
> Nathann



---

archive/issue_comments_228849.json:
```json
{
    "body": "Replying to [comment:7 ncohen]:\n> Note: it would be cool to make bliss the default algorithm for the computation of automorphism group <when it is available>. Some other code call this graph automorphism code: we should of course add an optional flag there to ask those function to use bliss, but it could also help if it was used by default when available.\nI agree ! Let me first check how this performance thing works out for general graphs.\n\n> \n> Just in case we forget it, from time to time. 'Cause I think that this code is really called from many obscure places in Sage.\nWhich code, the automorphism thing?\n> \n> Nathann",
    "created_at": "2014-12-27T19:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228849",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Replying to [comment:7 ncohen]:
> Note: it would be cool to make bliss the default algorithm for the computation of automorphism group <when it is available>. Some other code call this graph automorphism code: we should of course add an optional flag there to ask those function to use bliss, but it could also help if it was used by default when available.
I agree ! Let me first check how this performance thing works out for general graphs.

> 
> Just in case we forget it, from time to time. 'Cause I think that this code is really called from many obscure places in Sage.
Which code, the automorphism thing?
> 
> Nathann



---

archive/issue_comments_228850.json:
```json
{
    "body": "> > Just in case we forget it, from time to time. 'Cause I think that this code is really called from many obscure places in Sage.\n> Which code, the automorphism thing?\n\nYep. I'd be surprised if all functions named \"automorphism_group\" in Sage don't redirect to that in the end.\n\nNathann",
    "created_at": "2014-12-28T03:53:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228850",
    "user": "https://github.com/nathanncohen"
}
```

> > Just in case we forget it, from time to time. 'Cause I think that this code is really called from many obscure places in Sage.
> Which code, the automorphism thing?

Yep. I'd be surprised if all functions named "automorphism_group" in Sage don't redirect to that in the end.

Nathann



---

archive/issue_comments_228851.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-28T11:03:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228851",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228852.json:
```json
{
    "body": "The speedup looks promising. Just a quick preview :\n\n\n```\nsage: G = graphs.CubeGraph(4)\nsage: %timeit automorphism_group_bliss(G)\n1000 loops, best of 3: 885 \u00b5s per loop\nsage: %timeit G.automorphism_group()\n1000 loops, best of 3: 1.31 ms per loop\n```\n\n\n\n```\nsage: G = graphs.GeneralizedPetersenGraph(250,2)\nsage: %timeit automorphism_group_bliss(G)\n100 loops, best of 3: 7.21 ms per loop\nsage: %timeit G.automorphism_group()\n10 loops, best of 3: 45.8 ms per loop\n```\n\n\n\n```\nsage: G.order()\nsage: 9369\nsage: t1 = time() ; A = automorphism_group_bliss(G); t2 = time()\nsage: t2-t1\n37.43013310432434\nsage: t1 = time() ; A = G.automorphism_group(); t2 = time() # uses 50% of RAM\nsage: t2-t1\n624.5415680408478\n```\n\n\nAsymmetric graphs:\n\n\n```\nsage: G = graphs.RandomGNP(500,0.8)\nsage: %timeit G.automorphism_group()\n1 loops, best of 3: 499 ms per loop\nsage: %timeit automorphism_group_bliss(G)\n10 loops, best of 3: 163 ms per loop\n\nsage: G = graphs.RandomGNP(3300, 0.1)\nsage: %timeit automorphism_group_bliss(G)\n1 loops, best of 3: 923 ms per loop\nsage: %timeit G.automorphism_group()\n1 loops, best of 3: 6.49 s per loop\n\n```\n",
    "created_at": "2014-12-28T12:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228852",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

The speedup looks promising. Just a quick preview :


```
sage: G = graphs.CubeGraph(4)
sage: %timeit automorphism_group_bliss(G)
1000 loops, best of 3: 885 Âµs per loop
sage: %timeit G.automorphism_group()
1000 loops, best of 3: 1.31 ms per loop
```



```
sage: G = graphs.GeneralizedPetersenGraph(250,2)
sage: %timeit automorphism_group_bliss(G)
100 loops, best of 3: 7.21 ms per loop
sage: %timeit G.automorphism_group()
10 loops, best of 3: 45.8 ms per loop
```



```
sage: G.order()
sage: 9369
sage: t1 = time() ; A = automorphism_group_bliss(G); t2 = time()
sage: t2-t1
37.43013310432434
sage: t1 = time() ; A = G.automorphism_group(); t2 = time() # uses 50% of RAM
sage: t2-t1
624.5415680408478
```


Asymmetric graphs:


```
sage: G = graphs.RandomGNP(500,0.8)
sage: %timeit G.automorphism_group()
1 loops, best of 3: 499 ms per loop
sage: %timeit automorphism_group_bliss(G)
10 loops, best of 3: 163 ms per loop

sage: G = graphs.RandomGNP(3300, 0.1)
sage: %timeit automorphism_group_bliss(G)
1 loops, best of 3: 923 ms per loop
sage: %timeit G.automorphism_group()
1 loops, best of 3: 6.49 s per loop

```




---

archive/issue_comments_228853.json:
```json
{
    "body": "Looks good ! I'm eager to use this in my hypergraph computations `:-PPPP`\n\nNathann",
    "created_at": "2014-12-29T04:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228853",
    "user": "https://github.com/nathanncohen"
}
```

Looks good ! I'm eager to use this in my hypergraph computations `:-PPPP`

Nathann



---

archive/issue_comments_228854.json:
```json
{
    "body": "For the modules_list.py file: look in the same file for occurrences of \"CPLEX\" or \"gurobi\". They are also optional packages, and for optional packages you should first make sure that they are installed before asking Sage to compile the .pyx.\n\nNathann",
    "created_at": "2014-12-29T05:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228854",
    "user": "https://github.com/nathanncohen"
}
```

For the modules_list.py file: look in the same file for occurrences of "CPLEX" or "gurobi". They are also optional packages, and for optional packages you should first make sure that they are installed before asking Sage to compile the .pyx.

Nathann



---

archive/issue_comments_228855.json:
```json
{
    "body": "Did this! Also tested your example from the other day.\n\nA workable branch is now available at public/bliss2. I am having a mismatch trying to push it to public/bliss.\n\nBefore we change Graph.canonical_form,is_isomorphic,automorphism_group I suggest that we address the FIXME stuff in the bliss.pyx code.\n\nAnother \"issue\" that is not in the code is what are we to do with the heuristics. There are a few heuristics for bliss and we can make them as an available choice for Sage or just go ahead with the default one.\n\nLet me know what you think,\n\nJernej\n\nOhh, and here is your bipartite graph example:\n\n\n```\nsage: t1 = time() ; A = automorphism_group_bliss(G); t2 = time()\nsage: t2-t1\n0.15731596946716309\nsage: t1 = time() ; A = G.automorphism_group(); t2 = time()\n....... indefinitely..............\n```\n",
    "created_at": "2014-12-29T11:11:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228855",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Did this! Also tested your example from the other day.

A workable branch is now available at public/bliss2. I am having a mismatch trying to push it to public/bliss.

Before we change Graph.canonical_form,is_isomorphic,automorphism_group I suggest that we address the FIXME stuff in the bliss.pyx code.

Another "issue" that is not in the code is what are we to do with the heuristics. There are a few heuristics for bliss and we can make them as an available choice for Sage or just go ahead with the default one.

Let me know what you think,

Jernej

Ohh, and here is your bipartite graph example:


```
sage: t1 = time() ; A = automorphism_group_bliss(G); t2 = time()
sage: t2-t1
0.15731596946716309
sage: t1 = time() ; A = G.automorphism_group(); t2 = time()
....... indefinitely..............
```




---

archive/issue_comments_228856.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-12-29T11:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228856",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

New commits:



---

archive/issue_comments_228857.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2014-12-29T11:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228857",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_228858.json:
```json
{
    "body": "Oh wow what a mess again...",
    "created_at": "2014-12-29T11:11:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228858",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Oh wow what a mess again...



---

archive/issue_comments_228859.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-12-29T11:12:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228859",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

New commits:



---

archive/issue_comments_228860.json:
```json
{
    "body": "Reverted back to the public/bliss branch, apparently I've pushed some old unrelated nonsesne...",
    "created_at": "2014-12-29T11:12:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228860",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Reverted back to the public/bliss branch, apparently I've pushed some old unrelated nonsesne...



---

archive/issue_comments_228861.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-29T11:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228861",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228862.json:
```json
{
    "body": "I think this last pushed branch should be good.",
    "created_at": "2014-12-29T11:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228862",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

I think this last pushed branch should be good.



---

archive/issue_comments_228863.json:
```json
{
    "body": "Yo !\n\n> Before we change Graph.canonical_form,is_isomorphic,automorphism_group I suggest that we address the FIXME stuff in the bliss.pyx code.\n\nI am already writing some code at the moment and when I will be done I must go back to my blackboard. Is there is some specific question that you have for this patch please ask it, but if I begin to look at bliss' API, understand your code and answer the questions that you wrote inside it will probably take me as much time as writing the interface from scratch `:-P`\n\n> Another \"issue\" that is not in the code is what are we to do with the heuristics. There are a few heuristics for bliss and we can make them as an available choice for Sage or just go ahead with the default one.\n\nThe current branch contains already many commits, and there are many things to pay attention to (we really don't want this code to return wrong results because of a typo) so it will probably be best to keep this branch to a minimum.\n\nThat does not mean that anything will have to be delayed: this branch will be sooner in `positive_review`, and then you can expose those features in another ticket.\n\nGood luck ! `:-P`\n\nNathann",
    "created_at": "2014-12-29T12:33:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228863",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> Before we change Graph.canonical_form,is_isomorphic,automorphism_group I suggest that we address the FIXME stuff in the bliss.pyx code.

I am already writing some code at the moment and when I will be done I must go back to my blackboard. Is there is some specific question that you have for this patch please ask it, but if I begin to look at bliss' API, understand your code and answer the questions that you wrote inside it will probably take me as much time as writing the interface from scratch `:-P`

> Another "issue" that is not in the code is what are we to do with the heuristics. There are a few heuristics for bliss and we can make them as an available choice for Sage or just go ahead with the default one.

The current branch contains already many commits, and there are many things to pay attention to (we really don't want this code to return wrong results because of a typo) so it will probably be best to keep this branch to a minimum.

That does not mean that anything will have to be delayed: this branch will be sooner in `positive_review`, and then you can expose those features in another ticket.

Good luck ! `:-P`

Nathann



---

archive/issue_comments_228864.json:
```json
{
    "body": "Replying to [comment:24 ncohen]:\n> Yo !\n> \n> > Before we change Graph.canonical_form,is_isomorphic,automorphism_group I suggest that we address >the FIXME stuff in the bliss.pyx code.\n> \n> I am already writing some code at the moment and when I will be done I must go back to my blackboard. Is there is some specific question that you have for this patch please ask it, but if I begin to look at bliss' API, understand your code and answer the questions that you wrote inside it will probably take me as much time as writing the interface from scratch `:-P`\nOkay.\n\nSooo\n\n1. Bliss returns a list of automorphisms as bijections. There is a function inside the code that then in one pass creates the respective cycle notation for the permutation while also applying the labelling of the graph. We have Permutation.to_cycle() that does the job but only on integer valued bijections. As is I'd like to leave this function in bliss.pyx and then perhaps once labelled permutations are supported by to_cycle(), revert to that. The main reason being that I am using Sage on graphs with 700k vertices and its a pain to have to iterate over and over for the sake of labels.\n\n2. There is a very erratic bug  using bliss on digraphs.\n\n\n```\n    sage: D = digraphs.Kautz(10,2,1)\n    sage: from sage.graphs.bliss import *\n    sage: D.automorphism_group().is_isomorphic(automorphism_group(D))\n    True\n    sage: D.automorphism_group().is_isomorphic(automorphism_group(D))\n    Bliss fatal error: Internal error - unknown splitting heuristics\n    Aborting!\n```\n\n\nI have no clue why this is happening. Do you have any intuition as to where to look for the issue? The code for Graph/Digraph that raises this exception is identical yet this only happens sporadically with digraphs.\n\nAs far as technical questions go, this are the main things I need some input about.\n\nBest,\n\nJernej\n\n> > Another \"issue\" that is not in the code is what are we to do with the heuristics. There are a few heuristics for bliss and we can make them as an available choice for Sage or just go ahead with the default one.\n> \n> The current branch contains already many commits, and there are many things to pay attention to (we really don't want this code to return wrong results because of a typo) so it will probably be best to keep this branch to a minimum.\n> \n> That does not mean that anything will have to be delayed: this branch will be sooner in `positive_review`, and then you can expose those features in another ticket.\n> \n> Good luck ! `:-P`\n> \n> Nathann",
    "created_at": "2014-12-29T12:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228864",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Replying to [comment:24 ncohen]:
> Yo !
> 
> > Before we change Graph.canonical_form,is_isomorphic,automorphism_group I suggest that we address >the FIXME stuff in the bliss.pyx code.
> 
> I am already writing some code at the moment and when I will be done I must go back to my blackboard. Is there is some specific question that you have for this patch please ask it, but if I begin to look at bliss' API, understand your code and answer the questions that you wrote inside it will probably take me as much time as writing the interface from scratch `:-P`
Okay.

Sooo

1. Bliss returns a list of automorphisms as bijections. There is a function inside the code that then in one pass creates the respective cycle notation for the permutation while also applying the labelling of the graph. We have Permutation.to_cycle() that does the job but only on integer valued bijections. As is I'd like to leave this function in bliss.pyx and then perhaps once labelled permutations are supported by to_cycle(), revert to that. The main reason being that I am using Sage on graphs with 700k vertices and its a pain to have to iterate over and over for the sake of labels.

2. There is a very erratic bug  using bliss on digraphs.


```
    sage: D = digraphs.Kautz(10,2,1)
    sage: from sage.graphs.bliss import *
    sage: D.automorphism_group().is_isomorphic(automorphism_group(D))
    True
    sage: D.automorphism_group().is_isomorphic(automorphism_group(D))
    Bliss fatal error: Internal error - unknown splitting heuristics
    Aborting!
```


I have no clue why this is happening. Do you have any intuition as to where to look for the issue? The code for Graph/Digraph that raises this exception is identical yet this only happens sporadically with digraphs.

As far as technical questions go, this are the main things I need some input about.

Best,

Jernej

> > Another "issue" that is not in the code is what are we to do with the heuristics. There are a few heuristics for bliss and we can make them as an available choice for Sage or just go ahead with the default one.
> 
> The current branch contains already many commits, and there are many things to pay attention to (we really don't want this code to return wrong results because of a typo) so it will probably be best to keep this branch to a minimum.
> 
> That does not mean that anything will have to be delayed: this branch will be sooner in `positive_review`, and then you can expose those features in another ticket.
> 
> Good luck ! `:-P`
> 
> Nathann



---

archive/issue_comments_228865.json:
```json
{
    "body": "Yoooooo !\n\n> 1. Bliss returns a list of automorphisms as bijections.\n\nWhich are the automorphisms which generate the full automorphism group of the graph ?\n\n> There is a function inside the code that then in one pass creates the respective cycle notation for the permutation while also applying the labelling of the graph. We have Permutation.to_cycle() that does the job but only on integer valued bijections. As is I'd like to leave this function in bliss.pyx and then perhaps once labelled permutations are supported by to_cycle(), revert to that. The main reason being that I am using Sage on graphs with 700k vertices and its a pain to have to iterate over and over for the sake of labels.\n\n+1 to that. It is not a very big amount of code, and one can never tell the amount of useless computations done by the `Permutation` code anyway `:-P`\n\n> 2. There is a very erratic bug  using bliss on digraphs.\n>\n> I have no clue why this is happening. Do you have any intuition as to where to look for the issue? The code for Graph/Digraph that raises this exception is identical yet this only happens sporadically with digraphs.\n\nBut can it happen the first time you call the code, or only after several attempts ? This looks like a memory leak problem... Unless it is a bug in bliss `O_o`\n\nActually, reading the code a bit, I am totally scared by how you cast Python objects like the two dictionaries to a bliss function. It expects C arrays, and you give it a pointer to a Python dictionary ? `O_o;;;;`\n\nNathann",
    "created_at": "2014-12-29T13:00:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228865",
    "user": "https://github.com/nathanncohen"
}
```

Yoooooo !

> 1. Bliss returns a list of automorphisms as bijections.

Which are the automorphisms which generate the full automorphism group of the graph ?

> There is a function inside the code that then in one pass creates the respective cycle notation for the permutation while also applying the labelling of the graph. We have Permutation.to_cycle() that does the job but only on integer valued bijections. As is I'd like to leave this function in bliss.pyx and then perhaps once labelled permutations are supported by to_cycle(), revert to that. The main reason being that I am using Sage on graphs with 700k vertices and its a pain to have to iterate over and over for the sake of labels.

+1 to that. It is not a very big amount of code, and one can never tell the amount of useless computations done by the `Permutation` code anyway `:-P`

> 2. There is a very erratic bug  using bliss on digraphs.
>
> I have no clue why this is happening. Do you have any intuition as to where to look for the issue? The code for Graph/Digraph that raises this exception is identical yet this only happens sporadically with digraphs.

But can it happen the first time you call the code, or only after several attempts ? This looks like a memory leak problem... Unless it is a bug in bliss `O_o`

Actually, reading the code a bit, I am totally scared by how you cast Python objects like the two dictionaries to a bliss function. It expects C arrays, and you give it a pointer to a Python dictionary ? `O_o;;;;`

Nathann



---

archive/issue_comments_228866.json:
```json
{
    "body": "Replying to [comment:26 ncohen]:\n> Yoooooo !\n> \n> > 1. Bliss returns a list of automorphisms as bijections.\n> \n> Which are the automorphisms which generate the full automorphism group of the graph ?\nYes, each time bliss discovers an automorphism it calls this function to handle it.\n> \n> > There is a function inside the code that then in one pass creates the respective cycle notation for the permutation while also applying the labelling of the graph. We have Permutation.to_cycle() that does the job but only on integer valued bijections. As is I'd like to leave this function in bliss.pyx and then perhaps once labelled permutations are supported by to_cycle(), revert to that. The main reason being that I am using Sage on graphs with 700k vertices and its a pain to have to iterate over and over for the sake of labels.\n> \n> +1 to that. It is not a very big amount of code, and one can never tell the amount of useless computations done by the `Permutation` code anyway `:-P`\nExactly:D\n\n\n> \n> > 2. There is a very erratic bug  using bliss on digraphs.\n> >\n> > I have no clue why this is happening. Do you have any intuition as to where to look for the issue? The code for Graph/Digraph that raises this exception is identical yet this only happens sporadically with digraphs.\n> \n> But can it happen the first time you call the code, or only after several attempts ? This looks like a memory leak problem... Unless it is a bug in bliss `O_o`\nYes it can happen on first try as well!!\n> \n> Actually, reading the code a bit, I am totally scared by how you cast Python objects like the two dictionaries to a bliss function. It expects C arrays, and you give it a pointer to a Python dictionary ? `O_o;;;;`\nNo I am sure I am not doing this. The argument there is a just a void pointer that bliss then passes on to your function. \n\nSoo bliss takes a function pointer to YOUR function and a pointer to YOUR data. And then it calls YOUR function passing it YOUR void pointer.\n\nSo that should be fine I suppose?\n> \n> Nathann",
    "created_at": "2014-12-29T13:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228866",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Replying to [comment:26 ncohen]:
> Yoooooo !
> 
> > 1. Bliss returns a list of automorphisms as bijections.
> 
> Which are the automorphisms which generate the full automorphism group of the graph ?
Yes, each time bliss discovers an automorphism it calls this function to handle it.
> 
> > There is a function inside the code that then in one pass creates the respective cycle notation for the permutation while also applying the labelling of the graph. We have Permutation.to_cycle() that does the job but only on integer valued bijections. As is I'd like to leave this function in bliss.pyx and then perhaps once labelled permutations are supported by to_cycle(), revert to that. The main reason being that I am using Sage on graphs with 700k vertices and its a pain to have to iterate over and over for the sake of labels.
> 
> +1 to that. It is not a very big amount of code, and one can never tell the amount of useless computations done by the `Permutation` code anyway `:-P`
Exactly:D


> 
> > 2. There is a very erratic bug  using bliss on digraphs.
> >
> > I have no clue why this is happening. Do you have any intuition as to where to look for the issue? The code for Graph/Digraph that raises this exception is identical yet this only happens sporadically with digraphs.
> 
> But can it happen the first time you call the code, or only after several attempts ? This looks like a memory leak problem... Unless it is a bug in bliss `O_o`
Yes it can happen on first try as well!!
> 
> Actually, reading the code a bit, I am totally scared by how you cast Python objects like the two dictionaries to a bliss function. It expects C arrays, and you give it a pointer to a Python dictionary ? `O_o;;;;`
No I am sure I am not doing this. The argument there is a just a void pointer that bliss then passes on to your function. 

Soo bliss takes a function pointer to YOUR function and a pointer to YOUR data. And then it calls YOUR function passing it YOUR void pointer.

So that should be fine I suppose?
> 
> Nathann



---

archive/issue_comments_228867.json:
```json
{
    "body": "Ohh and another reason why it may not be related to this wrapper is the fact that the same error is occuring with canonical_form which actually does not involve using this pointers/functions thing.\n\n\n```\nsage: from sage.graphs.bliss import *\nsage: D = digraphs.Kautz(10,1,2)\nsage: canonical_form(D)\nBliss fatal error: Internal error - unknown splitting heuristics\nAborting!\n```\n",
    "created_at": "2014-12-29T13:10:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228867",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Ohh and another reason why it may not be related to this wrapper is the fact that the same error is occuring with canonical_form which actually does not involve using this pointers/functions thing.


```
sage: from sage.graphs.bliss import *
sage: D = digraphs.Kautz(10,1,2)
sage: canonical_form(D)
Bliss fatal error: Internal error - unknown splitting heuristics
Aborting!
```




---

archive/issue_comments_228868.json:
```json
{
    "body": "Yo !\n\n> Ohh and another reason why it may not be related to this wrapper is the fact that the same error is occuring with canonical_form which actually does not involve using this pointers/functions thing.\n\nTrue. HMmmmmmm... `O_o`\n\nWell, I looked at the code for a while and I really don't see anything that could produce that.... Short of a bliss bug... `O_o`\n\nNathann",
    "created_at": "2014-12-29T13:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228868",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> Ohh and another reason why it may not be related to this wrapper is the fact that the same error is occuring with canonical_form which actually does not involve using this pointers/functions thing.

True. HMmmmmmm... `O_o`

Well, I looked at the code for a while and I really don't see anything that could produce that.... Short of a bliss bug... `O_o`

Nathann



---

archive/issue_comments_228869.json:
```json
{
    "body": "Replying to [comment:29 ncohen]:\n> Yo !\n> \n> > Ohh and another reason why it may not be related to this wrapper is the fact that the same error is occuring with canonical_form which actually does not involve using this pointers/functions thing.\n> \n> True. HMmmmmmm... `O_o`\n> \n> Well, I looked at the code for a while and I really don't see anything that could produce that.... Short of a bliss bug... `O_o`\n\nYeah.. I'll try to reproduce it in bliss directly.\n> \n> Nathann",
    "created_at": "2014-12-29T13:42:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228869",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Replying to [comment:29 ncohen]:
> Yo !
> 
> > Ohh and another reason why it may not be related to this wrapper is the fact that the same error is occuring with canonical_form which actually does not involve using this pointers/functions thing.
> 
> True. HMmmmmmm... `O_o`
> 
> Well, I looked at the code for a while and I really don't see anything that could produce that.... Short of a bliss bug... `O_o`

Yeah.. I'll try to reproduce it in bliss directly.
> 
> Nathann



---

archive/issue_comments_228870.json:
```json
{
    "body": "Looks really weird. \n\nI am waiting to figure out how can I be able to force a certain heuristic to be used because the behaviour right now is just sick. I've changed the \"hook function\" to an empty function (not doing any work) and its still messy:\n\n\n```\nsage: D = digraphs.Kautz(10,3,2)\nsage: from sage.graphs.bliss import *\nsage: automorphism_group(D)\nPermutation Group with generators [()]\nsage: automorphism_group(D)\nPermutation Group with generators [()]\nsage: automorphism_group(D)\nPermutation Group with generators [()]\nsage: automorphism_group(D)\nPermutation Group with generators [()]\nsage: automorphism_group(D)\nBliss fatal error: Internal error - unknown splitting heuristics\nAborting!\n```\n\n\nif G is a graph then \n\n```\nwhile True: A = automorphism_group(G) \n```\n\n\nworks well. :O",
    "created_at": "2014-12-30T10:03:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228870",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Looks really weird. 

I am waiting to figure out how can I be able to force a certain heuristic to be used because the behaviour right now is just sick. I've changed the "hook function" to an empty function (not doing any work) and its still messy:


```
sage: D = digraphs.Kautz(10,3,2)
sage: from sage.graphs.bliss import *
sage: automorphism_group(D)
Permutation Group with generators [()]
sage: automorphism_group(D)
Permutation Group with generators [()]
sage: automorphism_group(D)
Permutation Group with generators [()]
sage: automorphism_group(D)
Permutation Group with generators [()]
sage: automorphism_group(D)
Bliss fatal error: Internal error - unknown splitting heuristics
Aborting!
```


if G is a graph then 

```
while True: A = automorphism_group(G) 
```


works well. :O



---

archive/issue_comments_228871.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-12-30T11:10:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228871",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228872.json:
```json
{
    "body": "Okay, for *now* a working fix is to change the line in bliss that declares the splitting heuristics to include an assignment:\n\n\n```\n\n846   SplittingHeuristic sh = shs_flm;\n```\n\n\nSince this is not done for graphs it makes all of this very suspicious but it works. \n\nI've also talked with the author of bliss who confirmed this is an actually bug that he'll address in an upcoming release of bliss. In the meantime he says the above is a valid fix.\n\nThat said, I think it makes sense to see what is to be done to push this branch further? I have added some small documentation and would like to hear any kind of input that you may have.\n\nBest,\n\nJernej",
    "created_at": "2014-12-30T11:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228872",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Okay, for *now* a working fix is to change the line in bliss that declares the splitting heuristics to include an assignment:


```

846   SplittingHeuristic sh = shs_flm;
```


Since this is not done for graphs it makes all of this very suspicious but it works. 

I've also talked with the author of bliss who confirmed this is an actually bug that he'll address in an upcoming release of bliss. In the meantime he says the above is a valid fix.

That said, I think it makes sense to see what is to be done to push this branch further? I have added some small documentation and would like to hear any kind of input that you may have.

Best,

Jernej



---

archive/issue_comments_228873.json:
```json
{
    "body": "Yooooooooo !\n\n> Since this is not done for graphs it makes all of this very suspicious but it works. \n> \n> I've also talked with the author of bliss who confirmed this is an actually bug that he'll address in an upcoming release of bliss. In the meantime he says the above is a valid fix.\n\nOh, excellent news !\n\n> That said, I think it makes sense to see what is to be done to push this branch further?\n\nFirst, it would be really good to have the 'spkg' ticket in `positive_review`. Jeroen set it back to `needs_work` recently, and now you have something else to add to it: the patch to change this line.\n\nNow, you cannot modify upstream directly (i.e. the .tar.bz2 file) so you must use the 'patch' mechanism that is already being used in build/pkgs/sympy (for example). Look at the sympy/spkg-install file and the patches/ folder. The corresponding doc is there:\n\nhttp://www.sagemath.org/doc/developer/packaging.html#patching-sources\n\n> I have added some small documentation and would like to hear any kind of input that you may have.\n\nWell, it seems that you still have some notes to yourself in the branch. Those that you cannot solve right now should probably appear in the documentation of the function to which they apply, and not at module level. (note: you can write a docstring in C functions. It will not appear as html do of course, but that's the right place to write the function's doc.)\n\nIn particular you have some formatting to do (a)length of lines b) the first line of doc is a one-line sentence describing the function.\n\nYou can also add the mechanism that makes GenericGraph.automorphism_group use bliss if available by default (set algorithm=None by default, and `if algorithm is None and is_package_installed(\"bliss\")` then ...) if you like, otherwise I will do it at some point.\n\nThere is also this in the code\n\n```\n+        if algorithm == \"bliss\":\n+            print 'yes'                \n+            return\n```\n\n\nBut really that's just cleaning. Short of that I do not think that there is anything important missing.\n\nOh, by the way: I do not think that you should really carry those vert2int or int2vert around. You could just say somewhere that the integer names of the vertices are those obtained by the ordering of `g.vertices()`\n\nThen defining the two dictionaries is rather easy\n\n```\nint2verts = g.vertices()\nvert2int = {v:i for i,v in enumerate(int2verts)}\n```\n\n\nWell, that's all. Only \"code administration\" `^^;`\n\nNathann",
    "created_at": "2014-12-30T11:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228873",
    "user": "https://github.com/nathanncohen"
}
```

Yooooooooo !

> Since this is not done for graphs it makes all of this very suspicious but it works. 
> 
> I've also talked with the author of bliss who confirmed this is an actually bug that he'll address in an upcoming release of bliss. In the meantime he says the above is a valid fix.

Oh, excellent news !

> That said, I think it makes sense to see what is to be done to push this branch further?

First, it would be really good to have the 'spkg' ticket in `positive_review`. Jeroen set it back to `needs_work` recently, and now you have something else to add to it: the patch to change this line.

Now, you cannot modify upstream directly (i.e. the .tar.bz2 file) so you must use the 'patch' mechanism that is already being used in build/pkgs/sympy (for example). Look at the sympy/spkg-install file and the patches/ folder. The corresponding doc is there:

http://www.sagemath.org/doc/developer/packaging.html#patching-sources

> I have added some small documentation and would like to hear any kind of input that you may have.

Well, it seems that you still have some notes to yourself in the branch. Those that you cannot solve right now should probably appear in the documentation of the function to which they apply, and not at module level. (note: you can write a docstring in C functions. It will not appear as html do of course, but that's the right place to write the function's doc.)

In particular you have some formatting to do (a)length of lines b) the first line of doc is a one-line sentence describing the function.

You can also add the mechanism that makes GenericGraph.automorphism_group use bliss if available by default (set algorithm=None by default, and `if algorithm is None and is_package_installed("bliss")` then ...) if you like, otherwise I will do it at some point.

There is also this in the code

```
+        if algorithm == "bliss":
+            print 'yes'                
+            return
```


But really that's just cleaning. Short of that I do not think that there is anything important missing.

Oh, by the way: I do not think that you should really carry those vert2int or int2vert around. You could just say somewhere that the integer names of the vertices are those obtained by the ordering of `g.vertices()`

Then defining the two dictionaries is rather easy

```
int2verts = g.vertices()
vert2int = {v:i for i,v in enumerate(int2verts)}
```


Well, that's all. Only "code administration" `^^;`

Nathann



---

archive/issue_comments_228874.json:
```json
{
    "body": "Replying to [comment:34 ncohen]:\n> Yooooooooo !\n> \n> > Since this is not done for graphs it makes all of this very suspicious but it works. \n> > \n> > I've also talked with the author of bliss who confirmed this is an actually bug that he'll address in an upcoming release of bliss. In the meantime he says the above is a valid fix.\n> \n> Oh, excellent news !\n> \n> > That said, I think it makes sense to see what is to be done to push this branch further?\n> \n> First, it would be really good to have the 'spkg' ticket in `positive_review`. Jeroen set it back to `needs_work` recently, and now you have something else to add to it: the patch to change this line.\n> \n> Now, you cannot modify upstream directly (i.e. the .tar.bz2 file) so you must use the 'patch' mechanism that is already being used in build/pkgs/sympy (for example). Look at the sympy/spkg-install file and the patches/ folder. The corresponding doc is there:\n> \n> http://www.sagemath.org/doc/developer/packaging.html#patching-sources\n> \n> > I have added some small documentation and would like to hear any kind of input that you may have.\nI think it would be good to mention how the patch is created since there may be different parameters to diff and also since we like to just copy paste stuff and not think too much.\n\n> \n> Well, it seems that you still have some notes to yourself in the branch. Those that you cannot solve right now should probably appear in the documentation of the function to which they apply, and not at module level. (note: you can write a docstring in C functions. It will not appear as html do of course, but that's the right place to write the function's doc.)\n> \n> In particular you have some formatting to do (a)length of lines b) the first line of doc is a one-line sentence describing the function.\n> \n> You can also add the mechanism that makes GenericGraph.automorphism_group use bliss if available by default (set algorithm=None by default, and `if algorithm is None and is_package_installed(\"bliss\")` then ...) if you like, otherwise I will do it at some point.\n> \n> There is also this in the code\n> {{{\n> +        if algorithm == \"bliss\":\n> +            print 'yes'                \n> +            return\n> }}}\nYes, I'll make bliss the default the above was just a test. Though I we should really test this thoroughly since it can get messy if we leave a bug inside.. I spotted one before. Considering\n\n\n```\nreturn PermutationGroup(gens) \n```\n\n\neverything works well most of the time (since in all tested graphs every vertex appears in some cycle of the generator). But if you do not specify the domain you may get automorphism groups not acting on all the required points...\n\n> \n> But really that's just cleaning. Short of that I do not think that there is anything important missing.\n> \n> Oh, by the way: I do not think that you should really carry those vert2int or int2vert around. You could just say somewhere that the integer names of the vertices are those obtained by the ordering of `g.vertices()`\n> \n> Then defining the two dictionaries is rather easy\n> {{{\n> int2verts = g.vertices()\n> vert2int = {v:i for i,v in enumerate(int2verts)}\n> }}}\nYes that's right. What made me choose the present version is the fact that the second line is already a for loop over the vertices and from how I understand g.vertices() that always involves a loop as well (at least to get the labels of the graph, grrr)?\n> \n> Well, that's all. Only \"code administration\" `^^;`\nThanks.\n> \n> Nathann\nJernej",
    "created_at": "2014-12-30T14:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228874",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Replying to [comment:34 ncohen]:
> Yooooooooo !
> 
> > Since this is not done for graphs it makes all of this very suspicious but it works. 
> > 
> > I've also talked with the author of bliss who confirmed this is an actually bug that he'll address in an upcoming release of bliss. In the meantime he says the above is a valid fix.
> 
> Oh, excellent news !
> 
> > That said, I think it makes sense to see what is to be done to push this branch further?
> 
> First, it would be really good to have the 'spkg' ticket in `positive_review`. Jeroen set it back to `needs_work` recently, and now you have something else to add to it: the patch to change this line.
> 
> Now, you cannot modify upstream directly (i.e. the .tar.bz2 file) so you must use the 'patch' mechanism that is already being used in build/pkgs/sympy (for example). Look at the sympy/spkg-install file and the patches/ folder. The corresponding doc is there:
> 
> http://www.sagemath.org/doc/developer/packaging.html#patching-sources
> 
> > I have added some small documentation and would like to hear any kind of input that you may have.
I think it would be good to mention how the patch is created since there may be different parameters to diff and also since we like to just copy paste stuff and not think too much.

> 
> Well, it seems that you still have some notes to yourself in the branch. Those that you cannot solve right now should probably appear in the documentation of the function to which they apply, and not at module level. (note: you can write a docstring in C functions. It will not appear as html do of course, but that's the right place to write the function's doc.)
> 
> In particular you have some formatting to do (a)length of lines b) the first line of doc is a one-line sentence describing the function.
> 
> You can also add the mechanism that makes GenericGraph.automorphism_group use bliss if available by default (set algorithm=None by default, and `if algorithm is None and is_package_installed("bliss")` then ...) if you like, otherwise I will do it at some point.
> 
> There is also this in the code
> {{{
> +        if algorithm == "bliss":
> +            print 'yes'                
> +            return
> }}}
Yes, I'll make bliss the default the above was just a test. Though I we should really test this thoroughly since it can get messy if we leave a bug inside.. I spotted one before. Considering


```
return PermutationGroup(gens) 
```


everything works well most of the time (since in all tested graphs every vertex appears in some cycle of the generator). But if you do not specify the domain you may get automorphism groups not acting on all the required points...

> 
> But really that's just cleaning. Short of that I do not think that there is anything important missing.
> 
> Oh, by the way: I do not think that you should really carry those vert2int or int2vert around. You could just say somewhere that the integer names of the vertices are those obtained by the ordering of `g.vertices()`
> 
> Then defining the two dictionaries is rather easy
> {{{
> int2verts = g.vertices()
> vert2int = {v:i for i,v in enumerate(int2verts)}
> }}}
Yes that's right. What made me choose the present version is the fact that the second line is already a for loop over the vertices and from how I understand g.vertices() that always involves a loop as well (at least to get the labels of the graph, grrr)?
> 
> Well, that's all. Only "code administration" `^^;`
Thanks.
> 
> Nathann
Jernej



---

archive/issue_comments_228875.json:
```json
{
    "body": "> I think it would be good to mention how the patch is created since there may be different parameters to diff and also since we like to just copy paste stuff and not think too much.\n\nWell, open a ticket and add the explanation. Sage's doc is changed exactly like the code is `:-P`\n\n> Yes that's right. What made me choose the present version is the fact that the second line is already a for loop over the vertices and from how I understand g.vertices() that always involves a loop as well (at least to get the labels of the graph, grrr)?\n\nI do not think that the time difference is anything but negligible there. Plus a \"loop\" does not cost anything by itself, it depends on what you loop I expect. If the loop involves many calls to `.next()` or something it may cost more than doing the same on a simple list, I don't know..\n\nNathann",
    "created_at": "2014-12-30T14:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228875",
    "user": "https://github.com/nathanncohen"
}
```

> I think it would be good to mention how the patch is created since there may be different parameters to diff and also since we like to just copy paste stuff and not think too much.

Well, open a ticket and add the explanation. Sage's doc is changed exactly like the code is `:-P`

> Yes that's right. What made me choose the present version is the fact that the second line is already a for loop over the vertices and from how I understand g.vertices() that always involves a loop as well (at least to get the labels of the graph, grrr)?

I do not think that the time difference is anything but negligible there. Plus a "loop" does not cost anything by itself, it depends on what you loop I expect. If the loop involves many calls to `.next()` or something it may cost more than doing the same on a simple list, I don't know..

Nathann



---

archive/issue_comments_228876.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-01T14:44:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228876",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228877.json:
```json
{
    "body": "First of all happy new year and stuff!!!!\n\n\nI've now pushed the latest branch for bliss but I am having a problem since when I do sage -t generic_graph.py it keeps saying\n\n```\n\n    def is_vertex_transitive(self, partition=None, verbosity=0,\n                                                              ^\nIndentationError: unindent does not match any outer indentation level\n```\n\n\nand I and vim's :list are just blind... (dont' see it)\n\nDo you happen to see where the indentation breaks and do you happen to have any new comments about the current code? I think it should be pretty near to what it should look like.",
    "created_at": "2015-01-01T14:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228877",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

First of all happy new year and stuff!!!!


I've now pushed the latest branch for bliss but I am having a problem since when I do sage -t generic_graph.py it keeps saying

```

    def is_vertex_transitive(self, partition=None, verbosity=0,
                                                              ^
IndentationError: unindent does not match any outer indentation level
```


and I and vim's :list are just blind... (dont' see it)

Do you happen to see where the indentation breaks and do you happen to have any new comments about the current code? I think it should be pretty near to what it should look like.



---

archive/issue_comments_228878.json:
```json
{
    "body": "Yop !\n\n> First of all happy new year and stuff!!!!\n+1\n\n> and I and vim's :list are just blind... (dont' see it)\n\nWhat I don't like about \"def canonical_label(...\" is that the doc appears BEFORE the function's definition. Could it be that ?\n\n> do you happen to have any new comments about the current code?\n\nWell, definitely there is something wrong in `automorphism_group`, where you define a keyword `algorithm` but never read it. Then you should probably add a couple of new doctests using bliss (with an #optional flag) in the function from `generic_graph`. Whatever you do with this function's input, you should probably do the same in the similar functions btw: `canonical_label`, and `is_isomorphic`.\n\nAlso, it looks like the test that you run in `is_isomorphic`  (number of edges/vertices) already appear a bit later in the code. No reason to have them appear twice.\n\nThere is still this line which has nothing to do here\n\n\n```diff\n+    :meth:`~GenericGraph.geodetic_number` | Returns the geodetic number of the given graph. \n```\n\n\nOh, and several lines are still longer than 80chr, and we try to wrap them because ...\n\nBecause somebody said that we had to.\n\nNathann",
    "created_at": "2015-01-01T15:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228878",
    "user": "https://github.com/nathanncohen"
}
```

Yop !

> First of all happy new year and stuff!!!!
+1

> and I and vim's :list are just blind... (dont' see it)

What I don't like about "def canonical_label(..." is that the doc appears BEFORE the function's definition. Could it be that ?

> do you happen to have any new comments about the current code?

Well, definitely there is something wrong in `automorphism_group`, where you define a keyword `algorithm` but never read it. Then you should probably add a couple of new doctests using bliss (with an #optional flag) in the function from `generic_graph`. Whatever you do with this function's input, you should probably do the same in the similar functions btw: `canonical_label`, and `is_isomorphic`.

Also, it looks like the test that you run in `is_isomorphic`  (number of edges/vertices) already appear a bit later in the code. No reason to have them appear twice.

There is still this line which has nothing to do here


```diff
+    :meth:`~GenericGraph.geodetic_number` | Returns the geodetic number of the given graph. 
```


Oh, and several lines are still longer than 80chr, and we try to wrap them because ...

Because somebody said that we had to.

Nathann



---

archive/issue_comments_228879.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-01T18:13:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228879",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228880.json:
```json
{
    "body": "Replying to [comment:39 ncohen]:\n\n> What I don't like about \"def canonical_label(...\" is that the doc appears BEFORE the function's definition. Could it be that ?\n\nThat surely didn't help but the error still persists :-S I have no idea where the mismatch is.\n\n\n> Well, definitely there is something wrong in `automorphism_group`, where you define a keyword `algorithm` but never read it.\nYes I was following your advice from above which was to add a condition of the form\n\n\n```\n if algorithm is None and is_package_installed(\"bliss\") :\n```\n\n\nsince we only offer two algorithms for now this works fine, perhaps provided that we write the option algorithm=\"nice\" to  indicate the currently default implementation? What do you suggest?\n\n\n\n\n> Then you should probably add a couple of new doctests using bliss (with an #optional flag) in the function from >`generic_graph`. Whatever you do with this function's input, you should probably do the same in the similar functions btw: >`canonical_label`, and `is_isomorphic`.\nIs it not enough to have them in bliss.pyx? If not, then I'll add some doctests when we agree on the technical aspects of the code \n\n\n> Also, it looks like the test that you run in `is_isomorphic`  (number of edges/vertices) already appear a bit later in the code. No reason to have them appear twice.\nfixed\n> \n> There is still this line which has nothing to do here\n> \n> {{{\n> #!diff\n> +    :meth:`~GenericGraph.geodetic_number` | Returns the geodetic number of the given graph. \n> }}}\nfixed\n \n> Oh, and several lines are still longer than 80chr, and we try to wrap them because ...\n80chr is quite tight :O Also have you noticed that there appears to be some indentation inconsistency in the code? It looks like the functions on the bottom (example def graph_isom_equivalent_non_edge_labeled_graph) are not indented as the above ones?   \n\nThanks for the input,\n\nJernej",
    "created_at": "2015-01-01T18:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228880",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Replying to [comment:39 ncohen]:

> What I don't like about "def canonical_label(..." is that the doc appears BEFORE the function's definition. Could it be that ?

That surely didn't help but the error still persists :-S I have no idea where the mismatch is.


> Well, definitely there is something wrong in `automorphism_group`, where you define a keyword `algorithm` but never read it.
Yes I was following your advice from above which was to add a condition of the form


```
 if algorithm is None and is_package_installed("bliss") :
```


since we only offer two algorithms for now this works fine, perhaps provided that we write the option algorithm="nice" to  indicate the currently default implementation? What do you suggest?




> Then you should probably add a couple of new doctests using bliss (with an #optional flag) in the function from >`generic_graph`. Whatever you do with this function's input, you should probably do the same in the similar functions btw: >`canonical_label`, and `is_isomorphic`.
Is it not enough to have them in bliss.pyx? If not, then I'll add some doctests when we agree on the technical aspects of the code 


> Also, it looks like the test that you run in `is_isomorphic`  (number of edges/vertices) already appear a bit later in the code. No reason to have them appear twice.
fixed
> 
> There is still this line which has nothing to do here
> 
> {{{
> #!diff
> +    :meth:`~GenericGraph.geodetic_number` | Returns the geodetic number of the given graph. 
> }}}
fixed
 
> Oh, and several lines are still longer than 80chr, and we try to wrap them because ...
80chr is quite tight :O Also have you noticed that there appears to be some indentation inconsistency in the code? It looks like the functions on the bottom (example def graph_isom_equivalent_non_edge_labeled_graph) are not indented as the above ones?   

Thanks for the input,

Jernej



---

archive/issue_comments_228881.json:
```json
{
    "body": "Hello !\n\n> That surely didn't help but the error still persists :-S I have no idea where the mismatch is.\n\nRight now when I run the tests on `generic_graph` I get several screens filled with \"is_package_installed is not defined\".\n\n> Yes I was following your advice from above which was to add a condition of the form\n> \n> {{{\n>  if algorithm is None and is_package_installed(\"bliss\") :\n> }}}\n> \n> since we only offer two algorithms for now this works fine, perhaps provided that we write the option algorithm=\"nice\" to  indicate the currently default implementation? What do you suggest?\n\nAnd what happens when you do `G.automorphism_group(algorithm=\"bliss\")` as indicated in the function's doc ? `:-P`\n\n> Is it not enough to have them in bliss.pyx? If not, then I'll add some doctests when we agree on the technical aspects of the code \n\nThat would be for advertising purposes. Just one would do, just to emphasize that another algorithm is available.\n\n> 80chr is quite tight :O \n\nAs usual it is some PEP's fault. It probably is PEP8. It is always PEP8's fault.\n\n> Also have you noticed that there appears to be some indentation inconsistency in the code? It looks like the functions on the bottom (example def graph_isom_equivalent_non_edge_labeled_graph) are not indented as the above ones?   \n\nOh ? No, I never saw that. Well, some hardcore PEP8 guy will probably change it some day.\n\nNathann",
    "created_at": "2015-01-02T07:14:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228881",
    "user": "https://github.com/nathanncohen"
}
```

Hello !

> That surely didn't help but the error still persists :-S I have no idea where the mismatch is.

Right now when I run the tests on `generic_graph` I get several screens filled with "is_package_installed is not defined".

> Yes I was following your advice from above which was to add a condition of the form
> 
> {{{
>  if algorithm is None and is_package_installed("bliss") :
> }}}
> 
> since we only offer two algorithms for now this works fine, perhaps provided that we write the option algorithm="nice" to  indicate the currently default implementation? What do you suggest?

And what happens when you do `G.automorphism_group(algorithm="bliss")` as indicated in the function's doc ? `:-P`

> Is it not enough to have them in bliss.pyx? If not, then I'll add some doctests when we agree on the technical aspects of the code 

That would be for advertising purposes. Just one would do, just to emphasize that another algorithm is available.

> 80chr is quite tight :O 

As usual it is some PEP's fault. It probably is PEP8. It is always PEP8's fault.

> Also have you noticed that there appears to be some indentation inconsistency in the code? It looks like the functions on the bottom (example def graph_isom_equivalent_non_edge_labeled_graph) are not indented as the above ones?   

Oh ? No, I never saw that. Well, some hardcore PEP8 guy will probably change it some day.

Nathann



---

archive/issue_comments_228882.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-02T12:49:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228882",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228883.json:
```json
{
    "body": "Replying to [comment:42 ncohen]:\n> Hello !\nHai!!\n\n\n> And what happens when you do `G.automorphism_group(algorithm=\"bliss\")` as indicated in the function's doc ? `:-P`\nOFC it has no sense but I was just following the guideline. I've now changed that so that we check that algorithm = 'bliss' explicitly. In case you have something else in mind let me know.\n\n\n> That would be for advertising purposes. Just one would do, just to emphasize that another algorithm is available.\nAdvertisement added. \n> \n> > 80chr is quite tight :O \n> \n> As usual it is some PEP's fault. It probably is PEP8. It is always PEP8's fault.\nIts also pretty funny that 90% of the lines are 100% over 80 char.\n\nThe current code passes all the tests and I am open for further suggestions.\n\nAs far as the empty commit message that is due to a mismatch of vim commands in nano. \n\n> Nathann\n\nBest,\nJernej",
    "created_at": "2015-01-02T12:51:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228883",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Replying to [comment:42 ncohen]:
> Hello !
Hai!!


> And what happens when you do `G.automorphism_group(algorithm="bliss")` as indicated in the function's doc ? `:-P`
OFC it has no sense but I was just following the guideline. I've now changed that so that we check that algorithm = 'bliss' explicitly. In case you have something else in mind let me know.


> That would be for advertising purposes. Just one would do, just to emphasize that another algorithm is available.
Advertisement added. 
> 
> > 80chr is quite tight :O 
> 
> As usual it is some PEP's fault. It probably is PEP8. It is always PEP8's fault.
Its also pretty funny that 90% of the lines are 100% over 80 char.

The current code passes all the tests and I am open for further suggestions.

As far as the empty commit message that is due to a mismatch of vim commands in nano. 

> Nathann

Best,
Jernej



---

archive/issue_comments_228884.json:
```json
{
    "body": "Hello !\n\n> OFC it has no sense but I was just following the guideline. I've now changed that so that we check that algorithm = 'bliss' explicitly. In case you have something else in mind let me know.\n\nOh sorry, I was thinking of something different:\n\n1) We want the users who explicitly ask for \"bliss\" to never run any other code\n2) We want users who do not care to run \"bliss\" if it is available (they may be calling that code through another functions without knowing)\n\n\n```\nif (algorithm is None and\n    is_package_installed(\"bliss\") and\n    not edge_labels):\n    algorithm = \"bliss\"\nif algorithm == \"bliss\":\n    try:\n        from sage.graphs.bliss import is_isomorphic\n    except ImportError:\n        raise RuntimeError(\"You must install the bliss spkg before running this code\")\n    <bliss call>\n```\n\n\n> The current code passes all the tests and I am open for further suggestions.\n\nCould you move the code comments that explain the function's behaviour inside of the function ? As you would do if it were a Python function (e.g. bliss_graph/bliss_digraph, add_gen) ? It would be cool if you could also write the documentation of these functions (e.g. INPUT section), even though you cannot doctest them.\n\nCould you also document what `empty_hook` is meant for ? It is useless right now but it would be good to know what it does if we ever want to use it for something (and that's the kind of stuff which can become *VERY* useful). Please document its parameters too.\n\nThanks,\n\nNathann",
    "created_at": "2015-01-04T08:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228884",
    "user": "https://github.com/nathanncohen"
}
```

Hello !

> OFC it has no sense but I was just following the guideline. I've now changed that so that we check that algorithm = 'bliss' explicitly. In case you have something else in mind let me know.

Oh sorry, I was thinking of something different:

1) We want the users who explicitly ask for "bliss" to never run any other code
2) We want users who do not care to run "bliss" if it is available (they may be calling that code through another functions without knowing)


```
if (algorithm is None and
    is_package_installed("bliss") and
    not edge_labels):
    algorithm = "bliss"
if algorithm == "bliss":
    try:
        from sage.graphs.bliss import is_isomorphic
    except ImportError:
        raise RuntimeError("You must install the bliss spkg before running this code")
    <bliss call>
```


> The current code passes all the tests and I am open for further suggestions.

Could you move the code comments that explain the function's behaviour inside of the function ? As you would do if it were a Python function (e.g. bliss_graph/bliss_digraph, add_gen) ? It would be cool if you could also write the documentation of these functions (e.g. INPUT section), even though you cannot doctest them.

Could you also document what `empty_hook` is meant for ? It is useless right now but it would be good to know what it does if we ever want to use it for something (and that's the kind of stuff which can become *VERY* useful). Please document its parameters too.

Thanks,

Nathann



---

archive/issue_comments_228885.json:
```json
{
    "body": "Replying to [comment:45 ncohen]:\n> Hello !\n> \n> > OFC it has no sense but I was just following the guideline. I've now changed that so that we check that algorithm = 'bliss' explicitly. In case you have something else in mind let me know.\n> \n> Oh sorry, I was thinking of something different:\n> \n> 1) We want the users who explicitly ask for \"bliss\" to never run any other code\n> 2) We want users who do not care to run \"bliss\" if it is available (they may be calling that code through another functions without knowing)\n> \n> {{{\n> if (algorithm is None and\n>     is_package_installed(\"bliss\") and\n>     not edge_labels):\n>     algorithm = \"bliss\"\n> if algorithm == \"bliss\":\n>     try:\n>         from sage.graphs.bliss import is_isomorphic\n>     except ImportError:\n>         raise RuntimeError(\"You must install the bliss spkg before running this code\")\n>     <bliss call>\n> }}}\nAnd this is to be placed in the say is_isomorphic/automorphism_group part and so on? If so, isn't this a bit of an overhead to be checked each time?\n\n> \n> > The current code passes all the tests and I am open for further suggestions.\n> \n> Could you move the code comments that explain the function's behaviour inside of the function ? As you would do if it were a Python function (e.g. bliss_graph/bliss_digraph, add_gen) ? It would be cool if you could also write the documentation of these functions (e.g. INPUT section), even though you cannot doctest them.\nThanks. I'll do it and post a new branch when I am done.\n> \n> Could you also document what `empty_hook` is meant for ? It is useless right now but it would be good to know what it does if we ever want to use it for something (and that's the kind of stuff which can become *VERY* useful). Please document its parameters too.\n\nBest,\n\nJernej\n\n> Thanks,\n> \n> Nathann",
    "created_at": "2015-01-04T18:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228885",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Replying to [comment:45 ncohen]:
> Hello !
> 
> > OFC it has no sense but I was just following the guideline. I've now changed that so that we check that algorithm = 'bliss' explicitly. In case you have something else in mind let me know.
> 
> Oh sorry, I was thinking of something different:
> 
> 1) We want the users who explicitly ask for "bliss" to never run any other code
> 2) We want users who do not care to run "bliss" if it is available (they may be calling that code through another functions without knowing)
> 
> {{{
> if (algorithm is None and
>     is_package_installed("bliss") and
>     not edge_labels):
>     algorithm = "bliss"
> if algorithm == "bliss":
>     try:
>         from sage.graphs.bliss import is_isomorphic
>     except ImportError:
>         raise RuntimeError("You must install the bliss spkg before running this code")
>     <bliss call>
> }}}
And this is to be placed in the say is_isomorphic/automorphism_group part and so on? If so, isn't this a bit of an overhead to be checked each time?

> 
> > The current code passes all the tests and I am open for further suggestions.
> 
> Could you move the code comments that explain the function's behaviour inside of the function ? As you would do if it were a Python function (e.g. bliss_graph/bliss_digraph, add_gen) ? It would be cool if you could also write the documentation of these functions (e.g. INPUT section), even though you cannot doctest them.
Thanks. I'll do it and post a new branch when I am done.
> 
> Could you also document what `empty_hook` is meant for ? It is useless right now but it would be good to know what it does if we ever want to use it for something (and that's the kind of stuff which can become *VERY* useful). Please document its parameters too.

Best,

Jernej

> Thanks,
> 
> Nathann



---

archive/issue_comments_228886.json:
```json
{
    "body": "Yo !\n\n> And this is to be placed in the say is_isomorphic/automorphism_group part and so on? If so, isn't this a bit of an overhead to be checked each time?\n\nAre you afraid of the call to `is_package_installed` ? If so, it may not be a bad option to cache it at module level. Something like a \"is_bliss_available = is_package_installed(\"bliss\")\" in `generic_graph.py`. It would only be loaded when the graph files are loaded first.\n\nNathann",
    "created_at": "2015-01-05T04:28:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228886",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> And this is to be placed in the say is_isomorphic/automorphism_group part and so on? If so, isn't this a bit of an overhead to be checked each time?

Are you afraid of the call to `is_package_installed` ? If so, it may not be a bad option to cache it at module level. Something like a "is_bliss_available = is_package_installed("bliss")" in `generic_graph.py`. It would only be loaded when the graph files are loaded first.

Nathann



---

archive/issue_comments_228887.json:
```json
{
    "body": "\n```\nsage: %timeit is_package_installed(\"bliss\")\n1000000 loops, best of 3: 1.61 \u00b5s per loop\nsage: g=graphs.PetersenGraph()\nsage: %timeit g.is_isomorphic(g)\n1000 loops, best of 3: 171 \u00b5s per loop\nsage: %timeit g.automorphism_group()\n1000 loops, best of 3: 483 \u00b5s per loop\nsage: %timeit g.canonical_label()\n1000 loops, best of 3: 271 \u00b5s per loop\n```\n\n\nPerhaps it is not even worth that... `:-P`\n\nNathann",
    "created_at": "2015-01-05T04:31:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228887",
    "user": "https://github.com/nathanncohen"
}
```


```
sage: %timeit is_package_installed("bliss")
1000000 loops, best of 3: 1.61 Âµs per loop
sage: g=graphs.PetersenGraph()
sage: %timeit g.is_isomorphic(g)
1000 loops, best of 3: 171 Âµs per loop
sage: %timeit g.automorphism_group()
1000 loops, best of 3: 483 Âµs per loop
sage: %timeit g.canonical_label()
1000 loops, best of 3: 271 Âµs per loop
```


Perhaps it is not even worth that... `:-P`

Nathann



---

archive/issue_comments_228888.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-01-14T08:00:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228888",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_228889.json:
```json
{
    "body": "(I merged all commits together as the history was a bit messy. It also conflicted with the latest beta)",
    "created_at": "2015-01-14T08:00:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228889",
    "user": "https://github.com/nathanncohen"
}
```

(I merged all commits together as the history was a bit messy. It also conflicted with the latest beta)



---

archive/issue_comments_228890.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-14T08:29:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228890",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228891.json:
```json
{
    "body": "Hello again !\n\nI made a pass on this code, added some doc, fixed a few things and... Well, now I only have a couple of questions about this branch:\n\n- What about implementing bliss' version of `is_isomorphic` later ? The feature that we need right now is `automorphism_group`  (I needed it today, the difference is amazing!), so can't the rest be done later if we need it ? By the way, I never had any slowness problem with `is_isomorphic` (or `canonical_label`) that I can remember.\n\n- It seems that the `Bliss fatal error: Internal error - unknown splitting heuristics` problem is not solved. I see it happen when I run the tests in the graph/ folder.\n\n- I changed the code to list the vertices according to `enumerate(G.vertices())` instead of `enumerate(G)`. We have this standard in other places that when vertices are turned into integers, it is done using the ordering of `G.vertices()`.\n\nTell me what you think ! I would be glad to have this into Sage soon `;-)`\n\nNathann",
    "created_at": "2015-01-14T18:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228891",
    "user": "https://github.com/nathanncohen"
}
```

Hello again !

I made a pass on this code, added some doc, fixed a few things and... Well, now I only have a couple of questions about this branch:

- What about implementing bliss' version of `is_isomorphic` later ? The feature that we need right now is `automorphism_group`  (I needed it today, the difference is amazing!), so can't the rest be done later if we need it ? By the way, I never had any slowness problem with `is_isomorphic` (or `canonical_label`) that I can remember.

- It seems that the `Bliss fatal error: Internal error - unknown splitting heuristics` problem is not solved. I see it happen when I run the tests in the graph/ folder.

- I changed the code to list the vertices according to `enumerate(G.vertices())` instead of `enumerate(G)`. We have this standard in other places that when vertices are turned into integers, it is done using the ordering of `G.vertices()`.

Tell me what you think ! I would be glad to have this into Sage soon `;-)`

Nathann



---

archive/issue_comments_228892.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-14T18:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228892",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228893.json:
```json
{
    "body": "Replying to [comment:52 ncohen]:\n> Hello again !\nHi there!\n\n> \n> I made a pass on this code, added some doc, fixed a few things and... Well, now I only have a couple of questions about this branch:\n> \n> - What about implementing bliss' version of `is_isomorphic` later ? The feature that we need right now is `automorphism_group`  (I needed it today, the difference is amazing!), so can't the rest be done later if we need it ? By the way, I never had any slowness problem with `is_isomorphic` (or `canonical_label`) that I can remember.\nHm.. I need these things, especially canonical_label. Do you have any practical reasons to leave this out? I mean it doesn't look like it needs that much effort at this point.\n\n\n\n> \n> - It seems that the `Bliss fatal error: Internal error - unknown splitting heuristics` problem is not solved. I see it happen when I run the tests in the graph/ folder.\nWeird. Are you sure you're using the patched version of bliss?\n> \n> - I changed the code to list the vertices according to `enumerate(G.vertices())` instead of `enumerate(G)`. We have this standard in other places that when vertices are turned into integers, it is done using the ordering of `G.vertices()`.\ngood, thanks!\n> \n> Tell me what you think ! I would be glad to have this into Sage soon `;-)`\nI just have another question! Is the new add_gen function faster than before? Do you think it makes sense to try using the suggestion from here ? http://stackoverflow.com/questions/27657473/efficiently-converting-a-bijection-to-cycle-notation\n\n> \n> Nathann",
    "created_at": "2015-01-16T19:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228893",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Replying to [comment:52 ncohen]:
> Hello again !
Hi there!

> 
> I made a pass on this code, added some doc, fixed a few things and... Well, now I only have a couple of questions about this branch:
> 
> - What about implementing bliss' version of `is_isomorphic` later ? The feature that we need right now is `automorphism_group`  (I needed it today, the difference is amazing!), so can't the rest be done later if we need it ? By the way, I never had any slowness problem with `is_isomorphic` (or `canonical_label`) that I can remember.
Hm.. I need these things, especially canonical_label. Do you have any practical reasons to leave this out? I mean it doesn't look like it needs that much effort at this point.



> 
> - It seems that the `Bliss fatal error: Internal error - unknown splitting heuristics` problem is not solved. I see it happen when I run the tests in the graph/ folder.
Weird. Are you sure you're using the patched version of bliss?
> 
> - I changed the code to list the vertices according to `enumerate(G.vertices())` instead of `enumerate(G)`. We have this standard in other places that when vertices are turned into integers, it is done using the ordering of `G.vertices()`.
good, thanks!
> 
> Tell me what you think ! I would be glad to have this into Sage soon `;-)`
I just have another question! Is the new add_gen function faster than before? Do you think it makes sense to try using the suggestion from here ? http://stackoverflow.com/questions/27657473/efficiently-converting-a-bijection-to-cycle-notation

> 
> Nathann



---

archive/issue_comments_228894.json:
```json
{
    "body": "Hello,\n\n> Hm.. I need these things, especially canonical_label. Do you have any practical reasons to leave this out? I mean it doesn't look like it needs that much effort at this point.\n\nWell, there is no reason to leave `canonical_label` out, even though I don't get why the current canonical label function from Sage wouldn't do the job for you.\n\nIt was more about the `is_isomorphic` function that is not fully implemented. I wouldn't mind having this patch in Sage quick, and report the implementation of that to another ticket.\n\n> Weird. Are you sure you're using the patched version of bliss?\n\nI just made a test:\n- Loaded the branch\n- Checked that the branch contained the patches/ directory\n- erased my local copy of the bliss.tar file\n- installed it again\n\nSame result when I run \"sage -tp 4 -l generic_graph.py\". Don't you get the same errors ?\n\n> I just have another question! Is the new add_gen function faster than before? Do you think it makes sense to try using the suggestion from here ? http://stackoverflow.com/questions/27657473/efficiently-converting-a-bijection-to-cycle-notation\n\nAhahah. Well, his algorithm is short, I like it `:-)`\n\nIt's up to you. I do not think that it is the bottleneck of any computations, so to me 'the easiest to read is the best choice'\n\nNathann",
    "created_at": "2015-01-16T19:17:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228894",
    "user": "https://github.com/nathanncohen"
}
```

Hello,

> Hm.. I need these things, especially canonical_label. Do you have any practical reasons to leave this out? I mean it doesn't look like it needs that much effort at this point.

Well, there is no reason to leave `canonical_label` out, even though I don't get why the current canonical label function from Sage wouldn't do the job for you.

It was more about the `is_isomorphic` function that is not fully implemented. I wouldn't mind having this patch in Sage quick, and report the implementation of that to another ticket.

> Weird. Are you sure you're using the patched version of bliss?

I just made a test:
- Loaded the branch
- Checked that the branch contained the patches/ directory
- erased my local copy of the bliss.tar file
- installed it again

Same result when I run "sage -tp 4 -l generic_graph.py". Don't you get the same errors ?

> I just have another question! Is the new add_gen function faster than before? Do you think it makes sense to try using the suggestion from here ? http://stackoverflow.com/questions/27657473/efficiently-converting-a-bijection-to-cycle-notation

Ahahah. Well, his algorithm is short, I like it `:-)`

It's up to you. I do not think that it is the bottleneck of any computations, so to me 'the easiest to read is the best choice'

Nathann



---

archive/issue_comments_228895.json:
```json
{
    "body": "btw: the doc does not compile on my computer because of some broken link\n\nNathann",
    "created_at": "2015-01-16T19:23:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228895",
    "user": "https://github.com/nathanncohen"
}
```

btw: the doc does not compile on my computer because of some broken link

Nathann



---

archive/issue_comments_228896.json:
```json
{
    "body": "Replying to [comment:55 ncohen]:\n> Hello,\n> \n> > Hm.. I need these things, especially canonical_label. Do you have any practical reasons to leave this out? I mean it doesn't look like it needs that much effort at this point.\n> \n> Well, there is no reason to leave `canonical_label` out, even though I don't get why the current canonical label function from Sage wouldn't do the job for you.\n\n> \n> It was more about the `is_isomorphic` function that is not fully implemented. I wouldn't mind having this patch in Sage quick, and report the implementation of that to another ticket.\nOkay. We can leave this is_isomorphic thing for next time.\n\n> \n> > Weird. Are you sure you're using the patched version of bliss?\n> \n> I just made a test:\n> - Loaded the branch\n> - Checked that the branch contained the patches/ directory\n> - erased my local copy of the bliss.tar file\n> - installed it again\n> \n> Same result when I run \"sage -tp 4 -l generic_graph.py\". Don't you get the same errors ?\nOh, yes I do get the errors as well. What do you suggest that we do at this point?\n> \n> > I just have another question! Is the new add_gen function faster than before? Do you think it makes sense to try using the suggestion from here ? http://stackoverflow.com/questions/27657473/efficiently-converting-a-bijection-to-cycle-notation\n> \n> Ahahah. Well, his algorithm is short, I like it `:-)`\nYeah.\n\n> \n> It's up to you. I do not think that it is the bottleneck of any computations, so to me 'the easiest to read is the best choice'\nUnless you find his supercool I'd like to stay with what is already there since otherwise I have to understand how his code works. His solution is faster though.\n> \nBest,\n\nJernej\n> Nathann",
    "created_at": "2015-01-16T20:24:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228896",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Replying to [comment:55 ncohen]:
> Hello,
> 
> > Hm.. I need these things, especially canonical_label. Do you have any practical reasons to leave this out? I mean it doesn't look like it needs that much effort at this point.
> 
> Well, there is no reason to leave `canonical_label` out, even though I don't get why the current canonical label function from Sage wouldn't do the job for you.

> 
> It was more about the `is_isomorphic` function that is not fully implemented. I wouldn't mind having this patch in Sage quick, and report the implementation of that to another ticket.
Okay. We can leave this is_isomorphic thing for next time.

> 
> > Weird. Are you sure you're using the patched version of bliss?
> 
> I just made a test:
> - Loaded the branch
> - Checked that the branch contained the patches/ directory
> - erased my local copy of the bliss.tar file
> - installed it again
> 
> Same result when I run "sage -tp 4 -l generic_graph.py". Don't you get the same errors ?
Oh, yes I do get the errors as well. What do you suggest that we do at this point?
> 
> > I just have another question! Is the new add_gen function faster than before? Do you think it makes sense to try using the suggestion from here ? http://stackoverflow.com/questions/27657473/efficiently-converting-a-bijection-to-cycle-notation
> 
> Ahahah. Well, his algorithm is short, I like it `:-)`
Yeah.

> 
> It's up to you. I do not think that it is the bottleneck of any computations, so to me 'the easiest to read is the best choice'
Unless you find his supercool I'd like to stay with what is already there since otherwise I have to understand how his code works. His solution is faster though.
> 
Best,

Jernej
> Nathann



---

archive/issue_comments_228897.json:
```json
{
    "body": "Yo !\n\n> Oh, yes I do get the errors as well. What do you suggest that we do at this point?\n\nCan you report this to the author again? The bug is not fixed, perhaps he will find the problem.\n\n> Unless you find his supercool I'd like to stay with what is already there since otherwise I have to understand how his code works. His solution is faster though.\n\nNo problem, as you like. What he implemented is exactly the same algorithm, however. He just makes it shorter by using fancier pyhon. I think that in C his algorithm would be slower than yours, but not in Python `;-)`\n\nNathann",
    "created_at": "2015-01-17T03:20:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228897",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

> Oh, yes I do get the errors as well. What do you suggest that we do at this point?

Can you report this to the author again? The bug is not fixed, perhaps he will find the problem.

> Unless you find his supercool I'd like to stay with what is already there since otherwise I have to understand how his code works. His solution is faster though.

No problem, as you like. What he implemented is exactly the same algorithm, however. He just makes it shorter by using fancier pyhon. I think that in C his algorithm would be slower than yours, but not in Python `;-)`

Nathann



---

archive/issue_comments_228898.json:
```json
{
    "body": "Replying to [comment:58 ncohen]:\n> Yo !\n> \n> > Oh, yes I do get the errors as well. What do you suggest that we do at this point?\n> \n> Can you report this to the author again? The bug is not fixed, perhaps he will find the problem.\nYes sure. I am in correspondence with him and I am waiting for his reply right now. So before I flood him with this new email I'd like to wait for his answer.\n\nIn the meantime I'd like to push this thing further without having to wait for his fix/reply.\n\nOne way we could try is to call Digraph::set_heuristic or something. Though I was not able to make it work in cython due to some enum typedefs issue.\n\nSo what do you suggest that we do? Just avoid digraphs for now?\n> \n> > Unless you find his supercool I'd like to stay with what is already there since otherwise I have to understand how his code works. His solution is faster though.\n> \n> No problem, as you like. What he implemented is exactly the same algorithm, however. He just makes it shorter by using fancier pyhon. I think that in C his algorithm would be slower than yours, but not in Python `;-)`\nWe can leave the code as is then!\n\nAs far as I get the current state of affairs, we need to\n\n1. Leave out the is_isomorphic thing\n2. Find a workaround for the digraph thing.\n\nand then we are almost done?\n\nBest,\n\nJernej",
    "created_at": "2015-01-17T10:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228898",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Replying to [comment:58 ncohen]:
> Yo !
> 
> > Oh, yes I do get the errors as well. What do you suggest that we do at this point?
> 
> Can you report this to the author again? The bug is not fixed, perhaps he will find the problem.
Yes sure. I am in correspondence with him and I am waiting for his reply right now. So before I flood him with this new email I'd like to wait for his answer.

In the meantime I'd like to push this thing further without having to wait for his fix/reply.

One way we could try is to call Digraph::set_heuristic or something. Though I was not able to make it work in cython due to some enum typedefs issue.

So what do you suggest that we do? Just avoid digraphs for now?
> 
> > Unless you find his supercool I'd like to stay with what is already there since otherwise I have to understand how his code works. His solution is faster though.
> 
> No problem, as you like. What he implemented is exactly the same algorithm, however. He just makes it shorter by using fancier pyhon. I think that in C his algorithm would be slower than yours, but not in Python `;-)`
We can leave the code as is then!

As far as I get the current state of affairs, we need to

1. Leave out the is_isomorphic thing
2. Find a workaround for the digraph thing.

and then we are almost done?

Best,

Jernej



---

archive/issue_comments_228899.json:
```json
{
    "body": "Hello,\n\n> So what do you suggest that we do? Just avoid digraphs for now?\n\nLet's wait for his answer. It would be a pity to miss digraphs just because of that. He may know how to fix it.\n\n> We can leave the code as is then!\n\nYepyep\n\n> As far as I get the current state of affairs, we need to\n> \n> 1. Leave out the is_isomorphic thing\n> 2. Find a workaround for the digraph thing.\n> \n> and then we are almost done?\n\nRight !\n\nNathann",
    "created_at": "2015-01-17T11:36:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228899",
    "user": "https://github.com/nathanncohen"
}
```

Hello,

> So what do you suggest that we do? Just avoid digraphs for now?

Let's wait for his answer. It would be a pity to miss digraphs just because of that. He may know how to fix it.

> We can leave the code as is then!

Yepyep

> As far as I get the current state of affairs, we need to
> 
> 1. Leave out the is_isomorphic thing
> 2. Find a workaround for the digraph thing.
> 
> and then we are almost done?

Right !

Nathann



---

archive/issue_comments_228900.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-28T12:43:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228900",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228901.json:
```json
{
    "body": "I think this patch now fixes the digraph issue.\n\nWe now have new test failures and I am looking into them right now.\n\nLet me know if this patch is not correctly handled or something.",
    "created_at": "2015-01-28T12:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228901",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

I think this patch now fixes the digraph issue.

We now have new test failures and I am looking into them right now.

Let me know if this patch is not correctly handled or something.



---

archive/issue_comments_228902.json:
```json
{
    "body": "Okay, so all the failures now are of the form\n\n\n```\nExpected:\n    [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]]\nGot:\n    [[0, 1, 4, 2, 5, 6, 3, 9, 7, 8]]\n....blahblah...\nExpected:\n    [[0], [2, 3, 6, 7, 8, 9], [1, 4, 5]]\nGot:\n    [[0], [1, 4, 5], [2, 3, 7, 8, 9, 6]]\n```\n\n\nnow if I correct this to the bliss output it won't work on those installations that do not have bliss. \n\nDo you have any preferences how to handle that?",
    "created_at": "2015-01-28T12:47:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228902",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Okay, so all the failures now are of the form


```
Expected:
    [[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]]
Got:
    [[0, 1, 4, 2, 5, 6, 3, 9, 7, 8]]
....blahblah...
Expected:
    [[0], [2, 3, 6, 7, 8, 9], [1, 4, 5]]
Got:
    [[0], [1, 4, 5], [2, 3, 7, 8, 9, 6]]
```


now if I correct this to the bliss output it won't work on those installations that do not have bliss. 

Do you have any preferences how to handle that?



---

archive/issue_comments_228903.json:
```json
{
    "body": "> Do you have any preferences how to handle that?\n\nDo you have many of them? If not, perhaps you can solve the problem by just changing the doctests to add an 'algorithm=\"sage\"' flag.\n\nNathann",
    "created_at": "2015-01-28T12:50:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228903",
    "user": "https://github.com/nathanncohen"
}
```

> Do you have any preferences how to handle that?

Do you have many of them? If not, perhaps you can solve the problem by just changing the doctests to add an 'algorithm="sage"' flag.

Nathann



---

archive/issue_comments_228904.json:
```json
{
    "body": "Ohh I didn't notice you included that. I think this new fix does it. All tests pass now.",
    "created_at": "2015-01-28T13:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228904",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Ohh I didn't notice you included that. I think this new fix does it. All tests pass now.



---

archive/issue_comments_228905.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-28T13:13:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228905",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228906.json:
```json
{
    "body": "Yo!\n> Ohh I didn't notice you included that. I think this new fix does it. All tests pass now.\n\nLooks good. Can you remove the `is_isomorphic` code? I think that it is all that remains to be done here.\n\nNathann",
    "created_at": "2015-01-28T13:17:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228906",
    "user": "https://github.com/nathanncohen"
}
```

Yo!
> Ohh I didn't notice you included that. I think this new fix does it. All tests pass now.

Looks good. Can you remove the `is_isomorphic` code? I think that it is all that remains to be done here.

Nathann



---

archive/issue_comments_228907.json:
```json
{
    "body": "\n```\nsage -t --long tutte_polynomial.py  # 2 doctests failed\n```\n",
    "created_at": "2015-01-28T13:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228907",
    "user": "https://github.com/nathanncohen"
}
```


```
sage -t --long tutte_polynomial.py  # 2 doctests failed
```




---

archive/issue_comments_228908.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-28T13:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228908",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228909.json:
```json
{
    "body": "Yeah I have only tested this thing on generic_graph.py.\n\nI guess we must be really careful to check all the places this guys are called.\n\nI'll check now a bit...",
    "created_at": "2015-01-28T13:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228909",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Yeah I have only tested this thing on generic_graph.py.

I guess we must be really careful to check all the places this guys are called.

I'll check now a bit...



---

archive/issue_comments_228910.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-28T13:26:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228910",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228911.json:
```json
{
    "body": "I've fixed the error in Tutte poly but there is another depreciation warning that gets triggered due to loops not being explicitly specified. Do you happen to know what is causing this?",
    "created_at": "2015-01-28T13:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228911",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

I've fixed the error in Tutte poly but there is another depreciation warning that gets triggered due to loops not being explicitly specified. Do you happen to know what is causing this?



---

archive/issue_comments_228912.json:
```json
{
    "body": "> I've fixed the error in Tutte poly\n\nIt will break on a machine that does not have `bliss` installed.\n\n> but there is another depreciation warning that gets triggered due to loops not being explicitly specified. Do you happen to know what is causing this?\n\nI would say that it come from there\n\n```\n+            G = DiGraph(edges)\n+        else:\n+            from sage.graphs.graph import Graph\n+            G = Graph(edges)\n```\n\n\nNathann",
    "created_at": "2015-01-28T13:30:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228912",
    "user": "https://github.com/nathanncohen"
}
```

> I've fixed the error in Tutte poly

It will break on a machine that does not have `bliss` installed.

> but there is another depreciation warning that gets triggered due to loops not being explicitly specified. Do you happen to know what is causing this?

I would say that it come from there

```
+            G = DiGraph(edges)
+        else:
+            from sage.graphs.graph import Graph
+            G = Graph(edges)
```


Nathann



---

archive/issue_comments_228913.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-28T14:23:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228913",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228914.json:
```json
{
    "body": "Okay, \n\nso now all doctest pass except for the loops thing in Tutte poly. I don't seem to be able to find the line that you mention. In which file is this present?",
    "created_at": "2015-01-28T14:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228914",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Okay, 

so now all doctest pass except for the loops thing in Tutte poly. I don't seem to be able to find the line that you mention. In which file is this present?



---

archive/issue_comments_228915.json:
```json
{
    "body": "> so now all doctest pass except for the loops thing in Tutte poly. I don't seem to be able to find the line that you mention. In which file is this present?\n\nOops, sorry. It is a line added by your branch, in the function `canonical_form`.\n\nNathann",
    "created_at": "2015-01-28T14:58:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228915",
    "user": "https://github.com/nathanncohen"
}
```

> so now all doctest pass except for the loops thing in Tutte poly. I don't seem to be able to find the line that you mention. In which file is this present?

Oops, sorry. It is a line added by your branch, in the function `canonical_form`.

Nathann



---

archive/issue_comments_228916.json:
```json
{
    "body": "Jernej, you cannot make the computation of tutte polynomials avoid bliss only because of a doctest.\n\nThe doctest should be changed to be independent from the solver, or flagged as #random, or you should expose 'algorithm=\"sage/bliss\"' in the tutte polynomial function... I mean, there are many workaround possible but you can't explicitly forbid people to use bliss for such computations only because of a doctest.\n\nNathann",
    "created_at": "2015-01-28T15:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228916",
    "user": "https://github.com/nathanncohen"
}
```

Jernej, you cannot make the computation of tutte polynomials avoid bliss only because of a doctest.

The doctest should be changed to be independent from the solver, or flagged as #random, or you should expose 'algorithm="sage/bliss"' in the tutte polynomial function... I mean, there are many workaround possible but you can't explicitly forbid people to use bliss for such computations only because of a doctest.

Nathann



---

archive/issue_comments_228917.json:
```json
{
    "body": "Hm.. I am confused.\n\nWhat I *think* I did is simply made sure the Tutte program uses sage's algorithm so that the test passes on installations not having bliss installed. \n\nAs I understand you'd like to have a new parameter for the tutte poly to use bliss?",
    "created_at": "2015-01-28T15:18:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228917",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Hm.. I am confused.

What I *think* I did is simply made sure the Tutte program uses sage's algorithm so that the test passes on installations not having bliss installed. 

As I understand you'd like to have a new parameter for the tutte poly to use bliss?



---

archive/issue_comments_228918.json:
```json
{
    "body": "> What I *think* I did is simply made sure the Tutte program uses sage's algorithm so that the test passes on installations not having bliss installed. \n\nYes. But as you changed Sage's source code and not only its doctests, now `tutte_polynomial` will never be able to use bliss even if it is installed.\n\n> As I understand you'd like to have a new parameter for the tutte poly to use bliss?\n\nThat is one way out. Another way out is to remove the doctest if it is not actually necessary, or to modify it in such a way that it still tests what it should test, without actually printing the ordering that may depend upon the packages installed.\n\nNathann",
    "created_at": "2015-01-28T16:09:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228918",
    "user": "https://github.com/nathanncohen"
}
```

> What I *think* I did is simply made sure the Tutte program uses sage's algorithm so that the test passes on installations not having bliss installed. 

Yes. But as you changed Sage's source code and not only its doctests, now `tutte_polynomial` will never be able to use bliss even if it is installed.

> As I understand you'd like to have a new parameter for the tutte poly to use bliss?

That is one way out. Another way out is to remove the doctest if it is not actually necessary, or to modify it in such a way that it still tests what it should test, without actually printing the ordering that may depend upon the packages installed.

Nathann



---

archive/issue_comments_228919.json:
```json
{
    "body": "Replying to [comment:79 ncohen]:\n> > What I *think* I did is simply made sure the Tutte program uses sage's algorithm so that the test passes on installations not having bliss installed. \n> \n> Yes. But as you changed Sage's source code and not only its doctests, now `tutte_polynomial` will never be able to use bliss even if it is installed.\nRight, good point!\n> \n> > As I understand you'd like to have a new parameter for the tutte poly to use bliss?\n> \n> That is one way out. Another way out is to remove the doctest if it is not actually necessary, or to modify it in such a way that it still tests what it should test, without actually printing the ordering that may depend upon the packages installed.\nUnless you start raving I'll just remove the specific doctest - I don't think its releant.\n\nThanks,\n\nJernej\n> \n> Nathann",
    "created_at": "2015-01-28T16:10:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228919",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Replying to [comment:79 ncohen]:
> > What I *think* I did is simply made sure the Tutte program uses sage's algorithm so that the test passes on installations not having bliss installed. 
> 
> Yes. But as you changed Sage's source code and not only its doctests, now `tutte_polynomial` will never be able to use bliss even if it is installed.
Right, good point!
> 
> > As I understand you'd like to have a new parameter for the tutte poly to use bliss?
> 
> That is one way out. Another way out is to remove the doctest if it is not actually necessary, or to modify it in such a way that it still tests what it should test, without actually printing the ordering that may depend upon the packages installed.
Unless you start raving I'll just remove the specific doctest - I don't think its releant.

Thanks,

Jernej
> 
> Nathann



---

archive/issue_comments_228920.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-28T16:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228920",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228921.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-28T16:20:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228921",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228922.json:
```json
{
    "body": "Hello again,\n\n> Unless you start raving I'll just remove the specific doctest - I don't think its releant.\n\nErr. Well, actually you can't just remove all doctests of a function. `sage -coverage <filename>` should answer that all functions are doctested, so at least something should call the function. I added a small commit that modified the previous doctest, in such a way that it does not depend on the ordering of the labelling.\n\nIt does not check much to be honest, only that something actually gets cached. Well.\n\nIf you are okay with this branch, you can set it to positive review. And we will at long last be able to compute automorphism groups efficiently.\n\nNathann",
    "created_at": "2015-01-28T16:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228922",
    "user": "https://github.com/nathanncohen"
}
```

Hello again,

> Unless you start raving I'll just remove the specific doctest - I don't think its releant.

Err. Well, actually you can't just remove all doctests of a function. `sage -coverage <filename>` should answer that all functions are doctested, so at least something should call the function. I added a small commit that modified the previous doctest, in such a way that it does not depend on the ordering of the labelling.

It does not check much to be honest, only that something actually gets cached. Well.

If you are okay with this branch, you can set it to positive review. And we will at long last be able to compute automorphism groups efficiently.

Nathann



---

archive/issue_comments_228923.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-01-28T16:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228923",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_228924.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-01-28T16:33:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228924",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_228925.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-01-28T17:40:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228925",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_228926.json:
```json
{
    "body": "Thanks for helping pushing this through.I  hope all is set now.\n\nBest,\n\nJernej",
    "created_at": "2015-01-28T17:40:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228926",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Thanks for helping pushing this through.I  hope all is set now.

Best,

Jernej



---

archive/issue_comments_228927.json:
```json
{
    "body": "Eeeeeeeeeeeeexcellent ! `;-)`\n\nNathann",
    "created_at": "2015-01-28T17:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228927",
    "user": "https://github.com/nathanncohen"
}
```

Eeeeeeeeeeeeexcellent ! `;-)`

Nathann



---

archive/issue_comments_228928.json:
```json
{
    "body": "Documentation doesn't build",
    "created_at": "2015-01-29T02:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228928",
    "user": "https://github.com/vbraun"
}
```

Documentation doesn't build



---

archive/issue_comments_228929.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-01-29T02:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228929",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_228930.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-29T08:08:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228930",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228931.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-01-29T13:09:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228931",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_228932.json:
```json
{
    "body": "I get\n\n```\n...\nsage: G = Graph(multiedges=True,sparse=True) ## line 17388 ##\nsage: G.add_edge(('a', 'b')) ## line 17389 ##\nsage: G.add_edge(('a', 'b')) ## line 17390 ##\nsage: G.add_edge(('a', 'b')) ## line 17391 ##\nsage: G.automorphism_group() ## line 17392 ##\nPermutation Group with generators [('a','b')]\nsage: D = DiGraph( { 0:[1], 1:[2], 2:[3], 3:[4], 4:[0] } ) ## line 17397 ##\nsage: D.automorphism_group() ## line 17398 ##\nBliss fatal error: Internal error - unknown splitting heuristics\nAborting!\n```\n",
    "created_at": "2015-01-29T17:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228932",
    "user": "https://github.com/vbraun"
}
```

I get

```
...
sage: G = Graph(multiedges=True,sparse=True) ## line 17388 ##
sage: G.add_edge(('a', 'b')) ## line 17389 ##
sage: G.add_edge(('a', 'b')) ## line 17390 ##
sage: G.add_edge(('a', 'b')) ## line 17391 ##
sage: G.automorphism_group() ## line 17392 ##
Permutation Group with generators [('a','b')]
sage: D = DiGraph( { 0:[1], 1:[2], 2:[3], 3:[4], 4:[0] } ) ## line 17397 ##
sage: D.automorphism_group() ## line 17398 ##
Bliss fatal error: Internal error - unknown splitting heuristics
Aborting!
```




---

archive/issue_comments_228933.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-01-29T17:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228933",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_228934.json:
```json
{
    "body": "Volker, \n\nhave you reinstalled bliss? There is a patch that has to be applied to bliss before this works and the patch was introduced in this branch.\n\n\nBest,\n\nJernej",
    "created_at": "2015-01-29T17:14:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228934",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Volker, 

have you reinstalled bliss? There is a patch that has to be applied to bliss before this works and the patch was introduced in this branch.


Best,

Jernej



---

archive/issue_comments_228935.json:
```json
{
    "body": "Just recompiled and its still there. Actually its always dying in a slightly different spot:\n\n```\nsage: g = digraphs.Circuit(5) ## line 11558 ##\nsage: g.is_circulant(certificate = True) ## line 11559 ##\nBliss fatal error: Internal error - unknown splitting heuristics\nAborting!\n```\n",
    "created_at": "2015-01-29T17:20:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228935",
    "user": "https://github.com/vbraun"
}
```

Just recompiled and its still there. Actually its always dying in a slightly different spot:

```
sage: g = digraphs.Circuit(5) ## line 11558 ##
sage: g.is_circulant(certificate = True) ## line 11559 ##
Bliss fatal error: Internal error - unknown splitting heuristics
Aborting!
```




---

archive/issue_comments_228936.json:
```json
{
    "body": "Wow that's bad. Just to be sure, the patch applied (the one in pkgs/bliss/patches) is the following?\n\n\n```\n--- bliss-0.72/graph.cc\t2011-05-12 15:29:46.000000000 +0200\n+++ /tmp/bliss-0.72/graph.cc\t2015-01-28 13:40:42.289179859 +0100\n@@ -1920,6 +1920,7 @@\n Digraph::Digraph(const unsigned int nof_vertices)\n {\n   vertices.resize(nof_vertices);\n+  sh = shs_f;\n }\n```\n",
    "created_at": "2015-01-29T17:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228936",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Wow that's bad. Just to be sure, the patch applied (the one in pkgs/bliss/patches) is the following?


```
--- bliss-0.72/graph.cc	2011-05-12 15:29:46.000000000 +0200
+++ /tmp/bliss-0.72/graph.cc	2015-01-28 13:40:42.289179859 +0100
@@ -1920,6 +1920,7 @@
 Digraph::Digraph(const unsigned int nof_vertices)
 {
   vertices.resize(nof_vertices);
+  sh = shs_f;
 }
```




---

archive/issue_comments_228937.json:
```json
{
    "body": "\n```\n$ patch=patches/digraph_heuristic.patch\n$ patch -n -p1 <\"$patch\" \npatch: **** Only garbage was found in the patch input.\n```\n",
    "created_at": "2015-01-29T17:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228937",
    "user": "https://github.com/vbraun"
}
```


```
$ patch=patches/digraph_heuristic.patch
$ patch -n -p1 <"$patch" 
patch: **** Only garbage was found in the patch input.
```




---

archive/issue_comments_228938.json:
```json
{
    "body": "Hm. Question. Why don't I get this error when I issue sage -f bliss?",
    "created_at": "2015-01-29T17:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228938",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Hm. Question. Why don't I get this error when I issue sage -f bliss?



---

archive/issue_comments_228939.json:
```json
{
    "body": "Oops, -n is not dry-run in patch.\n\nThe problem is that you first \"cd src\" and then iterate over \"patches/*.patch\". Which is then empty.",
    "created_at": "2015-01-29T19:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228939",
    "user": "https://github.com/vbraun"
}
```

Oops, -n is not dry-run in patch.

The problem is that you first "cd src" and then iterate over "patches/*.patch". Which is then empty.



---

archive/issue_comments_228940.json:
```json
{
    "body": "Replying to [comment:95 vbraun]:\n> {{{\n> $ patch=patches/digraph_heuristic.patch\n> $ patch -n -p1 <\"$patch\" \n> patch: **** Only garbage was found in the patch input.\n> }}}\n\nWhat exactly is causing this error? The patch was created with \n\n\n```\ndiff -Naur old new > patch.txt\n```\n",
    "created_at": "2015-01-30T10:45:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228940",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Replying to [comment:95 vbraun]:
> {{{
> $ patch=patches/digraph_heuristic.patch
> $ patch -n -p1 <"$patch" 
> patch: **** Only garbage was found in the patch input.
> }}}

What exactly is causing this error? The patch was created with 


```
diff -Naur old new > patch.txt
```




---

archive/issue_comments_228941.json:
```json
{
    "body": "The \"only garbage\" message is because of the \"-n\".",
    "created_at": "2015-01-30T11:28:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228941",
    "user": "https://github.com/vbraun"
}
```

The "only garbage" message is because of the "-n".



---

archive/issue_comments_228942.json:
```json
{
    "body": "Okay, so the patch actually looks fine if manually apply it, but sage -f bliss says\n\n\n```\ncan't find file to patch at input line 3\n```\n\n\nhow do I actually specify this file? Where are the sources expected to be?",
    "created_at": "2015-01-30T11:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228942",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Okay, so the patch actually looks fine if manually apply it, but sage -f bliss says


```
can't find file to patch at input line 3
```


how do I actually specify this file? Where are the sources expected to be?



---

archive/issue_comments_228943.json:
```json
{
    "body": "As I said in comment:97, the problem is that you first \"cd src\" and then iterate over \"patches/*.patch\". Which is the wrong path when you are in \"src\"",
    "created_at": "2015-02-05T14:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228943",
    "user": "https://github.com/vbraun"
}
```

As I said in comment:97, the problem is that you first "cd src" and then iterate over "patches/*.patch". Which is the wrong path when you are in "src"



---

archive/issue_comments_228944.json:
```json
{
    "body": "Volker,\n\nthis is the actual error I get after fixing the \"cd src\" issue. Specifically\n\n\n```\n****************************************************\ncan't find file to patch at input line 3\nPerhaps you used the wrong -p or --strip option?\nThe text leading up to this was:\n--------------------------\n```\n",
    "created_at": "2015-02-05T14:44:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228944",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Volker,

this is the actual error I get after fixing the "cd src" issue. Specifically


```
****************************************************
can't find file to patch at input line 3
Perhaps you used the wrong -p or --strip option?
The text leading up to this was:
--------------------------
```




---

archive/issue_comments_228945.json:
```json
{
    "body": "For starters, why is bliss-0.72/graph.cc one directory deep but /tmp/bliss-0.72/graph.cc two directories deep? Do your diffs against identical directory trees. Then strip the right number of directory levels with the -p",
    "created_at": "2015-02-05T14:48:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228945",
    "user": "https://github.com/vbraun"
}
```

For starters, why is bliss-0.72/graph.cc one directory deep but /tmp/bliss-0.72/graph.cc two directories deep? Do your diffs against identical directory trees. Then strip the right number of directory levels with the -p



---

archive/issue_comments_228946.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-02-11T12:50:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228946",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_228947.json:
```json
{
    "body": "Can someone take a look if this now makes sense?\n\nDoing sage -f bliss and testing the graph module passes OK for me.",
    "created_at": "2015-02-11T12:52:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228947",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Can someone take a look if this now makes sense?

Doing sage -f bliss and testing the graph module passes OK for me.



---

archive/issue_comments_228948.json:
```json
{
    "body": "Here it crashes with the usual error message. Does that work on your computer ?\n\n\n```\nsage: digraphs.DeBruijn(3,1).is_circulant(certificate = True)\nBliss fatal error: Internal error - unknown splitting heuristics\nAborting!\n```\n",
    "created_at": "2015-02-11T12:57:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228948",
    "user": "https://github.com/nathanncohen"
}
```

Here it crashes with the usual error message. Does that work on your computer ?


```
sage: digraphs.DeBruijn(3,1).is_circulant(certificate = True)
Bliss fatal error: Internal error - unknown splitting heuristics
Aborting!
```




---

archive/issue_comments_228949.json:
```json
{
    "body": "Weird.\n\n```\nsage: digraphs.DeBruijn(3,1).is_circulant(certificate = True)\n(True, [(3, [0, 1, 2])])\n```\n",
    "created_at": "2015-02-11T12:59:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228949",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Weird.

```
sage: digraphs.DeBruijn(3,1).is_circulant(certificate = True)
(True, [(3, [0, 1, 2])])
```




---

archive/issue_comments_228950.json:
```json
{
    "body": "Could you please check if this new modification that I pushed actually patches bliss for you?",
    "created_at": "2015-02-11T13:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228950",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Could you please check if this new modification that I pushed actually patches bliss for you?



---

archive/issue_comments_228951.json:
```json
{
    "body": "The patching works fine. I added `grep \"sh = shs_f;\" -A 5 -B 5 graph.cc` right at the end of the 'for patch in' loop in spkg-install, and I see:\n\n\n```\nDigraph::Digraph(const unsigned int nof_vertices)\n{\n  vertices.resize(nof_vertices);\n  sh = shs_f;\n}\n```\n\n\nI also don't understand why it would work on your computer and not on mine.\n\nNathann",
    "created_at": "2015-02-11T13:11:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228951",
    "user": "https://github.com/nathanncohen"
}
```

The patching works fine. I added `grep "sh = shs_f;" -A 5 -B 5 graph.cc` right at the end of the 'for patch in' loop in spkg-install, and I see:


```
Digraph::Digraph(const unsigned int nof_vertices)
{
  vertices.resize(nof_vertices);
  sh = shs_f;
}
```


I also don't understand why it would work on your computer and not on mine.

Nathann



---

archive/issue_comments_228952.json:
```json
{
    "body": "I have now pulled the latest branch, installed bliss and everything works fine. The above example as well as sage -t generic_graph.py o_O\n\nI have no idea what's going on at this point.",
    "created_at": "2015-02-11T14:49:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228952",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

I have now pulled the latest branch, installed bliss and everything works fine. The above example as well as sage -t generic_graph.py o_O

I have no idea what's going on at this point.



---

archive/issue_comments_228953.json:
```json
{
    "body": "Same with `sage -t -l --optional=sage,bliss graph/` for the whole folder ?\n\nNathann",
    "created_at": "2015-02-11T14:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228953",
    "user": "https://github.com/nathanncohen"
}
```

Same with `sage -t -l --optional=sage,bliss graph/` for the whole folder ?

Nathann



---

archive/issue_comments_228954.json:
```json
{
    "body": "Yes! I only get three errors. One is the depreciaton warning from Tutte poly and two are weird errors of the type\n\n\n```\n**********************************************************************\nFile \"sage/src/sage/graphs/generic_graph.py\", line 17448, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    A1.is_isomorphic(A2)                          # optional - bliss\nExpected:\n    True                                                # optional - bliss\nGot:\n    True\n**********************************************************************\n```\n",
    "created_at": "2015-02-11T16:11:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228954",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Yes! I only get three errors. One is the depreciaton warning from Tutte poly and two are weird errors of the type


```
**********************************************************************
File "sage/src/sage/graphs/generic_graph.py", line 17448, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    A1.is_isomorphic(A2)                          # optional - bliss
Expected:
    True                                                # optional - bliss
Got:
    True
**********************************************************************
```




---

archive/issue_comments_228955.json:
```json
{
    "body": "Can you try on somebody else's computer, or on some ssh machine ?\n\nNathann",
    "created_at": "2015-02-11T16:24:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228955",
    "user": "https://github.com/nathanncohen"
}
```

Can you try on somebody else's computer, or on some ssh machine ?

Nathann



---

archive/issue_comments_228956.json:
```json
{
    "body": "Nathann,\n\nsorry for the delay. Was computing something on all external machines and did want to stop to compile sage.\n\nI have now tested this on another machine (fetch stuff with git install bliss sage -t on generic_graph.py and graph.py) and it works well.\n\nAlso\n\n\n```\nsage: digraphs.DeBruijn(3,1).is_circulant(certificate = True)\n\n(True, [(3, [0, 1, 2])])\n```\n\n\nSo I have no idea why the error is still occurring for you.\n\nBest,\n\nJernej",
    "created_at": "2015-03-02T13:50:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228956",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Nathann,

sorry for the delay. Was computing something on all external machines and did want to stop to compile sage.

I have now tested this on another machine (fetch stuff with git install bliss sage -t on generic_graph.py and graph.py) and it works well.

Also


```
sage: digraphs.DeBruijn(3,1).is_circulant(certificate = True)

(True, [(3, [0, 1, 2])])
```


So I have no idea why the error is still occurring for you.

Best,

Jernej



---

archive/issue_comments_228957.json:
```json
{
    "body": "I am recompiling Sage from scratch to see what happens when I reinstall this afterwards.\n\nNathann",
    "created_at": "2015-03-03T14:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228957",
    "user": "https://github.com/nathanncohen"
}
```

I am recompiling Sage from scratch to see what happens when I reinstall this afterwards.

Nathann



---

archive/issue_comments_228958.json:
```json
{
    "body": "Okay. I made a 'make distclean' on a machine on which Sage crashed with this line\n\n```\nsage: digraphs.DeBruijn(3,1).is_circulant(certificate = True)\n```\n\n\nI remove the bliss package, then ran 'make' then installed bliss again, and now it works. Volker? Could you do the same thing on your machine to see if it solves the problem too?\n\nNathann",
    "created_at": "2015-03-03T17:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228958",
    "user": "https://github.com/nathanncohen"
}
```

Okay. I made a 'make distclean' on a machine on which Sage crashed with this line

```
sage: digraphs.DeBruijn(3,1).is_circulant(certificate = True)
```


I remove the bliss package, then ran 'make' then installed bliss again, and now it works. Volker? Could you do the same thing on your machine to see if it solves the problem too?

Nathann



---

archive/issue_comments_228959.json:
```json
{
    "body": "What do you mean by \"remove the package\"? If you need to recompile (e.g. because of different patches) then you must bump the patch level in the package-version.txt",
    "created_at": "2015-03-03T17:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228959",
    "user": "https://github.com/vbraun"
}
```

What do you mean by "remove the package"? If you need to recompile (e.g. because of different patches) then you must bump the patch level in the package-version.txt



---

archive/issue_comments_228960.json:
```json
{
    "body": "Okay. This branch now works on my laptop, and on my office's computer. Here is what I did:\n\n- `make distclean`\n- `rm upstream/bliss-0.72.tar.bz2`\n- apply the branch\n- `make`\n- `sage -f bliss`\n- `make`\n\nAnd now it works. \n\nI have no clue what the problem was, however. And of course now I don't know how to reproduce the bug anymore `XD`\n\nNathann",
    "created_at": "2015-03-04T08:20:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228960",
    "user": "https://github.com/nathanncohen"
}
```

Okay. This branch now works on my laptop, and on my office's computer. Here is what I did:

- `make distclean`
- `rm upstream/bliss-0.72.tar.bz2`
- apply the branch
- `make`
- `sage -f bliss`
- `make`

And now it works. 

I have no clue what the problem was, however. And of course now I don't know how to reproduce the bug anymore `XD`

Nathann



---

archive/issue_comments_228961.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-04T08:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228961",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228962.json:
```json
{
    "body": "Do you think we can accept this then?",
    "created_at": "2015-03-04T08:22:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228962",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Do you think we can accept this then?



---

archive/issue_comments_228963.json:
```json
{
    "body": "> Do you think we can accept this then?\n\nNot yet. First, I think I saw somewhere that the documentation did not build, and this must be fixed. Because of some http link.\n\nThen we must figure out what happened, for even if a distclean makes the trick something fishy is going on in the building process (Volker may know). Unless we find what it is and fix it, everybody will have to do a `make distclean` in order to have it work, just like we did.\n\nNathann",
    "created_at": "2015-03-04T08:24:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228963",
    "user": "https://github.com/nathanncohen"
}
```

> Do you think we can accept this then?

Not yet. First, I think I saw somewhere that the documentation did not build, and this must be fixed. Because of some http link.

Then we must figure out what happened, for even if a distclean makes the trick something fishy is going on in the building process (Volker may know). Unless we find what it is and fix it, everybody will have to do a `make distclean` in order to have it work, just like we did.

Nathann



---

archive/issue_comments_228964.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-03-04T08:24:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228964",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_228965.json:
```json
{
    "body": "You need to bump the package-version.txt to 0.72.p1, otherwise the build system does't know that anything changed and will not recompile bliss (and, therefore, your patch will not be used).",
    "created_at": "2015-03-11T14:02:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228965",
    "user": "https://github.com/vbraun"
}
```

You need to bump the package-version.txt to 0.72.p1, otherwise the build system does't know that anything changed and will not recompile bliss (and, therefore, your patch will not be used).



---

archive/issue_comments_228966.json:
```json
{
    "body": "Volker: the bug still happened when running 'sage -f bliss'. Isn't that a contradiction ?",
    "created_at": "2015-03-11T16:04:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228966",
    "user": "https://github.com/nathanncohen"
}
```

Volker: the bug still happened when running 'sage -f bliss'. Isn't that a contradiction ?



---

archive/issue_comments_228967.json:
```json
{
    "body": "Which bug do you mean? There are clearly multiple ones. I'll be happy to look if you don't have any obvious bugs open any more.",
    "created_at": "2015-03-11T21:08:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228967",
    "user": "https://github.com/vbraun"
}
```

Which bug do you mean? There are clearly multiple ones. I'll be happy to look if you don't have any obvious bugs open any more.



---

archive/issue_comments_228968.json:
```json
{
    "body": "Hello Volker,\n\n> Which bug do you mean? There are clearly multiple ones. I'll be happy to look if you don't have any obvious bugs open any more.\n\nWell, the 'main' bug that we had was this 'undefined heuristic' poblem which caused crashes. As I reported above, running a 'make distclean' and reinstalling everything solves it, and now this branch passes all tests on my computer.\n\nI would be tempted to switch it to 'positive review', but that would produce errors on everybody's computer unless they *also* run this make distclean! If you say that this would be solved by changing the version number, then let us do that and switch it to 'positive review'\n\nWhat worries me is that I do not understand why changing the version number would have any effect that forcing a reinstall through 'sage -f bliss' did not have. I tried it, long before trying 'make distclean', and it had no effect.\n\nWhat do you think we should do ?\n\nNathann",
    "created_at": "2015-03-12T07:21:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228968",
    "user": "https://github.com/nathanncohen"
}
```

Hello Volker,

> Which bug do you mean? There are clearly multiple ones. I'll be happy to look if you don't have any obvious bugs open any more.

Well, the 'main' bug that we had was this 'undefined heuristic' poblem which caused crashes. As I reported above, running a 'make distclean' and reinstalling everything solves it, and now this branch passes all tests on my computer.

I would be tempted to switch it to 'positive review', but that would produce errors on everybody's computer unless they *also* run this make distclean! If you say that this would be solved by changing the version number, then let us do that and switch it to 'positive review'

What worries me is that I do not understand why changing the version number would have any effect that forcing a reinstall through 'sage -f bliss' did not have. I tried it, long before trying 'make distclean', and it had no effect.

What do you think we should do ?

Nathann



---

archive/issue_comments_228969.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-03-18T09:11:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228969",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_228970.json:
```json
{
    "body": "You need to bump the package-version.txt to 0.72.p1, otherwise the build system does't know that anything changed and will not recompile bliss (and, therefore, your patch will not be used).",
    "created_at": "2015-03-18T09:11:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228970",
    "user": "https://github.com/vbraun"
}
```

You need to bump the package-version.txt to 0.72.p1, otherwise the build system does't know that anything changed and will not recompile bliss (and, therefore, your patch will not be used).



---

archive/issue_comments_228971.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-03-21T16:57:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228971",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228972.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-03-21T16:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228972",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_228973.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-03-24T19:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228973",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_228974.json:
```json
{
    "body": "Hello!\n\nFirst of all thank you for pushing this last bit!!\n\nI've glanced at the changes, tested the relevant modules with -t and checked if sage --docbuild reference html gives any errors related to this change.\n\nAll of the above looks good so I am giving this a positive review. In case you need something else to be checked let me know.\n\nBest,\n\nJernej",
    "created_at": "2015-03-24T19:32:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228974",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Hello!

First of all thank you for pushing this last bit!!

I've glanced at the changes, tested the relevant modules with -t and checked if sage --docbuild reference html gives any errors related to this change.

All of the above looks good so I am giving this a positive review. In case you need something else to be checked let me know.

Best,

Jernej



---

archive/issue_comments_228975.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-04-10T16:37:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228975",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_228976.json:
```json
{
    "body": "Conflicts with #18145",
    "created_at": "2015-04-10T16:37:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228976",
    "user": "https://github.com/vbraun"
}
```

Conflicts with #18145



---

archive/issue_comments_228977.json:
```json
{
    "body": "This ticket, in positive review since two weeks, has to be rebased on a ticket created two days ago?....\n\nYou are not being fair.\n\nNathann",
    "created_at": "2015-04-10T16:40:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228977",
    "user": "https://github.com/nathanncohen"
}
```

This ticket, in positive review since two weeks, has to be rebased on a ticket created two days ago?....

You are not being fair.

Nathann



---

archive/issue_comments_228978.json:
```json
{
    "body": "Jeroen asked me to merge it first, usually they are merged in ascending order.",
    "created_at": "2015-04-10T16:45:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228978",
    "user": "https://github.com/vbraun"
}
```

Jeroen asked me to merge it first, usually they are merged in ascending order.



---

archive/issue_comments_228979.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-04-12T10:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228979",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_228980.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-04-12T10:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228980",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_228981.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-04-12T10:46:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228981",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_228982.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-04-12T16:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228982",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_228983.json:
```json
{
    "body": "\n```\n[graphs   ] /Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py:docstring of sage.graphs.generic_graph.GenericGraph.automorphism_group:25: ERROR: Unknown target name: \"http://www.tcs.tkk.fi/software/bliss/index.html\".\n[graphs   ] /Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py:docstring of sage.graphs.generic_graph.GenericGraph.canonical_label:33: ERROR: Unknown target name: \"http://www.tcs.tkk.fi/software/bliss/index.html\".\n[graphs   ] /Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py:docstring of sage.graphs.generic_graph.GenericGraph.is_isomorphic:13: ERROR: Unknown target name: \"http://www.tcs.tkk.fi/software/bliss/index.html\".\nError building the documentation.\nTraceback (most recent call last):\n  File \"/Users/buildslave-sage/slave/sage_git/build/src/doc/common/builder.py\", line 1626, in <module>\n    getattr(get_builder(name), type)()\n  File \"/Users/buildslave-sage/slave/sage_git/build/src/doc/common/builder.py\", line 292, in _wrapper\n    getattr(get_builder(document), 'inventory')(*args, **kwds)\n  File \"/Users/buildslave-sage/slave/sage_git/build/src/doc/common/builder.py\", line 503, in _wrapper\n    x.get(99999)\n  File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python/multiprocessing/pool.py\", line 558, in get\n    raise self._value\nOSError: [graphs   ] /Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py:docstring of sage.graphs.generic_graph.GenericGraph.automorphism_group:25: ERROR: Unknown target name: \"http://www.tcs.tkk.fi/software/bliss/index.html\".\n```\n",
    "created_at": "2015-04-12T16:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228983",
    "user": "https://github.com/vbraun"
}
```


```
[graphs   ] /Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py:docstring of sage.graphs.generic_graph.GenericGraph.automorphism_group:25: ERROR: Unknown target name: "http://www.tcs.tkk.fi/software/bliss/index.html".
[graphs   ] /Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py:docstring of sage.graphs.generic_graph.GenericGraph.canonical_label:33: ERROR: Unknown target name: "http://www.tcs.tkk.fi/software/bliss/index.html".
[graphs   ] /Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py:docstring of sage.graphs.generic_graph.GenericGraph.is_isomorphic:13: ERROR: Unknown target name: "http://www.tcs.tkk.fi/software/bliss/index.html".
Error building the documentation.
Traceback (most recent call last):
  File "/Users/buildslave-sage/slave/sage_git/build/src/doc/common/builder.py", line 1626, in <module>
    getattr(get_builder(name), type)()
  File "/Users/buildslave-sage/slave/sage_git/build/src/doc/common/builder.py", line 292, in _wrapper
    getattr(get_builder(document), 'inventory')(*args, **kwds)
  File "/Users/buildslave-sage/slave/sage_git/build/src/doc/common/builder.py", line 503, in _wrapper
    x.get(99999)
  File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python/multiprocessing/pool.py", line 558, in get
    raise self._value
OSError: [graphs   ] /Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py:docstring of sage.graphs.generic_graph.GenericGraph.automorphism_group:25: ERROR: Unknown target name: "http://www.tcs.tkk.fi/software/bliss/index.html".
```




---

archive/issue_comments_228984.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-12T16:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228984",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228985.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-04-12T16:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228985",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_228986.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2015-04-12T16:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228986",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_228987.json:
```json
{
    "body": "\n```\nsage -t --long src/sage/combinat/designs/incidence_structures.py\n**********************************************************************\nFile \"src/sage/combinat/designs/incidence_structures.py\", line 1498, in sage.combinat.designs.incidence_structures.IncidenceStructure.automorphism_group\nFailed example:\n    G\nExpected:\n    Permutation Group with generators [(2,3)(4,5), (2,4)(3,5), (1,2)(4,6), (0,1)(4,5)]\nGot:\n    Permutation Group with generators [(2,3)(4,5), (2,4)(3,5), (1,2,3)(4,5,6), (1,6)(2,5,4,3), (0,1)(2,3)]\n**********************************************************************\n1 item had failures:\n   1 of  11 in sage.combinat.designs.incidence_structures.IncidenceStructure.automorphism_group\n    [287 tests, 1 failure, 3.88 s]\n```\n",
    "created_at": "2015-04-14T22:50:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228987",
    "user": "https://github.com/vbraun"
}
```


```
sage -t --long src/sage/combinat/designs/incidence_structures.py
**********************************************************************
File "src/sage/combinat/designs/incidence_structures.py", line 1498, in sage.combinat.designs.incidence_structures.IncidenceStructure.automorphism_group
Failed example:
    G
Expected:
    Permutation Group with generators [(2,3)(4,5), (2,4)(3,5), (1,2)(4,6), (0,1)(4,5)]
Got:
    Permutation Group with generators [(2,3)(4,5), (2,4)(3,5), (1,2,3)(4,5,6), (1,6)(2,5,4,3), (0,1)(2,3)]
**********************************************************************
1 item had failures:
   1 of  11 in sage.combinat.designs.incidence_structures.IncidenceStructure.automorphism_group
    [287 tests, 1 failure, 3.88 s]
```




---

archive/issue_comments_228988.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-04-14T22:50:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228988",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_228989.json:
```json
{
    "body": "Good news:\n\n```\nsage: g1=PermutationGroup([[(2,3),(4,5)], [(2,4),(3,5)], [(1,2),(4,6)], [(0,1),(4,5)]])\nsage: g2=PermutationGroup([[(2,3),(4,5)], [(2,4),(3,5)], [(1,2,3),(4,5,6)], [(1,6),(2,5,4,3)], [(0,1),(2,3)]])\nsage: g1==g2\nTrue\n```\n",
    "created_at": "2015-04-15T08:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228989",
    "user": "https://github.com/nathanncohen"
}
```

Good news:

```
sage: g1=PermutationGroup([[(2,3),(4,5)], [(2,4),(3,5)], [(1,2),(4,6)], [(0,1),(4,5)]])
sage: g2=PermutationGroup([[(2,3),(4,5)], [(2,4),(3,5)], [(1,2,3),(4,5,6)], [(1,6),(2,5,4,3)], [(0,1),(2,3)]])
sage: g1==g2
True
```




---

archive/issue_comments_228990.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-15T09:41:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228990",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228991.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-04-15T09:43:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228991",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_228992.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-04-15T09:44:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228992",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_228993.json:
```json
{
    "body": "Is bliss making random choices during the computation? There is no need for non-deterministic choices in graph automorphisms, I'm sure. Patch it out and/or setting the seed might be a better fix in the long run.",
    "created_at": "2015-04-15T10:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228993",
    "user": "https://github.com/vbraun"
}
```

Is bliss making random choices during the computation? There is no need for non-deterministic choices in graph automorphisms, I'm sure. Patch it out and/or setting the seed might be a better fix in the long run.



---

archive/issue_comments_228994.json:
```json
{
    "body": "Hello,\n\n> Is bliss making random choices during the computation? There is no need for non-deterministic choices in graph automorphisms, I'm sure.\n\nA permutation group can have different sets of generators, and that's the trouble here: Sage and Nauty do not obtain the same. The groups are equal, however, as illustrated above.\n\n> Patch it out and/or setting the seed might be a better fix in the long run. \n\nThere was a real bug in there. I fixed it, and sent an email to Jernej hoping that he can take a look at it soon.\n\nNathann",
    "created_at": "2015-04-15T10:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228994",
    "user": "https://github.com/nathanncohen"
}
```

Hello,

> Is bliss making random choices during the computation? There is no need for non-deterministic choices in graph automorphisms, I'm sure.

A permutation group can have different sets of generators, and that's the trouble here: Sage and Nauty do not obtain the same. The groups are equal, however, as illustrated above.

> Patch it out and/or setting the seed might be a better fix in the long run. 

There was a real bug in there. I fixed it, and sent an email to Jernej hoping that he can take a look at it soon.

Nathann



---

archive/issue_comments_228995.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-04-15T19:36:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228995",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_228996.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2015-04-15T19:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228996",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_228997.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-04-16T08:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228997",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_228998.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-04-16T08:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228998",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_228999.json:
```json
{
    "body": "Here it is. Some doctests were displaying canonical labellings, and of course bliss and Sage compute different ones. I changed the doctests to make them more 'anonymous'.\n\nNathann",
    "created_at": "2015-04-16T08:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-228999",
    "user": "https://github.com/nathanncohen"
}
```

Here it is. Some doctests were displaying canonical labellings, and of course bliss and Sage compute different ones. I changed the doctests to make them more 'anonymous'.

Nathann



---

archive/issue_comments_229000.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-04-16T20:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-229000",
    "user": "https://trac.sagemath.org/admin/accounts/users/azi"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_050246.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2015-04-19T01:52:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17227#event-50246"
}
```



---

archive/issue_comments_229001.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-04-19T01:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-229001",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_229002.json:
```json
{
    "body": "\n```\nsage -t src/sage/graphs/generic_graph.py\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 17773, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    A1.is_isomorphic(A2)                          # optional - bliss\nExpected:\n    True                                                # optional - bliss\nGot:\n    True\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 18179, in sage.graphs.generic_graph.GenericGraph.is_isomorphic\nFailed example:\n    G.is_isomorphic(graphs.GeneralizedPetersenGraph(5,2),algorithm='bliss')# optional - bliss\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 496, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 858, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.generic_graph.GenericGraph.is_isomorphic[43]>\", line 1, in <module>\n        G.is_isomorphic(graphs.GeneralizedPetersenGraph(Integer(5),Integer(2)),algorithm='bliss')# optional - bliss\n      File \"/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py\", line 18306, in is_isomorphic\n        from sage.graphs.bliss import is_isomorphic\n    ImportError: cannot import name is_isomorphic\n**********************************************************************\nFile \"src/sage/graphs/generic_graph.py\", line 18483, in sage.graphs.generic_graph.GenericGraph.?\nFailed example:\n    s1 == s2                                                      # optional - bliss\nExpected:\n    True                                                                # optional - bliss\nGot:\n    True\n**********************************************************************\n```\n",
    "created_at": "2015-05-20T07:00:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-229002",
    "user": "https://github.com/jdemeyer"
}
```


```
sage -t src/sage/graphs/generic_graph.py
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 17773, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    A1.is_isomorphic(A2)                          # optional - bliss
Expected:
    True                                                # optional - bliss
Got:
    True
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 18179, in sage.graphs.generic_graph.GenericGraph.is_isomorphic
Failed example:
    G.is_isomorphic(graphs.GeneralizedPetersenGraph(5,2),algorithm='bliss')# optional - bliss
Exception raised:
    Traceback (most recent call last):
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 496, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 858, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.generic_graph.GenericGraph.is_isomorphic[43]>", line 1, in <module>
        G.is_isomorphic(graphs.GeneralizedPetersenGraph(Integer(5),Integer(2)),algorithm='bliss')# optional - bliss
      File "/usr/local/src/sage-git/local/lib/python2.7/site-packages/sage/graphs/generic_graph.py", line 18306, in is_isomorphic
        from sage.graphs.bliss import is_isomorphic
    ImportError: cannot import name is_isomorphic
**********************************************************************
File "src/sage/graphs/generic_graph.py", line 18483, in sage.graphs.generic_graph.GenericGraph.?
Failed example:
    s1 == s2                                                      # optional - bliss
Expected:
    True                                                                # optional - bliss
Got:
    True
**********************************************************************
```




---

archive/issue_comments_229003.json:
```json
{
    "body": "`O_o`",
    "created_at": "2015-05-20T11:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17227",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17227#issuecomment-229003",
    "user": "https://github.com/nathanncohen"
}
```

`O_o`
