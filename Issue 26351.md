# Issue 26351: groups for handling arguments

Issue created by migration from Trac.

Original creator: dkrenn

Original creation time: 2018-10-29 10:58:04

CC:  behackl

Implement groups that handle complex arguments, points on the unit circle, roots of unit etc.

These groups are needed for growth groups of asymptotic rings in relation to #26587.


---

Comment by git created at 2018-10-29 11:00:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-10-30 13:52:38

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-10-30 14:47:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-10-30 14:59:08

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-10-31 13:12:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-11-05 12:56:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2018-11-05 12:59:02

Changing status from new to needs_review.


---

Comment by git created at 2018-11-07 10:57:30

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2018-11-07 12:08:46

Small Python3-related update concerning #26587.


---

Comment by behackl created at 2018-12-10 23:11:07

I have started to look at your changes. It seems that the patchbot is unhappy:


```
sage -t --long src/sage/groups/misc_gps/argument_groups.py
**********************************************************************
File "src/sage/groups/misc_gps/argument_groups.py", line 658, in sage.groups.misc_gps.argument_groups.UnitCircleGroup._repr_short_
Failed example:
    UnitCircleGroup(RR)._repr_short_()
Expected:
    'U_RR'
Got:
    'U_(Real Field with 53 bits of precision)'
**********************************************************************
File "src/sage/groups/misc_gps/argument_groups.py", line 1253, in sage.groups.misc_gps.argument_groups.ArgumentByElementGroup._repr_short_
Failed example:
    ArgumentByElementGroup(CC)._repr_short_()
Expected:
    'Arg_CC'
Got:
    'Arg_Complex Field with 53 bits of precision'
**********************************************************************
2 items had failures:
   1 of   3 in sage.groups.misc_gps.argument_groups.ArgumentByElementGroup._repr_short_
   1 of   3 in sage.groups.misc_gps.argument_groups.UnitCircleGroup._repr_short_
    [336 tests, 2 failures, 0.13 s]
```



---

Comment by behackl created at 2018-12-10 23:11:07

Changing status from needs_review to needs_work.


---

Comment by git created at 2019-03-27 19:07:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-03-27 19:26:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dkrenn created at 2019-03-27 19:27:55

Replying to [comment:11 behackl]:
> I have started to look at your changes. It seems that the patchbot is unhappy:
> 
> {{{
> sage -t --long src/sage/groups/misc_gps/argument_groups.py
> [...]
> }}}

Indeed there was a commit missing; now cherry-picked.


---

Comment by dkrenn created at 2019-03-27 19:28:20

Changing status from needs_work to needs_review.


---

Comment by behackl created at 2019-04-15 14:24:00

Added two commits. Some further comments:

- `argument_groups.py`
  1. L67: What is the intention of the `normalize`-keyword and how should it be used? Currently, only for `UnitCirclePoint` the argument is normalized to be contained within the interval [0,1). For `ArgumentByElement` the element is not changed. Both of that is fine, however: the keyword is not respected by any of the `_element_constructor_` methods. Is it only there for potential future groups inheriting from `AbstractArgumentGroup`?
  1. L297: `__abs__` returns the Python int 1. (Fixed via 980825c561)
  1. I wanted to have some additional doctests where normalization is involved (c3d5c15f47).
  1. L1713: I think that `exactly_one_is_true` is quite useful and should maybe live in `misc/misc.py`.

- `imaginary_groups.py`:
  1. After implementing `imag` and `real`, also the global methods `real_part` and `imag_part` can be called; this should be tested (7c7eb1fcf6)

Other than that, I have no further comments and am happy with the code. Having these rather basic groups allows to build a solution regarding the handling of the (incomparable) asymptotic growth elements in an `AsymptoticRing` -- which we desire a lot.
----
New commits:


---

Comment by behackl created at 2019-04-15 14:24:00

Changing status from needs_review to needs_work.


---

Comment by dkrenn created at 2019-04-16 08:39:43

Replying to [comment:16 behackl]:
> Added two commits.

LGTM, thanks.

> - `argument_groups.py`
>   1. L67: What is the intention of the `normalize`-keyword and how should it be used? Currently, only for `UnitCirclePoint` the argument is normalized to be contained within the interval [0,1). For `ArgumentByElement` the element is not changed. Both of that is fine, however: the keyword is not respected by any of the `_element_constructor_` methods. Is it only there for potential future groups inheriting from `AbstractArgumentGroup`?

`kwds` are now passed on the element during construction.

>   1. L297: `__abs__` returns the Python int 1. (Fixed via 980825c561)


```
sage: type(exp(QQ(0)))
<type 'sage.rings.integer.Integer'>
```

so I've changed it to have the same behavior.

>   1. I wanted to have some additional doctests where normalization is involved (c3d5c15f47).

LGTM

>   1. L1713: I think that `exactly_one_is_true` is quite useful and should maybe live in `misc/misc.py`.

Done.

> - `imaginary_groups.py`:
>   1. After implementing `imag` and `real`, also the global methods `real_part` and `imag_part` can be called; this should be tested (7c7eb1fcf6)

LGTM

Needs small cross review of changes.
----
New commits:


---

Comment by dkrenn created at 2019-04-16 08:39:43

Changing status from needs_work to needs_review.


---

Comment by git created at 2019-04-16 09:24:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by behackl created at 2019-04-16 11:01:00

I am happy with all changes.


---

Comment by behackl created at 2019-04-16 11:01:00

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2019-04-18 19:56:48

Resolution: fixed


---

Comment by mmezzarobba created at 2019-09-19 13:19:01

Can you please explain what this doctest is for?

```
sage: i = CIF(I)
sage: J(3*i)
Traceback (most recent call last):
...
ValueError: 3 (Real Interval Field with 53 bits of precision)
is not in Integer Ring
> *previous* TypeError: unable to coerce
<type 'sage.rings.real_mpfi.RealIntervalFieldElement'> to an integer
```

I don't understand why this needs to fail while, according to a very similar test a few lines above, `J(3*CBF(i))` is supposed to succeed.

After #28517, `J(3*CIF(i))` would return 3*I as well. Is that acceptable?

Thanks!


---

Comment by dkrenn created at 2019-09-22 19:32:56

Replying to [comment:22 mmezzarobba]:
> Can you please explain what this doctest is for?
> [...]
> I don't understand why this needs to fail while, according to a very similar test a few lines above, `J(3*CBF(i))` is supposed to succeed.
> 
> After #28517, `J(3*CIF(i))` would return 3*I as well. Is that acceptable?

Indeed, this should not fail and is therefore very acceptable. (Not sure why I did not open a ticket for this or wrote at least some kind of remark.)

Thanks for catching this and also for asking back to me; very much appreciated. :)
