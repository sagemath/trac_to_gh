# Issue 22298: Fix bug in checking validity of coordinate values on a chart

Issue created by migration from Trac.

Original creator: egourgoulhon

Original creation time: 2017-03-06 19:45:21

CC:  tscrim

Keywords: chart, manifolds

The following is a bug:

```
sage: M = Manifold(2, 'M')
sage: X.<x,y> = M.chart()
sage: X.add_restrictions((x^2+y^2<1, [x>0, abs(y)<1]))
sage: X.valid_coordinates(2,0)
...
AttributeError: 'list' object has no attribute 'subs'
```

It occurs because of some lack of depth in the analysis of the coordinate restrictions (here `x<sup>2+y</sup>2<1 or (x>0 and abs(y)<1)`). The current ticket fixes it by introducing a recursive function to check the coordinate restrictions. 



---

Comment by egourgoulhon created at 2017-03-06 19:48:44

New commits:


---

Comment by egourgoulhon created at 2017-03-06 19:48:44

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-03-07 17:20:36

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-03-07 17:20:36

LGTM.


---

Comment by egourgoulhon created at 2017-03-07 17:39:02

Thanks!


---

Comment by vbraun created at 2017-03-10 23:13:00

Resolution: fixed
