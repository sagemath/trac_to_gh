# Issue 15335: Exceptions when multiedges/loops are not supported

Issue created by migration from https://trac.sagemath.org/ticket/15572

Original creator: ncohen

Original creation time: 2013-12-23 13:13:06

CC:  azi combinat nthiery dcoudert

Some Graph functions are not made to handle non-simple graphs, i.e. graphs containing loops or multiple edges. This ticket adds necessary exceptions from place to place, hoping no error remains ignored.

The exception advises the user to remove loops/multiple edges from his graph and try again (and to update the function if he thinks that not supporting non-simple graphs is a mistake) `:-P`

This has been reported on sage-support fairly recently [1], and thousands of times before. Past time to deal with those wrong answers `:-/`

[1] https://groups.google.com/d/msg/sage-support/bsXYMXwgW5w/LPrmCNGoah0J


---

Comment by ncohen created at 2013-12-23 13:15:50

New commits:


---

Comment by ncohen created at 2013-12-23 13:15:50

Changing status from new to needs_review.


---

Comment by ncohen created at 2013-12-31 14:29:29

Looks like `DiGraph.is_directed_acylic` actually has no problems with loops. The exception broke a doctest in `rings/semirings/non_negative_integer_semiring.py`.

Fixed !

Nathann


---

Comment by git created at 2013-12-31 14:29:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by elixyre created at 2013-12-31 14:57:31

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-01-04 05:30:57

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2014-01-04 05:30:57

Doctest failures:

```
sage -t --long src/sage/graphs/digraph.py
**********************************************************************
File "src/sage/graphs/digraph.py", line 1035, in sage.graphs.digraph.DiGraph.is_directed_acyclic
Failed example:
    g.allow_loops(True)
Exception raised:
    Traceback (most recent call last):
      File "/mnt/SSD1/mod_buildslave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 480, in _run
        self.execute(example, compiled, test.globs)
      File "/mnt/SSD1/mod_buildslave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 839, in execute
        exec compiled in globs
      File "<doctest sage.graphs.digraph.DiGraph.is_directed_acyclic[11]>", line 1, in <module>
        g.allow_loops(True)
    NameError: name 'g' is not defined
**********************************************************************
```



---

Comment by ncohen created at 2014-01-04 09:57:31

Sorry 'bout that. Just fixed it by updating the last commit.

Nathann


---

Comment by ncohen created at 2014-01-04 09:57:31

Changing status from needs_work to needs_review.


---

Comment by git created at 2014-01-04 09:58:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2014-01-05 00:32:13

Resolution: fixed
