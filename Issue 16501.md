# Issue 16501: Shortening some very long cluster doctests

Issue created by migration from https://trac.sagemath.org/ticket/16738

Original creator: chapoton

Original creation time: 2014-07-30 07:53:29

CC:  stumpc5 gmoose05

After discussion about #16609, some very long doctests in mutation_type.py are toolong. Let us remove them now.


---

Comment by chapoton created at 2014-07-30 07:56:23

Changing keywords from "" to "cluster".


---

Comment by chapoton created at 2014-07-30 07:56:23

New commits:


---

Comment by chapoton created at 2014-07-30 07:56:23

Changing status from new to needs_review.


---

Comment by stumpc5 created at 2014-07-30 13:48:44

I'll review it, let me know once you it's ready. Also: thanks for doing it!


---

Comment by chapoton created at 2014-07-30 13:58:14

Hello Christian,

thanks for your time. I think it is ready for review. I have kept only the simplest tests about rank 2, marking the longer ones with `# not tested`. I think these functions were used to check thoroughly that there was no mistake in the code. One should keep them in the code to be able to run them if some mistake appears at some point, but it does not look necessary to run them every time.

I have also taken this opportunity to do some little code formatting, like 
* lines of length at most 80
* pep8 standard for code (no space after or before parenthesis, etc)
* removed a lot of unused import statements (found with pyflakes)
* comment out 2 unused variables


---

Comment by stumpc5 created at 2014-07-30 14:01:23

Replying to [comment:4 chapoton]:

Okay, I'll look throught it then...


---

Comment by stumpc5 created at 2014-07-30 14:16:36

out of curiosity: is the "lines of length at most 80" rule some sort of standard? I personally find it not very pleasant to be forced to only see 80 characters in a line.


---

Comment by chapoton created at 2014-07-30 15:35:59

This is part of the pep8 code style guide:

http://legacy.python.org/dev/peps/pep-0008/

and we are told to try to follow that in sage here:

http://www.sagemath.org/doc/developer/coding_basics.html


---

Comment by vbraun created at 2014-07-31 00:55:03

I'd prefer to keep the tests (they are still useful to check that one doesn't accidentally break the code). But with less than 100-fold repetition, of course. I.e. k=10 or maybe 1.


---

Comment by git created at 2014-07-31 08:24:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2014-07-31 08:26:09

Ok, I have kept a few more tests. Those that now have a `# not tested` are the really looooong ones.


---

Comment by stumpc5 created at 2014-07-31 08:43:47

Replying to [comment:10 chapoton]:
> Ok, I have kept a few more tests. Those that now have a `# not tested` are the really looooong ones.

I think that these `_random_multi_tests` are not worth doing a single time. Even doing them 100 times, it is unlikely to trigger a bug in the code (when working on that certainly tooo complicated functions, I had to do those tests 10000s of times to find possible issues). So I would still tag them as `{# not tested` since those 1.5sec of testing for practically no advantage doesn't seem to be worth spending on doctesting.


---

Comment by git created at 2014-07-31 09:06:56

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2014-08-01 20:23:23

The patchbot is green. Christian, do you agree with current state ?


---

Comment by stumpc5 created at 2014-08-03 06:34:47

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-08-04 16:03:17

Resolution: fixed
