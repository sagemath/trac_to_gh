# Issue 28391: Tensor Fields: set_restriction Behaviour

archive/issues_028391.json:
```json
{
    "body": "CC:  @egourgoulhon\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/28628\n\n",
    "created_at": "2019-10-18T12:29:32Z",
    "labels": [
        "component: please change"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.0",
    "title": "Tensor Fields: set_restriction Behaviour",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28391",
    "user": "https://github.com/DeRhamSource"
}
```
CC:  @egourgoulhon



Issue created by migration from https://trac.sagemath.org/ticket/28628





---

archive/issue_comments_400538.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-10-18T13:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400538",
    "user": "https://github.com/DeRhamSource"
}
```

New commits:



---

archive/issue_comments_400539.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-10-18T13:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400539",
    "user": "https://github.com/DeRhamSource"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_400540.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2019-10-18T13:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400540",
    "user": "https://github.com/DeRhamSource"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_400541.json:
```json
{
    "body": "Changing keywords from \"\" to \"manifolds\".",
    "created_at": "2019-10-18T13:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400541",
    "user": "https://github.com/DeRhamSource"
}
```

Changing keywords from "" to "manifolds".



---

archive/issue_comments_400542.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-18T14:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400542",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_400543.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-10-18T15:30:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400543",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_400544.json:
```json
{
    "body": "Thanks for opening the ticket and implementing the fix (the introduction of `copy_from` seems a good idea). However I don't think that you should add the optional argument `del_restrictions` in `TensorField._del_derived`. At first glance, this makes this method on the same footing than `TensorFieldParal._del_derived`, which has such an argument. However, `TensorField` and `TensorFieldParal` are not symmetrical as far as restrictions are concerned (see Sec. 3.5 of [these notes](https://doi.org/10.5802/ccirm.26)):\n- for a `TensorFieldParal`, the primary data are the components w.r.t. to vector frames on its domain, stored in the dict `_components`; the restrictions are derived quantities, which can be reconstructed at any time from  `_components`\n- for a `TensorField`, the primary data are the restrictions to subdomains; they are not derived quantities; deleting them in `_del_derived()` would erase essential piece of information on the tensor field",
    "created_at": "2019-10-18T15:30:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400544",
    "user": "https://github.com/egourgoulhon"
}
```

Thanks for opening the ticket and implementing the fix (the introduction of `copy_from` seems a good idea). However I don't think that you should add the optional argument `del_restrictions` in `TensorField._del_derived`. At first glance, this makes this method on the same footing than `TensorFieldParal._del_derived`, which has such an argument. However, `TensorField` and `TensorFieldParal` are not symmetrical as far as restrictions are concerned (see Sec. 3.5 of [these notes](https://doi.org/10.5802/ccirm.26)):
- for a `TensorFieldParal`, the primary data are the components w.r.t. to vector frames on its domain, stored in the dict `_components`; the restrictions are derived quantities, which can be reconstructed at any time from  `_components`
- for a `TensorField`, the primary data are the restrictions to subdomains; they are not derived quantities; deleting them in `_del_derived()` would erase essential piece of information on the tensor field



---

archive/issue_comments_400545.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to geometry.",
    "created_at": "2019-10-18T15:30:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400545",
    "user": "https://github.com/egourgoulhon"
}
```

Changing component from PLEASE CHANGE to geometry.



---

archive/issue_comments_400546.json:
```json
{
    "body": "Actually, I'm aware of that and definitely see your point. Though, as one can see in `add_expr_by_continuation` (and now `copy_from`), this behaviour is wanted at some point, even for `TensorField` objects. For that reason, I put `del_restrictions=False` as default, so that the previous code is not affected at all.\n\nIf you don't want to have this snippet in `_del_derived`, where it would make sense in my opinion, I'd suggest a new method `_del_restrictions` for it is used quite often. This simplifies future modifications on this matter (if needed).\n\nWhat do you say?",
    "created_at": "2019-10-18T15:45:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400546",
    "user": "https://github.com/DeRhamSource"
}
```

Actually, I'm aware of that and definitely see your point. Though, as one can see in `add_expr_by_continuation` (and now `copy_from`), this behaviour is wanted at some point, even for `TensorField` objects. For that reason, I put `del_restrictions=False` as default, so that the previous code is not affected at all.

If you don't want to have this snippet in `_del_derived`, where it would make sense in my opinion, I'd suggest a new method `_del_restrictions` for it is used quite often. This simplifies future modifications on this matter (if needed).

What do you say?



---

archive/issue_comments_400547.json:
```json
{
    "body": "Ah! For `add_expr_by_continuation` you want exactly the behaviour you explained, of course. Sorry! However, imho the modifications above make things easier and the code more elegant and consistent.",
    "created_at": "2019-10-18T15:54:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400547",
    "user": "https://github.com/DeRhamSource"
}
```

Ah! For `add_expr_by_continuation` you want exactly the behaviour you explained, of course. Sorry! However, imho the modifications above make things easier and the code more elegant and consistent.



---

archive/issue_comments_400548.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-18T17:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_400549.json:
```json
{
    "body": "Is this better?",
    "created_at": "2019-10-18T17:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400549",
    "user": "https://github.com/DeRhamSource"
}
```

Is this better?



---

archive/issue_comments_400550.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-10-18T17:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400550",
    "user": "https://github.com/DeRhamSource"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_400551.json:
```json
{
    "body": "Replying to [comment:9 gh-DeRhamSource]:\n> Is this better?\n\nMuch better! ;-)\n\nA question though: what's the point of \n\n```\n    TensorField.copy_from(self, other)\n```\n \nin `TensorFieldParal.copy_from()` ?\nActually, the action of `TensorField.copy_from` amounts to copying the restrictions, but the restrictions are deleted by the subsequent call:\n\n```\n    FreeModuleTensor.copy_from(self, other)\n```\n\ndue to \n\n```        \n    self._del_derived()\n```\n\nin `FreeModuleTensor.copy_from()`. \n\nIn view of this, I would simply delete `TensorFieldParal.copy_from()`, so that `copy_from()` in `TensorFieldParal` is inherited from `FreeModuleTensor`.",
    "created_at": "2019-10-18T19:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400551",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:9 gh-DeRhamSource]:
> Is this better?

Much better! ;-)

A question though: what's the point of 

```
    TensorField.copy_from(self, other)
```
 
in `TensorFieldParal.copy_from()` ?
Actually, the action of `TensorField.copy_from` amounts to copying the restrictions, but the restrictions are deleted by the subsequent call:

```
    FreeModuleTensor.copy_from(self, other)
```

due to 

```        
    self._del_derived()
```

in `FreeModuleTensor.copy_from()`. 

In view of this, I would simply delete `TensorFieldParal.copy_from()`, so that `copy_from()` in `TensorFieldParal` is inherited from `FreeModuleTensor`.



---

archive/issue_comments_400552.json:
```json
{
    "body": "Replying to [comment:10 egourgoulhon]:\n> \n> Much better! ;-)\n> \n> A question though: what's the point of \n> {{{\n>     TensorField.copy_from(self, other)\n> }}} \n> in `TensorFieldParal.copy_from()` ?\n> Actually, the action of `TensorField.copy_from` amounts to copying the restrictions, but the restrictions are deleted by the subsequent call:\n> {{{\n>     FreeModuleTensor.copy_from(self, other)\n> }}}\n> due to \n> {{{        \n>     self._del_derived()\n> }}}\n> in `FreeModuleTensor.copy_from()`. \n\nAh! Yes! The order should be switched then, right?\n\nA copy of the restrictions even for `TensorFieldParal` would be convenient, wouldn't it?",
    "created_at": "2019-10-18T22:15:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400552",
    "user": "https://github.com/DeRhamSource"
}
```

Replying to [comment:10 egourgoulhon]:
> 
> Much better! ;-)
> 
> A question though: what's the point of 
> {{{
>     TensorField.copy_from(self, other)
> }}} 
> in `TensorFieldParal.copy_from()` ?
> Actually, the action of `TensorField.copy_from` amounts to copying the restrictions, but the restrictions are deleted by the subsequent call:
> {{{
>     FreeModuleTensor.copy_from(self, other)
> }}}
> due to 
> {{{        
>     self._del_derived()
> }}}
> in `FreeModuleTensor.copy_from()`. 

Ah! Yes! The order should be switched then, right?

A copy of the restrictions even for `TensorFieldParal` would be convenient, wouldn't it?



---

archive/issue_comments_400553.json:
```json
{
    "body": "Replying to [comment:11 gh-DeRhamSource]:\n> \n> Ah! Yes! The order should be switched then, right?\n> \n\nYes if you would like to maintain `TensorFieldParal.copy_from()` with the copies of the restrictions.\n> A copy of the restrictions even for `TensorFieldParal` would be convenient, wouldn't it?\nI am not so sure: for `TensorFieldParal`, restrictions are derived quantities, which can be easily reconstructed at any time if necessary. Not copying them makes `copy_from()` faster. If we have `a.copy_from(b)` with restrictions of `b` having been constructed for whatever reasons, it could be that in the future use of `a`, no restriction will be invoked. So I would vote for removing `copy_from()` from `TensorFieldParal` class, keeping it only in `FreeModuleTensor`. This makes the code shorter and clearer: `copy_from()` does not copy the derived quantities, whatever their nature.",
    "created_at": "2019-10-19T20:35:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400553",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:11 gh-DeRhamSource]:
> 
> Ah! Yes! The order should be switched then, right?
> 

Yes if you would like to maintain `TensorFieldParal.copy_from()` with the copies of the restrictions.
> A copy of the restrictions even for `TensorFieldParal` would be convenient, wouldn't it?
I am not so sure: for `TensorFieldParal`, restrictions are derived quantities, which can be easily reconstructed at any time if necessary. Not copying them makes `copy_from()` faster. If we have `a.copy_from(b)` with restrictions of `b` having been constructed for whatever reasons, it could be that in the future use of `a`, no restriction will be invoked. So I would vote for removing `copy_from()` from `TensorFieldParal` class, keeping it only in `FreeModuleTensor`. This makes the code shorter and clearer: `copy_from()` does not copy the derived quantities, whatever their nature.



---

archive/issue_comments_400554.json:
```json
{
    "body": "Okay, that sounds reasonable. I will work on this tomorrow.\n\nBy the way, characteristic classes are almost finished. They come with a *very* rudimentary version of bundle connections. But I have already plans for full bundle connection support. Though, this has to wait since my master thesis deadline runs out soon.\n\nBest wishes,\nMichael",
    "created_at": "2019-10-20T23:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400554",
    "user": "https://github.com/DeRhamSource"
}
```

Okay, that sounds reasonable. I will work on this tomorrow.

By the way, characteristic classes are almost finished. They come with a *very* rudimentary version of bundle connections. But I have already plans for full bundle connection support. Though, this has to wait since my master thesis deadline runs out soon.

Best wishes,
Michael



---

archive/issue_comments_400555.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-21T08:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_400556.json:
```json
{
    "body": "Done.",
    "created_at": "2019-10-21T08:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400556",
    "user": "https://github.com/DeRhamSource"
}
```

Done.



---

archive/issue_comments_400557.json:
```json
{
    "body": "Replying to [comment:15 gh-DeRhamSource]:\n> Done.\nThanks.",
    "created_at": "2019-10-21T10:17:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400557",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:15 gh-DeRhamSource]:
> Done.
Thanks.



---

archive/issue_comments_400558.json:
```json
{
    "body": "Changing keywords from \"manifolds\" to \"manifolds, tensor\".",
    "created_at": "2019-10-21T10:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400558",
    "user": "https://github.com/egourgoulhon"
}
```

Changing keywords from "manifolds" to "manifolds, tensor".



---

archive/issue_comments_400559.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-21T10:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400559",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_400560.json:
```json
{
    "body": "author name missing",
    "created_at": "2019-10-21T19:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400560",
    "user": "https://github.com/fchapoton"
}
```

author name missing



---

archive/issue_comments_400561.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-10-21T22:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400561",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_400562.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2019-10-22T05:56:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400562",
    "user": "https://github.com/DeRhamSource"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_400563.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2019-10-23T22:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400563",
    "user": "https://github.com/vbraun"
}
```

Merge conflict



---

archive/issue_comments_400564.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-10-23T22:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400564",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_400565.json:
```json
{
    "body": "Replying to [comment:21 vbraun]:\n> Merge conflict\n\nI guess this is a conflict with one of the recently merged manifold tickets, #28600 or #28159 (more probably the latter). The easiest way to solve it would be to wait for the 9.0.beta3 release...",
    "created_at": "2019-10-24T06:25:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400565",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:21 vbraun]:
> Merge conflict

I guess this is a conflict with one of the recently merged manifold tickets, #28600 or #28159 (more probably the latter). The easiest way to solve it would be to wait for the 9.0.beta3 release...



---

archive/issue_comments_400566.json:
```json
{
    "body": "No, the affected files are untouched in #28600 and #28159. I rather think it's connected to #28562?\n\nWhich code lines cause a merge conflict anyway?",
    "created_at": "2019-10-24T09:50:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400566",
    "user": "https://github.com/DeRhamSource"
}
```

No, the affected files are untouched in #28600 and #28159. I rather think it's connected to #28562?

Which code lines cause a merge conflict anyway?



---

archive/issue_comments_400567.json:
```json
{
    "body": "Replying to [comment:23 gh-DeRhamSource]:\n> No, the affected files are untouched in #28600 and #28159. I rather think it's connected to #28562?\n\nI don't think so, since #28562 is not merged yet. Note that #28159 is touching `tensorfield.py`, as the current ticket.                                    \n\n> \n> Which code lines cause a merge conflict anyway?\n\nIt will be easy to see them when the develop branch is released (as 9.0.beta3).",
    "created_at": "2019-10-24T10:02:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400567",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:23 gh-DeRhamSource]:
> No, the affected files are untouched in #28600 and #28159. I rather think it's connected to #28562?

I don't think so, since #28562 is not merged yet. Note that #28159 is touching `tensorfield.py`, as the current ticket.                                    

> 
> Which code lines cause a merge conflict anyway?

It will be easy to see them when the develop branch is released (as 9.0.beta3).



---

archive/issue_comments_400568.json:
```json
{
    "body": "Well, okay. But this is just one line with a typo in a very different line. However, I think you're right.",
    "created_at": "2019-10-24T10:10:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400568",
    "user": "https://github.com/DeRhamSource"
}
```

Well, okay. But this is just one line with a typo in a very different line. However, I think you're right.



---

archive/issue_comments_400569.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-10-27T13:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400569",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_400570.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-10-27T13:34:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400570",
    "user": "https://github.com/DeRhamSource"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_400571.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-10-27T13:35:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400571",
    "user": "https://github.com/DeRhamSource"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_400572.json:
```json
{
    "body": "Merge still fails. Is it possible to see the conflict files/lines?",
    "created_at": "2019-10-27T13:37:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400572",
    "user": "https://github.com/DeRhamSource"
}
```

Merge still fails. Is it possible to see the conflict files/lines?



---

archive/issue_comments_400573.json:
```json
{
    "body": "The merge conflict with Sage 9.0.beta3 is solved in the above branch. I have also added the copy of the attribute `_is_zero` in `copy_from()`, as well as some autorship lines. Do you agree?\n----\nNew commits:",
    "created_at": "2019-10-27T13:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400573",
    "user": "https://github.com/egourgoulhon"
}
```

The merge conflict with Sage 9.0.beta3 is solved in the above branch. I have also added the copy of the attribute `_is_zero` in `copy_from()`, as well as some autorship lines. Do you agree?
----
New commits:



---

archive/issue_comments_400574.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-10-27T13:41:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400574",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_400575.json:
```json
{
    "body": "Yes! Thank you very much! :)",
    "created_at": "2019-10-27T13:43:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400575",
    "user": "https://github.com/DeRhamSource"
}
```

Yes! Thank you very much! :)



---

archive/issue_comments_400576.json:
```json
{
    "body": "Replying to [comment:29 gh-DeRhamSource]:\n> Merge still fails. Is it possible to see the conflict files/lines?\n\nSorry I haven't seen your message before pushing the new branch; it seems we were working on solving the conflict at the same time ;-). \n\nThe general method I am using to see the conflicting files/lines is the following one:\n- start from a clean develop branch (i.e. 9.0.beta3 in the present case)\n- do \n  {{{\n  git checkout -b set_restriction-28628\n  git pull trac u/gh-DeRhamSource/tensor_fields__set_restriction_behaviour\n  }}}\nThis generates an error message, stating that there is a conflict in `tensorfield.py`.\nEdit the latter to fix the conflict and do `git add tensorfield.py`, then `git commit`, etc.",
    "created_at": "2019-10-27T13:57:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400576",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:29 gh-DeRhamSource]:
> Merge still fails. Is it possible to see the conflict files/lines?

Sorry I haven't seen your message before pushing the new branch; it seems we were working on solving the conflict at the same time ;-). 

The general method I am using to see the conflicting files/lines is the following one:
- start from a clean develop branch (i.e. 9.0.beta3 in the present case)
- do 
  {{{
  git checkout -b set_restriction-28628
  git pull trac u/gh-DeRhamSource/tensor_fields__set_restriction_behaviour
  }}}
This generates an error message, stating that there is a conflict in `tensorfield.py`.
Edit the latter to fix the conflict and do `git add tensorfield.py`, then `git commit`, etc.



---

archive/issue_comments_400577.json:
```json
{
    "body": "That's a good hint for the future. I just thought, you were fast! :D\n\nHowever, you solved the merge conflict and I'd say, we take your branch, now.",
    "created_at": "2019-10-27T14:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400577",
    "user": "https://github.com/DeRhamSource"
}
```

That's a good hint for the future. I just thought, you were fast! :D

However, you solved the merge conflict and I'd say, we take your branch, now.



---

archive/issue_comments_400578.json:
```json
{
    "body": "Replying to [comment:34 gh-DeRhamSource]:\n> That's a good hint for the future. \n\nIt seems there is a merge conflict between 9.0.beta3 and #28564; so if you want to practice...",
    "created_at": "2019-10-27T14:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400578",
    "user": "https://github.com/egourgoulhon"
}
```

Replying to [comment:34 gh-DeRhamSource]:
> That's a good hint for the future. 

It seems there is a merge conflict between 9.0.beta3 and #28564; so if you want to practice...



---

archive/issue_comments_400579.json:
```json
{
    "body": "The last patchbot is full green.",
    "created_at": "2019-10-27T18:54:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400579",
    "user": "https://github.com/egourgoulhon"
}
```

The last patchbot is full green.



---

archive/issue_comments_400580.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-10-27T18:54:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400580",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_400581.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-10-28T23:51:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28391",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28391#issuecomment-400581",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
