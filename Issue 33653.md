# Issue 33653: dot2tex errors : No such file or directory: '/tmp/dot2texXXXXXX/dot2tex.log'

Issue created by migration from https://trac.sagemath.org/ticket/33890

Original creator: tmonteil

Original creation time: 2022-05-24 09:30:50

CC:  jhpalmieri

I have the following issue with dot2tex on Sage 9.6, on Debian GNU/Linux, many doctests involving `dot2tex` fail, here is a typical example:


```
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 9.6, Release Date: 2022-05-15                     │
│ Using Python 3.10.3. Type "help()" for help.                       │
└────────────────────────────────────────────────────────────────────┘
sage: P = Poset(([1,2], [[1,2]]), cover_relations = True)
sage: print(P._latex_())
---------------------------------------------------------------------------
FileNotFoundError                         Traceback (most recent call last)
<ipython-input-2-29f954c10b99> in <module>
----> 1 print(P._latex_())

/opt/sagemath/sage-9.6/local/var/lib/sage/venv-python3.10.3/lib/python3.10/site-packages/sage/combinat/posets/posets.py in _latex_(self)
   1375             \end{tikzpicture}
   1376         """
-> 1377         return self.hasse_diagram()._latex_()
   1378 
   1379     def _repr_(self):

/opt/sagemath/sage-9.6/local/var/lib/sage/venv-python3.10.3/lib/python3.10/site-packages/sage/graphs/generic_graph.py in _latex_(self)
    869         setup_latex_preamble()
    870 
--> 871         return self.latex_options().latex()
    872 
    873     def _matrix_(self, R=None, vertices=None):

/opt/sagemath/sage-9.6/local/var/lib/sage/venv-python3.10.3/lib/python3.10/site-packages/sage/graphs/graph_latex.py in latex(self)
   1347             return self.tkz_picture()
   1348         elif format == "dot2tex":
-> 1349             return self.dot2tex_picture()
   1350 
   1351     def dot2tex_picture(self):

/opt/sagemath/sage-9.6/local/var/lib/sage/venv-python3.10.3/lib/python3.10/site-packages/sage/graphs/graph_latex.py in dot2tex_picture(self)
   1427         dotdata = self._graph.graphviz_string(labels="latex", **options)
   1428         import dot2tex
-> 1429         return dot2tex.dot2tex(dotdata,
   1430                                format='tikz',
   1431                                autosize=True,

/opt/sagemath/sage-9.6/local/var/lib/sage/venv-python3.10.3/lib/python3.10/site-packages/dot2tex/__init__.py in dot2tex(dotsource, **kwargs)
     60 
     61     """
---> 62     return d2t.convert_graph(dotsource, **kwargs)
     63 
     64 

/opt/sagemath/sage-9.6/local/var/lib/sage/venv-python3.10.3/lib/python3.10/site-packages/dot2tex/dot2tex.py in convert_graph(dotsource, **kwargs)
   3123 
   3124     options.__dict__.update(kwargs)
-> 3125     tex = main(True, dotsource, options)
   3126     return tex
   3127 

/opt/sagemath/sage-9.6/local/var/lib/sage/venv-python3.10.3/lib/python3.10/site-packages/dot2tex/dot2tex.py in main(run_as_module, dotdata, options)
   3073         sys.exit(1)
   3074     try:
-> 3075         s = conv.convert(dotdata)
   3076         log.debug('Output:\n%s', s)
   3077         if options.autosize:

/opt/sagemath/sage-9.6/local/var/lib/sage/venv-python3.10.3/lib/python3.10/site-packages/dot2tex/dot2tex.py in convert(self, dotdata)
    798 
    799         if self.dopreproc:
--> 800             return self.do_preview_preproc()
    801 
    802         # Remove annoying square

/opt/sagemath/sage-9.6/local/var/lib/sage/venv-python3.10.3/lib/python3.10/site-packages/dot2tex/dot2tex.py in do_preview_preproc(self)
   1051             usedgraphs[name] = graph
   1052 
-> 1053         ok = pp.process()
   1054 
   1055         if not ok:

/opt/sagemath/sage-9.6/local/var/lib/sage/venv-python3.10.3/lib/python3.10/site-packages/dot2tex/dot2tex.py in process(self)
   2643             s = f.read()
   2644         log.debug('Code written to %s\n' % self.tempfilename + s)
-> 2645         self.parse_log_file()
   2646         shutil.rmtree(self.tempdir)
   2647         log.debug('Temporary directory and files deleted')

/opt/sagemath/sage-9.6/local/var/lib/sage/venv-python3.10.3/lib/python3.10/site-packages/dot2tex/dot2tex.py in parse_log_file(self)
   2679         p.wait()
   2680 
-> 2681         with open(logfilename, 'r') as f:
   2682             logdata = f.read()
   2683         log.debug('Logfile from LaTeX run: \n' + logdata)

FileNotFoundError: [Errno 2] No such file or directory: '/tmp/dot2texffi4ywvd/dot2tex.log'
```



---

Comment by jhpalmieri created at 2022-08-05 22:17:44

I can't reproduce this on OS X or on an Ubuntu virtual machine. I'll try a little bit more.
