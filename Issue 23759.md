# Issue 23759: Stripping tests blocks with included functions

Issue created by migration from Trac.

Original creator: jmantysalo

Original creation time: 2017-10-09 10:37:44

CC:  jhpalmieri

When making #23995 I noticed that TESTS are not stripped in included functions, see `line_graph()` on `generic_graph.py`.


---

Comment by jhpalmieri created at 2017-10-09 20:22:47

I don't see the problem: if I change `Tests:` to `TESTS:` in `line_graph.py` and rebuild the documentation, then the `TESTS` block in `generic_graph.py` is hidden. Two things:

- if you only edit `line_graph.py` and then rebuild the documentation, it won't rebuild `generic_graph.html`. You can touch `generic_graph.py`, do `sage -b`, and then rebuild the docs instead. In addition, you can run Sage and type `sage.graphs.generic_graph.GenericGraph.line_graph?` to see if the TESTS block is visible. It's not for me.

- why is `line_graph()` included in `generic_graph.py` in the first place? I guess what I really want to ask is, why is `line_graph()` written as a standalone function when its first argument is `self`? It should be a method for a class, not a standalone function.


---

Comment by jmantysalo created at 2017-10-10 03:47:54

Changing status from new to needs_review.


---

Comment by jmantysalo created at 2017-10-10 03:47:54

Replying to [comment:1 jhpalmieri]:
> I don't see the problem: - -
> 
> - if you only edit `line_graph.py` and then rebuild the documentation, it won't rebuild `generic_graph.html`.

Duh. My bad, please wontfix-review.

> - why is `line_graph()` included in `generic_graph.py` in the first place? I guess what I really want to ask is, why is `line_graph()` written as a standalone function when its first argument is `self`? It should be a method for a class, not a standalone function.

I don't know. Graph theory part of Sage is big, some parts written to `.pyx`, have external parts like Bliss, is written by several people etc...

For example see what this does:


```
g = graphs.StarGraph(3)
print(g.hamiltonian_path())
print(g.hamiltonian_cycle())
```



---

Comment by jhpalmieri created at 2017-10-10 04:15:41

Changing status from needs_review to positive_review.


---

Comment by jmantysalo created at 2017-10-10 05:12:28

Added reviewer name to be sure that this will be semiautomatically closed.


---

Comment by embray created at 2017-12-12 08:23:33

Resolution: wontfix
