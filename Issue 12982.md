# Issue 12982: Bug on Sage simple server

archive/issues_012982.json:
```json
{
    "body": "Assignee: Ares Rib\u00f3\n\nCC:  jason\n\n*We have the following problems:*\n\n\nnb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) \nbash-3.2$ sage\n\n\n----------------------------------------------------------------------\n\n\n| Sage Version 5.0.1, Release Date: 2012-06-10                       |\n\n| Type notebook() for the GUI, and license() for information.        |\n\n----------------------------------------------------------------------\n\n\nLoading Sage library. Current Mercurial branch is: d6.2 \n\n\nsage: from sage.server.misc import find_next_available_port \n\n\nsage: port = find_next_available_port(9000, verbose=False) \n\n\nsage: from sagenb.notebook.notebook_object import test_notebook \n\n\nsage: passwd = str(randint(1,1<<128)) \n\n\nsage: nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) \n\n\n--------------------------------------------------------------------------- \n\n \nTypeError                                 Traceback (most recent call last) \n\n\n/Applications/sage/<ipython console> in <module>()\n\nTypeError: test_notebook() got an unexpected keyword argument 'address'\n\n''This is the first error. It seems that `address` is not currently (in 5.0.1) a valid option.\nMust update the docs.\n''\n\n\n\n\n\n\n\n\n\n\nsage: nb = test_notebook(passwd, secure=False, port=port, verbose=True) \n\nNotebook started.\n\nsage: import urllib, re\n\nsage: def get_url(url): h = urllib.urlopen(url); data = h.read(); h.close(); return data\n\n....: \n\nsage: sleep(1)\n\nsage: login_page = get_url('http://localhost:%s/simple/login?username=admin&password=%s' % (port, \n\npasswd))\n\nsage: print login_page\n\n{\n\n\"session\": \"fcee333f07d53c13a46f65b9c4a15473\"\n\n}\n\n___S_A_G_E___\n\n\nsage: session = re.match(r'.*\"session\": \"([^\"]*)\"', login_page, re.DOTALL).groups()[0]\n\nsage: sleep(0.5)\n\nsage: print get_url('http://localhost:%s/simple/compute?session=%s&code=2*2&timeout=60' % (port, \n\nsession))\n\n{\n\n\"status\": \"done\",\n\n\"files\": [],\n\n\"cell_id\": 2\n\n}\n\n___S_A_G_E___\n\n4\n''\nJust repeating this command 3 times,  it gets stuck.''\n\nIssue created by migration from https://trac.sagemath.org/ticket/13154\n\n",
    "created_at": "2012-06-23T00:33:23Z",
    "labels": [
        "notebook",
        "major",
        "bug"
    ],
    "title": "Bug on Sage simple server",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12982",
    "user": "ares"
}
```
Assignee: Ares Rib√≥

CC:  jason

*We have the following problems:*


nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) 
bash-3.2$ sage


----------------------------------------------------------------------


| Sage Version 5.0.1, Release Date: 2012-06-10                       |

| Type notebook() for the GUI, and license() for information.        |

----------------------------------------------------------------------


Loading Sage library. Current Mercurial branch is: d6.2 


sage: from sage.server.misc import find_next_available_port 


sage: port = find_next_available_port(9000, verbose=False) 


sage: from sagenb.notebook.notebook_object import test_notebook 


sage: passwd = str(randint(1,1<<128)) 


sage: nb = test_notebook(passwd, secure=False, address='localhost', port=port, verbose=True) 


--------------------------------------------------------------------------- 

 
TypeError                                 Traceback (most recent call last) 


/Applications/sage/<ipython console> in <module>()

TypeError: test_notebook() got an unexpected keyword argument 'address'

''This is the first error. It seems that `address` is not currently (in 5.0.1) a valid option.
Must update the docs.
''










sage: nb = test_notebook(passwd, secure=False, port=port, verbose=True) 

Notebook started.

sage: import urllib, re

sage: def get_url(url): h = urllib.urlopen(url); data = h.read(); h.close(); return data

....: 

sage: sleep(1)

sage: login_page = get_url('http://localhost:%s/simple/login?username=admin&password=%s' % (port, 

passwd))

sage: print login_page

{

"session": "fcee333f07d53c13a46f65b9c4a15473"

}

___S_A_G_E___


sage: session = re.match(r'.*"session": "([^"]*)"', login_page, re.DOTALL).groups()[0]

sage: sleep(0.5)

sage: print get_url('http://localhost:%s/simple/compute?session=%s&code=2*2&timeout=60' % (port, 

session))

{

"status": "done",

"files": [],

"cell_id": 2

}

___S_A_G_E___

4
''
Just repeating this command 3 times,  it gets stuck.''

Issue created by migration from https://trac.sagemath.org/ticket/13154





---

archive/issue_comments_156947.json:
```json
{
    "body": "If I'm not mistaken, the Sage simple server is more or less deprecated.  The [Sage cell server](https://github.com/sagemath/sagecell/) seems to be along the lines of replacing it.  Jason, is that correct?",
    "created_at": "2012-07-07T02:26:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12982#issuecomment-156947",
    "user": "kcrisman"
}
```

If I'm not mistaken, the Sage simple server is more or less deprecated.  The [Sage cell server](https://github.com/sagemath/sagecell/) seems to be along the lines of replacing it.  Jason, is that correct?



---

archive/issue_comments_156948.json:
```json
{
    "body": "It does not work with the new notebook, and no one has volunteered to fix it yet.  Pull requests are welcome, of course.  The Sage Cell Server does do (most of) the things you'd want the simple server to do.",
    "created_at": "2012-07-07T02:47:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12982#issuecomment-156948",
    "user": "jason"
}
```

It does not work with the new notebook, and no one has volunteered to fix it yet.  Pull requests are welcome, of course.  The Sage Cell Server does do (most of) the things you'd want the simple server to do.



---

archive/issue_comments_156949.json:
```json
{
    "body": "I guess what I'm wondering is whether this ticket should be closed.  It sounds like you're saying that this could be fixed, just that no one has volunteered yet.",
    "created_at": "2012-07-07T03:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12982#issuecomment-156949",
    "user": "kcrisman"
}
```

I guess what I'm wondering is whether this ticket should be closed.  It sounds like you're saying that this could be fixed, just that no one has volunteered yet.



---

archive/issue_comments_156950.json:
```json
{
    "body": "My best guess is that the current simple server code is dead and will need to be rewritten from scratch to be useful again.",
    "created_at": "2012-07-07T04:01:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12982#issuecomment-156950",
    "user": "jason"
}
```

My best guess is that the current simple server code is dead and will need to be rewritten from scratch to be useful again.



---

archive/issue_comments_156951.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-06-14T17:08:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12982#issuecomment-156951",
    "user": "kcrisman"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_156952.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-14T17:09:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12982#issuecomment-156952",
    "user": "kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_156953.json:
```json
{
    "body": "Note that #11409 would remove this completely.",
    "created_at": "2013-06-14T18:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12982#issuecomment-156953",
    "user": "kcrisman"
}
```

Note that #11409 would remove this completely.



---

archive/issue_comments_156954.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2013-06-14T18:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12982#issuecomment-156954",
    "user": "kcrisman"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_156955.json:
```json
{
    "body": "As a part of Sage Days 60, I was just going through these ticket lists to see if there were easy ones: \n\nIsn't this ticket a wont-fix/invalid kind ticket?",
    "created_at": "2014-08-14T19:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12982#issuecomment-156955",
    "user": "knsam"
}
```

As a part of Sage Days 60, I was just going through these ticket lists to see if there were easy ones: 

Isn't this ticket a wont-fix/invalid kind ticket?



---

archive/issue_comments_156956.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2014-08-15T05:11:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12982#issuecomment-156956",
    "user": "kcrisman"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_156957.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-08-20T20:36:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12982",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12982#issuecomment-156957",
    "user": "vbraun"
}
```

Resolution: fixed
