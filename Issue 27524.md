# Issue 27524: DES Block Cipher

Issue created by migration from https://trac.sagemath.org/ticket/27761

Original creator: @yhxnf

Original creation time: 2019-05-02 18:17:59

CC:  asante

Keywords: DES

Implementation of the block cipher DES (Data Encryption Standard).


---

Comment by @yhxnf created at 2019-05-03 20:34:26

Changing status from new to needs_review.


---

Comment by @yhxnf created at 2019-06-19 11:36:52

Changing status from needs_review to needs_work.


---

Comment by @yhxnf created at 2019-06-19 11:36:52

see ticket:27573#comment:9


---

Comment by git created at 2019-08-08 13:26:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2019-08-15 11:33:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @yhxnf created at 2019-08-15 11:33:27

Changing status from needs_work to needs_review.


---

Comment by asante created at 2019-10-28 18:32:39

Changing status from needs_review to needs_work.


---

Comment by asante created at 2019-10-28 18:32:39

The doc-tests do not pass with py3:



```
% SAGE_ROOT=`pwd` sage -t src/sage/crypto/block_cipher/des.py
Running doctests with ID 2019-10-28-19-28-18-e844606a.
Git branch: t/27761/des_block_cipher
Using --optional=build,dochtml,memlimit,python2,sage
Doctesting 1 file.
sage -t --warn-long 33.9 src/sage/crypto/block_cipher/des.py
**********************************************************************
File "src/sage/crypto/block_cipher/des.py", line 57, in sage.crypto.block_cipher.des
Failed example:
    cipher.sboxes = [[SBox(range(16)) for _ in range(4)]*8
Exception raised:
    Traceback (most recent call last):
      File "/home/asante/werkstatt/werkbank/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 681, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/asante/werkstatt/werkbank/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1103, in compile_and_execute
        compiled = compiler(example)
      File "/home/asante/werkstatt/werkbank/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 649, in compiler
        compileflags, 1)
      File "<doctest sage.crypto.block_cipher.des[16]>", line 1
        cipher.sboxes = [[SBox(range(Integer(16))) for _ in range(Integer(4))]*Integer(8)
                                                                                        ^
    SyntaxError: unexpected EOF while parsing
**********************************************************************
```


This can simply be fixed by:



```diff
diff --git a/src/sage/crypto/block_cipher/des.py b/src/sage/crypto/block_cipher/des.py
index 44f8b510b8..bcc1bad327 100644
--- a/src/sage/crypto/block_cipher/des.py
+++ b/src/sage/crypto/block_cipher/des.py
@@ -54,7 +54,7 @@ Change cipher internals::
     sage: from sage.crypto.sbox import SBox
     sage: cipher = DES(rounds=1, doFinalRound=False)
-    sage: cipher.sboxes = [[SBox(range(16))]*4]*8
+    sage: cipher.sboxes = [[SBox(list(range(16)))]*4]*8
     sage: cipher.keySchedule = lambda x: [0]  # return the 0 key as round key
     sage: cipher.encrypt(plaintext=0x1234, key=0x0).hex()
     '80004000d08100'
```


btw compiling with py3 can be done as described here: https://wiki.sagemath.org/Python3-compatible%20code


---

Comment by asante created at 2019-10-28 18:41:20

Actually, after #28403 this should be fixed as is, so a rebase should maybe be enough?


---

Comment by git created at 2019-10-30 17:38:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by asante created at 2019-11-07 11:03:12

With the rebase it now LGTM


---

Comment by asante created at 2019-11-07 11:03:12

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2019-11-07 23:31:27

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2019-11-07 23:31:27

Author and reviewer name is missing...


---

Comment by asante created at 2019-11-08 08:48:01

Changing status from needs_work to positive_review.


---

Comment by asante created at 2019-11-08 08:48:01

author and reviewer added.


---

Comment by vbraun created at 2019-11-14 23:19:27

Resolution: fixed
