# Issue 30610: Get rid of # optional - sagenb

archive/issues_030610.json:
```json
{
    "body": "CC:  dcoudert dimpase tmonteil\n\n\n```\n$ git grep '# optional.*sagenb'\nsrc/sage/graphs/graph_database.py:            sage: D.interactive_query(display_cols=['graph6', 'num_vertices', 'degree_sequence'], num_edges=5, max_degree=3)  # py2 # optional -- sagenb\nsrc/sage/tests/cmdline.py:        sage: (out, err, ret) = test_executable([\"sage\", \"--rst2txt\", input]) # py2 # optional -- sagenb\nsrc/sage/tests/cmdline.py:        sage: print(out) # py2 # optional -- sagenb\nsrc/sage/tests/cmdline.py:        sage: err # py2 # optional -- sagenb\nsrc/sage/tests/cmdline.py:        sage: ret # py2 # optional -- sagenb\nsrc/sage/tests/cmdline.py:        sage: test_executable([\"sage\", \"--rst2txt\", input, output]) # py2 # optional -- sagenb\nsrc/sage/tests/cmdline.py:        sage: print(open(output, 'r').read()) # py2 # optional -- sagenb\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30847\n\n",
    "created_at": "2020-11-01T23:33:45Z",
    "labels": [
        "doctest coverage",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Get rid of # optional - sagenb",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30610",
    "user": "mkoeppe"
}
```
CC:  dcoudert dimpase tmonteil


```
$ git grep '# optional.*sagenb'
src/sage/graphs/graph_database.py:            sage: D.interactive_query(display_cols=['graph6', 'num_vertices', 'degree_sequence'], num_edges=5, max_degree=3)  # py2 # optional -- sagenb
src/sage/tests/cmdline.py:        sage: (out, err, ret) = test_executable(["sage", "--rst2txt", input]) # py2 # optional -- sagenb
src/sage/tests/cmdline.py:        sage: print(out) # py2 # optional -- sagenb
src/sage/tests/cmdline.py:        sage: err # py2 # optional -- sagenb
src/sage/tests/cmdline.py:        sage: ret # py2 # optional -- sagenb
src/sage/tests/cmdline.py:        sage: test_executable(["sage", "--rst2txt", input, output]) # py2 # optional -- sagenb
src/sage/tests/cmdline.py:        sage: print(open(output, 'r').read()) # py2 # optional -- sagenb
```



Issue created by migration from https://trac.sagemath.org/ticket/30847





---

archive/issue_comments_437571.json:
```json
{
    "body": "I wrote the `rst2txt` and `rst2sws` scripts almost 10 years ago at #11459 (doctests were added later on in #13297). I remember I asked myself whether this could go in the sage library at the time, because it was almost independent of the sagenb code. Anyway, the passage from rst to txt or sws is not so desirable now with the jupyter notebook, so I guess we can just get rid of it.",
    "created_at": "2020-11-02T08:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437571",
    "user": "slabbe"
}
```

I wrote the `rst2txt` and `rst2sws` scripts almost 10 years ago at #11459 (doctests were added later on in #13297). I remember I asked myself whether this could go in the sage library at the time, because it was almost independent of the sagenb code. Anyway, the passage from rst to txt or sws is not so desirable now with the jupyter notebook, so I guess we can just get rid of it.



---

archive/issue_comments_437572.json:
```json
{
    "body": "I have never used sagenb, the graph database or the interactive query tool. I'm also still not using Jupyter, but should clearly try it.\n\nThis is one of the few tests that we let with a py2 tag because we won't know what to do with it / how to make it work.\nDo we have any user of this functionality ?",
    "created_at": "2020-11-02T08:47:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437572",
    "user": "dcoudert"
}
```

I have never used sagenb, the graph database or the interactive query tool. I'm also still not using Jupyter, but should clearly try it.

This is one of the few tests that we let with a py2 tag because we won't know what to do with it / how to make it work.
Do we have any user of this functionality ?



---

archive/issue_comments_437573.json:
```json
{
    "body": "what's the point of keeping py2-only tests in, if Sage does not work with py2 any more?",
    "created_at": "2020-11-02T09:23:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437573",
    "user": "dimpase"
}
```

what's the point of keeping py2-only tests in, if Sage does not work with py2 any more?



---

archive/issue_comments_437574.json:
```json
{
    "body": "For the `rst2txt` feature, i agree that it should be removed (easy). For the graph database interact feature, the question goes beyond the doctests:\n\n- shall we rewrite the interact for jupyter (using ipyidgets) ?\n- is the database used at all ?\n- is the database easily accessible without the interact ?\n- could the 13 years old database be extended to more vertices ? If yes, where is the source code to produce it ? The page of Jason Grout were it was hosted does not exist anymore (but we could probably contact him).",
    "created_at": "2020-11-02T19:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437574",
    "user": "tmonteil"
}
```

For the `rst2txt` feature, i agree that it should be removed (easy). For the graph database interact feature, the question goes beyond the doctests:

- shall we rewrite the interact for jupyter (using ipyidgets) ?
- is the database used at all ?
- is the database easily accessible without the interact ?
- could the 13 years old database be extended to more vertices ? If yes, where is the source code to produce it ? The page of Jason Grout were it was hosted does not exist anymore (but we could probably contact him).



---

archive/issue_comments_437575.json:
```json
{
    "body": "Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437575",
    "user": "mkoeppe"
}
```

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_437576.json:
```json
{
    "body": "let us take care here of the removal of rst2txt\n\nand keep the graph problem for elsewhere\n----\nNew commits:",
    "created_at": "2021-07-03T09:55:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437576",
    "user": "chapoton"
}
```

let us take care here of the removal of rst2txt

and keep the graph problem for elsewhere
----
New commits:



---

archive/issue_comments_437577.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-07-03T09:55:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437577",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_437578.json:
```json
{
    "body": "lgtm",
    "created_at": "2021-07-03T12:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437578",
    "user": "dimpase"
}
```

lgtm



---

archive/issue_comments_437579.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-03T12:44:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437579",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_437580.json:
```json
{
    "body": "There's another version of `setup.py` in `build/pkgs/sagelib/src/setup.py` that needs changing too. (NB: #31386 will remove the duplication.)",
    "created_at": "2021-07-03T16:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437580",
    "user": "mkoeppe"
}
```

There's another version of `setup.py` in `build/pkgs/sagelib/src/setup.py` that needs changing too. (NB: #31386 will remove the duplication.)



---

archive/issue_comments_437581.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-07-03T16:17:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437581",
    "user": "mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_437582.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-03T16:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437582",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_437583.json:
```json
{
    "body": "done, please review again",
    "created_at": "2021-07-03T16:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437583",
    "user": "chapoton"
}
```

done, please review again



---

archive/issue_comments_437584.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-03T16:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437584",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_437585.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-03T17:34:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437585",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_437586.json:
```json
{
    "body": "Replying to [comment:4 tmonteil]:\n> For the `rst2txt` feature, i agree that\n> it should be removed (easy).\n> For the graph database interact feature,\n> the question goes beyond the doctests:\n> \n> - shall we rewrite the interact for jupyter (using ipyidgets)?\n> - is the database used at all?\n> - is the database easily accessible without the interact?\n> - could the 13 years old database be extended to more vertices?\n>   If yes, where is the source code to produce it?\n>   The page of Jason Grout were it was hosted does not\n>   exist anymore (but we could probably contact him).\n\nIt would be nice to restore the functionality in Jupyter.\n\nThe code for Jason Grout's Small Graph Database\nis now available at:\n\n- https://github.com/jasongrout/graph_database\n\nThe description page previously at\n\n- http://jasongrout.org/graph_database\n\nis archived at\n\n- https://web.archive.org/web/20210302071151/http://jasongrout.org/graph_database\n\nand the interface pages previously at\n\n- http://jasongrout.org/graphs\n- http://jasongrout.org/graphs-2\n\nare offline but archived at\n\n- https://github.com/jasongrout/graph_database\n\nRestoring an interactive interface to the database\nin modern and secure JavaScript needs work.",
    "created_at": "2021-07-05T22:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437586",
    "user": "slelievre"
}
```

Replying to [comment:4 tmonteil]:
> For the `rst2txt` feature, i agree that
> it should be removed (easy).
> For the graph database interact feature,
> the question goes beyond the doctests:
> 
> - shall we rewrite the interact for jupyter (using ipyidgets)?
> - is the database used at all?
> - is the database easily accessible without the interact?
> - could the 13 years old database be extended to more vertices?
>   If yes, where is the source code to produce it?
>   The page of Jason Grout were it was hosted does not
>   exist anymore (but we could probably contact him).

It would be nice to restore the functionality in Jupyter.

The code for Jason Grout's Small Graph Database
is now available at:

- https://github.com/jasongrout/graph_database

The description page previously at

- http://jasongrout.org/graph_database

is archived at

- https://web.archive.org/web/20210302071151/http://jasongrout.org/graph_database

and the interface pages previously at

- http://jasongrout.org/graphs
- http://jasongrout.org/graphs-2

are offline but archived at

- https://github.com/jasongrout/graph_database

Restoring an interactive interface to the database
in modern and secure JavaScript needs work.



---

archive/issue_comments_437587.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-09T20:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30610",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30610#issuecomment-437587",
    "user": "vbraun"
}
```

Resolution: fixed
