# Issue 30610: Get rid of # optional - sagenb

Issue created by migration from https://trac.sagemath.org/ticket/30847

Original creator: mkoeppe

Original creation time: 2020-11-01 23:33:45

CC:  dcoudert dimpase tmonteil


```
$ git grep '# optional.*sagenb'
src/sage/graphs/graph_database.py:            sage: D.interactive_query(display_cols=['graph6', 'num_vertices', 'degree_sequence'], num_edges=5, max_degree=3)  # py2 # optional -- sagenb
src/sage/tests/cmdline.py:        sage: (out, err, ret) = test_executable(["sage", "--rst2txt", input]) # py2 # optional -- sagenb
src/sage/tests/cmdline.py:        sage: print(out) # py2 # optional -- sagenb
src/sage/tests/cmdline.py:        sage: err # py2 # optional -- sagenb
src/sage/tests/cmdline.py:        sage: ret # py2 # optional -- sagenb
src/sage/tests/cmdline.py:        sage: test_executable(["sage", "--rst2txt", input, output]) # py2 # optional -- sagenb
src/sage/tests/cmdline.py:        sage: print(open(output, 'r').read()) # py2 # optional -- sagenb
```




---

Comment by slabbe created at 2020-11-02 08:32:42

I wrote the `rst2txt` and `rst2sws` scripts almost 10 years ago at #11459 (doctests were added later on in #13297). I remember I asked myself whether this could go in the sage library at the time, because it was almost independent of the sagenb code. Anyway, the passage from rst to txt or sws is not so desirable now with the jupyter notebook, so I guess we can just get rid of it.


---

Comment by dcoudert created at 2020-11-02 08:47:15

I have never used sagenb, the graph database or the interactive query tool. I'm also still not using Jupyter, but should clearly try it.

This is one of the few tests that we let with a py2 tag because we won't know what to do with it / how to make it work.
Do we have any user of this functionality ?


---

Comment by dimpase created at 2020-11-02 09:23:32

what's the point of keeping py2-only tests in, if Sage does not work with py2 any more?


---

Comment by tmonteil created at 2020-11-02 19:09:35

For the `rst2txt` feature, i agree that it should be removed (easy). For the graph database interact feature, the question goes beyond the doctests:

- shall we rewrite the interact for jupyter (using ipyidgets) ?
- is the database used at all ?
- is the database easily accessible without the interact ?
- could the 13 years old database be extended to more vertices ? If yes, where is the source code to produce it ? The page of Jason Grout were it was hosted does not exist anymore (but we could probably contact him).


---

Comment by mkoeppe created at 2021-03-24 02:04:25

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.


---

Comment by chapoton created at 2021-07-03 09:55:51

let us take care here of the removal of rst2txt

and keep the graph problem for elsewhere
----
New commits:


---

Comment by chapoton created at 2021-07-03 09:55:51

Changing status from new to needs_review.


---

Comment by dimpase created at 2021-07-03 12:44:41

lgtm


---

Comment by dimpase created at 2021-07-03 12:44:41

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-07-03 16:17:37

There's another version of `setup.py` in `build/pkgs/sagelib/src/setup.py` that needs changing too. (NB: #31386 will remove the duplication.)


---

Comment by mkoeppe created at 2021-07-03 16:17:37

Changing status from positive_review to needs_work.


---

Comment by git created at 2021-07-03 16:55:46

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2021-07-03 16:56:41

done, please review again


---

Comment by chapoton created at 2021-07-03 16:56:41

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2021-07-03 17:34:26

Changing status from needs_review to positive_review.


---

Comment by slelievre created at 2021-07-05 22:50:26

Replying to [comment:4 tmonteil]:
> For the `rst2txt` feature, i agree that
> it should be removed (easy).
> For the graph database interact feature,
> the question goes beyond the doctests:
> 
> - shall we rewrite the interact for jupyter (using ipyidgets)?
> - is the database used at all?
> - is the database easily accessible without the interact?
> - could the 13 years old database be extended to more vertices?
>   If yes, where is the source code to produce it?
>   The page of Jason Grout were it was hosted does not
>   exist anymore (but we could probably contact him).

It would be nice to restore the functionality in Jupyter.

The code for Jason Grout's Small Graph Database
is now available at:

- https://github.com/jasongrout/graph_database

The description page previously at

- http://jasongrout.org/graph_database

is archived at

- https://web.archive.org/web/20210302071151/http://jasongrout.org/graph_database

and the interface pages previously at

- http://jasongrout.org/graphs
- http://jasongrout.org/graphs-2

are offline but archived at

- https://github.com/jasongrout/graph_database

Restoring an interactive interface to the database
in modern and secure JavaScript needs work.


---

Comment by vbraun created at 2021-07-09 20:23:52

Resolution: fixed
