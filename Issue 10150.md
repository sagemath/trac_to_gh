# Issue 10150: Update calls to MixedIntegerLinearProgram and its solve function to follow the new interface

Issue created by migration from Trac.

Original creator: ncohen

Original creation time: 2010-10-21 16:13:40

Assignee: ncohen

CC:  malb mvngu




---

Comment by ncohen created at 2010-10-21 16:41:59

Changing status from new to needs_review.


---

Comment by malb created at 2010-11-05 14:04:51

I think it would be good if the user could set some global option which solver to use, such that (s)he doesn't have to give the solver each time a high-level function is called.


---

Comment by malb created at 2010-11-05 14:04:51

Changing status from needs_review to needs_work.


---

Comment by ncohen created at 2010-11-05 14:10:19

Well, the "default solver" is already automatically picked as the best among those installed. Cplex is taken if available, then Coin, then GLPK (default, always there).. This is mainly for checking that the results are coherent when the solver changes... 

How do you think such a global option should be set/read ?.. I do not know the custom for this in Sage `^^;`

Nathann


---

Comment by malb created at 2010-11-05 14:45:44

Sure, you pick the overall best, but for a particular problem another one might be better and it would be nice to force a particular solver. Another application would be benchmarketing.

I'd suggest this user interface:


```python
sage: default_mip_solver()
'Coin'
sage: default_mip_solver('GLPK')
sage: default_mip_solver()
'GLPK'
```



---

Comment by ncohen created at 2010-11-05 14:49:58

> Sure, you pick the overall best, but for a particular problem another one might be better and it would be nice to force a particular solver.

Well, then for a *particular* problem the ``solver`` parameter should be the perfect answer, wouldn't it ? `:-p`

I'll be writing this patch, it shouldn't take long `:-)`

Nathann


---

Comment by malb created at 2010-11-05 15:02:58

Maybe you're right and we don't need it, I don't know :) Your choice then.


---

Comment by ncohen created at 2010-11-05 15:35:03

Hmmm... I almost finished it, but now I am wasting time on a stupid thig... I defined in sage.numerical.backends.generic_backend, at the module level, a variable default_solver which caches the default solver to use.... Of course, when the default_mip_solver method changes its values, it only changes the value of a default_solver variable defined INSIDE of the default_mip_variable method, which has absolutely no effect on the "global" variable...

Do you know which trick to use in this case ? `^^;` 

Nathann


---

Comment by malb created at 2010-11-05 17:08:12

Hi, do you mean:


```python
variable = False

def foo():
   global variable
   variable = True

foo()
print variable
```



---

Comment by ncohen created at 2010-11-05 19:41:11

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2010-11-05 19:41:11

exactly... thank you  `:-)`

Nathann


---

Comment by malb created at 2010-11-06 17:42:02

Hi, I get the follow doctest failures:


```
malb`@`geom:~/scratch/sage-4.6.1.alpha0$ ./sage -t -long  devel/sage/sage/graphs/graph_coloring.py
sage -t -long "devel/sage/sage/graphs/graph_coloring.py"
**********************************************************************
File "/scratch/malb/sage-4.6.1.alpha0/devel/sage/sage/graphs/graph_coloring.py", line 1111:
    sage: g1,g2 = linear_arboricity(g, k=0)
Exception raised:
    Traceback (most recent call last): 
    ...
        p = MixedIntegerLinearProgram(solver = solver)
    NameError: global name 'solver' is not defined
```



---

Comment by malb created at 2010-11-06 17:49:14

I think

```python
:meth:`default_mip_solver` -- Returns/Sets the default MIP solver. 
```

should be `:func:`. 

Other than that, the patch looks good. So once all doctests pass and this is fixed, I'm happy to give this patch a positive review.


---

Comment by ncohen created at 2010-11-06 17:54:07

Sorry about that... :-/

I was pretty sure I had checked it passed all tests... :-/

Updated.

Nathann


---

Attachment


---

Comment by malb created at 2010-11-06 21:15:32

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2010-11-10 22:21:10

Resolution: fixed
