# Issue 24424: fix arb problems on 32-bit systems

Issue created by migration from https://trac.sagemath.org/ticket/24661

Original creator: dimpase

Original creation time: 2018-02-05 17:48:12

CC:  slelievre tmonteil

This is a follow-up to #24369, as reported there in comment 7, 
on 32-bit x86 linux one gets

```
l_vec_hurwitz....
 L value differ
L(1/2, 1) single = (0 + 0j)  +/-  (0, 0j)
L(1/2, 1) multi = (-0.30909754859579756426 + 0j)  +/-  (2.54e-23, 0j)

(-0.3090975486 + 0j)  +/-  (2.54e-23, 0j)
(0.7888523833 - 0.1836680212j)  +/-  (2.02e-23, 1.54e-23j)
(0.4432168971 - 0.236477911j)  +/-  (1.99e-23, 1.32e-23j)
(1.648021942 + 0.03777565741j)  +/-  (1.55e-23, 8.22e-24j)
(0.6185977148 + 0.146695673j)  +/-  (2.08e-23, 1.32e-23j)
(0.5039871966 - 0.8215955013j)  +/-  (2.02e-23, 1.71e-23j)
(0.750432146 + 0j)  +/-  (2.54e-23, 0j)
(0.5039871966 + 0.8215955013j)  +/-  (2.02e-23, 1.71e-23j)
(0.6185977148 - 0.146695673j)  +/-  (2.08e-23, 1.32e-23j)
(1.648021942 - 0.03777565741j)  +/-  (1.55e-23, 8.22e-24j)
(0.4432168971 + 0.236477911j)  +/-  (1.99e-23, 1.32e-23j)
(0.7888523833 + 0.1836680212j)  +/-  (2.02e-23, 1.54e-23j)


../Makefile.subdirs:84: recipe for target '../build/acb_dirichlet/test/t-l_vec_hurwitz_RUN' failed
```



---

Comment by fredrik.johansson created at 2018-02-10 23:28:36

Probably fixed in this commit (bug in the test code); needs to be checked on a 32-bit system:

https://github.com/fredrik-johansson/arb/commit/15f40f7f467644564aad6d02be9335655f86c1da


---

Comment by tmonteil created at 2018-02-10 23:41:19

OK i am currently testing the current master branch on my 32bit VM.


---

Comment by dimpase created at 2018-02-10 23:55:01

after many PASSed tests I got

```
make[1]: Entering directory `/home/dima/sage/arb/mag'
add....PASS
neg_log_lower....../build/mag/test/t-neg_log_lower: symbol lookup error: ../build/mag/test/t-neg_log_lower: undefined symbol: mag_neg_log_lower
make[1]: *** [../build/mag/test/t-neg_log_lower_RUN] Error 127
make[1]: Leaving directory `/home/dima/sage/arb/mag'
make: *** [check] Error 2
```

which is probably some other story.


---

Comment by tmonteil created at 2018-02-11 00:09:57

It works well for me (tests just finished). Note that i tried to reproduce Sage build with 


```
./configure --disable-static --with-flint=../sage-8.1/local/ --with-gmp=../sage-8.1/local/ --with-mpfr=../sage-8.1/local/
```



---

Comment by dimpase created at 2018-02-11 00:47:04

Replying to [comment:4 dimpase]:
> after many PASSed tests I got
> {{{
> make[1]: Entering directory `/home/dima/sage/arb/mag'
> add....PASS
> neg_log_lower....../build/mag/test/t-neg_log_lower: symbol lookup error: ../build/mag/test/t-neg_log_lower: undefined symbol: mag_neg_log_lower
> make[1]: *** [../build/mag/test/t-neg_log_lower_RUN] Error 127
> make[1]: Leaving directory `/home/dima/sage/arb/mag'
> make: *** [check] Error 2
> }}}
> which is probably some other story.

oops, it works - I had dirty LD_LIBRARY_PATH that pointed to an old arb...
So it's all good (on my "real" 32-bit box).


---

Comment by slelievre created at 2019-03-08 02:20:18

Can this be closed?


---

Comment by tmonteil created at 2019-08-27 19:49:24

Changing keywords from "" to "sdl".


---

Comment by dimpase created at 2019-08-27 20:36:38

Changing status from new to needs_review.


---

Comment by dimpase created at 2019-08-27 20:36:52

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2019-08-28 19:01:46

Resolution: invalid
