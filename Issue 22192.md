# Issue 22192: Some cleanup of the crystals files

archive/issues_022192.json:
```json
{
    "body": "CC:  sage-combinat @fchapoton @bsalisbury1 alubovsky\n\nDo some cleanup of some of the files in the crystals code such as a more simple program flow, using more standard python code, fixing some docstrings, and having 80 chars/line.\n\nIssue created by migration from https://trac.sagemath.org/ticket/22429\n\n",
    "created_at": "2017-02-24T04:59:44Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Some cleanup of the crystals files",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/22192",
    "user": "https://github.com/tscrim"
}
```
CC:  sage-combinat @fchapoton @bsalisbury1 alubovsky

Do some cleanup of some of the files in the crystals code such as a more simple program flow, using more standard python code, fixing some docstrings, and having 80 chars/line.

Issue created by migration from https://trac.sagemath.org/ticket/22429





---

archive/issue_comments_307908.json:
```json
{
    "body": "There is still likely more cleanup to be done, which could obtain some more speed, but this makes things a bit better.\n----\nNew commits:",
    "created_at": "2017-02-24T05:01:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307908",
    "user": "https://github.com/tscrim"
}
```

There is still likely more cleanup to be done, which could obtain some more speed, but this makes things a bit better.
----
New commits:



---

archive/issue_comments_307909.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-02-24T05:01:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307909",
    "user": "https://github.com/tscrim"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_307910.json:
```json
{
    "body": "typo (directly):\n\n```\ndeprecation(22429, \"Call self.promotion_on_highest_weight_vector direclty\")\n```\n",
    "created_at": "2017-02-24T08:55:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307910",
    "user": "https://github.com/fchapoton"
}
```

typo (directly):

```
deprecation(22429, "Call self.promotion_on_highest_weight_vector direclty")
```




---

archive/issue_comments_307911.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-24T14:56:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307911",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307912.json:
```json
{
    "body": "there seems to be 2 or 3 failing doctests",
    "created_at": "2017-03-01T10:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307912",
    "user": "https://github.com/fchapoton"
}
```

there seems to be 2 or 3 failing doctests



---

archive/issue_comments_307913.json:
```json
{
    "body": "Here:\n\n```\n+        return tuple([x for x in self.classical_decomposition()\n+                      if all(x.epsilon(i) == 0 for i in [2,3,4,5])])\n```\n\nyou do not need the outer []\n\nHere:\n\n```\n`{1,2,3,4,5}`\n```\n\nyou may need to add backslashes for the { and }",
    "created_at": "2017-03-01T10:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307913",
    "user": "https://github.com/fchapoton"
}
```

Here:

```
+        return tuple([x for x in self.classical_decomposition()
+                      if all(x.epsilon(i) == 0 for i in [2,3,4,5])])
```

you do not need the outer []

Here:

```
`{1,2,3,4,5}`
```

you may need to add backslashes for the { and }



---

archive/issue_comments_307914.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-01T15:26:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307914",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307915.json:
```json
{
    "body": "Fixed the issues mentioned. Believe it or not, the way I have is faster:\n\n```\nsage: L = range(100000)\nsage: %timeit tuple(x for x  in L)\n100 loops, best of 3: 3.47 ms per loop\nsage: %timeit tuple([x for x  in L])\n100 loops, best of 3: 2.72 ms per loop\nsage: L = range(1000000)\nsage: %timeit tuple(x for x  in L)\n10 loops, best of 3: 38.4 ms per loop\nsage: %timeit tuple([x for x  in L])\n10 loops, best of 3: 34.2 ms per loop\n```\n",
    "created_at": "2017-03-01T15:30:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307915",
    "user": "https://github.com/tscrim"
}
```

Fixed the issues mentioned. Believe it or not, the way I have is faster:

```
sage: L = range(100000)
sage: %timeit tuple(x for x  in L)
100 loops, best of 3: 3.47 ms per loop
sage: %timeit tuple([x for x  in L])
100 loops, best of 3: 2.72 ms per loop
sage: L = range(1000000)
sage: %timeit tuple(x for x  in L)
10 loops, best of 3: 38.4 ms per loop
sage: %timeit tuple([x for x  in L])
10 loops, best of 3: 34.2 ms per loop
```




---

archive/issue_comments_307916.json:
```json
{
    "body": "Ping with a green patchbot.",
    "created_at": "2017-04-29T06:31:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307916",
    "user": "https://github.com/tscrim"
}
```

Ping with a green patchbot.



---

archive/issue_comments_307917.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-30T15:23:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307917",
    "user": "https://github.com/bsalisbury1"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_307918.json:
```json
{
    "body": "Looks good!",
    "created_at": "2017-04-30T15:23:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307918",
    "user": "https://github.com/bsalisbury1"
}
```

Looks good!



---

archive/issue_comments_307919.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-04-30T15:47:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307919",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_307920.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2017-04-30T15:47:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307920",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_307921.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-30T15:48:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307921",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_307922.json:
```json
{
    "body": "Thank you. I just did a trivial rebase over #22882",
    "created_at": "2017-04-30T15:48:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307922",
    "user": "https://github.com/tscrim"
}
```

Thank you. I just did a trivial rebase over #22882



---

archive/issue_comments_307923.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2017-05-04T19:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307923",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_307924.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-05-04T19:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307924",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_307925.json:
```json
{
    "body": "Simple (stupid) typo in a latex command. pdf docs now build.",
    "created_at": "2017-05-04T19:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307925",
    "user": "https://github.com/tscrim"
}
```

Simple (stupid) typo in a latex command. pdf docs now build.



---

archive/issue_comments_307926.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-05-04T19:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307926",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_307927.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-05-08T21:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/22192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/22192#issuecomment-307927",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
