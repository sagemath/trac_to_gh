# Issue 22192: Some cleanup of the crystals files

Issue created by migration from Trac.

Original creator: tscrim

Original creation time: 2017-02-24 04:59:44

CC:  sage-combinat chapoton bsalisbury1 alubovsky

Do some cleanup of some of the files in the crystals code such as a more simple program flow, using more standard python code, fixing some docstrings, and having 80 chars/line.


---

Comment by tscrim created at 2017-02-24 05:01:53

There is still likely more cleanup to be done, which could obtain some more speed, but this makes things a bit better.
----
New commits:


---

Comment by tscrim created at 2017-02-24 05:01:53

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-02-24 08:55:24

typo (directly):

```
deprecation(22429, "Call self.promotion_on_highest_weight_vector direclty")
```



---

Comment by git created at 2017-02-24 14:56:34

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2017-03-01 10:54:51

there seems to be 2 or 3 failing doctests


---

Comment by chapoton created at 2017-03-01 10:58:46

Here:

```
+        return tuple([x for x in self.classical_decomposition()
+                      if all(x.epsilon(i) == 0 for i in [2,3,4,5])])
```

you do not need the outer []

Here:

```
`{1,2,3,4,5}`
```

you may need to add backslashes for the { and }


---

Comment by git created at 2017-03-01 15:26:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2017-03-01 15:30:39

Fixed the issues mentioned. Believe it or not, the way I have is faster:

```
sage: L = range(100000)
sage: %timeit tuple(x for x  in L)
100 loops, best of 3: 3.47 ms per loop
sage: %timeit tuple([x for x  in L])
100 loops, best of 3: 2.72 ms per loop
sage: L = range(1000000)
sage: %timeit tuple(x for x  in L)
10 loops, best of 3: 38.4 ms per loop
sage: %timeit tuple([x for x  in L])
10 loops, best of 3: 34.2 ms per loop
```



---

Comment by tscrim created at 2017-04-29 06:31:30

Ping with a green patchbot.


---

Comment by bsalisbury1 created at 2017-04-30 15:23:24

Changing status from needs_review to positive_review.


---

Comment by bsalisbury1 created at 2017-04-30 15:23:24

Looks good!


---

Comment by git created at 2017-04-30 15:47:31

Changing status from positive_review to needs_review.


---

Comment by git created at 2017-04-30 15:47:31

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by tscrim created at 2017-04-30 15:48:05

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-04-30 15:48:05

Thank you. I just did a trivial rebase over #22882


---

Comment by git created at 2017-05-04 19:33:41

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2017-05-04 19:33:41

Changing status from positive_review to needs_review.


---

Comment by tscrim created at 2017-05-04 19:35:21

Simple (stupid) typo in a latex command. pdf docs now build.


---

Comment by tscrim created at 2017-05-04 19:35:21

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-05-08 21:18:58

Resolution: fixed
