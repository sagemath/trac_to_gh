# Issue 26423: Fix changes from #25857 that were accidentally reverted by #25188

Issue created by migration from Trac.

Original creator: embray

Original creation time: 2018-11-08 12:54:24

CC:  dimpase vbraun

As I explained a bit [here](https://trac.sagemath.org/ticket/24919#comment:121), #25857 ad #25188 had some interdependency, but were merged in the wrong order.

#25857 was merged for 8.5.beta1, then #25188 was merged in 8.5.beta2.  However, the latter contained in it an old version of the former, which ended up taking precedence in the merge resolution.

This resulted in some changes being undone:


```
$ git diff 8.5.beta1..8.5.beta2 -- build/make/deps
```



```diff
diff --git a/build/make/deps b/build/make/deps
index a3abca3..bbe3277 100644
--- a/build/make/deps
+++ b/build/make/deps
`@``@` -75,15 +75,13 `@``@` toolchain: $(foreach pkgname,$(TOOLCHAIN),$(inst_$(pkgname)))
 # unconditionally. We still use the dependency checking from $(MAKE),
 # so this will not trigger useless rebuilds.
 # See #14168 and #14232.
-#
-# Note: This list consists of only the *runtime* dependencies of the toolchain.
-TOOLCHAIN_DEPS = zlib $(MP_LIBRARY) mpfr mpc
-TOOLCHAIN_DEP_INSTS = \
-       $(foreach pkgname,$(TOOLCHAIN_DEPS),$(inst_$(pkgname)))
-
+# Note: This list is determined from the dependencies of the TOOLCHAIN
+# packages which include gcc, and optionally ccache; in principle this
+# list is redundant.
+TOOLCHAIN_DEPS = zlib xz $(MP_LIBRARY) mpfr mpc
 toolchain-deps:
-       for target in $(TOOLCHAIN_DEP_INSTS); do \
-           $(MAKE) $$target; \
+       for pkg in $(TOOLCHAIN_DEPS); do \
+           $(MAKE) $$pkg; \
        done

 all-toolchain: base-toolchain
```



---

Comment by embray created at 2018-11-08 13:59:06

Changing status from new to needs_review.


---

Comment by embray created at 2018-11-08 13:59:06

New commits:


---

Comment by dimpase created at 2018-11-08 18:46:13

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2018-11-08 18:46:13

I'd remove `Makefile.in` from this branch, as there you just add whitespace. Otherwise, looks good and works.


---

Comment by chapoton created at 2018-11-08 19:04:18

reviewer name missing


---

Comment by dimpase created at 2018-11-08 19:05:58

thanks for the reminder!


---

Comment by embray created at 2018-11-09 13:30:17

The whitespace added there was intentional--it was _unintentionally_ removed same as the other changes added back in by this ticket.  In this case the whitespace is meaningful--it makes debug output more readable.


---

Comment by vbraun created at 2018-11-11 22:20:04

Resolution: fixed
