# Issue 17685: coeffs() function more consistent between Expressions and polynomial rings

archive/issues_017685.json:
```json
{
    "body": "Keywords: coeffs\n\n\n```\ny = 3*x^3 + 2*x^2 - 4*x\nprint(y)\ntype(y)\n```\n\nGives:\n\n\n```\n3*x^3 + 2*x^2 - 4*x\n<type 'sage.symbolic.expression.Expression'>\n```\n\nAnd\n\n\n```\nM = matrix(SR,[[1,2],[0,-2]])\nch = M.charpoly()\nprint(ch)\ntype(ch)\n```\n\ngives\n\n\n```\nx^2 + x - 2\n<class 'sage.rings.polynomial.polynomial_element_generic.Polynomial_generic_dense_field'>\n```\n\nBut:\n\n\n```\ny.coeffs()\n```\n\nreturns\n\n\n```\n[[\u22124,1],[2,2],[3,3]]\n```\n\nand\n\n\n```\nch.coeffs()\n```\n\nreturns\n\n\n```\n[\u22122,1,1]\n```\n\n\nI'd prefer if these two functions returned the same format, preferably the Expression format, as having access to the index allows list comprehension tastiness.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17922\n\n",
    "created_at": "2015-03-10T01:18:41Z",
    "labels": [
        "algebra",
        "minor",
        "PLEASE CHANGE"
    ],
    "title": "coeffs() function more consistent between Expressions and polynomial rings",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17685",
    "user": "JoalHeagney"
}
```
Keywords: coeffs


```
y = 3*x^3 + 2*x^2 - 4*x
print(y)
type(y)
```

Gives:


```
3*x^3 + 2*x^2 - 4*x
<type 'sage.symbolic.expression.Expression'>
```

And


```
M = matrix(SR,[[1,2],[0,-2]])
ch = M.charpoly()
print(ch)
type(ch)
```

gives


```
x^2 + x - 2
<class 'sage.rings.polynomial.polynomial_element_generic.Polynomial_generic_dense_field'>
```

But:


```
y.coeffs()
```

returns


```
[[−4,1],[2,2],[3,3]]
```

and


```
ch.coeffs()
```

returns


```
[−2,1,1]
```


I'd prefer if these two functions returned the same format, preferably the Expression format, as having access to the index allows list comprehension tastiness.

Issue created by migration from https://trac.sagemath.org/ticket/17922





---

archive/issue_comments_236411.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2015-03-10T01:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17685#issuecomment-236411",
    "user": "JoalHeagney"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_236412.json:
```json
{
    "body": "Changing keywords from \"coeffs\" to \"coeffs, rings, polynomials, expression, symbolic\".",
    "created_at": "2015-03-10T01:19:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17685#issuecomment-236412",
    "user": "JoalHeagney"
}
```

Changing keywords from "coeffs" to "coeffs, rings, polynomials, expression, symbolic".



---

archive/issue_comments_236413.json:
```json
{
    "body": "Have list comprehension tastiness with `dict`:\n\n```\nsage: ch.dict().values()\n[-2, 1, 1]\n```\n\nIn #17518 we started being more consistent by deprecating `coeffs`.",
    "created_at": "2015-03-11T15:16:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17685#issuecomment-236413",
    "user": "rws"
}
```

Have list comprehension tastiness with `dict`:

```
sage: ch.dict().values()
[-2, 1, 1]
```

In #17518 we started being more consistent by deprecating `coeffs`.



---

archive/issue_comments_236414.json:
```json
{
    "body": "That works for polynomial rings, are there plans to add that to sage.symbolic.expression.Expressions?",
    "created_at": "2015-03-11T21:56:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17685#issuecomment-236414",
    "user": "JoalHeagney"
}
```

That works for polynomial rings, are there plans to add that to sage.symbolic.expression.Expressions?



---

archive/issue_comments_236415.json:
```json
{
    "body": "Clarified the ticket description.",
    "created_at": "2015-03-12T07:22:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17685#issuecomment-236415",
    "user": "rws"
}
```

Clarified the ticket description.



---

archive/issue_comments_236416.json:
```json
{
    "body": "Replying to [comment:3 JoalHeagney]:\n> That works for polynomial rings, are there plans to add that to sage.symbolic.expression.Expressions?\nThat would not be difficult (in comparison). If you expect it then to behave identically you will be disappointed however, because symbolics have no default generator (although `Expression.coefficients()` has the lexically first occuring var hard-wired when no varname is given).\n\n```\nsage: var('a,b,c')\n(a, b, c)\nsage: (a+2*a^2+3*b).list()\n[3*b, 1, 2]\nsage: (3*b+a+2*a^2).list()\n[3*b, 1, 2]\nsage: (3*b+c+2*c^2).list()\n[2*c^2 + c, 3]\n```\n\nso you could never have true polymorphism.",
    "created_at": "2015-03-12T07:37:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17685",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17685#issuecomment-236416",
    "user": "rws"
}
```

Replying to [comment:3 JoalHeagney]:
> That works for polynomial rings, are there plans to add that to sage.symbolic.expression.Expressions?
That would not be difficult (in comparison). If you expect it then to behave identically you will be disappointed however, because symbolics have no default generator (although `Expression.coefficients()` has the lexically first occuring var hard-wired when no varname is given).

```
sage: var('a,b,c')
(a, b, c)
sage: (a+2*a^2+3*b).list()
[3*b, 1, 2]
sage: (3*b+a+2*a^2).list()
[3*b, 1, 2]
sage: (3*b+c+2*c^2).list()
[2*c^2 + c, 3]
```

so you could never have true polymorphism.
