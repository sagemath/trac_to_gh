# Issue 11609: Conversion from Zmod element to padic element raises "not a power of the same prime" incorrectly, add conversion from residue_field

Issue created by migration from https://trac.sagemath.org/ticket/11781

Original creator: robharron

Original creation time: 2011-09-06 02:21:11

Assignee: roed

CC:  roed

Keywords: padics, conversion

Since mpz_cmp_ui returns 0 if equality holds, wrong 'if' condition was being used to check if Zmod element was in the right characteristic. Fix this in padic_ZZ_pX_CR_element.pyx and padic_ZZ_pX_CA_element.pyx.

Also, enhancement: allow conversion from element of the residue_field of self (this really only affects unramified extensions).


---

Comment by robharron created at 2011-09-06 02:25:15

Changing status from new to needs_review.


---

Comment by roed created at 2011-09-06 13:53:22

There seems to be a problem with the patch you uploaded: it just consists of the header.  How did you create it?


---

Comment by roed created at 2011-09-06 13:53:22

Changing status from needs_review to needs_work.


---

Comment by robharron created at 2011-09-06 14:15:28

I followed the instructions at http://www.sagemath.org/doc/developer/walk_through.html under the section "Creating your own patches with queues", but I'm new to this whole thing, so I may have messed something up. Is there something specific I should do because these are cython files? I ran an hg qnew, then I edited, then I ran an hg qrefresh, then I ran an hg export tip. The sage build knows that I have updated them, but it's true that when I run hg qdiff it returns nothing. I'll try recreating the patch using the hg_sage interface, but I'll have to reclone first.

Replying to [comment:2 roed]:

> There seems to be a problem with the patch you uploaded: it just consists of the header.  How did you create it?


---

Comment by roed created at 2011-09-06 14:16:37

Try running "hg export qtip" rather than "hg export tip."


---

Comment by roed created at 2011-09-06 14:17:45

Replying to [comment:4 roed]:
> Try running "hg export qtip" rather than "hg export tip."

You should be able to do this on your existing branch.  You can then look at the patch (either before or after you upload it)  in order to check to see if it includes the changes you want.

Thanks for working on this!


---

Comment by robharron created at 2011-09-06 14:38:37

qtip only produced the header as well.

Replying to [comment:5 roed]:

> Replying to [comment:4 roed]:
> > Try running "hg export qtip" rather than "hg export tip."
> You should be able to do this on your existing branch.  You can then look at the patch (either before or after you upload it)  in order to check to see if it includes the changes you want. Thanks for working on this!


---

Comment by robharron created at 2011-09-06 14:49:24

In padics, fix bug with Zmod element conversion, add conversion from residue_field


---

Attachment

Ok, I used the hg_sage functions in sage and the patch now seems to be what it should be. Patch file updated.


---

Comment by robharron created at 2011-09-06 14:51:00

Changing status from needs_work to needs_review.


---

Comment by roed created at 2011-11-09 01:56:05

Changing status from needs_review to positive_review.


---

Comment by roed created at 2011-11-09 01:56:05

I don't know why the testbot showed failing tests: all tests pass for me locally.

Looks good.  I'm hoping to redo conversion from the residue in a different way later, but in the mean time this approach works.


---

Attachment

Fix duplicate header


---

Comment by jdemeyer created at 2011-11-09 20:39:22

Replying to [comment:7 robharron]:
> Ok, I used the hg_sage functions in sage and the patch now seems to be what it should be. Patch file updated.

For some reason, your patch had a double header (I don't know what you did wrong).  I removed the first and re-uploaded the patch.


---

Comment by jdemeyer created at 2011-11-14 17:32:04

Resolution: fixed
