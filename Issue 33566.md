# Issue 33566: Fixes for the distributions sagemath-objects, sagemath-categories

Issue created by migration from https://trac.sagemath.org/ticket/33803

Original creator: mkoeppe

Original creation time: 2022-05-05 04:38:09

CC:  dimpase klee @tobiasdiez




---

Comment by mkoeppe created at 2022-05-05 04:43:31

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-05-05 04:43:31

New commits:


---

Comment by mkoeppe created at 2022-05-05 17:36:15

Changing status from needs_review to needs_work.


---

Comment by git created at 2022-05-05 17:38:34

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2022-05-05 17:43:58

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2022-05-05 20:47:50

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2022-05-05 20:47:50

lgtm (I gather that many test failures are OK)


---

Comment by mkoeppe created at 2022-05-05 20:48:55

Thanks! Yes, many test failures are expected.


---

Comment by dimpase created at 2022-05-06 16:21:50


```
$ make sagelib-clean saglib-uninstall
$ make sagelib
...
[sagelib-9.6.rc3] 11303 | static char __pyx_doc_4sage_7cpython_6string_bytes_to_str[] = "bytes_to_str(b, encoding=None, errors=None) -> str\nFile: sage/cpython/string.pxd (starting at line 28)\n\n    Convert ``bytes`` to ``str``.\n\n    This decodes the given ``bytes`` to a Python 3 unicode ``str`` using\n    the specified encoding.  It is a no-op on ``str`` input.\n\n    EXAMPLES::\n\n        sage: from sage.cpython.string import bytes_to_str\n        sage: s = bytes_to_str(b'\\xcf\\x80')\n        sage: s == u'\317\200'\n        True\n        sage: bytes_to_str([])\n        Traceback (most recent call last):\n        ...\n        TypeError: expected bytes, list found\n    ";
[sagelib-9.6.rc3]       |             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[sagelib-9.6.rc3] gcc: warning: ECL_CFLAGS: linker input file unused because linking not done
[sagelib-9.6.rc3] gcc: error: ECL_CFLAGS: linker input file not found: No such file or directory
[sagelib-9.6.rc3] error: Command "gcc -Wno-unused-result -Wsign-compare -DDYNAMIC_ANNOTATIONS_ENABLED=1 -DNDEBUG -O2 -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fstack-protector-strong -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -O2 -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fstack-protector-strong -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -O2 -fexceptions -g -grecord-gcc-switches -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fstack-protector-strong -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -D_GNU_SOURCE -fPIC -fwrapv -g -O2 -fPIC -Isage/libs -IECL_INCDIR -I./sage/cpython -Isage/cpython -I/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/cysignals -I/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/pkgs/sagemath-standard -I/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/lib64/python3.9/site-packages/numpy/core/include -I/usr/include/python3.9 -Ibuild/cythonized -I/home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/include -I/usr/include/python3.9 -c build/cythonized/sage/libs/ecl.c -o build/temp.linux-x86_64-3.9/build/cythonized/sage/libs/ecl.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 ECL_CFLAGS -std=c99" failed with exit status 1
[sagelib-9.6.rc3] 
[sagelib-9.6.rc3] real	0m7.319s
[sagelib-9.6.rc3] user	0m5.909s
[sagelib-9.6.rc3] sys	0m1.435s
make[4]: *** [Makefile:2946: sagelib-SAGE_VENV-no-deps] Error 1
make[3]: *** [Makefile:2946: /home/scratch/scratch2/dimpase/sage/sagetrac-mirror/local/var/lib/sage/venv-python3.9/var/lib/sage/installed/sagelib-9.6.rc3] Error 2
make[2]: *** [Makefile:2511: all-build] Error 2
```



---

Comment by dimpase created at 2022-05-06 16:21:50

Changing status from positive_review to needs_work.


---

Comment by git created at 2022-05-06 16:33:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2022-05-06 16:35:17

(wrong ticket)


---

Comment by mkoeppe created at 2022-05-06 16:36:20

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2022-05-06 16:54:10

OK, that's better.


---

Comment by dimpase created at 2022-05-06 16:54:10

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2022-05-06 16:57:43

Thanks for catching this!


---

Comment by vbraun created at 2022-05-22 16:31:53

Resolution: fixed
