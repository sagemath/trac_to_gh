# Issue 25700: Add documentation for integrable representation (#15806) to Lie methods thematic tutorial

Issue created by migration from Trac.

Original creator: bump

Original creation time: 2018-07-26 13:22:43

CC:  khlee aschilling nthiery tscrim bsalisbury1 kdilks

Keywords: sagedays@icerm

The IntegrableRepresentation code for working with integrable representations of affine Lie algebras is documented in the reference manual but not in the Lie Methods and Related Combinatorics thematic tutorial. This ticket is to add documentation to the thematic tutorial.


---

Comment by bump created at 2018-07-26 19:41:04

Changing type from PLEASE CHANGE to enhancement.


---

Comment by bump created at 2018-07-26 19:41:04

Set assignee to bump.


---

Comment by bump created at 2018-07-27 12:50:31

New commits:


---

Comment by git created at 2018-07-29 02:48:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-29 13:03:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-30 15:23:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-31 00:34:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-31 04:37:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-07-31 14:41:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by kdilks created at 2018-07-31 15:58:24

Once this is done, I can look at it for typos, and see how it looks from the perspective of somebody that's not an expert on this stuff. Would probably still need an expert to at least glance over it to make sure nothing is majorly wrong.


---

Comment by aschilling created at 2018-07-31 21:23:55

I would be glad to help review this ticket. Dan, were there sections you wanted me to write? Why have some titles changed from capitals to lower case letters?


---

Comment by tscrim created at 2018-07-31 22:31:45

I am also willing to help with either writing or reviewing too.


---

Comment by git created at 2018-08-01 00:27:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-01 02:04:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-01 15:46:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-01 17:01:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-02 13:07:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-03 15:12:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-03 20:11:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-08-03 22:30:09

I would not have `level` take an optional `weight` in the `IntegrableRepresentation`. Weights already know about their level:

```
sage: La = RootSystem(['A',3,1]).weight_lattice().fundamental_weights()
sage: (La[2]+La[0]).level()
2
sage: al = RootSystem(['A',3,1]).root_lattice().simple_roots()
sage: al[1].level()
0
sage: La = RootSystem(['A',3,1]).ambient_space().fundamental_weights()
sage: La[1].level()
1
```



---

Comment by git created at 2018-08-06 04:01:40

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-06 19:51:41

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-07 00:57:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-07 00:58:17

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-07 16:20:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-08-07 19:04:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bump created at 2018-08-07 19:06:27

Changing status from new to needs_review.


---

Comment by bump created at 2018-08-07 19:16:37

A link to the built documentation may be found at:

http://sporadic.stanford.edu/thematic_tutorials/lie.html

The new sections are called "Affine Root System Basics" and "Integrable Highest Weight Representations of Affine Lie algebras".


---

Comment by aschilling created at 2018-08-07 23:32:32

I have trouble checking out the branch. It says that the apply fails. Also the branch is currently red. 

Some minor comments in the meantime:

- 'lie Group Basics' should be 'Lie Group Basics' in the index
- 'infinity crystals' should be 'Infinity crystals' in the index


---

Comment by aschilling created at 2018-08-08 00:11:44

Since I cannot check out the branch, I cannot make these trivial changes. But here are some more typos:

- othrwise -> otherwise in the section "Untwisted Affine Kac-Moody Lie Algebras"
- I would use `\ldots` rather than `\cdots` in lists
- `alpha_1` should be `\alpha_1` in the section "Twisted Types"
- spce -> space in the section "Roots and Weights"
- The following sentence "(For the twisted cases, see [Kac]" seems unfinished or a bracket is missing.
- The link ~sage.combinat.root_system.extended_affine_weyl_group seems broken.


---

Comment by git created at 2018-08-08 00:14:31

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-08-08 00:15:22

I've merged in `8.4.beta0` (which just had a trivial conflict).


---

Comment by bump created at 2018-08-08 12:30:27

Replying to [comment:30 aschilling]:

What happens when you try to check out the branch? I can check it out after first pulling from the develop branch, then:

   git checkout origin/public/tutorial-25937 -b tutorial-25937


---

Comment by bump created at 2018-08-08 12:36:47

Work issues:

Anne and Travis have some comments that need to be addressed. I'll try to do those now.

Should the section on affine crystals have any references back to this section? Specifically I discuss the question of extended versus not extended root lattice.

We had discussed adding material about Kac and BKK crystals in a new section. That could be another ticket or it could be part of this one. 

I have trouble making the backward link to the reference manual on extended affine Weyl groups work at the very end of affine.rst. S similar link to the reference manual for IntegrableRepresentation class works fine.


---

Comment by git created at 2018-08-08 15:04:43

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2018-08-08 15:14:56

Replying to [comment:33 bump]:
> Replying to [comment:30 aschilling]:
> 
> What happens when you try to check out the branch? I can check it out after first pulling from the develop branch, then:
> 
>    git checkout origin/public/tutorial-25937 -b tutorial-25937

Travis rebased the branch. Now I can check it out. Before that did not work for me.


---

Comment by khlee created at 2018-08-08 16:39:24

Here are some corrections of typos and comments on "Integrable Highest..."

--------------------

second paragraph: weight decomposition --> weight space decomposition

--The support of an integrable highest weight representation

first and second paragraphs: Both \Lambda and \lambda are used. We need to choose one. For consistency, \Lambda is better. 

third paragraph: a increasing sequence --> an increasing sequence

---Modular Forms

first paragraph: weakly modular form --> weakly holomorphic modular form

I think that "weakly holomorphic" is more commonly used.

first paragraph: weakly modular means --> weakly holomorphic means

third paragraph: weakly modular form --> weakly holomorphic modular form

third paragraph:  the number of positive roots of $\mathfrak g^\circ$ -->  the number of positive roots plus half the rank of $\mathfrak g^\circ$

---Sage methods for integrable representations

first paragraph: highest weight Lie algebras --> highest weight representations

second paragraph: two dominant multiple weights --> two dominant maximal weights

second paragraph: Since $s_0$ fixes $2 \Lambda_1 -\delta$, it is not a good example. The following Sage code does not show the action of the Weyl group element. It may be a good idea to remove the part "We apply...the corresponding dominant maximal weight" as this point will be illustrated in the next paragraph.

fourth paragraph: Again, the choice of $s_0$ is not good. Any other choice will work.

sixth paragraph: the parentheses in the denominator of the first product is broken.

sixth paragraph: the factor $q^{-1/8}$ --> the factor $q^{1/8}$

seventh(?) paragraph: The infinite sums in the parentheses for the string functions need to begin $1$ instead of $q$.

seventh(?) paragraph: both weakly modular forms --> both weakly holomorphic modular forms

seventh(?) paragraph: two is als a weakly modular form--> two is also a weakly holomorphic modular form

A period is missing after [KimLeeOh2017].


---

Comment by aschilling created at 2018-08-08 19:03:40

Replying to [comment:34 bump]:
> Work issues:
> 
> Anne and Travis have some comments that need to be addressed. I'll try to do those now.
> 
> Should the section on affine crystals have any references back to this section? 

Yes, that would be good!

> We had discussed adding material about Kac and BKK crystals in a new section. That could be another ticket or it could be part of this one. 

Let us make that another ticket unless you want to write these sections now.


---

Comment by git created at 2018-08-08 20:16:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-08-08 23:04:00

Replying to [comment:38 aschilling]:
> Replying to [comment:34 bump]:
> > We had discussed adding material about Kac and BKK crystals in a new section. That could be another ticket or it could be part of this one. 
> 
> Let us make that another ticket unless you want to write these sections now.

I think it would be better to have that as a second ticket anyways (better granularity of purpose on each ticket).


---

Comment by git created at 2018-08-11 00:45:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2018-08-11 00:54:10

Thank you again Dan for your work on this and improving Sage's documentation/tutorials as a learning resource.

I have made a bunch of small changes in the tutorials. Most of them are small formatting changes and typo fixes, but for a few of my changes, I added a little more detail or did some rewording.

I am happy with the current state.


---

Comment by bump created at 2018-08-11 04:14:43

Can anyone figure out how to make the link at the end of the section on Extended Affine Weyl Groups work?

There is a similar link to the reference manual for the IntegrableRepresentation class and that works.

The broken link is the very last thing here: http://sporadic.stanford.edu/thematic_tutorials/lie/affine.html


---

Comment by tscrim created at 2018-08-11 04:31:09

Did you try `:mod:`~sage.combinat....``?

I can build the docs, but I can't look at the compiled version until I get to my desktop on Monday.


---

Comment by tscrim created at 2018-08-11 04:37:19

I just realized that I missed something with formatting in `integrable.rst` (line 269):

```diff
 .. MATH::
 
     \begin{aligned}
-    c^{2\Lambda_0}_{2\Lambda_0} & = q^{-1/16}(1+q+3q^2+5q^3+10q^4+16q^5+\cdots),
+    c^{2\Lambda_0}_{2\Lambda_0} & = q^{-1/16}(1+q+3q^2+5q^3+10q^4+16q^5+\cdots), \\
     c^{2\Lambda_0}_{2\Lambda_1-\delta} & = q^{7/16}(1+2q+4q^2+7q^3+13q^4+21q^5+\cdots).
     \end{aligned}
```

I can push this change if you want.


---

Comment by tscrim created at 2018-08-11 04:54:07

In addition to A001700, it may also be worthwhile mentioning the doubled version: A128015. Thoughts?


---

Comment by git created at 2018-08-11 12:29:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bump created at 2018-08-11 12:30:18

> Did you try :mod:`~sage.combinat....`?

That works. Thanks!

I implemented the last 3 comments from Travis and pushed.
----
New commits:


---

Comment by tscrim created at 2018-08-11 12:34:08

No problem.

Anyone else have any comments? (Kevin?) I am ready to set this to a positive review.


---

Comment by khlee created at 2018-08-11 13:54:48

I have read the document one more time and found a few typos. After correcting them, I would agree to set this to a positive review. Thanks!!

-------


--The support of an integrable highest weight representation


first paragraph: $L(\lambda)$ --> $L(\Lambda)$ (There are two occurrences of this.)


---Sage methods for integrable representations

first paragraph: A period is missing at the end of the last sentence.

second paragraph: The sentence "Then we compute the string function at this weight, which we see agrees with the string function for the corresponding dominant maximal weight:" seems out of place. Could we delete it?

A period is missing at the end of the displayed math in the sentence begin with "Reading what the OEIS..." 

The formulas of two string functions are not adequately aligned.

--------


---

Comment by git created at 2018-08-11 14:53:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bump created at 2018-08-11 14:56:34

I made Kyu-Hwan's corrections except this one:

> The formulas of two string functions are not adequately aligned.

I don't see the alignment problem.
----
New commits:


---

Comment by aschilling created at 2018-08-11 15:04:40

In the introduction to "Integrable Highest Weight Representations of Affine Lie algebras", there is still a missing link: 

weyl_character_ring


---

Comment by aschilling created at 2018-08-11 15:14:13

The link to the last OESIS 'OEIS sequence 128015' seems broken. Other than these last two link problems, I am also happy to set a positive review.


---

Comment by kdilks created at 2018-08-11 16:11:28

`@`Travis it seems like enough other people have already gotten a chance to read through it.


---

Comment by git created at 2018-08-11 17:29:55

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by khlee created at 2018-08-11 20:00:34

I am not sure what happened to the alignment problem. In any case, it disappeared, and I am happy with the current version.


---

Comment by git created at 2018-08-11 20:21:01

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by aschilling created at 2018-08-11 20:21:36

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-08-16 23:12:54

Should be marked as optional internet:

```
File "src/doc/en/thematic_tutorials/lie/integrable.rst", line 224, in doc.en.thematic_tutorials.lie.integrable
Failed example:
    [oeis(x) for x in V.strings().values()]
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 614, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1025, in compile_and_execute
        exec(compiled, globs)
      File "<doctest doc.en.thematic_tutorials.lie.integrable[12]>", line 1, in <module>
        [oeis(x) for x in V.strings().values()]
      File "sage/misc/lazy_import.pyx", line 354, in sage.misc.lazy_import.LazyImport.__call__ (build/cythonized/sage/misc/lazy_import.c:3759)
        return self.get_object()(*args, **kwds)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/databases/oeis.py", line 382, in __call__
        return self.find_by_subsequence(query, max_results, first_result)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/databases/oeis.py", line 510, in find_by_subsequence
        return self.find_by_description(subsequence, max_results, first_result)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/databases/oeis.py", line 475, in find_by_description
        sequence_list = _fetch(url).split('\n\n')[2:-1]
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/databases/oeis.py", line 195, in _fetch
        raise IOError("%s\nError fetching %s." % (msg, url))
    IOError: <urlopen error [Errno 60] Operation timed out>
    Error fetching http://oeis.org/search?q=1%2C+1%2C+3%2C+5%2C+10%2C+16%2C+28%2C+43%2C+70%2C+105%2C+161%2C+236&start=0&fmt=text&n=3.
**********************************************************************
1 item had failures:
   1 of  32 in doc.en.thematic_tutorials.lie.integrable
    [31 tests, 1 failure, 131.65 s]
----------------------------------------------------------------------
sage -t --long src/doc/en/thematic_tutorials/lie/integrable.rst  # 1 doctest failed
---------------------------------------------------------------------
```



---

Comment by vbraun created at 2018-08-16 23:12:54

Changing status from positive_review to needs_work.


---

Comment by git created at 2018-08-24 14:50:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by bump created at 2018-08-24 14:53:55

Changing status from needs_work to needs_review.


---

Comment by bump created at 2018-08-24 14:53:55

This had a positive review. Per comment:60 I changed the oeis test to optional -- internet. I was unsure whether it is appropriate for me to put the positive review back so I changed it to needs review.


---

Comment by aschilling created at 2018-08-24 18:21:59

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-08-26 09:37:50

Resolution: fixed
