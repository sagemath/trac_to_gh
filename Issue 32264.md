# Issue 32264: Meta-ticket: Clear out __init__.py files in preparation for namespace packages

archive/issues_032264.json:
```json
{
    "body": "CC:  @tscrim @pjbruin @kiwifb @kliem @dcoudert\n\n(Part of the modularization effort, #29705)\n\nWhenever there are two distribution packages that provide modules with a common prefix of Python packages, that prefix needs to be a native namespace package, i.e., there cannot be an `__init__.py` file. \n\nFor example, \n- `sagemath-tdlib` will provide `sage.graphs.graph_decompositions.tdlib`,\n- `sagemath-rw` will provide `sage.graphs.graph_decompositions.rankwidth`,\n- `sagemath-graphs` will provide all of the rest of `sage.graphs.graph_decompositions` (and most of `sage.graphs`).\nThen, none of \n- `sage`, \n- `sage.graphs`, \n- `sage.graphs.graph_decomposition` \ncan be an ordinary Python package (with `__init__.py` file), but rather each of them has to be a native namespace package (no `__init__.py` file).\n\nIn this meta-ticket, we make sure that all such `__init__.py` files are empty. (The actual removal of empty `__init__.py` files will be done in #28925.)\n\nNot all `__init__.py` files need to be empty. For example, \n- all of `sage.cpython` and `sage.structure` is intended to be in one distribution package, `sagemath-objects`. Hence `sage.cpython` and `sage.structure` keep their nonempty `__init__.py` files, and we may even add a comment that documents that they are intended to stay ordinary packages. (#31420 clears `sage.__init__` and adds such a comment to `sage.cpython.__init__`\n- `sage.libs.giac` is intended to be in one distribution package, `sagemath-giac`. Hence `sage.libs.giac` will keep its nonempty `__init__.py` file (but `sage.libs` will not).\n\n\n\n```\n$ find src/sage -name '__init__.py' | xargs wc -l | sort\n...\n       3 src/sage/dynamics/__init__.py\n       3 src/sage/dynamics/cellular_automata/__init__.py\n       3 src/sage/matroids/__init__.py\n       3 src/sage/modular/arithgroup/__init__.py\n       3 src/sage/modular/quatalg/__init__.py\n       4 src/sage/repl/rich_output/__init__.py\n       4 src/sage/sat/solvers/__init__.py\n       5 src/sage/graphs/graph_decompositions/__init__.py\n       7 src/sage/combinat/integer_lists/__init__.py\n       9 src/sage/combinat/matrices/__init__.py\n      10 src/sage/combinat/cluster_algebra_quiver/__init__.py\n      10 src/sage/combinat/ncsym/__init__.py\n      10 src/sage/modules/with_basis/__init__.py\n      11 src/sage/combinat/ncsf_qsym/__init__.py\n      11 src/sage/combinat/path_tableaux/__init__.py\n      13 src/sage/combinat/chas/__init__.py\n      29 src/sage/categories/__init__.py\n      29 src/sage/combinat/crystals/__init__.py\n      31 src/sage/combinat/sf/__init__.py\n      35 src/sage/combinat/posets/__init__.py\n      36 src/sage/combinat/rigged_configurations/__init__.py\n      38 src/sage/combinat/designs/__init__.py\n      42 src/sage/combinat/words/__init__.py\n      49 src/sage/combinat/__init__.py\n      51 src/sage/combinat/species/__init__.py\n     107 src/sage/__init__.py                                     #31420/32479/#32489\n     114 src/sage/rings/polynomial/pbori/__init__.py\n     127 src/sage/combinat/root_system/__init__.py\n     219 src/sage/libs/pari/__init__.py\n     359 src/sage/libs/giac/__init__.py\n     826 src/sage/features/__init__.py\n```\n\n\nTickets:\n- #31420/#32479/#32489 `sage`\n\nIssue created by migration from https://trac.sagemath.org/ticket/32501\n\n",
    "created_at": "2021-09-10T19:33:21Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Meta-ticket: Clear out __init__.py files in preparation for namespace packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32264",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @tscrim @pjbruin @kiwifb @kliem @dcoudert

(Part of the modularization effort, #29705)

Whenever there are two distribution packages that provide modules with a common prefix of Python packages, that prefix needs to be a native namespace package, i.e., there cannot be an `__init__.py` file. 

For example, 
- `sagemath-tdlib` will provide `sage.graphs.graph_decompositions.tdlib`,
- `sagemath-rw` will provide `sage.graphs.graph_decompositions.rankwidth`,
- `sagemath-graphs` will provide all of the rest of `sage.graphs.graph_decompositions` (and most of `sage.graphs`).
Then, none of 
- `sage`, 
- `sage.graphs`, 
- `sage.graphs.graph_decomposition` 
can be an ordinary Python package (with `__init__.py` file), but rather each of them has to be a native namespace package (no `__init__.py` file).

In this meta-ticket, we make sure that all such `__init__.py` files are empty. (The actual removal of empty `__init__.py` files will be done in #28925.)

Not all `__init__.py` files need to be empty. For example, 
- all of `sage.cpython` and `sage.structure` is intended to be in one distribution package, `sagemath-objects`. Hence `sage.cpython` and `sage.structure` keep their nonempty `__init__.py` files, and we may even add a comment that documents that they are intended to stay ordinary packages. (#31420 clears `sage.__init__` and adds such a comment to `sage.cpython.__init__`
- `sage.libs.giac` is intended to be in one distribution package, `sagemath-giac`. Hence `sage.libs.giac` will keep its nonempty `__init__.py` file (but `sage.libs` will not).



```
$ find src/sage -name '__init__.py' | xargs wc -l | sort
...
       3 src/sage/dynamics/__init__.py
       3 src/sage/dynamics/cellular_automata/__init__.py
       3 src/sage/matroids/__init__.py
       3 src/sage/modular/arithgroup/__init__.py
       3 src/sage/modular/quatalg/__init__.py
       4 src/sage/repl/rich_output/__init__.py
       4 src/sage/sat/solvers/__init__.py
       5 src/sage/graphs/graph_decompositions/__init__.py
       7 src/sage/combinat/integer_lists/__init__.py
       9 src/sage/combinat/matrices/__init__.py
      10 src/sage/combinat/cluster_algebra_quiver/__init__.py
      10 src/sage/combinat/ncsym/__init__.py
      10 src/sage/modules/with_basis/__init__.py
      11 src/sage/combinat/ncsf_qsym/__init__.py
      11 src/sage/combinat/path_tableaux/__init__.py
      13 src/sage/combinat/chas/__init__.py
      29 src/sage/categories/__init__.py
      29 src/sage/combinat/crystals/__init__.py
      31 src/sage/combinat/sf/__init__.py
      35 src/sage/combinat/posets/__init__.py
      36 src/sage/combinat/rigged_configurations/__init__.py
      38 src/sage/combinat/designs/__init__.py
      42 src/sage/combinat/words/__init__.py
      49 src/sage/combinat/__init__.py
      51 src/sage/combinat/species/__init__.py
     107 src/sage/__init__.py                                     #31420/32479/#32489
     114 src/sage/rings/polynomial/pbori/__init__.py
     127 src/sage/combinat/root_system/__init__.py
     219 src/sage/libs/pari/__init__.py
     359 src/sage/libs/giac/__init__.py
     826 src/sage/features/__init__.py
```


Tickets:
- #31420/#32479/#32489 `sage`

Issue created by migration from https://trac.sagemath.org/ticket/32501





---

archive/issue_comments_460096.json:
```json
{
    "body": "A serious case:\n\n```\n$ cat src/sage/rings/polynomial/__init__.py\n# Resolve a cyclic import\nimport sage.rings.convert.mpfi\n```\n\nWe need to get rid of this one -- `sage.rings.polynomial` must become a namespace package",
    "created_at": "2021-09-13T06:19:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32264#issuecomment-460096",
    "user": "https://github.com/mkoeppe"
}
```

A serious case:

```
$ cat src/sage/rings/polynomial/__init__.py
# Resolve a cyclic import
import sage.rings.convert.mpfi
```

We need to get rid of this one -- `sage.rings.polynomial` must become a namespace package



---

archive/issue_comments_460097.json:
```json
{
    "body": "Replying to [comment:6 mkoeppe]:\n> A serious case:\n> {{{\n> $ cat src/sage/rings/polynomial/__init__.py\n> # Resolve a cyclic import\n> import sage.rings.convert.mpfi\n> }}}\n> We need to get rid of this one -- `sage.rings.polynomial` must become a namespace package\n\nThis one was added it #25848 (\"Some preparations for binding=True\") for a stalled effort in #22747/#26254",
    "created_at": "2021-09-13T19:14:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32264#issuecomment-460097",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:6 mkoeppe]:
> A serious case:
> {{{
> $ cat src/sage/rings/polynomial/__init__.py
> # Resolve a cyclic import
> import sage.rings.convert.mpfi
> }}}
> We need to get rid of this one -- `sage.rings.polynomial` must become a namespace package

This one was added it #25848 ("Some preparations for binding=True") for a stalled effort in #22747/#26254



---

archive/issue_comments_460098.json:
```json
{
    "body": "We can close this meta-ticket because it only tracks one open ticket.",
    "created_at": "2021-10-20T17:41:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32264#issuecomment-460098",
    "user": "https://github.com/mkoeppe"
}
```

We can close this meta-ticket because it only tracks one open ticket.



---

archive/issue_comments_460099.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-10-20T17:41:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32264#issuecomment-460099",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_460100.json:
```json
{
    "body": "I think it would be good to keep it open until the final ticket is done.",
    "created_at": "2021-10-20T23:53:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32264#issuecomment-460100",
    "user": "https://github.com/tscrim"
}
```

I think it would be good to keep it open until the final ticket is done.



---

archive/issue_comments_460101.json:
```json
{
    "body": "Everything in the \"Tickets:\" list has been closed: fixed.",
    "created_at": "2021-12-01T01:33:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32264#issuecomment-460101",
    "user": "https://github.com/orlitzky"
}
```

Everything in the "Tickets:" list has been closed: fixed.



---

archive/issue_comments_460102.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-12-01T01:33:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32264#issuecomment-460102",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_029282.json:
```json
{
    "actor": "@mkoeppe",
    "created_at": "2021-12-01T02:46:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/32264",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/32264#event-29282"
}
```



---

archive/issue_comments_460103.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2021-12-01T02:46:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32264#issuecomment-460103",
    "user": "https://github.com/mkoeppe"
}
```

Resolution: invalid
