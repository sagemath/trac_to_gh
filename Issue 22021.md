# Issue 22021: py3 do not call cmp() in code of real_mpfi

Issue created by migration from https://trac.sagemath.org/ticket/22258

Original creator: chapoton

Original creation time: 2017-01-25 16:20:02

CC:  tscrim jdemeyer aapitzsch

as a step to python3

BEWARE: this file will need later a much deeper treatment later, because the current behaviour is not possible in python3 (cmp is not the same order as rich comparison)


---

Comment by chapoton created at 2017-01-25 16:21:37

New commits:


---

Comment by chapoton created at 2017-01-25 20:19:05

waiting for the bots


---

Comment by chapoton created at 2017-01-25 20:19:05

Changing status from new to needs_review.


---

Comment by chapoton created at 2017-01-27 08:08:09

green bot, please review


---

Comment by tscrim created at 2017-01-27 14:47:15

I'm slightly worried about the `richcmp(left.__prec, right.__prec, op)` doing more precise comparisons than before and would cause a subtle behavior change. Nor am I not completely convinced the doctests cover all the behavior. I won't have time today to add such tests and verify, but I will try to get to this tomorrow (unless someone who is more familiar with interval comparisons verifies this is okay).


---

Comment by jdemeyer created at 2017-01-27 14:59:53

Replying to [comment:5 tscrim]:
> I'm slightly worried about the `richcmp(left.__prec, right.__prec, op)` doing more precise comparisons than before and would cause a subtle behavior change.

In this case, the behaviour looks meaningful so it's a change in the good sense.


---

Comment by chapoton created at 2017-01-30 16:50:53

ping ?


---

Comment by tscrim created at 2017-01-30 17:01:05

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-01-30 17:01:05

Okay, then good to go.


---

Comment by vbraun created at 2017-02-02 22:09:15

Resolution: fixed
