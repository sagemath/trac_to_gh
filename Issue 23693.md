# Issue 23693: Doctest failures in Judson's abstract algebra book

archive/issues_023693.json:
```json
{
    "body": "CC:  @rbeezer @videlec\n\nSee the logs of [arando](https://patchbot.sagemath.org/log/23925/Ubuntu/14.04/i686/3.13.0-95-generic/arando/2017-09-26%2009:40:16?short)\n\n```\nsage -t --long src/sage/tests/books/judson-abstract-algebra/actions-sage.py\n**********************************************************************\nFile \"src/sage/tests/books/judson-abstract-algebra/actions-sage.py\", line 115, in sage.tests.books.judson-abstract-algebra.actions-sage\nFailed example:\n    A.orbits()\nExpected:\n    [['000', '001', '010', '100', '011', '101', '110', '111']]\nGot:\n    [['010', '011', '001', '100', '101', '000', '110', '111']]\n**********************************************************************\nFile \"src/sage/tests/books/judson-abstract-algebra/actions-sage.py\", line 126, in sage.tests.books.judson-abstract-algebra.actions-sage\nFailed example:\n    S.list()\nExpected:\n    [(),\n     ('001','100','010')('011','101','110'),\n     ('010','100')('011','101'),\n     ('001','010','100')('011','110','101'),\n     ('001','100')('011','110'),\n     ('001','010')('101','110')]\nGot:\n    [(),\n     ('010','100')('011','101'),\n     ('010','100','001')('011','110','101'),\n     ('011','110')('001','100'),\n     ('010','001','100')('011','101','110'),\n     ('010','001')('110','101')]\n**********************************************************************\n1 item had failures:\n   2 of  35 in sage.tests.books.judson-abstract-algebra.actions-sage\n    [34 tests, 2 failures, 0.52 s]\n------------------------------------\n```\nSince this is a machine with a lot of optional packages it is likely that it is caused by that. The results are mathematically correct, it is just that the order of the output changed.\n\nIssue created by migration from https://trac.sagemath.org/ticket/23930\n\n",
    "created_at": "2017-09-26T10:03:56Z",
    "labels": [
        "component: doctest framework",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "Doctest failures in Judson's abstract algebra book",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23693",
    "user": "https://github.com/koffie"
}
```
CC:  @rbeezer @videlec

See the logs of [arando](https://patchbot.sagemath.org/log/23925/Ubuntu/14.04/i686/3.13.0-95-generic/arando/2017-09-26%2009:40:16?short)

```
sage -t --long src/sage/tests/books/judson-abstract-algebra/actions-sage.py
**********************************************************************
File "src/sage/tests/books/judson-abstract-algebra/actions-sage.py", line 115, in sage.tests.books.judson-abstract-algebra.actions-sage
Failed example:
    A.orbits()
Expected:
    [['000', '001', '010', '100', '011', '101', '110', '111']]
Got:
    [['010', '011', '001', '100', '101', '000', '110', '111']]
**********************************************************************
File "src/sage/tests/books/judson-abstract-algebra/actions-sage.py", line 126, in sage.tests.books.judson-abstract-algebra.actions-sage
Failed example:
    S.list()
Expected:
    [(),
     ('001','100','010')('011','101','110'),
     ('010','100')('011','101'),
     ('001','010','100')('011','110','101'),
     ('001','100')('011','110'),
     ('001','010')('101','110')]
Got:
    [(),
     ('010','100')('011','101'),
     ('010','100','001')('011','110','101'),
     ('011','110')('001','100'),
     ('010','001','100')('011','101','110'),
     ('010','001')('110','101')]
**********************************************************************
1 item had failures:
   2 of  35 in sage.tests.books.judson-abstract-algebra.actions-sage
    [34 tests, 2 failures, 0.52 s]
------------------------------------
```
Since this is a machine with a lot of optional packages it is likely that it is caused by that. The results are mathematically correct, it is just that the order of the output changed.

Issue created by migration from https://trac.sagemath.org/ticket/23930





---

archive/issue_comments_331556.json:
```json
{
    "body": "This is now #23930",
    "created_at": "2017-09-26T10:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23693",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23693#issuecomment-331556",
    "user": "https://github.com/koffie"
}
```

This is now #23930



---

archive/issue_comments_331557.json:
```json
{
    "body": "I'm reluctant to wrap output in `sorted()` or similar in the textbook, it won't help with understanding.  But I think I can rework the testing, perhaps including a hidden test of correctness that a reader won't see.\n\nMaarten - might it be best to mark these `random` for now, and I'll get proper replacements into the book on the next pass?  The diffs in the Sage source will help me remember.  This is the first test of how to handle when these fail, so let me know if you can think of a better approach.\n\nI can review a change, but in less than a week I will soon be offline for an extended period.",
    "created_at": "2017-09-26T19:22:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23693",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23693#issuecomment-331557",
    "user": "https://github.com/rbeezer"
}
```

I'm reluctant to wrap output in `sorted()` or similar in the textbook, it won't help with understanding.  But I think I can rework the testing, perhaps including a hidden test of correctness that a reader won't see.

Maarten - might it be best to mark these `random` for now, and I'll get proper replacements into the book on the next pass?  The diffs in the Sage source will help me remember.  This is the first test of how to handle when these fail, so let me know if you can think of a better approach.

I can review a change, but in less than a week I will soon be offline for an extended period.



---

archive/issue_comments_331558.json:
```json
{
    "body": "Hi Rob,\n\nMarking as random till the next version of the book works for me. How are the files generated from the book?\n\n---\nNew commits:",
    "created_at": "2017-09-26T20:45:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23693",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23693#issuecomment-331558",
    "user": "https://github.com/koffie"
}
```

Hi Rob,

Marking as random till the next version of the book works for me. How are the files generated from the book?

---
New commits:



---

archive/issue_comments_331559.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-09-26T20:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23693",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23693#issuecomment-331559",
    "user": "https://github.com/koffie"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_331560.json:
```json
{
    "body": "Note that for the `A.orbits()` test sorting will work. The `S.list()` test is more complicated since there the same cycles are also notated in different ways.",
    "created_at": "2017-09-26T20:50:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23693",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23693#issuecomment-331560",
    "user": "https://github.com/koffie"
}
```

Note that for the `A.orbits()` test sorting will work. The `S.list()` test is more complicated since there the same cycles are also notated in different ways.



---

archive/issue_comments_331561.json:
```json
{
    "body": "The fix is good and non intrusive. It is now up to the book authors to find a more appropriate correction (if any is needed).",
    "created_at": "2017-09-29T06:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23693",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23693#issuecomment-331561",
    "user": "https://github.com/videlec"
}
```

The fix is good and non intrusive. It is now up to the book authors to find a more appropriate correction (if any is needed).



---

archive/issue_comments_331562.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-29T06:44:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23693",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23693#issuecomment-331562",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_331563.json:
```json
{
    "body": "Thanks, Vincent.  I ran tests overnight, so you just beat me to it on this one!  I know it didn't really need a full run of the test suite, but I needed to practice my nascent git skills with the full Sage workflow. ;-)\n\nI'll likely clean up all the tests in the book again right around the end of the year, and get this cleaned up properly then.\n\nThanks, Maarten, also for shepherding this one through.",
    "created_at": "2017-09-29T17:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23693",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23693#issuecomment-331563",
    "user": "https://github.com/rbeezer"
}
```

Thanks, Vincent.  I ran tests overnight, so you just beat me to it on this one!  I know it didn't really need a full run of the test suite, but I needed to practice my nascent git skills with the full Sage workflow. ;-)

I'll likely clean up all the tests in the book again right around the end of the year, and get this cleaned up properly then.

Thanks, Maarten, also for shepherding this one through.



---

archive/issue_comments_331564.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-10-01T00:19:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23693",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23693#issuecomment-331564",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_060897.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-01T00:19:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/23693",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/23693#event-60897"
}
```
