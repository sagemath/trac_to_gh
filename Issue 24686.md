# Issue 24686: sparse6 encoding and decoding of graphs with a single vertex

Issue created by migration from https://trac.sagemath.org/ticket/24923

Original creator: jaanos

Original creation time: 2018-03-07 11:26:21

CC:  dimpase




---

Comment by jaanos created at 2018-03-07 11:55:26

New commits:


---

Comment by jaanos created at 2018-03-07 11:55:26

Changing type from PLEASE CHANGE to defect.


---

Comment by jaanos created at 2018-03-07 11:55:26

Changing status from new to needs_review.


---

Comment by jaanos created at 2018-03-07 11:55:26

Changing component from PLEASE CHANGE to graph theory.


---

Comment by jaanos created at 2018-03-07 11:55:26

Changing keywords from "" to "sparse6 graphs loops".


---

Comment by dcoudert created at 2018-03-09 07:56:29

The patch is working well, and I tried also with multiple edges

```
sage: G = Graph([(0, 0), (0,0)], loops=True, multiedges=True)
sage: G.sparse6_string()
':@N'
sage: H = Graph(_)
sage: H
Looped multi-graph on 1 vertex
sage: H.size()
2
```


Can you add a doctest in the sparse6 encode / decoding methods, like:

```
Graphs with 1 vertex are correctly handled (:trac:`24923`)::

    sage: Graph([(0, 0)], loops=True).sparse6_string()
    ':@^'
    sage: G = Graph(_)
    sage: G.order(), G.size()
    (1, 1)
    sage: Graph([(0, 0), (0, 0)], loops=True, multiedges=True).sparse6_string()
    ':@^'
    sage: H = Graph(_)
    sage: H.order(), H.size()
    (1, 2)
```



---

Comment by git created at 2018-03-09 16:28:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jaanos created at 2018-03-09 16:33:43

OK, I've added the doctest (I've fixed an error in the output). I have also changed the loops for encoding/decoding the bytes: instead of multiplying the counter at each step, an appropriate increment is used.


---

Comment by dcoudert created at 2018-03-09 17:20:13

Thanks.


---

Comment by dcoudert created at 2018-03-09 17:20:13

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-03-11 00:19:10

Merge conflict


---

Comment by vbraun created at 2018-03-11 00:19:10

Changing status from positive_review to needs_work.


---

Comment by git created at 2018-03-11 02:37:51

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jaanos created at 2018-03-11 02:38:41

Changing status from needs_work to needs_review.


---

Comment by jaanos created at 2018-03-11 02:38:41

OK, should be fine now.


---

Comment by dcoudert created at 2018-03-13 17:01:25

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2018-03-13 17:01:25

OK with beta8.


---

Comment by vbraun created at 2018-03-22 19:23:38

Resolution: fixed
