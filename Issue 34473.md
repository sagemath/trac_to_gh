# Issue 34473: Keep objects entries in TOC in short form

archive/issues_034473.json:
```json
{
    "body": "CC:  fbissey chapoton tscrim mkoeppe dimpase\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/34710\n\n",
    "created_at": "2022-10-31T13:20:48Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Keep objects entries in TOC in short form",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/34473",
    "user": "klee"
}
```
CC:  fbissey chapoton tscrim mkoeppe dimpase



Issue created by migration from https://trac.sagemath.org/ticket/34710





---

archive/issue_comments_488190.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-10-31T14:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488190",
    "user": "klee"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_488191.json:
```json
{
    "body": "Changing priority from major to minor.",
    "created_at": "2022-10-31T14:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488191",
    "user": "klee"
}
```

Changing priority from major to minor.



---

archive/issue_comments_488192.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to documentation.",
    "created_at": "2022-10-31T14:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488192",
    "user": "klee"
}
```

Changing component from PLEASE CHANGE to documentation.



---

archive/issue_comments_488193.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2022-10-31T14:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488193",
    "user": "klee"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_488194.json:
```json
{
    "body": "New commits:",
    "created_at": "2022-10-31T14:13:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488194",
    "user": "klee"
}
```

New commits:



---

archive/issue_comments_488195.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-11-01T01:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488195",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_488196.json:
```json
{
    "body": "The recent upgrade of Sphinx to version 5.2.3 introduced unexpected changes in our documentation by the new \"object entries in toc\" feature of the new Sphinx.\n\nSee the main index page in the middle:\n\nhttps://8f8af65e54d3a9962cfab40f15dc23f4e955b43f--sagemath-tobias.netlify.app/reference/curves/index.html\n\nSee the \"CONTENTS\" column on the right:\n\nhttps://8f8af65e54d3a9962cfab40f15dc23f4e955b43f--sagemath-tobias.netlify.app/reference/curves/sage/schemes/riemann_surfaces/riemann_surface.html\n\nTo \"fix\" the unexpected changes, I prepared two tickets #34706 and #34710 (this ticket)\n\n#34706 reverts the changes and makes the doc look as it did before the Sphinx upgrade.\n\n#34710 keeps the object entries in toc, but remove them from the main index pages.\n\nNow we need to make a choice:\n\n(1) Accept the default of the new Sphinx (discard both of #34706 and #34710)\n\n(2) Remove object entries from the doc (take #34706 and discard #34710)\n\nhttps://e14c85760435dc1721bf626d494e92ac9bfbd46b--sagemath-tobias.netlify.app/reference/curves/index.html\n\nhttps://e14c85760435dc1721bf626d494e92ac9bfbd46b--sagemath-tobias.netlify.app/reference/curves/sage/schemes/riemann_surfaces/riemann_surface.html\n\n\n(3) Keep object entries but remove them from main index pages (take #34710 and discard #34706)\n\nhttps://a1b70f3da76e4e2324b6b1c7cf3765bbc4f7d737--sagemath-tobias.netlify.app/reference/curves/index.html\n\nhttps://a1b70f3da76e4e2324b6b1c7cf3765bbc4f7d737--sagemath-tobias.netlify.app/reference/curves/sage/schemes/riemann_surfaces/riemann_surface.html\n\n(4) Still other possibility. Then please open a new ticket for your favorite style.\n\nI advocate (3), but others may have different favors. So I invite a few for opinions. If all agree with me, we will go for (3). Otherwise, I will open a vote (again...) in sage-devel.",
    "created_at": "2022-11-01T04:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488196",
    "user": "klee"
}
```

The recent upgrade of Sphinx to version 5.2.3 introduced unexpected changes in our documentation by the new "object entries in toc" feature of the new Sphinx.

See the main index page in the middle:

https://8f8af65e54d3a9962cfab40f15dc23f4e955b43f--sagemath-tobias.netlify.app/reference/curves/index.html

See the "CONTENTS" column on the right:

https://8f8af65e54d3a9962cfab40f15dc23f4e955b43f--sagemath-tobias.netlify.app/reference/curves/sage/schemes/riemann_surfaces/riemann_surface.html

To "fix" the unexpected changes, I prepared two tickets #34706 and #34710 (this ticket)

#34706 reverts the changes and makes the doc look as it did before the Sphinx upgrade.

#34710 keeps the object entries in toc, but remove them from the main index pages.

Now we need to make a choice:

(1) Accept the default of the new Sphinx (discard both of #34706 and #34710)

(2) Remove object entries from the doc (take #34706 and discard #34710)

https://e14c85760435dc1721bf626d494e92ac9bfbd46b--sagemath-tobias.netlify.app/reference/curves/index.html

https://e14c85760435dc1721bf626d494e92ac9bfbd46b--sagemath-tobias.netlify.app/reference/curves/sage/schemes/riemann_surfaces/riemann_surface.html


(3) Keep object entries but remove them from main index pages (take #34710 and discard #34706)

https://a1b70f3da76e4e2324b6b1c7cf3765bbc4f7d737--sagemath-tobias.netlify.app/reference/curves/index.html

https://a1b70f3da76e4e2324b6b1c7cf3765bbc4f7d737--sagemath-tobias.netlify.app/reference/curves/sage/schemes/riemann_surfaces/riemann_surface.html

(4) Still other possibility. Then please open a new ticket for your favorite style.

I advocate (3), but others may have different favors. So I invite a few for opinions. If all agree with me, we will go for (3). Otherwise, I will open a vote (again...) in sage-devel.



---

archive/issue_comments_488197.json:
```json
{
    "body": "(3) is fine with me",
    "created_at": "2022-11-01T08:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488197",
    "user": "mkoeppe"
}
```

(3) is fine with me



---

archive/issue_comments_488198.json:
```json
{
    "body": "I also think 3 is good.",
    "created_at": "2022-11-01T08:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488198",
    "user": "fbissey"
}
```

I also think 3 is good.



---

archive/issue_comments_488199.json:
```json
{
    "body": "I agree.",
    "created_at": "2022-11-01T19:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488199",
    "user": "jhpalmieri"
}
```

I agree.



---

archive/issue_comments_488200.json:
```json
{
    "body": "Thank you for expressing your opinions!\n\nI will discard #34706. \n\nPlease review this ticket.",
    "created_at": "2022-11-03T02:03:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488200",
    "user": "klee"
}
```

Thank you for expressing your opinions!

I will discard #34706. 

Please review this ticket.



---

archive/issue_comments_488201.json:
```json
{
    "body": "Sounds like we can finally kill (with fire and holy water please) the manually edited TOC at the start of the files.",
    "created_at": "2022-11-03T23:57:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488201",
    "user": "tscrim"
}
```

Sounds like we can finally kill (with fire and holy water please) the manually edited TOC at the start of the files.



---

archive/issue_comments_488202.json:
```json
{
    "body": "For instance?",
    "created_at": "2022-11-04T01:11:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488202",
    "user": "klee"
}
```

For instance?



---

archive/issue_comments_488203.json:
```json
{
    "body": "Permutations: https://doc.sagemath.org/html/en/reference/combinat/sage/combinat/permutation.html\n\nGraphs: https://doc.sagemath.org/html/en/reference/graphs/sage/graphs/generic_graph.html\n\nDigraphs: https://doc.sagemath.org/html/en/reference/graphs/sage/graphs/digraph.html",
    "created_at": "2022-11-04T01:41:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488203",
    "user": "tscrim"
}
```

Permutations: https://doc.sagemath.org/html/en/reference/combinat/sage/combinat/permutation.html

Graphs: https://doc.sagemath.org/html/en/reference/graphs/sage/graphs/generic_graph.html

Digraphs: https://doc.sagemath.org/html/en/reference/graphs/sage/graphs/digraph.html



---

archive/issue_comments_488204.json:
```json
{
    "body": "True!\n\n> Permutations: https://doc.sagemath.org/html/en/reference/combinat/sage/combinat/permutation.html\n\nhttps://a1b70f3da76e4e2324b6b1c7cf3765bbc4f7d737--sagemath-tobias.netlify.app/reference/combinat/sage/combinat/permutation.html#module-sage.combinat.permutation\n\n> \n> Graphs: https://doc.sagemath.org/html/en/reference/graphs/sage/graphs/generic_graph.html\n\nhttps://a1b70f3da76e4e2324b6b1c7cf3765bbc4f7d737--sagemath-tobias.netlify.app/reference/graphs/sage/graphs/generic_graph.html\n\n> Digraphs: https://doc.sagemath.org/html/en/reference/graphs/sage/graphs/digraph.html\n\nhttps://a1b70f3da76e4e2324b6b1c7cf3765bbc4f7d737--sagemath-tobias.netlify.app/reference/graphs/sage/graphs/digraph.html",
    "created_at": "2022-11-04T02:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488204",
    "user": "klee"
}
```

True!

> Permutations: https://doc.sagemath.org/html/en/reference/combinat/sage/combinat/permutation.html

https://a1b70f3da76e4e2324b6b1c7cf3765bbc4f7d737--sagemath-tobias.netlify.app/reference/combinat/sage/combinat/permutation.html#module-sage.combinat.permutation

> 
> Graphs: https://doc.sagemath.org/html/en/reference/graphs/sage/graphs/generic_graph.html

https://a1b70f3da76e4e2324b6b1c7cf3765bbc4f7d737--sagemath-tobias.netlify.app/reference/graphs/sage/graphs/generic_graph.html

> Digraphs: https://doc.sagemath.org/html/en/reference/graphs/sage/graphs/digraph.html

https://a1b70f3da76e4e2324b6b1c7cf3765bbc4f7d737--sagemath-tobias.netlify.app/reference/graphs/sage/graphs/digraph.html



---

archive/issue_comments_488205.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-11-09T21:22:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488205",
    "user": "fbissey"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_488206.json:
```json
{
    "body": "Let's get things moving here.",
    "created_at": "2022-11-09T21:22:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488206",
    "user": "fbissey"
}
```

Let's get things moving here.



---

archive/issue_comments_488207.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2022-11-09T21:40:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488207",
    "user": "jhpalmieri"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_488208.json:
```json
{
    "body": "I saw something strange in a build this morning. It might be a glitch on my end, but I want to build the documentation one more time to make sure. If all goes well, I'll reset to positive.",
    "created_at": "2022-11-09T21:40:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488208",
    "user": "jhpalmieri"
}
```

I saw something strange in a build this morning. It might be a glitch on my end, but I want to build the documentation one more time to make sure. If all goes well, I'll reset to positive.



---

archive/issue_comments_488209.json:
```json
{
    "body": "For reasons I do not understand, it took over 3 hours to build the PDF documentation. It was much faster on another machine, and I don't see anything in the changes here that would cause that sort of thing. So back to a positive review.",
    "created_at": "2022-11-09T22:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488209",
    "user": "jhpalmieri"
}
```

For reasons I do not understand, it took over 3 hours to build the PDF documentation. It was much faster on another machine, and I don't see anything in the changes here that would cause that sort of thing. So back to a positive review.



---

archive/issue_comments_488210.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2022-11-09T22:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488210",
    "user": "jhpalmieri"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_488211.json:
```json
{
    "body": "Thank you both!",
    "created_at": "2022-11-10T00:20:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488211",
    "user": "klee"
}
```

Thank you both!



---

archive/issue_comments_488212.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-11-20T12:13:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/34473",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/34473#issuecomment-488212",
    "user": "vbraun"
}
```

Resolution: fixed
