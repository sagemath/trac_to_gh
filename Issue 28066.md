# Issue 28066: better string representation of Macaulay2 elements

Issue created by migration from https://trac.sagemath.org/ticket/28303

Original creator: @mwageringel

Original creation time: 2019-07-31 22:19:16

Keywords: macaulay2

This ticket improves the string representation of Macaulay2 elements that usually acquire the name of the global variable they are assigned to, such as polynomial rings and varieties.

Currently, Sage implicitly calls `describe` to get a string representation that avoids the global names, in particular those of internal Expect variables `sage0`, `sage1`,â€¦ which are not meaningful to a user. This ticket changes the assignment operator for these internal variables from `=` to `<-` to keep internal variables from acquiring the names, which was suggested by the developers [upstream](https://github.com/Macaulay2/M2/issues/967#issuecomment-513470518). As a result, calling `describe` is no longer necessary and the string representation becomes much nicer. Previously, this output could not be obtained at all (this is what `describe` used to return in old versions of M2):

```
sage: macaulay2('QQ[x,y,z]')
QQ[x, y, z]
```

It is still possible to call `describe` explicitly:

```
sage: macaulay2('QQ[x,y,z]').describe()
QQ[x..z, Degrees => {3:1}, Heft => {1}, MonomialOrder => {MonomialSize => 32}, DegreeRank => 1]
                                                         {GRevLex => {3:1}  }
                                                         {Position => Up    }
```

Also, if a user specifies the variable name, the element assumes that name as usual in Macaulay2:

```
sage: R = macaulay2('QQ[x,y,z]', 'R'); R
R
```




---

Comment by @mwageringel created at 2019-07-31 22:32:29

Changing status from new to needs_review.


---

Comment by @mwageringel created at 2019-07-31 22:32:29

This also includes small improvements to the documentation of the interface. I tested this using Macaulay2 version 1.12 and 1.14 with Python 2 and 3.
----
New commits:


---

Comment by chapoton created at 2019-08-01 12:40:14

ok, looks good. Maybe we should keep an example about matrices ?


---

Comment by @mwageringel created at 2019-08-01 13:01:46

There are examples in [matrix1.pyx](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/matrix/matrix1.pyx?id=53c4f2321cea2cacd1792bfa2918f5e6e400809a#n432). The test I removed was meant to specifically test the workaround for matrices, but that is no longer needed if we do not call `describe` anymore.


---

Comment by chapoton created at 2019-08-01 14:02:11

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2019-08-01 14:02:11

ok, then.


---

Comment by vbraun created at 2019-08-03 08:49:18

Resolution: fixed
