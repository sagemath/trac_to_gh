# Issue 28066: better string representation of Macaulay2 elements

archive/issues_028066.json:
```json
{
    "body": "Keywords: macaulay2\n\nThis ticket improves the string representation of Macaulay2 elements that usually acquire the name of the global variable they are assigned to, such as polynomial rings and varieties.\n\nCurrently, Sage implicitly calls `describe` to get a string representation that avoids the global names, in particular those of internal Expect variables `sage0`, `sage1`,\u2026 which are not meaningful to a user. This ticket changes the assignment operator for these internal variables from `=` to `<-` to keep internal variables from acquiring the names, which was suggested by the developers [upstream](https://github.com/Macaulay2/M2/issues/967#issuecomment-513470518). As a result, calling `describe` is no longer necessary and the string representation becomes much nicer. Previously, this output could not be obtained at all (this is what `describe` used to return in old versions of M2):\n\n```\nsage: macaulay2('QQ[x,y,z]')\nQQ[x, y, z]\n```\n\nIt is still possible to call `describe` explicitly:\n\n```\nsage: macaulay2('QQ[x,y,z]').describe()\nQQ[x..z, Degrees => {3:1}, Heft => {1}, MonomialOrder => {MonomialSize => 32}, DegreeRank => 1]\n                                                         {GRevLex => {3:1}  }\n                                                         {Position => Up    }\n```\n\nAlso, if a user specifies the variable name, the element assumes that name as usual in Macaulay2:\n\n```\nsage: R = macaulay2('QQ[x,y,z]', 'R'); R\nR\n```\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/28303\n\n",
    "created_at": "2019-07-31T22:19:16Z",
    "labels": [
        "component: interfaces: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.9",
    "title": "better string representation of Macaulay2 elements",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/28066",
    "user": "https://github.com/mwageringel"
}
```
Keywords: macaulay2

This ticket improves the string representation of Macaulay2 elements that usually acquire the name of the global variable they are assigned to, such as polynomial rings and varieties.

Currently, Sage implicitly calls `describe` to get a string representation that avoids the global names, in particular those of internal Expect variables `sage0`, `sage1`,â€¦ which are not meaningful to a user. This ticket changes the assignment operator for these internal variables from `=` to `<-` to keep internal variables from acquiring the names, which was suggested by the developers [upstream](https://github.com/Macaulay2/M2/issues/967#issuecomment-513470518). As a result, calling `describe` is no longer necessary and the string representation becomes much nicer. Previously, this output could not be obtained at all (this is what `describe` used to return in old versions of M2):

```
sage: macaulay2('QQ[x,y,z]')
QQ[x, y, z]
```

It is still possible to call `describe` explicitly:

```
sage: macaulay2('QQ[x,y,z]').describe()
QQ[x..z, Degrees => {3:1}, Heft => {1}, MonomialOrder => {MonomialSize => 32}, DegreeRank => 1]
                                                         {GRevLex => {3:1}  }
                                                         {Position => Up    }
```

Also, if a user specifies the variable name, the element assumes that name as usual in Macaulay2:

```
sage: R = macaulay2('QQ[x,y,z]', 'R'); R
R
```



Issue created by migration from https://trac.sagemath.org/ticket/28303





---

archive/issue_comments_396211.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-07-31T22:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28066#issuecomment-396211",
    "user": "https://github.com/mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_396212.json:
```json
{
    "body": "This also includes small improvements to the documentation of the interface. I tested this using Macaulay2 version 1.12 and 1.14 with Python 2 and 3.\n----\nNew commits:",
    "created_at": "2019-07-31T22:32:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28066#issuecomment-396212",
    "user": "https://github.com/mwageringel"
}
```

This also includes small improvements to the documentation of the interface. I tested this using Macaulay2 version 1.12 and 1.14 with Python 2 and 3.
----
New commits:



---

archive/issue_comments_396213.json:
```json
{
    "body": "ok, looks good. Maybe we should keep an example about matrices ?",
    "created_at": "2019-08-01T12:40:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28066#issuecomment-396213",
    "user": "https://github.com/fchapoton"
}
```

ok, looks good. Maybe we should keep an example about matrices ?



---

archive/issue_comments_396214.json:
```json
{
    "body": "There are examples in [matrix1.pyx](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/matrix/matrix1.pyx?id=53c4f2321cea2cacd1792bfa2918f5e6e400809a#n432). The test I removed was meant to specifically test the workaround for matrices, but that is no longer needed if we do not call `describe` anymore.",
    "created_at": "2019-08-01T13:01:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28066#issuecomment-396214",
    "user": "https://github.com/mwageringel"
}
```

There are examples in [matrix1.pyx](https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/matrix/matrix1.pyx?id=53c4f2321cea2cacd1792bfa2918f5e6e400809a#n432). The test I removed was meant to specifically test the workaround for matrices, but that is no longer needed if we do not call `describe` anymore.



---

archive/issue_comments_396215.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-08-01T14:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28066#issuecomment-396215",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_396216.json:
```json
{
    "body": "ok, then.",
    "created_at": "2019-08-01T14:02:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28066#issuecomment-396216",
    "user": "https://github.com/fchapoton"
}
```

ok, then.



---

archive/issue_comments_396217.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-08-03T08:49:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/28066",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/28066#issuecomment-396217",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_026012.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-08-03T08:49:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/28066",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/28066#event-26012"
}
```
