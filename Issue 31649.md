# Issue 31649: Refresh graph_plot.py

archive/issues_031649.json:
```json
{
    "body": "CC:  @fchapoton @tscrim\n\nImprove readability of `graphs/graph_plot.py`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/31886\n\n",
    "created_at": "2021-05-31T14:27:48Z",
    "labels": [
        "component: graph theory",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Refresh graph_plot.py",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31649",
    "user": "https://github.com/slel"
}
```
CC:  @fchapoton @tscrim

Improve readability of `graphs/graph_plot.py`.

Issue created by migration from https://trac.sagemath.org/ticket/31886





---

archive/issue_comments_451450.json:
```json
{
    "body": "Please review.\n----\nNew commits:",
    "created_at": "2021-05-31T14:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31649#issuecomment-451450",
    "user": "https://github.com/slel"
}
```

Please review.
----
New commits:



---

archive/issue_comments_451451.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-05-31T14:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31649#issuecomment-451451",
    "user": "https://github.com/slel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_451452.json:
```json
{
    "body": "Thank you for going through and doing some cleaning of this file. It definitely needs it. Overall, LGTM, but I do have a few questions and comments.\n\nWhy did you change this test?\n\n```diff\n-            sage: g.plot(color_by_label=True, edge_style='solid', layout='circular')\n+            sage: g.plot(color_by_label=True, layout='circular')\n```\n\n\nYou no longer need the `update` internal function:\n\n```\n        def update(key, label, color, head):\n            edges_to_draw[key].append((label, color, head))\n```\n\n\nI personally find `a = (x, y)` easier to understand than `a = x, y`. However, this is more stylistic.\n\nAlso stylistic, but I would rather have the longer variable name `curr_loop_size` rather than `r` to have more self-documenting code.\n\nWhy did you create this variable?\n\n```\np12 = (float(p2[0] - p1[0]), float(p2[1] - p1[1]))\n```\n\nIt seems like it is only used to compute the perp slope. I feel like it doesn't add to the clarity.",
    "created_at": "2021-05-31T23:53:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31649#issuecomment-451452",
    "user": "https://github.com/tscrim"
}
```

Thank you for going through and doing some cleaning of this file. It definitely needs it. Overall, LGTM, but I do have a few questions and comments.

Why did you change this test?

```diff
-            sage: g.plot(color_by_label=True, edge_style='solid', layout='circular')
+            sage: g.plot(color_by_label=True, layout='circular')
```


You no longer need the `update` internal function:

```
        def update(key, label, color, head):
            edges_to_draw[key].append((label, color, head))
```


I personally find `a = (x, y)` easier to understand than `a = x, y`. However, this is more stylistic.

Also stylistic, but I would rather have the longer variable name `curr_loop_size` rather than `r` to have more self-documenting code.

Why did you create this variable?

```
p12 = (float(p2[0] - p1[0]), float(p2[1] - p1[1]))
```

It seems like it is only used to compute the perp slope. I feel like it doesn't add to the clarity.



---

archive/issue_comments_451453.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-06-01T09:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31649#issuecomment-451453",
    "user": "https://github.com/slel"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_451454.json:
```json
{
    "body": "Replying to [comment:2 tscrim]:\n> Thank you for going through and doing some cleaning of\n> this file. It definitely needs it. Overall, LGTM,\n> but I do have a few questions and comments.\n\nThanks for agreeing with that and for taking a thorough look.\n\n> Why did you change this test?\n> {{{#!diff\n> -            sage: g.plot(color_by_label=True, edge_style='solid', layout='circular')\n> +            sage: g.plot(color_by_label=True, layout='circular')\n> }}}\n\nTo simplify this test copied from Ask Sage in #31542, as:\n\n- `edge_style` defaults to `'solid'`\n- the test is for the number of edges, not their style\n\n> You no longer need the `update` internal function:\n> {{{\n>         def update(key, label, color, head):\n>             edges_to_draw[key].append((label, color, head))\n> }}}\n\nI hesitated to remove it, but I agree the benefits\nno longer clearly outweigh the drawbacks:\n\n- pros: six lines 16 characters shorter, less brackets and parentheses.\n- cons: overhead of an internal function\n\n> I personally find `a = (x, y)` easier to understand\n> than `a = x, y`. However, this is more stylistic.\n\nI agree and I'll change that.\n\n> Also stylistic, but I would rather have the longer variable name\n> `curr_loop_size` rather than `r` to have more self-documenting code.\n\nI agree and I'll change that.\n\n> Why did you create this variable?\n> {{{\n> p12 = (float(p2[0] - p1[0]), float(p2[1] - p1[1]))\n> }}}\n> It seems like it is only used to compute the perp slope.\n> I feel like it doesn't add to the clarity.\n\nI agree and I'll revert to the previous version.",
    "created_at": "2021-06-01T09:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31649#issuecomment-451454",
    "user": "https://github.com/slel"
}
```

Replying to [comment:2 tscrim]:
> Thank you for going through and doing some cleaning of
> this file. It definitely needs it. Overall, LGTM,
> but I do have a few questions and comments.

Thanks for agreeing with that and for taking a thorough look.

> Why did you change this test?
> {{{#!diff
> -            sage: g.plot(color_by_label=True, edge_style='solid', layout='circular')
> +            sage: g.plot(color_by_label=True, layout='circular')
> }}}

To simplify this test copied from Ask Sage in #31542, as:

- `edge_style` defaults to `'solid'`
- the test is for the number of edges, not their style

> You no longer need the `update` internal function:
> {{{
>         def update(key, label, color, head):
>             edges_to_draw[key].append((label, color, head))
> }}}

I hesitated to remove it, but I agree the benefits
no longer clearly outweigh the drawbacks:

- pros: six lines 16 characters shorter, less brackets and parentheses.
- cons: overhead of an internal function

> I personally find `a = (x, y)` easier to understand
> than `a = x, y`. However, this is more stylistic.

I agree and I'll change that.

> Also stylistic, but I would rather have the longer variable name
> `curr_loop_size` rather than `r` to have more self-documenting code.

I agree and I'll change that.

> Why did you create this variable?
> {{{
> p12 = (float(p2[0] - p1[0]), float(p2[1] - p1[1]))
> }}}
> It seems like it is only used to compute the perp slope.
> I feel like it doesn't add to the clarity.

I agree and I'll revert to the previous version.



---

archive/issue_comments_451455.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-01T10:12:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31649#issuecomment-451455",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_451456.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-01T10:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31649#issuecomment-451456",
    "user": "https://github.com/slel"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_451457.json:
```json
{
    "body": "Ready for review again.",
    "created_at": "2021-06-01T10:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31649#issuecomment-451457",
    "user": "https://github.com/slel"
}
```

Ready for review again.



---

archive/issue_comments_451458.json:
```json
{
    "body": "Thank you.",
    "created_at": "2021-06-02T01:17:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31649#issuecomment-451458",
    "user": "https://github.com/tscrim"
}
```

Thank you.



---

archive/issue_comments_451459.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-02T01:17:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31649#issuecomment-451459",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_451460.json:
```json
{
    "body": "Thanks for the review!\n\nSetting priority back to major in view\nof upcoming more substantial changes.",
    "created_at": "2021-06-02T05:50:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31649#issuecomment-451460",
    "user": "https://github.com/slel"
}
```

Thanks for the review!

Setting priority back to major in view
of upcoming more substantial changes.



---

archive/issue_events_028853.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2021-06-29T17:40:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/31649",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/31649#event-28853"
}
```



---

archive/issue_comments_451461.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-29T17:40:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31649#issuecomment-451461",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
