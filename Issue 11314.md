# Issue 11314: gnuplot 4.0.0 from optional/experimental packages has invalid use of "with" keyword for Python 2.6

Issue created by migration from https://trac.sagemath.org/ticket/11486

Original creator: ijstokes

Original creation time: 2011-06-14 19:10:41

Assignee: tbd

Following


```
./sage -i gnuplot-4.0.0
```


Sage reports ipython errors on startup due to the presence of the "with" keyword on line 68 here:


```
sage-latest/local/lib/python2.6/site-packages/Gnuplot/PlotItems.py
```


I didn't try to interpret exactly what these were doing, but changing that region of code to:



```
    # For _option_list explanation, see docstring for PlotItem.
    _option_list = {
        'axes' : lambda self, axes: self.set_string_option(
            'axes', axes, None, 'axes %s'),
        'title' : lambda self, title: self.set_string_option(
            'title', title, 'notitle', 'title "%s"'),
        }

    # ISR: with is reserved word, at least from Python 2.6
    import sys
    if sys.version_info < (2, 6):
        _option_list['with'] = lambda self, wif: self.set_string_option(
            'with', wif, None, 'with %s')

```


Seems to have fixed it for me.  No idea if it will break other things.  Think the "wif" is only in the context of the lambda so it should be OK.



---

Comment by mkoeppe created at 2021-08-26 02:38:53

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-08-26 02:38:53

outdated, should close


---

Comment by klee created at 2021-09-10 11:40:47

I agree


---

Comment by klee created at 2021-09-10 11:40:47

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-09-10 17:33:19

Resolution: invalid
