# Issue 20911: remove unused dendrog comparison of trees

archive/issues_020911.json:
```json
{
    "body": "CC:  tscrim darij kdilks vivianepons hivert\n\npart of the effort to move towards py3, which does not support\nsorting according to a comparison function.\n\nIssue created by migration from https://trac.sagemath.org/ticket/21148\n\n",
    "created_at": "2016-08-02T09:34:47Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "title": "remove unused dendrog comparison of trees",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/20911",
    "user": "chapoton"
}
```
CC:  tscrim darij kdilks vivianepons hivert

part of the effort to move towards py3, which does not support
sorting according to a comparison function.

Issue created by migration from https://trac.sagemath.org/ticket/21148





---

archive/issue_comments_289135.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-02T09:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289135",
    "user": "chapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_289136.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-08-02T09:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289136",
    "user": "chapoton"
}
```

New commits:



---

archive/issue_comments_289137.json:
```json
{
    "body": "Fine with me (I'm not married to this code)... but something tells me that the constructed-on-the-fly comparison might be even harder to py3ize than this one. Did you try?",
    "created_at": "2016-08-02T11:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289137",
    "user": "darij"
}
```

Fine with me (I'm not married to this code)... but something tells me that the constructed-on-the-fly comparison might be even harder to py3ize than this one. Did you try?



---

archive/issue_comments_289138.json:
```json
{
    "body": "no, I have not checked the other comparison. At least it does not use cmp, but a key.\n\nDo you agree to set this to positive review ?",
    "created_at": "2016-08-02T11:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289138",
    "user": "chapoton"
}
```

no, I have not checked the other comparison. At least it does not use cmp, but a key.

Do you agree to set this to positive review ?



---

archive/issue_comments_289139.json:
```json
{
    "body": "Oh, I forgot that our `sort_key` is deterministic (we did get rid of the on-the-fly hack). Perfect then!\n\nYes, positive review.",
    "created_at": "2016-08-02T12:03:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289139",
    "user": "darij"
}
```

Oh, I forgot that our `sort_key` is deterministic (we did get rid of the on-the-fly hack). Perfect then!

Yes, positive review.



---

archive/issue_comments_289140.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-02T12:03:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289140",
    "user": "darij"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_289141.json:
```json
{
    "body": "It just looks like you are removing functionality to remove a use of the `cmp` keyword for `sort`. I agree that we should move to Python3, but this feels more like a scorched-Earth approach. Why not just use the `cmp_to_key`? There's also nothing that says we cannot have `cmp`-like functions in our own code either.\n\nI don't use this personally, but I don't think we should just completely rip out something that might be useful to someone. I've cc-ing Kevin and Viviane to see if they do or know someone who does.",
    "created_at": "2016-08-02T15:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289141",
    "user": "tscrim"
}
```

It just looks like you are removing functionality to remove a use of the `cmp` keyword for `sort`. I agree that we should move to Python3, but this feels more like a scorched-Earth approach. Why not just use the `cmp_to_key`? There's also nothing that says we cannot have `cmp`-like functions in our own code either.

I don't use this personally, but I don't think we should just completely rip out something that might be useful to someone. I've cc-ing Kevin and Viviane to see if they do or know someone who does.



---

archive/issue_comments_289142.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2016-08-02T15:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289142",
    "user": "tscrim"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_289143.json:
```json
{
    "body": "This has never been used in sage, and has very probably never been used by anybody out there.\n\nIMHO, the job of changing it to a comparison key would be be essentially useless.\n\nGiven that python3 is still a **long** way ahead, please let us try not to spend too much time on futilities.",
    "created_at": "2016-08-02T16:11:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289143",
    "user": "chapoton"
}
```

This has never been used in sage, and has very probably never been used by anybody out there.

IMHO, the job of changing it to a comparison key would be be essentially useless.

Given that python3 is still a **long** way ahead, please let us try not to spend too much time on futilities.



---

archive/issue_comments_289144.json:
```json
{
    "body": "Someone thought it was worthwhile to add this to Sage. Plus there surely are a large number of methods that are never called in Sage itself (e.g., `newton_raphson` for (univariate) polynomials). So I don't find that to be a compelling argument. The functionality is not broken, it just needs a small tweak to be 2/3 compatible. So I really think we should not remove chunks like this.",
    "created_at": "2016-08-02T16:46:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289144",
    "user": "tscrim"
}
```

Someone thought it was worthwhile to add this to Sage. Plus there surely are a large number of methods that are never called in Sage itself (e.g., `newton_raphson` for (univariate) polynomials). So I don't find that to be a compelling argument. The functionality is not broken, it just needs a small tweak to be 2/3 compatible. So I really think we should not remove chunks like this.



---

archive/issue_comments_289145.json:
```json
{
    "body": "I wrote this code, in order to solve a problem (totally ordering trees). Then, others came around and found a better solution (see the `sort_key` we currently have). I don't know if someone else has used or is using it; all I can really say is that I'm decrementing the reference count.",
    "created_at": "2016-08-02T23:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289145",
    "user": "darij"
}
```

I wrote this code, in order to solve a problem (totally ordering trees). Then, others came around and found a better solution (see the `sort_key` we currently have). I don't know if someone else has used or is using it; all I can really say is that I'm decrementing the reference count.



---

archive/issue_comments_289146.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2016-08-03T00:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289146",
    "user": "tscrim"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_289147.json:
```json
{
    "body": "I still don't really agree with removing the functionality, but okay. Nevertheless, you need to deprecate these functions.",
    "created_at": "2016-08-03T00:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289147",
    "user": "tscrim"
}
```

I still don't really agree with removing the functionality, but okay. Nevertheless, you need to deprecate these functions.



---

archive/issue_comments_289148.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-08-03T07:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289148",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_289149.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-03T07:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289149",
    "user": "chapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_289150.json:
```json
{
    "body": "Once again, I'm OK with this.",
    "created_at": "2016-08-03T12:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289150",
    "user": "darij"
}
```

Once again, I'm OK with this.



---

archive/issue_comments_289151.json:
```json
{
    "body": "All tests pass. Travis, do you agree to set a positive review ?",
    "created_at": "2016-08-03T12:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289151",
    "user": "chapoton"
}
```

All tests pass. Travis, do you agree to set a positive review ?



---

archive/issue_comments_289152.json:
```json
{
    "body": "Yep, positive review.",
    "created_at": "2016-08-04T20:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289152",
    "user": "tscrim"
}
```

Yep, positive review.



---

archive/issue_comments_289153.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-04T20:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289153",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_289154.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-08-07T20:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/20911",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/20911#issuecomment-289154",
    "user": "vbraun"
}
```

Resolution: fixed
