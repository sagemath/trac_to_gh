# Issue 19131: Add LL() method for polyhedral closed convex cones.

Issue created by migration from https://trac.sagemath.org/ticket/19368

Original creator: mjo

Original creation time: 2015-10-07 21:28:55

CC:  novoselt

Now I finally have something useful to contribute.

The "Lyapunov-like" matrices/transformations provide a way to generalize the complementarity slackness condition over other cones. Essentially you expand `<x,s> = 0` into a system of equations `<L(x),s> = 0` and hope to solve that. The space of all such transformations turns out to be the Lie algebra of the automorphism group of the cone.

And now that we have `discrete_complementarity_set()`, we can find every Lyapunov-like transformation using some basic linear algebra tricks: `<L(x),s> = 0` if and only if `<L, sx^T> = 0` (trace inner product), so all we have to do is compute an orthogonal complement.

The name `LL()` for the space of all Lyapunov-like transformations appears in 5-10 papers, but isn't very descriptive. If you prefer, I like `lyapunov_like_basis` just as much.


---

Comment by mjo created at 2015-10-07 21:33:29

Changing status from new to needs_review.


---

Comment by mjo created at 2015-10-07 21:33:29

New commits:


---

Comment by novoselt created at 2015-10-08 17:40:05

Yes, please! The intersection of people who use Sage and clearly understand what `LL` stands for may consist of exactly one person! If you really like, you can add a synonym (with the main function having the long name for traceback purposes), but I guess that it is not the method which is called all over the place.


---

Comment by git created at 2015-10-08 19:55:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mjo created at 2015-10-08 19:57:51

No problem, I actually prefer the descriptive name. If I could get away with using sensible names in the paper, I would.


---

Comment by novoselt created at 2015-10-08 23:46:41

Your use of the term "trivial cone" is confusing - after reading the very first example I thought "Surely any transformation is Lyapunov-like since there is no conditions to worry about!", yet their basis was empty. To me "trivial cone" means "consisting of the origin" and there are multiple trivial cones - one for each lattice, which of course should be distinguished from the point of view of toric geometry. Sometimes, looking at the doc of discrete complementarity set, you seem to mean the same things, while in other places you mean "the only cone in the 0-dimensional space" where indeed the basis of all transformations is empty as there are no transformations at all (or I guess there is one which is both zero and identity or however one wants to interpret it). I would prefer sticking to "just the origin" and updating docs to include a positive-dimensional ambient space as well.


---

Comment by novoselt created at 2015-10-09 00:00:24

Changing status from needs_review to needs_work.


---

Comment by novoselt created at 2015-10-09 00:00:24

Are these matrices expected to be non-integer? I.e. why `base_field` and not `base_ring`?


---

Comment by git created at 2015-10-09 14:51:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mjo created at 2015-10-09 14:59:27

Changing status from needs_work to needs_review.


---

Comment by mjo created at 2015-10-09 14:59:27

Replying to [comment:5 novoselt]:
> Your use of the term "trivial cone" is confusing - after reading the very first example I thought "Surely any transformation is Lyapunov-like since there is no conditions to worry about!", yet their basis was empty. To me "trivial cone" means "consisting of the origin"...

You are correct -- the important part of that doctest was that the space is trivial. It's been updated, and I added an example of a trivial cone (only the origin) in a non-trivial space.




> Are these matrices expected to be non-integer? I.e. why base_field and not base_ring?

The tensor products are integer matrices, but when we convert to long vectors, I think a field is required. I assume the `complement()` algorithm needs a field anyway, and the matrices that pop out can be rational:


```
sage: K = Cone([(-5, -1, 0), (53, -2, 1), (-1, -1, 6)])
sage: K.lyapunov_like_basis()
[
[1 0 0]  [       0        1        0]  [        0         0         1]
[0 1 0]  [ 44/4505 681/4505 -126/901]  [  -15/901    75/901   911/901]
[0 0 1], [ -15/901   75/901  911/901], [   87/901  -435/901 -5464/901]
]
```


I could normalize those after the fact?


---

Comment by novoselt created at 2015-10-11 22:06:34

Changing status from needs_review to positive_review.


---

Comment by novoselt created at 2015-10-11 22:06:34

Replying to [comment:9 mjo]:
> I could normalize those after the fact?

Well, if there is no good reason to do it, you probably should not ;-)


---

Comment by vbraun created at 2015-10-14 00:59:24

Resolution: fixed
