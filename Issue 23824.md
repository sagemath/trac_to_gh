# Issue 23824: Slightly faster test for semiorder

Issue created by migration from Trac.

Original creator: jmantysalo

Original creation time: 2017-10-17 14:47:56

For example after `X = list(Posets(8))` compare


```
sum(1 for P in X if P.is_incomparable_chain_free([(1,3),(2,2)]))
sum(1 for P in X if P.is_incomparable_chain_free([(2,2),(1,4)]))
```


So it makes sense to always sort the list. Also there is no need for to call the same function.


---

Comment by git created at 2017-10-18 07:29:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2017-10-18 07:30:48

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-10-18 15:52:04

How about we pull the `self._hasse_diagram.transitive_closure()` outside of the for loop so it is only called once?

Addendum: Also with a check that the for loop is non-empty.


---

Comment by jmantysalo created at 2017-10-18 15:53:24

Replying to [comment:4 tscrim]:
> How about we pull the `self._hasse_diagram.transitive_closure()` outside of the for loop so it is only called once?

Of course. I am blind.


---

Comment by jmantysalo created at 2017-10-18 15:53:24

Changing status from needs_review to needs_work.


---

Comment by jmantysalo created at 2017-10-18 15:55:06

Replying to [comment:4 tscrim]:

> Addendum: Also with a check that the for loop is non-empty.

This is a desing issue. What should `is_incomparable_chain_free([])` return? Currently for example `is_antichain_of_poset([])` return `True`, but it is slightly different case.


---

Comment by tscrim created at 2017-10-18 16:06:24

Replying to [comment:6 jmantysalo]:
> Replying to [comment:4 tscrim]:
> 
> > Addendum: Also with a check that the for loop is non-empty.
> 
> This is a desing issue.

No, what I mean is we should not create the transitive closure if `chain_pairs` is empty (which is a very quick test).

> What should `is_incomparable_chain_free([])` return? Currently for example `is_antichain_of_poset([])` return `True`, but it is slightly different case.

The current and changed behavior is to return `True`, so that can be for a separate ticket if you want. I have no real preference and do not think it really matters theory-wise.


---

Comment by git created at 2017-10-18 18:17:27

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2017-10-18 18:18:53

Testing for empty list is optimizing for quite special case, but whatever. Here is new version.

(Of course, there is propably much faster algorithm if we don't use general-purpose graph functions.)


---

Comment by jmantysalo created at 2017-10-18 18:19:05

Changing status from needs_work to needs_review.


---

Comment by jmantysalo created at 2017-10-25 06:22:56

Just pinging. Patchbot failures seems to be unrelated.


---

Comment by tscrim created at 2017-10-25 06:27:42

Whoops, sorry, fell off my radar. Thanks, LGTM.


---

Comment by tscrim created at 2017-10-25 06:27:42

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-11-01 18:07:09

Resolution: fixed
