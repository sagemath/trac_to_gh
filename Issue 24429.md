# Issue 24429: Use return instead of raising StopIteration

archive/issues_024429.json:
```json
{
    "body": "CC:  tscrim chapoton\n\nSee end of discussion at #24639 and https://www.python.org/dev/peps/pep-0479/.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/24666\n\n",
    "created_at": "2018-02-06T06:24:39Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Use return instead of raising StopIteration",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24429",
    "user": "jmantysalo"
}
```
CC:  tscrim chapoton

See end of discussion at #24639 and https://www.python.org/dev/peps/pep-0479/.


Issue created by migration from https://trac.sagemath.org/ticket/24666





---

archive/issue_comments_342634.json:
```json
{
    "body": "Thanks Travis. Fr\u00e9d\u00e9ric, FYI because of Python3. At least in `hasse_diagram.py` I have used `raise StopIteration`.",
    "created_at": "2018-02-06T06:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24429#issuecomment-342634",
    "user": "jmantysalo"
}
```

Thanks Travis. Frédéric, FYI because of Python3. At least in `hasse_diagram.py` I have used `raise StopIteration`.



---

archive/issue_comments_342635.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to python3.",
    "created_at": "2018-02-06T06:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24429#issuecomment-342635",
    "user": "jmantysalo"
}
```

Changing component from PLEASE CHANGE to python3.



---

archive/issue_comments_342636.json:
```json
{
    "body": "Does the same apply to `__next__`-functions where there is kind of implicit `yield`?\n----\nNew commits:",
    "created_at": "2018-02-06T06:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24429#issuecomment-342636",
    "user": "jmantysalo"
}
```

Does the same apply to `__next__`-functions where there is kind of implicit `yield`?
----
New commits:



---

archive/issue_comments_342637.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2018-02-06T06:59:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24429#issuecomment-342637",
    "user": "jmantysalo"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_342638.json:
```json
{
    "body": "Replying to [comment:3 jmantysalo]:\n> Does the same apply to `__next__`-functions where there is kind of implicit `yield`?\n\nNo it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.",
    "created_at": "2018-02-06T07:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24429#issuecomment-342638",
    "user": "tscrim"
}
```

Replying to [comment:3 jmantysalo]:
> Does the same apply to `__next__`-functions where there is kind of implicit `yield`?

No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.



---

archive/issue_comments_342639.json:
```json
{
    "body": "Replying to [comment:4 tscrim]:\n> Replying to [comment:3 jmantysalo]:\n> > Does the same apply to `__next__`-functions where there is kind of implicit `yield`?\n> \n> No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.\n\nThen I think this is all. But can we add `from __future__ import generator_stop` to some general file to check for everything?",
    "created_at": "2018-02-06T07:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24429#issuecomment-342639",
    "user": "jmantysalo"
}
```

Replying to [comment:4 tscrim]:
> Replying to [comment:3 jmantysalo]:
> > Does the same apply to `__next__`-functions where there is kind of implicit `yield`?
> 
> No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.

Then I think this is all. But can we add `from __future__ import generator_stop` to some general file to check for everything?



---

archive/issue_comments_342640.json:
```json
{
    "body": "Replying to [comment:5 jmantysalo]:\n> Replying to [comment:4 tscrim]:\n> > Replying to [comment:3 jmantysalo]:\n> > > Does the same apply to `__next__`-functions where there is kind of implicit `yield`?\n> > \n> > No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.\n> \n> Then I think this is all. But can we add `from __future__ import generator_stop` to some general file to check for everything?\n\nI don't think we can do this in general (although maybe for doctests, but that's not very useful IMO). Typically we just add it to individual files, but I don't really see people typically raising `StopIteration` (as opposed to, e.g., `print \"foo\"`).",
    "created_at": "2018-02-06T07:54:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24429#issuecomment-342640",
    "user": "tscrim"
}
```

Replying to [comment:5 jmantysalo]:
> Replying to [comment:4 tscrim]:
> > Replying to [comment:3 jmantysalo]:
> > > Does the same apply to `__next__`-functions where there is kind of implicit `yield`?
> > 
> > No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.
> 
> Then I think this is all. But can we add `from __future__ import generator_stop` to some general file to check for everything?

I don't think we can do this in general (although maybe for doctests, but that's not very useful IMO). Typically we just add it to individual files, but I don't really see people typically raising `StopIteration` (as opposed to, e.g., `print "foo"`).



---

archive/issue_comments_342641.json:
```json
{
    "body": "OK, then I just mark this as needs_review and try to remember this in future.",
    "created_at": "2018-02-06T07:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24429#issuecomment-342641",
    "user": "jmantysalo"
}
```

OK, then I just mark this as needs_review and try to remember this in future.



---

archive/issue_comments_342642.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-02-06T07:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24429#issuecomment-342642",
    "user": "jmantysalo"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_342643.json:
```json
{
    "body": "Replying to [comment:7 jmantysalo]:\n> OK, then I just mark this as needs_review and try to remember this in future.\n\nSounds good. LGTM.",
    "created_at": "2018-02-06T07:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24429#issuecomment-342643",
    "user": "tscrim"
}
```

Replying to [comment:7 jmantysalo]:
> OK, then I just mark this as needs_review and try to remember this in future.

Sounds good. LGTM.



---

archive/issue_comments_342644.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-02-06T07:58:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24429#issuecomment-342644",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_342645.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-02-09T23:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24429",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24429#issuecomment-342645",
    "user": "vbraun"
}
```

Resolution: fixed
