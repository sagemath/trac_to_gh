# Issue 24429: Use return instead of raising StopIteration

Issue created by migration from Trac.

Original creator: jmantysalo

Original creation time: 2018-02-06 06:24:39

CC:  tscrim chapoton

See end of discussion at #24639 and https://www.python.org/dev/peps/pep-0479/.



---

Comment by jmantysalo created at 2018-02-06 06:26:04

Thanks Travis. Frédéric, FYI because of Python3. At least in `hasse_diagram.py` I have used `raise StopIteration`.


---

Comment by jmantysalo created at 2018-02-06 06:59:59

Changing component from PLEASE CHANGE to python3.


---

Comment by jmantysalo created at 2018-02-06 06:59:59

Does the same apply to `__next__`-functions where there is kind of implicit `yield`?
----
New commits:


---

Comment by jmantysalo created at 2018-02-06 06:59:59

Changing type from PLEASE CHANGE to enhancement.


---

Comment by tscrim created at 2018-02-06 07:43:15

Replying to [comment:3 jmantysalo]:
> Does the same apply to `__next__`-functions where there is kind of implicit `yield`?

No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.


---

Comment by jmantysalo created at 2018-02-06 07:50:21

Replying to [comment:4 tscrim]:
> Replying to [comment:3 jmantysalo]:
> > Does the same apply to `__next__`-functions where there is kind of implicit `yield`?
> 
> No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.

Then I think this is all. But can we add `from __future__ import generator_stop` to some general file to check for everything?


---

Comment by tscrim created at 2018-02-06 07:54:58

Replying to [comment:5 jmantysalo]:
> Replying to [comment:4 tscrim]:
> > Replying to [comment:3 jmantysalo]:
> > > Does the same apply to `__next__`-functions where there is kind of implicit `yield`?
> > 
> > No it does not; `__next__` should raise a `StopIteration`. See https://docs.python.org/3/library/exceptions.html.
> 
> Then I think this is all. But can we add `from __future__ import generator_stop` to some general file to check for everything?

I don't think we can do this in general (although maybe for doctests, but that's not very useful IMO). Typically we just add it to individual files, but I don't really see people typically raising `StopIteration` (as opposed to, e.g., `print "foo"`).


---

Comment by jmantysalo created at 2018-02-06 07:56:26

OK, then I just mark this as needs_review and try to remember this in future.


---

Comment by jmantysalo created at 2018-02-06 07:56:26

Changing status from new to needs_review.


---

Comment by tscrim created at 2018-02-06 07:58:45

Replying to [comment:7 jmantysalo]:
> OK, then I just mark this as needs_review and try to remember this in future.

Sounds good. LGTM.


---

Comment by tscrim created at 2018-02-06 07:58:45

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-02-09 23:47:10

Resolution: fixed
