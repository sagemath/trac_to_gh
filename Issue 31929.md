# Issue 31929: Add affine_preperiodic_model to dynamical systems

archive/issues_031929.json:
```json
{
    "body": "CC:  bhutz\n\nKeywords: gsoc2021\n\nThis ticket aims to add a method to dynamical systems on projective space which returns a conjugate dynamical system with affine (m,n)-preperiodic points.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32166\n\n",
    "created_at": "2021-07-08T19:53:55Z",
    "labels": [
        "dynamics",
        "minor",
        "enhancement"
    ],
    "title": "Add affine_preperiodic_model to dynamical systems",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31929",
    "user": "@EnderWannabe"
}
```
CC:  bhutz

Keywords: gsoc2021

This ticket aims to add a method to dynamical systems on projective space which returns a conjugate dynamical system with affine (m,n)-preperiodic points.

Issue created by migration from https://trac.sagemath.org/ticket/32166





---

archive/issue_comments_456150.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-07-08T19:55:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456150",
    "user": "@EnderWannabe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_456151.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2021-07-08T19:55:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456151",
    "user": "@EnderWannabe"
}
```

Last 10 new commits:



---

archive/issue_comments_456152.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-08T20:17:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456152",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456153.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-09T16:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456153",
    "user": "bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_456154.json:
```json
{
    "body": "- first example does not need QQbar since all points are QQ-rational\n\n\n```\ng.change_ring(QQbar).periodic_points(1)\n```\n\n\n\n- why do we need the #long time example? Is there a quicker example that would also demonstrate the functionality? Although polynomial base ring seems to be broken in general\n\n```\nR.<c> = QQ[]\nP.<x,y> = ProjectiveSpace(R, 1)\nf = DynamicalSystem_projective([x^2 + 2*y^2, y^2])\nf.affine_preperiodic_model(1)\n```\n\n\nHere is a different kind of failure\n\n```\nR.<c> = GF(3)[]\nP.<x,y> = ProjectiveSpace(R, 1)\nf = DynamicalSystem_projective([x^2 +c*y^2, y^2])\nf.affine_preperiodic_model(1)\n```\n\n\n\n\n- typos in error message\n\n```\n('Preperiod must be nonnegative')\n```\n\n\n\n- Need a subscheme example\n\n- notice that m,n are in a different order than for preperiodoic_points parameters. It should match\n\n```\ng=f.affine_preperiodic_model(1,0)\ng.preperiodic_points(0,1)\n```\n",
    "created_at": "2021-07-09T16:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456154",
    "user": "bhutz"
}
```

- first example does not need QQbar since all points are QQ-rational


```
g.change_ring(QQbar).periodic_points(1)
```



- why do we need the #long time example? Is there a quicker example that would also demonstrate the functionality? Although polynomial base ring seems to be broken in general

```
R.<c> = QQ[]
P.<x,y> = ProjectiveSpace(R, 1)
f = DynamicalSystem_projective([x^2 + 2*y^2, y^2])
f.affine_preperiodic_model(1)
```


Here is a different kind of failure

```
R.<c> = GF(3)[]
P.<x,y> = ProjectiveSpace(R, 1)
f = DynamicalSystem_projective([x^2 +c*y^2, y^2])
f.affine_preperiodic_model(1)
```




- typos in error message

```
('Preperiod must be nonnegative')
```



- Need a subscheme example

- notice that m,n are in a different order than for preperiodoic_points parameters. It should match

```
g=f.affine_preperiodic_model(1,0)
g.preperiodic_points(0,1)
```




---

archive/issue_comments_456155.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-09T17:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456155",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456156.json:
```json
{
    "body": "Replying to [comment:4 bhutz]:\n> - why do we need the #long time example? Is there a quicker example that would also demonstrate the functionality? \n\nThis example requires a conjugation with c in it - there is no conjugation over GF(3). It checks that polynomial rings over finite fields are handled correctly. The way polynomial rings over finite fields are implemented, it first checks the hyperplanes defined over the finite field, then goes to hyperplanes defined over the polynomial ring (which is why this takes a long time: it checks every hyperplane over GF(3)). For this example, the hyperplane only requires c, not c<sup>2</sup>, so it is optimal for dynamical systems on P<sup>2</sup> over GF(3)[]. A faster example would have to be on P<sup>2</sup> on GF(2)[], but I haven't found one - the same example over GF(2)[] takes much longer. Alternatively, a map on P<sup>1</sup> with a large amount of preperiodic points might work and would probably be faster.\n\n> {{{\n> R.<c> = QQ[]\n> P.<x,y> = ProjectiveSpace(R, 1)\n> f = DynamicalSystem_projective([x^2 + 2*y^2, y^2])\n> f.affine_preperiodic_model(1)\n> }}}\n\nThis was a dependency error. I hadn't merged the latest #31906 into #31954.",
    "created_at": "2021-07-09T17:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456156",
    "user": "@EnderWannabe"
}
```

Replying to [comment:4 bhutz]:
> - why do we need the #long time example? Is there a quicker example that would also demonstrate the functionality? 

This example requires a conjugation with c in it - there is no conjugation over GF(3). It checks that polynomial rings over finite fields are handled correctly. The way polynomial rings over finite fields are implemented, it first checks the hyperplanes defined over the finite field, then goes to hyperplanes defined over the polynomial ring (which is why this takes a long time: it checks every hyperplane over GF(3)). For this example, the hyperplane only requires c, not c<sup>2</sup>, so it is optimal for dynamical systems on P<sup>2</sup> over GF(3)[]. A faster example would have to be on P<sup>2</sup> on GF(2)[], but I haven't found one - the same example over GF(2)[] takes much longer. Alternatively, a map on P<sup>1</sup> with a large amount of preperiodic points might work and would probably be faster.

> {{{
> R.<c> = QQ[]
> P.<x,y> = ProjectiveSpace(R, 1)
> f = DynamicalSystem_projective([x^2 + 2*y^2, y^2])
> f.affine_preperiodic_model(1)
> }}}

This was a dependency error. I hadn't merged the latest #31906 into #31954.



---

archive/issue_comments_456157.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-09T17:32:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456157",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456158.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-09T17:33:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456158",
    "user": "@EnderWannabe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_456159.json:
```json
{
    "body": "ok. Just one minor issue. `m` no longer has a default value of 0, so remove that from the documentation.",
    "created_at": "2021-07-09T17:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456159",
    "user": "bhutz"
}
```

ok. Just one minor issue. `m` no longer has a default value of 0, so remove that from the documentation.



---

archive/issue_comments_456160.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-09T17:58:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456160",
    "user": "bhutz"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_456161.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-09T18:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456161",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_456162.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-09T18:05:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456162",
    "user": "@EnderWannabe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_456163.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-09T18:05:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456163",
    "user": "bhutz"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_456164.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-25T13:25:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31929",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31929#issuecomment-456164",
    "user": "vbraun"
}
```

Resolution: fixed
