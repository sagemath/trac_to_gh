# Issue 24312: Clean up MPC declarations

Issue created by migration from https://trac.sagemath.org/ticket/24549

Original creator: jdemeyer

Original creation time: 2018-01-16 14:51:10

CC:  vklein




---

Comment by jdemeyer created at 2018-01-16 15:28:59

New commits:


---

Comment by jdemeyer created at 2018-01-16 15:28:59

Changing status from new to needs_review.


---

Comment by vklein created at 2018-01-16 22:04:03

make ptestlong works for me. 
I just don't see what is missing for the three patchbot with failures.


---

Comment by vklein created at 2018-01-17 09:13:34

I have a failure with fricas package installed.



```
sage$ sage -i fricas
...
...
sage$ sage -t --long --warn-long 73.9 src/sage/interfaces/fricas.py
**********************************************************************
File "src/sage/interfaces/fricas.py", line 1097, in sage.interfaces.fricas.FriCASElement._sage_expression
Failed example:
    [f(x)._fricas_().sage().subs(x=0.9) for f in l]               # optional - fricas
Expected:
    [0.716297870199024,
     1.02651672570818,
     1.43308638544877,
     1.39606725303001,
     0.697794641100332,
     0.974168247780004,
     0.808866935652782,
     NaN,
     1.47221948958322,
     NaN,
     0.467145308103262,
     0.957800449200672,
     0.808866935652782,
     NaN,
     1.47221948958322,
     NaN,
     0.467145308103262,
     0.957800449200672]
Got:
    [0.716297870199024,
     1.02651672570818,
     1.43308638544877,
     1.39606725303001,
     0.697794641100332,
     0.974168247780004,
     0.808866935652782,
     0.451026811796262*I,
     1.47221948958322,
     1.47221948958322,
     0.467145308103262,
     0.957800449200672,
     0.808866935652782,
     0.451026811796262*I,
     1.47221948958322,
     1.47221948958322,
     0.467145308103262,
     0.957800449200672]
**********************************************************************
1 item had failures:
   1 of  10 in sage.interfaces.fricas.FriCASElement._sage_expression
    [173 tests, 1 failure, 38.38 s]
----------------------------------------------------------------------
sage -t --long --warn-long 73.9 src/sage/interfaces/fricas.py  # 1 doctest failed
```


I am currently testing with 8.2.beta2 to see if it is a side effect of this ticket.


---

Comment by vklein created at 2018-01-17 10:33:51

I get the same error with 8.2.beta2.

The remaining failures in patchbot are in cone.py and special.py: 

```
K = random_cone(min_ambient_dim=3, # long time
                    max_ambient_dim=3, # long time
                    min_rays=7)        # long time
```

this one may be hard to reproduce.

special.py : Failures with random_matrix results.

Does anybody knows what can cause this ?


---

Comment by vklein created at 2018-01-17 10:40:43

Fricas doctest failure already has a ticket #24426.


---

Comment by jdemeyer created at 2018-01-17 10:46:42

Ignore the patchbot failures. They all have tickets already.


---

Comment by vklein created at 2018-01-17 10:48:00

Ok


---

Comment by vklein created at 2018-01-17 10:48:00

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2018-01-17 12:36:44

The "Reviewer" field of the ticket must be your full name and not your login.


---

Comment by vbraun created at 2018-01-20 10:42:54

Resolution: fixed
