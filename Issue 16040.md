# Issue 16040: MOLS constructions rom the Handbook of Combinatorial Designs

Issue created by migration from https://trac.sagemath.org/ticket/16277

Original creator: ncohen

Original creation time: 2014-05-02 10:32:20

CC:  vdelecroix brett

Heeeeeere they are ! `;-)`


---

Comment by ncohen created at 2014-05-02 12:38:28

Changing status from new to needs_review.


---

Comment by git created at 2014-05-02 12:39:46

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by ncohen created at 2014-05-02 12:41:08

Only the last commit implements something. All others are dependencies.

God, I can't say how glad I am to see this ticket created `:-P`

Nathann


---

Comment by ncohen created at 2014-05-02 12:43:23

By the way Vincent : the database takes 30s to test on my computer... Do we make those tests long tests ?

Nathann


---

Comment by vdelecroix created at 2014-05-02 23:24:51

Changing status from needs_review to needs_work.


---

Comment by vdelecroix created at 2014-05-02 23:24:51

Hi Nathann,

Globally looks good. Documentation builds and all test pass.

1) Could we make it go after #16272? There is a moderately trivial rebase to do. I think it would be easier in that direction.

2) Could we also move the `TD_6_12` into the database module?

3) In the doctests of database, I would rather call directly the function themselves followed by `is_transversal_design`. We have no idea (at least me) that the corresponding design is actually returned when we call `designs.orthogonal_array` with the good parameters. Nevertheless it is a good test to check that the latter actually return a value for those parameters (and to see whether or not it is the corresponding value).

4) (semi-stupid remark) For the 6 construction of OA from Vmt, the function is rather trivial. One way to avoid duplication is to modify the dictionnary into `n -> (k, constructor, extra_args)`. For the Vmt the entries would look like

```
OA_constructions = {
...
46: (6, OA_from_Vmt, (4,9,[0, 1, 3, 2, 8])),
50: (8, OA_from_Vmt, (6,7,[0, 1, 3, 16, 35, 26, 36])),
...
}
```


Vincent


---

Comment by ncohen created at 2014-05-03 06:16:38

Yo !

> 1) Could we make it go after #16272? There is a moderately trivial rebase to do. I think it would be easier in that direction.

Yeah, no problem I guess.

> 2) Could we also move the `TD_6_12` into the database module?

Yepyep, I will do that.

> 3) In the doctests of database, I would rather call directly the function themselves followed by `is_transversal_design`. We have no idea (at least me) that the corresponding design is actually returned when we call `designs.orthogonal_array` with the good parameters. Nevertheless it is a good test to check that the latter actually return a value for those parameters (and to see whether or not it is the corresponding value).

'f you want ......

> 4) (semi-stupid remark) For the 6 construction of OA from Vmt, the function is rather trivial. One way to avoid duplication is to modify the dictionnary into `n -> (k, constructor, extra_args)`. For the Vmt the entries would look like
> {{{
> OA_constructions = {
> ...
> 46: (6, OA_from_Vmt, (4,9,[0, 1, 3, 2, 8])),
> 50: (8, OA_from_Vmt, (6,7,[0, 1, 3, 16, 35, 26, 36])),
> ...
> }
> }}}

If we do that the OA will be built when Sage starts. Plus I would like to thank Julian R. Abel somewhere.

Nathann


---

Comment by vdelecroix created at 2014-05-03 06:31:24

Replying to [comment:8 ncohen]:
> > 4) (semi-stupid remark) For the 6 construction of OA from Vmt, the function is rather trivial. One way to avoid duplication is to modify the dictionnary into `n -> (k, constructor, extra_args)`. For the Vmt the entries would look like
> > {{{
> > OA_constructions = {
> > ...
> > 46: (6, OA_from_Vmt, (4,9,[0, 1, 3, 2, 8])),
> > 50: (8, OA_from_Vmt, (6,7,[0, 1, 3, 16, 35, 26, 36])),
> > ...
> > }
> > }}}
> 
> If we do that the OA will be built when Sage starts. Plus I would like to thank Julian R. Abel somewhere.

Agreed. And it is better to test the corresponding code in the docstring of the function.


---

Comment by ncohen created at 2014-05-03 06:37:21

Here it is. Gosh, it takes a lifetime to update all the doctests....

For the moment it still uses the `availability` keyword, and this ticket has not been merged on tpo of #16272. This is because the #16272 is not finished and I don't want to merge it before that.

Nathann


---

Comment by git created at 2014-05-03 06:38:05

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-05-03 06:55:56

Changing status from needs_work to needs_review.


---

Comment by vdelecroix created at 2014-05-03 08:05:22

Hi Nathann,

In the doctest, I would like to see:

```
sage: TD = TD_6_12()
sage: TDbis = designs.transversal_design(6,12)
sage: TD == TDbis
True
```

It is worth it to see if the individual designs are actually used in the construction, isn't it? Even if the answer is `False` at some point, it still makes sense to keep the function and the doctest.

I do not mind too much as it is painful to edit all doctests in `database.py`.

Vincent


---

Comment by ncohen created at 2014-05-03 08:06:54

> In the doctest, I would like to see:

Hey man, what you "would like to see" takes me 20 minutes each time....

> {{{
> sage: TD = TD_6_12()
> sage: TDbis = designs.transversal_design(6,12)
> sage: TD == TDbis
> True
> }}}

WHAT IS THE POIIIIIIIIIIIIIIIINT ????

> It is worth it to see if the individual designs are actually used in the construction, isn't it? Even if the answer is `False` at some point, it still makes sense to keep the function and the doctest.

Who cares ? The function checks that the designs returned are good, and it checks that they are available through the main entry point. It already takes 30 seconds to check this file ! You want to double it to check  ... that ?

Nathann


---

Comment by vdelecroix created at 2014-05-03 08:22:44

As I said, I don't mind as I know that it is painful to edit.

The point is that in the future, somebody might come and ask: for a given k,n how many *different* TD(k,n) do I have? But an equality test is far from an isomorphism test, so please leave it.

Vincent


---

Comment by ncohen created at 2014-05-03 08:33:58

> The point is that in the future, somebody might come and ask: for a given k,n how many *different* TD(k,n) do I have? But an equality test is far from an isomorphism test, so please leave it.

......

Yeah, I guess it is a bit too early to do things like that ...

Nathann


---

Comment by git created at 2014-05-03 15:35:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-05-04 07:04:27

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by ncohen created at 2014-05-04 07:05:12

God. There *WERE* conflicts `:-PPP`

Nothing bad, but still, the file was messy at first `^^;`

Nathann


---

Comment by vdelecroix created at 2014-05-04 10:26:30

Hi Nathann,

In `orthogonal_arrays.py` in the function `transversal_design` you added a test

```
`TD(6,12)` ::

    sage: _ = designs.transversal_design(6,12)
```

which is actually already tested in the block above it *and* in `database.py`. So if you don't mind, you can simply remove it.

Otherwise, everything is fine and it could go to positive review after that!

Vincent


---

Comment by git created at 2014-05-04 14:08:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2014-05-04 14:12:56

Well, then ...


---

Comment by ncohen created at 2014-05-04 14:12:56

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2014-05-04 14:13:32

(by the way it was also tested in the `TD_product` docstring)


---

Comment by git created at 2014-05-04 16:24:48

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2014-05-04 16:24:48

Changing status from positive_review to needs_review.


---

Comment by ncohen created at 2014-05-04 16:25:43

Still updating ...

Nathann


---

Comment by ncohen created at 2014-05-04 16:25:43

Changing status from needs_review to positive_review.


---

Comment by git created at 2014-05-08 08:28:47

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2014-05-08 08:28:47

Changing status from positive_review to needs_review.


---

Comment by ncohen created at 2014-05-08 08:29:40

Changing status from needs_review to positive_review.


---

Comment by git created at 2014-05-12 14:43:18

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:


---

Comment by git created at 2014-05-12 14:43:18

Changing status from positive_review to needs_review.


---

Comment by ncohen created at 2014-05-12 14:44:58

ARGGGGGGGGGGGGGG.... Wrong push `T_T`


---

Comment by ncohen created at 2014-05-12 14:45:36

Back to the previous one `T_T`


---

Comment by git created at 2014-05-12 14:45:42

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by ncohen created at 2014-05-12 14:47:18

Changing status from needs_review to positive_review.


---

Comment by git created at 2014-05-12 14:50:00

Changing status from positive_review to needs_review.


---

Comment by git created at 2014-05-12 14:50:00

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by ncohen created at 2014-05-12 14:50:22

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2014-05-12 14:50:22

Better `-_-`


---

Comment by vbraun created at 2014-05-13 10:54:54

Resolution: fixed
