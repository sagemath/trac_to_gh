# Issue 15891: FiniteStateMachine: colors lists, not tuples

archive/issues_015891.json:
```json
{
    "body": "CC:  @dkrenn skropf\n\nKeywords: finite_state_machine\n\nBetween the time when #15963 was merged in develop and #15963 was actually closed, I found and fixed a bug and pushed it to #15963, see http://trac.sagemath.org/ticket/15963#comment:4. However, due to the race condition outlined above, this fix has never been merged.\n\nThus, this is a new ticket with the same fix.\n\nFor convenience, I repeat http://trac.sagemath.org/ticket/15963#comment:4:\n\nThe following behaviour is undesired (docstrings says that colors are tuples of the colors of the constituent states, but this is not the case and leads to problems in Automaton.determinisation):\n\n\n```\nsage: A = Automaton([[0, 0, 0]], initial_states=[0])\nsage: B = A.product_FiniteStateMachine(A,\n....:                                  lambda t1, t2: (0, None))\nsage: B.states()[0].color\n[None, None]\nsage: B.determinisation()\nTraceback (most recent call last):\n...\nTypeError: unhashable type: 'list'\nsage: A = Automaton([[0, 0, 0]], initial_states=[0])\nsage: B = A.composition(A, algorithm='explorative')\nsage: B.states()[0].color\n[None, None]\nsage: B.determinisation()\nTraceback (most recent call last):\n...\nTypeError: unhashable type: 'list'\n```\n\n\nI pushed commits correcting this and adding two more docstrings to emphasize that colors have to be hashable in order to be able to use Automaton.determinisation.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/16128\n\n",
    "created_at": "2014-04-11T06:30:53Z",
    "labels": [
        "component: combinatorics",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.2",
    "title": "FiniteStateMachine: colors lists, not tuples",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15891",
    "user": "https://github.com/cheuberg"
}
```
CC:  @dkrenn skropf

Keywords: finite_state_machine

Between the time when #15963 was merged in develop and #15963 was actually closed, I found and fixed a bug and pushed it to #15963, see http://trac.sagemath.org/ticket/15963#comment:4. However, due to the race condition outlined above, this fix has never been merged.

Thus, this is a new ticket with the same fix.

For convenience, I repeat http://trac.sagemath.org/ticket/15963#comment:4:

The following behaviour is undesired (docstrings says that colors are tuples of the colors of the constituent states, but this is not the case and leads to problems in Automaton.determinisation):


```
sage: A = Automaton([[0, 0, 0]], initial_states=[0])
sage: B = A.product_FiniteStateMachine(A,
....:                                  lambda t1, t2: (0, None))
sage: B.states()[0].color
[None, None]
sage: B.determinisation()
Traceback (most recent call last):
...
TypeError: unhashable type: 'list'
sage: A = Automaton([[0, 0, 0]], initial_states=[0])
sage: B = A.composition(A, algorithm='explorative')
sage: B.states()[0].color
[None, None]
sage: B.determinisation()
Traceback (most recent call last):
...
TypeError: unhashable type: 'list'
```


I pushed commits correcting this and adding two more docstrings to emphasize that colors have to be hashable in order to be able to use Automaton.determinisation.


Issue created by migration from https://trac.sagemath.org/ticket/16128





---

archive/issue_comments_206117.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-04-11T06:31:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15891#issuecomment-206117",
    "user": "https://github.com/cheuberg"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_206118.json:
```json
{
    "body": "I've checked already the changes between merging and closing of #15963. Everything looks fine.",
    "created_at": "2014-04-15T13:14:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15891#issuecomment-206118",
    "user": "https://github.com/dkrenn"
}
```

I've checked already the changes between merging and closing of #15963. Everything looks fine.



---

archive/issue_comments_206119.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-04-15T13:14:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15891#issuecomment-206119",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_206120.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2014-04-16T09:10:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15891",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15891#issuecomment-206120",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
