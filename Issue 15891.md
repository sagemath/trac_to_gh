# Issue 15891: FiniteStateMachine: colors lists, not tuples

Issue created by migration from Trac.

Original creator: cheuberg

Original creation time: 2014-04-11 06:30:53

CC:  dkrenn skropf

Keywords: finite_state_machine

Between the time when #15963 was merged in develop and #15963 was actually closed, I found and fixed a bug and pushed it to #15963, see http://trac.sagemath.org/ticket/15963#comment:4. However, due to the race condition outlined above, this fix has never been merged.

Thus, this is a new ticket with the same fix.

For convenience, I repeat http://trac.sagemath.org/ticket/15963#comment:4:

The following behaviour is undesired (docstrings says that colors are tuples of the colors of the constituent states, but this is not the case and leads to problems in Automaton.determinisation):


```
sage: A = Automaton([This is the Trac macro *0, 0, 0* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#0, 0, 0-macro), initial_states=[0])
sage: B = A.product_FiniteStateMachine(A,
....:                                  lambda t1, t2: (0, None))
sage: B.states()[0].color
[None, None]
sage: B.determinisation()
Traceback (most recent call last):
...
TypeError: unhashable type: 'list'
sage: A = Automaton([This is the Trac macro *0, 0, 0* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#0, 0, 0-macro), initial_states=[0])
sage: B = A.composition(A, algorithm='explorative')
sage: B.states()[0].color
[None, None]
sage: B.determinisation()
Traceback (most recent call last):
...
TypeError: unhashable type: 'list'
```


I pushed commits correcting this and adding two more docstrings to emphasize that colors have to be hashable in order to be able to use Automaton.determinisation.



---

Comment by cheuberg created at 2014-04-11 06:31:13

Changing status from new to needs_review.


---

Comment by dkrenn created at 2014-04-15 13:14:16

I've checked already the changes between merging and closing of #15963. Everything looks fine.


---

Comment by dkrenn created at 2014-04-15 13:14:16

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-04-16 09:10:48

Resolution: fixed
