# Issue 12210: Output of a two functions in sage.plot.plot3d.base is nondeterministic due to use of set

Issue created by migration from Trac.

Original creator: roed

Original creation time: 2012-01-29 07:56:35

Assignee: jason, was

CC:  jpflori

Graphics3d.tachyon and Graphics3d.mtl_str both join string representations of the textures in Graphics3d.texture_set().  The order of elements pulled out of texture_set() can be different.


---

Comment by roed created at 2012-01-29 08:04:13

Changing status from new to needs_review.


---

Attachment


---

Comment by kcrisman created at 2012-03-16 02:41:17

I'm not quite sure why this happens - all is fine with or without on Mac, I know `set` is system-dependent? - but this definitely is a good fix and it's correct in the doctest.  Can you tell me where it _didn't_ work?  I assume this was discovered due to a doctest failure, but it must have been on an uncommon platform, perhaps?

Anyway, modulo that, positive review.


---

Comment by roed created at 2012-03-16 21:33:06

It was discovered while developing the new doctesting framework at #12415.


---

Comment by kcrisman created at 2012-03-17 01:29:07

Ok, but I mean on what platform?  I'm concerned to try to test that this works properly everywhere.  Any other details would be helpful.


---

Comment by roed created at 2012-03-17 08:46:07

It was on OS X 10.6, but using different doctesting code (that hasn't been posted to #12415 yet).  Currently I don't know of any platforms where this problem arises.  The objective of this ticket is to make #12415 less of a patch-bomb.  :-)


---

Comment by kcrisman created at 2012-03-18 01:38:13

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2012-03-18 01:38:13

Ok... well, I guess since I tested on that platform I can say this is fine.  But it seems odd to me that this would make a difference regarding which order the set happens in, if nothing else changed... Anyway, comparing pictures of 

```
G = icosahedron(color='red') + sphere((0,0,0), .6, color='yellow')
```

in Tachyon before and after the change they seem the same, and everything else seems good.


---

Comment by jdemeyer created at 2012-03-28 10:04:56

Resolution: fixed
