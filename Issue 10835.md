# Issue 10835: Factorization is not coercion-friendly

Issue created by migration from Trac.

Original creator: lftabera

Original creation time: 2011-03-10 17:12:55

Assignee: robertwb

Keywords: Factorization, coercion

I get the following:


```
sage: K = QQ[x]
sage: f1 = K.random_element()
sage: f2 = K.random_element()
sage: f= f1*f2               
sage: F = factor(f)
sage: f-F
...
TypeError: unsupported operand parent(s) for '-': 'Univariate Polynomial Ring in x over Rational Field' and '<class 'sage.structure.factorization.Factorization'>'
sage: F-f
0
sage: f == F
False
sage: F in K
False
```


I think that at least f-F should work.


---

Comment by fwclarke created at 2011-03-11 08:17:18

Note that (following on from the above)

```
sage: F - f
0
```


Including definitions for `__radd__` and `__rsub__` for the `sage.structure.factorization.Factorization` class should fix the `f - F` problem.

The other two results seem reasonable to me.


---

Attachment


---

Comment by fwclarke created at 2011-03-11 09:39:03

Changing keywords from "Factorization, coercion" to "Factorization".


---

Comment by fwclarke created at 2011-03-11 09:39:03

The attached patch allows right addition and right subtraction for factorizations.


---

Comment by fwclarke created at 2011-03-11 09:39:03

Changing component from coercion to factorization.


---

Comment by fwclarke created at 2011-03-11 09:39:03

Changing status from new to needs_review.


---

Comment by lftabera created at 2011-03-11 12:31:35

Wow, thanks!

The code is simple, a direct translation of __add__ and __sub__

The code passes doctest. The issue is fixed and I have tested the code in other situations (like different parent for the operands) and everithing works as expected.

Concerning the other issues I can live with them.

Positive review


---

Comment by lftabera created at 2011-03-11 12:31:35

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-03-17 19:23:47

Resolution: fixed
