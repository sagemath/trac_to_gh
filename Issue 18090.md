# Issue 18090: Fix graph bounding box

Issue created by migration from Trac.

Original creator: vbraun

Original creation time: 2015-04-29 02:07:47

CC:  nthiery ncohen




---

Comment by vbraun created at 2015-04-29 02:09:59

Changing component from PLEASE CHANGE to graph theory.


---

Comment by vbraun created at 2015-04-29 02:09:59

Changing type from PLEASE CHANGE to defect.


---

Comment by vbraun created at 2015-04-29 02:24:34

Changing status from new to needs_review.


---

Comment by vbraun created at 2015-04-29 02:24:34

New commits:


---

Comment by ncohen created at 2015-04-29 07:58:32

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2015-04-29 07:58:32

Looks good on all graphs I can try. Good to go!

Nathann


---

Comment by vbraun created at 2015-04-30 02:56:40


```
sage -t --long src/sage/graphs/graph_generators.py
**********************************************************************
File "src/sage/graphs/graph_generators.py", line 511, in sage.graphs.graph_generators.GraphGenerators
Failed example:
    graphs_list.show_graphs(L)              # long time
Expected nothing
Got:
    doctest:1004: UserWarning: Unable to find pixel distance along axis for interval padding; assuming no interval padding needed.
    doctest:1011: UserWarning: Unable to find pixel distance along axis for interval padding; assuming no interval padding needed.
**********************************************************************
1 item had failures:
   1 of  33 in sage.graphs.graph_generators.GraphGenerators
    [78 tests, 1 failure, 12.66 s]
```

This is because without the artificial padding of axes you can have graph plots with extreme dimensions where the only two nodes are aligned along one axis. Its not specific to graphs, though, you can trigger it without as well:

```
sage: line([(1e-19,-1), (-1e-19,+1)], aspect_ratio=1.0)
/home/vbraun/Code/sage/local/lib/python2.7/site-packages/matplotlib-1.3.1-py2.7-linux-x86_64.egg/matplotlib/axis.py:1004: UserWarning: Unable to find pixel distance along axis for interval padding; assuming no interval padding needed.
  warnings.warn("Unable to find pixel distance along axis for interval padding; assuming no interval padding needed.")
/home/vbraun/Code/sage/local/lib/python2.7/site-packages/matplotlib-1.3.1-py2.7-linux-x86_64.egg/matplotlib/axis.py:1011: UserWarning: Unable to find pixel distance along axis for interval padding; assuming no interval padding needed.
  warnings.warn("Unable to find pixel distance along axis for interval padding; assuming no interval padding needed.")
Launched png viewer for Graphics object consisting of 1 graphics primitive
```

The warning means that matplotlib trips over floating point errors.


---

Comment by vbraun created at 2015-04-30 02:56:40

Changing status from positive_review to needs_work.


---

Comment by ncohen created at 2015-04-30 08:48:20

Funny. I tetsted this branch with `posets.ChainPoset(4).show()` (which has always been rather ugly) and this did not happen `O_o`


---

Comment by git created at 2015-04-30 10:54:58

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2015-04-30 10:55:41

Changing status from needs_work to needs_review.


---

Comment by ncohen created at 2015-04-30 11:17:13

Could you copy [the 4-lines explanation that you added before the new doctest] into the doc of your new function? It will be helpful for whoever will reaad it in the future.


---

Comment by git created at 2015-04-30 19:05:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vbraun created at 2015-04-30 19:07:03

Done


---

Comment by ncohen created at 2015-05-01 13:41:13

Looks good. Could you add a doctest for the bug that you fixed ? Then I guess that it can go. Thanks!


---

Comment by git created at 2015-05-01 17:04:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by ncohen created at 2015-05-02 05:56:16

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2015-05-02 05:56:16

THaaaaaaaaaaaaaaaaanks !!


---

Comment by vbraun created at 2015-05-02 19:28:31

Resolution: fixed


---

Comment by jhpalmieri created at 2015-05-21 01:46:10

I think this change is responsible for the problem reported in #18463.
