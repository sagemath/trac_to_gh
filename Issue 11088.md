# Issue 11088: ECL-11.1.1 fails to compile maxima on WIndows 7 / Cygwin 1.7.9

archive/issues_011088.json:
```json
{
    "body": "Assignee: tbd\n\nKeywords: fork, remap, ecl\n\nSymptoms - dreadfully looking errors on address spaces of DLLs with temporary names, and dead or dying forks...\n \n\n```\n;      - Compiling source file\n;        \"/home/dima/sage-4.7.alpha5/spkg/build/maxima-5.23.2/src/src/clmacs.lis\np\"\n;;;\n;;; Compiling /home/dima/sage-4.7.alpha5/spkg/build/maxima-5.23.2/src/src/clmacs\n.lisp.\n;;; OPTIMIZE levels: Safety=2, Space=0, Speed=3, Debug=2\n;;;\n;;; Compiling (DEFUN MEMQ ...).\n\n[...]\n\n;;; Emitting code for DO-MERGE-SYMM.\n;;; Emitting code for DO-MERGE-ASYM.\n;;; Note:\n;;;   Constant value optimized away or not used\n;;; (t)\n;;; Note:\n;;;   Invoking external command:\n;;;   gcc -I. -I/home/dima/sage-4.7.alpha5/local/include/ -I/home/dima/sage-4.7.\nalpha5/local/include -g -O2 -Dcygwin -O2 -w -c binary-ecl/clmacs.c -o binary-ecl\n/clmacs.o\n;;; Finished compiling /home/dima/sage-4.7.alpha5/spkg/build/maxima-5.23.2/src/s\nrc/clmacs.lisp.\n;;;\n;;; Note:\n;;;   Invoking external command:\n;;;   gcc -I. -I/home/dima/sage-4.7.alpha5/local/include/ -I/home/dima/sage-4.7.\nalpha5/local/include -g -O2 -Dcygwin -O2 -w -c /tmp/eclinit7mTHXx.c -o /tmp/ecli\nnit7mTHXx.o\n      4 [main] ecl 2684 C:\\cygwin\\home\\dima\\sage-4.7.alpha5\\local\\bin\\ecl.exe: *\n** fatal error - unable to remap \\\\?\\C:\\cygwin\\tmp\\eclBeSwlo.dll to same address\n as parent: 0x320000 != 0x420000\n      4 [main] ecl 2684 C:\\cygwin\\home\\dima\\sage-4.7.alpha5\\local\\bin\\ecl.exe: *\n** fatal error - unable to remap \\\\?\\C:\\cygwin\\tmp\\eclBeSwlo.dll to same address\n as parent: 0x320000 != 0x420000\nStack trace:\nFrame     Function  Args\n0022A4B8  6102796B  (0022A4B8, 00000000, 00000000, 00000000)\n0022A7A8  6102796B  (6117EC60, 00008000, 00000000, 61180977)\n0022B7D8  61004F1B  (611A7FAC, 6124AB54, 00320000, 00420000)\nEnd of stack trace\n      3 [main] ecl 3168 fork: child 2684 - died waiting for dll loading, errno 1\n1\n      3 [main] ecl 3168 fork: child 2684 - died waiting for dll loading, errno 1\n1\nAn error occurred during initialization:\nCould not spawn subprocess to run \"gcc\"..\n;;; Note:\n;;;   Invoking external command:\n;;;   gcc -o binary-ecl/clmacs.fas -L/home/dima/sage-4.7.alpha5/local/lib/ /tmp/\neclinit7mTHXx.o binary-ecl/clmacs.o -shared -L/home/dima/sage-4.7.alpha5/local/l\nib -Wl,--enable-auto-image-base -L/home/dima/sage-4.7.alpha5/local/lib -Wl,--ena\nble-auto-image-base -lecl -lgmp -lgc -lm make[1]: *** [binary-ecl/maxima] Error\n1\nmake[1]: Leaving directory `/home/dima/sage-4.7.alpha5/spkg/build/maxima-5.23.2/\nsrc/src'\nmake: *** [install-recursive] Error 1\n***********************************************************\nFailed to install Maxima.\n***********************************************************\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/11260\n\n",
    "created_at": "2011-04-27T12:12:02Z",
    "labels": [
        "component: porting: cygwin",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "ECL-11.1.1 fails to compile maxima on WIndows 7 / Cygwin 1.7.9",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11088",
    "user": "https://github.com/dimpase"
}
```
Assignee: tbd

Keywords: fork, remap, ecl

Symptoms - dreadfully looking errors on address spaces of DLLs with temporary names, and dead or dying forks...
 

```
;      - Compiling source file
;        "/home/dima/sage-4.7.alpha5/spkg/build/maxima-5.23.2/src/src/clmacs.lis
p"
;;;
;;; Compiling /home/dima/sage-4.7.alpha5/spkg/build/maxima-5.23.2/src/src/clmacs
.lisp.
;;; OPTIMIZE levels: Safety=2, Space=0, Speed=3, Debug=2
;;;
;;; Compiling (DEFUN MEMQ ...).

[...]

;;; Emitting code for DO-MERGE-SYMM.
;;; Emitting code for DO-MERGE-ASYM.
;;; Note:
;;;   Constant value optimized away or not used
;;; (t)
;;; Note:
;;;   Invoking external command:
;;;   gcc -I. -I/home/dima/sage-4.7.alpha5/local/include/ -I/home/dima/sage-4.7.
alpha5/local/include -g -O2 -Dcygwin -O2 -w -c binary-ecl/clmacs.c -o binary-ecl
/clmacs.o
;;; Finished compiling /home/dima/sage-4.7.alpha5/spkg/build/maxima-5.23.2/src/s
rc/clmacs.lisp.
;;;
;;; Note:
;;;   Invoking external command:
;;;   gcc -I. -I/home/dima/sage-4.7.alpha5/local/include/ -I/home/dima/sage-4.7.
alpha5/local/include -g -O2 -Dcygwin -O2 -w -c /tmp/eclinit7mTHXx.c -o /tmp/ecli
nit7mTHXx.o
      4 [main] ecl 2684 C:\cygwin\home\dima\sage-4.7.alpha5\local\bin\ecl.exe: *
** fatal error - unable to remap \\?\C:\cygwin\tmp\eclBeSwlo.dll to same address
 as parent: 0x320000 != 0x420000
      4 [main] ecl 2684 C:\cygwin\home\dima\sage-4.7.alpha5\local\bin\ecl.exe: *
** fatal error - unable to remap \\?\C:\cygwin\tmp\eclBeSwlo.dll to same address
 as parent: 0x320000 != 0x420000
Stack trace:
Frame     Function  Args
0022A4B8  6102796B  (0022A4B8, 00000000, 00000000, 00000000)
0022A7A8  6102796B  (6117EC60, 00008000, 00000000, 61180977)
0022B7D8  61004F1B  (611A7FAC, 6124AB54, 00320000, 00420000)
End of stack trace
      3 [main] ecl 3168 fork: child 2684 - died waiting for dll loading, errno 1
1
      3 [main] ecl 3168 fork: child 2684 - died waiting for dll loading, errno 1
1
An error occurred during initialization:
Could not spawn subprocess to run "gcc"..
;;; Note:
;;;   Invoking external command:
;;;   gcc -o binary-ecl/clmacs.fas -L/home/dima/sage-4.7.alpha5/local/lib/ /tmp/
eclinit7mTHXx.o binary-ecl/clmacs.o -shared -L/home/dima/sage-4.7.alpha5/local/l
ib -Wl,--enable-auto-image-base -L/home/dima/sage-4.7.alpha5/local/lib -Wl,--ena
ble-auto-image-base -lecl -lgmp -lgc -lm make[1]: *** [binary-ecl/maxima] Error
1
make[1]: Leaving directory `/home/dima/sage-4.7.alpha5/spkg/build/maxima-5.23.2/
src/src'
make: *** [install-recursive] Error 1
***********************************************************
Failed to install Maxima.
***********************************************************
```


Issue created by migration from https://trac.sagemath.org/ticket/11260





---

archive/issue_comments_121021.json:
```json
{
    "body": "I've posted this to the ecl list, but it would probably help if you attached build logs of ECL and Maxima.",
    "created_at": "2011-04-28T05:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11088#issuecomment-121021",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

I've posted this to the ecl list, but it would probably help if you attached build logs of ECL and Maxima.



---

archive/issue_comments_121022.json:
```json
{
    "body": "The ECL developer Juanjo has written on the ECL and sage-devel lists:\n\n*I know about these bug reports -- similar ones appeared on a different context --. Unfortunately I am at a peak of work load and will solve them slower than usual. Thanks for reminding.*",
    "created_at": "2011-04-28T09:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11088#issuecomment-121022",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

The ECL developer Juanjo has written on the ECL and sage-devel lists:

*I know about these bug reports -- similar ones appeared on a different context --. Unfortunately I am at a peak of work load and will solve them slower than usual. Thanks for reminding.*



---

archive/issue_comments_121023.json:
```json
{
    "body": "Data point:  Maxima compiled successfully on my Windows 7 machine just now.  `./sage -maxima` worked and I integrated `2x`.   I did not do anything special to get this to happen.",
    "created_at": "2011-06-28T17:37:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11088#issuecomment-121023",
    "user": "https://github.com/kcrisman"
}
```

Data point:  Maxima compiled successfully on my Windows 7 machine just now.  `./sage -maxima` worked and I integrated `2x`.   I did not do anything special to get this to happen.



---

archive/issue_comments_121024.json:
```json
{
    "body": "I should say that I did see several \"fork\" and \"waiting for resource\" errors, but those apparently weren't fatal.  So it may be that Maxima and anything else that needs fork will work randomly, depending on what else the system is up to.",
    "created_at": "2011-06-28T17:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11088#issuecomment-121024",
    "user": "https://github.com/kcrisman"
}
```

I should say that I did see several "fork" and "waiting for resource" errors, but those apparently weren't fatal.  So it may be that Maxima and anything else that needs fork will work randomly, depending on what else the system is up to.



---

archive/issue_comments_121025.json:
```json
{
    "body": "This time Maxima failed to build with the usual fork errors.   I'm trying make again. \n\n----\n\nJuanjo reports that he has changed the way ECL handles forking on Cygwin so that this will not be a problem - the Maxima folks want it to work too - though it removes some capabilities on Cygwin.  Apparently, that won't be a problem for Sage, however.",
    "created_at": "2011-07-01T13:59:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11088#issuecomment-121025",
    "user": "https://github.com/kcrisman"
}
```

This time Maxima failed to build with the usual fork errors.   I'm trying make again. 

----

Juanjo reports that he has changed the way ECL handles forking on Cygwin so that this will not be a problem - the Maxima folks want it to work too - though it removes some capabilities on Cygwin.  Apparently, that won't be a problem for Sage, however.



---

archive/issue_comments_121026.json:
```json
{
    "body": "dimpase reports on [this sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/1a3ddc6dd70fa8aa) (at the very end) that Maxima now compiles on Windows 7 with the new ECL spkg for Lion at #11884.\n\nMy guess is that if Dima positively reviews as sage-invalid, that would be sufficient.  This would not close #11502 since that is an XP problem, though likely we will simply just forget about XP soon.",
    "created_at": "2011-12-01T17:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11088#issuecomment-121026",
    "user": "https://github.com/kcrisman"
}
```

dimpase reports on [this sage-devel thread](http://groups.google.com/group/sage-devel/browse_thread/thread/1a3ddc6dd70fa8aa) (at the very end) that Maxima now compiles on Windows 7 with the new ECL spkg for Lion at #11884.

My guess is that if Dima positively reviews as sage-invalid, that would be sufficient.  This would not close #11502 since that is an XP problem, though likely we will simply just forget about XP soon.



---

archive/issue_comments_121027.json:
```json
{
    "body": "Dima, I've set this one as well to sage-invalid.  If you agree with this, just set to positive review.",
    "created_at": "2011-12-03T02:31:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11088#issuecomment-121027",
    "user": "https://github.com/kcrisman"
}
```

Dima, I've set this one as well to sage-invalid.  If you agree with this, just set to positive review.



---

archive/issue_comments_121028.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-12-03T02:31:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11088#issuecomment-121028",
    "user": "https://github.com/kcrisman"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_121029.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-12-03T03:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11088#issuecomment-121029",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_011189.json:
```json
{
    "actor": "@jdemeyer",
    "created_at": "2011-12-09T10:24:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/11088",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/11088#event-11189"
}
```



---

archive/issue_comments_121030.json:
```json
{
    "body": "Resolution: duplicate",
    "created_at": "2011-12-09T10:24:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11088",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11088#issuecomment-121030",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: duplicate
