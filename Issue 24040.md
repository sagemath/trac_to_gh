# Issue 24040: Define one() as alias of identity() in homsets

Issue created by migration from https://trac.sagemath.org/ticket/24277

Original creator: jdemeyer

Original creation time: 2017-11-24 15:41:56

It is natural to see a homset with domain == codomain as a monoid. With that in mind, homsets should have a `one()` method aliasing `identity()`.


---

Comment by jdemeyer created at 2017-11-24 15:55:51

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2017-11-24 15:55:51

New commits:


---

Comment by jdemeyer created at 2017-11-25 08:38:44

Changing status from needs_review to needs_work.


---

Comment by tscrim created at 2017-11-25 11:50:30

The product of ring morphisms failure comes from this difference:

```
sage: H = Hom(QQ, QQ, category = Rings())
sage: psi = H.an_element()
sage: I = H.identity()
sage: psi * I
Composite map:
  From: Rational Field
  To:   Rational Field
  Defn:   Identity endomorphism of Rational Field
        then
          Ring endomorphism of Rational Field
          Defn: 1 |--> 1

sage: I * psi
Ring endomorphism of Rational Field
  Defn: 1 |--> 1
```

This could be fixed by adding another check for `IdentityMorphism` in the `RingHomomorphism._composition_` method.

I think the solution to the other two failures is to implement a `matrix` in the formal composite map that takes the appropriate product of matrices of the composite maps.


---

Comment by jdemeyer created at 2017-11-26 08:18:44

Replying to [comment:4 tscrim]:
> The product of ring morphisms failure comes from this difference:

I think that this is the real issue:

```
sage: H = End(QQ)
sage: H(1) == H.identity()
False
```


> This could be fixed by adding another check for `IdentityMorphism` in the `RingHomomorphism._composition_` method.

True, but I see that as a different issue.


---

Comment by git created at 2017-11-27 15:56:25

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2017-11-28 08:43:41

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2017-11-28 08:53:38

This should fix all doctests, but let's wait for the patchbot.


---

Comment by jdemeyer created at 2017-11-28 09:36:02

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2017-11-28 12:35:21

LGTM (modulo #24281). The `_composition_` issue I mentioned in comment:4 can be done on an independent ticket.


---

Comment by tscrim created at 2017-11-28 12:35:21

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-12-14 12:40:19

Resolution: fixed
