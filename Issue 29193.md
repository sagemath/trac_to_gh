# Issue 29193: spkg-configure.m4 for flintqs

Issue created by migration from https://trac.sagemath.org/ticket/29430

Original creator: mjo

Original creation time: 2020-03-30 12:50:40

CC:  dimpase embray mkoeppe fbissey

This package only installs the `QuadraticSieve` executable, which needs to be in the `PATH` for `qsieve()` to work in Sage.


---

Comment by mjo created at 2020-03-30 12:54:01

New commits:


---

Comment by mjo created at 2020-03-30 12:54:01

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-03-30 16:06:56

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2020-03-30 16:06:56

Needs distros/


---

Comment by git created at 2020-03-30 16:18:48

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mjo created at 2020-03-30 16:20:32

Changing status from needs_work to needs_review.


---

Comment by mjo created at 2020-03-30 16:20:32

I added debian, fedora, and gentoo (I added the Gentoo package a few seconds before opening this ticket) based on repology.org results. Ubuntu and nix have packages too, but I don't see ubuntu.txt or nix.txt anywhere in the tree.


---

Comment by mkoeppe created at 2020-03-30 16:22:01

ubuntu uses debian.txt


---

Comment by mkoeppe created at 2020-03-30 16:23:17

See #29130 for nix


---

Comment by mkoeppe created at 2020-03-30 16:23:52

Have you checked arch?


---

Comment by dimpase created at 2020-03-30 16:24:18

on conda it's `flintqs` too.


---

Comment by dimpase created at 2020-03-30 16:25:33

and on arch, cf https://www.archlinux.org/packages/community/x86_64/flintqs/


---

Comment by dimpase created at 2020-03-30 17:44:03

Fedora does not have flintqs


---

Comment by git created at 2020-03-30 17:51:43

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mjo created at 2020-03-30 17:52:35

Force pushed a rename fedora -> conda. The arch.txt was already there (before I added the m4 file).


---

Comment by dimpase created at 2020-03-30 17:58:46

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2020-03-30 17:58:46

lgtm - but add author's name


---

Comment by mkoeppe created at 2020-03-30 18:07:26

Changing status from positive_review to needs_review.


---

Comment by mkoeppe created at 2020-03-30 18:07:26

Let me run some tests first.


---

Comment by dimpase created at 2020-03-30 18:10:25

well, I did test on Debian. There is basically one version of this packages around.


---

Comment by mkoeppe created at 2020-03-31 11:42:10

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-03-31 11:42:10

Tests ran at https://github.com/mkoeppe/sage/actions/runs/66814284


---

Comment by mjo created at 2020-04-03 00:54:57

Sorry, I'll have to add "mpir" to the DEPCHECK here. I didn't realize sage installed it in place of gmp with everything renamed mpir->gmp.


---

Comment by mjo created at 2020-04-03 00:54:57

Changing status from positive_review to needs_work.


---

Comment by dimpase created at 2020-04-03 00:56:26

you need to check for BOTH gmp and mpir, not just one of them.


---

Comment by dimpase created at 2020-04-03 00:57:28

e.g.

```
SAGE_SPKG_CONFIGURE([givaro], [
    m4_pushdef([SAGE_GIVARO_MINVER],["40101"])
    SAGE_SPKG_DEPCHECK([gmp mpir], [
...
```



---

Comment by mjo created at 2020-04-03 01:05:13

Thanks, I see that now. I was rather confused about how all these packages explicitly looking for libgmp in ./configure could use MPIR in sage. I'm halfway through a build test for a ppl spkg-configure but as soon as it finishes I'll fix this up.


---

Comment by dimpase created at 2020-04-03 03:15:26

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2020-04-03 03:15:26

added this fix, rebased over latest beta
----
New commits:


---

Comment by dimpase created at 2020-04-03 03:35:17

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2020-04-03 03:35:17

lgtm


---

Comment by mkoeppe created at 2020-04-03 09:57:33

If this only installs an executable, I don't think we need any depcheck at all because there cannot be a library conflict.


---

Comment by mkoeppe created at 2020-04-03 09:58:29

Changing status from positive_review to needs_info.


---

Comment by mjo created at 2020-04-03 10:07:03

The `QuadraticSieve` executable is the only thing used, and if it exists on the system, it should work fine.. does anyone philosophically object if `--without-system-gmp` (or mpir) is ignored for some packages?


---

Comment by mkoeppe created at 2020-04-03 10:12:48

Replying to [comment:26 mjo]:
> does anyone philosophically object if `--without-system-gmp` (or mpir) is ignored for some packages?
I don't think this is a concern.


---

Comment by mjo created at 2020-04-03 10:46:58

Changing status from needs_info to needs_review.


---

Comment by mjo created at 2020-04-03 10:46:58

Ok, depcheck is gone.
----
New commits:


---

Comment by mkoeppe created at 2020-04-03 14:40:31

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-04-09 22:44:39

Resolution: fixed
