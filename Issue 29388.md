# Issue 29388: support for weighted term orders in normal_basis

archive/issues_029388.json:
```json
{
    "body": "CC:  klee tscrim heluani\n\nKeywords: singular\n\nAs a follow-up to #29543, this ticket changes the `normal_basis` method of ideals to handle the case of weighted term orders.\n\nWith this change, the degree of the monomials in the normal basis is taken with respect to the weighted degree (which agrees with Sage's notion of degree).\n\n\n```\nsage: R.<x,y,z> = PolynomialRing(QQ, order=TermOrder('wdegrevlex', (1, 2, 3)))\nsage: I = R.ideal(x*y^2 + x^5, z*y + x^3*y)\nsage: I.normal_basis(degree=9)\n[x^2*y^2*z, x^3*z^2, x*y*z^2, z^3]\nsage: all(f.degree() == 9 for f in _)\nTrue\n```\n\n\nThis also came up in an [Ask SageMath question](https://ask.sagemath.org/question/47623).\n\nThe implementation uses the Singular function [weightKB](https://www.singular.uni-kl.de/Manual/4-1-2/sing_377.htm#SEC417).\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/29625\n\n",
    "created_at": "2020-04-30T19:39:24Z",
    "labels": [
        "commutative algebra",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "support for weighted term orders in normal_basis",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29388",
    "user": "@mwageringel"
}
```
CC:  klee tscrim heluani

Keywords: singular

As a follow-up to #29543, this ticket changes the `normal_basis` method of ideals to handle the case of weighted term orders.

With this change, the degree of the monomials in the normal basis is taken with respect to the weighted degree (which agrees with Sage's notion of degree).


```
sage: R.<x,y,z> = PolynomialRing(QQ, order=TermOrder('wdegrevlex', (1, 2, 3)))
sage: I = R.ideal(x*y^2 + x^5, z*y + x^3*y)
sage: I.normal_basis(degree=9)
[x^2*y^2*z, x^3*z^2, x*y*z^2, z^3]
sage: all(f.degree() == 9 for f in _)
True
```


This also came up in an [Ask SageMath question](https://ask.sagemath.org/question/47623).

The implementation uses the Singular function [weightKB](https://www.singular.uni-kl.de/Manual/4-1-2/sing_377.htm#SEC417).


Issue created by migration from https://trac.sagemath.org/ticket/29625





---

archive/issue_comments_416815.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-04-30T19:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29388#issuecomment-416815",
    "user": "@mwageringel"
}
```

New commits:



---

archive/issue_comments_416816.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-30T19:45:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29388#issuecomment-416816",
    "user": "@mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_416817.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-05-01T02:47:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29388#issuecomment-416817",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_416818.json:
```json
{
    "body": "LGTM.",
    "created_at": "2020-05-01T02:47:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29388#issuecomment-416818",
    "user": "tscrim"
}
```

LGTM.



---

archive/issue_comments_416819.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-05-04T06:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29388",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29388#issuecomment-416819",
    "user": "vbraun"
}
```

Resolution: fixed
