# Issue 30945: Mutability class and pickling

archive/issues_030945.json:
```json
{
    "body": "CC:  tscrim mkoeppe @tobiasdiez nbruin\n\nIf the class `Mutability` is used as mixin for mutability features, the pickling goes wrong (see [here](https://trac.sagemath.org/ticket/30261#comment:9)).\n\nThis is an attempt to fix this.\n\nIssue created by migration from https://trac.sagemath.org/ticket/31182\n\n",
    "created_at": "2021-01-04T20:06:40Z",
    "labels": [
        "misc",
        "major",
        "bug"
    ],
    "title": "Mutability class and pickling",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30945",
    "user": "@mjungmath"
}
```
CC:  tscrim mkoeppe @tobiasdiez nbruin

If the class `Mutability` is used as mixin for mutability features, the pickling goes wrong (see [here](https://trac.sagemath.org/ticket/30261#comment:9)).

This is an attempt to fix this.

Issue created by migration from https://trac.sagemath.org/ticket/31182





---

archive/issue_comments_442008.json:
```json
{
    "body": "Turns out that\n\n\n```diff\nfrom sage.misc.decorators import sage_wraps\n+cimport cython\n\n+@cython.auto_pickle(True)\ncdef class Mutability:\n```\n\n\nhelps.\n\nBut I cannot really tell why that is and if that's a reasonable approach. I am not a pickling expert.\n\nSee https://cython.readthedocs.io/en/latest/src/userguide/extension_types.html#controlling-pickling.",
    "created_at": "2021-01-04T20:09:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442008",
    "user": "@mjungmath"
}
```

Turns out that


```diff
from sage.misc.decorators import sage_wraps
+cimport cython

+@cython.auto_pickle(True)
cdef class Mutability:
```


helps.

But I cannot really tell why that is and if that's a reasonable approach. I am not a pickling expert.

See https://cython.readthedocs.io/en/latest/src/userguide/extension_types.html#controlling-pickling.



---

archive/issue_comments_442009.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-01-06T12:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442009",
    "user": "@mjungmath"
}
```

New commits:



---

archive/issue_comments_442010.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-01-06T12:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442010",
    "user": "@mjungmath"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_442011.json:
```json
{
    "body": "Patchbot is green. The change works with ticket #30310 and according changes.",
    "created_at": "2021-01-06T19:55:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442011",
    "user": "@mjungmath"
}
```

Patchbot is green. The change works with ticket #30310 and according changes.



---

archive/issue_comments_442012.json:
```json
{
    "body": "Would be nice if anyone could give adequate feedback, or cc someone who ought to be an expert. Many tickets depend on it (see #30261).",
    "created_at": "2021-01-09T15:23:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442012",
    "user": "@mjungmath"
}
```

Would be nice if anyone could give adequate feedback, or cc someone who ought to be an expert. Many tickets depend on it (see #30261).



---

archive/issue_comments_442013.json:
```json
{
    "body": "Why is it a Cython class anyway? Multiple inheritances among Cython classes are not going to work and for Python classes it seems to cause some troubles. I'd vote for turning `Mutability` into a pure Python mix-in class.\n\nIf one really needs the functionality on Cython level, what about a class `SageObjectWithMutability` instead?",
    "created_at": "2021-01-10T10:59:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442013",
    "user": "@mjungmath"
}
```

Why is it a Cython class anyway? Multiple inheritances among Cython classes are not going to work and for Python classes it seems to cause some troubles. I'd vote for turning `Mutability` into a pure Python mix-in class.

If one really needs the functionality on Cython level, what about a class `SageObjectWithMutability` instead?



---

archive/issue_comments_442014.json:
```json
{
    "body": "Replying to [comment:12 gh-mjungmath]:\n> Why is it a Cython class anyway? Multiple inheritances among Cython classes are not going to work and for Python classes it seems to cause some troubles. I'd vote for turning `Mutability` into a pure Python mix-in class.\n\nThis makes no sense. Having this be a Cython class does not influence whether another class *Python* class can inherit this, which can be done in Cython as well. You run into the exact same problem if you want another `cdef` class to inherit from this and another `cdef` class, which is actually worse because a `cdef` class cannot inherit from a Python class.\n\n> If one really needs the functionality on Cython level, what about a class `SageObjectWithMutability` instead?\n\nFor speed, pure and simple.",
    "created_at": "2021-01-12T00:17:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442014",
    "user": "tscrim"
}
```

Replying to [comment:12 gh-mjungmath]:
> Why is it a Cython class anyway? Multiple inheritances among Cython classes are not going to work and for Python classes it seems to cause some troubles. I'd vote for turning `Mutability` into a pure Python mix-in class.

This makes no sense. Having this be a Cython class does not influence whether another class *Python* class can inherit this, which can be done in Cython as well. You run into the exact same problem if you want another `cdef` class to inherit from this and another `cdef` class, which is actually worse because a `cdef` class cannot inherit from a Python class.

> If one really needs the functionality on Cython level, what about a class `SageObjectWithMutability` instead?

For speed, pure and simple.



---

archive/issue_comments_442015.json:
```json
{
    "body": "Replying to [comment:16 gh-mjungmath]:\n> Replying to [comment:13 tscrim]:\n> > Replying to [comment:12 gh-mjungmath]:\n> > > Why is it a Cython class anyway? Multiple inheritances among Cython classes are not going to work and for Python classes it seems to cause some troubles. I'd vote for turning `Mutability` into a pure Python mix-in class.\n> > \n> > This makes no sense. Having this be a Cython class does not influence whether another class *Python* class can inherit this, which can be done in Cython as well.\n> \n> Right, it should work, and somehow the pickling is affected.\n\nThat is likely an issue with how the pickling is implemented and affects all C/Python classes equally. This likely requires implementations of `__reduce__` in the corresponding classes that use it. It's been awhile since I've looked this closely at a pickling issue. There might be some better/more general way to do it.\n\n> > You run into the exact same problem if you want another `cdef` class to inherit from this and another `cdef` class, which is actually worse because a `cdef` class cannot inherit from a Python class.\n> \n> I tend to disagree.\n\nWhat I said isn't an opinion but a fact.\n\n> The class `Mutability` is intended to be mixed in, right? Every class in Sage must inherit from `SageObject`, either directly or within an inheritance tree. In order to use `Mutability`, we need therefore two inheritances since `Mutability` does *not* inherit from `SageObject`. But a second inheritance is not allowed if the subsequent class is a Cython class as well. Having `class Sequence(SageObject, Mutability)` on the other hand is allowed but *only* if `Mutability` is a Python class (see [here](https://cython.readthedocs.io/en/latest/src/userguide/extension_types.html#subclassing) for details).\n\nThere is a key difference here: the class being an *extension type*, i.e., a `cdef` class. If you don't believe me, try it. Here is a minimal example:\n\n```\nsage: %%cython\n....: cdef class Foo:\n....:     pass\n....: cdef class Bar:\n....:     pass\n....: class MyClass(Foo, Bar):  # Change to cdef class to see it fail\n....:     pass\n....:\nsage: C = MyClass()\n```\n\n\n> My point is, classes which inherit from another Cython class, in particular any `cdef` class, can therefore *never* benefit from this mix in class if `Mutability` stays Cythonic (this should hold true for almost every class in Sage).\n\nThis is not true. In fact, there are lots of examples in Sage that use `Parent` and `WithEqualityById` via `UniqueRepresentation`.\n\n> On top of it all, the class as it is right now has no use at all. It's neither working on Python classes due to the above error nor on Cython classes due to its inheritance behavior.\n> \n> > \n> > > If one really needs the functionality on Cython level, what about a class `SageObjectWithMutability` instead?\n> > \n> > For speed, pure and simple.\n> \n> I see the need of a speed-up. And I mean, we can keep this class as `cdef` as it is if we get the above bug to work. Then it can only be used in a very limited range of classes in Sage.\n\nSee above.\n\n> In any case, due to the above reasons, I suggest a class `SageObjectWithMutability` inheriting from `SageObject` implementing the mutability feature. That would be useful for `Sequence`, `BundleConnection`, `AffineConnection` and probably even more.\n\nStrong -1. See above.",
    "created_at": "2021-01-13T07:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442015",
    "user": "tscrim"
}
```

Replying to [comment:16 gh-mjungmath]:
> Replying to [comment:13 tscrim]:
> > Replying to [comment:12 gh-mjungmath]:
> > > Why is it a Cython class anyway? Multiple inheritances among Cython classes are not going to work and for Python classes it seems to cause some troubles. I'd vote for turning `Mutability` into a pure Python mix-in class.
> > 
> > This makes no sense. Having this be a Cython class does not influence whether another class *Python* class can inherit this, which can be done in Cython as well.
> 
> Right, it should work, and somehow the pickling is affected.

That is likely an issue with how the pickling is implemented and affects all C/Python classes equally. This likely requires implementations of `__reduce__` in the corresponding classes that use it. It's been awhile since I've looked this closely at a pickling issue. There might be some better/more general way to do it.

> > You run into the exact same problem if you want another `cdef` class to inherit from this and another `cdef` class, which is actually worse because a `cdef` class cannot inherit from a Python class.
> 
> I tend to disagree.

What I said isn't an opinion but a fact.

> The class `Mutability` is intended to be mixed in, right? Every class in Sage must inherit from `SageObject`, either directly or within an inheritance tree. In order to use `Mutability`, we need therefore two inheritances since `Mutability` does *not* inherit from `SageObject`. But a second inheritance is not allowed if the subsequent class is a Cython class as well. Having `class Sequence(SageObject, Mutability)` on the other hand is allowed but *only* if `Mutability` is a Python class (see [here](https://cython.readthedocs.io/en/latest/src/userguide/extension_types.html#subclassing) for details).

There is a key difference here: the class being an *extension type*, i.e., a `cdef` class. If you don't believe me, try it. Here is a minimal example:

```
sage: %%cython
....: cdef class Foo:
....:     pass
....: cdef class Bar:
....:     pass
....: class MyClass(Foo, Bar):  # Change to cdef class to see it fail
....:     pass
....:
sage: C = MyClass()
```


> My point is, classes which inherit from another Cython class, in particular any `cdef` class, can therefore *never* benefit from this mix in class if `Mutability` stays Cythonic (this should hold true for almost every class in Sage).

This is not true. In fact, there are lots of examples in Sage that use `Parent` and `WithEqualityById` via `UniqueRepresentation`.

> On top of it all, the class as it is right now has no use at all. It's neither working on Python classes due to the above error nor on Cython classes due to its inheritance behavior.
> 
> > 
> > > If one really needs the functionality on Cython level, what about a class `SageObjectWithMutability` instead?
> > 
> > For speed, pure and simple.
> 
> I see the need of a speed-up. And I mean, we can keep this class as `cdef` as it is if we get the above bug to work. Then it can only be used in a very limited range of classes in Sage.

See above.

> In any case, due to the above reasons, I suggest a class `SageObjectWithMutability` inheriting from `SageObject` implementing the mutability feature. That would be useful for `Sequence`, `BundleConnection`, `AffineConnection` and probably even more.

Strong -1. See above.



---

archive/issue_comments_442016.json:
```json
{
    "body": "Ah shit! I remember, we had the same discussion in #30261. For some reason, it was burnt into my head that it wasn't supposed to work. Big sorry and thanks for your patience! #shameonme #embarrassed",
    "created_at": "2021-01-13T08:28:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442016",
    "user": "@mjungmath"
}
```

Ah shit! I remember, we had the same discussion in #30261. For some reason, it was burnt into my head that it wasn't supposed to work. Big sorry and thanks for your patience! #shameonme #embarrassed



---

archive/issue_comments_442017.json:
```json
{
    "body": "`@`Travis: What about that?\n\n\n```python\n    def __getstate__(self):\n        state = self.__dict__\n        state['_is_immutable'] = self._is_immutable\n        return state\n```\n\n\nWorks perfectly.",
    "created_at": "2021-01-17T14:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442017",
    "user": "@mjungmath"
}
```

`@`Travis: What about that?


```python
    def __getstate__(self):
        state = self.__dict__
        state['_is_immutable'] = self._is_immutable
        return state
```


Works perfectly.



---

archive/issue_comments_442018.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-01-17T16:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442018",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_442019.json:
```json
{
    "body": "Replying to [comment:20 git]:\n> Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n> ||[1c5d47d](https://git.sagemath.org/sage.git/commit/?id=1c5d47d8c9f1ccca7bafcd45eb6f67d4f71c64db)||`Trac #31182: __getstate__ and __setstate__`||\n\nHere we go. Please check this out. Works perfectly with #30284.",
    "created_at": "2021-01-17T16:52:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442019",
    "user": "@mjungmath"
}
```

Replying to [comment:20 git]:
> Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
> ||[1c5d47d](https://git.sagemath.org/sage.git/commit/?id=1c5d47d8c9f1ccca7bafcd45eb6f67d4f71c64db)||`Trac #31182: __getstate__ and __setstate__`||

Here we go. Please check this out. Works perfectly with #30284.



---

archive/issue_comments_442020.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-01-17T20:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442020",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_442021.json:
```json
{
    "body": "If this approach gets a positive review as well as #30284 based upon that, I'll add an explicit doctest for the pickling with #30284 to this file.\n\nIf I understand this correctly, `__setstate__` and `__getstate__` are high level methods so that any implementation of `__reduce__` would overwrite their behavior, which is exactly what we want.",
    "created_at": "2021-01-17T21:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442021",
    "user": "@mjungmath"
}
```

If this approach gets a positive review as well as #30284 based upon that, I'll add an explicit doctest for the pickling with #30284 to this file.

If I understand this correctly, `__setstate__` and `__getstate__` are high level methods so that any implementation of `__reduce__` would overwrite their behavior, which is exactly what we want.



---

archive/issue_comments_442022.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-18T08:17:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442022",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_442023.json:
```json
{
    "body": "This would work for any Python class I guess. If they implement their own version, then they are already taking responsibility for handling the mutability. It is a little hacky, but it is not so bad and it works for what is likely most cases. Let's see what the patchbot says.",
    "created_at": "2021-01-18T09:28:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442023",
    "user": "tscrim"
}
```

This would work for any Python class I guess. If they implement their own version, then they are already taking responsibility for handling the mutability. It is a little hacky, but it is not so bad and it works for what is likely most cases. Let's see what the patchbot says.



---

archive/issue_comments_442024.json:
```json
{
    "body": "I tried to write a test into the docstring:\n\n\n```\nsage: class A(SageObject, Mutability):\n....:     def __init__(self, val):\n....:         self._val = val\n....:     def change(self, val):\n....:         self._require_mutable()\n....:         self._val = val\n....:     def __hash__(self):\n....:         self._require_immutable()\n....:         return hash(self._val)\nsage: a = A(4)\nsage: loads(dumps(a))\n```\n\n\nThe doctest fails with:\n\n\n```\nFailed example:\n    loads(dumps(a))\nException raised:\n    Traceback (most recent call last):\n      File \"/home/michi/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/michi/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.structure.mutability.Mutability.__getstate__[2]>\", line 1, in <module>\n        loads(dumps(a))\n      File \"sage/misc/persist.pyx\", line 291, in sage.misc.persist.dumps (build/cythonized/sage/misc/persist.c:4284)\n        return obj.dumps(compress)\n      File \"sage/structure/sage_object.pyx\", line 476, in sage.structure.sage_object.SageObject.dumps (build/cythonized/sage/structure/sage_object.c:3789)\n        return _base_dumps(self, compress=compress)\n      File \"sage/misc/persist.pyx\", line 264, in sage.misc.persist._base_dumps (build/cythonized/sage/misc/persist.c:4012)\n        gherkin = SagePickler.dumps(obj)\n      File \"sage/misc/persist.pyx\", line 771, in sage.misc.persist.SagePickler.dumps (build/cythonized/sage/misc/persist.c:6801)\n        pickler.dump(obj)\n    _pickle.PicklingError: Can't pickle <class '__main__.A'>: attribute lookup A on __main__ failed\n\n```\n\n\nIt is a bit odd since it works perfectly within a usual Sage instance. Only as a doctest this fails. Doctests where `Mutability` is included in #30284 on the other hand work perfectly again.",
    "created_at": "2021-01-18T10:01:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442024",
    "user": "@mjungmath"
}
```

I tried to write a test into the docstring:


```
sage: class A(SageObject, Mutability):
....:     def __init__(self, val):
....:         self._val = val
....:     def change(self, val):
....:         self._require_mutable()
....:         self._val = val
....:     def __hash__(self):
....:         self._require_immutable()
....:         return hash(self._val)
sage: a = A(4)
sage: loads(dumps(a))
```


The doctest fails with:


```
Failed example:
    loads(dumps(a))
Exception raised:
    Traceback (most recent call last):
      File "/home/michi/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/michi/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.structure.mutability.Mutability.__getstate__[2]>", line 1, in <module>
        loads(dumps(a))
      File "sage/misc/persist.pyx", line 291, in sage.misc.persist.dumps (build/cythonized/sage/misc/persist.c:4284)
        return obj.dumps(compress)
      File "sage/structure/sage_object.pyx", line 476, in sage.structure.sage_object.SageObject.dumps (build/cythonized/sage/structure/sage_object.c:3789)
        return _base_dumps(self, compress=compress)
      File "sage/misc/persist.pyx", line 264, in sage.misc.persist._base_dumps (build/cythonized/sage/misc/persist.c:4012)
        gherkin = SagePickler.dumps(obj)
      File "sage/misc/persist.pyx", line 771, in sage.misc.persist.SagePickler.dumps (build/cythonized/sage/misc/persist.c:6801)
        pickler.dump(obj)
    _pickle.PicklingError: Can't pickle <class '__main__.A'>: attribute lookup A on __main__ failed

```


It is a bit odd since it works perfectly within a usual Sage instance. Only as a doctest this fails. Doctests where `Mutability` is included in #30284 on the other hand work perfectly again.



---

archive/issue_comments_442025.json:
```json
{
    "body": "Okay, seems to be perfectly normal, see `_test_pickling` in `sage_object.pyx`:\n\n\n```\n\n            sage: class Bla(SageObject): pass\n            sage: Bla()._test_pickling()\n            Traceback (most recent call last):\n            ...\n            PicklingError: Can't pickle <class '__main__.Bla'>: attribute\n            lookup ... failed\n\n        TODO: for a stronger test, this could send the object to a\n        remote Sage session, and get it back.\n```\n\n\nI'll just add, as already suggested, some tests from #30284 as soon as this ticket is ready, too.",
    "created_at": "2021-01-18T10:15:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442025",
    "user": "@mjungmath"
}
```

Okay, seems to be perfectly normal, see `_test_pickling` in `sage_object.pyx`:


```

            sage: class Bla(SageObject): pass
            sage: Bla()._test_pickling()
            Traceback (most recent call last):
            ...
            PicklingError: Can't pickle <class '__main__.Bla'>: attribute
            lookup ... failed

        TODO: for a stronger test, this could send the object to a
        remote Sage session, and get it back.
```


I'll just add, as already suggested, some tests from #30284 as soon as this ticket is ready, too.



---

archive/issue_comments_442026.json:
```json
{
    "body": "Patchbot is satisfied here, too. :)",
    "created_at": "2021-01-18T21:42:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442026",
    "user": "@mjungmath"
}
```

Patchbot is satisfied here, too. :)



---

archive/issue_comments_442027.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-01-21T06:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442027",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_442028.json:
```json
{
    "body": "This will work for now. We can revisit this if further problems arise as we use this class more frequently.",
    "created_at": "2021-01-21T06:55:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442028",
    "user": "tscrim"
}
```

This will work for now. We can revisit this if further problems arise as we use this class more frequently.



---

archive/issue_comments_442029.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-03-07T17:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30945",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30945#issuecomment-442029",
    "user": "vbraun"
}
```

Resolution: fixed
