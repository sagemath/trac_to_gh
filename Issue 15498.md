# Issue 15498: a new spkg

Issue created by migration from Trac.

Original creator: spurtuna

Original creation time: 2014-01-26 13:35:46

Assignee: spurtuna

CC:  ncohen

Keywords: graph,hard,feedback vertex set

This is pushing of a new (c/c++) spkg somewhatfptufvs.

I merge it with generic_graphs, as there is a similar algorithm for directed graphs, even if it is not implemented in this package yet.

The somewhatfptufvs package is in attachment and in the mail. Expect to see a new version soon that has an implementation for weighted undirected graphs. Some documentation would be nice too.

I claim that this solver the graph problem Feedback Vertex Set, and does so faster then the LP algorithm available. See appendix in Readme for a benchmark written for sage notebook. (performance on weighted undirected graphs remains to be seen)
I do not imagine this package replacing anything. All LP "genre" implementations like the MIP, should be quite generic. They solve many problems, and does so with small formulas.
The solver I present require constant amount of memory, no dependencies, have reasonable build time, and there is room for reducing it's spkg size.
Usability of this package extend the usability beyond what MIP can provide with regards to representation of weights, if not the same usability. I have not implemented it with support for directed graphs. There are also some limitations I find to be fitting, as in that these assumptions are common, require not much effort, would be nothing but a new code-file if added to package, and these assumptions are documented/todos.
I have no reason to believe that this software is not stable.


---

Attachment

current spkg


---

Attachment

hope I get it right this time


---

Comment by spurtuna created at 2014-01-26 20:36:18

such a nOOb




Don't forget to


$ mv somewhatfptufvs-0.9.tar.2.bz2  somewhatfptufvs-0.9.tar.bz2


---

Comment by spurtuna created at 2014-01-26 20:50:44

such a 2 x nOOb

Don't forget to
$ mv somewhatfptufvs-0.9.tar.3.bz2 somewhatfptufvs-0.9.tar.bz2


---

Attachment

Hmmmm... It does not compile on my computer because boost is not installed. Do you have a web page for your software ?

Nathann


---

Comment by spurtuna created at 2014-01-29 18:22:46

Replying to [comment:4 ncohen]:
> Hmmmm... It does not compile on my computer because boost is not installed. Do you have a web page for your software ?
> 
> Nathann

	
 
Yeah, I see that there are still traces of boost. Have commented out lines containing "boost" with omewhatfptufvs-0.9.tar.4.bz2.  
 
I am not sure whether or not I am currently working within a "sage environment" when building. I do not git within sage at least, but I guess that is evident from my commit messages. (I often do things a more difficult way, even if instructions say otherwise. I have never used git before.) I only assert that what I put here works with sage notebook on my computer. Have not seen anyone who does not look at me strange when I mention sagemath. 

Suspect "$ make" might still fail in some cases. 
 
No I do not have a web page. Appreciate suggestions. 
 
Please pose more questions.


---

Comment by spurtuna created at 2014-01-29 18:26:10

have commented out code with regards to boost


---

Attachment

Helloooooooooooo again !

I am trying to understand how your archive is to be used, but so far no luck `:-P`

I can see from your examples that you use it through Sage, but where is the code that modifies the `feedback_vertex_set` function ? How can I get `t.feedback_vertex_set(solver='reductions')` to work on my computer ? Is the code that does that contained in your archive ?

I read your 'readme' file, and I have something to answer : what I can help you do is build a Sage package that can easily be installed in Sage so that your code can be used in Sage. If you want your own C++ code to become part of Sage, then this part of the  code will have to be reviewed too, but this will take a *LOT* of work. The code has to be understandable, documented in many many ways. A bit like this file :
https://github.com/sagemath/sagetrac-mirror/blob/master/src/sage/graphs/graph_decompositions/vertex_separation.pyx

I also read what you said about C++11. Somebody asked about this recently, and it looks like we can't support this at the moment :
https://groups.google.com/d/topic/sage-devel/Dk-M5bt-uf8/discussion

Thus, if you are interested, the goal here will be to create a spkg that can be installed with `sage -i <a name>`.

Nathann


---

Comment by spurtuna created at 2014-01-30 18:05:00

I might have jumped through a few hoops as I sent things all over the place, in hopes that something would stick. And apparently something has, as I still write here.

The code you ask for can be seen at http://git.sagemath.org/sage.git/diff/src/sage/graphs/generic_graph.py?h=u/spurtuna/15735please&id=63a66f69969a05669f8522183bf408a930629697

Something that works for me is

$Â git init

$ git pull git://trac.sagemath.org/sage.git u/spurtuna/15735please

So no, the archive has nothing to do with sage. I have no idea of how much work it is to maintain a branch so that it has a head. (Also whether previous sentence make sense for that matter.) When writing my 'Readme', I was mainly concerned with regards to the survival of the package without a context. Won't claim this is an original concern. Would not be surprised, if others have already had this concern. I guess what I am trying to say is that; I did not stumble on the sage project on my own.





The changes I made to sage are mostly so that people can play with this package. I am however unsure on what might be a good way to precede, getting what I have pushed on git to at some extent achieve
  *readily accessible though notebook

  *becoming an experimental, optional or standard package

One of the more pressing todo's are with regards to a condition based on the method weighted(). That code is gibberish due to context. Looks alright if you do not look so hard.





I will get rid of what makes it currently C++11 only. Another archive somewhatfptufvs-0.9.tar.5.bz2 then. I would have made it C++03 sooner or later anyway. Will look less like C and more like C++ afterwards.

I currently use 

$ ./sage -i 

or rather

$ ./sage -sh sage-fix-pkg-checksums && ./sage -f somewhatfptufvs && make

Yes, I like the goal of getting it working for more people.


---

Comment by ncohen created at 2014-01-31 11:08:06

New commits:


---

Attachment

Would have posted yesterday. Didn't realize that it was working.


---

Comment by ncohen created at 2014-02-01 14:19:37

Hello !

I looked at your Git branch today and at your C code, and what I think is that it is not ready to be made public. It is messy. Comments, todo, well, this is your own custom code and you should make it readable for others before trying to share it. As it is, I would not trust this code myself unless I read and understand it, and that is beyond me in its current state. The only way out I see at the moment is to do all the work that it requires myself, and I cannot give away this amount of time at the moment, especially without understanding the code.

If you want to share your work, be it by Sage or any other means, please clean and document your code. Replace "notes to yourself" by "notes that should be understood by anybody". Don't leave commented code without an explicit reason.

It would be nice if you could also create a web page somewhere with your code available on it, explaining how you chose to implement it, which paper you used, link it to your thesis if you want.

Did you check your code against existing implementation, not for speed but for correction ?

You can easily do this in Sage, and as you have apparently interfaced it already you could easily run the following code :


```
for g in digraphs(7):
    assert g.feedback_vertex_set() == your_feedback_function(g)
```


If you already did, please mention it on the web page, if you did not it would be a good thing to do. All the relevant of your 'readme' file should probably appear on some page, too.

Nathann
