# Issue 29152: Fix eclib spkg-configure.m4

Issue created by migration from https://trac.sagemath.org/ticket/29389

Original creator: mkoeppe

Original creation time: 2020-03-22 15:34:28

CC:  dimpase cremona mjo

On `fedora-31-standard` (https://github.com/mkoeppe/sage/runs/524868604):


```
Checking whether SageMath should install SPKG eclib...
checking installing ntl or pari? ... checking eclib/types.h usability... yes
checking eclib/types.h presence... yes
checking for eclib/types.h... yes
checking whether we can link and run a program using eclib... yes; use eclib from the system
configure: will use system package and not install SPKG eclib
....
  [dochtml]     File "/sage/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py", line 283, in build_many
  [dochtml]       raise worker_exc.original_exception
  [dochtml]   OSError: WARNING: autodoc: failed to import module 'homspace' from module 'sage.libs.eclib'; the following exception was raised:
  [dochtml] Full log file: logs/dochtml.log
```





---

Comment by mkoeppe created at 2020-03-22 15:56:26

Is this the same as #28943?


---

Comment by dimpase created at 2020-03-23 02:50:00

this looks different to me. 

John, is this kind of error familiar to you?


---

Comment by cremona created at 2020-03-23 08:13:06

It is not familiar to me.  The log shows that a system eclib is being used so how does Sage know what code it is using?


---

Comment by mkoeppe created at 2020-03-29 03:05:29

According to the log it is using the following packages:

```
 eclib                                  x86_64  20190909-1.fc31                    fedora   
 eclib-devel                            x86_64  20190909-1.fc31                    fedora    
```



---

Comment by mkoeppe created at 2020-03-29 15:00:35

Changing priority from major to critical.


---

Comment by mkoeppe created at 2020-04-02 12:24:19

More detail: 

```
[dochtml]   [libs     ] WARNING: autodoc: failed to import module 'homspace' from module 'sage.libs.eclib'; the following exception was raised:
  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear
  [dochtml]   [libs     ] WARNING: autodoc: failed to import module 'interface' from module 'sage.libs.eclib'; the following exception was raised:
  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear
  [dochtml]   [libs     ] WARNING: autodoc: failed to import module 'mat' from module 'sage.libs.eclib'; the following exception was raised:
  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear
  [dochtml]   [libs     ] WARNING: autodoc: failed to import module 'mwrank' from module 'sage.libs.eclib'; the following exception was raised:
  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear
  [dochtml]   [libs     ] WARNING: autodoc: failed to import module 'newforms' from module 'sage.libs.eclib'; the following exception was raised:
  [dochtml]   [libs     ] /lib64/libec.so.6: undefined symbol: hmod_mat_clear
```



---

Comment by mkoeppe created at 2020-04-06 05:11:46

This seems to be due to a conflict between system library and sage library flint.


---

Comment by mkoeppe created at 2020-04-06 05:19:42

New commits:


---

Comment by mkoeppe created at 2020-04-06 05:19:42

Changing status from new to needs_review.


---

Comment by mjo created at 2020-04-06 12:50:30

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-04-06 15:59:28

Thanks!


---

Comment by vbraun created at 2020-04-09 22:45:07

Resolution: fixed
