# Issue 26194: py3: not sorting vertices on some graph functions

Issue created by migration from https://trac.sagemath.org/ticket/26431

Original creator: chapoton

Original creation time: 2018-10-07 20:07:00

CC:  dcoudert




---

Comment by chapoton created at 2018-10-07 20:07:24

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-10-07 20:07:24

New commits:


---

Comment by tscrim created at 2018-10-07 22:12:43

LGTM.


---

Comment by tscrim created at 2018-10-07 22:12:43

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2018-10-07 22:16:23

+1. Was about to give positive review as well ;)


---

Comment by vbraun created at 2018-10-18 22:25:28

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2018-10-18 22:25:28

There are a bunch of numerical noise issues, see patchbot


---

Comment by git created at 2018-10-19 07:53:29

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-10-19 07:53:45

Changing status from needs_work to needs_review.


---

Comment by dcoudert created at 2018-10-19 09:48:18

By flagging the tests `# random`, aren't we taking the risk of missing errors induced by other changes ? I agree that these tests are very sensitive.

I agree that for this test we know exactly the type of the vertices, but isn't it better to do:

```diff
-            sage: sorted(D.keys()) == sorted(g)
+            sage: set(D.keys()) == set(g)
```

I don't know what is best, just asking.


---

Comment by chapoton created at 2018-10-19 09:56:42

Replying to [comment:7 dcoudert]:
> By flagging the tests `# random`, aren't we taking the risk of missing errors induced by other changes ? I agree that these tests are very sensitive.

I see no really better option.. One could maybe check that the result is a dictionary, with keys in G and values that are pairs of numbers ?

> I agree that for this test we know exactly the type of the vertices, but isn't it better to do:
> {{{#!diff
> -            sage: sorted(D.keys()) == sorted(g)
> +            sage: set(D.keys()) == set(g)
> }}}
> I don't know what is best, just asking.

In this precise case, we can sort the vertices, so no need to worry about python3.


---

Comment by dcoudert created at 2018-10-19 10:03:52

Replying to [comment:8 chapoton]:
> Replying to [comment:7 dcoudert]:
> > By flagging the tests `# random`, aren't we taking the risk of missing errors induced by other changes ? I agree that these tests are very sensitive.
> 
> I see no really better option.. One could maybe check that the result is a dictionary, with keys in G and values that are pairs of numbers ?

We could may be have one such test just in case. I don't have better proposals.


---

Comment by git created at 2018-10-19 11:57:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2018-10-19 11:59:28

Comme ca, ca irait ?


---

Comment by dcoudert created at 2018-10-19 15:32:02

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2018-10-19 15:32:02

Perfect.


---

Comment by vbraun created at 2018-10-20 19:02:57

Resolution: fixed


---

Comment by embray created at 2018-10-28 14:52:23

This should be re-targeted for 8.5.
