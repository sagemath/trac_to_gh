# Issue 13484: FiniteEnumeratedSets cardinality override

Issue created by migration from Trac.

Original creator: tscrim

Original creation time: 2012-11-05 22:53:15

Assignee: sage-combinat

CC:  nthiery andrew.mathas sage-combinat

Keywords: finite sets, category, cardinality

Right now the category `FiniteEnumeratedSets` overrides a parent class's `cardinality()` when creating a list. Below is a minimal example of this behavior:

```
from sage.structure.parent import Parent
from sage.categories.finite_enumerated_sets import FiniteEnumeratedSets

class TestParent(Parent):
    def __init__(self):
        Parent.__init__(self, category=FiniteEnumeratedSets())

    def __iter__(self):
        yield 1
        return

    def cardinality(self, n):
        """
        EXAMPLES::

            sage: P = sage.combinat.category_doctest_fail.TestParent()
            sage: P.cardinality(-1)
            -1
            sage: v = P.list(); v
            [1]
            sage: len(v)
            1
            sage: P.cardinality()
            1
            sage: P.cardinality(-1) # This test breaks
            -1
        """
        return n
```


This seems to be caused by not checking if the parent class has a `cardinality()` function implemented, and just overriding it with `_cardinality_from_list()` (which takes no [optional] parameters).


---

Comment by tscrim created at 2012-11-06 17:55:20

Tweaked example to show we don't want to change the semantics of `cardinality()`.


---

Comment by tscrim created at 2013-02-16 05:22:34

Patch which has `_cardinality_from_*` take dummy optional args and discard them.


---

Comment by tscrim created at 2013-02-16 05:22:34

Changing status from new to needs_review.


---

Comment by andrew.mathas created at 2013-02-20 03:28:58

Changing keywords from "finite sets, category, cardinality" to "finite sets, category, cardinality, days45".


---

Comment by andrew.mathas created at 2013-02-20 03:28:58

The patch is quite innocuous and fixes a problem. All doc tests pass. 

Can you add a doctest for testing for this? Presumably it showed up in a real class. Happy for you to set this to a positive review once that's done.


---

Comment by tscrim created at 2013-02-20 16:00:06

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2013-02-20 16:00:06

Replying to [comment:4 andrew.mathas]: 
> Can you add a doctest for testing for this?

Done. I expanded on the example I gave in the description.

> Presumably it showed up in a real class.

In `partition.py` after #13605 is applied (of course without this patch).

> Happy for you to set this to a positive review once that's done.

Also done. Thank you for reviewing this.

Best,

Travis


---

Comment by jdemeyer created at 2013-02-22 19:11:28

Resolution: fixed


---

Attachment
