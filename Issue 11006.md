# Issue 11006: Correction about GNU tar in the  "Install from Source Code" section of the Sage Installation Guide

Issue created by migration from https://trac.sagemath.org/ticket/11159

Original creator: drkirkby

Original creation time: 2011-04-08 15:56:45

Assignee: mvngu

CC:  dimpase

#11081 added a number of changes to the section of the Sage Installation Guide dealing with building from source code. 

Despite correcting a large number of errors in the previous version of the manual, one error was introduced by #11081. The manual stated GNU tar is needed, but this is not so on OS X. 

Dave


---

Comment by drkirkby created at 2011-04-08 15:56:59

Changing type from PLEASE CHANGE to defect.


---

Comment by jdemeyer created at 2011-04-18 18:40:58

Changing priority from major to blocker.


---

Comment by drkirkby created at 2011-04-18 19:25:15

I'll sort this out in the next 15 minutes or so.


---

Comment by drkirkby created at 2011-04-18 19:25:15

Changing assignee from mvngu to drkirkby.


---

Comment by drkirkby created at 2011-04-18 19:35:38

Changing status from new to needs_review.


---

Comment by drkirkby created at 2011-04-18 19:57:34

I messed uo the patch - will have to rebuild sage from scratch and redo it!! It will take an hour or so. 

Dave


---

Comment by drkirkby created at 2011-04-18 19:57:34

Changing status from needs_review to needs_work.


---

Attachment

Corrects error about GNU make being required, and adds the fact gcc 4.6.0 will not build Sage


---

Comment by drkirkby created at 2011-04-18 20:18:03

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2011-04-18 20:35:10

I would drop the reference to a specific Sage version in the manual, reviewer patch added.  Otherwise positive review.


---

Comment by drkirkby created at 2011-04-18 20:43:12

Changing status from needs_review to positive_review.


---

Comment by drkirkby created at 2011-04-18 20:43:12

My reason for stating 4.7.0 was problematic was because if someone has the latest gcc in their linux distribution, they do have the option of building Sage 4.6.2. 

But I'm not too bothered either way. Let's hope we can get a fix for gcc 4.6.0 quickly. A quick Sage 4.7.1 was just the gcc-4.6.0 patches, would be quite helpful. 

Dave


---

Comment by drkirkby created at 2011-04-18 20:45:30

Replying to [comment:9 drkirkby]:
 A quick Sage 4.7.1 was just the gcc-4.6.0 patches, would be quite helpful. 
> 
> Dave 

I mean:

_A quick Sage 4.7.1 *with* just the gcc-4.6.0 patches, would be quite helpful_


---

Comment by jhpalmieri created at 2011-04-18 21:29:09

Changing status from positive_review to needs_info.


---

Comment by jhpalmieri created at 2011-04-18 21:29:09

Do we have a meta-ticket for gcc 4.6.0 issues?  Once they're sorted out, we need to make sure to fix the installation guide accordingly.

Regarding the actual patch here, the description says something about GNU tar vs. BSD tar, but the patch discusses GNU make vs. BSD make.  On my OS X box, I have GNU make and BSD tar, so is the patch saying what it's supposed to?

```
$ which make # (or "command -v make")
/usr/bin/make
$ make --version
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for i386-apple-darwin10.0
```

and

```
$ which tar
/usr/bin/tar
$ tar --version
bsdtar 2.6.2 - libarchive 2.6.2
```

I also have a program installed called "bsdmake".  When I tried building Sage with `export MAKE="bsdmake -j2"`, I got an error building boehm_gc:

```
...
config.status: creating tests/Makefile
config.status: creating src/config.h
config.status: executing depfiles commands
config.status: executing default commands
(null): illegal option -- -
usage: make [-BPSXeiknqrstv] [-C directory] [-D variable]
	[-d flags] [-E variable] [-f makefile] [-I directory]
	[-j max_jobs] [-m directory] [-V variable]
	[variable=value] [target ...]
make[1]: *** [all-recursive] Error 1
Error building BoehmGC.
```



---

Comment by drkirkby created at 2011-04-19 03:10:58

Changing status from needs_info to needs_work.


---

Comment by drkirkby created at 2011-04-19 03:10:58

Replying to [comment:11 jhpalmieri]:
> Do we have a meta-ticket for gcc 4.6.0 issues?  Once they're sorted out, we need to make sure to fix the installation guide accordingly.

We did not, but I have just created one (#11216). I've listed all the gcc 4.6.0 issues, including the resolved ones, so we have a record. To my knowledge there were 4 issues, 3 of which have been resolved with one (Singular) outstanding. But there may be others I'm unaware of, so others should edit the description if I missed any. 

The ticket I created does mention both the Wiki and the Installation Guide will need updating when these issues are resolved. 
 
> Regarding the actual patch here, the description says something about GNU tar vs. BSD tar, but the patch discusses GNU make vs. BSD make. 

I was sitting in bed thinking the exact same thing. I was aware I'd put the wrong information in the patch. Still, the point about needing GNU Make on Solaris is true so I just need to add the information about 'tar' 

> I also have a program installed called "bsdmake".  When I tried building Sage with `export MAKE="bsdmake -j2"`, I got an error building boehm_gc:

> I think it's probably true you need GNU make too,

Yes, it probably is true you need GNU make, though I think Solaris and OpenSolaris are the only systems where that version of 'make' is not the default. 

I will apply a patch to correct the 'tar' issue. As such, I'm marking this as "needs work" for now. 

Dave


---

Attachment

State that on OS X, the BSD tar supplied is acceptable.


---

Comment by drkirkby created at 2011-04-19 04:00:50

I've fixed the tar issue, so are marking this for review. 

I actually think another update of this section of the Installation Guide should split up the build instructions on each platform into different sections. i.e have sections for:

 * Linux
 * OS X
 * Solaris or OpenSolaris
 * AIX
 * HP-UX

Each platform has it own set of requirements, with no two platforms being exactly the same. Having different sections should cut down the amount a user needs to read. 

Dave


---

Comment by drkirkby created at 2011-04-19 04:00:50

Changing status from needs_work to needs_review.


---

Comment by drkirkby created at 2011-04-19 04:05:05

Replying to [comment:9 drkirkby]:
> My reason for stating 4.7.0 was problematic was because if someone has the latest gcc in their linux distribution, they do have the option of building Sage 4.6.2. 

That was a factually incorrect statement, as I doubt any version of Sage would build with gcc 4.6.0, so Jeroen was certainly correct to remove the comment about Sage 4.7.0.

Dave


---

Attachment

New reviewer patch, remove the statement that `m4` is needed (I have built Sage completely from scratch on a GNU/Linux system _without_ m4 and it worked).


---

Comment by jhpalmieri created at 2011-04-20 19:02:53

All three patches look good to me.  Dave, the comma starting line 129 in your second patch should actually be at the end of line 128; could you fix that?


---

Attachment

Apply this instead, fixes comma


---

Comment by kcrisman created at 2011-04-21 00:58:17

This fixes, that, and everything else looks nice in the doc.


---

Comment by kcrisman created at 2011-04-21 00:58:17

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2011-04-21 19:35:37

Resolution: fixed


---

Comment by drkirkby created at 2011-04-22 00:31:40

Replying to [comment:16 jhpalmieri]:
> All three patches look good to me.  Dave, the comma starting line 129 in your second patch should actually be at the end of line 128; could you fix that?

I've been beaten to that, and this is now merged. 

Whilst I believe the changes have significantly improved this section of the documentation, I still believe it could be improved somewhat more. Most of the errors have been removed, but it's not wonderfully clear and a bit confusing in places. I've created a new ticket (#11237 )to make some further improvements. Feel free to make any comments on #11237.
