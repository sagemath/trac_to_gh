# Issue 25619: Elliptic curve failures in 8.3.rc0: failed to compute modular degree/analytic rank

Issue created by migration from Trac.

Original creator: embray

Original creation time: 2018-07-13 10:12:25

CC:  chapoton

With 8.3.rc0 I am consistently getting failures on my Ubuntu 18.04 patchbot like:


```
Running doctests with ID 2018-07-02-16-02-49-3d2350c7.
Git branch: patchbot/ticket_merged
Using --optional=ccache,gap_jupyter,mpir,pari_jupyter,pysingular,python2,sage,singular_jupyter
Doctesting entire Sage library.
Only doctesting files that failed last test.
Doctesting 4 files using 8 threads.
sage -t --long --warn-long 74.5 src/sage/lfunctions/sympow.py
**********************************************************************
File "src/sage/lfunctions/sympow.py", line 223, in sage.lfunctions.sympow.Sympow.modular_degree
Failed example:
    sympow.modular_degree(EllipticCurve('11a'))
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.lfunctions.sympow.Sympow.modular_degree[0]>", line 1, in <module>
        sympow.modular_degree(EllipticCurve('11a'))
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/lfunctions/sympow.py", line 225, in sage.lfunctions.sympow.Sympow.modular_degree
Failed example:
    sympow.modular_degree(EllipticCurve('37a'))
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.lfunctions.sympow.Sympow.modular_degree[1]>", line 1, in <module>
        sympow.modular_degree(EllipticCurve('37a'))
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/lfunctions/sympow.py", line 227, in sage.lfunctions.sympow.Sympow.modular_degree
Failed example:
    sympow.modular_degree(EllipticCurve('389a'))
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.lfunctions.sympow.Sympow.modular_degree[2]>", line 1, in <module>
        sympow.modular_degree(EllipticCurve('389a'))
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/lfunctions/sympow.py", line 229, in sage.lfunctions.sympow.Sympow.modular_degree
Failed example:
    sympow.modular_degree(EllipticCurve('5077a'))
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.lfunctions.sympow.Sympow.modular_degree[3]>", line 1, in <module>
        sympow.modular_degree(EllipticCurve('5077a'))
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/lfunctions/sympow.py", line 231, in sage.lfunctions.sympow.Sympow.modular_degree
Failed example:
    sympow.modular_degree(EllipticCurve([1, -1, 0, -79, 289]))
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.lfunctions.sympow.Sympow.modular_degree[4]>", line 1, in <module>
        sympow.modular_degree(EllipticCurve([Integer(1), -Integer(1), Integer(0), -Integer(79), Integer(289)]))
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/lfunctions/sympow.py", line 275, in sage.lfunctions.sympow.Sympow.analytic_rank
Failed example:
    sympow.analytic_rank(EllipticCurve('11a'))
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.lfunctions.sympow.Sympow.analytic_rank[0]>", line 1, in <module>
        sympow.analytic_rank(EllipticCurve('11a'))
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 297, in analytic_rank
        raise RuntimeError("failed to compute analytic rank")
    RuntimeError: failed to compute analytic rank
**********************************************************************
File "src/sage/lfunctions/sympow.py", line 277, in sage.lfunctions.sympow.Sympow.analytic_rank
Failed example:
    sympow.analytic_rank(EllipticCurve('37a'))
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.lfunctions.sympow.Sympow.analytic_rank[1]>", line 1, in <module>
        sympow.analytic_rank(EllipticCurve('37a'))
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 297, in analytic_rank
        raise RuntimeError("failed to compute analytic rank")
    RuntimeError: failed to compute analytic rank
**********************************************************************
File "src/sage/lfunctions/sympow.py", line 279, in sage.lfunctions.sympow.Sympow.analytic_rank
Failed example:
    sympow.analytic_rank(EllipticCurve('389a'))
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.lfunctions.sympow.Sympow.analytic_rank[2]>", line 1, in <module>
        sympow.analytic_rank(EllipticCurve('389a'))
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 297, in analytic_rank
        raise RuntimeError("failed to compute analytic rank")
    RuntimeError: failed to compute analytic rank
**********************************************************************
File "src/sage/lfunctions/sympow.py", line 281, in sage.lfunctions.sympow.Sympow.analytic_rank
Failed example:
    sympow.analytic_rank(EllipticCurve('5077a'))
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.lfunctions.sympow.Sympow.analytic_rank[3]>", line 1, in <module>
        sympow.analytic_rank(EllipticCurve('5077a'))
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 297, in analytic_rank
        raise RuntimeError("failed to compute analytic rank")
    RuntimeError: failed to compute analytic rank
**********************************************************************
File "src/sage/lfunctions/sympow.py", line 283, in sage.lfunctions.sympow.Sympow.analytic_rank
Failed example:
    sympow.analytic_rank(EllipticCurve([1, -1, 0, -79, 289]))
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.lfunctions.sympow.Sympow.analytic_rank[4]>", line 1, in <module>
        sympow.analytic_rank(EllipticCurve([Integer(1), -Integer(1), Integer(0), -Integer(79), Integer(289)]))
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 297, in analytic_rank
        raise RuntimeError("failed to compute analytic rank")
    RuntimeError: failed to compute analytic rank
**********************************************************************
File "src/sage/lfunctions/sympow.py", line 285, in sage.lfunctions.sympow.Sympow.analytic_rank
Failed example:
    sympow.analytic_rank(EllipticCurve([0, 0, 1, -79, 342]))  # long time
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.lfunctions.sympow.Sympow.analytic_rank[5]>", line 1, in <module>
        sympow.analytic_rank(EllipticCurve([Integer(0), Integer(0), Integer(1), -Integer(79), Integer(342)]))  # long time
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 297, in analytic_rank
        raise RuntimeError("failed to compute analytic rank")
    RuntimeError: failed to compute analytic rank
**********************************************************************
File "src/sage/lfunctions/sympow.py", line 287, in sage.lfunctions.sympow.Sympow.analytic_rank
Failed example:
    sympow.analytic_rank(EllipticCurve([1, 1, 0, -2582, 48720]))  # long time
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.lfunctions.sympow.Sympow.analytic_rank[6]>", line 1, in <module>
        sympow.analytic_rank(EllipticCurve([Integer(1), Integer(1), Integer(0), -Integer(2582), Integer(48720)]))  # long time
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 297, in analytic_rank
        raise RuntimeError("failed to compute analytic rank")
    RuntimeError: failed to compute analytic rank
**********************************************************************
File "src/sage/lfunctions/sympow.py", line 289, in sage.lfunctions.sympow.Sympow.analytic_rank
Failed example:
    sympow.analytic_rank(EllipticCurve([0, 0, 0, -10012, 346900]))  # long time
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.lfunctions.sympow.Sympow.analytic_rank[7]>", line 1, in <module>
        sympow.analytic_rank(EllipticCurve([Integer(0), Integer(0), Integer(0), -Integer(10012), Integer(346900)]))  # long time
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 297, in analytic_rank
        raise RuntimeError("failed to compute analytic rank")
    RuntimeError: failed to compute analytic rank
**********************************************************************
2 items had failures:
   8 of   9 in sage.lfunctions.sympow.Sympow.analytic_rank
   5 of   6 in sage.lfunctions.sympow.Sympow.modular_degree
    [13 tests, 13 failures, 0.58 s]
sage -t --long --warn-long 74.5 src/sage/schemes/elliptic_curves/ell_rational_field.py
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 304, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field._set_modular_degree
Failed example:
    E.modular_degree()
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field._set_modular_degree[1]>", line 1, in <module>
        E.modular_degree()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 1484, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.analytic_rank
Failed example:
    E.analytic_rank(algorithm='sympow')
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.analytic_rank[3]>", line 1, in <module>
        E.analytic_rank(algorithm='sympow')
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1539, in analytic_rank
        return sympow.analytic_rank(self)[0]
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 297, in analytic_rank
        raise RuntimeError("failed to compute analytic rank")
    RuntimeError: failed to compute analytic rank
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 1490, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.analytic_rank
Failed example:
    E.analytic_rank(algorithm='all')
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.analytic_rank[5]>", line 1, in <module>
        E.analytic_rank(algorithm='all')
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1555, in analytic_rank
        self.analytic_rank('rubinstein'), self.analytic_rank('sympow')])
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1539, in analytic_rank
        return sympow.analytic_rank(self)[0]
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 297, in analytic_rank
        raise RuntimeError("failed to compute analytic rank")
    RuntimeError: failed to compute analytic rank
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3718, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.modular_degree
Failed example:
    E.modular_degree()
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.modular_degree[2]>", line 1, in <module>
        E.modular_degree()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3721, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.modular_degree
Failed example:
    E.modular_degree()
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.modular_degree[4]>", line 1, in <module>
        E.modular_degree()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3728, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.modular_degree
Failed example:
    EllipticCurve([0, 0, 1, -7, 6]).modular_degree()
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.modular_degree[6]>", line 1, in <module>
        EllipticCurve([Integer(0), Integer(0), Integer(1), -Integer(7), Integer(6)]).modular_degree()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3730, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.modular_degree
Failed example:
    EllipticCurve([0, 0, 1, -7, 6]).modular_degree(algorithm='sympow')
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.modular_degree[7]>", line 1, in <module>
        EllipticCurve([Integer(0), Integer(0), Integer(1), -Integer(7), Integer(6)]).modular_degree(algorithm='sympow')
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3741, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.modular_degree
Failed example:
    factor(E.modular_degree())
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.modular_degree[10]>", line 1, in <module>
        factor(E.modular_degree())
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3747, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.modular_degree
Failed example:
    for M in range(1,11): print(E.modular_degree(M=M)) # long time (20s on 2009 MBP)
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.modular_degree[12]>", line 1, in <module>
        for M in range(Integer(1),Integer(11)): print(E.modular_degree(M=M)) # long time (20s on 2009 MBP)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3850, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number
Failed example:
    E.congruence_number()
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number[1]>", line 1, in <module>
        E.congruence_number()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3897, in congruence_number
        m = self.modular_degree()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3852, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number
Failed example:
    E.congruence_number()
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number[2]>", line 1, in <module>
        E.congruence_number()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3897, in congruence_number
        m = self.modular_degree()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3855, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number
Failed example:
    E.congruence_number()
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number[4]>", line 1, in <module>
        E.congruence_number()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3897, in congruence_number
        m = self.modular_degree()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3857, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number
Failed example:
    E.modular_degree()
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number[5]>", line 1, in <module>
        E.modular_degree()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3860, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number
Failed example:
    E.modular_degree()
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number[7]>", line 1, in <module>
        E.modular_degree()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3862, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number
Failed example:
    E.congruence_number()  # long time (4s on sage.math, 2011)
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number[8]>", line 1, in <module>
        E.congruence_number()  # long time (4s on sage.math, 2011)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3897, in congruence_number
        m = self.modular_degree()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3868, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number
Failed example:
    for M in range(1,11): print(E.congruence_number(M)) # long time (20s on 2009 MBP)
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number[10]>", line 1, in <module>
        for M in range(Integer(1),Integer(11)): print(E.congruence_number(M)) # long time (20s on 2009 MBP)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3897, in congruence_number
        m = self.modular_degree()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 3887, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number
Failed example:
    E.congruence_number()
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number[12]>", line 1, in <module>
        E.congruence_number()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3897, in congruence_number
        m = self.modular_degree()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
4 items had failures:
   1 of   6 in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field._set_modular_degree
   2 of  14 in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.analytic_rank
   8 of  14 in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.congruence_number
   6 of  14 in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.modular_degree
    [848 tests, 17 failures, 173.41 s]
sage -t --long --warn-long 74.5 src/sage/modular/hecke/submodule.py
**********************************************************************
File "src/sage/modular/hecke/submodule.py", line 511, in sage.modular.hecke.submodule.HeckeSubmodule.dual_free_module
Failed example:
    EllipticCurve('128a').congruence_number()
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modular.hecke.submodule.HeckeSubmodule.dual_free_module[17]>", line 1, in <module>
        EllipticCurve('128a').congruence_number()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3897, in congruence_number
        m = self.modular_degree()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
1 item had failures:
   1 of  19 in sage.modular.hecke.submodule.HeckeSubmodule.dual_free_module
    [141 tests, 1 failure, 10.51 s]
sage -t --long --warn-long 74.5 src/sage/modular/abvar/abvar.py
**********************************************************************
File "src/sage/modular/abvar/abvar.py", line 3716, in sage.modular.abvar.abvar.ModularAbelianVariety_abstract.dual
Failed example:
    E.modular_degree()
Exception raised:
    Traceback (most recent call last):
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 594, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 1005, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modular.abvar.abvar.ModularAbelianVariety_abstract.dual[6]>", line 1, in <module>
        E.modular_degree()
      File "/opt/sage/local/lib/python2.7/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 3767, in modular_degree
        m = sympow.modular_degree(self)
      File "/opt/sage/local/lib/python2.7/site-packages/sage/lfunctions/sympow.py", line 239, in modular_degree
        raise RuntimeError("failed to compute modular degree")
    RuntimeError: failed to compute modular degree
**********************************************************************
1 item had failures:
   1 of  13 in sage.modular.abvar.abvar.ModularAbelianVariety_abstract.dual
    [624 tests, 1 failure, 19.77 s]
----------------------------------------------------------------------
sage -t --long --warn-long 74.5 src/sage/lfunctions/sympow.py  # 13 doctests failed
sage -t --long --warn-long 74.5 src/sage/schemes/elliptic_curves/ell_rational_field.py  # 17 doctests failed
sage -t --long --warn-long 74.5 src/sage/modular/hecke/submodule.py  # 1 doctest failed
sage -t --long --warn-long 74.5 src/sage/modular/abvar/abvar.py  # 1 doctest failed
----------------------------------------------------------------------
Total time for all tests: 173.8 seconds
    cpu time: 192.4 seconds
    cumulative wall time: 204.3 seconds
```



---

Comment by embray created at 2018-07-13 14:59:02

I can't reproduce the problem except on that one patchbot, and the issue there was that the `sympow` executable was missing.  I suspect that would have been a result of the patchbot testing #25099, and then downgrading back to the previous sympow version.  That's still a problem--there might be an issue there when downgrading DESTDIR-supported packages back to non-DESTDIR versions of those packages.  Eventually that won't be an issue, but perhaps that case should work better.


---

Comment by embray created at 2018-07-13 14:59:02

Resolution: worksforme


---

Comment by embray created at 2018-07-13 15:35:49

The real issue here was #25859.


---

Comment by embray created at 2018-07-30 17:18:23

Resolution changed from worksforme to 


---

Comment by embray created at 2018-07-30 17:18:23

Changing status from closed to new.


---

Comment by embray created at 2018-07-30 17:18:23

This happened again on one more patchbot, this time not one of mine either: https://patchbot.sagemath.org/ticket/25974/

So maybe this is worth examining a little more carefully and trying to reproduce.


---

Comment by embray created at 2018-07-30 17:18:28

Set assignee to embray.


---

Comment by mkoeppe created at 2020-07-05 17:59:19

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-07-05 17:59:19

Outdated after the major upgrade in #3360


---

Comment by dimpase created at 2020-07-17 13:13:52

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2020-07-17 13:13:52

this is an obsolete ticket.


---

Comment by chapoton created at 2020-08-14 12:58:18

Resolution: invalid


---

Comment by slabbe created at 2020-11-01 19:59:11

I do get the issue on Ubuntu 18.04 with [9.3.beta0](https://groups.google.com/g/sage-release/c/on3_8HxHhXA/m/ZkNC1qFoBQAJ). See #30633.
