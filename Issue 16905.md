# Issue 16905: Return type of some poset functions

archive/issues_016905.json:
```json
{
    "body": "CC:  @nathanncohen\n\nIf `P` is a lattice -- not just a poset -- then also `P.dual()` returns lattice. But `P.product(P)` gives poset, not lattice. Also at least `product` forgots facade, i.e. if `P=Poset({0:[1]}, facade=False)`, then `P.Product(P)` has elements of type plain 'tuple'. `subposet()` seems to work.\n\nFunctions should be checked one by one for this. This needs also some thinking: for example dual of meet-semilattice is join-semilattice.\n\nIssue created by migration from https://trac.sagemath.org/ticket/17142\n\n",
    "created_at": "2014-10-13T11:13:19Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "Return type of some poset functions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/16905",
    "user": "https://github.com/jm58660"
}
```
CC:  @nathanncohen

If `P` is a lattice -- not just a poset -- then also `P.dual()` returns lattice. But `P.product(P)` gives poset, not lattice. Also at least `product` forgots facade, i.e. if `P=Poset({0:[1]}, facade=False)`, then `P.Product(P)` has elements of type plain 'tuple'. `subposet()` seems to work.

Functions should be checked one by one for this. This needs also some thinking: for example dual of meet-semilattice is join-semilattice.

Issue created by migration from https://trac.sagemath.org/ticket/17142





---

archive/issue_comments_223616.json:
```json
{
    "body": "Yo !\n\nIt looks good but instead of \n\n```\nif A:\n  return C1(<long things>)\nif B:\n  return C2(<long things>)\n```\n\nYou can do\n\n```\nif A:\n   constructor = C1\nelif B:\n   constructor = C2\nreturn constructor(<long things>)\n```\n\n\nNathann\n----\nNew commits:",
    "created_at": "2014-11-18T14:06:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16905#issuecomment-223616",
    "user": "https://github.com/nathanncohen"
}
```

Yo !

It looks good but instead of 

```
if A:
  return C1(<long things>)
if B:
  return C2(<long things>)
```

You can do

```
if A:
   constructor = C1
elif B:
   constructor = C2
return constructor(<long things>)
```


Nathann
----
New commits:



---

archive/issue_comments_223617.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-19T08:55:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16905#issuecomment-223617",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_223618.json:
```json
{
    "body": "Replying to [comment:3 ncohen]:\n\n> You can do\n> {{{\n> if A:\n>    constructor = C1\n> return constructor(<long things>)\n> }}}\n\nGood idea. Done this.\n\n`relabel()` also remembers `facade` option. What should `product()` do? Have an optional `facade=` -parameter, or make facade poset (or lattice) if `self` is  facade posets, or if both `self` and `other` are?",
    "created_at": "2014-11-19T09:01:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16905#issuecomment-223618",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:3 ncohen]:

> You can do
> {{{
> if A:
>    constructor = C1
> return constructor(<long things>)
> }}}

Good idea. Done this.

`relabel()` also remembers `facade` option. What should `product()` do? Have an optional `facade=` -parameter, or make facade poset (or lattice) if `self` is  facade posets, or if both `self` and `other` are?



---

archive/issue_comments_223619.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2014-11-19T11:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16905#issuecomment-223619",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_223620.json:
```json
{
    "body": "Now at least product of (semi)lattices is (semi)lattice.",
    "created_at": "2014-11-19T12:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16905#issuecomment-223620",
    "user": "https://github.com/jm58660"
}
```

Now at least product of (semi)lattices is (semi)lattice.



---

archive/issue_comments_223621.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2014-11-19T18:27:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16905#issuecomment-223621",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_223622.json:
```json
{
    "body": "Hello !\n\nThere was a broken doctest in src/sage/categories/finite_posets.py so I added a commit. If this is fine for you, you can set the ticket to `positive_review`.\n\nNathann",
    "created_at": "2014-11-19T18:27:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16905#issuecomment-223622",
    "user": "https://github.com/nathanncohen"
}
```

Hello !

There was a broken doctest in src/sage/categories/finite_posets.py so I added a commit. If this is fine for you, you can set the ticket to `positive_review`.

Nathann



---

archive/issue_comments_223623.json:
```json
{
    "body": "New commits:",
    "created_at": "2014-11-19T18:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16905#issuecomment-223623",
    "user": "https://github.com/nathanncohen"
}
```

New commits:



---

archive/issue_comments_223624.json:
```json
{
    "body": "Replying to [comment:8 ncohen]:\n\n> There was a broken doctest in src/sage/categories/finite_posets.py so I added a commit. If this is fine for you, you can set the ticket to `positive_review`.\n\nOK. Sorry for not running whole doctest, only combinatorics-dir.\n\nThere is still open question about product (and sum) of non-facade posets. Should they be non-facade also? However, this can be thinked later.",
    "created_at": "2014-11-20T12:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16905#issuecomment-223624",
    "user": "https://github.com/jm58660"
}
```

Replying to [comment:8 ncohen]:

> There was a broken doctest in src/sage/categories/finite_posets.py so I added a commit. If this is fine for you, you can set the ticket to `positive_review`.

OK. Sorry for not running whole doctest, only combinatorics-dir.

There is still open question about product (and sum) of non-facade posets. Should they be non-facade also? However, this can be thinked later.



---

archive/issue_comments_223625.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2014-11-20T12:07:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16905#issuecomment-223625",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_223626.json:
```json
{
    "body": "> There is still open question about product (and sum) of non-facade posets. Should they be non-facade also? However, this can be thinked later.\n\nI guess they should... I never used a non-facade poset in my life though.\n\nNathann",
    "created_at": "2014-11-20T12:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16905#issuecomment-223626",
    "user": "https://github.com/nathanncohen"
}
```

> There is still open question about product (and sum) of non-facade posets. Should they be non-facade also? However, this can be thinked later.

I guess they should... I never used a non-facade poset in my life though.

Nathann



---

archive/issue_events_016358.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2015-01-02T15:46:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/16905",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/16905#event-16358"
}
```



---

archive/issue_comments_223627.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-01-02T15:46:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/16905",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/16905#issuecomment-223627",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
