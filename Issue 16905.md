# Issue 16905: Return type of some poset functions

Issue created by migration from https://trac.sagemath.org/ticket/17142

Original creator: jmantysalo

Original creation time: 2014-10-13 11:13:19

CC:  ncohen

If `P` is a lattice -- not just a poset -- then also `P.dual()` returns lattice. But `P.product(P)` gives poset, not lattice. Also at least `product` forgots facade, i.e. if `P=Poset({0:[1]}, facade=False)`, then `P.Product(P)` has elements of type plain 'tuple'. `subposet()` seems to work.

Functions should be checked one by one for this. This needs also some thinking: for example dual of meet-semilattice is join-semilattice.


---

Comment by ncohen created at 2014-11-18 14:06:59

Yo !

It looks good but instead of 

```
if A:
  return C1(<long things>)
if B:
  return C2(<long things>)
```

You can do

```
if A:
   constructor = C1
elif B:
   constructor = C2
return constructor(<long things>)
```


Nathann
----
New commits:


---

Comment by git created at 2014-11-19 08:55:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2014-11-19 09:01:32

Replying to [comment:3 ncohen]:

> You can do
> {{{
> if A:
>    constructor = C1
> return constructor(<long things>)
> }}}

Good idea. Done this.

`relabel()` also remembers `facade` option. What should `product()` do? Have an optional `facade=` -parameter, or make facade poset (or lattice) if `self` is  facade posets, or if both `self` and `other` are?


---

Comment by git created at 2014-11-19 11:57:22

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jmantysalo created at 2014-11-19 12:04:05

Now at least product of (semi)lattices is (semi)lattice.


---

Comment by ncohen created at 2014-11-19 18:27:03

Changing status from new to needs_review.


---

Comment by ncohen created at 2014-11-19 18:27:03

Hello !

There was a broken doctest in src/sage/categories/finite_posets.py so I added a commit. If this is fine for you, you can set the ticket to `positive_review`.

Nathann


---

Comment by ncohen created at 2014-11-19 18:28:51

New commits:


---

Comment by jmantysalo created at 2014-11-20 12:07:21

Replying to [comment:8 ncohen]:

> There was a broken doctest in src/sage/categories/finite_posets.py so I added a commit. If this is fine for you, you can set the ticket to `positive_review`.

OK. Sorry for not running whole doctest, only combinatorics-dir.

There is still open question about product (and sum) of non-facade posets. Should they be non-facade also? However, this can be thinked later.


---

Comment by jmantysalo created at 2014-11-20 12:07:21

Changing status from needs_review to positive_review.


---

Comment by ncohen created at 2014-11-20 12:25:33

> There is still open question about product (and sum) of non-facade posets. Should they be non-facade also? However, this can be thinked later.

I guess they should... I never used a non-facade poset in my life though.

Nathann


---

Comment by vbraun created at 2015-01-02 15:46:23

Resolution: fixed
