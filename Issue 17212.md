# Issue 17212: deprecate/remove Graph.to_partition and Poset.to_graph

Issue created by migration from Trac.

Original creator: ncohen

Original creation time: 2014-12-06 04:45:21

CC:  vdelecroix dimpase

As discussed on sage-devel [1], the two function `Graph.to_partition` and `Poset.to_graph` do not have a very meaningful name.

As `Poset.to_graph` can be obtained from the clearer alternatives `Graph(Poset.hasse_diagram())` or `Poset.hasse_diagram().to_undirected()` it is not a problem to remove it. On the other hand, the discussion on sage-devel seemed to indicate that `Graph.to_partition` should be renamed rather than removed.

Also, as it appeared that people were more interested in the size of connected components than in the actual `Partition` object, the new function will only return a list of integers.

Nathann

[1] https://groups.google.com/forum/#!topic/sage-devel/TeIwE2L2MOQ


---

Comment by ncohen created at 2014-12-06 05:00:53

Changing status from new to needs_review.


---

Comment by git created at 2014-12-06 05:01:42

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-12-06 08:23:18

I don't first think of posets as directed graphs, so having a method `to_graph` says this conversion exists and the fact that you have to go through `hasse_diagram()` hints that we should leave the method in there. If you feel it's not clear, then add more to the function's documentation and teach people to look at the doc if they can't discern what the function does from it's name and output.


---

Comment by vdelecroix created at 2014-12-06 12:40:50

Hi Travis,

It was emphasized in the discussion on sage-devel that `to_graph` is ambiguous. What about `coverings_digraph` (or `to_coverings_digraph`) as an alias for `hasse_diagram` as it was proposed by Jori ?

Vincent


---

Comment by tscrim created at 2014-12-07 17:28:41

As I stated, either make the docstring clear or, if you strongly believe that doc is not sufficient, rename the function.


---

Comment by ncohen created at 2014-12-08 07:03:35

Travis, I wanted to hear your opinion on this but you did not answer my latest post. What do you believe is wrong with removing this function ? As I explained on sage-devel, it is incorrect to have a method named "to_graph" as it clearly is not specific enough.

All we can do is rename it, but to what ? I do not see any way to rename it that would not make it totally useless, as I said on the ticket. Please tell us what you think of this point, as I would like to see this matter settled in the next days.

Thanks,

Nathann


---

Comment by vdelecroix created at 2014-12-08 07:10:42

Replying to [comment:3 tscrim]:
> I don't first think of posets as *directed* graphs, so having a method `to_graph` says this conversion exists

It does not

```
sage: P = posets.ChainPoset(3)
sage: P.to_graph()
Graph on 3 vertices
sage: P.to_graph().is_directed()
False
```



---

Comment by ncohen created at 2014-12-11 10:04:48

Yo Travis ! Could you answer our questions so that this ticket can move forward ?

Thanks,

Nathann


---

Comment by tscrim created at 2014-12-11 16:51:53

I've stated it before, I believe putting things into the documentation is sufficient and having a method `to_graph` says there is a "natural" conversion to a graph through considering a Poset as a directed graph. So if you want to rename it, don't expect me to put it the work to find a "better" name. It doesn't hurt anyone by being there (with good documentation).


---

Comment by ncohen created at 2014-12-11 17:07:53

> I've stated it before, I believe putting things into the documentation is sufficient and having a method `to_graph` says there is a "natural" conversion to a graph through considering a Poset as a directed graph. So if you want to rename it, don't expect me to put it the work to find a "better" name. It doesn't hurt anyone by being there (with good documentation).

Travis, please be fair with us. You believed yourself until Vincent's comment that the function returned a digraph while it returns a graph. You see how confusing it can be. Also it is incorrect to say that there is a "natural" conversion to graph: there is none, because there are many ways to obtain a graph/digraph. None is canonical.

Furthermore, we want to remove `to_graph` because properly named methods already exist:


```
sage: p = Poset()
sage: p.incomparability_graph()
Incomparability graph on 0 vertices
sage: p.hasse_diagram()
Digraph on 0 vertices
```


Why would we keep a misnamed function when we already have two which do the job right ?

We can already see that a Poset can be converted into a graph from the list of Poset methods. And a non-expert user who would miss `.hasse_diagram` (because it does not contain the word 'graph') will not miss `incomparability_graph`.

With all this, I am sorry that I do not understand why you would want to keep this `to_graph` function.

Nathann


---

Comment by tscrim created at 2014-12-11 17:29:10

Then be fair to me and don't put words into my mouth. I didn't mean `to_graph` returns a directed graph, I meant we couldn't feed a poset into Graph, much less to go through Hasse diagram. Also I didn't say canonical, I said natural. The function is not misnamed, it converts the poset into a graph. If you thing the name is ambiguous (which is what I understand your argument to be), then my counter is to put more into the documentation. If you think this is not sufficient, then you propose an alternative name.


---

Comment by ncohen created at 2014-12-11 17:38:12

Hello,

> If you thing the name is ambiguous (which is what I understand your argument to be), then my counter is to put more into the documentation. If you think this is not sufficient, then you propose an alternative name.

Sorry, but I still do not understand why you believe that this function can be useful to anyone. If it is only to advertise that Posets can be turned into graphs, isn't `.incomparability_graph` already doing the job ?

The only new name I can think of is `.undirected_hasse_diagram`, but with `.hasse_diagram()` around we hardly need it.

I do not understand why you fight so hard for this. I do not see it.

Nathann


---

Comment by tscrim created at 2014-12-11 17:50:33

Replying to [comment:12 ncohen]: 
> Sorry, but I still do not understand why you believe that this function can be useful to anyone. If it is only to advertise that Posets can be turned into graphs, isn't `.incomparability_graph` already doing the job ?

It is a different graph than (in)comparability graph, but the `to_graph` is a natural construction.

> The only new name I can think of is `.undirected_hasse_diagram`, but with `.hasse_diagram()` around we hardly need it.

Why? Because it's a one-line function? Then we should get rid of more one-line functions too. Just because you don't see the use, doesn't mean there isn't one.

> I do not understand why you fight so hard for this. I do not see it.

I don't understand your vendetta against this function either. It doesn't hurt anyone as it clearly documents what it does.


---

Comment by ncohen created at 2014-12-11 17:59:49

> Why? Because it's a one-line function? Then we should get rid of more one-line functions too. Just because you don't see the use, doesn't mean there isn't one.

Can you tell me its use ? It would help me to understand why you think that it is useful.

Nathann


---

Comment by tscrim created at 2014-12-11 18:06:24

Replying to [comment:14 ncohen]:
> Can you tell me its use ? It would help me to understand why you think that it is useful.

It takes a poset and returns a graph based upon its cover relations. It is a natural construction (that does not exist as a method elsewhere) on posets that a user could try. Also methods state what operations can be performed on a particular object.


---

Comment by ncohen created at 2014-12-12 03:38:31

> It takes a poset and returns a graph based upon its cover relations. It is a natural construction (that does not exist as a method elsewhere) on posets that a user could try. 

I still do not understand. So you say that this function is useful because it returns that construction ? But we already have `hasse_diagram` for this, which does roughly the same and that users can try too. It is actually better, in the sense that it is faster to compute and that it contains more information.

Nathann


---

Comment by ncohen created at 2014-12-14 01:50:07

Travis ? It has been two days. Please help us solve this problem.


---

Comment by tscrim created at 2014-12-14 17:17:23

Yet `hasse_diagram` does not do the same thing as that returns the directed graph. Again, the function is documented (and we have interactive documentation). It's not hurting anyone, so there's no problem; just leave it be.


---

Comment by ncohen created at 2014-12-14 17:54:19

> Again, the function is documented (and we have interactive documentation). It's not hurting anyone, so there's no problem; just leave it be.

I do believe that it does harm by being there. It is not a function that should ever be used in Sage or by anyone else, as other ways exist to get the same result and because its name is unclear: we could very well decide to make it return a different graph later, the function would still be correct as ".to_graph()" would still turn the Poset into "a graph". I think that knowledgeable people here (like Dima) call that 'semantics'.

While I understand that you want users to easily find out that there exists a way to get a graph from a `Poset` by looking at the list of methods, I also believe that ".incomparability_graph" does the job and that users will find it. Those who know what they are looking for will find `.hasse_diagram` quickly enough.

Somehow, I think that it all boils down to not say "the integer" but "an integer" when "the integer" is not uniquely determined. It would be nice if Sage had this level of strictness unless it really goes in the way of readability.

Would you be willing, despite everything, to let us procede with the removal of this function ? The considerations above matter to me, and also to some extent to the other persons who concurred on the sage-devel thread.

Thanks,

Nathann


---

Comment by tscrim created at 2014-12-14 18:09:01

Replying to [comment:19 ncohen]:
> > Again, the function is documented (and we have interactive documentation). It's not hurting anyone, so there's no problem; just leave it be.
> 
> I do believe that it does harm by being there. It is not a function that should ever be used in Sage or by anyone else, as other ways exist to get the same result and because its name is unclear: we could very well decide to make it return a different graph later, the function would still be correct as ".to_graph()" would still turn the Poset into "a graph". I think that knowledgeable people here (like Dima) call that 'semantics'.

Then rename the method. Here's a possibility `cover_relations_graph`.

> While I understand that you want users to easily find out that there exists a way to get a graph from a `Poset` by looking at the list of methods, I also believe that ".incomparability_graph" does the job and that users will find it. Those who know what they are looking for will find `.hasse_diagram` quickly enough.

`incomparability_graph` does not do the same thing. The `to_graph` only returns a graph by the cover relations, and it's a bad assumption that typical users will know what to do because they have not been raising hell over posets and graphs in Sage.

> Would you be willing, despite everything, to let us procede with the removal of this function ? The considerations above matter to me, and also to some extent to the other persons who concurred on the sage-devel thread.

In short, no. I strongly believe in not removing functionality, and since you think something needs to change, then you can change the name.


---

Comment by git created at 2014-12-15 01:19:11

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by git created at 2014-12-15 01:27:16

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by ncohen created at 2014-12-19 05:21:54

Could anybody turn this into a positive review ?

Nathann


---

Comment by dimpase created at 2014-12-19 15:06:20

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2014-12-19 15:06:20

LGTM


---

Comment by ncohen created at 2014-12-19 15:48:58

Thanks Dima !

Nathann


---

Comment by vbraun created at 2014-12-21 10:56:05

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2014-12-21 10:56:05

Reviewer name


---

Comment by dimpase created at 2014-12-21 12:41:21

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2015-01-02 15:46:37

Resolution: fixed
