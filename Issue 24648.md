# Issue 24648: Add helper function to preload some libraries if necessary

Issue created by migration from Trac.

Original creator: embray

Original creation time: 2018-03-02 10:53:18

CC:  vdelecroix slelievre

Following [my comments](https://trac.sagemath.org/ticket/24575#comment:50) on #24575 I think it might be useful to have a generic helper function for implementing my workaround there.

For now it is Linux-only since we've only explicitly encountered this problem on Linux.  I believe `LD_PRELOAD` _may_ be supported on newer versions of Cygwin, but I haven't specifically encountered the need for this workaround there.  It would also have to work a bit differently on OSX (which uses `DYLD_INSERT_LIBRARY` for this purpose).  Again, the need hasn't bee specifically encountered on that platform.  I'm not sure about other unices either.


---

Comment by embray created at 2018-03-05 10:46:15

New commits:


---

Comment by embray created at 2018-03-05 10:46:15

Changing status from new to needs_review.


---

Comment by vbraun created at 2018-04-06 20:49:26

This might be a necessary clutch to get something working, but it is also always a bug in the package build system. We should be working with upstream to point out the issue and fix their build system, not add a framework to Sage so we can ignore those bugs...


---

Comment by embray created at 2018-04-09 15:36:38

I agree it's ugly, but I don't agree particularly agree that it's an upstream bug.  I can think of other cases where having something like this might be useful as well.

The best fix of all for this, from a Sage perspective, is not build and install our own libgc at all if it isn't needed :)


---

Comment by git created at 2018-05-31 09:52:31

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by embray created at 2018-05-31 09:52:52

Rebased. IMO this may still be useful...


---

Comment by vdelecroix created at 2018-06-01 08:20:57

Replying to [comment:8 embray]:
> Rebased. IMO this may still be useful...

Agree. But it is also hard to check without a usecase. Since it is independent of anything else I am setting a positive review.


---

Comment by vdelecroix created at 2018-06-01 08:20:57

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-06-02 16:11:49

Resolution: fixed
