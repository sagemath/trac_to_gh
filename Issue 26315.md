# Issue 26315: glucose SAT solver as optional package

archive/issues_026315.json:
```json
{
    "body": "Glucose SAT solver webpage: https://www.labri.fr/perso/lsimon/glucose/\n\nTarball: https://www.labri.fr/perso/lsimon/downloads/softwares/glucose-syrup-4.1.tgz\n\nExample:\n\n\n```\nsage: solver = SAT('glucose')\nsage: solver.add_clause( (1,2,-3) )\nsage: solver()\n(None, True, False, False)\n```\n\n\nI need to change the `sage-spkg` script since the package name contains a `-`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/26552\n\n",
    "created_at": "2018-10-25T14:05:12Z",
    "labels": [
        "packages: optional",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "glucose SAT solver as optional package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26315",
    "user": "slabbe"
}
```
Glucose SAT solver webpage: https://www.labri.fr/perso/lsimon/glucose/

Tarball: https://www.labri.fr/perso/lsimon/downloads/softwares/glucose-syrup-4.1.tgz

Example:


```
sage: solver = SAT('glucose')
sage: solver.add_clause( (1,2,-3) )
sage: solver()
(None, True, False, False)
```


I need to change the `sage-spkg` script since the package name contains a `-`.

Issue created by migration from https://trac.sagemath.org/ticket/26552





---

archive/issue_comments_370674.json:
```json
{
    "body": "I guess this is a duplicate of #26361.",
    "created_at": "2018-10-25T18:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370674",
    "user": "tmonteil"
}
```

I guess this is a duplicate of #26361.



---

archive/issue_comments_370675.json:
```json
{
    "body": "Merde, je l'avais pas vu passer. If you agree I will move my changes to your ticket on top of your commits.",
    "created_at": "2018-10-25T18:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370675",
    "user": "slabbe"
}
```

Merde, je l'avais pas vu passer. If you agree I will move my changes to your ticket on top of your commits.



---

archive/issue_comments_370676.json:
```json
{
    "body": "Replying to [comment:2 slabbe]:\n> Merde, je l'avais pas vu passer. If you agree I will move my changes to your ticket on top of your commits.\n\nHonestly, i wanted to touch the rest of the code minimally (of course the existing interface has to be fixed), because i first want to write a better interface, so that we can call tons of solvers without having to write a dedicated class for each (i would like to have a kind of database of available solvers in a json file, and you can solve the same problem with various solvers without having to rewrite the clauses as it is the case currently, i mean the problem will be defined independently of the solver when possible). In particular, i did not add a class for glucose-syrup to avoid useless back-work.\n\nBy the way, note that your code will not work for problems with lots of variables, since in such cases glucose-syrup will split the solution into many lines, hence the glucose parser has to be adapted. If you really want that feature for the short term, i can add my parser for it (it is written already, so there is no work on my side).\n\nPlease tell me what are your global plans about so that we can synchronize our whishes (for example, i plan to add an `__iter__` method to loop over every solutions, etc).",
    "created_at": "2018-10-25T18:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370676",
    "user": "tmonteil"
}
```

Replying to [comment:2 slabbe]:
> Merde, je l'avais pas vu passer. If you agree I will move my changes to your ticket on top of your commits.

Honestly, i wanted to touch the rest of the code minimally (of course the existing interface has to be fixed), because i first want to write a better interface, so that we can call tons of solvers without having to write a dedicated class for each (i would like to have a kind of database of available solvers in a json file, and you can solve the same problem with various solvers without having to rewrite the clauses as it is the case currently, i mean the problem will be defined independently of the solver when possible). In particular, i did not add a class for glucose-syrup to avoid useless back-work.

By the way, note that your code will not work for problems with lots of variables, since in such cases glucose-syrup will split the solution into many lines, hence the glucose parser has to be adapted. If you really want that feature for the short term, i can add my parser for it (it is written already, so there is no work on my side).

Please tell me what are your global plans about so that we can synchronize our whishes (for example, i plan to add an `__iter__` method to loop over every solutions, etc).



---

archive/issue_comments_370677.json:
```json
{
    "body": "Updating the goal of this ticket because its original goal was already done in #26361",
    "created_at": "2018-10-25T19:37:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370677",
    "user": "slabbe"
}
```

Updating the goal of this ticket because its original goal was already done in #26361



---

archive/issue_comments_370678.json:
```json
{
    "body": "Readding the interface to glucose-syrup (not working) because it writes an empty file to the output. I asked the question to Laurent Simon and I am waiting for an answer.\n----\nNew commits:",
    "created_at": "2018-10-25T19:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370678",
    "user": "slabbe"
}
```

Readding the interface to glucose-syrup (not working) because it writes an empty file to the output. I asked the question to Laurent Simon and I am waiting for an answer.
----
New commits:



---

archive/issue_comments_370679.json:
```json
{
    "body": "Replying to [comment:3 tmonteil]:\n> Please tell me what are your global plans about so that we can synchronize our whishes (for example, i plan to add an `__iter__` method to loop over every solutions, etc).\n\nAll my code is online now either here or on #26361. I also want a global interface to exist. This is why I added the possibility to `SAT('glucose')` in #26361 (if you agree, and if this does not interfere with your global plan). Also, this is why I am adding the possibility to `SAT('glucose-syrup')` here in this ticket.\n\nIs the commit `45645d1` a problem for the goal your are aiming?",
    "created_at": "2018-10-25T19:43:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370679",
    "user": "slabbe"
}
```

Replying to [comment:3 tmonteil]:
> Please tell me what are your global plans about so that we can synchronize our whishes (for example, i plan to add an `__iter__` method to loop over every solutions, etc).

All my code is online now either here or on #26361. I also want a global interface to exist. This is why I added the possibility to `SAT('glucose')` in #26361 (if you agree, and if this does not interfere with your global plan). Also, this is why I am adding the possibility to `SAT('glucose-syrup')` here in this ticket.

Is the commit `45645d1` a problem for the goal your are aiming?



---

archive/issue_comments_370680.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-25T20:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370680",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_370681.json:
```json
{
    "body": "updated commit message (26361->26552)",
    "created_at": "2018-10-25T20:08:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370681",
    "user": "slabbe"
}
```

updated commit message (26361->26552)



---

archive/issue_comments_370682.json:
```json
{
    "body": "Changing keywords from \"\" to \"thursdaysbdx\".",
    "created_at": "2018-11-08T09:12:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370682",
    "user": "slabbe"
}
```

Changing keywords from "" to "thursdaysbdx".



---

archive/issue_comments_370683.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-05-26T15:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370683",
    "user": "tmonteil"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_370684.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-05-26T15:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370684",
    "user": "tmonteil"
}
```

New commits:



---

archive/issue_comments_370685.json:
```json
{
    "body": "please fix the python3-incompatible code, see patchbot plugin reports",
    "created_at": "2019-05-26T16:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370685",
    "user": "chapoton"
}
```

please fix the python3-incompatible code, see patchbot plugin reports



---

archive/issue_comments_370686.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-26T19:32:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370686",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_370687.json:
```json
{
    "body": "Replying to [comment:13 chapoton]:\n> please fix the python3-incompatible code, see patchbot plugin reports\n\nDone. Actually, there was no real reason to catch (and hide) an error that should not appear.",
    "created_at": "2019-05-26T19:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370687",
    "user": "tmonteil"
}
```

Replying to [comment:13 chapoton]:
> please fix the python3-incompatible code, see patchbot plugin reports

Done. Actually, there was no real reason to catch (and hide) an error that should not appear.



---

archive/issue_comments_370688.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-28T18:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370688",
    "user": "slabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_370689.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-06-02T22:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26315#issuecomment-370689",
    "user": "vbraun"
}
```

Resolution: fixed
