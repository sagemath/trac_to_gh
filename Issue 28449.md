# Issue 28449: Demote some optional packages to experimental

Issue created by migration from https://trac.sagemath.org/ticket/28686

Original creator: jhpalmieri

Original creation time: 2019-11-01 20:41:50

CC:  isuruf fbissey dimpase

A number of optional packages fail to build on OS X with a Python 3 version of Sage, as discussed [on sage-devel](https://groups.google.com/d/msg/sage-devel/ukJgMweHszU/x2tA9XEPEQAJ). Optional packages should build on all platforms, so since these fail, we demote them to experimental.

In more detail:

- awali, buckygen, cbc, gambit demoted from optional to experimental
- brian, guppy, mercurial mpi4py, trac are deleted: they were type `pip` before, but building fails with Python 3. Users can still use `./sage --pip install PKG` with them, as with any other `pip` package.
- pyx: changed from `optional` to `pip`: this way the most recent version, which is Python 3-compatible, is used, rather than Sage's somewhat outdated version.





---

Comment by jhpalmieri created at 2019-11-01 20:42:52

Changing status from new to needs_review.


---

Comment by jhpalmieri created at 2019-11-01 20:42:52

New commits:


---

Comment by chapoton created at 2019-11-02 07:30:24

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2019-11-02 07:30:24

Looks good to me. Please react quickly if you have some objection.


---

Comment by dimpase created at 2019-11-02 10:45:15

don't demote buckygen. It has a bug that should be fixed to allow modern C/C++, nothing to do with python3.


---

Comment by dimpase created at 2019-11-02 10:49:26

see #28688 for buckygen fix.


---

Comment by dcoudert created at 2019-11-02 10:58:46

I just successfully installed cbc on OSX and Python3 (`sage -i cbc`) and it's apparently working well.

```
confetti:sage dcoudert$ ./sage
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 9.0.beta3, Release Date: 2019-10-26               │
│ Using Python 3.7.3. Type "help()" for help.                        │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
sage: G = graphs.PetersenGraph()
sage: G.maximum_average_degree(verbose=1, solver='coin')
Cbc3007W No integer variables - nothing to do
Clp0006I 0  Obj 0 Dual inf 14.999999 (15)
Clp0006I 0  Obj 0 Dual inf 14.999999 (15)
Clp0006I 29  Obj -3
Clp0000I Optimal - objective value -3
3
```



---

Comment by chapoton created at 2019-11-02 12:33:15

Changing status from positive_review to needs_work.


---

Comment by dcoudert created at 2019-11-02 12:55:07

I noticed failing doctests with cbc and py3, but not with py2. See #28689.


---

Comment by jhpalmieri created at 2019-11-02 15:50:17

Replying to [comment:4 dimpase]:
> don't demote buckygen. It has a bug that should be fixed to allow modern C/C++, nothing to do with python3.

No one claimed that it had to do with Python 3. Once it fails to build on a supported platform, I really think it should be demoted to experimental. You can reinstate it to optional at #28688 if you verify that it builds on all supported platforms.


---

Comment by jhpalmieri created at 2019-11-02 16:25:05

Also, any idea when a fix for `buckygen` will be available?


---

Comment by git created at 2019-11-02 16:26:14

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by jhpalmieri created at 2019-11-02 16:30:17

Marking as "needs review", but the discussion of `buckygen` is not settled.


---

Comment by jhpalmieri created at 2019-11-02 16:30:17

Changing status from needs_work to needs_review.


---

Comment by chapoton created at 2019-11-13 19:15:52

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2019-11-13 19:15:52

I think we should move on here and fix buckygen later in #28688


---

Comment by dcoudert created at 2019-11-13 19:57:34

Agreed. We will move back buckygen to optional when fix (must be upstream as now explained in #28688)


---

Comment by vbraun created at 2019-11-16 20:15:27

Resolution: fixed
