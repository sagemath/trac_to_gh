# Issue 15149: Maxima is confused about limits at infinity

Issue created by migration from https://trac.sagemath.org/ticket/15386

Original creator: ddrake

Original creation time: 2013-11-08 21:57:44

CC:  kcrisman

Keywords: maxima limit

From https://groups.google.com/forum/#!topic/sage-support/dwR4kuBmiQo :

```
n = var('n')
assume(n>0)
series = -(3*n^2 + 1)*(-1)^n/sqrt(n^5 + 8*n^3 + 8)
limit(series, n=infinity)
38/25*pi^2*und
```

...when the limit is clearly zero.

The problem seems related to the `n^2` in the numerator:


```
sage: series = -(1)*(-1)^n/sqrt(n^5 + 8*n^3 + 8)
sage: limit(series, n=infinity)
0
sage: series = (n^2)*(-1)^n/sqrt(n^5 + 8*n^3 + 8)
sage: limit(series, n=infinity)
-38/75*pi^2*und
```


This seems to be an upstream problem with Maxima (see the sage-support thread).


---

Comment by pbruin created at 2014-05-17 14:07:04

This is now fixed upstream, and after #13973 we get

```
sage: n = var('n')
sage: assume(n>0)
sage: series = -(3*n^2 + 1)*(-1)^n/sqrt(n^5 + 8*n^3 + 8)
sage: limit(series, n=infinity)
0
```



---

Comment by tscrim created at 2014-05-30 03:12:29

Can you add the doctest Peter (since you know which doctests have been added where)?


---

Comment by kcrisman created at 2014-05-30 12:48:18

I hopefully should have something ready for this momentarily based on those tickets.


---

Comment by kcrisman created at 2014-05-30 12:49:45

My apologies for adding the dependencies, I'm still figuring out how to use git properly in these situations and don't want to make things confusing.


---

Comment by kcrisman created at 2014-05-30 12:49:45

Changing status from new to needs_review.


---

Comment by kcrisman created at 2014-05-30 12:52:54

Last 10 new commits:


---

Comment by kcrisman created at 2014-05-30 12:54:10

Again, sorry for this; only the last commit b6657b9 is relevant.  If someone has a better idea for how to make this work properly I'm all ears.


---

Comment by tscrim created at 2014-05-30 13:08:23

Replying to [comment:8 kcrisman]:
> Again, sorry for this; only the last commit b6657b9 is relevant.

That's all we [the reviewers] need to know (and we can also do `git diff <base_branch>` too).

LGTM.


---

Comment by tscrim created at 2014-05-30 13:08:23

Changing status from needs_review to positive_review.


---

Comment by pbruin created at 2014-05-30 13:12:01

In hindsight you could have based the commit on #11894 (which includes the other dependencies), or even on #13973 (since #11894 and #13712 only make changes in a different file than your patch).  A "minimalist" solution would be to make the change on a clean development branch and to test with #13973 merged, but not to push this merge commit.  As I see it, the tickets in the "dependencies" field do not necessarily have to be merged into the branch for this ticket.

It is practically inevitable that many Trac tickets end up with more dependencies (and merge commits) than strictly necessary, so let's not worry about that too much.  I agree with Travis's positive review.


---

Comment by kcrisman created at 2014-05-30 13:24:16

Thanks.  The problem is that I don't know how to base things on other tickets.  I'm very naively following [the developer guide](http://www.sagemath.org/doc/developer/manual_git.html#pushing-your-changes-to-a-ticket).  I finally figured out how to do this efficiently with Mercurial queues only a year or two before the git switch, so now it will take time to figure this out...   No, you are right that the only reason they "depend" on the other tickets is because of this queue-like thing I did.

I do think the minimalist solution would be confusing for testers, because ideally one would want to check out a branch and have it "Just work".  This was what I ran into while testing #13712. :-(


---

Comment by pbruin created at 2014-05-30 13:35:46

Replying to [comment:11 kcrisman]:
> Thanks.  The problem is that I don't know how to base things on other tickets.  I'm very naively following [the developer guide](http://www.sagemath.org/doc/developer/manual_git.html#pushing-your-changes-to-a-ticket).  I finally figured out how to do this efficiently with Mercurial queues only a year or two before the git switch, so now it will take time to figure this out...   No, you are right that the only reason they "depend" on the other tickets is because of this queue-like thing I did.
What I meant by "basing a commit on another ticket" is what is described in the section "Branching out" on the page you linked to.  When you create a branch, it will be based on the current branch, unless you specify an alternative base (with `git branch NAME BASE` or `git checkout -b NAME BASE`, where `NAME` is the name of the new branch and `BASE` the existing branch on which the new one should be based).  This can only take a single dependency into account; if there are multiple dependencies you still have to add them with `git merge` after creating the branch.
> I do think the minimalist solution would be confusing for testers, because ideally one would want to check out a branch and have it "Just work".  This was what I ran into while testing #13712. :-(
Good point.  It's probably confusing for the patchbot as well...


---

Comment by kcrisman created at 2014-05-30 16:39:48

> What I meant by "basing a commit on another ticket" is what is described in the section "Branching out" on the page you linked to.  When you create a branch, it will be based on the current branch, unless you specify an alternative base (with `git branch NAME BASE` or `git checkout -b NAME BASE`, where `NAME` is the name of the new branch and `BASE` the existing branch on which the new one should be based).  This can only take a single dependency into account; if there are multiple dependencies you still have to add them with `git merge` after creating the branch.
Ah, I see.  So rather than just making all of these tickets part of the same local branch on my computer, I should have
 * imported the Maxima branch
 * created a new branch based on that for ticket A
 * finished that
 * gone back to the Maxima branch
 * created a new branch for the next ticket B
 * done that
 * and so forth
Is that right?  And that would have avoided some of the merges too.  Maybe.


---

Comment by pbruin created at 2014-05-30 16:42:34

Yes, that is the idea.  I'm not saying that you _should_ have done that, but it's somewhat cleaner in the case that there are no dependencies between tickets A and B.


---

Comment by vbraun created at 2014-06-02 12:54:40

Resolution: fixed
