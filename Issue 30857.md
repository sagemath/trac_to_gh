# Issue 30857: openssl: Make build more robust by clearing some environment variables

Issue created by migration from https://trac.sagemath.org/ticket/31094

Original creator: mkoeppe

Original creation time: 2020-12-22 06:56:06

CC:  tmonteil @kliem dimpase

... in particular `SYSTEM`, set by our `tox.ini`, breaks the openssl build as seen in https://github.com/mkoeppe/sage/runs/1592276838:

```
  [openssl-1.1.1i]   Configuring openssl...
  [openssl-1.1.1i]   Operating system: x86_64-whatever-$(build/bin/sage-guess-package-system)
  [openssl-1.1.1i]   This system ($(build/bin/sage) is not supported. See file INSTALL for details.
  [openssl-1.1.1i]   Error configuring openssl.
```




---

Comment by mkoeppe created at 2020-12-22 06:57:51

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-12-22 06:57:51

New commits:


---

Comment by mkoeppe created at 2020-12-23 17:14:14

Build with this ticket merged went through in https://github.com/mkoeppe/sage/actions/runs/437548563 for #31082. Needs review


---

Comment by mkoeppe created at 2021-01-02 18:39:58

Still needs review, let's please get this in


---

Comment by @kliem created at 2021-01-02 18:43:52

LGTM.


---

Comment by @kliem created at 2021-01-02 18:43:52

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-01-03 19:05:29

Thanks!


---

Comment by vbraun created at 2021-01-04 22:37:15

Resolution: fixed
