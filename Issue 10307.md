# Issue 10307: bug in genus of ideal on 64 bits

archive/issues_010307.json:
```json
{
    "body": "Assignee: @williamstein\n\nKeywords: genus, Singular, 64bits\n\nThe following problem was discovered by Victor Miller in Sage-support\n\nhttp://groups.google.com/group/sage-support/browse_thread/thread/e30af8c695b6a912\n\n\n```\nsage: T.<t1,t2,u1,u2> = QQ[] \nsage: TJ = Ideal([t1^2 + u1^2 - 1,t2^2 + u2^2 - 1, (t1-t2)^2 + (u1-u2)^2 -1]) \nsage: TJ.genus() \n4294967295 \nsage: TJ.dimension() \n1 \n```\n\n\nI can confirm the bug in debian 64bits. Howeber, in debian 32 bits the anser is\n\n\n```\nsage: TJ.genus()\n-1\n```\n\n\nSo it seems to be a problem with 2**32-1 in 32 vs 64 bits.\n\nIssue created by migration from https://trac.sagemath.org/ticket/10308\n\n",
    "created_at": "2010-11-22T08:20:07Z",
    "labels": [
        "component: interfaces",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.11",
    "title": "bug in genus of ideal on 64 bits",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10307",
    "user": "https://github.com/lftabera"
}
```
Assignee: @williamstein

Keywords: genus, Singular, 64bits

The following problem was discovered by Victor Miller in Sage-support

http://groups.google.com/group/sage-support/browse_thread/thread/e30af8c695b6a912


```
sage: T.<t1,t2,u1,u2> = QQ[] 
sage: TJ = Ideal([t1^2 + u1^2 - 1,t2^2 + u2^2 - 1, (t1-t2)^2 + (u1-u2)^2 -1]) 
sage: TJ.genus() 
4294967295 
sage: TJ.dimension() 
1 
```


I can confirm the bug in debian 64bits. Howeber, in debian 32 bits the anser is


```
sage: TJ.genus()
-1
```


So it seems to be a problem with 2**32-1 in 32 vs 64 bits.

Issue created by migration from https://trac.sagemath.org/ticket/10308





---

archive/issue_comments_105424.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-06-22T17:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10307#issuecomment-105424",
    "user": "https://github.com/lftabera"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_105425.json:
```json
{
    "body": "Attachment [10380.patch](tarball://root/attachments/some-uuid/ticket10308/10380.patch) by @lftabera created at 2012-06-22 17:54:03\n\nIt seems to me that the bug is solved in linux 64 bits with newer versions of Sage.\n\nI attach a doctest for the record.",
    "created_at": "2012-06-22T17:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10307#issuecomment-105425",
    "user": "https://github.com/lftabera"
}
```

Attachment [10380.patch](tarball://root/attachments/some-uuid/ticket10308/10380.patch) by @lftabera created at 2012-06-22 17:54:03

It seems to me that the bug is solved in linux 64 bits with newer versions of Sage.

I attach a doctest for the record.



---

archive/issue_comments_105426.json:
```json
{
    "body": "Please fill in your real name as Author.",
    "created_at": "2012-07-27T20:42:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10307#issuecomment-105426",
    "user": "https://github.com/jdemeyer"
}
```

Please fill in your real name as Author.



---

archive/issue_comments_105427.json:
```json
{
    "body": "The bug does not appear to be present in 5.11.beta3, the patch applies and the tests that it introduces run correctly.  Note that the answer `-1` is really the (geometric) genus, not an error code (as one could be led to suspect by the sage-support discussion cited above).",
    "created_at": "2013-07-05T19:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10307#issuecomment-105427",
    "user": "https://github.com/pjbruin"
}
```

The bug does not appear to be present in 5.11.beta3, the patch applies and the tests that it introduces run correctly.  Note that the answer `-1` is really the (geometric) genus, not an error code (as one could be led to suspect by the sage-support discussion cited above).



---

archive/issue_comments_105428.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-07-05T19:31:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10307#issuecomment-105428",
    "user": "https://github.com/pjbruin"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_105429.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-07-31T12:53:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10307",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10307#issuecomment-105429",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed
