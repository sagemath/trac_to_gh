# Issue 27778: Drop lcalc

Issue created by migration from https://trac.sagemath.org/ticket/28015

Original creator: enge

Original creation time: 2019-06-19 07:39:03

CC:  slelievre @timokau

Hello,

trying to package Sage for Guix, I am stumbling over the lcalc package, which needs patches to even compile with a modern C++ compiler and is unmaintained with not even the upstream source available apart from places where it is mirrored. This will need a considerable time to wade through, for probably not much gain.

As some possible solutions, I would suggest the following (in decreasing order of preference):
- Drop lcalc and replace it by other libraries. For instance, the analytic rank of elliptic curves is already computed by several other packages. PARI has gained L-function capabilities in version 2.9, with new functionality in version 2.11, so I think it makes sense to rely on the maintained PARI implementation rather than on a defunct package. (Note also bug #24823 for using ARB.)
- Make the package optional (which may be difficult or impossible, since it is cythonised).
- Host the source somewhere with all patches applied to make it easily compilable; or even autotoolise it like Dima did with cliquer.

Andreas



---

Comment by fbissey created at 2019-06-19 07:46:56

Hi Andreas,

Your proposal is nothing new. And yes lcalc needs lots of patches and Dima has created a repo somewhere for it already but for some reason that bit was stopped. Replacing lcacl by pari has been proposed before and Jeroen work on it in another ticket. According to him, pari is slower so far. I'll dig the relevant tickets later.


---

Comment by fbissey created at 2019-06-19 07:50:03

See #24820 and #24532 although I think there is another branch for replacing lcalc with pari somewhere.


---

Comment by jdemeyer created at 2019-06-19 08:49:45

Yes, I looked into replacing lcalc by PARI. Unfortunately, PARI doesn't have the functionality to replace lcalc: PARI is optimized for high-precision calculations at small values, while lcalc is optimized for low-precision calculations for large values.


---

Comment by jdemeyer created at 2019-06-19 08:52:46

> although I think there is another branch for replacing lcalc with pari somewhere.

At least my attempt is on #24532 (when I realized quickly that it wouldn't work). I don't know if anybody else has looked at this.


---

Comment by saraedum created at 2019-06-19 10:44:03

We should at least mirror lcalc properly with all the patches already applied. (I guess, a thing that we should do with all the packages where we are upstream…) We talked to Dima and are moving the repository to gitlab into the [SageMath](SageMath) namespace.


---

Comment by slelievre created at 2019-06-19 13:42:04

New home for the lcalc repo:

- https://gitlab.com/sagemath/lcalc


---

Comment by saraedum created at 2019-06-19 14:46:04

I still want to apply the patches that we have in [SageMath](SageMath) to it…and then create a release.


---

Comment by chapoton created at 2019-06-19 18:17:25

#26098 is needing review, and aims to allow using pari for L-functions


---

Comment by jdemeyer created at 2019-06-19 19:07:36

Replying to [comment:8 chapoton]:
> #26098 is needing review, and aims to allow using pari for L-functions

Yes, but not to replace lcalc.


---

Comment by slelievre created at 2019-06-19 21:57:16

Changing keywords from "" to "days101, lcalc".


---

Comment by embray created at 2019-12-30 14:48:17

Ticket retargeted after milestone closed


---

Comment by mkoeppe created at 2020-04-14 19:41:51

Batch modifying tickets that will likely not be ready for 9.1, based on a review of the ticket title, branch/review status, and last modification date.


---

Comment by mkoeppe created at 2021-02-13 20:51:01

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.


---

Comment by mjo created at 2021-06-23 03:17:57

I've just tagged an lcalc-2.0.0 release in the Gitlab repo, with an upgrade ticket at #32037. The code is still a little crazy, but the build system and repo are now in a much better state. It should be easy to package from now on.


---

Comment by mjo created at 2021-06-23 03:17:57

Changing status from new to needs_review.


---

Comment by @DaveWitteMorris created at 2021-08-02 01:03:50

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-08-26 02:08:43

Resolution: invalid
