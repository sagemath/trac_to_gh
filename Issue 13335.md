# Issue 13335: Add inverse_of_unit() for padics

archive/issues_013335.json:
```json
{
    "body": "Assignee: roed\n\nCurrently, the padics lack an `inverse_of_unit()` method:\n\n```\nsage: (-1).inverse_of_unit()\n-1\nsage: ZpCA(3)(-1).inverse_of_unit()\nAttributeError\n```\n\n\nThe drawback with simply using `~` is that it puts the result in the fraction field and it can be annoying to always convert it back to the original ring when implementing general algorithms for all padics rings and fields:\n\n\n```\nsage: t = ZpCA(3,2)(-1)\nsage: t\nsage: t.parent()\nsage: ~t\nsage: (~t).parent()\n```\n\n\nThe attached patch implements a method `inverse_of_unit()` and fixes a conversion error that came up when testing it.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13539\n\n",
    "created_at": "2012-09-26T17:09:26Z",
    "labels": [
        "padics",
        "minor",
        "enhancement"
    ],
    "title": "Add inverse_of_unit() for padics",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13335",
    "user": "saraedum"
}
```
Assignee: roed

Currently, the padics lack an `inverse_of_unit()` method:

```
sage: (-1).inverse_of_unit()
-1
sage: ZpCA(3)(-1).inverse_of_unit()
AttributeError
```


The drawback with simply using `~` is that it puts the result in the fraction field and it can be annoying to always convert it back to the original ring when implementing general algorithms for all padics rings and fields:


```
sage: t = ZpCA(3,2)(-1)
sage: t
sage: t.parent()
sage: ~t
sage: (~t).parent()
```


The attached patch implements a method `inverse_of_unit()` and fixes a conversion error that came up when testing it.

Issue created by migration from https://trac.sagemath.org/ticket/13539





---

archive/issue_comments_163827.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-10-11T20:07:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13335#issuecomment-163827",
    "user": "saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_163828.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2012-10-11T22:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13335#issuecomment-163828",
    "user": "roed"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_163829.json:
```json
{
    "body": "I'm happy with the changes to `LocalGenericElement`.  There are changes to `pAdicZZpXCAElement` though that I think make the code less readable (and actually change the functionality a bit).  Were those intended?",
    "created_at": "2012-10-11T22:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13335#issuecomment-163829",
    "user": "roed"
}
```

I'm happy with the changes to `LocalGenericElement`.  There are changes to `pAdicZZpXCAElement` though that I think make the code less readable (and actually change the functionality a bit).  Were those intended?



---

archive/issue_comments_163830.json:
```json
{
    "body": "You're right. I didn't understand these changes myself anymore now. I tried to put them into a separate ticket and turned them into something that is hopefully more readable #13600.",
    "created_at": "2012-10-15T00:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13335#issuecomment-163830",
    "user": "saraedum"
}
```

You're right. I didn't understand these changes myself anymore now. I tried to put them into a separate ticket and turned them into something that is hopefully more readable #13600.



---

archive/issue_comments_163831.json:
```json
{
    "body": "Cool.  Once you update the patch here and it passes doctests I can give it a positive review",
    "created_at": "2012-10-15T07:48:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13335#issuecomment-163831",
    "user": "roed"
}
```

Cool.  Once you update the patch here and it passes doctests I can give it a positive review



---

archive/issue_comments_163832.json:
```json
{
    "body": "I removed the pieces that are now in #13600. I also added a copyright notice since it was missing (I took the years from the repo history).",
    "created_at": "2012-10-15T17:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13335#issuecomment-163832",
    "user": "saraedum"
}
```

I removed the pieces that are now in #13600. I also added a copyright notice since it was missing (I took the years from the repo history).



---

archive/issue_comments_163833.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2012-10-15T17:49:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13335#issuecomment-163833",
    "user": "saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_163834.json:
```json
{
    "body": "Your apply failed against 5.4.rc1 according to patchbot.  I'm a bit confused though, since I'm succeeding....  If you don't know what's going on I'll take a look later.",
    "created_at": "2012-10-15T19:27:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13335#issuecomment-163834",
    "user": "roed"
}
```

Your apply failed against 5.4.rc1 according to patchbot.  I'm a bit confused though, since I'm succeeding....  If you don't know what's going on I'll take a look later.



---

archive/issue_comments_163835.json:
```json
{
    "body": "Attachment",
    "created_at": "2012-10-22T12:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13335#issuecomment-163835",
    "user": "saraedum"
}
```

Attachment



---

archive/issue_comments_163836.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-10-24T04:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13335#issuecomment-163836",
    "user": "roed"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_163837.json:
```json
{
    "body": "Okay, patchbot is succeeding now, so I'll give this a positive review.",
    "created_at": "2012-10-24T04:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13335#issuecomment-163837",
    "user": "roed"
}
```

Okay, patchbot is succeeding now, so I'll give this a positive review.



---

archive/issue_comments_163838.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-02-28T10:31:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13335",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13335#issuecomment-163838",
    "user": "jdemeyer"
}
```

Resolution: fixed
