# Issue 13335: Add inverse_of_unit() for padics

Issue created by migration from Trac.

Original creator: saraedum

Original creation time: 2012-09-26 17:09:26

Assignee: roed

Currently, the padics lack an `inverse_of_unit()` method:

```
sage: (-1).inverse_of_unit()
-1
sage: ZpCA(3)(-1).inverse_of_unit()
AttributeError
```


The drawback with simply using `~` is that it puts the result in the fraction field and it can be annoying to always convert it back to the original ring when implementing general algorithms for all padics rings and fields:


```
sage: t = ZpCA(3,2)(-1)
sage: t
sage: t.parent()
sage: ~t
sage: (~t).parent()
```


The attached patch implements a method `inverse_of_unit()` and fixes a conversion error that came up when testing it.


---

Comment by saraedum created at 2012-10-11 20:07:00

Changing status from new to needs_review.


---

Comment by roed created at 2012-10-11 22:43:11

Changing status from needs_review to needs_work.


---

Comment by roed created at 2012-10-11 22:43:11

I'm happy with the changes to `LocalGenericElement`.  There are changes to `pAdicZZpXCAElement` though that I think make the code less readable (and actually change the functionality a bit).  Were those intended?


---

Comment by saraedum created at 2012-10-15 00:05:15

You're right. I didn't understand these changes myself anymore now. I tried to put them into a separate ticket and turned them into something that is hopefully more readable #13600.


---

Comment by roed created at 2012-10-15 07:48:34

Cool.  Once you update the patch here and it passes doctests I can give it a positive review


---

Comment by saraedum created at 2012-10-15 17:49:21

I removed the pieces that are now in #13600. I also added a copyright notice since it was missing (I took the years from the repo history).


---

Comment by saraedum created at 2012-10-15 17:49:21

Changing status from needs_work to needs_review.


---

Comment by roed created at 2012-10-15 19:27:06

Your apply failed against 5.4.rc1 according to patchbot.  I'm a bit confused though, since I'm succeeding....  If you don't know what's going on I'll take a look later.


---

Attachment


---

Comment by roed created at 2012-10-24 04:52:16

Changing status from needs_review to positive_review.


---

Comment by roed created at 2012-10-24 04:52:16

Okay, patchbot is succeeding now, so I'll give this a positive review.


---

Comment by jdemeyer created at 2013-02-28 10:31:24

Resolution: fixed
