# Issue 25440: py3: normalize repr of bound methods in doctest results

Issue created by migration from https://trac.sagemath.org/ticket/25677

Original creator: embray

Original creation time: 2018-06-27 17:41:03

Keywords: doctests

Another fixer-upper for another very common (mostly) trivial doctest failure on Python 3.

On Python 2 bound methods are represented using the class name of the object the method was bound to, whereas on Python 3 they are represented
with the fully-qualified name of the function that implements the method.

In the context of a doctest it's almost impossible to convert accurately from the latter to the former or vice-versa, so we simplify the reprs of bound methods to just the bare method name.

This is slightly regressive since it means one can't use the repr of a bound method to test whether some element is getting a method from the correct class (imporant sometimes in the cases of dynamic classes).
However, such tests could be written could be written more explicitly to emphasize that they are testing such behavior, and will fail on Python 3 anyways.



---

Comment by chapoton created at 2018-07-04 12:37:56

Is this ready for review ?


---

Comment by embray created at 2018-07-04 16:33:15

I think so.  I wanted to make sure there weren't any other problems with it or that there weren't some corner cases it wasn't catching.  The latter is still a possibility (hard to know until more of the tests are fixed) but this does fix a lot of tests as is.


---

Comment by embray created at 2018-07-04 16:33:15

Changing status from new to needs_review.


---

Comment by chapoton created at 2018-07-04 18:51:47

then let us move on


---

Comment by chapoton created at 2018-07-04 18:51:47

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-07-08 13:05:03

Resolution: fixed
