# Issue 11250: modular subgroups

archive/issues_011250.json:
```json
{
    "body": "Assignee: vdelecroix\n\nThis ticket aims to extends capability of the class ArithmeticSubgroup_Permutation in sage.modular.arithgroup_perm. This is now possible to deal with any subgroup of `SL(2,Z)`.\n\nSee details in the patch.\n\nIssue created by migration from https://trac.sagemath.org/ticket/11422\n\n",
    "created_at": "2011-06-02T21:04:30Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "modular subgroups",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/11250",
    "user": "vdelecroix"
}
```
Assignee: vdelecroix

This ticket aims to extends capability of the class ArithmeticSubgroup_Permutation in sage.modular.arithgroup_perm. This is now possible to deal with any subgroup of `SL(2,Z)`.

See details in the patch.

Issue created by migration from https://trac.sagemath.org/ticket/11422





---

archive/issue_comments_123909.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to modular forms.",
    "created_at": "2011-06-02T21:24:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123909",
    "user": "vdelecroix"
}
```

Changing component from PLEASE CHANGE to modular forms.



---

archive/issue_comments_123910.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2011-06-02T21:24:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123910",
    "user": "vdelecroix"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_123911.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-06-03T13:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123911",
    "user": "vdelecroix"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_123912.json:
```json
{
    "body": "Changing keywords from \"\" to \"group, arithmetic, linear group, sl, modular\".",
    "created_at": "2011-06-03T13:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123912",
    "user": "vdelecroix"
}
```

Changing keywords from "" to "group, arithmetic, linear group, sl, modular".



---

archive/issue_comments_123913.json:
```json
{
    "body": "This looks great -- I always meant to do some more work on this but never got around to it, and you are clearly much better equipped to do so than I. Sadly there are masses of doctest failures (48 of them on a clean 4.7.1.alpha3 build with just your patch applied).  Almost all of them look like this:\n\n```\nTypeError: cycle_tuples() takes no keyword arguments\n```\n\n\nAlso, some gripes:\n\n- The English is a bit ropey in some of the docstrings (e.g. \"vue\", \"canonic\").\n\n- Some more explanation of what a few of the functions are doing would be nice -- e.g. what is canonical about the canonical labels?",
    "created_at": "2011-07-04T14:20:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123913",
    "user": "davidloeffler"
}
```

This looks great -- I always meant to do some more work on this but never got around to it, and you are clearly much better equipped to do so than I. Sadly there are masses of doctest failures (48 of them on a clean 4.7.1.alpha3 build with just your patch applied).  Almost all of them look like this:

```
TypeError: cycle_tuples() takes no keyword arguments
```


Also, some gripes:

- The English is a bit ropey in some of the docstrings (e.g. "vue", "canonic").

- Some more explanation of what a few of the functions are doing would be nice -- e.g. what is canonical about the canonical labels?



---

archive/issue_comments_123914.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-07-04T14:20:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123914",
    "user": "davidloeffler"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_123915.json:
```json
{
    "body": "Hello,\n\nThanks for starting to look at this.\n\nReplying to [comment:4 davidloeffler]:\n> This looks great -- I always meant to do some more work on this but never got around to it, and you are clearly much better equipped to do so than I. Sadly there are masses of doctest failures (48 of them on a clean 4.7.1.alpha3 build with just your patch applied).  Almost all of them look like this:\n> {{{\n> TypeError: cycle_tuples() takes no keyword arguments\n> }}}\n\nThere was a dependancy problem with #10335 which is now in the description.\n\n> Also, some gripes:\n> \n> - The English is a bit ropey in some of the docstrings (e.g. \"vue\", \"canonic\").\n\nI'm not a native speaker and it's not easy to find where the errors are. In the new version I will post in few minutes, I have tried to be attentive to the language.\n \n> - Some more explanation of what a few of the functions are doing would be nice -- e.g. what is canonical about the canonical labels?\n\nCould you be more precise ? In the new version, I expanded some of the documentations (especially the canonical labels).",
    "created_at": "2011-07-05T19:08:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123915",
    "user": "vdelecroix"
}
```

Hello,

Thanks for starting to look at this.

Replying to [comment:4 davidloeffler]:
> This looks great -- I always meant to do some more work on this but never got around to it, and you are clearly much better equipped to do so than I. Sadly there are masses of doctest failures (48 of them on a clean 4.7.1.alpha3 build with just your patch applied).  Almost all of them look like this:
> {{{
> TypeError: cycle_tuples() takes no keyword arguments
> }}}

There was a dependancy problem with #10335 which is now in the description.

> Also, some gripes:
> 
> - The English is a bit ropey in some of the docstrings (e.g. "vue", "canonic").

I'm not a native speaker and it's not easy to find where the errors are. In the new version I will post in few minutes, I have tried to be attentive to the language.
 
> - Some more explanation of what a few of the functions are doing would be nice -- e.g. what is canonical about the canonical labels?

Could you be more precise ? In the new version, I expanded some of the documentations (especially the canonical labels).



---

archive/issue_comments_123916.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-07-05T19:32:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123916",
    "user": "vdelecroix"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_123917.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-07-06T10:47:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123917",
    "user": "davidloeffler"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_123918.json:
```json
{
    "body": "OK, I downloaded #10335 and its prerequisites and it works fine now. \n\nAlgorithm comments: \n\n- For permutation subgroups, almost all calculations are done with a relabelled version, but this is generated anew every time! I'd suggest:\n\n  - having a flag that remembers whether the group is already canonically labelled,\n\n  - when that's not the case, caching the canonically labelled version.\n\n- At line 1019 of `arithgroup.py`, if check is True, won't this cause the check code to be run *twice*?\n\nCorrections to docstrings:\n\nIn `arithgroup_generic.py`:\n\n- The docstring for the todd_coxeter method is a bit vague: I'd suggest that you specify a bit more precisely what the lists `l` and `s` mean. \"The action of the parabolic elements\" is misleading; you mean the action of the specific parabolic element ` [[1, 1],[0,1]] `.\n\n- It is disrespectful to Todd and Coxeter to write their names in lowercase, as you do in the docstring for `as_permutation_group` -- better to write \"This uses Todd-Coxeter enumeration\".\n\nIn `arithgroup_perm.py`:\n\n- \"point of vue\" --> \"point of view\" in the module docstring (as I pointed out above)\n\n- Again in that docstring, you make it sound like all four of L, R, S2 and S3 are needed to generate the modular group -- explain that the \"three couples which are of main interest\" are of interest because each pair of elements generates the whole group.\n\n- The \"todo\" list will look bizzarre: some LaTeX formatting is needed for the second item\n\n- Line 328: \"generator\" --> \"generators\"\n\n- Line 630 \"numerotation\" --> \"numbering\"\n\n- 640: \"defines\" --> \"define\", \"renumerote\" --> \"renumber\" (the nonexistent word \"numerote\" appears twice more in the next few lines)\n\n- 744: \"Returns the smallest label among rooted label\" -- do you seriously expect that anyone will have the foggiest clue what this means?\n\n- 749: \"canonic\" --> \"canonical\". This occurs all over the place. Fix them all.\n\n- 810: needs more explanation of what the argument j0 does.\n\n- 812: \"renumerotation\" --> \"renumbering\" again.\n\n- 908: \"does not permutes\" --> \"does not permute\"\n\n- 947: \"at the first times\" --> \"at the first time\"\n\nThat's as far as I've got so far -- other duties call.",
    "created_at": "2011-07-06T10:47:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123918",
    "user": "davidloeffler"
}
```

OK, I downloaded #10335 and its prerequisites and it works fine now. 

Algorithm comments: 

- For permutation subgroups, almost all calculations are done with a relabelled version, but this is generated anew every time! I'd suggest:

  - having a flag that remembers whether the group is already canonically labelled,

  - when that's not the case, caching the canonically labelled version.

- At line 1019 of `arithgroup.py`, if check is True, won't this cause the check code to be run *twice*?

Corrections to docstrings:

In `arithgroup_generic.py`:

- The docstring for the todd_coxeter method is a bit vague: I'd suggest that you specify a bit more precisely what the lists `l` and `s` mean. "The action of the parabolic elements" is misleading; you mean the action of the specific parabolic element ` [[1, 1],[0,1]] `.

- It is disrespectful to Todd and Coxeter to write their names in lowercase, as you do in the docstring for `as_permutation_group` -- better to write "This uses Todd-Coxeter enumeration".

In `arithgroup_perm.py`:

- "point of vue" --> "point of view" in the module docstring (as I pointed out above)

- Again in that docstring, you make it sound like all four of L, R, S2 and S3 are needed to generate the modular group -- explain that the "three couples which are of main interest" are of interest because each pair of elements generates the whole group.

- The "todo" list will look bizzarre: some LaTeX formatting is needed for the second item

- Line 328: "generator" --> "generators"

- Line 630 "numerotation" --> "numbering"

- 640: "defines" --> "define", "renumerote" --> "renumber" (the nonexistent word "numerote" appears twice more in the next few lines)

- 744: "Returns the smallest label among rooted label" -- do you seriously expect that anyone will have the foggiest clue what this means?

- 749: "canonic" --> "canonical". This occurs all over the place. Fix them all.

- 810: needs more explanation of what the argument j0 does.

- 812: "renumerotation" --> "renumbering" again.

- 908: "does not permutes" --> "does not permute"

- 947: "at the first times" --> "at the first time"

That's as far as I've got so far -- other duties call.



---

archive/issue_comments_123919.json:
```json
{
    "body": "Thanks for the detailed report.\n\n \n> Algorithm comments: \n> \n> - For permutation subgroups, almost all calculations are done with a relabelled version, but this is generated anew every time! I'd suggest:\n> \n>   - having a flag that remembers whether the group is already canonically labelled,\n> \n>   - when that's not the case, caching the canonically labelled version.\n\nTotally right. I choose to add an attribute _canonical_label_group when the group with canonical renumbering has been computed.\n \n> - At line 1019 of `arithgroup.py`, if check is True, won't this cause the check code to be run *twice*?\n\nI don't think so. The function __call__ is called only once, the __contains__ method does not call the constructor and the __init__ method of ArithmeticSubgroupElement does not care about wheter or not the element is in the subgroup \"parent\" given as argument.\n\n> Corrections to docstrings:\n\nI made the corrections.",
    "created_at": "2011-07-06T14:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123919",
    "user": "vdelecroix"
}
```

Thanks for the detailed report.

 
> Algorithm comments: 
> 
> - For permutation subgroups, almost all calculations are done with a relabelled version, but this is generated anew every time! I'd suggest:
> 
>   - having a flag that remembers whether the group is already canonically labelled,
> 
>   - when that's not the case, caching the canonically labelled version.

Totally right. I choose to add an attribute _canonical_label_group when the group with canonical renumbering has been computed.
 
> - At line 1019 of `arithgroup.py`, if check is True, won't this cause the check code to be run *twice*?

I don't think so. The function __call__ is called only once, the __contains__ method does not call the constructor and the __init__ method of ArithmeticSubgroupElement does not care about wheter or not the element is in the subgroup "parent" given as argument.

> Corrections to docstrings:

I made the corrections.



---

archive/issue_comments_123920.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-07-06T14:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123920",
    "user": "vdelecroix"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_123921.json:
```json
{
    "body": "Replying to [comment:9 vdelecroix]:\n> > Algorithm comments: \n> > \n> > - For permutation subgroups, almost all calculations are done with a relabelled version, but this is generated anew every time! I'd suggest:\n> > \n> >   - having a flag that remembers whether the group is already canonically labelled,\n> > \n> >   - when that's not the case, caching the canonically labelled version.\n> \n> Totally right. I choose to add an attribute _canonical_label_group when the group with canonical renumbering has been computed.\n\nThere is an amusingly subtle bug here.\n\nAt line 769, the code sets the attribute `_canonical_labelel_group`, which is clearly a typo. This means that a subsequent hasattr check for `_canonical_label_group` returns False, leading to the following:\n\n\n```\nsage: S2 = \"(1,2)(3,4)(5,6)\"\nsage: S3 = \"(1,3,5)(2,4,6)\"\nsage: G = ArithmeticSubgroup_Permutation(S2=S2,S3=S3)\nsage: H = G.relabel(inplace=False)\nsage: G.has_canonical_labels()\nFalse\n```\n\n\nI don't think this is what you intended, is it?\n\nThe reason I said it's complicated is that naming the method `\"has_canonical_labels\"` is slightly misleading. I would have assumed that `\"G.has_canonical_labels() == True\"` means that the labels G is using are the canonical ones. Although it's not what you intended, the typo has meant that the function is now *almost* doing what I feel the name suggests it should do! (\"Almost\" because it might return False in some cases even if the labels actually are the canonical ones.)\n\nI would advocate correcting the typo at line 769 but also changing the `has_canonical_labels` function so it does what I said, i.e. so returns True if and only if `self._canonical_rooted_labels() == range(self.index())`, with a docstring to match.\n\n> > - At line 1019 of `arithgroup.py`, if check is True, won't this cause the check code to be run *twice*?\n> \n> I don't think so. \n\nYou're right, of course; sorry.",
    "created_at": "2011-07-06T20:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123921",
    "user": "davidloeffler"
}
```

Replying to [comment:9 vdelecroix]:
> > Algorithm comments: 
> > 
> > - For permutation subgroups, almost all calculations are done with a relabelled version, but this is generated anew every time! I'd suggest:
> > 
> >   - having a flag that remembers whether the group is already canonically labelled,
> > 
> >   - when that's not the case, caching the canonically labelled version.
> 
> Totally right. I choose to add an attribute _canonical_label_group when the group with canonical renumbering has been computed.

There is an amusingly subtle bug here.

At line 769, the code sets the attribute `_canonical_labelel_group`, which is clearly a typo. This means that a subsequent hasattr check for `_canonical_label_group` returns False, leading to the following:


```
sage: S2 = "(1,2)(3,4)(5,6)"
sage: S3 = "(1,3,5)(2,4,6)"
sage: G = ArithmeticSubgroup_Permutation(S2=S2,S3=S3)
sage: H = G.relabel(inplace=False)
sage: G.has_canonical_labels()
False
```


I don't think this is what you intended, is it?

The reason I said it's complicated is that naming the method `"has_canonical_labels"` is slightly misleading. I would have assumed that `"G.has_canonical_labels() == True"` means that the labels G is using are the canonical ones. Although it's not what you intended, the typo has meant that the function is now *almost* doing what I feel the name suggests it should do! ("Almost" because it might return False in some cases even if the labels actually are the canonical ones.)

I would advocate correcting the typo at line 769 but also changing the `has_canonical_labels` function so it does what I said, i.e. so returns True if and only if `self._canonical_rooted_labels() == range(self.index())`, with a docstring to match.

> > - At line 1019 of `arithgroup.py`, if check is True, won't this cause the check code to be run *twice*?
> 
> I don't think so. 

You're right, of course; sorry.



---

archive/issue_comments_123922.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2011-07-06T20:32:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123922",
    "user": "davidloeffler"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_123923.json:
```json
{
    "body": "Replying to [comment:10 davidloeffler]:\n> Replying to [comment:9 vdelecroix]:\n> > > Algorithm comments: \n> > > \n> > > - For permutation subgroups, almost all calculations are done with a relabelled version, but this is generated anew every time! I'd suggest:\n> > > \n> > >   - having a flag that remembers whether the group is already canonically labelled,\n> > > \n> > >   - when that's not the case, caching the canonically labelled version.\n> > \n> > Totally right. I choose to add an attribute _canonical_label_group when the group with canonical renumbering has been computed.\n> \n> There is an amusingly subtle bug here.\n> \n\nHopefully, you find that crazy bug! Thanks! I had a supplementary doctest for this method.\n\n> \n> I would advocate correcting the typo at line 769 but also changing the `has_canonical_labels` function so it does what I said, i.e. so returns True if and only if `self._canonical_rooted_labels() == range(self.index())`, with a docstring to match.\n>\n\nI removed the function has_canonical_labels which is not useful at all.",
    "created_at": "2011-07-06T21:50:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123923",
    "user": "vdelecroix"
}
```

Replying to [comment:10 davidloeffler]:
> Replying to [comment:9 vdelecroix]:
> > > Algorithm comments: 
> > > 
> > > - For permutation subgroups, almost all calculations are done with a relabelled version, but this is generated anew every time! I'd suggest:
> > > 
> > >   - having a flag that remembers whether the group is already canonically labelled,
> > > 
> > >   - when that's not the case, caching the canonically labelled version.
> > 
> > Totally right. I choose to add an attribute _canonical_label_group when the group with canonical renumbering has been computed.
> 
> There is an amusingly subtle bug here.
> 

Hopefully, you find that crazy bug! Thanks! I had a supplementary doctest for this method.

> 
> I would advocate correcting the typo at line 769 but also changing the `has_canonical_labels` function so it does what I said, i.e. so returns True if and only if `self._canonical_rooted_labels() == range(self.index())`, with a docstring to match.
>

I removed the function has_canonical_labels which is not useful at all.



---

archive/issue_comments_123924.json:
```json
{
    "body": "Attachment",
    "created_at": "2011-07-06T21:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123924",
    "user": "vdelecroix"
}
```

Attachment



---

archive/issue_comments_123925.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-07-06T21:51:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123925",
    "user": "vdelecroix"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_123926.json:
```json
{
    "body": "Excellent -- good stuff. Positive review. Sadly this is probably too late for 4.7.1, but it should get into 4.7.2.\n\n(Now I will have to rebase #5048, and not for the first time. I should stop giving positive reviews to patches that conflict with my own ;-) )",
    "created_at": "2011-07-06T22:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123926",
    "user": "davidloeffler"
}
```

Excellent -- good stuff. Positive review. Sadly this is probably too late for 4.7.1, but it should get into 4.7.2.

(Now I will have to rebase #5048, and not for the first time. I should stop giving positive reviews to patches that conflict with my own ;-) )



---

archive/issue_comments_123927.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-07-06T22:04:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123927",
    "user": "davidloeffler"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_123928.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-07-14T18:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123928",
    "user": "davidloeffler"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_123929.json:
```json
{
    "body": "Hang on, there's something wrong with `to_even_subgroup`.\n\n\n```\nsage: H = ArithmeticSubgroup_Permutation(S2 = '(1,4,11,14)(2,7,12,17)(3,5,13,15)(6,9,16,19)(8,10,18,20)', S3 = '(1,2,3,11,12,13)(4,5,6,14,15,16)(7,8,9,17,18,19)(10,20)')\nsage: G = H.to_even_subgroup()\nsage: H.is_subgroup(G)\nFalse\n```\n",
    "created_at": "2011-07-14T18:05:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123929",
    "user": "davidloeffler"
}
```

Hang on, there's something wrong with `to_even_subgroup`.


```
sage: H = ArithmeticSubgroup_Permutation(S2 = '(1,4,11,14)(2,7,12,17)(3,5,13,15)(6,9,16,19)(8,10,18,20)', S3 = '(1,2,3,11,12,13)(4,5,6,14,15,16)(7,8,9,17,18,19)(10,20)')
sage: G = H.to_even_subgroup()
sage: H.is_subgroup(G)
False
```




---

archive/issue_comments_123930.json:
```json
{
    "body": "Attachment\n\napply over previous patch",
    "created_at": "2011-07-14T18:23:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123930",
    "user": "davidloeffler"
}
```

Attachment

apply over previous patch



---

archive/issue_comments_123931.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-07-14T18:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123931",
    "user": "davidloeffler"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_123932.json:
```json
{
    "body": "Here's a patch. The problem was the use of a python set type: you can certainly enumerate sets, but you shouldn't expect the enumeration order to be consistent! I changed the code slightly to use lists, combining two loops into one.\n\nVincent: if you're happy with my change, you can restore the positive review.",
    "created_at": "2011-07-14T18:25:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123932",
    "user": "davidloeffler"
}
```

Here's a patch. The problem was the use of a python set type: you can certainly enumerate sets, but you shouldn't expect the enumeration order to be consistent! I changed the code slightly to use lists, combining two loops into one.

Vincent: if you're happy with my change, you can restore the positive review.



---

archive/issue_comments_123933.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-07-14T20:09:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123933",
    "user": "vdelecroix"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_123934.json:
```json
{
    "body": "Replying to [comment:17 davidloeffler]:\n> Here's a patch. The problem was the use of a python set type: you can certainly enumerate sets, but you shouldn't expect the enumeration order to be consistent! I changed the code slightly to use lists, combining two loops into one.\n> \n> Vincent: if you're happy with my change, you can restore the positive review.\n\nThanks for debugging (it seems that you're using the code... cool!).",
    "created_at": "2011-07-14T20:09:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123934",
    "user": "vdelecroix"
}
```

Replying to [comment:17 davidloeffler]:
> Here's a patch. The problem was the use of a python set type: you can certainly enumerate sets, but you shouldn't expect the enumeration order to be consistent! I changed the code slightly to use lists, combining two loops into one.
> 
> Vincent: if you're happy with my change, you can restore the positive review.

Thanks for debugging (it seems that you're using the code... cool!).



---

archive/issue_comments_123935.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-07-21T20:38:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123935",
    "user": "davidloeffler"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_123936.json:
```json
{
    "body": "Hang on, this isn't good:\n\n```\nsage -t -long -force_lib \"devel/sage/sage/structure/sage_object.pyx\"\n**********************************************************************\nFile \"/storage/masiao/sage-4.7.1.alpha4/devel/sage/sage/structure/sage_object.pyx\", line 1077:\n    sage: sage.structure.sage_object.unpickle_all()  # (4s on sage.math, 2011)\nExpected:\n    Successfully unpickled ... objects.\n    Failed to unpickle 0 objects.\nGot: \n     * unpickle failure: load('/home/masiao/.sage/temp/selmer/23062/dir_2/pickle_jar/_class__sage_modular_arithgroup_arithgroup_perm_ArithmeticSubgroup_Permutation__.sobj')\n    Failed:\n    _class__sage_modular_arithgroup_arithgroup_perm_ArithmeticSubgroup_Permutation__.sobj\n    Successfully unpickled 586 objects.\n    Failed to unpickle 1 objects.\n**********************************************************************\n1 items had failures:\n   1 of   7 in __main__.example_25\n***Test Failed*** 1 failures.\nFor whitespace errors, see the file /home/masiao/.sage//tmp/.doctest_sage_object.py\n         [8.2 s]\n```\n\n\nThis is because ` sage.modular.arithgroup.arithgroup_perm.ArithmeticSubgroup_Permutation` was a class before and is now a factory function, so Python doesn't know how to unpickle pickled objects of that class.",
    "created_at": "2011-07-21T20:38:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123936",
    "user": "davidloeffler"
}
```

Hang on, this isn't good:

```
sage -t -long -force_lib "devel/sage/sage/structure/sage_object.pyx"
**********************************************************************
File "/storage/masiao/sage-4.7.1.alpha4/devel/sage/sage/structure/sage_object.pyx", line 1077:
    sage: sage.structure.sage_object.unpickle_all()  # (4s on sage.math, 2011)
Expected:
    Successfully unpickled ... objects.
    Failed to unpickle 0 objects.
Got: 
     * unpickle failure: load('/home/masiao/.sage/temp/selmer/23062/dir_2/pickle_jar/_class__sage_modular_arithgroup_arithgroup_perm_ArithmeticSubgroup_Permutation__.sobj')
    Failed:
    _class__sage_modular_arithgroup_arithgroup_perm_ArithmeticSubgroup_Permutation__.sobj
    Successfully unpickled 586 objects.
    Failed to unpickle 1 objects.
**********************************************************************
1 items had failures:
   1 of   7 in __main__.example_25
***Test Failed*** 1 failures.
For whitespace errors, see the file /home/masiao/.sage//tmp/.doctest_sage_object.py
         [8.2 s]
```


This is because ` sage.modular.arithgroup.arithgroup_perm.ArithmeticSubgroup_Permutation` was a class before and is now a factory function, so Python doesn't know how to unpickle pickled objects of that class.



---

archive/issue_comments_123937.json:
```json
{
    "body": "Attachment\n\napply over the two preceding patches",
    "created_at": "2011-07-30T12:15:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123937",
    "user": "davidloeffler"
}
```

Attachment

apply over the two preceding patches



---

archive/issue_comments_123938.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-07-30T12:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123938",
    "user": "davidloeffler"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_123939.json:
```json
{
    "body": "It turns out the unpickling problems can be sorted out by ensuring that ` sage.modular.arithgroup.arithgroup_perm.ArithmeticSubgroup_Permutation ` can be called with two positional arguments corresponding to L and R. All tests now pass on my system.",
    "created_at": "2011-07-30T12:17:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123939",
    "user": "davidloeffler"
}
```

It turns out the unpickling problems can be sorted out by ensuring that ` sage.modular.arithgroup.arithgroup_perm.ArithmeticSubgroup_Permutation ` can be called with two positional arguments corresponding to L and R. All tests now pass on my system.



---

archive/issue_comments_123940.json:
```json
{
    "body": "Replying to [comment:20 davidloeffler]:\n> It turns out the unpickling problems can be sorted out by ensuring that ` sage.modular.arithgroup.arithgroup_perm.ArithmeticSubgroup_Permutation ` can be called with two positional arguments corresponding to L and R. All tests now pass on my system.\n\nAll tests and backward compatibility with pickling also pass on my computer. I put a positive review.",
    "created_at": "2011-08-03T17:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123940",
    "user": "vdelecroix"
}
```

Replying to [comment:20 davidloeffler]:
> It turns out the unpickling problems can be sorted out by ensuring that ` sage.modular.arithgroup.arithgroup_perm.ArithmeticSubgroup_Permutation ` can be called with two positional arguments corresponding to L and R. All tests now pass on my system.

All tests and backward compatibility with pickling also pass on my computer. I put a positive review.



---

archive/issue_comments_123941.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-08-03T17:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123941",
    "user": "vdelecroix"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_123942.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-09-27T17:43:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/11250",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/11250#issuecomment-123942",
    "user": "leif"
}
```

Resolution: fixed
