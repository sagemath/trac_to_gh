# Issue 29264: spkg-check.in: Do not use sdh_make to do 'make check'

Issue created by migration from https://trac.sagemath.org/ticket/29501

Original creator: mkoeppe

Original creation time: 2020-04-13 02:57:50

CC:  dimpase jhpalmieri embray

`sdh_make` prints the misleading message "Error building $PKG_NAME"

```
$ grep sdh_make build/pkgs/*/spkg-check.in
build/pkgs/awali/spkg-check.in:sdh_make check
build/pkgs/barvinok/spkg-check.in:sdh_make check
build/pkgs/cocoalib/spkg-check.in:sdh_make check
build/pkgs/e_antic/spkg-check.in:sdh_make check
build/pkgs/fflas_ffpack/spkg-check.in:sdh_make check
build/pkgs/isl/spkg-check.in:sdh_make check
build/pkgs/openblas/spkg-check.in:sdh_make tests $OPENBLAS_CONFIGURE
build/pkgs/openblas/spkg-check.in:        sdh_make tests $OPENBLAS_CONFIGURE
build/pkgs/polylib/spkg-check.in:sdh_make check
build/pkgs/polymake/spkg-check.in:sdh_make test
build/pkgs/symengine/spkg-check.in:sdh_make test
build/pkgs/tides/spkg-check.in:sdh_make check AM_CFLAGS="" AM_FFLAGS=""
```



---

Comment by jhpalmieri created at 2020-04-13 04:36:02

Maybe just create a new function called `sdh_make_check` which is exactly the same as `sdh_make` but has a different error message. Or allow `sdh_make` to have an optional second argument, which defaults to "building".


---

Comment by mkoeppe created at 2020-04-13 17:51:40

New commits:


---

Comment by mkoeppe created at 2020-04-14 00:11:08

Changing status from new to needs_review.


---

Comment by dimpase created at 2020-04-14 02:34:06

maybe, for uniformity, not `"Failures checking $PKG_NAME"`, but `"Error checking $PKG_NAME"`


---

Comment by mkoeppe created at 2020-04-15 19:07:29

I worded it like this because if SAGE_CHECK=warn, then it is not an error but only a warning.


---

Comment by git created at 2020-04-18 05:46:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2020-04-18 18:52:34

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2020-04-18 18:53:03

rebased on top of #29510 to remove a merge conflict


---

Comment by mkoeppe created at 2020-04-18 18:53:10

needs review


---

Comment by jhpalmieri created at 2020-04-18 21:03:40

Changing status from needs_review to positive_review.


---

Comment by jhpalmieri created at 2020-04-18 21:03:40

Looks good to me.


---

Comment by mkoeppe created at 2020-04-18 21:31:23

Thank you!


---

Comment by vbraun created at 2020-04-22 20:52:19

Resolution: fixed
