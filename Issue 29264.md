# Issue 29264: spkg-check.in: Do not use sdh_make to do 'make check'

archive/issues_029264.json:
```json
{
    "body": "CC:  dimpase jhpalmieri embray\n\n`sdh_make` prints the misleading message \"Error building $PKG_NAME\"\n\n```\n$ grep sdh_make build/pkgs/*/spkg-check.in\nbuild/pkgs/awali/spkg-check.in:sdh_make check\nbuild/pkgs/barvinok/spkg-check.in:sdh_make check\nbuild/pkgs/cocoalib/spkg-check.in:sdh_make check\nbuild/pkgs/e_antic/spkg-check.in:sdh_make check\nbuild/pkgs/fflas_ffpack/spkg-check.in:sdh_make check\nbuild/pkgs/isl/spkg-check.in:sdh_make check\nbuild/pkgs/openblas/spkg-check.in:sdh_make tests $OPENBLAS_CONFIGURE\nbuild/pkgs/openblas/spkg-check.in:        sdh_make tests $OPENBLAS_CONFIGURE\nbuild/pkgs/polylib/spkg-check.in:sdh_make check\nbuild/pkgs/polymake/spkg-check.in:sdh_make test\nbuild/pkgs/symengine/spkg-check.in:sdh_make test\nbuild/pkgs/tides/spkg-check.in:sdh_make check AM_CFLAGS=\"\" AM_FFLAGS=\"\"\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/29501\n\n",
    "created_at": "2020-04-13T02:57:50Z",
    "labels": [
        "build",
        "minor",
        "bug"
    ],
    "title": "spkg-check.in: Do not use sdh_make to do 'make check'",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29264",
    "user": "mkoeppe"
}
```
CC:  dimpase jhpalmieri embray

`sdh_make` prints the misleading message "Error building $PKG_NAME"

```
$ grep sdh_make build/pkgs/*/spkg-check.in
build/pkgs/awali/spkg-check.in:sdh_make check
build/pkgs/barvinok/spkg-check.in:sdh_make check
build/pkgs/cocoalib/spkg-check.in:sdh_make check
build/pkgs/e_antic/spkg-check.in:sdh_make check
build/pkgs/fflas_ffpack/spkg-check.in:sdh_make check
build/pkgs/isl/spkg-check.in:sdh_make check
build/pkgs/openblas/spkg-check.in:sdh_make tests $OPENBLAS_CONFIGURE
build/pkgs/openblas/spkg-check.in:        sdh_make tests $OPENBLAS_CONFIGURE
build/pkgs/polylib/spkg-check.in:sdh_make check
build/pkgs/polymake/spkg-check.in:sdh_make test
build/pkgs/symengine/spkg-check.in:sdh_make test
build/pkgs/tides/spkg-check.in:sdh_make check AM_CFLAGS="" AM_FFLAGS=""
```


Issue created by migration from https://trac.sagemath.org/ticket/29501





---

archive/issue_comments_414805.json:
```json
{
    "body": "Maybe just create a new function called `sdh_make_check` which is exactly the same as `sdh_make` but has a different error message. Or allow `sdh_make` to have an optional second argument, which defaults to \"building\".",
    "created_at": "2020-04-13T04:36:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29264#issuecomment-414805",
    "user": "jhpalmieri"
}
```

Maybe just create a new function called `sdh_make_check` which is exactly the same as `sdh_make` but has a different error message. Or allow `sdh_make` to have an optional second argument, which defaults to "building".



---

archive/issue_comments_414806.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-04-13T17:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29264#issuecomment-414806",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_414807.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-04-14T00:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29264#issuecomment-414807",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_414808.json:
```json
{
    "body": "maybe, for uniformity, not `\"Failures checking $PKG_NAME\"`, but `\"Error checking $PKG_NAME\"`",
    "created_at": "2020-04-14T02:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29264#issuecomment-414808",
    "user": "dimpase"
}
```

maybe, for uniformity, not `"Failures checking $PKG_NAME"`, but `"Error checking $PKG_NAME"`



---

archive/issue_comments_414809.json:
```json
{
    "body": "I worded it like this because if SAGE_CHECK=warn, then it is not an error but only a warning.",
    "created_at": "2020-04-15T19:07:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29264#issuecomment-414809",
    "user": "mkoeppe"
}
```

I worded it like this because if SAGE_CHECK=warn, then it is not an error but only a warning.



---

archive/issue_comments_414810.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-18T05:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29264#issuecomment-414810",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_414811.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-04-18T18:52:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29264#issuecomment-414811",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_414812.json:
```json
{
    "body": "rebased on top of #29510 to remove a merge conflict",
    "created_at": "2020-04-18T18:53:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29264#issuecomment-414812",
    "user": "mkoeppe"
}
```

rebased on top of #29510 to remove a merge conflict



---

archive/issue_comments_414813.json:
```json
{
    "body": "needs review",
    "created_at": "2020-04-18T18:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29264#issuecomment-414813",
    "user": "mkoeppe"
}
```

needs review



---

archive/issue_comments_414814.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-18T21:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29264#issuecomment-414814",
    "user": "jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_414815.json:
```json
{
    "body": "Looks good to me.",
    "created_at": "2020-04-18T21:03:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29264#issuecomment-414815",
    "user": "jhpalmieri"
}
```

Looks good to me.



---

archive/issue_comments_414816.json:
```json
{
    "body": "Thank you!",
    "created_at": "2020-04-18T21:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29264#issuecomment-414816",
    "user": "mkoeppe"
}
```

Thank you!



---

archive/issue_comments_414817.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-22T20:52:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29264",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29264#issuecomment-414817",
    "user": "vbraun"
}
```

Resolution: fixed
