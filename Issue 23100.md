# Issue 23100: Use variable names instead of symbolic variables

archive/issues_023100.json:
```json
{
    "body": "CC:  simonking rws\n\nWhere possible, use `QQ[\"x\"]` instead of `QQ[x]` to construct polynomial rings. After #10483, the latter will be deprecated.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/23337\n\n",
    "created_at": "2017-06-29T12:05:11Z",
    "labels": [
        "basic arithmetic",
        "major",
        "enhancement"
    ],
    "title": "Use variable names instead of symbolic variables",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/23100",
    "user": "jdemeyer"
}
```
CC:  simonking rws

Where possible, use `QQ["x"]` instead of `QQ[x]` to construct polynomial rings. After #10483, the latter will be deprecated.


Issue created by migration from https://trac.sagemath.org/ticket/23337





---

archive/issue_comments_323010.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-06-29T12:16:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323010",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_323011.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-06-29T12:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323011",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_323012.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-06-29T12:24:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323012",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_323013.json:
```json
{
    "body": "There are some doctest failures (see patchbot). There are some actual changes in output type, but I am not sure if they are (more) correct or not. I would think some of them are actual regressions since they do not contain as much information (i.e., `ZZ[x][y]` has slightly different structure for things like factoring compared to `ZZ[x,y]`).",
    "created_at": "2017-06-30T00:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323013",
    "user": "tscrim"
}
```

There are some doctest failures (see patchbot). There are some actual changes in output type, but I am not sure if they are (more) correct or not. I would think some of them are actual regressions since they do not contain as much information (i.e., `ZZ[x][y]` has slightly different structure for things like factoring compared to `ZZ[x,y]`).



---

archive/issue_comments_323014.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-06-30T08:19:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323014",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_323015.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-06-30T08:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323015",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_323016.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-30T09:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323016",
    "user": "jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_323017.json:
```json
{
    "body": "I reverted the changes to `flatten.py`.",
    "created_at": "2017-06-30T09:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323017",
    "user": "jdemeyer"
}
```

I reverted the changes to `flatten.py`.



---

archive/issue_comments_323018.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-30T10:34:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323018",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_323019.json:
```json
{
    "body": "I think I understand what is going wrong with `flatten.py`. It is checking the keys in `D`, which are actual variables and hence, do not compare with the string values. So the variable names all get included when constructing `new_vars` on this line:\n\n```python\nnew_vars = [[[t for t in v if t not in newD.keys()], b] for v,b in old_vars]\n```\n\nI think I see a good way to fix this. I also am going to do a slight bit of cleanup of that method.",
    "created_at": "2017-06-30T12:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323019",
    "user": "tscrim"
}
```

I think I understand what is going wrong with `flatten.py`. It is checking the keys in `D`, which are actual variables and hence, do not compare with the string values. So the variable names all get included when constructing `new_vars` on this line:

```python
new_vars = [[[t for t in v if t not in newD.keys()], b] for v,b in old_vars]
```

I think I see a good way to fix this. I also am going to do a slight bit of cleanup of that method.



---

archive/issue_comments_323020.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-06-30T12:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323020",
    "user": "tscrim"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_323021.json:
```json
{
    "body": "Given that I reverted the changes to `flatten.py` and that the previously-failing doctests now pass, why was this set to needs_work?",
    "created_at": "2017-06-30T12:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323021",
    "user": "jdemeyer"
}
```

Given that I reverted the changes to `flatten.py` and that the previously-failing doctests now pass, why was this set to needs_work?



---

archive/issue_comments_323022.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-06-30T12:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323022",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_323023.json:
```json
{
    "body": "This fixes the failing doctests but addresses the problem in `flatten.py` (with some simple cleanup).\n----\nNew commits:",
    "created_at": "2017-06-30T12:20:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323023",
    "user": "tscrim"
}
```

This fixes the failing doctests but addresses the problem in `flatten.py` (with some simple cleanup).
----
New commits:



---

archive/issue_comments_323024.json:
```json
{
    "body": "I would rather fix the problem than push it off until later.",
    "created_at": "2017-06-30T12:21:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323024",
    "user": "tscrim"
}
```

I would rather fix the problem than push it off until later.



---

archive/issue_comments_323025.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-06-30T12:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323025",
    "user": "jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_323026.json:
```json
{
    "body": "Creating tickets is cheap: #23343\n----\nNew commits:",
    "created_at": "2017-06-30T12:25:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323026",
    "user": "jdemeyer"
}
```

Creating tickets is cheap: #23343
----
New commits:



---

archive/issue_comments_323027.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-07-26T22:13:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/23100",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/23100#issuecomment-323027",
    "user": "vbraun"
}
```

Resolution: fixed
