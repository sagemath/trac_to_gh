# Issue 23100: Use variable names instead of symbolic variables

Issue created by migration from https://trac.sagemath.org/ticket/23337

Original creator: jdemeyer

Original creation time: 2017-06-29 12:05:11

CC:  simonking rws

Where possible, use `QQ["x"]` instead of `QQ[x]` to construct polynomial rings. After #10483, the latter will be deprecated.



---

Comment by git created at 2017-06-29 12:16:36

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2017-06-29 12:19:40

Changing status from new to needs_review.


---

Comment by git created at 2017-06-29 12:24:05

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tscrim created at 2017-06-30 00:20:30

There are some doctest failures (see patchbot). There are some actual changes in output type, but I am not sure if they are (more) correct or not. I would think some of them are actual regressions since they do not contain as much information (i.e., `ZZ[x][y]` has slightly different structure for things like factoring compared to `ZZ[x,y]`).


---

Comment by jdemeyer created at 2017-06-30 08:19:28

Changing status from needs_review to needs_work.


---

Comment by git created at 2017-06-30 08:59:27

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2017-06-30 09:05:18

Changing status from needs_work to needs_review.


---

Comment by jdemeyer created at 2017-06-30 09:05:18

I reverted the changes to `flatten.py`.


---

Comment by jdemeyer created at 2017-06-30 10:34:02

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2017-06-30 12:11:21

I think I understand what is going wrong with `flatten.py`. It is checking the keys in `D`, which are actual variables and hence, do not compare with the string values. So the variable names all get included when constructing `new_vars` on this line:

```python
new_vars = [[[t for t in v if t not in newD.keys()], b] for v,b in old_vars]
```

I think I see a good way to fix this. I also am going to do a slight bit of cleanup of that method.


---

Comment by tscrim created at 2017-06-30 12:11:21

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2017-06-30 12:20:29

Given that I reverted the changes to `flatten.py` and that the previously-failing doctests now pass, why was this set to needs_work?


---

Comment by tscrim created at 2017-06-30 12:20:55

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2017-06-30 12:20:55

This fixes the failing doctests but addresses the problem in `flatten.py` (with some simple cleanup).
----
New commits:


---

Comment by tscrim created at 2017-06-30 12:21:35

I would rather fix the problem than push it off until later.


---

Comment by jdemeyer created at 2017-06-30 12:25:37

Changing status from needs_review to positive_review.


---

Comment by jdemeyer created at 2017-06-30 12:25:37

Creating tickets is cheap: #23343
----
New commits:


---

Comment by vbraun created at 2017-07-26 22:13:02

Resolution: fixed
