# Issue 27436: AttributeError of Polyhedron.volume()

archive/issues_027436.json:
```json
{
    "body": "CC:  @jplab\n\n\n```\nsage: P = Polyhedron(vertices=[[]]).volume()\nTraceback (most recent call last)\n...\nAttributeError: 'int' object has no attribute 'set_immutable'\n```\n\n\nThe output should be 0, just like\n\n```\nsage: P = Polyhedron(vertices=[]).volume()\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/27673\n\n",
    "created_at": "2019-04-15T20:30:42Z",
    "labels": [
        "component: geometry",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "AttributeError of Polyhedron.volume()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27436",
    "user": "https://github.com/kliem"
}
```
CC:  @jplab


```
sage: P = Polyhedron(vertices=[[]]).volume()
Traceback (most recent call last)
...
AttributeError: 'int' object has no attribute 'set_immutable'
```


The output should be 0, just like

```
sage: P = Polyhedron(vertices=[]).volume()
```


Issue created by migration from https://trac.sagemath.org/ticket/27673





---

archive/issue_comments_386319.json:
```json
{
    "body": "New commits:",
    "created_at": "2019-04-15T21:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386319",
    "user": "https://github.com/kliem"
}
```

New commits:



---

archive/issue_comments_386320.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-04-15T21:52:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386320",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_386321.json:
```json
{
    "body": "When thinking about it again, I'm not sure anymore that this is the correct output.\n\nHowever, an AttributeError is strange and the dostring does not indicate, what should happen.\n\nAlso it's confusing that the empty Polyhedron gives an output.",
    "created_at": "2019-04-16T07:18:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386321",
    "user": "https://github.com/kliem"
}
```

When thinking about it again, I'm not sure anymore that this is the correct output.

However, an AttributeError is strange and the dostring does not indicate, what should happen.

Also it's confusing that the empty Polyhedron gives an output.



---

archive/issue_comments_386322.json:
```json
{
    "body": "This might be related to #17339. If you want to have fun in the maze of defaulting behaviour, I challenge you to come up with a full-proof default behavior that will please everyone.\n\nOne thing that you should be aware of, is the current handling of things via different H and V inputs.\n\n\n```\nsage: P = Polyhedron(vertices=[])\nsage: Q = Polyhedron(vertices=[[]])\nsage: P\nThe empty polyhedron in ZZ^0\nsage: Q\nA 0-dimensional polyhedron in ZZ^0 defined as the convex hull of 1 vertex\n```\n\n\nThe first one is the empty polyhedron. The second one is just one point, i.e. the full space. They are __not__ the same.",
    "created_at": "2019-04-16T07:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386322",
    "user": "https://github.com/jplab"
}
```

This might be related to #17339. If you want to have fun in the maze of defaulting behaviour, I challenge you to come up with a full-proof default behavior that will please everyone.

One thing that you should be aware of, is the current handling of things via different H and V inputs.


```
sage: P = Polyhedron(vertices=[])
sage: Q = Polyhedron(vertices=[[]])
sage: P
The empty polyhedron in ZZ^0
sage: Q
A 0-dimensional polyhedron in ZZ^0 defined as the convex hull of 1 vertex
```


The first one is the empty polyhedron. The second one is just one point, i.e. the full space. They are __not__ the same.



---

archive/issue_comments_386323.json:
```json
{
    "body": "Well, I can live with a meaningful 'NotImplementedError'.\n\nEither there is a measure with ambient dimension zero or not. So the empty and the one point polyhedron in zero dimensional space should either have a well-defined behaiviour or not.\n\nThe reason I looked into it is that the original error is hard to trace back. It took me a bit to figure out, what went wrong there.\n\nReplying to [comment:5 jipilab]:\n> This might be related to #17339. If you want to have fun in the maze of defaulting behaviour, I challenge you to come up with a full-proof default behavior that will please everyone.\n> \n> One thing that you should be aware of, is the current handling of things via different H and V inputs.\n> \n> {{{\n> sage: P = Polyhedron(vertices=[])\n> sage: Q = Polyhedron(vertices=[[]])\n> sage: P\n> The empty polyhedron in ZZ^0\n> sage: Q\n> A 0-dimensional polyhedron in ZZ^0 defined as the convex hull of 1 vertex\n> }}}\n> \n> The first one is the empty polyhedron. The second one is just one point, i.e. the full space. They are __not__ the same.",
    "created_at": "2019-04-16T08:19:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386323",
    "user": "https://github.com/kliem"
}
```

Well, I can live with a meaningful 'NotImplementedError'.

Either there is a measure with ambient dimension zero or not. So the empty and the one point polyhedron in zero dimensional space should either have a well-defined behaiviour or not.

The reason I looked into it is that the original error is hard to trace back. It took me a bit to figure out, what went wrong there.

Replying to [comment:5 jipilab]:
> This might be related to #17339. If you want to have fun in the maze of defaulting behaviour, I challenge you to come up with a full-proof default behavior that will please everyone.
> 
> One thing that you should be aware of, is the current handling of things via different H and V inputs.
> 
> {{{
> sage: P = Polyhedron(vertices=[])
> sage: Q = Polyhedron(vertices=[[]])
> sage: P
> The empty polyhedron in ZZ^0
> sage: Q
> A 0-dimensional polyhedron in ZZ^0 defined as the convex hull of 1 vertex
> }}}
> 
> The first one is the empty polyhedron. The second one is just one point, i.e. the full space. They are __not__ the same.



---

archive/issue_comments_386324.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-16T13:18:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386324",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_386325.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-16T13:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386325",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_386326.json:
```json
{
    "body": "You should change the title and description of the ticket to reflect faithfully the changes inside the ticket.",
    "created_at": "2019-04-26T12:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386326",
    "user": "https://github.com/jplab"
}
```

You should change the title and description of the ticket to reflect faithfully the changes inside the ticket.



---

archive/issue_comments_386327.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-04-26T12:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386327",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_386328.json:
```json
{
    "body": "Failed doctest:\n\n\n```\nsage -t --long src/sage/geometry/polyhedron/base.py\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 5251, in sage.geometry.polyhedron.base.Polyhedron_base.volume\nFailed example:\n    P = Polyhedron(vertices=[]); P\nExpected:\n    The empty polyhedron in ZZ^0\n    0\nGot:\n    The empty polyhedron in ZZ^0\n**********************************************************************\n```\n",
    "created_at": "2019-04-26T12:29:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386328",
    "user": "https://github.com/jplab"
}
```

Failed doctest:


```
sage -t --long src/sage/geometry/polyhedron/base.py
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 5251, in sage.geometry.polyhedron.base.Polyhedron_base.volume
Failed example:
    P = Polyhedron(vertices=[]); P
Expected:
    The empty polyhedron in ZZ^0
    0
Got:
    The empty polyhedron in ZZ^0
**********************************************************************
```




---

archive/issue_comments_386329.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-07T19:22:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386329",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_386330.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-05-07T19:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386330",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_386331.json:
```json
{
    "body": "Looks good to me now.",
    "created_at": "2019-05-10T08:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386331",
    "user": "https://github.com/jplab"
}
```

Looks good to me now.



---

archive/issue_comments_386332.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-05-10T08:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386332",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_386333.json:
```json
{
    "body": "Changing keywords from \"\" to \"polytopes, volume\".",
    "created_at": "2019-05-10T08:44:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386333",
    "user": "https://github.com/jplab"
}
```

Changing keywords from "" to "polytopes, volume".



---

archive/issue_comments_386334.json:
```json
{
    "body": "Merge conflict, but isn't it also also mathematically wrong:\n* In the \"ambient\" measure, if ambient dim > 0, the volume of a point is 0\n* In the \"ambient\" measure, if ambient dim == 0, the volume of a point is 1\n* In the induced measures, the volume of a point is 1\n* The volume of the empty polyhedron is always 0",
    "created_at": "2019-05-11T15:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386334",
    "user": "https://github.com/vbraun"
}
```

Merge conflict, but isn't it also also mathematically wrong:
* In the "ambient" measure, if ambient dim > 0, the volume of a point is 0
* In the "ambient" measure, if ambient dim == 0, the volume of a point is 1
* In the induced measures, the volume of a point is 1
* The volume of the empty polyhedron is always 0



---

archive/issue_comments_386335.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-05-11T15:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386335",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_386336.json:
```json
{
    "body": "Replying to [comment:17 vbraun]:\n> Merge conflict, but isn't it also also mathematically wrong:\n> * In the \"ambient\" measure, if ambient dim > 0, the volume of a point is 0\nSee line above. Which returns 0 in that case.\n> * In the \"ambient\" measure, if ambient dim == 0, the volume of a point is 1\n> * In the induced measures, the volume of a point is 1\nA point is projected to 0-dimensional space an then 1 is returned.\n> * The volume of the empty polyhedron is always 0\nIt has dimension -1 but ambient dimension at least 0, so zero will be returned.\n\nI don't see which criteria is not met.",
    "created_at": "2019-05-11T16:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386336",
    "user": "https://github.com/kliem"
}
```

Replying to [comment:17 vbraun]:
> Merge conflict, but isn't it also also mathematically wrong:
> * In the "ambient" measure, if ambient dim > 0, the volume of a point is 0
See line above. Which returns 0 in that case.
> * In the "ambient" measure, if ambient dim == 0, the volume of a point is 1
> * In the induced measures, the volume of a point is 1
A point is projected to 0-dimensional space an then 1 is returned.
> * The volume of the empty polyhedron is always 0
It has dimension -1 but ambient dimension at least 0, so zero will be returned.

I don't see which criteria is not met.



---

archive/issue_comments_386337.json:
```json
{
    "body": "Oh ok, I misread the docstring.\n\nStill a merge conflict though.",
    "created_at": "2019-05-11T22:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386337",
    "user": "https://github.com/vbraun"
}
```

Oh ok, I misread the docstring.

Still a merge conflict though.



---

archive/issue_comments_386338.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2019-05-12T18:04:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386338",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_386339.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-12T18:43:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386339",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_386340.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-05-12T18:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386340",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_386341.json:
```json
{
    "body": "Why does the merge fail again?\n\nLast time I fixed it, was appearently a waste of time.\nI guess I could start a new branch again, but only if someone sets it to positive review before the merge fails again.",
    "created_at": "2019-05-28T13:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386341",
    "user": "https://github.com/kliem"
}
```

Why does the merge fail again?

Last time I fixed it, was appearently a waste of time.
I guess I could start a new branch again, but only if someone sets it to positive review before the merge fails again.



---

archive/issue_comments_386342.json:
```json
{
    "body": "Replying to [comment:23 gh-kliem]:\n> Why does the merge fail again?\n> \n> Last time I fixed it, was appearently a waste of time.\n> I guess I could start a new branch again, but only if someone sets it to positive review before the merge fails again.\n\n#25091 Modified the volume function and got merged in 8.8.beta6 that's most likely the conflict.",
    "created_at": "2019-05-29T08:52:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386342",
    "user": "https://github.com/jplab"
}
```

Replying to [comment:23 gh-kliem]:
> Why does the merge fail again?
> 
> Last time I fixed it, was appearently a waste of time.
> I guess I could start a new branch again, but only if someone sets it to positive review before the merge fails again.

#25091 Modified the volume function and got merged in 8.8.beta6 that's most likely the conflict.



---

archive/issue_comments_386343.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-05-29T08:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386343",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_386344.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-31T21:14:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386344",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_386345.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-05-31T21:19:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386345",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_386346.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2019-05-31T21:23:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386346",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_386347.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-05-31T21:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386347",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_386348.json:
```json
{
    "body": "I have no idea, how one is supposed to get rebase to work.\n\nThis is basically just writing the old text in the newest develop again.",
    "created_at": "2019-05-31T21:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386348",
    "user": "https://github.com/kliem"
}
```

I have no idea, how one is supposed to get rebase to work.

This is basically just writing the old text in the newest develop again.



---

archive/issue_comments_386349.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-06-01T09:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386349",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_386350.json:
```json
{
    "body": "Looks good to me now.",
    "created_at": "2019-06-01T09:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386350",
    "user": "https://github.com/jplab"
}
```

Looks good to me now.



---

archive/issue_events_025460.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-06-05T18:31:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/27436#event-25460"
}
```



---

archive/issue_comments_386351.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-06-05T18:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27436",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27436#issuecomment-386351",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
