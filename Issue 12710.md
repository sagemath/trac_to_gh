# Issue 12710: Allows a generalized Cartan matrix as input for Dynkin diagrams

archive/issues_012710.json:
```json
{
    "body": "Assignee: sage-combinat\n\nCC:  sage-combinat\n\nKeywords: Weyl group, Dynkin diagram, Cartan matrix\n\nDynkin diagrams can currently not be constructed using a generalized Cartan matrix.\n\nThis patch implements this.\n\nIssue created by migration from https://trac.sagemath.org/ticket/12882\n\n",
    "created_at": "2012-04-26T14:29:20Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.12",
    "title": "Allows a generalized Cartan matrix as input for Dynkin diagrams",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/12710",
    "user": "stumpc5"
}
```
Assignee: sage-combinat

CC:  sage-combinat

Keywords: Weyl group, Dynkin diagram, Cartan matrix

Dynkin diagrams can currently not be constructed using a generalized Cartan matrix.

This patch implements this.

Issue created by migration from https://trac.sagemath.org/ticket/12882





---

archive/issue_comments_152098.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-04-26T14:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152098",
    "user": "stumpc5"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_152099.json:
```json
{
    "body": "Please fill in your real name as Author.",
    "created_at": "2012-07-27T20:40:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152099",
    "user": "jdemeyer"
}
```

Please fill in your real name as Author.



---

archive/issue_comments_152100.json:
```json
{
    "body": "Hi Christian--\n\nYour code is checking that all the off-diagonal entries in the input matrix are strictly negative.  That seems a bit over-enthusiastic.  \n\nA doctest for the new functionality would also be good.  \n\ncheers,\n\nHugh",
    "created_at": "2012-11-11T06:33:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152100",
    "user": "hthomas"
}
```

Hi Christian--

Your code is checking that all the off-diagonal entries in the input matrix are strictly negative.  That seems a bit over-enthusiastic.  

A doctest for the new functionality would also be good.  

cheers,

Hugh



---

archive/issue_comments_152101.json:
```json
{
    "body": "Hi Christian--\n\nWhy does this have #8327 listed as a dependency?  \n\ncheers,\n\nHugh",
    "created_at": "2012-11-11T06:38:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152101",
    "user": "hthomas"
}
```

Hi Christian--

Why does this have #8327 listed as a dependency?  

cheers,

Hugh



---

archive/issue_comments_152102.json:
```json
{
    "body": "Replying to [comment:5 hthomas]:\n> Hi Christian--\n> \n> Your code is checking that all the off-diagonal entries in the input matrix are strictly negative.  That seems a bit over-enthusiastic.  \n> \n> A doctest for the new functionality would also be good.  \n\nHi Hugh!\n\nThanks for bringing back my/our attention to this ticket!\n\nI will be too busy to actively work on this patch in the next two weeks, but feel free to take it over and review/finish it if you like! I will now provide a version that you can work with (in particular, I deleted the dependency). Of course, you can as well wait until I finish the patch, if you prefer.\n\nBest, Christian",
    "created_at": "2012-11-11T08:28:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152102",
    "user": "stumpc5"
}
```

Replying to [comment:5 hthomas]:
> Hi Christian--
> 
> Your code is checking that all the off-diagonal entries in the input matrix are strictly negative.  That seems a bit over-enthusiastic.  
> 
> A doctest for the new functionality would also be good.  

Hi Hugh!

Thanks for bringing back my/our attention to this ticket!

I will be too busy to actively work on this patch in the next two weeks, but feel free to take it over and review/finish it if you like! I will now provide a version that you can work with (in particular, I deleted the dependency). Of course, you can as well wait until I finish the patch, if you prefer.

Best, Christian



---

archive/issue_comments_152103.json:
```json
{
    "body": "Attachment [trac_12882-generalized_cartan_matrix_as_dynkin_diagram_input-cs.patch](tarball://root/attachments/some-uuid/ticket12882/trac_12882-generalized_cartan_matrix_as_dynkin_diagram_input-cs.patch) by stumpc5 created at 2012-11-11 08:48:26",
    "created_at": "2012-11-11T08:48:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152103",
    "user": "stumpc5"
}
```

Attachment [trac_12882-generalized_cartan_matrix_as_dynkin_diagram_input-cs.patch](tarball://root/attachments/some-uuid/ticket12882/trac_12882-generalized_cartan_matrix_as_dynkin_diagram_input-cs.patch) by stumpc5 created at 2012-11-11 08:48:26



---

archive/issue_comments_152104.json:
```json
{
    "body": "I updated the patch on the combinat queue and also uploaded it here. The negative entries test was accidentally fixed in the following patch on reflection groups rather than in this patch. I replaced all `asserts` by `ValueErrors` (since I was told that's the way to do it some time ago).\n\nAs said, Hugh: feel free to take it over, or to review it as is.\n\nBest, Christian",
    "created_at": "2012-11-11T08:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152104",
    "user": "stumpc5"
}
```

I updated the patch on the combinat queue and also uploaded it here. The negative entries test was accidentally fixed in the following patch on reflection groups rather than in this patch. I replaced all `asserts` by `ValueErrors` (since I was told that's the way to do it some time ago).

As said, Hugh: feel free to take it over, or to review it as is.

Best, Christian



---

archive/issue_comments_152105.json:
```json
{
    "body": "I will take this over (since no progress has been made recently) and base it on #14137.",
    "created_at": "2013-04-12T14:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152105",
    "user": "tscrim"
}
```

I will take this over (since no progress has been made recently) and base it on #14137.



---

archive/issue_comments_152106.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2013-04-12T14:09:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152106",
    "user": "tscrim"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_152107.json:
```json
{
    "body": "Attachment [trac_12882-generalized_cartan_matrix_as_dynkin_diagram_input-cs.2.patch](tarball://root/attachments/some-uuid/ticket12882/trac_12882-generalized_cartan_matrix_as_dynkin_diagram_input-cs.2.patch) by tscrim created at 2013-04-12 21:02:20",
    "created_at": "2013-04-12T21:02:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152107",
    "user": "tscrim"
}
```

Attachment [trac_12882-generalized_cartan_matrix_as_dynkin_diagram_input-cs.2.patch](tarball://root/attachments/some-uuid/ticket12882/trac_12882-generalized_cartan_matrix_as_dynkin_diagram_input-cs.2.patch) by tscrim created at 2013-04-12 21:02:20



---

archive/issue_comments_152108.json:
```json
{
    "body": "New version of the patch ready for review.\n\nFor patchbot:\n\nApply: trac_12882-matrix_as_dynkin_diagram-ts.patch",
    "created_at": "2013-04-12T21:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152108",
    "user": "tscrim"
}
```

New version of the patch ready for review.

For patchbot:

Apply: trac_12882-matrix_as_dynkin_diagram-ts.patch



---

archive/issue_comments_152109.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-04-12T21:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152109",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_152110.json:
```json
{
    "body": "Rebased patch.\n\nApply: trac_12882-matrix_as_dynkin_diagram-ts.patch",
    "created_at": "2013-06-01T16:26:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152110",
    "user": "tscrim"
}
```

Rebased patch.

Apply: trac_12882-matrix_as_dynkin_diagram-ts.patch



---

archive/issue_comments_152111.json:
```json
{
    "body": "Hi Travis,\n\nThis patch does not pass all of it's doctests.  Also, is it a good idea to add a note to the documentation saying that only Cartan matrices whose Cartan types are implemented in Sage are legal input?  For example, the Cartan matrix \n\n```\nCartanMatrix([[2,-3],[-3,2]])\n```\n\nyields an error.  Can you also provide an example of inputting a Cartan matrix and an index set in the documentation?  \n\n-Ben",
    "created_at": "2013-06-21T18:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152111",
    "user": "bsalisbury1"
}
```

Hi Travis,

This patch does not pass all of it's doctests.  Also, is it a good idea to add a note to the documentation saying that only Cartan matrices whose Cartan types are implemented in Sage are legal input?  For example, the Cartan matrix 

```
CartanMatrix([[2,-3],[-3,2]])
```

yields an error.  Can you also provide an example of inputting a Cartan matrix and an index set in the documentation?  

-Ben



---

archive/issue_comments_152112.json:
```json
{
    "body": "Changing keywords from \"Weyl group, Dynkin diagram, Cartan matrix\" to \"Weyl group, Dynkin diagram, Cartan matrix, days49\".",
    "created_at": "2013-06-21T18:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152112",
    "user": "bsalisbury1"
}
```

Changing keywords from "Weyl group, Dynkin diagram, Cartan matrix" to "Weyl group, Dynkin diagram, Cartan matrix, days49".



---

archive/issue_comments_152113.json:
```json
{
    "body": "Hey Ben,\n\nNew version of the patch which passes all doctests and adds the example. Thanks for reviewing this.\n\nBest,\n\nTravis\n\nFor patchbot:\n\nApply: trac_12882-matrix_as_dynkin_diagram-ts.patch",
    "created_at": "2013-06-22T15:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152113",
    "user": "tscrim"
}
```

Hey Ben,

New version of the patch which passes all doctests and adds the example. Thanks for reviewing this.

Best,

Travis

For patchbot:

Apply: trac_12882-matrix_as_dynkin_diagram-ts.patch



---

archive/issue_comments_152114.json:
```json
{
    "body": "Hey Ben,\n\nOkay, `is_finite()` and `is_affine()` are working now for arbitrary Cartan matrices.\n\nBest,\n\nTravis",
    "created_at": "2013-06-23T21:32:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152114",
    "user": "tscrim"
}
```

Hey Ben,

Okay, `is_finite()` and `is_affine()` are working now for arbitrary Cartan matrices.

Best,

Travis



---

archive/issue_comments_152115.json:
```json
{
    "body": "For patchbot:\n\nApply: trac_12882-matrix_as_dynkin_diagram-ts.patch",
    "created_at": "2013-06-23T21:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152115",
    "user": "tscrim"
}
```

For patchbot:

Apply: trac_12882-matrix_as_dynkin_diagram-ts.patch



---

archive/issue_comments_152116.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-24T13:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152116",
    "user": "bsalisbury1"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_152117.json:
```json
{
    "body": "Hi Travis,\n\nThank you for making those changes!\n\n-Ben",
    "created_at": "2013-06-24T13:29:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152117",
    "user": "bsalisbury1"
}
```

Hi Travis,

Thank you for making those changes!

-Ben



---

archive/issue_comments_152118.json:
```json
{
    "body": "There are obvious doctest failures with the patchbot:\n\n```\nsage -t devel/sage/sage/combinat/root_system/dynkin_diagram.py\n**********************************************************************\nFile \"devel/sage/sage/combinat/root_system/dynkin_diagram.py\", line 145, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram\nFailed example:\n    DI.index_set()\nExpected:\n    (3, 5)\nGot:\n    [3, 5]\n**********************************************************************\nFile \"devel/sage/sage/combinat/root_system/dynkin_diagram.py\", line 149, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram\nFailed example:\n    DII.index_set()\nExpected:\n    ('x', -1)\nGot:\n    [-1, 'x']\n**********************************************************************\n```\n",
    "created_at": "2013-08-04T06:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152118",
    "user": "jdemeyer"
}
```

There are obvious doctest failures with the patchbot:

```
sage -t devel/sage/sage/combinat/root_system/dynkin_diagram.py
**********************************************************************
File "devel/sage/sage/combinat/root_system/dynkin_diagram.py", line 145, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram
Failed example:
    DI.index_set()
Expected:
    (3, 5)
Got:
    [3, 5]
**********************************************************************
File "devel/sage/sage/combinat/root_system/dynkin_diagram.py", line 149, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram
Failed example:
    DII.index_set()
Expected:
    ('x', -1)
Got:
    [-1, 'x']
**********************************************************************
```




---

archive/issue_comments_152119.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-08-04T06:03:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152119",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_152120.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-08-08T00:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152120",
    "user": "tscrim"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_152121.json:
```json
{
    "body": "Ah, there's a dependency from #14516 for those doctests. Ben and I were doing this on the combinat queue which had that patch applied.\n\n```\nsage -t root_system/dynkin_diagram.py\n    [88 tests, 3.67 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 4.1 seconds\n    cpu time: 1.8 seconds\n    cumulative wall time: 3.7 seconds\n```\n\n\nFor patchbot:\n\nApply: trac_12882-matrix_as_dynkin_diagram-ts.patch\u200b",
    "created_at": "2013-08-08T00:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152121",
    "user": "tscrim"
}
```

Ah, there's a dependency from #14516 for those doctests. Ben and I were doing this on the combinat queue which had that patch applied.

```
sage -t root_system/dynkin_diagram.py
    [88 tests, 3.67 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 4.1 seconds
    cpu time: 1.8 seconds
    cumulative wall time: 3.7 seconds
```


For patchbot:

Apply: trac_12882-matrix_as_dynkin_diagram-ts.patch​



---

archive/issue_comments_152122.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-08-16T08:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152122",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_152123.json:
```json
{
    "body": "\n```\nsage -t devel/sage/sage/combinat/root_system/dynkin_diagram.py\n**********************************************************************\nFile \"devel/sage/sage/combinat/root_system/dynkin_diagram.py\", line 149, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram\nFailed example:\n    DII.index_set()\nExpected:\n    ('x', -1)\nGot:\n    (-1, 'x')\n**********************************************************************\n```\n",
    "created_at": "2013-08-16T08:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152123",
    "user": "jdemeyer"
}
```


```
sage -t devel/sage/sage/combinat/root_system/dynkin_diagram.py
**********************************************************************
File "devel/sage/sage/combinat/root_system/dynkin_diagram.py", line 149, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram
Failed example:
    DII.index_set()
Expected:
    ('x', -1)
Got:
    (-1, 'x')
**********************************************************************
```




---

archive/issue_comments_152124.json:
```json
{
    "body": "Okay, I've made the offending test return a sorted list. However this should be overkill since `index_set` just makes the call to `vertices`, which returns a sorted list, into a tuple (i.e. there doesn't seem to be a set/dict being returned...). Here's the patches have applied on `5.11.rc0`:\n\n```\ntrac_14882-backtrack_longtime-dg.patch\ntrac_13589-categories-c3_under_control-nt.patch\ntrac_14507-tropical_semiring-ts.patch\ntrac_7983-major_index_and_other_tableau_fixes-dg.patch\ntrac_7983-review-ts.patch\ntrac_8386_really_just_moving-fc.patch\ntrac_8386_big_clean_fc.patch\ntrac_8386_assert_removal.patch\ntrac_14808-recoils_of_permutations-ts.patch\ntrac_10630-vector_partition-ap.patch\ntrac_14870-fix_int_mod_QQ-ts.patch\ntrac_14787-gyw_stats-bs.patch\ntrac_14787-pdf_fix-ts.patch\ntrac_14573-path_realizations-ts.patch\ntrac_11407-list_clone_improve-fh.patch\ntrac_14516-crystals_speedup-ts.patch\ntrac_12882-matrix_as_dynkin_diagram-ts.patch\n```\n\nSo I'm confused about why we're getting different results (and slightly worried).\n\nAnyways, Ben could you do a quick re-review of the patch? Thanks.\n\nFor patchbot:\n\nApply: trac_12882-matrix_as_dynkin_diagram-ts.patch\u200b",
    "created_at": "2013-08-16T15:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152124",
    "user": "tscrim"
}
```

Okay, I've made the offending test return a sorted list. However this should be overkill since `index_set` just makes the call to `vertices`, which returns a sorted list, into a tuple (i.e. there doesn't seem to be a set/dict being returned...). Here's the patches have applied on `5.11.rc0`:

```
trac_14882-backtrack_longtime-dg.patch
trac_13589-categories-c3_under_control-nt.patch
trac_14507-tropical_semiring-ts.patch
trac_7983-major_index_and_other_tableau_fixes-dg.patch
trac_7983-review-ts.patch
trac_8386_really_just_moving-fc.patch
trac_8386_big_clean_fc.patch
trac_8386_assert_removal.patch
trac_14808-recoils_of_permutations-ts.patch
trac_10630-vector_partition-ap.patch
trac_14870-fix_int_mod_QQ-ts.patch
trac_14787-gyw_stats-bs.patch
trac_14787-pdf_fix-ts.patch
trac_14573-path_realizations-ts.patch
trac_11407-list_clone_improve-fh.patch
trac_14516-crystals_speedup-ts.patch
trac_12882-matrix_as_dynkin_diagram-ts.patch
```

So I'm confused about why we're getting different results (and slightly worried).

Anyways, Ben could you do a quick re-review of the patch? Thanks.

For patchbot:

Apply: trac_12882-matrix_as_dynkin_diagram-ts.patch​



---

archive/issue_comments_152125.json:
```json
{
    "body": "I ran the tests again on `5.12.beta0` on the entire root_system folder with following patches applied:\n\n```\napplying trac_14610-LSenergy-ms.patch\napplying trac9107_nesting_nested_classes.patch\napplying trac_9107_fix_cross_reference.patch\napplying trac_14787-gyw_stats-bs.patch\napplying trac_14787-pdf_fix-ts.patch\napplying trac_14573-path_realizations-ts.patch\napplying trac_11407-list_clone_improve-fh.patch\napplying trac_14516-crystals_speedup-ts.patch\napplying trac_12882-matrix_as_dynkin_diagram-ts.patch\n```\n\nAll tests passed\n\n```\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 235.7 seconds\n    cpu time: 212.6 seconds\n    cumulative wall time: 233.4 seconds\n```\n\nand in particular:\n\n```\nsage -t --long root_system/dynkin_diagram.py\n    [88 tests, 0.53 s]\n```\n\nI also copied and ran those tests in Sage directly, and received the expected result:\n\n```\nsage: CII = CartanMatrix([[2, -3], [-4, 2]])\nsage: DII = DynkinDiagram(CII, (-1, 'x'))\nsage: DII.index_set()\n('x', -1)\n```\n",
    "created_at": "2013-08-16T15:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152125",
    "user": "bsalisbury1"
}
```

I ran the tests again on `5.12.beta0` on the entire root_system folder with following patches applied:

```
applying trac_14610-LSenergy-ms.patch
applying trac9107_nesting_nested_classes.patch
applying trac_9107_fix_cross_reference.patch
applying trac_14787-gyw_stats-bs.patch
applying trac_14787-pdf_fix-ts.patch
applying trac_14573-path_realizations-ts.patch
applying trac_11407-list_clone_improve-fh.patch
applying trac_14516-crystals_speedup-ts.patch
applying trac_12882-matrix_as_dynkin_diagram-ts.patch
```

All tests passed

```
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 235.7 seconds
    cpu time: 212.6 seconds
    cumulative wall time: 233.4 seconds
```

and in particular:

```
sage -t --long root_system/dynkin_diagram.py
    [88 tests, 0.53 s]
```

I also copied and ran those tests in Sage directly, and received the expected result:

```
sage: CII = CartanMatrix([[2, -3], [-4, 2]])
sage: DII = DynkinDiagram(CII, (-1, 'x'))
sage: DII.index_set()
('x', -1)
```




---

archive/issue_comments_152126.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2013-08-16T15:49:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152126",
    "user": "bsalisbury1"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_152127.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2013-08-18T12:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152127",
    "user": "jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_152128.json:
```json
{
    "body": "Still doesn't work:\n\n```\nsage -t devel/sage/sage/combinat/root_system/dynkin_diagram.py\n**********************************************************************\nFile \"devel/sage/sage/combinat/root_system/dynkin_diagram.py\", line 149, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram\nFailed example:\n    sorted(DII.index_set())\nExpected:\n    ['x', -1]\nGot:\n    [-1, 'x']\n**********************************************************************\n```\n",
    "created_at": "2013-08-18T12:45:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152128",
    "user": "jdemeyer"
}
```

Still doesn't work:

```
sage -t devel/sage/sage/combinat/root_system/dynkin_diagram.py
**********************************************************************
File "devel/sage/sage/combinat/root_system/dynkin_diagram.py", line 149, in sage.combinat.root_system.dynkin_diagram.DynkinDiagram
Failed example:
    sorted(DII.index_set())
Expected:
    ['x', -1]
Got:
    [-1, 'x']
**********************************************************************
```




---

archive/issue_comments_152129.json:
```json
{
    "body": "Jeroen, so somehow your system (and the patchbot's) is sorting things differently than ours. Do you have any idea about why this is happening? I don't want to change the output of the doctest because then it will fail on our computers. (My guess as to why we're only seeing this here because it's the only time we're doctesting a sorted list with a string and an integer.)",
    "created_at": "2013-08-18T15:00:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152129",
    "user": "tscrim"
}
```

Jeroen, so somehow your system (and the patchbot's) is sorting things differently than ours. Do you have any idea about why this is happening? I don't want to change the output of the doctest because then it will fail on our computers. (My guess as to why we're only seeing this here because it's the only time we're doctesting a sorted list with a string and an integer.)



---

archive/issue_comments_152130.json:
```json
{
    "body": "Replying to [comment:27 tscrim]:\n> My guess as to why we're only seeing this here because it's the only time we're doctesting a sorted list with a string and an integer.\nYes, it seems that comparing a string and an integer simply isn't well-defined.",
    "created_at": "2013-08-19T04:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152130",
    "user": "jdemeyer"
}
```

Replying to [comment:27 tscrim]:
> My guess as to why we're only seeing this here because it's the only time we're doctesting a sorted list with a string and an integer.
Yes, it seems that comparing a string and an integer simply isn't well-defined.



---

archive/issue_comments_152131.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2013-08-19T15:22:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152131",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_152132.json:
```json
{
    "body": "Attachment [trac_12882-matrix_as_dynkin_diagram-ts.patch](tarball://root/attachments/some-uuid/ticket12882/trac_12882-matrix_as_dynkin_diagram-ts.patch) by tscrim created at 2013-08-19 15:22:08\n\nHere's a new version of the patch which sidesteps the issue by making it indexed by two strings. Jeroen, could you check to make sure the tests also pass for you? Thanks.",
    "created_at": "2013-08-19T15:22:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152132",
    "user": "tscrim"
}
```

Attachment [trac_12882-matrix_as_dynkin_diagram-ts.patch](tarball://root/attachments/some-uuid/ticket12882/trac_12882-matrix_as_dynkin_diagram-ts.patch) by tscrim created at 2013-08-19 15:22:08

Here's a new version of the patch which sidesteps the issue by making it indexed by two strings. Jeroen, could you check to make sure the tests also pass for you? Thanks.



---

archive/issue_comments_152133.json:
```json
{
    "body": "apply only trac_12882-matrix_as_dynkin_diagram-ts.patch\u200b",
    "created_at": "2013-08-21T09:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152133",
    "user": "chapoton"
}
```

apply only trac_12882-matrix_as_dynkin_diagram-ts.patch​



---

archive/issue_comments_152134.json:
```json
{
    "body": "apply trac_12882-matrix_as_dynkin_diagram-ts.patch",
    "created_at": "2013-08-21T09:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152134",
    "user": "chapoton"
}
```

apply trac_12882-matrix_as_dynkin_diagram-ts.patch



---

archive/issue_comments_152135.json:
```json
{
    "body": "Hey Ben,\n\nCould you check to make sure this works for you still? I've given the patchbot a kick and we'll check against that going green.\n\nBest,\n\nTravis",
    "created_at": "2013-08-22T18:34:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152135",
    "user": "tscrim"
}
```

Hey Ben,

Could you check to make sure this works for you still? I've given the patchbot a kick and we'll check against that going green.

Best,

Travis



---

archive/issue_comments_152136.json:
```json
{
    "body": "it seems that the patchbot is (or was?) broken (it tries to apply very old dependencies)",
    "created_at": "2013-08-22T18:44:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152136",
    "user": "chapoton"
}
```

it seems that the patchbot is (or was?) broken (it tries to apply very old dependencies)



---

archive/issue_comments_152137.json:
```json
{
    "body": "All tests passed for me.",
    "created_at": "2013-08-22T20:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152137",
    "user": "bsalisbury1"
}
```

All tests passed for me.



---

archive/issue_comments_152138.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-08-22T20:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152138",
    "user": "bsalisbury1"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_152139.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-08-28T06:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/12710",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/12710#issuecomment-152139",
    "user": "jdemeyer"
}
```

Resolution: fixed
