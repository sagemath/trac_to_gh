# Issue 31838: Polynomial generic power trunk broken

archive/issues_031838.json:
```json
{
    "body": "From #29979:\n\n\n```\nDoctesting 1 file.\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/polynomial_element.pyx\n**********************************************************************\nFile \"src/sage/rings/polynomial/polynomial_element.pyx\", line 11581, in sage.rings.polynomial.polynomial_element.generic_power_trunc\nFailed example:\n    for S in [ZZ, GF(3)]:\n        R = PolynomialRing(S, 'x')\n        for _ in range(100):\n            p = R.random_element()\n            n = ZZ.random_element(0, 100)\n            prec = ZZ.random_element(0, 100)\n            assert p.power_trunc(n, prec) == generic_power_trunc(p, n, prec), \"p = {} n = {} prec = {}\".format(p, n, prec)\nException raised:\n    Traceback (most recent call last):\n      File \"/srv/public/kliem/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/srv/public/kliem/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.rings.polynomial.polynomial_element.generic_power_trunc[1]>\", line 7, in <module>\n        assert p.power_trunc(n, prec) == generic_power_trunc(p, n, prec), \"p = {} n = {} prec = {}\".format(p, n, prec)\n    AssertionError: p = 0 n = 0 prec = 93\n**********************************************************************\n1 item had failures:\n   1 of   3 in sage.rings.polynomial.polynomial_element.generic_power_trunc\n    [2631 tests, 1 failure, 8.27 s]\n----------------------------------------------------------------------\nsage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/polynomial_element.pyx  # 1 doctest failed\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32075\n\n",
    "created_at": "2021-06-28T15:35:03Z",
    "labels": [
        "algebra",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Polynomial generic power trunk broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31838",
    "user": "@kliem"
}
```
From #29979:


```
Doctesting 1 file.
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/polynomial_element.pyx
**********************************************************************
File "src/sage/rings/polynomial/polynomial_element.pyx", line 11581, in sage.rings.polynomial.polynomial_element.generic_power_trunc
Failed example:
    for S in [ZZ, GF(3)]:
        R = PolynomialRing(S, 'x')
        for _ in range(100):
            p = R.random_element()
            n = ZZ.random_element(0, 100)
            prec = ZZ.random_element(0, 100)
            assert p.power_trunc(n, prec) == generic_power_trunc(p, n, prec), "p = {} n = {} prec = {}".format(p, n, prec)
Exception raised:
    Traceback (most recent call last):
      File "/srv/public/kliem/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/srv/public/kliem/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.rings.polynomial.polynomial_element.generic_power_trunc[1]>", line 7, in <module>
        assert p.power_trunc(n, prec) == generic_power_trunc(p, n, prec), "p = {} n = {} prec = {}".format(p, n, prec)
    AssertionError: p = 0 n = 0 prec = 93
**********************************************************************
1 item had failures:
   1 of   3 in sage.rings.polynomial.polynomial_element.generic_power_trunc
    [2631 tests, 1 failure, 8.27 s]
----------------------------------------------------------------------
sage -t --long --random-seed=151058820726654196682836430928254760259 src/sage/rings/polynomial/polynomial_element.pyx  # 1 doctest failed
```


Issue created by migration from https://trac.sagemath.org/ticket/32075


