# Issue 14455: Useless memory allocation in subgraph_search

archive/issues_014455.json:
```json
{
    "body": "Assignee: jason, ncohen, rlm\n\nCC:  azi stefan @dimpase\n\nThis patch exist because I am an idiot.\n\nThis should also solve the other problem of this class : it often segfaults when using CTRL+C while it computes.\n\nNot spending its lifetime allocating and freeing memory is definitely a step in the right direction.\n\nAnd this will have to be rewritten with a real data structure someday, like the one from #14589 `>_<`\n\nBefore :\n\n```\nsage: g = graphs.CompleteMultipartiteGraph([9]*5)     \nsage: %time g.subgraph_search(graphs.CompleteGraph(6))\nCPU times: user 18.31 s, sys: 0.01 s, total: 18.32 s\nWall time: 18.36 s\n```\n\n\nAfter:\n\n```\nsage: g = graphs.CompleteMultipartiteGraph([9]*5)\nsage: %time g.subgraph_search(graphs.CompleteGraph(6))\nCPU times: user 6.95 s, sys: 0.00 s, total: 6.95 s\nWall time: 6.96 s\n```\n\n\nNathann\n\nIssue created by migration from https://trac.sagemath.org/ticket/14659\n\n",
    "created_at": "2013-05-29T15:05:10Z",
    "labels": [
        "graph theory",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-5.11",
    "title": "Useless memory allocation in subgraph_search",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14455",
    "user": "@nathanncohen"
}
```
Assignee: jason, ncohen, rlm

CC:  azi stefan @dimpase

This patch exist because I am an idiot.

This should also solve the other problem of this class : it often segfaults when using CTRL+C while it computes.

Not spending its lifetime allocating and freeing memory is definitely a step in the right direction.

And this will have to be rewritten with a real data structure someday, like the one from #14589 `>_<`

Before :

```
sage: g = graphs.CompleteMultipartiteGraph([9]*5)     
sage: %time g.subgraph_search(graphs.CompleteGraph(6))
CPU times: user 18.31 s, sys: 0.01 s, total: 18.32 s
Wall time: 18.36 s
```


After:

```
sage: g = graphs.CompleteMultipartiteGraph([9]*5)
sage: %time g.subgraph_search(graphs.CompleteGraph(6))
CPU times: user 6.95 s, sys: 0.00 s, total: 6.95 s
Wall time: 6.96 s
```


Nathann

Issue created by migration from https://trac.sagemath.org/ticket/14659





---

archive/issue_comments_182910.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-05-29T15:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14455#issuecomment-182910",
    "user": "@nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_182911.json:
```json
{
    "body": "Hi,\n\nWhy do you write\n\n```\nsequence[i] = 1 if self.has_arc_unsafe(vertices[i], v) else 0\n```\n\ninstead of\n\n```\nsequence[i] = self.has_arc_unsafe(vertices[i], v)\n```\n\n?",
    "created_at": "2013-06-01T17:09:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14455#issuecomment-182911",
    "user": "@videlec"
}
```

Hi,

Why do you write

```
sequence[i] = 1 if self.has_arc_unsafe(vertices[i], v) else 0
```

instead of

```
sequence[i] = self.has_arc_unsafe(vertices[i], v)
```

?



---

archive/issue_comments_182912.json:
```json
{
    "body": "Attachment [trac_14659.patch](tarball://root/attachments/some-uuid/ticket14659/trac_14659.patch) by @nathanncohen created at 2013-06-03 12:14:54\n\nrightrightrightrightright `:-P`\n\nNathann",
    "created_at": "2013-06-03T12:14:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14455#issuecomment-182912",
    "user": "@nathanncohen"
}
```

Attachment [trac_14659.patch](tarball://root/attachments/some-uuid/ticket14659/trac_14659.patch) by @nathanncohen created at 2013-06-03 12:14:54

rightrightrightrightright `:-P`

Nathann



---

archive/issue_comments_182913.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-06-03T13:16:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14455#issuecomment-182913",
    "user": "@videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_182914.json:
```json
{
    "body": "Replying to [comment:3 ncohen]:\n> rightrightrightrightright `:-P`\n\nWell done! \n\nVincent",
    "created_at": "2013-06-03T13:16:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14455#issuecomment-182914",
    "user": "@videlec"
}
```

Replying to [comment:3 ncohen]:
> rightrightrightrightright `:-P`

Well done! 

Vincent



---

archive/issue_comments_182915.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-06-06T12:33:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14455",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14455#issuecomment-182915",
    "user": "@jdemeyer"
}
```

Resolution: fixed
