# Issue 14455: Useless memory allocation in subgraph_search

Issue created by migration from https://trac.sagemath.org/ticket/14659

Original creator: ncohen

Original creation time: 2013-05-29 15:05:10

Assignee: jason, ncohen, rlm

CC:  azi stefan dimpase

This patch exist because I am an idiot.

This should also solve the other problem of this class : it often segfaults when using CTRL+C while it computes.

Not spending its lifetime allocating and freeing memory is definitely a step in the right direction.

And this will have to be rewritten with a real data structure someday, like the one from #14589 `>_<`

Before :

```
sage: g = graphs.CompleteMultipartiteGraph([9]*5)     
sage: %time g.subgraph_search(graphs.CompleteGraph(6))
CPU times: user 18.31 s, sys: 0.01 s, total: 18.32 s
Wall time: 18.36 s
```


After:

```
sage: g = graphs.CompleteMultipartiteGraph([9]*5)
sage: %time g.subgraph_search(graphs.CompleteGraph(6))
CPU times: user 6.95 s, sys: 0.00 s, total: 6.95 s
Wall time: 6.96 s
```


Nathann


---

Comment by ncohen created at 2013-05-29 15:07:32

Changing status from new to needs_review.


---

Comment by vdelecroix created at 2013-06-01 17:09:08

Hi,

Why do you write

```
sequence[i] = 1 if self.has_arc_unsafe(vertices[i], v) else 0
```

instead of

```
sequence[i] = self.has_arc_unsafe(vertices[i], v)
```

?


---

Attachment

rightrightrightrightright `:-P`

Nathann


---

Comment by vdelecroix created at 2013-06-03 13:16:43

Changing status from needs_review to positive_review.


---

Comment by vdelecroix created at 2013-06-03 13:16:43

Replying to [comment:3 ncohen]:
> rightrightrightrightright `:-P`

Well done! 

Vincent


---

Comment by jdemeyer created at 2013-06-06 12:33:58

Resolution: fixed
