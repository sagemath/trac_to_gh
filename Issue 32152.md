# Issue 32152: Half angle transformation

archive/issues_032152.json:
```json
{
    "body": "CC:  slelievre\n\nIn some circumstances (e. g. integration), it may be useful to replace expressions in sin(h)(x), cos(h)(x), etc... as expressions in tan(h)(x/2).\n\nThis ticket implements a method for this transformation.\n\nIssue created by migration from https://trac.sagemath.org/ticket/32389\n\n",
    "created_at": "2021-08-17T14:32:16Z",
    "labels": [
        "symbolics",
        "minor",
        "enhancement"
    ],
    "title": "Half angle transformation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32152",
    "user": "charpent"
}
```
CC:  slelievre

In some circumstances (e. g. integration), it may be useful to replace expressions in sin(h)(x), cos(h)(x), etc... as expressions in tan(h)(x/2).

This ticket implements a method for this transformation.

Issue created by migration from https://trac.sagemath.org/ticket/32389





---

archive/issue_comments_459287.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-17T21:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459287",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_459288.json:
```json
{
    "body": "This passes ptestlong without any new failure.\n\n==> `needs_review`, if only to activate patchbots.",
    "created_at": "2021-08-17T21:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459288",
    "user": "charpent"
}
```

This passes ptestlong without any new failure.

==> `needs_review`, if only to activate patchbots.



---

archive/issue_comments_459289.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-08-17T21:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459289",
    "user": "charpent"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_459290.json:
```json
{
    "body": "`pycode` and `blocks` fail : minor mistakes. `needs_work`",
    "created_at": "2021-08-18T07:04:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459290",
    "user": "charpent"
}
```

`pycode` and `blocks` fail : minor mistakes. `needs_work`



---

archive/issue_comments_459291.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-08-18T07:04:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459291",
    "user": "charpent"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_459292.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-18T07:23:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459292",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_459293.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-08-18T07:24:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459293",
    "user": "charpent"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_459294.json:
```json
{
    "body": "`needs_work` to start the patchbots.",
    "created_at": "2021-08-18T07:24:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459294",
    "user": "charpent"
}
```

`needs_work` to start the patchbots.



---

archive/issue_comments_459295.json:
```json
{
    "body": "This is a good thing to add.\n\nI rebased on Sage 9.4.rc2 and added a commit with:\n\n- changes from `\\|` to `|` in FriCAS output reverted:\n  they break tests for me\n- some refactoring for readability of code \u200band examples\n  - use `half` for `Integer(1)/Integer(2)`\n    (also makes lines shorter)\n  - less parentheses, brackets and backslashes\n    in the `all(...)` test\n  - make `trig_expand` example more compelling\n    by naming `a` and `b`\n- some reformatting, in particular `::` and\n  \u200b`....:` \u200bfor example and test blocks\n- minor rephrasing, fix spacing and a typo\n\nSet to positive review if you agree with these changes.",
    "created_at": "2021-08-18T15:36:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459295",
    "user": "slelievre"
}
```

This is a good thing to add.

I rebased on Sage 9.4.rc2 and added a commit with:

- changes from `\|` to `|` in FriCAS output reverted:
  they break tests for me
- some refactoring for readability of code ​and examples
  - use `half` for `Integer(1)/Integer(2)`
    (also makes lines shorter)
  - less parentheses, brackets and backslashes
    in the `all(...)` test
  - make `trig_expand` example more compelling
    by naming `a` and `b`
- some reformatting, in particular `::` and
  ​`....:` ​for example and test blocks
- minor rephrasing, fix spacing and a typo

Set to positive review if you agree with these changes.



---

archive/issue_comments_459296.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-08-18T15:37:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459296",
    "user": "slelievre"
}
```

New commits:



---

archive/issue_comments_459297.json:
```json
{
    "body": "Replying to [comment:8 slelievre]:\n> This is a good thing to add.\n\nIndeed... `sympy`'s and `giac` integrators use this often.\n\n> I rebased on Sage 9.4.rc2 and added a commit with:\n> \n> - changes from `\\|` to `|` in FriCAS output reverted:\n>   they break tests for me\n\n??? Not for me. Go figure...\n\n> - some refactoring for readability of code \u200band examples\n>   - use `half` for `Integer(1)/Integer(2)`\n>     (also makes lines shorter)\n\nSmart. I should have thought of this, I didn't...\n\n>   - less parentheses, brackets and backslashes\n>     in the `all(...)` test\n>   - make `trig_expand` example more compelling\n>     by naming `a` and `b`\n> - some reformatting, in particular `::` and\n>  \u200b`....:` \u200bfor example and test blocks\n\nI'm still struggling with ResStructuredText (too much markup syntaxes : LaTeX, Markdown, Org, Oxygen, [WikiFormatting](WikiFormatting) and now this...). Thanks a lot !\n\n> - minor rephrasing, fix spacing and a typo\n> \n> Set to positive review if you agree with these changes.\n\nThanks ! I do.\n\nBTW : you should be co-author, but I'm almost sure that Trac will balk at the same name in `Author` and `Reviewer` fields.\n\nIn the same spirit (probably more useful), you may be interested in my attempt to #10038 (demoivre/exponentialize).",
    "created_at": "2021-08-18T16:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459297",
    "user": "charpent"
}
```

Replying to [comment:8 slelievre]:
> This is a good thing to add.

Indeed... `sympy`'s and `giac` integrators use this often.

> I rebased on Sage 9.4.rc2 and added a commit with:
> 
> - changes from `\|` to `|` in FriCAS output reverted:
>   they break tests for me

??? Not for me. Go figure...

> - some refactoring for readability of code ​and examples
>   - use `half` for `Integer(1)/Integer(2)`
>     (also makes lines shorter)

Smart. I should have thought of this, I didn't...

>   - less parentheses, brackets and backslashes
>     in the `all(...)` test
>   - make `trig_expand` example more compelling
>     by naming `a` and `b`
> - some reformatting, in particular `::` and
>  ​`....:` ​for example and test blocks

I'm still struggling with ResStructuredText (too much markup syntaxes : LaTeX, Markdown, Org, Oxygen, [WikiFormatting](WikiFormatting) and now this...). Thanks a lot !

> - minor rephrasing, fix spacing and a typo
> 
> Set to positive review if you agree with these changes.

Thanks ! I do.

BTW : you should be co-author, but I'm almost sure that Trac will balk at the same name in `Author` and `Reviewer` fields.

In the same spirit (probably more useful), you may be interested in my attempt to #10038 (demoivre/exponentialize).



---

archive/issue_comments_459298.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-08-18T16:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459298",
    "user": "charpent"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_459299.json:
```json
{
    "body": "The FriCAS output can be a different ticket.\nMaybe it depends on the version of FriCAS.\n\nTrac won't mind us being co-authors and\nco-reviewers of the ticket. It's frequent.\n\nRegarding #10038, I saw you pushed a branch\nand I'm planning to look at it soon.",
    "created_at": "2021-08-18T17:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459299",
    "user": "slelievre"
}
```

The FriCAS output can be a different ticket.
Maybe it depends on the version of FriCAS.

Trac won't mind us being co-authors and
co-reviewers of the ticket. It's frequent.

Regarding #10038, I saw you pushed a branch
and I'm planning to look at it soon.



---

archive/issue_comments_459300.json:
```json
{
    "body": "The FriCAS output problem might be fixed by #32279\n(see also #32379).",
    "created_at": "2021-08-19T15:27:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459300",
    "user": "slelievre"
}
```

The FriCAS output problem might be fixed by #32279
(see also #32379).



---

archive/issue_comments_459301.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-10-19T23:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459301",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_459302.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2021-10-19T23:10:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32152",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32152#issuecomment-459302",
    "user": "vbraun"
}
```

Merge conflict
