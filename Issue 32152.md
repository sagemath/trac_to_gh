# Issue 32152: Half angle transformation

Issue created by migration from https://trac.sagemath.org/ticket/32389

Original creator: charpent

Original creation time: 2021-08-17 14:32:16

CC:  slelievre

In some circumstances (e. g. integration), it may be useful to replace expressions in sin(h)(x), cos(h)(x), etc... as expressions in tan(h)(x/2).

This ticket implements a method for this transformation.


---

Comment by git created at 2021-08-17 21:03:23

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by charpent created at 2021-08-17 21:05:34

This passes ptestlong without any new failure.

==> `needs_review`, if only to activate patchbots.


---

Comment by charpent created at 2021-08-17 21:05:34

Changing status from new to needs_review.


---

Comment by charpent created at 2021-08-18 07:04:18

`pycode` and `blocks` fail : minor mistakes. `needs_work`


---

Comment by charpent created at 2021-08-18 07:04:18

Changing status from needs_review to needs_work.


---

Comment by git created at 2021-08-18 07:23:04

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by charpent created at 2021-08-18 07:24:49

Changing status from needs_work to needs_review.


---

Comment by charpent created at 2021-08-18 07:24:49

`needs_work` to start the patchbots.


---

Comment by slelievre created at 2021-08-18 15:36:48

This is a good thing to add.

I rebased on Sage 9.4.rc2 and added a commit with:

- changes from `\|` to `|` in FriCAS output reverted:
  they break tests for me
- some refactoring for readability of code ​and examples
  - use `half` for `Integer(1)/Integer(2)`
    (also makes lines shorter)
  - less parentheses, brackets and backslashes
    in the `all(...)` test
  - make `trig_expand` example more compelling
    by naming `a` and `b`
- some reformatting, in particular `::` and
 ​`....:` ​for example and test blocks
- minor rephrasing, fix spacing and a typo

Set to positive review if you agree with these changes.


---

Comment by slelievre created at 2021-08-18 15:37:12

New commits:


---

Comment by charpent created at 2021-08-18 16:01:59

Replying to [comment:8 slelievre]:
> This is a good thing to add.

Indeed... `sympy`'s and `giac` integrators use this often.

> I rebased on Sage 9.4.rc2 and added a commit with:
> 
> - changes from `\|` to `|` in FriCAS output reverted:
>   they break tests for me

??? Not for me. Go figure...

> - some refactoring for readability of code ​and examples
>   - use `half` for `Integer(1)/Integer(2)`
>     (also makes lines shorter)

Smart. I should have thought of this, I didn't...

>   - less parentheses, brackets and backslashes
>     in the `all(...)` test
>   - make `trig_expand` example more compelling
>     by naming `a` and `b`
> - some reformatting, in particular `::` and
>  ​`....:` ​for example and test blocks

I'm still struggling with ResStructuredText (too much markup syntaxes : LaTeX, Markdown, Org, Oxygen, [WikiFormatting](WikiFormatting) and now this...). Thanks a lot !

> - minor rephrasing, fix spacing and a typo
> 
> Set to positive review if you agree with these changes.

Thanks ! I do.

BTW : you should be co-author, but I'm almost sure that Trac will balk at the same name in `Author` and `Reviewer` fields.

In the same spirit (probably more useful), you may be interested in my attempt to #10038 (demoivre/exponentialize).


---

Comment by charpent created at 2021-08-18 16:01:59

Changing status from needs_review to positive_review.


---

Comment by slelievre created at 2021-08-18 17:52:23

The FriCAS output can be a different ticket.
Maybe it depends on the version of FriCAS.

Trac won't mind us being co-authors and
co-reviewers of the ticket. It's frequent.

Regarding #10038, I saw you pushed a branch
and I'm planning to look at it soon.


---

Comment by slelievre created at 2021-08-19 15:27:22

The FriCAS output problem might be fixed by #32279
(see also #32379).


---

Comment by vbraun created at 2021-10-19 23:10:45

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2021-10-19 23:10:45

Merge conflict
