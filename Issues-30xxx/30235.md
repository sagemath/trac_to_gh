# Issue 30235: Add construction methods to FiniteRankFreeModule, CombinatorialFreeModule and Cartesian products

archive/issues_029998.json:
```json
{
    "body": "(follow-up from #30194)\n\n... extending `sage.categories.pushout.VectorFunctor`\n\nfor example:\n\n```\n            sage: M = FreeModule(ZZ, 4, with_basis=None, name='M')\n            sage: latex(M)\n            M\n            sage: from sage.categories.pushout import VectorFunctor, pushout\n            sage: M_QQ = pushout(M, QQ)\n            sage: latex(M_QQ)\n            M \\otimes \\Bold{Q}\n```\n\n\nCC:  @tscrim @egourgoulhon @fchapoton @nthiery\n\nBranch/Commit: 3f4417442c3a8e396e121b054794aa18b4d82154\n\nReviewer: Travis Scrimshaw\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30235\n\n",
    "closed_at": "2022-08-29T11:24:16Z",
    "created_at": "2020-07-28T04:04:26Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.7",
    "title": "Add construction methods to FiniteRankFreeModule, CombinatorialFreeModule and Cartesian products",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30235",
    "user": "https://github.com/mkoeppe"
}
```
(follow-up from #30194)

... extending `sage.categories.pushout.VectorFunctor`

for example:

```
            sage: M = FreeModule(ZZ, 4, with_basis=None, name='M')
            sage: latex(M)
            M
            sage: from sage.categories.pushout import VectorFunctor, pushout
            sage: M_QQ = pushout(M, QQ)
            sage: latex(M_QQ)
            M \otimes \Bold{Q}
```


CC:  @tscrim @egourgoulhon @fchapoton @nthiery

Branch/Commit: 3f4417442c3a8e396e121b054794aa18b4d82154

Reviewer: Travis Scrimshaw

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30235





---

archive/issue_comments_454474.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2020-07-28T04:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454474",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_454475.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n (follow-up from #30194)\n+\n+... extending `sage.categories.pushout.VectorFunctor`\n \n Comment: 1\n \n```\n",
    "created_at": "2020-07-28T04:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454475",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
 (follow-up from #30194)
+
+... extending `sage.categories.pushout.VectorFunctor`
 
 Comment: 1
 
```




---

archive/issue_events_078141.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30235#event-78141"
}
```



---

archive/issue_events_078142.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30235#event-78142"
}
```



---

archive/issue_events_078143.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30235#event-78143"
}
```



---

archive/issue_comments_454476.json:
```json
{
    "body": "<a id='comment:5'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454476",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_078144.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30235#event-78144"
}
```



---

archive/issue_events_078145.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30235#event-78145"
}
```



---

archive/issue_events_078146.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30235#event-78146"
}
```



---

archive/issue_events_078147.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30235#event-78147"
}
```



---

archive/issue_events_078148.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30235#event-78148"
}
```



---

archive/issue_events_078149.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30235#event-78149"
}
```



---

archive/issue_comments_454477.json:
```json
{
    "body": "<a id='comment:11'></a>New commits:",
    "created_at": "2022-08-21T23:41:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454477",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>New commits:



---

archive/issue_comments_454478.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-21T23:52:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454478",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454479.json:
```json
{
    "body": "<a id='comment:13'></a>We will need to be really careful with this because lots of classes are subclasses of `CFM`, where the result of `construction()` will become wrong if we do the generic one.\n\nHowever, I am generally +1 on doing this. There is a ticket out there on implementing extension of scalars, and this would be a step towards doing that generically by being able to implement pushouts.",
    "created_at": "2022-08-22T00:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454479",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>We will need to be really careful with this because lots of classes are subclasses of `CFM`, where the result of `construction()` will become wrong if we do the generic one.

However, I am generally +1 on doing this. There is a ticket out there on implementing extension of scalars, and this would be a step towards doing that generically by being able to implement pushouts.



---

archive/issue_comments_454480.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T02:11:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454480",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454481.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:13 tscrim]:\n> We will need to be really careful with this because lots of classes are subclasses of `CFM`, where the result of `construction()` will become wrong if we do the generic one.\n\n\nYes, I see a few dozen testsuite failures (`_test_construction`) in `sage.combinat` now.\n\n> However, I am generally +1 on doing this. There is a ticket out there on implementing extension of scalars, and this would be a step towards doing that generically by being able to implement pushouts.\n\n\nYes",
    "created_at": "2022-08-22T02:12:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454481",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>Replying to [comment:13 tscrim]:
> We will need to be really careful with this because lots of classes are subclasses of `CFM`, where the result of `construction()` will become wrong if we do the generic one.


Yes, I see a few dozen testsuite failures (`_test_construction`) in `sage.combinat` now.

> However, I am generally +1 on doing this. There is a ticket out there on implementing extension of scalars, and this would be a step towards doing that generically by being able to implement pushouts.


Yes



---

archive/issue_comments_454482.json:
```json
{
    "body": "<a id='comment:16'></a>Help on these subclasses in `sage.combinat` is very welcome.\n\nOtherwise I'd just add a lot of `def construction(self): return None`",
    "created_at": "2022-08-22T02:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454482",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>Help on these subclasses in `sage.combinat` is very welcome.

Otherwise I'd just add a lot of `def construction(self): return None`



---

archive/issue_comments_454483.json:
```json
{
    "body": "<a id='comment:17'></a>There are also a number of them in `sage.algebra` as well. In most cases, the \"correct\" thing to do would be to have their own `ConstructionFunctor`. Although we probably would remove a lot of redundant code if we have some generic subclass, say `VectorSpaceWithBaseRing` from commutative rings that takes a class and arbitrary inputs/keywords except the base ring. It would have a generic merging that would require all of the inputs/keywords to be equal. It might also be possible to pull the key to `UniqueRepresentation` as these additional structures as a generic implementation in `CFM`.",
    "created_at": "2022-08-22T02:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454483",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>There are also a number of them in `sage.algebra` as well. In most cases, the "correct" thing to do would be to have their own `ConstructionFunctor`. Although we probably would remove a lot of redundant code if we have some generic subclass, say `VectorSpaceWithBaseRing` from commutative rings that takes a class and arbitrary inputs/keywords except the base ring. It would have a generic merging that would require all of the inputs/keywords to be equal. It might also be possible to pull the key to `UniqueRepresentation` as these additional structures as a generic implementation in `CFM`.



---

archive/issue_comments_454484.json:
```json
{
    "body": "<a id='comment:19'></a>For a start, I guess we can just give the `None` construction to all filtered modules",
    "created_at": "2022-08-22T02:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454484",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>For a start, I guess we can just give the `None` construction to all filtered modules



---

archive/issue_comments_454485.json:
```json
{
    "body": "<a id='comment:20'></a>True, it makes the situation no worse than before.",
    "created_at": "2022-08-22T02:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454485",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>True, it makes the situation no worse than before.



---

archive/issue_comments_454486.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T02:57:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454486",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454487.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T03:46:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454487",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454488.json:
```json
{
    "body": "<a id='comment:23'></a>Probably safer to just disable the `construction` for all subclasses",
    "created_at": "2022-08-22T04:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454488",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>Probably safer to just disable the `construction` for all subclasses



---

archive/issue_comments_454489.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T04:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454489",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454490.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2022-08-22T04:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_454491.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:17 tscrim]:\n> It might also be possible to pull the key to `UniqueRepresentation` as these additional structures as a generic implementation in `CFM`.\n\n\nYes, I think a solution based on `UniqueRepresentation` could be a good idea.",
    "created_at": "2022-08-22T04:51:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454491",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>Replying to [comment:17 tscrim]:
> It might also be possible to pull the key to `UniqueRepresentation` as these additional structures as a generic implementation in `CFM`.


Yes, I think a solution based on `UniqueRepresentation` could be a good idea.



---

archive/issue_comments_454492.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T04:51:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454492",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454493.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T04:54:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454493",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454494.json:
```json
{
    "body": "<a id='comment:29'></a>\n```\nsage -t --random-seed=211950378039065916298685714207807222444 doc/en/thematic_tutorials/tutorial-implementing-algebraic-structures.rst  # 1 doctest failed\nsage -t --random-seed=211950378039065916298685714207807222444 doc/en/thematic_tutorials/tutorial-objects-and-classes.rst  # 1 doctest failed\nsage -t --random-seed=211950378039065916298685714207807222444 sage/combinat/free_module.py  # 1 doctest failed\nsage -t --random-seed=211950378039065916298685714207807222444 sage/modules/with_basis/indexed_element.pyx  # 1 doctest failed\n```",
    "created_at": "2022-08-22T16:25:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454494",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
```
sage -t --random-seed=211950378039065916298685714207807222444 doc/en/thematic_tutorials/tutorial-implementing-algebraic-structures.rst  # 1 doctest failed
sage -t --random-seed=211950378039065916298685714207807222444 doc/en/thematic_tutorials/tutorial-objects-and-classes.rst  # 1 doctest failed
sage -t --random-seed=211950378039065916298685714207807222444 sage/combinat/free_module.py  # 1 doctest failed
sage -t --random-seed=211950378039065916298685714207807222444 sage/modules/with_basis/indexed_element.pyx  # 1 doctest failed
```



---

archive/issue_comments_454495.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T17:18:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454495",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454496.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T17:35:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454496",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454497.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T17:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454497",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454498.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T18:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454498",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454499.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T19:02:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454499",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454500.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T19:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454500",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454501.json:
```json
{
    "body": "<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T19:12:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454501",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454502.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-22T19:13:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454502",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_454503.json:
```json
{
    "body": "<a id='comment:39'></a>\n```\nsage -t --random-seed=116536317366563428683146425021076892502 src/sage/manifolds/vector_bundle_fiber.py  # 1 doctest failed\nsage -t --random-seed=116536317366563428683146425021076892502 src/sage/manifolds/differentiable/tangent_space.py  # 1 doctest failed\n```",
    "created_at": "2022-08-22T20:26:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454503",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>
```
sage -t --random-seed=116536317366563428683146425021076892502 src/sage/manifolds/vector_bundle_fiber.py  # 1 doctest failed
sage -t --random-seed=116536317366563428683146425021076892502 src/sage/manifolds/differentiable/tangent_space.py  # 1 doctest failed
```



---

archive/issue_comments_454504.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T20:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454505.json:
```json
{
    "body": "<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-22T22:25:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454505",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:41'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454506.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,17 @@\n+(follow-up from #30194)\n+\n+... extending `sage.categories.pushout.VectorFunctor`\n+\n+for example:\n+\n+```\n+            sage: M = FreeModule(ZZ, 4, with_basis=None, name='M')\n+            sage: latex(M)\n+            M\n+            sage: M_QQ = pushout(M, QQ)\n+            sage: latex(M_QQ)\n+            M \\otimes \\Bold{Q}\n+```\n \n \n Comment: 1\n```\n",
    "created_at": "2022-08-22T22:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454506",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,17 @@
+(follow-up from #30194)
+
+... extending `sage.categories.pushout.VectorFunctor`
+
+for example:
+
+```
+            sage: M = FreeModule(ZZ, 4, with_basis=None, name='M')
+            sage: latex(M)
+            M
+            sage: M_QQ = pushout(M, QQ)
+            sage: latex(M_QQ)
+            M \otimes \Bold{Q}
+```
 
 
 Comment: 1
```




---

archive/issue_comments_454507.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,18 @@\n+(follow-up from #30194)\n+\n+... extending `sage.categories.pushout.VectorFunctor`\n+\n+for example:\n+\n+```\n+            sage: M = FreeModule(ZZ, 4, with_basis=None, name='M')\n+            sage: latex(M)\n+            M\n+            sage: from sage.categories.pushout import VectorFunctor, pushout\n+            sage: M_QQ = pushout(M, QQ)\n+            sage: latex(M_QQ)\n+            M \\otimes \\Bold{Q}\n+```\n \n \n Comment: 1\n```\n",
    "created_at": "2022-08-22T22:28:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454507",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,18 @@
+(follow-up from #30194)
+
+... extending `sage.categories.pushout.VectorFunctor`
+
+for example:
+
+```
+            sage: M = FreeModule(ZZ, 4, with_basis=None, name='M')
+            sage: latex(M)
+            M
+            sage: from sage.categories.pushout import VectorFunctor, pushout
+            sage: M_QQ = pushout(M, QQ)
+            sage: latex(M_QQ)
+            M \otimes \Bold{Q}
+```
 
 
 Comment: 1
```




---

archive/issue_comments_454508.json:
```json
{
    "body": "<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-23T05:17:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454508",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454509.json:
```json
{
    "body": "<a id='comment:45'></a>Tests pass, the pyright crash is unrelated; needs review",
    "created_at": "2022-08-23T15:37:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454509",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>Tests pass, the pyright crash is unrelated; needs review



---

archive/issue_comments_454510.json:
```json
{
    "body": "<a id='comment:46'></a>While the subclass for the construction version is the proper way to do it, I am not sure how much of a hassle it will create long-term once we have a more general way to do constructions for things that subclass CFM. The hack way would be\n\n```python\ndef construction(self):\n    if self.__class__.__mro__[1] == CombinatorialFreeModule:\n         return VectorFunctor(...)\n    return super().construction()\n```\n(We cannot to `type(self) == CFM` because of the dynamic class created from the category. There is a function or method to get this more robustly, but I don't remember offhand.) I am fairly convinced that your proposal is how we should go, but I just have this little nagging doubt.\n\nOne thing that does need to be changed is that we will have two `CFM` classes with (almost) identical (public) documentations. This is easy to fix by adding a class-level doc to the new class explaining the difference.",
    "created_at": "2022-08-24T03:11:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454510",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:46'></a>While the subclass for the construction version is the proper way to do it, I am not sure how much of a hassle it will create long-term once we have a more general way to do constructions for things that subclass CFM. The hack way would be

```python
def construction(self):
    if self.__class__.__mro__[1] == CombinatorialFreeModule:
         return VectorFunctor(...)
    return super().construction()
```
(We cannot to `type(self) == CFM` because of the dynamic class created from the category. There is a function or method to get this more robustly, but I don't remember offhand.) I am fairly convinced that your proposal is how we should go, but I just have this little nagging doubt.

One thing that does need to be changed is that we will have two `CFM` classes with (almost) identical (public) documentations. This is easy to fix by adding a class-level doc to the new class explaining the difference.



---

archive/issue_comments_454511.json:
```json
{
    "body": "<a id='comment:47'></a>Another hackish way would be to assign `self.construction` in a `__classcall_private__` method.",
    "created_at": "2022-08-24T03:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454511",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>Another hackish way would be to assign `self.construction` in a `__classcall_private__` method.



---

archive/issue_comments_454512.json:
```json
{
    "body": "<a id='comment:48'></a>Replying to [comment:47 mkoeppe]:\n> Another hackish way would be to assign `self.construction` in a `__classcall_private__` method.\n\n\nIndeed, although I think that is even more of a hack since it is doing stuff non-locally (to the method).",
    "created_at": "2022-08-24T03:35:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454512",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:48'></a>Replying to [comment:47 mkoeppe]:
> Another hackish way would be to assign `self.construction` in a `__classcall_private__` method.


Indeed, although I think that is even more of a hack since it is doing stuff non-locally (to the method).



---

archive/issue_comments_454513.json:
```json
{
    "body": "<a id='comment:49'></a>I don't have an objection to using `self.__class__.__base__` or something like this like you suggested. It's probably less confusing than the renaming reimport",
    "created_at": "2022-08-24T03:38:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454513",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>I don't have an objection to using `self.__class__.__base__` or something like this like you suggested. It's probably less confusing than the renaming reimport



---

archive/issue_comments_454514.json:
```json
{
    "body": "<a id='comment:50'></a>I'm making this change now.",
    "created_at": "2022-08-24T04:09:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454514",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:50'></a>I'm making this change now.



---

archive/issue_comments_454515.json:
```json
{
    "body": "<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-24T04:27:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454515",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454516.json:
```json
{
    "body": "<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-24T05:05:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454516",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454517.json:
```json
{
    "body": "<a id='comment:53'></a>I think this is acceptable. \u00c9ric, do you have any comments?",
    "created_at": "2022-08-25T02:43:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454517",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:53'></a>I think this is acceptable. Éric, do you have any comments?



---

archive/issue_comments_454518.json:
```json
{
    "body": "<a id='comment:54'></a>Replying to [comment:53 tscrim]:\n> I think this is acceptable. \u00c9ric, do you have any comments?\n\n\nNo, I don't. This is mostly beyond my knowledge, but thanks for asking ;-)",
    "created_at": "2022-08-26T21:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454518",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:54'></a>Replying to [comment:53 tscrim]:
> I think this is acceptable. Éric, do you have any comments?


No, I don't. This is mostly beyond my knowledge, but thanks for asking ;-)



---

archive/issue_comments_454519.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-08-27T01:22:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454519",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_454520.json:
```json
{
    "body": "<a id='comment:55'></a>Then let it be so.",
    "created_at": "2022-08-27T01:22:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454520",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:55'></a>Then let it be so.



---

archive/issue_comments_454521.json:
```json
{
    "body": "<a id='comment:56'></a>Thanks!",
    "created_at": "2022-08-27T01:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454521",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:56'></a>Thanks!



---

archive/issue_events_078150.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-08-29T11:24:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30235#event-78150"
}
```



---

archive/issue_comments_454522.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-08-29T11:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30235",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30235#issuecomment-454522",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
